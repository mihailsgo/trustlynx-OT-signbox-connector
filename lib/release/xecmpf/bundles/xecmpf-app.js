csui.define("css!xecmpf/pages/start/perspectivewithoutheader",[],function(){}),csui.define("xecmpf/pages/start/perspective-only.page.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/fastclick","csui/utils/contexts/perspective/perspective.context","csui/utils/contexts/factories/connector","csui/pages/start/multi.perspective.routing","csui/utils/base","csui/controls/perspective.panel/perspective.panel.view","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/behaviors/keyboard.navigation/tabables.behavior","csui/utils/page.leaving.blocker","csui/controls/globalmessage/globalmessage","csui/controls/iconpreload/icon.preload.view","css!xecmpf/pages/start/perspectivewithoutheader"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m){var f=i.ItemView.extend({"behaviors":{"TabablesBehavior":{"behaviorClass":d}},"template":!1,"constructor":function(e){i.ItemView.prototype.constructor.call(this,e),this.options.el||this.setElement(document.body);var c=e.context||new o,d=c.getObject(s);if(c.options=c.options||{},c.options.suppressReferencePanel=!0,c.options.navigateMode=e.navigateMode,c.options.enableWorkspaceNavigation=!0,!d.connection.credentials&&!d.authenticator.isAuthenticated()&&!d.authenticator.syncStorage().isAuthenticated())return void this._navigateToSignIn();this.perspectivePanel=new r({"context":c}),this.propagateEventsToViews(this.perspectivePanel),new a({"context":c}).ensureStart({"pushState":!0}),l.isAppleMobile()&&this.$el.addClass("csui-on-ipad"),n.attach(this.el),t(window).on("unload",function(){})},"onRender":function(){if(!this._redirecting){this.$el.addClass("binf-widgets xecm-page-widget"),this.$el.append("<div class='binf-widgets xecm-page-widget-sub-wrapper'></div>"),this.$el.find(".xecm-page-widget-sub-wrapper").addClass("xecm-no-iframe-wrap"),m.ensureOnThePage(),p.setMessageRegionView(this,{"classes":"xecm-global-message","useClass":!0,"sizeToParentContainer":!0});new i.Region({"el":this.$el.find("div.xecm-page-widget-sub-wrapper")}).show(this.perspectivePanel)}},"_navigateToSignIn":function(){a.routesWithSlashes()&&(u.forceDisable(),location.reload()),this._redirecting=!0}});return e.extend(f.prototype,c),f}),csui.define("xecmpf/widgets/integration/folderbrowse/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/integration/folderbrowse/impl/nls/root/localized.strings",{"BackButtonToolItem":"Back","PageWidgetToolItem":"Open Full Page Workspace","SearchToolItem":"Search From Here","SearchFromHerePlaceHolder":"Search From Here","CloseToolTip":"Close"}),csui.define("css!xecmpf/widgets/integration/folderbrowse/impl/folderbrowse",[],function(){}),csui.define("xecmpf/widgets/integration/folderbrowse/search.box.view",["module","csui/lib/underscore","csui/lib/jquery","csui/widgets/search.box/search.box.view","i18n!xecmpf/widgets/integration/folderbrowse/impl/nls/localized.strings","css!xecmpf/widgets/integration/folderbrowse/impl/folderbrowse"],function(e,t,i,n,o){"use strict";var s=t.defaults({},e.config(),{"showOptionsDropDown":!1,"showSearchInput":!0,"searchFromHere":!0,"customSearchIconClass":"xecmpf-icon-search","customSearchIconEnabledClass":"xecmpf-icon-search-md","placeholder":o.SearchFromHerePlaceHolder});return n.extend({"constructor":function(e){e=e||{},e.data=t.defaults({},e.data,s),n.prototype.constructor.call(this,e)},"searchIconClicked":function(e){e.preventDefault(),e.stopPropagation(),n.prototype.searchIconClicked.call(this,e)},"inputTyped":function(e){32===e.which?e.stopPropagation():n.prototype.inputTyped.call(this,e)}})}),csui.define("xecmpf/widgets/integration/folderbrowse/full.page.workspace.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/contexts/factories/node","csui/utils/contexts/perspective/perspective.context","csui/controls/perspective.panel/perspective.panel.view","csui/lib/radio","csui/controls/globalmessage/globalmessage","csui/pages/start/multi.perspective.routing","csui/models/navigation.history","css!xecmpf/widgets/integration/folderbrowse/impl/folderbrowse"],function(e,t,i,n,o,s,a,l,r,c){"use strict";var d,u=a.channel("xecmpf-workspace");return i.ItemView.extend({"className":"xecm-full-page-workspace","constructor":function(e){e=e||{},i.ItemView.prototype.constructor.apply(this,arguments),c.urlCanChange=!1,csui.require.config({"config":{"csui/utils/commands/back.to.last.fragment":{"enabled":!1},"xecmpf/widgets/header/header.view":{"hideMetadata":!0,"pageWidget":!0,"toolbarBlacklist":["SearchFromHere"]},"xecmpf/utils/commands/folderbrowse/search.container":{"pageWidget":!0,"enabled":!0}}})},"template":!1,"onRender":function(){csui.require.config({"config":{"csui/integration/folderbrowser2/container.enforcer":{"enabled":!1}}});var a={"connector":this.options.connector};d=new o({"factories":a}),new r({"context":d}).ensureStart({"pushState":!1,"silent":!0});var c=d.viewStateModel;c&&(c.clearHistory(),c.set(c.CONSTANTS.CURRENT_ROUTER,void 0));var p=this,m=new s({"context":d}),f=d.hasModel("nextNode")?d.getModel("nextNode"):void 0;if(f){f.get("id")===this.options.nodeID&&f.unset("id",{"silent":!0}),f.set("id",this.options.nodeID),e.extend(d.options,{"initialWkspId":p.options.nodeID,"viewMode":p.options.data.viewMode,"navigateMode":p.options.data.navigateMode,"enableWorkspaceNavigation":!0,"hideBreadcrumbsPanel":!0,"headerViewOptions":{"hideWorkspaceType":!0,"hideDescription":!0,"hideActivityFeed":!0,"hideToolbarExtension":!0,"enableCollapse":!e.isUndefined(p.options.enableCollapse)&&p.options.enableCollapse}}),void 0===p.options.renderType||"dialog"!==p.options.renderType?(p.listenTo(u,"xecm:delete:workspace",function(){e.defaults(p.options.data,{"deletecallback":!0}),p.options.status.wksp_controller.selectWorkspace(p.options)}),p.listenTo(p.options.status.wksp_controller,"xecm:change:fullPage",function(e){e&&"enterContainer"===e.action&&p.enterContainer(e,d)}),m.on("swap:perspective",function(){p.removeMaximizedWidget.apply(m)})):"dialog"===p.options.renderType&&(m.on("show:perspective swap:perspective",function(){p.removeMaximizedWidget.apply(m),0===p.$el.find(".conws-header-wrapper").length?p.trigger("show:dialog:header"):p.trigger("hide:dialog:header")}),p.listenTo(d.perspective,"close:workspace:dialog",function(){u.trigger("xecm:close:fullpage:overlay")})),d.options.suppressReferencePanel=!0,p.listenTo(d,"clear",function(){var e=d.getModel(n);e.get("id")||e.set(f.toJSON())}),p.listenTo(d,"maximize:widget",e.bind(p.addMaximizedWidget,m)),p.listenTo(d,"restore:widget:size",e.bind(p.removeMaximizedWidget,m)),l.setMessageRegionView(new i.View({"el":t.fn.binf_modal.getDefaultContainer()}),{"classes":"xecm-global-message","useClass":!0,"sizeToParentContainer":!0});var h=new i.Region({"el":p.el});p.$el.addClass("binf-widgets xecm-page-widget xecm-no-iframe-wrap"),h.show(m),d.applyPerspective(f)}},"onBeforeDestroy":function(){csui.require.config({"config":{"xecmpf/utils/commands/folderbrowse/search.container":{"pageWidget":!1,"enabled":!0}}})},"onDestroy":function(){d&&d.destroy()},"addMaximizedWidget":function(){t(".xecm-no-iframe-wrap").length&&!t("body").hasClass("binf-widgets")&&(t(".xecm-no-iframe-wrap").hasClass("csui-maximized-widget-mode")||(t(".xecm-no-iframe-wrap").addClass("csui-maximized-widget-mode"),this.currentPerspectiveView&&this.currentPerspectiveView.perspectiveView&&this.currentPerspectiveView.perspectiveView.tabPanel&&this.currentPerspectiveView.perspectiveView.tabPanel.trigger("dom:refresh")))},"removeMaximizedWidget":function(){t(".xecm-no-iframe-wrap").length&&!t("body").hasClass("binf-widgets")&&t(".xecm-no-iframe-wrap").hasClass("csui-maximized-widget-mode")&&(t(".xecm-no-iframe-wrap").removeClass("csui-maximized-widget-mode"),this.currentPerspectiveView&&this.currentPerspectiveView.perspectiveView&&this.currentPerspectiveView.perspectiveView.tabPanel&&this.currentPerspectiveView.perspectiveView.tabPanel.trigger("dom:refresh"))},"enterContainer":function(e,t){if(t){var i=t.getModel("nextNode");i&&i.set("id",e.id)}}})}),csui.define("xecmpf/widgets/integration/folderbrowse/search.results/search.results.view",["module","csui/lib/underscore","csui/lib/jquery","csui/widgets/search.results/search.results.view","i18n!xecmpf/widgets/integration/folderbrowse/impl/nls/localized.strings","css!xecmpf/widgets/integration/folderbrowse/impl/folderbrowse"],function(e,t,i,n,o){"use strict";return n.extend({"constructor":function(e){e=e||{},e=t.extend(e,e.data),n.prototype.constructor.call(this,e),this.listenTo(this,"go:back",function(){e.context.viewStateModel.restoreLastFragment()})}})}),csui.define("xecmpf/utils/commands/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/utils/commands/nls/root/localized.strings",{"DetachPageLeavingWarning":"If you leave the page now, pending items will not be detached.","DetachBusAtts":"Detaching {0} business objects","DetachingOneBusAtt":"Detaching business object","DetachBusAttsNoneMessage":"No business objects detached.","DetachOneBusAttSuccessMessage":"1 business object succeeded to detach.","DetachSomeBusAttsSuccessMessage":"{0} business objects succeeded to detach.","DetachManyBusAttsSuccessMessage":"{0} business objects succeeded to detach.","DetachOneBusAttFailMessage":"1 business object failed to detach.","DetachSomeBusAttsFailMessage":"{0} business objects failed to detach.","DetachManyBusAttsFailMessage2":"{2} business objects failed to detach.","DetachSomeBusAttsFailMessage2":"{2} business objects failed to detach.","DetachingSomeBusAtts":"Detaching {0} business objets","DetachBusAttsCommandConfirmDialogTitle":"Detach","DetachBusAttsCommandConfirmDialogSingleMessage":"Do you want to detach {0}?","DetachBusAttsCommandConfirmDialogMultipleMessage":"Do you want to detach {0} items?","CommandDoneVerbDetached":"detached","CommandNameDetach":"Detach Business Attachment","AttachPageLeavingWarning":"If you leave the page now, pending items will not be detached.","AttachBusAtts":"Attaching {0} business objects","AttachingOneBusAtt":"Attaching business object","AttachBusAttsNoneMessage":"No business objects attached.","AttachOneBusAttSuccessMessage":"1 business object succeeded to attach.","AttachSomeBusAttsSuccessMessage":"{0} business objects succeeded to attach.","AttachManyBusAttsSuccessMessage":"{0} business objects succeeded to attach.","AttachOneBusAttFailMessage":"1 business object failed to attach.","AttachSomeBusAttsFailMessage":"{0} business objects failed to attach.","AttachManyBusAttsFailMessage":"{0} business objects failed to attach.","AttachManyBusAttsFailMessage2":"{2} business objects failed to attach.","AttachSomeBusAttsFailMessage2":"{2} business objects failed to attach.","AttachingSomeBusAtts":"attaching {0} business objets","AttachBusAttsCommandConfirmDialogTitle":"Attach","AttachBusAttsCommandConfirmDialogSingleMessage":"Do you want to attach {0}?","AttachBusAttsCommandConfirmDialogMultipleMessage":"Do you want to attach {0} items?","AttachBusAttsCommandConfirmDialogHtml":"<span class='msgIcon WarningIcon'><%- message %></span>","CommandDoneVerbAttached":"attached","CommandNameAttach":"Attach Business Attachment","CommandNameOpenSapObject":"Open Sap Object","CommandNameGoToWorkspace":"Go To Workspace","GoToWorkpsaceHistory":"Go To Workspace History","OpenFullPageWorkpsace":"Open Full Page Wokspace","SearchWorkspace":"Search From Here","SearchBackTooltip":"Go Back to '{0}'","BOAttachmentCreate":{"name":"Add business attachment","verb":"attach","doneVerb":"attached","addButtonLabel":"Attach","pageLeavingWarning":"If you leave the page now, pending items will not be attached.","successMessages":{"formatForNone":"No business attachments attached.","formatForOne":"1 business attachment succeeded to attach.","formatForMultiple":"{0} business attachments succeeded to attach."},"errorMessages":{"formatForOne":"1 business attachment failed to attach.","formatForMultiple":"{0} business attachments failed to attach."},"progressBarMessages":{"oneFileTitle":"Attaching business attachment","multiFilePending":"Attaching {0} business attachments","multiFileFailure":"{2} business attachments failed to attach."}},"backButtonToolTip":"Go back","CommandSnapshot":"Snapshot","snapshotCreated":"Snapshot created","snapshotCreatedWithName":"Snapshot '{0}' created","snapshotFailed":"Snapshot creation failed","CommandDoneVerbCreated":"created","DeleteCommandConfirmDialogTitle":"Delete","DeleteCommandConfirmDialogHtml":"<span class='msgIcon WarningIcon'><%- message %></span>","DeleteCommandConfirmDialogSingleMessage":"Do you want to delete {0}?","DeleteCommandConfirmDialogMultipleMessage":"Do you want to delete {0} items?","CommandTitleDelete":"Delete items","CommandNameDelete":"Delete","CommandVerbDelete":"delete","DeletePageLeavingWarning":"If you leave the page now, pending items will not be deleted.","DeleteItemFailed":"Deleting item {0} failed.","DeleteItems":"Deleting {0} items","DeletingOneItem":'Deleting "{0}"',"DeletingSomeItems":"Deleting {0} items","DeleteItemsNoneMessage":"No items deleted.","DeleteOneItemSuccessMessage":"'{0}' deleted.","DeleteSomeItemsSuccessMessage":"{0} items successfully deleted.","DeleteManyItemsSuccessMessage":"{0} items successfully deleted.","DeleteOneItemFailMessage":"'{0}' failed to delete.","DeleteManyItemsOneFailMessage":"1 item failed to delete.","DeleteSomeItemsFailMessage":"{0} items failed to delete.","DeleteManyItemsFailMessage":"{0} items failed to delete.","DeleteSomeItemsFailMessage2":"{2} items failed to delete.","DeleteManyItemsFailMessage2":"{2} items failed to delete.","deletingLocationLabel":'Deleting from "{0}"',"deletedLocationLabel":'Deleted from "{0}"',"DeleteNotAllowed":"Unable to delete. Please try again when the current operation is finished","Refresh":"Events refreshed.","RefreshError":"Error while refreshing.","AuthenticationError":"Authentication failed","addEvents":"Add events","Delete":"Delete","AddtoWareHouse":"Add wareHouse","system_name":"Source","ActionPlans":"Action plans","noPlans":"No plans added","dialogTitle":"Event action center","AddActionPlan":"Add action plan","NoMoreToAdd":"No more to add in the leading system","add":"Add","cancel":"Cancel","NoLeadingSys":"All events for this source are already added.","selectEvent":"Select event","selectSource":"Select source","SaveFailError":"Unable tosave event server error","Event":"Event","close":"Close","createDocumentCommand":"Create document","createDocumentDialogTitle":"Create document","createDocumentCancelBtnLabel":"Cancel"}),csui.define("xecmpf/utils/commands/xecmpf.nodestable.toolitems",["i18n!xecmpf/utils/commands/nls/localized.strings"],function(e){"use strict";return{"leftToolbar":[{"signature":"XECMPFCreateDocument","icon":"icon xecmpf-nodestable-docgen-action","name":e.createDocumentCommand,"type":"leftToolbar"}],"inlineActionbar":[{"signature":"XECMPFCreateDocument","name":e.createDocumentCommand,"icon":"icon xecmpf-workspaces-docgen"}]}}),csui.define("xecmpf/utils/commands/xecmpf.searchresults.toolitems",["i18n!xecmpf/utils/commands/nls/localized.strings"],function(e){"use strict";return{"inlineToolbar":[{"signature":"XECMPFCreateDocument","name":e.createDocumentCommand,"icon":"icon xecmpf-workspaces-docgen"}],"tabularInlineToolbar":[{"signature":"XECMPFCreateDocument","name":e.createDocumentCommand,"icon":"icon xecmpf-workspaces-docgen"}]}}),csui.define("xecmpf/utils/contexts/factories/eventactioncenter/eventactioncentercolumncollection",["csui/lib/underscore","csui/lib/backbone","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o){var s=i.extend({"constructor":function(e,t){if(e&&!e.title){var n=e.column_key;e.title=o[n]}i.prototype.constructor.call(this,e,t)}});return n.extend({"model":s,"constructor":function(e,t){e||(e=[{"key":"system_name","contextual_menu":!1,"name":o.system_name},{"key":"name","align":"left","title":o.Event},{"key":"action_plan_text","name":o.ActionPlans,"isNaming":!0}],e.forEach(function(e,t){e.definitions_order=t+100,e.column_key=e.key})),n.prototype.constructor.call(this,e,t)}})}),csui.define("xecmpf/utils/contexts/factories/eventactioncenter/server.adaptor.mixin",["csui/lib/underscore","csui/utils/url","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i){"use strict";return{"mixin":function(i){return e.extend(i,{"makeServerAdaptor":function(e){return this},"url":function(e){return t.combine(this.connector.getConnectionUrl().getApiBase("v2"),"eventactioncenter/eventdefinitions")},"parse":function(e){this.options.fetched=!1;var t=[],i={};i.data={};for(var n in e.results.data){var o=e.results.data[n].filter(function(e){return 1===e.status});i.data[n]=o,o.forEach(function(e,i){1===e.status&&t.push({"id":e.dataID,"system_name":e.namespace,"namespace":e.namespace,"name":e.name,"event_name":e.name,"action_plan_text":e.actionPlanCountText,"action_plan_count":e.actionPlanCount,"status":0,"event_def_id":e.dataID,"type":e.type})})}return t}})}}}),csui.define("xecmpf/utils/contexts/factories/eventactioncenter/eventactioncentercollection",["csui/lib/underscore","csui/lib/backbone","xecmpf/utils/contexts/factories/eventactioncenter/eventactioncentercolumncollection","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin","csui/models/mixins/v2.fields/v2.fields.mixin","csui/models/mixins/v2.expandable/v2.expandable.mixin","csui/models/mixins/v2.commandable/v2.commandable.mixin","csui/models/mixins/state.requestor/state.requestor.mixin","csui/models/mixins/v2.delayed.commandable/v2.delayed.commandable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin","csui/models/node/node.model","xecmpf/utils/contexts/factories/eventactioncenter/server.adaptor.mixin","csui/utils/deepClone/deepClone"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f){"use strict";var h=m.extend({}),b=t.Collection.extend({"model":h,"constructor":function(n,o){t.Collection.prototype.constructor.apply(this,arguments),o&&(this.options=e.pick(o,["connector","autoreset","includeResources","fields","expand","eventactioncenter"])),this.makeConnectable(o).makeFetchable(o).makeAdditionalResourcesV2Mixin(o).makeFieldsV2(o).makeExpandableV2(o).makeStateRequestor(o).makeCommandableV2(o).makeClientSideBrowsable(o).makeBrowsableV2Response(o).makeDelayedCommandableV2(o).makeServerAdaptor(o),this.columns=new i},"_prepareModel":function(e,i){return i||(i={}),i.promotedActionCommands=this.promotedActionCommands,i.nonPromotedActionCommands=this.nonPromotedActionCommands,t.Collection.prototype._prepareModel.call(this,e,i)},"getResourceScope":function(){return e.deepClone({"fields":this.fields,"expand":this.expand,"includeResources":this._additionalResources,"commands":this.commands,"defaultActionCommands":this.defaultActionCommands})},"setResourceScope":function(e){this.excludeResources(),e.includeResources&&this.includeResources(e.includeResources),this.resetFields(),e.fields&&this.setFields(e.fields),this.resetExpand(),e.expand&&this.setExpand(e.expand),this.resetCommands(),e.commands&&this.setCommands(e.commands),this.resetDefaultActionCommands(),e.defaultActionCommands&&this.setDefaultActionCommands(e.defaultActionCommands)}});return u.mixin(b.prototype),p.mixin(b.prototype),n.mixin(b.prototype),o.mixin(b.prototype),s.mixin(b.prototype),a.mixin(b.prototype),l.mixin(b.prototype),c.mixin(b.prototype),d.mixin(b.prototype),f.mixin(b.prototype),b}),csui.define("xecmpf/utils/contexts/factories/eventactioncenter/eventactioncenterfactory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","xecmpf/utils/contexts/factories/eventactioncenter/eventactioncentercollection","csui/utils/commands"],function(e,t,i,n,o,s,a){"use strict";return n.extend({"propertyPrefix":"eventactioncenterfeed","constructor":function(e,a){n.prototype.constructor.apply(this,arguments);var l=this.options.eventactioncenterfeed||{};if(!(l instanceof i.Model)){var r=e.getObject(o,a);l=new s(l.models,t.extend({"connector":r},l.options,{"autoreset":!0}))}this.property=l},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"stateEnabled":!0,"commands":a.getAllSignatures()})}})}),csui.define("xecmpf/widgets/eac/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/eac/impl/nls/root/lang",{"dialogTitle":"Event action center","emptyListText":"Add new event","toolbarItemBack":"Back","actionPlan":"Action plan","addActionPlan":"Add action plan","columnEventName":"Event Name","columnSystemName":"System Name","columnActionPlan":"Action Plan","sourceLabel":"Source","rulesLabel":"Rules","runAs":"Run as","processMode":"Process mode","conjunctionAndLabel":"and","conjunctionOrLabel":"or","operatorEqualtoLabel":"equal to","operatorNotequaltoLabel":"not equal to","synchronouslyProcessLabel":"Synchronously","asynchronouslyProcessLabel":"Asynchronously","csObjLabel":"Content Server object","evtPropLabel":"Event property","prevActLabel":"Result from previous action","workspaceLabel":"Parent workspace","eventPropLabel":"Event property","reminderInitLabel":"Item initiating the event","selectSourceForEscalation":"Select source for escalation","labelExtendedECMVolume":"Extended ECM","saveLabel":"Save","cancelLabel":"Cancel","deleteActionPlanButton":"Delete","deleteActionPlanButtonAria":"Delete action plan","actionPlansGroup":"Action plans","backTitle":"Back","rulesTabLabel":"Rules","actionsTabLabel":"Actions","processModeTabLabel":"Process mode","rulesSetLegend":"Conditions","deleteActionPlanConfirmatonTitle":"Delete action plan","deleteActionPlanConfirmatonText":"Are you sure you want to delete {0}? ","newActionPlan":"New action plan","actionPlansListHeader":"Action plans","createLabel":"Create","closeLabel":"Close","genericWarningMsgOnDeletion":"Server Error: Unable to perform the action","warningMsgOnActionPlanNavigation":"All unsaved changes will be lost. Are you sure you want to continue?","actionPlanCreateError":"An item with the name '{0}' already exists.","actionPlanNavigationDialogTitle":"Unsaved changes","actionAttrParameterNameLabel":"Parameters","actionAttrParameterLabel":"Parameter","actionAttrSourceLabel":"Source","actionAttrValueLabel":"Value","actionPlanTitlePlaceholder":"Enter name","addToWareHouseFailure":"Failed to add to warehouse","requiredField":"This is a required field","conjunctionFieldLabel":"Expression","fromFieldLabel":"Event properties","toFieldLabel":"Value","operatorFieldLabel":"Operator","configureActionPlanText":"Add a name to start configuring action plan","delete":"Delete events","addToWareHouse":"Add to warehouse","rulesFieldPlaceholder":"Select value","Unclassified":"Unclassified","Any":"Any","Custom":"Custom","addEvents":"Add event","noReminderTypes":"No reminder types available for the reminder clients","reminderClientPlaceholder":"Select client","reminderTypePlaceholder":"Select type","eventInitDay":"Event initiation day","selectSourceForDueDate":"Select source for due date","days":"days","weeks":"weeks","months":"months","years":"years","selectSourceForAssignee":"Select source for assignee","roleLabel":"Role","categoryAttrLabel":"Category attribute","DependsOn":"Depends on previous action","DependsOnText":"Enable to execute current action after the completion of previous action","selectDifferentParameter":"Select a different parameter","centralWorkspaceTemplateIdPlaceholder":"Enter document template id","actions":"Actions","ContentServerUser":"Content Server user","fromPreviousAction":"From previous action","userInput":"User Input","Attribute":"Attribute","fromDesktop":"From desktop","fromShortcut":"Add Shortcut"}),csui.define("xecmpf/widgets/eac/toolbaritems",["csui/lib/underscore","i18n!xecmpf/widgets/eac/impl/nls/lang","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","csui-ext!csui/widgets/nodestable/toolbaritems"],function(e,t,i,n,o){"use strict";return{"leftToolbar":new i({"main":[{"signature":"EACBack","name":t.toolbarItemBack,"toolItemAria":t.ToolbarItemBackAria,"iconName":"csui_action_back32"},{"signature":"addEvents","name":t.addEvents,"type":806,"iconName":"csui_action_add32"}]}),"tableHeaderToolbar":new i({"info":[{"signature":"addActionPlan","name":t.addActionPlan},{"signature":"addToWarehouse","name":t.addToWareHouse},{"signature":"deleteEvent","name":t.delete}]},{"maxItemsShown":15,"dropDownIcon":"icon icon-toolbar-more","dropDownSvgId":"themes--carbonfiber--image--generated_icons--action_more32","dropDownText":t.ToolbarItemMore,"addGroupSeparators":!1,"lazyActions":!0}),"inlineActionbar":new i({"main":[{"signature":"addActionPlan","name":"Add Action Plan","icon":"icon icon-toolbarAdd","svgId":"themes--carbonfiber--image--generated_icons--action_add32"}]},{"maxItemsShown":5,"dropDownText":t.ToolbarItemMore,"dropDownIcon":"icon icon-toolbar-more","dropDownSvgId":"themes--carbonfiber--image--generated_icons--action_more32","addGroupSeparators":!1})}}),csui.define("xecmpf/widgets/eac/headermenuitems",["csui/lib/underscore","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","csui-ext!xecmpf/widgets/eac/headermenuitems"],function(e,t,i,n,o){"use strict";var s={"headerMenuToolbar":new i({},{"maxItemsShown":0,"dropDownIcon":"icon icon-expandArrowDown","dropDownSvgId":"themes--carbonfiber--image--generated_icons--action_caret_down32"})};return o&&e.each(o,function(t){e.each(t,function(t,i){var o=s[i];if(!o)throw new Error("Invalid target toolbar: "+i);e.each(t,function(e){e=new n(e),o.addItem(e)})})}),s.clone=function(){return i.cloneToolbarItems(this)},s}),csui.define("xecmpf/widgets/eac/headermenuitems.mask",["module","csui/lib/underscore","csui/controls/toolbar/toolitems.mask","csui/utils/toolitem.masks/global.toolitems.mask"],function(e,t,i,n){"use strict";return i.extend({"constructor":function(){var o=e.config(),s=new n;i.prototype.constructor.call(this,s,{"normalize":!1}),t.each(o,function(e,t){this.extendMask(e)},this),this.storeMask()}})}),csui.define("css!xecmpf/widgets/eac/impl/eac",[],function(){}),csui.define("xecmpf/widgets/eac/eac.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/models/node/node.model","csui/utils/contexts/factories/node","csui/controls/tabletoolbar/tabletoolbar.view","csui/controls/toolbar/toolbar.command.controller","xecmpf/utils/contexts/factories/eventactioncenter/eventactioncentercolumncollection","xecmpf/utils/contexts/factories/eventactioncenter/eventactioncenterfactory","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/mixins/view.state/node.view.state.mixin","csui/controls/mixins/view.state/multi.node.fetch.mixin","csui/controls/mixins/view.state/node.selection.restore.mixin","csui/widgets/nodestable/nodestable.view","csui/utils/commands","csui/controls/globalmessage/globalmessage","xecmpf/widgets/eac/toolbaritems","xecmpf/widgets/eac/headermenuitems","xecmpf/widgets/eac/headermenuitems.mask","i18n!xecmpf/widgets/eac/impl/nls/lang","css!xecmpf/widgets/eac/impl/eac"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f,h,b,g,w,v,y,x,k,_){"use strict";var C=g.extend({"constructor":function(e){e=i.defaults(e,{"orderBy":"name desc","tableColumns":new u,"toolbarItems":y,"headermenuItems":x.clone(),"urlParamsList":[],"showSelectionCounter":!0}),g.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions()},"initialize":function(){this.container=this.options.container||this.context.getModel(r),this.container.set("type",806),this.container.set("name","Event action center"),this.trigger("update:model",this.container),this.collection=this.options.collection,this.collection||(this.collection=this.context.getCollection(p,{"options":this._restoreCollectionOptionsFromViewState()})),this.initSelectionMixin(this.options,this.collection),this._allCommands=this.defaultActionController.actionItems.getAllCommandSignatures(w),this.commandController=new d({"commands":w}),this.collection&&this.listenTo(this.collection,"sync",function(){this.clearAllSelectedNodes()}),this.listenTo(this.commandController,"click:toolitem:action",this._toolbarActionTriggered),this.listenTo(this.commandController,"before:execute:command",this._beforeExecuteCommand),this.listenTo(this.commandController,"after:execute:command",this._afterExecuteCommand),this.collection.setResourceScope(p.getDefaultResourceScope()),this.collection.setDefaultActionCommands(this._allCommands),this.collection.setEnabledDelayRestCommands(!0),this.collection.delayedActions&&this.listenTo(this.collection.delayedActions,"error",function(e,t,i){var n=new a.Error(t);v.showMessage("error",n.message)}),this.columns=this.collection.columns||this.context.getCollection(p),this.columns=this.collection.columns,this._setToolBar(),this.setTableView({"orderBy":this.options.orderBy,"filterBy":this.options.filterBy,"nameEdit":!1,"haveDetailsRowExpandCollapseColumn":!1,"showSelectionCounter":!0,"tableColumns":this.options.tableColumns,"tableTexts":{"zeroRecords":_.emptyListText}}),this.tableView.listenTo(this.tableView,"clicked:cell",function(e){var i=window.event;0===e.colIndex||t(i.target).hasClass("icon-toolbarAdd")||this.triggerMethod("execute:defaultAction",e.model)});var e=this;this.tableView.$el.on("keydown",function(i){if(13===i.originalEvent.keyCode)for(var n=0;n<e.collection.length;n++)(i.target.getAttribute("aria-label")===e.collection.models[n].get("system_name")&&t(i.target).siblings('.csui-table-cell-generic-text[data-csui-attribute="name"]').attr("aria-label")===e.collection.models[n].get("name")||i.target.getAttribute("aria-label")===e.collection.models[n].get("name")&&t(i.target).siblings('.csui-table-cell-generic-text[data-csui-attribute="system_name"]').attr("aria-label")===e.collection.models[n].get("system_name")||i.target.getAttribute("aria-label")===e.collection.models[n].get("action_plan_text")&&t(i.target).siblings('.csui-table-cell-generic-text[data-csui-attribute="name"]').attr("aria-label")===e.collection.models[n].get("name")&&t(i.target).siblings('.csui-table-cell-generic-text[data-csui-attribute="system_name"]').attr("aria-label")===e.collection.models[n].get("system_name"))&&e.triggerMethod("execute:defaultAction",e.collection.models[n])}),this.listenTo(this.tableView,"render",function(){if(this.$el.remove(".csui-table-empty-default"),this.tableView.tableBodyView&&(this.tableView.tableBodyView.accFocusedCell.column=1),0===this.tableView.collection.length&&(this.$el.find(".icon-toolbarAdd").prop("tabindex","0"),this.$el.find(".icon-toolbarAdd").trigger("focus")),this.tableView.collection.length>1){var e=this.tableView.$el.find(".csui-table-row-shows-inlineform");e.length&&e.find("td.csui-inlineform-parent").attr("colspan",3)}0===this.tableView.collection.length?this.$el.find("thead button").hide():this.$el.find("thead button").show()}),this._setTableRowSelectionToolbarEventListeners(),this.setPagination(),this.options.collection&&(this.collection.fetched=!1)},"_setToolBar":function(){var e=new l({"id":void 0},{"connector":this.collection.connector});this.collection.node=e,this.tableToolbarView=new c({"context":this.options.context,"toolbarItems":this.options.toolbarItems,"headermenuItems":this.options.headermenuItems,"headermenuItemsMask":this.options.headermenuItemsMask,"container":this.container,"collection":this.collection,"originatingView":this,"blockingParentView":this.options.blockingParentView||this,"addableTypes":this.addableTypes,"toolbarCommandController":this.commandController})}});return i.extend(C.prototype,m),i.extend(C.prototype,f),i.extend(C.prototype,h),i.extend(C.prototype,b),C}),
csui.define("hbs!xecmpf/widgets/integration/folderbrowse/modaldialog/impl/modal.dialog",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-modal-dialog binf-modal-lg">\r\n  <div class="binf-modal-content">\r\n    <div class="xecm-modal-header">\r\n      <div title="'+e.escapeExpression((a=null!=(a=l(i,"closeToolTip")||(null!=t?l(t,"closeToolTip"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"closeToolTip","hash":{},"loc":{"start":{"line":4,"column":18},"end":{"line":4,"column":34}}}):a))+'"\r\n          class="cs-close" tabindex="0" aria-label="'+e.escapeExpression((a=null!=(a=l(i,"closeToolTip")||(null!=t?l(t,"closeToolTip"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"closeToolTip","hash":{},"loc":{"start":{"line":5,"column":52},"end":{"line":5,"column":68}}}):a))+'" role="button">\r\n        '+(null!=(s=(l(i,"icon-v2")||t&&l(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","theme":null!=t?l(t,"iconTheme"):t,"iconName":"csui_action_minimize32"},"loc":{"start":{"line":6,"column":8},"end":{"line":6,"column":85}}}))?s:"")+'\r\n      </div>\r\n    </div>\r\n    <div class="binf-modal-body"></div>\r\n  </div>\r\n</div>'}});return i.registerPartial("xecmpf_widgets_integration_folderbrowse_modaldialog_impl_modal.dialog",n),n}),csui.define("css!xecmpf/widgets/integration/folderbrowse/modaldialog/impl/modal.dialog",[],function(){}),csui.define("xecmpf/widgets/integration/folderbrowse/modaldialog/modal.dialog.view",["csui/lib/underscore","csui/controls/dialog/dialog.view","hbs!xecmpf/widgets/integration/folderbrowse/modaldialog/impl/modal.dialog","i18n!xecmpf/widgets/integration/folderbrowse/impl/nls/localized.strings","css!xecmpf/widgets/integration/folderbrowse/modaldialog/impl/modal.dialog","csui/controls/icons.v2"],function(e,t,i,n){return t.extend({"template":i,"templateHelpers":function(){return{"closeToolTip":n.CloseToolTip,"iconName":this._iconName,"iconTheme":this.options.useIconsForDarkBackground?"dark":""}},"events":function(){return e.extend({},t.prototype.events,{"keypress .cs-close":"onKeyPress"})},"onKeyPress":function(e){var t=e.keyCode;13!==t&&32!==t||(e.preventDefault(),e.stopPropagation(),this.destroy())}})}),csui.define("xecmpf/utils/table/inlineforms/eventactioncenter/factories/server.adaptor.mixin",["csui/lib/underscore","csui/utils/url"],function(e,t){"use strict";return{"mixin":function(i){return e.extend(i,{"makeServerAdaptor":function(e){return this},"url":function(e){return t.combine(this.connector.getConnectionUrl().getApiBase("v2"),"eventactioncenter/eventdefinitions")},"parse":function(e){this.options.fetched=!1;var t={};t.data={};for(var i in e.results.data){var n=e.results.data[i].filter(function(e){return 0===e.status});t.data[i]=n}return t}})}}}),csui.define("xecmpf/utils/table/inlineforms/eventactioncenter/factories/eventfeedmodel",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin","csui/models/mixins/v2.fields/v2.fields.mixin","csui/models/mixins/v2.expandable/v2.expandable.mixin","csui/models/mixins/v2.commandable/v2.commandable.mixin","csui/models/mixins/state.requestor/state.requestor.mixin","csui/models/mixins/v2.delayed.commandable/v2.delayed.commandable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin","csui/models/node/node.model","xecmpf/utils/table/inlineforms/eventactioncenter/factories/server.adaptor.mixin"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m){"use strict";var f=p.extend({}),h=t.Collection.extend({"model":f,"constructor":function(i,n){t.Collection.prototype.constructor.apply(this,arguments),n&&(this.options=e.pick(n,["connector","autoreset","includeResources","fields","expand","eventfeed"])),this.makeConnectable(n).makeFetchable(n).makeAdditionalResourcesV2Mixin(n).makeFieldsV2(n).makeExpandableV2(n).makeStateRequestor(n).makeCommandableV2(n).makeClientSideBrowsable(n).makeBrowsableV2Response(n).makeDelayedCommandableV2(n).makeServerAdaptor(n)},"_prepareModel":function(e,i){return i||(i={}),i.promotedActionCommands=this.promotedActionCommands,i.nonPromotedActionCommands=this.nonPromotedActionCommands,t.Collection.prototype._prepareModel.call(this,e,i)},"getResourceScope":function(){return e.deepClone({"fields":this.fields,"expand":this.expand,"includeResources":this._additionalResources,"commands":this.commands,"defaultActionCommands":this.defaultActionCommands})},"setResourceScope":function(e){this.excludeResources(),e.includeResources&&this.includeResources(e.includeResources),this.resetFields(),e.fields&&this.setFields(e.fields),this.resetExpand(),e.expand&&this.setExpand(e.expand),this.resetCommands(),e.commands&&this.setCommands(e.commands),this.resetDefaultActionCommands(),e.defaultActionCommands&&this.setDefaultActionCommands(e.defaultActionCommands)}});return d.mixin(h.prototype),u.mixin(h.prototype),i.mixin(h.prototype),n.mixin(h.prototype),o.mixin(h.prototype),s.mixin(h.prototype),a.mixin(h.prototype),r.mixin(h.prototype),c.mixin(h.prototype),m.mixin(h.prototype),h}),csui.define("xecmpf/utils/table/inlineforms/eventactioncenter/factories/event.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","xecmpf/utils/table/inlineforms/eventactioncenter/factories/eventfeedmodel","csui/utils/commands"],function(e,t,i,n,o,s,a){"use strict";return n.extend({"propertyPrefix":"eventfeed","constructor":function(e,a){n.prototype.constructor.apply(this,arguments);var l=this.options.eventfeed||{};if(!(l instanceof i.Model)){var r=e.getObject(o,a);l=new s(l.models,t.extend({"connector":r},l.options,{"autoreset":!0}))}this.property=l,this.property.fetched=!1},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"stateEnabled":!0,"commands":a.getAllSignatures()})}})}),csui.define("hbs!xecmpf/utils/table/inlineforms/eventactioncenter/impl/event",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <option tabindex="0"><a data-id="'+e.escapeExpression(e.lambda(null!=t?a(t,"id"):t,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"attributes"):t)?a(s,"event_name"):s,t))+'">'+e.escapeExpression(e.lambda(t,t))+"</a></option>      \r\n        \r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-inlineform-group">\r\n  <div data-csui-attribute="system_name">\r\n    <select class="xecmpf-eac-inlineform-select icon-caret-down" tabindex="0" >  \r\n      \r\n'+(null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"eventproperties"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":10},"end":{"line":8,"column":19}}}))?s:"")+'    </select>\r\n  </div>  \r\n  <div data-csui-attribute="name">\r\n    <select  id="xecmpf-eac-inlineform-options" class="xecmpf-eac-inlineform-options icon-caret-down" tabindex="0">\r\n              \x3c!-- populated using JavaScript --\x3e\r\n              <option value="Select Event" tabindex="0">'+e.escapeExpression((a=null!=(a=l(i,"selectEvent")||(null!=t?l(t,"selectEvent"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"selectEvent","hash":{},"loc":{"start":{"line":14,"column":56},"end":{"line":14,"column":71}}}):a))+'</option>\r\n    </select>\r\n    <div class="xecmpf-eac xecmpf-inline-action-container ">\r\n      <button type="button" class="csui-btn-save csui-btn binf-btn">'+e.escapeExpression((a=null!=(a=l(i,"add")||(null!=t?l(t,"add"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"add","hash":{},"loc":{"start":{"line":17,"column":68},"end":{"line":17,"column":75}}}):a))+'</button>\r\n      <button type="button" class="csui-btn-cancel csui-btn binf-btn">'+e.escapeExpression((a=null!=(a=l(i,"cancel")||(null!=t?l(t,"cancel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":18,"column":70},"end":{"line":18,"column":80}}}):a))+'</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="csui-inlineform-group csui-inlineform-group-error binf-hidden">\r\n  <div class="binf-text-danger"><span class="csui-text-danger"></span></div>\r\n</div>\r\n'}});return i.registerPartial("xecmpf_utils_table_inlineforms_eventactioncenter_impl_event",n),n}),csui.define("css!xecmpf/utils/table/inlineforms/eventactioncenter/impl/event",[],function(){}),csui.define("xecmpf/utils/table/inlineforms/eventactioncenter/eventactioncenter.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/controls/table/inlineforms/inlineform.registry","csui/controls/table/inlineforms/inlineform/impl/inlineform.view","csui/behaviors/keyboard.navigation/tabkey.behavior","csui/controls/icon/icon.view","xecmpf/utils/table/inlineforms/eventactioncenter/factories/event.factory","hbs!xecmpf/utils/table/inlineforms/eventactioncenter/impl/event","i18n!xecmpf/utils/commands/nls/localized.strings","css!xecmpf/utils/table/inlineforms/eventactioncenter/impl/event"],function(e,t,i,n,o,s,a,l,r,c){var d=o.extend({"className":function(){var e="xecmpf-eac-inlineform-eac";return o.prototype.className&&(e+=" "+t.result(o.prototype,"className")),e},"template":r,"templateHelpers":function(){if(this.arrayofleadingsys&&this.arrayofleadingsys.length>0){this.Select_List_Data={"choices":{"Select source":{"text":[c.selectEvent],"value":[c.selectEvent]}}},this.Select_List_Data=JSON.parse(JSON.stringify(this.Select_List_Data).replace("Select source",c.selectSource));for(var e=0;e<this.arrayofleadingsys.length;e++)this.Select_List_Data.choices[this.arrayofleadingsys[e].key[e]]={"text":this.arrayofleadingsys[e].value,"value":this.arrayofleadingsys[e].EventIds};this.enumobjs=Object.keys(this.Select_List_Data.choices)}return{"eventproperties":this.enumobjs?this.enumobjs:{},"errorMessage":this.errorMessage,"haveErrorMessage":this.haveErrorMessage,"add":c.add,"cancel":c.cancel,"selectEvent":c.selectEvent}},"ui":{"selectBox":".xecmpf-eac-inlineform-select","selectEvent":".xecmpf-eac-inlineform-options"},"events":{"change @ui.selectBox":"onChangeSelectBox","change @ui.selectEvent":"onChangeSelectEvent","keydown @ui.selectEvent":"keyReleased","keydown":"onKeyInView"},"behaviors":{"TabKeyBehavior":{"behaviorClass":s}},"onDomRefresh":function(){this.$el.find("xecmpf-eac-inlineform-eac")&&e(".csui-table-empty").removeClass("xecmpf-table-empty"),this.updateSaveButtonDisableStatus(!0),this.refreshTabableElements(),!!this.tabableElements&&!!this.tabableElements[0]&&e(this.tabableElements[0]).trigger("focus")},"keyReleased":function(){this.refreshTabableElements()},"onKeyInView":function(e){if(9===e.keyCode)return this._moveTab(e),!0},"refreshTabableElements":function(){this.tabableElements=this.$el.find("select:not([disabled]),  button:not([disabled])").filter(":visible").toArray()},"_moveTab":function(t){this.currentlyFocusedElementIndex=this.tabableElements.indexOf(t.target),t.shiftKey?this.currentlyFocusedElementIndex>0?(this.currentlyFocusedElementIndex-=1,e(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):(this.currentlyFocusedElementIndex=this.tabableElements.length-1,e(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):this.currentlyFocusedElementIndex<this.tabableElements.length-1?(this.currentlyFocusedElementIndex+=1,e(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):(this.currentlyFocusedElementIndex=0,e(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")),t.stopPropagation(),t.preventDefault()},"onChangeSelectEvent":function(e){"0"!==e.target.value?this.updateSaveButtonDisableStatus(!1):this.updateSaveButtonDisableStatus(!0)},"onChangeSelectBox":function(e){!!this.collection&&!this.collection.fetched&&this.collection.fetch(),this.sel=document.getElementById("xecmpf-eac-inlineform-options"),this.options=this.Select_List_Data.choices[e.target.value],this.removeAllOptions(this.sel),this.updateSaveButtonDisableStatus(!0),1===this.options.text.length&&e.target.value!==c.selectSource?(this.haveErrorMessage=!0,this.errorMessage=c.NoLeadingSys,this.$el.addClass("csui-form-error"),this.$el.find(".csui-inlineform-group-error").removeClass("binf-hidden"),this.$el.find(".binf-text-danger").attr("role","alert"),this.$el.find(".csui-text-danger").text(this.errorMessage)):(this.$el.removeClass("csui-form-error"),this.$el.find(".csui-inlineform-group-error").addClass("binf-hidden")),e.target.value!==c.selectSource?this.ui.selectEvent.prop("disabled",!1):this.ui.selectEvent.prop("disabled",!0),this.refreshTabableElements(),this.appendDataToSelect(this.sel,this.options)},"updateSaveButtonDisableStatus":function(e){this.$el.find(".xecmpf-inline-action-container .csui-btn-save").prop("disabled",e)},"constructor":function(n){this.options=n||{},this.iconSaveState=!1,this.saveEditIconView=new a({"iconName":"csui_action_input_confirm_disable","size":"small"}),this.cancelEditIconView=new a({"iconName":"csui_action_input_cancel","size":"small"}),this.ui=t.extend({},this.ui,o.prototype.ui),this.events=t.extend({},this.events,o.prototype.events),this.select_box=e(".xecmpf-eac-inlineform-select"),this.collection=n.context.getCollection(l,{}),this.listenTo(this.collection,"sync",this._fetchingEventFeed),this.listenTo(this.options.model.collection,"sync",this._fetchingEventStatusFeed),!this.collection.fetched&&this.collection.fetch(),i.ItemView.prototype.constructor.apply(this,arguments)},"onRender":function(){this.ui.selectEvent.prop("disabled",!0)},"_fetchingEventStatusFeed":function(){if(this.arrayofleadingsys=[],this.collection=!!this.options.model&&this.options.model.collection,this.collection)for(var e=this.collection.models.length,t=0;t<e;t++)for(var i=Object.keys(this.collection.models[t].attributes.data),n=i.length,o=0;o<n;o++){var s=this.collection.models[t].attributes.data[i[o]].length,a=[],l=[0];a.push(c.selectEvent);for(var r=0;r<s;r++)a.push(this.collection.models[t].attributes.data[i[o]][r].name),l.push(this.collection.models[t].attributes.data[i[o]][r].dataID);this.arrayofleadingsys.push({"key":i,"value":a,"EventIds":l})}this.render()},"_fetchingEventFeed":function(){this.arrayofleadingsys=[];for(var e=this.collection.models.length,t=0;t<e;t++)for(var i=Object.keys(this.collection.models[t].attributes.data),n=i.length,o=0;o<n;o++){var s=this.collection.models[t].attributes.data[i[o]].length,a=[],l=[0];a.push(c.selectEvent);for(var r=0;r<s;r++)0===this.collection.models[t].attributes.data[i[o]][r].status&&(a.push(this.collection.models[t].attributes.data[i[o]][r].name),l.push(this.collection.models[t].attributes.data[i[o]][r].dataID));this.arrayofleadingsys.push({"key":i,"value":a,"EventIds":l})}this.render()},"appendDataToSelect":function(e,t){var i,n,o=document.createDocumentFragment(),s=t.text.length;for(n=0;n<s;n++)i=document.createElement("option"),i.appendChild(document.createTextNode(t.text[n])),t.value&&(i.value=t.value[n]),o.appendChild(i);e.appendChild(o)},"removeAllOptions":function(e){var t,i;t=e.options.length;for(var n=t;n;n--)i=e.options[n-1].parentNode,i.removeChild(e.options[n-1])},"cancelClicked":function(e){e.preventDefault(),e.stopPropagation(),this.collection.fetch(),this.cancel()},"saveClicked":function(){this.sel.value&&(this.model.set("id",this.sel.value),this.model.set("action_plan_text",c.noPlans),this._save({"id":this.sel.value,"status":1}).fail(function(){this.model.set("csuiInlineFormErrorMessage",c.SaveFailError)}.bind(this)))},"getAddableCommandInfo":function(){return{"signature":"addEvents"}}},{"CSSubType":806});return n.registerByAddableType(d.CSSubType,d),d}),csui.define("hbs!xecmpf/controls/table/cells/node.state/impl/external.document.icons",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span title="'+e.escapeExpression((a=null!=(a=l(i,"tooltip")||(null!=t?l(t,"tooltip"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"tooltip","hash":{},"loc":{"start":{"line":2,"column":13},"end":{"line":2,"column":24}}}):a))+'"> '+(null!=(s=(l(i,"icon-v2")||t&&l(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"iconName":null!=t?l(t,"icon"):t},"loc":{"start":{"line":2,"column":27},"end":{"line":2,"column":54}}}))?s:"")+" </span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"icon"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":3,"column":7}}}))?s:""}});return i.registerPartial("xecmpf_controls_table_cells_node.state_impl_external.document.icons",n),n}),csui.define("xecmpf/controls/table/cells/node.state/impl/nls/lang",{"en-us":!1,"en":!1,"root":!0}),csui.define("xecmpf/controls/table/cells/node.state/impl/nls/root/lang",{"sap_al":"External document from SAP AL","sap_cmis":"External document from an SAP system","sap_dms":"External document from SAP DMS","sfsf_cmis":"External document from SAP SuccessFactors","sap":"External document from SAP"}),csui.define("xecmpf/controls/table/cells/node.state/cmis.icon/cmis.node.state.icon",["module","csui/lib/marionette","hbs!xecmpf/controls/table/cells/node.state/impl/external.document.icons","i18n!xecmpf/controls/table/cells/node.state/impl/nls/lang","csui/controls/icons.v2"],function(e,t,i,n,o){return t.ItemView.extend({"tagName":"li","className":"csui-node-state-cmis","template":i,"constructor":function(){t.ItemView.prototype.constructor.apply(this,arguments)},"templateHelpers":function(){var e=!1;this.model.attributes&&this.model.attributes.data&&this.model.attributes.data.external_source&&(e=this.model.attributes.data.external_source);var t={"icon":"","toolTip":""};if(e){var i=n[e];o._icons[e]&&(t={"icon":e,"tooltip":i})}return t}},{"enabled":function(e){var t=!1;return e&&e.node&&e.node.attributes&&e.node.attributes.data&&e.node.attributes.data.external_source&&(t=!0),t}})}),csui.define("xecmpf/models/workflows/server.adaptor.mixin",["csui/lib/underscore","csui/utils/url"],function(e,t){"use strict";return{"mixin":function(i){return e.extend(i,{"makeServerAdaptor":function(e){return this},"url":function(){var e=this.options.node.connector.getConnectionUrl().getApiBase("v2"),i=t.combineQueryString({"status":this.options.status});return t.combine(e,"nodes/xecmpfappintgn/workflows",this.options.node.get("id"),"?"+i)},"parse":function(t,i){return e.each(t.results,function(e){e.type="678",e.inactive=!1,e.id=e.WorkflowID,e.defaultActionUrl=e.OpenURL}),this.columns&&this.columns.resetColumnsV2(t,this.options),t.results},"isFetchable":function(){return!!this.options}})}}}),csui.define("xecmpf/models/workflows/metadata.workflow.collection",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v1.request.mixin","xecmpf/models/workflows/server.adaptor.mixin","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model"],function(e,t,i,n,o,s,a,l,r,c,d){var u={"WorkflowTitle":"WorkflowTitle","WorkflowStatusName":"workflowStatusName","ModifiedByName":"ModifiedByName","InitiatedDate":"InitiatedDate","InitiatedByName":"InitiatedByName","dateType":-7},p=r.extend({"constructor":function(e,t){r.prototype.constructor.call(this,e,t)}}),m=c.extend({"model":p,"resetColumnsV2":function(e,t){this.models.length||this.resetCollection(this.getV2Columns(e),t)},"getColumnModels":function(t,i){var n=c.prototype.getColumnModels.call(this,t,i);return e.each(n,function(e){var t=e.column_key;e.sort=!0,"WorkflowTitle"===t&&(e.default_action=!0)}),n},"getV2Columns":function(t){var i={},n=Object.keys(u);e.each(n,function(e){i[e]={},i[e].key=u[e]}),i.InitiatedDate.type=u.dateType;var o=e.keys(i);return this.getColumnModels(o,i)}}),f=d.extend({}),h=i.Collection.extend({"model":f,"constructor":function(e,t){this.options=t||{},i.Collection.prototype.constructor.call(this,e,t),this.makeConnectable(t).makeFetchable(t).makeBrowsable(t).makeBrowsableV1Request(t).makeServerAdaptor(t),this.columns=new m}});return n.mixin(h.prototype),o.mixin(h.prototype),s.mixin(h.prototype),a.mixin(h.prototype),l.mixin(h.prototype),h}),csui.define("hbs!xecmpf/controls/table/cells/node.state/impl/workflow.node.state",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button type="button" aria-label="'+e.escapeExpression((a=null!=(a=l(i,"workflow")||(null!=t?l(t,"workflow"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"workflow","hash":{},"loc":{"start":{"line":1,"column":34},"end":{"line":1,"column":46}}}):a))+'" class="csui-workflow-button csui-workflow-cellview">\r\n  <span title="'+e.escapeExpression((a=null!=(a=l(i,"workflow")||(null!=t?l(t,"workflow"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"workflow","hash":{},"loc":{"start":{"line":2,"column":15},"end":{"line":2,"column":27}}}):a))+'" class="csui-icon-workflow"> '+(null!=(s=(l(i,"icon-v2")||t&&l(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"size":"small","iconName":"status_workflow24"},"loc":{"start":{"line":2,"column":57},"end":{"line":2,"column":112}}}))?s:"")+" </span>\r\n</button>"}});return i.registerPartial("xecmpf_controls_table_cells_node.state_impl_workflow.node.state",n),n}),csui.define("hbs!xecmpf/utils/commands/workflows/dialog/header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h2 class="binf-modal-title">\r\n  \x3c!--todo add icon if needed --\x3e\r\n  <span class="title-text workflow-dialog-title" title="'+e.escapeExpression((s=null!=(s=a(i,"title")||(null!=t?a(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":3,"column":56},"end":{"line":3,"column":65}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"title")||(null!=t?a(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":3,"column":67},"end":{"line":3,"column":76}}}):s))+"</span>\r\n</h2>\r\n"}});return i.registerPartial("xecmpf_utils_commands_workflows_dialog_header",n),n}),csui.define("xecmpf/utils/commands/workflows/dialog/header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","hbs!xecmpf/utils/commands/workflows/dialog/header"],function(e,t,i,n){return i.ItemView.extend({"template":n,"templateHelpers":function(){return{"title":this.options.title}},"constructor":function(e){e||(e={}),i.ItemView.prototype.constructor.apply(this,arguments)}})}),csui.define("hbs!xecmpf/utils/workflows/impl/embed.appworks",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="xecm4gov-embed-appworks"></div>'}});return i.registerPartial("xecmpf_utils_workflows_impl_embed.appworks",n),n}),csui.define("xecmpf/utils/workflows/impl/nls/lang",{"en-us":!1,"en":!1,"root":!0}),csui.define("xecmpf/utils/workflows/impl/nls/root/lang",{"workflow":"Dynamic workflow","startWorkflow":"Start workflow action was successful.","cancelWorkflow":"Cancel workflow action was successful."}),csui.define("css!xecmpf/utils/workflows/impl/embed.appworks",[],function(){}),csui.define("xecmpf/utils/workflows/embed.appworks",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/url","csui/controls/globalmessage/globalmessage","csui/controls/progressblocker/blocker","hbs!xecmpf/utils/workflows/impl/embed.appworks","i18n!xecmpf/utils/workflows/impl/nls/lang","css!xecmpf/utils/workflows/impl/embed.appworks"],function(e,t,i,n,o,s,a,l,r,c){return o.ItemView.extend({"template":r,"tagName":"div","className":"xecm4gov-embed-appworks-view","constructor":function(e){e||(e={}),o.ItemView.prototype.constructor.call(this,e),l.imbue(this)},"generateIframeElement":function(){var e,t=this;this.$el.find(".embed-appWorks-iframe").remove(),e=document.createElement("iframe"),e.setAttribute("id","embedAppWorks"),e.setAttribute("name","embedAppWorks"),e.setAttribute("class","embed-appWorks-iframe"),e.setAttribute("aria-label",c.workflow),this.$el.find(".xecm4gov-embed-appworks").append(e),e&&e.addEventListener("load",function(){t.unblockActions();var i=e.contentWindow;i&&t.validHost&&(window.clientIntervalID=window.setInterval(function(){i.postMessage({"name":"subscribe"},t.validHost)},200))},t)},"loadUrlInIframe":function(e){this.validHost=this.options.validHost||"",this.blockActions(),this.generateIframeElement(),this.$el.find("#embedAppWorks").attr("src",e),this.addMethodToGlobalContext()},"addMethodToGlobalContext":function(){var e=this,t=this.options,i=(t.bwsId,t.wfinstanceid,t.action||"workflow");t.callback;if(i=i.toLowerCase(),e.validHost){var n=function(t){t.origin===e.validHost&&("subscribed"===t.data.name&&window.clearInterval(window.clientIntervalID),"unsubscribed"===t.data.name&&window.console.log("unsubscribed to client message"),"workflow-started"===t.data.name&&(e.options.dialogView.trigger("close:appworks:dialog"),a.showMessage("success",c.startWorkflow),window.removeEventListener("message",n,!1)),"workflow-cancelled"===t.data.name&&(e.options.dialogView.trigger("cancel:appworks:workflow"),a.showMessage("success",c.cancelWorkflow),window.removeEventListener("message",n,!1)))};window.addEventListener("message",n,!1)}}})}),csui.define("xecmpf/utils/commands/workflows/open.workflow",["csui/lib/underscore","csui/lib/jquery","csui/utils/commands/open","csui/utils/commandhelper","xecmpf/utils/commands/workflows/dialog/header.view","xecmpf/utils/workflows/embed.appworks","csui/controls/dialog/dialog.view","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o,s,a,l){"use strict";return i.extend({"defaults":{"signature":"WorkflowOpen","command_key":["workflow_open","Open"],"scope":"single"},"enabled":function(e){return!!n.getJustOneNode(e).get("OpenURL")},"execute":function(i,r){r||(r={});var c=n.getJustOneNode(i),d=c.get("OpenURL"),u=c.get("WorkflowTitle"),p=t.Deferred(),m=new s(r);r.title=u,this.headerView=new o(r);var f=new a({"title":u,"className":"workflow-dailog","largeSize":!0,"view":m,"headerView":this.headerView,"attributes":{"aria-label":u},"buttons":[{"id":"close","label":l.close,"close":!0}]});return f.show(),f.listenTo(f,"hide",e.bind(this.onHideDialog,this)),m.dialogView=f,m.loadUrlInIframe(d),p.resolve(f).promise()},"onHideDialog":function(){this.headerView.options.originatingView.options.originatingView&&this.headerView.options.originatingView.options.originatingView.$el.find(".csui-workflow-button").length?this.headerView.options.originatingView.options.originatingView.$el.find(".csui-workflow-button").focus():(this.headerView.options.originatingView.previousFocusElm.focus(),this.headerView.options.originatingView.previousFocusElm=void 0)}})}),csui.define("xecmpf/utils/commands/workflows",["csui/lib/underscore","csui/models/commands","xecmpf/utils/commands/workflows/open.workflow"],function(e,t,i){"use strict";return new t([new i])}),csui.define("xecmpf/controls/table/cells/node.state/workflow.icon/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/controls/table/cells/node.state/workflow.icon/impl/nls/root/lang",{"from":"From","created":"Created","step":"Step {0}: {1}","workflows":"Workflows","workflow":"Workflow"}),csui.define("hbs!xecmpf/controls/table/cells/node.state/workflow.icon/popover/impl/workflow.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="workflow-item" role="listitem" > \r\n    <div class="workflow-title">\r\n        <a href="javascript:void(0)" class="csui-title-link" title="'+e.escapeExpression((s=null!=(s=a(i,"title")||(null!=t?a(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":3,"column":68},"end":{"line":3,"column":77}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"title")||(null!=t?a(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":3,"column":91},"end":{"line":3,"column":100}}}):s))+'">\r\n            <span class="cs-label">'+e.escapeExpression((s=null!=(s=a(i,"title")||(null!=t?a(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":4,"column":35},"end":{"line":4,"column":46}}}):s))+'</span>\r\n        </a>\r\n    </div>\r\n    <div class="workflow-initiator">\r\n        <span class="csui-label" >'+e.escapeExpression((s=null!=(s=a(i,"from")||(null!=t?a(t,"from"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"from","hash":{},"loc":{"start":{"line":8,"column":34},"end":{"line":8,"column":42}}}):s))+'</span>\r\n        <span class="csui-value" title="'+e.escapeExpression((s=null!=(s=a(i,"iitiator")||(null!=t?a(t,"iitiator"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"iitiator","hash":{},"loc":{"start":{"line":9,"column":40},"end":{"line":9,"column":52}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"initiator")||(null!=t?a(t,"initiator"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"initiator","hash":{},"loc":{"start":{"line":9,"column":66},"end":{"line":9,"column":79}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"initiator")||(null!=t?a(t,"initiator"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"initiator","hash":{},"loc":{"start":{"line":9,"column":81},"end":{"line":9,"column":94}}}):s))+'</span>\r\n    </div>\r\n    <div class="workflow-intiated-date">\r\n        <span class="csui-label">'+e.escapeExpression((s=null!=(s=a(i,"created")||(null!=t?a(t,"created"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"created","hash":{},"loc":{"start":{"line":12,"column":33},"end":{"line":12,"column":44}}}):s))+'</span>\r\n        <span class="csui-value" title="'+e.escapeExpression((s=null!=(s=a(i,"initiatedDate")||(null!=t?a(t,"initiatedDate"):t))?s:e.hooks.helperMissing,
"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"initiatedDate","hash":{},"loc":{"start":{"line":13,"column":40},"end":{"line":13,"column":57}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"intiatedDate")||(null!=t?a(t,"intiatedDate"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"intiatedDate","hash":{},"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":87}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"initiatedDate")||(null!=t?a(t,"initiatedDate"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"initiatedDate","hash":{},"loc":{"start":{"line":13,"column":89},"end":{"line":13,"column":106}}}):s))+"</span>\r\n    </div>\r\n</div>"}});return i.registerPartial("xecmpf_controls_table_cells_node.state_workflow.icon_popover_impl_workflow.item",n),n}),csui.define("xecmpf/controls/table/cells/node.state/workflow.icon/popover/workflow.popover.item.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","xecmpf/models/workflows/metadata.workflow.collection","xecmpf/utils/commands/workflows","csui/utils/commandhelper","i18n!xecmpf/controls/table/cells/node.state/workflow.icon/impl/nls/lang","hbs!xecmpf/controls/table/cells/node.state/workflow.icon/popover/impl/workflow.item"],function(e,t,i,n,o,s,a,l,r){"use strict";return i.ItemView.extend({"className":"workflow-item","tagName":"li","template":r,"templateHelpers":function(){var e=this.model.get("InitiatedDate");return{"title":this.model.get("WorkflowTitle"),"from":l.from,"created":l.created,"initiator":this.model.get("InitiatedByName"),"initiatedDate":n.formatExactDate(e)+" "+n.formatExactTime(e)}},"attributes":{"role":"none"},"events":{"click .csui-title-link":"onClickWorkflowName","keydown .csui-title-link":"onKeyInView"},"constructor":function(e){e||(e={}),this.options=e,this.collection=e.collection,i.ItemView.prototype.constructor.call(this,e)},"onClickWorkflowName":function(){var e=this.options&&this.options.originatingView;e&&e.closePopover(e);var t={"nodes":new o([this.model])},i=s.get("WorkflowOpen"),n={"context":this.options.context,"originatingView":this},l=i.execute(t,n);a.handleExecutionResults(l,{"command":i,"suppressSuccessMessage":"Error Eecuting command","suppressFailMessage":"Fecting commands data failed"})},"onKeyInView":function(e){27===e.keyCode?(this.$el.closest(".binf-popover").siblings(".csui-workflow-button").trigger("focus"),this.options.originatingView.closePopover()):13!==e.keyCode&&32!==e.keyCode||this.onClickWorkflowName()}})}),csui.define("hbs!xecmpf/controls/table/cells/node.state/workflow.icon/popover/impl/workflow.list",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<ul class="workflow-list csui-normal-scrolling  csui-no-scroll-x" role="list"></ul>\r\n'}});return i.registerPartial("xecmpf_controls_table_cells_node.state_workflow.icon_popover_impl_workflow.list",n),n}),csui.define("xecmpf/controls/table/cells/node.state/workflow.icon/popover/workflow.popover.list.view",["csui/lib/underscore","csui/lib/marionette","xecmpf/controls/table/cells/node.state/workflow.icon/popover/workflow.popover.item.view","hbs!xecmpf/controls/table/cells/node.state/workflow.icon/popover/impl/workflow.list"],function(e,t,i,n){"use strict";return t.CompositeView.extend({"className":"workflow-collection","template":n,"childViewContainer":".workflow-list","childView":i,"childViewOptions":function(){return{"collection":this.options.collection,"originatingView":this.options.originatingView,"parentView":this}},"constructor":function(e){e||(e={}),this.options=e,this.collection=e.collection,this.originatingView=e.originatingView,t.CompositeView.prototype.constructor.apply(this,arguments)}})}),csui.define("css!xecmpf/controls/table/cells/node.state/impl/workflow.node.state",[],function(){}),csui.define("xecmpf/controls/table/cells/node.state/workflow.icon/workflow.node.state.view",["csui/lib/jquery","i18n","csui/lib/underscore","csui/lib/marionette3","csui/utils/base","xecmpf/models/workflows/metadata.workflow.collection","csui/utils/contexts/factories/connector","csui/controls/mixins/keyboard.navigation/modal.keyboard.navigation.mixin","hbs!xecmpf/controls/table/cells/node.state/impl/workflow.node.state","xecmpf/controls/table/cells/node.state/workflow.icon/popover/workflow.popover.list.view","i18n!xecmpf/controls/table/cells/node.state/workflow.icon/impl/nls/lang","css!xecmpf/controls/table/cells/node.state/impl/workflow.node.state"],function(e,t,i,n,o,s,a,l,r,c,d){"use strict";var u=n.View.extend({"tagName":"li","className":"csui-node-state-workflow","template":r,"templateContext":function(){return{"workflow":d.workflow}},"events":{"click button":"onClickShowFlyout"},"constructor":function(){n.View.prototype.constructor.apply(this,arguments),this.windowResizeHandler=i.bind(this._onWindowResize,this),e(window).on("resize",this.windowResizeHandler),e(window).on("resize",i.bind(this.closePopover,this))},"initialize":function(){this.collection=new s(void 0,{"connector":this.options.context.getObject(a),"node":this.options.model,"status":"in progress"}),this.collection.fetch()},"_onWindowResize":function(){this.popoverEl&&this.closePopover()},"onClickShowFlyout":function(e){var t=this.$el.find("button");this.openPopover(e,t)},"openPopover":function(n,o){if(this.collection.length){var s,a,l=e(".workflow-list").width(),r=e(window).width()!==l,u=t&&t.settings.rtl;if(this.popoverEl=o||e(n.currentTarget),this.WorkflowPopoverView=new c({"originatingView":this,"collection":this.collection}),this.WorkflowPopoverView.render(),u&&r)s=e(window).width()-this.popoverEl.offset().left-this.popoverEl.width();else{s=(e(".csui-nodestable").width()||e(".csui-search-results").width())-this.popoverEl.offset().left-this.popoverEl.width()}a=s<260?"left":"right",this.popoverEl.binf_popover({"content":this.WorkflowPopoverView.$el,"html":!0,"placement":a,"trigger":"manual","title":this.collection.length>=2?d.workflows:d.workflow}),this.popoverEl.binf_popover("show"),this.popover=this.popoverEl.siblings(".binf-popover"),this.onShowOverviewFlyout(),this.popoverEl.on("shown.binf.popover",i.bind(function(){var t=this.options.originatingView?this.options.originatingView:this.options.tableView;this.scrollEle=t&&t.thumbnailView?this.options.tableView.thumbnail.$el.find(".csui-thumbnail-results"):this.options.tableView.$el.find("tbody"),this.scrollEle.on("scroll.popover",{"view":this},this._handleScrollEvent),e(document).on("mouseup.popover",{"view":this},this._handleClickEvent),e(this.WorkflowPopoverView.$el.find(".workflow-title .csui-title-link")[0]).trigger("focus")},this)),this.engageModalKeyboardFocusOnOpen(this.WorkflowPopoverView.el)}},"onShowOverviewFlyout":function(){var t,i,n,s=this.popoverEl,a=s.parent().find(".binf-popover"),l=a.find(".binf-arrow"),r=a.find(".binf-popover-title"),c=a.find(".binf-popover-content"),d=parseInt(l.css("border-top-width")),u=e("nav.csui-navbar").length?e("nav.csui-navbar").innerHeight():e(".binf-nav").parents("nav")&&e(".binf-nav").parents("nav").length?e(".binf-nav").parents("nav").innerHeight():0,p=e(".csui-table-paginationview").innerHeight()||e(".csui-pagination").innerHeight(),m=e("#breadcrumb-wrap").innerHeight()||0,f=e(".csui-workflow-button").width(),h=a.find(".workflow-list"),b=r.outerHeight()+c.outerHeight()-c.height();a.addClass("csui-workflow-popover"),i=window.innerHeight-(b+u+p+m),t=s.offset().top-(u+parseInt(l.css("top"))+b),t<u?(t=u-b,n=s.offset().top-u):n=parseInt(l.css("top"))+u;var g=e(".cs-perspective-panel"),w=g.length>0?g[0].getBoundingClientRect().top:0;o.isIE11()&&(t+=b,n=s.offset().top-t+(w-u)+d/2),h.css({"max-height":i}),a.css({"position":"fixed","top":t}),l.css("top",n);var v,y,x=parseInt(a.css("left"));(this.options.originatingView?this.options.originatingView:this.options.tableView)?(y=s.offset().left,v=a.hasClass("binf-left")?y-(a.outerWidth()+d/2):y+s.width()):v=a.hasClass("binf-left")?x-d/2:x+d,e(".csui-search-results").length&&(v+=f/2),a.css({"right":"auto","left":v})},"_handleClickEvent":function(t){if(!e(t.target).closest(".binf-popover").length){var i=t.data.view;e(document).off("mouseup.popover",this._handleClickEvent),i.closePopover(t.data.view)}},"_handleScrollEvent":function(t){var i=t.data.view;e(t.target).closest(".binf-popover").length||(i.scrollEle.off("scroll.popover",i._handleScrollEvent),i&&i.closePopover())},"closePopover":function(e){e=e||this,this.disengageModalKeyboardFocusOnClose(),this.popover&&this.popover.addClass("binf-hidden"),this.popoverEl&&this.popoverEl.binf_popover("destroy"),e.WorkflowPopoverView&&e.WorkflowPopoverView.destroy()}},{"enabled":function(e){var t=e.node,i=t&&t.get("data");return i&&i.showworkflowicon},"getModelFields":function(e){return{"showworkflowicon":""}}});return l.mixin(u.prototype),u}),csui.define("xecmpf/controls/table/cells/node.state/node.state.icons",["xecmpf/controls/table/cells/node.state/cmis.icon/cmis.node.state.icon","xecmpf/controls/table/cells/node.state/workflow.icon/workflow.node.state.view"],function(e,t){"use strict";return[{"sequence":30,"iconView":e},{"sequence":40,"iconView":t}]}),csui.define("css!xecmpf/utils/icons/icons",[],function(){}),csui.define("xecmpf/utils/icons/icons",["css!xecmpf/utils/icons/icons"],function(){return[{"equals":{"type":889},"className":"csui-icon xecmpf-mime_businessobjecttype"},{"equals":{"type":882},"className":"csui-icon csui-icon-extended-ecm-volume"},{"equals":{"type":806},"className":"csui-icon icon-reserved_self"},{"equals":{"type":803},"className":"csui-icon core-capture-rule"},{"equals":{"type":807},"className":"csui-icon core-capture-profile"},{"equals":{"type":804},"className":"csui-icon metadata-export"}]}),csui.define("xecmpf/utils/icons/xecmpf.icons.v2",[],function(){return{"sap":'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="csui-icon-v2 csui-icon-v2__sap"><path d="M10 19.375C15.1777 19.375 19.375 15.1777 19.375 10C19.375 4.82233 15.1777 0.625 10 0.625C4.82233 0.625 0.625 4.82233 0.625 10C0.625 15.1777 4.82233 19.375 10 19.375Z" fill="#2E3D98"/><path d="M15.2085 6.34838C15.0259 5.58949 14.4103 4.97393 13.6514 4.79128C13.4693 4.74718 13.29 4.72656 13.1159 4.72656C12.4692 4.72656 11.8935 5.01277 11.5008 5.46484L10.2592 6.7065C9.68532 7.2046 9.37851 7.99849 9.58513 8.8571C9.63834 9.07715 9.73087 9.28281 9.84976 9.4717L9.47199 9.84947C9.2831 9.73058 9.07744 9.63757 8.85739 9.58484C8.67522 9.54121 8.49592 9.5206 8.3219 9.5206C7.67519 9.5206 7.09942 9.8068 6.70679 10.2589L5.46514 11.5005C4.89129 11.9986 4.58447 12.7925 4.79109 13.6511C4.97375 14.4105 5.5893 15.0261 6.3482 15.2087C6.53037 15.2528 6.70967 15.2734 6.88369 15.2734C7.53041 15.2734 8.10617 14.9872 8.4988 14.5352L9.74045 13.2935C10.3143 12.7954 10.6211 12.0015 10.4145 11.1429C10.3613 10.9229 10.2688 10.7172 10.1499 10.5283L10.5276 10.1505C10.7165 10.2694 10.9222 10.3619 11.1422 10.4152C11.3244 10.4588 11.5037 10.4794 11.6777 10.4794C12.3244 10.4794 12.9002 10.1932 13.2928 9.74112L14.5345 8.49947C15.1083 8.00089 15.4156 7.207 15.2085 6.34838ZM9.48254 11.3673C9.59232 11.8232 9.45377 12.2729 9.11196 12.5696L9.08655 12.5917L9.06258 12.6156L7.82092 13.8573L7.79695 13.8813L7.7749 13.9067C7.54623 14.1699 7.22982 14.3146 6.88369 14.3146C6.78206 14.3146 6.67755 14.3017 6.57304 14.2768C6.16363 14.178 5.82181 13.8367 5.72353 13.4273C5.61375 12.9713 5.7523 12.5217 6.09411 12.2249L6.11952 12.2029L6.14349 12.1789L7.38515 10.9372L7.40912 10.9133L7.43117 10.8879C7.65936 10.6242 7.97577 10.4794 8.3219 10.4794C8.42353 10.4794 8.52804 10.4923 8.63255 10.5173C8.6757 10.5278 8.71405 10.5508 8.75528 10.5662L7.74326 11.5782C7.55581 11.7656 7.55581 12.0686 7.74326 12.2561C7.83674 12.35 7.95947 12.397 8.0822 12.397C8.20493 12.397 8.32765 12.35 8.42114 12.2566L9.43316 11.2445C9.44898 11.2858 9.47199 11.3241 9.48254 11.3673ZM13.906 7.77509L13.8806 7.79714L13.8566 7.82111L12.615 9.06277L12.591 9.08674L12.5689 9.11214C12.3403 9.37582 12.0239 9.5206 11.6777 9.5206C11.5761 9.5206 11.4716 9.50765 11.3671 9.48272C11.3239 9.47218 11.2856 9.44917 11.2443 9.43382L12.2564 8.4218C12.4438 8.23436 12.4438 7.93137 12.2564 7.74393C12.0689 7.55648 11.7659 7.55648 11.5785 7.74393L10.5665 8.75595C10.5511 8.71472 10.5276 8.67637 10.5176 8.63322C10.4078 8.17731 10.5463 7.72763 10.8881 7.43088L10.9136 7.40882L10.9375 7.38485L12.1792 6.1432L12.2031 6.11923L12.2252 6.09382C12.4534 5.83015 12.7698 5.68537 13.1159 5.68537C13.2176 5.68537 13.3221 5.69831 13.4266 5.72324C13.836 5.822 14.1778 6.16333 14.2761 6.57275C14.3864 7.02914 14.2478 7.47834 13.906 7.77509Z" fill="white"/></svg>',"status_workflow24":'<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 24 24" class="csui-icon-v2 csui-icon-v2__status_workflow24"><g><path d="M3,0.5h18c1.381,0,2.5,1.119,2.5,2.5v18c0,1.381-1.119,2.5-2.5,2.5H3c-1.381,0-2.5-1.119-2.5-2.5V3 C0.5,1.619,1.619,0.5,3,0.5z" fill="#2E3D98" class="undefined"/><path d="M21,24H3c-1.654,0-3-1.346-3-3V3c0-1.654,1.346-3,3-3h18c1.654,0,3,1.346,3,3v18C24,22.654,22.654,24,21,24z M3,1C1.897,1,1,1.897,1,3v18c0,1.103,0.897,2,2,2h18c1.103,0,2-0.897,2-2V3c0-1.103-0.897-2-2-2H3z" fill="#FFFFFF" class="undefined"/></g><g><path d="M17.714,9h-3.429C13.6,9,13,8.4,13,7.714V4.286C13,3.6,13.6,3,14.286,3h3.429C18.4,3,19,3.6,19,4.286v3.429 C19,8.4,18.4,9,17.714,9z M17.714,8.143c0.257,0,0.429-0.171,0.429-0.429V4.286c0-0.257-0.172-0.429-0.429-0.429h-3.429 c-0.257,0-0.429,0.171-0.429,0.429v3.429c0,0.257,0.172,0.429,0.429,0.429H17.714z" fill="#FFFFFF" class="undefined"/></g><g><path d="M8.714,15H5.286C4.6,15,4,14.4,4,13.714v-3.429C4,9.6,4.6,9,5.286,9h3.429C9.4,9,10,9.6,10,10.286v3.429 C10,14.4,9.4,15,8.714,15z M8.714,14.143c0.257,0,0.429-0.172,0.429-0.429v-3.429c0-0.257-0.171-0.429-0.429-0.429H5.286 c-0.257,0-0.429,0.171-0.429,0.429v3.429c0,0.257,0.171,0.429,0.429,0.429H8.714z" fill="#FFFFFF" class="undefined"/></g><g><path d="M7,6.5C7,6.2,7.2,6,7.5,6H13V5H7.5C6.7,5,6,5.7,6,6.5V9h1V6.5z" fill="#FFFFFF" class="undefined"/></g><g><path d="M17.714,21h-3.429C13.6,21,13,20.4,13,19.714v-3.429C13,15.6,13.6,15,14.286,15h3.429 C18.4,15,19,15.6,19,16.286v3.429C19,20.4,18.4,21,17.714,21z M13.857,16.286v3.429c0,0.257,0.172,0.429,0.429,0.429h3.429 c0.257,0,0.429-0.172,0.429-0.429v-3.429c0-0.257-0.172-0.429-0.429-0.429h-3.429C14.029,15.857,13.857,16.029,13.857,16.286z" fill="#FFFFFF" class="undefined"/></g><g><path d="M7,17.5C7,17.8,7.2,18,7.5,18H13v1H7.5C6.7,19,6,18.3,6,17.5V15h1V17.5z" fill="#FFFFFF" class="undefined"/></g><g opacity="0.6" class="undefined"><path d="M18,8.5c0.3,0,0.5-0.2,0.5-0.5V4c0-0.3-0.2-0.5-0.5-0.5h-4c-0.3,0-0.5,0.2-0.5,0.5v4c0,0.3,0.2,0.5,0.5,0.5H18 z" fill="#FFFFFF" class="undefined"/></g><g opacity="0.6" class="undefined"><path d="M9,14.5c0.3,0,0.5-0.2,0.5-0.5v-4c0-0.3-0.2-0.5-0.5-0.5H5c-0.3,0-0.5,0.2-0.5,0.5v4c0,0.3,0.2,0.5,0.5,0.5H9z " fill="#FFFFFF" class="undefined"/></g><g opacity="0.6" class="undefined"><path d="M13.5,16v4c0,0.3,0.2,0.5,0.5,0.5h4c0.3,0,0.5-0.2,0.5-0.5v-4c0-0.3-0.2-0.5-0.5-0.5h-4 C13.7,15.5,13.5,15.7,13.5,16z" fill="#FFFFFF" class="undefined"/></g></svg>'}}),csui.define("xecmpf/utils/eventdefinition.defaultactionitems",[],function(){"use strict";return[{"equals":{"type":[806]},"signature":"OpenEventDefinition","sequence":25},{"equals":{"type":[678]},"signature":"WorkflowOpen","sequence":25}]}),csui.define("xecmpf/utils/commands/folderbrowse/go.to.workspace.history",["module","csui/lib/jquery","csui/lib/underscore","csui/models/command","csui/lib/backbone","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o,s){var a,l=[location.href];return n.extend({"defaults":{"signature":"WorkspaceHistory","name":s.GoToWorkpsaceHistory},"enabled":function(t,n){var s=i.extend({"enabled":!1},e.config());return a||(a=!0,window.addEventListener("popstate",function(){l.length>1&&l[l.length-2]===location.href&&l.pop()}),o.history.on("navigate",function(){l.push(location.href)})),s.enabled&&l.length>1},"execute":function(e,i){return history.back(),t.Deferred().resolve().promise()}})}),csui.define("xecmpf/utils/commands/folderbrowse/search.container",["module","require","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/models/command","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o,s,a){return s.extend({"defaults":{"signature":"SearchFromHere","name":a.SearchWorkspace},"enabled":function(t,n){return i.extend({"enabled":!1},e.config()).enabled},"execute":function(t,s){var l=i.extend({"pageWidget":!1},e.config()),r=this,c=n.Deferred();return csui.require(["xecmpf/widgets/integration/folderbrowse/search.box.view","xecmpf/controls/search.textbox/search.textbox.view","csui/widgets/search.results/search.results.view","csui/utils/contexts/factories/node","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/search.query.factory",this.get("commands")],function(e,d,u,p,m,f,h){var b=t.originatingView.$el.find(".csui-search-button");b.find("div.csui-searchbox-holder").length||b.append("<div class='csui-searchbox-holder'></div>");var g=new o.Region({"el":s.el?s.el:b.find("div.csui-searchbox-holder")}),w=t.originatingView&&t.originatingView.context?t.originatingView.context:s&&s.context,v=w?w.getModel(p):null,y=v?v.get("id"):0,x=t.originatingView&&t.originatingView.options&&t.originatingView.options.workspaceContext&&t.originatingView.options.workspaceContext.wkspid&&t.originatingView.options.workspaceContext.wkspid.get("id")?t.originatingView.options.workspaceContext.wkspid.get("id"):0;l.pageWidget||delete w._factories.searchQuery;var k=!1,_=0===x?e:d;if(k=0!==x,r.searchBoxView=new _({"context":w,"originatingView":t.originatingView,"data":{"nodeId":0===x?y:x}}),r.originatingViewElement=t.originatingView.$el,r.listenTo(r.searchBoxView,"hide:searchbar",function(){r.searchBoxView.destroy(),r.originatingViewElement.find("a.csui-toolitem").show(),r.originatingViewElement.find("a.csui-toolitem").trigger("focus")}),r.listenTo(r.searchBoxView,"show",function(){setTimeout(function(){var e=k?".xecmpf-input":".csui-input";r.originatingViewElement.find(e).trigger("focus")},25)}),t.originatingView.$el.find(".csui-search-button > a.csui-toolitem").hide(),g.show(r.searchBoxView),(!l.pageWidget||k)&&t.originatingView){var C,A,P,T=w.getModel(f);k?(C=r.searchBoxView,A=r.searchBoxView,P="search:results"):(C=t.originatingView,A=T,P="change"),C.listenTo(A,P,function(){delete w._factories.searchResults;var e,s=new u({"container":t.container,"originatingView":t.originatingView,"context":w,"commands":h,"enableBackButton":!0,"backButtonToolTip":i.str.sformat(a.SearchBackTooltip,t.container.get("name"))}),l=r.originatingViewElement.parent();l.find(".cs-search-results-wrapper").remove(),l.append("<div class='cs-search-results-wrapper'></div>"),r.$csSearchResults=n(l.find(".cs-search-results-wrapper")[0]),r.$csSearchResults.hide(),s.render(),k?s.collection.fetch():w.fetch(),o.triggerMethodOn(s,"before:show"),r.$csSearchResults.append(s.el),k?r.originatingViewElement.hide():r.originatingViewElement.hide("blind",{"direction":"left","complete":function(){r.$csSearchResults.show("blind",{"direction":"right","complete":function(){o.triggerMethodOn(s,"show")}},100)}},100),e=function(){r.$csSearchResults.hide("blind",{"direction":"right","complete":function(){r.originatingViewElement.show("blind",{"direction":"left","complete":function(){delete w._factories.searchResults,delete w._factories.searchFacets,t.originatingView.triggerMethod("dom:refresh")}},100),s.destroy(),r.$csSearchResults.remove()}},100)},r._nextNode=w.getModel(m),r.listenToOnce(r._nextNode,"change:id",i.bind(e,r)),r.listenToOnce(s,"go:back",i.bind(e,r))})}c.resolve()},function(e){c.reject(e)}),c.promise()}})}),csui.define("xecmpf/utils/commands/folderbrowse/open.full.page.workspace",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/radio","csui/models/command","csui/utils/contexts/factories/connector","csui/utils/url","csui/utils/log","csui/dialogs/modal.alert/modal.alert","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o,s,a,l,r,c){var d=n.channel("xecmpf-workspace");return o.extend({"defaults":{"signature":"WorkspacePage","name":c.OpenFullPageWorkpsace,"scope":"single"},"enabled":function(t,n){return i.extend({"enabled":!1},e.config()).enabled&&!!t.container},"execute":function(n,o){var l=this,c=i.extend({"fullPageOverlay":!1},e.config()),u=t.Deferred(),p=n.originatingView?n.originatingView.context:o&&o.context,m=p.getObject(s),f=m&&m.connection&&m.connection.url?m.connection.url.replace("/api/v1",""):"",h=window,b=!!n&&!!n.data&&!!n.data.applyTheme,g=b?t(h.document).find("head > link[data-csui-theme-overrides]").attr("href"):void 0,w=a.combine(f,"xecm","nodes",n.container.get("id")),v=p.options.navigateMode,y=new XMLHttpRequest;return c.fullPageOverlay?csui.require(["xecmpf/widgets/integration/folderbrowse/modaldialog/modal.dialog.view","xecmpf/widgets/integration/folderbrowse/full.page.workspace.view","csui/utils/high.contrast/detector!"],function(e,i,o){var s;s=2!==o,l.authenticate(y,f,m),y.onreadystatechange=function(){if(y.readyState===XMLHttpRequest.DONE&&200===y.status){var o,a=p.options.viewMode||{};csui.require.config({"config":{"csui/integration/folderbrowser2/container.enforcer":{"enabled":!1}}});var r={"viewMode":a,"navigateMode":v},u={"data":r,"nodeID":n.container.get("id"),"status":n,"context":p,"connector":m,"renderType":"dialog","enableCollapse":c.fullPageOverlay},f=new i(u);o=new e({"title":n.container.get("name"),"className":"xecm-modal-dialog xecm-no-iframe-dialog","iconRight":"icon-tileCollapse","view":f,"useIconsForDarkBackground":s}),o.show(),l.listenTo(f,"show:dialog:header",function(){l.showDialogHeader(o)}).listenTo(f,"hide:dialog:header",function(){l.hideDialogHeader(o)}),l.listenTo(o,"destroy",function(){t("body").removeClass("csui-support-maximize-widget"),c.fullPageOverlay&&"folderBrowse"===a.mode&&csui.require.config({"config":{"csui/integration/folderbrowser2/container.enforcer":{"enabled":!0},"csui/utils/commands/back.to.last.fragment":{"enabled":!0}}})}),l.listenToOnce(d,"xecm:close:fullpage:overlay",function(){o&&o.destroy()})}},u.resolve()},function(e){u.reject(e)}):this.getXecmToken(y,f,m).done(function(e){var t=encodeURIComponent(e.token);if(w=w+"?xecmToken="+t,b&&g&&(g.indexOf("overrides.css")>-1||g.indexOf("overrides-rtl.css")>-1)){var i;if(null!==(i=g.indexOf("overrides-rtl.css")>-1?g.match("/widget_themes/(.*)/overrides-rtl.css"):g.match("/widget_themes/(.*)/overrides.css"))&&2===i.length&&i[1].length>0){var n=i[1];i=[],i=n.split("/");var o=2===i.length&&i[0].length>0&&i[1].length>0?"&theme=sap."+i[0]+"."+i[1]:"";w+=o}}v&&""!==v&&(w=a.appendQuery(w,"navigateMode="+v)),h.open("").location.href=w,u.resolve()}).fail(function(e){r.showError(e.responseJSON.error)}),u.promise()},"getXecmToken":function(e,t,n){var o=a.combine(t,"/api/v2/xecmauthentication/getusertoken");return n.makeAjaxCall({"type":"GET","url":o,"beforeSend":i.bind(function(e,t){e.setRequestHeader("OTCSTicket",n.connection.session.ticket),e.settings=t,this.reportSending&&this.reportSending(e,t)},this),"success":i.bind(function(e,t,i){this.reportSuccess&&this.reportSuccess(i)},this),"error":i.bind(function(e,t,i){this.reportError&&this.reportError(e)},this)})},"reportError":function(e){csui.require(["csui/dialogs/modal.alert/modal.alert"],function(t){t.showError(e.message)})},"reportSuccess":function(e){e&&e.settings&&l.debug("Receiving response for {0} from {1}.",e.settings.type,e.settings.url)},"reportSending":function(e,t){e&&t&&l.debug("Sending request as {0} to {1}.",t.type,t.url)},"dialogActions":function(e,t,i){e.origin&&new RegExp(e.origin,"i").test(new a(t).getOrigin())&&e.data&&("closeDialog"===e.data.status?i.$el.find(".cs-close").trigger("click"):"showDialogHeader"===e.data.status?this.showDialogHeader(i):"hideDialogHeader"===e.data.status&&this.hideDialogHeader(i))},"showDialogHeader":function(e){e.$el.find(".xecm-modal-header").show()},"hideDialogHeader":function(e){e.$el.find(".xecm-modal-header").hide()},"authenticate":function(e,t,i){if(i.connection.session&&i.connection.session.ticket)this.authenticateworkspace(e,t,i);else if(i.connection.credentials){var n=this,o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState)try{if(200!==o.status)throw new Error(o.status+" "+o.statusText);var s=o.getResponseHeader("content-type");if(!/^application\/json/i.test(s))throw new Error("Unsupported content type: "+s);var a=JSON.parse(o.responseText);i.connection.session=a,n.authenticateworkspace(e,t,i)}catch(e){console.error(e)}},o.open("POST",i.connection.url+"/auth",!0),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send("username="+encodeURIComponent(i.connection.credentials.username)+"&password="+encodeURIComponent(i.connection.credentials.password))}else r.showError(c.AuthenticationError)},"authenticateworkspace":function(e,t,i){e.open("GET",t+"/xecmauth",!0),e.setRequestHeader("OTCSTicket",i.connection.session.ticket),e.withCredentials=!0,e.send(null)}})}),csui.define("xecmpf/utils/commands/workspaces/delete.workspace.handler",["csui/utils/commands/delete/delete.self.handler","csui/utils/contexts/perspective/perspective.context","csui/lib/radio"],function(e,t,i){"use strict";var n=Object.freeze(["folderBrowse","fullPage"]),o=i.channel("xecmpf-workspace");return function(i,s){var a=!1;if(s.context&&s.context.options){var l=s.context.options;if(848===i.get("type")&&l.initialWkspId===i.get("id")&&l.viewMode&&n.indexOf(l.viewMode.mode)>-1){if(s.context instanceof t){var r=s.context.viewStateModel;r&&(r.clearHistory(),r.set(r.CONSTANTS.CURRENT_ROUTER,void 0))}o.trigger("xecm:delete:workspace")}else 848===i.get("type")&&l.initialWkspId!==i.get("id")&&l.viewMode&&n.indexOf(l.viewMode.mode)>-1?(r=s.context.viewStateModel,r?r.restoreLastFragment():a=!0):a=!0}else a=!0;a&&e(i,s)}}),csui.define("xecmpf/utils/commands/boattachments/boattachments.create",["module","require","csui/lib/underscore","csui/lib/jquery","csui/utils/url","csui/utils/commandhelper","csui/utils/command.error","csui/utils/commands/multiple.items","csui/models/command","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o,s,a,l,r,c){"use strict";var d=i.extend({"nodesSelectionType":"savedQuery"},e.config()),u=r.extend({});i.extend(u.prototype,l);var p,m;return u.extend({"defaults":{"signature":"BOAttachmentsCreate","command_key":["BOAttachmentsCreate"],"name":c.BOAttachmentCreate.name,"verb":c.BOAttachmentCreate.verb,"doneVerb":c.BOAttachmentCreate.doneVerb,"pageLeavingWarning":c.BOAttachmentCreate.pageLeavingWarning,"scope":"multiple","successMessages":{"formatForNone":c.BOAttachmentCreate.successMessages.formatForNone,"formatForOne":c.BOAttachmentCreate.successMessages.formatForOne,"formatForTwo":c.BOAttachmentCreate.successMessages.formatForMultiple,"formatForFive":c.BOAttachmentCreate.successMessages.formatForMultiple},"errorMessages":{"formatForNone":c.BOAttachmentCreate.successMessages.formatForNone,"formatForOne":c.BOAttachmentCreate.errorMessages.formatForOne,"formatForTwo":c.BOAttachmentCreate.errorMessages.formatForMultiple,"formatForFive":c.BOAttachmentCreate.errorMessages.formatForMultiple}},"enabled":function(e){if(e.data&&e.data.enabledAttach){return!!s.getAtLeastOneNode(e).length}return!!e.collection&&!!e.collection.businessObjectActions&&!!e.collection.businessObjectActions.data&&i.has(e.collection.businessObjectActions.data,this.defaults.signature)},"execute":function(e,t){var o=n.Deferred();e.suppressFailMessage=!0,e.suppressSuccessMessage=!0,e.context=e.context||t&&t.context,t=i.extend(t,e.data,{"collection":e.collection});var a=s.getAtLeastOneNode(e);return a.length&&e.originatingView?(e.originatingView.triggerMethod("set:picker:result",{"nodes":a.models}),o.resolve(),e.originatingView.triggerMethod("close")):(e.nodesSelectionType=e.nodesSelectionType||t&&t.nodesSelectionType||d.nodesSelectionType,csui.require(["csui/controls/globalmessage/globalmessage","xecmpf/widgets/boattachments/impl/boattachment.model"],function(){p=arguments[0],m=arguments[1],this._selectNodes(e,t).then(function(i){this._showProgressbarAndPerformActions(i.nodes,e,t).then(o.resolve,o.reject)}.bind(this),function(e){e&&!e.cancelled&&p.showMessage("error",e),o.reject()})}.bind(this),o.reject)),o},"_selectNodes":function(e,t){var o=n.Deferred(),s=this;return csui.require(["csui/dialogs/node.picker/node.picker","xecmpf/controls/savedquery.node.picker/savedquery.node.picker.view","csui/controls/toolbar/toolitems.factory"],function(t,n,a){var l=new a({"main":[{"signature":s.get("signature"),"name":c.BOAttachmentCreate.addButtonLabel,"commandData":{"enabledAttach":!0}}]},{"maxItemsShown":1,"dropDownText":c.ToolbarItemMore,"dropDownIcon":"icon icon-toolbar-more","addGroupSeparators":!1});("savedQuery"===e.nodesSelectionType?new n(i.extend({"title":c.BOAttachmentCreate.name,"enableBackButton":!0,"backButtonToolTip":c.backButtonToolTip,"connector":e.collection.connector,"toolbarItems":{"otherToolbar":l,"inlineToolbar":[],"tableHeaderToolbar":l}},i.omit(e,"collection","toolbarItems"))):new t(i.extend({"selectMultiple":!0,"selectableTypes":[],"unselectableTypes":[],"showAllTypes":!0,"dialogTitle":c.BOAttachmentCreate.name,"selectButtonLabel":c.selectButtonLabel}))).show().then(o.resolve,o.reject)},o.reject),o},"_showProgressbarAndPerformActions":function(e,t,o){var s=n.Deferred();return csui.require(["csui/models/fileuploads"],function(n){var a=i.map(e,function(e){return{"name":e.get("name"),"state":"pending","count":0,"total":1,"node":e}}),l=new n(a),r=i.defaults({"nodes":l,"suppressMultipleFailMessage":!0},t);l.each(function(e){e.node=e.get("node"),e.unset("node",{"silent":!0})}),p.showProgressPanel(l,{"oneFileTitle":c.BOAttachmentCreate.progressBarMessages.oneFileTitle,"oneFileSuccess":c.BOAttachmentCreate.successMessages.formatForOne,"multiFileSuccess":c.BOAttachmentCreate.successMessages.formatForMultiple,"oneFilePending":c.BOAttachmentCreate.progressBarMessages.oneFileTitle,"multiFilePending":c.BOAttachmentCreate.progressBarMessages.multiFilePending,"oneFileFailure":c.BOAttachmentCreate.errorMessages.formatForOne,"multiFileFailure":c.BOAttachmentCreate.progressBarMessages.multiFileFailure,"someFileSuccess":c.BOAttachmentCreate.successMessages.formatForMultiple,"someFilePending":c.BOAttachmentCreate.progressBarMessages.multiFilePending,"someFileFailure":c.BOAttachmentCreate.progressBarMessages.multiFileFailure,"enableCancel":!1}),this._performActions(r,o).then(function(){p.hideFileUploadProgress(),s.resolve.apply(s,arguments)}.bind(this),s.reject)}.bind(this),s.reject),s},"_performAction":function(e,t){csui.require(["xecmpf/utils/util"],function(i){var n=e.node,s=n.connector;return s.makeAjaxCall({"url":o.combine(s.getConnectionUrl().getApiBase("v2"),"businessobjects",encodeURIComponent(i.unEscapeSpecialCharacters(t.extId)),encodeURIComponent(t.boType),encodeURIComponent(t.boid),"businessattachments",n.get("id")),"type":"POST","data":{"expand":{"properties":{"fields":["original_id","ancestors","parent_id","reserved_user_id","createdby","modifiedby"]}}},"success":function(i,n,o){var a=new m(i.results[0],{"connector":s,"parse":!0});a.isLocallyCreated=!0,t.collection.add(a,{"at":0}),e.deferred.resolve(e)},"error":function(t,i,o){var s=t?new a(t,n):t;e.deferred.reject(e,s)},"complete":function(t,i){e.set("count",1)}})})}})}),csui.define("xecmpf/models/eac/eac.eventlist.columns.definitions",["i18n!xecmpf/widgets/eac/impl/nls/lang"],function(e){return{"event_name":{"hidden":!1,"key":"event_name","name":e.documentTypeLabel,"type":-1,"type_name":"String","sort":!0},"namespace":{"key":"namespace","name":e.documentNameLabel,"type":-2,"type_name":"String"},"action_plan":{"key":"action_plan","name":e.documentStatusLabel,"type":-1,"type_name":"String"}}}),
csui.define("xecmpf/models/eac/eventactionplans.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/expandable/expandable.mixin","csui/models/browsable/client-side.mixin","csui/models/columns","xecmpf/models/eac/eac.eventlist.columns.definitions"],function(e,t,i,n,o,s,a,l,r){var c=i.Model.extend({"idAttribute":"","constructor":function(e,t){this.options=t||(t={}),i.Model.prototype.constructor.apply(this,arguments)},"parse":function(e){return e&&(e.has_action_plan="false",e.action_plans&&(e.has_action_plan=(!!e.action_plans.length).toString())),e}}),d=i.Collection.extend({"model":c,"constructor":function(e,t){this.options=t||{},i.Collection.prototype.constructor.apply(this,arguments),this.makeConnectable(t).makeClientSideBrowsable(t),this.columns=new l,this.columns.reset(this.getColumnModels())},"url":function(){var e=this.connector.getConnectionUrl().getApiBase("v2");return e=n.combine(e,"eventactioncenter","actionplan")},"getColumnModels":function(){var t=r,i=e.keys(t);return e.reduce(i,function(i,n){var o=t[n];return o&&i.push(e.extend({"column_key":n},o)),i},[])},"parse":function(e){for(var t=e.results.data,i=0;i<t.length;i++)t[i].action_plan_count&&parseInt(t[i].action_plan_count)>0&&(t[i].enableActionPlanCount=!0),t[i].eventIndexCount=i;return t}});return o.mixin(d.prototype),a.mixin(d.prototype),d}),csui.define("xecmpf/utils/commands/eac/eac.refresh",["csui/lib/underscore","i18n!xecmpf/utils/commands/nls/localized.strings","csui/utils/commandhelper","csui/utils/commands/node","csui/utils/command.error","xecmpf/models/eac/eventactionplans.model","csui/controls/globalmessage/globalmessage"],function(e,t,i,n,o,s,a){"use strict";return n.extend({"defaults":{"signature":"EACRefresh","command_key":["EACRefresh"]},"enabled":function(e,t){return!0},"execute":function(i,n){i.suppressSuccessMessage=!0,i.suppressFailMessage=!0,this.eacCollection&&(this.eacCollection=null),this.eacCollection=new s(void 0,e.extend({},i.collection.options));var o=this.eacCollection.fetch();return o.done(function(){i.collection.reset(this.eacCollection.models),a.showMessage("success",t.Refresh)}.bind(this)),o.done().fail(function(){a.showMessage("error",t.RefreshError)}),o}})}),csui.define("xecmpf/utils/commands/eac/eac.back",["require","csui/lib/jquery","csui/utils/base","csui/lib/underscore","i18n!csui/utils/commands/nls/localized.strings","csui/utils/commandhelper","csui/utils/commands/node","csui/utils/command.error"],function(e,t,i,n,o,s,a,l){"use strict";return a.extend({"defaults":{"signature":"EACBack","command_key":["EACBack"]},"enabled":function(e,t){return!0},"execute":function(e,t){var i=e.context||t.context,n=i&&i.viewStateModel;n&&n.restoreLastRouter()}})}),csui.define("xecmpf/utils/commands/eac/add.to.warehouse",["module","require","csui/lib/underscore","csui/lib/jquery","i18n!xecmpf/widgets/eac/impl/nls/lang","csui/utils/commands/node","csui/models/nodechildren","csui/utils/commands/open.classic.page","csui/utils/url"],function(e,t,i,n,o,s,a,l,r){"use strict";var c,d,u=i.extend({"enabled":!0,"openInNewTab":null},e.config());return null==u.openInNewTab&&(u.openInNewTab=l.openInNewTab),s.extend({"defaultPagesList":[],"defaults":{"signature":"addToWarehouse","command_key":["addToWarehouse","addToWarehouse"],"name":o.addToWareHouse,"successMessages":{"formatForNone":o.addToWareHouse,"formatForOne":o.addToWareHouse,"formatForTwo":o.addToWareHouse,"formatForFive":o.addToWareHouse},"errorMessages":{"formatForNone":o.addToWareHouseFailure,"formatForOne":o.addToWareHouseFailure,"formatForTwo":o.addToWareHouseFailure,"formatForFive":o.addToWareHouseFailure}},"enabled":function(e){var t=!1;return e&&e.nodes.models?e.nodes.models.forEach(function(e){806===e.get("type")&&e.actions.get({"signature":"addToWarehouse"})&&e.get("action_plan_count")>0&&(e.isEvent=!0,t=!0),875===e.get("type")&&e.actions.get({"signature":"addToWarehouse"})&&(t=!0)}):t=!1,t},"execute":function(e,t){var i=n.Deferred(),o=e.context||t&&t.context,s=u.openInNewTab&&window.open("","_blank")||window,l=this;s.focus(),csui.require(["csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node"],function(){c=arguments[0],d=arguments[1];var t,i,r=n.when,u=n.Deferred();n.whenAll=function(e){if(n.isArray(e)){var t=n.Deferred();return r.apply(n,e).done(function(){t.resolve(Array.prototype.slice.call(arguments))}).fail(function(){t.reject(Array.prototype.slice.call(arguments))}),t.promise()}return r.apply(n,arguments)},i=e.nodes.models.map(function(i){if(i.isEvent)return t=new a(void 0,{"node":i}),i.nodeCollection=t,t.fetch();s.location.href=l._getUrl(o,e),u.resolve()}),n.whenAll(i).then(function(){s.location.href=l._getUrl(o,e),u.resolve()})},i.reject)},"_getUrl":function(e,t){var i=e.getObject(c),n=new r(i.connection.url).getCgiScript(),o=this._getUrlQueryParameters(e,t,n),s=r.combineQueryString(o);return r.appendQuery(n,s)},"_getUrlQueryParameters":function(e,t,i){var n,o=[];return t.nodes.models?(t.nodes.models.forEach(function(e){e.isEvent?e.nodeCollection.models.forEach(function(e){o.push(e.get("id"))}):o.push(e.get("id"))}),n=o.length>1?{"func":"transport.ProcessMultiAddToWarehouse","nodeID":o,"nextUrl":i}:{"func":"ll","objId":o[0],"objAction":"addToWarehouse","nextUrl":i}):n}})}),csui.define("xecmpf/widgets/boattachments/impl/boattachment.table/commands/snapshot",["csui/lib/jquery","csui/lib/underscore","csui/models/command","csui/utils/commandhelper","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o){return i.extend({"defaults":{"signature":"Snapshot","name":o.CommandSnapshot,"scope":"multiple","doneVerb":o.CommandDoneVerbCreated},"enabled":function(e){return e&&e.container&&e.nodes&&e.nodes.length>0},"execute":function(i,n){i.suppressSuccessMessage=!0,i.suppressFailMessage=!0;var s=e.Deferred(),a=i.container;return csui.require(["csui/utils/url","csui/utils/base","csui/utils/contexts/factories/node","csui/utils/contexts/factories/children","csui/utils/contexts/factories/children2","csui/controls/globalmessage/globalmessage","csui/widgets/nodestable/nodestable.view","csui/utils/contexts/factories/next.node","csui/behaviors/default.action/default.action.behavior"],function(e,l,r,c,d,u,p,m,f){function h(e,t){t.isLocallyCreated=!0,t.fetch().always(function(){e.add(t,{"at":0}),b(),s.resolve()})}function b(){var e={"context":i.context,"nextNodeModelFactory":m,"link_url":f.getDefaultActionNodeUrl(k),"targetFolder":k},n=t.str.sformat(o.snapshotCreatedWithName,x);u.showMessage("success_with_link",n,void 0,e)}var g=new FormData,w=JSON.stringify(i.nodes.map(function(e){return e.get("id")})).replace("[","{").replace("]","}"),v=l.formatISODateTime(new Date((new Date).getTime())),y=i.collection.options.data.snapshot||{},x=i.collection.options.data.foldername||y.folderNamePrefix||"";x=x.trim()+" "+v.substring(0,v.indexOf(".")).replace(/T/g," ").replace(/:/g,"."),x=x.trim(),g.append("body",JSON.stringify(t.extend({},{"snapshot_parent_name":y.parentFolderName,"snapshot_name":x,"bus_attach_ids":w})));var k,_=e.combine(a.connector.getConnectionUrl().getApiBase("v2"),"nodes",a.get("id"),"snapshots"),C={"type":"POST","url":_,"data":g,"contentType":!1,"processData":!1},A=i.context||n.context;a.connector.makeAjaxCall(C).done(function(e,t,i){p.useV2RestApi&&(c=d);var n=A.getModel(r),o=A.getCollection(c),l=Math.abs(e.results.data.parent_id);k=A.getModel(r,{"connector":a.connector,"attributes":{"id":e.results.data.id}});var u;e.results.parent&&(u=A.getModel(r,{"connector":a.connector,"attributes":e.results.parent})),n.get("id")===l?h(o,k):u&&n.get("id")===Math.abs(u.get("parent_id"))?h(o,u):(n=o.findWhere({"id":l}),n?n.fetch().always(function(){b(),s.resolve()}):(b(),s.resolve()))}).fail(function(e,t,i){var n=e.responseJSON&&new l.Error(e.responseJSON).error;u.showMessage("error",o.snapshotFailed,n),s.reject()})}),s.promise()}})}),csui.define("xecmpf/utils/commands/eac/add.events",["module","require","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/commands/add","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o,s,a){var l=i.extend({"enabled":!0},e.config());return s.extend({"defaults":{"signature":"addEvents","name":a.addEvents,"scope":"single"},"enabled":function(e,t){return l.enabled},"execute":function(e,t){e.forwardToTable=!0;var i,o=n.Deferred(),s=this._getAddableTypeName(e,t);return csui.require(["xecmpf/utils/table/inlineforms/eventactioncenter/factories/eventfeedmodel","csui/models/node/node.model"],function(a,l){var r=new a(void 0,{"connector":e.container.connector});r.fetch(),i=new l({"type":t.addableType,"type_name":s,"collection":r,"container":!0},{"connector":e.container.connector,"collection":r}),n.Deferred().resolve(i).promise().done(function(){o.resolve.apply(o,arguments)}).fail(function(){o.reject.apply(o,arguments)})},function(e){o.reject(e)}),o.promise()}})}),csui.define("xecmpf/utils/commands/eac/add.action.plan",["module","require","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/models/command","csui/utils/commandhelper","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o,s,a,l){i.extend({"enabled":!0},e.config());return s.extend({"defaults":{"signature":"addActionPlan","name":l.AddActionPlan,"scope":"single"},"execute":function(e,t){var o=n.Deferred();return csui.require(["csui/utils/contexts/factories/next.node"],function(n){var s=e.context||t&&t.context,l=a.getJustOneNode(e),r=s.getModel(n);l.set("isAddActionPlan",!0),i.extend(s,{"model":l}),r.set("id",l.get("id")),o.resolve()},o.reject),o.promise()}})}),csui.define("xecmpf/utils/commands/eac/delete",["module","require","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/command.error","csui/utils/commandhelper","csui/models/fileuploads","csui/controls/globalmessage/globalmessage","csui/utils/url","csui/utils/taskqueue","csui/utils/commands/node","csui/utils/commands/multiple.items","csui/utils/commands/confirmable","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f){var h,b=i.extend({"enabled":!0,"parallelism":1,"actionType":"DELETE","allowMultipleInstances":!0},e.config()),g=u.extend({"defaults":{"signature":"deleteEvent","multiple":!0,"scope":"multiple","name":f.delete,"verb":f.CommandVerbDelete,"pageLeavingWarning":f.DeletePageLeavingWarning,"allowMultipleInstances":b.allowMultipleInstances,"successMessages":{"formatForNone":f.DeleteItemsNoneMessage,"formatForOne":f.DeleteOneItemSuccessMessage,"formatForTwo":f.DeleteSomeItemsSuccessMessage,"formatForFive":f.DeleteManyItemsSuccessMessage},"errorMessages":{"formatForNone":f.DeleteItemsNoneMessage,"formatForOne":f.DeleteOneItemFailMessage,"formatForTwo":f.DeleteSomeItemsFailMessage,"formatForFive":f.DeleteManyItemsFailMessage}},"enabled":function(e,t){return b.enabled},"allowCollectionRefetch":!1,"_getConfirmTemplate":function(e,t){return i.template(f.DeleteCommandConfirmDialogHtml)},"_getConfirmData":function(e,t){var n=a.getAtLeastOneNode(e),o=1===n.length?i.str.sformat(f.DeleteCommandConfirmDialogSingleMessage,n.at(0).get("name")):i.str.sformat(f.DeleteCommandConfirmDialogMultipleMessage,n.length);return{"title":f.DeleteCommandConfirmDialogTitle,"message":o}},"_performAction":function(e,t){var i=e.node,o=n.Deferred(),a={"url":c.combine(i.connector.getConnectionUrl().getApiBase("v2"),"/nodes/"+i.get("id")),"type":"PUT","originatingView":status.originatingView,"collection":status.collection,"data":{"status":0}};i.connector.makeAjaxCall(a).done(function(){e.deferred.resolve(e),o.resolve(i)}).fail(function(t){var n=t?new s(t,i):t;e.deferred.reject(e,n),o.reject(n)});var l=t.originatingView;return l&&l.unblockActions&&l.unblockActions(),o.promise()},"startGlobalMessage":function(e,t){r.showProgressPanel(e,{"oneFileTitle":f.DeletingOneItem,"oneFileSuccess":f.DeleteOneItemSuccessMessage,"multiFileSuccess":f.DeleteManyItemsSuccessMessage,"oneFilePending":f.DeletingOneItem,"multiFilePending":f.DeleteItems,"oneFileFailure":f.DeleteOneItemFailMessage,"multiFileFailure":f.DeleteManyItemsFailMessage,"someFileSuccess":f.DeleteSomeItemsSuccessMessage,"someFilePending":f.DeletingSomeItems,"someFileFailure":f.DeleteSomeItemsFailMessage,"enableCancel":!1,"originatingView":t.originatingView,"locationLabelPending":f.deletingLocationLabel,"locationLabelCompleted":f.deletedLocationLabel,"allowMultipleInstances":b.allowMultipleInstances,"actionType":b.actionType})}});return i.extend(g.prototype,m,{"execute":function(e,t){var i=n.Deferred(),o=this;return e.suppressFailMessage=!0,e.suppressSuccessMessage=!0,e.deleteBlockAction=!0,csui.require(["csui/models/fileuploads","csui/utils/contexts/factories/next.node","csui/controls/globalmessage/globalmessage"],function(n,s,a){if(l=n,h=s,r=a,r.isActionInProgress(b.actionType,f.DeleteNotAllowed,f.CommandTitleDelete))return i.resolve();o._executeDelete(e,t).then(i.resolve,i.reject)},i.reject),i.promise()},"_executeDelete":function(e,t){var o=this;t||(t={});var l=a.getAtLeastOneNode(e),r=1===l.length&&l.first(),c=n.Deferred(),d=e.context||t.context;return t.parallelism||(t.parallelism=b.parallelism),t.originatingView=e.originatingView,m.execute.call(this,e,t).done(function(i){r&&r===e.container?setTimeout(function(){var t=d.getModel(h),i=e.container.get("parent_id");t.set("id",i.id||i)}):t.infiniteScroll&&e.collection.fetch({"reset":!1,"remove":!1,"merge":!0}),o.allowCollectionRefetch=!0,c.resolve(i)}).fail(function(e){var t=e&&i.find(e,function(e){return!(e instanceof s)}),n=t||e;c.reject(n)}),c.promise()},"_performActions":function(e,t){var o=this,s=n.Deferred(),a=e.data||{},r=null==a.showProgressDialog||a.showProgressDialog,c=e.nodes.models,d=i.map(c,function(e){return{"name":e.get("name"),"state":"pending","count":0,"total":1,"node":e}}),u=c&&c[0]&&c[0].connector,m=new l(d,{"connector":u,"container":e.container?e.container.clone():void 0}),f=i.defaults({"nodes":m},e);(new Date).getTime();m.each(function(e){var t=e.get("node");e.node=t,e.unset("node")}),r&&this.startGlobalMessage(m,t);var h=e.originatingView;h&&h.unblockActions&&h.unblockActions(),f.suppressMultipleSuccessMessage=!0,f.suppressMultipleFailMessage=!0;return p._performActions.call(this,f,t).done(function(e){for(var t=e[0].collection,i=0;i<e.length;i++)t.remove(e[i]);s.resolve(e)},this).fail(function(e){return r||o.showError(e),s.reject(e)}),s.promise()}}),g}),csui.define("xecmpf/utils/commands/eac/open.eventdefinition",["module","require","csui/lib/underscore","csui/lib/jquery","csui/models/command","csui/utils/commandhelper"],function(e,t,i,n,o,s){"use strict";i.extend({"enabled":!0},e.config());return o.extend({"defaults":{"signature":"OpenEventDefinition","command_key":["default","browse"],"scope":"single"},"enabled":function(e){return!0},"execute":function(e,t){var o=n.Deferred();return csui.require(["csui/utils/contexts/factories/next.node"],function(n){var a=e.context||t&&t.context,l=s.getJustOneNode(e),r=a.getModel(n);i.extend(a,{"model":l}),r.set("id",l.get("id")),o.resolve()},o.reject),o.promise()}})}),csui.define("xecmpf/utils/commands/xecm.open.plugins/impl/al.web.viewer.plugin",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/url"],function(e,t,i,n){"use strict";function o(){}var s=window.csui.requirejs.s.contexts._.config.config["csui/utils/commands/open"]||{};return s=t.extend({"isWebViewerConfigured":!1,"supportedWebViewerMimeTypes":[]},s),s=t.extend(s,e.config()),s.supportedWebViewerMimeTypes=t.invoke(s.supportedWebViewerMimeTypes,"toLowerCase"),o.prototype.getUrl=function(e){var t,o,s="",a=e.connector.getConnectionUrl().getApiBase("v2"),l=e.get("version_number");l&&(s=n.combineQueryString({"version":l,"ignoreEditorRanking":!0}));var r=n.appendQuery(n.combine(a,"externalviewer/webviewer/"+e.get("id")+"/viewerconfig"),s);return e.connector.makeAjaxCall({"url":r,"type":"GET","async":!1}).done(function(e,i,n){t=e.url+"xml="+e.xml}).fail(function(e,t,i){o=i}),t?i.Deferred().resolve(t).promise():i.Deferred().reject(o).promise()},o.prototype.needsAuthentication=function(e){return!0},o.isSupported=function(e){var t=!1,i=!1,o=e.get("mime_type");if(t=o&&s.isWebViewerConfigured&&s.supportedWebViewerMimeTypes.indexOf(o.toLowerCase())>=0,t&&(e.attributes&&e.attributes.data&&e.attributes.data.external_source&&(i=e.attributes.data.external_source),t=!(!i||"sap_al"!==i)),t){t=!1;var a="",l=e.connector.getConnectionUrl().getApiBase("v2"),r=e.get("version_number");a=r?n.combineQueryString({"version":r,"ignoreEditorRanking":!0,"ignoreAncestor":!0}):n.combineQueryString({"ignoreEditorRanking":!0,"ignoreAncestor":!0});var c=n.appendQuery(n.combine(l,"externalviewer/webviewer/"+e.get("id")+"/enabledstatus"),a);e.connector.makeAjaxCall({"url":c,"type":"GET","async":!1}).done(function(e,i,n){t=!(!e||!e.enabledStatus)})}return t},o}),csui.define("xecmpf/utils/commands/xecm.open.plugins/impl/web.viewer.plugin",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/url"],function(e,t,i,n){"use strict";function o(){}var s=window.csui.requirejs.s.contexts._.config.config["csui/utils/commands/open"]||{};return s=t.extend({"isWebViewerConfigured":!1,"supportedWebViewerMimeTypes":[]},s),s=t.extend(s,e.config()),s.supportedWebViewerMimeTypes=t.invoke(s.supportedWebViewerMimeTypes,"toLowerCase"),o.prototype.getUrl=function(e){var t,o,s="",a=e.connector.getConnectionUrl().getApiBase("v2"),l=e.get("version_number");l&&(s=n.combineQueryString({"version":l}));var r=n.appendQuery(n.combine(a,"externalviewer/webviewer/"+e.get("id")+"/viewerconfig"),s);return e.connector.makeAjaxCall({"url":r,"type":"GET","async":!1}).done(function(e,i,n){t=e.url+"xml="+e.xml}).fail(function(e,t,i){o=i}),t?i.Deferred().resolve(t).promise():i.Deferred().reject(o).promise()},o.prototype.needsAuthentication=function(e){return!0},o.isSupported=function(e){var t=!1,i=e.get("mime_type");if(t=i&&s.isWebViewerConfigured&&s.supportedWebViewerMimeTypes.indexOf(i.toLowerCase())>=0){t=!1;var o="",a=e.connector.getConnectionUrl().getApiBase("v2"),l=e.get("version_number");l&&(o=n.combineQueryString({"version":l}));var r=n.appendQuery(n.combine(a,"externalviewer/webviewer/"+e.get("id")+"/enabledstatus"),o);e.connector.makeAjaxCall({"url":r,"type":"GET","async":!1}).done(function(e,i,n){t=!(!e||!e.enabledStatus)})}return t},o}),csui.define("xecmpf/utils/commands/xecm.open.plugins/impl/xecm.open.plugins",["xecmpf/utils/commands/xecm.open.plugins/impl/al.web.viewer.plugin","xecmpf/utils/commands/xecm.open.plugins/impl/web.viewer.plugin"],function(e,t){"use strict";return[{"sequence":50,"plugin":e,"decides":e.isSupported},{"sequence":500,"plugin":t,"decides":t.isSupported}]}),csui.define("hbs!xecmpf/utils/createdocument/impl/embed.powerdocs",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="xecmpf-embed-powerdocs"></div>'}});return i.registerPartial("xecmpf_utils_createdocument_impl_embed.powerdocs",n),n}),csui.define("xecmpf/utils/createdocument/nls/createdocument.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/utils/createdocument/nls/root/createdocument.lang",{"genericWarningMessage":"Server Error: Unable to perform the action"}),csui.define("css!xecmpf/utils/createdocument/impl/embed.powerdocs",[],function(){}),csui.define("xecmpf/utils/createdocument/embed.powerdocs.view",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/url","csui/controls/progressblocker/blocker","hbs!xecmpf/utils/createdocument/impl/embed.powerdocs","i18n!xecmpf/utils/createdocument/nls/createdocument.lang","css!xecmpf/utils/createdocument/impl/embed.powerdocs"],function(e,t,i,n,o,s,a,l,r){return o.ItemView.extend({"template":l,"tagName":"div","className":"xecmpf-embed-powerdocs-view","constructor":function(e){e||(e={}),o.ItemView.prototype.constructor.call(this,e),a.imbue(this)},"generateIframeElement":function(){var e,t,i=this;this.$el.find(".embed-powerDocs-iframe").remove(),e=document.createElement("iframe"),e.setAttribute("id","embedPowerDocs"),e.setAttribute("name","embedPowerDocs"),e.setAttribute("class","embed-powerDocs-iframe"),this.$el.find(".xecmpf-embed-powerdocs").append(e),e&&e.addEventListener("load",function(){i.unblockActions();var n;e.contentWindow&&e.contentWindow.document&&(t=e.contentWindow.document,n=t.createElement("style"),n.innerHTML="html{ overflow: auto } body{ height: auto }",t.head.appendChild(n))})},"loadUrlInIframe":function(e){this.blockActions(),this.generateIframeElement(),this.$el.find("#embedPowerDocs").attr("src",e)},"loadPFPowerDocsUrl":function(e,t,n){var o=document.createElement("form"),s=document.createElement("input");this.blockActions(),this.generateIframeElement(),i(o).attr({"name":"DocumentGeneration","id":"DocumentGeneration","method":"post","target":"embedPowerDocs","action":e}),i(s).attr({"type":"hidden","value":n,"name":"func"}),o.appendChild(s),s=document.createElement("input"),i(s).attr({"type":"hidden","value":t,"name":"wsId"}),o.appendChild(s),s=document.createElement("input"),i(s).attr({"type":"hidden","value":!0,"name":"hideHeader"}),o.appendChild(s),document.body.appendChild(o),o.submit(),document.body.removeChild(o)},"loadPowerDocsUrl":function(e,t,n,o,s){var a=document.createElement("form"),l=document.createElement("input");this.blockActions(),this.generateIframeElement(),i(a).attr({"name":"DocumentGeneration","id":"DocumentGeneration","method":"post","target":"embedPowerDocs","action":e}),i(l).attr({"type":"hidden","value":"xecmpfdocgen.PowerDocsPayload","name":"func"}),a.appendChild(l),n&&(l=document.createElement("input"),i(l).attr({"type":"hidden","value":n,"name":"featureDate"}),a.appendChild(l)),o&&(l=document.createElement("input"),i(l).attr({"type":"hidden","value":o,"name":"context"}),a.appendChild(l)),s&&(l=document.createElement("input"),i(l).attr({"type":"hidden","value":s,"name":"source"}),a.appendChild(l)),l=document.createElement("input"),i(l).attr({"type":"hidden","value":t,"name":"wsId"}),a.appendChild(l),l=document.createElement("input"),i(l).attr({"type":"hidden","value":!0,"name":"hideHeader"}),a.appendChild(l),document.body.appendChild(a),a.submit(),document.body.removeChild(a)}})}),csui.define("css!xecmpf/utils/commands/impl/createdocument/createdocument",[],function(){}),csui.define("xecmpf/utils/commands/createdocument",["require","module","csui/lib/underscore","csui/lib/jquery","csui/utils/url","csui/models/command","csui/utils/commandhelper","csui/utils/contexts/factories/connector","xecmpf/utils/createdocument/embed.powerdocs.view","i18n!xecmpf/utils/commands/nls/localized.strings","css!xecmpf/utils/commands/impl/createdocument/createdocument"],function(e,t,i,n,o,s,a,l,r,c){var d,u=i.once(function(){var e=n.Deferred();return csui.require(["csui/controls/side.panel/side.panel.view"],function(){d=arguments[0],e.resolve()},function(t){e.reject(t)}),e.promise()});t.config();return s.extend({"defaults":{"signature":"XECMPFCreateDocument","command_key":["xecmpfcreatedocument","XECMPFCreateDocument"],"name":c.createDocumentCommand,"scope":"single","types":[848]},"_getNodesByScope":function(e,t){return"leftToolbar"===e.toolItem.attributes.type?[e.container]:s.prototype._getNodesByScope.apply(this,arguments)},"execute":function(e,t){var n,o=e.container&&e.container.connector;n="leftToolbar"===e.toolItem.attributes.type?e.container:a.getJustOneNode(e),void 0===o&&n&&(o=n.connector),t=i.extend({},t,{"context":t?t.context:e.context,"connector":o,"model":n}),this._openFormInSidepanel(t)},"_openFormInSidepanel":function(e){u().then(function(){var t,i,n,s,a;i=new r,n=e.connector,s=new o(n.connection.url).getCgiScript(),a=e.model.get("id"),t=new d({"slides":[{"title":c.createDocumentDialogTitle,"content":i,"containerClass":"xecmpf-create-document-slide"}],"backdrop":"sidepanel-backdrop","sidePanelClassName":"xecmpf-create-document-side-panel","layout":{"header":!0,"resize":!0,"footer":!0,"mask":!0}}),t.show(),i.loadPFPowerDocsUrl(s,a,"xecmpfdocgen.XECMPFPowerDocsPayload")})}})}),csui.define("xecmpf/behaviors/toggle.header/toggle.header.behavior",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view","csui/utils/non-emptying.region/non-emptying.region","csui/lib/jquery.redraw"],function(e,t,i,n,o){"use strict";return i.Behavior.extend({"initialize":function(){this.listenTo(this.view,{"before:render":this.setTableRowSelectionToolbar}),this.tableHeader=this.options.tableHeader,this.container=this.options.alternatingTableContainer,this.tableToolbar=this.options.tableToolbar,this.tableRowSlectionToolbarViewOptions=this.options.tableRowSlectionToolbarViewOptions},"setTableRowSelectionToolbar":function(){if(this.view.tableView){this._setTableRowSelectionToolbarEventListeners(),this.view._tableRowSelectionToolbarView=new n(t.extend({"toolItemFactory":this.view.options.toolbarItems.tableHeaderToolbar,"toolbarItemsMask":this.view.options.toolbarItemsMasks.toolbars.tableHeaderToolbar,"toolbarCommandController":this.view.commandController,"showCondensedHeaderToggle":!0,"commands":this.view.defaultActionController.commands,"selectedChildren":this.view.tableView.selectedChildren,"container":this.view.collection.node,"context":this.view.context,"originatingView":this.view,"collection":this.view.collection},this.tableRowSlectionToolbarViewOptions));var e=this.view._tableRowSelectionToolbarView;this.listenTo(e,"toggle:condensed:header",function(){var t,i=this.$el.find(this.tableHeader),n=this.$el.find(this.container);i.is(":visible")?(t=!1,i.slideUp(500),n.removeClass("xecmpf-show-header")):(t=!0,i.slideDown(500),n.addClass("xecmpf-show-header")),e.trigger("toolbar:activity",!0,t)})}},"_setTableRowSelectionToolbarEventListeners":function(){var e=new o({"el":this.tableToolbar});this.listenTo(this.view.tableView.selectedChildren,"reset",function(){e.show(this.view._tableRowSelectionToolbarView),this._onSelectionDisplayOrHide(this.view.tableView.selectedChildren.length)})},"_onSelectionDisplayOrHide":function(e){var t=this.$el.find(this.tableHeader),i=this.$el.find(this.tableToolbar),n=this.$el.find(this.container);e>0?i.is(":hidden")&&(t.slideUp(500),i.slideDown(500),this._triggerToolbarActivityEvent(!0,!1)):i.is(":visible")&&(i.slideUp(500),t.slideDown(500),n.removeClass("xecmpf-show-header"),this._triggerToolbarActivityEvent(!1,!0))},"_triggerToolbarActivityEvent":function(e,t){this.view._tableRowSelectionToolbarView.trigger("toolbar:activity",e,t)}})}),csui.define("xecmpf/widgets/integration/folderbrowse/toolbaritems",["i18n!xecmpf/widgets/integration/folderbrowse/impl/nls/localized.strings","css!xecmpf/widgets/integration/folderbrowse/impl/folderbrowse"],function(e){return{"rightToolbar":[{"signature":"SearchFromHere","name":e.SearchToolItem,"icon":"icon xecmpf-icon-search","group":"main","className":"csui-search-button"},{"signature":"WorkspacePage","name":e.PageWidgetToolItem,"icon":"icon csui-icon-open-full-page","group":"main","options":{"hAlign":"right"},"commandData":{"applyTheme":!0}}]}}),csui.define("xecmpf/widgets/boattachments/impl/boattachment.table/tablecell/createdby.view",["csui/lib/underscore","csui/controls/table/cells/cell/cell.view","csui/controls/table/cells/cell.registry","csui/utils/base"],function(e,t,i,n){"use strict";var o=t.extend({"className":"csui-truncate","getValueText":function(){return o.getValue(this.model,this.options.column)}},{"getValue":function(t,i){var o=i.name,s=t.get(o+"_expand")||t.get(o)||"";return e.isObject(s)?n.formatMemberName(s):t.get(o+"_formatted")||s.toString()},"getModelExpand":function(e){return{"properties":[e.column.name]}}});return i.registerByDataType(14,o),i.registerByDataType(19,o),i.registerByColumnKey("createdby",o),o}),csui.define("xecmpf/widgets/boattachments/impl/boattachment.table/tablecell/modifiedby.view",["csui/lib/underscore","csui/controls/table/cells/cell/cell.view","csui/controls/table/cells/cell.registry","csui/utils/base"],function(e,t,i,n){"use strict";var o=t.extend({"className":"csui-truncate","getValueText":function(){return o.getValue(this.model,this.options.column)}},{"getValue":function(t,i){var o=i.name,s=t.get(o+"_expand")||t.get(o)||"";return e.isObject(s)?n.formatMemberName(s):t.get(o+"_formatted")||s.toString()},"getModelExpand":function(e){return{"properties":[e.column.name]}}});return i.registerByDataType(14,o),i.registerByDataType(19,o),i.registerByColumnKey("modifiedby",o),o}),csui.define("css!xecmpf/widgets/eac/impl/actionplan.list/impl/actionplan.listitem",[],function(){}),csui.define("xecmpf/widgets/eac/impl/actionplan.list/impl/actionplan.toolbaritems",["csui/lib/underscore","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","i18n!xecmpf/widgets/eac/impl/nls/lang","css!xecmpf/widgets/eac/impl/actionplan.list/impl/actionplan.listitem"],function(e,t,i,n,o){"use strict";return{"inlineActionbar":new t({"main":[{"signature":"InlineEdit","name":n.ToolbarItemRename},{"signature":"Delete","name":n.ToolbarItemDelete}]},{"maxItemsShown":1,"dropDownText":n.ToolbarItemMore,"dropDownIcon":"icon xecmpf-more-actions-inline"}),"headerActionbar":new t({"main":[{"signature":"addToWarehouse","name":o.addToWareHouse},{"signature":"Delete","name":n.ToolbarItemDelete}]},{"maxItemsShown":2,"dropDownText":n.ToolbarItemMore,"dropDownIcon":"icon xecmpf-more-action-plan-inline"})}}),csui.define("hbs!xecmpf/widgets/eac/impl/actionplan.list/impl/actionplan.listitem",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a role="button" href="#" class="binf-flex-row xecmpf-eac-action-plan-name-link" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"name")||(null!=t?a(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":4,"column":93},"end":{"line":4,"column":101}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=a(i,"name")||(null!=t?a(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":4,"column":110},"end":{"line":4,"column":118}}}):s))+'" tabindex="'+e.escapeExpression((s=null!=(s=a(i,"tabindex")||(null!=t?a(t,"tabindex"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"tabindex","hash":{},"loc":{"start":{"line":4,"column":130},"end":{"line":4,"column":142}}}):s))+'">\r\n    <span class="xecmpf-eac-action-plan-name">'+e.escapeExpression((s=null!=(s=a(i,"name")||(null!=t?a(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":5,"column":46},"end":{"line":5,"column":54}}}):s))+'</span>\r\n</a>\r\n<input id="actionplan-object-name-input-'+e.escapeExpression((s=null!=(s=a(i,"nodeId")||(null!=t?a(t,"nodeId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"nodeId","hash":{},"loc":{"start":{"line":7,"column":40},"end":{"line":7,"column":50}}}):s))+'" class="actionplan-object-name-input \r\n    binf-form-control cs-input rename-field binf-hidden" placeholder="'+e.escapeExpression((s=null!=(s=a(i,"namePlaceholder")||(null!=t?a(t,"namePlaceholder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"namePlaceholder","hash":{},"loc":{"start":{"line":8,"column":70},"end":{"line":8,"column":89}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"namePlaceHolder")||(null!=t?a(t,"namePlaceHolder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"namePlaceHolder","hash":{},"loc":{"start":{"line":8,"column":103},
"end":{"line":8,"column":122}}}):s))+'" tabindex="0">\r\n<span class="actionplan-object-name-cancel csui-undo actionplan-edit-cancel inline-edit-icon\r\n      rename-field binf-hidden" tabindex="0" title="'+e.escapeExpression((s=null!=(s=a(i,"cancel")||(null!=t?a(t,"cancel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":10,"column":52},"end":{"line":10,"column":62}}}):s))+'"></span>\r\n<div class="csui-inlineform-group csui-inlineform-group-error actionplan-error binf-hidden ">\r\n    <div id="actionplan-object-error-message-'+e.escapeExpression((s=null!=(s=a(i,"nodeId")||(null!=t?a(t,"nodeId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"nodeId","hash":{},"loc":{"start":{"line":12,"column":45},"end":{"line":12,"column":55}}}):s))+'" class="binf-text-danger actionplan-error-message">\r\n        <span class="csui-text-danger actionplan-err-message"></span>\r\n    </div>\r\n</div>\r\n'},"3":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<input type="text" class="xecmpf-eac-action-plan-list-item-input \r\n     binf-form-control cs-input rename-field" placeholder="'+e.escapeExpression((s=null!=(s=a(i,"namePlaceHolder")||(null!=t?a(t,"namePlaceHolder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"namePlaceHolder","hash":{},"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":78}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"namePlaceHolder")||(null!=t?a(t,"namePlaceHolder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"namePlaceHolder","hash":{},"loc":{"start":{"line":18,"column":92},"end":{"line":18,"column":111}}}):s))+'" tabindex="0">\r\n<span class="actionplan-object-title-cancel csui-undo actionplan-edit-cancel inline-edit-icon\r\n      rename-field" tabindex="0" title="'+e.escapeExpression((s=null!=(s=a(i,"cancel")||(null!=t?a(t,"cancel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":20,"column":40},"end":{"line":20,"column":50}}}):s))+'"></span>\r\n<div class="csui-inlineform-group csui-inlineform-group-error actionplan-create-error binf-hidden ">\r\n    <div id="actionplan-create-object-error-message" class="binf-text-danger actionplan-create-error-message">\r\n        <span class="csui-text-danger actionplan-create-err-message"></span>\r\n    </div>\r\n</div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="xecmpf-eac-action-plan-list-item-selection-marker"></div>\r\n<div class="xecmpf-eac-check-box-list"></div>\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"name"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":3,"column":0},"end":{"line":26,"column":7}}}))?s:"")+'<div class="xecmpf-eac-action-plan-actions"></div>'}});return i.registerPartial("xecmpf_widgets_eac_impl_actionplan.list_impl_actionplan.listitem",n),n}),csui.define("xecmpf/widgets/eac/impl/actionplan.list/actionplan.listitem.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/contexts/factories/connector","csui/controls/checkbox/checkbox.view","csui/utils/commandhelper","csui/controls/tableactionbar/tableactionbar.view","xecmpf/widgets/eac/impl/actionplan.list/impl/actionplan.toolbaritems","hbs!xecmpf/widgets/eac/impl/actionplan.list/impl/actionplan.listitem","i18n!xecmpf/widgets/eac/impl/nls/lang","css!xecmpf/widgets/eac/impl/actionplan.list/impl/actionplan.listitem"],function(e,t,i,n,o,s,a,l,r,c,d){return n.LayoutView.extend({"tagName":"li","className":function(){var e="xecmpf-eac-action-plan-list-item";return e+=this.model.get("id")?"":" xecmpf-new-eac-action-plan-list-item"},"template":c,"constructor":function(e){e=e||{},n.LayoutView.prototype.constructor.call(this,e);this.listenTo(this.model,"show:inline:action:bar",this.onRender),this.listenTo(this.model,"delete:action:plan",this.deleteActionPlan),this.listenTo(this.model,"change:csuiInlineFormErrorMessage",this.onRenameMode),this.listenTo(this.model,"destroy",function(){this.options.originatingView.onActionPlanDelete(this)}),this.listenTo(this.model,"toggle:checkbox",function(){this.checkboxView.$el.trigger("click")})},"modelEvents":{"change":"onActionPlanListItemModelUpdate"},"regions":{"checkBoxListRegion":".xecmpf-eac-check-box-list","actionBarRegion":".xecmpf-eac-action-plan-actions"},"templateHelpers":function(){return{"tabindex":0===this._index?"0":"-1","name":this.model.get("name"),"username":this.model.get("username"),"deleteTooltip":d.deleteActionPlanButton,"deleteAria":d.deleteActionPlanButtonAria+" "+this.model.get("name"),"nodeId":this.model.get("id"),"namePlaceHolder":d.actionPlanTitlePlaceholder,"cancel":d.cancelLabel,"hideCheckbox":!this.model.attributes.hideCheckbox}},"triggers":{"click .xecmpf-eac-action-plan-name-link":"click:actionplan:item"},"ui":{"actionPlanNameButton":".xecmpf-eac-action-plan-name-link","actionPlanName":".xecmpf-eac-action-plan-name","actionPlanNameInput":".actionplan-object-name-input","actionPlanNameCancel":".actionplan-object-name-cancel","actionPlanErrorMsg":".actionplan-error","checkBoxList":".xecmpf-eac-check-box-list","acctions":".xecmpf-eac-action-plan-actions","titleCancel":".actionplan-object-title-cancel","titleInput":".xecmpf-eac-action-plan-input","actionPlanErr":".actionplan-err-message","actionPlanErrParent":".actionplan-error-message"},"events":{"click .actionplan-object-name-cancel":"_cancelEdit","focusout .xecmpf-eac-action-plan-list-item-input":"onFocusOutActionPlan","focusout @ui.actionPlanNameInput":"onFocusOutRename","click .actionplan-object-title-cancel":"onTitleCancel","focus @ui.actionPlanNameButton":function(e){this._hasFocus=!0},"focusin":function(e){this.ui.acctions.css("display","block"),this.ui.checkBoxList.css("display","block"),this.$el.addClass("action-plan-list-item-focus")},"focusout":"onFocusOut","keydown ":"onkeyInView","keydown .xecmpf-eac-action-plan-list-item-input":"onKeyInRenameMode","mouseover":"showHideInlineActionBar","mouseout":function(){this.ui.acctions.css("display","none"),this.model.get("checked")?this.ui.actionPlanNameButton.css("margin-left","8px"):this.ui.checkBoxList.css("display","none")&&this.ui.actionPlanNameButton.css("margin-left","22px")}},"showHideInlineActionBar":function(){this.model.attributes.checked?!!this.tableActionBarView&&this.tableActionBarView.$el.hide():!!this.tableActionBarView&&this.tableActionBarView.$el.show(),this.ui.checkBoxList.css("display","block"),this.ui.acctions.css("display","block"),!this.$el.hasClass("xecmpf-new-eac-action-plan-list-item")&&this.ui.actionPlanNameButton.css("margin-left","8px")},"onFocusOut":function(e){e.currentTarget.contains(e.relatedTarget)||(this.ui.acctions.css("display","none"),this.$el.removeClass("action-plan-list-item-focus"),this.model.get("checked")?this.ui.actionPlanNameButton.css("margin-left","8px"):this.ui.checkBoxList.css("display","none")&&this.ui.actionPlanNameButton.css("margin-left","22px"))},"onFocusOutRename":function(e){!e.delegateTarget.contains(e.relatedTarget)&&t(e.currentTarget).is(":visible")&&this._submitDescription()},"onKeyInRenameMode":function(e){13===e.keyCode&&(e.preventDefault(),this.onFocusOutActionPlan(e))},"onTitleCancel":function(){this.options.originatingView.onActionPlanDelete(this)},"onRenameMode":function(){var t,i=this.model.actions.findWhere({"signature":"rename"}),n=this.model.actions.findWhere({"signature":"delete"});if(!(e.isUndefined(i)&&(e.isUndefined(n)||this._parent.errorCase)||this.ui.actionPlanName.hasClass("binf-hidden"))){var o=this.model.get("name");this.ui.actionPlanNameInput.val(o),this.ui.actionPlanName.addClass("binf-hidden"),this.ui.actionPlanNameButton.addClass("binf-hidden"),this.ui.actionPlanErrorMsg.addClass("binf-hidden"),this.ui.actionPlanNameInput.removeClass("binf-hidden"),this.ui.checkBoxList.addClass("binf-hidden"),this.ui.acctions.addClass("binf-hidden"),this.ui.actionPlanNameCancel.removeClass("binf-hidden"),this.ui.actionPlanNameInput.trigger("focus"),t=this.options.originatingView.collection.findWhere({"plan_id":""}),t&&this.options.originatingView.collection.remove(t),this.options.originatingView.onActionPlanRenameCancel(this)}},"_checkName":function(){return this.ui.actionPlanName.hasClass("binf-hidden")?this.ui.actionPlanNameInput.val().trim():this.model.get("name")},"setErrorMessage":function(e,t){"rename"===t?(this.$el.addClass("cs-form-error"),this.ui.actionPlanErr.text(e),this.ui.actionPlanErrParent.attr("title",e),this.ui.actionPlanErrorMsg.hasClass("binf-hidden")&&this.ui.actionPlanErrorMsg.removeClass("binf-hidden")):(this.$el.addClass("cs-form-error"),this.$el.find(".actionplan-create-err-message").text(e),this.$el.find(".actionplan-create-error-message").attr("title",e),this.$el.find(".actionplan-create-error").hasClass("binf-hidden")&&this.$el.find(".actionplan-create-error").removeClass("binf-hidden"))},"_submitDescription":function(){if(this.ui.actionPlanName&&this.ui.actionPlanName.hasClass("binf-hidden")){var t,i=this._checkName(),n=this;i.length>0&&(t=this.model.get("data"),this.model.save({"name":i},{"wait":!0,"patch":!0,"includeActions":!0}).done(e.bind(function(){var e=a.refreshModelAttributesFromServer(this.model);this.model.set("name",i),e.done(function(){n.model.attributes.create=!1,n.model.set("data",t),n.render()}),this.$el.find(".csui-inlineform-group-error").hide(),this.$el.removeClass("cs-form-error")},this)).fail(e.bind(function(e){this.setErrorMessage(e.responseJSON.error,"rename")},this)))}},"_cancelEdit":function(){this.ui.actionPlanNameInput.addClass("binf-hidden"),this.ui.actionPlanNameCancel.addClass("binf-hidden"),this.onFocusOutActionPlan()},"onMouseEnter":function(){var t,i,n=this;this.model.get("id")&&(this.model.fetched&&(t=this.model.get("data"),i=this.model.get("event_def_id")),this.model.fetch().done(function(){n.model.set("data",t),n.model.set("event_def_id",i),n.tableActionBarView=new l(e.extend({"context":n.options.context,"collection":r.inlineActionbar,"status":{"context":n.options.context,"originatingView":n.options.originatingView,"model":n.model},"model":n.model,"originatingView":n.options.originatingView},r.inlineActionbar.options,{"maxItemsShown":1})),n.tableActionBarView.actionState.set("state","full"),n.actionBarRegion.show(n.tableActionBarView),n.listenTo(n.tableActionBarView,"after:execute:command",function(e){"Delete"===e.commandSignature&&(n.model.planID=n.model.attributes.plan_id,n.model.event_def_id=n.model.attributes.event_def_id,n.options.actionPlanListView.refreshCurrentActionPlanItem(n.model))})}))},"deleteActionPlan":function(e){e&&"Delete"!==e.commandSignature||this.options.originatingView.onActionPlanDelete(this)},"onRender":function(){!!this.model.attributes.create||this.model.attributes.hideCheckBox||(this.checkboxView=new s({"checked":!1,"disabled":!1,"ariaLabel":d.selectAllAria,"title":d.selectAll}),this.listenTo(this.checkboxView.model,"change:checked",function(e){e.changed.checked&&("true"===e.changed.checked?this.model.set("checked",!0):this.model.set("checked",!1)),this.triggerMethod("show:actionplan:moreButton")}),this.model.set("checked",!1,{"silet":!0}),this.checkBoxListRegion.show(this.checkboxView)),this.listenToOnce(this.model,"change:csuiInlineFormErrorMessage",this.onRenameMode),this.onMouseEnter()},"onFocusOutActionPlan":function(t){if(""===this.model.attributes.plan_id){if((!this.ui.titleCancel.is(t.relatedTarget)||13===t.keyCode)&&this.$el.find(".xecmpf-eac-action-plan-list-item-input").val()){var i=this.$el.find(".xecmpf-eac-action-plan-list-item-input").val(),n=this.options.originatingView.collection.findWhere({"name":i});if(n){var o=e.str.sformat(d.actionPlanCreateError,i);this.setErrorMessage(o,"create")}else this.trigger("click:actionplan:item"),this.model.set("name",i,{"silent":!0}),this.model.set("isAddActionPlan",!1,{"silent":!0}),this.model.set("planCreated",!0,{"silent":!0}),this.model.attributes.hideCheckBox=!0,this.$el.removeClass("cs-form-error"),this.render()}}else t||(this.model.set("hideCheckBox",!1,{"silent":!0}),this.model.set("create",!1,{"silent":!0}),this.$el.removeClass("cs-form-error"),this.render())},"onkeyInView":function(e){var i=e.keyCode;switch(i){case 13:case 32:e.target.classList.contains("cs-input")?13===i&&(e.preventDefault(),e.stopPropagation(),this._submitDescription()):e.target.classList.contains("actionplan-object-name-cancel")?(e.preventDefault(),e.stopPropagation(),this._cancelEdit()):e.target.classList.contains("actionplan-object-title-cancel")&&(e.preventDefault(),e.stopPropagation(),this.onTitleCancel());break;case 27:e.target.classList.contains("xecmpf-eac-action-plan-list-item-input")?(e.preventDefault(),e.stopPropagation(),this.onTitleCancel()):this.ui.actionPlanNameInput.is(t(e.target))&&(e.preventDefault(),e.stopPropagation(),this._cancelEdit());break;case 9:e.target.classList.contains("actionplan-object-title-cancel")&&this.onFocusOutActionPlan(e);break;case 39:this.ui.actionPlanNameButton.is(t(e.target))?this.ui.acctions.find(".binf-dropdown-toggle").prop("tabindex",0).trigger("focus"):e.target.classList.contains("csui-checkbox")&&this.ui.actionPlanNameButton.prop("tabindex",0).trigger("focus");break;case 37:this.ui.actionPlanNameButton.is(t(e.target))?this.$el.find(".csui-checkbox").prop("tabindex",0).trigger("focus"):this.ui.acctions.find(".binf-dropdown-toggle").is(t(e.target))&&this.ui.actionPlanNameButton.prop("tabindex",0).trigger("focus")}},"_setFocus":function(){this.ui.actionPlanNameButton.length>0?this.ui.actionPlanNameButton.trigger("focus"):this.$el.find(".xecmpf-eac-action-plan-list-item-input").length&&this.$el.find(".xecmpf-eac-action-plan-list-item-input").trigger("focus")},"onActionPlanListItemModelUpdate":function(){this.updateNewActionPlanIndication()},"updateNewActionPlanIndication":function(){this.$el.removeClass("xecmpf-new-eac-action-plan-list-item"),!this.model.get("id")&&this.$el.addClass("xecmpf-new-eac-action-plan-list-item")}})}),csui.define("hbs!xecmpf/widgets/eac/impl/actionplan.list/impl/actionplan.list",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-header xecmpf-eac-action-plan-header-region">\r\n  <div class="xecmpf-eac-action-plan-header">\r\n    <span class="cs-title xecmpf-eac-action-plan-header-text">'+e.escapeExpression((s=null!=(s=a(i,"actionPlansListHeader")||(null!=t?a(t,"actionPlansListHeader"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"actionPlansListHeader","hash":{},"loc":{"start":{"line":4,"column":62},"end":{"line":4,"column":89}}}):s))+'</span>\r\n    <div title="'+e.escapeExpression((s=null!=(s=a(i,"newActionPlanLabel")||(null!=t?a(t,"newActionPlanLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"newActionPlanLabel","hash":{},"loc":{"start":{"line":5,"column":16},"end":{"line":5,"column":40}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"newActionPlanLabel")||(null!=t?a(t,"newActionPlanLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"newActionPlanLabel","hash":{},"loc":{"start":{"line":5,"column":54},"end":{"line":5,"column":78}}}):s))+'" tabindex="0" role="button" class="binf-btn csui-groups-header-plus xecmpf-eac-add-action-plan-btn">\r\n      <span class="icon icon-toolbarAdd"></span>\r\n    </div>\r\n  </div>\r\n  <div class="xecmpf-action-plan-actions-list-container"></div>\r\n</div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"showAddActionPlan"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":11,"column":7}}}))?s:"")+'<div class="cs-content xecmpf-eac-action-plan-list binf-flex-column" role="navigation" aria-label="'+e.escapeExpression((a=null!=(a=l(i,"actionPlansGroup")||(null!=t?l(t,"actionPlansGroup"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"actionPlansGroup","hash":{},"loc":{"start":{"line":12,"column":99},"end":{"line":12,"column":119}}}):a))+'"></div>'}});return i.registerPartial("xecmpf_widgets_eac_impl_actionplan.list_impl_actionplan.list",n),n}),csui.define("css!xecmpf/widgets/eac/impl/actionplan.list/impl/actionplan.list",[],function(){}),csui.define("xecmpf/widgets/eac/impl/actionplan.list/actionplan.list.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/contexts/factories/connector","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view","csui/models/node/node.model","xecmpf/models/eac/eventactionplans.model","xecmpf/widgets/eac/impl/actionplan.list/impl/actionplan.toolbaritems","xecmpf/widgets/eac/impl/actionplan.list/actionplan.listitem.view","hbs!xecmpf/widgets/eac/impl/actionplan.list/impl/actionplan.list","i18n!xecmpf/widgets/eac/impl/nls/lang","css!xecmpf/widgets/eac/impl/actionplan.list/impl/actionplan.list"],function(e,t,i,n,o,s,a,l,r,c,d,u,p){var m=n.CollectionView.extend({"className":"xecmpf-action-plan-list-rows","tagName":"ul","constructor":function(e){e=e||{},this.options=e,this._focusIndex=0,n.CollectionView.prototype.constructor.call(this,e)},"childView":d,"childEvents":{"click:actionplan:item":"onActionPlanClickItem","click:actionplan":"onClickAddActionPlan","click:actionplan:delete":"onActionPlanDelete","click:actionplan:rename":"onActionPlanRename","keydown:action:rename":"onEditAction"},"events":{"keydown":"onkeyInView"},"childViewOptions":function(e,t){return{"context":this.options.context,"originatingView":this,"actionPlanListView":this.options.originatingView}},"onEditAction":function(e){this.triggerMethod("keydown:action:rename",e)},"onActionPlanClickItem":function(e){this.triggerMethod("actionplan:click:item",e)},"onClickAddActionPlan":function(e){this.triggerMethod("click:add:actionplan",e)},"onActionPlanDelete":function(e){this.triggerMethod("actionplan:click:delete",e)},"onActionPlanRename":function(e){this.triggerMethod("actionplan:click:rename",e)},"onActionPlanRenameCancel":function(e){var i=this.$el.find(".binf-active");t(i).removeClass("binf-active"),e.$el.addClass("binf-active")},"onkeyInView":function(e){var i,n=this.children.findByModel(this.collection.at(this._focusIndex));switch(e.keyCode){case 38:case 40:e.preventDefault(),e.stopPropagation(),38===e.keyCode&&this._focusIndex>0?this._focusIndex--:40===e.keyCode&&this._focusIndex<this.children.length-1&&this._focusIndex++,i=this.children.findByModel(this.collection.at(this._focusIndex)),this._changeTabIndexesAndSetFocus(n,i,!0),i._setFocus();break;case 9:e.shiftKey?(e.preventDefault(),e.stopPropagation(),this.options.originatingView.actionsRegion.$el.is(":visible")?(this.options.originatingView.actionsRegion.$el.find('li[data-csui-command="delete"] > a').prop("tabindex","0"),this.options.originatingView.actionsRegion.$el.find('li[data-csui-command="delete"] > a').trigger("focus")):e.target.classList.contains("actionplan-object-title-cancel")?t(e.target).siblings(".xecmpf-eac-action-plan-list-item-input").trigger("focus"):(this.$el.closest(".xecmpf-actionplan-details").find(".xecmpf-back-button-container").prop("tabindex","0"),this.$el.closest(".xecmpf-actionplan-details").find(".xecmpf-back-button-container").trigger("focus")),n.ui.actionPlanNameInput.is(t(e.target))&&n._submitDescription()):n.ui.actionPlanNameInput.is(t(e.target))?(e.preventDefault(),e.stopPropagation(),n.ui.actionPlanNameCancel.trigger("focus")):e.target.classList.contains("xecmpf-eac-action-plan-list-item-input")?(e.preventDefault(),e.stopPropagation(),t(e.target).siblings(".actionplan-object-title-cancel").trigger("focus")):(e.preventDefault(),e.stopPropagation(),this.$el.closest(".xecmpf-actionplan-details").find('li[role="presentation"] > .cs-tablink').first().trigger("focus"),n.ui.actionPlanNameCancel.is(t(e.target))&&n._submitDescription());break;case 36:e.preventDefault(),e.stopPropagation(),this._focusIndex=0,i=this.children.findByModel(this.collection.at(this._focusIndex)),this._changeTabIndexesAndSetFocus(n,i,!0),i._setFocus();break;case 35:e.preventDefault(),e.stopPropagation(),this._focusIndex=this.children.length-1,i=this.children.findByModel(this.collection.at(this._focusIndex)),this._changeTabIndexesAndSetFocus(n,i,!0),i._setFocus()}},"_changeTabIndexesAndSetFocus":function(e,t,i){e.$el.find("a").prop("tabindex",-1),e.$el.find(".xecmpf-eac-action-plan-list-item-delete-btn").prop("tabindex",-1),e.$el.find(".xecmpf-eac-action-plan-list-item-delete-btn").hide(),e._hasFocus=!1,t.$el.find("a").prop("tabindex",0),t.$el.find(".xecmpf-eac-action-plan-list-item-delete-btn").prop("tabindex",0),i&&t.$el.find(".xecmpf-eac-action-plan-list-item-delete-btn").show(),t._hasFocus=!0},"onFocusoutActionPlan":function(e,i){i.relatedTarget&&!1===t.contains(this.el,i.relatedTarget)&&e.$el.find(".xecmpf-eac-action-plan-list-item-delete-btn").hide()}});return n.LayoutView.extend({"className":"xecmpf-eac-action-plan-list-view","constructor":function(e){e=e||{},e.model&&!e.model.action_plans&&(e.model.attributes.action_plans=e.model.collection.models.map(function(t){return t.namespace=e.model.attributes.system_name,t.event_name=e.model.attributes.name,t.event_def_id=e.model.attributes.id,t.event_id=e.model.attributes.id,t}),e.collection=new i.Collection(e.model.attributes.action_plans)),this.options=e,n.LayoutView.prototype.constructor.call(this,e)},"template":u,"templateHelpers":function(){return{"showAddActionPlan":!!this.options.showAddActionPlan,"newActionPlanLabel":p.newActionPlan,"actionPlansListHeader":p.actionPlansListHeader,"actionPlansGroup":p.actionPlansGroup,"addToWareHouse":p.addToWareHouse,"delete":p.deleteActionPlanButton}},"behaviors":{"PerfectScrolling":{"behaviorClass":s,"contentParent":".xecmpf-action-plan-list-rows","suppressScrollX":!0,"scrollYMarginOffset":15}},"regions":{"actionPlanListRegion":".xecmpf-eac-action-plan-list","actionsRegion":".xecmpf-action-plan-actions-list-container"},"hideOptions":function(){event&&0===t(event.target).closest(".xecmpf-more-action-plan-list-container").length&&t(".xecmpf-more-action-plan-list-container").removeClass("binf-open")},"onRender":function(){this.actionPlanListItemCollectionView=new m({"collection":this.options.collection,"context":this.options.context,"originatingView":this}),this.actionPlanListRegion.show(this.actionPlanListItemCollectionView),(0===this.options.collection.length||this.options.model.get("isAddActionPlan"))&&this.addNewActionPlan(),this.$el.find(".xecmpf-action-plan-actions-list-container").addClass("binf-hidden"),this.$el.on("click.dropdown.close",e.bind(this.hideOptions,this))},"ui":{"addActionEle":".xecmpf-eac-add-action-plan-btn","ulelement":".xecmpf-more-action-plan-list-container"},"events":{"click @ui.addActionEle":"onAddActionPlanClick","keydown @ui.addActionEle":"onAddActionPlanKeydown","click @ui.ulelement":function(e){t(".xecmpf-more-action-plan-list-container").hasClass("binf-open")?(t(".xecmpf-more-action-plan-list-container").removeClass("binf-open"),t(e.currentTarget).addClass("binf-open")):t(e.currentTarget).addClass("binf-open")},"focusout @ui.ulelement":function(e){}},"childEvents":{"actionplan:click:item":"onActionPlanClick","click:add:actionplan":"onClickAddActionPlan","actionplan:click:delete":"onActionPlanDelete","actionplan:click:rename":"onActionPlanRenameEdit","actionplan:click:renamecancel":"onActionPlanCancelRename","keydown:action:rename":"onEditAction","show:actionplan:moreButton":"showMoreBtn"},"showMoreBtn":function(t,n){var o,s=this,l=new i.Collection;o=e.filter(t.model.collection.models,function(e){if(e.get("checked"))return l.add(e),!0===e.get("checked")}),o.length>0?(this.showToolBar(),this.model&&(s.tablerowselectiontoolbar=new a({"toolItemFactory":c.headerActionbar,"selectedChildren":l,"container":s.model,"context":s.options.context,"originatingView":s.options.originatingView,"collection":s.collection}),s.actionsRegion.show(s.tablerowselectiontoolbar),s.listenTo(s.tablerowselectiontoolbar._commandController,"after:execute:command",function(e){s.deleteActionPlan(e)}))):this.hideToolBar()},"onEditAction":function(e,i){(event.relatedTarget?t(event.relatedTarget).find(".xecmpf-eac-action-plan-list-item-cancelrename-btn.cancelrename-write-mode"):"")?this.onActionPlanCancelRename(e,i):(i.$el.find(".xecmpf-eac-action-plan-list-item-text").removeClass("binf-active binf-edit-active"),event.target.value,e.render())},"onActionPlanClick":function(e,t){this.trigger("actionplan:click:item",t)},"onClickAddActionPlan":function(e,t){this.trigger("click:add:actionplan",t)},"onActionPlanDelete":function(e,t){this.trigger("actionplan:click:delete",t)},"onActionPlanRenameCancel":function(e,t){this.trigger("actionplan:click:renamecancel",t)},"onActionPlanRenameEdit":function(e,t){t.$el.addClass("binf-edit-active"),t.$el.find(".binf-flex-row.xecmpf-eac-action-plan-name-link").addClass("binf-hidden"),t.$el.find(".xecmpf-eac-action-plan-list-item-text").removeClass("binf-hidden");var i=t.$el.find(".xecmpf-eac-action-plan-name").text();t.$el.find(".xecmpf-eac-action-plan-list-item-text")[0].value=i,t.$el.find(".binf-btn.xecmpf-eac-action-plan-list-item-cancelrename-btn").addClass("cancelrename-write-mode").removeClass("binf-hidden"),t.$el.find(".binf-btn.xecmpf-eac-action-plan-list-item-rename-btn").addClass("binf-hidden"),t.$el.find(".xecmpf-more-actions-container").addClass("binf-hidden")},"onActionPlanCancelRename":function(e,t){t.$el.find(".xecmpf-more-actions-container").removeClass("binf-hidden"),t.$el.removeClass("binf-edit-active"),t.$el.find(".binf-flex-row.xecmpf-eac-action-plan-name-link").removeClass("binf-hidden"),t.$el.find(".xecmpf-eac-action-plan-list-item-text").addClass("binf-hidden"),t.$el.find(".xecmpf-eac-action-plan-list-item-text").removeClass("binf-active binf-edit-active"),t.$el.find(".binf-btn.xecmpf-eac-action-plan-list-item-cancelrename-btn").removeClass("cancelrename-write-mode").addClass("binf-hidden"),t.$el.find(".binf-btn.xecmpf-eac-action-plan-list-item-rename-btn").removeClass("binf-hidden")},"onAddActionPlanClick":function(e){this.trigger("actionplan:add:item",e)},"onAddActionPlanKeydown":function(e){13===e.keyCode&&this.onAddActionPlanClick(e)},"addNewActionPlan":function(){var e=this.actionPlanListItemCollectionView.collection.findWhere({"plan_id":""}),t=this.options.model.attributes.namespace?this.options.model.attributes.namespace:this.options.model.attributes.system_name,i=this.options.model.attributes.event_name?this.options.model.attributes.event_name:this.options.model.attributes.name,n=this.options.model.attributes.event_def_id?this.options.model.attributes.event_def_id:this.options.model.attributes.id;if(e)e=this.actionPlanListItemCollectionView.children.findByModel(e),e.trigger("click:actionplan:item");else{var o,s=new l(void 0,{"connector":this.options.connector});s.set({"plan_id":"","process_mode":"","rule_id":"","rules":[{}],"namespace":t,"event_name":i,"event_def_id":n,"event_id":this.options.model.attributes.event_id,"eventType":this.options.model.attributes.event_type,"hideCheckBox":!0,"isAddActionPlan":!0}),this.actionPlanListItemCollectionView.collection.add(s),o=this.actionPlanListItemCollectionView.children.findByModel(s),o.trigger("click:actionplan"),o.$el.find(".xecmpf-eac-action-plan-list-item-input").trigger("focus")}},"fetchEventActionPlans":function(){var e,i=t.Deferred(),n=this,s=this.options.context.getObject(o);return e={"type":"GET","url":s.getConnectionUrl().getApiBase("v2")+"/eventactioncenter/actionplandetails?action_plan_id="+this.model.get("id")},s.makeAjaxCall(e).done(function(e,t,o){if(e&&e.results.data){n.model.set("data",e.results.data),n.model.set("event_def_id",n.model.get("event_def_id"));var s=new l({"id":n.model.attributes.id},{"connector":n.options.connector,"includeActions":!0,"commands":["rename","delete","addToWarehouse"]});s.connector=n.options.connector,s.fetch().done(function(){n.options.originatingView.children.add(s),s.set("data",n.model.get("data")),s.set("event_def_id",n.model.get("event_def_id")),s.set("eventType",e.results.data.eventType),n.actionPlanListItemCollectionView.collection.remove(n.model),n.actionPlanListItemCollectionView.collection.set(s,{"remove":!1}),i.resolve(n.actionPlanListItemCollectionView.collection)})}}).fail(function(e,t,n){i.reject()}),i.promise()},"refreshCurrentActionPlanItem":function(e){var i,n=e.planID,o=t.Deferred();if("create"===e.operation?i=this.actionPlanListItemCollectionView.collection.findWhere({"plan_id":""}):(i=this.actionPlanListItemCollectionView.collection.findWhere({"id":n}),this.model=i),i){var s=this;this.fetchEventActionPlans().then(function(t){var n=t.findWhere({"id":e.planID});n?(n.set("isAddActionPlan",!1),n.set("planCreated",!1),s.actionListItemToRetrigger=s.actionPlanListItemCollectionView.children.findByModel(n),o.resolve(s.actionListItemToRetrigger)):(i.trigger("delete:action:plan"),o.reject())},function(){o.reject()})}else o.reject();return o.promise()},"hideToolBar":function(){this.$el.find(".xecmpf-action-plan-actions-list-container").addClass("binf-hidden"),this.$el.find(".xecmpf-eac-action-plan-header").removeClass("binf-hidden")},"showToolBar":function(){this.$el.find(".xecmpf-eac-action-plan-header").addClass("binf-hidden"),this.$el.find(".xecmpf-action-plan-actions-list-container").removeClass("binf-hidden")},"deleteActionPlan":function(e){var t;if("Delete"===e.commandSignature){this.hideToolBar();for(var i=0;i<this.actionPlanListItemCollectionView.collection.length;i++)(t=this.actionPlanListItemCollectionView.collection.models[i])&&t.get("checked")&&t.trigger("toggle:checkbox")}}})}),csui.define("hbs!xecmpf/widgets/eac/impl/actionplan.header/impl/actionplan.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="xecmpf-back-button-container" title="'+e.escapeExpression((s=null!=(s=a(i,"backTitle")||(null!=t?a(t,"backTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"backTitle","hash":{},"loc":{"start":{"line":1,"column":49},"end":{"line":1,"column":62}}}):s))+'" tabindex="0"\r\n     aria-label="'+e.escapeExpression((s=null!=(s=a(i,"backTitle")||(null!=t?a(t,"backTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"backTitle","hash":{},"loc":{"start":{"line":2,"column":17},"end":{"line":2,"column":30}}}):s))+'" role="button">\r\n  <span class="arrow_back cs-go-back"></span>\r\n</div>\r\n<div class="xecmpf-actionplan-title">\r\n  <h2 class="title">'+e.escapeExpression((s=null!=(s=a(i,"title")||(null!=t?a(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":6,"column":20},"end":{"line":6,"column":29}}}):s))+"</h2>\r\n</div>\r\n"}});return i.registerPartial("xecmpf_widgets_eac_impl_actionplan.header_impl_actionplan.header",n),n}),csui.define("css!xecmpf/widgets/eac/impl/actionplan.header/impl/actionplan.header",[],function(){}),
csui.define("xecmpf/widgets/eac/impl/actionplan.header/actionplan.header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","hbs!xecmpf/widgets/eac/impl/actionplan.header/impl/actionplan.header","i18n!xecmpf/widgets/eac/impl/nls/lang","css!xecmpf/widgets/eac/impl/actionplan.header/impl/actionplan.header"],function(e,t,i,n,o){return i.ItemView.extend({"className":"xecmpf-actionplan-header","template":n,"events":{"keydown .xecmpf-back-button-container":"onKeyInView","click .cs-go-back":"onClickBackButton"},"templateHelpers":function(){return{"title":this.model.get("name"),"backTitle":o.backTitle}},"constructor":function(e){i.ItemView.prototype.constructor.apply(this,arguments)},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||this.onClickBackButton()},"onClickBackButton":function(){this.trigger("actionplan:click:back")}})}),csui.define("hbs!xecmpf/widgets/eac/impl/actionplan.processmode/impl/actionplan.processmode",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class=\'xecmpf-eac-processmode-view\'>\r\n    <div class="xecmpf-eac-header">\r\n        <h4 class="xecmpf-eac-processmode-header" title="{{options.header}}" aria-label="{{options.header}}">{{options.header}}</h4>\r\n    </div>\r\n    <div class="xecmpf-eac-processmode-form">\r\n        <div class="xecmpf-eac-processmode-runas" id="xecmpf-eac-processmode-run_as"></div>\r\n        <div class="xecmpf-eac-processmode-processmode" id="xecmpf-eac-processmode-process_mode"></div>\r\n    </div>\r\n</div>'}});return i.registerPartial("xecmpf_widgets_eac_impl_actionplan.processmode_impl_actionplan.processmode",n),n}),csui.define("css!xecmpf/widgets/eac/impl/actionplan.processmode/impl/actionplan.processmode",[],function(){}),csui.define("xecmpf/widgets/eac/impl/actionplan.processmode/actionplan.processmode.view",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/controls/form/form.view","hbs!xecmpf/widgets/eac/impl/actionplan.processmode/impl/actionplan.processmode","i18n!xecmpf/widgets/eac/impl/nls/lang","css!xecmpf/widgets/eac/impl/actionplan.processmode/impl/actionplan.processmode"],function(e,t,i,n,o,s,a){return o.extend({"constructor":function(e){o.prototype.constructor.call(this,e)},"formTemplate":s,"formTemplateHelpers":function(){return{"header":a.processModeTabLabel}},"_getLayout":function(){return{"parent":"bootstrap-csui","layout":{"template":this.getOption("formTemplate").call(this,{"data":this.alpaca.data,"mode":this.mode}),"bindings":this._getBindings()}}},"_getBindings":function(){return{"run_as":"xecmpf-eac-processmode-run_as","process_mode":"xecmpf-eac-processmode-process_mode"}}})}),csui.define("xecmpf/widgets/eac/impl/actionplan.processmode/impl/actionplan.processmode.form.model",["csui/models/form","i18n!xecmpf/widgets/eac/impl/nls/lang"],function(e,t){return e.extend({"constructor":function(t,i){this.options=i||(i={}),t||(t={"schema":{"properties":{}},"options":{"fields":{}},"date":{}}),e.prototype.constructor.call(this,t,i)},"initialize":function(e,t){this._setAttributes()},"_setAttributes":function(){var e=this,i="",n="";this.options.eventModel&&this.options.eventModel.attributes.data&&this.options.eventModel.attributes.data.processMode&&(n=this.options.eventModel.attributes.data.processMode),this.options.eventModel&&this.options.eventModel.attributes.data&&this.options.eventModel.attributes.data.runAs&&(i=this.options.eventModel.attributes.data.runAs),this.set({"schema":{"properties":{"run_as":{"required":!0,"type":"otcs_user_picker"},"process_mode":{"type":"text","readonly":!0,"default":t.asynchronouslyProcessLabel}}},"options":{"fields":{"run_as":{"label":t.runAs,"type":"otcs_user_picker","events":{"change":function(){e.setValue(this.path,this.getValue())}}},"process_mode":{"label":t.processMode,"type":"text","readonly":!0,"removeDefaultNone":!0}}},"data":{"run_as":i,"process_mode":n}})}})}),csui.define("xecmpf/models/eac/eac.planproperties.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/utils/url"],function(e,t,i,n,o,s){var a=i.Model.extend({"constructor":function(e,t){this.options=t||{},i.Model.prototype.constructor.apply(this,arguments),this.makeConnectable(t)},"parse":function(e){return e}});n.mixin(a.prototype);var l=i.Collection.extend({"model":a,"constructor":function(e,t){this.options=t||{},i.Collection.prototype.constructor.apply(this,arguments),this.makeConnectable(t).makeFetchable(t)},"url":function(){var e=new s(this.connector.connection.url).getApiBase("v2");return(e=s.combine(e,"eventactioncenter","eventproperties"))+this.queryParamsToString(this.options.query)},"parse":function(e){return e.results.data},"queryParamsToString":function(i){var n="";return e.isEmpty(i)||(n="?"+t.param(i)),n.replace(/%5B%5D/g,"")}});return n.mixin(l.prototype),o.mixin(l.prototype),l}),csui.define("xecmpf/models/eac/eac.planproperties.factory",["csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","xecmpf/models/eac/eac.planproperties.model"],function(e,t,i,n,o){return i.extend({"propertyPrefix":"EACPlanPropertiesCollection","constructor":function(s,a){i.prototype.constructor.apply(this,arguments);var l=this.options.EACPlanPropertiesCollection||{};if(!(l instanceof t.Collection)){var r;r=a.eventModel?a.eventModel.get("event_def_id")?a.eventModel.get("event_def_id"):a.eventModel.get("id"):a.eventModel.get("event_def_id")?a.eventModel.attributes.event_def_id:a.eventModel.attributes.id,l=new o(l.models,e.extend({"connector":s.getModel(n),"query":{"event_definition_id":r},"autofetch":!0},l.options))}this.property=l},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("xecmpf/widgets/eac/impl/actionplan.rules/impl/actionplan.rules.form.model",["csui/lib/jquery","csui/utils/base","csui/lib/underscore","csui/models/form","xecmpf/models/eac/eac.planproperties.factory","i18n!xecmpf/widgets/eac/impl/nls/lang"],function(e,t,i,n,o,s){return n.extend({"constructor":function(e,t){this.options=t||(t={}),e||(e={"data":{},"schema":{"properties":{}},"options":{"fields":{}}}),n.prototype.constructor.call(this,e,t)},"initialize":function(e,t){var i=t.eventModel.get("id")?t.eventModel.get("parent_id"):t.eventModel.get("event_def_id"),n=t.context.getCollection(o,{"eventModel":t.eventModel,"attributes":{"event_definition_id":i}});this.eacPropertiesCollection=n,n&&!n.type?(this.listenToOnce(n,"sync",function(){n.planProperties=n.map(function(e){return e.get("name")}),n.type=n.map(function(e){return e.get("alpacaFieldType").toLowerCase()}),this._setAttributes(n,n.planProperties,n.type)}),n.fetch()):this._setAttributes(n,n.planProperties,n.type)},"_setAttributes":function(e,t,i){var n,o,a,l=[],r={};this.options.collection&&(l=this.options.collection.models.map(function(i,n){if(o=i.get("operand"),a=!!o&&e.findWhere({"name":o}).get("type"),r={"from":i.get("operand"),"operator":s.rulesFieldPlaceholder,"conjunction":i.get("conjunction"),"value":""},o){if(r["operator"+o]=i.get("operator"),r["value"+o]=i.get("to"),"Classification"===a)switch(i.get("to")){case"0":r["value"+o]="Unclassified";break;case"1":r["value"+o]="Any";break;default:r["value"+o]="Custom",r["to2"+o]=i.get("to")}if("Category Attribute"===o&&i.get("categoryDetails")){var l=i.get("categoryDetails");switch(r.categorDetails=l,l.typeName){case"Date":r["to2"+o+"date"]=l.expValue;break;case"Integer":r["to2"+o+"integer"]=l.expValue;break;case"User":r["to2"+o+"otcs_user_picker"]=l.expValue;break;case"StringField":case"StringPopup":case"IntegerPopup":r["to2"+o]=l.expValue;break;case"Boolean":r["to2"+o+"checkbox"]="true"===l.expValue}}}for(var c=0;c<t.length;c++)r["operator"+t[c]]||(r["operator"+t[c]]="",r["value"+t[c]]="");return r})),n={"options":{"fields":{"rulesSet":{"fields":{"item":{"fields":{"conjunction":{"hidden":!1,"hideInitValidationError":!0,"optionLabels":[s.conjunctionAndLabel,s.conjunctionOrLabel],"label":s.conjunctionFieldLabel,"readonly":!1,"type":"select","removeDefaultNone":!0},"from":{"hidden":!1,"hideInitValidationError":!0,"label":s.fromFieldLabel,"readonly":!1,"type":"select"},"operator":{"hidden":!1,"hideInitValidationError":!0,"optionLabels":[s.rulesFieldPlaceholder,s.operatorEqualtoLabel,s.operatorNotequaltoLabel],"label":s.operatorFieldLabel,"readonly":!1,"type":"select","dependencies":{"from":""},"disabled":!0,"removeDefaultNone":!0},"value":{"hidden":!1,"hideInitValidationError":!0,"label":s.toFieldLabel,"readonly":!1,"type":"text","dependencies":{"from":""},"disabled":!0,"placeholder":s.rulesFieldPlaceholder}},"type":"object"}},"hidden":!1,"hideInitValidationError":!0,"items":{"showMoveDownItemButton":!1,"showMoveUpItemButton":!1},"label":"","toolbarSticky":!0,"showMessages":!1,"isSetType":!0}}},"schema":{"properties":{"rulesSet":{"items":{"defaultItems":1,"maxItems":50,"minItems":1,"properties":{"conjunction":{"enum":["and","or"],"readonly":!1,"title":s.conjunctionFieldLabel,"type":"string"},"from":{"enum":t,"readonly":!1,"title":s.fromFieldLabel,"type":"string"},"operator":{"enum":["Select value","equal to","not equal to"],"readonly":!1,"title":s.operatorFieldLabel,"type":"string","dependencies":"from","disabled":!0},"value":{"maxLength":248,"minLength":1,"readonly":!1,"title":s.toFieldLabel,"type":"string","dependencies":"from","disabled":!0}},"type":"object"},"title":"","type":"array"}},"type":"object"}};var c,d,u=[],p=[],m=t.length;for(this.currentTarget=[],c=0;c<m;c++){d=t[c],u.push(d),p.push(d);var f,h,b=this;if(f=n.schema,f.properties.rulesSet.items.properties["operator"+d]={"enum":{},"readonly":!1,"required":!0,"dependencies":"from","type":"string","removeDefaultNone":!0,"title":s.operatorFieldLabel,"label":s.operatorFieldLabel},f.properties.rulesSet.items.properties["value"+d]={"dependencies":"from","type":"string","title":s.toFieldLabel,"placeholder":s.rulesFieldPlaceholder},h=n.options,h.fields.rulesSet.fields.item.fields["operator"+d]={"optionLabels":{},"readonly":!1,"type":"select","required":!0,"removeDefaultNone":!0,"dependencies":{"from":d},"label":s.operatorFieldLabel},h.fields.rulesSet.fields.item.fields["value"+d]={"dependencies":{"from":d},"type":"text","label":s.toFieldLabel,"placeholder":s.rulesFieldPlaceholder},e.models[c].get("operators")&&(f.properties.rulesSet.items.properties["operator"+d].enum=e.models[c].get("operators"),h.fields.rulesSet.fields.item.fields["operator"+d].optionLabels=e.models[c].get("operators")),e.models[c].get("key")&&"UpdateWorkspaceMetadataEvent.WorkspaceType"===e.models[c].get("key")&&(f.properties.rulesSet.items.properties["operator"+d].enum=["equals","not equal"],h.fields.rulesSet.fields.item.fields["operator"+d].optionLabels=[s.operatorEqualtoLabel,s.operatorNotequaltoLabel]),e.models[c].get("values").length>0)"StringPopup"===e.models[c].get("type")?(f.properties.rulesSet.items.properties["value"+d].enum=e.models[c].get("values"),h.fields.rulesSet.fields.item.fields["value"+d].optionLabels=e.models[c].get("values"),h.fields.rulesSet.fields.item.fields["value"+d].type="select"):(f.properties.rulesSet.items.properties["value"+d].enum=e.models[c].get("values"),f.properties.rulesSet.items.properties["value"+d].type="Integer",h.fields.rulesSet.fields.item.fields["value"+d].optionLabels=e.models[c].get("values"),h.fields.rulesSet.fields.item.fields["value"+d].type="select");else{if(e.models[c].get("key")&&"UpdateWorkspaceMetadataEvent.CategoryAttribute"===e.models[c].get("key")){var g=0,w=["integer","checkbox","date","otcs_user_picker","otcs_node_picker"];for(f.properties.rulesSet.items.properties["to2"+d]={"dependencies":"valueCategory Attribute","type":i[c],"required":!0},h.fields.rulesSet.fields.item.fields["to2"+d]={"hidden":!0,"dependencies":{},"type":i[c],"required":!0},h.fields.rulesSet.fields.item.fields["to2"+d].label=s.toFieldLabel,h.fields.rulesSet.fields.item.fields["to2"+d].type=i[c],h.fields.rulesSet.fields.item.fields["value"+d].validator=function(e){var t=this.getValue();b.currentTarget.includes(this)||b.currentTarget.push(this),t.length>0&&this.fieldView.preVal!==t&&b.validateValue("category",t).done(function(t){t.results&&!t.results.ok?(e({"status":!1,"message":t.results.errMsg}),b.value=t.links.data.self.href,b.trigger("field:invalid")):(e({"status":!0}),b.categoryResponse=t.results,b.value=t.links.data.self.href,b.trigger("field:valid"))})},g=0;g<w.length;g++)f.properties.rulesSet.items.properties["to2"+d+w[g]]={"required":!0,"dependencies":"from","type":w[g],"title":s.toFieldLabel,"placeholder":s.rulesFieldPlaceholder},h.fields.rulesSet.fields.item.fields["to2"+d+w[g]]={"dependencies":{"from":d},"hidden":!0,"type":w[g],"label":s.toFieldLabel,"placeholder":s.rulesFieldPlaceholder}}"otcs_node_picker"===i[c]?"Classification"===e.models[c].get("type")?(f.properties.rulesSet.items.properties["value"+d].enum=["Unclassified","Any","Custom"],f.properties.rulesSet.items.properties["value"+d].type="select",f.properties.rulesSet.items.properties["value"+d].required=!0,h.fields.rulesSet.fields.item.fields["value"+d].optionLabels=[s.Unclassified,s.Any,s.Custom],h.fields.rulesSet.fields.item.fields["value"+d].type="select",h.fields.rulesSet.fields.item.fields["value"+d].removeDefaultNone=!0,h.fields.rulesSet.fields.item.fields["value"+d].required=!0,f.properties.rulesSet.items.properties["to2"+d]={"dependencies":"valueDocument Type","type":i[c],"required":!0},h.fields.rulesSet.fields.item.fields["to2"+d]={"dependencies":{},"type":i[c],"required":!0},h.fields.rulesSet.fields.item.fields["to2"+d].label=s.toFieldLabel,h.fields.rulesSet.fields.item.fields["to2"+d].dependencies["value"+d]="Custom",h.fields.rulesSet.fields.item.fields["to2"+d].type_control={"parameters":{"startLocations":["classifications/dialogs/node.picker/start.locations/classifications.volume"],"select_types":[196,199]}},h.fields.rulesSet.fields.item.fields["to2"+d].type=i[c]):e.models[c].get("key")&&"UpdateWorkspaceMetadataEvent.WorkspaceTemplate"===e.models[c].get("key")?(h.fields.rulesSet.fields.item.fields["value"+d].type_control={"parameters":{"startLocations":["doctemplates/dialogs/node.picker/start.locations/document.templates.volume"],"select_types":[848]}},h.fields.rulesSet.fields.item.fields["value"+d].type=i[c],f.properties.rulesSet.items.properties["value"+d].type=i[c]):(h.fields.rulesSet.fields.item.fields["value"+d].type_control={"parameters":{"startLocations":["csui/dialogs/node.picker/start.locations/current.location","csui/dialogs/node.picker/start.locations/enterprise.volume","csui/dialogs/node.picker/start.locations/personal.volume","csui/dialogs/node.picker/start.locations/favorites","csui/dialogs/node.picker/start.locations/recent.containers","csui/dialogs/node.picker/start.locations/perspective.assets.volume","xecmpf/dialogs/node.picker/start.locations/extended.ecm.volume.container"]}},h.fields.rulesSet.fields.item.fields["value"+d].type=i[c],f.properties.rulesSet.items.properties["value"+d].type=i[c]):(h.fields.rulesSet.fields.item.fields["value"+d].type=i[c],f.properties.rulesSet.items.properties["value"+d].type=i[c])}}n.schema.properties.rulesSet.items.properties.from.enum=u,n.options.fields.rulesSet.fields.item.fields.from.optionLabels=p,n.data={"rulesSet":l},this.set(n)},"validateValue":function(i,n){var o=e.Deferred(),s=this.eacPropertiesCollection.connector,a=s.getConnectionUrl().getApiBase("v2")+"/eventactioncenter/validateformfields?field_type="+i+"&field_value="+n+"&is_rule=true";return e.ajax(s.extendAjaxOptions({"url":a,"type":"GET","contentType":!1,"crossDomain":!0,"processData":!1,"success":function(e,t,i){o.resolve(e)},"error":function(e,i,n){var s=new t.RequestErrorMessage(e);o.reject(e,i,s.toString())}})),o.promise()}})}),csui.define("hbs!xecmpf/widgets/eac/impl/actionplan.rules/impl/actionplan.rules",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div>\r\n    <div class="xecmpf-eac-rules-header-wrapper binf-col-md-12 xecmpf-eac-header">\r\n        <h4 class="xecmpf-eac-rules-header" title="{{options.rulesLabel}}" aria-label="{{options.rulesLabel}}">{{options.rulesLabel}}</h4>\r\n    </div>\r\n    <div class="xecmpf-eac-rules-container-wrapper">\r\n        <div class="binf-row">\r\n            <div class="xecmpf-eac-rules-container binf-col-md-12 cs-form-singlecolumn csui-form-set-array-wrapper cs-form-set"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}});return i.registerPartial("xecmpf_widgets_eac_impl_actionplan.rules_impl_actionplan.rules",n),n}),csui.define("css!xecmpf/widgets/eac/impl/actionplan.rules/impl/actionplan.rules",[],function(){}),csui.define("xecmpf/widgets/eac/impl/actionplan.rules/actionplan.rules.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/contexts/factories/connector","csui/controls/form/form.view","csui/controls/progressblocker/blocker","xecmpf/widgets/eac/impl/actionplan.rules/impl/actionplan.rules.form.model","hbs!xecmpf/widgets/eac/impl/actionplan.rules/impl/actionplan.rules","csui/controls/globalmessage/globalmessage","i18n!xecmpf/widgets/eac/impl/nls/lang","css!xecmpf/widgets/eac/impl/actionplan.rules/impl/actionplan.rules"],function(e,t,i,n,o,s,a,l,r,c,d){return s.extend({"className":function(){var e=s.prototype.className.call(this);return e+=" xecmpf-eac-rules xecmpf-eac-rules-read xecmpf-eac-rules-hide-validation-errors",e+=this.options.isNewActionPlan?" xecmpf-eac-new-action-plan-rules":""},"constructor":function(e){s.prototype.constructor.call(this,e),this.listenTo(this,"change:field",this.onFieldChanged),this.listenTo(this.model,"field:invalid",this.disableSave),this.listenTo(this.model,"field:valid",this.enableProperties),this.listenTo(this,"render:form",this.displayField)},"ui":{"pullRight":".cs-pull-right","editIcon":".inline-edit-icon","expressionButton":".alpaca-container-item-first.csui-field-select .cs-field-write button"},"events":{"mouseenter @ui.pullRight":"onMouseEnterOnActionButtons","mouseleave @ui.pullRight":"onMouseLeaveFromActionButtons","click @ui.editIcon":"_doEditActions","focusout .alpaca-field-array":"showInReadMode","click @ui.expressionButton":"onExpressionClick"},"formTemplate":r,"formTemplateHelpers":function(){return{"rulesLabel":d.rulesLabel,"rulesSetLegend":d.rulesSetLegend}},"onRenderForm":function(){if(this.$el.find(".xecmpf-eac-rules-container .cs-form-set .cs-array.alpaca-container-item").addClass("xecmpf-eac-existing-rule"),this.alpaca.options.fields.rulesSet&&this.alpaca.options.fields.rulesSet.actionbar){var e=this.alpaca.options.fields.rulesSet.actionbar.actions.filter(function(e){return"remove"===e.action})[0],t=e.click,i=this;e.click=function(e,n,o){t.call(this,e,n,o),1===o&&i.form.childrenByPropertyId.rulesSet.children[0].childrenByPropertyId.from.fieldView.ui.toggle.trigger("focus")};var n=this.alpaca.options.fields.rulesSet.actionbar.actions.filter(function(e){return"add"===e.action})[0],o=n.click;n.click=function(e,t,n){i.addBlockClickCheck||(o.call(this,e,t,n),i.addBlockClickCheck=!0,i.form.field.on("fieldupdate",{"self":i,"rowCount":i.form.children[0].children.length,"itemIndex":n},i.addActionFieldUpdateListener))}}},"_getLayout":function(){return s.prototype._getLayout.call(this),{"parent":"bootstrap-csui","layout":{"template":this.getOption("formTemplate").call(this,{"data":this.alpaca.data,"mode":this.mode}),"bindings":this._getBindings()}}},"_getBindings":function(){return{"rulesSet":".xecmpf-eac-rules-container"}},"isFormValid":function(){return this.$el.removeClass("xecmpf-eac-rules-hide-validation-errors"),this.validate()},"getSubmitData":function(){var e=this.getValues().rulesSet;return 1===e.length&&!e[0].operator&&!e[0].from&&!e[0].to&&(e=[]),e},"onMouseEnterOnActionButtons":function(e){var i=t(e.currentTarget);i.find("button").hasClass("binf-hidden")&&i.parent().find(".cs-pull-left .cs-field-write").trigger("mouseenter")},"onMouseLeaveFromActionButtons":function(e){var i=t(e.currentTarget);i.find("button").hasClass("binf-hidden")||i.parent().find(".cs-pull-left .cs-field-write").trigger("mouseleave")},"_doEditActions":function(){var e=this;this.form.childrenByPropertyId.rulesSet.children.length>0?(this.$el.addClass("xecmpf-eac-rules-write"),this.$el.removeClass("xecmpf-eac-rules-read"),t(document).on("click."+this.cid,{"view":this},this._documentClick)):(this.$el.removeClass("xecmpf-eac-rules-write"),this.$el.addClass("xecmpf-eac-rules-read"),t(document).off("click."+this.cid,{"view":this},this._documentClick),this.$el.on("tab:content:field:changed",function(i){t(i.target).find(".csui-bulk-edit-cancel").length&&e.displayField(!1)}));var i,n,o=this.form.childrenByPropertyId.rulesSet.childrenById;for(n in o)i=n;this.form.childrenByPropertyId.rulesSet.children[0]&&(this.form.childrenByPropertyId.rulesSet.children[0].childrenByPropertyId.conjunction.containerItemEl.css("visibility","hidden"),this.form.childrenByPropertyId.rulesSet.children[0].childrenByPropertyId.conjunction.containerItemEl.css("display","block")),this.form.childrenByPropertyId.rulesSet.childrenById[i]&&this.form.childrenByPropertyId.rulesSet.childrenById[i].childrenByPropertyId.from.fieldView.ui.toggle.trigger("focus")},"_documentClick":function(e){var i=e.data.view;i.$el.find(".xecmpf-eac-rules-container").has(e.target).length||t(e.target).is(".csui-array-icon-delete-toolbarSticky")||(i.$el.removeClass("xecmpf-eac-rules-write"),i.$el.addClass("xecmpf-eac-rules-read"))},"showInReadMode":function(){var e=this.$el.find(".cs-formfield.cs-formfield-invalid");e.length&&e.removeClass("cs-formfield-invalid");var t,i,n,o,s=this.form.childrenByPropertyId.rulesSet.children.length;if(this.onFieldChanged(),s>1)for(i=1;i<s;i++)t=this.form.childrenByPropertyId.rulesSet.children[i],n=t.childrenByPropertyId.conjunction.fieldView.ui.readField.children()[0],o=t.childrenByPropertyId.conjunction.fieldView.ui.writeField.children()[0].innerText,n.innerText=o},"onFieldChanged":function(){var e,t,i=this.alpaca.options.fields.rulesSet.fields.item.fields.from.optionLabels.length;for(var n in this.form.childrenByPropertyId.rulesSet.childrenById)for(e=0;e<i;e++)t=this.alpaca.options.fields.rulesSet.fields.item.fields.from.optionLabels[e],this.setRequireStatus(n,t,"value"),this.setRequireStatus(n,t,"to2")},"setRequireStatus":function(e,t,i){var n=this.form.childrenByPropertyId.rulesSet.childrenById[e].childrenByPropertyId[i+t];n&&(n.isHidden()?this.form.schema.properties.rulesSet.items.properties[i+t].required&&!this.form.options.fields.rulesSet.fields.item.fields[i+t].removeDefaultNone&&(this.form.schema.properties.rulesSet.items.properties[i+t].required=!1):n.isEmpty()?(this.form.schema.properties.rulesSet.items.properties[i+t].required=!0,n.displayMessage(d.requiredField),n.getFieldEl().addClass("binf-has-error")):this.form.options.fields.rulesSet.fields.item.fields[i+t].removeDefaultNone||(this.form.schema.properties.rulesSet.items.properties[i+t].required=!1))},"onExpressionClick":function(e){"1"!==t(e.currentTarget).parents(".cs-array.alpaca-container-item").attr("data-alpaca-container-item-index")&&(e.preventDefault(),e.stopPropagation()),this.listenTo(this.form.children[0].children[1].children[0].fieldView,"childview:click:link",function(e){var t,i={};i.id=this.form.children[0].children[1].children[0].fieldView.model.id,i.name=this.form.children[0].children[1].children[0].fieldView.model.attributes.name;for(var n=2;n<this.form.children[0].children.length;n++)(t=this.form.children[0].children[n].children[0].fieldView)&&(t.options.model.attributes.data=i.id,t.model.set(i),t.alpacaField&&t.alpacaField.setValue(t.model.id))})},"addActionFieldUpdateListener":function(e){var t=e.data.self,i=e.data.itemIndex;t.form.children[0].children.length>e.data.rowCount&&(t.form.field.off("fieldupdate",t.addActionFieldUpdateListener),t.addBlockClickCheck=!1,t.form.children[0].children[i+1].children[0].containerItemEl.find("button").on("focus",{"self":t,"itemIndex":i},t.setExpressionValue))},"setExpressionValue":function(e){var t=e.data.self,i=e.data.itemIndex+1,n=t.form.children[0].children[i].children[0],o={};1===i?(o.id=t.form.children[0].children[2]&&t.form.children[0].children[2].children[0].fieldView.model.id||"and",o.name=t.form.children[0].children[2]&&t.form.children[0].children[2].children[0].fieldView.model.id||"and"):(o.id=t.form.children[0].children[1].children[0].fieldView.model.id||"and",o.name=t.form.children[0].children[1].children[0].fieldView.model.attributes.name||"and"),n&&(n.containerItemEl.find("button").off("focus",t.setExpressionValue),n.fieldView.options.model.attributes.data=o.id,n.fieldView.model.set(o),n.fieldView.alpacaField&&n.fieldView.alpacaField.setValue(n.fieldView.model.id),n.containerItemEl.find("button").trigger("focus"))},"UpdateDependantCatAttrs":function(e,t){var i=e.find(function(e){return e.name.includes("to2Category Attribute")&&e.type!==t&&!e.isHidden()});if(i)switch(i.containerItemEl.addClass("binf-hidden"),i.field.addClass("binf-hidden"),i.type){case"date":this.alpaca.options.fields.rulesSet.fields.item.fields["to2Category Attributedate"].hidden=!0;break;case"integer":this.alpaca.options.fields.rulesSet.fields.item.fields["to2Category Attributeinteger"].hidden=!0;break;case"otcs_user":this.alpaca.options.fields.rulesSet.fields.item.fields["to2Category Attributeotcs_user_picker"].hidden=!0;break;case"string":case"text":this.alpaca.options.fields.rulesSet.fields.item.fields["to2Category Attribute"].hidden=!0;break;case"checkbox":this.alpaca.options.fields.rulesSet.fields.item.fields["to2Category Attributecheckbox"].hidden=!0}},"UpdateOperators":function(e,t,n){var o=[],s=0,a=0;for(t.fieldView.collection.reset(),s=0;s<e.length;s++)n===e[s]&&(a=s),o.push(new i.Model({"id":e[s],"name":e[s]}));t.fieldView.collection.reset(o),this.model.attributes.options.fields.rulesSet.fields.item.fields["operatorCategory Attribute"].optionLabels=e,this.model.attributes.schema.properties.rulesSet.items.properties["operatorCategory Attribute"].enum=e,t.fieldView.collection.reset(o),t.fieldView.setValue(o[a])},"enableProperties":function(){var e,t,i,n;if(this.model.categoryResponse&&this.model.categoryResponse.typeName){if(e=this.model.categoryResponse.typeName,i=this.model.categoryResponse.operators,this.model.currentTarget.length>0)for(var o=0;o<this.model.currentTarget.length;o++)this.model.currentTarget[o].data===this.model.value.split("&")[1].split("=")[1]&&(t=this.form.childrenByPropertyId.rulesSet.childrenById[this.model.currentTarget[o].parent.id],this.model.currentTarget.splice(o,1),this.enableFieldbyType(e,t,i,n))}else this.model.children&&(e=this.model.typeName,t=this.model.children,i=this.model.operators,n=this.model.currentOperator),this.enableFieldbyType(e,t,i,n)},"enableFieldbyType":function(e,t,i,n){switch(e){case"Date":this.hideDependentFields(!0,e,t),t.childrenByPropertyId["to2Category Attributedate"].field.removeClass("binf-hidden"),t.childrenByPropertyId["to2Category Attributedate"].containerItemEl.removeClass("binf-hidden");break;case"Integer":this.hideDependentFields(!0,e,t),t.childrenByPropertyId["to2Category Attributeinteger"].field.removeClass("binf-hidden"),t.childrenByPropertyId["to2Category Attributeinteger"].containerItemEl.removeClass("binf-hidden");break;case"User":this.hideDependentFields(!0,e,t),t.childrenByPropertyId["to2Category Attributeotcs_user_picker"].field.removeClass("binf-hidden"),t.childrenByPropertyId["to2Category Attributeotcs_user_picker"].containerItemEl.removeClass("binf-hidden");break;case"StringField":this.hideDependentFields(!0,e,t),t.childrenByPropertyId["to2Category Attribute"].isHidden()&&(t.childrenByPropertyId["to2Category Attribute"].field.removeClass("binf-hidden"),t.childrenByPropertyId["to2Category Attribute"].containerItemEl.removeClass("binf-hidden"));break;case"Boolean":this.hideDependentFields(!0,e,t),t.childrenByPropertyId["to2Category Attributecheckbox"].field.removeClass("binf-hidden"),t.childrenByPropertyId["to2Category Attributecheckbox"].containerItemEl.removeClass("binf-hidden")}this.UpdateOperators(i,t.childrenByPropertyId["operatorCategory Attribute"],n),this._doEditActions()},"disableSave":function(){var e;if(this.model.currentTarget.length>0)for(var t=0;t<this.model.currentTarget.length;t++)this.model.currentTarget[t].data===this.model.value.split("&")[1].split("=")[1]&&(e=this.form.childrenByPropertyId.rulesSet.childrenById[this.model.currentTarget[t].parent.id],this.UpdateDependantCatAttrs(e.children,this.model.currentTarget.type),this.hideDependentFields(!0,this.model.currentTarget.type,e));this.$el.closest(".xecmpf-actionpan-details-view").find(".xecmpf-eac-save-actionplan").prop("disabled",!0)},"displayField":function(e){var t,i,n,o,s=this;if(s.model.currentTarget=[],this.form&&this.form.childrenByPropertyId)for(t=0;t<this.form.childrenByPropertyId.rulesSet.children.length;t++)this.model.attributes.data.rulesSet[t]&&this.model.attributes.data.rulesSet[t]["valueCategory Attribute"]?!!(o=this.form.childrenByPropertyId.rulesSet.children[t].childrenByPropertyId["valueCategory Attribute"])&&o.fieldView.alpacaField.refreshValidationState(!1,function(){s.$el.find(".binf-has-error").length>0&&s.$el.find(".csui-bulk-edit-rulesSet")&&e&&s.$el.find(".csui-bulk-edit-rulesSet").trigger("click"),s.$el.off("tab:content:field:changed")}):(this.model.get("data").rulesSet[t]&&this.model.get("data").rulesSet[t].categorDetails&&(this.model.children=i=this.form.childrenByPropertyId.rulesSet.children[t],n=this.model.typeName=this.model.get("data").rulesSet[t].categorDetails.typeName,this.model.operators=this.model.get("data").rulesSet[t].categorDetails.operators,this.model.currentOperator=this.model.get("data").rulesSet[t]["operatorCategory Attribute"],this.enableProperties(),this.hideDependentFields(!0,n,i)),o=this.form.childrenByPropertyId.rulesSet.children[t].childrenByPropertyId["valueCategory Attribute"],s.model.currentTarget.push(o),!!o&&o.fieldView.alpacaField.refreshValidationState(!1,function(e){s.$el.off("tab:content:field:changed")}))},"getFieldOnType":function(e,t){switch(t){case"Date":return e.childrenByPropertyId["to2Category Attributedate"];case"Integer":return e.childrenByPropertyId["to2Category Attributeinteger"];case"StringField":return e.childrenByPropertyId["to2Category Attribute"];case"User":return e.childrenByPropertyId["to2Category Attributeotcs_user_picker"];case"Boolean":return e.childrenByPropertyId["to2Category Attributecheckbox"]}},"hideDependentFields":function(e,t,i){var n,o=["Date","StringField","Integer","User","Boolean"],s=this;o.forEach(function(o){o!==t&&(e?(n=s.getFieldOnType(i,o),n.containerItemEl.addClass("binf-hidden")):(n=s.getFieldOnType(i,o),n.containerItemEl.removeClass("binf-hidden")))})}})}),csui.define("xecmpf/models/eac/eac.complete.reminder.model",["csui/lib/underscore","csui/utils/url","csui/models/form","csui/models/mixins/resource/resource.mixin"],function(e,t,i,n){"use strict";var o=i.extend({"constructor":function(e,t){i.prototype.constructor.apply(this,arguments),this.makeResource(t)},"clone":function(){return new this.constructor(this.attributes,{"connector":this.connector})},"url":function(){var i=t.combine(this.connector.connection.url,"forms","nodes","reminder","create"),n=this.get("client_id")?{"client_id":this.get("client_id")}:{};return n=this.get("id")?e.extend(n,{"id":this.get("id")}):n,n=e.extend(n,{"exclude_personal":"true"}),i=n?t.appendQuery(i,t.combineQueryString(n)):i},"parse":function(e){var t=!!e.forms&&e.forms[0];return t=t||e}});return n.mixin(o.prototype),o}),csui.define("xecmpf/models/eac/eac.defaultplans.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/utils/url"],function(e,t,i,n,o,s){var a=i.Model.extend({
"constructor":function(e,t){t||(t={}),i.Model.prototype.constructor.apply(this,arguments),this.makeConnectable(t)},"parse":function(e){return e}});n.mixin(a.prototype);var l=i.Collection.extend({"model":a,"constructor":function(e,t){this.options=t||{},i.Collection.prototype.constructor.apply(this,arguments),this.makeConnectable(t).makeFetchable(t)},"url":function(){var e=new s(this.connector.connection.url).getApiBase("v2");return(e=s.combine(e,"eventactioncenter","actions"))+this.queryParamsToString(this.options.query)},"parse":function(e){return e.results.actions},"queryParamsToString":function(i){var n="";return e.isEmpty(i)||(n="?"+t.param(i)),n.replace(/%5B%5D/g,"")}});return n.mixin(l.prototype),o.mixin(l.prototype),l}),csui.define("xecmpf/models/eac/eac.defaultplans.factory",["csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","xecmpf/models/eac/eac.defaultplans.model"],function(e,t,i,n,o){return i.extend({"propertyPrefix":"EACDefaultPlansCollection","constructor":function(s,a){i.prototype.constructor.apply(this,arguments);var l=this.options.EACDefaultPlansCollection||{};l instanceof t.Collection||(l=new o(l.models,e.extend({"connector":s.getModel(n),"autofetch":!0},l.options))),this.property=l},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("xecmpf/models/eac/eac.action.reminder.model",["csui/lib/underscore","csui/utils/url","csui/models/form","csui/models/mixins/resource/resource.mixin"],function(e,t,i,n){"use strict";var o=i.extend({"constructor":function(e,t){i.prototype.constructor.apply(this,arguments),this.makeResource(t)},"clone":function(){return new this.constructor(this.attributes,{"connector":this.connector})},"url":function(){var i,n=t.combine(this.connector.connection.url,"forms","nodes","followup","getClientTypes");return i=this.get("client_id")?{"client_id":this.get("client_id")}:{},i=this.get("id")?e.extend(i,{"id":this.get("id")}):i,i=e.extend(i,{"exclude_personal":"true"}),n=i?t.appendQuery(n,t.combineQueryString(i)):n},"parse":function(e){return!!e.forms&&e.forms[0]}});return n.mixin(o.prototype),o}),csui.define("xecmpf/models/eac/eac.action.workflow.attributes.model",["csui/lib/underscore","csui/utils/url","csui/models/form","csui/models/mixins/resource/resource.mixin"],function(e,t,i,n){"use strict";var o=i.extend({"constructor":function(e,t){i.prototype.constructor.apply(this,arguments),this.makeResource(t)},"clone":function(){return new this.constructor(this.attributes,{"connector":this.connector})},"url":function(){var i,n;return i=new t(this.connector.connection.url).getApiBase("v2"),i=t.combine(i,"eventactioncenter","workflowattributes"),n=this.get("workflow_id")?{"workflow_id":this.get("workflow_id")}:{},n=this.get("id")?e.extend(n,{"id":this.get("id")}):n,i=n?t.appendQuery(i,t.combineQueryString(n)):i},"parse":function(e){return!!e.forms&&e.forms[0]}});return n.mixin(o.prototype),o}),csui.define("xecmpf/widgets/eac/impl/actionplan.actions/impl/actionplan.actions.webreport",["module","csui/lib/jquery","csui/lib/underscore","i18n!xecmpf/widgets/eac/impl/nls/lang"],function(e,t,i,n){return{"buildWebreportModel":function(e,t,i,o,s,a,l,r,c){var d=t.get("action_key"),u=i.slice();if(u.unshift(n.rulesFieldPlaceholder),a.actionattributes={"type":"object","properties":{}},l.actionattributes={"type":"object","fields":{}},o=r.properties.actions_Data.items.properties[d+"_fields"].properties.actionattributes.properties,s=c.fields.actions_Data.fields.item.fields[d+"_fields"].fields.actionattributes.fields,t.get("actions_attributes").length>0)for(var p=t.get("actions_attributes"),m=0;m<p.length;m++){var f=p[m].key;o["key"+m]={"required":!1,"type":"text","hidden":!0,"label":n.actionAttrParameterNameLabel,"default":f},s["key"+m]={"type":"text","label":n.actionAttrParameterNameLabel,"hidden":!0},"Webreport"===f?(r.properties.actions_Data.items.properties["actionattrname"+f]={"helper":t.attributes.actions_attributes[m].name,"required":t.attributes.actions_attributes[m].required,"type":"text","default":t.attributes.actions_attributes[m].name,"dependencies":d+"_fields"},c.fields.actions_Data.fields.item.fields["actionattrname"+f]={"type":"text","label":t.attributes.actions_attributes[m].name,"dependencies":d+"_fields"},r.properties.actions_Data.items.properties["value"+f]={"type":"otcs_node_picker","dependencies":[d+"_fields"]},c.fields.actions_Data.fields.item.fields["value"+f]={"type":"otcs_node_picker","label":n.actionAttrValueLabel,"type_control":{"parameters":{"select_types":[30303],"startLocation":"csui/dialogs/node.picker/start.locations/current.location","startLocations":["csui/dialogs/node.picker/start.locations/current.location","csui/dialogs/node.picker/start.locations/enterprise.volume","csui/dialogs/node.picker/start.locations/personal.volume","csui/dialogs/node.picker/start.locations/favorites","csui/dialogs/node.picker/start.locations/recent.containers","csui/dialogs/node.picker/start.locations/category.volume","csui/dialogs/node.picker/start.locations/perspective.assets.volume","recman/dialogs/node.picker/start.locations/classifications.volume","xecmpf/dialogs/node.picker/start.locations/extended.ecm.volume.container"]}},"fieldClass":"value"+f,"dependencies":[d+"_fields"]}):"WebreportParameters"===f?(r.properties.actions_Data.items.properties["actionattrname"+f]={"helper":t.attributes.actions_attributes[m].name,"required":t.attributes.actions_attributes[m].required,"type":"text","default":t.attributes.actions_attributes[m].name,"dependencies":d+"_fields"},c.fields.actions_Data.fields.item.fields["actionattrname"+f]={"type":"text","label":t.attributes.actions_attributes[m].name,"dependencies":d+"_fields"},r.properties.actions_Data.items.properties["value"+f]={"readonly":!1,"required":!1,"title":"Enabled","type":"checkbox","dependencies":[d+"_fields"]},c.fields.actions_Data.fields.item.fields["value"+f]={"hidden":!1,"hideInitValidationError":!0,"label":"Enabled","readonly":!1,"type":"checkbox","dependencies":[d+"_fields"]}):"WebreportParametersList"===f&&(r.properties.actions_Data.items.properties["actionattrname"+f]={"helper":t.attributes.actions_attributes[m].name,"required":t.attributes.actions_attributes[m].required,"type":"text","default":t.attributes.actions_attributes[m].name,"dependencies":"valueWebreportParameters"},c.fields.actions_Data.fields.item.fields["actionattrname"+f]={"type":"text","label":t.attributes.actions_attributes[m].name,"dependencies":{}},r.properties.actions_Data.items.properties["value"+f]={"dependencies":"valueWebreportParameters","type":"array","label":n.actionAttrValueLabel,"items":{"defaultItems":1,"maxItems":i.length,"minItems":1,"enum":u,"type":"string","default":n.rulesFieldPlaceholder}},c.fields.actions_Data.fields.item.fields["value"+f]={"fields":{"item":{"hidden":!1,"type":"select","removeDefaultNone":!0,"label":n.actionAttrValueLabel,"fieldClass":"value"+f,"placeholder":n.rulesFieldPlaceholder,"onFieldChange":function(t){e.trigger("change:parameter",t)}}},"dependencies":{},"validator":function(t){e.trigger("update:parameter",this)}},c.fields.actions_Data.fields.item.fields["value"+f].dependencies.valueWebreportParameters=!0,c.fields.actions_Data.fields.item.fields["actionattrname"+f].dependencies.valueWebreportParameters=!0)}}}}),csui.define("xecmpf/widgets/eac/impl/actionplan.actions/impl/actionplan.actions.centralworkspace",["module","csui/lib/jquery","csui/lib/underscore","i18n!xecmpf/widgets/eac/impl/nls/lang","csui/utils/deepClone/deepClone"],function(e,t,i,n){return{"buildCentralWorkspaceModel":function(e,t,i,o,s,a,l,r,c){var d=t.get("action_key"),u=i.slice();if(a.actionattributes={"type":"object","properties":{}},l.actionattributes={"type":"object","fields":{}},o=r.properties.actions_Data.items.properties[d+"_fields"].properties.actionattributes.properties,s=c.fields.actions_Data.fields.item.fields[d+"_fields"].fields.actionattributes.fields,t.get("actions_attributes").length>0)for(var p=t.get("actions_attributes"),m=0;m<p.length;m++){var f=p[m].key;switch(o["key"+m]={"required":!1,"type":"text","hidden":!0,"label":n.actionAttrParameterNameLabel,"default":f},s["key"+m]={"type":"text","label":n.actionAttrParameterNameLabel,"hidden":!0},f){case"central_workspace_boType":r.properties.actions_Data.items.properties["actionattrname"+f]={"helper":t.attributes.actions_attributes[m].name,"required":t.attributes.actions_attributes[m].required,"type":"text","default":t.attributes.actions_attributes[m].name,"dependencies":d+"_fields"},c.fields.actions_Data.fields.item.fields["actionattrname"+f]={"type":"text","order":1,"label":t.attributes.actions_attributes[m].name,"dependencies":d+"_fields"},r.properties.actions_Data.items.properties["value"+f]={"type":"otcs_node_picker","dependencies":[d+"_fields"]},c.fields.actions_Data.fields.item.fields["value"+f]={"type":"otcs_node_picker","order":2,"label":n.actionAttrValueLabel,"type_control":{"parameters":{"startLocations":["xecmpf/dialogs/node.picker/start.locations/businessobjecttypes.container"]}},"fieldClass":"value"+f,"dependencies":[d+"_fields"]};break;case"central_workspace_userId":r.properties.actions_Data.items.properties["actionattrname"+f]={"helper":t.attributes.actions_attributes[m].name,"required":t.attributes.actions_attributes[m].required,"type":"text","default":t.attributes.actions_attributes[m].name,"dependencies":d+"_fields"},c.fields.actions_Data.fields.item.fields["actionattrname"+f]={"type":"text","order":3,"label":t.attributes.actions_attributes[m].name,"dependencies":{}},r.properties.actions_Data.items.properties["value"+f]={"label":n.actionAttrValueLabel,"enum":u,"type":"string","dependencies":d+"_fields"},c.fields.actions_Data.fields.item.fields["value"+f]={"hidden":!1,"order":4,"type":"select","removeDefaultNone":!1,"label":n.actionAttrValueLabel,"fieldClass":"value"+f,"placeholder":n.rulesFieldPlaceholder,"dependencies":{}};break;case"central_workspace_templateId":r.properties.actions_Data.items.properties["actionattrname"+f]={"helper":t.attributes.actions_attributes[m].name,"required":t.attributes.actions_attributes[m].required,"type":"text","default":t.attributes.actions_attributes[m].name,"dependencies":d+"_fields"},c.fields.actions_Data.fields.item.fields["actionattrname"+f]={"type":"text","order":5,"label":t.attributes.actions_attributes[m].name,"dependencies":{}},r.properties.actions_Data.items.properties["value"+f]={"label":n.actionAttrValueLabel,"required":t.attributes.actions_attributes[m].required,"type":"integer","dependencies":d+"_fields"},c.fields.actions_Data.fields.item.fields["value"+f]={"hidden":!1,"order":6,"type":"integer","hideInitValidationError":!0,"label":n.actionAttrValueLabel,"fieldClass":"value"+f,"placeholder":n.centralWorkspaceTemplateIdPlaceholder,"dependencies":{}};break;case"central_workspace_synchronize_permissions":this.createCheckbox(t.attributes.actions_attributes[m],r,c,f,d,7,!0);break;case"central_workspace_synchronize_candidates":this.createCheckbox(t.attributes.actions_attributes[m],r,c,f,d,9,!0);break;case"central_workspace_update_candidates":this.createCheckbox(t.attributes.actions_attributes[m],r,c,f,d,11,!1);break;case"central_workspace_remove_candidate_reference":this.createCheckbox(t.attributes.actions_attributes[m],r,c,f,d,13,!1);break;case"central_workspace_synchronize_assignments":this.createCheckbox(t.attributes.actions_attributes[m],r,c,f,d,15,!0)}}},"createCheckbox":function(e,t,i,n,o,s,a){t.properties.actions_Data.items.properties["actionattrname"+n]={"helper":e.name,"required":e.required,"type":"text","default":e.name,"dependencies":o+"_fields"},i.fields.actions_Data.fields.item.fields["actionattrname"+n]={"type":"text","order":s,"label":e.name,"dependencies":o+"_fields"},t.properties.actions_Data.items.properties["value"+n]={"readonly":!1,"required":!1,"title":"Enabled","type":"checkbox","default":a,"dependencies":[o+"_fields"]},i.fields.actions_Data.fields.item.fields["value"+n]={"hidden":!1,"order":s+1,"hideInitValidationError":!0,"label":"Enabled","value":!0,"readonly":!1,"type":"checkbox","dependencies":[o+"_fields"]}},"transformToBooleanValue":function(e){var t=!!e;return"string"==typeof e&&(t="true"===e.toLowerCase()),t},"validateCentralWorkspaceActionAttributes":function(e){var t=i.deepClone(e),n=this;return["central_workspace_remove_candidate_reference","central_workspace_synchronize_assignments","central_workspace_synchronize_candidates","central_workspace_synchronize_permissions","central_workspace_update_candidates"].forEach(function(e){var i=t.filter(function(t){if(t.mappingAttributeName===e)return!0});i.length>0?i[0].mappingData=n.transformToBooleanValue(i[0].mappingData):t.push({"mappingAttributeName":e,"mappingMethod":"NA","mappingData":!1,"position":t.length+1})}),t}}}),csui.define("xecmpf/widgets/eac/impl/actionplan.actions/impl/actionplan.actions.form.model",["csui/lib/underscore","csui/lib/jquery","csui/utils/base","csui/models/form","csui/utils/contexts/factories/connector","xecmpf/models/eac/eac.complete.reminder.model","xecmpf/models/eac/eac.planproperties.factory","xecmpf/models/eac/eac.defaultplans.factory","xecmpf/models/eac/eac.action.reminder.model","xecmpf/models/eac/eac.action.workflow.attributes.model","xecmpf/widgets/eac/impl/actionplan.actions/impl/actionplan.actions.webreport","xecmpf/widgets/eac/impl/actionplan.actions/impl/actionplan.actions.centralworkspace","i18n!xecmpf/widgets/eac/impl/nls/lang"],function(e,t,i,n,o,s,a,l,r,c,d,u,p){return n.extend({"constructor":function(e,t){this.options=t||(t={}),e||(e={"data":{},"options":{},"schema":{}}),n.prototype.constructor.call(this,e,t)},"initialize":function(e,i){var n,d=[],u=i.eventModel?i.eventModel.namespace:void 0,p=i.eventModel?i.eventModel.event_name:void 0,m=i.context.getCollection(l),f=i.context.getModel(o),h=i.context.getCollection(a,{"eventModel":i.eventModel,"attributes":{"namespace":u,"event_name":p}});this.escModel=new s({},{"connector":f}),this.attrModel=new c({},{"connector":f}),i.context&&!i.context.formModel?(this.formModel=new r({},{"connector":f}),n=this.formModel.fetch(),i.context.formModel=this.formModel,i.context.promise=n):(n=i.context.promise,this.formModel=i.context.formModel),m.fetched||d.push(m.fetch()),h.planProperties||d.push(h.fetch()),i.eventModel.actionAttributeCollection=m,t.when.apply(t,d).done(function(){h.planProperties=h.map(function(e){return e.get("name")});var e=this;n.done(function(){i&&i.eventModel.data&&i.eventModel.data.actions?(m.actions=i.eventModel.data[i.eventModel.data.actions+"_fields"],e._setAttributes(m,h.planProperties,e.formModel)):e._setAttributes(m,h.planProperties,e.formModel)}),n.fail(function(){i&&i.eventModel.data&&i.eventModel.data.actions?(m.actions=i.eventModel.data[i.eventModel.data.actions+"_fields"],e._setAttributes(m,h.planProperties)):e._setAttributes(m,h.planProperties)})}.bind(this))},"_setAttributes":function(t,i,n){var o=this,s={"options":{"fields":{"actions_Data":{"fields":{"item":{"type":"object","fields":{"action":{"readonly":!1,"type":"select","label":p.actions,"fieldclass":"eac-action-label","onFieldChange":function(e){o.trigger("update:error",e)}}}}}}}},"schema":{"type":"object","properties":{"actions_Data":{"type":"array","items":{"defaultItems":1,"maxItems":50,"minItems":1,"type":"object","properties":{"action":{"enum":["CreateOrUpdateEventAction.Create Or Update Workspace","DocGenEventAction.Create document"],"readonly":!1,"required":!0,"type":"string"}}}}}}};s.schema.properties.actions_Data.items.properties.actionattrnameDependsOn={"helper":p.DependsOn,"required":!1,"type":"text","default":p.DependsOn},s.options.fields.actions_Data.fields.item.fields.actionattrnameDependsOn={"type":"text","hidden":!1,"label":p.DependsOn},s.schema.properties.actions_Data.items.properties.valueDependsOn={"readonly":!1,"required":!1,"title":"Enabled","type":"checkbox"},s.options.fields.actions_Data.fields.item.fields.valueDependsOn={"hidden":!1,"hideInitValidationError":!0,"label":"Enabled","readonly":!1,"type":"checkbox","helper":p.DependsOnText};var a,l,r,c,m=[],f=[];s.data=this.getFormData(this.options.collection,t);for(var h=0;h<t.models.length;h++){var b=t.models[h].get("action_key");m.push(b),f.push(t.models[h].get("action_name"));var g,w,v,y,x,k;g=s.schema,g.properties.actions_Data.items.properties[b+"_fields"]={"properties":{},"dependencies":"action","type":"object"};var _=g.properties.actions_Data.items.properties[b+"_fields"].properties;w=s.options,w.fields.actions_Data.fields.item.fields[b+"_fields"]={"fields":{},"dependencies":{"action":b}};var C=w.fields.actions_Data.fields.item.fields[b+"_fields"].fields;if("StartWorkflowEventAction.Start workflow"===t.models[h].get("action_key")){if(_.actionattributes={"type":"object","properties":{}},C.actionattributes={"type":"object","fields":{}},this.updateAttributeValues(s,!0),v=g.properties.actions_Data.items.properties[b+"_fields"].properties.actionattributes.properties,y=w.fields.actions_Data.fields.item.fields[b+"_fields"].fields.actionattributes.fields,t.models[h].get("actions_attributes").length>0)for(var A=t.models[h].get("actions_attributes"),P=0;P<A.length;P++){var T=(A[P].required,A[P].key),V="valueWorkflowInitiator",D=i.slice();if(D.unshift(p.rulesFieldPlaceholder),v["key"+P]={"required":!1,"type":"text","hidden":!0,"label":p.actionAttrParameterNameLabel,"default":T},y["key"+P]={"type":"text","label":p.actionAttrParameterNameLabel,"hidden":!0},"Workflow"===T)g.properties.actions_Data.items.properties["actionattrname"+T]={"helper":t.models[h].attributes.actions_attributes[P].name,"required":t.models[h].attributes.actions_attributes[P].required,"type":"text","default":t.models[h].attributes.actions_attributes[P].name,"dependencies":b+"_fields"},w.fields.actions_Data.fields.item.fields["actionattrname"+T]={"type":"text","order":1,"label":t.models[h].attributes.actions_attributes[P].name,"dependencies":b+"_fields"},g.properties.actions_Data.items.properties["value"+T]={"type":"otcs_node_picker","dependencies":[b+"_fields"]},w.fields.actions_Data.fields.item.fields["value"+T]={"type":"otcs_node_picker","order":2,"label":p.actionAttrValueLabel,"type_control":{"parameters":{"select_types":[128],"startLocation":"csui/dialogs/node.picker/start.locations/current.location","startLocations":["csui/dialogs/node.picker/start.locations/current.location","csui/dialogs/node.picker/start.locations/enterprise.volume","csui/dialogs/node.picker/start.locations/personal.volume","csui/dialogs/node.picker/start.locations/favorites","csui/dialogs/node.picker/start.locations/recent.containers","csui/dialogs/node.picker/start.locations/category.volume","csui/dialogs/node.picker/start.locations/perspective.assets.volume","recman/dialogs/node.picker/start.locations/classifications.volume","xecmpf/dialogs/node.picker/start.locations/extended.ecm.volume.container"]}},"dependencies":[b+"_fields"],"validator":function(e){var t=this.getValue();t&&o.updateAttributeValues(s,!1,t,this)}};else if("WorkflowInitiator"===T)g.properties.actions_Data.items.properties["actionattrname"+T]={"required":t.models[h].attributes.actions_attributes[P].required,"type":"text","default":t.models[h].attributes.actions_attributes[P].name,"dependencies":b+"_fields"},w.fields.actions_Data.fields.item.fields["actionattrname"+T]={"type":"text","order":3,"label":t.models[h].attributes.actions_attributes[P].name,"dependencies":b+"_fields"},g.properties.actions_Data.items.properties["value"+T]={"type":"string","enum":[null,"ContentServerUser","eventProp"],"dependencies":[b+"_fields"]},w.fields.actions_Data.fields.item.fields["value"+T]={"type":"select","order":4,"placeholder":p.rulesFieldPlaceholder,"label":p.actionAttrValueLabel,"fieldClass":"value"+T,"removeDefaultNone":!0,"optionLabels":[p.rulesFieldPlaceholder,p.ContentServerUser,p.eventPropLabel],"dependencies":[b+"_fields"]};else if("WorkflowEvtProp"===T)g.properties.actions_Data.items.properties["actionattrname"+T]={"required":t.models[h].attributes.actions_attributes[P].required,"type":"text","default":t.models[h].attributes.actions_attributes[P].name,"dependencies":V},w.fields.actions_Data.fields.item.fields["actionattrname"+T]={"type":"text","order":5,"label":t.models[h].attributes.actions_attributes[P].name,"dependencies":{}},g.properties.actions_Data.items.properties["value"+T]={"dependencies":V,"label":p.actionAttrValueLabel,"type":"string","enum":D},w.fields.actions_Data.fields.item.fields["value"+T]={"type":"select","order":6,"placeholder":p.rulesFieldPlaceholder,"removeDefaultNone":!0,"label":p.actionAttrValueLabel,"fieldClass":"value"+T,"dependencies":{}},w.fields.actions_Data.fields.item.fields["value"+T].dependencies[V]="eventProp",w.fields.actions_Data.fields.item.fields["actionattrname"+T].dependencies[V]="eventProp";else if("WorkflowUser"===T)g.properties.actions_Data.items.properties["actionattrname"+T]={"required":t.models[h].attributes.actions_attributes[P].required,"type":"text","default":t.models[h].attributes.actions_attributes[P].name,"dependencies":V},w.fields.actions_Data.fields.item.fields["actionattrname"+T]={"type":"text","order":7,"label":t.models[h].attributes.actions_attributes[P].name,"dependencies":{}},g.properties.actions_Data.items.properties["value"+T]={"dependencies":V,"type":"otcs_member_picker"},w.fields.actions_Data.fields.item.fields["value"+T]={"order":8,"label":p.actionAttrValueLabel,"type":"otcs_member_picker","dependencies":{}},w.fields.actions_Data.fields.item.fields["value"+T].dependencies[V]="ContentServerUser",w.fields.actions_Data.fields.item.fields["actionattrname"+T].dependencies[V]="ContentServerUser";else if("WorkflowAttributes"===T)g.properties.actions_Data.items.properties["actionattrname"+T]={"helper":t.models[h].attributes.actions_attributes[P].name,"required":t.models[h].attributes.actions_attributes[P].required,"type":"text","default":t.models[h].attributes.actions_attributes[P].name,"dependencies":b+"_fields"},w.fields.actions_Data.fields.item.fields["actionattrname"+T]={"type":"text","order":9,"label":t.models[h].attributes.actions_attributes[P].name,"dependencies":b+"_fields"},g.properties.actions_Data.items.properties["value"+T]={"readonly":!1,"required":!1,"title":"Enabled","type":"checkbox","dependencies":[b+"_fields"]},w.fields.actions_Data.fields.item.fields["value"+T]={"hidden":!1,"hideInitValidationError":!0,"order":10,"label":"Enabled","readonly":!1,"type":"checkbox","dependencies":[b+"_fields"]};else if("WorkflowAttribute"===T)g.properties.actions_Data.items.properties["value"+T]={"dependencies":"valueWorkflowAttributes","type":"array","items":{"type":"object","properties":{"Attribute":{"enum":[null],"readonly":!1,"required":!0,"type":"string"}}}},w.fields.actions_Data.fields.item.fields["value"+T]={"order":11,"fields":{"item":{"type":"object","fields":{"Attribute":{"readonly":!1,"hideInitValidationError":!0,"optionLabels":[p.rulesFieldPlaceholder],"type":"select","onFieldChange":function(e){o.trigger("update:valueField",e)},"label":p.Attribute}}}},"dependencies":{}},w.fields.actions_Data.fields.item.fields["value"+T].dependencies.valueWorkflowAttributes=!0,a=s.schema,l=s.options;else if("WorkflowAttributeValueFrom"===T)a.properties.actions_Data.items.properties.valueWorkflowAttribute.items.properties["actionattrname"+T]={"required":!0,"type":"text","default":t.models[h].attributes.actions_attributes[P].name},l.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["actionattrname"+T]={"type":"text","order":12,"label":t.models[h].attributes.actions_attributes[P].name},a.properties.actions_Data.items.properties.valueWorkflowAttribute.items.properties["value"+T]={"type":"string","required":!0,"enum":[null,"csObj","evtProp","UserInput","prevAct"]},l.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["value"+T]={"type":"select","order":13,"placeholder":p.rulesFieldPlaceholder,"label":p.actionAttrValueLabel,"fieldClass":"value"+T,"removeDefaultNone":!0,"onFieldChange":function(e){o.trigger("update:userInput",e)},"optionLabels":[p.rulesFieldPlaceholder,p.csObjLabel,p.evtPropLabel,p.userInput,p.fromPreviousAction]};else if("WorkflowAttributeCSObject"===T)a.properties.actions_Data.items.properties.valueWorkflowAttribute.items.properties["actionattrname"+T]={"required":!0,"dependencies":"valueWorkflowAttributeValueFrom","type":"text","default":t.models[h].attributes.actions_attributes[P].name},l.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["actionattrname"+T]={"type":"text","order":14,"label":t.models[h].attributes.actions_attributes[P].name,"dependencies":{}},a.properties.actions_Data.items.properties.valueWorkflowAttribute.items.properties["value"+T]={"dependencies":"valueWorkflowAttributeValueFrom","type":"string","required":!0},l.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["value"+T]={"type":"otcs_node_picker","order":15,"label":p.actionAttrValueLabel,"type_control":{"parameters":{"startLocation":"csui/dialogs/node.picker/start.locations/current.location","startLocations":["csui/dialogs/node.picker/start.locations/current.location","csui/dialogs/node.picker/start.locations/enterprise.volume","csui/dialogs/node.picker/start.locations/personal.volume","csui/dialogs/node.picker/start.locations/favorites","csui/dialogs/node.picker/start.locations/recent.containers","csui/dialogs/node.picker/start.locations/category.volume","csui/dialogs/node.picker/start.locations/perspective.assets.volume","recman/dialogs/node.picker/start.locations/classifications.volume","xecmpf/dialogs/node.picker/start.locations/extended.ecm.volume.container"]}},"dependencies":[b+"_fields"]},w.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["value"+T].dependencies.valueWorkflowAttributeValueFrom="csObj",w.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["actionattrname"+T].dependencies.valueWorkflowAttributeValueFrom="csObj";else if("WorkflowAttributeEvtProp"===T)a.properties.actions_Data.items.properties.valueWorkflowAttribute.items.properties["actionattrname"+T]={"required":!0,"dependencies":"valueWorkflowAttributeValueFrom","type":"text","default":t.models[h].attributes.actions_attributes[P].name},l.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["actionattrname"+T]={"type":"text","order":16,"label":t.models[h].attributes.actions_attributes[P].name,"dependencies":{}},a.properties.actions_Data.items.properties.valueWorkflowAttribute.items.properties["value"+T]={"dependencies":"valueWorkflowAttributeValueFrom","label":p.actionAttrValueLabel,"required":!0,"type":"string","enum":D},l.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["value"+T]={"type":"select","order":17,"placeholder":p.rulesFieldPlaceholder,"removeDefaultNone":!0,"label":p.actionAttrValueLabel,"fieldClass":"value"+T,"dependencies":{}},w.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["value"+T].dependencies.valueWorkflowAttributeValueFrom="evtProp",w.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["actionattrname"+T].dependencies.valueWorkflowAttributeValueFrom="evtProp";else if("WorkflowAttributeUserInput"===T){var I,M=["text","integer","checkbox","date","otcs_user_picker"];for(I=0;I<M.length;I++)a.properties.actions_Data.items.properties.valueWorkflowAttribute.items.properties["actionattrname"+T+M[I]]={"required":!0,"dependencies":"Attribute","type":"text","default":t.models[h].attributes.actions_attributes[P].name},l.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["actionattrname"+T+M[I]]={"dependencies":{},"order":18+I,"type":"text","label":t.models[h].attributes.actions_attributes[P].name},a.properties.actions_Data.items.properties.valueWorkflowAttribute.items.properties["value"+T+M[I]]={"required":!0,"dependencies":"Attribute","type":M[I],"placeholder":p.rulesFieldPlaceholder},l.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["value"+T+M[I]]={"dependencies":{},"order":19+I,"type":M[I],"placeholder":p.rulesFieldPlaceholder},w.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["value"+T+M[I]].dependencies.Attribute="",w.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields["actionattrname"+T+M[I]].dependencies.Attribute=""}else"WorkflowAttachments"===T?(g.properties.actions_Data.items.properties["actionattrname"+T]={"helper":t.models[h].attributes.actions_attributes[P].name,"required":!1,"type":"text","default":t.models[h].attributes.actions_attributes[P].name,"dependencies":b+"_fields"},w.fields.actions_Data.fields.item.fields["actionattrname"+T]={"type":"text","order":24,"label":t.models[h].attributes.actions_attributes[P].name,"dependencies":b+"_fields"},g.properties.actions_Data.items.properties["value"+T]={"readonly":!1,"required":!1,"title":"Enabled","type":"checkbox","dependencies":[b+"_fields"]},w.fields.actions_Data.fields.item.fields["value"+T]={"hidden":!1,"hideInitValidationError":!0,"order":25,"label":"Enabled","readonly":!1,"type":"checkbox","dependencies":[b+"_fields"]}):"WorkflowAttachmentsValueFrom"===T?(g.properties.actions_Data.items.properties["value"+T]={"dependencies":"valueWorkflowAttachments","type":"array","items":{"maxItems":1,"type":"object","properties":{"Attachments":{"enum":[null,"csObj","fromDesktop","fromShortcut","prevAct"],"readonly":!1,"required":!0,"type":"string"}}}},w.fields.actions_Data.fields.item.fields["value"+T]={"order":26,"fields":{"item":{"type":"object","fields":{"Attachments":{"readonly":!1,"hideInitValidationError":!0,"optionLabels":[p.rulesFieldPlaceholder,p.csObjLabel,p.fromDesktop,p.fromShortcut,p.fromPreviousAction],"type":"select","onFieldChange":function(e){o.trigger("update:valueFromDesktop",e)},"label":t.models[h].attributes.actions_attributes[P].name}}}},"dependencies":{}},r=s.schema,c=s.options,w.fields.actions_Data.fields.item.fields["value"+T].dependencies.valueWorkflowAttachments=!0):"WorkflowAttachmentsValueFromCSObject"===T?(r.properties.actions_Data.items.properties.valueWorkflowAttachmentsValueFrom.items.properties["actionattrname"+T]={"required":!0,"dependencies":"Attachments","type":"text","default":t.models[h].attributes.actions_attributes[P].name},c.fields.actions_Data.fields.item.fields.valueWorkflowAttachmentsValueFrom.fields.item.fields["actionattrname"+T]={"type":"text","order":27,"label":t.models[h].attributes.actions_attributes[P].name,"dependencies":{}},r.properties.actions_Data.items.properties.valueWorkflowAttachmentsValueFrom.items.properties["value"+T]={"dependencies":"Attachments","type":"string","required":!0},c.fields.actions_Data.fields.item.fields.valueWorkflowAttachmentsValueFrom.fields.item.fields["value"+T]={"type":"otcs_node_picker","order":28,"label":p.actionAttrValueLabel,"type_control":{"parameters":{"select_types":[848,298,136,144,751,0,123469,1,140,5573],"startLocation":"csui/dialogs/node.picker/start.locations/current.location","startLocations":["csui/dialogs/node.picker/start.locations/current.location","csui/dialogs/node.picker/start.locations/enterprise.volume","csui/dialogs/node.picker/start.locations/personal.volume","csui/dialogs/node.picker/start.locations/favorites","csui/dialogs/node.picker/start.locations/recent.containers"]}},"dependencies":{}},w.fields.actions_Data.fields.item.fields.valueWorkflowAttachmentsValueFrom.fields.item.fields["value"+T].dependencies.Attachments="csObj",w.fields.actions_Data.fields.item.fields.valueWorkflowAttachmentsValueFrom.fields.item.fields["actionattrname"+T].dependencies.Attachments="csObj"):"WorkflowAttachmentsValueFromDesktop"===T?(r.properties.actions_Data.items.properties.valueWorkflowAttachmentsValueFrom.items.properties["actionattrname"+T]={"required":!1,"dependencies":"Attachments","type":"text",
"default":t.models[h].attributes.actions_attributes[P].name},c.fields.actions_Data.fields.item.fields.valueWorkflowAttachmentsValueFrom.fields.item.fields["actionattrname"+T]={"type":"text","order":29,"label":t.models[h].attributes.actions_attributes[P].name,"dependencies":{}},r.properties.actions_Data.items.properties.valueWorkflowAttachmentsValueFrom.items.properties["value"+T]={"dependencies":"Attachments","type":"string","required":!1},c.fields.actions_Data.fields.item.fields.valueWorkflowAttachmentsValueFrom.fields.item.fields["value"+T]={"type":"otcs_node_picker","order":30,"label":p.actionAttrValueLabel,"type_control":{"parameters":{"select_types":[848,298,136,144,751,0,123469,1,140,5573],"startLocation":"csui/dialogs/node.picker/start.locations/current.location","startLocations":["csui/dialogs/node.picker/start.locations/current.location","csui/dialogs/node.picker/start.locations/enterprise.volume","csui/dialogs/node.picker/start.locations/personal.volume","csui/dialogs/node.picker/start.locations/favorites","csui/dialogs/node.picker/start.locations/recent.containers"]}},"dependencies":{}},w.fields.actions_Data.fields.item.fields.valueWorkflowAttachmentsValueFrom.fields.item.fields["value"+T].dependencies.Attachments="fromDesktop",w.fields.actions_Data.fields.item.fields.valueWorkflowAttachmentsValueFrom.fields.item.fields["actionattrname"+T].dependencies.Attachments="fromDesktop"):"WorkflowAttachmentsValueFromAddShortcut"===T&&(r.properties.actions_Data.items.properties.valueWorkflowAttachmentsValueFrom.items.properties["actionattrname"+T]={"required":!0,"dependencies":"Attachments","type":"text","default":t.models[h].attributes.actions_attributes[P].name},c.fields.actions_Data.fields.item.fields.valueWorkflowAttachmentsValueFrom.fields.item.fields["actionattrname"+T]={"type":"text","order":31,"label":t.models[h].attributes.actions_attributes[P].name,"dependencies":{}},r.properties.actions_Data.items.properties.valueWorkflowAttachmentsValueFrom.items.properties["value"+T]={"dependencies":"Attachments","type":"string","required":!0},c.fields.actions_Data.fields.item.fields.valueWorkflowAttachmentsValueFrom.fields.item.fields["value"+T]={"type":"otcs_node_picker","order":32,"label":p.actionAttrValueLabel,"type_control":{"parameters":{"select_types":[848,298,136,144,751,0,123469,1,140,5573],"startLocation":"csui/dialogs/node.picker/start.locations/current.location","startLocations":["csui/dialogs/node.picker/start.locations/current.location","csui/dialogs/node.picker/start.locations/enterprise.volume","csui/dialogs/node.picker/start.locations/personal.volume","csui/dialogs/node.picker/start.locations/favorites","csui/dialogs/node.picker/start.locations/recent.containers"]}},"dependencies":{}},w.fields.actions_Data.fields.item.fields.valueWorkflowAttachmentsValueFrom.fields.item.fields["value"+T].dependencies.Attachments="fromShortcut",w.fields.actions_Data.fields.item.fields.valueWorkflowAttachmentsValueFrom.fields.item.fields["actionattrname"+T].dependencies.Attachments="fromShortcut")}}else if("StartWebreportEventAction.Start webreport"===t.models[h].get("action_key"))d.buildWebreportModel(o,t.models[h],i,v,y,_,C,g,w);else if("CreateOrUpdateCentralWorkspace.Create Or Update Central Workspace"===t.models[h].get("action_key"))u.buildCentralWorkspaceModel(o,t.models[h],i,v,y,_,C,g,w);else if("ReminderEventAction.Add A Reminder"===t.models[h].get("action_key")&&n){if(_.actionattributes={"type":"object","properties":{}},C.actionattributes={"type":"object","fields":{}},this.updateTypeValues(s),v=g.properties.actions_Data.items.properties[b+"_fields"].properties.actionattributes.properties,y=w.fields.actions_Data.fields.item.fields[b+"_fields"].fields.actionattributes.fields,t.models[h].get("actions_attributes").length>0)for(var E=t.models[h].get("actions_attributes"),F=0;F<E.length;F++){var S=E[F].required,B=E[F].key,O="valueReminderDueDateFrom",L="valueReminderAssigneeFrom",R="valueReminderAssigneePWMetadata",j="valueReminderEscalationTo",W="valueReminderEscalationToPWMetadata",N=i.slice();if(N.unshift(p.rulesFieldPlaceholder),v["key"+F]={"required":!1,"type":"text","hidden":!0,"label":p.actionAttrParameterNameLabel,"default":B},y["key"+F]={"type":"text","label":p.actionAttrParameterNameLabel,"hidden":!0},g.properties.actions_Data.items.properties["actionattrname"+B]={"required":S,"type":"text"},w.fields.actions_Data.fields.item.fields["actionattrname"+B]={"type":"text","dependencies":{}},"Reminder_client"===B)g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=1,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies="ReminderEventAction.Add A Reminder_fields",this.getPlaceholder(null,n.attributes.schema.properties.followup_client_name.enum),g.properties.actions_Data.items.properties["value"+B]={"dependencies":[b+"_fields"],"type":"string","enum":n.attributes.schema.properties.followup_client_name.enum},this.getPlaceholder(p.reminderClientPlaceholder,n.attributes.options.fields.followup_client_name.optionLabels),w.fields.actions_Data.fields.item.fields["value"+B]={"type":"select","order":2,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"optionLabels":n.attributes.options.fields.followup_client_name.optionLabels,"onFieldChange":function(e){o.trigger("change:client",e)},"removeDefaultNone":!0,"dependencies":{},"placeholder":p.reminderClientPlaceholder};else if("Reminder_type"===B){g.properties.actions_Data.items.properties["actionattrname"+B].dependencies="ReminderEventAction.Add A Reminder_fields",g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=3;for(var q=0;q<n.attributes.schema.properties.followup_client_name.enum.length;q++)k=n.attributes.schema.properties.followup_client_name.enum[q],x=k||"",g.properties.actions_Data.items.properties["value"+B+k]={"dependencies":"valueReminder_client","type":"string","enum":[null]},w.fields.actions_Data.fields.item.fields["value"+B+k]={"type":"select","order":4,"label":p.actionAttrValueLabel,"fieldClass":"value"+B+k,"optionLabels":[p.reminderTypePlaceholder],"removeDefaultNone":!0,"placeholder":p.reminderTypePlaceholder,"dependencies":{"valueReminder_client":x},"onFieldChange":function(e){o.trigger("change:type",e)}}}else"ReminderAddFor"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].dependencies="ReminderEventAction.Add A Reminder_fields",g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=5,g.properties.actions_Data.items.properties["value"+B]={"dependencies":[b+"_fields"],"type":"string","default":p.reminderInitLabel,"enum":[p.reminderInitLabel]},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"select","order":6,"removeDefaultNone":!0,"label":p.actionAttrValueLabel,"dependencies":{},"fieldClass":"value"+B}):"ReminderDueDateFrom"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].dependencies="ReminderEventAction.Add A Reminder_fields",g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=13,g.properties.actions_Data.items.properties["value"+B]={"type":"string","enum":[null,"eventProp","initObj","pWorkspace","evtInitDay"],"dependencies":[b+"_fields"]},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"select","order":14,"placeholder":p.rulesFieldPlaceholder,"removeDefaultNone":!0,"fieldClass":"value"+B,"label":p.actionAttrValueLabel,"helper":p.selectSourceForDueDate,"optionLabels":[p.rulesFieldPlaceholder,p.eventPropLabel,p.reminderInitLabel,p.workspaceLabel,p.eventInitDay],"dependencies":[b+"_fields"]}):"ReminderDueDateEvtProp"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=15,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=O,g.properties.actions_Data.items.properties["value"+B]={"dependencies":O,"label":p.actionAttrValueLabel,"type":"string","enum":N},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"select","placeholder":p.rulesFieldPlaceholder,"removeDefaultNone":!0,"order":16,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"dependencies":{}},w.fields.actions_Data.fields.item.fields["value"+B].dependencies[O]="eventProp",w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[O]="eventProp"):"ReminderDueDateCategoryAttr"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=15,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=O,g.properties.actions_Data.items.properties["value"+B]={"dependencies":O,"type":"string"},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"text","order":16,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"validator":function(e){var t=this.getValue();t.length>0&&o.validateValue("category",t).done(function(t){t.results&&!t.results.ok?(e({"status":!1,"message":t.results.errMsg}),o.trigger("field:invalid")):e({"status":!0})})},"dependencies":{}},w.fields.actions_Data.fields.item.fields["value"+B].dependencies[O]="initObj",w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[O]="initObj"):"ReminderDueDatePWCategoryAttr"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=15,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=O,g.properties.actions_Data.items.properties["value"+B]={"dependencies":O,"type":"string"},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"text","order":16,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"validator":function(e){var t=this.getValue();t.length>0&&o.validateValue("category",t).done(function(t){t.results&&!t.results.ok?(e({"status":!1,"message":t.results.errMsg}),o.trigger("field:invalid")):e({"status":!0})})},"dependencies":{}},w.fields.actions_Data.fields.item.fields["value"+B].dependencies[O]="pWorkspace",w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[O]="pWorkspace"):"ReminderDueDateCompleteIn"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=15,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=O,g.properties.actions_Data.items.properties["value1"+B]={"dependencies":O,"label":p.actionAttrValueLabel,"type":"integer","maximum":99,"minimum":1,"default":1},w.fields.actions_Data.fields.item.fields["value1"+B]={"type":"integer","order":16,"fieldClass":"value1"+B,"onFieldChange":function(e){o.trigger("change:dueDate",e)},"dependencies":{}},g.properties.actions_Data.items.properties["value2"+B]={"dependencies":O,"type":"string","label":p.actionAttrValueLabel,"default":p.days,"enum":[p.days,p.weeks,p.months,p.years]},w.fields.actions_Data.fields.item.fields["value2"+B]={"type":"select","order":17,"fieldClass":"value2"+B,"dependencies":{}},w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[O]="evtInitDay",w.fields.actions_Data.fields.item.fields["value1"+B].dependencies[O]="evtInitDay",w.fields.actions_Data.fields.item.fields["value2"+B].dependencies[O]="evtInitDay"):"ReminderAssigneeFrom"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].dependencies="ReminderEventAction.Add A Reminder_fields",g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=7,g.properties.actions_Data.items.properties["value"+B]={"dependencies":[b+"_fields"],"type":"string","enum":[null,"eventProp","initObj","pWorkspace"]},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"select","placeholder":p.rulesFieldPlaceholder,"order":8,"helper":p.selectSourceForAssignee,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"removeDefaultNone":!0,"dependencies":{},"optionLabels":[p.rulesFieldPlaceholder,p.eventPropLabel,p.reminderInitLabel,p.workspaceLabel]}):"ReminderAssigneeEvtProp"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=9,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=L,g.properties.actions_Data.items.properties["value"+B]={"dependencies":L,"label":p.actionAttrValueLabel,"type":"string","enum":N},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"select","placeholder":p.rulesFieldPlaceholder,"order":10,"removeDefaultNone":!0,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"dependencies":{}},w.fields.actions_Data.fields.item.fields["value"+B].dependencies[L]="eventProp",w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[L]="eventProp"):"ReminderAssigneeCategoryAttr"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=9,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=L,g.properties.actions_Data.items.properties["value"+B]={"dependencies":L,"type":"string"},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"text","order":10,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"validator":function(e){var t=this.getValue();t.length>0&&o.validateValue("category",t).done(function(t){t.results&&!t.results.ok?(e({"status":!1,"message":t.results.errMsg}),o.trigger("field:invalid")):e({"status":!0})})},"dependencies":{}},w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[L]="initObj",w.fields.actions_Data.fields.item.fields["value"+B].dependencies[L]="initObj"):"ReminderAssigneePWMetadata"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=9,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=L,g.properties.actions_Data.items.properties["value"+B]={"dependencies":L,"label":p.actionAttrValueLabel,"type":"string","enum":[null,"Role","CategoryAttr"]},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"select","placeholder":p.rulesFieldPlaceholder,"order":10,"removeDefaultNone":!0,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"dependencies":{},"optionLabels":[p.rulesFieldPlaceholder,p.roleLabel,p.categoryAttrLabel]},w.fields.actions_Data.fields.item.fields["value"+B].dependencies[L]="pWorkspace",w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[L]="pWorkspace"):"ReminderAssigneePWRole"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=11,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=R,g.properties.actions_Data.items.properties["value"+B]={"dependencies":R,"type":"string"},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"text","order":12,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"validator":function(e){var t=this.getValue();t.length>0&&o.validateValue("role",t).done(function(t){t.results&&!t.results.ok?(e({"status":!1,"message":t.results.errMsg}),o.trigger("field:invalid")):e({"status":!0})})},"dependencies":{}},w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[R]="Role",w.fields.actions_Data.fields.item.fields["value"+B].dependencies[R]="Role"):"ReminderAssigneePWCategoryAttr"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=11,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=R,g.properties.actions_Data.items.properties["value"+B]={"dependencies":R,"type":"string"},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"text","order":12,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"validator":function(e){var t=this.getValue();t.length>0&&o.validateValue("category",t).done(function(t){t.results&&!t.results.ok?(e({"status":!1,"message":t.results.errMsg}),o.trigger("field:invalid")):e({"status":!0})})},"dependencies":{}},w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[R]="CategoryAttr",w.fields.actions_Data.fields.item.fields["value"+B].dependencies[R]="CategoryAttr"):"ReminderEscalationTo"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].dependencies="ReminderEventAction.Add A Reminder_fields",g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=18,g.properties.actions_Data.items.properties["value"+B]={"dependencies":[b+"_fields"],"type":"string","enum":[null,"eventProp","initObj","pWorkspace"]},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"select","placeholder":p.rulesFieldPlaceholder,"order":19,"helper":p.selectSourceForEscalation,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"removeDefaultNone":!0,"dependencies":{},"optionLabels":[p.rulesFieldPlaceholder,p.eventPropLabel,p.reminderInitLabel,p.workspaceLabel]}):"ReminderEscalationToEvtProp"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=20,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=j,g.properties.actions_Data.items.properties["value"+B]={"dependencies":j,"label":p.actionAttrValueLabel,"type":"string","enum":N},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"select","order":21,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"dependencies":{},"removeDefaultNone":!0,"placeholder":p.rulesFieldPlaceholder},w.fields.actions_Data.fields.item.fields["value"+B].dependencies[j]="eventProp",w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[j]="eventProp"):"ReminderEscalationToCategoryAttr"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=20,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=j,g.properties.actions_Data.items.properties["value"+B]={"dependencies":j,"type":"string"},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"text","order":21,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"validator":function(e){var t=this.getValue();t.length>0&&o.validateValue("category",t).done(function(t){t.results&&!t.results.ok?(e({"status":!1,"message":t.results.errMsg}),o.trigger("field:invalid")):e({"status":!0})})},"dependencies":{}},w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[j]="initObj",w.fields.actions_Data.fields.item.fields["value"+B].dependencies[j]="initObj"):"ReminderEscalationToPWMetadata"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=20,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=j,g.properties.actions_Data.items.properties["value"+B]={"dependencies":j,"label":p.actionAttrValueLabel,"type":"string","enum":[null,"Role","CategoryAttr"]},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"select","placeholder":p.rulesFieldPlaceholder,"order":21,"removeDefaultNone":!0,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"dependencies":{},"optionLabels":[p.rulesFieldPlaceholder,p.roleLabel,p.categoryAttrLabel]},w.fields.actions_Data.fields.item.fields["value"+B].dependencies[j]="pWorkspace",w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[j]="pWorkspace"):"ReminderEscalationToPWRole"===B?(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=22,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=W,g.properties.actions_Data.items.properties["value"+B]={"dependencies":W,"type":"string"},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"text","order":23,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"validator":function(e){var t=this.getValue();t.length>0&&o.validateValue("role",t).done(function(t){t.results&&!t.results.ok?(e({"status":!1,"message":t.results.errMsg}),o.trigger("field:invalid")):e({"status":!0})})},"dependencies":{}},w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[W]="Role",w.fields.actions_Data.fields.item.fields["value"+B].dependencies[W]="Role"):"ReminderEscalationToPWCategoryAttr"===B&&(g.properties.actions_Data.items.properties["actionattrname"+B].default=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].label=E[F].name,w.fields.actions_Data.fields.item.fields["actionattrname"+B].order=22,g.properties.actions_Data.items.properties["actionattrname"+B].dependencies=W,g.properties.actions_Data.items.properties["value"+B]={"dependencies":W,"type":"string"},w.fields.actions_Data.fields.item.fields["value"+B]={"type":"text","order":23,"label":p.actionAttrValueLabel,"fieldClass":"value"+B,"validator":function(e){var t=this.getValue();t.length>0&&o.validateValue("category",t).done(function(t){t.results&&!t.results.ok?(e({"status":!1,"message":t.results.errMsg}),o.trigger("field:invalid")):e({"status":!0})})},"dependencies":{}},w.fields.actions_Data.fields.item.fields["actionattrname"+B].dependencies[W]="CategoryAttr",w.fields.actions_Data.fields.item.fields["value"+B].dependencies[W]="CategoryAttr");"ReminderEscalationTo"===B&&(w.fields.actions_Data.fields.item.fields["value"+B].hidden=!0,w.fields.actions_Data.fields.item.fields["actionattrname"+B].hidden=!0)}}else if(_.actionattributes={"type":"object","properties":{"parametername":{"readonly":!0,"required":!1,"type":"text","default":p.actionAttrParameterNameLabel},"sourcelabel":{"readonly":!0,"required":!1,"type":"text","default":p.actionAttrSourceLabel},"valuelabel":{"readonly":!0,"required":!1,"type":"text","default":p.actionAttrValueLabel}}},C.actionattributes={"type":"object","fields":{"parametername":{"type":"text","label":p.actionAttrParameterNameLabel,"readonly":!0},"sourcelabel":{"type":"text","label":p.actionAttrSourceLabel,"readonly":!0},"valuelabel":{"type":"text","label":p.actionAttrValueLabel,"readonly":!0}}},v=g.properties.actions_Data.items.properties[b+"_fields"].properties.actionattributes.properties,y=w.fields.actions_Data.fields.item.fields[b+"_fields"].fields.actionattributes.fields,t.models[h].get("actions_attributes").length>0&&("ReminderEventAction.Add A Reminder"!==t.models[h].get("action_key")||"ReminderEventAction.Add A Reminder"===t.models[h].get("action_key")&&n)){var U=t.models[h].get("actions_attributes");"DocGenEventAction.Generate Document"===b&&(U=this.orderActionAttributes(b,U));for(var $=0;$<U.length;$++){var H=(U[$].required,U[$].key),z="source"+H,G=this.getFieldTypeForAttr(b,H);v["key"+$]={"required":!1,"type":"text","hidden":!0,"label":p.actionAttrParameterNameLabel,"default":H},y["key"+$]={"type":"text","label":p.actionAttrParameterNameLabel,"hidden":!0},g.properties.actions_Data.items.properties["actionattrname"+H]={"helper":t.models[h].attributes.actions_attributes[$].name,"label":p.actionAttrParameterLabel,"required":t.models[h].attributes.actions_attributes[$].required,"type":"text","default":t.models[h].attributes.actions_attributes[$].name,"dependencies":b+"_fields"},w.fields.actions_Data.fields.item.fields["actionattrname"+H]={"type":"text","label":t.models[h].attributes.actions_attributes[$].name,"dependencies":b+"_fields"},"default"===G.fieldType?(g.properties.actions_Data.items.properties["source"+H]={"type":"string","enum":["csObj","evtProp","prevAct"],"dependencies":[b+"_fields"]},w.fields.actions_Data.fields.item.fields["source"+H]={"type":"select","fieldClass":"source"+H,"label":p.sourceLabel,"optionLabels":[p.csObjLabel,p.evtPropLabel,p.prevActLabel],"onFieldChange":function(e){o.trigger("update:field",e)},"dependencies":[b+"_fields"]},g.properties.actions_Data.items.properties["csObj_field"+H]={"dependencies":z,"type":"string"},g.properties.actions_Data.items.properties["evtProp_field"+H]={"dependencies":z,"type":"string","enum":i},g.properties.actions_Data.items.properties["prevAct_field"+H]={"dependencies":z,"type":"string"},w.fields.actions_Data.fields.item.fields["csObj_field"+H]={"type":"otcs_node_picker","label":p.actionAttrValueLabel,"fieldClass":"csObj_field"+H,"type_control":{"parameters":{"startLocations":["csui/dialogs/node.picker/start.locations/current.location","csui/dialogs/node.picker/start.locations/enterprise.volume","csui/dialogs/node.picker/start.locations/personal.volume","csui/dialogs/node.picker/start.locations/favorites","csui/dialogs/node.picker/start.locations/recent.containers","csui/dialogs/node.picker/start.locations/category.volume","csui/dialogs/node.picker/start.locations/perspective.assets.volume","recman/dialogs/node.picker/start.locations/classifications.volume","xecmpf/dialogs/node.picker/start.locations/extended.ecm.volume.container"]}},"dependencies":{}},w.fields.actions_Data.fields.item.fields["evtProp_field"+H]={"type":"select","label":p.actionAttrValueLabel,"fieldClass":"evtProp_field"+H,"dependencies":{}},w.fields.actions_Data.fields.item.fields["prevAct_field"+H]={"fieldClass":"prevAct_field"+H,"label":p.actionAttrValueLabel,"type":"text","dependencies":{}},w.fields.actions_Data.fields.item.fields["csObj_field"+H].dependencies[z]="csObj",w.fields.actions_Data.fields.item.fields["evtProp_field"+H].dependencies[z]="evtProp",w.fields.actions_Data.fields.item.fields["prevAct_field"+H].dependencies[z]="prevAct","DocGenEventAction.Generate Document"===b&&(g.properties.actions_Data.items.properties["source"+H].required=t.models[h].attributes.actions_attributes[$].required)):(g.properties.actions_Data.items.properties["value"+H]={"type":G.fieldType,"dependencies":[b+"_fields"]},w.fields.actions_Data.fields.item.fields["value"+H]={"type":G.fieldType,"fieldClass":"value"+H,"label":p.actionAttrValueLabel,"onFieldChange":function(e){o.trigger("update:field",e)},"dependencies":[b+"_fields"]},"select"===G.fieldType&&(e.extend(g.properties.actions_Data.items.properties["value"+H],G.schema),e.extend(w.fields.actions_Data.fields.item.fields["value"+H],G.options)))}}}s.schema.properties.actions_Data.items.properties.action.enum=m,s.options.fields.actions_Data.fields.item.fields.action.optionLabels=f,this.set(s)},"getFieldTypeForAttr":function(e,t){var i={"fieldType":"default"};return"DocGenEventAction.Generate Document"===e&&"PdContext"===t&&(i.fieldType="select",i.schema={"enum":["User","Candidate","JobApplication"]},i.options={"optionLabels":["User","Candidate","Job Application"]}),i},"orderActionAttributes":function(e,t){var i=["DocumentType","UserId","PdContext","EffectiveDate","BoType_CreateDoc","BoKey_CreateDoc"];return"DocGenEventAction.Generate Document"===e?t.sort(function(e,t){return i.indexOf(e.key)-i.indexOf(t.key)}):t},"getFormData":function(e,t){var i,n=[];if(e.models&&e.models.length>0)n=e.models.map(function(e,n){var o=e.get("action_key"),s=e.get("depends_on");s=1===s;var a={"action":o,"valueDependsOn":s};return"CreateOrUpdateCentralWorkspace.Create Or Update Central Workspace"===o&&(i=u.validateCentralWorkspaceActionAttributes(e.get("attribute_mappings")),e.set("attribute_mappings",i)),t.models.forEach(function(t){var i=t.get("action_key")+"_fields",n={},s={};if(a[i]={"actionattributes":{"parametername":p.actionAttrParameterNameLabel,"sourcelabel":p.actionAttrSourceLabel,"valuelabel":p.actionAttrValueLabel}},t.get("actions_attributes").filter(function(e){a[i][e.key]={"actionattrname":"","source":"","value":"","csObj_field":"","evtProp_field":"","prevAct_field":""},"WorkflowAttribute"===e.key?(a["value"+e.key]=[],n.Attribute=""):"WorkflowAttributeValueFrom"===e.key?(n["actionattrname"+e.key]="",n["value"+e.key]=""):"WorkflowAttributeEvtProp"===e.key?(n["actionattrname"+e.key]="",n["value"+e.key]=""):"WorkflowAttributeCSObject"===e.key?(n["actionattrname"+e.key]="",n["value"+e.key]=""):"WorkflowAttributeUserInput"===e.key?(n["actionattrname"+e.key]="",n["value"+e.key]=""):"WorkflowAttributeFromPreviousAction"===e.key?(n["actionattrname"+e.key]="",n["value"+e.key]=""):"WorkflowAttachmentsValueFrom"===e.key?(a["value"+e.key]=[],s.Attachments=""):"WorkflowAttachmentsValueFromCSObject"===e.key?(s["actionattrname"+e.key]="",s["value"+e.key]=""):"WorkflowAttachmentsValueFromDesktop"===e.key?(s["actionattrname"+e.key]="",s["value"+e.key]=""):"WorkflowAttachmentsValueFromAddShortcut"===e.key?(s["actionattrname"+e.key]="",s["value"+e.key]=""):"WorkflowAttachmentsFromPreviousAction"===e.key?(s["actionattrname"+e.key]="",s["value"+e.key]=""):(a["actionattrname"+e.key]="",a["source"+e.key]="",a["csObj_field"+e.key]="",a["evtProp_field"+e.key]="",a["prevAct_field"+e.key]="",a["value"+e.key]="")}),a.valueWorkflowAttribute&&a.valueWorkflowAttribute.push(n),a.valueWorkflowAttachmentsValueFrom&&a.valueWorkflowAttachmentsValueFrom.push(s),t.get("action_key")===o){var l,r,c;e.get("attribute_mappings").forEach(function(e){var i=t.get("actions_attributes").filter(function(t){return t.key===e.mappingAttributeName}),n="",s="",d="",u="",p="";if(e.hasOwnProperty("WorkflowAttributes"))for(a.valueWorkflowAttribute&&a.valueWorkflowAttribute.pop(),l=0;l<e.WorkflowAttributes.length;l++){var m={};for(r=0;r<e.WorkflowAttributes[l].length;r++)c=t.get("actions_attributes").filter(function(t){return t.key===e.WorkflowAttributes[l][r].mappingAttributeName}),"WorkflowAttribute"===e.WorkflowAttributes[l][r].mappingAttributeName?m.Attribute=e.WorkflowAttributes[l][r].mappingData:c.length?(m["actionattrname"+c[0].key]=c[0].name,m["value"+c[0].key]=e.WorkflowAttributes[l][r].mappingData):(m["actionattrname"+e.WorkflowAttributes[l][r].mappingAttributeName]=e.WorkflowAttributes[l][r].mappingMethod,m["value"+e.WorkflowAttributes[l][r].mappingAttributeName]=e.WorkflowAttributes[l][r].mappingData);a.valueWorkflowAttribute.push(m)
}else if(e.hasOwnProperty("WorkflowAttachments"))for(a.valueWorkflowAttachmentsValueFrom&&a.valueWorkflowAttachmentsValueFrom.pop(),l=0;l<e.WorkflowAttachments.length;l++){var f={};for(r=0;r<e.WorkflowAttachments[l].length;r++)c=t.get("actions_attributes").filter(function(t){return t.key===e.WorkflowAttachments[l][r].mappingAttributeName}),"WorkflowAttachmentsValueFrom"===e.WorkflowAttachments[l][r].mappingAttributeName?f.Attachments=e.WorkflowAttachments[l][r].mappingData:c.length?(f["actionattrname"+c[0].key]=c[0].name,f["value"+c[0].key]=e.WorkflowAttachments[l][r].mappingData):(f["actionattrname"+e.WorkflowAttachments[l][r].mappingAttributeName]=e.WorkflowAttachments[l][r].mappingMethod,f["value"+e.WorkflowAttachments[l][r].mappingAttributeName]=e.WorkflowAttachments[l][r].mappingData);a.valueWorkflowAttachmentsValueFrom.push(f)}else i=i.length>0?i[0]:i,n=e.mappingMethod,d=e.mappingData,"Content Server Object"===n?(n="csObj",u=d):"Event Property"===n?(n="evtProp",p=d):"Result from previous Action"===n?n="prevAct":"NA"===n&&(s="WorkflowUser"===i.key||"Reminder_client"===i.key||"Reminder_type"===i.key?parseInt(d):d),a[o+"_fields"][e.mappingAttributeName]={"actionattrname":i.name,"source":n,"value":s,"csObj_field":u,"evtProp_field":p,"prevAct_field":"Result from previous action"},"ReminderDueDateCompleteIn"===i.key?(a["actionattrname"+i.key]=i.name,a["value1"+i.key]=s.split(",")[0],a["value2"+i.key]=s.split(",")[1]):"Reminder_type"===i.key?(a["actionattrname"+i.key]=i.name,a["value"+i.key+a.valueReminder_client]=s):(a["actionattrname"+i.key]=i.name,a["source"+i.key]=n,a["csObj_field"+i.key]=u,a["evtProp_field"+i.key]=p,a["prevAct_field"+i.key]="Result from previous action",a["value"+i.key]=s),a[o+"_fields"].actionattributes["key"+(e.position-1)]=i.key})}}),a});else{var o={"action":"","valueDependsOn":""};t.models.forEach(function(e){var t=e.get("action_key")+"_fields",i={"Attribute":""},n={"Attachments":""};o[t]={"actionattributes":{"parametername":p.actionAttrParameterNameLabel,"sourcelabel":p.actionAttrSourceLabel,"valuelabel":p.actionAttrValueLabel}},e.get("actions_attributes").filter(function(e){o[t][e.key]={"actionattrname":"","source":"","value":"","csObj_field":"","evtProp_field":"","prevAct_field":""},o["actionattrname"+e.key]="",o["source"+e.key]="",o["csObj_field"+e.key]="",o["evtProp_field"+e.key]="",o["prevAct_field"+e.key]="","WorkflowAttribute"===e.key?o["value"+e.key]=[]:"WorkflowAttributeValueFrom"===e.key?(i["actionattrname"+e.key]="",i["value"+e.key]=""):"WorkflowAttributeEvtProp"===e.key?(i["actionattrname"+e.key]="",i["value"+e.key]=""):"WorkflowAttributeCSObject"===e.key?(i["actionattrname"+e.key]="",i["value"+e.key]=""):"WorkflowAttributeUserInput"===e.key?(i["actionattrname"+e.key]="",i["value"+e.key]=""):"WorkflowAttributeFromPreviousAction"===e.key?(i["actionattrname"+e.key]="",i["value"+e.key]=""):"WorkflowAttachmentsValueFrom"===e.key?o["value"+e.key]=[]:"WorkflowAttachmentsValueFromCSObject"===e.key?(n["actionattrname"+e.key]="",n["value"+e.key]=""):"WorkflowAttachmentsValueFromDesktop"===e.key?(n["actionattrname"+e.key]="",n["value"+e.key]=""):"WorkflowAttachmentsValueFromAddShortcut"===e.key?(n["actionattrname"+e.key]="",n["value"+e.key]=""):(o["actionattrname"+e.key]="",o["value"+e.key]="")}),o.valueWorkflowAttribute&&o.valueWorkflowAttribute.push(i),o.valueWorkflowAttachmentsValueFrom&&o.valueWorkflowAttachmentsValueFrom.push(n)}),n.push(o)}return{"actions_Data":n}},"getPlaceholder":function(e,t){t.includes(e)||t.splice(0,0,e)},"validateValue":function(e,n){var o=t.Deferred(),s=this.formModel.connector,a=s.getConnectionUrl().getApiBase("v2")+"/eventactioncenter/validateformfields?field_type="+e+"&field_value="+n;return t.ajax(s.extendAjaxOptions({"url":a,"type":"GET","contentType":!1,"crossDomain":!0,"processData":!1,"success":function(e,t,i){o.resolve(e)},"error":function(e,t,n){var s=new i.RequestErrorMessage(e);o.reject(e,t,s.toString())}})),o.promise()},"updateAttributeValues":function(e,i,n,o){var s,a,l=e.schema,r=e.options,c=o,d=this,u=t.when,p=t.Deferred();t.whenAll=function(e){if(t.isArray(e)){var i=t.Deferred();return u.apply(t,e).done(function(){i.resolve(Array.prototype.slice.call(arguments))}).fail(function(){i.reject(Array.prototype.slice.call(arguments))}),i.promise()}return u.apply(t,arguments)},a=e.data.actions_Data.map(function(e){return e.valueWorkflow&&i?(d.attrModel.set("workflow_id",e.valueWorkflow),d.attrModel.fetch()):!i&&n?(d.attrModel.set("workflow_id",n),d.attrModel.fetch()):void 0}),t.whenAll(a).then(function(e){var t;for(t=0;t<e.length;t++)if(e[t]){var i,n=[],o=[];for(i=e[t].results?e[t].results:e[t][0].results,s=0;s<i.length;s++)n.push(i.data[s].name),o.push(i.data[s].name);l.properties.actions_Data.items.properties.valueWorkflowAttribute.items.maxItems=i.length,n.length?(l.properties.actions_Data.items.properties.valueWorkflowAttribute.items.properties.Attribute.enum=n,r.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields.Attribute.optionLabels=o):(l.properties.actions_Data.items.properties.valueWorkflowAttribute.items.properties.Attribute.enum="",r.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields.Attribute.optionLabels=""),d.trigger("update:attributeValue",c,i),p.resolve(!0)}})},"updateTypeValues":function(e){var i,n,o=e.schema,s=e.options,a=this,l=t.when,r=t.Deferred();t.whenAll=function(e){if(t.isArray(e)){var i=t.Deferred();return l.apply(t,e).done(function(){i.resolve(Array.prototype.slice.call(arguments))}).fail(function(){i.reject(Array.prototype.slice.call(arguments))}),i.promise()}return l.apply(t,arguments)},n=e.data.actions_Data.map(function(e){if(e.valueReminder_client)return a.escModel.set("id",e["valueReminder_type"+e.valueReminder_client]),a.escModel.set("client_id",e.valueReminder_client),a.escModel.fetch()}),t.whenAll(n).then(function(t){if(t[0]){var n,l,c;for(i=0;i<t.length;i++)t[i]&&(c=t[i].forms?t[i].forms[0]:t[i][0]&&t[i][0].forms?t[i][0].forms[0]:void 0),c&&(n=c.schema.properties.followup_type_name.enum,l=c.options.fields.followup_type_name.optionLabels,o.properties.actions_Data.items.properties["valueReminder_type"+c.data.followup_client_name].enum="",s.fields.actions_Data.fields.item.fields["valueReminder_type"+c.data.followup_client_name].optionLabels="",null!=n[0]&&(a.getPlaceholder(null,n),a.getPlaceholder(p.reminderTypePlaceholder,l)),o.properties.actions_Data.items.properties["valueReminder_type"+c.data.followup_client_name].enum=n,s.fields.actions_Data.fields.item.fields["valueReminder_type"+c.data.followup_client_name].optionLabels=l,c.data.escalation_alert&&(e.data.actions_Data[i].escalation=!0,s.fields.actions_Data.fields.item.fields.actionattrnameReminderEscalationTo.hidden=!1,s.fields.actions_Data.fields.item.fields.valueReminderEscalationTo.hidden=!1));r.resolve(!0)}})}})}),csui.define("xecmpf/widgets/eac/impl/actionplan.actions/impl/actionplan.Attachments.FromDesktop",["module","require","csui/lib/underscore","csui/lib/jquery","csui/utils/commands/add","csui/dialogs/file.open/file.open.dialog"],function(e,t,i,n,o,s){"use strict";return o.extend({"_selectFilesForUpload":function(e,t){var i=n.Deferred();return new s({"multiple":!0}).on("add:files",function(n){csui.require(["csui/controls/fileupload/fileupload"],function(o){o.newUpload(e,t).addFilesToUpload(n,{"collection":e.collection}).done(function(e){i.resolve(e)})})}).on("cancel",function(){i.reject()}).show(),i.promise()}})}),csui.define("hbs!xecmpf/widgets/eac/impl/actionplan.actions/impl/actionplan.actions",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div>\r\n    <div class="xecmpf-eac-actions-header-wrapper binf-col-md-12 xecmpf-eac-header">\r\n        <h4 class="xecmpf-eac-actions-header" title="{{options.actionsLabel}}" aria-label="{{options.actionsLabel}}">{{options.actionsLabel}}</h4>\r\n    </div>\r\n    <div class="xecmpf-eac-actions-container-wrapper">\r\n        <div class="binf-row">\r\n            <div class="xecmpf-eac-actions-container binf-col-md-12 csui-form-set-array-wrapper">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}});return i.registerPartial("xecmpf_widgets_eac_impl_actionplan.actions_impl_actionplan.actions",n),n}),csui.define("css!xecmpf/widgets/eac/impl/actionplan.actions/impl/actionplan.actions",[],function(){}),csui.define("xecmpf/widgets/eac/impl/actionplan.actions/actionplan.actions.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/contexts/factories/connector","csui/controls/form/form.view","csui/controls/progressblocker/blocker","csui/controls/globalmessage/globalmessage","csui/models/node/node.model","xecmpf/widgets/eac/impl/actionplan.actions/impl/actionplan.actions.form.model","xecmpf/widgets/eac/impl/actionplan.actions/impl/actionplan.Attachments.FromDesktop","hbs!xecmpf/widgets/eac/impl/actionplan.actions/impl/actionplan.actions","i18n!xecmpf/widgets/eac/impl/nls/lang","css!xecmpf/widgets/eac/impl/actionplan.actions/impl/actionplan.actions"],function(e,t,i,n,o,s,a,l,r,c,d,u,p){return s.extend({"className":function(){var e=s.prototype.className.call(this);return e+=" xecmpf-eac-actions xecmpf-eac-actions-read xecmpf-eac-actions-hide-validation-errors"},"constructor":function(e){e||(e={});var t;t=(e.eventModel&&(e.eventModel.get("data")?e.eventModel.get("data").actions:e.eventModel.get("actions"))||[]).map(function(e,t){return new i.Model({"sequence":t+1,"depends_on":e.dependsOn,"action_key":e.actionKey,"attribute_mappings":e.actionAttributeMappings})});var n=e.eventModel.attributes.event_def_id;this.container=new r({"id":n},{"connector":e.context.getModel(o)}),this.addFromFileSysCommand=new d,this.collection=new i.Collection,this.collection.add(t),e.model=new c(void 0,{"context":e.context,"eventModel":e.eventModel,"collection":this.collection}),e.mode="update",e.layoutMode="doubleCol",e.breakFieldsAt=3,s.prototype.constructor.call(this,e),this.listenTo(this,"change:field",this._ValidateActions),this.listenTo(this.model,"update:error",this.updateError),this.listenTo(this.model,"update:field",this._updateActions),this.listenTo(this.model,"change:client",this.OnClientChange),this.listenTo(this.model,"change:type",this.OnTypeChange),this.listenTo(this.model,"change:dueDate",this.onChangeDuedate),this.listenTo(this,"render:form",this._getDetails),this.listenTo(this.model,"field:invalid",this.disableSave),this.listenTo(this.model,"change:parameter",this.OnChangeParameter),this.listenTo(this.model,"update:parameter",this.RemoveParameter),this.listenTo(this.model,"update:attributeValue",this.UpdateAttribute),this.listenTo(this.model,"update:valueFromDesktop",this.attachmentFromDesktop)},"formTemplate":u,"events":{"click .inline-edit-icon":"_doEditActions","focusout .xecmpf-eac-actions-container-wrapper":"onFocusout","focusout .xecmpf-eac-actions-container .cs-pull-left":"showInReadMode"},"attachmentFromDesktop":function(e){if("From desktop"===e.target.innerText.trim()){var t=this,i={"originatingView":this,"context":this.options.context,"container":this.container,"data":144},n={"context":this.options.context,"addableType":144,"addableTypeName":"document"};this.addFromFileSysCommand.execute(i,n).done(function(i){if(i&&i.node){var n,o=t.form.childrenByPropertyId.actions_Data.children.map(function(t){return t.childrenByPropertyId.valueWorkflowAttachmentsValueFrom.children.filter(function(t){return t.id===e.currentTarget.parentNode.getAttribute("data-alpaca-container-item-parent-field-id")})});for(n=0;n<o.length;n++)o[n].length>0&&(o[0]=o[n]);o[0][0].childrenByPropertyId.valueWorkflowAttachmentsValueFromDesktop.fieldView.setValue(i.node.get("id"),!0),o[0][0].childrenByPropertyId.valueWorkflowAttachmentsValueFromDesktop.fieldView.node.set(i.node.attributes)}})}},"UpdateAttribute":function(e,n){var o,s=n,a=this;if(n.length&&this.form){var l,r,c=this.form.childrenByPropertyId.actions_Data.children.filter(function(i){return i.id===t(e.containerItemEl).closest(".alpaca-field").attr("data-alpaca-field-id")}),d=[];for(l=0;l<c[0].childrenByPropertyId.valueWorkflowAttribute.children.length;l++){for(c[0].childrenByPropertyId.valueWorkflowAttribute.children[l].childrenByPropertyId.Attribute.fieldView.collection.findWhere({"id":null})&&d.push(c[0].childrenByPropertyId.valueWorkflowAttribute.children[l].childrenByPropertyId.Attribute.fieldView.collection.findWhere({"id":null})),c[0].childrenByPropertyId.valueWorkflowAttribute.children[l].childrenByPropertyId.Attribute.fieldView.collection.reset(),r=0;r<n.length;r++)d.push(new i.Model({"id":n.data[r].name,"name":n.data[r].name}));c[0].childrenByPropertyId.valueWorkflowAttribute.children[l].childrenByPropertyId.Attribute.fieldView.collection.reset(d)}}if(n.length&&this.model){for(o=0;o<n.length;o++)"Integer"===n.data[o].type_name&&""===n.data[o].persona?(this.options.model.attributes.options.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields.valueWorkflowAttributeUserInputinteger.dependencies.Attribute=n.data[o].name,this.options.model.attributes.options.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields.actionattrnameWorkflowAttributeUserInputinteger.dependencies.Attribute=n.data[o].name):"String"===n.data[o].type_name?(this.options.model.attributes.options.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields.valueWorkflowAttributeUserInputtext.dependencies.Attribute=n.data[o].name,this.options.model.attributes.options.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields.actionattrnameWorkflowAttributeUserInputtext.dependencies.Attribute=n.data[o].name):"Date"===n.data[o].type_name?(this.options.model.attributes.options.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields.valueWorkflowAttributeUserInputdate.dependencies.Attribute=n.data[o].name,this.options.model.attributes.options.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields.actionattrnameWorkflowAttributeUserInputdate.dependencies.Attribute=n.data[o].name):"Boolean"===n.data[o].type_name?(this.options.model.attributes.options.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields.valueWorkflowAttributeUserInputcheckbox.dependencies.Attribute=n.data[o].name,this.options.model.attributes.options.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields.actionattrnameWorkflowAttributeUserInputcheckbox.dependencies.Attribute=n.data[o].name):"Integer"===n.data[o].type_name&&"user"===n.data[o].persona&&(this.options.model.attributes.options.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields.valueWorkflowAttributeUserInputotcs_user_picker.dependencies.Attribute=n.data[o].name,this.options.model.attributes.options.fields.actions_Data.fields.item.fields.valueWorkflowAttribute.fields.item.fields.actionattrnameWorkflowAttributeUserInputotcs_user_picker.dependencies.Attribute=n.data[o].name);this.listenTo(this.model,"update:valueField",function(e){var t;for(t=0;t<s.length;t++)s.data[t].name===e.target.innerText&&a.enableValueField(e,s.data[t].type_name,s.data[t].persona)})}},"enableValueField":function(e,t,i){var n,o=this.form.childrenByPropertyId.actions_Data.children.map(function(t){return t.childrenByPropertyId.valueWorkflowAttribute.children.filter(function(t){return t.id===e.currentTarget.parentNode.getAttribute("data-alpaca-container-item-parent-field-id")})}),s=this;for(n=0;n<o.length;n++)o[n].length>0&&(o[0]=o[n]);this.listenTo(this.model,"update:userInput",function(e){"User Input"===e.target.innerText?s.displayUserInputField(o,t,i):this.hideDependentUserInputFields(o)}),"User Input"===o[0][0].childrenByPropertyId.valueWorkflowAttributeValueFrom.fieldView.getEditValue().attributes.name?s.displayUserInputField(o,t,i):this.hideDependentUserInputFields(o),o[0][0].childrenByPropertyId.Attribute.containerItemEl.removeClass("cs-worflow-error"),o[0][0].childrenByPropertyId.actionattrnameWorkflowAttributeValueFrom.containerItemEl.css("display","block"),o[0][0].childrenByPropertyId.valueWorkflowAttributeValueFrom.containerItemEl.css("display","block")},"hideDependentUserInputFields":function(e,t){["text","date","integer","checkbox","otcs_user_picker"].forEach(function(i){i!==t&&(e[0][0].childrenByPropertyId["valueWorkflowAttributeUserInput"+i].containerItemEl.css("display","none"),e[0][0].childrenByPropertyId["actionattrnameWorkflowAttributeUserInput"+i].containerItemEl.css("display","none"))})},"showUserInputField":function(e,t){t&&(e[0][0].childrenByPropertyId["valueWorkflowAttributeUserInput"+t].field.removeClass("binf-hidden"),e[0][0].childrenByPropertyId["actionattrnameWorkflowAttributeUserInput"+t].field.removeClass("binf-hidden"),e[0][0].childrenByPropertyId["actionattrnameWorkflowAttributeUserInput"+t].containerItemEl.removeClass("binf-hidden"),e[0][0].childrenByPropertyId["valueWorkflowAttributeUserInput"+t].containerItemEl.removeClass("binf-hidden"),e[0][0].childrenByPropertyId["valueWorkflowAttributeUserInput"+t].containerItemEl.css("display","block"),e[0][0].childrenByPropertyId["actionattrnameWorkflowAttributeUserInput"+t].containerItemEl.css("display","block"))},"enableUserInputField":function(e){e.childrenByPropertyId.valueWorkflowAttributeUserInputcheckbox.data?(e.childrenByPropertyId.actionattrnameWorkflowAttributeUserInputcheckbox.field.removeClass("binf-hidden"),e.childrenByPropertyId.actionattrnameWorkflowAttributeUserInputcheckbox.containerItemEl.css("display","block"),e.childrenByPropertyId.valueWorkflowAttributeUserInputcheckbox.field.removeClass("binf-hidden"),e.childrenByPropertyId.valueWorkflowAttributeUserInputcheckbox.containerItemEl.css("display","block")):e.childrenByPropertyId.valueWorkflowAttributeUserInputdate.data?(e.childrenByPropertyId.actionattrnameWorkflowAttributeUserInputdate.field.removeClass("binf-hidden"),e.childrenByPropertyId.actionattrnameWorkflowAttributeUserInputdate.containerItemEl.css("display","block"),e.childrenByPropertyId.valueWorkflowAttributeUserInputdate.field.removeClass("binf-hidden"),e.childrenByPropertyId.valueWorkflowAttributeUserInputdate.containerItemEl.css("display","block")):e.childrenByPropertyId.valueWorkflowAttributeUserInputinteger.data?(e.childrenByPropertyId.actionattrnameWorkflowAttributeUserInputinteger.field.removeClass("binf-hidden"),e.childrenByPropertyId.actionattrnameWorkflowAttributeUserInputinteger.containerItemEl.css("display","block"),e.childrenByPropertyId.valueWorkflowAttributeUserInputinteger.field.removeClass("binf-hidden"),e.childrenByPropertyId.valueWorkflowAttributeUserInputinteger.containerItemEl.css("display","block")):e.childrenByPropertyId.valueWorkflowAttributeUserInputotcs_user_picker.data?(e.childrenByPropertyId.actionattrnameWorkflowAttributeUserInputotcs_user_picker.field.removeClass("binf-hidden"),e.childrenByPropertyId.actionattrnameWorkflowAttributeUserInputotcs_user_picker.containerItemEl.css("display","block"),e.childrenByPropertyId.valueWorkflowAttributeUserInputotcs_user_picker.field.removeClass("binf-hidden"),e.childrenByPropertyId.valueWorkflowAttributeUserInputotcs_user_picker.containerItemEl.css("display","block")):e.childrenByPropertyId.valueWorkflowAttributeUserInputtext.data&&(e.childrenByPropertyId.actionattrnameWorkflowAttributeUserInputtext.field.removeClass("binf-hidden"),e.childrenByPropertyId.actionattrnameWorkflowAttributeUserInputtext.containerItemEl.css("display","block"),e.childrenByPropertyId.valueWorkflowAttributeUserInputtext.field.removeClass("binf-hidden"),e.childrenByPropertyId.valueWorkflowAttributeUserInputtext.containerItemEl.css("display","block"))},"displayUserInputField":function(e,t,i){var n;"String"===t?(n="text",this.hideDependentUserInputFields(e,n),this.showUserInputField(e,n)):"Integer"===t&&""===i?(n="integer",this.hideDependentUserInputFields(e,n),this.showUserInputField(e,n)):"Date"===t?(n="date",this.hideDependentUserInputFields(e,n),this.showUserInputField(e,n)):"Boolean"===t?(n="checkbox",this.hideDependentUserInputFields(e,n),this.showUserInputField(e,n)):"Integer"===t&&"user"===i&&(n="otcs_user_picker",this.hideDependentUserInputFields(e,n),this.showUserInputField(e,n))},"enableParameters":function(e){var t;t=this.form.childrenByPropertyId.actions_Data.children.filter(function(t){return t.id===e.currentTarget.closest(".csui-field-checkbox").getAttribute("data-alpaca-container-item-parent-field-id")}),t[0].childrenByPropertyId.valueWebreportParameters.fieldView.setValue(e.currentTarget.checked,!0)},"enableAttribute":function(e){var t;t=this.form.childrenByPropertyId.actions_Data.children.filter(function(t){return t.id===e.currentTarget.closest(".csui-field-checkbox").getAttribute("data-alpaca-container-item-parent-field-id")}),t[0].childrenByPropertyId.valueWorkflowAttributes.fieldView.setValue(e.currentTarget.checked,!0)},"enableAttachments":function(e){var t;t=this.form.childrenByPropertyId.actions_Data.children.filter(function(t){return t.id===e.currentTarget.closest(".csui-field-checkbox").getAttribute("data-alpaca-container-item-parent-field-id")}),t[0].childrenByPropertyId.valueWorkflowAttachments.fieldView.setValue(e.currentTarget.checked,!0)},"onChangeDuedate":function(e){var t,i,n;t=this.form.childrenByPropertyId.actions_Data.children.filter(function(t){return t.id===e.currentTarget.parentNode.getAttribute("data-alpaca-container-item-parent-field-id")}),this.completeInField=t[0].childrenByPropertyId.value1ReminderDueDateCompleteIn,this.completeInDaysField=t[0].childrenByPropertyId.value2ReminderDueDateCompleteIn,n=this.completeInField.fieldView.getEditValue().length,i=parseInt(this.completeInField.fieldView.getEditValue()),n>1?(this.completeInField.containerItemEl.addClass("eac-action-completeIn-Field"),this.completeInDaysField.containerItemEl.addClass("eac-action-completeIn-Field")):(this.completeInField.containerItemEl.removeClass("eac-action-completeIn-Field"),this.completeInDaysField.containerItemEl.addClass("eac-action-completeIn-Field")),""===this.completeInField.fieldView.getEditValue()||i!==parseInt(i,10)?this.completeInField.containerItemEl.addClass("eac-action-completeIn-Field"):this.completeInField.containerItemEl.removeClass("eac-action-completeIn-Field")},"disableSave":function(){this.$el.closest(".xecmpf-actionpan-details-view").find(".xecmpf-eac-save-actionplan").prop("disabled",!0)},"showErrorMsg":function(e){var t=["valueReminderAssigneeCategoryAttr","valueReminderAssigneePWCategoryAttr","valueReminderAssigneePWRole","valueReminderDueDateCategoryAttr","valueReminderDueDatePWCategoryAttr","valueReminderEscalationToCategoryAttr","valueReminderEscalationToPWCategoryAttr","valueReminderEscalationToPWRole"];if(this.options.model.attributes.data.actions_Data){var i,n,o=this;i=e?this.form.data.actions_Data.length:this.options.model.attributes.data.actions_Data.length;for(var s=0;s<i&&("ReminderEventAction.Add A Reminder"===this.form.data.actions_Data[s].action||"ReminderEventAction.Add A Reminder"===this.options.model.attributes.data.actions_Data[s].action);s++)for(var a=0;a<t.length;a++)(e?this.form.childrenByPropertyId.actions_Data.children[s].data[t[a]]:this.options.model.attributes.data.actions_Data[s][t[a]])&&!!(n=this.form.childrenByPropertyId.actions_Data.children[s].childrenByPropertyId[t[a]])&&n.fieldView.alpacaField.refreshValidationState(!1,function(){o.$el.find(".binf-has-error").is(":visible")&&o.$el.find(".csui-bulk-edit-actions_Data")&&!e&&o.$el.find(".csui-bulk-edit-actions_Data").trigger("click")})}},"showInReadMode":function(e){e.currentTarget.contains(e.target)||null!=e.relatedTarget||(this.$el.removeClass("xecmpf-eac-actions-write"),this.$el.addClass("xecmpf-eac-actions-read"))},"OnChangeParameter":function(e){var i,n,o,s,a,l,r,c,d,u,m,f,h,b=!1,g=0,w=this,v=0;for(e&&e.currentTarget?(s=t(e.currentTarget).closest(".csui-multivalue-container"),a=s.children().length,f=this.form.childrenByPropertyId.actions_Data.children.filter(function(i){return i.id===t(e.currentTarget).closest(".csui-field-array").attr("data-alpaca-container-item-parent-field-id")}),c=t(e.currentTarget),d=e.target,r=!0):(s=t(this.paramField[0]).find(".csui-multivalue-container"),a=s.children().length,f=this.form.childrenByPropertyId.actions_Data.children.filter(function(e){return e.id===w.paramField.closest(".csui-field-array").attr("data-alpaca-container-item-parent-field-id")}),c=this.paramField,d=this.paramField.find(".binf-dropdown-toggle")),this.parameterField=f[0].childrenByPropertyId.valueWebreportParametersList,u=0;u<this.parameterField.children.length;u++)this.parameterField.children[u].containerItemEl.is(c.closest(".cs-form-multi-action-container"))&&(i=this.parameterField.children[u].fieldView.getOldValue().id);if(!r&&2===a)for(m=0;m<a;m++)n=s.children('[data-alpaca-container-item-index="'+m+'"]'),n.find(".binf-text-danger").length&&n.find(".binf-text-danger").remove();for(m=0;m<a;m++)n=s.children('[data-alpaca-container-item-index="'+m+'"]'),o=n.find(".binf-dropdown-toggle").text().trim(),h=r?t(e.target).text().trim():t(t(this.event.relatedTarget.parentElement.parentElement.parentElement.children[0]).find(".binf-dropdown-toggle")[0]).text().trim(),r?h!==o||n.has(d).length||(b=!0):a>2&&n.find(".alpaca-array-actionbar")[0]!==t(this.event.relatedTarget).parent()[0]&&h===o&&(v++,1===v&&(l=n),b=!0),i===o&&1===++g&&(l=n);b?c.find(".binf-text-danger").length||t('<div class="binf-text-danger"><span class="csui-text-danger">'+p.selectDifferentParameter+"</span></div>").appendTo(c.find(".binf-col-sm-9")):r&&c.find(".binf-text-danger").length&&c.find(".binf-text-danger").remove(),1!==v&&1!==g||!l.find(".binf-text-danger").length||l.find(".binf-text-danger").remove()},"OnClientChange":function(e){e.currentTarget&&(this.initializeField(e),this.EscalationToField&&this.EscalationToSelectField&&this.followuptypefield&&this.listenTo(this.followuptypefield.fieldView,"selection:changed",this.updateEscalationModel),this.updateFormViewModel())},"initializeField":function(e){var t=this.form.childrenByPropertyId.actions_Data.children.filter(function(t){return t.id===e.currentTarget.parentNode.getAttribute("data-alpaca-container-item-parent-field-id")});this.currentAction=t[0],this.followupClientField=t[0].childrenByPropertyId.valueReminder_client,this.EscalationToField=t[0].childrenByPropertyId.actionattrnameReminderEscalationTo,this.EscalationToSelectField=t[0].childrenByPropertyId.valueReminderEscalationTo,this.followuptypefield=t[0].childrenByPropertyId["valueReminder_type"+this.followupClientField.data],t[0].childrenByPropertyId.valueReminderEscalationToPWMetadata&&"Role"===t[0].childrenByPropertyId.valueReminderEscalationToPWMetadata.data?this.model.escModel.set("role",!0):this.model.escModel.set("role",!1)},"OnTypeChange":function(e){e.currentTarget&&(this.initializeField(e),this.updateEscalationModel())},"updateError":function(e){"Add a reminder"===e.target.innerText.trim()?(this.EscalationToField&&this.followuptypefield.isEscalation&&(this.EscalationToField.containerItemEl.removeClass("binf-hidden"),this.EscalationToSelectField.containerItemEl.removeClass("binf-hidden"),this.EscalationToField.field.removeClass("binf-hidden"),this.EscalationToSelectField.field.removeClass("binf-hidden"),this.EscalationToSelectField.field.parent().find(".binf-help-block-standalone").removeClass("binf-hidden")),this.options.model.formModel.error&&t('<div class="csui-inlineform-group csui-inlineform-group-error"><div class="binf-text-danger"><span class="csui-text-danger">'+p.noReminderTypes+"</span></div></div>").appendTo(t(e.currentTarget).find(".binf-col-sm-9"))):t(e.currentTarget).find(".csui-inlineform-group-error").remove(),"Start webreport"===e.target.innerText.trim()&&this.updateBooleanField(),"Start workflow"===e.target.innerText.trim()&&(this.updateAttributeField(),this.updateAttachmentsField()),this.updateDependsOnField(),this._updateActions()},"updateDependsOnField":function(){this.form.children&&(this.form.childrenByPropertyId.actions_Data.children[0].childrenByPropertyId.actionattrnameDependsOn.containerItemEl.addClass("binf-hidden"),this.form.childrenByPropertyId.actions_Data.children[0].childrenByPropertyId.valueDependsOn.containerItemEl.addClass("binf-hidden"))},"updateBooleanField":function(){var t,i;if(this.form.children)for(t=this.form.children[0].children.length,i=0;i<t;i++){var n=this.form.childrenByPropertyId.actions_Data.children[i].childrenByPropertyId.valueWebreportParameters.fieldView.ui.flagWriteField;n.on("switchChange.binfSwitch",e.bind(this.enableParameters,this))}},"updateAttributeField":function(){var t,i;if(this.form.children)for(t=this.form.children[0].children.length,i=0;i<t;i++){var n=this.form.childrenByPropertyId.actions_Data.children[i].childrenByPropertyId.valueWorkflowAttributes.fieldView.ui.flagWriteField;n.on("switchChange.binfSwitch",e.bind(this.enableAttribute,this))}},"updateAttachmentsField":function(){var t,i;if(this.form.children)for(t=this.form.children[0].children.length,i=0;i<t;i++){var n=this.form.childrenByPropertyId.actions_Data.children[i].childrenByPropertyId.valueWorkflowAttachments.fieldView.ui.flagWriteField;n.on("switchChange.binfSwitch",e.bind(this.enableAttachments,this))}},"updateEscalationModel":function(){var t=this.followupClientField.fieldView.getEditValue().id,i=this.followuptypefield.fieldView.getEditValue().id;t&&i&&(this.options.model.escModel.set("client_id",t),this.options.model.escModel.set("id",i),this.followuptypefield.fieldView.setValue(this.followuptypefield.fieldView.getEditValue()),this.options.model.escModel.fetch().done(e.bind(function(e){e.forms[0].data.escalation_alert?(this.options.model.escModel.set("escalationData",this.EscalationToSelectField.data),this.hideDependentFields(!1),this._updateActions()):e.forms[0].data.escalation_alert||(this.options.model.escModel.set("escalationData",this.EscalationToSelectField.data),this.hideDependentFields(!0))},this)))},"onFocusout":function(e){var t=this.$el.find(".cs-formfield.cs-formfield-invalid");t.length&&t.removeClass("cs-formfield-invalid")},"_doEditActions":function(){var e=this;this.form.childrenByPropertyId.actions_Data.children.length>0?(this.$el.addClass("xecmpf-eac-actions-write"),this.$el.removeClass("xecmpf-eac-actions-read"),t(document).on("click."+this.cid,{"view":this},this._documentClick),this.$el.off("tab:content:field:changed")):(this.$el.removeClass("xecmpf-eac-actions-write"),this.$el.addClass("xecmpf-eac-actions-read"),t(document).off("click."+this.cid,{"view":this},this._documentClick),this.$el.on("tab:content:field:changed",function(n){t(n.target).find(".csui-bulk-edit-cancel").length&&(e.updateDependsOnField(),e.showErrorMsg(!0),e._Validate("actions_Data"),e.form.childrenByPropertyId.actions_Data.children.filter(function(t){if("StartWorkflowEventAction.Start workflow"===t.childrenByPropertyId.action.data){if(e.currentAction=t,"true"===e.currentAction.childrenByPropertyId.valueWorkflowAttributes.data||!0===e.currentAction.childrenByPropertyId.valueWorkflowAttributes.data)for(var n=0;n<e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children.length;n++)if(""!==e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children[n].childrenByPropertyId.valueWorkflowAttributeValueFrom.data)switch(e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children[n].childrenByPropertyId.actionattrnameWorkflowAttributeValueFrom.field.removeClass("binf-hidden"),e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children[n].childrenByPropertyId.actionattrnameWorkflowAttributeValueFrom.containerItemEl.css("display","block"),e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children[n].childrenByPropertyId.valueWorkflowAttributeValueFrom.field.removeClass("binf-hidden"),
e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children[n].childrenByPropertyId.valueWorkflowAttributeValueFrom.containerItemEl.css("display","block"),e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children[n].childrenByPropertyId.valueWorkflowAttributeValueFrom.data){case"csObj":e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children[n].childrenByPropertyId.valueWorkflowAttributeCSObject.field.removeClass("binf-hidden"),e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children[n].childrenByPropertyId.valueWorkflowAttributeCSObject.containerItemEl.css("display","block");break;case"evtProp":e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children[n].childrenByPropertyId.valueWorkflowAttributeEvtProp.field.removeClass("binf-hidden"),e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children[n].childrenByPropertyId.valueWorkflowAttributeEvtProp.containerItemEl.css("display","block");break;case"UserInput":e.enableUserInputField(e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children[n])}e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children[0].childrenByPropertyId.actionattrnameWorkflowAttributeValueFrom.field.removeClass("binf-hidden"),e.currentAction.childrenByPropertyId.valueWorkflowAttribute.children[0].childrenByPropertyId.actionattrnameWorkflowAttributeValueFrom.containerItemEl.css("display","block")}"ReminderEventAction.Add A Reminder"===t.childrenByPropertyId.action.data&&(e.currentAction=t,e.EscalationToField=t.childrenByPropertyId.actionattrnameReminderEscalationTo,e.EscalationToSelectField=t.childrenByPropertyId.valueReminderEscalationTo,e.followuptypefield=t.childrenByPropertyId["valueReminder_type"+t.childrenByPropertyId.valueReminder_client.data],e.followuptypefield.fieldView.collection.add(new i.Model({"id":null,"name":p.reminderTypePlaceholder}),{"at":0}),e.model.escModel.get("escalation"+e.followuptypefield.data)?(e.options.model.escModel.set("escalationData",e.EscalationToSelectField.data),e.hideDependentFields(!1)):(e.options.model.escModel.set("escalationData",e.EscalationToSelectField.data),e.hideDependentFields(!0)))}))}))},"_documentClick":function(e){var i=e.data.view,n=t(e.target);i.$el.find(".xecmpf-eac-actions-container").has(e.target).length||n.hasClass("csui-perfect-scrolling")||(i.$el.removeClass("xecmpf-eac-actions-write"),i.$el.addClass("xecmpf-eac-actions-read"))},"_Validate":function(e){var t,i,n,o,s,a,l,r;for(s=this.form.children[0].children.length,t=0;t<s;t++)for(a=this.form.childrenByPropertyId[e].children[t].children,l=a.length,i=1;i<l;i++){if(-1!==a[i].name.search("valueWorkflowAttribute")&&a[i].children&&a[i].children.length>=1)for(n=0;n<a[i].children.length;n++)for(o=0;o<a[i].children[n].children.length;o++)"none"===a[i].children[n].children[o].containerItemEl.css("display")&&-1!==a[i].children[n].children[o].name.search("valueWorkflowAttributeUserInput")&&a[i].children[n].children[o].field.hasClass("binf-has-error")&&a[i].children[n].children[o].field.removeClass("binf-has-error");if(-1!==a[i].name.search("valueWorkflowAttachmentsValueFrom"))for(n=0;n<a[i].children.length;n++)a[i].children[n].children[0].field.hasClass("binf-has-error")&&a[i].children[n].children[0].field.removeClass("binf-has-error");if(!a[i].isHidden())if(-1!==a[i].name.search("Workflow")&&(""===a[i].data||null===a[i].data||a[i].data&&""===a[i].data.name))a[i].getFieldEl().addClass("binf-has-error"),a[i].displayMessage(p.requiredField),r=a[i].name.substr(a[i].name.search("value")),this.form.schema.properties.actions_Data.items.properties[r]&&(this.form.schema.properties.actions_Data.items.properties[r].required=!0);else if(-1!==a[i].name.search("Webreport")&&a[i].children){var c;for(c=a[i].children.length,n=0;n<c;n++)("Select value"===a[i].children[n].data||a[i].children[n].fieldView&&"Select value"===a[i].children[n].fieldView.getEditValue().id)&&(a[i].getFieldEl().addClass("binf-has-error"),a[i].displayMessage(p.requiredField),r=a[i].name.substr(a[i].name.search("value")),this.form.schema.properties.actions_Data.items.properties[r]&&(this.form.schema.properties.actions_Data.items.properties[r].required=!0))}else this.isActionPlanFieldRequired(a[i].name)&&(a[i].fieldView&&a[i].fieldView.getEditValue()&&null===a[i].fieldView.getEditValue().id||""===a[i].data)?(a[i].getFieldEl().addClass("binf-has-error"),a[i].displayMessage(p.requiredField),this.form.schema.properties.actions_Data.items.properties[a[i].options.fieldClass]&&(this.form.schema.properties.actions_Data.items.properties[a[i].options.fieldClass].required=!0)):a[i].options.fieldClass&&this.form.schema.properties.actions_Data.items.properties[a[i].options.fieldClass]&&(this.form.schema.properties.actions_Data.items.properties[a[i].options.fieldClass].required=!1)}this.updateDependsOnField(),this.updateBooleanField(),this.updateAttributeField(),this.updateAttachmentsField()},"isActionPlanFieldRequired":function(e){return["sourceEffectiveDate","valuePdContext","sourceBoKey_CreateDoc","sourceBoType_CreateDoc","central_workspace_templateId"].every(function(t){return-1===e.indexOf(t)})},"_ValidateActions":function(e){this.$el.removeClass("xecmpf-eac-actions-write"),this.$el.addClass("xecmpf-eac-actions-read");var t,i;t=e.targetField.value[0]?e.targetField.value[0].action:e.targetField.value.action,i=e.parentField.name,t.length>0&&this._Validate(i)},"_updateActions":function(){var e,t,i,n,o;for(i=this.form.children[0].children.length,e=0;e<i;e++)for(n=this.form.childrenByPropertyId.actions_Data.children[e].children,o=n.length,t=1;t<o;t++)!n[t].isHidden()&&"select"===n[t].type&&n[t].fieldView&&void 0===n[t].fieldView.getEditValue().id&&n[t].fieldView.setValue(n[t].fieldView.collection.findWhere({"id":null}))},"formTemplateHelpers":function(){return{"actionsLabel":p.actionsTabLabel}},"_getLayout":function(){s.prototype._getLayout.call(this);return{"parent":"bootstrap-csui","layout":{"template":this.getOption("formTemplate").call(this,{"data":this.alpaca.data,"mode":this.mode}),"bindings":this._getBindings()}}},"_getBindings":function(){return{"actions_Data":".xecmpf-eac-actions-container"}},"getSubmitData":function(){return this.getValues().actions_Data},"updateFormViewModel":function(){var e,t=this.followupClientField.fieldView.getEditValue().id,n=this;this.options.model.formModel.set("client_id",t),this.previousValues=this.getValues().actions_Data,this.options.model.formModel.fetch().done(function(t){var o,s=[],a=t.forms[0].schema.properties.followup_type_name.enum,l=t.forms[0].options.fields.followup_type_name.optionLabels;for(n.followuptypefield.fieldView.collection.findWhere({"id":null})&&s.push(n.followuptypefield.fieldView.collection.findWhere({"id":null})),n.followuptypefield.fieldView.collection.reset(),o=0;o<a.length;o++)s.push(new i.Model({"id":a[o],"name":l[o]}));if(n.followuptypefield.fieldView.collection.reset(s),n.model.attributes.schema.properties.actions_Data.items.properties["valueReminder_type"+n.followupClientField.data].enum=a,n.model.attributes.options.fields.actions_Data.fields.item.fields["valueReminder_type"+n.followupClientField.data].optionLabels=l,n.followuptypefield.fieldView.getValue()&&n.followuptypefield.fieldView.getValue().attributes.id)for(e in s)s[e].get("id")===n.followuptypefield.fieldView.getValue().attributes.id&&n.followuptypefield.fieldView.setValue(s[e]);else n.followuptypefield.fieldView.setValue(s[0]);n.currentAction&&(n.currentAction.childrenByPropertyId.valueReminder_typenull.getFieldEl().hasClass("binf-has-error")||n.currentAction.childrenByPropertyId.valueReminderEscalationTo.getFieldEl().hasClass("binf-has-error"))&&(n.currentAction.childrenByPropertyId.valueReminder_typenull.getFieldEl().removeClass("binf-has-error"),n.currentAction.childrenByPropertyId.valueReminderEscalationTo.getFieldEl().removeClass("binf-has-error")),n.updateEscalationModel()})},"hideDependentFields":function(e){if(e)switch(this.followuptypefield&&(this.options.model.escModel.set("escalation"+this.followuptypefield.data,!1),this.followuptypefield.isEscalation=!1),this.EscalationToField.containerItemEl.addClass("binf-hidden"),this.EscalationToSelectField.containerItemEl.addClass("binf-hidden"),this.EscalationToField.field.addClass("binf-hidden"),this.EscalationToSelectField.field.addClass("binf-hidden"),this.options.model.attributes.options.fields.actions_Data.fields.item.fields.actionattrnameReminderEscalationTo.hidden=!0,this.options.model.attributes.options.fields.actions_Data.fields.item.fields.valueReminderEscalationTo.hidden=!0,this.options.model.escModel.get("escalationData")){case"eventProp":this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToEvtProp.field.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToEvtProp.containerItemEl.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToEvtProp.containerItemEl.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToEvtProp.field.addClass("binf-hidden");break;case"initObj":this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToCategoryAttr.containerItemEl.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToCategoryAttr.containerItemEl.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToCategoryAttr.field.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToCategoryAttr.field.addClass("binf-hidden");break;case"pWorkspace":this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToPWMetadata.containerItemEl.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToPWMetadata.containerItemEl.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToPWMetadata.field.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToPWMetadata.field.addClass("binf-hidden"),this.options.model.escModel.get("role")?(this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToPWRole.containerItemEl.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToPWRole.containerItemEl.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToPWRole.field.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToPWRole.field.addClass("binf-hidden")):(this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToPWCategoryAttr.containerItemEl.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToPWCategoryAttr.containerItemEl.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToPWCategoryAttr.field.addClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToPWCategoryAttr.field.addClass("binf-hidden"))}else switch(this.followuptypefield&&(this.options.model.escModel.set("escalation"+this.followuptypefield.data,!0),this.followuptypefield.isEscalation=!0),this.EscalationToField.containerItemEl.removeClass("binf-hidden"),this.EscalationToSelectField.containerItemEl.removeClass("binf-hidden"),this.EscalationToField.field.removeClass("binf-hidden"),this.EscalationToSelectField.field.removeClass("binf-hidden"),this.EscalationToSelectField.field.parent().find(".binf-help-block-standalone").removeClass("binf-hidden"),this.options.model.attributes.options.fields.actions_Data.fields.item.fields.actionattrnameReminderEscalationTo.hidden=!1,this.options.model.attributes.options.fields.actions_Data.fields.item.fields.valueReminderEscalationTo.hidden=!1,this.options.model.escModel.get("escalationData")){case"eventProp":this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToEvtProp.field.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToEvtProp.containerItemEl.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToEvtProp.containerItemEl.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToEvtProp.field.removeClass("binf-hidden");break;case"initObj":this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToCategoryAttr.containerItemEl.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToCategoryAttr.containerItemEl.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToCategoryAttr.field.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToCategoryAttr.field.removeClass("binf-hidden");break;case"pWorkspace":this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToPWMetadata.containerItemEl.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToPWMetadata.containerItemEl.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToPWMetadata.field.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToPWMetadata.field.removeClass("binf-hidden"),this.options.model.escModel.get("role")?(this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToPWRole.containerItemEl.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToPWRole.containerItemEl.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToPWRole.field.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToPWRole.field.removeClass("binf-hidden")):(this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToPWCategoryAttr.containerItemEl.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToPWCategoryAttr.containerItemEl.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.actionattrnameReminderEscalationToPWCategoryAttr.field.removeClass("binf-hidden"),this.currentAction.childrenByPropertyId.valueReminderEscalationToPWCategoryAttr.field.removeClass("binf-hidden"))}this.options.model.escModel.set("escalationData","")},"showUserField":function(e,t){e.childrenByPropertyId["actionattrname"+t].containerItemEl.removeClass("binf-hidden"),e.childrenByPropertyId["actionattrname"+t].field.removeClass("binf-hidden"),e.childrenByPropertyId["value"+t].containerItemEl.removeClass("binf-hidden"),e.childrenByPropertyId["value"+t].field.removeClass("binf-hidden"),e.childrenByPropertyId["value"+t].containerItemEl.css("display","block"),e.childrenByPropertyId["actionattrname"+t].containerItemEl.css("display","block")},"_getDetails":function(){var e,t,n=this,o=[],s=this.model.attributes.data.actions_Data?this.model.attributes.data.actions_Data.length:0;for(e=0;e<s;e++){if("ReminderEventAction.Add A Reminder"===this.model.attributes.data.actions_Data[e].action&&!n.options.model.formModel.error){n.currentAction=n.form.childrenByPropertyId.actions_Data.children[e],n.followupClientField=n.currentAction.childrenByPropertyId.valueReminder_client,n.EscalationToField=n.currentAction.childrenByPropertyId.actionattrnameReminderEscalationTo,n.EscalationToSelectField=n.currentAction.childrenByPropertyId.valueReminderEscalationTo;var a=n.followupClientField.data?n.followupClientField.data:null;n.followuptypefield=n.currentAction.childrenByPropertyId["valueReminder_type"+a],n.followuptypefield?n.followuptypefield.getEnum().includes(n.followuptypefield.data)||(o.push(new i.Model({"id":n.model.attributes.schema.properties.actions_Data.items.properties.valueReminder_typenull.enum[0],"name":n.model.attributes.options.fields.actions_Data.fields.item.fields.valueReminder_typenull.optionLabels[0]})),n.followuptypefield.fieldView.setValue(o[0]),n.followuptypefield.getFieldEl().addClass("binf-has-error"),n.followuptypefield.displayMessage(p.requiredField)):(n.model.attributes.schema.properties.actions_Data.items.properties.valueReminder_client.enum.includes(a)||(n.model.attributes.data.actions_Data[e].valueReminder_client="",n.model.attributes.schema.properties.actions_Data.items.properties.valueReminder_client.enum[0]===n.model.attributes.schema.properties.actions_Data.items.properties.valueReminder_client.enum[1]&&(n.model.attributes.schema.properties.actions_Data.items.properties.valueReminder_client.enum.shift(0),n.model.attributes.options.fields.actions_Data.fields.item.fields.valueReminder_client.optionLabels.shift(0)),o.push(new i.Model({"id":n.model.attributes.schema.properties.actions_Data.items.properties.valueReminder_client.enum[0],"name":n.model.attributes.options.fields.actions_Data.fields.item.fields.valueReminder_client.optionLabels[0]})),n.followupClientField.fieldView.setValue(o[0]),n.followupClientField.getFieldEl().addClass("binf-has-error"),n.followupClientField.displayMessage(p.requiredField),o.pop()),o.push(new i.Model({"id":n.model.attributes.schema.properties.actions_Data.items.properties.valueReminder_typenull.enum[0],"name":n.model.attributes.options.fields.actions_Data.fields.item.fields.valueReminder_typenull.optionLabels[0]})),n.followuptypefield=n.currentAction.childrenByPropertyId.valueReminder_typenull,n.followuptypefield.fieldView.setValue(o[0]),n.followuptypefield.getFieldEl().addClass("binf-has-error"),n.followuptypefield.displayMessage(p.requiredField)),this.model.attributes.data.actions_Data[e].escalation?(n.model.attributes.data.actions_Data[e].valueReminderEscalationToPWMetadata&&"Role"===n.model.attributes.data.actions_Data[e].valueReminderEscalationToPWMetadata?n.model.escModel.set("role",!0):n.model.escModel.set("role",!1),n.model.escModel.set("escalationData",n.model.attributes.data.actions_Data[e].valueReminderEscalationTo),n.hideDependentFields(!1)):n.hideDependentFields(!0)}for(var l=0;l<this.form.data.actions_Data[e].valueWorkflowAttribute.length;l++)if(this.form.data.actions_Data[e].valueWorkflowAttribute[l].Attribute&&(this.form.data.actions_Data[e].valueWorkflowAttribute[l].valueWorkflowAttributeUserInputtext?(t="WorkflowAttributeUserInputtext",n.showUserField(this.form.childrenByPropertyId.actions_Data.children[e].childrenByPropertyId.valueWorkflowAttribute.children[l],t)):this.form.data.actions_Data[e].valueWorkflowAttribute[l].valueWorkflowAttributeUserInputinteger?(t="WorkflowAttributeUserInputinteger",n.showUserField(this.form.childrenByPropertyId.actions_Data.children[e].childrenByPropertyId.valueWorkflowAttribute.children[l],t)):this.form.data.actions_Data[e].valueWorkflowAttribute[l].valueWorkflowAttributeUserInputdate?(t="WorkflowAttributeUserInputdate",n.showUserField(this.form.childrenByPropertyId.actions_Data.children[e].childrenByPropertyId.valueWorkflowAttribute.children[l],t)):this.form.data.actions_Data[e].valueWorkflowAttribute[l].valueWorkflowAttributeUserInputcheckbox?(t="WorkflowAttributeUserInputcheckbox",n.showUserField(this.form.childrenByPropertyId.actions_Data.children[e].childrenByPropertyId.valueWorkflowAttribute.children[l],t)):this.form.data.actions_Data[e].valueWorkflowAttribute[l].valueWorkflowAttributeUserInputotcs_user_picker&&(t="WorkflowAttributeUserInputotcs_user_picker",n.showUserField(this.form.childrenByPropertyId.actions_Data.children[e].childrenByPropertyId.valueWorkflowAttribute.children[l],t)),this.form.childrenByPropertyId.actions_Data.children[e].childrenByPropertyId.valueWorkflowAttribute.children[l].childrenByPropertyId.valueWorkflowAttributeValueFrom.containerItemEl.css("display","block"),this.form.childrenByPropertyId.actions_Data.children[e].childrenByPropertyId.valueWorkflowAttribute.children[l].childrenByPropertyId.actionattrnameWorkflowAttributeValueFrom.containerItemEl.css("display","block"),void 0===this.form.childrenByPropertyId.actions_Data.children[e].childrenByPropertyId.valueWorkflowAttribute.children[l].childrenByPropertyId.Attribute.fieldView.getValue().attributes.name)){var r=[];r.push(this.form.childrenByPropertyId.actions_Data.children[e].childrenByPropertyId.valueWorkflowAttribute.children[e].childrenByPropertyId.Attribute.fieldView.collection.findWhere({"id":null})),this.form.childrenByPropertyId.actions_Data.children[e].childrenByPropertyId.valueWorkflowAttribute.children[e].childrenByPropertyId.Attribute.fieldView.setValue(r[0]),this.form.childrenByPropertyId.actions_Data.children[e].childrenByPropertyId.valueWorkflowAttribute.children[e].childrenByPropertyId.Attribute.containerItemEl.addClass("cs-worflow-error"),this.form.childrenByPropertyId.actions_Data.children[e].childrenByPropertyId.valueWorkflowAttribute.children[l].childrenByPropertyId.Attribute.getFieldEl().addClass("binf-has-error"),this.form.childrenByPropertyId.actions_Data.children[e].childrenByPropertyId.valueWorkflowAttribute.children[l].childrenByPropertyId.Attribute.displayMessage(p.requiredField)}}this.updateDependsOnField(),this.updateBooleanField(),this.updateAttributeField(),this.updateAttachmentsField(),this.showErrorMsg()},"RemoveParameter":function(e){event&&event.relatedTarget&&"remove"===t(event.relatedTarget).attr("data-alpaca-array-actionbar-action")&&(this.paramParent=e,this.paramField=e.field,this.event=event,this.OnChangeParameter())}})}),csui.define("hbs!xecmpf/widgets/eac/impl/actionplan.tab.content/impl/actionplan.empty.view",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="xecmpf-actionplan-empty-content">\r\n    <div class="xecmpf-actionplan-emptyContent-icon"></div>\r\n    <div class="xecmpf-actionplan-emptyContent-msg" title="'+e.escapeExpression((s=null!=(s=a(i,"emptyContentMsg")||(null!=t?a(t,"emptyContentMsg"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"emptyContentMsg","hash":{},"loc":{"start":{"line":3,"column":59},"end":{"line":3,"column":78}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"emptyContentMsg")||(null!=t?a(t,"emptyContentMsg"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"emptyContentMsg","hash":{},"loc":{"start":{"line":3,"column":80},"end":{"line":3,"column":99}}}):s))+"</div>\r\n</div>"}});return i.registerPartial("xecmpf_widgets_eac_impl_actionplan.tab.content_impl_actionplan.empty.view",n),n}),csui.define("css!xecmpf/widgets/eac/impl/actionplan.tab.content/impl/actionplan.empty.view",[],function(){}),csui.define("xecmpf/widgets/eac/impl/actionplan.tab.content/actionplan.empty.content.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","hbs!xecmpf/widgets/eac/impl/actionplan.tab.content/impl/actionplan.empty.view","i18n!xecmpf/widgets/eac/impl/nls/lang","css!xecmpf/widgets/eac/impl/actionplan.tab.content/impl/actionplan.empty.view"],function(e,t,i,n,o){return i.ItemView.extend({"constructor":function(){i.ItemView.prototype.constructor.apply(this,arguments)},"className":"xecmpf-actionplan-emptyContent-view","template":n,"templateHelpers":function(){return{"emptyContentMsg":o.configureActionPlanText}}})}),csui.define("xecmpf/widgets/eac/impl/actionplan.tab.content/actionplan.tab.content.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/base","csui/utils/contexts/factories/connector","csui/controls/tab.panel/tab.panel.view","csui/controls/tab.panel/tab.links.ext.view","csui/controls/tab.panel/tab.links.ext.scroll.mixin","csui/models/form","csui/controls/form/form.view","csui/controls/globalmessage/globalmessage","csui/widgets/metadata/metadata.properties.view","csui/controls/progressblocker/blocker","csui/controls/tile/behaviors/perfect.scrolling.behavior","xecmpf/widgets/eac/impl/actionplan.processmode/actionplan.processmode.view","xecmpf/widgets/eac/impl/actionplan.processmode/impl/actionplan.processmode.form.model","xecmpf/widgets/eac/impl/actionplan.rules/impl/actionplan.rules.form.model","xecmpf/widgets/eac/impl/actionplan.rules/actionplan.rules.view","xecmpf/widgets/eac/impl/actionplan.actions/actionplan.actions.view","xecmpf/widgets/eac/impl/actionplan.tab.content/actionplan.empty.content.view","i18n!xecmpf/widgets/eac/impl/nls/lang"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f,h,b,g,w,v,y){var x={"ERROR_ACTION_PLAN_CREATION":y.genericWarningMsgOnDeletion},k=s.extend({"className":(n.isTouchBrowser()?"cs-touch-browser ":"")+"cs-metadata-actionplan-content cs-metadata-properties binf-panel binf-panel-default","contentView":function(t){var i=c,n=e.findWhere(this._propertyPanels,{"model":t});if(n)return n.contentView||c;if(this.options.isAddActionPlan)this.$el.addClass("eac-newactionplan-content"),i=v;else switch(t.get("role_name")){case"rules":i=g;break;case"actions":i=w;break;case"processMode":i=f}return i},"contentViewOptions":function(t){var n=this.options.node,o={"eventModel":n,"context":this.options.context},s=e.findWhere(this._propertyPanels,{"model":t});switch(t.get("role_name")){case"rules":var a,l=new i.Collection,r=[{}];n&&n.get("data")&&n.get("data").ruleConditions&&n.get("data").ruleConditions.length>0&&(r=n.get("data").ruleConditions),a=r.map(function(e,t){return new i.Model({"sequence":t+1,"operand":e.operand||"","operator":e.operation||"","to":e.value||"","conjunction":e.logicalConnective||"","categoryDetails":e.categoryDetails||""})}),l.set(a),this.eacRuleFormModel=new b(void 0,{"context":this.options.context,"eventModel":n,"collection":l}),e.extend(o,{"mode":"update","model":this.eacRuleFormModel,"isNewActionPlan":!n.get("plan_id")});break;case"actions":e.extend(o,{"summary":!1});break;case"processMode":var c=new h(void 0,{"context":this.options.context,"eventModel":n});e.extend(o,{"mode":"create","model":c})}return s&&e.extend(o,s.contentViewOptions),o},"isTabable":function(){return!0!==this.options.notTabableRegion},"constructor":function(n){n||(n={}),e.defaults(n,{"tabType":"binf-nav-pills","mode":"spy","extraScrollTopOffset":3,"formMode":"update","toolbar":!0,"contentView":this.getContentView,"TabLinkCollectionViewClass":a,"tabContentAccSelectors":"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[cstabindex], *[contenteditable]"}),n.collection=new i.Collection;var l=new i.Collection;[{"role_name":"rules","title":y.rulesTabLabel},{"role_name":"actions","title":y.actionsTabLabel,"required":!0},{"role_name":"processMode","title":y.processModeTabLabel,"required":!0}].forEach(function(e){l.push(new i.Model(e))}),this.eacEventActionPlans=l,s.prototype.constructor.apply(this,arguments),this.connector=this.options.context.getObject(o),this.options.blockingParentView?p.delegate(this,this.options.blockingParentView):p.imbue(this),this.listenTo(this.eacEventActionPlans,"request",this.blockActions).listenTo(this.eacEventActionPlans,"request",this._checkFormFetching).listenTo(this.eacEventActionPlans,"sync",this._syncForms).listenTo(this.eacEventActionPlans,"sync",this.unblockActions).listenTo(this.eacEventActionPlans,"destroy",this.unblockActions).listenTo(this.eacEventActionPlans,"error",this.unblockActions).listenTo(this.collection,"reset",this.render),this.eacEventActionPlans.trigger("sync"),this.eacEventActionPlans.fetching&&this.blockActions(),t(window).on("resize",e.bind(this._onWindowResize,this)),this.listenTo(this,"render",this.onRendered)},"behaviors":{"PerfectScrolling":{"behaviorClass":m,"contentParent":"> .binf-tab-content","suppressScrollX":!0,"scrollYMarginOffset":15}},"onBeforeDestroy":function(){t(window).off("resize",this._onWindowResize)},"render":function(){return s.prototype.render.apply(this),this._initializeOthers(),this},"onRendered":function(){this._setTablinksAttributes(),setTimeout(e.bind(this._setTablinksAttributes,this),300),this.tabLinks.stopListening(this.collection,"reset"),this.tabContent.stopListening(this.collection,"reset"),this.tabLinks.$el.addClass("binf-hidden"),this.tabContent.$el.addClass("binf-hidden"),this.blockActions();var i=[],n=this;this.tabContent.children.each(e.bind(function(e){var n=t.Deferred();i.push(n.promise()),e.content instanceof c?this.listenTo(e.content,"render:form",function(){n.resolve()}):n.resolve()},this)),t.when.apply(t,i).done(function(){n.unblockActions(),n.tabLinks.$el.removeClass("binf-hidden"),n.tabContent.$el.removeClass("binf-hidden"),n._initializeOthers(),n.triggerMethod("render:forms",this);var e=t.Event("tab:content:render");n.$el.trigger(e),n.trigger("update:scrollbar")})},"onPanelActivated":function(){setTimeout(e.bind(function(){this._setTablinksAttributes(),this._enableToolbarState(".tab-links .tab-links-bar > ul li")},this),300)},"_setTablinksAttributes":function(){var e,i,n=this.$el.parent();for(e=0;e<5;e++){if(i=n.siblings(".cs-tab-links.binf-dropdown"),i.length>0){var o=t(i[0]).width();if(o>15){var s=o-12,a=s+"px",l=this.rtlEnabled?"margin-right":"margin-left",r=this.$el.find(".tab-links");r.css({"width":function(){return"calc(100% - "+a+")"}}),r.css(l,a)}break}n=n.parent()}},"_syncForms":function(){this._fetchingForms=!1;var t=this.eacEventActionPlans.where({"role_name":"rules"});t=e.union(t,this.eacEventActionPlans.where({"role_name":"actions"})),t=e.union(t,this.eacEventActionPlans.where({"role_name":"processMode"})),this.panelModelsLength=t.length,this._normalizeModels(t),this.collection.reset(t)},"_normalizeModels":function(t){e.each(t,function(e){if(e instanceof r){var t=e.get("schema");t&&t.title&&e.set("title",t.title)}null==e.get("id")&&e.set("id",e.cid),e.collection&&e.collection.remove(e)})},"_initializeOthers":function(){var t={"gotoPreviousTooltip":"","gotoNextTooltip":""};this._initializeToolbars(t),this._listenToTabEvent(),setTimeout(e.bind(this._enableToolbarState,this),300)},"_onWindowResize":function(){this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(e.bind(function(){this._setTablinksAttributes(),this._enableToolbarState()},this),200)},"saveActionPlanContent":function(){return this.isAllFormsValid()?this.makeActionPlanServiceCall():t.Deferred().reject("FORM_NOT_VALID")},"isAllFormsValid":function(){var e=!0;return this.tabContent.children.forEach(function(t){var i=t.model.get("role_name");t.content.isFormValid?t.content.isFormValid()||(e=!1):t.content instanceof c&&(t.content.validate()||"actions"===i||(e=!1))}),e},"getFormsData":function(){var e={};return this.tabContent.children.forEach(function(t){var i=t.model.get("role_name");i="processMode"===i?"summary":i,t.content.getSubmitData?e[i]=t.content.getSubmitData():t.content instanceof c&&(e[i]=t.content.getValues())}),e},"getGeneralInformation":function(){var e={},t=this.options.node,i=t.get("event_name")?t.get("event_name"):this.options.context.viewStateModel?this.options.context.viewStateModel.get("back_to_title"):void 0,n=t.get("namespace")?t.get("namespace"):t.namespace;return e.event_def_id=this.options.node.get("id")?t.get("parent_id"):t.get("event_def_id"),e.event_id=t.get("eventType"),e.namespace=t.get("data")?t.get("data").systemName:n,e.event_name=t.get("data")?t.get("data").eventName:i,e.rule_id=t.get("data")?t.get("data").ruleID:t.get("rule_id"),e.plan_id=t.get("id"),e},"makeActionPlanServiceCall":function(){var e,i,n,o,s,a,l,r,c,u,p,m,f,h,b,g,w=this,v=this.connector.getConnectionUrl().getApiBase("v2")+"/nodes",y=this.connector.getConnectionUrl().getApiBase("v2")+"/eventactioncenter/actionplan",k=new FormData,_=new FormData,C=new FormData,A=this.getFormsData(),P=t.Deferred();if(A.rules)for(e=0;e<A.rules.length;e++)if(a=A.rules[e].from){if(l=A.rules[e]["value"+a],"Classification"===(c=!!a&&this.eacRuleFormModel.eacPropertiesCollection.findWhere({"name":a}).get("type")))switch(l){case"Unclassified":l=0;break;case"Any":l=1;break;case"Custom":l=A.rules[e]["to2"+a]}
"Category Attribute"===a&&(c=this.eacRuleFormModel.categoryResponse.typeName,g={"Date":"date","Integer":"integer","User":"otcs_user_picker","StringField":"","Boolean":"checkbox"},b=A.rules[e]["to2"+a+g[c]],A.rules[e].expValue=b),r=A.rules[e]["operator"+a],A.rules[e].operator=r,A.rules[e].to=l}else A.rules[e]={};if(A.actions)for(e=0;e<A.actions.length;e++)for(n=A.actions[e],A.actions[e].valueDependsOn?A.actions[e].valueDependsOn=1:A.actions[e].valueDependsOn=0,s=!!this.options.node.actionAttributeCollection&&this.options.node.actionAttributeCollection.findWhere({"action_key":n.action}),o=s?s.attributes.actions_attribute_count:0,i=0;i<o;i++)if(u="ReminderEventAction.Add A Reminder"===n.action||"DocGenEventAction.Generate Document"===n.action||"CreateOrUpdateCentralWorkspace.Create Or Update Central Workspace"===n.action||"StartWorkflowEventAction.Start workflow"===n.action?s.attributes.actions_attributes[i].key:n[n.action+"_fields"].actionattributes["key"+i],p=n["source"+u],h=n[p+"_field"+u],u)if(m=n["actionattrname"+u],"ReminderEventAction.Add A Reminder"===n.action||"StartWorkflowEventAction.Start workflow"===n.action||"StartWebreportEventAction.Start webreport"===n.action||"CreateOrUpdateCentralWorkspace.Create Or Update Central Workspace"===n.action){if("ReminderDueDateCompleteIn"===u&&n["value1"+u]){var T=n["value1"+u].toString(),V=n["value2"+u];n[n.action+"_fields"][u]={"actionattrname":m,"value":T.concat(",",V)}}else if("Reminder_type"===u)f=n["value"+u+n.valueReminder_client],n[n.action+"_fields"][u]={"actionattrname":m,"value":f};else if("WorkflowAttribute"===u){if((f=n["value"+u])&&f.length){var D;for(D=0;D<f.length;D++)"prevAct"===f[D].valueWorkflowAttributeValueFrom&&(f[D].valueWorkflowAtrributeFromPreviousAction=!0),"evtProp"!==f[D].valueWorkflowAttributeValueFrom&&"csObj"!==f[D].valueWorkflowAttributeValueFrom||(f[D]["valueWorkflowAttributeUserInput"+f[D].Attribute]="")}n[n.action+"_fields"][u]=f}else if("WorkflowAttachmentsValueFrom"===u){if((f=n["value"+u])&&f.length){var I;for(I=0;I<f.length;I++)"prevAct"===f[I].Attachments&&(f[I].valueWorkflowAttachmentsFromPreviousAction=!0)}n[n.action+"_fields"][u]=f}else f=n["value"+u],n[n.action+"_fields"][u]={"actionattrname":m,"value":f};n[n.action+"_fields"][u]&&(n[n.action+"_fields"][u][p+"_field"]=h)}else"DocGenEventAction.Generate Document"===n.action&&-1!==["PdContext"].indexOf(u)?(f=n["value"+u],n[n.action+"_fields"][u]={"actionattrname":m,"value":f}):(n[n.action+"_fields"][u]={"actionattrname":m,"source":p},n[n.action+"_fields"][u][p+"_field"]=h);return k.append("name",this.options.node.attributes.name),k.append("type",875),k.append("parent_id",this.options.node.attributes.event_def_id),A.gen_information=w.getGeneralInformation(),A.mode=""===A.gen_information.rule_id?"Create":"Update",A.actionPlanName=w.options.node.attributes.name,A.actionPlanId=A.gen_information.plan_id,A.eventDefinitionId=A.gen_information.event_def_id,_.append("action_plan_items",JSON.stringify(A)),this.blockActions(),"Create"===A.mode?this.connector.makeAjaxCall({"type":"Post","url":v,"data":k,"processData":!1,"contentType":!1}).then(function(e){e.results.data&&(w.options.node.set("plan_id",e.results.data.properties.id,{"silent":!0}),w.options.node.set("id",e.results.data.properties.id,{"silent":!0}),w.options.node.set("name",e.results.data.properties.name,{"silent":!0}),A.gen_information.plan_id=e.results.data.properties.id,A.actionPlanId=A.gen_information.plan_id,C.append("action_plan_items",JSON.stringify(A)),w.connector.makeAjaxCall({"type":"PUT","url":y,"data":C,"processData":!1,"contentType":!1}).then(function(e){if(200===e.results.statusCode&&e.results.ok){d.showMessage("success",e.results.msg);var t={"planID":e.results.data.planID,"operation":""!==A.gen_information.plan_id?"update":"create","event_def_id":A.gen_information.event_def_id};w.trigger("refresh:current:action:plan:item",t),P.resolve()}else P.reject("FORM_NOT_SAVED")},function(e){w.options.node.destroy();var t=e.responseJSON&&(e.responseJSON.errorDetail||e.responseJSON.error)||x.ERROR_ACTION_PLAN_CREATION;d.showMessage("error",t),P.reject("FORM_NOT_SAVED")}).always(function(){w.unblockActions()}))},function(e){var t=e.responseJSON&&(e.responseJSON.errorDetail||e.responseJSON.error);w.setErrorMessage(t,"create")}):w.connector.makeAjaxCall({"type":"PUT","url":y,"data":_,"processData":!1,"contentType":!1}).then(function(e){if(200===e.results.statusCode&&e.results.ok){d.showMessage("success",e.results.msg);var t={"planID":e.results.data.planID,"operation":""!==A.gen_information.plan_id?"update":"create","event_def_id":A.gen_information.event_def_id};w.trigger("refresh:current:action:plan:item",t),P.resolve()}else P.reject("FORM_NOT_SAVED")},function(e){var t=e.responseJSON&&(e.responseJSON.errorDetail||e.responseJSON.error)||x.ERROR_ACTION_PLAN_CREATION;d.showMessage("error",t),P.reject("FORM_NOT_SAVED")}).always(function(){w.unblockActions()}),P.promise()}});return e.extend(k.prototype,l),k}),csui.define("hbs!xecmpf/widgets/eac/impl/actionplan.tab.content/impl/actionplan.tabbed.view",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="xecmpf-eac-actionplan-content"></div>\r\n<div class="xecmpf-eac-actionplan-footer-container">\r\n    <div class="xecmpf-eac-actionplan-footer binf-right">\r\n        <button title="'+e.escapeExpression((s=null!=(s=a(i,"save")||(null!=t?a(t,"save"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"save","hash":{},"loc":{"start":{"line":4,"column":23},"end":{"line":4,"column":31}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"save")||(null!=t?a(t,"save"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"save","hash":{},"loc":{"start":{"line":4,"column":45},"end":{"line":4,"column":53}}}):s))+'" class="binf-btn binf-btn-primary xecmpf-eac-save-actionplan">\r\n            '+e.escapeExpression((s=null!=(s=a(i,"save")||(null!=t?a(t,"save"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"save","hash":{},"loc":{"start":{"line":5,"column":12},"end":{"line":5,"column":20}}}):s))+'</button>\r\n        <button title="'+e.escapeExpression((s=null!=(s=a(i,"cancel")||(null!=t?a(t,"cancel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":6,"column":23},"end":{"line":6,"column":33}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"cancel")||(null!=t?a(t,"cancel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":6,"column":47},"end":{"line":6,"column":57}}}):s))+'" class="cancel-btn binf-btn binf-btn-default xecmpf-eac-cancel-actionplan">'+e.escapeExpression((s=null!=(s=a(i,"cancel")||(null!=t?a(t,"cancel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":6,"column":133},"end":{"line":6,"column":143}}}):s))+"</button>\r\n    </div>\r\n</div>"}});return i.registerPartial("xecmpf_widgets_eac_impl_actionplan.tab.content_impl_actionplan.tabbed.view",n),n}),csui.define("css!xecmpf/widgets/eac/impl/actionplan.tab.content/impl/actionplan.tabbed.view",[],function(){}),csui.define("xecmpf/widgets/eac/impl/actionplan.tab.content/actionplan.tabbed.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/utils/page.leaving.blocker","xecmpf/widgets/eac/impl/actionplan.tab.content/actionplan.tab.content.view","i18n!xecmpf/widgets/eac/impl/nls/lang","hbs!xecmpf/widgets/eac/impl/actionplan.tab.content/impl/actionplan.tabbed.view","css!xecmpf/widgets/eac/impl/actionplan.tab.content/impl/actionplan.tabbed.view"],function(e,t,i,n,o,s,a,l,r){var c=n.ItemView.extend({"className":"metadata-inner-wrapper xecmpf-eac-actionplan-tabbed-inner-wrapper","template":r,"templateHelpers":function(){return{"save":(this.model.get("data")?this.model.get("data").ruleID:this.model.get("rule_id"))?l.saveLabel:l.createLabel,"cancel":l.closeLabel}},"events":{"click .xecmpf-eac-save-actionplan":"saveEventActionPlan","click .xecmpf-eac-cancel-actionplan":"cancelEventActionPlan"},"constructor":function(e){e||(e={}),n.ItemView.prototype.constructor.call(this,e);var t={"context":this.options.context,"node":this.options.model,"eventname":this.options.eventname,"namespace":this.options.namespace,"actionplanSettingsView":this,"isAddActionPlan":this.options.isAddActionPlan};this.actionPlanContentView=new a(t),this.propagateEventsToViews(this.actionPlanContentView)},"onRender":function(){var e=this,i=this.actionPlanContentView.render();n.triggerMethodOn(i,"before:show",i,this),this.$el.find(".xecmpf-eac-actionplan-content").append(i.el),n.triggerMethodOn(i,"show",i,this),this.listenTo(this.actionPlanContentView,"refresh:current:action:plan:item",function(t){e.trigger("refresh:current:action:plan:item",t)});var o=null;Object.defineProperty(this,"tabbedViewContainsChanges",{"get":function(){return o},"set":function(i){o=i,e.updateSaveButtonDisableStatus(!i),e.$el.find(".cs-nodepicker .cs-field-read a").on("click."+e.cid,function(i){var n=t(i.currentTarget);i.preventDefault(),i.stopPropagation(),e.trigger("actionplan:click:link",n,e)}),i&&!s.isEnabled()?s.enable(l.warningMsgOnActionPlanNavigation):i||s.disable()}}),this.tabbedViewContainsChanges=!1,(this.options.isAddActionPlan||this.model.get("create"))&&this.updateSaveButtonDisableStatus(!0),this.actionPlanContentView.tabContent.children.forEach(function(t){t.content.$el.on("focusout keydown",function(t){(e.$el.find(".binf-has-error").is(":visible")||e.$el.find(".binf-text-danger").is(":visible")||13===t.keyCode&&""===t.target.value)&&e.updateSaveButtonDisableStatus(!0)}),e.listenTo(t.content,"change:field",function(t){this.model.set("data",this.options.apData);var i=this.model.get("data")?this.model.get("data").ruleID:this.model.get("rule_id");i||(e.rulesContainsChanges=!0),"rulesSet"===t.name?(e.dataChange=!1,e.rulesHasData=!1,e.checkChanges(t.view.form.children[0].children),1===t.value.length&&""===t.value[0].from?e.rulesContainsChanges=!0:i&&t.value.length===e.model.get("data").ruleConditions.length&&!e.dataChange||!t.view.isFormValid()?e.rulesContainsChanges=!1:(e.rulesContainsChanges=!0,e.rulesHasData=!0)):"actions_Data"===t.name?(e.dataChange=!1,e.checkChanges(t.view.form.children[0].children),i&&!e.dataChange&&t.value.length===e.model.get("data").actions.length||e.$el.find(".binf-has-error").is(":visible")?e.actionsContainsChanges=!1:e.actionsContainsChanges=!0):"run_as"!==t.name&&"process_mode"!==t.name||(e.dataChange=!1,e.checkChanges(t.view.form.children),e.processContainsChanges=e.dataChange),this.model.attributes.planCreated&&e.rulesContainsChanges&&e.actionsContainsChanges&&e.processContainsChanges?e.tabbedViewContainsChanges=!0:!i&&e.rulesContainsChanges&&e.actionsContainsChanges&&e.processContainsChanges?e.tabbedViewContainsChanges=!0:i&&((e.model.get("data").ruleConditions[0]||e.rulesHasData)&&(e.rulesContainsChanges||e.actionsContainsChanges||e.processContainsChanges)||e.actionsContainsChanges||e.processContainsChanges)?e.tabbedViewContainsChanges=!0:e.tabbedViewContainsChanges=!1})})},"checkChanges":function(e){var i=this;t.each(e,function(e,t){if(t.fieldView){if(("otcs_node_picker"===t.fieldView.alpacaField.type||"otcs_user"===t.fieldView.alpacaField.type)&&t.fieldView.getValue())return i.dataChange=!0,!1;if("date"===t.fieldView.alpacaField.type&&t.fieldView.getOldValue()!==t.fieldView.getEditValue())return i.dataChange=!0,!1;if(t.fieldView.getOldValue()&&t.fieldView.getOldValue().id!==t.fieldView.getEditValue().id&&""!==t.fieldView.getOldValue().id)return i.dataChange=!0,!1}else t.children&&i.checkChanges(t.children)})},"saveEventActionPlan":function(){var e=this;this.actionPlanContentView.saveActionPlanContent().then(function(){e.tabbedViewContainsChanges=!1},function(e){})},"cancelEventActionPlan":function(){this.trigger("actionplan:click:back")},"updateSaveButtonDisableStatus":function(e){this.$el.find(".xecmpf-eac-save-actionplan").prop("disabled",e)},"onDestroy":function(){s.isEnabled()&&s.disable()}});return e.extend(c.prototype,o),c}),csui.define("hbs!xecmpf/widgets/eac/impl/actionplan.details/impl/actionplan.details",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="xecmpf-actionplan-header-view"></div>\r\n<div class="xecmpf-actionplan-master-view">\r\n  <div class="xecmpf-actionplan-list-view"></div>\r\n  <div class="xecmpf-actionpan-details-view"></div>\r\n</div>'}});return i.registerPartial("xecmpf_widgets_eac_impl_actionplan.details_impl_actionplan.details",n),n}),csui.define("css!xecmpf/widgets/eac/impl/actionplan.details/impl/actionplan.details",[],function(){}),csui.define("xecmpf/widgets/eac/impl/actionplan.details/actionplan.details.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/models/node/node.model","csui/utils/contexts/factories/node","csui/behaviors/default.action/default.action.behavior","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/dialogs/modal.alert/modal.alert","csui/utils/url","csui/models/nodechildren","csui/utils/contexts/factories/connector","csui/controls/globalmessage/globalmessage","csui/controls/progressblocker/blocker","xecmpf/widgets/eac/impl/actionplan.list/actionplan.list.view","xecmpf/widgets/eac/impl/actionplan.header/actionplan.header.view","xecmpf/widgets/eac/impl/actionplan.tab.content/actionplan.tabbed.view","hbs!xecmpf/widgets/eac/impl/actionplan.details/impl/actionplan.details","i18n!xecmpf/widgets/eac/impl/nls/lang","css!xecmpf/widgets/eac/impl/actionplan.details/impl/actionplan.details"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f,h,b,g,w,v){"use strict";var y=o.LayoutView.extend({"className":"xecmpf-actionplan-details","template":w,"regions":{"headerRegion":".xecmpf-actionplan-header-view","actionPlanListRegion":".xecmpf-actionplan-list-view","actionPlanDetailsRegion":".xecmpf-actionpan-details-view"},"behaviors":{"DefaultAction":{"behaviorClass":l}},"initialize":function(e){this.options.connector=this.options.context.getModel(p),this.options.model=this.options.context.model?this.options.context.model:e.context.getModel(a);var t=this;t.children=new u(void 0,{"node":t.options.model,"commands":"rename,delete,addToWarehouse"}),t.children.fetch().done(function(){t.setHeaderView(),t.setActionPlanListView(),t.onShow()})},"constructor":function(e){e||(e={}),o.LayoutView.prototype.constructor.call(this,e),this.propagateEventsToRegions()},"onShow":function(){if(this.children.fetched){var e=this;this.listenTo(this.actionPlanListView,"actionplan:click:item",function(t){this.isContentViewCanbeUpdated(t.model).then(function(){e.updateContentView(t)})}),this.listenTo(this.actionPlanListView,"click:add:actionplan",function(t){this.isContentViewCanbeUpdated(t.model).then(function(){e.updateContentView(t,!0)})}),this.listenTo(this.actionPlanListView,"actionplan:add:item",function(t){this.isContentViewCanbeUpdated().then(function(){e.actionplanTabbedView&&e.actionplanTabbedView.destroy(),e.actionPlanListView.addNewActionPlan()})}),this.listenTo(this.actionPlanListView,"actionplan:click:delete",function(e){this.deleteActionPlan(e)}),this.listenTo(this.actionPlanListView,"actionplan:click:rename",function(e){}),this.listenTo(this.actionPlanListView,"actionplan:click:renamecancel",function(e){this.deleteActionPlan(e)}),this.listenTo(this.actionPlanListView,"keydown:action:rename",function(t){e.updateContentView(this.actionPlanListView)}),this.actionPlanListRegion.on("show",i.bind(this.onActionPlanListShown,this)),this.headerRegion.show(this.headerView),this.actionPlanListRegion.show(this.actionPlanListView)}},"isContentViewCanbeUpdated":function(e){var n=t.Deferred(),o=!e||""!==e.get("plan_id");return this.actionplanTabbedView&&!this.actionplanTabbedView.isDestroyed?(this.currentModel=this.actionplanTabbedView.options.model,this.hasNewActionPlanModel=""===this.currentModel.get("plan_id"),null===e?n.reject():(this.actionplanTabbedView.tabbedViewContainsChanges||this.hasNewActionPlanModel)&&o?c.confirmQuestion(v.warningMsgOnActionPlanNavigation,v.actionPlanNavigationDialogTitle,{"buttons":c.OkCancel}).done(i.bind(function(){if(this.currentModel.attributes.plan_id&&!this.currentModel.attributes.rule_id){var e=this,t=this.options.connector.getConnectionUrl().getApiBase("v2")+"/nodes/"+this.currentModel.attributes.plan_id;this.options.connector.makeAjaxCall({"type":"Delete","url":t,"processData":!1,"contentType":!1}).then(function(t){e.actionPlanListView.actionPlanListItemCollectionView.collection.remove(e.currentModel),n.resolve()},function(e){n.reject()})}else""===this.currentModel.attributes.plan_id&&this.actionPlanListView.actionPlanListItemCollectionView.collection.remove(this.currentModel),n.resolve()},this)).fail(function(){n.reject()}):n.resolve()):n.resolve(),n.promise()},"updateContentView":function(e,t){if(!this.actionPlanListView.$el.find(".binf-active").hasClass("xecmpf-new-eac-action-plan-list-item")){this.actionPlanListView.$el.find(".binf-active").removeClass("binf-active");this.actionPlanListView.actionPlanListItemCollectionView.children.findByModel(e.model).$el.addClass("binf-active")}this.setActionPlanTabbedView(e.model,t),e.model.attributes.plan_id?(e.model.set("create",!1),e.model.set("hideCheckBox",!1),e.model.trigger("show:inline:action:bar")):e.model.set("create",!0)},"setHeaderView":function(){this.headerView=new b(this.options),this.listenTo(this.headerView,"actionplan:click:back",function(){this.isContentViewCanbeUpdated().then(function(){history.back()}.bind(this))})},"setActionPlanListView":function(){this.options.connector=this.options.context.getObject(p);var e=this,t=e.children.models.filter(function(e){return 144!==e.attributes.type});e.children.models=t,e.children.totalCount=t.length,e.children.length=t.length,e.options.model.collection=e.children,e.actionPlanListView=new h({"showAddActionPlan":!0,"context":e.options.context,"model":e.options.model,"originatingView":e,"connector":e.options.connector,"isAddActionPlan":e.options.isAddActionPlan})},"setActionPlanTabbedView":function(e,t){var i=this,n=this.actionPlanListView.actionPlanListItemCollectionView.collection.findWhere({"isAddActionPlan":!0});if(t&&!e.get("id")&&e.set("isAddActionPlan",t),this.actionplanTabbedView&&!n&&this.actionplanTabbedView.destroy(),e.get("isAddActionPlan")||e.get("planCreated")||n)e.set("event_def_id",this.options.model.attributes.id),i.actionplanTabbedView=new g({"context":i.options.context,"model":e,"eventname":i.options.eventname,"namespace":i.options.namespace,"originatingView":i.options.originatingView,"isAddActionPlan":e.get("isAddActionPlan")}),i.actionPlanDetailsRegion.show(i.actionplanTabbedView),i.listenTo(i.actionplanTabbedView,"actionplan:click:back",function(){i.isContentViewCanbeUpdated().then(function(){history.back()}.bind(this))}),i.listenTo(i.actionplanTabbedView,"actionplan:click:link",function(e,t){i.isContentViewCanbeUpdated().then(function(){e.off("click."+t.cid),e.trigger("click")})}),i.listenTo(i.actionplanTabbedView,"refresh:current:action:plan:item",function(e){i.actionPlanListView.refreshCurrentActionPlanItem(e).then(function(e){i.updateContentView(e)})});else{var o={"type":"GET","url":this.options.connector.getConnectionUrl().getApiBase("v2")+"/eventactioncenter/actionplandetails?action_plan_id="+e.get("id")};this.options.connector.makeAjaxCall(o).done(function(t,n,o){t&&t.results.data&&(e.set("data",t.results.data),e.set("event_def_id",e.get("parent_id")),e.set("eventType",t.results.data.eventType),i.actionplanTabbedView=new g({"context":i.options.context,"model":e,"eventname":i.options.eventname,"apData":t.results.data,"namespace":i.options.namespace,"originatingView":i.options.originatingView,"isAddActionPlan":e.get("isAddActionPlan")}),i.actionPlanDetailsRegion.show(i.actionplanTabbedView),i.listenTo(i.actionplanTabbedView,"actionplan:click:back",function(){i.isContentViewCanbeUpdated().then(function(){history.back()}.bind(this))}),i.listenTo(i.actionplanTabbedView,"actionplan:click:link",function(e,t){i.isContentViewCanbeUpdated().then(function(){e.off("click."+t.cid),e.trigger("click")})}),i.listenTo(i.actionplanTabbedView,"refresh:current:action:plan:item",function(e){i.actionPlanListView.refreshCurrentActionPlanItem(e).then(function(e){i.updateContentView(e)})}))}).fail(function(e,t,i){})}},"onActionPlanListShown":function(e){var t=e.actionPlanListRegion.currentView.children.findByIndex(0),i=e.actionPlanListItemCollectionView.collection.findWhere({"plan_id":""});t&&!i&&(this.options.model.get("isAddActionPlan")?t.trigger("click:actionplan"):t.trigger("click:actionplan:item")),this.actionPlanListView.$el.find(".xecmpf-eac-action-plan-list-item-input").trigger("focus")},"deleteActionPlan":function(e){this.updateActionPlanSelection(e)},"updateActionPlanSelection":function(e){var t=this.actionPlanListView.actionPlanListItemCollectionView,i=t.children,n=e._index,o=i.findByIndex(n+1),s=i.findByIndex(n-1),a=o||(s||void 0),l=e.$el.hasClass("binf-active");a&&e._hasFocus&&t._changeTabIndexesAndSetFocus(e,a,!1),this.actionPlanListView.actionPlanListItemCollectionView.collection.remove(e.model),!0===l&&(this.actionplanTabbedView.destroy(),a&&a.trigger("click:actionplan:item"))}});return i.extend(y.prototype,r),y}),csui.define("hbs!xecmpf/controls/table/cells/impl/actionplan",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <a href="" class = "action-plan-edit"> '+e.escapeExpression((s=null!=(s=a(i,"count")||(null!=t?a(t,"count"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"count","hash":{},"loc":{"start":{"line":3,"column":43},"end":{"line":3,"column":52}}}):s))+" "+e.escapeExpression((s=null!=(s=a(i,"actionPlan")||(null!=t?a(t,"actionPlan"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"actionPlan","hash":{},"loc":{"start":{"line":3,"column":53},"end":{"line":3,"column":67}}}):s))+"</a>\r\n"},"3":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <button class="action-plan-add">'+e.escapeExpression((s=null!=(s=a(i,"addActionPlan")||(null!=t?a(t,"addActionPlan"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"addActionPlan","hash":{},"loc":{"start":{"line":5,"column":36},"end":{"line":5,"column":53}}}):s))+"</button>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"count"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":2,"column":2},"end":{"line":6,"column":9}}}))?s:"")+"</div>"}});return i.registerPartial("xecmpf_controls_table_cells_impl_actionplan",n),n}),csui.define("css!xecmpf/controls/table/cells/impl/actionplan",[],function(){}),csui.define("xecmpf/controls/table/cells/eac.actionplan.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","csui/utils/contexts/factories/node","csui/controls/dialog/dialog.view","xecmpf/models/eac/eventactionplans.model","xecmpf/widgets/eac/impl/actionplan.details/actionplan.details.view","hbs!xecmpf/controls/table/cells/impl/actionplan","i18n!xecmpf/widgets/eac/impl/nls/lang","css!xecmpf/controls/table/cells/impl/actionplan"],function(e,t,i,n,o,s,a,l,r,c,d,u){var p=o.extend({"template":d,"className":"csui-nowrap","triggers":{"click .action-plan-add":"click:ActionPlanAdd"},"events":{"click .action-plan-edit":"editActionPlan"},"getValueData":function(){return{"count":this.model.get("action_plans").length,"actionPlan":u.actionPlan,"addActionPlan":u.addActionPlan}},"onClickActionPlanAdd":function(){this.showActionPlanDetailsView(!0)},"editActionPlan":function(e){e.preventDefault(),e.stopPropagation(),this.showActionPlanDetailsView()},"showActionPlanDetailsView":function(i){var o,s=new c({"context":this.options.context,"model":this.options.model,"isAddActionPlan":i}),a=this.options.tableView,l=a.options.originatingView,r=a.options.originatingView.$el;r.parent().append("<div class='xecmpf-actionplan-details-wrapper'></div>"),o=e(r.parent().find(".xecmpf-actionplan-details-wrapper")[0]),o.hide(),s.render(),n.triggerMethodOn(s,"before:show"),o.append(s.el),l.actionPlanDetailsView=s,r.hide("blind",{"direction":"left","complete":function(){o.show("blind",{"direction":"right","complete":function(){n.triggerMethodOn(s,"show")}},100)}},100);var d=function(){var e=this;o.hide("blind",{"direction":"right","complete":function(){l.$el.show("blind",{"direction":"left","complete":function(){l.actionPlanDetailsView&&l.actionPlanDetailsView.destroy(),l.blockActions(),e.options.tableView.collection.fetch({"reload":!0}).fail(function(){}).always(function(){l.triggerMethod("dom:refresh"),l.unblockActions()})}},100),s.destroy(),o.remove()}},100)};this.listenTo(s,"actionplan:close",t.bind(d,this))}},{"hasFixedWidth":!0,"columnClassName":"xecmpf-table-cell-action-plan"});return s.registerByColumnKey("action_plan",p),p}),csui.define("xecmpf/controls/table/cells/location.cell.view",["csui/controls/table/cells/cell.registry","csui/controls/table/cells/parent/parent.view"],function(e,t){"use strict";var i=t.extend({"constructor":function e(t){if(0!==t.model.get("location_id")){var i=t.model.get("location_id_expand");t.model.set("parent_id_expand",i,{"silent":!0})}e.__super__.constructor.apply(this,arguments)},"onRender":function(){0===this.model.get("location_id")&&this.parentIconView.remove()}});return e.registerByColumnKey("location_name",i),i}),csui.define("hbs!xecmpf/controls/table/cells/impl/statusicon",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="fileupload-status-column">\r\n    <span class="csui-icon fileuplaod-cell-statusicon '+e.escapeExpression((s=null!=(s=a(i,"statusIcon")||(null!=t?a(t,"statusIcon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"statusIcon","hash":{},"loc":{"start":{"line":3,"column":54},"end":{"line":3,"column":68}}}):s))+'"></span>\r\n    <span class="csui-icon fileuplaod-cell-statustext '+e.escapeExpression((s=null!=(s=a(i,"statusLabel")||(null!=t?a(t,"statusLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"statusLabel","hash":{},"loc":{"start":{"line":4,"column":54},"end":{"line":4,"column":69}}}):s))+'"> '+e.escapeExpression((s=null!=(s=a(i,"statusLabel")||(null!=t?a(t,"statusLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"statusLabel","hash":{},"loc":{"start":{"line":4,"column":72},"end":{"line":4,"column":87}}}):s))+"</span>\r\n</div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"statusIcon"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":6,"column":7}}}))?s:""}});return i.registerPartial("xecmpf_controls_table_cells_impl_statusicon",n),n}),csui.define("css!xecmpf/controls/table/cells/impl/statusicon",[],function(){}),csui.define("xecmpf/controls/table/cells/statusicon.view",["csui/lib/underscore","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","hbs!xecmpf/controls/table/cells/impl/statusicon","css!xecmpf/controls/table/cells/impl/statusicon"],function(e,t,i,n){"use strict";var o=t.extend({"template":n,"getValueData":function(){var e=this.model.get("icon");return{"statusLabel":this.model.get("label"),"statusIcon":e}}});return i.registerByColumnKey("label",o),o}),csui.define("xecmpf/controls/bosearch/searchform/impl/footer.view",["csui/lib/marionette","csui/behaviors/keyboard.navigation/tabable.region.behavior"],function(e,t){var i=e.ItemView.extend({"tagName":"button","className":"binf-btn","template":!1,"triggers":{"click":"click"},"behaviors":{"TabableRegion":{"behaviorClass":t}},"constructor":function(t){e.View.prototype.constructor.apply(this,arguments)},"isTabable":function(){return this.$el.is(":not(:disabled)")&&this.$el.is(":not(:hidden)")},"currentlyFocusedElement":function(){return-1===this.$el.prop("tabindex")&&this.$el.prop("tabindex",0),this.$el},"onRender":function(){var e=this.$el,t=this.model.attributes;e.text(t.label),e.addClass(t.default?"binf-btn-primary":"binf-btn-default"),t.toolTip&&e.attr("title",t.toolTip),t.separate&&e.addClass("cs-separate"),this.updateButton(t)},"updateButton":function(e){var t=this.$el;e||(e={}),void 0!==e.hidden&&(e.hidden?t.addClass("binf-hidden"):t.removeClass("binf-hidden")),void 0!==e.disabled&&t.prop("disabled",e.disabled)}});return e.CollectionView.extend({"childView":i,"constructor":function(t){e.CollectionView.prototype.constructor.apply(this,arguments)},"onDomRefresh":function(){this.children.each(function(e){e.trigger("dom:refresh")})},"getButtons":function(){return this.children.toArray()},"updateButton":function(e,t){var n=this.collection.get(e);n?this.children.findByModel(n).updateButton(t):i.updateButton(this.$('[data-cs-id="'+e+'"]'),t)}})}),csui.define("xecmpf/controls/bosearch/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/controls/bosearch/impl/nls/root/lang",{"boSearchFormTitle":"Search {0}","boSearchFormButtonSearch":"Search","boSearchFormButtonCancel":"Cancel","boResultListButtonAttach":"Attach","noBusinessObjectsFound":"No business objects found.","resultListBannerMessage":"Search for {0}","resultListRefineMessage":"More results are available but result limit has been reached. Refine your search.","zeroSearchFields":"No search fields configured in the business application","labelBusinessObjectId":"ID","ERR_COLUMNS_CHANGED":"Configuration has changed during your search. Close the search and start a new one.","errorGettingSearchForm":"Error getting form for business object search.","errorSearchingBusinessObjects":"Error searching for business objects."}),csui.define("hbs!xecmpf/controls/bosearch/searchform/impl/bosearchform",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="conws-bosearchform-body csui-content-without-footer">\r\n  <div class="conws-bosearchheader">\r\n    <div class="conws-bosearchheader-title" title="'+e.escapeExpression((s=null!=(s=a(i,"search_form_title")||(null!=t?a(t,"search_form_title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"search_form_title","hash":{},"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":72}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"search_form_title")||(null!=t?a(t,"search_form_title"):t))?s:e.hooks.helperMissing,
"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"search_form_title","hash":{},"loc":{"start":{"line":3,"column":74},"end":{"line":3,"column":95}}}):s))+'</div>\r\n    <div class="conws-spacer"></div>\r\n  </div>\r\n  <div class="conws-bosearchfields csui-normal-scrolling  csui-no-scroll-x">\r\n  </div>\r\n  <div style="display:none;" class="conws-bosearchfields-zero" title="'+e.escapeExpression((s=null!=(s=a(i,"zero_fields_title")||(null!=t?a(t,"zero_fields_title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"zero_fields_title","hash":{},"loc":{"start":{"line":8,"column":70},"end":{"line":8,"column":91}}}):s))+'">\r\n      "'+e.escapeExpression((s=null!=(s=a(i,"zero_fields_title")||(null!=t?a(t,"zero_fields_title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"zero_fields_title","hash":{},"loc":{"start":{"line":9,"column":7},"end":{"line":9,"column":28}}}):s))+'"\r\n  </div>\r\n</div>\r\n<div class="conws-bosearchform-footer binf-modal-footer">\r\n</div>\r\n<div class="conws-right-shadow"></div>\r\n'}});return i.registerPartial("xecmpf_controls_bosearch_searchform_impl_bosearchform",n),n}),csui.define("xecmpf/controls/bosearch/searchform/bosearchform.view",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/utils/log","csui/controls/form/form.view","csui/utils/contexts/factories/connector","csui/dialogs/modal.alert/modal.alert","xecmpf/controls/bosearch/searchform/impl/footer.view","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/tab.panel/behaviors/tab.contents.keyboard.behavior","xecmpf/controls/bosearch/searchform/bosearchform.model","i18n!xecmpf/controls/bosearch/impl/nls/lang","hbs!xecmpf/controls/bosearch/searchform/impl/bosearchform"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f,h,b){var g=l.extend({"events":{"keydown":"onKeyDown"},"behaviors":{"TabableRegionBehavior":{"behaviorClass":p},"TabContentKeyboardBehavior":{"behaviorClass":m}},"defaults":{"tabContentAccSelectors":"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[cstabindex], *[contenteditable]"},"onKeyDown":function(e){if(9===e.keyCode||32===e.keyCode||13===e.keyCode){var t=this.onKeyInView(e);t&&(e.preventDefault(),e.stopPropagation(),t.prop("tabindex","0"),t.trigger("focus"))}},"onDomRefresh":function(){this.trigger("refresh:tabable:elements")},"constructor":function(e){i.defaults(e,this.defaults),e.searchTabContentForTabableElements=!0,l.prototype.constructor.apply(this,arguments)}}),w=o.LayoutView.extend({"events":{"keydown":"onKeyDown"},"className":"conws-bosearchform","template":b,"triggers":{"click .binf-btn.search":"bosearchform:search","click .binf-btn.cancel":"bosearchform:cancel"},"regions":{"searchFields":".conws-bosearchfields","footer":".binf-modal-footer"},"ui":{"footer":".binf-modal-footer"},"constructor":function(e){i.defaults(e,this.defaults),o.LayoutView.prototype.constructor.call(this,e),this.propagateEventsToRegions(),this.listenTo(this,"bosearchform:search",this._triggerSearch),this.listenTo(this,"bosearchform:cancel",this._triggerCancel),this.listenTo(this.model,"change:bo_type_name",this._updateTitle),this.searchFormModel=new f({"id":this.model.get("bo_type_id"),"name":this.model.get("bo_type_name")},{"connector":this.options.context.getObject(r)}),this.listenTo(this.searchFormModel,"change:name",function(){this.model.set("bo_type_name",this.searchFormModel.get("name"))}),this.listenTo(this.searchFormModel,"change",function(){this.model.set("bus_att_metadata_mapping",this.searchFormModel.get("bus_att_metadata_mapping"))}),this.listenTo(this.searchFormModel,"error",function(e,t,i){var n=t&&new s.Error(t).message||h.errorGettingSearchForm;a.error("Fetching the search forms failed: {0}",n)&&console.error(a.last),c.showError(n)}),this.listenTo(this.searchFormModel,"sync",function(){var e=this.searchFormModel.get("data");t.isEmptyObject(e)?(this._updateFormFieldsZero(!0),this.focusOnSearchButton()):(this._updateFormFieldsZero(!1),this.listenToOnce(this.searchForm,"render",function(){this.focusOnFirstFormField()}))})},"templateHelpers":function(){return{"search_form_title":this._getTitle(),"search_button_text":h.boSearchFormButtonSearch,"cancel_button_text":h.boSearchFormButtonCancel,"zero_fields_title":h.zeroSearchFields}},"onKeyDown":function(e){13===e.keyCode&&e.ctrlKey&&this.searchForm.$el.has(e.originalEvent.srcElement).length>0&&this.focusOnSearchButton()},"_getTitle":function(){return i.str.sformat(h.boSearchFormTitle,this.model.get("bo_type_name"))},"_updateTitle":function(){var e=this.$el.find(".conws-bosearchheader-title"),t=this._getTitle();e.text(t),e.attr({"title":t})},"_updateFormFieldsZero":function(e){var t=this.$el.find(".conws-bosearchfields"),i=this.$el.find(".conws-bosearchfields-zero");e?(t.css({"display":"none"}),i.css({"display":""})):(t.css({"display":""}),i.css({"display":"none"}))},"focusOnSearchButton":function(){var e=this.footerView.getButtons();e&&e[0]&&e[0].$el.trigger("focus")},"focusOnFirstFormField":function(){var e=this.searchFields.$el.find(".alpaca-container-item-first input");e&&e.trigger("focus")},"onRender":function(){this.searchForm=new g({"model":this.searchFormModel,"mode":"create","layoutMode":"singleCol"}),this.searchForm.model.fetch();var e=[{"default":!0,"label":h.boSearchFormButtonSearch,"click":i.bind(this._triggerSearch,this)},{"label":h.boSearchFormButtonCancel,"click":i.bind(this._triggerCancel,this)}];this.footerView=new d({"collection":new n.Collection(e)}),this.listenTo(this.footerView,"childview:click",this.onClickButton),this.searchFields.show(this.searchForm),this.footer.show(this.footerView);var t=this.footerView.getButtons();t&&t[0]&&t[0].$el.addClass("search"),t&&t[1]&&t[1].$el.addClass("cancel")},"onClickButton":function(e){var t=e.model.attributes;t.click&&t.click()},"_triggerSearch":function(){a.debug("trigger bosearch:search")&&console.log(a.last);var e=this.searchForm.getValues(),t={"data":this.searchFormModel.get("data"),"options":this.searchFormModel.get("options"),"schema":this.searchFormModel.get("schema")};this.model.trigger("bosearch:search",{"searchParams":e,"searchForms":t})},"_triggerCancel":function(){a.debug("trigger bosearch:cancel")&&console.log(a.last),this.model.trigger("bosearch:cancel")}});return i.extend(w.prototype,u),w}),csui.define("xecmpf/controls/bosearch/resultlist/boresult.collection",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/base","csui/utils/log","csui/models/mixins/resource/resource.mixin","csui/models/browsable/browsable.mixin","i18n!xecmpf/controls/bosearch/impl/nls/lang"],function(e,t,i,n,o,s,a,l){function r(e,i,n){return t.object(t.map(t.pairs(e),function(e){return t.iteratee(i,n)(e)}))}function c(e,t,i){var n=Math.max(e||0,t&&t.length||0,i||0,v);return n=Math.min(n,60)}function d(e,t,i){var n=e>v?.53:.6,s=(b-w)/(g*n),a=e/s;return o.debug("csui_average {0}",s)&&console.log(o.last),Math.min(a,.8)}var u=i.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0},"constructor":function(e,t){i.Model.prototype.constructor.apply(this,arguments)}}),p=i.Collection.extend({"model":u,"comparator":"sequence","constructor":function(e,t){i.Collection.prototype.constructor.apply(this,arguments)}}),m=i.Model.extend({"idAttribute":"column_key","constructor":function(e,t){i.Model.prototype.constructor.apply(this,arguments)}}),f=i.Collection.extend({"model":m,"constructor":function(e,t){i.Collection.prototype.constructor.apply(this,arguments)}}),h=i.Model.extend({"constructor":function(e,t){i.Model.prototype.constructor.apply(this,arguments)},"get":function(){return i.Model.prototype.get.apply(this,arguments)}}),b=120,g=14,w=32,v=4,y=i.Collection.extend({"model":h,"constructor":function(e,t){i.Collection.prototype.constructor.apply(this,arguments),this.makeResource(t),this.makeBrowsable(t),this.boSearchModel=t.boSearchModel,this.searchParams=t.searchParams,this.labelToKey={},this.nameToKey={},this.columns=new f,this.tableColumns=new p,this.totalCount=0,this.skipCount=0,this.topCount=t.pageSize||100,this.maxCount=t.maxRowCount,this.options=t}},{"ERR_COLUMNS_CHANGED":"ERR_COLUMNS_CHANGED"});s.mixin(y.prototype),a.mixin(y.prototype);var x=t.defaults({},y.prototype);return t.extend(y.prototype,{"fetch":function(t){var i=t&&t.reset;return this.searchParams&&(i||void 0===this.maxCount||this.length<this.maxCount)?(i&&(t.url=this.url(t)),x.fetch.apply(this,arguments)):e.Deferred().resolve().promise()},"url":function(i){var o=i&&i.reset?0:this.skipCount||0,s=t.omit(t.defaults({"bo_type_id":this.boSearchModel.get("bo_type_id"),"limit":this.topCount,"page":this.topCount?Math.floor(o/this.topCount)+1:void 0},r(this.searchParams,function(e){return["where_"+e[0],e[1]]},this)),function(e){return null===e||""===e}),a="businessobjects?"+e.param(s),l=this.connector.getConnectionUrl().getApiBase("v2");return n.Url.combine(l,a)},"parse":function(i,n){delete this.errorMessage;var s=[];if(this.searchParams&&i&&i.results){var a,l=i.results.column_descriptions,u=e.isEmptyObject(this.searchParams)||e.isEmptyObject(l)?"significant":function(e,t){var i;if(t){for(var n=0,o=0;o<t.length;o++){n+=void 0!==e[t[o].fieldName]?1:0}0===n&&(i="incompatible")}return i}(this.searchParams,l),p="incompatible"!==u;if(p&&!n.reset&&this.columnDescriptions&&(a=function(e,t){var i;if(t)for(var n=0;n<t.length;n++){var o=t[n],s=e[n];if(!s||s.fieldName!==o.fieldName)return"incompatible";s.fieldLabel===o.fieldLabel&&s.position===o.position&&s.length===o.length||(i="significant")}return i}(this.columnDescriptions,l),p="incompatible"!==a),p){l&&l.length||(l=[{"fieldLabel":"Business Object ID","fieldName":"businessObjectId","keyField":"","length":15,"position":1}]);var m=t.extend({},this.searchParams),f=t.extend({},this.searchForms),h={};if(n.reset||!this.columnDescriptions||"significant"===u||"significant"===a){var b,g,w=[],v={},x={},k=0,_=0;t.each(l,function(e,i){var n="conws_col_"+i,o=0;if(f&&f.options&&f.options.fields&&f.options.fields[e.fieldName]&&f.options.fields[e.fieldName].optionLabels&&f.schema&&f.schema.properties&&f.schema.properties[e.fieldName]&&f.schema.properties[e.fieldName].enum&&f.options.fields[e.fieldName].optionLabels.length===f.schema.properties[e.fieldName].enum.length){var s=f.options.fields[e.fieldName].optionLabels,a=f.schema.properties[e.fieldName].enum,l=h[n]={};t.each(s,function(e,t){l[a[t]]=e,e.length>o&&(o=e.length)},this)}var r=t.extend({"align":"left","name":e.fieldLabel,"persona":"","sort":!0,"type":-1,"width_weight":0},e,{"correctedLength":c(e.length,e.fieldLabel,o),"column_key":n});r.correctedLength&&(k+=r.correctedLength,_+=1,(void 0===b||r.correctedLength<b)&&(b=r.correctedLength),(void 0===g||r.correctedLength>g)&&(g=r.correctedLength)),w.push(r),v[r.fieldLabel]=r.column_key,x[r.fieldName]=r.column_key},this);var C,A,P=t.map(w,function(e){var t=e.column_key,i=e.position+1;return void 0!==i&&(void 0===A||i<A)&&(A=i,C=t),C||(C=t),{"key":t,"sequence":i}});if(_>1&&b&&b>0&&g&&g>b){var T=k/_,V=d(b,T,g),D=T*V,I=b<D?(V*T-b)/(1-V):0,M=0,E=0,F=0;o.debug("minFactor {0}",V)&&console.log(o.last),T+=I,t.each(w,function(e,t){e.correctedLength=e.correctedLength?e.correctedLength+I:T;var i=e.correctedLength/T;o.debug("widthFactor {0}",i)&&console.log(o.last),P[t].widthFactor=i,M+=i,i>=E&&(E=i,F=t)},this),o.debug("widthFactorSum {0}",M)&&console.log(o.last);var S=_-M;o.debug("widthFactorRest {0}",S)&&console.log(o.last),0!==S&&(E+=S,M+=S,P[F].widthFactor=E,o.debug("widthFactorSum {0}",M)&&console.log(o.last))}this.orderByDefaultKey=C,this.mappedValues=h,this.labelToKey=v,this.nameToKey=x,this.columns.reset(w,{"silent":!0}),this.tableColumns.reset(P),this.columnDescriptions=i.results.column_descriptions}if(this.searchedParams=m,this.searchedForms=f,i.results.result_rows)for(var B=void 0===this.maxCount?this.topCount:Math.min(this.topCount,this.maxCount-this.length),O=0;O<B&&!(O>=i.results.result_rows.length);O++){var L=i.results.result_rows[O],R=t.extend(r(L,function(e){var t=this.labelToKey[e[0]]||this.nameToKey[e[0]]||e[0],i=this.mappedValues[t];return[t,i&&i[e[1]]||e[1]]},this),{"id":L.rowId});s.push(R)}this.totalCount=i&&i.paging&&i.paging.total_count,n.reset&&(this.skipCount=0),this.maxRowsExceeded=i&&i.results&&i.results.max_rows_exceeded}else this.errorMessage=y.ERR_COLUMNS_CHANGED}return s}}),y}),csui.define("xecmpf/controls/bosearch/resultlist/botable.view",["require","csui/lib/jquery","csui/lib/underscore","csui/utils/log","csui/lib/backbone","csui/lib/marionette","csui/controls/table/table.view","csui/lib/jquery.dataTables.tableTools/js/dataTables.tableTools","xecmpf/controls/bosearch/resultlist/boresult.collection","i18n!xecmpf/controls/bosearch/impl/nls/lang"],function(e,t,i,n,o,s,a,l,r,c){function d(e){var t=this.options||{},n=t[e];return i.isFunction(n)?t[e].call(this.view):n}var u=s.Behavior.extend({"defaults":{"content":null,"contentParent":null,"fetchMoreItemsThreshold":95},"constructor":function(e,t){s.Behavior.prototype.constructor.apply(this,arguments),t.infiniteScrollingBehavior=this,this.listenTo(t,"render",this._bindScrollingEvents),this.listenTo(t,"before:destroy",this._unbindScrollingEvents)},"_scrollToPosition":function(e,n){var o=d.call(this,"contentParent"),s=this._contentParent.height(),a=d.call(this,"content"),l=a?this.view.$(a):o?this._contentParent.children().first():this.view.$el,r=i.reduce(l,function(e,i){return e+t(i).height()},0);if(r<s)e=0;else if("middle"===n?e-=s/2:"bottom"===n&&(e-=s),(e=Math.floor(e))<0)e=0;else{var c=d.call(this,"fetchMoreItemsThreshold"),u=Math.floor(c/100*(r-s));e>=u&&(e=u-1)}this._contentParent.scrollTop(e)},"scrollTop":function(e){this._scrollToPosition(e,"top")},"scrollMiddle":function(e){this._scrollToPosition(e,"middle")},"scrollBottom":function(e){this._scrollToPosition(e,"bottom")},"_bindScrollingEvents":function(){this._unbindScrollingEvents();var e=d.call(this,"contentParent");this._contentParent=e?this.view.$(e):this.view.$el,this._contentParent.on("scroll."+this.view.cid,i.bind(this._checkScrollPosition,this))},"_checkScrollPosition":function(){var e=d.call(this,"contentParent"),n=d.call(this,"content"),o=n?this.view.$(n):e?this._contentParent.children().first():this.view.$el,s=d.call(this,"fetchMoreItemsThreshold"),a=i.reduce(o,function(e,i){return e+t(i).height()},0),l=a-this._contentParent.height(),r=this._contentParent.scrollTop(),c=100*r/l;this.view.lastScrollPosition=r,c>=s&&this._checkScrollPositionFetch()},"_checkScrollPositionFetch":function(){var e=this.view.collection;if(e.length<e.totalCount&&!e.fetching&&e.skipCount<e.length){n.debug("fetching from {0}",e.length)&&console.log(n.last);var t=e.skipCount;e.setSkip(e.length,!1);var o=d.call(this,"contentParent");this.$(".ps-scrollbar-y-rail").trigger("mouseup"),e.fetch({"reset":!1,"remove":!1,"merge":!1,"silent":!0,"success":i.bind(function(){e.errorMessage&&e.errorMessage===r.ERR_COLUMNS_CHANGED?(e.setSkip(t,!1),this.view.lastScrollPosition>0&&this.view.$(o).scrollTop(this.view.lastScrollPosition-1)):this.view.render()},this)})}},"_unbindScrollingEvents":function(){this._contentParent&&this._contentParent.off("scroll."+this.view.cid)}});return a.extend({"events":{"keydown":"onKeyDown"},"behaviors":i.defaults({"InfiniteScrolling":{"behaviorClass":u,"contentParent":"tbody","content":"tbody>tr:visible","fetchMoreItemsThreshold":100}},a.prototype.behaviors),"constructor":function(){a.prototype.constructor.apply(this,arguments),this.listenTo(this,"clicked:cell",this._clickedCell),this.options.disableItemsWithWorkspace&&this.listenTo(this,"tableRowRendered",this._disableRow),this.listenTo(this.collection,"request",function(e,t,i){i.reset&&delete this.lastScrollPosition})},"_disableRow":function(e){var i=e.target;if(e.node.get("has_workspace")){var n=t(i);n.addClass("conws-boresulttable-disabled-row"),n.off("pointerenter"),n.off("pointerleave"),n.find("td").not(".csui-table-cell-_toggledetails").off("click")}},"onKeyDown":function(e){if(this.options&&"single"===this.options.selectRows&&(32===e.keyCode||13===e.keyCode)){e.target.classList.contains("csui-table-cell-_toggledetails")||(e.preventDefault(),e.stopPropagation(),e.target.click())}},"_clickedCell":function(e){if(!this.ignoreSelectEvents){var t={"model":e.model,"target":this.table.row(e.rowIndex).node()};this.lastSelectedRow=t,this.trigger("row:selected",t)}},"setSelection":function(e,n){function o(){return this.tableTools||(this.tableTools=l.fnGetInstance(this.table.table().node()))}function s(e){this.table&&e&&i.each(e,function(e){var t=this.collection.get(e),i=this.collection.indexOf(t),s=o.call(this),a=this.table.row(i).node();n?s.fnSelect(a):s.fnDeselect(a)},this)}if(this.ignoreSelectEvents=!0,n=n||void 0===n,s.call(this,e),delete this.lastSelectedRow,this.table&&e&&e.length>0&&n){var a=e[0],r=this.collection.get(a),c=this.collection.indexOf(r),d=this.table.row(c).node();this.lastSelectedRow={"model":r,"target":t(d)}}if(this.lastSelectedRow&&this.infiniteScrollingBehavior){var u=this.lastSelectedRow.target.position().top+this.lastSelectedRow.target.height()/2;this.infiniteScrollingBehavior.scrollMiddle(u)}delete this.ignoreSelectEvents},"clearSelection":function(){this.ignoreSelectEvents=!0,delete this.lastSelectedRow,this.clearChildrenSelection(),void 0!==this.lastScrollPosition&&this.infiniteScrollingBehavior&&this.infiniteScrollingBehavior.scrollTop(this.lastScrollPosition),delete this.ignoreSelectEvents}})}),csui.define("hbs!xecmpf/controls/bosearch/resultlist/impl/boresultlist",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="conws-boresultbanner-container">\r\n        <div class="conws-boresultbanner">'+e.escapeExpression((s=null!=(s=a(i,"banner_message")||(null!=t?a(t,"banner_message"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"banner_message","hash":{},"loc":{"start":{"line":5,"column":42},"end":{"line":5,"column":60}}}):s))+"</div>\r\n      </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="conws-boresultlist-body">\r\n  <div class="conws-boresulttable">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"banner_message"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":4},"end":{"line":7,"column":11}}}))?s:"")+'  </div>\r\n  <div class="conws-boresultfooter">\r\n    <div class="conws-boresultfooter-message-container  binf-modal-footer">\r\n      <div class="conws-boresultfooter-message">'+e.escapeExpression((a=null!=(a=l(i,"footer_message")||(null!=t?l(t,"footer_message"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"footer_message","hash":{},"loc":{"start":{"line":11,"column":48},"end":{"line":11,"column":66}}}):a))+'</div>\r\n    </div>\r\n    <div class="conws-boresultfooter-attach-container  binf-modal-footer">\r\n      <button type="button" disabled class="binf-btn binf-btn-default attach">'+e.escapeExpression((a=null!=(a=l(i,"attach_button_text")||(null!=t?l(t,"attach_button_text"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"attach_button_text","hash":{},"loc":{"start":{"line":14,"column":78},"end":{"line":14,"column":100}}}):a))+"</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n"}});return i.registerPartial("xecmpf_controls_bosearch_resultlist_impl_boresultlist",n),n}),csui.define("xecmpf/controls/bosearch/resultlist/boresultlist.view",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/utils/log","csui/utils/contexts/factories/connector","csui/dialogs/modal.alert/modal.alert","xecmpf/controls/bosearch/resultlist/botable.view","xecmpf/controls/bosearch/resultlist/boresult.collection","hbs!xecmpf/controls/bosearch/resultlist/impl/boresultlist","i18n!xecmpf/controls/bosearch/impl/nls/lang"],function(e,t,i,n,o,s,a,l,r,c,d,u,p){return o.LayoutView.extend({"className":"conws-boresultlist","template":u,"regions":{"tableRegion":".conws-boresulttable"},"triggers":{"click .binf-btn.attach":"attach:clicked"},"constructor":function(e){e||(e={}),o.LayoutView.prototype.constructor.call(this,e),this.listenTo(this.model,"change:bo_type_name",this._updateBanner),this.listenTo(this.model,"bosearch:search",this._triggerSearch),this.listenTo(this,"attach:clicked",this._triggerAttach)},"_triggerSearch":function(e){this.collection||(this.collection=new d(void 0,{"connector":this.options.context.getObject(l),"boSearchModel":this.options.model,"autoreset":!0}),this.render(),this.listenTo(this.collection,"sync",this._updateFooter),this.listenTo(this.collection,"sync",this._showSyncError),this.listenTo(this.collection,"error",this._showSearchError)),this.collection.searchParams=e?e.searchParams:void 0,this.collection.searchForms=e?e.searchForms:void 0;var t=this;this.collection.fetch({"reset":!0}).then(function(){var e=t.resultTable.currentlyFocusedElement();e&&e.trigger("focus")});var i=this.model.get("bus_att_metadata_mapping");if(this.options.multipleSelect&&!i){var n=this.$el.find(".conws-boresultfooter>.conws-boresultfooter-attach-container");if(n){n.css({"display":"block"});var o=n.children();o&&(o[0].disabled=!0)}this.$el.addClass("conws-with-attachbtn")}},"_selectedRow":function(e){a.debug("trigger reference:clicked")&&console.log(a.last),this.listenToOnce(this.model,"reference:selected",function(){t(e.target).trigger("mouseleave")}),this.model.trigger("boresult:select",{"selectedItems":[e.model]})},"_enableAttachBtn":function(e){if(e.nodes.length>0){if(this.resultTable.getSelectedChildren().length>0){var t=this.$el.find(".conws-boresultfooter .binf-btn.binf-btn-default.attach");t&&(t[0].disabled=!1)}}},"_disableAttachBtn":function(e){if(e.nodes.length>0){if(0===this.resultTable.getSelectedChildren().length){var t=this.$el.find(".conws-boresultfooter .binf-btn.binf-btn-default.attach");t&&(t[0].disabled=!0)}}},"templateHelpers":function(){return{"banner_message":this._getBannerMessage(),"footer_message":this._getFooterMessage(),"attach_button_text":p.boResultListButtonAttach}},"_updateBanner":function(){this._getBannerMessage()&&this.$el.find(".conws-boresultbanner").text(this._getBannerMessage())},"_getBannerMessage":function(){return this.collection?void 0:i.str.sformat(p.resultListBannerMessage,this.model.get("bo_type_name"))},"_updateFooter":function(){var e=this._getFooterMessage();e?(this.$el.find(".conws-boresultfooter-message").text(e),this.$el.addClass("conws-with-footer")):this.$el.removeClass("conws-with-footer")},"_getFooterMessage":function(){return this.collection&&this.collection.maxRowsExceeded?p.resultListRefineMessage:void 0},"_showSyncError":function(){this.collection.errorMessage&&this.collection.errorMessage===d.ERR_COLUMNS_CHANGED&&r.showError(p[this.collection.errorMessage]||this.collection.errorMessage)},"_showSearchError":function(e,t,i){var n=t&&new s.Error(t).message||p.errorSearchingBusinessObjects;a.error("Searching for business objects failed: {0}",n)&&console.error(a.last),r.showError(n)},"_triggerAttach":function(){a.debug("trigger boresult:select")&&console.log(a.last),this.model.trigger("boresult:select",{"selectedItems":this.resultTable.getSelectedChildren()})},"onRender":function(){if(this._updateFooter(),this.collection){var e="single",t=!1,i=this.model.get("bus_att_metadata_mapping");this.options.multipleSelect&&!i&&(e="multiple",t=!0);var n=!0;void 0!==this.options.enableSorting&&(n=this.options.enableSorting),this.resultTable=new c({"context":this.options.context,"connector":this.options.context.getObject(l),"collection":this.collection,"columns":this.collection.columns,"tableColumns":this.collection.tableColumns,"selectRows":e,"selectColumn":t,"enableSorting":n,"nameEdit":!1,"haveDetailsRowExpandCollapseColumn":!0,"disableItemsWithWorkspace":this.options.disableItemsWithWorkspace,"tableTexts":{"zeroRecords":p.noBusinessObjectsFound}}),!this.options.multipleSelect||i?this.listenTo(this.resultTable,"row:selected",this._selectedRow):(this.listenTo(this.resultTable,"tableRowSelected",this._enableAttachBtn),this.listenTo(this.resultTable,"tableRowUnselected",this._disableAttachBtn)),this.tableRegion.show(this.resultTable)}else this.resultTable&&(this.stopListening(this.resultTable),delete this.resultTable)}})}),csui.define("hbs!xecmpf/controls/bosearch/impl/bosearch",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="conws-bosearch-wrapper">\r\n  <div class="conws-bosearch-panel">\r\n    <div class="conws-bosearch-title">\r\n      '+e.escapeExpression((s=null!=(s=a(i,"bosearch_title")||(null!=t?a(t,"bosearch_title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"bosearch_title","hash":{},"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":24}}}):s))+'\r\n    </div>\r\n    <div class="conws-bosearch-form">\r\n    </div>\r\n    <div class="conws-bosearch-result">\r\n    </div>\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("xecmpf_controls_bosearch_impl_bosearch",n),n}),csui.define("css!xecmpf/controls/bosearch/impl/bosearch",[],function(){}),csui.define("xecmpf/controls/bosearch/bosearch.view",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/widgets/metadata/metadata.view","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/progressblocker/blocker","xecmpf/controls/bosearch/searchform/bosearchform.view","xecmpf/controls/bosearch/resultlist/boresultlist.view","hbs!xecmpf/controls/bosearch/impl/bosearch","css!xecmpf/controls/bosearch/impl/bosearch"],function(e,t,i,n,o,s,a,l,r,c){var d=n.LayoutView.extend({"className":"conws-bosearch csui-metadata-overlay","template":c,"regions":{"searchRegion":".conws-bosearch-form","resultRegion":".conws-bosearch-result"},"constructor":function(e){n.LayoutView.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions(),this.listenTo(this.model,"reference:search",this._referenceSearchOpen),this.options.blockingParentView?a.delegate(this,this.options.blockingParentView):a.imbue(this),this.listenTo(this.model,"boresult:select",function(){this.blockActions()}).listenTo(this.model,"reference:selected",function(){this.unblockActions()}).listenTo(this.model,"reference:rejected",function(){this.unblockActions()})},"templateHelpers":function(){return{"bosearch_title":this.options.title}},"onRender":function(){this.searchView=new l({"model":this.model,"context":this.options.context}),this.resultView=new r({"model":this.model,"context":this.options.context,"multipleSelect":this.options.multipleSelect,"enableSorting":!1,"disableItemsWithWorkspace":this.options.disableItemsWithWorkspace}),this.options.title&&this.$el.addClass("display-title"),this.searchRegion.show(this.searchView),this.resultRegion.show(this.resultView)},"_referenceSearchOpen":function(){var e=this;if(e.searchView&&e.searchView.searchForm){e.searchView.searchForm.$el.hide();var t=e.searchView.searchForm.model.get("id"),n=e.searchView.model.get("bo_type_id");t!==n&&e.resultView&&e.resultView.collection&&(delete e.resultView.collection,e.resultView.render()),e.searchView.searchForm.model.set({"id":n,"name":e.searchView.model.get("bo_type_name")}),e.searchView.searchForm.model.fetch({"reset":!0,"silent":!0}).then(function(){if(e.resultView&&e.resultView.collection&&e.resultView.collection.searchedParams){var t=e.searchView.searchForm.model.get("data"),n=i.keys(t),o=e.resultView.collection.searchedParams,s=n.length,a=i.keys(o).length,l=i.reduce(t,function(e,t,i){return i in o?e+1:e},0);if(l>0&&l>=n.length/2||s===a){if(i.extend(t,i.pick(o,n)),e.resultView.resultTable){var r=e.model.get("row_id");r&&e.resultView.resultTable.collection.get(r)?e.resultView.resultTable.setSelection([r]):e.resultView.resultTable.clearSelection()}}else{var c=e.resultView.collection;delete e.resultView.collection,c&&(c.stopListening(),e.resultView.stopListening(c)),e.resultView.render()}}e.searchView.searchForm.render(),e.searchView.searchForm.$el.show()},function(){e.searchView.searchForm.$el.show()})}}});return i.extend(d.prototype,s),d}),csui.define("xecmpf/controls/bosearch/bosearch.dialog.controller",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","xecmpf/controls/bosearch/bosearch.view"],function(e,t,i,n){return i.Controller.extend({"constructor":function(e){i.Controller.prototype.constructor.apply(this,arguments),this.listenTo(this.options.boSearchModel,"reference:search",this._referenceSearchOpen),this.listenTo(this.options.boSearchModel,"boresult:select",this._boresultSelect),this.listenTo(this.options.boSearchModel,"reference:selected",this._referenceSelected),this.listenTo(this.options.boSearchModel,"reference:rejected",this._referenceRejected),this.listenTo(this.options.boSearchModel,"bosearch:cancel",this._referenceSearchCanceled)},"_transitionEnd":t.once(function(){var e,t={"transition":"transitionend","WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend"},i=document.createElement("div");for(e in t)if(void 0!==i.style[e])return t[e]}),"_referenceSearchOpen":function(){this._showSearchView()},"_boresultSelect":function(){this._showModalContent()},"_referenceSelected":function(){this._hideSearchView()},"_referenceRejected":function(){this._hideModalContent()},"_referenceSearchCanceled":function(){this._showModalContent(),this._hideSearchView()},"_hideSearchView":function(){"workspace_reference_create"===this.options.mode&&"side-panel"===this.options.containerType&&this.options.sidePanel&&this.options.sidePanel.$el.find(".csui-sidepanel-container").removeClass("xecmpf-bosearch-opened"),"workspace_reference_edit"===this.options.mode&&this.bosearchview.$el.parent().removeClass("cs-item-action-metadata"),"business_attachment_add"===this.options.mode&&this.bosearchview.$el.parent().removeClass("cs-item-action-metadata"),this.modalcontent.removeClass("conws-bosearch-showing"),this.bosearchview.$el.detach()},"_showModalContent":function(){"workspace_reference_create"===this.options.mode&&"dialog"===this.options.containerType&&(this.modalcontent.find(">.binf-modal-header .cs-close").show(),this.modalcontent.find(">.binf-modal-body").show(),this.modalcontent.find(">.binf-modal-footer").show()),"workspace_reference_edit"===this.options.mode&&(this.modalcontent.find(">.metadata-content-wrapper").show(),this.modalcontent.find(">.metadata-wrapper .metadata-sidebar .cs-content").show(),this.modalcontent.find(">.metadata-wrapper .metadata-content .metadata-content-wrapper").show()),"business_attachment_add"===this.options.mode&&(this.modalcontent.find(">.metadata-content-wrapper").show(),this.modalcontent.find(">.metadata-wrapper .metadata-sidebar .cs-content").show(),this.modalcontent.find(">.metadata-wrapper .metadata-content .metadata-content-wrapper").show())},"_hideModalContent":function(){"workspace_reference_create"===this.options.mode&&"dialog"===this.options.containerType&&(this.modalcontent.find(">.binf-modal-header .cs-close").hide(),this.modalcontent.find(">.binf-modal-body").hide(),this.modalcontent.find(">.binf-modal-footer").hide()),
"workspace_reference_edit"===this.options.mode&&(this.modalcontent.find(">.metadata-content-wrapper").hide(),this.modalcontent.find(">.metadata-wrapper .metadata-sidebar .cs-content").hide(),this.modalcontent.find(">.metadata-wrapper .metadata-content .metadata-content-wrapper").hide()),"business_attachment_add"===this.options.mode&&(this.modalcontent.find(">.metadata-content-wrapper").hide(),this.modalcontent.find(">.metadata-wrapper .metadata-sidebar .cs-content").hide(),this.modalcontent.find(">.metadata-wrapper .metadata-content .metadata-content-wrapper").hide())},"_showSearchView":function(){var t=this.options||{};this.modalcontent=e(this.options.htmlPlace),this.modalcontent.addClass("conws-bosearch-beforeshow"),this.bosearchview||(this.bosearchview=new n({"model":this.options.boSearchModel,"context":this.options.context,"multipleSelect":this.options.multipleSelect,"disableItemsWithWorkspace":this.options.disableItemsWithWorkspace,"title":this.options.title}),this.bosearchview.render(),this.bosearchview.$el.addClass(this.options.mode),"workspace_reference_create"===this.options.mode&&"dialog"===t.containerType&&this.bosearchview.$el.addClass("csui-content-without-header"),"workspace_reference_edit"===this.options.mode&&(this.bosearchview.$el.addClass("csui-content-without-header"),this.bosearchview.$el.find(".conws-bosearch-wrapper").addClass("binf-modal-content")),"business_attachment_add"===this.options.mode&&(this.bosearchview.$el.addClass("csui-content-without-header"),this.bosearchview.$el.find(".conws-bosearch-wrapper").addClass("binf-modal-content"))),this.modalcontent.append(this.bosearchview.$el),"workspace_reference_create"===this.options.mode&&"side-panel"===t.containerType&&t.sidePanel&&t.sidePanel.$el.find(".csui-sidepanel-container").addClass("xecmpf-bosearch-opened"),"workspace_reference_edit"===this.options.mode&&this.bosearchview.$el.parent().addClass("cs-item-action-metadata"),"business_attachment_add"===this.options.mode&&this.bosearchview.$el.parent().addClass("cs-item-action-metadata"),this.bosearchview.$el.position(),this.bosearchview.triggerMethod("dom:refresh");var i=this;this.bosearchview.$el.one(this._transitionEnd(),function(){i.modalcontent.removeClass("conws-bosearch-animating"),i.modalcontent.addClass("conws-bosearch-showing"),i._hideModalContent()}),this.modalcontent.addClass("conws-bosearch-animating"),this.modalcontent.removeClass("conws-bosearch-beforeshow")}})}),csui.define("hbs!xecmpf/controls/property.panels/reference/impl/reference.panel",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"bo_id"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":10,"column":4},"end":{"line":16,"column":11}}}))?s:""},"2":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="conws-reference-override-note">'+e.escapeExpression((s=null!=(s=a(i,"change_note")||(null!=t?a(t,"change_note"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"change_note","hash":{},"loc":{"start":{"line":11,"column":49},"end":{"line":11,"column":64}}}):s))+"\r\n        <span>"+e.escapeExpression((s=null!=(s=a(i,"remove_note")||(null!=t?a(t,"remove_note"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"remove_note","hash":{},"loc":{"start":{"line":12,"column":14},"end":{"line":12,"column":29}}}):s))+"</span>\r\n      </div>\r\n"},"4":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="conws-reference-override-note">'+e.escapeExpression((s=null!=(s=a(i,"add_note")||(null!=t?a(t,"add_note"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"add_note","hash":{},"loc":{"start":{"line":15,"column":49},"end":{"line":15,"column":61}}}):s))+"</div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="conws-reference-panel binf-row alpaca-field" id="xecmpf-reference-panel">\r\n  <div class="alpaca-container-label">\r\n    <h3>'+e.escapeExpression((a=null!=(a=l(i,"title")||(null!=t?l(t,"title"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":17}}}):a))+'</h3>\r\n  </div>\r\n  <div class="conws-reference-initial">\r\n  </div>\r\n  <div class="conws-reference-replace">\r\n  </div>\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"change_reference"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":9,"column":2},"end":{"line":17,"column":9}}}))?s:"")+"</div>"}});return i.registerPartial("xecmpf_controls_property.panels_reference_impl_reference.panel",n),n}),csui.define("hbs!xecmpf/controls/property.panels/reference/impl/reference.panel-initial",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="conws-label-search">'+e.escapeExpression((s=null!=(s=a(i,"search_button_label")||(null!=t?a(t,"search_button_label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"search_button_label","hash":{},"loc":{"start":{"line":2,"column":34},"end":{"line":2,"column":57}}}):s))+'</div>\r\n  <button type="button" class="binf-btn binf-btn-default search">'+e.escapeExpression((s=null!=(s=a(i,"search_button_title")||(null!=t?a(t,"search_button_title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"search_button_title","hash":{},"loc":{"start":{"line":3,"column":65},"end":{"line":3,"column":88}}}):s))+"</button>\r\n"},"3":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div  class="conws-reference-override-note">'+e.escapeExpression((s=null!=(s=a(i,"cannot_complete_business_reference")||(null!=t?a(t,"cannot_complete_business_reference"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cannot_complete_business_reference","hash":{},"loc":{"start":{"line":5,"column":46},"end":{"line":5,"column":84}}}):s))+"</div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"complete_reference"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":6,"column":7}}}))?s:""}});return i.registerPartial("xecmpf_controls_property.panels_reference_impl_reference.panel-initial",n),n}),csui.define("hbs!xecmpf/controls/property.panels/reference/impl/reference.panel-replace",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="conws-reference-buttons">\r\n    <div class="conws-label-buttons">'+e.escapeExpression((a=null!=(a=l(i,"reference_buttons_label")||(null!=t?l(t,"reference_buttons_label"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"reference_buttons_label","hash":{},"loc":{"start":{"line":4,"column":37},"end":{"line":4,"column":64}}}):a))+"</div>\r\n\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"allow_remove_reference_from_create"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":4},"end":{"line":9,"column":11}}}))?s:"")+'\r\n    <button type="button" class="binf-btn binf-btn-default replace">'+e.escapeExpression((a=null!=(a=l(i,"replace_button_title")||(null!=t?l(t,"replace_button_title"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"replace_button_title","hash":{},"loc":{"start":{"line":11,"column":68},"end":{"line":11,"column":92}}}):a))+"</button>\r\n\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"allow_remove_reference_from_edit"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":15,"column":4},"end":{"line":17,"column":11}}}))?s:"")+"\r\n  </div>\r\n"},"2":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button type="button" class="binf-btn binf-btn-default remove">'+e.escapeExpression((s=null!=(s=a(i,"remove_button_title")||(null!=t?a(t,"remove_button_title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"remove_button_title","hash":{},"loc":{"start":{"line":8,"column":69},"end":{"line":8,"column":92}}}):s))+"</button>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="conws-reference-metadata"></div>\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"change_reference"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":0},"end":{"line":20,"column":7}}}))?s:"")}});return i.registerPartial("xecmpf_controls_property.panels_reference_impl_reference.panel-replace",n),n}),csui.define("css!xecmpf/controls/property.panels/reference/impl/reference.panel",[],function(){}),csui.define("xecmpf/controls/property.panels/reference/impl/reference.panel.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/controls/form/form.view","csui/utils/base","csui/dialogs/modal.alert/modal.alert","xecmpf/controls/bosearch/bosearch.model","xecmpf/controls/bosearch/bosearch.dialog.controller","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/globalmessage/globalmessage","hbs!xecmpf/controls/property.panels/reference/impl/reference.panel","hbs!xecmpf/controls/property.panels/reference/impl/reference.panel-initial","hbs!xecmpf/controls/property.panels/reference/impl/reference.panel-replace","i18n!xecmpf/controls/property.panels/reference/impl/nls/lang","css!xecmpf/controls/property.panels/reference/impl/reference.panel"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f,h){"use strict";var b=n.ItemView.extend({"className":"conws-reference reference-initial","template":m,"constructor":function(e){n.ItemView.prototype.constructor.apply(this,arguments)},"ui":{"searchButton":".binf-btn.search"},"triggers":{"click .binf-btn.search":"referencetab:search"},"templateHelpers":function(){var t=this.options.actionContext.workspaceReference,i=t&&t.get("bo_type_name"),n=t&&t.get("ext_system_name");return{"search_button_label":e.str.sformat(h.referenceSearchButtonLabel,i,n),"search_button_title":h.referenceSearchButtonTitle,"complete_reference":t.get("complete_reference"),"cannot_complete_business_reference":h.cannotCompleteBusinessReference}}}),g=n.LayoutView.extend({"className":"conws-reference reference-replace","template":f,"constructor":function(e){n.LayoutView.prototype.constructor.apply(this,arguments)},"ui":{"replaceButton":".binf-btn.replace"},"triggers":{"click .binf-btn.remove":"referencetab:remove","click .binf-btn.replace":"referencetab:replace"},"regions":{"metadataRegion":".conws-reference-metadata"},"templateHelpers":function(){var t=this.options.actionContext.workspaceReference,i=t&&t.get("bo_type_name"),n=t&&t.get("ext_system_name");return{"allow_remove_reference_from_create":"workspace_reference_create"===this.options.actionContext.mode,"allow_remove_reference_from_edit":"workspace_reference_edit"===this.options.actionContext.mode,"remove_button_title":h.referenceRemoveButtonTitle,"replace_button_title":h.referenceReplaceButtonTitle,"reference_buttons_label":e.str.sformat(h.referenceSearchButtonLabel,i,n),"change_reference":t.get("change_reference")}},"onRender":function(){var e,t,n;"workspace_reference_create"===this.options.actionContext.mode&&(e=this.options.actionContext.workspaceReference.get("data")||{},t=this.options.actionContext.workspaceReference.get("options")||{},n=this.options.actionContext.workspaceReference.get("schema")||{}),"workspace_reference_edit"===this.options.actionContext.mode&&(e={"BOID":this.options.actionContext.workspaceReference.get("bo_id")},t={"fields":{"BOID":{}}},n={"properties":{"BOID":{"readonly":!0,"required":!1,"title":h.businessObjectIdLabel,"type":"string"}}}),e&&t&&n&&(this.formModel=new i.Model({"data":e,"options":t,"schema":n}),this.metdataForm=new s({"model":this.formModel,"context":this.options.context}),this.metadataRegion.show(this.metdataForm))}});return n.LayoutView.extend({"className":"conws-reference reference-panel cs-form cs-form-create","template":p,"regions":{"initialRegion":".conws-reference-initial","replaceRegion":".conws-reference-replace"},"behaviors":{"TabableRegion":{"behaviorClass":d}},"constructor":function(t){n.LayoutView.prototype.constructor.apply(this,arguments),this.options.actionContext.referencePanelView=this,this.actionContext=e.clone(this.options.actionContext);var i,s,d;if("create"===this.options.mode){this.actionContext.mode="workspace_reference_create",i=this.options.metadataView;var u=t&&t.fetchedModels,p=u&&u.formCollection,m=p&&p.options,f=m&&m.metadataAddItemController,b=f&&f.sidePanel;f.dialog?(d="dialog",s=f.dialog.$(".binf-modal-content")):f.sidePanel&&(d="side-panel",s=f.sidePanel.$(".csui-sidepanel-body"))}else"update"===this.options.mode&&(this.actionContext.mode="workspace_reference_edit",i=this.options.metadataView&&this.options.metadataView.options.metadataNavigationView?this.options.metadataView.options.metadataNavigationView:this.options.metadataView,s=".cs-metadata:has(> .metadata-content-wrapper)");i!==this.actionContext.viewContext&&(delete this.actionContext.boSearchModel,delete this.actionContext.boSearchDialogController,this.actionContext.viewContext=i);var g=this.actionContext.workspaceReference;this.actionContext.boSearchModel?this.actionContext.boSearchModel.set({"bo_type_id":g.get("bo_type_id"),"bo_type_name":g.get("bo_type_name"),"row_id":g.get("row_id")}):this.actionContext.boSearchModel=new r({"bo_type_id":g.get("bo_type_id"),"bo_type_name":g.get("bo_type_name"),"row_id":g.get("row_id")}),this.actionContext.boSearchDialogController?(this.actionContext.boSearchDialogController.options.mode=this.actionContext.mode,this.actionContext.boSearchDialogController.options.htmlPlace=s):this.actionContext.boSearchDialogController=new c({"mode":this.actionContext.mode,"context":this.options.context,"htmlPlace":s,"containerType":d,"sidePanel":b,"boSearchModel":this.actionContext.boSearchModel,"disableItemsWithWorkspace":!0}),this.listenTo(this.actionContext.boSearchModel,"boresult:select",this._replaceReference),this.listenTo(this.actionContext.boSearchModel,"bosearch:cancel",this._cancelSearch),this.listenTo(this.actionContext.boSearchModel,"change:bo_type_name",e.bind(function(){this.actionContext.workspaceReference.set("by_type_name",this.actionContext.boSearchModel.get("bo_type_name")),this.render()},this)),this.listenTo(this.actionContext.workspaceReference,"error",function(e,t,i){var n,s=i&&i.invoker&&"remove_bo_ref"===i.invoker;s?(n=t&&new a.Error(t).message||h.errorRemovingWorkspaceReference,o.error("Removing the workspace reference failed: {0}",n)&&console.error(o.last)):(n=t&&new a.Error(t).message||h.errorUpdatingWorkspaceReference,o.error("Updating the workspace reference failed: {0}",n)&&console.error(o.last)),l.showError(n)}),this.listenTo(t.originatingView,"render:forms",this._formsRendered),"workspace_reference_create"===this.actionContext.mode&&(this.actionContext.scrollToPanel=!0,this.actionContext.focusButton=!0),e.extend(this.options.actionContext,this.actionContext)},"onDestroy":function(){this===this.actionContext.referencePanelView&&delete this.actionContext.referencePanelView},"templateHelpers":function(){return{"title":h.referenceTabTitle,"bo_id":this.actionContext.workspaceReference.get("bo_id"),"add_note":h.referencePanelAddNote,"change_note":h.referencePanelChangeNote,"remove_note":h.referencePanelRemoveNote,"change_reference":this.actionContext.workspaceReference.get("change_reference")}},"currentlyFocusedElement":function(){var e;return e=this.actionContext.workspaceReference.get("bo_id")?this.replaceView&&this.replaceView.ui.replaceButton:this.initialView&&this.initialView.ui.searchButton,e&&e.attr&&e.prop?(o.debug("currently focused element of {0} count {1} class {2}",this.cid,e?e.length:"no el",e.attr("class"))&&console.log(o.last),e):void 0},"onRender":function(){this.actionContext.workspaceReference.get("bo_id")?(delete this.initialView,this.replaceView=new g(this.options),this.listenTo(this.replaceView,"referencetab:remove",this._removeReference),this.listenTo(this.replaceView,"referencetab:replace",this._triggerSearch),this.replaceRegion.show(this.replaceView)):(delete this.replaceView,this.initialView=new b(this.options),this.listenTo(this.initialView,"referencetab:search",this._triggerSearch),this.initialRegion.show(this.initialView))},"_triggerSearch":function(){o.debug("trigger reference:search")&&console.log(o.last),this.actionContext.boSearchModel.trigger("reference:search")},"_removeReference":function(){if(o.debug("clear reference")&&console.log(o.last),"workspace_reference_create"===this.actionContext.mode)this._refetchForms({"data":void 0,"options":{},"schema":{},"bo_id":void 0,"row_id":void 0});else if("workspace_reference_edit"===this.actionContext.mode){var i=this,n=t.Deferred();l.confirmQuestion(e.str.sformat(h.removeBOReferenceAlertDescription,this.actionContext.workspaceReference.get("bo_id")),h.removeBOReferenceAlertTitle).done(function(e){var t=i.actionContext.workspaceReference;return t.destroy({"wait":!0,"invoker":"remove_bo_ref"}).done(function(e,o){u.showMessage("success",h.removeBOReferenceSuccessMessage),!1===i.options.hasMetadataProperties?(t.set("bo_id",void 0),t.fetch().then(function(){i.render()})):i.actionContext.viewContext.triggerMethod("metadata:close"),n.resolve()}).fail(function(e,t,i){n.reject(e.responseJSON.error)}),n.promise()})}},"_cancelSearch":function(){this._focusButton({"cancelSearch":!0})},"_replaceReference":function(t){if(o.debug("set reference")&&console.log(o.last),t&&t.selectedItems&&t.selectedItems.length>0&&t.selectedItems[0]){var i=t.selectedItems[0],n={},s={},a={},l=i.collection,r=l.columns,c=l.tableColumns,d=c.toArray().sort(function(e,t){return e.get("sequence")-t.get("sequence")});e.each(d,function(e){var t=e.get("key"),o=r.get(t),l=o.get("fieldName");n[l]=i.get(t),s[l]={},a[l]={"readonly":!0,"required":!1,"title":o.get("fieldLabel"),"type":"string"}}),this._refetchForms({"data":n,"options":{"fields":s},"schema":{"properties":a},"bo_id":i.get("businessObjectId"),"row_id":i.get("id")},"select")}else this.render(),this.actionContext.boSearchModel.trigger("reference:selected"),this._scrollToPanel(),this._focusButton()},"_getAllValues":function(){var t={},i=this.options&&this.options.metadataView;if(i){t={"name":i.metadataHeaderView.getNameValue(),"type":i.options.model.get("type"),"parent_id":i.options.model.get("parent_id")};var n=i.metadataPropertiesView.getFormsValues();e.extend(t,n)}return t},"_refetchForms":function(e,t){var i=this,n=this.actionContext.workspaceReference,o=e.bo_id,s=this.actionContext,a=this.options.originatingView,l=this.options.fetchedModels;if("workspace_reference_create"===s.mode){var r=l.formCollection;o?(r.bo_type_id=n.get("bo_type_id"),r.bo_id=o):(delete r.bo_type_id,delete r.bo_id),r.formsValues=this._getAllValues(),r.formsSchema=r.serverForms,l.fetch().then(function(){n.set(e),"select"===t&&a.once("render:forms",function(){i.actionContext.boSearchModel.trigger("reference:selected")}),s.scrollToPanel=!0,s.focusButton=!0},function(){"select"===t&&i.actionContext.boSearchModel.trigger("reference:rejected")})}else if("workspace_reference_edit"===s.mode){var c=n.get("bo_id"),d=this.options.node;n.set("bo_id",o),n.save({},{"wait":!0}).then(function(){d.fetch().then(function(){l?l.fetch().then(function(){n.set(e),"select"===t&&a.once("render:forms",function(){i.actionContext.boSearchModel.trigger("reference:selected")}),s.scrollToPanel=!0,s.focusButton=!0},function(){n.set("bo_id",c),"select"===t&&i.actionContext.boSearchModel.trigger("reference:rejected")}):!1===i.options.hasMetadataProperties&&(n.set(e),i.actionContext.boSearchModel.trigger("reference:selected"),n.fetch().then(function(){i.render()}))},function(){n.set("bo_id",c),"select"===t&&i.actionContext.boSearchModel.trigger("reference:rejected")})},function(){n.set("bo_id",c),"select"===t&&i.actionContext.boSearchModel.trigger("reference:rejected")})}else n.set(e),this.render(),"select"===t&&i.actionContext.boSearchModel.trigger("reference:selected"),this._scrollToPanel(),this._focusButton()},"_scrollToPanel":function(){var e=this.options&&this.options.originatingView,t=e&&e.tabLinks;if(t){var i;t.children.each(function(e){"conws-reference"===e.model.id&&(i=e)}),i&&i.activate()}},"_focusButton":function(e){var i=this.options&&this.options.metadataView,n=i&&i.metadataHeaderView,o=n&&n.metadataItemNameView;if(!o||o.readonly||o.model&&o.model.get("name")||e&&e.cancelSearch){if(this.actionContext.workspaceReference.get("bo_id")){var s;this.replaceView&&(s=t(this.replaceView.ui.replaceButton),s.trigger("focus"))}else this.initialView&&(s=t(this.initialView.ui.searchButton),s.trigger("focus"));var a,l=this.options.originatingView;if(void 0!==l&&(a=l.$el.find("div[id='conws-reference']")),a&&a.length>0){var r=a[0].offsetTop;if(s&&s.length>0){var c=s[0].offsetTop,d=s.height(),u=l.tabContent.$el.height();if(c+d>r+u){var p=Math.max(l.getOption("extraScrollTopOffset")||0,5),m=c+d-u+p;l.tabContent.$el.animate({"scrollTop":m},300)}}}}else o.setEditModeFocus()},"_formsRendered":function(){this.actionContext.scrollToPanel&&(delete this.actionContext.scrollToPanel,this._scrollToPanel()),this.actionContext.focusButton&&(delete this.actionContext.focusButton,this._focusButton())},"validate":function(){return!0},"getValues":function(){return{"bo_id":this.actionContext.workspaceReference.get("bo_id"),"bo_type_id":this.actionContext.workspaceReference.get("bo_type_id")}},"hideNotRequired":function(e){return!0}})}),csui.define("xecmpf/widgets/boattachments/impl/boattachments.factory",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","xecmpf/widgets/boattachments/impl/boattachments.model","xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.factory"],function(e,t,i,n,o,s,a,l){return o.extend({"propertyPrefix":"boAttachments","constructor":function(i,l){o.prototype.constructor.apply(this,arguments);var r=this.options.boAttachments||{},c=r.options&&r.options.commands;r instanceof n.Collection||(this.property=new a(r.models,t.extend({"context":i,"node":i.getModel(s,l)},r.options,e.config().options,{"autoreset":!0,"commands":c.getAllSignatures()},l)))},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("xecmpf/widgets/boattachments/impl/boattachment.table/toolbaritems",["module","csui/lib/underscore","csui/controls/toolbar/toolitem.model","csui/controls/toolbar/toolitems.factory","i18n!xecmpf/widgets/boattachments/impl/nls/lang","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui-ext!xecmpf/widgets/boattachments/toolbaritems"],function(e,t,i,n,o,s,a){var l={"tableHeaderToolbar":new n({"main":[{"signature":"Snapshot","name":o.CommandSnapshot}]},{"maxItemsShown":15,"dropDownIcon":"icon icon-toolbar-more","lazyActions":!0})};return a&&t.each(a,function(e){t.each(e,function(e,n){var o=l[n];if(o||"otherToolbar"!==n||(o=l.tableHeaderToolbar),!o)throw new Error("Invalid target toolbar: "+n);t.each(e,function(e){e=new i(e),o.addItem(e)})})}),l}),csui.define("xecmpf/widgets/boattachments/impl/boattachment.table/boattachments.columns",["csui/lib/backbone","i18n!xecmpf/widgets/boattachments/impl/nls/lang"],function(e,t){var i=e.Model.extend({"defaults":{"key":null,"sequence":0}}),n=e.Collection.extend({"model":i,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new n(this.map(function(e){return e.attributes}))}});return new n([{"key":"type","permanentColumn":!0,"sequence":10},{"key":"name","permanentColumn":!0,"sequence":20},{"key":"parent_id","title":t.parent_id,"permanentColumn":!0,"sequence":30},{"key":"reserved","sequence":40,"noTitleInHeader":!0,"permanentColumn":!0},{"key":"modify_date","permanentColumn":!0,"sequence":50},{"key":"version","sequence":60},{"key":"size","sequence":70},{"key":"create_date","sequence":80},{"key":"createdby","sequence":90},{"key":"modifiedby","sequence":100},{"key":"favorite","sequence":910,"noTitleInHeader":!0,"permanentColumn":!0}])}),csui.define("xecmpf/widgets/boattachments/impl/headertoolbaritems",["csui/controls/toolbar/toolitems.factory","i18n!xecmpf/widgets/boattachments/impl/nls/lang"],function(e,t){return{"AddToolbar":new e({"main":[{"signature":"BOAttachmentsCreate","name":t.addBusinessAttachment,"icon":"icon icon-toolbarAdd"}]},{"maxItemsShown":1,"dropDownIcon":"icon icon-toolbar-more"})}}),csui.define("hbs!xecmpf/controls/dialogheader/impl/dialogheader",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="cs-close" title="'+e.escapeExpression((s=null!=(s=a(i,"dialogCloseButtonTooltip")||(null!=t?a(t,"dialogCloseButtonTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"dialogCloseButtonTooltip","hash":{},"loc":{"start":{"line":6,"column":31},"end":{"line":6,"column":59}}}):s))+'">\r\n    <div class="icon circular '+e.escapeExpression((s=null!=(s=a(i,"iconRight")||(null!=t?a(t,"iconRight"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"iconRight","hash":{},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":43}}}):s))+'" tabindex="0" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"ariaDialogClose")||(null!=t?a(t,"ariaDialogClose"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"ariaDialogClose","hash":{},"loc":{"start":{"line":7,"column":70},"end":{"line":7,"column":89}}}):s))+'"\r\n         role="button"></div>\r\n  </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="left-section"></div>\r\n<div class="center-section"></div>\r\n<div class="right-section"></div>\r\n\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"hideDialogClose"):t,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(1,o,0),"loc":{"start":{"line":5,"column":0},"end":{"line":10,"column":7}}}))?s:"")}});return i.registerPartial("xecmpf_controls_dialogheader_impl_dialogheader",n),n}),csui.define("xecmpf/controls/dialogheader/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/controls/dialogheader/impl/nls/root/lang",{"dialogCloseButtonTooltip":"Close","ariaDialogClose":"Close dialog"}),csui.define("css!xecmpf/controls/dialogheader/impl/dialogheader",[],function(){}),csui.define("xecmpf/controls/dialogheader/dialogheader.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!xecmpf/controls/dialogheader/impl/dialogheader","i18n!xecmpf/controls/dialogheader/impl/nls/lang","css!xecmpf/controls/dialogheader/impl/dialogheader"],function(e,t,i,n,o,s,a){return n.LayoutView.extend({"className":"xecmpf-header","template":s,"behaviors":{"TabableRegion":{"behaviorClass":o}},"regions":{"LeftRegion":".left-section","CenterRegion":".center-section","RightRegion":".right-section"},"events":{"keydown":"onKeyInView"},"templateHelpers":function(){return{"iconRight":this.options.iconRight?this.options.iconRight:"cs-icon-cross","dialogCloseButtonTooltip":a.dialogCloseButtonTooltip,"ariaDialogClose":a.ariaDialogClose,"hideDialogClose":!!this.options.hideDialogClose&&this.options.hideDialogClose}},"constructor":function(e){n.LayoutView.prototype.constructor.apply(this,arguments)},"onRender":function(){var e=this.options.leftView,t=this.options.centerView,i=this.options.rightView;e&&this.LeftRegion.show(e),t&&this.CenterRegion.show(t),i&&this.RightRegion.show(i)},"isTabable":function(){return this.$("*[tabindex]").length>0},"currentlyFocusedElement":function(e){var i=this.$("*[tabindex]");return i.length&&i.prop("tabindex",0),t(e&&e.shiftKey?i[i.length-1]:i[0])},"onLastTabElement":function(e,t){return e&&t.target===this.$("*[tabindex]")[0]},"onKeyInView":function(e){var i=e.keyCode;13!==i&&32!==i||t(e.target).trigger("click")}})}),csui.define("hbs!xecmpf/controls/headertoolbar/impl/headertoolbar",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="filter-toolbar"></div>\r\n<div class="add-toolbar"></div>\r\n<div class="other-toolbar"></div>'}});return i.registerPartial("xecmpf_controls_headertoolbar_impl_headertoolbar",n),n}),csui.define("css!xecmpf/controls/headertoolbar/impl/headertoolbar",[],function(){}),csui.define("xecmpf/controls/headertoolbar/headertoolbar.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/toolbar/toolitems.filtered.model","csui/controls/toolbar/toolbar.view","csui/controls/toolbar/toolbar.command.controller","hbs!xecmpf/controls/headertoolbar/impl/headertoolbar","css!xecmpf/controls/headertoolbar/impl/headertoolbar"],function(e,t,i,n,o,s,a,l){return n.LayoutView.extend({"className":"xecmpf-header-toolbar","template":l,"regions":{"FilterToolbarRegion":".filter-toolbar","AddToolbarRegion":".add-toolbar","OtherToolbarRegion":".other-toolbar"},"constructor":function(e){this.commands=e.commands,this.commandController=e.commandController?e.commandController:new a({"commands":this.commands}),this.originatingView=e.originatingView?e.originatingView:this,this.context=e.context,this.nodes=e.selectedNodes,this.container=e.container,this.collection=e.collection,this.addableTypes=e.addableTypes,this.toolbarNames=["Filter","Add","Other"],this.toolbarItems=e.toolbarItems||[],n.LayoutView.prototype.constructor.apply(this,arguments)},"initialize":function(t){var i={"context":this.context,"nodes":this.selectedNodes,"container":this.container,"collection":this.collection,"originatingView":this.originatingView,"data":{"addableTypes":this.addableTypes}};e.each(this.toolbarNames,function(t){var n=t+"Toolbar",a=this.toolbarItems[n];if(a){e.any(a.collection.models,function(e){if("disabled"===e.attributes.signature)return a.collection.remove(e),!0});var l=new o(a,{"status":i,"commands":this.commandController.commands}),r=new s(e.extend({"collection":l,"toolbarName":t,"originatingView":this.originatingView},a.options));this[t+"ToolbarView"]=r,this.listenTo(r,"childview:toolitem:action",this._toolbarItemClicked)}},this)},"onRender":function(){e.each(this.toolbarNames,function(e){this[e+"ToolbarView"]&&this[e+"ToolbarRegion"].show(this[e+"ToolbarView"])},this)},
"_toolbarItemClicked":function(e,t){this.options.toolItemView=e,this.commandController.toolitemClicked(t.toolItem,this.options)}})}),csui.define("hbs!xecmpf/controls/title/impl/title",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="tile-type-icon">\r\n    <span class="icon title-icon '+e.escapeExpression((s=null!=(s=a(i,"icon")||(null!=t?a(t,"icon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":3,"column":33},"end":{"line":3,"column":41}}}):s))+'" aria-hidden="true"></span>\r\n  </div>\r\n'},"3":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"imageUrl"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":2},"end":{"line":12,"column":9}}}))?s:""},"4":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="tile-type-image '+e.escapeExpression((s=null!=(s=a(i,"imageClass")||(null!=t?a(t,"imageClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"imageClass","hash":{},"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":46}}}):s))+'">\r\n      <span class="tile-type-icon tile-type-icon-img">\r\n        <img src="'+e.escapeExpression((s=null!=(s=a(i,"imageUrl")||(null!=t?a(t,"imageUrl"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"imageUrl","hash":{},"loc":{"start":{"line":9,"column":18},"end":{"line":9,"column":30}}}):s))+'" alt="" aria-hidden="true">\r\n      </span>\r\n    </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"icon"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":13,"column":7}}}))?s:"")+'\r\n<div class="title-name">\r\n  <h4 class="title-name-block" title="'+e.escapeExpression((a=null!=(a=l(i,"title")||(null!=t?l(t,"title"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":16,"column":38},"end":{"line":16,"column":47}}}):a))+'">'+e.escapeExpression((a=null!=(a=l(i,"title")||(null!=t?l(t,"title"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":16,"column":49},"end":{"line":16,"column":58}}}):a))+"</h4>\r\n</div>\r\n"}});return i.registerPartial("xecmpf_controls_title_impl_title",n),n}),csui.define("css!xecmpf/controls/title/impl/title",[],function(){}),csui.define("xecmpf/controls/title/title.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","hbs!xecmpf/controls/title/impl/title","css!xecmpf/controls/title/impl/title"],function(e,t,i,n,o){return n.ItemView.extend({"className":"title-wrapper","template":o,"templateHelpers":function(){return{"icon":this.options.icon,"imageUrl":this.options.imageUrl,"imageClass":this.options.imageClass,"title":this.options.title}},"constructor":function(){n.ItemView.prototype.constructor.apply(this,arguments)}})}),csui.define("hbs!xecmpf/widgets/boattachments/impl/boattachment.table/boattachmentstable",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="xecmpf-boattachmentstable">\r\n    <div class="xecmpf-alternating-toolbars">\r\n        <div class="xecmpf-widget-table-header"></div>\r\n        <div id="botabletoolbar" class="xecmpf-rowselection-toolbar"></div>\r\n    </div>\r\n    <div id="botableview"></div>\r\n    <div id="bopaginationview"></div>\r\n</div>'}});return i.registerPartial("xecmpf_widgets_boattachments_impl_boattachment.table_boattachmentstable",n),n}),csui.define("css!xecmpf/widgets/boattachments/impl/boattachment.table/boattachmentstable",[],function(){}),csui.define("xecmpf/widgets/boattachments/impl/boattachment.table/boattachmentstable.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/behaviors/default.action/default.action.behavior","csui/utils/contexts/factories/connector","csui/controls/table/table.view","csui/controls/pagination/nodespagination.view","csui/dialogs/modal.alert/modal.alert","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/utils/commands","csui/controls/table/rows/description/description.view","csui/controls/globalmessage/globalmessage","csui/utils/log","xecmpf/widgets/boattachments/impl/boattachment.table/toolbaritems","xecmpf/widgets/boattachments/impl/boattachment.table/boattachments.columns","xecmpf/widgets/boattachments/impl/headertoolbaritems","xecmpf/controls/dialogheader/dialogheader.view","xecmpf/controls/headertoolbar/headertoolbar.view","xecmpf/controls/title/title.view","xecmpf/behaviors/toggle.header/toggle.header.behavior","i18n!xecmpf/widgets/boattachments/impl/nls/lang","hbs!xecmpf/widgets/boattachments/impl/boattachment.table/boattachmentstable","css!xecmpf/widgets/boattachments/impl/boattachment.table/boattachmentstable"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f,h,b,g,w,v,y,x,k,_,C){var A=e.config();i.defaults(A,{"defaultPageSize":30,"orderBy":{"sortColumn":"{name}","sortOrder":"asc"}});var P=o.LayoutView.extend({"className":"xecmpf-boattachments-table","template":C,"regions":{"tableHeaderRegion":".xecmpf-widget-table-header","tableRegion":"#botableview","paginationRegion":"#bopaginationview"},"behaviors":{"DefaultAction":{"behaviorClass":a},"ToggleHeader":{"behaviorClass":k,"tableHeader":".xecmpf-widget-table-header","alternatingTableContainer":".xecmpf-alternating-toolbars","tableToolbar":".xecmpf-rowselection-toolbar"}},"constructor":function(e){if(e||(e={}),i.defaults(e,{"data":{},"pageSize":A.defaultPageSize,"toolbarItems":b,"toolbarItemsMasks":{"toolbars":{}}}),i.defaults(e.data,{"pageSize":A.defaultPageSize,"orderBy":A.orderBy}),this.context=e.context,this.collection=e.collection,this.titleBarIcon=e.titleBarIcon,this.title=e.title,this.extId=e.extId,this.boId=e.boId,this.boType=e.boType,o.LayoutView.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions(),this.listenTo(this.collection,"error",function(){f.showMessage("info",this.collection.error.message)}),this.listenTo(this.collection,"sync",function(){this.setHeaderView(),this.tableHeaderRegion.show(this.headerView)}),this.options&&this.options.data&&this.options.data.expandedView&&this.options.data.expandedView.orderBy&&this.options.data.expandedView.orderBy.sortColumn){/{([^:}]+)(:([^}]+))?}/g.exec(this.options.data.expandedView.orderBy.sortColumn)||(h.error(_.errorOrderByMissingBraces)&&console.log(h.last),f.showMessage("info",_.errorOrderByMissingBraces))}},"initialize":function(e){this.setHeaderView(),this.setTableView(),this.setPagination(),e.collection&&(this.collection.fetched=!1)},"setTableView":function(){this.columns=this.collection.columns,this.connector=this.collection.node&&this.collection.node.connector||this.context.getObject(l);var e=[""];i.each(this.columns.models,function(t){!0===t.get("sort")&&-1===t.get("type")&&e.push(t.get("column_key"))});var t=g.clone();this.tableView=new r({"context":this.options.context,"haveDetailsRowExpandCollapseColumn":!0,"descriptionRowView":m,"descriptionRowViewOptions":{"firstColumnIndex":2,"lastColumnIndex":2,"showDescriptions":!0,"collapsedHeightIsOneLine":!0},"connector":this.connector,"collection":this.collection,"columns":this.columns,"tableColumns":t,"columnsWithSearch":e,"selectColumn":!0,"pageSize":this.options.data.pageSize,"orderBy":this.collection.options.boAttachments.attributes.sortExpanded||this.collection.orderBy,"nameEdit":!1,"tableTexts":{"zeroRecords":_.noAttachmentsFound},"maxColumnsDisplayed":10}),this.listenTo(this.tableView,"execute:defaultAction",function(e){var t={"node":e};this.trigger("before:defaultAction",t),t.cancel||this.defaultActionController.executeAction(e,{"context":this.options.context,"originatingView":this}).done(function(){this.trigger("executed:defaultAction",t)}.bind(this))})},"setPagination":function(){this.paginationView=new c({"collection":this.collection,"pageSize":this.options.data.pageSize})},"onRender":function(){this.collection.fetch({"reload":!0}),this.tableHeaderRegion.show(this.headerView),this.tableRegion.show(this.tableView),this.paginationRegion.show(this.paginationView)},"onBeforeShow":function(){this._renderTitleIconWaterMark()},"_renderTitleIconWaterMark":function(){var e=this.$el.find(".tile-type-image img")[0];e&&t(e).after('<span class="csui-icon xecmpf-icon-boattachment-overlay" title="'+_.businessAttachments+'"></span>')},"setHeaderView":function(){var e=new y({"commands":p,"originatingView":this,"context":this.context,"collection":this.collection,"toolbarItems":w,"data":{"extId":this.extId,"boType":this.boType,"boid":this.boId}}),t=this.titleBarIcon,i=new x({"imageUrl":t.src,"imageClass":t.cssClass,"title":this.title});this.headerView=new v({"iconRight":"icon-tileCollapse","leftView":e,"centerView":i})}});return i.extend(P.prototype,u),P}),csui.define("hbs!xecmpf/widgets/boattachments/impl/boattitem",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <span class="xecmpf-value">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"title"):t)?a(s,"value"):s,t))+"</span>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"reserved_by"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":9,"column":14},"end":{"line":11,"column":21}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"reserved_by_other"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":12,"column":14},"end":{"line":14,"column":21}}}))?s:"")},"2":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                  <span class="csui-icon icon-reserved_self" title="'+e.escapeExpression((s=null!=(s=a(i,"reserved_by")||(null!=t?a(t,"reserved_by"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"reserved_by","hash":{},"loc":{"start":{"line":10,"column":68},"end":{"line":10,"column":83}}}):s))+'"></span>\r\n'},"4":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                  <span class="csui-icon icon-reserved_other" title="'+e.escapeExpression((s=null!=(s=a(i,"reserved_by_other")||(null!=t?a(t,"reserved_by_other"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"reserved_by_other","hash":{},"loc":{"start":{"line":13,"column":69},"end":{"line":13,"column":90}}}):s))+'"></span>\r\n'},"6":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="xecmpf-label">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"title"):t)?a(s,"label"):s,t))+"</span>\r\n"},"8":function(e,t,i,n,o){return'            \x3c!-- add element to get proper distance to description --\x3e\r\n            <div class="xecmpf-description-spacer"></div>\r\n'},"10":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="xecmpf-right">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"topRight"):t)?a(s,"value"):s,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"loc":{"start":{"line":27,"column":12},"end":{"line":33,"column":19}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"topRight"):t)?a(s,"label"):s,{"name":"if","hash":{},"fn":e.program(14,o,0),"inverse":e.noop,"loc":{"start":{"line":34,"column":12},"end":{"line":36,"column":19}}}))?s:"")+"          </div>\r\n"},"11":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <span class="xecmpf-value">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"topRight"):t)?a(s,"value"):s,t))+"</span>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"topRight"):t)?a(s,"label"):s,{"name":"if","hash":{},"fn":e.program(12,o,0),"inverse":e.noop,"loc":{"start":{"line":29,"column":14},"end":{"line":32,"column":21}}}))?s:"")},"12":function(e,t,i,n,o){return'                \x3c!-- add element to get proper distance to value --\x3e\r\n                <div class="xecmpf-spacer"></div>\r\n'},"14":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <span class="xecmpf-label">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"topRight"):t)?a(s,"label"):s,t))+"</span>\r\n"},"16":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="xecmpf-body">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"description"):t)?a(s,"value"):s,t))+"</div>\r\n"},"18":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="xecmpf-left">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"bottomLeft"):t)?a(s,"label"):s,{"name":"if","hash":{},"fn":e.program(19,o,0),"inverse":e.noop,"loc":{"start":{"line":50,"column":12},"end":{"line":56,"column":19}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"bottomLeft"):t)?a(s,"value"):s,{"name":"if","hash":{},"fn":e.program(21,o,0),"inverse":e.noop,"loc":{"start":{"line":57,"column":12},"end":{"line":59,"column":19}}}))?s:"")+"          </div>\r\n"},"19":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <span class="xecmpf-label">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"bottomLeft"):t)?a(s,"label"):s,t))+"</span>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"bottomLeft"):t)?a(s,"value"):s,{"name":"if","hash":{},"fn":e.program(12,o,0),"inverse":e.noop,"loc":{"start":{"line":52,"column":14},"end":{"line":55,"column":21}}}))?s:"")},"21":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <span class="xecmpf-value">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"bottomLeft"):t)?a(s,"value"):s,t))+"</span>\r\n"},"23":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="xecmpf-right">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"bottomRight"):t)?a(s,"label"):s,{"name":"if","hash":{},"fn":e.program(24,o,0),"inverse":e.noop,"loc":{"start":{"line":64,"column":12},"end":{"line":70,"column":19}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"bottomRight"):t)?a(s,"value"):s,{"name":"if","hash":{},"fn":e.program(26,o,0),"inverse":e.noop,"loc":{"start":{"line":71,"column":12},"end":{"line":73,"column":19}}}))?s:"")+"          </div>\r\n"},"24":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <span class="xecmpf-label">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"bottomRight"):t)?a(s,"label"):s,t))+"</span>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"bottomRight"):t)?a(s,"value"):s,{"name":"if","hash":{},"fn":e.program(12,o,0),"inverse":e.noop,"loc":{"start":{"line":66,"column":14},"end":{"line":69,"column":21}}}))?s:"")},"26":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <span class="xecmpf-value">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"bottomRight"):t)?a(s,"value"):s,t))+"</span>\r\n"},"28":function(e,t,i,n,o){return'  <div class="xecmpf-attachmentitem-divider"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="xecmpf-attachmentitem-action-area">\r\n  <a class="xecmpf-nostyle" href="'+e.escapeExpression((a=null!=(a=l(i,"defaultActionUrl")||(null!=t?l(t,"defaultActionUrl"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"defaultActionUrl","hash":{},"loc":{"start":{"line":2,"column":34},"end":{"line":2,"column":54}}}):a))+'">\r\n    <div class="xecmpf-attachmentitem-border">\r\n        <div class="xecmpf-attachmentitem-top">\r\n            <span class="csui-type-icon '+e.escapeExpression((a=null!=(a=l(i,"icon")||(null!=t?l(t,"icon"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":5,"column":40},"end":{"line":5,"column":48}}}):a))+'" aria-hidden="true"></span>\r\n            <div class="xecmpf-title xecmpf-left">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"title"):t)?l(s,"value"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":10},"end":{"line":15,"column":17}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"title"):t)?l(s,"label"):s,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":16,"column":10},"end":{"line":18,"column":17}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"description"):t)?l(s,"value"):s,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":19,"column":10},"end":{"line":22,"column":17}}}))?s:"")+"        </div>\r\n\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"topRight"):t,{"name":"if","hash":{},"fn":e.program(10,o,0),"inverse":e.noop,"loc":{"start":{"line":25,"column":8},"end":{"line":38,"column":15}}}))?s:"")+'      </div>\r\n\r\n      <div class="xecmpf-attachmentitem-center">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"description"):t)?l(s,"value"):s,{"name":"if","hash":{},"fn":e.program(16,o,0),"inverse":e.noop,"loc":{"start":{"line":42,"column":8},"end":{"line":44,"column":15}}}))?s:"")+'      </div>\r\n\r\n      <div class="xecmpf-attachmentitem-bottom">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"bottomLeft"):t,{"name":"if","hash":{},"fn":e.program(18,o,0),"inverse":e.noop,"loc":{"start":{"line":48,"column":8},"end":{"line":61,"column":15}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"bottomRight"):t,{"name":"if","hash":{},"fn":e.program(23,o,0),"inverse":e.noop,"loc":{"start":{"line":62,"column":8},"end":{"line":75,"column":15}}}))?s:"")+"      </div>\r\n    </div>\r\n  </a>\r\n</div>\r\n\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"notLastItem"):t,{"name":"if","hash":{},"fn":e.program(28,o,0),"inverse":e.noop,"loc":{"start":{"line":81,"column":0},"end":{"line":83,"column":7}}}))?s:"")}});return i.registerPartial("xecmpf_widgets_boattachments_impl_boattitem",n),n}),csui.define("css!xecmpf/widgets/boattachments/impl/boattitem",[],function(){}),csui.define("xecmpf/widgets/boattachments/impl/boattitem.view",["module","csui/lib/underscore","csui/lib/marionette","csui/lib/jquery","csui/behaviors/default.action/default.action.behavior","csui/utils/base","csui/lib/numeral","csui/utils/contexts/factories/user","xecmpf/widgets/boattachments/impl/boattachmentutil","i18n!xecmpf/widgets/boattachments/impl/nls/lang","hbs!xecmpf/widgets/boattachments/impl/boattitem","css!xecmpf/widgets/boattachments/impl/boattitem"],function(e,t,i,n,o,s,a,l,r,c,d){return i.ItemView.extend({"behaviors":{"DefaultAction":{"behaviorClass":o}},"constructor":function(e){i.ItemView.prototype.constructor.apply(this,arguments),this.user=this.options.context.getModel(l)},"triggers":{"click .xecmpf-attachmentitem-border":"click:item"},"onClickItem":function(){this.triggerMethod("execute:defaultAction",this.model)},"className":"xecmpf-attachmentitem-object clearfix","template":d,"_checkValue":function(e){return!t.isUndefined(e.value)&&!t.isNull(e.value)},"_convValueToString":function(e){return!t.isString(e.value)&&(e.value=e.value+""),e},"serializeData":function(){var e=this._getObject(this.options.data||{}),t={};if(e.title&&(t.title=e.title),e.description&&(t.description=e.description),e.topRight&&this._checkValue(e.topRight)&&(t.topRight=this._convValueToString(e.topRight)),e.bottomLeft&&this._checkValue(e.bottomLeft)&&(t.bottomLeft=this._convValueToString(e.bottomLeft)),e.bottomRight&&this._checkValue(e.bottomRight)&&(t.bottomRight=this._convValueToString(e.bottomRight)),t.title||(t.title={"value":this.model.get("name")}),t.name||(t.name=this.model.get("name")),t.id||(t.id=this.model.get("id")),t.defaultActionUrl=o.getDefaultActionNodeUrl(this.model),this.model.get("id")!==this.model.collection.models[this.model.collection.models.length-1].get("id")&&(t.notLastItem=!0),this.model.get("reserved_user_id")){var i=c.reservedBy.replace("%1",this.model.get("reserved_user_id_expand").name_formatted);this.user.get("id")===this.model.get("reserved_user_id")?t.reserved_by=i:t.reserved_by_other=i}return t},"templateHelpers":function(e){return e},"_getObject":function(e){return t.reduce(e,function(e,t,i){if("object"!=typeof t)t=this.self._getValue(t);else if("object"==typeof t)if("value"===i||"label"===i){var n=s.getClosestLocalizedString(t);t=this.self._getValue(n)}else t=this.self._getObject(t);return e[i]=t,e},{},{"self":this})},"_getValue":function(e){for(var t,i,n,o,s,a=/{([^:}]+)(:([^}]+))?}/g,l=e;t=a.exec(e);)n=t[0],i=t[1],s=t[3],this.model.collection.columns.models&&(o=this._formatPlaceholder(i,s,this.model.attributes,this.model.collection.columns.models)),l=l.replace(n,o);return l},"_formatPlaceholder":function(e,i,n,o){var l,r,c,d=e;switch(r=t.find(o,function(t){return t.get("column_key")===e}),c=r&&r.get("type")||void 0,e=n[e+"_expand"]?e+"_expand":e,l=t.isUndefined(n[e])?"":n[e],c){case-7:"modify_date"!==e&&"modified"!==e||(l=n.modified||n.modify_date),l=s.formatDate(l);break;case 5:l=n[e+"_formatted"],null!==l&&void 0!==l||(l="");break;case 2:case 14:"size"===e||"modifiedby"===e||"createdby"===e?l=n[e+"_formatted"]:-1===e.indexOf("_expand",this.length-"_expand".length)||"User"!==n[e].type_name&&"Group"!==n[e].type_name||(l=s.formatMemberName(l));default:"currency"===i&&(l=a(l).format()),"object"==typeof l&&(l=n[d]||"")}return l}})}),csui.define("css!xecmpf/widgets/boattachments/impl/boattachments",[],function(){}),csui.define("xecmpf/widgets/boattachments/boattachments.view",["csui/lib/marionette","module","csui/lib/underscore","csui/lib/backbone","csui/lib/jquery","csui/utils/base","csui/controls/list/list.view","csui/utils/nodesprites","csui/behaviors/limiting/limiting.behavior","csui/behaviors/expanding/expanding.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/list/behaviors/list.view.keyboard.behavior","csui/controls/tile/behaviors/infinite.scrolling.behavior","csui/utils/contexts/factories/node","csui/controls/progressblocker/blocker","csui/utils/log","csui/controls/node-type.icon/node-type.icon.view","csui/utils/commands","csui/behaviors/collection.error/collection.error.behavior","csui/controls/globalmessage/globalmessage","xecmpf/widgets/boattachments/impl/boattachments.factory","xecmpf/widgets/boattachments/impl/boattachment.table/boattachmentstable.view","xecmpf/widgets/boattachments/impl/boattitem.view","xecmpf/models/boattachmentcontext/attachmentcontext.factory","xecmpf/widgets/boattachments/impl/boattachmentutil","xecmpf/models/boattachmentcontext/attachmentcontext.busobjinfo.factory","xecmpf/widgets/boattachments/impl/boattachment.table/toolbaritems","i18n!xecmpf/widgets/boattachments/impl/nls/lang","css!xecmpf/widgets/boattachments/impl/boattachments"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f,h,b,g,w,v,y,x,k,_,C,A,P,T,V){var D=t.config();return a.extend({"constructor":function(e){if(this.viewClassName="xecmpf-businessattachments",!e||!e.context)throw new Error("Context required to create AttachmentsView");if(e.businessAttachmentContext||(e.businessAttachmentContext=e.context.getObject(_,e.data),e.businessAttachmentContext.setAttachmentSpecific(y)),e.data||(e.data={}),e.data.businessattachment||(e.data.businessattachment={}),i.defaults(e.data.businessattachment.properties,{"busObjectId":"","busObjectType":"","extSystemId":""}),this.busobjinfo=e.businessAttachmentContext.getModel(A,{"data":e.data.businessattachment.properties,"attributes":e.data.businessattachment.properties}),a.prototype.constructor.apply(this,arguments),this.options.blockingParentView?f.delegate(this,this.options.blockingParentView):f.imbue(this),this.options.data.pageSize=D.defaultPageSize||30,this.configOptionsData=i.clone(e.data),this.lastFilterValue="",this.limit=0,this.listenTo(this.collection,"sync",this._renderBusinessAttachmentTitleIcon),this.listenTo(this.collection,"error",this._renderBusinessAttachmentTitleIcon),this.listenTo(this.busobjinfo,"missing:busobj:info",this._missingBusObjInfo),this.nodeModel=this.getContext().getObject(m,e.context.options),this.listenTo(this.nodeModel,"change:id",this._reset),this.listenTo(this.collection,"request",this.blockActions).listenTo(this.collection,"sync",function(){this.messageOnError=void 0,this.unblockActions.apply(this,arguments)}).listenTo(this.collection,"destroy",this.unblockActions).listenTo(this.collection,"error",function(){this.unblockActions.apply(this,arguments)}),this.listenTo(this.collection,"request",this.destroyEmptyView),this.options&&this.options.data&&this.options.data.collapsedView&&this.options.data.collapsedView.orderBy)if(i.isString(this.options.data.collapsedView.orderBy))h.error(T.errorOrderByMustNotBeString)&&console.log(h.last),v.showMessage("info",T.errorOrderByMustNotBeString);else if(this.options.data.collapsedView.orderBy.sortColumn){var t=/{([^:}]+)(:([^}]+))?}/g,n=t.exec(this.options.data.collapsedView.orderBy.sortColumn);n||(h.error(T.errorOrderByMissingBraces)&&console.log(h.last),v.showMessage("info",T.errorOrderByMissingBraces))}if(this.options&&this.options.data&&this.options.data.collapsedView){var o=[],s=this;["title","description","topRight","bottomLeft","bottomRight"].forEach(function(e){s.options.data.collapsedView[e]&&s.options.data.collapsedView[e].format&&o.push(e)}),o.length>0&&v.showMessage("info",i.str.sformat(T.errorFieldFormatTagUnrecognized,o.join(", ")))}},"getContext":function(){return this.options.businessAttachmentContext},"initialize":function(){this.collection=this.completeCollection},"onRender":function(){this._resetInfiniteScrolling(),a.prototype.onRender.call(this)},"onClickHeader":function(e){this.triggerMethod("expand")},"_resetInfiniteScrolling":function(){this.collection.setLimit(0,this.options.data.pageSize,!1)},"templateHelpers":function(){return{"title":this._getTitle(),"imageUrl":this._getTitleIcon().src,"imageClass":"xecmpf-attachmentstitleicon","searchPlaceholder":this._getSearchPlaceholder()}},"childEvents":{"render":"onRenderItem","before:destroy":"onBeforeDestroyItem"},"className":function(){var e=this.viewClassName,t=i.result(a.prototype,"className");return t&&(e=e+" "+t),e},"_reset":function(){this.collection&&this.collection.resetLimit(),this.ui.searchInput&&""!==this.ui.searchInput.val()&&(this.collection&&this.collection.clearFilter(!1),this.ui.searchInput.val("")),this.ui.searchInput&&this.ui.searchInput.is(":visible")&&this.searchClicked(new CustomEvent(""))},"dialogClassName":"xecmpf-businessattachments","behaviors":{"LimitedList":{"behaviorClass":r,"limit":function(){return this.limit},"completeCollection":function(){return this.getContext().getCollection(y,{"attributes":this._getCollectionAttributes(),"options":{"data":this.options.data,"query":this._getCollectionUrlQuery(),"delayRestCommands":!0,"commands":this._getCommands()}})}},"ExpandableList":{"behaviorClass":c,"expandedView":x,"expandedViewOptions":function(){return{"title":this._getTitle(),"titleBarIcon":this._getTitleIcon(),"data":i.clone(this.configOptionsData),"collection":this._getExpandedViewCollection(!0),"context":this.getContext(),"extId":this.busobjinfo.get("extSystemId"),"boType":this.busobjinfo.get("busObjectType"),"boId":this.busobjinfo.get("busObjectKey")}},"dialogClassName":function(){return this.dialogClassName}},"InfiniteScrolling":{"behaviorClass":p,"content":".binf-list-group","contentParent":".tile-content","fetchMoreItemsThreshold":80},"TabableRegion":{"behaviorClass":d},"ListViewKeyboardBehavior":{"behaviorClass":u},"BusinessAttachmentsCollectionError":{"behaviorClass":w,"collection":function(){return this.completeCollection}},"BusinessObjectInfoCollectionError":{"behaviorClass":w,"collection":function(){return this.busobjinfo}}},"_getCommands":function(){function e(e){var t=[];return i.mapObject(e,function(e,n){t=i.union(t,i.without(e.collection.pluck("signature"),"disabled"))}),t}var t=e.call(this,P),n=g.clone(),o=[];return n.each(function(e){-1===t.indexOf(e.get("signature"))&&o.push(e)}),n.remove(o,{"silent":!0}),n},"_getExpandedViewCollection":function(e){return e&&(this.expandViewCollection=this.completeCollection?this.completeCollection.clone():this.collection.clone(),this.expandViewCollection.businessObjectActions=this.completeCollection.businessObjectActions||this.collection.businessObjectActions,this.expandViewCollection.columns=this.completeCollection.columns||this.collection.columns,this.listenTo(this.expandViewCollection,{"add":function(e){this.collection.add(e,{"at":0})}})),this.expandViewCollection},"filterChanged":function(e){e&&"keyup"===e.type&&27===e.keyCode&&this.searchClicked();var t=this.ui.searchInput.val();this.lastFilterValue!==t&&(this.lastFilterValue=t,this.filterTimeout&&clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(function(e){e.filterTimeout=void 0,e._resetInfiniteScrolling(),e.collection.reset();var i;e._getFilterPropertyName&&(i=e._getFilterPropertyName());var n={};n[i||"name"]=t,e.collection.setFilter(n,{"fetch":!1})&&(e.messageOnError=T.errorFilteringFailed,e.collection.fetch())},1e3,this))},"_getTitleIcon":function(){var e={"src":"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==","cssClass":void 0};return this.busobjinfo.get("titleIcon")?(e.src=this.busobjinfo.get("titleIcon"),e.cssClass="csui-icon"):e.cssClass="xecmpf-attachmentstitleicondefault "+l.findClass("equals","type",848),e},"_missingBusObjInfo":function(){this.emptyViewOptions={"text":T.emptyBusinessObjectKey},this.showEmptyView()},"_renderBusinessAttachmentTitleIcon":function(){var e=this.$el.find(".tile-type-image")[0],t=e&&this.$el.find(".tile-type-image").find("img")[0];if(t){var i=this._getTitleIcon();o(t).attr("src")!==i.src&&o(t).attr("src",i.src),i.cssClass&&o(t).attr("class")!==i.cssClass&&o(t).attr("class",i.cssClass),o(t).attr("alt",""),
o(t).after('<span class="csui-icon xecmpf-icon-boattachment-overlay" title="'+T.businessAttachments+'"></span>')}},"_getTitle":function(){var e=T.dialogTitle;return this.options.data.title&&(e=s.getClosestLocalizedString(this.options.data.title,T.dialogTitle)),e},"_getSearchPlaceholder":function(){return T.searchPlaceholder.replace("%1",this._getTitle())},"childView":k,"childViewOptions":function(){return i.defaults(this.options.data,{"collapsedView":{"title":{"value":"{name}"}}}),i.defaults(this.options.data.collapsedView.title,{"value":"{name}"}),(i.isEmpty(this.options.data.collapsedView.title)||i.isEmpty(this.options.data.collapsedView.title.value))&&(this.options.data.collapsedView.title={"value":"{name}"}),{"context":this.options.context,"data":this.options.data.collapsedView}},"emptyViewOptions":{"templateHelpers":function(){var e=this._parent.busobjinfo.invalidConfigurationShown?this._parent.busobjinfo.invalidErrorMessage:"";return{"text":this._parent._getNoResultsPlaceholder()+e}}},"_getCollectionAttributes":function(){var e=this.options.data.busObjectId&&this.options.data||this.options.data&&this.options.data.businessattachment&&this.options.data.businessattachment.properties||{};return{"busObjectType":e&&e.busObjectType,"extSystemId":e&&e.extSystemId,"busObjectId":e&&e.busObjectId,"sortExpanded":this.options.data.expandedView&&C.orderByAsString(this.options.data.expandedView.orderBy)||this._getDefaultSortOrder()||void 0,"sortCollapsed":this.options.data.collapsedView&&C.orderByAsString(this.options.data.collapsedView.orderBy)||this._getDefaultSortOrder()||void 0}},"_getDefaultSortOrder":function(){return this._getFilterPropertyName()?this._getFilterPropertyName()+" asc":void 0},"_getCollectionUrlQuery":function(){var e,t=this.options,i={};return t.data.collapsedView&&(e=C.orderByAsString(t.data.collapsedView.orderBy)),e||(e=this._getDefaultSortOrder()),e&&(i.sort=e),i},"_getFirstPlaceholder":function(e){for(var t,i,n=/{([^:}]+)(:([^}]+))?}/g;t=n.exec(e);)if(t[0],t[1]){i=t;break}return i},"_getFilterPropertyName":function(){var e;if(this.options&&this.options.data&&this.options.data.collapsedView&&this.options.data.collapsedView.title&&this.options.data.collapsedView.title.value){var t=this._getFirstPlaceholder(this.options.data.collapsedView.title.value);t&&(e=t[1])}return e},"getElementByIndex":function(e){if(isNaN(e)||e<0)return null;var t=this.$(i.str.sformat(".xecmpf-attachmentitem-object:nth-child({0}) .xecmpf-attachmentitem-border",e+1));return this.$(t[0])},"_getNoResultsPlaceholder":function(){var e=this.options.data&&this.options.data.collapsedView&&this.options.data.collapsedView.noResultsPlaceholder;return e=e?s.getClosestLocalizedString(e,T.noResultsPlaceholder):T.noResultsPlaceholder},"collectionEvents":{"reset":"onCollectionSync"},"onCollectionSync":function(){this.synced=!0},"isEmpty":function(){return this.synced&&0===this.collection.models.length},"onRenderItem":function(e){e._nodeIconView=new b({"el":e.$(".csui-type-icon").get(0),"node":e.model}),e._nodeIconView.render()},"onBeforeDestroyItem":function(e){e._nodeIconView&&e._nodeIconView.destroy()}})}),csui.define("css!xecmpf/widgets/workspaces/controls/tile/impl/tile",[],function(){}),csui.define("xecmpf/widgets/workspaces/controls/tile/tile.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/controls/tile/tile.view","css!xecmpf/widgets/workspaces/controls/tile/impl/tile"],function(e,t,i,n,o,s,a,l){return l.extend({"constructor":function(e){l.prototype.constructor.apply(this,arguments)}})}),csui.define("xecmpf/widgets/workspaces/factories/workspace.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","xecmpf/widgets/workspaces/models/workspace.collection","csui/utils/contexts/factories/connector","csui/utils/commands"],function(e,t,i,n,o,s,a){"use strict";return n.extend({"propertyPrefix":"workspaces","constructor":function(e,l){l||(l={}),n.prototype.constructor.apply(this,arguments);var r=this.options.workspaces||{};r instanceof i.Collection||(r=new o(r.models,t.extend({},this.options.workspaces,{"autoreset":!0,"commands":a.getAllSignatures(),"includeActions":!1,"connector":e.getObject(s)}))),this.property=r},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("xecmpf/widgets/workspaces/factories/workspace.types.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","xecmpf/widgets/workspaces/models/workspace.types.collection","csui/utils/contexts/factories/connector"],function(e,t,i,n,o,s){return n.extend({"propertyPrefix":"workspaceTypes","constructor":function(e,t){n.prototype.constructor.apply(this,arguments);var i=new o(void 0,{"autoreset":!0,"config":this.options.workspaceTypes,"connector":e.getObject(s)});this.property=i},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("xecmpf/widgets/workspaces/controls/workspaces.table/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/workspaces/controls/workspaces.table/impl/nls/root/lang",{"NodeTableNoFilteredItems":"There are no early workspaces to display.","createNew":"Create new","createNewTooltip":"Create business workspace"}),csui.define("xecmpf/widgets/workspaces/controls/workspaces.table/tabletoolbar.view",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/controls/toolbar/toolitem.model","csui/controls/toolbar/toolitems.filtered.model","csui/controls/toolbar/toolbar.view","csui/utils/commands","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/tabletoolbar/tabletoolbar.view","csui/utils/url","xecmpf/widgets/workspaces/factories/workspace.types.factory","i18n!xecmpf/widgets/workspaces/controls/workspaces.table/impl/nls/lang"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f,h,b){"use strict";var g=d.extend({"cssPrefix":"binf-","ui":{"dropdown":".binf-dropdown-toggle"},"events":{"click @ui.dropdown":"adjustDropdown"},"_makeDropDown":function(){var e='<a href="#" class="'+this.cssPrefix+'dropdown-toggle csui-acc-focusable"  data-binf-toggle="dropdown" aria-expanded="true"';return this.options.dropDownText?e+=' title="'+this.options.dropDownText+'">':e+=">",this.options.dropDownIcon?e+='<span class="'+this.options.dropDownIcon+'"></span>':this.options.dropDownText&&(e+=this.options.dropDownText),e+="<span class='toolbarlabel'>"+b.createNew+"</span></a>"},"adjustDropdown":function(e){if(this.collection.length<=1){this.$el.find("."+this.cssPrefix+"dropdown-menu").css("display","none");var t={"toolItem":this.collection.at(0)};this.children.first().triggerMethod("before:toolitem:action",t),this.children.first().triggerMethod("toolitem:action",t)}}}),w=m.extend({"constructor":function(e){s.LayoutView.prototype.constructor.apply(this,arguments),this.context=this.options.context,this.commands=this.options.commands||u,this.toolbarNames=["add"];var t=this.options.toolbarItems.addToolbar,i=this.addToolbarView=new g(n.extend({"collection":new c(t,{"status":{},"commands":this.commands,"delayedActions":!1}),"toolbarName":"add"},t.options));this.listenTo(i,"childview:toolitem:action",function(e,t){this.trigger("toolbarItem:clicked",t.toolItem.attributes.commandData)}).listenTo(i,"dom:refresh",function(){this.triggerMethod("refresh:tabindexes")}),this._updateAddToolbar(),this.propagateEventsToRegions()},"updateForSelectedChildren":function(e){},"_addMenuItems":function(e,t){t.models.forEach(function(t){n.isEmpty(t.get("templates"))||n.each(t.get("templates"),function(i){var n=new r({"signature":"AddConnectedWorkspace","icon":"icon icon-toolbarAdd","svgId":"themes--carbonfiber--image--generated_icons--action_add32","name":b.createNewTooltip,"group":"conws","commandData":{"wksp_type_name":t.get("wksp_type_name"),"wksp_type_id":t.get("wksp_type_id"),"template":i,"type":i.subType,"rm_enabled":t.get("rm_enabled")}});e.push(n)})})},"onBeforeShow":function(){this.options.toolbarItems.addToolbar.reset(this.toolbarItems)},"_updateAddToolbar":function(){this.toolbarItems=[],this.workspaceTypesCollection=this.options.context.getCollection(h,{"busObjectType":this.options.data.busObjectType,"extSystemId":this.options.data.extSystemId}),this._addMenuItems(this.toolbarItems,this.workspaceTypesCollection)}});return n.extend(w.prototype,p),w}),csui.define("xecmpf/widgets/workspaces/controls/workspaces.table/table.columns",["csui/lib/backbone"],function(e){var t=e.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),i=e.Collection.extend({"model":t,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new i(this.map(function(e){return e.attributes}))}});return new i([{"key":"name","sequence":1,"permanentColumn":!0},{"key":"modify_date","sequence":2,"permanentColumn":!0}])}),csui.define("xecmpf/widgets/workspaces/controls/workspaces.table/toolbaritems",["csui/lib/underscore","csui/utils/base","csui/controls/toolbar/toolitems.factory","i18n!xecmpf/widgets/workspaces/controls/workspaces.table/impl/nls/lang"],function(e,t,i,n){return{"addToolbar":new i({"add":[]},{"maxItemsShown":0,"dropDownIcon":"icon icon-toolbarAdd","dropDownText":n.createNewTooltip,"dropDownSvgId":"themes--carbonfiber--image--generated_icons--action_add32","addTrailingDivider":!1})}}),csui.define("hbs!xecmpf/widgets/workspaces/controls/workspaces.table/impl/workspacestable",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div id="tabletoolbar"></div>\r\n<div id="tableview"></div>\r\n<div id="paginationview"></div>\r\n'}});return i.registerPartial("xecmpf_widgets_workspaces_controls_workspaces.table_impl_workspacestable",n),n}),csui.define("css!xecmpf/widgets/workspaces/controls/workspaces.table/impl/workspacestable",[],function(){}),csui.define("xecmpf/widgets/workspaces/controls/workspaces.table/workspaces.table.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/utils/contexts/factories/connector","csui/controls/progressblocker/blocker","csui/controls/table/cells/name/name.view","csui/behaviors/default.action/default.action.behavior","xecmpf/widgets/workspaces/factories/workspace.factory","csui/utils/contexts/factories/columns","csui/controls/table/table.view","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","xecmpf/widgets/workspaces/controls/workspaces.table/tabletoolbar.view","xecmpf/widgets/workspaces/controls/workspaces.table/table.columns","xecmpf/widgets/workspaces/controls/workspaces.table/toolbaritems","csui/controls/pagination/nodespagination.view","i18n!xecmpf/widgets/workspaces/controls/workspaces.table/impl/nls/lang","hbs!xecmpf/widgets/workspaces/controls/workspaces.table/impl/workspacestable","css!xecmpf/widgets/workspaces/controls/workspaces.table/impl/workspacestable"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f,h,b,g,w,v,y,x){var k=e.config();i.defaults(k,{"defaultPageSize":30,"clearFilterOnChange":!0,"resetOrderOnChange":!1,"resetLimitOnChange":!0,"fixedFilterOnChange":!1}),c.prototype.getValueData=function(){var e=this.options.column,t=this.model,i=t.get(e.name);return{"defaultAction":"displayWorkspace","defaultActionUrl":"","contextualMenu":e.contextualMenu,"name":i,"inactive":t.get("inactive")}};var _=o.LayoutView.extend({"template":y,"className":"xecmpf_workspacestable","regions":{"tableToolbarRegion":"#tabletoolbar","tableRegion":"#tableview","paginationRegion":"#paginationview"},"ui":{"outerTableContainer":"#outertablecontainer","innerTableContainer":"#innertablecontainer","tableView":"#tableview","paginationView":"#paginationview"},"behaviors":{"DefaultAction":{"behaviorClass":d}},"constructor":function(e){e||(e={}),i.defaults(e,{"data":{},"pageSize":k.defaultPageSize,"toolbarItems":g,"defaultPageSize":k.defaultPageSize,"clearFilterOnChange":k.clearFilterOnChange,"resetOrderOnChange":k.resetOrderOnChange,"resetLimitOnChange":k.resetLimitOnChange,"fixedFilterOnChange":k.fixedFilterOnChange}),this.context=e.context,this.connector=this.context.getObject(l);var n=e.data.height||e.height;n&&this.$el.height(n),r.imbue(this),o.LayoutView.prototype.constructor.apply(this,arguments),this.collection=this.options.collection=this.context.getCollection(u,{"attributes":"early"}),this.columns=this.collection.columns,this.tableColumns=b.deepClone(),this._setToolBar(g),this.defaultActionController.executeAction=function(e){return t.Deferred().resolve()},this._setTableView(),this._setPagination(),this.propagateEventsToRegions()},"_setTableView":function(){this.tableView=new m({"selectRows":"none","context":this.options.context,"connector":this.connector,"collection":this.collection,"columns":this.columns,"selectColumn":!1,"tableColumns":this.tableColumns,"pageSize":this.options.data.pageSize,"originatingView":this,"columnsWithSearch":["name"],"orderBy":this.options.orderBy,"filterBy":this.options.filterBy,"blockingParentView":this,"tableTexts":{"zeroRecords":v.NodeTableNoFilteredItems}}),this.listenTo(this.tableView,"render",function(){this.tableView.$el.append(t("<div>")[0])}),this._setTableViewEvents()},"_setTableViewEvents":function(){return this.listenTo(this.tableView,"dom:refresh",function(){t(".csui-nodetable")[0]&&!t(".csui-not-ready")[0]&&t(".csui-nodetable").trigger("focus")}),this.listenTo(this.tableView,"execute:defaultAction",function(e){var t={"node":e};if(this.trigger("before:defaultAction",t),!t.cancel){var i=this;this.defaultActionController.executeAction(e,{"context":this.options.context,"originatingView":this}).done(function(){i.trigger("executed:defaultAction",t)})}}),!0},"_setToolBar":function(e){return this.tableToolbarView=new h(i.defaults(this.options,{"context":this.options.context,"toolbarItems":e,"collection":this.collection,"originatingView":this})),this.listenTo(this.tableToolbarView,"before:execute:command",this._beforeExecuteCommand),this.listenTo(this.tableToolbarView,"after:execute:command",this._toolbarActionTriggered),this.listenTo(this.tableToolbarView,"toolbarItem:clicked",function(e){this.trigger("toolbarItem:clicked",e)}),!0},"_setPagination":function(){return this.paginationView=new w({"collection":this.collection,"pageSize":this.options.data.pageSize||this.options.pageSize,"defaultDDList":this.options.ddItemsList,"externalWidget":this.options.externalWidget}),!0},"onShow":function(){i.each(this.regionManager._regions,function(e){e.currentView&&e.currentView.triggerMethod("show")})},"onAfterShow":function(){i.each(this.regionManager._regions,function(e){e.currentView&&e.currentView.triggerMethod("after:show")})},"onRender":function(){this.tableToolbarRegion.show(this.tableToolbarView),this.tableRegion.show(this.tableView),this.paginationRegion.show(this.paginationView)}});return i.extend(_.prototype,f),_}),csui.define("xecmpf/widgets/workspaces/pages/select.workspace/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/workspaces/pages/select.workspace/impl/nls/root/lang",{"pageTitle":"Create or complete business workspace"}),csui.define("hbs!xecmpf/widgets/workspaces/pages/select.workspace/impl/select.workspace",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div id="content"></div>\r\n\r\n'}});return i.registerPartial("xecmpf_widgets_workspaces_pages_select.workspace_impl_select.workspace",n),n}),csui.define("css!xecmpf/widgets/workspaces/pages/select.workspace/impl/select.workspace",[],function(){}),csui.define("xecmpf/widgets/workspaces/pages/select.workspace/select.workspace.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","xecmpf/widgets/workspaces/controls/tile/tile.view","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","xecmpf/widgets/workspaces/controls/workspaces.table/workspaces.table.view","i18n!xecmpf/widgets/workspaces/pages/select.workspace/impl/nls/lang","hbs!xecmpf/widgets/workspaces/pages/select.workspace/impl/select.workspace","css!xecmpf/widgets/workspaces/pages/select.workspace/impl/select.workspace"],function(e,t,i,n,o,s,a,l,r,c,d,u,p){var m=o.LayoutView.extend({"tagName":"div","id":"xecmpf-select_wksp","className":"xecmpf-page","template":u,"regions":{"content":"#content"},"constructor":function(e){o.LayoutView.prototype.constructor.apply(this,arguments),this.context=this.options.context,this.propagateEventsToRegions()},"_getController":function(){return this.options.status.wksp_controller},"onBeforeShow":function(){var e=this.options;this.tileView=new l({"title":d.pageTitle,"contentView":c,"contentViewOptions":e}),this.getRegion("content").show(this.tileView),this.listenTo(this.tileView.contentView,"toolbarItem:clicked",function(o){return i.defaults(e.status,{"workspaceType":new n.Model(o)}),this._getController().createWorkspace(e),t.Deferred().resolve()}),this.listenTo(this.tileView.contentView,"executed:defaultAction",function(t){e.status||(e.status={}),e.status.workspace=t.node,this._getController().updateWorkspace(e)})}});return i.extend(m.prototype,r),m}),csui.define("css!xecmpf/widgets/workspaces/controls/footer/impl/footer",[],function(){}),csui.define("xecmpf/widgets/workspaces/controls/footer/footer.view",["csui/lib/marionette","csui/lib/underscore","csui/lib/jquery","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/behaviors/keyboard.navigation/tabables.behavior","css!xecmpf/widgets/workspaces/controls/footer/impl/footer"],function(e,t,i,n){var o=e.ItemView.extend({"tagName":"button","className":"binf-btn","template":!1,"triggers":{"click":"click"},"behaviors":{"TabableRegion":{"behaviorClass":n}},"constructor":function(t){e.ItemView.prototype.constructor.apply(this,arguments)},"isTabable":function(){return this.$el.is(":not(:disabled)")&&this.$el.is(":not(:hidden)")},"currentlyFocusedElement":function(){return-1===this.$el.prop("tabindex")&&this.$el.prop("tabindex",0),this.$el},"onRender":function(){var e=this.$el;e.text(this.model.get("label")),e.addClass(this.model.get("primary")?"binf-btn-primary":"binf-btn-default"),e.attr("title",this.model.get("toolTip")?this.model.get("toolTip"):""),this.model.get("separate")&&e.addClass("cs-separate"),this.updateButton(this.model)},"updateButton":function(e){var t=this.$el;void 0!==e.get("hidden")&&(e.get("hidden")?t.addClass("hidden"):t.removeClass("hidden")),!0===e.get("primary")?(t.removeClass("binf-btn-default"),t.addClass("binf-btn-primary")):t.addClass("binf-btn-default"),void 0!==e.get("disabled")&&t.prop("disabled",e.get("disabled"))}});return e.CollectionView.extend({"id":"wksp_footer","tagName":"div","className":"binf-modal-footer","childView":o,"constructor":function(t){e.CollectionView.prototype.constructor.apply(this,arguments),this.listenTo(this,"childview:click",this.onClickButton)},"onDomRefresh":function(){this.children.each(function(e){e.trigger("dom:refresh")})},"onClickButton":function(e){e.$el.prop("disabled",!0),e.model.get("click")&&e.model.get("click")().fail(function(){e.$el.prop("disabled",!1)})},"update":function(){var e=this;this.collection.models.forEach(function(t){e.children.findByModel(t).updateButton(t)})}})}),csui.define("xecmpf/widgets/workspaces/pages/create.workspace/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1});csui.define("xecmpf/widgets/workspaces/pages/create.workspace/impl/nls/root/lang",{"pageTitle":"Create business workspace","createWorkspace":"Create","cancel":"Cancel","failedToCreateItem":"Failed to create the new item.","nameIsGeneratedAutomatically":"Workspace name is generated automatically.","errorGettingCreateForm":"Error getting form for workspace creation.","businessWorkspaceTypeName":"Business Workspace","createWorkspaceTooltip":"Create business workspace"}),csui.define("hbs!xecmpf/widgets/workspaces/pages/create.workspace/impl/create.workspace",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div id="content" class="cs-properties-wrapper"></div>\r\n<div id="footer"></div>\r\n'}});return i.registerPartial("xecmpf_widgets_workspaces_pages_create.workspace_impl_create.workspace",n),n}),csui.define("css!xecmpf/widgets/workspaces/pages/create.workspace/impl/create.workspace",[],function(){}),csui.define("xecmpf/widgets/workspaces/pages/create.workspace/create.workspace.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/utils/namedsessionstorage","xecmpf/widgets/workspaces/controls/tile/tile.view","xecmpf/widgets/workspaces/controls/footer/footer.view","csui/widgets/metadata/metadata.add.item.controller","csui/widgets/metadata/metadata.action.one.item.properties.view","conws/models/workspacecreateforms","conws/models/metadata.controller","csui/models/node/node.model","conws/models/metadata.controller","csui/utils/contexts/factories/connector","csui/dialogs/modal.alert/modal.alert","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/behaviors/keyboard.navigation/tabables.behavior","csui/widgets/metadata/metadata.properties.view","csui/utils/url","i18n!xecmpf/widgets/workspaces/pages/create.workspace/impl/nls/lang","hbs!xecmpf/widgets/workspaces/pages/create.workspace/impl/create.workspace","css!xecmpf/widgets/workspaces/pages/create.workspace/impl/create.workspace"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f,h,b,g,w,v,y,x,k,_,C){var A=o.LayoutView.extend({"tagName":"div","id":"xecmpf-create_wksp","className":"xecmpf-page","template":_,"regions":{"content":"#content","footer":"#footer"},"behaviors":{"TabablesBehavior":{"behaviorClass":v,"recursiveNavigation":!0,"containTabFocus":!0}},"constructor":function(e){o.LayoutView.prototype.constructor.apply(this,arguments);var s=this;this.context=this.options.context||{},this.buttonCollecion=new n.Collection,this.propagateEventsToRegions(),this.on("dom:refresh",function(){if(t._data){var e=t._data(this.el,"events");if(e&&e.keydown&&e.keydown.length>1){var n=i.isEmpty(e.keydown[1].namespace)?e.keydown[1].type:e.keydown[1].type+"."+e.keydown[1].namespace;n&&e.keydown[1].handler&&s.$el.off(n,e.keydown[1].handler)}}}),csui.require(["classifications/widgets/metadata/general.fields/classifications/metadata.general.form.field.controller","classifications/utils/commands/add.classifications"],function(e,t){e.prototype.getGeneralFormFieldsForCreate=function(){return null},t.prototype.enabled=function(){return!1}},function(){})},"_getController":function(){return this.options.status.wksp_controller},"_create":function(e){var n=new l("create_complete_wksp"),o=this.metadataAddItemPropView.getValues(),s=t.Deferred();return i.isEmpty(o)?s.reject():(o.bo_id=this.options.data.busObjectId,o.type=848,this.metadataController.createItem(this.node,o).done(i.bind(function(t){if(t){var o=t.results&&t.results.data,s=o&&o.properties&&o.properties.id;i.extend(e.status,{"workspaceNode":new f({"id":s,"container":!0}),"viewMode":{"mode":e.data.viewMode?e.data.viewMode.mode:"folderBrowse"}}),n.set(e.data.busObjectType+"-"+e.data.busObjectId,s),this._getController().displayWorkspace(e)}},this)).fail(function(e){var t=k.failedToCreateItem;e&&(e.responseJSON&&e.responseJSON.error?t=e.responseJSON.error:e.responseText&&(t=e.responseText),g.showError(t)),s.reject()})),s.promise()},"_createFormCollection":function(){var e=this.options||{},n=e.status||{},o=e.context||{},l=n.workspaceType,r=this;this.formCollection=new p(void 0,i.defaults(e,{"type":l.get("type"),"wsType":l.get("wksp_type_id"),"node":new f({},{"connector":o.getObject(b)}),"actionContext":{"mode":"create"}})),this.formCollection.bo_id=e.data.busObjectId,this.formCollection.url=function(){var n={"bo_id":e.data.busObjectId,"bo_type":e.data.busObjectType,"ext_system_id":e.data.extSystemId},s="forms/businessworkspaces/create?"+t.param(i.omit(n,function(e){return null===e||void 0===e||""===e})),a=o.getObject(b).getConnectionUrl().getApiBase("v2");return x.combine(a,s)},this.formCollection.on("error",function(e,t,o){var l=t&&new a.Error(t).message||k.errorGettingCreateForm;s.error("Fetching the create forms failed: {0}",l)&&console.error(s.last),g.showError(l),i.isEmpty(n.mode)&&r.buttonCollecion.length>=2&&r.buttonCollecion.at(1).set("disabled",!1),r.tileView.contentView.metadataHeaderView.metadataItemNameView.remove(),r.footerView&&r.footerView.update()}),this.formCollection.on("sync",function(){r._updateNameAndView(r.node,r.formCollection)})},"_updateNameAndView":function(e,t){var i=t.at(0),n=i.get("data");if(n){var o=n.name;s.debug("name fetched and used: {0}",o)&&console.log(s.last),e.set({"name":o})}else s.debug("name set to empty.")&&console.log(s.last),e.set({"name":""});var a=this.tileView.contentView,l=a&&a.metadataHeaderView,r=l&&l.metadataItemNameView;if(r){var c=i.get("schema"),d=!!(c&&c.properties&&c.properties.name&&c.properties.name.readonly),u=d?k.nameIsGeneratedAutomatically:void 0;r.setPlaceHolder(u),!!d!=!!r.readonly&&r.setReadOnly(d)}},"render":function(){var e=this,n=this.options||{},s=n.context||{},a=this.options.status||{};o.LayoutView.prototype.render.apply(this,arguments),this.buttonCollecion.add({"click":i.bind(this._create,this,this.options),"disabled":!0,"primary":!1,"label":k.createWorkspace,"toolTip":k.createWorkspaceTooltip}),i.isEmpty(a.mode)&&this.buttonCollecion.add({"click":i.bind(function(){var e=t.Deferred();return this._getController().selectWorkspace(),e.resolve(),e.promise()},this,this.options),"disabled":!0,"primary":!1,"toolTip":k.cancel,"label":k.cancel,"separate":!1}),this.footerView=new c({"collection":this.buttonCollecion}),this.node=new f({"type_name":k.businessWorkspaceTypeName,"type":848,"container":!0,"rm_enabled":this.options.status.workspaceType.get("rm_enabled"),"name":""},{"connector":s.getObject(b)}),this._createFormCollection(),this.metadataController=new m(void 0,{});var l=u.extend({"constructor":function(t){u.prototype.constructor.apply(this,arguments),void 0!==this.metadataPropertiesView&&this.metadataPropertiesView.stopListening(this),this.metadataPropertiesView=new y({"node":e.node,"context":e.options.context,"formMode":"create","action":"create","metadataView":this,"formCollection":e.formCollection}),this.listenTo(this.metadataPropertiesView,"render:forms",function(){e.buttonCollecion.at(0).set("disabled",!1),i.isEmpty(a.mode)?(e.buttonCollecion.at(1).set("disabled",!1),e.buttonCollecion.at(0).set("primary",!0)):e.buttonCollecion.at(0).set("primary",!0),e.footerView.update()}),this.listenTo(this.metadataPropertiesView,"before:render",function(){var e=this.metadataPropertiesView.collection.findWhere({"id":"conws-reference"});e&&this.metadataPropertiesView.collection.remove(e,{"silent":!0})})}});this.tileView=new r({"title":k.pageTitle,"contentView":l,"contentViewOptions":{"model":this.node,"context":s,"action":"create","formCollection":this.formCollection}})},"onBeforeShow":function(){this.content.show(this.tileView),this.footer.show(this.footerView),this.metadataAddItemPropView=this.tileView.contentView}});return i.extend(A.prototype,w),A}),csui.define("xecmpf/widgets/workspaces/pages/display.workspace/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/workspaces/pages/display.workspace/impl/nls/root/lang",{"failedAuthentication":"Authentication failed."}),csui.define("hbs!xecmpf/widgets/workspaces/pages/display.workspace/impl/display.workspace",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div id="display_wksp_content">\r\n</div>'}});return i.registerPartial("xecmpf_widgets_workspaces_pages_display.workspace_impl_display.workspace",n),n}),csui.define("css!xecmpf/widgets/workspaces/pages/display.workspace/impl/display.workspace",[],function(){}),csui.define("xecmpf/widgets/workspaces/pages/display.workspace/display.workspace.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/lib/radio","csui/integration/folderbrowser2/folderbrowser2.widget","csui/utils/contexts/factories/connector","csui/behaviors/keyboard.navigation/tabables.behavior","xecmpf/utils/commands/folderbrowse/open.full.page.workspace","csui-ext!xecmpf/widgets/workspaces/pages/display.workspace/display.workspace.view","csui/dialogs/modal.alert/modal.alert","i18n!xecmpf/widgets/workspaces/pages/display.workspace/impl/nls/lang","hbs!xecmpf/widgets/workspaces/pages/display.workspace/impl/display.workspace","css!xecmpf/widgets/workspaces/pages/display.workspace/impl/display.workspace"],function(e,t,i,n,o,s,a,l,r,c,d,u){var p=n.channel("xecmpf-workspace");return i.LayoutView.extend({"template":u,"tagName":"div","id":"xecmpf-display_wksp","className":"xecmpf-page","regions":{"content":"#display_wksp_content"},"constructor":function(e){e||(e={}),i.LayoutView.prototype.constructor.apply(this,arguments)},"behaviors":{"TabablesBehavior":{"behaviorClass":a}},"authenticateXecm":function(t,i){var n=this;if(i=i||e.Deferred(),this.connector.connection.session&&this.connector.connection.session.ticket){var o=new XMLHttpRequest,s=new l;o.onreadystatechange=function(){4===o.readyState&&(200===o.status?i.resolve():i.reject(d.failedAuthentication+new Error(o.statusText)))},s.authenticate(o,t,this.connector)}else this.options.context.once("sync",function(){n.authenticateXecm(t,i)});return i.promise()},"onShow":function(){this.connector=this.options.context.getObject(s);var e=this.options||{},i=e.status||{},n=(window.csui&&window.csui.require||window.require,e.data&&e.data.folderBrowserWidget&&e.data.folderBrowserWidget.commands||{}),a=n["back.to.last.fragment"]||{},l=!!t.isUndefined(a.enabled)||a.enabled,d=n["open.full.page.workspace"]||{},u=!!t.isUndefined(d.enabled)||d.enabled,m=!!t.isUndefined(d.fullPageOverlay)||d.fullPageOverlay,f=e.data.viewMode?e.data.viewMode.mode:"folderBrowse",h=n["search.container"]||{},b=!!t.isUndefined(h.enabled)||h.enabled;if("fullPage"===f){this.cgiUrl=this.connector&&this.connector.connection&&this.connector.connection.url?this.connector.connection.url.replace("/api/v1",""):"";var g=this;this.authenticateXecm(this.cgiUrl).done(function(){csui.require(["xecmpf/widgets/integration/folderbrowse/full.page.workspace.view","csui/utils/url"],function(e,i){var n=t.extend(g.options,{"nodeID":g.options.status.workspaceNode.get("id"),"connector":g.connector}),o=new e(n);g.content.show(o)})}).fail(function(e){c.showError(e.toString()),console.error(e)})}else if(void 0!==r&&r.length>0){var w=new r[0](e);if(this.connector.connection.session)this.content.show(w);else{var v=this;this.options.context.once("sync",function(){v.content.show(w)})}}else csui.require.config({"config":{"csui/utils/commands/back.to.last.fragment":{"enabled":l},"xecmpf/utils/commands/folderbrowse/search.container":{"enabled":b},"xecmpf/utils/commands/folderbrowse/open.full.page.workspace":{"enabled":u,"fullPageOverlay":m}}}),this.$el.addClass("binf-widgets xecm-page-widget"),this.browser=new o({"breadcrumb":!l,"connection":this.connector.connection,"start":{"id":i.workspaceNode.attributes.id}}),t.extend(this.browser.options.context.options,{"suppressReferencePanel":!0,"viewMode":this.options.data.viewMode||this.options.status.viewMode,"initialWkspId":this.options.status.workspaceNode.get("id"),"navigateMode":this.options.data.navigateMode,"enableWorkspaceNavigation":!1}),v=this,this.listenTo(p,"xecm:delete:workspace",function(){p.trigger("xecm:close:fullpage:overlay"),t.defaults(v.options.data,{"deletecallback":!0}),v.options.status.wksp_controller.selectWorkspace(v.options)}),this.$el.find("#display_wksp_content").addClass("csui-folderbrowser"),
this.browser.show({"placeholder":"#display_wksp_content"})},"onDestroy":function(){this.browser&&this.browser.destroy()}})}),csui.define("xecmpf/widgets/workspaces/pages/update.workspace/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/workspaces/pages/update.workspace/impl/nls/root/lang",{"pageTitle":"Complete workspace","completeWorkspace":"Complete","completeWorkspaceTooltip":"Complete workspace","failedToUpdateItem":"Failed to update the item.","cancel":"Cancel","nameIsGeneratedAutomatically":"Workspace name is generated automatically.","errorGettingCreateForm":"Error getting form for workspace creation."}),csui.define("hbs!xecmpf/widgets/workspaces/pages/update.workspace/impl/update.workspace",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div id="content" class="cs-properties-wrapper"></div>\r\n<div id="footer"></div>\r\n\r\n'}});return i.registerPartial("xecmpf_widgets_workspaces_pages_update.workspace_impl_update.workspace",n),n}),csui.define("css!xecmpf/widgets/workspaces/pages/update.workspace/impl/update.workspace",[],function(){}),csui.define("xecmpf/widgets/workspaces/pages/update.workspace/update.workspace.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/utils/namedsessionstorage","xecmpf/widgets/workspaces/controls/tile/tile.view","xecmpf/widgets/workspaces/controls/footer/footer.view","csui/widgets/metadata/metadata.properties.view","csui/widgets/metadata/metadata.action.one.item.properties.view","csui/models/node/node.model","csui/utils/contexts/factories/connector","csui/dialogs/modal.alert/modal.alert","csui/controls/progressblocker/blocker","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/behaviors/keyboard.navigation/tabables.behavior","csui/utils/url","csui/utils/commands","conws/models/workspacecreateforms","i18n!xecmpf/widgets/workspaces/pages/update.workspace/impl/nls/lang","hbs!xecmpf/widgets/workspaces/pages/update.workspace/impl/update.workspace","css!xecmpf/widgets/workspaces/pages/update.workspace/impl/update.workspace"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f,h,b,g,w,v,y,x,k,_){var C=v.clone();C.reset();var A=o.LayoutView.extend({"tagName":"div","id":"xecmpf-update_wksp","className":"xecmpf-page","template":k,"regions":{"content":"#content","footer":"#footer"},"behaviors":{"TabablesBehavior":{"behaviorClass":g,"recursiveNavigation":!0,"containTabFocus":!0}},"constructor":function(e){var n=this;o.LayoutView.prototype.constructor.apply(this,arguments),this.context=this.options.context||{},this.propagateEventsToRegions(),this.readOnlyCats={},this.readOnlyCatVals={},this.on("dom:refresh",function(){if(t._data){var e=t._data(this.el,"events");if(e&&e.keydown&&e.keydown.length>1){var o=i.isEmpty(e.keydown[1].namespace)?e.keydown[1].type:e.keydown[1].type+"."+e.keydown[1].namespace;o&&e.keydown[1].handler&&n.$el.off(o,e.keydown[1].handler)}}});var s=this.readOnlyCats,a=this.readOnlyCatVals;this._saveField=function(e){if("create"!==this.mode){var t=this.getValues(),n=this.originalCategories;this.isCancelButton&&i.each(t,function(e,o){"object"!=typeof e||e instanceof Array?t[o]=n[o]:"object"==typeof e&&i.chain(e).each(function(e,i){"metadata_token"!==i&&(t[o][i]=n[o][i])})});var o=this.model.get("id");return i.chain(s).each(function(e,n){if(void 0!==o&&!isNaN(Number(n))&&o!==Number(n))return!0;i.chain(e.properties).each(function(e,o){if("object"===e.type)i.chain(e.properties).each(function(e,i){!0===e.readonly&&(t[o][i]=a[n+":"+o+":"+i])});else if("array"===e.type&&i.has(e,"items")){var s=e.items.properties;i.chain(s).each(function(e,s){!0===e.readonly&&i.chain(t[o]).each(function(e,t){var l=a[n+":"+o+":"+t+":"+s];i.isUndefined(l)||(e[s]=l)})})}else!0===e.readonly&&(t[o]=a[n+":"+o])})}),this._saveChanges(t)}}},"_getController":function(){return this.options.status.wksp_controller},"_createFormCollection":function(){var e=this.options||{},n=e.context,o=e.status,l=o.workspace;this.formCollection=new y(void 0,i.defaults(e,{"type":l.get("type"),"wsType":l.get("wnf_wksp_type_id"),"node":new p(void 0,{"connector":n.getObject(m)})})),this.formCollection.bo_id=e.data.busObjectId,this.formCollection.url=function(){var o={"template_id":l.get("wnf_wksp_template_id"),"parent_id":l.get("parent_id"),"ext_system_id":e.data.extSystemId,"bo_type":e.data.busObjectType,"bo_id":e.data.busObjectId,"completeWorkspace":!0},s="forms/businessworkspaces/create?"+t.param(i.omit(o,function(e){return null===e||void 0===e||""===e})),a=n.getObject(m).getConnectionUrl().getApiBase("v2");return w.combine(a,s)},this.formCollection.on("error",function(e,t,i){var n=t&&new a.Error(t).message||x.errorGettingCreateForm;s.error("Fetching the create forms failed: {0}",n)&&console.error(s.last),f.showError(n)})},"_updateWorkspaceReference":function(e,t){var i=new FormData;i.append("body",JSON.stringify(t));var n={"type":"PUT","url":w.combine(e.connector.getConnectionUrl().getApiBase("v2"),"businessworkspaces",e.get("id"),"workspacereferences"),"data":i,"contentType":!1,"processData":!1};return e.connector.makeAjaxCall(n)},"_complete":function(e){var n=new l("create_complete_wksp"),o=this,s=this.tileView.contentView.getValues(),a=t.Deferred();if(i.isEmpty(s))t(".binf-has-error")&&t(".binf-has-error")[0].scrollIntoView(),a.reject();else{var r=e.context||{},c=e.status,d=c.workspace,u=d.get("id");o._updateWorkspaceReference(new p({"id":u},{"connector":r.getObject(m)}),{"bo_type":o.getOption("data").busObjectType,"bo_id":o.getOption("data").busObjectId,"ext_system_id":o.getOption("data").extSystemId}).done(i.bind(function(t){a.resolve(),t&&(i.extend(c,{"workspaceNode":new p({"id":u,"container":!0}),"viewMode":{"mode":e.data.viewMode?e.data.viewMode.mode:"folderBrowse"}}),n.set(e.data.busObjectType+"-"+e.data.busObjectId,u),o._getController().displayWorkspace(e))},this)).fail(function(e){var t=x.failedToUpdateItem;e&&(e.responseJSON&&e.responseJSON.error?t=e.responseJSON.error:e.responseText&&(t=e.responseText),f.showError(t)),a.reject()})}return a.promise()},"_setHeader":function(e){var t=this.formCollection.at(0),i=t.get("data");if(i){var n=i.name;s.debug("name fetched and used: {0}",n)&&console.log(s.last),this.node.set("name",n)}else s.debug("name set to empty.")&&console.log(s.last),this.node.set("name","");var o=this.tileView.contentView.metadataHeaderView,a=o&&o.metadataItemNameView;if(a){var l=t.get("schema"),r=!!(l&&l.properties&&l.properties.name&&l.properties.name.readonly),c=r?x.nameIsGeneratedAutomatically:void 0;a.setPlaceHolder(c),!!r!=!!a.readonly&&a.setReadOnly(r),a.stopListening(this.node)}},"_updateModel":function(e){var t=this;this._setHeader(e),e&&this.formCollection.models.forEach(function(n){var o=n.get("data"),s=n.get("schema");if(i.has(s.properties,e.get("id"))){var a=e.get("id"),l=e.get("schema"),r=s.properties[a];n=o[a],i.chain(r.properties).each(function(o,s,r){if(i.has(l.properties,s)){var c=o.properties,d=e.get("data")[s],u=l.properties[s],p=n[s];if("object"===o.type){var m=u.properties;i.chain(c).each(function(e,i){!0===e.readonly&&(m[i].readonly=e.readonly,t.readOnlyCatVals[a+":"+s+":"+i]=d[i],t.readOnlyCats[a]=l,d[i]=p[i])})}else if(!o.readonly&&"array"===o.type&&i.has(o,"items")){var f=o.items.properties,h=u.items.properties;i.chain(f).each(function(e,n){!0===e.readonly&&(h[n].readonly=e.readonly,i.chain(p).each(function(e,i){d[i]||(d[i]={}),t.readOnlyCatVals[a+":"+s+":"+i+":"+n]=d[i][n],d[i][n]=e[n]}),t.readOnlyCats[a]=l)})}else o.readonly&&(u.readonly=o.readonly,t.readOnlyCatVals[a+":"+s]=d,t.readOnlyCats[a]=l,e.get("data")[s]=p)}})}})},"fetchForm":function(){return this._createFormCollection(),this.formCollection.fetch()},"revertAllModifiedCategories":function(){var e=[];this.tileView.contentView.metadataPropertiesView.tabContent.children.each(function(t,i){e.push(t)}),this.updateCategoriesOnCancel(e)},"updateCategoriesOnCancel":function(e){if(e.length>0){if("categories"===e[0].model.get("role_name")||"general"===e[0].model.get("id")){e[0].content.isCancelButton=!0;var t=e[0].content._saveField();t?t.always(i.bind(function(){e.shift(),this.updateCategoriesOnCancel(e)},this)):(e.shift(),this.updateCategoriesOnCancel(e))}}else this.trigger("categories:reverted")},"render":function(){var e=this,s=this.options.status,a=s.workspace,l=new n.Collection([{"click":i.bind(this._complete,this,this.options),"disabled":!0,"primary":!1,"label":x.completeWorkspace,"toolTip":x.completeWorkspaceTooltip},{"click":i.bind(function(){var e=t.Deferred();return this.listenTo(this,"categories:reverted",function(){this._getController().selectWorkspace()}),this.revertAllModifiedCategories(),e.resolve(),e.promise()},this,this.options),"disabled":!0,"primary":!1,"toolTip":x.cancel,"label":x.cancel,"separate":!1}]);o.LayoutView.prototype.render.apply(this,arguments),this.node=new p({"type_name":a.get("type_name"),"type":a.get("type"),"name":a.get("name"),"id":a.get("id"),"container":!0,"wksp_type_name":this.options.wksp_type_name},{"connector":this.context.getObject(m)});var f=d.extend({"contentViewOptions":function(t){return e._updateModel(t),d.prototype.contentViewOptions.apply(this,arguments)}}),b=u.extend({"constructor":function(t){u.prototype.constructor.apply(this,arguments),this.options.blockingParentView?h.delegate(this,this.options.blockingParentView):h.imbue(this),void 0!==this.metadataPropertiesView&&this.metadataPropertiesView.stopListening(this),this.metadataPropertiesView=new f({"node":e.node,"commands":C,"context":e.options.context,"formMode":"update","action":"update","metadataView":this}),this.listenTo(this.metadataPropertiesView,"render:forms",function(){l.at(0).set("disabled",!1),l.at(1).set("disabled",!1),l.at(0).set("primary",!0),e.footerView.update(),this.metadataPropertiesView.tabContent.children.each(function(t,n){if("categories"===t.model.get("role_name")||"general"===t.model.get("id")){t.content.off("change:field"),t.content._saveField=function(t){return e._saveField.apply(this,t)},t.content.listenTo(t.content,"change:field",t.content._saveField);var o=i.deepClone(t.model.get("data"));t.content.originalCategories=o,e.childContent=t}})}),this.listenTo(this.metadataPropertiesView,"before:render",function(){var e=this.metadataPropertiesView.collection.findWhere({"id":"conws-reference"});e&&this.metadataPropertiesView.collection.remove(e,{"silent":!0})})}});this.footerView=new c({"collection":l}),this.tileView=new r({"title":x.pageTitle,"contentView":b,"contentViewOptions":{"model":this.node,"context":this.options.context,"action":"update"}})},"onBeforeShow":function(){this.content.show(this.tileView),this.footer.show(this.footerView)}});return i.extend(A.prototype,b),A}),csui.define("xecmpf/widgets/workspaces/controllers/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/workspaces/controllers/impl/nls/root/lang",{"errorGettingBusinessWorkspaceType":"Cannot get business workspace type."}),csui.define("xecmpf/widgets/workspaces/controllers/dialog.controller",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/lib/backbone","csui/utils/namedsessionstorage","xecmpf/widgets/workspaces/pages/select.workspace/select.workspace.view","xecmpf/widgets/workspaces/pages/create.workspace/create.workspace.view","xecmpf/widgets/workspaces/pages/display.workspace/display.workspace.view","xecmpf/widgets/workspaces/pages/update.workspace/update.workspace.view","xecmpf/widgets/workspaces/factories/workspace.factory","xecmpf/widgets/workspaces/factories/workspace.types.factory","csui/models/node/node.model","csui/dialogs/modal.alert/modal.alert","i18n!xecmpf/widgets/workspaces/controllers/impl/nls/lang"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f){return n.Object.extend({"constructor":function(e){e=e||{},this.options=e,this.context=this.options.context||{},this.region=this.options.region},"updateWorkspace":function(e){e||(e=this.options),this._showUpdateWorkspaceView(e)},"displayWorkspace":function(e){e||(e=this.options),this._showDisplayWorkspaceView(e)},"createWorkspace":function(e){e||(e=this.options),this._showCreateWorkspaceView(e)},"selectWorkspace":function(e){e||(e=this.options),e.status||(e.status={});var n=e.context,s=e.data,a=this,l=[];this._getBOWorkspace(n,s).done(function(r){r?(i.defaults(e.status,{"workspaceNode":r,"viewMode":{"mode":s.viewMode?s.viewMode.mode:"folderBrowse"}}),a.displayWorkspace(e)):(l.push(a._getBOEarlyWorkspaces(n,s)),l.push(a._getBOWorkspaceType(n,s)),t.when.apply(t,l).done(function(t,n){t&&t.length?a._showSelectWorkspaceView(e):(i.defaults(e.status,{"workspaceType":new o.Model({"wksp_type_name":n.get("wksp_type_name"),"wksp_type_id":n.get("wksp_type_id"),"rm_enabled":n.get("rm_enabled"),"template":n.get("templates")[0],"type":848}),"mode":"directCreate"}),a._showCreateWorkspaceView(e))}).fail(function(e,t,i){e&&(e.responseJSON&&e.responseJSON.error?m.showError(f.errorGettingBusinessWorkspaceType+" "+e.responseJSON.error):m.showError(f.errorGettingBusinessWorkspaceType))})),delete s.deletecallback}).fail(function(e,t,i){e&&(e.responseJSON&&e.responseJSON.error?m.showError(f.errorGettingBusinessWorkspaceType+" "+e.responseJSON.error):m.showError(f.errorGettingBusinessWorkspaceType))})},"_showCreateWorkspaceView":function(e){this.region.show(new l(e))},"_showDisplayWorkspaceView":function(e){var i,n={};e.region.currentView instanceof l||e.region.currentView instanceof c?this.region.show(new r(e)):this.region.currentView&&this.region.currentView.browser&&"folderBrowse"===this.options.data.viewMode.mode?(i=this.options.status.workspaceNode.get("id"),csui.require.config({"config":{"csui/integration/folderbrowser2/container.enforcer":{"enabled":!0}}}),this.region.currentView.browser.setStartId(i)):this.region.currentView&&void 0===this.region.currentView.browser&&t(".xecm-full-page-workspace.xecm-no-iframe-wrap").length>0&&"fullPage"===this.options.data.viewMode.mode?(i=this.options.status.workspaceNode.get("id"),n.action="enterContainer",n.id=i,this.trigger("xecm:change:fullPage",n)):this.region.show(new r(e))},"_showUpdateWorkspaceView":function(e){var t=new c(e),i=this;t.fetchForm().done(function(e,n,o){t.options.wksp_type_name=e.forms[0].data.wksp_type_name,i.region.show(t)})},"_showSelectWorkspaceView":function(e){this.region.show(new a(e))},"_getBOWorkspace":function(e,i){var n=t.Deferred(),o=!1,a=new s("create_complete_wksp"),l=this.options.deletecallback||i.deletecallback,r=e.getCollection(d,{"attributes":i.busObjectId,"busObjectId":i.busObjectId,"busObjectType":i.busObjectType,"extSystemId":i.extSystemId,"detached":!1});if(l)a.remove(i.busObjectType+"-"+i.busObjectId),r.fetched=!1,delete this.options.data.workspaceNodeId,n.resolve(o);else if(a.get(i.busObjectType+"-"+i.busObjectId)&&!l){var c=a.get(i.busObjectType+"-"+i.busObjectId);o=new p({"id":c,"container":!0}),n.resolve(o)}else i.workspaceNodeId?(o=new p({"id":i.workspaceNodeId,"container":!0}),n.resolve(o)):r.ensureFetched().done(function(){if(1===r.length){var e=r.at(0).get("id");o=new p({"id":e,"container":!0}),a.set(i.busObjectType+"-"+i.busObjectId,e)}n.resolve(o)}).fail(function(){n.reject.apply(n,arguments)});return n},"_getBOEarlyWorkspaces":function(e,i){var n,o=t.Deferred(),s=e.getCollection(d,{"attributes":"early","early":!0,"busObjectType":i.busObjectType,"extSystemId":i.extSystemId,"detached":!0});return n=i.deletecallback||this.options.deletecallback?s.fetch():s.ensureFetched(),n.done(function(){o.resolve(s)}).fail(function(){o.reject.apply(o,arguments)}),o},"_getBOWorkspaceType":function(e,i){var n=t.Deferred(),o=!1,s=e.getCollection(u,{"busObjectType":i.busObjectType,"extSystemId":i.extSystemId,"detached":!0});return s.ensureFetched().done(function(){1===s.at(0).get("templates").length&&(o=s.at(0)),n.resolve(o)}).fail(function(){n.reject.apply(n,arguments)}),n}})}),csui.define("xecmpf/widgets/workspaces/utils/urlhelper",["module","csui/lib/jquery","csui/lib/underscore","csui/utils/log","csui/utils/base"],function(e,t,i,n,o){return{"getParams":function(e){return e.search.replace("?","").split("&").reduce(function(e,t){var i=t.split("=");return e[i[0].toLowerCase()]=i[1],e},{})}}}),csui.define("xecmpf/widgets/workspaces/workspaces.widget",["csui/lib/underscore","csui/lib/marionette","csui/lib/backbone","xecmpf/widgets/workspaces/controllers/dialog.controller","xecmpf/widgets/workspaces/utils/urlhelper","csui/utils/contexts/factories/user","xecmpf/widgets/workspaces/pages/select.workspace/select.workspace.view"],function(e,t,i,n,o,s,a){function l(t){t||(t={});var i=o.getParams(window.location);e.isEmpty(t.data)&&!e.isEmpty(i)?this.options=e.defaults({},t,{"data":{"busObjectId":i.busobjectid,"busObjectType":i.busobjecttype,"extSystemId":i.extsystemid}}):this.options=t,this.options.context.user=this.options.context.getModel(s)}var r=i.Marionette.Region.extend({"show":function(e){this._ensureElement(),e.render(),this.close(function(){this.currentView=e,this.open(e,function(){e instanceof a&&t.triggerMethodOn(e,"show")})})},"close":function(e){var t=this.currentView,i=this;if(delete this.currentView,!t)return void(e&&e.call(this));t.$el.hide("slide",{"direction":"left","complete":function(){t.destroy&&t.destroy(),e&&e.call(i)}},250)},"open":function(e,i){var n=this;this.$el.hide(),this.$el.html(e.$el),t.triggerMethodOn(e,"before:show"),t.triggerMethodOn(e,"show"),t.triggerMethodOn(e,"dom:refresh"),this.$el.show("slide",{"direction":"right","complete":function(){i&&i.call(n)}},250)}});return e.extend(l.prototype,{"refresh":function(e){e.data.busObjectId&&e.data.busObjectType&&e.data.extSystemId&&(this.options.status.workspaceNode&&delete this.options.status.workspaceNode,this.options.data.workspaceNodeId&&delete this.options.data.workspaceNodeId,this.options.data.busObjectType=e.data.busObjectType,this.options.data.extSystemId=e.data.extSystemId,this.options.data.busObjectId=e.data.busObjectId),e.data.viewMode&&(void 0===this.options.data.viewMode&&(this.options.data.viewMode={}),this.options.data.viewMode.mode=e.data.viewMode),e.data.navigateMode&&(this.options.data.navigateMode=e.data.navigateMode),this.show(this.options)},"show":function(e){this.showView(this,e)},"showView":function(t,i){t.region||(t.region=new r({"el":i.placeholder})),e.defaults(t.options,i,{"region":t.region}),t.options.status=t.options.status||{},e.defaults(t.options.status,{"wksp_controller":new n(t.options)}),t.options.status.wksp_controller.selectWorkspace(t.options)},"close":function(){return this.region&&this.region.currentView&&(this.region.currentView.content&&this.region.currentView.content.destroy(),this.region.currentView.browser&&this.region.currentView.browser.destroy(),this.region.currentView.destroy(),this.region.destroy(),this.region=null),this}}),l.version="1.0",l}),csui.define("xecmpf/widgets/myattachments/nls/myattachments.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/myattachments/nls/root/myattachments.lang",{"root":!0,"en-us":!1,"en":!1,"attachmentsTabTitle":"Business Objects","ErrorLoadingAddItemMenu":"Cannot load business object types to the Add menu.","DetachBusinessAttachment":"Detach","GoToWorkspace":"Go to Workspace","OpenSapObject":"Display","AddBusinessAttachment":"Add Business Object","ErrorCreatingBusAttachment":"Cannot create business attachment.","BOSearchTitle":"Search business objects","noBusinessAttachmentsAvailable":"Add business objects to this Content Server item.","tableColumnSearchNoResult":"No results found."}),csui.define("xecmpf/utils/commands/myattachments/detach_myattachment",["module","csui/models/command","csui/utils/commandhelper","csui/lib/jquery","csui/lib/underscore","csui/utils/commands/confirmable","csui/utils/command.error","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o,s,a,l){"use strict";var r,c,d,u=t.extend({"defaults":{"signature":"detach_business_attachment","command_key":["detach_business_attachment"],"name":l.CommandNameDetach,"pageLeavingWarning":l.DetachPageLeavingWarning,"scope":"multiple","doneVerb":l.CommandDoneVerbDetached,"successMessages":{"formatForNone":l.DetachBusAttsNoneMessage,"formatForOne":l.DetachOneBusAttSuccessMessage,"formatForTwo":l.DetachSomeBusAttsSuccessMessage,"formatForFive":l.DetachManyBusAttsSuccessMessage},"errorMessages":{"formatForNone":l.DetachBusAttsNoneMessage,"formatForOne":l.DetachOneBusAttFailMessage,"formatForTwo":l.DetachSomeBusAttsFailMessage,"formatForFive":l.DetachManyBusAttsFailMessage}},"_getConfirmTemplate":function(e,t){return o.template("<span class='msgIcon WarningIcon'><%- message %></span>")},"_getConfirmData":function(e,t){var n=i.getAtLeastOneNode(e);return{"title":l.DetachBusAttsCommandConfirmDialogTitle,"message":1===n.length?o.str.sformat(l.DetachBusAttsCommandConfirmDialogSingleMessage,n.at(0).get("name")):o.str.sformat(l.DetachBusAttsCommandConfirmDialogMultipleMessage,n.length)}},"enabled":function(e,t){var n=i.getJustOneNode(e);return!!this._getNodeActionForSignature(n,"delete_business_attachment")},"_performAction":function(e,t){var i=e.node,s=n.Deferred();if(i.collection){var r=i.destroy({"wait":!0}).done(function(){e.set("count",1),e.deferred.resolve(e),s.resolve(i)}).fail(function(t){var n=t?new a(t,i):t;e.deferred.reject(e,n),t||r.abort(),s.reject(n)});return s.promise()}return s.reject(new a(o.str.sformat(l.CommandFailedSingular,i.get("name"),l.CommandVerbDetach),{"errorDetails":"collection is undefined"}))},"startGlobalMessage":function(e){c.showProgressPanel(e,{"oneFileTitle":l.DetachingOneBusAtt,"oneFileSuccess":l.DetachOneBusAttSuccessMessage,"multiFileSuccess":l.DetachManyBusAttsSuccessMessage,"oneFilePending":l.DetachingOneBusAtt,"multiFilePending":l.DetachBusAtts,"oneFileFailure":l.DetachOneBusAttFailMessage,"multiFileFailure":l.DetachManyBusAttsFailMessage2,"someFileSuccess":l.DetachSomeBusAttsSuccessMessage,"someFilePending":l.DetachingSomeBusAtts,"someFileFailure":l.DetachSomeBusAttsFailMessage2,"enableCancel":!1})},"_removeBusAtt":function(e){return e.destroy({"wait":!0})},"_getRespError":function(e){var t="";return e&&e.responseJSON&&e.responseJSON.error?t=e.responseJSON.error:d.messageHelper.hasMessages()&&(t=n(d.messageHelper.toHtml()).text(),d.messageHelper.clear()),t},"_announceStart":function(e){var t=e.originatingView;t&&t.blockActions&&t.blockActions();var i=this.get("pageLeavingWarning");i&&this.PageLeavingBlocker.enable(i)},"_announceFinish":function(e){this.get("pageLeavingWarning")&&this.PageLeavingBlocker.disable();var t=e.originatingView;t&&t.unblockActions&&t.unblockActions()}});return o.extend(u.prototype,s,{"execute":function(e,t){var l=i.getAtLeastOneNode(e),r=(1===l.length&&l.first(),n.Deferred()),d=e.data||{},u=null==d.showProgressDialog||d.showProgressDialog;return this.showProgressDialog=u,e.suppressFailMessage=!0,e.suppressSuccessMessage=!0,e.suppressMultipleFailMessage=!0,s.execute.apply(this,arguments).done(function(e){u&&c.hideFileUploadProgress(),r.resolve(e)}).fail(function(e){var t=e&&o.find(e,function(e){return!(e instanceof a)}),i=t||e;r.reject(i)}),r.promise()},"_performActions":function(e,t){var s=n.Deferred(),a=this;return csui.require(["csui/utils/taskqueue","csui/utils/page.leaving.blocker","csui/models/fileuploads","csui/utils/commands/multiple.items","csui/controls/globalmessage/globalmessage","csui/utils/messagehelper","csui/utils/base"],function(n,l,d,u,p,m,f){r=m,c=p,f=f,a.PageLeavingBlocker=arguments[1];var h=i.getAtLeastOneNode(e),b=h.models,g=o.map(b,function(e){return{"name":e.get("name"),"state":"pending","count":0,"total":1,"node":e}}),w=b&&b[0]&&b[0].connector,v=new d(g,{"connector":w}),y=o.defaults({"nodes":v},e);v.each(function(e){var t=e.get("node");e.node=t,e.unset("node")}),a.startGlobalMessage(v),u._performActions.call(a,y,t).done(function(e){c.hideFileUploadProgress(),s.resolve(e)}).fail(function(e){s.reject(e)})},function(e){console.log(e),s.reject(e)}),s.promise()}}),u}),csui.define("xecmpf/utils/commands/myattachments/go_to_workspace",["module","csui/models/command","csui/utils/commandhelper","csui/lib/underscore","csui/lib/jquery","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o,s){"use strict";return t.extend({"defaults":{"signature":"go_to_workspace","command_key":["go_to_workspace"],"name":s.CommandNameGoToWorkspace,"scope":"single"},"enabled":function(e){var t=i.getJustOneNode(e),n=this.get("command_key");return!!this._getNodeActionForSignature(t,n)},"execute":function(e,t){var n=i.getJustOneNode(e);return this._navigateTo(n,e,t)},"_navigateTo":function(e,t,i){var n=o.Deferred(),s=t.context||t.originatingView.options.context,a=e.get("wksp_id");return csui.require(["csui/lib/backbone","csui/utils/contexts/factories/connector","csui/models/node/node.model","csui/utils/commands/browse"],function(e,t,i,n){var o=s.getObject(t),l=new i({"id":a},{"connector":o});(new n).execute({"nodes":new e.Collection([l]),"context":s})},function(e){console.log(e),n.reject()}),n.promise()}})}),csui.define("xecmpf/utils/commands/myattachments/open_sap_object",["module","csui/models/command","csui/utils/commandhelper","csui/lib/underscore","csui/lib/jquery","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o,s){"use strict";var a=n.defaults({},e.config(),{"openInNewTab":!0});return t.extend({"defaults":{"signature":"open_sap_object","command_key":["open_sap_object"],"name":s.CommandNameOpenSapObject,"scope":"single"},"enabled":function(e){var t=i.getJustOneNode(e),n=this.get("command_key");if(this._getNodeActionForSignature(t,n))return!!(t.actions&&t.actions.findRecursively(n)).get("href");return!1},"execute":function(e,t){var n=i.getJustOneNode(e);return this._navigateTo(n,t)},"openInNewTab":function(){return a.openInNewTab},"_navigateTo":function(e,t){var i=e.actions.findRecursively(this.attributes.signature),n=i.get("href");if(!0===this.openInNewTab()){window.open(n,"_blank").focus()}else location.href=n;return o.Deferred().resolve().promise()}})}),csui.define("xecmpf/utils/commands/myattachments/add_myattachment",["require","csui/models/command","csui/utils/commandhelper","csui/lib/jquery","csui/lib/underscore","csui/utils/commands/confirmable","i18n!xecmpf/utils/commands/nls/localized.strings"],function(e,t,i,n,o,s,a){"use strict";var l,r,c,d,u=t.extend({"defaults":{"signature":"add_business_attachment","command_key":["add_business_attachment"],"name":a.CommandNameAttach,"scope":"multiple","doneVerb":a.CommandDoneVerbAttached,"successMessages":{"formatForNone":a.AttachBusAttsNoneMessage,"formatForOne":a.AttachOneBusAttSuccessMessage,"formatForTwo":a.AttachSomeBusAttsSuccessMessage,"formatForFive":a.AttachManyBusAttsSuccessMessage},"errorMessages":{"formatForNone":a.AttachBusAttsNoneMessage,"formatForOne":a.AttachOneBusAttFailMessage,"formatForTwo":a.AttachSomeBusAttsFailMessage,"formatForFive":a.AttachManyBusAttsFailMessage}},"_getConfirmTemplate":function(e,t){return o.template(a.AttachBusAttsCommandConfirmDialogHtml)},"_getConfirmData":function(e,t){var n=i.getAtLeastOneNode(e);return{"title":a.AttachBusAttsCommandConfirmDialogTitle,"message":1===n.length?o.str.sformat(a.AttachBusAttsCommandConfirmDialogSingleMessage,n.at(0).get("name")):o.str.sformat(a.AttachBusAttsCommandConfirmDialogMultipleMessage,n.length)}},"enabled":function(e){if(e.container.busatts.actions){return!!o.has(e.container.busatts.actions.data,this.defaults.signature)}return!1}});return o.extend(u.prototype,s,{"execute":function(e,t){return this._referenceSearchOpen(e,t)},"_referenceSearchOpen":function(e,t){var i=n.Deferred(),o=this;return csui.require(["csui/utils/contexts/factories/connector","i18n!xecmpf/widgets/myattachments/nls/myattachments.lang","xecmpf/widgets/myattachments/metadata.attachment.model","xecmpf/controls/bosearch/bosearch.model","xecmpf/controls/bosearch/bosearch.dialog.controller","csui/utils/command.error"],function(n,s,a,r,c,u){l=a,d=u,o.connector=t.context.getObject(n),o.collection=e.data.collection,o.boSearchModel=new r(e.data.boType,{"connector":o.connector});var p;p=".cs-metadata:has(> .metadata-content-wrapper)",o.boSearchDialogController=new c({"context":t.context,"htmlPlace":p,"multipleSelect":!0,"mode":"business_attachment_add","boSearchModel":o.boSearchModel,"title":s.BOSearchTitle}),o.status=e,o.listenTo(o.boSearchModel,"boresult:select",o._referenceSearchAttach),o.boSearchModel.trigger("reference:search"),i.resolve()},function(e){console.log(e),i.reject(e)}),i.promise()},"_referenceSearchAttach":function(e){var t=n.Deferred(),i=this;return csui.require(["csui/utils/page.leaving.blocker","csui/models/fileuploads","csui/utils/commands/multiple.items","csui/controls/globalmessage/globalmessage","csui/utils/messagehelper","csui/utils/command.error","csui/utils/base"],function(n,s,a,l,u,p,m){r=u,c=l,d=p,m=m;if(i.PageLeavingBlocker=arguments[1],i.boSearchModel.trigger("reference:selected"),e.selectedItems){var f=e.selectedItems,h=o.map(f,function(e){return{"name":e.get("businessObjectId"),"state":"pending","count":0,"total":1,"node":e}}),b=f&&f[0]&&f[0].connector,g=new s(h,{"connector":b}),w=o.defaults({"nodes":g},status);w.suppressMultipleFailMessage=!0,g.each(function(e){var t=e.get("node");e.node=t,e.unset("node")}),i.startGlobalMessage(g),a._performActions.call(i,w,void 0).done(function(e){c.hideFileUploadProgress(),t.resolve(e)}).fail(function(e){t.reject(e)})}},function(e){console.log(e),t.reject(e)}),t.promise()},"startGlobalMessage":function(e){c.showProgressPanel(e,{"oneFileTitle":a.AttachingOneBusAtt,"oneFileSuccess":a.AttachOneBusAttSuccessMessage,"multiFileSuccess":a.AttachManyBusAttsSuccessMessage,"oneFilePending":a.AttachingOneBusAtt,"multiFilePending":a.AttachBusAtts,"oneFileFailure":a.AttachOneBusAttFailMessage,"multiFileFailure":a.AttachManyBusAttsFailMessage2,"someFileSuccess":a.AttachSomeBusAttsSuccessMessage,"someFilePending":a.AttachingSomeBusAtts,"someFileFailure":a.AttachSomeBusAttsFailMessage2,"enableCancel":!1})},"_performAction":function(e,t){var i=e.node,s=n.Deferred(),r=this;if(this.collection){var c=this.boSearchModel.get("ext_system_id"),u=this.boSearchModel.get("bo_type"),p=i.get("businessObjectId"),m={"ext_system_id":c,"bo_type":u,"bo_id":p,"comment":""},f=new l(m,{"collection":this.collection,"connector":this.connector});return f.isLocallyCreated=!0,f.save({"wait":!0,"silent":!0}).done(function(t){r.collection.add(f,{"at":0}),e.set("count",1),e.deferred.resolve(e),s.resolve(i)}).fail(function(t){var n=t?new d(t,i):t;e.deferred.reject(e,n),s.reject(n)}),s.promise()}return s.reject(new d(o.str.sformat(a.CommandFailedSingular,i.get("name"),a.CommandVerbAttach),{"errorDetails":"collection is undefined"}))},"_announceStart":function(e){var t=e.originatingView;t&&t.blockActions&&t.blockActions();var i=this.get("pageLeavingWarning");i&&this.PageLeavingBlocker.enable(i)},"_announceFinish":function(e){this.get("pageLeavingWarning")&&this.PageLeavingBlocker.disable();var t=e.originatingView;t&&t.unblockActions&&t.unblockActions()}}),u}),csui.define("xecmpf/utils/commands/myattachments",["csui/lib/underscore","csui/models/commands","xecmpf/utils/commands/myattachments/detach_myattachment","xecmpf/utils/commands/myattachments/go_to_workspace","xecmpf/utils/commands/myattachments/open_sap_object","xecmpf/utils/commands/myattachments/add_myattachment"],function(e,t,i,n,o,s){"use strict";return new t([new i,new n,new o,new s])}),csui.define("xecmpf/widgets/myattachments/metadata.attachments.columns",["csui/lib/backbone"],function(e){var t=e.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),i=e.Collection.extend({"model":t,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new i(this.map(function(e){return e.attributes}))}});return new i([{"key":"bo_id","sequence":10},{"key":"name","sequence":20},{"key":"ext_system_name","sequence":30},{"key":"create_date","sequence":40},{
"key":"created_by_name","sequence":50},{"key":"comment","sequence":60}])}),csui.define("css!xecmpf/widgets/myattachments/metadata.attachments",[],function(){}),csui.define("xecmpf/widgets/myattachments/metadata.attachments.toolbaritems",["csui/lib/underscore","i18n!xecmpf/widgets/myattachments/nls/myattachments.lang","csui/controls/toolbar/toolitems.factory","css!xecmpf/widgets/myattachments/metadata.attachments"],function(e,t,i){return{"addToolbar":new i({"add":[]},{"maxItemsShown":0,"dropDownIcon":"icon icon-toolbarAdd","dropDownText":t.AddBusinessAttachment,"dropDownSvgId":"themes--carbonfiber--image--generated_icons--action_add32","addTrailingDivider":!1}),"otherToolbar":new i({"main":[{"signature":"detach_business_attachment","name":t.DetachBusinessAttachment,"scope":"multiple","verb":"detach_business_attachment"},{"signature":"open_sap_object","name":t.OpenSapObject},{"signature":"go_to_workspace","name":t.GoToWorkspace}]},{"maxItemsShown":5,"dropDownIcon":"icon icon-toolbar-more"}),"inlineActionbar":new i({"other":[{"signature":"detach_business_attachment","name":t.DetachBusinessAttachment,"verb":"detach_business_attachment","icon":"icon icon-toolbar-detach"},{"signature":"open_sap_object","name":t.OpenSapObject,"icon":"icon icon-toolbar-preview"},{"signature":"go_to_workspace","name":t.GoToWorkspace,"icon":"icon icon-toolbar-workspace"}]},{"maxItemsShown":5,"dropDownText":t.ToolbarItemMore,"dropDownIcon":"icon icon-toolbar-more"})}}),csui.define("hbs!xecmpf/widgets/myattachments/metadata.attachments",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-metadata-myattachments">\r\n  <div id="att-tabletoolbar"></div>\r\n  <div id="att-tableview"></div>\r\n  <div id="att-paginationview"></div>\r\n</div>'}});return i.registerPartial("xecmpf_widgets_myattachments_metadata.attachments",n),n}),csui.define("xecmpf/widgets/myattachments/metadata.attachments.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/controls/tabletoolbar/tabletoolbar.view","csui/controls/tableactionbar/tableactionbar.view","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/table/table.view","csui/controls/pagination/nodespagination.view","xecmpf/utils/commands/myattachments","csui/models/columns","xecmpf/widgets/myattachments/metadata.nodeattachments.model","xecmpf/widgets/myattachments/metadata.attachment.model","xecmpf/widgets/myattachments/metadata.attachments.columns","xecmpf/widgets/myattachments/metadata.attachments.toolbaritems","hbs!xecmpf/widgets/myattachments/metadata.attachments","csui/controls/toolbar/toolitem.model","csui/controls/globalmessage/globalmessage","csui/controls/toolbar/toolbar.command.controller","csui/utils/url","csui/utils/base","i18n!xecmpf/widgets/myattachments/nls/myattachments.lang","css!xecmpf/widgets/myattachments/metadata.attachments"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f,h,b,g,w,v,y,x){"use strict";var k=e.config();i.defaults(k,{"defaultPageSize":30,"showInlineActionBarOnHover":!y.isTouchBrowser(),"forceInlineActionBarOnClick":!1,"inlineActionBarStyle":"csui-table-actionbar-bubble","clearFilterOnChange":!0,"resetOrderOnChange":!1,"resetLimitOnChange":!0,"fixedFilterOnChange":!1});var _=n.LayoutView.extend({"className":"metadata-inner-wrapper","template":h,"ui":{"tableView":"#att-tableview","childContainer":"#att-tableview","paginationView":"#att-paginationview"},"regions":{"tableToolbarRegion":"#att-tabletoolbar","tableRegion":"#att-tableview","paginationRegion":"#att-paginationview"},"constructor":function e(t){e.__super__.constructor.call(this,t),this.options.data||(this.options.data={}),i.defaults(this.options.data,{"pageSize":k.defaultPageSize||30}),this.commands=c,this.collection=new u(void 0,{"node":this.options.model,"autoreset":!0,"expand":"user","commands":this.commands,"onlyClientSideDefinedColumns":!0}),this.commandController=new w({"commands":this.commands}),this.listenTo(this.commandController,"after:execute:command",this._toolbarActionTriggered),this.options.model.busatts=this.collection,this._setToolBar(),this._setTableView(),this._setPagination(),this.setActionBarEvents(),this.collection.fetch({"error":this.handleError.bind(this)}),this.propagateEventsToRegions()},"handleError":function(e){if(e.error&&e.error.message){var t=this.ui.tableView.find(".csui-no-result-message").get(0);t&&(t.innerHTML=e.error.message,t.setAttribute("title",e.error.message))}},"onRender":function(){this.tableToolbarRegion.show(this.tableToolbarView),this.tableRegion.show(this.tableView),this.paginationRegion.show(this.paginationView)},"_toolbarActionTriggered":function(e){if(e)switch(e.commandSignature){case"detach_business_attachment":this.collection.fetch({"error":this.handleError.bind(this)})}},"_buildToolbarItems":function(){var e=t.Deferred(),i=v.combine(this.model.connector.getConnectionUrl().getApiBase("v2"),"nodes",this.model.get("id"),"addablebotypes"),n={"type":"GET","url":i},o=this;this.model.connector.makeAjaxCall(n).done(function(t,i,n){var s=[];t&&t.results&&t.results.length>0&&(t.results.forEach(function(e){var t=new b({"signature":"add_business_attachment","icon":"icon icon-toolbarAdd","svgId":"themes--carbonfiber--image--generated_icons--action_add32","name":e.data.properties.bo_type_name,"type":123,"group":"add","commandData":{"boType":e.data.properties,"node_id":o.model.get("id"),"collection":o.collection}});s.push(t)}),s.length>0&&s.sort(function(e,t){var i=e.get("name"),n=t.get("name");return y.localeCompareString(i,n,{"usage":"sort"})})),f.addToolbar.reset(s),e.resolve.apply(e,arguments)}).fail(function(t,i,n){var o=[];if("error"!==i&&o.push(i),t.responseText){var s=JSON.parse(t.responseText);s&&s.error&&o.push(s.error)}n&&o.push(n);var a=o.length>0?o.join("\r\n"):void 0;g.showMessage("error",x.ErrorLoadingAddItemMenu,a),e.reject.apply(e,arguments)})},"_setToolBar":function(){var e=this;this.options&&this.options.metadataView&&this.options.metadataView.options&&this.options.metadataView.options.metadataNavigationView&&(e=this.options.metadataView.options.metadataNavigationView),this._buildToolbarItems(),this.tableToolbarView=new o({"context":this.options.context,"commands":c,"toolbarItems":f,"collection":this.collection,"originatingView":e,"toolbarCommandController":this.commandController})},"_updateToolItems":function(){this.tableToolbarView&&this.tableToolbarView.updateForSelectedChildren(this.tableView.getSelectedChildren())},"_setTableView":function(){this.options||(this.options={});var e=i.extend({"tableColumns":m,"context":this.options.context,"connector":this.model.connector,"collection":this.collection,"columns":this.collection.columns,"pageSize":this.options.data.pageSize,"columnsWithSearch":["name","bo_id"],"orderBy":"bo_id asc","commands":c,"customLabels":{"zeroRecordsMsg":x.noBusinessAttachmentsAvailable,"emptySearchTable":x.tableColumnSearchNoResult}},this.options);this.tableView=new l(e),this.listenTo(this.tableView,"tableRowSelected",this._updateToolItems),this.listenTo(this.tableView,"tableRowUnselected",this._updateToolItems),this.listenTo(this.collection,"reset",this._updateToolItems),this.listenTo(this.collection,"change",this._updateToolItems),this.listenTo(this.collection,"remove",this._updateToolItems),this.listenTo(this.collection,"add",this._buildToolbarItems),this.listenTo(this.collection,"remove",this._buildToolbarItems)},"_setPagination":function(){return this.paginationView=new r({"collection":this.collection,"pageSize":this.options.data.pageSize}),!0},"setActionBarEvents":function(){k.forceInlineActionBarOnClick?this.listenTo(this.tableView,"row:clicked",function(e){if(this.tableActionBarView){if(this.tableActionBarView.model.get("id")===e.node.get("id"))return}this._destroyOldAndCreateNewActionBarWithoutDelay(e)}):k.showInlineActionBarOnHover&&(this.listenTo(this.tableView,"enterTableRow",this._showActionBarWithDelay),this.listenTo(this.tableView,"leaveTableRow",this._actionBarShouldDestroy)),this.listenTo(this.collection,"reset",this._destroyActionBar),this.collection.node&&this.listenTo(this.collection.node,"change:id",this._destroyActionBar)},"_showActionBar":function(e){if(!(this.tableView.getSelectedChildren().length>0))if(this.tableActionBarView)this._savedHoverEnterArgs=e;else{this._savedHoverEnterArgs=null,this.tableActionBarView=new s(i.extend({"context":this.options.context,"commands":c,"collection":f.inlineActionbar,"delayedActions":this.collection.delayedActions,"container":this.collection.node,"model":e.node,"originatingView":this},f.inlineActionbar.options,{"inlineActionBarStyle":k.inlineActionBarStyle})),this.tableActionBarView.render(),this.listenToOnce(this.tableActionBarView,"destroy",function(){this.tableActionBarView&&this.stopListening(this.tableActionBarView),this._savedHoverEnterArgs&&this._showActionBarWithDelay(this._savedHoverEnterArgs)},this);var t=this.tableActionBarView.$el,n=this.tableView.getNameCell(e.target);if(n&&1===n.length){var o=n.find(".csui-table-cell-name-appendix");o.append(t),o.addClass("csui-table-cell-name-appendix-full"),this.tableActionBarView.triggerMethod("after:show")}}},"_showActionBarWithDelay":function(e){this._showActionbarTimeout&&clearTimeout(this._showActionbarTimeout);var t=this;this._showActionbarTimeout=setTimeout(function(){t._showActionbarTimeout=null,t.tableView.lockedForOtherContols||t._showActionBar.call(t,e)},200)},"_destroyOldAndCreateNewActionBarWithoutDelay":function(e){this._actionBarShouldDestroy(),this.tableView.lockedForOtherContols||this._showActionBar.call(this,e)},"_actionBarShouldDestroy":function(){this._showActionbarTimeout&&(clearTimeout(this._showActionbarTimeout),this._showActionbarTimeout=null),this._destroyActionBar()},"_destroyActionBar":function(){if(this.tableActionBarView){this.tableActionBarView.$el.parent().removeClass("csui-table-cell-name-appendix-full"),this.tableActionBarView.destroy(),this.tableActionBarView=null}}});return i.extend(_.prototype,a),_}),csui.define("xecmpf/widgets/workflows/nls/workflows.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/workflows/nls/root/workflows.lang",{"root":!0,"en-us":!1,"en":!1,"name":"Workflows","title":"Workflows","emptyTableText":"No workflows","workflowTitle":"Name","workflowStatus":"Status","lastModified":"LastModified","initiatedDate":"Created","initiatedBy":"Initiator"}),csui.define("xecmpf/widgets/workflows/impl/metadata.workflow.columns",["csui/lib/backbone","i18n!xecmpf/widgets/workflows/nls/workflows.lang"],function(e,t){var i=e.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),n=e.Collection.extend({"model":i,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new n(this.map(function(e){return e.attributes}))}});return new n([{"key":"WorkflowTitle","title":t.workflowTitle,"isNaming":!0,"widthFactor":3,"sequence":10},{"key":"WorkflowStatusName","title":t.workflowStatus,"sequence":20},{"key":"ModifiedByName","title":t.lastModified,"sequence":30},{"key":"InitiatedDate","title":t.initiatedDate,"sequence":40},{"key":"InitiatedByName","title":t.initiatedBy,"sequence":50}])}),csui.define("hbs!xecmpf/widgets/workflows/impl/metadata.workflows",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-metadata-workflows">\r\n  <div id="workflow-tableview"></div>\r\n</div>'}});return i.registerPartial("xecmpf_widgets_workflows_impl_metadata.workflows",n),n}),csui.define("css!xecmpf/widgets/workflows/impl/metadata.workflows",[],function(){}),csui.define("xecmpf/widgets/workflows/impl/metadata.workflows.view",["csui/lib/underscore","csui/lib/marionette","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/table/table.view","csui/utils/contexts/factories/connector","xecmpf/models/workflows/metadata.workflow.collection","xecmpf/utils/commands/workflows","csui/utils/commandhelper","csui/models/actionitems","xecmpf/widgets/workflows/impl/metadata.workflow.columns","csui/behaviors/default.action/default.action.behavior","hbs!xecmpf/widgets/workflows/impl/metadata.workflows","i18n!xecmpf/widgets/workflows/nls/workflows.lang","css!xecmpf/widgets/workflows/impl/metadata.workflows"],function(e,t,i,n,o,s,a,l,r,c,d,u,p){"use strict";var m=t.LayoutView.extend({"className":"metadata-inner-wrapper","template":u,"ui":{"tableView":"#workflow-tableview","workflowName":'#workflow-tableview .binf-table tbody tr [data-csui-attribute="WorkflowTitle"]'},"regions":{"tableRegion":"#workflow-tableview"},"behaviors":{"DefaultAction":{"behaviorClass":d}},"constructor":function e(t){t||(t={}),this.commands=a,e.__super__.constructor.call(this,t),this.collection.fetch(),this.propagateEventsToRegions()},"initialize":function(){this.collection=new s(void 0,{"connector":this.options.context.getObject(o),"node":this.options.model,"commands":a.getAllSignatures(),"autoreset":!0,"status":"all"}),this._setTableView()},"onRender":function(){this.tableRegion.show(this.tableView)},"_setTableView":function(){this.options||(this.options={});var t=this,i=e.extend({"connector":this.model.connector,"tableColumns":c,"collection":this.collection,"orderBy":"InitiatedDate desc","selectColumn":!1,"selectRows":!1,"actionItems":this.defaultActionItems,"customLabels":{"emptyTableText":p.emptyTableText},"focusView":"tableHeader","originatingView":this.options.originatingView,"commands":a},this.options);this.tableView=new n(i);var o={"context":this.options.context,"originatingView":this};this.tableView.collection&&0===this.tableView.collection.length&&this.collection.fetched&&(this.tableView._showEmptyViewText=!0),this.listenTo(this.tableView,"execute:defaultAction",function(e){t.previousFocusElm=document.activeElement;var i={"nodes":new s([e])},n=a.get("WorkflowOpen"),r=n.execute(i,o);l.handleExecutionResults(r,{"command":n,"suppressSuccessMessage":"Error Eecuting command","suppressFailMessage":"Fecting commands data failed"})})}});return e.extend(m.prototype,i),m}),csui.define("xecmpf/widgets/workflows/metadata.workflows.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","xecmpf/widgets/workflows/impl/metadata.workflows.view"],function(e,t,i,n,o,s){"use strict";var a=e.config();return i.defaults(a,{"isAIBConfigured":!1}),s.extend({"constructor":function(e){s.prototype.constructor.apply(this,arguments)}},{"enabled":function(e){return!!a.isAIBConfigured}})}),csui.define("xecmpf/widgets/myattachments/metadata.property.panels",["i18n!xecmpf/widgets/myattachments/nls/myattachments.lang","xecmpf/widgets/myattachments/metadata.attachments.view","xecmpf/widgets/workflows/metadata.workflows.view","i18n!xecmpf/widgets/workflows/nls/workflows.lang"],function(e,t,i,n){return[{"title":e.attachmentsTabTitle,"sequence":40,"contentView":t},{"title":n.title,"sequence":50,"name":n.name,"contentView":i}]}),csui.define("xecmpf/widgets/dossier/impl/dossier.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node","xecmpf/widgets/dossier/impl/dossier.model"],function(e,t,i,n,o,s,a){return n.extend({"propertyPrefix":"dossierCollection","constructor":function(s,l){n.prototype.constructor.apply(this,arguments);var r=this.options.dossierCollection||{};if(!(r instanceof i.Collection)){var c=s.getObject(o,l),d=e.config();r=new a(r.models,t.extend({"connector":c},r.options,d.options,{"autofetch":!0},l))}this.property=r},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("hbs!xecmpf/behaviors/scroll.controls/impl/scroll.controls",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return"glyphicon glyphicon-chevron-left"},"3":function(e,t,i,n,o){return"glyphicon glyphicon-chevron-right"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-scroll-control cs-scroll-control-left">\r\n  <span class="'+(null!=(s=l(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?l(t,"leftControlIconClass"):t,{"name":"unless","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":15},"end":{"line":2,"column":90}}}))?s:"")+"\r\n  cs-scroll-control-icon cs-scroll-control-icon-left "+e.escapeExpression((a=null!=(a=l(i,"leftControlIconClass")||(null!=t?l(t,"leftControlIconClass"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"leftControlIconClass","hash":{},"loc":{"start":{"line":3,"column":53},"end":{"line":3,"column":77}}}):a))+'"></span>\r\n</div>\r\n<div class="cs-scroll-control cs-scroll-control-right">\r\n  <span class="'+(null!=(s=l(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?l(t,"rightControlIconClass"):t,{"name":"unless","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":92}}}))?s:"")+"\r\n  cs-scroll-control-icon cs-scroll-control-icon-right "+e.escapeExpression((a=null!=(a=l(i,"rightControlIconClass")||(null!=t?l(t,"rightControlIconClass"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"rightControlIconClass","hash":{},"loc":{"start":{"line":7,"column":54},"end":{"line":7,"column":79}}}):a))+'"></span>\r\n</div>\r\n'}});return i.registerPartial("xecmpf_behaviors_scroll.controls_impl_scroll.controls",n),n}),csui.define("css!xecmpf/behaviors/scroll.controls/impl/scroll.controls",[],function(){}),csui.define("xecmpf/behaviors/scroll.controls/scroll.controls.behavior",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","hbs!xecmpf/behaviors/scroll.controls/impl/scroll.controls","css!xecmpf/behaviors/scroll.controls/impl/scroll.controls"],function(e,t,i,n,o){"use strict";function s(t,i){var n=i||this.options||{},o=n[t];return e.isFunction(o)?n[t].call(this.view):o}return i.Behavior.extend({"defaults":{"contentParent":null,"controlsContainer":null,"scrollableWidth":null,"animateDuration":400},"ui":{"leftControl":".cs-scroll-control-left","rightControl":".cs-scroll-control-right"},"triggers":{"mousedown @ui.leftControl":"scroll:left","mousedown @ui.rightControl":"scroll:right"},"constructor":function(e,t){i.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(t,"render",this._renderControls).listenTo(t,"dom:refresh",this._updateScrollControls).listenTo(t,"update:scroll:controls",this._updateScrollControls).listenTo(t,"scroll:left",this._scrollLeft).listenTo(t,"scroll:right",this._scrollRight).listenTo(t,"before:destroy",this._unbindUpdateControlsEvents)},"_renderControls":function(){var e=s.call(this,"controlsContainer");this._controlsContainer=e?this.view.$(e):this.view.$el;var t=s.call(this,"contentParent");this._contentParent=t?this.view.$(t):this.view.$el,this._bindControlsUpdatingEvents(),this.animateDuration=s.call(this,"animateDuration");var i={"leftControlIconClass":s.call(this,"leftControlIconClass"),"rightControlIconClass":s.call(this,"rightControlIconClass")};this._controlsContainer.append(n(i)),this.view._bindUIElements.call(this)},"_updateScrollControls":function(){if(this._contentParent&&this._contentParent instanceof t){var e=this._contentParent.scrollLeft(),i=this._contentParent.get(0).scrollWidth,n=this._contentParent.width();0===e?this.ui.leftControl.hide(100):this.ui.leftControl.show(100),e===i-n?this.ui.rightControl.hide(100):this.ui.rightControl.show(100)}},"_scrollLeft":function(){if(this._contentParent&&this._contentParent instanceof t){var e=s.call(this,"scrollableWidth")||this._contentParent.innerWidth(),i=this._contentParent.scrollLeft();this._contentParent.trigger("focus").filter(":not(:animated)").animate({"scrollLeft":i-e},this.animateDuration,"swing",t.proxy(function(){this.view.triggerMethod("update:scroll:controls")},this))}},"_scrollRight":function(){if(this._contentParent&&this._contentParent instanceof t){var e=s.call(this,"scrollableWidth")||this._contentParent.innerWidth(),i=this._contentParent.scrollLeft();this._contentParent.trigger("focus").filter(":not(:animated)").animate({"scrollLeft":i+e},this.animateDuration,"swing",t.proxy(function(){this.view.triggerMethod("update:scroll:controls")},this))}},"_bindControlsUpdatingEvents":function(){this._contentParent&&this._contentParent instanceof t&&(this._contentParent.attr("tabindex",1),this._contentParent.on("keydown",t.proxy(function(e){switch(e.which){case 37:this.view.triggerMethod("scroll:left");break;case 39:this.view.triggerMethod("scroll:right")}},this)),t(window).on("resize",t.proxy(function(){this._updateScrollControls()},this)))},"_unbindUpdateControlsEvents":function(){this._contentParent&&this._contentParent instanceof t&&(this._contentParent.off("keydown"),t(window).off("resize"))}})}),csui.define("hbs!xecmpf/utils/document.thumbnail/impl/document.thumbnail",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="document-thumbnail-caption">\r\n'+(null!=(s=l(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?l(t,"disableIcon"):t,{"name":"unless","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":4},"end":{"line":9,"column":15}}}))?s:"")+'    <span class="document-name" title="'+e.escapeExpression((a=null!=(a=l(i,"name")||(null!=t?l(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":10,"column":39},"end":{"line":10,"column":47}}}):a))+'">'+e.escapeExpression((a=null!=(a=l(i,"name")||(null!=t?l(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":10,"column":49},"end":{"line":10,"column":57}}}):a))+"</span>\r\n  </div>\r\n"},"2":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="csui-type-icon '+e.escapeExpression((s=null!=(s=a(i,"icon")||(null!=t?a(t,"icon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":8,"column":34},"end":{"line":8,"column":42}}}):s))+'" aria-hidden="true"></span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="document-thumbnail-wrapper">\r\n  <div><a href="#" class="thumbnail_not_loaded thumbnail_empty" title="'+e.escapeExpression((a=null!=(a=l(i,"title")||(null!=t?l(t,"title"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":2,"column":71},"end":{"line":2,"column":80}}}):a))+'" aria-label="'+e.escapeExpression((a=null!=(a=l(i,"document_name")||(null!=t?l(t,"document_name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"document_name","hash":{},"loc":{"start":{"line":2,"column":94},"end":{"line":2,"column":111}}}):a))+'"></a></div>\r\n  <button class="wrapper"><img src="" class="img-doc-preview binf-hidden" alt="'+e.escapeExpression((a=null!=(a=l(i,"title")||(null!=t?l(t,"title"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":3,"column":79},"end":{"line":3,"column":88}}}):a))+'" title="'+e.escapeExpression((a=null!=(a=l(i,"title")||(null!=t?l(t,"title"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":3,"column":97},"end":{"line":3,"column":106}}}):a))+'" /></button>\r\n</div>\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"enableCaption"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":0},"end":{"line":12,"column":7}}}))?s:"")}});return i.registerPartial("xecmpf_utils_document.thumbnail_impl_document.thumbnail",n),n}),csui.define("xecmpf/utils/document.thumbnail/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/utils/document.thumbnail/impl/nls/root/lang",{"open":"Open","toOpen":"to open "}),csui.define("css!xecmpf/utils/document.thumbnail/impl/document.thumbnail",[],function(){}),csui.define("xecmpf/utils/document.thumbnail/document.thumbnail.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/url","csui/utils/contexts/factories/connector","csui/utils/nodesprites","csui/controls/node-type.icon/node-type.icon.view","csui/behaviors/default.action/default.action.behavior","hbs!xecmpf/utils/document.thumbnail/impl/document.thumbnail","i18n!xecmpf/utils/document.thumbnail/impl/nls/lang","css!xecmpf/utils/document.thumbnail/impl/document.thumbnail"],function(e,t,i,n,o,s,a,l,r,c){return i.ItemView.extend({"className":function(){var e="xecmpf-document-thumbnail";return this.noAccessToItem&&(e+=" no-contents-permission"),e},"constructor":function(e){if(e||(e={}),e.model||(e.model=e.node),0===e.model.get("actions").length&&(this.noAccessToItem=!0),i.ItemView.prototype.constructor.apply(this,arguments),!this.model)throw new Error("node is missing in the constructor options.")},"behaviors":{"DefaultAction":{"behaviorClass":l}},"template":r,"templateHelpers":function(){return{"title":this.options.title||c.open,"document_name":c.toOpen+this.options.model.get("name"),"enableCaption":this.options.enableCaption}},"ui":{"thumbnailNotLoadedEl":".thumbnail_not_loaded","imgEl":".img-doc-preview","iconEl":".csui-type-icon","buttonToHide":".document-thumbnail-wrapper > button"},"events":{"keydown .thumbnail_not_loaded":function(e){if(13===e.keyCode||32===e.keyCode){var i=this.$el.find(document.activeElement);t(i).trigger("click")}},"keydown button.wrapper":function(e){if(13===e.keyCode||32===e.keyCode){var i=this.$el.find(document.activeElement);t(i).trigger("click")}}},"_showThumbnail":function(){var e,t=n.combine(this.model.connector.connection.url,"/nodes",this.model.get("id"),"thumbnails/medium/content"),i=this;this.ui.thumbnailNotLoadedEl.addClass("thumbnail_empty").removeClass("binf-hidden thumbnail_missing"),this.ui.imgEl.addClass("binf-hidden"),i.noAccessToItem?i.addMissingThumbnailClass():this.model.connector.makeAjaxCall({"url":t,"dataType":"binary"}).then(function(t){i.isDestroyed||(i.url=e=URL.createObjectURL(t),i.ui.imgEl.one("error",function(){i.addMissingThumbnailClass()}),i.ui.imgEl.attr("src",e).one("load",function(e){e.target.clientHeight>=e.target.clientWidth?i.ui.imgEl.addClass("cs-form-img-vertical"):i.ui.imgEl.addClass("cs-form-img-horizontal"),i.ui.thumbnailNotLoadedEl.addClass("binf-hidden"),i.ui.imgEl.removeClass("binf-hidden").addClass("cs-form-img-border")}),i._attachDefaultAction())},function(){i.isDestroyed||(i._attachDefaultAction(),i.addMissingThumbnailClass())})},"_attachDefaultAction":function(){var e=this;this.ui.imgEl.parent().parent().on("click",function(){var t={"model":e.model,"abortDefaultAction":!1};e.triggerMethod("before:defaultAction",t),!1===t.abortDefaultAction&&e.triggerMethod("execute:DefaultAction",e.model),e.triggerMethod("after:defaultAction",t)})},"addMissingThumbnailClass":function(){var e=s.findClassByNode(this.model)||"thumbnail_missing";this.ui.thumbnailNotLoadedEl.removeClass("binf-hidden thumbnail_empty").addClass(e),this.ui.imgEl.addClass("binf-hidden"),this.ui.buttonToHide.addClass("binf-hidden")},"_renderNodeTypeIconView":function(){this._nodeIconView=new a({"el":this.ui.iconEl,"node":this.model}),this._nodeIconView.render()},"onRender":function(){this._renderNodeTypeIconView(),this._showThumbnail()},"onBeforeDestroy":function(){this._nodeIconView&&this._nodeIconView.destroy(),this.url&&URL.revokeObjectURL(this.url)}})}),csui.define("hbs!xecmpf/widgets/dossier/impl/documentslistitem/impl/metadata",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<td class="label" title="'+e.escapeExpression((s=null!=(s=a(i,"label")||(null!=t?a(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":1,"column":25},"end":{"line":1,"column":34}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"label")||(null!=t?a(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":1,"column":36},"end":{"line":1,"column":45}}}):s))+'</td>\r\n<td class="value" title="'+e.escapeExpression((s=null!=(s=a(i,"value")||(null!=t?a(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":2,"column":25},"end":{"line":2,"column":34}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"value")||(null!=t?a(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":2,"column":36},"end":{"line":2,"column":45}}}):s))+"</td>"}});return i.registerPartial("xecmpf_widgets_dossier_impl_documentslistitem_impl_metadata",n),n}),csui.define("xecmpf/widgets/dossier/impl/documentslistitem/impl/metadata.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","hbs!xecmpf/widgets/dossier/impl/documentslistitem/impl/metadata"],function(e,t,i,n,o,s){var a=n.ItemView.extend({"tagName":"tr","constructor":function(e){n.ItemView.prototype.constructor.apply(this,arguments)},"template":s,"templateHelpers":function(){var e=this.model.get("value");return{"value":"Date"===this.model.get("type")?o.formatFriendlyDate(e):e}}});return n.CollectionView.extend({"tagName":"table","constructor":function(e){n.CollectionView.prototype.constructor.apply(this,arguments)},"childView":a})}),csui.define("hbs!xecmpf/widgets/dossier/impl/documentslistitem/impl/documentslistitem",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="document-favorite">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"favorite"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":6,"column":6},"end":{"line":14,"column":13}}}))?s:"")+"    </div>\r\n"},"2":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'           <a href="#" class="socialFav selected" title="'+e.escapeExpression((s=null!=(s=a(i,"removeFav")||(null!=t?a(t,"removeFav"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"removeFav","hash":{},"loc":{"start":{"line":7,"column":57},"end":{"line":7,"column":70}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"removeFav")||(null!=t?a(t,"removeFav"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"removeFav","hash":{},"loc":{"start":{"line":7,"column":84},"end":{"line":7,"column":97}}}):s))+'">\r\n          <span class="icon icon-socialFav"></span>\r\n        </a>\r\n'},"4":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}
;return'        <a href="#" class="socialFav notselected" tabindex="0" title="'+e.escapeExpression((s=null!=(s=a(i,"addFav")||(null!=t?a(t,"addFav"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"addFav","hash":{},"loc":{"start":{"line":11,"column":70},"end":{"line":11,"column":80}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"addFav")||(null!=t?a(t,"addFav"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"addFav","hash":{},"loc":{"start":{"line":11,"column":94},"end":{"line":11,"column":104}}}):s))+'">\r\n          <span class="icon icon-socialFavOpen"></span>\r\n        </a>\r\n'},"6":function(e,t,i,n,o){return'    <div class="document-category-attributes"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="xecmpf-document-preview"></div>\r\n\r\n<div class="xecmpf-document-metadata">\r\n'+(null!=(s=a(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?a(t,"hideFavorite"):t,{"name":"unless","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":2},"end":{"line":16,"column":13}}}))?s:"")+(null!=(s=a(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?a(t,"hideMetadata"):t,{"name":"unless","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":17,"column":2},"end":{"line":19,"column":13}}}))?s:"")+"</div>\r\n"}});return i.registerPartial("xecmpf_widgets_dossier_impl_documentslistitem_impl_documentslistitem",n),n}),csui.define("xecmpf/widgets/dossier/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/dossier/impl/nls/root/lang",{"searchPlaceholder":"Search groups.","emptyListText":"No documents.","groupByLabel":"Group by","classificationLabel":"Classification","createDateLabel":"Creation date","documentTypeLabel":"Document type","tilesLabel":"group(s)","documentsLabel":"document(s)","addFav":"Add to favorite","removeFav":"Remove from favorite","selectByClassificationLabel":"Select group by Classification","selectByCreatedateLabel":"Select group by Created Date"}),csui.define("css!xecmpf/widgets/dossier/impl/documentslistitem/impl/documentslistitem",[],function(){}),csui.define("xecmpf/widgets/dossier/impl/documentslistitem/documentslistitem.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","conws/models/favorite.model","xecmpf/utils/document.thumbnail/document.thumbnail.view","xecmpf/widgets/dossier/impl/documentslistitem/impl/metadata.model","xecmpf/widgets/dossier/impl/documentslistitem/impl/metadata.view","hbs!xecmpf/widgets/dossier/impl/documentslistitem/impl/documentslistitem","i18n!xecmpf/widgets/dossier/impl/nls/lang","css!xecmpf/widgets/dossier/impl/documentslistitem/impl/documentslistitem"],function(e,t,i,n,o,s,a,l,r,c){return n.ItemView.extend({"tagName":"li","className":function(){var e="xecmpf-document-list-item";return this.noAccessToItem&&(e+=" no-contents-permission"),e},"constructor":function(e){e||(e={}),0===e.model.get("actions").length&&(this.noAccessToItem=!0),n.ItemView.prototype.constructor.apply(this,arguments),this.favModel=new o({"selected":this.model.get("favorite")},{"connector":this.model.connector,"node":this.model}),this.listenTo(this.favModel,"change:selected",this.render)},"template":r,"templateHelpers":function(){return{"enableIcon":!0,"hideMetadata":this.options.hideMetadata,"hideFavorite":this.options.hideFavorite,"addFav":c.addFav+this.options.model.get("name"),"removeFav":c.removeFav+this.options.model.get("name")}},"ui":{"thumbnailEL":".xecmpf-document-preview","metadataEl":".document-category-attributes"},"triggers":{"click a.socialFav.selected":"remove:favorite","click a.socialFav.notselected":"add:favorite"},"events":{"keydown a.socialFav.selected":function(e){13!==e.keyCode&&32!==e.keyCode||this.triggerMethod("remove:favorite")},"keydown a.socialFav.notselected":function(e){13!==e.keyCode&&32!==e.keyCode||this.triggerMethod("add:favorite")}},"onRemoveFavorite":function(e){this.noAccessToItem||(this.favModel.remove(),this.model.set("favorite",!1),this.render())},"onAddFavorite":function(e){this.noAccessToItem||(this.favModel.add(),this.model.set("favorite",!0),this.render())},"_renderMetadata":function(){var e=this.model.get("metadata_categories");if(!t.isEmpty(e)){var i=new a(void 0,{"data":e,"hideEmptyFields":this.options.hideEmptyFields,"catsAndAttrs":this.options.catsAndAttrs});this._metadataView=new l({"collection":i}),this.ui.metadataEl.html(this._metadataView.render().el)}},"_renderThumbnail":function(){this._documentThumbnailView=new s({"context":this.options.context,"model":this.model,"enableCaption":!0}),this.ui.thumbnailEL.html(this._documentThumbnailView.render().el)},"onRender":function(){this._renderThumbnail(),!0!==this.options.hideMetadata&&this._renderMetadata()},"onBeforeDestroy":function(){this._documentThumbnailView.destroy(),this._metadataView&&this._metadataView.destroy()}})}),csui.define("hbs!xecmpf/widgets/dossier/impl/documentslist/impl/documentslist",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<ul class="xecmpf-document-list-group"></ul>'}});return i.registerPartial("xecmpf_widgets_dossier_impl_documentslist_impl_documentslist",n),n}),csui.define("css!xecmpf/widgets/dossier/impl/documentslist/impl/documentslist",[],function(){}),csui.define("xecmpf/widgets/dossier/impl/documentslist/documentslist.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/tile/behaviors/infinite.scrolling.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/tile/behaviors/blocking.behavior","csui/controls/tile/tile.view","csui/controls/list/emptylist.view","xecmpf/widgets/dossier/impl/documentslist/impl/documents.model","xecmpf/widgets/dossier/impl/documentslistitem/documentslistitem.view","i18n!xecmpf/widgets/dossier/impl/nls/lang","hbs!xecmpf/widgets/dossier/impl/documentslist/impl/documentslist","css!xecmpf/widgets/dossier/impl/documentslist/impl/documentslist"],function(e,t,i,n,o,s,a,l,r,c,d,u,p){var m;return m=n.CompositeView.extend({"className":"list-group-container","constructor":function(e){e||(e={}),n.CompositeView.prototype.constructor.apply(this,arguments)},"template":p,"behaviors":{"PerfectScrolling":{"behaviorClass":s,"suppressScrollX":!0,"scrollYMarginOffset":15},"InfiniteScrolling":{"behaviorClass":o,"content":">ul.xecmpf-document-list-group","fetchMoreItemsThreshold":80}},"childViewContainer":">ul.xecmpf-document-list-group","childView":d,"childViewOptions":function(){return{"context":this.options.context,"workspaceContext":this.options.workspaceContext,"nodeModel":this.options.nodeModel,"hideMetadata":this.options.hideMetadata,"hideEmptyFields":this.options.hideEmptyFields,"hideFavorite":this.options.hideFavorite,"catsAndAttrs":this.options.catsAndAttrs}},"emptyView":r,"emptyViewOptions":{"text":u.emptyListText||"No documents."},"onRender":function(){this.$el.one("mouseenter",e.proxy(function(){this.triggerMethod("dom:refresh")},this))}}),l.extend({"className":function(){var e="xecmpf-documents-tile",i=t.result(l.prototype,"className");return i&&(e+=" "+i),e},"_focusedChild":void 0,"_activeChild":void 0,"constructor":function(e){e||(e={}),l.prototype.constructor.apply(this,arguments),this.childrens=m},"templateHelpers":function(){return{"title":this.model&&this.model.get("name"),"icon":!1}},"behaviors":{"Blocking":{"behaviorClass":a}},"_accSelector":".thumbnail_not_loaded","currentlyFocusedElement":function(){return this.$(this._accSelector)},"getActiveChild":function(){return this._activeChild},"toggleFocus":function(e){this.ui.listItem.prop("tabindex",!0===e?"0":"-1"),e&&this.ui.listItem.trigger("focus")},"contentView":m,"contentViewOptions":function(){var e=t.extend(this.options.model&&this.options.model.get("query_params"),{"metadata_categories":this.options.metadata_categories}),i=this.options.model&&this.options.model.get("documents"),n=this.options.model&&this.options.model.get("paging"),o=new c(i,{"nodeModel":this.options.nodeModel,"query":e,"paging":n});return this.listenTo(o,"request",this.blockActions).listenTo(o,"sync",this.unblockActions).listenTo(o,"error",this.unblockActions),{"collection":o,"context":this.options.context,"workspaceContext":this.options.workspaceContext,"nodeModel":this.options.nodeModel,"hideMetadata":this.options.hideMetadata,"hideEmptyFields":this.options.hideEmptyFields,"hideFavorite":this.options.hideFavorite,"catsAndAttrs":this.options.catsAndAttrs}},"_renderTileProperties":function(){var t,i,n=this.model&&this.model.get("paging").total_count||"0";this.$docsCountEl=e("<span></span>").addClass("count docs-count").text(n),i=e("<span></span>").addClass("count-label").text(u.documentsLabel||"document(s)"),t=e("<div></div>").addClass("tile-properties").append(this.$docsCountEl).append(i),this.$(">.tile-header").append(t)},"onRender":function(){this._renderTileProperties()},"onBeforeShow":function(){this.listenTo(this.contentView,"execute:defaultAction",function(e){this.triggerMethod("execute:defaultAction",e)})}})}),csui.define("hbs!xecmpf/controls/dropdown/impl/dropdownitem",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" tabindex="-1">'+e.escapeExpression((s=null!=(s=a(i,"name")||(null!=t?a(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":1,"column":26},"end":{"line":1,"column":34}}}):s))+"</a>"}});return i.registerPartial("xecmpf_controls_dropdown_impl_dropdownitem",n),n}),csui.define("xecmpf/controls/dropdown/dropdownitem.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","hbs!xecmpf/controls/dropdown/impl/dropdownitem"],function(e,t,i,n,o){return n.ItemView.extend({"className":"dropdown-menu-item","tagName":"li","constructor":function(e){n.ItemView.prototype.constructor.apply(this,arguments)},"template":o,"triggers":{"click":"click:item"},"modelEvents":{"change":"render"}})}),csui.define("hbs!xecmpf/controls/dropdown/impl/dropdown",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="binf-dropdown-toggle csui-acc-focusable" role="button"\r\n        data-binf-toggle="dropdown" aria-expanded="false" tabindex="-1">\r\n  <span class="dropdown-label">'+e.escapeExpression((s=null!=(s=a(i,"dropdownLabel")||(null!=t?a(t,"dropdownLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"dropdownLabel","hash":{},"loc":{"start":{"line":3,"column":31},"end":{"line":3,"column":48}}}):s))+'</span>\r\n  <span class="csui-button-icon icon-expandArrowDown"></span>\r\n</a>\r\n<ul class="binf-dropdown-menu" role="menu"></ul>\r\n'}});return i.registerPartial("xecmpf_controls_dropdown_impl_dropdown",n),n}),csui.define("css!xecmpf/controls/dropdown/impl/dropdown",[],function(){}),csui.define("xecmpf/controls/dropdown/dropdown.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/binf/js/binf","xecmpf/controls/dropdown/dropdownitem.view","hbs!xecmpf/controls/dropdown/impl/dropdown","css!xecmpf/controls/dropdown/impl/dropdown"],function(e,t,i,n,o,s,a,l){return n.CompositeView.extend({"className":"xecmpf-dropdown binf-dropdown","constructor":function(e){e||(e={}),n.CompositeView.prototype.constructor.apply(this,arguments),this.label=this.options.label},"template":a,"templateHelpers":function(){return{"dropdownLabel":this.label||"Dropdown"}},"ui":{"control":".binf-dropdown-toggle","label":".dropdown-label"},"childView":s,"childViewContainer":"ul.binf-dropdown-menu","childEvents":{"render":"onRenderChild","click:item":"onClickItem"},"onRenderChild":function(e){var t=e.model;!0===t.get("active")&&(e.$el.addClass("binf-active").siblings().removeClass("binf-active"),this.currModel=t),!0===t.get("hide")&&e.$el.addClass("binf-hidden")},"onClickItem":function(e){if(!e.$el.hasClass("binf-active")){var t=e.model,i={"currModel":this.currModel,"newModel":t};this.triggerMethod("change:dropdown:item",i),!1!==i.change&&(e.$el.addClass("binf-active").siblings().removeClass("binf-active"),this.currModel=t),this.hideDropdownMenu()}},"showDropdownMenu":function(){this.$el.addClass("binf-open"),this.ui.control.attr("aria-expanded",!0)},"hideDropdownMenu":function(){this.$el.removeClass("binf-open"),this.ui.control.attr("aria-expanded",!1)},"updateLabel":function(e){e&&"string"==typeof e&&this.ui.label.text(e)},"setModelActive":function(e){e instanceof i.Model&&(e.unset("active",{"silent":!0}),e.set("active",!0))},"setModelHide":function(e){e instanceof i.Model&&(e.unset("hide",{"silent":!0}),e.set("hide",!0))},"onRender":function(){this.ui.control.binf_dropdown()}})}),csui.define("xecmpf/widgets/dossier/impl/dropdown.items",["module","csui/lib/backbone","i18n!xecmpf/widgets/dossier/impl/nls/lang"],function(e,t,i){var n,o,s=e.config();return n=t.Model.extend({"idAttribute":"value","defaults":{"value":null,"name":null,"sequence":0}}),o=t.Collection.extend({"model":n,"comparator":"sequence","getItemValues":function(){return this.pluck("value")},"deepClone":function(){return new o(this.map(function(e){return e.attributes}))}}),new o([{"value":"classification","name":s.groupByDocumentType?i.documentTypeLabel:i.classificationLabel,"sequence":10},{"value":"create_date","name":i.createDateLabel,"sequence":20}])}),csui.define("css!xecmpf/widgets/dossier/impl/dossier",[],function(){}),csui.define("xecmpf/widgets/dossier/dossier.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/contexts/factories/node","conws/models/workspacecontext/workspacecontext.factory","xecmpf/widgets/dossier/impl/dossier.factory","csui/controls/tile/behaviors/blocking.behavior","csui/behaviors/limiting/limiting.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","xecmpf/behaviors/scroll.controls/scroll.controls.behavior","csui/controls/list/behaviors/list.view.keyboard.behavior","csui/dialogs/modal.alert/modal.alert","csui/controls/list/list.view","xecmpf/widgets/dossier/impl/documentslist/documentslist.view","xecmpf/controls/dropdown/dropdown.view","xecmpf/widgets/dossier/impl/dropdown.items","i18n!xecmpf/widgets/dossier/impl/nls/lang","css!xecmpf/widgets/dossier/impl/dossier"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f,h,b,g){return m.extend({"id":"xecmpf-dossier","constructor":function(t){if(t||(t={}),t=t.data?e.extend(t,t.data):t,!t.workspaceContext){if(!t.context)throw new Error("Context is missing in the constructor options!");t.workspaceContext=t.context.getObject(s)}this.lastFilterValue="",t.workspaceContext.setWorkspaceSpecific(a),m.prototype.constructor.apply(this,arguments),this.listenTo(this.completeCollection,"request",this.blockActions).listenTo(this.completeCollection,"error",this.unblockActions).listenTo(this.completeCollection,"sync",this.onCompleteCollectionSync),this.synced=!1},"templateHelpers":function(){return{"icon":void 0,"title":void 0,"searchPlaceholder":g.searchPlaceholder}},"events":{'focus span[title="Search"]':function(){this.$el.find(".xecmpf-dropdown").removeClass("binf-open")},"keydown .clearer":function(){var e=this.$(".search");e.val(""),e.trigger("focus"),this.filterChanged()},"keydown li.dropdown-menu-item":function(){if(13===event.keyCode||32===event.keyCode){t(".dropdown-menu-item").trigger("click");this.$el.find(".xecmpf-dropdown").removeClass("binf-open")}},"keydown .dossier-dropdown":"getDossierViewFilter",'keydown .tile-header span[title="Search"]':function(e){13!==e.keyCode&&32!==e.keyCode||t('.tile-header span[title="Search"]').trigger("click")},'keydown .tile-header input[class="search"]':function(e){27===e.keyCode&&(t('.tile-header span[title="Hide"]').trigger("click"),t('.tile-header span[title="Hide"]').trigger("focus"))}},"behaviors":{"LimitedList":{"behaviorClass":r,"limit":void 0,"completeCollection":function(){return this.nodeModel=this.options.workspaceContext.getObject(o),this.groupBy=this.options.groupBy,function(e,t){if(e||(e=[]),t.metadata_categories="",t.catsAndAttrs=[],e.length>0){var i="",n=[];e.forEach(function(e){e.attributeId?(i+=e.categoryId+",",n.push(e.categoryId+"_"+e.attributeId)):e.categoryId&&(i+=e.categoryId+",",n.push(e.categoryId))}),t.metadata_categories=i.substr(0,i.length-1),t.catsAndAttrs=n}}(this.options.metadata,this),this.options.workspaceContext.getCollection(a,{"options":{"nodeModel":this.nodeModel,"query":{"group_by":this.groupBy,"metadata_categories":this.metadata_categories}}})}},"PerfectScrolling":{"behaviorClass":c,"scrollingDisabled":!0},"ScrollControls":{"behaviorClass":d,"controlsContainer":">.tile-content","contentParent":">.tile-content>.binf-list-group","animateDuration":500,"scrollableWidth":function(){var e=this.$(">.tile-content").innerWidth(),t=this.$(">.tile-content>.binf-list-group>.tile").outerWidth(!0);return Math.floor(e/t)*t||t},"leftControlIconClass":"caret-left","rightControlIconClass":"caret-right"},"Blocking":{"behaviorClass":l}},"getDossierViewFilter":function(e){switch(e.keyCode){case 13:case 32:var t=this.$el.find(".xecmpf-dropdown");t.hasClass("binf-open")?t.removeClass("binf-open"):t.addClass("binf-open")}},"childView":f,"childViewOptions":function(){return{"context":this.options.context,"workspaceContext":this.options.workspaceContext,"nodeModel":this.nodeModel,"hideMetadata":this.options.hideMetadata,"hideEmptyFields":this.options.hideEmptyFields,"metadata_categories":this.metadata_categories,"hideFavorite":this.options.hideFavorite,"catsAndAttrs":this.catsAndAttrs}},"onRenderTemplate":function(){!0!==this.options.hideGroupByCriterionDropdown&&this._renderGroupByDropdownView(),this._renderDossierProperties()},"onRenderCollection":function(){this.triggerMethod("update:scroll:controls")},"onCompleteCollectionSync":function(){this.synced=!0,this._updateDossierProperties(),this.unblockActions()},"isEmpty":function(){return!0===this.synced&&0===this.collection.models.length},"emptyViewOptions":{"text":g.emptyListText||"No documents."},"_renderGroupByDropdownView":function(){var e=t("<div></div>").addClass("dossier-dropdown-wrapper"),i=t("<span></span>").addClass("dossier-dropdown-label").text(g.groupByLabel),o=t("<div></div>").addClass("dossier-dropdown");e.append(i).append(o),this.$(">.tile-header>.tile-controls").prepend(e);var s=new n.Region({"el":o});this.groupBydropdownView=new h({"label":this._getGroupByDropdownLabel(b),"collection":b}),this.listenTo(this.groupBydropdownView,"change:dropdown:item",function(e){var t=e.newModel.get("value"),i=this;this.synced=!1,this.completeCollection.fetch({"query":{"group_by":t,"metadata_categories":this.metadata_categories}}).done(function(n,o,s){i.groupBy=t,i.groupBydropdownView.updateLabel(i._getGroupByDropdownLabel(e.newModel)),i.$(">.tile-content>.binf-list-group").scrollLeft(0),i.triggerMethod("update:scroll:controls"),i._setGroupByDropdownModelActive(i.groupBydropdownView.collection)}).fail(function(t,n,o){var s=t.responseJSON?t.responseJSON.error:"Internal Server Error!";p.showError(s).always(function(){i._setGroupByDropdownModelActive(e.currModel)})})}),s.show(this.groupBydropdownView),this._setGroupByDropdownModelActive(b)},"_getGroupByDropdownLabel":function(e){var t,n=" ";return e instanceof i.Model?t=e:e instanceof i.Collection&&(t=this._getGroupByDropdownActiveModel(e)),t&&(n+=t.get("name")),n},"_getGroupByDropdownActiveModel":function(e){if(e instanceof i.Collection)return e.find(t.proxy(function(e){return e.get("value")===this.groupBy},this))},"_setGroupByDropdownModelActive":function(e){var t;e instanceof i.Model?t=e:e instanceof i.Collection&&(t=this._getGroupByDropdownActiveModel(e)),t&&this.groupBydropdownView.setModelActive(t)},"_renderDossierProperties":function(){var e,i,n,o=this.completeCollection.length||"0",s=this.completeCollection.total_documents||"0";this.$tilesCountEl=t("<span></span>").addClass("count tiles-count").text(o),i=t("<span></span>").addClass("count-label").text(g.tilesLabel||"group(s)"),this.$docsCountEl=t("<span></span>").addClass("count docs-count").text(s),n=t("<span></span>").addClass("count-label").text(g.documentsLabel||"document(s)"),e=t("<div></div>").addClass("dossier-properties").append(this.$tilesCountEl).append(i).append(this.$docsCountEl).append(n);var a=this.$(".dossier-dropdown .csui-acc-focusable").get(0);a.setAttribute("tabindex","0");var l,r=this.groupBy;l="create_date"===r?g.selectByClassificationLabel:g.selectByCreatedateLabel,a.setAttribute("aria-label",l),this.$(">.tile-header>.tile-title").remove(),this.$(">.tile-header").prepend(e);var c=this.$('>.tile-header span[title="Search"]');t(c).addClass("csui-acc-focusable"),t(c).attr("tabindex","0")},"_updateDossierProperties":function(){var t=e.filter(this.completeCollection.models,function(e){return e.attributes.documents}),i=t.length,n=this.completeCollection.total_documents;this.$tilesCountEl.text(i),this.$docsCountEl.text(n)},"filterChanged":function(){var e=this.ui.searchInput.val().trim();this.lastFilterValue!==e&&(this.lastFilterValue=e,m.prototype.filterChanged.apply(this,arguments))}})}),csui.define("xecmpf/widgets/header/impl/completenesscheck/impl/models/outdatedocuments.model",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/utils/url"],function(e,t,i,n){var o=t.Model.extend({"idAttribute":"id","constructor":function(e,i){i||(i={}),t.Model.prototype.constructor.apply(this,arguments),this.makeConnectable(i)},"parse":function(e){return e}});i.mixin(o.prototype);var s=t.Collection.extend({"model":o,"constructor":function(e,i){this.options=i||{},t.Collection.prototype.constructor.apply(this,arguments),this.makeConnectable(i)},"url":function(){var e=this.options.node.get("id");return n.combine(new n(this.connector.connection.url).getApiBase("v2"),"/businessworkspaces/"+e+"/outdateddocuments")},"parse":function(e){return e.results.data},"fetch":function(){return t.Collection.prototype.fetch.apply(this,arguments)}});return i.mixin(s.prototype),s}),csui.define("xecmpf/widgets/header/impl/completenesscheck/impl/outdatedocuments.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node","xecmpf/widgets/header/impl/completenesscheck/impl/models/outdatedocuments.model"],function(e,t,i,n,o,s,a){return n.extend({"propertyPrefix":"outdateDocumentsCollection","constructor":function(l,r){n.prototype.constructor.apply(this,arguments);var c=this.options.outdatedDocumentsCollection||{};if(!(c instanceof i.Collection)){var d=l.getObject(o,r),u=l.getModel(s,r),p=e.config();c=new a(c.models,t.extend({"connector":d,"node":u,"reportType":"outdatedDocuments"},c.options,p.options,{"autofetch":!0}))}this.property=c},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("xecmpf/widgets/header/impl/previewpane/impl/previewpane.list.keyboard.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette"],function(e,t,i,n,o){"use strict";var s={"none":-1,"list":1};return o.Behavior.extend({"constructor":function(e,i){o.Behavior.prototype.constructor.apply(this,arguments),i.keyboardBehavior=this,this.tabableElements=[];var n=this;this.listenTo(i,"show",function(){n.refreshTabableElements(i)}),this.listenTo(i,"click:item",function(e){var t=i.selectedIndex,n=i.selectedIndexElem(t);n&&n.prop("tabindex","-1"),i.currentTabPosition=s.list,i.selectedIndex=i.collection.indexOf(e.model)}),t.extend(i,{"_focusList":function(){return(this.selectedIndex<0||void 0===this.selectedIndex)&&(this.selectedIndex=this.getSelectedIndex()),this.currentTabPosition=s.list,this.getSelectedItem().$el},"_setFocus":function(){return this._focusList()},"_listIsInFocus":function(){var e,t=!1;for(e=0;e<this.collection.length;e++){var i=this.selectedIndexElem(e);if(i&&i.is(":focus")){t=!0;break}}return t},"_checkFocusAndSetCurrentTabPosition":function(){this._listIsInFocus()?this.currentTabPosition=s.list:this.currentTabPosition=s.none},"_setFirstAndLastFocusable":function(){this.getSelectedItem()&&this.getSelectedItem().$el.prop("tabindex","0")},"currentlyFocusedElement":function(e){return this._checkFocusAndSetCurrentTabPosition(),this._setFirstAndLastFocusable(),e&&e.shiftKey?this._focusList():this.currentTabPosition===s.list?this._focusList():this._setFocus()},"_resetFocusedListElem":function(){var e,t;e=this.selectedIndex,t=this.selectedIndexElem(e),t&&t.prop("tabindex","-1"),e=this.getSelectedIndex(),(t=this.selectedIndexElem(e))&&(t.prop("tabindex","0"),this.selectedIndex=e)},"_moveTo":function(e,i,n){e.preventDefault(),e.stopPropagation(),setTimeout(t.bind(function(){n&&n.prop("tabindex","-1"),i.prop("tabindex","0"),i.trigger("focus")},this),50)},"onKeyInView":function(e){if(this._checkFocusAndSetCurrentTabPosition(),9===e.keyCode)e.shiftKey&&setTimeout(t.bind(function(){this._resetFocusedListElem()},this),50);else if(32===e.keyCode||13===e.keyCode)this.currentTabPosition===s.list&&(e.preventDefault(),e.stopPropagation(),this.selectAt(this.selectedIndex));else if(27===e.keyCode&&this.previewPane){this.previewPane.hide();var i=this.previewPane.parent.$el.find("button");i&&i.trigger("focus")}},"onKeyDown":function(e){if(!0===this.config.debug&&console.log("preview-behavior: onKeydown - keyCode:"+e.which),this._checkFocusAndSetCurrentTabPosition(),this.currentTabPosition!==s.list)return void this.onKeyInView(e);var t=this.selectedIndex;(t<0||void 0===t)&&(t=this.getSelectedIndex());var i=this.selectedIndexElem(t);switch(e.which){case 33:this._moveTo(e,this._selectFirst(),i);break;case 34:this._moveTo(e,this._selectLast(),i);break;case 38:this._moveTo(e,this._selectPrevious(),i);break;case 40:this._moveTo(e,this._selectNext(),i);break;default:return void this.onKeyInView(e)}},"_selectFirst":function(){return this.selectedIndex=0,this.selectedIndexElem(this.selectedIndex)},"_selectLast":function(){return this.selectedIndex=this.collection.length-1,this.selectedIndexElem(this.selectedIndex)},"_selectNext":function(){return(this.selectedIndex<0||void 0===this.selectedIndex)&&(this.selectedIndex=this.getSelectedIndex()),this.selectedIndex<this.collection.length-1&&this.selectedIndex++,this.selectedIndexElem(this.selectedIndex)},"_selectPrevious":function(){return(this.selectedIndex<0||void 0===this.selectedIndex)&&(this.selectedIndex=this.getSelectedIndex()),this.selectedIndex>0&&this.selectedIndex--,this.selectedIndexElem(this.selectedIndex)},"selectAt":function(e){if(!(e>=this.collection.length||e<0)){var t=this.selectedIndexElem(e);t&&t.trigger("click")}}})},"refreshTabableElements":function(e){n.debug("PreviewPaneListKeyboardBehavior::refreshTabableElements "+e.constructor.name)&&console.log(n.last),this.view.currentTabPosition=s.none,this.view.selectedIndex=-1}})}),csui.define("xecmpf/widgets/header/impl/previewpane/impl/previewpane.list.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/list/simplelist.view","csui/controls/node-type.icon/node-type.icon.view","xecmpf/widgets/header/impl/previewpane/impl/previewpane.list.keyboard.behavior","csui/dialogs/modal.alert/modal.alert"],function(e,t,i,n,o,s,a,l){return o.extend({"constructor":function(e){o.prototype.constructor.apply(this,arguments)},"behaviors":{"PreviewPaneListKeyboardBehavior":{"behaviorClass":a}},"events":{"keydown":"onKeyDown"},"initialize":function(e){e||(e={}),this.enableIcon=e.enableIcon,this.enableDescription=e.enableDescription,this.previewPane=e.previewPane,this.config=e.config,this.listenTo(this,"childview:render",this.onRenderItem),this.listenTo(this,"childview:before:destroy",this.onBeforeDestroyItem),this.listenTo(this,"click:item",this.onClickListItem)},"childViewOptions":function(e){var t=e.get("name");return"outdatedDocuments"===e.get("reportType")&&(t=e.get("classification_name")),{"templateHelpers":function(){return{"enableIcon":this.enableIcon,"enableDescription":this.enableDescription,"name":t}}.bind(this)}},"onClickListItem":function(e){var t=e.model.get("displayUrl"),i=e.model.get("displayUrlError");if(i)l.showError(i);else if(t){var n=window.open(t,"_blank");n.focus()}},"onRenderItem":function(t){if(t._nodeIconView=new s({"el":t.$(".csui-type-icon").get(0),"node":t.model}),t._nodeIconView.render(),this.options&&t.model&&t.model.attributes&&t.model.attributes.name&&this.options.enableDescription){var i='<div class="SLITitleDiv"><div class="SLITitle"><span title="'+e.escape(t.model.attributes.name)+'">'+e.escape(t.model.attributes.name)+'</span></div><div class="SLIDescription"><span title="'+e.escape(t.model.attributes.classification_name)+'">'+e.escape(t.model.attributes.classification_name)+"</span></div></div>";t.$(".list-item-title").replaceWith(i)}var n=t.model.get("displayUrl");if(n){t.$el[0].href=n}},"onBeforeDestroyItem":function(e){e._nodeIconView&&e._nodeIconView.destroy()}})}),csui.define("hbs!xecmpf/widgets/header/impl/previewpane/impl/previewpane",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n<div class="binf-panel-body xecmpf-preview-body csui-normal-scrolling  csui-no-scroll-x"></div>\r\n\r\n<div class="binf-panel-footer xecmpf-preview-footer">'+e.escapeExpression((s=null!=(s=a(i,"info")||(null!=t?a(t,"info"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"info","hash":{},"loc":{"start":{"line":4,"column":53},"end":{"line":4,"column":61}}}):s))+"</div>\r\n"}});return i.registerPartial("xecmpf_widgets_header_impl_previewpane_impl_previewpane",n),n}),csui.define("css!xecmpf/widgets/header/impl/previewpane/impl/previewpane",[],function(){}),csui.define("xecmpf/widgets/header/impl/previewpane/previewpane.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","xecmpf/widgets/header/impl/previewpane/impl/previewpane.list.view","hbs!xecmpf/widgets/header/impl/previewpane/impl/previewpane","i18n","css!xecmpf/widgets/header/impl/previewpane/impl/previewpane"],function(e,t,i,n,o,s,a,l){var r=i.LayoutView.extend({"className":"xecmpf-preview binf-panel binf-panel-default","constructor":function(n){if(i.LayoutView.prototype.constructor.call(this,n),n||(n={}),this.config=n.config,this.config){this.parent=n.parent,this.config.readonly=!0,this.docsCollection=n.collection,this.headerTitle=n.headerTitle,this.footerInfoText=n.info,this.direction=l.settings.rtl?"left":"right",n.parent.$el.binf_popover({"content":this.$el,"placement":"auto "+this.direction,"trigger":"manual","container":t.fn.binf_modal.getDefaultContainer(),"html":!0,"title":n.headerTitle});var o=this.parent.$el.data("binf.popover"),s=o.tip();n.customPopoverClass||n.customPopoverClass;s.addClass("xecmpf-previewpane-popover").addClass(n.customPopoverClass),n&&n.headerColor&&(!0===this.config.debug&&console.log("add headerColor "+n.headerColor+" to "+s.find(".binf-popover-title")),s.find(".binf-popover-title").addClass(n.headerColor)),this.parent.$el.off("click").on("click",t.proxy(function(){!0===this.config.debug&&console.log("Preview : Keyboard enter item"),this.show();var t=e.str.sformat("div a:nth-child({0})",1)
;this.docsListView.$(t).first().trigger("focus")},this)),this.parent.$el.off("mouseenter").on("mouseenter",t.proxy(function(){!0===this.config.debug&&console.log("Preview : Mouseenter item"),this.show()},this)),this.parent.$el.off("keydown").on("keydown",t.proxy(function(){13!==event.keyCode&&32!==event.keyCode||this.show(),27===event.keyCode&&this.isRendered&&this._delayedHide()},this)),this.toggle=0,this.parent.$el.on("touchend",t.proxy(function(){!0===this.config.debug&&console.log("Preview : touchend item"),this.$el.is(":visible")||(this.toggle=0),0===this.toggle?this.show():1===this.toggle&&this._delayedHide()},this)),this.parent.$el.off("mouseleave").on("mouseleave",t.proxy(function(){!0===this.config.debug&&console.log("Preview : Mouseleave item"),this._delayedHide()},this)),s.off("mouseenter").on("mouseenter",t.proxy(function(){!0===this.config.debug&&console.log("Preview : Mouseenter binf-popover"),this.show()},this)),s.off("keydown").on("keydown",t.proxy(function(e){27===e.keyCode&&this._delayedHide()},this)),s.off("mouseleave").on("mouseleave",t.proxy(function(){!0===this.config.debug&&console.log("Preview : Mouseleave binf-popover"),this._delayedHide()},this)),this.propagateEventsToRegions(),this.listenTo(this,"dom:refresh",function(){this.options.parent.$el.binf_popover("show")})}},"template":a,"regions":{"contentRegion":".xecmpf-preview-body","footerRegion":".xecmpf-preview-footer"},"templateHelpers":function(){return{"title":this.headerTitle,"info":this.footerInfoText}},"onBeforeDestroy":function(e){this.config&&this.parent.$el.binf_popover("destroy")},"show":function(){if(this.config){if(!0===this.config.debug&&console.log("Preview : Preparing show"),this.hideTimeout&&(clearTimeout(this.hideTimeout),!0===this.config.debug&&console.log("Preview : Cleared hide timeout"),this.hideTimeout=null),this.$el.is(":visible"))return void(!0===this.config.debug&&console.log("Preview : Already visible"));if(this.showCancelled=!1,this.$el.hide(),this.render(),this.docsListView&&this.docsListView.destroy(),this.docsListView=new s({"collection":this.docsCollection,"enableIcon":this.options.enableIcon,"enableDescription":this.options.enableDescription,"previewPane":this,"config":this.config}),this.listenTo(this.docsListView,"before:DefaultAction",function(e){e.cancelDefaultAction=this.options.cancelDefaultAction}),this.showCancelled)!0===this.config.debug&&console.log("Preview : Show was cancelled");else{!0===this.config.debug&&console.log("Preview : Showing"),this.contentRegion.show(this.docsListView,{"render":!0}),this.$el.show(),this.triggerMethod("before:show",this),this.toggle=1,this.options.parent.$el.binf_popover("show"),this.triggerMethod("show",this);var e=this.parent.$el.data("binf.popover")&&this.parent.$el.data("binf.popover").tip().attr("id");this.parent.$el.find("button").attr("aria-describedby",e),!0===this.config.debug&&(console.log("Viewport height: "+t(window).height()),console.log("document height: "+t(document).height()),console.log("body     height: "+t("body").height()),console.log("binf-popover  height: "+this.$el.height()),console.log("list     height: "+this.$el.find(".xecmpf-preview-body").height()))}}},"hide":function(){!0===this.config.debug&&console.log("Preview : Going to hide"),this.config&&!this.config.debugNoHide?(!0===this.config.debug&&console.log("Preview : Hidden"),this.toggle=0,this.options.parent.$el.binf_popover("hide"),this.hideTimeout=null):!0===this.config.debug&&console.log("Preview : Leaving visible"),this.showCancelled=!0,this.hideTimeout=null,this.parent.$el.find("button").removeAttr("aria-describedby")},"_delayedHide":function(){!0===this.config.debug&&console.log("Preview : Setting hide timeout"),this.hideTimeout=window.setTimeout(t.proxy(this.hide,this),200)},"onShow":function(){this.$(".cs-simplelist.binf-panel").css("height",this.$(".binf-panel-body.xecmpf-preview-body").height()),this.footerInfoText||t(this.regions.footerRegion).hide()}});return e.extend(r.prototype,o),r}),csui.define("hbs!xecmpf/widgets/header/impl/completenesscheck/impl/completenesscheckitem",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="csui-icon '+e.escapeExpression((s=null!=(s=a(i,"icon")||(null!=t?a(t,"icon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":2,"column":25},"end":{"line":2,"column":33}}}):s))+'"></span>\r\n  <button class="count binf-btn binf-btn-default xecmpf-docscount-without-text" data-binf-toggle="popover" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"docsCountWithText")||(null!=t?a(t,"docsCountWithText"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"docsCountWithText","hash":{},"loc":{"start":{"line":3,"column":119},"end":{"line":3,"column":140}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"docsCount")||(null!=t?a(t,"docsCount"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"docsCount","hash":{},"loc":{"start":{"line":3,"column":142},"end":{"line":3,"column":155}}}):s))+'</button>\r\n  <button class="count binf-btn binf-btn-default xecmpf-docscount-with-text" data-binf-toggle="popover" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"docsCountWithText")||(null!=t?a(t,"docsCountWithText"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"docsCountWithText","hash":{},"loc":{"start":{"line":4,"column":116},"end":{"line":4,"column":137}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"docsCountWithText")||(null!=t?a(t,"docsCountWithText"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"docsCountWithText","hash":{},"loc":{"start":{"line":4,"column":139},"end":{"line":4,"column":160}}}):s))+"</button>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"docsCount"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":5,"column":7}}}))?s:""}});return i.registerPartial("xecmpf_widgets_header_impl_completenesscheck_impl_completenesscheckitem",n),n}),csui.define("hbs!xecmpf/widgets/header/impl/completenesscheck/impl/completenesscheck",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'  <div class="missing-docs-check"></div>\r\n  <div class="outdated-docs-check"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=a(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?a(t,"hideMissingDocsCheck"):t,{"name":"unless","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":4,"column":11}}}))?s:""}});return i.registerPartial("xecmpf_widgets_header_impl_completenesscheck_impl_completenesscheck",n),n}),csui.define("xecmpf/widgets/header/impl/completenesscheck/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/header/impl/completenesscheck/impl/nls/root/lang",{"missingDocsTitle":"Missing documents","dialogTitle":"Reports","recentReportName":"Last 10 added documents","addedReportName":"Documents you added","missingReportName":"{0} missing","emptyMessage":"No documents to display","outdatedDocsTitle":"Outdated documents","outdatedReportName":"{0} outdated"}),csui.define("css!xecmpf/widgets/header/impl/completenesscheck/impl/completenesscheck",[],function(){}),csui.define("xecmpf/widgets/header/impl/completenesscheck/completenesscheck.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","conws/models/workspacecontext/workspacecontext.factory","xecmpf/widgets/header/impl/completenesscheck/impl/missingdocuments.factory","xecmpf/widgets/header/impl/completenesscheck/impl/outdatedocuments.factory","csui-ext!xecmpf/widgets/header/completenesscheck/completenesscheck.factory","xecmpf/widgets/header/impl/previewpane/previewpane.view","hbs!xecmpf/widgets/header/impl/completenesscheck/impl/completenesscheckitem","hbs!xecmpf/widgets/header/impl/completenesscheck/impl/completenesscheck","i18n!xecmpf/widgets/header/impl/completenesscheck/impl/nls/lang","css!xecmpf/widgets/header/impl/completenesscheck/impl/completenesscheck"],function(e,t,i,n,o,s,a,l,r,c,d,u){var p=n.ItemView.extend({"className":"docs-check-list-item","constructor":function(e){e||(e={}),n.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(this.options.collection,"change",this.render),this.options&&this.options.preview&&(this.previewPane=new r({"parent":this,"context":this.options.workspaceContext,"config":this.options.preview,"collection":this.options.collection,"headerTitle":this.options.title,"enableIcon":this.options.enableIcon,"headerColor":e.headerColor,"enableDescription":e.enableDescription,"info":this.options.info,"cancelDefaultAction":this.options.cancelDefaultAction,"customPopoverClass":this.options.customPopoverClass}))},"template":c,"templateHelpers":function(){return{"icon":this.options.icon,"docsCount":this.options.collection.length,"docsCountWithText":e.str.sformat(this.options.label,this.options.collection.length)}},"onBeforeDestroy":function(){this.previewPane&&(this.previewPane.destroy(),delete this.previewPane)}});return n.LayoutView.extend({"className":"xecmpf-completenesscheck","constructor":function(e){e||(e={}),n.LayoutView.prototype.constructor.apply(this,arguments),e.workspaceContext||(e.workspaceContext=e.context.getObject(o)),e.workspaceContext.setWorkspaceSpecific(s),this.missingDocsCollection=e.hideMissingDocsCheck?void 0:e.workspaceContext.getCollection(s),e.workspaceContext.setWorkspaceSpecific(a),this.outdatedDocsCollection=e.hideOutdatedDocsCheck?void 0:e.workspaceContext.getCollection(a)},"template":d,"templateHelpers":function(){return{"hideMissingDocsCheck":this.options.hideMissingDocsCheck}},"onRender":function(){this.showCompletenessCheck({"collection":this.missingDocsCollection,"title":u.missingDocsTitle,"label":u.missingReportName,"icon":"missing-icon","index":0,"enableIcon":!1,"region":this.missingDocsRegion,"enableDescription":!1,"cancelDefaultAction":!0,"customPopoverClass":"xecmpf-missing-docs-check"}),this.showCompletenessCheck({"collection":this.outdatedDocsCollection,"title":u.outdatedDocsTitle,"label":u.outdatedReportName,"icon":"outdated-icon","index":1,"enableIcon":!1,"region":this.outdatedDocsRegion,"enableDescription":!1,"cancelDefaultAction":!0,"customPopoverClass":"xecmpf-outdated-docs-check"}),this.showExternalViews(this.options)},"regions":{"missingDocsRegion":".missing-docs-check","outdatedDocsRegion":".outdated-docs-check"},"showCompletenessCheck":function(e){e.collection&&(!0===e.collection.fetched&&e.collection.length>0&&(this._showCompletenessCheck(e),this._completenessCheckAvailable()),this.listenToOnce(e.collection,"sync",function(){e.collection.length>0&&(e.collection.fetched=!0,e.title=e.collection.options&&e.collection.options.name?e.collection.options.name:e.title,e.label=e.collection.options&&e.collection.options.label?e.collection.options.label:e.label,e.icon=e.collection.options&&e.collection.options.iconClass?e.collection.options.iconClass:e.icon,e.customPopoverClass=e.collection.options&&e.collection.options.customPopoverClass?e.collection.options.customPopoverClass:e.customPopoverClass,this._showCompletenessCheck(e),this._completenessCheckAvailable())}))},"_completenessCheckAvailable":function(){this.trigger("completeness:check:available"),this.options.originatingView&&this.options.originatingView.trigger("completeness:check:available")},"_showCompletenessCheck":function(e){if(this.showRegion=!0,!e.region){var t=this.regionManager.completenesscheck_view0,i=this.regionManager.completenesscheck_view1;if(t&&0===e.index||i&&1===e.index)this.showRegion=!1;else{var n="completenesscheck_view"+e.index;this.addRegion(n),e.region=this.regionManager[n]}}this.showRegion&&e.region.show(new p({"workspaceContext":this.options.workspaceContext,"collection":e.collection,"preview":{"debug":!1},"title":e.title,"label":e.label,"icon":e.icon,"headerColor":e.headerColor,"enableIcon":e.enableIcon,"enableDescription":e.enableDescription,"cancelDefaultAction":e.cancelDefaultAction,"customPopoverClass":e.customPopoverClass}))},"showExternalViews":function(t){if(l&&l.length>0){var i,n=this;e.each(l,function(e,s){t.hideInProcessDocsCheck&&"selfserviceQueuedCollection"===e.prototype.propertyPrefix||(t.workspaceContext||(t.workspaceContext=t.context.getObject(o)),t.workspaceContext.setWorkspaceSpecific(e),i=t.workspaceContext.getCollection(e),n.showCompletenessCheck({"collection":i,"title":i.options.name,"label":i.options.label?i.options.label:i.options.name,"icon":i.options.iconClass,"headerColor":i.options.headerColor,"enableIcon":i.options.enableIcon,"enableDescription":i.options.enableDescription,"index":s,"cancelDefaultAction":i.options.cancelDefaultAction,"customPopoverClass":i.options.customPopoverClass}))})}},"addRegion":function(e){this.regionManager||(this.regionManager={});var i=this,o=t(this.el);o.append(t("<div></div>").attr({"class":e}));var s=n.Region.buildRegion({"el":o.find("."+e)},n.Region);s.getEl=function(e){return i.$(e)},this.regionManager[e]=s}})}),csui.define("hbs!xecmpf/widgets/header/impl/displayUrl/impl/displayUrlItem",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <a class="xecmpf-displayUrl-icon conws-quick_link '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"displayUrlError"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":52},"end":{"line":3,"column":35}}}))?s:"")+'" title="'+e.escapeExpression((a=null!=(a=l(i,"displayUrlTooltip")||(null!=t?l(t,"displayUrlTooltip"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"displayUrlTooltip","hash":{},"loc":{"start":{"line":3,"column":44},"end":{"line":3,"column":65}}}):a))+'"\r\n     aria-label="'+e.escapeExpression((a=null!=(a=l(i,"ariaLabelBusApplText")||(null!=t?l(t,"ariaLabelBusApplText"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"ariaLabelBusApplText","hash":{},"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":41}}}):a))+'" '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"displayUrlError"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.program(6,o,0),"loc":{"start":{"line":4,"column":43},"end":{"line":5,"column":49}}}))?s:"")+"></a>\r\n"},"2":function(e,t,i,n,o){return"\r\n    xecmpf-displayUrl-error "},"4":function(e,t,i,n,o){return'  href="#"  '},"6":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n     href="'+e.escapeExpression((s=null!=(s=a(i,"displayUrl")||(null!=t?a(t,"displayUrl"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"displayUrl","hash":{},"loc":{"start":{"line":5,"column":11},"end":{"line":5,"column":25}}}):s))+'" target="_blank"'},"8":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <button class="xecmpf-displayUrl-icon conws-quick_link binf-btn binf-btn-default"\r\n          aria-label="'+e.escapeExpression((s=null!=(s=a(i,"ariaLabelBusApplText")||(null!=t?a(t,"ariaLabelBusApplText"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"ariaLabelBusApplText","hash":{},"loc":{"start":{"line":8,"column":22},"end":{"line":8,"column":46}}}):s))+'"></button>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"displayUrl"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(8,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":9,"column":7}}}))?s:""}});return i.registerPartial("xecmpf_widgets_header_impl_displayUrl_impl_displayUrlItem",n),n}),csui.define("hbs!xecmpf/widgets/header/impl/displayUrl/impl/displayUrl",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'  <div id="displayUrl-check"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"bDisplayUrl"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":3,"column":7}}}))?s:""}});return i.registerPartial("xecmpf_widgets_header_impl_displayUrl_impl_displayUrl",n),n}),csui.define("xecmpf/widgets/header/impl/displayUrl/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/header/impl/displayUrl/impl/nls/root/lang",{"displayUrlTooltip":"Business application","displayUrlTitle":"Business applications","ariaLabelBusApplText":"Go to business application"}),csui.define("css!xecmpf/widgets/header/impl/displayUrl/impl/displayUrl",[],function(){}),csui.define("xecmpf/widgets/header/impl/displayUrl/displayUrl.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/dialogs/modal.alert/modal.alert","xecmpf/widgets/header/impl/previewpane/previewpane.view","hbs!xecmpf/widgets/header/impl/displayUrl/impl/displayUrlItem","hbs!xecmpf/widgets/header/impl/displayUrl/impl/displayUrl","i18n!xecmpf/widgets/header/impl/displayUrl/impl/nls/lang","css!xecmpf/widgets/header/impl/displayUrl/impl/displayUrl"],function(e,t,i,n,o,s,a,l,r){var c=n.ItemView.extend({"className":"xecmpf-displayUrl-item","constructor":function(e){e||(e={}),this.options=e,n.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(this.options.collection,"change",this.render),this.options&&this.options.preview&&e.collection.length>1&&(this.previewPane=new s({"parent":this,"config":{"debug":!0},"collection":e.collection,"headerTitle":r.displayUrlTitle,"headerColor":e.headerColor}))},"events":{"click .xecmpf-displayUrl-error":"showError"},"template":a,"templateHelpers":function(){var e=1===this.options.collection.length&&this.options.collection.models[0].get("displayUrl"),t=1===this.options.collection.length?this.options.collection.models[0].get("displayUrlError"):"";return{"ariaLabelBusApplText":r.ariaLabelBusApplText+(e?" "+this.options.collection.models[0].get("external_system_name"):""),"displayUrlTooltip":e?r.displayUrlTooltip:"","displayUrl":e,"displayUrlError":t}},"onBeforeDestroy":function(){this.previewPane&&(this.previewPane.destroy(),delete this.previewPane)},"showError":function(){o.showError(this.options.collection.models[0].get("displayUrlError"))}});return n.LayoutView.extend({"className":"xecmpf-displayUrlcheck","constructor":function(e){e||(e={}),this.model=e.model,this.options.headerColor="xecmpf-displayUrl-header-background",n.LayoutView.prototype.constructor.apply(this,arguments)},"template":l,"templateHelpers":function(){return{"bDisplayUrl":!!(this.model.display_urls&&this.model.display_urls.length>0)}},"regions":{"displayUrlRegion":"#displayUrl-check"},"onRender":function(){var t;if(this.model.display_urls&&this.model.display_urls.length>=1){var n=e.map(this.model.display_urls,function(e){return{"name":e.business_object_type_name+" ("+e.external_system_name+")","displayUrl":e.displayUrl,"external_system_name":e.external_system_name,"displayUrlError":e.errMsg}});t=new i.Collection,t.add(n),this.displayUrlRegion.show(new c({"collection":t,"preview":{"debug":!0},"headerColor":this.options.headerColor}))}}})}),csui.define("xecmpf/widgets/header/impl/nls/header.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/header/impl/nls/root/header.lang",{"noMetadataMessage":"No data to display.","CollapsePageOverlay":"Close"}),csui.define("xecmpf/widgets/header/impl/metadata.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/handlebars","csui/controls/list/emptylist.view","conws/models/workspacecontext/workspacecontext.factory","conws/models/selectedmetadataform/selectedmetadataform.factory","conws/controls/selectedmetadataform/selectedmetadataform.view","i18n!xecmpf/widgets/header/impl/nls/header.lang"],function(e,t,i,n,o,s,a,l,r){return i.ItemView.extend({"className":"xecmpf-form-metadata","attributes":{"style":"height: 100%"},"template":!1,"constructor":function(e){if(e||(e={}),!e.context)throw new Error("Context is missing in the constructor options");e.workspaceContext||(e.workspaceContext=e.context.getObject(s)),e.workspaceContext.setWorkspaceSpecific(a),e.model=e.workspaceContext.getObject(a,{"metadataConfig":e.data,"unique":!0}),this.noMetadataMessage=r.noMetadataMessage,i.ItemView.prototype.constructor.call(this,e),this.listenTo(e.model,"change",this.render)},"onRender":function(){if(this.formRegion=new i.Region({"el":this.$el}),e.isEmpty(this.model.attributes.data))this.noDataFound=!0,this.formView=new o({"text":this.noMetadataMessage}),this.formRegion.show(this.formView),this.triggerMethod("xecmpf:metadata:config");else{this.$el.addClass("csui-normal-scrolling"),this.$el.addClass("csui-no-scroll-x"),this.noDataFound=!1;var t=this.model.attributes.data,n=this.options.data.colOptions,s=this.model.attributes.options.fields;if(e.each(e.keys(t),function(i){"null"===t[i]&&(t=e.omit(t,i),s[i].hidden=!0)}),this.model.attributes.data=t,this.model.attributes.options.fields=s,"doubleCol"===n){n=e.size(e.filter(e.keys(s),function(e){return void 0!==s[e].hidden&&!1===s[e].hidden}))>5?"doubleCol":"singleCol"}this.formView=new l({"model":this.model,"context":this.options.context,"layoutMode":n&&"singleCol"===n?n:"doubleCol","breakFieldsAt":5}),this.formRegion.show(this.formView),this.triggerMethod("xecmpf:metadata:config")}this.listenTo(this.formView,"render:form",function(){this.triggerMethod("dom:refresh")})}})}),csui.define("css!xecmpf/widgets/header/impl/header",[],function(){}),csui.define("xecmpf/widgets/header/header.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/handlebars","conws/widgets/header/header.view","conws/models/selectedmetadataform/selectedmetadataform.factory","xecmpf/widgets/header/impl/completenesscheck/completenesscheck.view","xecmpf/widgets/header/impl/displayUrl/displayUrl.view","esoc/widgets/activityfeedwidget/activityfeedfactory","esoc/widgets/activityfeedwidget/activityfeedcontent","xecmpf/widgets/header/impl/metadata.view","conws/controls/description/description.view","css!xecmpf/widgets/header/impl/header"],function(e,t,i,n,o,s,a,l,r,c,d,u,p){var m={"activityfeedwidget":"esoc/widgets/activityfeedwidget"},f=e.config();return s.extend({"id":"xecmpf-header","constructor":function(e){e||(e={}),e.data||(e.data={}),e.data.widget||(e.data.widget={}),e.data.widget.type||(e.data.widget.type="metadata"),e.hideToolbar=!!f.hideToolbar,e.hideActivityFeed=!!f.hideActivityFeed,e.hideMetadata=!!f.hideMetadata||!(e.data.metadataSettings&&e.data.metadataSettings.metadata&&!e.data.metadataSettings.hideMetadata),e.toolbarBlacklist=[],e.extensionToolbarBlacklist=[],e.delayedToolbarBlacklist=[],e.extensionToolbarDelayedActionsBlacklist=[],e.enableCollapse=!!f.enableCollapse;var i=f.toolbarBlacklist;Array.isArray(i)&&i.length>0&&(e.toolbarBlacklist=i);var n=f.delayedToolbarBlacklist;Array.isArray(n)&&n.length>0&&(e.delayedToolbarBlacklist=n);var o=f.extensionToolbarBlacklist;Array.isArray(o)&&o.length>0&&(e.extensionToolbarBlacklist=o);var r=f.extensionToolbarDelayedActionsBlacklist;Array.isArray(r)&&r.length>0&&(e.extensionToolbarDelayedActionsBlacklist=r),e.data&&e.data.favoriteSettings&&e.data.favoriteSettings.hideFavorite&&(e.toolbarBlacklist.Favorite2||e.toolbarBlacklist.push("Favorite2"),e.extensionToolbarBlacklist.Favorite2||e.extensionToolbarBlacklist.push("Favorite2")),e.extensionToolbarBlacklist.CompletenessCheck||e.extensionToolbarBlacklist.push("CompletenessCheck");var d=e.data.completenessCheckSettings,u={"context":e.context,"workspaceContext":e.workspaceContext,"hideMissingDocsCheck":d&&d.hideMissingDocsCheck,"hideOutdatedDocsCheck":d&&d.hideOutdatedDocsCheck,"hideInProcessDocsCheck":d&&d.hideInProcessDocsCheck};e.cCViewOptions=u,e.statusIndicatorsView=l,e.statusIndicatorsViewOptions=t.extend(u,{"originatingView":this}),s.prototype.constructor.call(this,e),e.workspaceContext&&(e.workspaceContext.setWorkspaceSpecific(a),e.workspaceContext.setWorkspaceSpecific(c))},"initialize":function(e){if(e||(e={}),e.data){var i=e.data.headerwidget&&e.data.headerwidget.type?e.data.headerwidget.type:"metadata";if(this.headerwidgetConfigValue=i,"metadata"===i&&"metadata"===e.data.widget.type&&!this.options.hideMetadata){var n=e.data.metadataSettings,o=this._makeMetadataReadOnly(n.metadata),s={"context":e.context,"workspaceContext":e.workspaceContext,"data":{"hideEmptyFields":n.hideEmptyFields,"metadata":o,"readonly":!0,"colOptions":e.data.metadataSettings.metadataInColumns}};this.metadataView=new u(s),this.listenTo(this.metadataView,"xecmpf:metadata:config",function(){this.metadataView.noDataFound?this.$el.parent().addClass("xecmpf-metadata-configured-nodata").removeClass("xecmpf-metadata-configured"):this.$el.parent().addClass("xecmpf-metadata-configured").removeClass("xecmpf-metadata-configured-nodata")})}if("activityfeed"!==this.headerwidgetConfigValue||this.options.hideActivityFeed||(e.data.widget.type=m.activityfeedwidget,e.data.widget.options||(e.data.widget.options={})),!f.pageWidget){var a=t.extend(e.cCViewOptions,{"workspaceContext":e.workspaceContext});a.hideMissingDocsCheck&&a.hideOutdatedDocsCheck&&a.hideInProcessDocsCheck||(this.options.hasMetadataExtension=!0,this.completenessCheckView=new l(a))}var c={"model":this.model,"logging":{"debug":!1}};this.displayUrlView=new r(c),this.listenTo(this.completenessCheckView,"completeness:check:available",function(){if(this.$el.parent().addClass("xecmpf-completenesscheck-available"),e.expandDescription=!1,!this.options.hideDescription&&!this.hasEmptyDescription()){var t={"view":this,"complete_desc":this.resolveProperty("description"),"expandDescription":e.expandDescription};this.descriptionView=new p(t),this.descriptionRegion.show(this.descriptionView),this.$el.parent().addClass("conws-description-available"),this.listenToDescriptionView()}}),this.listenTo(this,"render",function(){this.model.fetched&&this.showChildViews()})}},"ui":function(){return t.extend({"completenessCheckRegion":".conws-header-metadata-extension","metadataRegion":"#conws-header-childview","displayUrlRegion":".conws-header-child-displayUrl"},s.prototype.ui)},"_makeMetadataReadOnly":function(e){var t=e||[];return t.forEach(function(e){e.readOnly=!0}),t},"showChildViews":function(){this.completenessCheckView&&(this.completenessCheckRegion=new n.Region({"el":this.ui.completenessCheckRegion}),this.completenessCheckRegion.show(this.completenessCheckView),this.listenToDescriptionView()),this.metadataView&&(this.metadataRegion=new n.Region({"el":this.ui.metadataRegion}),this.metadataRegion.show(this.metadataView)),this.displayUrlView&&(this.displayUrlRegion=new n.Region({"el":this.ui.displayUrlRegion}),this.displayUrlRegion.show(this.displayUrlView)),this.listenTo(this,"completeness:check:available",function(){this.headerToolbarView.triggerMethod("status:indicator:available")})},"listenToDescriptionView":function(){this.descriptionView&&(this.listenTo(this.descriptionView,"show:more:description",function(){this.toggleCompletenessCheckView(!1)}),this.listenTo(this.descriptionView,"show:less:description",function(){this.toggleCompletenessCheckView(!0)}))},"toggleCompletenessCheckView":function(e){e?this.completenessCheckView.$el.removeClass("xecmpf-completenesscheck-hidden").addClass("xecmpf-completenesscheck-shown"):this.completenessCheckView.$el.removeClass("xecmpf-completenesscheck-shown").addClass("xecmpf-completenesscheck-hidden")},"hasChildView":function(){var e=this.options.data&&this.options.data.widget&&this.options.data.widget.type&&"none"!==this.options.data.widget.type;return"activityfeed"===this.headerwidgetConfigValue?!this.options.hideActivityFeed&&e:"metadata"===this.headerwidgetConfigValue?!this.options.hideMetadata&&e:void 0},"onDomRefresh":function(){this.addActivityFeedClass(),this.completenessCheckView&&this.toggleCompletenessCheckView(!0),this.descriptionView&&this.descriptionView.$el.find(this.descriptionView.ui.readMore).is(":hidden")&&this.descriptionView.$el.find(this.descriptionView.ui.showLess).is(":visible")&&(this.descriptionView.ui.showLess.trigger("click"),this.currentlyFocusedElement().trigger("focus")),this.isTabable()?this.currentlyFocusedElement().attr("tabindex","0"):this.currentlyFocusedElement().attr("tabindex","-1"),this._clampTexts(),this.options.hideToolbar||this.headerToolbarView.triggerMethod("dom:refresh")},"onBeforeDestroy":function(){this.metadataView&&this.metadataView.destroy(),this.displayUrlView&&this.displayUrlView.destroy()}})}),csui.define("xecmpf/widgets/scan/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/scan/impl/nls/root/lang",{"title":"Scan barcode","defaultTextForDesktop":"Only dispayed on mobile devices."}),csui.define("css!xecmpf/widgets/scan/impl/scan",[],function(){}),csui.define("xecmpf/widgets/scan/scan.content.view",["csui/lib/underscore","csui/controls/list/simplelist.view","csui/controls/listitem/listitemstandard.view","csui/utils/nodesprites","i18n!xecmpf/widgets/scan/impl/nls/lang","css!xecmpf/widgets/scan/impl/scan"],function(e,t,i,n,o){return t.extend({"constructor":function(e){e||(e={}),t.prototype.constructor.apply(this,arguments)},"className":"xecmpf-scan-list","templateHelpers":function(){return{"hideSearch":!0}},"emptyViewOptions":{"text":o.defaultTextForDesktop},"childView":i,"childViewOptions":function(){return{"templateHelpers":function(){return{"name":this.model.get("name"),"icon":n.findClassByNode(this.model),"enableIcon":!0}}}}})}),csui.define("xecmpf/widgets/scan/scan.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/controls/tile/tile.view","xecmpf/widgets/scan/scan.content.view","csui/utils/perspective/perspective.util","csui/utils/contexts/factories/node","i18n!xecmpf/widgets/scan/impl/nls/lang","csui/models/node/node.model","css!xecmpf/widgets/scan/impl/scan"],function(e,t,i,n,o,s,a,l,r){var c=i.Collection.extend({"constructor":function(t,n){n||(n={}),e.defaults(n,{"model":r}),this.options=n,i.Collection.prototype.constructor.call(this,t,n)}});return n.extend({"constructor":function(e){n.prototype.constructor.call(this,e)},"contentView":o,"title":l.title,"initialize":function(){this.options.perspectiveMode===s.MODE_EDIT_PERSPECTIVE&&(this.scanItemsCollection=new c([]),this._getScanItems().always(e.bind(function(){this.scanItemsCollection.reset(this.items)},this)))},"_getScanItems":function(){var i=this.options.data.businessobjecttypes,n=this;this.items=e.map(i,function(e){if(e.id){return n.options.context.getModel(a,{"attributes":{"id":e.id,"type":889}})}}),this.items=e.compact(this.items);var o=e.map(this.items,function(e){return e.fetch({"suppressError":!0})}),s=t.whenAll.apply(t,o);return s.always(function(){e.each(i,function(e,t){e.node=n.items[t]})}),s},"contentViewOptions":function(){return this.scanItemsCollection=new c(this.items),{"showTitleIcon":!1,"hideSearch":!0,"collection":this.scanItemsCollection}}})}),
csui.define("xecmpf/widgets/fileupload/impl/models/fileupload.model",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin"],function(e,t,i,n,o){var s=t.Model.extend({"constructor":function(e,i){i=i||{},this.options=i,t.Model.prototype.constructor.apply(this,arguments),this.makeConnectable(i),this.makeFetchable(i)},"url":function(e){return i.combine(this.connector.getConnectionUrl().getApiBase("v2"),"/businessworkspaces/",this.options.node.get("id"),"/fileupload")},"parse":function(e){var i=e.results;return i.data=new t.Collection(i.data),i}});return n.mixin(s.prototype),o.mixin(s.prototype),s}),csui.define("hbs!xecmpf/widgets/fileupload/impl/fileupload.content/fileupload.info/fileupload.info.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="xecmpf-fileupload-doc-info-icon csui-type-icon '+e.escapeExpression((s=null!=(s=a(i,"icon")||(null!=t?a(t,"icon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":1,"column":59},"end":{"line":1,"column":67}}}):s))+'"></div>\r\n<div title="'+e.escapeExpression((s=null!=(s=a(i,"label")||(null!=t?a(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":2,"column":12},"end":{"line":2,"column":21}}}):s))+" "+e.escapeExpression((s=null!=(s=a(i,"count")||(null!=t?a(t,"count"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"count","hash":{},"loc":{"start":{"line":2,"column":22},"end":{"line":2,"column":31}}}):s))+'" class="xecmpf-fileupload-doc-info-text list-item-title" role="link" key="'+e.escapeExpression((s=null!=(s=a(i,"key")||(null!=t?a(t,"key"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"key","hash":{},"loc":{"start":{"line":2,"column":106},"end":{"line":2,"column":113}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"label")||(null!=t?a(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":2,"column":127},"end":{"line":2,"column":136}}}):s))+" "+e.escapeExpression((s=null!=(s=a(i,"count")||(null!=t?a(t,"count"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"count","hash":{},"loc":{"start":{"line":2,"column":137},"end":{"line":2,"column":146}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"label")||(null!=t?a(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":2,"column":148},"end":{"line":2,"column":157}}}):s))+'<span class="xecmpf-item-count">&nbsp;('+e.escapeExpression((s=null!=(s=a(i,"count")||(null!=t?a(t,"count"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"count","hash":{},"loc":{"start":{"line":2,"column":196},"end":{"line":2,"column":205}}}):s))+")</span></div>\r\n"}});return i.registerPartial("xecmpf_widgets_fileupload_impl_fileupload.content_fileupload.info_fileupload.info.item",n),n}),csui.define("css!xecmpf/widgets/fileupload/impl/fileupload.content/fileupload.info/fileupload.info",[],function(){}),csui.define("xecmpf/widgets/fileupload/impl/fileupload.content/fileupload.info/fileupload.info.view",["csui/lib/underscore","csui/lib/marionette","csui/controls/list/list.view","hbs!xecmpf/widgets/fileupload/impl/fileupload.content/fileupload.info/fileupload.info.item","css!xecmpf/widgets/fileupload/impl/fileupload.content/fileupload.info/fileupload.info"],function(e,t,i,n){var o=t.ItemView.extend({"className":"xecmpf-fileupload-doc-info","constructor":function(e){t.ItemView.prototype.constructor.call(this,e)},"template":n,"onRender":function(){var e=this.options.model.get("count")+" "+this.options.model.get("label");this.$el.attr("role","label").attr("tabindex",0).attr("aria-label",e)}});return t.CollectionView.extend({"className":"xecmpf-fileupload-info-list","constructor":function(e){e=e||{},t.CollectionView.prototype.constructor.call(this,e)},"childView":o})}),csui.define("xecmpf/controls/draganddrop/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/controls/draganddrop/impl/nls/root/lang",{"dropMessage":"Drop your file(s).","dropNotPermitted":"No files can be dropped here.","dropInvalid":"Only files can be dropped here."}),csui.define("hbs!xecmpf/controls/draganddrop/impl/draganddrop",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="xecmpf-messageBox">'+e.escapeExpression((s=null!=(s=a(i,"message")||(null!=t?a(t,"message"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"message","hash":{},"loc":{"start":{"line":1,"column":32},"end":{"line":1,"column":43}}}):s))+"</span>"}});return i.registerPartial("xecmpf_controls_draganddrop_impl_draganddrop",n),n}),csui.define("css!xecmpf/controls/draganddrop/impl/draganddrop",[],function(){}),csui.define("xecmpf/controls/draganddrop/draganddrop.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","i18n!xecmpf/controls/draganddrop/impl/nls/lang","hbs!xecmpf/controls/draganddrop/impl/draganddrop","css!xecmpf/controls/draganddrop/impl/draganddrop"],function(e,t,i,n,o,s){var a=i.defaults({},e.config(),{"detectLeaveDelay":100});return n.ItemView.extend({"template":s,"className":"xecmpf-dropMessage","ui":{"message":".xecmpf-messageBox"},"templateHelpers":function(){return{"message":o.dropMessage}},"constructor":function(e){n.ItemView.prototype.constructor.call(this,e),this.addableTypes=e.addableTypes,this.wantDragAndDrop=!0,this.context=e.context,this.visible=!1,this.parentView=e.originatingView||e.parentView},"setDragParentView":function(e,n){return this.parentView=e,this._parentEl=i.isString(n)&&e.$(n)||void 0!==n.length&&n||n&&t(n)||e.$el,this.render(),this._parentEl.append(this.el),this.shouldDragAndDrop()&&(this.disable(),this._setDragEvents()),!0},"onDestroy":function(){this.shouldDragAndDrop()&&this._parentEl&&this._parentEl.off("dragover",this.dragOver).off("dragleave",this.dragLeave).off("drop",this.dragDrop)},"_setDragEvents":function(){this.dragOver=i.bind(this.onOverView,this),this.dragLeave=i.bind(this.onLeaveView,this),this.dragDrop=i.bind(this.onDropView,this),this._parentEl.on("dragover",this.dragOver).on("dragleave",this.dragLeave).on("drop",this.dragDrop)},"enable":function(e){this.visible||(!1!==e&&this.trigger("drag:over"),this.$el.show(),this.visible=!0)},"disable":function(e){this.$el.hide(),this.trigger("drag:leave"),this.visible=!1},"shouldDragAndDrop":function(){var e=!1,t=document.createElement("div");return window.File&&window.FileReader&&window.FileList&&window.Blob&&("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&(e=!0),e&&this.wantDragAndDrop},"canAdd":function(){return"144"===this.addableTypes},"onOverView":function(e){e.preventDefault(),e.stopPropagation(),this.leaveViewTimeout?(clearTimeout(this.leaveViewTimeout),this.leaveViewTimeout=void 0):this.enable(!1);var t=e.originalEvent&&e.originalEvent.dataTransfer,n=t.items,s=n&&n.length&&i.all(n,function(e){return"file"===e.kind}),a=t&&t.types,l=a&&a.length&&i.any(a,function(e){return"files"===e.toLowerCase()}),r=o.dropInvalid;this.valid=n&&s||l,t.dropEffect="copy",this.canAdd()||(this.valid=!1,r=o.dropNotPermitted),this.valid?(this.$el.hasClass("csui-disabled")&&(this._restMessage(),this.$el.removeClass("csui-disabled")),this.trigger("drag:over",this,{"disabled":!1})):(this.$el.hasClass("csui-disabled")||(this.ui.message.text(r),this.$el.addClass("csui-disabled")),this.trigger("drag:over",this,{"disabled":!0}))},"onLeaveView":function(e){e.preventDefault(),e.stopPropagation(),this.leaveViewTimeout||(this.leaveViewTimeout=setTimeout(i.bind(function(){this.leaveViewTimeout=void 0,this.disable()},this),a.detectLeaveDelay))},"onDropView":function(e){e.preventDefault(),e.stopPropagation();var t=this,n=e.originalEvent&&e.originalEvent.dataTransfer||{"files":e.originalEvent&&e.originalEvent.target&&e.originalEvent.target.files||[]};this.checkFiles(n).always(function(e){e=i.reject(e,function(e){return e instanceof Error}),console.log("Dropped files length",e.length),t.parentView.onDrop&&t.parentView.onDrop(e)}),this.disable()},"checkFiles":function(e){function n(e){var i,n=new FileReader,o=t.Deferred();if(0===e.size){var s=new Error("size is 0");return s.file=e,o.reject(s)}n.addEventListener("load",function(){o.resolve(e),i=!0,n.abort()}),n.addEventListener("error",function(){if(!i){var t=new Error("No file");t.file=e,o.reject(t)}});try{var a=Math.min(e.size,512),l=e.slice(0,a);n.readAsArrayBuffer(l)}catch(t){var r=new Error(t.message);r.file=e,o.reject(r)}return o.promise()}var o=e.files;return o?t.whenAll.apply(t,i.map(o,i.bind(n,this))).then(function(e){return e},function(e){return t.Deferred().reject(e).promise()}):t.Deferred().reject([]).promise()},"_restMessage":function(){this._isRendered&&this.ui.message.text(this._getDropPossibleMessage())},"_getDropPossibleMessage":function(){return o.dropMessage}})}),csui.define("hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.info/fileuploaditem",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div class='xecmpf-file-upload-item-icon'>\r\n  <span class=\""+e.escapeExpression((s=null!=(s=a(i,"iconClass")||(null!=t?a(t,"iconClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"iconClass","hash":{},"loc":{"start":{"line":2,"column":15},"end":{"line":2,"column":28}}}):s))+'"></span>\r\n</div>\r\n<div class="xecmpf-file-upload-item-info">\r\n  <p class="xecmpf-file-upload-item-info-name" title="'+e.escapeExpression((s=null!=(s=a(i,"name")||(null!=t?a(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":5,"column":54},"end":{"line":5,"column":62}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"name")||(null!=t?a(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":5,"column":64},"end":{"line":5,"column":72}}}):s))+'</p>\r\n  <p class="xecmpf-file-upload-item-info-size" title="'+e.escapeExpression((s=null!=(s=a(i,"sizeLabel")||(null!=t?a(t,"sizeLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"sizeLabel","hash":{},"loc":{"start":{"line":6,"column":54},"end":{"line":6,"column":67}}}):s))+" "+e.escapeExpression((s=null!=(s=a(i,"size")||(null!=t?a(t,"size"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"size","hash":{},"loc":{"start":{"line":6,"column":68},"end":{"line":6,"column":76}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"sizeLabel")||(null!=t?a(t,"sizeLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"sizeLabel","hash":{},"loc":{"start":{"line":6,"column":78},"end":{"line":6,"column":91}}}):s))+" "+e.escapeExpression((s=null!=(s=a(i,"size")||(null!=t?a(t,"size"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"size","hash":{},"loc":{"start":{"line":6,"column":92},"end":{"line":6,"column":100}}}):s))+'</p>\r\n</div>\r\n<div class="xecmpf-file-upload-item-delete">\r\n  <span aria-label="'+e.escapeExpression((s=null!=(s=a(i,"deleteItemTitle")||(null!=t?a(t,"deleteItemTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"deleteItemTitle","hash":{},"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":39}}}):s))+" "+e.escapeExpression((s=null!=(s=a(i,"name")||(null!=t?a(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":9,"column":40},"end":{"line":9,"column":48}}}):s))+'" role="button" tabindex="0" class="xecmpf-file-upload-item-delete-icon" title="'+e.escapeExpression((s=null!=(s=a(i,"deleteItemTitle")||(null!=t?a(t,"deleteItemTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"deleteItemTitle","hash":{},"loc":{"start":{"line":9,"column":128},"end":{"line":9,"column":147}}}):s))+'"></span>\r\n</div>'}});return i.registerPartial("xecmpf_controls_fileuploadpanel_impl_fileuploadpanel.info_fileuploaditem",n),n}),csui.define("xecmpf/controls/fileuploadpanel/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/controls/fileuploadpanel/impl/nls/root/lang",{"panelTitle":"Upload documents","filesLabel":"Files","sizeLabel":"Size","deleteItemTitle":"Delete item","uploadItemLabel":"Upload file","continueButtonLabel":"Continue","submitButtonLabel":"Submit","cancelButtonLabel":"Cancel","fileSizeByte":"Bytes","fileSizeKByte":"KB","fileSizeMByte":"MB","fileSizeGByte":"GB","stopUploadConfirmation":"Stop uploading files?","yesLabel":"Stop","noLabel":"Cancel","docTypeLabel":"Document type","previewError":"Unable to load the preview for selected document at this point of time.","detailsMissing":"Mandatory fields are not filled","uploadFailed":"Upload failed."}),csui.define("css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.info/fileuploaditem",[],function(){}),csui.define("xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.info/fileuploadpanel.info.item.view",["csui/lib/marionette","hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.info/fileuploaditem","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang","css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.info/fileuploaditem"],function(e,t,i){"use strict";return e.ItemView.extend({"className":"xecmpf-file-upload-item","tagName":"li","template":t,"ui":{"deleteBtn":".xecmpf-file-upload-item-delete .xecmpf-file-upload-item-delete-icon"},"initialize":function(){this.$el.attr("role","listitem").attr("tabindex",-1)},"events":{"click @ui.deleteBtn":"deleteUploadItem","keydown @ui.deleteBtn":"doClickOnEnter"},"templateHelpers":function(){return{"name":this.model.get("name"),"size":this.formatFilzeSize(this.model.get("size")),"iconClass":this.model.get("iconClass"),"sizeLabel":i.sizeLabel,"deleteItemTitle":i.deleteItemTitle}},"formatFilzeSize":function(e){if(e){var t=i.fileSizeByte;return e>1024&&(t=i.fileSizeKByte,(e/=1024)>1024&&(t=i.fileSizeMByte,(e/=1024)>1024&&(t=i.fileSizeGByte,e/=1024))),Math.ceil(e)+" "+t}return e},"doClickOnEnter":function(e){32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),this.trigger("delete:uploaded:item",this.model,{"keyBoardEvent":!0}))},"deleteUploadItem":function(){this.trigger("delete:uploaded:item",this.model)}})}),csui.define("hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.info/fileuploadpanel.info",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div class='xecmpf-file-upload-panel-info-control'>\r\n  <span aria-label='"+e.escapeExpression((s=null!=(s=a(i,"filesLabel")||(null!=t?a(t,"filesLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"filesLabel","hash":{},"loc":{"start":{"line":2,"column":20},"end":{"line":2,"column":34}}}):s))+" "+e.escapeExpression((s=null!=(s=a(i,"totalFiles")||(null!=t?a(t,"totalFiles"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"totalFiles","hash":{},"loc":{"start":{"line":2,"column":35},"end":{"line":2,"column":49}}}):s))+'\' role="label" tabindex="0">'+e.escapeExpression((s=null!=(s=a(i,"filesLabel")||(null!=t?a(t,"filesLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"filesLabel","hash":{},"loc":{"start":{"line":2,"column":77},"end":{"line":2,"column":91}}}):s))+" (<span id='xecmpf-file-upload-panel-info-count'>"+e.escapeExpression((s=null!=(s=a(i,"totalFiles")||(null!=t?a(t,"totalFiles"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"totalFiles","hash":{},"loc":{"start":{"line":2,"column":140},"end":{"line":2,"column":154}}}):s))+"</span>)</span>\r\n  <div title='"+e.escapeExpression((s=null!=(s=a(i,"uploadItemLabel")||(null!=t?a(t,"uploadItemLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"uploadItemLabel","hash":{},"loc":{"start":{"line":3,"column":14},"end":{"line":3,"column":35}}}):s))+"' aria-label='"+e.escapeExpression((s=null!=(s=a(i,"uploadItemLabel")||(null!=t?a(t,"uploadItemLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"uploadItemLabel","hash":{},"loc":{"start":{"line":3,"column":49},"end":{"line":3,"column":70}}}):s))+"' tabindex='0' role='button' class='binf-btn xecmpf-file-upload-btn' id='xecmpf-file-upload-btn'>\r\n      <span class='icon icon-toolbarAdd'></span>\r\n  </div>\r\n</div>\r\n<ul class='xecmpf-file-upload-panel-list-section'></ul>"}});return i.registerPartial("xecmpf_controls_fileuploadpanel_impl_fileuploadpanel.info_fileuploadpanel.info",n),n}),csui.define("css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.info/fileuploadpanel.info",[],function(){}),csui.define("xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.info/fileuploadpanel.info.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/side.panel/side.panel.view","csui/controls/tile/behaviors/blocking.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/dialogs/file.open/file.open.dialog","xecmpf/controls/draganddrop/draganddrop.view","xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.info/fileuploadpanel.info.item.view","hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.info/fileuploadpanel.info","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang","css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.info/fileuploadpanel.info"],function(e,t,i,n,o,s,a,l,r,c,d){"use strict";return i.CompositeView.extend({"className":"xecmpf-file-upload-panel-info","template":c,"selectedIndex":0,"constructor":function(e){i.CompositeView.prototype.constructor.call(this,e)},"initialize":function(e){this.dragNDrop=new l({"addableTypes":"144","context":this.options.context,"connector":this.options.connector,"originatingView":this})},"onRender":function(){this.dragNDrop.setDragParentView(this,".xecmpf-file-upload-panel-list-section"),this.$el.find(".xecmpf-file-upload-panel-list-section .xecmpf-file-upload-item:first-child").attr("tabindex",0)},"behaviors":{"PerfectScrolling":{"behaviorClass":s,"contentParent":".xecmpf-file-upload-panel-list-section","suppressScrollX":!0,"scrollYMarginOffset":15},"Blocking":{"behaviorClass":o}},"childViewContainer":".xecmpf-file-upload-panel-list-section","childView":r,"childEvents":{"delete:uploaded:item":"deleteUploadedItem"},"templateHelpers":function(){return{"totalFiles":this.options.collection.length,"filesLabel":d.filesLabel,"uploadItemLabel":d.uploadItemLabel}},"ui":{"fileUploadBtn":"#xecmpf-file-upload-btn","listSection":".xecmpf-file-upload-panel-list-section","listItem":".xecmpf-file-upload-panel-list-section .xecmpf-file-upload-item"},"events":{"click @ui.fileUploadBtn":"openFileDialog","keydown @ui.fileUploadBtn":"doClickOnEnter","keydown @ui.listSection":"doArrowNavigate","focusin @ui.listItem":"showDeleteIcon"},"openFileDialog":function(){var e=new a({"multiple":!0}),t=this;e.listenTo(e,"add:files",function(i){t.collection.addUploadedItems(i),t.onItemsUpdate(),e.destroy()}.bind(this)).show()},"onDrop":function(e){this.collection.addUploadedItems(e),this.onItemsUpdate()},"deleteUploadedItem":function(e,t,i){this.collection.removeUploadedItem(t),this.onItemsUpdate(!(!i||!i.keyBoardEvent))},"onItemsUpdate":function(e){document.querySelector("#xecmpf-file-upload-panel-info-count").innerText=this.collection.length,document.querySelector(".xecmpf-file-upload-panel-info-control > span").setAttribute("aria-label",d.filesLabel+" "+this.collection.length),this.$el.find(".xecmpf-file-upload-panel-list-section .xecmpf-file-upload-item:first-of-type").attr("tabindex",0),this.selectedIndex=0,e&&this.$el.find(".xecmpf-file-upload-panel-list-section .xecmpf-file-upload-item:first-of-type").focus()},"doClickOnEnter":function(e){32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),e.target.click())},"doArrowNavigate":function(e){var i=this.currentlyFocusedElement();switch(e.keyCode){case 38:this._moveTo(e,this._selectPrevious(),i);break;case 40:this._moveTo(e,this._selectNext(),i);break;case 33:this._moveTo(e,this._selectFirst(),i);break;case 34:this._moveTo(e,this._selectLast(),i);break;case 46:t(e.target).find(".xecmpf-file-upload-item-delete .xecmpf-file-upload-item-delete-icon").trigger("click"),this.$el.find(".xecmpf-file-upload-panel-list-section .xecmpf-file-upload-item:first-of-type").focus()}},"currentlyFocusedElement":function(){var e=this.collection;0!==this.selectedIndex&&this.selectedIndex>=e.length&&(this.selectedIndex=e.length-1);var t=this.$(".xecmpf-file-upload-panel-list-section .xecmpf-file-upload-item:nth-of-type("+(this.selectedIndex+1)+")");return 0!==t.length?this.$(t[0]):null},"_moveTo":function(t,i,n){t.preventDefault(),t.stopPropagation(),setTimeout(e.bind(function(){n&&n.prop("tabindex","-1"),i.prop("tabindex","0"),i.trigger("focus")},this),50)},"_selectNext":function(){var e=this.model||this.collection;return this.selectedIndex<e.length-1&&this.selectedIndex++,this.currentlyFocusedElement()},"_selectPrevious":function(){return this.selectedIndex>0&&this.selectedIndex--,this.currentlyFocusedElement()},"_selectFirst":function(){return this.selectedIndex=0,this.currentlyFocusedElement()},"_selectLast":function(){return this.selectedIndex=this.collection.length-1,this.currentlyFocusedElement()},"showDeleteIcon":function(e){this.$el.find(".xecmpf-file-upload-item-delete-icon").removeClass("show"),t(e.currentTarget).find(".xecmpf-file-upload-item-delete-icon").addClass("show")}})}),csui.define("hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.list/impl/fileuploadpanel.capture.list.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class=\'xecmpf-file-upload-capture-item-validation-icon\'>\r\n  <span class="csui-icon xecmpf-file-upload-valid"></span>\r\n  <span class="csui-icon xecmpf-file-upload-invalid"></span>\r\n</div>\r\n<div class=\'xecmpf-file-upload-capture-item-icon\'>\r\n  <span class="'+e.escapeExpression((s=null!=(s=a(i,"iconClass")||(null!=t?a(t,"iconClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"iconClass","hash":{},"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":28}}}):s))+'"></span>\r\n</div>\r\n<div class="xecmpf-file-upload-capture-item-info">\r\n  <p class="xecmpf-file-upload-capture-item-info-name" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"name")||(null!=t?a(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":9,"column":67},"end":{"line":9,"column":75}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=a(i,"name")||(null!=t?a(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":9,"column":84},"end":{"line":9,"column":92}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"name")||(null!=t?a(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":9,"column":94},"end":{"line":9,"column":102}}}):s))+"</p>\r\n</div>"}});return i.registerPartial("xecmpf_controls_fileuploadpanel_impl_fileuploadpanel.capture_impl_fileuploadpanel.capture.list_impl_fileuploadpanel.capture.list.item",n),n}),csui.define("css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.list/impl/fileuploadpanel.capture.list.item",[],function(){}),csui.define("xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.list/fileuploadpanel.capture.list.item.view",["csui/lib/marionette","hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.list/impl/fileuploadpanel.capture.list.item","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang","css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.list/impl/fileuploadpanel.capture.list.item"],function(e,t,i){"use strict";return e.ItemView.extend({"className":function(){var e="xecmpf-file-upload-capture-list-item";return this.model.get("upload_err")&&(e+=" xecmpf-file-upload-disabled-item"),e},"template":t,"constructor":function(t){e.ItemView.prototype.constructor.apply(this,arguments),this.model.on("change",function(){this.model.hasChanged("upload_err")&&(this.model.get("upload_err")?this.$el.addClass("xecmpf-file-upload-disabled-item"):this.$el.removeClass("xecmpf-file-upload-disabled-item"))}.bind(this))},"templateHelpers":function(){return{"name":this.model.get("name"),"iconClass":this.model.get("iconClass")}},"triggers":{"click":"click:item"},"updateFormStatus":function(e){var t=this.$el.find(".xecmpf-file-upload-capture-item-validation-icon span.xecmpf-file-upload-valid"),i=this.$el.find(".xecmpf-file-upload-capture-item-validation-icon span.xecmpf-file-upload-invalid");e?(i.removeClass("show-status-icon"),t.addClass("show-status-icon")):(t.removeClass("show-status-icon"),i.addClass("show-status-icon"))}})}),csui.define("xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.list/fileuploadpanel.capture.list.view",["csui/lib/underscore","csui/lib/marionette","csui/controls/tile/behaviors/perfect.scrolling.behavior","xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.list/fileuploadpanel.capture.list.item.view","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang"],function(e,t,i,n,o){"use strict";return t.CollectionView.extend({"className":"xecmpf-file-upload-capture-list","childView":n,"constructor":function(e){t.CollectionView.prototype.constructor.call(this,e),this.listenTo(this,"update:form:status",function(e){var t=e.dataId,i=e.valid;this.children.forEach(function(e){e.model.get("dataId")===t&&e.updateFormStatus(i)})}.bind(this)),this.selectedIndex=0},"behaviors":{"PerfectScrolling":{"behaviorClass":i,"suppressScrollX":!0,"scrollYMarginOffset":15}},"onRender":function(){this.children.length>0&&this.children.findByIndex(0).$el.prop("tabindex","0")},"childEvents":{"click:item":"onClickItem"},"onClickItem":function(e){e.model.get("upload_err")||(this.children.forEach(function(e){e.$el.hasClass("selected")&&(e.$el.removeClass("selected"),this.trigger("get:form:status",e.model.get("dataId")))}.bind(this)),e.$el.addClass("selected"),this.trigger("on:document:select",e.model.get("dataId")))},"events":{"keydown .xecmpf-file-upload-capture-list-item":"doClickOnEnter","keydown":"doArrowNavigate"},"doClickOnEnter":function(e){32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),e.target.click())},"doArrowNavigate":function(e){var t=this.currentlyFocusedElement();switch(e.keyCode){case 38:this._moveTo(e,this._selectPrevious(),t);break;case 40:this._moveTo(e,this._selectNext(),t);break;case 33:this._moveTo(e,this._selectFirst(),t);break;case 34:this._moveTo(e,this._selectLast(),t)}},"currentlyFocusedElement":function(){var e=this.collection;0!==this.selectedIndex&&this.selectedIndex>=e.length&&(this.selectedIndex=e.length-1);var t=this.$el.find(".xecmpf-file-upload-capture-list-item:nth-of-type("+(this.selectedIndex+1)+")");return 0!==t.length?this.$(t[0]):null},"_moveTo":function(t,i,n){t.preventDefault(),t.stopPropagation(),setTimeout(e.bind(function(){n&&n.prop("tabindex","-1"),i.prop("tabindex","0"),i.trigger("focus")},this),50)},"_selectNext":function(){var e=this.model||this.collection;return this.selectedIndex<e.length-1&&this.selectedIndex++,this.currentlyFocusedElement()},"_selectPrevious":function(){return this.selectedIndex>0&&this.selectedIndex--,this.currentlyFocusedElement()},"_selectFirst":function(){return this.selectedIndex=0,this.currentlyFocusedElement()},"_selectLast":function(){return this.selectedIndex=this.collection.length-1,this.currentlyFocusedElement()}})}),csui.define("hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.doctype/impl/fileuploadpanel.doctype",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class=\'xecmpf-file-upload-doctype-view\'>\r\n    <div class="xecmpf-file-upload-doctype-header">\r\n        <h4 title="{{options.docTypeLabel}}" aria-label="{{options.docTypeLabel}}">{{options.docTypeLabel}}</h4>\r\n    </div>\r\n    <div class="xecmpf-file-upload-doctype-form">\r\n        <div class="xecmpf-file-upload-doctype" id="xecmpf-file-upload-doctype"></div>\r\n    </div>\r\n</div>'}});return i.registerPartial("xecmpf_controls_fileuploadpanel_impl_fileuploadpanel.doctype_impl_fileuploadpanel.doctype",n),n}),csui.define("css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.doctype/impl/fileuploadpanel.doctype",[],function(){}),csui.define("xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.doctype/fileuploadpanel.doctype.view",["csui/controls/form/form.view","hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.doctype/impl/fileuploadpanel.doctype","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang","css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.doctype/impl/fileuploadpanel.doctype"],function(e,t,i){return e.extend({"constructor":function(t){e.prototype.constructor.call(this,t)},"formTemplate":t,"formTemplateHelpers":function(){return{"docTypeLabel":i.docTypeLabel}},"_getLayout":function(){return{"parent":"bootstrap-csui","layout":{"template":this.getOption("formTemplate").call(this,{"data":this.alpaca.data,"mode":this.mode}),"bindings":this._getBindings()}}},"_getBindings":function(){return{"doc_type":"xecmpf-file-upload-doctype"}}})}),csui.define("css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.category/impl/fileuploadpanel.category",[],function(){}),csui.define("xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.category/fileuploadpanel.category.view",["csui/controls/form/form.view","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang","css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.category/impl/fileuploadpanel.category"],function(e,t,i){return e.extend({"constructor":function(t){e.prototype.constructor.call(this,t)}})}),csui.define("hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.preview/impl/fileuploadpanel.preview.error",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}
;return'<p aria-label="'+e.escapeExpression((s=null!=(s=a(i,"title")||(null!=t?a(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":1,"column":15},"end":{"line":1,"column":24}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"title")||(null!=t?a(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":1,"column":26},"end":{"line":1,"column":35}}}):s))+'</p>\r\n<span class="'+e.escapeExpression((s=null!=(s=a(i,"iconClass")||(null!=t?a(t,"iconClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"iconClass","hash":{},"loc":{"start":{"line":2,"column":13},"end":{"line":2,"column":26}}}):s))+'"></span>\r\n'}});return i.registerPartial("xecmpf_controls_fileuploadpanel_impl_fileuploadpanel.preview_impl_fileuploadpanel.preview.error",n),n}),csui.define("css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.preview/impl/fileuploadpanel.preview.error",[],function(){}),csui.define("xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.preview/fileuploadpanel.preview.error.view",["csui/lib/marionette","hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.preview/impl/fileuploadpanel.preview.error","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang","css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.preview/impl/fileuploadpanel.preview.error"],function(e,t,i){return e.ItemView.extend({"className":"xecmpf-file-upload-preview-error","templateHelpers":function(){return{"title":i.previewError,"iconClass":this.model.get("iconClass")}},"template":t})}),csui.define("hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.preview/impl/fileuploadpanel.preview",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return"<div class='xecmpf-file-upload-preview-viewer'></div>"}});return i.registerPartial("xecmpf_controls_fileuploadpanel_impl_fileuploadpanel.preview_impl_fileuploadpanel.preview",n),n}),csui.define("css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.preview/impl/fileuploadpanel.preview",[],function(){}),csui.define("xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.preview/fileuploadpanel.preview.view",["require","csui/lib/marionette","csui/utils/commands/open.plugins/open.plugins","csui/models/node/node.model","xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.preview/fileuploadpanel.preview.error.view","hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.preview/impl/fileuploadpanel.preview","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang","css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.preview/impl/fileuploadpanel.preview"],function(e,t,i,n,o,s,a){return t.LayoutView.extend({"className":"xecmpf-file-upload-preview","attributes":{"contenteditable":"false"},"regions":{"viewer":".xecmpf-file-upload-preview-viewer"},"constructor":function(e){this.options=e||{},t.LayoutView.prototype.constructor.apply(this,this.options)},"initialize":function(){this.previewLoaded=!1,t.LayoutView.prototype.initialize.apply(this,arguments)},"template":s,"showPreview":function(){var t,s,a,l,r;!this.previewLoaded&&this.options.model.get("node")&&(t=this.options.model.get("node"))&&t.data&&t.data.properties&&(s=new n(t.data.properties,{"connector":this.options.connector}),a=i.findByNode(s,{}),l=a&&a.widgetView||"",e([l],function(e){r=new e({"data":{"id":this.options.model.get("dataId")},"context":this.options.context}),this.viewer.show(r),this.listenTo(r,"destroy",function(){this.viewer.show(new o({"model":this.options.model}))}.bind(this)),this.previewLoaded=!0}.bind(this)))}})}),csui.define("xecmpf/controls/fileuploadpanel/impl/models/fileuploadpanel.doctype.form.model",["csui/models/form","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang"],function(e,t){return e.extend({"constructor":function(t){this.options=t||(t={});var i=(t.context,{"schema":{"properties":{}},"options":{"fields":{}},"date":{}});t.docTypeModel.on("change",function(){t.docTypeModel.hasChanged("docTypes")&&this._setAttributes(t.docTypeModel)}.bind(this)),e.prototype.constructor.call(this,i,t)},"initialize":function(e,t){this._setAttributes(this.options.docTypeModel)},"_setAttributes":function(e){var i,n=[],o=[];e&&e.get("docTypes")&&(i=e.get("docTypes"),n=i.map(function(e){return e.classification_id}),o=i.map(function(e){return e.classification_name})),this.set({"schema":{"properties":{"doc_type":{"required":!0,"type":"select","enum":n}}},"options":{"fields":{"doc_type":{"label":t.docTypeLabel,"type":"select","optionLabels":o,"events":{"change":function(){this.fieldView.formView.trigger("doctype:change",this.getValue())}}}}},"data":{"doc_type":""}})}})}),csui.define("xecmpf/controls/fileuploadpanel/impl/models/fileuploadpanel.category.form.model",["csui/models/form","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang"],function(e,t){return e.extend({"constructor":function(t){this.options=t||(t={});var i=(t.context,{"schema":{"properties":{}},"options":{"fields":{}},"data":{}});e.prototype.constructor.call(this,i,t)},"resetToEmptyRequiredModel":function(){this.set({"schema":{"properties":{}},"options":{"fields":{}},"data":{}})}})}),csui.define("hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.data/impl/fileuploadpanel.capture.data.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="xecmf-fileupload-capture-category">\r\n  <div class="xecmf-fileupload-capture-doc-type"></div>\r\n  <div class="xecmf-fileupload-capture-category-info"></div>\r\n</div>\r\n<div class="xecmf-fileupload-capture-preview"></div>\r\n  '}});return i.registerPartial("xecmpf_controls_fileuploadpanel_impl_fileuploadpanel.capture_impl_fileuploadpanel.capture.data_impl_fileuploadpanel.capture.data.item",n),n}),csui.define("css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.data/impl/fileuploadpanel.capture.data.item",[],function(){}),csui.define("xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.data/fileuploadpanel.capture.data.item.view",["csui/lib/marionette","csui/controls/tile/behaviors/blocking.behavior","xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.doctype/fileuploadpanel.doctype.view","xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.category/fileuploadpanel.category.view","xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.preview/fileuploadpanel.preview.view","xecmpf/controls/fileuploadpanel/impl/models/fileuploadpanel.doctype.form.model","xecmpf/controls/fileuploadpanel/impl/models/fileuploadpanel.category.form.model","hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.data/impl/fileuploadpanel.capture.data.item","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang","css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.data/impl/fileuploadpanel.capture.data.item"],function(e,t,i,n,o,s,a,l,r){"use strict";return e.LayoutView.extend({"className":"xecmpf-file-upload-capture-category-data-item","template":l,"regions":{"docTypeRegion":".xecmf-fileupload-capture-doc-type","previewRegion":".xecmf-fileupload-capture-preview","categoryRegion":".xecmf-fileupload-capture-category-info"},"onRender":function(){var e=this,t=new a({"context":this.options.context,"wsNode":this.options.wsNode,"connector":this.options.connector}),l=new s({"context":this.options.context,"wsNode":this.options.wsNode,"connector":this.options.connector,"docTypeModel":this.options.docTypeModel});this.docTypeView=new i({"model":l,"layoutMode":"singleCol","context":this.options.context,"mode":"create"}),this.previewView=new o({"model":this.options.model,"context":this.options.context,"connector":this.options.connector}),this.categoryView=new n({"model":t,"layoutMode":"singleCol","context":this.options.context,"connector":this.options.connector,"mode":"create"}),this.docTypeRegion.show(this.docTypeView),this.previewRegion.show(this.previewView),this.categoryRegion.show(this.categoryView),this.listenTo(this.docTypeView,"invalid:field",function(i){this.docTypeView.getValues().doc_type||t.resetToEmptyRequiredModel(),e.trigger("update:submit:button")}),this.listenTo(this.docTypeView,"doctype:change",function(i){t.resetToEmptyRequiredModel(),i&&(e.blockActions(),e.options.docTypeModel.getCategoryFormModel(parseInt(i)).then(function(i){t.set(i),e.unblockActions(),e.trigger("update:submit:button")}))}),this.listenTo(this.categoryView,"change:field",function(e){this.trigger("update:submit:button")}),this.listenTo(this.categoryView,"invalid:field",function(e){this.trigger("update:submit:button")})},"behaviors":{"Blocking":{"behaviorClass":t}}})}),csui.define("xecmpf/controls/fileuploadpanel/impl/models/fileuploadpanel.doctype.model",["csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin"],function(e,t,i,n,o){var s=t.Model.extend({"constructor":function(e){this.options=e,t.Model.prototype.constructor.call(this),this.makeConnectable(e),this.makeFetchable(e)},"url":function(){var e=i.combineQueryString({"skip_validation":!1,"document_type_rule":!0,"document_generation_only":!1,"sort_by":"DocumentType"});return i.combine(this.options.connector.getConnectionUrl().getApiBase("v2"),"/businessworkspaces/"+this.options.wsId+"/doctypes?"+e)},"parse":function(e){if(e.results)return{"docTypes":e.results.map(function(e){return e.data.properties})}},"getCategoryFormModel":function(e){var t,n=this.get("docTypes").filter(function(t){return t.classification_id===e}),o=this.options.connector,s=this;return n&&n.length>0?this.get(n[0].category_id)?Promise.resolve(this.get(n[0].category_id)):(t=i.combine(o.getConnectionUrl().getApiBase("v1"),"/forms/nodes/categories/create?id="+this.options.wsId+"&category_id="+n[0].category_id),new Promise(function(e,i){o.makeAjaxCall({"url":t,"type":"GET","success":function(t,i,o){t&&t.forms&&t.forms.length>0&&(s.set(n[0].category_id,t.forms[0]),e(t.forms[0]))},"error":function(){i()}})})):Promise.reject()},"getCategoryIdForDocType":function(e){var t,i=this.get("docTypes").filter(function(t){return t.classification_id===parseInt(e)});return i&&i.length>0&&(t=i[0].category_id),t}});return n.mixin(s.prototype),o.mixin(s.prototype),s}),csui.define("xecmpf/controls/fileuploadpanel/impl/models/fileuploadpanel.doctype.factory",["csui/lib/underscore","csui/utils/contexts/factories/factory","xecmpf/controls/fileuploadpanel/impl/models/fileuploadpanel.doctype.model"],function(e,t,i){return t.extend({"propertyPrefix":"fileUploadPanelDocType","constructor":function(e,n){t.prototype.constructor.apply(this,arguments),this.property=new i(n.fileUploadPanelDocType.options),this.fetch()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.data/fileuploadpanel.capture.data.view",["csui/lib/marionette","csui/controls/tile/behaviors/blocking.behavior","xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.data/fileuploadpanel.capture.data.item.view","xecmpf/controls/fileuploadpanel/impl/models/fileuploadpanel.doctype.factory","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang"],function(e,t,i,n,o){"use strict";return e.CollectionView.extend({"className":"xecmpf-file-upload-capture-category-data-list","childView":i,"childViewOptions":function(e){return{"model":e,"context":this.options.context,"wsNode":this.options.wsNode,"connector":this.options.connector,"docTypeModel":this.options.docTypeModel}},"childEvents":{"update:submit:button":"onUpdateSubmitButton"},"constructor":function(t){t.docTypeModel=t.context.getModel(n,{"options":{"wsId":t.wsNode.get("id"),"context":t.context,"connector":t.connector}}),e.CollectionView.prototype.constructor.call(this,t),this.listenTo(this,"on:document:select",function(e){this.children.forEach(function(t){t.model.get("dataId")===e?(t.$el.addClass("selected"),t.previewView.showPreview()):t.$el.removeClass("selected")})}.bind(this)),this.listenTo(this,"get:form:status",function(e){this.doUpdateFormStatus(e)}.bind(this))},"doUpdateFormStatus":function(e){this.children.forEach(function(t){var i;t.model.get("dataId")===e&&(i=t.docTypeView&&t.docTypeView.validate()&&t.categoryView&&t.categoryView.validate()&&Object.keys(t.categoryView.getValues()).length>0,this.trigger("update:form:status",{"dataId":e,"valid":i}))}.bind(this))},"onUpdateSubmitButton":function(){var e,t=[];this.children.forEach(function(i){if(!i.model.get("upload_err")){e=!1;try{e=i.docTypeView&&i.docTypeView.validate()&&i.categoryView&&i.categoryView.validate()&&Object.keys(i.categoryView.getValues()).length>0}catch(e){}t.push({"selected":i.$el.hasClass("selected"),"dataId":i.model.get("dataId"),"valid":e})}}.bind(this)),this.trigger("update:submit:button",t)},"isAllDocumentsInfoCaptured":function(){var e=!0;return this.children.forEach(function(t){t.model.get("upload_err")||(e=e&&t.docTypeView.validate()&&t.categoryView.validate())}.bind(this)),e},"getRequestPayload":function(){var e,t={"docInfos":[]},i=this;return this.children.forEach(function(n){n.model.get("upload_err")||(e={"docId":n.model.get("dataId"),"docType":parseInt(n.docTypeView.getValues().doc_type||"0"),"catId":i.options.docTypeModel.getCategoryIdForDocType(n.docTypeView.getValues().doc_type),"attrs":n.categoryView.getValues()},e.attrs.id=e.docId,t.docInfos.push(e))}.bind(this)),t},"submitDocumentDetails":function(){return this.isAllDocumentsInfoCaptured()?this.makeUploadDocsServiceCall():Promise.reject(o.detailsMissing)},"makeUploadDocsServiceCall":function(){var e=this;return new Promise(function(t,i){var n=e.options.connector,o=n.getConnectionUrl().getApiBase("v2")+"/fileupload/uploaddocs",s=new FormData;s.append("payload",JSON.stringify(e.getRequestPayload())),s.append("ws_id",e.options.wsNode.get("id")),n.makeAjaxCall({"url":o,"type":"POST","data":s,"success":function(e,i,n){t(e)},"error":function(e,t,n){i(e.responseJSON.error)}})})},"behaviors":{"Blocking":{"behaviorClass":t}}})}),csui.define("hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return"<div id='xecmpf-file-upload-capture-list'></div>\r\n<div id='xecmpf-file-upload-capture-category-data'></div>"}});return i.registerPartial("xecmpf_controls_fileuploadpanel_impl_fileuploadpanel.capture_impl_fileuploadpanel.capture",n),n}),csui.define("css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture",[],function(){}),csui.define("xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/fileuploadpanel.capture.view",["csui/lib/marionette","xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.list/fileuploadpanel.capture.list.view","xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture.data/fileuploadpanel.capture.data.view","hbs!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang","css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/impl/fileuploadpanel.capture"],function(e,t,i,n,o){"use strict";return e.LayoutView.extend({"className":"xecmpf-file-upload-capture","template":n,"regions":{"listRegion":"#xecmpf-file-upload-capture-list","categoryDataRegion":"#xecmpf-file-upload-capture-category-data"},"constructor":function(t){e.LayoutView.prototype.constructor.call(this,t)},"onRender":function(){this.listView=new t({"collection":this.options.collection,"context":this.options.context}),this.categoryData=new i({"collection":this.options.collection,"context":this.options.context,"wsNode":this.options.wsNode,"connector":this.options.connector}),this.listRegion.show(this.listView),this.categoryDataRegion.show(this.categoryData),this.listenTo(this.listView,"on:document:select",function(e){this.categoryData.trigger("on:document:select",e)}.bind(this)),this.listenTo(this.listView,"get:form:status",function(e){this.categoryData.trigger("get:form:status",e)}.bind(this)),this.listenTo(this.categoryData,"update:form:status",function(e){this.listView.trigger("update:form:status",e)}.bind(this)),this.listenTo(this.categoryData,"update:submit:button",function(e){var t=e.filter(function(e){return e.selected});t.length>0&&this.listView.trigger("update:form:status",t[0]),this.trigger("update:submit:button",e)}.bind(this))}})}),csui.define("xecmpf/controls/fileuploadpanel/impl/models/fileuploadpanel.model",["csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/utils/nodesprites"],function(e,t,i,n){var o=t.Model.extend({"defaults":{"file":null,"name":"","size":0,"iconClass":"","dataId":null,"node":null}});return t.Collection.extend({"constructor":function(e){for(var i=0,n=e.data,o=n.length,s=[];i<o;i++)s.push({"file":n[i],"name":n[i].name,"size":n[i].size,"iconClass":this.getFileTypeIconClass(n[i].type)});this.options=e,t.Collection.prototype.constructor.call(this,s)},"model":o,"addUploadedItems":function(e){for(var t=0,i=e.length;t<i;t++)this.add({"file":e[t],"name":e[t].name,"size":e[t].size,"iconClass":this.getFileTypeIconClass(e[t].type)})},"removeUploadedItem":function(e){this.remove(e)},"getFileTypeIconClass":function(e){return n.findByNode(new t.Model({"mime_type":e})).get("className")},"getParentLocationId":function(e){var t,n=this.options.connector,o=i.combine(n.getConnectionUrl().getApiBase("v2"),"/fileupload/createtargetfolder"),s=this;return this.parentId?Promise.resolve(this.parentId):new Promise(function(i,a){t=new FormData,t.append("ws_id",e),t.append("file",s.models[0].get("file")),n.makeAjaxCall({"url":o,"type":"POST","data":t,"success":function(e,t,n){e&&!0===e.results.ok?(s.models[0].set("dataId",e.results.dataID),s.models[0].set("node",e.results.node),s.parentId=e.results.parentID,i(s.parentId)):a("Upload failed")},"error":function(e){a(e.responseJSON&&e.responseJSON.error||"Upload failed")}})})},"uploadFiles":function(e,t){var n,o,s=[],a=this.options.connector,l=i.combine(a.getConnectionUrl().getApiBase("v2"),"/fileupload/preupload");return t=t||this.parentId||0,this.models.forEach(function(i){i.get("dataId")||(n=new FormData,n.append("parent_id",t),n.append("ws_id",e),n.append("file",i.get("file")),o=new Promise(function(e,t){a.makeAjaxCall({"url":l,"type":"POST","data":n,"success":function(e,t,n){e&&!0===e.results.ok&&(i.set("dataId",e.results.dataID),i.set("node",e.results.node))},"error":function(e){i.set("upload_err",e.responseJSON&&e.responseJSON.error||e)},"complete":function(t,i){e()}})}),s.push(o))}),Promise.all(s)},"deletePreviewDocs":function(e,t){var n,o=this.options.connector,s=i.combine(o.getConnectionUrl().getApiBase("v2"),"/fileupload/preupload/delete");return new Promise(function(i,a){n=new FormData,n.append("ws_id",e),n.append("parent_id",t),o.makeAjaxCall({"url":s,"type":"POST","data":n,"success":function(e,t,n){e&&!0===e.results.ok?i():a("Deletion failed")},"error":function(e){a(e.responseJSON&&e.responseJSON.error||"Deletion failed")}})})}})}),csui.define("css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel",[],function(){}),csui.define("xecmpf/controls/fileuploadpanel/fileuploadpanel.view",["csui/lib/underscore","csui/lib/marionette","csui/controls/side.panel/side.panel.view","csui/dialogs/modal.alert/modal.alert","csui/controls/progressblocker/blocker","csui/utils/page.leaving.blocker","xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.info/fileuploadpanel.info.view","xecmpf/controls/fileuploadpanel/impl/fileuploadpanel.capture/fileuploadpanel.capture.view","xecmpf/controls/fileuploadpanel/impl/models/fileuploadpanel.model","csui/models/fileuploads","csui/controls/globalmessage/globalmessage","csui/utils/contexts/factories/next.node","i18n!xecmpf/controls/fileuploadpanel/impl/nls/lang","css!xecmpf/controls/fileuploadpanel/impl/fileuploadpanel"],function(e,t,i,n,o,s,a,l,r,c,d,u,p){"use strict";return t.ItemView.extend({"className":"xecmpf-file-upload-panel","template":e.template(""),"constructor":function(e){e||(e={}),t.ItemView.prototype.constructor.apply(this,arguments)},"showGlobalMessage":function(e,t,i,n){t.reset(),i.hide(),d.showProgressPanel(n,e)},"showSidePanelView":function(t,o){var d,m={"collection":new r({"data":t,"connector":this.options.connector}),"connector":this.options.connector,"context":this.options.context,"wsNode":this.options.node},f=new a(m),h=new l(m);s.enable(),d=new(i.extend({"hide":function(){var e,t=this;m.collection.models.length>0?n.confirmWarning({"buttons":{"labelYes":p.yesLabel,"labelNo":p.noLabel},"showHeader":!0,"showTitleIcon":!0,"title":p.stopUploadConfirmation}).always(function(n){n&&(m.collection.parentId&&(e=m.wsNode?m.wsNode.get("id"):0,m.collection.deletePreviewDocs(e,m.collection.parentId)),s.disable(),i.prototype.hide.call(t),o&&o())}):(s.disable(),i.prototype.hide.call(t),o&&o())}}))({"slides":[{"title":p.panelTitle,"content":f,"buttons":[{"label":p.continueButtonLabel,"type":"action","id":"xecmpf-file-upload-panel-continue-btn","className":"binf-btn binf-btn-primary xecmpf-file-upload-panel-continue-btn","disabled":!1},{"type":"next","hidden":!0,"disabled":!0}],"containerClass":"xecmpf-file-upload-panel-slide-one"},{"title":p.panelTitle,"content":h,"buttons":[{"label":p.submitButtonLabel,"type":"action","id":"xecmpf-file-upload-panel-submit-btn","className":"binf-btn binf-btn-primary xecmpf-file-upload-panel-submit-btn","disabled":!0},{"type":"back","hidden":!0,"disabled":!0}],"containerClass":"xecmpf-file-upload-panel-slide-two"}],"backdrop":"sidepanel-backdrop","sidePanelClassName":"xecmpf-file-upload-panel","layout":{"header":!0,"resize":!0,"footer":!0,"mask":!0}}),d.listenTo(f,"button:click",function(e){var t=this.options.node?this.options.node.get("id"):0;"xecmpf-file-upload-panel-continue-btn"===e.id&&(f.blockActions(),m.collection.getParentLocationId(t).then(function(e){m.collection.uploadFiles(t,e).then(function(){f.unblockActions(),m.collection.models.filter(function(e){return e.get("upload_err")||!1}).length<m.collection.models.length?d.trigger("click:next"):n.showError(p.uploadFailed)},function(){f.unblockActions()})},function(e){n.showError(e),f.unblockActions()}))}.bind(this)),d.listenTo(h,"button:click",function(t){var i=(this.options.node&&this.options.node.get("id"),{"originatingView":this,"actionType":"UPLOAD","allowMultipleInstances":!0,"hideGotoLocationSingleSet":!0,"hideGotoLocationMultiSet":!0,"context":this.options.context,"nextNodeModelFactory":u}),n=m.collection.models,o=e.map(n,function(e){return{"name":e.get("name"),"node":e}}),s=m.connector,a=new c(o,{"connector":s});"xecmpf-file-upload-panel-submit-btn"===t.id&&(d.updateButton("xecmpf-file-upload-panel-submit-btn",{"disabled":!0}),h.categoryData.blockActions(),h.categoryData.submitDocumentDetails().then(function(t){h.categoryData.unblockActions(),d.updateButton("xecmpf-file-upload-panel-submit-btn",{"disabled":!1}),a.models.forEach(function(i){e.findWhere(t.results.successItems,{"docId":i.get("node").get("dataId")})?i.set("state","resolved"):(i.set("state","rejected"),i.set("errorMessage",e.findWhere(t.results.failedItems,{"docId":i.get("node").get("dataId")}).errMsg))})},function(e){h.categoryData.unblockActions(),d.updateButton("xecmpf-file-upload-panel-submit-btn",{"disabled":!1}),a.models.forEach(function(e){e.set("state","rejected"),e.set("errorMessage",p.uploadFailed)})}),this.showGlobalMessage(i,m.collection,d,a))}.bind(this)),d.listenTo(h,"update:submit:button",function(e){e.some(function(e){return!1===e.valid})?d.updateButton("xecmpf-file-upload-panel-submit-btn",{"disabled":!0}):d.updateButton("xecmpf-file-upload-panel-submit-btn",{"disabled":!1})}.bind(this)),d.listenTo(d,"shown:slide",function(e,t){1===t&&h&&h.categoryData&&(h.categoryData.onUpdateSubmitButton(),h.listView.children.findByIndex(0).$el.click())}),d.show()}})}),csui.define("hbs!xecmpf/widgets/fileupload/impl/fileupload.content/fileupload.content",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="xecmpf-fileupload-doc-info-section"></div>\r\n<div class="xecmpf-fileupload-doc-upload-section">\r\n  <div class="xecmpf-fileupload-drag-drop">\r\n    <p title="'+e.escapeExpression((s=null!=(s=a(i,"dragDropLabel")||(null!=t?a(t,"dragDropLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"dragDropLabel","hash":{},"loc":{"start":{"line":4,"column":14},"end":{"line":4,"column":31}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"dragDropLabel")||(null!=t?a(t,"dragDropLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"dragDropLabel","hash":{},"loc":{"start":{"line":4,"column":33},"end":{"line":4,"column":50}}}):s))+'</p>\r\n    <div class="csui-type-icon xecmpf-fileupload-add-doc" tabindex="0" title="'+e.escapeExpression((s=null!=(s=a(i,"uploadButtonTitle")||(null!=t?a(t,"uploadButtonTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"uploadButtonTitle","hash":{},"loc":{"start":{"line":5,"column":78},"end":{"line":5,"column":99}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"uploadButtonAria")||(null!=t?a(t,"uploadButtonAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"uploadButtonAria","hash":{},"loc":{"start":{"line":5,"column":113},"end":{"line":5,"column":133}}}):s))+'" role="button"></div>\r\n  </div>\r\n</div>'}});return i.registerPartial("xecmpf_widgets_fileupload_impl_fileupload.content_fileupload.content",n),n}),csui.define("xecmpf/widgets/fileupload/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/fileupload/impl/nls/root/lang",{"addDocumentLabel":"Upload document","allFilterLabel":"All","addItem":"Add item","backTitle":"Back","dialogTitle":"File upload","documentName":"Document name","documentType":"Document type","dragDropLabel":"Drag and drop files to upload or click on the icon below","emptyListText":"There are no items to display.","expandAria":"Expand the fileupload widget","failedListText":"Loading fileupload widget failed.","loadingListText":"Loading fileupload widget...","locations":"Locations","noDataToDisplay":"No item to display","openFileUploadView":"Open fileupload view","refineBy":"Refine by","showFilterTitle":"Filter","status":"Status","uploadButtonTitle":"Browse files","uploadButtonAria":"Browse files to upload"}),csui.define("css!xecmpf/widgets/fileupload/impl/fileupload.content/fileupload.content",[],function(){}),csui.define("xecmpf/widgets/fileupload/impl/fileupload.content/fileupload.content.view",["csui/lib/underscore","csui/lib/marionette","csui/behaviors/item.error/item.error.behavior","csui/controls/tile/behaviors/blocking.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/behaviors/keyboard.navigation/tabables.behavior","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/dialogs/file.open/file.open.dialog","xecmpf/widgets/fileupload/impl/models/fileupload.model","xecmpf/widgets/fileupload/impl/fileupload.content/fileupload.info/fileupload.info.view","xecmpf/controls/draganddrop/draganddrop.view","xecmpf/controls/fileuploadpanel/fileuploadpanel.view","hbs!xecmpf/widgets/fileupload/impl/fileupload.content/fileupload.content","i18n!xecmpf/widgets/fileupload/impl/nls/lang","css!xecmpf/widgets/fileupload/impl/fileupload.content/fileupload.content"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m){var f=t.LayoutView.extend({"className":"xecmpf-file-upload-content-view","constructor":function(e){e=e||{},e.model=new r({},e),t.LayoutView.prototype.constructor.call(this,e),this.propagateEventsToRegions(),this.listenTo(this.model,"sync",this.renderRegions),this.listenTo(this.model,"request",this.blockActions),this.listenTo(this.model,"error",this.unblockActions),this.model.fetch()},"initialize":function(e){this.dragNDrop=new d({"addableTypes":"144","context":this.options.context,"connector":this.model.connector,"originatingView":this}),this.fileUploadPanelView=new u({"connector":this.options.connector,"context":this.options.context,"node":this.options.node})},"onRender":function(){this.dragNDrop.setDragParentView(this,".xecmpf-fileupload-drag-drop")},"behaviors":{"ItemError":{"behaviorClass":i},"Blocking":{"behaviorClass":n},"PerfectScrolling":{"behaviorClass":o,"suppressScrollX":!0,"scrollYMarginOffset":15},"TabablesBehavior":{"behaviorClass":s,"recursiveNavigation":!0,"containTabFocus":!0}},"currentlyFocusedElement":function(){return this.$el.find(".xecmpf-fileupload-add-doc")},"template":p,"templateHelpers":function(){return{"dragDropLabel":m.dragDropLabel,"uploadButtonTitle":m.uploadButtonTitle,"uploadButtonAria":m.uploadButtonAria}},"regions":{"docInfoRegion":".xecmpf-fileupload-doc-info-section"},"events":{"click .xecmpf-fileupload-add-doc":"openFileDialog","keydown .xecmpf-fileupload-add-doc":"openFileDilogBykeyboard"},"renderRegions":function(){this.docInfoView=new c({"collection":this.model.get("data")}),this.docInfoRegion.show(this.docInfoView),this.unblockActions()},"openFileDilogBykeyboard":function(e){32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),this.openFileDialog(e))},"openFileDialog":function(){var e=new l({"multiple":!0}),t=this;e.listenTo(e,"add:files",function(i){e.destroy(),t.fileUploadPanelView.showSidePanelView(i,function(){t.model.fetch()})}).show()},"onDrop":function(e){var t=this;t.fileUploadPanelView.showSidePanelView(e,function(){t.model.fetch()})}});return e.extend(f.prototype,a),f}),csui.define("xecmpf/widgets/fileupload/impl/models/fileupload.detail.model",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/mixins/v2.commandable/v2.commandable.mixin","csui/models/browsable/browsable.mixin","csui/models/browsable/v1.request.mixin","csui/models/browsable/v2.response.mixin","csui/models/mixins/v2.delayed.commandable/v2.delayed.commandable.mixin","csui/models/browsable/client-side.mixin","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model","i18n!xecmpf/widgets/fileupload/impl/nls/lang"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f){"use strict";var h=u.extend({"constructor":function(e,t){if(e&&!e.title){var i=e.column_key;e.title=f[i]}u.prototype.constructor.call(this,e,t)}}),b=p.extend({"model":h,"constructor":function(e,t){e||(e=[{"key":"classification_name","type":-1,"name":f.documentType},{"key":"label","type":-1,"name":f.status},{"key":"name","type":-1,"name":f.documentName},{"key":"location_name","type":-1,"name":f.locations}],e.forEach(function(e,t){e.definitions_order=t+100,e.column_key=e.key})),p.prototype.constructor.call(this,e,t)}}),g=m.extend({"cidPrefix":"fileupload","constructor":function(e,t){t||(t={}),t.connector||(t.connector=t.collection&&t.collection.connector||void 0),m.prototype.constructor.apply(this,arguments),this.makeConnectable(t)}}),w=t.Collection.extend({"model":g,"constructor":function(i,n){n=n||{},this.options=n,this.wsid=n.wsid?n.wsid:0,t.Collection.prototype.constructor.apply(this,arguments),n&&(this.options=e.pick(n,["connector","autoreset","node","includeResources","fields","expand","commands","attributes"])),this.makeConnectable(n).makeFetchable(n),this.columns=new b},
"clone":function(){var e=new this.constructor(this.models,this.options);return this.columns&&e.columns.reset(this.columns.toJSON()),e},"url":function(e){var t=this.connector.getConnectionUrl().getApiBase("v2"),n={};this.status&&this.status.length>=1&&(n.status=this.status),this.locations&&this.locations.length>=1&&(n.locations=this.locations),n=i.combineQueryString(n);var o="/businessworkspaces/"+this.wsid+"/fileupload";return t=i.combine(t,o),t=i.appendQuery(t,n)},"parse":function(e){var t,i=[];for(t=0;t<e.results.data.length;t++)for(var n=e.results.data[t].data,o=e.results.data[t].key,s=e.results.data[t].icon,a=e.results.data[t].label,l=e.results.data[t].count,r=0;r<n.length;r++){var c=n[r];c.key=o,c.icon=s,c.label=a,c.count=l,i.push(c)}return i},"fetch":function(){return t.Collection.prototype.fetch.apply(this,arguments)}});return n.mixin(w.prototype),o.mixin(w.prototype),a.mixin(w.prototype),l.mixin(w.prototype),r.mixin(w.prototype),s.mixin(w.prototype),c.mixin(w.prototype),d.mixin(w.prototype),w}),csui.define("xecmpf/widgets/fileupload/impl/factory/fileupload.collection.factory",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node","xecmpf/widgets/fileupload/impl/models/fileupload.detail.model"],function(e,t,i,n,o,s,a,l){"use strict";return o.extend({"propertyPrefix":"fileupload","constructor":function(i,r){o.prototype.constructor.apply(this,arguments);var c=(i.options.wsid,this.options.fileupload||{});if(!(c instanceof n.Collection)){var d=i.getObject(s,r),u=i.getModel(a,r),p=e.config();c=new l(c.models,t.extend({"node":u,"connector":d},r,p.options,{"autoreset":!0,"status":status,"wsid":i.wsid}))}this.property=c},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("hbs!xecmpf/widgets/fileupload/impl/fileuploadexpandicon",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tile-icon xecmpf-file-upload-expand" tabindex="0" aria-label="'+e.escapeExpression((a=null!=(a=l(i,"expandArea")||(null!=t?l(t,"expandArea"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"expandArea","hash":{},"loc":{"start":{"line":1,"column":74},"end":{"line":1,"column":88}}}):a))+'" role="button" title='+e.escapeExpression((a=null!=(a=l(i,"titleExpand")||(null!=t?l(t,"titleExpand"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"titleExpand","hash":{},"loc":{"start":{"line":1,"column":110},"end":{"line":1,"column":125}}}):a))+">\r\n  "+(null!=(s=(l(i,"icon-v2")||t&&l(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","iconName":"csui_action_expand32"},"loc":{"start":{"line":2,"column":2},"end":{"line":2,"column":61}}}))?s:"")+"\r\n</div>"}});return i.registerPartial("xecmpf_widgets_fileupload_impl_fileuploadexpandicon",n),n}),csui.define("css!xecmpf/widgets/fileupload/impl/fileupload",[],function(){}),csui.define("xecmpf/widgets/fileupload/fileupload.view",["csui/lib/underscore","csui/lib/marionette","csui/utils/base","csui/controls/tile/tile.view","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node","conws/models/workspacecontext/workspacecontext.factory","csui/utils/contexts/factories/application.scope.factory","xecmpf/widgets/fileupload/impl/fileupload.content/fileupload.content.view","xecmpf/widgets/fileupload/impl/factory/fileupload.collection.factory","csui/behaviors/keyboard.navigation/tabables.behavior","hbs!xecmpf/widgets/fileupload/impl/fileuploadexpandicon","i18n!xecmpf/widgets/fileupload/impl/nls/lang","css!xecmpf/widgets/fileupload/impl/fileupload"],function(e,t,i,n,o,s,a,l,r,c,d,u,p){return n.extend({"className":n.prototype.className+" xecmpf-file-upload","ui":{"fileuploadExpandViewBtn":".xecmpf-file-upload-expand"},"events":{"click @ui.fileuploadExpandViewBtn":"onClickExpand","keydown @ui.fileuploadExpandViewBtn":"doClickOnEnter"},"constructor":function(e){if(e=e||{},!e.context)throw new Error("Context is not available");e.title=this._getTitle(),e.icon="xecmpf-fileupload-title-icon",e.connector=e.context.getObject(o),e.workspaceContext||(e.workspaceContext=e.context.getObject(a)),e.node=e.context.getModel(s),e.workspaceContext.setWorkspaceSpecific(c),n.prototype.constructor.call(this,e),this.applicationScope=e.context.getModel(l)},"contentView":r,"contentViewOptions":function(){return{"context":this.options.context,"connector":this.options.connector,"node":this.options.node}},"behaviors":{"TabablesBehavior":{"behaviorClass":d,"recursiveNavigation":!0,"containTabFocus":!0}},"currentlyFocusedElement":function(){return this.$el.find(".xecmpf-file-upload-expand")},"onBeforeShow":function(){this.$(".tile-controls").html(u({"titleExpand":p.expand||"Expand","expandArea":p.expandArea||"Expand FileUpload Widget"}))},"onClickExpand":function(e){e.preventDefault(),e.stopPropagation(),this.triggerMethod("expand"),this.onClickOpenPerspective()},"doClickOnEnter":function(e){32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),this.triggerMethod("expand"),this.onClickOpenPerspective())},"onClickOpenPerspective":function(){this.options.context&&(this.options.context.wsid=this.options.node?this.options.node.get("id"):0),this.applicationScope.set("id","fileupload"),this.trigger("open:fileupload:perspective")},"_getTitle":function(){var e=p.dialogTitle;return this.options.data&&this.options.data.title&&(e=i.getClosestLocalizedString(this.options.data.title,p.dialogTitle)),e}})}),csui.define("hbs!xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-back-button-container" title="'+e.escapeExpression((s=null!=(s=a(i,"backTitle")||(null!=t?a(t,"backTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"backTitle","hash":{},"loc":{"start":{"line":1,"column":45},"end":{"line":1,"column":58}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"backTitle")||(null!=t?a(t,"backTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"backTitle","hash":{},"loc":{"start":{"line":1,"column":72},"end":{"line":1,"column":85}}}):s))+'" tabindex="0" role="button">\r\n    <span class="arrow_back cs-go-back action-element"></span>\r\n</div>\r\n<div class="cs-add-icon-container" title="'+e.escapeExpression((s=null!=(s=a(i,"addItem")||(null!=t?a(t,"addItem"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"addItem","hash":{},"loc":{"start":{"line":4,"column":42},"end":{"line":4,"column":53}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"addItem")||(null!=t?a(t,"addItem"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"addItem","hash":{},"loc":{"start":{"line":4,"column":67},"end":{"line":4,"column":78}}}):s))+'" tabindex="0" role="button">\r\n    <ul class="csui-toolbar binf-nav binf-nav-pills csui-align-left">\r\n        <li class="binf-dropdown csui-wrapper csui-more-dropdown-wrapper">\r\n            <a href="#" class="binf-dropdown-toggle csui-acc-focusable" data-binf-toggle="dropdown"\r\n                aria-expanded="false" aria-haspopup="true" title="'+e.escapeExpression((s=null!=(s=a(i,"addItem")||(null!=t?a(t,"addItem"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"addItem","hash":{},"loc":{"start":{"line":8,"column":66},"end":{"line":8,"column":77}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"addItem")||(null!=t?a(t,"addItem"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"addItem","hash":{},"loc":{"start":{"line":8,"column":91},"end":{"line":8,"column":102}}}):s))+'">\r\n                <span class="icon icon-toolbarAdd"></span>\r\n            </a>\r\n            <ul class="binf-dropdown-menu csui-more-dropdown-menu" role="menu">\r\n                <li data-csui-command="'+e.escapeExpression(e.lambda(null!=t?a(t,"title"):t,t))+'" role="menuitem" class="xecmpf-fileupload-upload-btn"><a href="#"\r\n                        class="csui-toolitem" data-cstabindex="-1" title="'+e.escapeExpression((s=null!=(s=a(i,"addDocumentLabel")||(null!=t?a(t,"addDocumentLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"addDocumentLabel","hash":{},"loc":{"start":{"line":13,"column":74},"end":{"line":13,"column":94}}}):s))+'"\r\n                        tabindex="-1">'+e.escapeExpression((s=null!=(s=a(i,"addDocumentLabel")||(null!=t?a(t,"addDocumentLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"addDocumentLabel","hash":{},"loc":{"start":{"line":14,"column":38},"end":{"line":14,"column":58}}}):s))+'</a>\r\n                </li>\r\n            </ul>\r\n        </li>\r\n    </ul>\r\n</div>\r\n<div class="cs-filter-icon-container" title="'+e.escapeExpression((s=null!=(s=a(i,"filterTitle")||(null!=t?a(t,"filterTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"filterTitle","hash":{},"loc":{"start":{"line":20,"column":45},"end":{"line":20,"column":60}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"filterTitle")||(null!=t?a(t,"filterTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"filterTitle","hash":{},"loc":{"start":{"line":20,"column":74},"end":{"line":20,"column":89}}}):s))+'" tabindex="0" role="button">\r\n    <span\r\n        class="tile-type-action-icon cs-icon-left icon-toolbarFilter tile-filter-icon csui-acc-focusable-active action-element fileupload-filter-icon"></span>\r\n</div>\r\n<div class="cs-title-container">\r\n    <div class="cs-title-inner-container">\r\n        <span class="title-icon '+e.escapeExpression((s=null!=(s=a(i,"icon")||(null!=t?a(t,"icon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":26,"column":32},"end":{"line":26,"column":40}}}):s))+'"></span>\r\n        <h2 class="title">'+e.escapeExpression((s=null!=(s=a(i,"title")||(null!=t?a(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":27,"column":26},"end":{"line":27,"column":35}}}):s))+"</h2>\r\n    </div>\r\n</div>"}});return i.registerPartial("xecmpf_widgets_fileupload_impl_fileupload.expand_fileupload.header",n),n}),csui.define("xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/perspective.header/perspective.header.view","csui/dialogs/file.open/file.open.dialog","xecmpf/controls/fileuploadpanel/fileuploadpanel.view","hbs!xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.header","i18n!xecmpf/widgets/fileupload/impl/nls/lang","css!xecmpf/widgets/fileupload/impl/fileupload"],function(e,t,i,n,o,s,a,l){return n.extend({"template":a,"templateHelpers":function(){return{"filterTitle":l.showFilterTitle,"backTitle":l.backTitle,"icon":this.options.icon,"title":this.options.title,"addTitle":l.addTitle,"addItem":l.addItem,"addDocumentLabel":l.addDocumentLabel}},"events":{"click .xecmpf-fileupload-upload-btn":"onUploadBtnClick"},"constructor":function(e){n.prototype.constructor.apply(this,arguments),this.fileUploadPanelView=new s({"connector":this.options.connector,"context":this.options.context,"node":this.options.node})},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||(t(e.target).find(".action-element").click(),t(e.target).focus())},"onUploadBtnClick":function(){var e=new o({"multiple":!0});e.listenTo(e,"add:files",function(t){console.log("Number of files uploaded ",t.length),e.destroy(),this.fileUploadPanelView.showSidePanelView(t)}.bind(this)).show()}})}),csui.define("hbs!xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.filter",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <span class="xecmpf-fileupload-status-missingcount">'+e.escapeExpression((s=null!=(s=a(i,"missingCount")||(null!=t?a(t,"missingCount"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"missingCount","hash":{},"loc":{"start":{"line":24,"column":68},"end":{"line":24,"column":84}}}):s))+"</span>\r\n"},"3":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <span class="xecmpf-fileupload-status-outdatedcount">'+e.escapeExpression((s=null!=(s=a(i,"outDatedCount")||(null!=t?a(t,"outDatedCount"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"outDatedCount","hash":{},"loc":{"start":{"line":34,"column":69},"end":{"line":34,"column":86}}}):s))+"</span>\r\n"},"5":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <span class="xecmpf-fileupload-status-inprocesscount">'+e.escapeExpression((s=null!=(s=a(i,"inProcessCount")||(null!=t?a(t,"inProcessCount"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"inProcessCount","hash":{},"loc":{"start":{"line":44,"column":70},"end":{"line":44,"column":88}}}):s))+"</span>\r\n"},"7":function(e,t,i,n,o){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="location-filter csui-selected-checkbox csui-checkbox-primary">\r\n            <input id = "'+e.escapeExpression(e.lambda(null!=t?s(t,"name"):t,t))+'" name = "'+e.escapeExpression(e.lambda(null!=t?s(t,"id"):t,t))+'" type="checkbox" class="xecmpf-fileupload-location-name" tabindex="-1" ></input>\r\n            <label for="'+e.escapeExpression(e.lambda(null!=t?s(t,"id"):t,t))+'">'+e.escapeExpression(e.lambda(null!=t?s(t,"name"):t,t))+'</label>\r\n            <span class="fileupload-location-count">'+e.escapeExpression(e.lambda(null!=t?s(t,"count"):t,t))+"</span>\r\n        </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="filerupload-panel-heading" title="'+e.escapeExpression((a=null!=(a=l(i,"headerFilterTitle")||(null!=t?l(t,"headerFilterTitle"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"headerFilterTitle","hash":{},"loc":{"start":{"line":1,"column":46},"end":{"line":1,"column":67}}}):a))+'">\r\n    '+e.escapeExpression((a=null!=(a=l(i,"headerFilterTitle")||(null!=t?l(t,"headerFilterTitle"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"headerFilterTitle","hash":{},"loc":{"start":{"line":2,"column":4},"end":{"line":2,"column":25}}}):a))+'\r\n</div>\r\n\r\n<div class="fileupload-filter-body">\r\n\r\n    <div class="csui-facet-header fileupload-header-filter">\r\n        <div class="fileupload-status-filter header-label">'+e.escapeExpression((a=null!=(a=l(i,"status")||(null!=t?l(t,"status"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"status","hash":{},"loc":{"start":{"line":8,"column":59},"end":{"line":8,"column":69}}}):a))+'</div>\r\n        <div class="cs-icon csui-button-icon icon-expandArrowUp fileupload-status-toggle fileupload-status-show" role="button" title="Hide facet" aria-label="Hide facet" tabindex="-1"></div>\r\n    </div>\r\n    <div class="fileupload-status-content">\r\n        <div class="status-filter fileupload-status-header csui-selected-checkbox csui-checkbox-primary">\r\n            <input id="selectAll" type="checkbox" class="All" tabindex="-1" '+e.escapeExpression((a=null!=(a=l(i,"checkedAll")||(null!=t?l(t,"checkedAll"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"checkedAll","hash":{},"loc":{"start":{"line":13,"column":76},"end":{"line":13,"column":90}}}):a))+'></input>\r\n                <label for="selectAll">'+e.escapeExpression((a=null!=(a=l(i,"allFilterLabel")||(null!=t?l(t,"allFilterLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"allFilterLabel","hash":{},"loc":{"start":{"line":14,"column":39},"end":{"line":14,"column":57}}}):a))+'</label>\r\n            <span class="fileupload-allcount">'+e.escapeExpression((a=null!=(a=l(i,"totcalCount")||(null!=t?l(t,"totcalCount"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"totcalCount","hash":{},"loc":{"start":{"line":15,"column":46},"end":{"line":15,"column":61}}}):a))+'</span>\r\n        </div>\r\n\r\n        <div class="fileupload-status-body">\r\n           \r\n            <div class="status-filter csui-selected-checkbox csui-checkbox-primary">\r\n                <input id="xecmpf-fileupload-status-missing" type="checkbox" class="fileupload-status" tabindex="-1" '+e.escapeExpression((a=null!=(a=l(i,"checkedMissing")||(null!=t?l(t,"checkedMissing"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"checkedMissing","hash":{},"loc":{"start":{"line":21,"column":117},"end":{"line":21,"column":135}}}):a))+'></input>\r\n                <label for="xecmpf-fileupload-status-missing">'+e.escapeExpression((a=null!=(a=l(i,"missing")||(null!=t?l(t,"missing"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"missing","hash":{},"loc":{"start":{"line":22,"column":62},"end":{"line":22,"column":73}}}):a))+"</label>\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"checkedMissing"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":23,"column":16},"end":{"line":25,"column":23}}}))?s:"")+'            </div>\r\n            \r\n\r\n            \r\n            <div class="status-filter csui-selected-checkbox csui-checkbox-primary">\r\n                <input id="xecmpf-fileupload-status-outDated" type="checkbox" class="fileupload-status" tabindex="-1" '+e.escapeExpression((a=null!=(a=l(i,"checkedOutdated")||(null!=t?l(t,"checkedOutdated"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"checkedOutdated","hash":{},"loc":{"start":{"line":31,"column":118},"end":{"line":31,"column":137}}}):a))+'></input>\r\n                <label for="xecmpf-fileupload-status-outDated">'+e.escapeExpression((a=null!=(a=l(i,"outDated")||(null!=t?l(t,"outDated"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"outDated","hash":{},"loc":{"start":{"line":32,"column":63},"end":{"line":32,"column":75}}}):a))+"</label>\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"checkedOutdated"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":33,"column":16},"end":{"line":35,"column":23}}}))?s:"")+'            </div>\r\n            \r\n\r\n            \r\n            <div class="status-filter csui-selected-checkbox csui-checkbox-primary">\r\n                <input id="xecmpf-fileupload-status-inprocess" type="checkbox" class="fileupload-status" tabindex="-1" '+e.escapeExpression((a=null!=(a=l(i,"checkedInProcess")||(null!=t?l(t,"checkedInProcess"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"checkedInProcess","hash":{},"loc":{"start":{"line":41,"column":119},"end":{"line":41,"column":139}}}):a))+'></input>\r\n                <label for="xecmpf-fileupload-status-inprocess">'+e.escapeExpression((a=null!=(a=l(i,"inProcess")||(null!=t?l(t,"inProcess"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"inProcess","hash":{},"loc":{"start":{"line":42,"column":64},"end":{"line":42,"column":77}}}):a))+"</label>\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"checkedInProcess"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":43,"column":16},"end":{"line":45,"column":23}}}))?s:"")+'            </div>\r\n          \r\n        </div>\r\n    </div>\r\n\r\n    <div class="csui-facet-header fileupload-header-filter">\r\n        <div class="fileupload-locations-filter header-label">'+e.escapeExpression((a=null!=(a=l(i,"locations")||(null!=t?l(t,"locations"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"locations","hash":{},"loc":{"start":{"line":52,"column":62},"end":{"line":52,"column":75}}}):a))+'</div>\r\n        <div class="cs-icon csui-button-icon icon-expandArrowUp fileupload-locations-toggle fileupload-locations-show" role="button" title="Hide facet" aria-label="Hide facet" tabindex="-1"></div>\r\n    </div>\r\n    <div class="fileupload-location-body">\r\n'+(null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"locArray"):t,{"name":"each","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":56,"column":8},"end":{"line":62,"column":17}}}))?s:"")+"    </div>\r\n\r\n</div>"}});return i.registerPartial("xecmpf_widgets_fileupload_impl_fileupload.expand_fileupload.filter",n),n}),csui.define("xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.filter.view",["csui/lib/marionette","csui/lib/underscore","csui/lib/jquery","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","xecmpf/widgets/fileupload/impl/factory/fileupload.collection.factory","hbs!xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.filter","i18n!xecmpf/widgets/fileupload/impl/nls/lang","css!xecmpf/widgets/fileupload/impl/fileupload"],function(e,t,i,n,o,s,a,l){"use strict";var r=e.LayoutView.extend({"template":a,"templateHelpers":function(){var e,t,i,n,o,s=this.model.models,a=0,r="Missing",c="Outdated",d="In Process",u="",p="",m="",f="",h=[];return s.forEach(function(s){var l=!1;switch(s.get("status")){case"missingDocuments":r=s.get("label"),e=s.get("count"),a+=1,p="checked";break;case"outdatedDocuments":c=s.get("label"),t=s.get("count"),a+=1,m="checked";break;case"inprocessDocuments":d=s.get("label"),i=s.get("count"),a+=1,f="checked"}n=s.get("location_id"),o=s.get("location_name"),h.forEach(function(e){if(e.id===n)return l=!0,void(e.count=e.count+1)}),l||h.push({"name":o,"count":1,"id":n})}),"checked"===p&&"checked"===m&&"checked"===f&&(u="checked"),{"headerFilterTitle":l.refineBy,"status":l.status,"locations":l.locations,"totcalCount":a,"inProcess":d,"outDated":c,"missing":r,"checkedMissing":p,"checkedOutdated":m,"checkedInProcess":f,"allFilterLabel":l.allFilterLabel,"inProcessCount":i,"outDatedCount":t,"missingCount":e,"locArray":h,"checked":"checked","checkedAll":u}},"constructor":function(t){this.options=t,this.completeCollection=this.options.context.getCollection(s),e.LayoutView.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions()},"initialize":function(){var e=this;this.model=this.options.context.getModel(s),this.model.on("sync",function(){e.render()})},"events":{"click #selectAll":"toggleCheckBoxAll","click .fileupload-status":"toggleSelection","click .xecmpf-fileupload-location-name":"toggleSelection","keydown":"onKeyInView","click .fileupload-status-toggle":"toggleStatus","click .fileupload-locations-toggle":"toggleLocation"},"behaviors":{"TabableBehavior":{"behaviorClass":n}},"isTabable":function(){return this.$("*[tabindex]").length>0},"currentlyFocusedElement":function(e){var t=this.$("*[tabindex]:visible");return t.length&&t.prop("tabindex",0),i(e&&e.shiftKey?t[t.length-1]:t[0])},"onKeyInView":function(e){13!==e.keyCode&&32!==e.keyCode||(e.currentTarget=e.target.parentNode,this.toggleSelection(e))},"toggleCheckBoxAll":function(e){var t=this.options.extendedView.completeCollection?this.options.extendedView.completeCollection.status:[];1===this.$el.find("[id='selectAll']:checked").length?i(".status-filter input:not(:checked)").each(function(){i(this).prop("checked",!0).trigger("change"),"xecmpf-fileupload-status-missing"===this.id?t.push("missingDocuments"):"xecmpf-fileupload-status-outDated"===this.id?t.push("outdatedDocuments"):"xecmpf-fileupload-status-inprocess"===this.id&&t.push("inprocessDocuments")}):i(".status-filter input:checked").each(function(){i(this).prop("checked",!1).trigger("change")});var n=this.options.extendedView;n.completeCollection.status=t,n.completeCollection.locations=null,n.completeCollection.resetLimit(),n.completeCollection.fetch({"reload":!0})},"toggleStatus":function(e){var t=i(".fileupload-status-toggle");t.hasClass("fileupload-status-show")?(i(".fileupload-status-content").hide(),t.removeClass("fileupload-status-show"),t.addClass("fileupload-status-hide"),t.removeClass("icon-expandArrowUp"),t.addClass("icon-expandArrowDown")):t.hasClass("fileupload-status-hide")&&(i(".fileupload-status-content").show(),t.removeClass("fileupload-status-hide"),t.addClass("fileupload-status-show"),t.removeClass("icon-expandArrowDown"),t.addClass("icon-expandArrowUp"))},"toggleLocation":function(e){var t=i(".fileupload-locations-toggle");t.hasClass("fileupload-locations-show")?(i(".fileupload-location-body").hide(),t.removeClass("fileupload-locations-show"),t.addClass("fileupload-locations-hide"),t.removeClass("icon-expandArrowUp"),t.addClass("icon-expandArrowDown")):t.hasClass("fileupload-locations-hide")&&(i(".fileupload-location-body").show(),t.removeClass("fileupload-locations-hide"),t.addClass("fileupload-locations-show"),t.removeClass("icon-expandArrowDown"),t.addClass("icon-expandArrowUp"))},"toggleSelection":function(e){var t=[],n=[];i(".fileupload-status-body .csui-selected-checkbox input:not(:checked)").length>0?(i(".fileupload-status-body .csui-selected-checkbox input:checked").each(function(){var e=this.id;"xecmpf-fileupload-status-missing"===e?t.push("missingDocuments"):"xecmpf-fileupload-status-outDated"===e?t.push("outdatedDocuments"):"xecmpf-fileupload-status-inprocess"===e&&t.push("inprocessDocuments")}),e.data=t,i("#selectAll").prop("checked",!1).trigger("change")):i("#selectAll").prop("checked",!0).trigger("change"),i(".fileupload-location-body .csui-selected-checkbox input:checked").each(function(){this.name&&n.push(this.name)});var o=this.options.extendedView;o.completeCollection.status=t,"xecmpf-fileupload-location-name"===e.currentTarget.className?o.completeCollection.locations=n:o.completeCollection.locations=null,o.completeCollection.resetLimit(),o.completeCollection.fetch({"reload":!0})},"filterTableData":function(e){var t=e.statusList,i=e.locationList,n=this.model.models,o=[];return n.forEach(function(e){var n,s=!1,a=!1,l=e.get("status"),r=e.get("location_id");if(t&&t.length>0){for(n=0;n<t.length;n++)if(l===t[n]){s=!0;break}}else s=!0;if(i&&i.length>0){for(n=0;n<i.length;n++)if(r===i[n]){a=!0;break}}else a=!0;s&&a&&o.push(e)}),o}});return t.extend(r.prototype,o),r}),csui.define("xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.toolbaritems",["csui/lib/underscore","csui/controls/toolbar/toolitems.factory"],function(e,t){"use strict";return{"inlineActionbar":new t({})}}),csui.define("xecmpf/widgets/fileupload/impl/factory/fileupload.column.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","xecmpf/widgets/fileupload/impl/factory/fileupload.collection.factory"],function(e,t,i,n,o){"use strict";return n.extend({"propertyPrefix":"fileupload_columns","constructor":function(e,t){n.prototype.constructor.apply(this,arguments);var s=this.options.columns||{};if(!(s instanceof i.Collection)){s=e.getCollection(o,t).columns}this.property=s}})}),csui.define("xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.columns",["csui/lib/backbone","i18n!xecmpf/widgets/fileupload/impl/nls/lang"],function(e,t){var i=e.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),n=e.Collection.extend({"model":i,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new n(this.map(function(e){return e.attributes}))}});return new n([{"key":"classification_name","title":t.documentType,"sequence":10,"position":"absolute","widthFactor":.7},{"key":"label","align":"left","title":t.status,"sequence":30,"widthFactor":.7},{"key":"name","align":"left","title":t.documentName,"sequence":40,"widthFactor":.7},{"key":"location_name","align":"left","title":t.locations,"sequence":50,"widthFactor":.7}])}),csui.define("xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.table.view",["module","csui/lib/jquery","csui/lib/underscore","csui/utils/accessibility","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/widgets/nodestable/nodestable.view","csui/controls/mixins/view.state/multi.node.fetch.mixin","xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.toolbaritems","xecmpf/widgets/fileupload/impl/factory/fileupload.column.factory","xecmpf/widgets/fileupload/impl/factory/fileupload.collection.factory","xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.columns","xecmpf/controls/table/cells/statusicon.view","xecmpf/controls/table/cells/location.cell.view","i18n!xecmpf/widgets/fileupload/impl/nls/lang","css!xecmpf/widgets/fileupload/impl/fileupload"],function(e,t,i,n,o,s,a,l,r,c,d,u){"use strict";var p=(n.isAccessibleTable(),s.extend({"constructor":function(e){i.defaults(e,{"toolbarItems":l}),s.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions()},"template":i.template(""),"initialize":function(){this.columns=this.context.getCollection(r),this.collection=this.context.getCollection(c),i.defaults(this.options,{"orderBy":"classification_name asc","tableColumns":d,"urlParamsList":[]}),this.initSelectionMixin(this.options,this.collection),this.setTableView({"nameEdit":!1,"selectRows":"none","selectColumn":!1,"orderBy":this.options.orderBy,"haveDetailsRowExpandCollapseColumn":!0,"tableColumns":this.options.tableColumns,"tableTexts":{"zeroRecords":u.noDataToDisplay}}),this.addTableViewSelectionEvents(this.tableView),this.setPagination(),this.options.collection&&(this.collection.fetched=!1)},"_resetSortOrderBy":function(){},"getDefaultUrlParameters":function(){return[]}}));return i.extend(p.prototype,o),i.extend(p.prototype,a),p}),csui.define("hbs!xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.expand",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){
return'<div class="csui-perspective-toolbar"></div>\r\n\r\n<div class="csui-facet-table-container">\r\n  <div class=\'csui-side-panel csui-sidepanel-hidden\'>\r\n    <div class="csui-table-facetview csui-facetview-hidden csui-facetview-visibility"></div>\r\n    <div class="csui-table-treeview csui-treeview-hidden csui-treeview-visibility"></div>\r\n  </div>\r\n  \x3c!--outer div is needed in order to float table contents right to accommodate  facets--\x3e\r\n  <div class="csui-outertablecontainer">\r\n    \x3c!--inner div is needed in order to have tableview sized to remaining height of container--\x3e\r\n    <div class="csui-innertablecontainer">\r\n      <div class="csui-table-facetbarview xecmpf-fileupload-filter-view"></div>\r\n        <div class="csui-table-tableview xecmpf-fileupload-table-view"></div>\r\n        <div id="paginationviewMA"></div>\r\n      <div class="cs-thumbnail-wrapper"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n '}});return i.registerPartial("xecmpf_widgets_fileupload_impl_fileupload.expand_fileupload.expand",n),n}),csui.define("xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.expand.view",["csui/lib/marionette","csui/lib/underscore","csui/lib/jquery","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/utils/accessibility","csui/behaviors/default.action/default.action.behavior","csui/utils/contexts/factories/node","xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.header.view","xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.filter.view","xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.table.view","xecmpf/widgets/fileupload/impl/factory/fileupload.collection.factory","hbs!xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.expand","i18n!xecmpf/widgets/fileupload/impl/nls/lang","css!xecmpf/widgets/fileupload/impl/fileupload"],function(e,t,i,n,o,s,a,l,r,c,d,u,p){"use strict";var m=o.isAccessibleTable(),f=e.LayoutView.extend({"className":"csui-nodestable xecmpf-fileupload-expanded-view","template":u,"regions":{"headerRegion":".csui-perspective-toolbar","filterRegion":".csui-table-facetview","tableRegion":".xecmpf-fileupload-table-view","paginationRegion":"#paginationviewMA"},"behaviors":{"DefaultAction":{"behaviorClass":s}},"ui":{"sidePanel":".csui-side-panel","filterView":".csui-table-facetview","paginationView":".csui-table-paginationview"},"events":{"click .fileupload-filter-icon":"onClickFilter","click .fileupload-add-icon":"onClickAddItem","click .xecmpf-fileupload-table-view tbody tr":"onClickItem","click .cs-go-back":"onClickBackButton","keyup .xecmpf-fileupload-table-view tbody tr":"onKeyInView"},"constructor":function(t){this.options=t,this.showFilter=!1,t.node=t.context.getModel(a,{"node":{"attributes":{"id":this.options.context.wsid}}}),this.completeCollection=this.options.context.getCollection(d),this.context=this.options.context,e.LayoutView.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions()},"initialize":function(){this._setPerspectiveHeaderView(),this.fileuploadTableView=new c({"context":this.options.context,"collection":this.completeCollection,"extendedView":this}),this.filterView=new r({"context":this.options.context,"collection":this.completeCollection,"extendedView":this})},"onRender":function(){this.fileuploadHeaderView&&this.headerRegion.show(this.fileuploadHeaderView),this.tableRegion.show(this.fileuploadTableView.tableView),this.filterRegion.show(this.filterView),this.paginationRegion.show(this.fileuploadTableView.paginationView)},"_setPerspectiveHeaderView":function(){this.fileuploadHeaderView=new l({"title":p.dialogTitle,"icon":"title-icon xecmpf-fileupload-title-icon","context":this.options.context,"connector":this.completeCollection.connector,"node":this.options.node,"extendedView":this})},"onClickFilter":function(){this.showFilter=!this.showFilter,this._ensureFilterPanelViewDisplayed(),this.showFilter?(this._showFilterPanelView(),this.ui.sidePanel.removeClass("csui-sidepanel-hidden")):(this._hideFilterPanelView(),this.ui.sidePanel.addClass("csui-sidepanel-hidden"))},"onClickBackButton":function(){var e=this.options.context,t=e&&e.viewStateModel;t&&t.restoreLastRouter()},"_ensureFilterPanelViewDisplayed":function(){void 0===this.filterView&&(this._setFilterPanelView(),this.filterRegion.show(this.filterView))},"_showFilterPanelView":function(){this.showFilter=!0,this.ui.sidePanel.removeClass("csui-sidepanel-hidden"),this.ui.filterView.removeClass("csui-facetview-visibility"),i(this.fileuploadHeaderView.el).find(".cs-filter-icon-container").attr("title",p.hideFilterTitle),i(this.fileuploadHeaderView.el).find(".cs-filter-icon-container").attr("aria-label",p.hideFilterTitle),m?(this.ui.filterView.removeClass("csui-facetview-hidden"),this.triggerMethod("dom:refresh")):this.ui.filterView.one(this._transitionEnd(),function(){this.triggerMethod("dom:refresh")}.bind(this)).removeClass("csui-facetview-hidden"),this.listenTo(this.filterView,"dom:refresh",t.bind(function(){i(window).trigger("resize.facetview")},this))},"_hideFilterPanelView":function(){this.showFilter=!1,m?(this.ui.filterView.addClass("csui-facetview-hidden"),this.triggerMethod("dom:refresh"),this.ui.filterView.hasClass("csui-facetview-hidden")&&this.ui.filterView.addClass("csui-facetview-visibility"),this._removeFilterPanelView()):this.ui.filterView.one(this._transitionEnd(),function(){this._removeFilterPanelView(),this.triggerMethod("dom:refresh"),this.ui.filterView.hasClass("csui-facetview-hidden")&&this.ui.filterView.addClass("csui-facetview-visibility")}.bind(this)).addClass("csui-facetview-hidden"),i(this.fileuploadHeaderView.el).find(".cs-filter-icon-container").attr("title",p.showFilterTitle),i(this.fileuploadHeaderView.el).find(".cs-filter-icon-container").attr("aria-label",p.showFilterTitle),this.listenTo(this.filterView,"dom:refresh",t.bind(function(){i(window).trigger("resize.facetview")},this))},"_setFilterPanelView":function(){this.filterView=new r({"context":this.options.context,"extendedView":this}),this.listenTo(this.filterView,"remove:filter",this._removeFacetFilter).listenTo(this.filterView,"remove:all",this._removeAll).listenTo(this.filterView,"apply:filter",this._checkSelectionAndApplyFilter).listenTo(this.filterView,"apply:all",this._setFacetFilter)},"_removeFilterPanelView":function(){this.thumbnailViewState&&this.thumbnail._adjustThumbnailWidth(),this.filterRegion.empty(),this.filterView=void 0},"_transitionEnd":t.once(function(){var e,t={"transition":"transitionend","WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend"},i=document.createElement("div");for(e in t)if(void 0!==i.style[e])return t[e]}),"onClickItem":function(e){var t,n=i(e.target).closest("tr"),o=i(n).index();t=this.completeCollection.models[o],t.connector=this.completeCollection.connector;var s=this.$el.find(".highlight-item");if(s.length>0)for(var a=0;a<s.length;a++)i(s[a]).removeClass("highlight-item");i(n).addClass("highlight-item")},"onKeyInView":function(e){13!==e.keyCode&&32!==e.keyCode||this.onClickItem(e)}});return t.extend(f.prototype,n),f}),csui.define("xecmpf/controls/savedquery.node.picker/impl/search.query.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,n){var o=i.Model.extend({"constructor":function e(t,i){e.__super__.constructor.apply(this,arguments)},"toJSON":function(){return o.__super__.toJSON.apply(this,arguments)}});return n.extend({"propertyPrefix":"xecmpfSearchQuery","constructor":function(s,a){n.prototype.constructor.apply(this,arguments);var l=this.options.xecmpfSearchQuery||{};if(!(l instanceof i.Model)){var r=e.config();l=new o(l.models,t.extend({},l.options,r.options))}this.property=l}})}),csui.define("xecmpf/controls/savedquery.node.picker/impl/search.results.factory",["require","module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/search.results/search.results.model","csui/utils/commands","csui/utils/base"],function(e,t,i,n,o,s,a,l,r){return o.extend({"propertyPrefix":"xecmpfSearchResults","constructor":function(e,r){o.prototype.constructor.apply(this,arguments);var c=this.options.xecmpfSearchResults||{};if(!(c instanceof n.Collection)){var d=e.getObject(s,r),u=r.xecmpfSearchResults.query,p=t.config();c=new a(c.models,i.extend({"connector":d,"query":u,"commands":l.getAllSignatures()},c.options,p.options,{"autofetch":!0,"autoreset":!0}))}this.property=c},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){this.property.fetch({"success":i.bind(this._onSearchResultsFetched,this,e),"error":i.bind(this._onSearchResultsFailed,this,e)})},"_onSearchResultsFetched":function(e){return!0},"_onSearchResultsFailed":function(e,t,i){var n=new r.RequestErrorMessage(i);csui.require(["csui/dialogs/modal.alert/modal.alert"],function(e){e.showError(n.toString())})}})}),csui.define("hbs!xecmpf/controls/savedquery.node.picker/impl/savedquery.form",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="xecmpf-sq-select-container"></div>\r\n<div class="xecmpf-custom-search-container"></div>\r\n'}});return i.registerPartial("xecmpf_controls_savedquery.node.picker_impl_savedquery.form",n),n}),csui.define("xecmpf/controls/savedquery.node.picker/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/controls/savedquery.node.picker/impl/nls/root/lang",{"selectQuery":"Select Search Query"}),csui.define("css!xecmpf/controls/savedquery.node.picker/impl/savedquery.form",[],function(){}),csui.define("xecmpf/controls/savedquery.node.picker/impl/savedquery.form.view",["module","require","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/models/node/node.model","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/children2","csui/behaviors/keyboard.navigation/tabables.behavior","xecmpf/controls/savedquery.node.picker/impl/search.query.factory","csui/models/form","csui/controls/form/form.view","csui/widgets/search.custom/search.custom.view","hbs!xecmpf/controls/savedquery.node.picker/impl/savedquery.form","i18n!xecmpf/controls/savedquery.node.picker/impl/nls/lang","css!xecmpf/controls/savedquery.node.picker/impl/savedquery.form"],function(e,t,i,n,o,s,a,l,r,c,d,u,p,m,f){var h=i.extend({"csSubTypes":{"queryVolume":860,"query":258}},e.config());return o.LayoutView.extend({"className":"xecmpf-savedquery-form","template":m,"regions":{"querySelectRegion":".xecmpf-sq-select-container","customSearchRegion":".xecmpf-custom-search-container"},"constructor":function(e){e||(e={}),e.query||(e.query=e.context.getModel(c)),o.LayoutView.prototype.constructor.apply(this,arguments)},"initialize":function(e){this.query=e.query},"setQuerySelectField":function(){var e=n.Deferred();return this._getQueryCollection().then(function(t){var n={};t.each(function(e){n[e.get("name")]=e.get("id")}),this.query.set("query_id",n[i.keys(n)[0]]||"",{"silent":!0});var o=this;this.querySelectForm=new u({"mode":"create","model":new d({"data":{"searchQueryId":this.query.get("query_id")},"schema":{"properties":{"searchQueryId":{"enum":i.values(n)}}},"options":{"fields":{"searchQueryId":{"label":f.selectQuery,"name":"searchQueryId","type":"select","optionLabels":i.keys(n),"removeDefaultNone":!0,"onFieldChange":function(){o.onChangeSavedQuerySelectField(this.getValue())}}}}})}),e.resolve()}.bind(this),e.reject),e},"onChangeSavedQuerySelectField":function(e){this.query.clear({"silent":!0}).set("query_id",e,{"silent":!0}),this.setCustomSearchView().then(function(){this.showChildView("customSearchRegion",this.customSearchView)}.bind(this),function(e){console.error("Unable to set custom search form view.")})},"_getQueryCollection":function(){var e=this.options.context.getCollection(l,{"options":i.defaults({"commands":["open","default"],"node":new s({"id":h.queryVolumeId,"type":h.csSubTypes.queryVolume},{"connector":this.options.context.getObject(a)}),"filter":{"type":h.csSubTypes.query}}),"attributes":{"id":h.queryVolumeId}}),t=n.Deferred();return e.ensureFetched().then(function(){t.resolve(e)},t.reject),t},"setCustomSearchView":function(){var e=n.Deferred();return csui.require(["csui/widgets/search.custom/impl/search.object.view"],function(t){this.customSearchView&&this.customSearchView.destroy();var i=this.query.get("query_id");this.customSearchView=i?new t({"context":this.options.context,"query":this.options.query,"savedSearchQueryId":i}):new o.View,this.customSearchView.model&&this.customSearchView.model.ensureFetched(),e.resolve()}.bind(this),e.reject),e},"onRender":function(){this.setQuerySelectField().then(function(){this.showChildView("querySelectRegion",this.querySelectForm),this.setCustomSearchView().then(function(){this.showChildView("customSearchRegion",this.customSearchView)}.bind(this),function(e){console.error("Unable to set custom search form view.")})}.bind(this),function(e){console.error("Unable to set saved queries select field.")})},"onBeforeDestroy":function(){this.customSearchView&&this.customSearchView.destroy()}})}),csui.define("css!xecmpf/controls/savedquery.node.picker/impl/savedquery.node.picker",[],function(){}),csui.define("xecmpf/controls/savedquery.node.picker/savedquery.node.picker.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/handlebars","xecmpf/controls/savedquery.node.picker/impl/search.query.factory","xecmpf/controls/savedquery.node.picker/impl/search.results.factory","xecmpf/controls/savedquery.node.picker/impl/savedquery.form.view","csui/widgets/search.results/search.results.view","css!xecmpf/controls/savedquery.node.picker/impl/savedquery.node.picker"],function(e,t,i,n,o,s,a,l,r){return n.Object.extend({"constructor":function(t){t||(t={}),t.query||(t.query=t.context.getModel(s)),t.collection||(t.collection=t.context.getCollection(a,e.extend({},t,{"unique":!0,"temporary":!0,"detached":!0,"internal":!1}))),n.Object.prototype.constructor.apply(this,arguments)},"initialize":function(e){this.searchFormView=new l({"context":e.context,"query":e.query}),this.searchResultsView=new r({"context":e.context,"query":e.query,"collection":e.collection,"customSearchView":this.searchFormView,"toolbarItems":this.options.toolbarItems,"enableBackButton":this.options.enableBackButton,"titleView":new n.ItemView({"tagName":"h2","template":o.compile("<span>{{title}}</span>")({"title":this.options.title})})}),this.options.toolbarItems.inlineToolbar||(this.searchResultsView.resultsView.lockedForOtherContols=!0,this.searchResultsView.resultsView.$el.addClass("xecmpf-sq-np-no-inline-toolbar")),this.listenTo(this.searchResultsView,{"set:picker:result":function(e){this._result=e},"close go:back":function(){this.triggerMethod("close")}})},"onBeforeDestroy":function(){this.options.query.clear(),this.searchFormView.destroy(),this.searchResultsView.destroy()},"show":function(){this._deferred=t.Deferred();var o=this.options.originatingView,s=this.options.containerEl;if(o instanceof i.View){var a=t("<div/>",{"class":"xecmpf-savedquery-node-picker"}),l=e.isString(s)&&t(s+">*")||o.$el;l.parent().append(a),this.searchResultsView.render(),n.triggerMethodOn(this.searchResultsView,"before:show"),a.append(this.searchResultsView.el);var r=this;return a.show("blind",{"direction":"right","complete":function(){l.hide(),o.isDisplayed=!1,r.searchResultsView.ui.searchSidePanel.hasClass("csui-is-hidden")&&r.searchResultsView.headerView.triggerMethod("toggle:filter",r.searchResultsView),n.triggerMethodOn(r.searchResultsView,"show")}},100),this.listenTo(this,"close",function(){l.show(),l.promise().done(function(){o.isDisplayed=!0,a.hide("blind",{"direction":"right","complete":function(){r._result?r._deferred.resolve(r._result):"pending"===r._deferred.state()&&r._deferred.reject({"cancelled":!0}),r.destroy(),a.remove()}},100)})}),this._deferred}return this._deferred.reject().promise()}})}),csui.define("hbs!xecmpf/controls/search.textbox/impl/search.textbox",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="xecmpf-search-bar" role="dialog">\r\n  <div class="xecmpf-search-bar-content">  \r\n      <span class="xecmpf-search-icon-static" title="'+e.escapeExpression((s=null!=(s=a(i,"searchTooltip")||(null!=t?a(t,"searchTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"searchTooltip","hash":{},"loc":{"start":{"line":3,"column":53},"end":{"line":3,"column":70}}}):s))+'"\r\n          aria-label="'+e.escapeExpression((s=null!=(s=a(i,"searchTooltip")||(null!=t?a(t,"searchTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"searchTooltip","hash":{},"loc":{"start":{"line":4,"column":22},"end":{"line":4,"column":39}}}):s))+'"></span>  \r\n    <div class="xecmpf-search-input-container">\r\n      <input type="text" class="xecmpf-input" placeholder="'+e.escapeExpression((s=null!=(s=a(i,"searchFromHere")||(null!=t?a(t,"searchFromHere"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"searchFromHere","hash":{},"loc":{"start":{"line":6,"column":59},"end":{"line":6,"column":77}}}):s))+'"\r\n             title="'+e.escapeExpression((s=null!=(s=a(i,"searchFromHere")||(null!=t?a(t,"searchFromHere"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"searchFromHere","hash":{},"loc":{"start":{"line":7,"column":20},"end":{"line":7,"column":38}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"searchFromHere")||(null!=t?a(t,"searchFromHere"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"searchFromHere","hash":{},"loc":{"start":{"line":7,"column":52},"end":{"line":7,"column":70}}}):s))+'">\r\n    </div>\r\n    <a href="#" class="xecmpf-clearer formfield_clear" title="'+e.escapeExpression((s=null!=(s=a(i,"clearTextTooltip")||(null!=t?a(t,"clearTextTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"clearTextTooltip","hash":{},"loc":{"start":{"line":9,"column":62},"end":{"line":9,"column":82}}}):s))+'"\r\n          aria-label="'+e.escapeExpression((s=null!=(s=a(i,"clearTextTooltip")||(null!=t?a(t,"clearTextTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"clearTextTooltip","hash":{},"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":42}}}):s))+'"></a>\r\n  </div>\r\n</div>\r\n<div role="button" class="xempf-search-close" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"closeSearchTooltip")||(null!=t?a(t,"closeSearchTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"closeSearchTooltip","hash":{},"loc":{"start":{"line":13,"column":58},"end":{"line":13,"column":80}}}):s))+'">\r\n  <a href="javascript:void(0);" class="icon xecmpf-icon-close xempf-search-hide csui-acc-focusable"\r\n    title="'+e.escapeExpression((s=null!=(s=a(i,"closeSearchTooltip")||(null!=t?a(t,"closeSearchTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"closeSearchTooltip","hash":{},"loc":{"start":{"line":15,"column":11},"end":{"line":15,"column":33}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=a(i,"closeSearchTooltip")||(null!=t?a(t,"closeSearchTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"closeSearchTooltip","hash":{},"loc":{"start":{"line":15,"column":47},"end":{"line":15,"column":69}}}):s))+'" aria-expanded="false"></a>\r\n</div>'}});return i.registerPartial("xecmpf_controls_search.textbox_impl_search.textbox",n),n}),csui.define("xecmpf/controls/search.textbox/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/controls/search.textbox/impl/nls/root/lang",{"searchFromHere":"Search from here","closeSearchTooltip":"Clear all text and hide search","clearTextTooltip":"Clear all text in this field","search":"search"}),csui.define("css!xecmpf/controls/search.textbox/impl/search.textbox",[],function(){}),csui.define("xecmpf/controls/search.textbox/search.textbox.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/contexts/factories/search.query.factory","hbs!xecmpf/controls/search.textbox/impl/search.textbox","i18n!xecmpf/controls/search.textbox/impl/nls/lang","i18n","css!xecmpf/controls/search.textbox/impl/search.textbox"],function(e,t,i,n,o,s,a,l){"use strict";var r=t.defaults({},e.config(),{"inputValue":"","nodeId":"","nodeName":""});return n.ItemView.extend({"className":"xecmpf-search-text-box","template":s,"ui":{"input":".xecmpf-input","clearer":".xecmpf-clearer","closeSearchBtn":".xempf-search-hide"},"events":{"keyup @ui.input":"inputTyped","keydown @ui.input":"inputTyped","paste @ui.input":"inputChanged","change @ui.input":"inputChanged","click @ui.clearer":"clearerClicked","keydown @ui.clearer":"keyDownOnClear","click @ui.closeSearchBtn":"closeSearchButtonClicked","keydown @ui.closeSearchBtn":"KeyDownOnCloseSearchBtn"},"templateHelpers":function(){return{"searchFromHere":a.searchFromHere,"clearTextTooltip":a.clearTextTooltip,"closeSearchTooltip":a.closeSearchTooltip,"searchTooltip":a.search}},"constructor":function(e){e||(e={}),e.data=t.defaults({},e.data,r),this.direction=l.settings.rtl?"left":"right";var i=e.context;e.model||(e.model=i.getModel(o)),n.ItemView.prototype.constructor.apply(this,arguments)},"onRender":function(){var e=this.options.data.inputValue||this.model.get("where");e&&this._setInputValue(e)},"inputTyped":function(e){var t=this.ui.input.val().trim();32===e.which?e.stopPropagation():13===e.which?(e.preventDefault(),e.stopPropagation(),this._setInputValue(t),t&&this.searchIconClicked(e),this.previousValue!==t&&(this.previousValue=t)):this.inputChanged(e)},"inputChanged":function(e){var t=this.ui.input.val();this.ui.clearer.toggle(!!t.length)},"clearerClicked":function(e){e.preventDefault(),e.stopPropagation(),this._setInputValue(""),this.ui.input.trigger("focus")},"keyDownOnClear":function(e){13===e.keyCode&&this.clearerClicked(e)},"searchIconClicked":function(e){var t=this.ui.input.val().trim();if(t){this._setInputValue(t);var i=this.options.data.nodeId;t&&(this._setSearchQuery(t,this.options.sliceString,i,e),this._updateInput(),this.options.data.searchFromHere=!0),this._triggerSearchResults()}},"_updateInput":function(){if(this._isRendered){var e=this.model.get("where")||"";this._setInputValue(e)}},"_setSearchQuery":function(e,t,i,n){this.model.clear({"silent":!0});var o={};t&&(o.slice=t),i&&(o.location_id1=i),e&&(o.where=e),this.model.set(o)},"_setInputValue":function(e){this.ui.input.val(e),this.ui.clearer.toggle(!!e.length)},"closeSearchButtonClicked":function(e){this.trigger("hide:searchbar")},"KeyDownOnCloseSearchBtn":function(e){13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.trigger("hide:searchbar"))},"_triggerSearchResults":function(){this.trigger("search:results")}})}),csui.define("xecmpf/controls/property.panels/reference/reference.panel.controller",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/url","csui/utils/log"],function(e,t,i,n,o,s,a){"use strict";function l(e,n,o,s,a){var l=i.Deferred();return csui.require(["xecmpf/controls/bosearch/bosearch.model","xecmpf/controls/bosearch/bosearch.dialog.controller","xecmpf/controls/property.panels/reference/impl/workspace.reference.model","xecmpf/controls/property.panels/reference/impl/reference.panel.model","xecmpf/controls/property.panels/reference/impl/reference.panel.view"],function(r,c,d,u,p){var m={};e.options.context.trigger("request:actioncontext",m);var f=t.extend(m.actionContext||{},{"mode":n});e.options.context.once("request:actioncontext",function(e){e.actionContext=f}),!f.workspaceReference||a&&a.sidePanel?f.workspaceReference=new d(s,{"node":e.options.model}):(f.workspaceReference.node=e.options.model,f.workspaceReference.set(s));var h=f.workspaceReference;(h.get("id")?h.fetch():i.Deferred().resolve().promise()).then(function(){o&&(null!=h.get("bo_type_id")?o.addClass("conws-reference-showing"):o.removeClass("conws-reference-showing")),null!=h.get("bo_type_id")?l.resolve([{"model":new u,"contentView":p,"contentViewOptions":{"actionContext":f}}]):l.resolve([])},function(e){l.reject(e)})},function(e){l.reject(e)}),l.promise()}return o.Controller.extend({"constructor":function(e){o.Controller.prototype.constructor.apply(this,arguments)},"getPropertyPanels":function(e){if(this.options&&this.options.model&&848===this.options.model.get("type")&&!this.options.context.options.suppressReferencePanel){a.debug("getPropertyPanels for business workspace called")&&console.log(a.last);return l(this,"workspace_reference_edit",i(".cs-perspective-panel .cs-properties-wrapper .metadata-content .cs-metadata"),{"id":this.options.model.get("id"),"bo_id":void 0,"bo_type_id":void 0,"bo_type_name":void 0,"ext_system_id":void 0,"ext_system_name":void 0})}return null},"getPropertyPanelsForCreate":function(e){var i,n;if(e&&e.forms&&e.forms.models&&t.each(e.forms.models,function(e){"general"===e.get("id")&&(i=e.get("data"),n=!!i&&848===i.type)},this),(n=n&&!this.options.context.options.suppressReferencePanel)&&(a.debug("getPropertyPanelsForCreate for business workspace called")&&console.log(a.last),i)){var o=e&&e.forms,s=o&&o.formCollection,r=s&&s.bo_id,c=s&&s.options,d=c&&c.metadataAddItemController,u=d&&d.dialog,p=u&&u.$(".binf-modal-content .binf-modal-body .cs-add-item-metadata-form"),m={"id":void 0,"bo_id":r,"bo_type_id":i.bo_type_id,"bo_type_name":i.bo_type_name,"ext_system_id":i.ext_system_id,"ext_system_name":i.ext_system_name,"change_reference":!0,"complete_reference":!0},f=d&&d.metadataAddItemPropView,h=f&&f.metadataPropertiesView;return h&&function(e,i){e&&(i.listenTo(e,"before:render",function(){if(e.addPropertiesView&&(e.addPropertiesViewIsXecmRecreated||(e._createAddPropertiesView(),e.addPropertiesViewIsXecmRecreated=!0)),e.addPropertiesView&&e.addPropertiesView.collection&&!e.addPropertiesView.collection.hasXecmFilterModelsFunction){var i=e.addPropertiesView.collection.filterModels;e.addPropertiesView.collection.filterModels=function(e){return arguments[0]=t.filter(e,function(e){var t=e.get("signature");return"AddRMClassification"===t||"AddCategory"===t}),i.apply(this,arguments)},e.addPropertiesView.collection.hasXecmFilterModelsFunction=!0,e.addPropertiesView.collection.refilter()}}),i.listenTo(e,"render",function(){e.addPropertiesViewIsXecmRecreated&&delete e.addPropertiesViewIsXecmRecreated}))}(h,this),l(this,"workspace_reference_create",p,m,d)}return null}})}),csui.define("xecmpf/controls/property.panels/reference/reference.panel",["xecmpf/controls/property.panels/reference/reference.panel.controller"],function(e){return[{"sequence":10,"controller":e}]}),csui.define("xecmpf/dialogs/node.picker/start.locations/businessobjecttypes.container/impl/businessobjecttypes.collection",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/node/node.model","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin"],function(e,t,i,n,o,s,a,l,r){"use strict";var c=e.config()||{},d=i.Collection.extend({"model":o,"constructor":function(e,n){t.defaults(n,{"orderBy":""}),i.Collection.prototype.constructor.call(this,e,n),this.makeConnectable(n).makeFetchable(n).makeClientSideBrowsable(n).makeBrowsableV2Response(n)},"url":function(){var e="";if(this.orderBy){var t=this.orderBy.split(",")[0].split(" ");e=(t[1]||"asc")+"_"+t[0]}var i=this.connector.getConnectionUrl().getApiBase("v2"),o=n.combineQueryString({"fields":["properties"],"expand":"properties{original_id}","orderBy":e,"actions":""}),s="/nodes/"+c.parentId+"/nodes";return n.appendQuery(n.combine(i,s),o)},"parse":function(e,t){return this.parseBrowsedState(e,t),this.parseBrowsedItems(e,t),e.results.reverse(),e.results}});return l.mixin(d.prototype),r.mixin(d.prototype),s.mixin(d.prototype),a.mixin(d.prototype),d}),csui.define("xecmpf/dialogs/node.picker/start.locations/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/dialogs/node.picker/start.locations/impl/nls/root/lang",{"labelExtendedECMVolume":"Extended ECM","labelBusinessObjectTypes":"Business Object Types"}),csui.define("xecmpf/dialogs/node.picker/start.locations/businessobjecttypes.container/businessobjecttypes.container.factory",["csui/lib/underscore","csui/lib/jquery","csui/dialogs/node.picker/start.locations/node.base.factory","xecmpf/dialogs/node.picker/start.locations/businessobjecttypes.container/impl/businessobjecttypes.collection","i18n!xecmpf/dialogs/node.picker/start.locations/impl/nls/lang"],function(e,t,i,n,o){"use strict";return i.extend({"constructor":function(t){t=e.defaults({"node":{"type":888}},t),i.prototype.constructor.call(this,t)},"updateLocationModel":function(e){return e.set({"name":o.labelBusinessObjectTypes,"icon":"xecmpf-icon_businessobjecttype"}),t.Deferred().resolve().promise()},"getLocationParameters":function(){return{"container":null,"collection":new n(void 0,{"connector":this.options.connector,"autoreset":!0,"expand":["node"]}),"locationName":o.labelBusinessObjectTypes}}})}),csui.define("xecmpf/dialogs/node.picker/start.locations/extended.ecm.volume.container/extended.ecm.volume.container.factory",["csui/lib/underscore","csui/dialogs/node.picker/start.locations/node.base.factory","i18n!xecmpf/dialogs/node.picker/start.locations/impl/nls/lang"],function(e,t,i){"use strict";return t.extend({"constructor":function(n){n=e.defaults({"node":{"id":"volume","type":882},"unselectable":!0,"icon":"csui-icon-extended-ecm-volume","defaultName":i.labelExtendedECMVolume},n),t.prototype.constructor.call(this,n)}})}),csui.define("xecmpf/controls/form/impl/fields/documenttypepicker/server.adaptor.mixin",["csui/lib/underscore","csui/utils/url"],function(e,t){"use strict";return{"mixin":function(i){return e.extend(i,{"makeServerAdaptor":function(e){return this},"url":function(){var e=new t(this.connector.connection.url).getApiBase(2),i=t.combineQueryString({"skip_validation":!0,"document_type_rule":!1,"document_generation_only":!1,"sort_by":"DocumentType"});return t.combine(e,"businessworkspaces",this.businessWorkspaceId,"doctypes?"+i)},"parse":function(e,t){return e.results},"isFetchable":function(){return!!this.options}})}}}),csui.define("xecmpf/controls/form/impl/fields/documenttypepicker/documenttypecollection",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","xecmpf/controls/form/impl/fields/documenttypepicker/server.adaptor.mixin"],function(e,t,i,n,o,s){var a=i.Model.extend({"idAttribute":"classification_id","parse":function(e,t){return e.data.properties.name=e.data.properties.classification_name,e.data.properties}}),l=i.Collection.extend({"model":a,"constructor":function(e,t){this.options=t||{},i.Collection.prototype.constructor.call(this,e,t),this.makeConnectable(t).makeFetchable(t).makeServerAdaptor(t)}});return n.mixin(l.prototype),o.mixin(l.prototype),s.mixin(l.prototype),l}),csui.define("hbs!xecmpf/controls/form/impl/fields/documenttypepicker/documenttypepicker",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}
;return'maxlength="'+e.escapeExpression((s=null!=(s=a(i,"maxLength")||(null!=t?a(t,"maxLength"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"maxLength","hash":{},"data":o,"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":47}}}):s))+'" '},"3":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'placeholder="'+e.escapeExpression((s=null!=(s=a(i,"placeholder")||(null!=t?a(t,"placeholder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"placeholder","hash":{},"data":o,"loc":{"start":{"line":6,"column":38},"end":{"line":6,"column":53}}}):s))+'"\r\n           '},"5":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'placeholder="'+e.escapeExpression((s=null!=(s=a(i,"emptyLabel")||(null!=t?a(t,"emptyLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"data":o,"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":46}}}):s))+'"'},"7":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'size="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"options"):t)?a(s,"size"):s,t))+'"'},"9":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'name="'+e.escapeExpression((s=null!=(s=a(i,"name")||(null!=t?a(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"data":o,"loc":{"start":{"line":9,"column":24},"end":{"line":9,"column":32}}}):s))+'"'},"11":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"data-"+e.escapeExpression((s=null!=(s=a(i,"key")||o&&a(o,"key"))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"key","hash":{},"data":o,"loc":{"start":{"line":10,"column":33},"end":{"line":10,"column":41}}}):s))+'="'+e.escapeExpression(e.lambda(t,t))+'"'},"13":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s=null!=(s=a(i,"key")||o&&a(o,"key"))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"key","hash":{},"data":o,"loc":{"start":{"line":11,"column":34},"end":{"line":11,"column":42}}}):s))+'="'+e.escapeExpression(e.lambda(t,t))+'"'},"15":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-labelledby="'+e.escapeExpression((s=null!=(s=a(i,"idBtnLabel")||(null!=t?a(t,"idBtnLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"idBtnLabel","hash":{},"data":o,"loc":{"start":{"line":12,"column":63},"end":{"line":12,"column":77}}}):s))+'" '},"17":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-describedby="'+e.escapeExpression((s=null!=(s=a(i,"idBtnDescription")||(null!=t?a(t,"idBtnDescription"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"idBtnDescription","hash":{},"data":o,"loc":{"start":{"line":13,"column":48},"end":{"line":13,"column":68}}}):s))+'" '},"19":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((s=null!=(s=a(i,"multiFieldLabel")||(null!=t?a(t,"multiFieldLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"multiFieldLabel","hash":{},"data":o,"loc":{"start":{"line":14,"column":42},"end":{"line":14,"column":61}}}):s))+'"'},"21":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n        aria-label="'+e.escapeExpression((s=null!=(s=a(i,"writeModeAria")||(null!=t?a(t,"writeModeAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"writeModeAria","hash":{},"data":o,"loc":{"start":{"line":15,"column":20},"end":{"line":15,"column":37}}}):s))+'"'},"23":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-required="'+e.escapeExpression((s=null!=(s=a(i,"ariaRequired")||(null!=t?a(t,"ariaRequired"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"ariaRequired","hash":{},"data":o,"loc":{"start":{"line":16,"column":42},"end":{"line":16,"column":58}}}):s))+'"'},"25":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="icon-container">\r\n        <div class="csui-icon-edit inline-edit-icon edit-cancel" title="'+e.escapeExpression((s=null!=(s=a(i,"cancel")||(null!=t?a(t,"cancel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"data":o,"loc":{"start":{"line":21,"column":72},"end":{"line":21,"column":82}}}):s))+'"></div>\r\n      </div>\r\n'},"27":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"options"):t)?a(s,"applyFlag"):s,{"name":"if","hash":{},"fn":e.program(28,o,0),"inverse":e.noop,"data":o,"loc":{"start":{"line":24,"column":6},"end":{"line":28,"column":13}}}))?s:""},"28":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="icon-container binf-hidden">\r\n          <div class="csui-icon apply-all binf-hidden" title="'+e.escapeExpression((s=null!=(s=a(i,"titleApplyAll")||(null!=t?a(t,"titleApplyAll"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"titleApplyAll","hash":{},"data":o,"loc":{"start":{"line":26,"column":62},"end":{"line":26,"column":79}}}):s))+'" tabindex="0"></div>\r\n        </div>\r\n'},"30":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        "+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"hasData"):t,{"name":"if","hash":{},"fn":e.program(31,o,0),"inverse":e.program(33,o,0),"data":o,"loc":{"start":{"line":37,"column":8},"end":{"line":37,"column":76}}}))?s:"")+'\r\n                                                            target="_blank"title="'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"options"):t)?a(s,"anchorTitle"):s,{"name":"if","hash":{},"fn":e.program(35,o,0),"inverse":e.program(37,o,0),"data":o,"loc":{"start":{"line":38,"column":82},"end":{"line":39,"column":77}}}))?s:"")+'"\r\n        '+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(39,o,0),"inverse":e.program(41,o,0),"data":o,"loc":{"start":{"line":40,"column":8},"end":{"line":41,"column":96}}}))?s:"")+">\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"hasData"):t,{"name":"if","hash":{},"fn":e.program(43,o,0),"inverse":e.program(45,o,0),"data":o,"loc":{"start":{"line":42,"column":8},"end":{"line":46,"column":15}}}))?s:"")+"      </a>\r\n"},"31":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' <a href="'+e.escapeExpression((s=null!=(s=a(i,"data")||(null!=t?a(t,"data"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"data":o,"loc":{"start":{"line":37,"column":38},"end":{"line":37,"column":46}}}):s))+'" '},"33":function(e,t,i,n,o){return' <a href="#" '},"35":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"options"):t)?a(s,"anchorTitle"):s,t))},"37":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s=null!=(s=a(i,"data")||(null!=t?a(t,"data"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"data":o,"loc":{"start":{"line":39,"column":62},"end":{"line":39,"column":70}}}):s))},"39":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((s=null!=(s=a(i,"readModeMultiFieldAria")||(null!=t?a(t,"readModeMultiFieldAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"readModeMultiFieldAria","hash":{},"data":o,"loc":{"start":{"line":40,"column":44},"end":{"line":40,"column":70}}}):s))+'" '},"41":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n                                                            aria-label="'+e.escapeExpression((s=null!=(s=a(i,"readModeAria")||(null!=t?a(t,"readModeAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"readModeAria","hash":{},"data":o,"loc":{"start":{"line":41,"column":72},"end":{"line":41,"column":88}}}):s))+'"'},"43":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"          <span>"+e.escapeExpression((s=null!=(s=a(i,"data")||(null!=t?a(t,"data"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"data":o,"loc":{"start":{"line":43,"column":16},"end":{"line":43,"column":24}}}):s))+"</span>\r\n"},"45":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="placeholder" title="'+e.escapeExpression((s=null!=(s=a(i,"noValue")||(null!=t?a(t,"noValue"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"noValue","hash":{},"data":o,"loc":{"start":{"line":45,"column":43},"end":{"line":45,"column":54}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"emptyLabel")||(null!=t?a(t,"emptyLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"data":o,"loc":{"start":{"line":45,"column":56},"end":{"line":45,"column":70}}}):s))+"</span>\r\n"},"47":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <button title="'+e.escapeExpression((a=null!=(a=l(i,"tooltip")||(null!=t?l(t,"tooltip"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"tooltip","hash":{},"data":o,"loc":{"start":{"line":49,"column":23},"end":{"line":49,"column":34}}}):a))+'"\r\n          '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"schema"):t)?l(s,"readonly"):s,{"name":"if","hash":{},"fn":e.program(48,o,0),"inverse":e.noop,"data":o,"loc":{"start":{"line":50,"column":10},"end":{"line":50,"column":62}}}))?s:"")+"\r\n          "+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(39,o,0),"inverse":e.program(50,o,0),"data":o,"loc":{"start":{"line":51,"column":10},"end":{"line":53,"column":17}}}))?s:"")+"        >\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"hasData"):t,{"name":"if","hash":{},"fn":e.program(52,o,0),"inverse":e.program(54,o,0),"data":o,"loc":{"start":{"line":55,"column":10},"end":{"line":59,"column":17}}}))?s:"")+"        </button>\r\n"},"48":function(e,t,i,n,o){return' aria-disabled="true" '},"50":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n                aria-label="'+e.escapeExpression((s=null!=(s=a(i,"readModeAria")||(null!=t?a(t,"readModeAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"readModeAria","hash":{},"data":o,"loc":{"start":{"line":52,"column":28},"end":{"line":52,"column":44}}}):s))+'"\r\n'},"52":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            <span>"+e.escapeExpression((s=null!=(s=a(i,"data")||(null!=t?a(t,"data"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"data":o,"loc":{"start":{"line":56,"column":18},"end":{"line":56,"column":26}}}):s))+"</span>\r\n"},"54":function(e,t,i,n,o){var s,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="placeholder" title="'+e.escapeExpression((s=null!=(s=a(i,"noValue")||(null!=t?a(t,"noValue"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"noValue","hash":{},"data":o,"loc":{"start":{"line":58,"column":45},"end":{"line":58,"column":56}}}):s))+'">'+e.escapeExpression((s=null!=(s=a(i,"emptyLabel")||(null!=t?a(t,"emptyLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"data":o,"loc":{"start":{"line":58,"column":58},"end":{"line":58,"column":72}}}):s))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-field-write">\r\n  <div class="cs-field-write-inner">\r\n    <div class="cs-item-picker">\r\n    <input type="text" id="'+e.escapeExpression((a=null!=(a=l(i,"id")||(null!=t?l(t,"id"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"data":o,"loc":{"start":{"line":4,"column":27},"end":{"line":4,"column":33}}}):a))+'" aria-expanded="false" aria-autocomplete="list"\r\n      '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"maxLength"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"data":o,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":56}}}))?s:"")+"\r\n      "+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"placeholder"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.program(5,o,0),"data":o,"loc":{"start":{"line":6,"column":6},"end":{"line":7,"column":54}}}))?s:"")+"\r\n      "+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"options"):t)?l(s,"size"):s,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"data":o,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":56}}}))?s:"")+"\r\n      "+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"name"):t,{"name":"if","hash":{},"fn":e.program(9,o,0),"inverse":e.noop,"data":o,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":40}}}))?s:"")+"\r\n      "+(null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"options"):t)?l(s,"data"):s,{"name":"each","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"data":o,"loc":{"start":{"line":10,"column":6},"end":{"line":10,"column":61}}}))?s:"")+"\r\n      "+(null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"options"):t)?l(s,"attributes"):s,{"name":"each","hash":{},"fn":e.program(13,o,0),"inverse":e.noop,"data":o,"loc":{"start":{"line":11,"column":6},"end":{"line":11,"column":62}}}))?s:"")+'\r\n      value="'+e.escapeExpression((a=null!=(a=l(i,"writeData")||(null!=t?l(t,"writeData"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"writeData","hash":{},"data":o,"loc":{"start":{"line":12,"column":13},"end":{"line":12,"column":26}}}):a))+'" '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"idBtnLabel"):t,{"name":"if","hash":{},"fn":e.program(15,o,0),"inverse":e.noop,"data":o,"loc":{"start":{"line":12,"column":28},"end":{"line":12,"column":86}}}))?s:"")+"\r\n      "+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"idBtnDescription"):t,{"name":"if","hash":{},"fn":e.program(17,o,0),"inverse":e.noop,"data":o,"loc":{"start":{"line":13,"column":6},"end":{"line":13,"column":77}}}))?s:"")+"\r\n      "+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(19,o,0),"inverse":e.program(21,o,0),"data":o,"loc":{"start":{"line":14,"column":6},"end":{"line":15,"column":45}}}))?s:"")+"\r\n      "+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"ariaRequired"):t,{"name":"if","hash":{},"fn":e.program(23,o,0),"inverse":e.noop,"data":o,"loc":{"start":{"line":16,"column":6},"end":{"line":16,"column":66}}}))?s:"")+'/>\r\n      <span class="cs-icon icon-caret-down "></span>\r\n    </div>\r\n'+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.mode !== 'writeonly'",{"name":"xif","hash":{},"fn":e.program(25,o,0),"inverse":e.program(27,o,0),"data":o,"loc":{"start":{"line":19,"column":4},"end":{"line":29,"column":12}}}))?s:"")+'\r\n  </div>\r\n</div>\r\n<div class="cs-field-read">\r\n  <div class="cs-field-read-inner">\r\n    <div class="btn-container">\r\n'+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.options && this.options.type === 'url'",{"name":"xif","hash":{},"fn":e.program(30,o,0),"inverse":e.program(47,o,0),"data":o,"loc":{"start":{"line":36,"column":6},"end":{"line":61,"column":14}}}))?s:"")+'    </div>\r\n    <div class="icon-container">\r\n      <div class="csui-icon-edit inline-edit-icon icon-edit" title="'+e.escapeExpression((a=null!=(a=l(i,"edit")||(null!=t?l(t,"edit"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"data":o,"loc":{"start":{"line":64,"column":68},"end":{"line":64,"column":76}}}):a))+'"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"useData":!0});return i.registerPartial("xecmpf_controls_form_impl_fields_documenttypepicker_documenttypepicker",n),n}),csui.define("xecmpf/controls/form/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/controls/form/impl/nls/root/lang",{"nodePickerDialogTitle":"Select {0}","noValue":"(no value)","edit":"Edit","cancel":"Cancel","editFields":"Edit fields","fieldEditAria":"{0}: {1}, Click to Edit","fieldReadOnlyAria":"{0}: {1}","userFieldReadOnlyAria":"{0}: {1}, Click to view profile","emptyUserFieldReadOnlyAria":"{0}: {1}","requiredField":", Required","addField":"Add new field","removeField":"Remove field","addRow":"Add row","removeRow":"Remove row","selectFieldDefaultLabel":"None","selectValueLabel":"Select value","addFieldAria":"Add {0} field","removeFieldAria":"Remove {0} field","clearValue":"Clear input value","datePickerIcon":"Date picker","originalNodeUnavailable":"Unavailable node","originalNodeUnavailableTooltip":"The original node is unavailable or you do not have permission to access it.","invalidItem":"Invalid item","invalidUser":"Invalid user","invalidGroup":"Invalid group","invalidUserOrGroup":"Invalid user or group","invalidTkl":"Invalid Value","alpacaPlaceholderNotAvailable":"n/a","alpacaPlaceholderGeneric":"Add value","alpacaPlaceholderNumber":"Add value","alpacaPlaceholderText":"Add text","alpacaPlaceholderTime":"Add time","alpacaPlaceholderDate":"Add date","alpacaPlaceholderDateTime":"Add date and time","alpacaPlaceholderEmail":"Add email","alpacaPlaceholderFile":"Select file","alpacaPlaceholderPassword":"Add password","alpacaPlaceholderPhone":"Add phone number","alpacaPlaceholderSearch":"Enter search","alpacaPlaceholderUrl":"Add web address","alpacaPlaceholderIPv4":"Add IP address","alpacaPlaceholderOTUserPicker":"Add user","alpacaPlaceholderOTGroupPicker":"Add group","alpacaPlaceholderOTUserGroupPicker":"Add user or group","alpacaPlaceholderOTNodePicker":"Select","alpacaPlaceholderDocumentTypePicker":"Add document type","titleApplyAll":"Apply to all selected items","confirmApplyNotification":"Applied to all selected documents","titleColoutButton":"Open summary view","seeMore":"See more","seeLess":"See less","tklFieldNone":"None","noResultFound":"No results found","noOwner":"<No Owner>","noValueSet":"No value","radioFieldValidationErrorInvalidValue":"The selected value does not exist anymore.","showMore":"Show more","showLess":"Show less","showMoreAria":"Show more rows","showLessAria":"Show less rows"}),csui.define("css!xecmpf/controls/form/impl/fields/documenttypepicker/documenttypepicker",[],function(){}),csui.define("xecmpf/controls/form/fields/documenttypepicker.view",["module","require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/handlebars","csui/utils/base","csui/utils/contexts/factories/connector","csui/controls/form/fields/base/csformfield.view","csui/utils/log","xecmpf/controls/form/impl/fields/documenttypepicker/documenttypecollection","hbs!xecmpf/controls/form/impl/fields/documenttypepicker/documenttypepicker","i18n!xecmpf/controls/form/impl/nls/lang","css!xecmpf/controls/form/impl/fields/documenttypepicker/documenttypepicker","csui/lib/bootstrap3-typeahead"],function(e,t,i,n,o,s,a,l,r,c,d,u,p){new c(e.id);return r.extend({"constructor":function(e){r.apply(this,arguments),e=e||{},this.connector=e.context.getObject(l),this.emptyTemplate=s.compile('<span><li class="csui-typeahead-picker-no-results {{#if classNoResults}} {{classNoResults}}{{/if}}">{{langNoResults}}</li></span>')({"classNoResults":"documenttypepicker-noresults","langNoResults":p.noResultFound})},"className":"cs-formfield cs-documenttypepicker","template":u,"typeaheadFieldWithCaret":!0,"ui":function(){return i.defaults({"itempicker":"div.cs-item-picker","caretIcon":".icon-caret-down","inputBox":"input"},r.prototype.ui)},"events":function(){return i.defaults({"mousedown @ui.caretIcon":"clickCaretIcon","mousedown @ui.inputBox":"mouseDownOnInput","mouseup @ui.inputBox":"mouseUpOnInput","focus @ui.inputBox":"selectText","blur @ui.inputBox":"onBlur","keydown @ui.inputBox":"onKeyDown","mousedown":"onMouseDown"},r.prototype.events)},"templateHelpers":function(){var e="",t="",n=p.alpacaPlaceholderGeneric,o="",s="",a="",l=!1,c="readonly"===this.mode,d="",u=this.options.alpacaField&&this.options.alpacaField.options&&this.options.alpacaField.options.placeholder||p.alpacaPlaceholderDocumentTypePicker,m=this.options.alpacaField&&this.options.alpacaField.schema&&this.options.alpacaField.schema.maxLength;return l=this.options.alpacaField&&this.options.alpacaField.isRequired(),d=l?p.requiredField:"",t=this.alpacaField.options.label||u,this.model.get("data").classification_name&&(n=this.model.get("data").classification_name,o=this.model.get("data").classification_name),this.alpacaField&&this.alpacaField.options&&this.alpacaField.options.isMultiFieldItem&&(e=this.alpacaField.parent&&this.alpacaField.parent.options?this.alpacaField.parent.options.label:""),this.model.get("options")&&(s=c?i.str.sformat(p.fieldReadOnlyAria,this.model.get("options").label,n)+d:i.str.sformat(p.fieldEditAria,this.model.get("options").label,n)+d),a=c?i.str.sformat(p.fieldReadOnlyAria,e,n)+d:i.str.sformat(p.fieldEditAria,e,n)+d,i.extend(r.prototype.templateHelpers.apply(this),{"inputType":"text","idBtnLabel":this.options.labelId,"idBtnDescription":this.options.descriptionId,"writeModeAria":t,"readModeAria":s,"readModeMultiFieldAria":a,"multiFieldLabel":e,"ariaRequired":l,"maxLength":m,"placeholder":u,"data":n,"writeData":o})},"initialize":function(){this.collection=new d(void 0,{"connector":this.options.context.getObject(l),"autoreset":!0}),this.collection.businessWorkspaceId=this.options.alpacaField&&this.options.alpacaField.options.businessWorkspaceId,this.getDocumentTypes()},"onMouseDown":function(e){this._isInPicker(e.target,".typeahead.scroll-container")&&(e.preventDefault(),e.stopPropagation())},"_isInPicker":function(e,t){var i=this.$(".cs-item-picker");return!!(i[0]&&n.contains(i[0],e)&&t&&n(t).length&&n.contains(n(t)[0],e))},"onBlur":function(){this.ui.inputBox.attr("aria-expanded",!1)},"selectText":function(){this.ui.inputBox.select()},"mouseDownOnInput":function(){this.typeahead.options.showHintOnFocus=!0},"mouseUpOnInput":function(){this.typeahead.options.showHintOnFocus=!1},"isDropDownOpen":function(){return n(".binf-dropdown-menu").is(":visible")},"isReadyToSave":function(){return this.getItemPicked()},"getDocumentTypes":function(e){this.collection.fetch()},"source":function(){return this.collection.models},"setItemPicked":function(e){this.itemPicked=e},"getItemPicked":function(){return this.itemPicked},"_afterSelect":function(e){this.setItemPicked(!0),this.ui.inputBox.attr("aria-expanded",!1),this.editValue=e.attributes,this.selectText(),this.alpacaField&&this.alpacaField.refreshValidationState(!1)},"_retrieveDisplayText":function(e){return e.get("classification_name")},"onRender":function(){this.data=this.model.get("data"),this.editValue=this.data,this.curVal=this.editValue,this.ui.inputBox.on("keyup",this.onKeyUp.bind(this));var e={"items":"all","showHintOnFocus":!1,"minLength":0,"source":this.source.bind(this),"afterSelect":i.bind(this._afterSelect,this),"autoSelect":!1,"appendTo":this.ui.itempicker,"prettyScrolling":!0,"handleNoResults":!0,"emptyTemplate":this.emptyTemplate,"displayText":this._retrieveDisplayText.bind(this),"afterShow":this._adjustPerfectScroll.bind(this),"scrollContainerHeight":240,"selectOnBlur":!1};this.ui.inputBox.typeahead(e),this.typeahead=this.ui.inputBox.data().typeahead,this.setItemPicked(!0)},"_adjustPerfectScroll":function(){this.typeahead.$scrollContainer.perfectScrollbar("update"),this.ui.inputBox.attr("aria-expanded",!0)},"trySetValue":function(){var e=null!==this.getEditValue()&&void 0!==this.getEditValue()?this.getEditValue():"",t=null!==this.getValue()&&void 0!==this.getValue()?this.getValue().toString():"",i=!0,n=this.$el.hasClass("cs-formfield-invalid"),o=this.isReadyToSave(),s=this.alpacaField&&this.alpacaField.schema.required,a=this.alpacaField&&this.alpacaField.options.validate,l="writeonly"===this.mode,r=""===t;return i=this.getItemPicked&&this.getItemPicked(),(o&&(e!==t||l||n||!l&&s&&a&&r)||this.mlDataChanged)&&(i=this.setValue(e,!0)),i},"clickCaretIcon":function(e){1!==e.which||this.$el.find("ul").is(":visible")||setTimeout(function(){this.typeahead.options.showHintOnFocus=!0,this.ui.inputBox.focus(),this.typeahead.options.showHintOnFocus=!1}.bind(this))},"_getChangeEventValue":function(){return this.getValue().classification_id},"getEditValue":function(){return this.ui.inputBox.val()||(this.editValue={"classification_name":"","classification_id":null}),this.getItemPicked()&&this.ui.inputBox.val(this.editValue.classification_name),this.editValue},"onKeyPress":function(e){return 13===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.getStatesBehavior().isStateRead()&&this.allowEditOnEnter()?this.getEditableBehavior().setViewStateWriteAndEnterEditMode():this.getStatesBehavior().isStateWrite()&&this.allowSaveOnEnter()&&this.getEditableBehavior().trySetValueAndLeaveEditMode(!0,!0)):32===e.keyCode&&this.getStatesBehavior().isStateRead()&&this.allowEditOnEnter()&&(e.preventDefault(),e.stopPropagation(),this.getEditableBehavior().setViewStateWriteAndEnterEditMode()),13===e.keyCode||16===e.keyCode||113===e.keyCode?this.alpacaField&&this.alpacaField.refreshValidationState&&this.alpacaField.refreshValidationState(!1):this.setItemPicked(!1),!0},"onKeyDown":function(e){27===e.keyCode?(this.options.isDropDownOpen=this.isDropDownOpen(),e.preventDefault()):13!==e.keyCode&&32!==e.keyCode&&9!==e.keyCode||this.alpacaField&&(this.alpacaField.keyDown=!0)},"onKeyUp":function(e){if(9!==e.keyCode||this.alpacaField.keyDown||e.stopImmediatePropagation(),13===e.keyCode){if(this.alpacaField&&this.alpacaField.refreshValidationState&&this.alpacaField.keyDown){var t=this;this.alpacaField.refreshValidationState(!1,function(){t.alpacaField.field.hasClass("alpaca-invalid")&&t.alpacaField.fieldView.$el.find("input").select()})}}else 8===e.keyCode||46===e.keyCode?""===e.target.value?(this.setItemPicked(!0),this.$el.removeClass("cs-formfield-invalid"),"writeonly"===this.mode&&this.model.set("data","")):this.setItemPicked(!1):27===e.keyCode&&(this.ui.inputBox.attr("aria-expanded",!1),e.preventDefault(),e.stopPropagation());this.alpacaField&&(this.alpacaField.keyDown=!1)}})}),csui.define("xecmpf/controls/form/fields/alpaca/alpdocumenttypepickerfield",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","xecmpf/controls/form/fields/documenttypepicker.view","i18n!xecmpf/controls/form/impl/nls/lang"],function(e,t,i,n,o,s,a){return o.Fields.XecmpfDocumentTypePickerField=o.Fields.TextField.extend({"constructor":function(t,i,n,o,s,a,l){n=e.extend(n,{"alpacaFieldType":"xecmpf_document_type_picker","lang":{"invalidItem":"Invalid item"}}),this.base(t,i,n,o,s,a,l)},"setValueAndValidate":function(e,i){this.setValue(e);var n=!0;if(i)n=this.validate(),this.refreshValidationState(!1);else{this.fieldView.$el.trigger(t.Event("field:invalid"));var o=this.fieldView.ui.writeField&&this.fieldView.ui.writeField.val();this.fieldView.$el.hasClass("cs-formfield-invalid")&&this.fieldView.preVal!==o&&(this.fieldView.$el.find("input.typeahead").select(),this.fieldView.preVal=o)}return n},"postRender":function(e){this.base(e),this.showField({"classification_name":"","classification_id":null}),this.field.parent().addClass("csui-field-"+this.getFieldType())},"getValue":function(){var e="";return this.data&&this.data.classification_id?e=this.data.classification_id:this.data&&(e=""===this.data.classification_id||null===this.data.classification_id?"":this.data),e},"handleValidate":function(){var e=this.base();if(!e){var t=this.validation;if(void 0!==this.fieldView.$el.find("input").val()&&this.fieldView.$el.find("input").val())return t.notOptional.status=!0,t.notOptional.message="",e;for(var i in t)!1===t[i].status&&"notOptional"!==i&&(t[i].status=!0,t[i].message="")}return e},"showField":function(o){var l,r=this.id,c=this.options?this.options.descriptionId:"",d=t(this.field[0]).find("label");d&&1===d.length&&(l=d.attr("for")+"Label",d.attr("id",l)),this.fieldView=new s({"model":new i.Model({"data":o,"options":this.options,"schema":this.schema,"inputType":"text","id":r}),"data":o,"context":this.connector.config.context,"id":e.uniqueId(r),"alpacaField":this,"labelId":l,"descriptionId":c,"value":this.data,"dataId":this.name,"path":this.path,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema}}),this.options.fieldValidator?this.options.validator=this.options.fieldValidator:this.options.validator=function(e){var t=this.fieldView&&this.fieldView.getItemPicked&&this.fieldView.getItemPicked();e({"status":t,"message":t?"":this.options.lang&&this.options.lang.invalidItem||a.invalidItem})};var u=t("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(u),this.region=new n.Region({"el":u}),this.region.show(this.fieldView)}}),o.registerFieldClass("xecmpf_document_type_picker",o.Fields.XecmpfDocumentTypePickerField),t.alpaca.Fields.XecmpfDocumentTypePickerField}),csui.define("xecmpf/utils/commands/navigate/navigate.workspace",[],function(){return{"isWorkspaceNavigationEnabled":function(e,t){if(e.context&&e.context.options){return!1!==e.context.options.enableWorkspaceNavigation}return!0},"checkNodesTableToolbarElements":function(e,t,i){if(e.context&&e.context.options){var n=e.context.options;if(n.navigateMode&&"treeView"===n.navigateMode)return{"treeView":!0,"navigateUp":!1}
;if(n.navigateMode&&"navigateUp"===n.navigateMode)return{"treeView":!1,"navigateUp":!0}}return i},"checkHeaderViewOptions":function(e,t){if(e.context&&e.context.options){var i=e.context.options;if(i.headerViewOptions)return i.headerViewOptions}return t}}}),csui.define("xecmpf/controls/breadcrumbspanel/breadcrumbspanel.extension",[],function(){"use strict";return{"hideBreadcrumbs":function(e){var t=e&&e.context&&e.context.options;return!(!t||!t.hideBreadcrumbsPanel)}}}),csui.define("json!xecmpf/widgets/workspaces/workspaces.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"Workspaces Creation and Completion Widget","description":"User gets a list of early workspaces so he can select one workspace to complete the reference. If the user does not find an appropriate early workspace he can create a new workspace.","schema":{"type":"object","properties":{"busObjectId":{"type":"string","title":"Business object id","description":"ID of a business object"},"busObjectType":{"type":"string","title":"Business object type","description":"Type of a business object"},"extSystemId":{"type":"string","title":"External system id","description":"ID of an external system"}}}}),csui.define("json!xecmpf/widgets/boattachments/boattachments.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","schema":{"type":"object","properties":{"title":{"type":"object","title":"{{tileTitle}}","description":"{{tileDescription}}"},"businessattachment":{"type":"object","title":"{{businessAttachmentTitle}}","description":"{{businessAttachmentDesc}}","properties":{"properties":{"type":"object","title":"{{busAttPropertiesTitle}}","description":"{{busAttPropertiesDesc}}","properties":{"busObjectId":{"type":"string","title":"{{boIdTitle}}","default":"","description":"{{boIdDesc}}"},"busObjectType":{"type":"string","title":"{{boTypeTitle}}","default":"","description":"{{boTypeDesc}}"},"extSystemId":{"type":"string","title":"{{busAppTitle}}","default":"","description":"{{busAppDesc}}"}}}}},"collapsedView":{"type":"object","title":"{{collapsedViewTitle}}","description":"{{collapsedViewDesc}}","properties":{"noResultsPlaceholder":{"type":"object","title":"{{noResultsPlaceholderTitle}}","description":"{{noResultsPlaceholderDescription}}"},"orderBy":{"type":"object","title":"{{orderTitle}}","description":"{{orderDescription}}","properties":{"sortColumn":{"type":"string","title":"{{sortColumnTitle}}","description":"{{sortColumnDescription}}"},"sortOrder":{"type":"string","enum":["asc","desc"],"title":"{{sortOrderTitle}}","description":"{{sortOrderDescription}}"}}},"title":{"type":"object","title":"{{businessAttachmentsTileTitle}}","description":"{{businessAttachmentsTileDesc}}","properties":{"value":{"type":"string","title":"{{valueTitle}}","description":"{{valueDescription}}"}}},"description":{"type":"object","title":"{{descriptionSectionTitle}}","description":"{{descriptionSectionDesc}}","properties":{"value":{"type":"string","title":"{{descriptionValueTitle}}","description":"{{descriptionFieldValue}}"}}},"topRight":{"type":"object","title":"{{topRightSectionTitle}}","description":"{{topRightSectionDescription}}","properties":{"label":{"type":"object","title":"{{topRightLabel}}","description":"{{topRightLabelDesc}}"},"value":{"type":"string","title":"{{topRightValue}}","description":"{{topRightValueDesc}}"}}},"bottomLeft":{"type":"object","title":"{{bottomLeftTitle}}","description":"{{bottomLeftTitleDesc}}","properties":{"label":{"type":"object","title":"{{bottomLeftLabelTitle}}","description":"{{bottomLeftLabelDesc}}"},"value":{"type":"string","title":"{{bottomLeftValue}}","description":"{{bottomLeftValueDesc}}"}}},"bottomRight":{"type":"object","title":"{{bottomRightTitle}}","description":"{{bottomRightTitleDesc}}","properties":{"label":{"type":"object","title":"{{bottomRightLabel}}","description":"{{bottomRightLabelDesc}}"},"value":{"type":"string","title":"{{bottomRightValue}}","description":"{{bottomRightValueDesc}}"}}}}},"expandedView":{"type":"object","title":"{{expandedViewTitle}}","description":"{{expandedViewDesc}}","properties":{"orderBy":{"type":"object","title":"{{orderTitle}}","description":"{{orderDescription}}","properties":{"sortColumn":{"type":"string","title":"{{sortColumnTitle}}","description":"{{sortColumnDescription}}"},"sortOrder":{"type":"string","enum":["asc","desc"],"title":"{{sortOrderTitle}}","description":"{{sortOrderDescription}}"}}}}},"snapshot":{"type":"object","title":"{{snapshotTitle}}","description":"{{snapshotDesc}}","properties":{"parentFolderName":{"type":"string","title":"{{parentFolderTitle}}","description":"{{parentFolderDesc}}"},"folderNamePrefix":{"type":"string","title":"{{snapshotNameTitle}}","description":"{{snapshotNameDesc}}"}}}}},"options":{"fields":{"businessattachment":{"fields":{"properties":{"fields":{"busObjectId":{"type":"otconws_metadata_string"},"busObjectType":{"type":"otconws_metadata_string"},"extSystemId":{"type":"otconws_metadata_string"}}}}},"title":{"type":"otcs_multilingual_string"},"collapsedView":{"fields":{"noResultsPlaceholder":{"type":"otcs_multilingual_string"},"orderBy":{"fields":{"sortColumn":{"type":"otconws_customcolumn"},"sortOrder":{"type":"select","optionLabels":["{{sortOrderOptionLabelAsc}}","{{sortOrderOptionLabelDesc}}"]}}},"title":{"fields":{"value":{"type":"otconws_customcolumn"}}},"description":{"fields":{"value":{"type":"otconws_customcolumn"}}},"topRight":{"fields":{"label":{"type":"otcs_multilingual_string"},"value":{"type":"otconws_customcolumn"}}},"bottomLeft":{"fields":{"label":{"type":"otcs_multilingual_string"},"value":{"type":"otconws_customcolumn"}}},"bottomRight":{"fields":{"label":{"type":"otcs_multilingual_string"},"value":{"type":"otconws_customcolumn"}}}}},"expandedView":{"fields":{"orderBy":{"fields":{"sortColumn":{"type":"otconws_customcolumn"},"sortOrder":{"type":"select","optionLabels":["{{sortOrderOptionLabelAsc}}","{{sortOrderOptionLabelDesc}}"]}}}}},"snapshot":{"fields":{"parentFolderName":{"type":"text"},"folderNamePrefix":{"type":"text"}}}}}}),csui.define("json!xecmpf/widgets/dossier/dossier.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","schema":{"type":"object","properties":{"groupBy":{"type":"string","enum":["{{classification}}","{{create_date}}"],"default":"{{create_date}}","title":"{{groupBy_title}}","description":"{{groupBy_Description}}"},"hideGroupByCriterionDropdown":{"type":"boolean","enum":[!0,!1],"default":!1,"title":"{{hideGroupByCriterionDropdown_title}}","description":"{{hideGroupByCriterionDropdown_description}}"},"hideMetadata":{"type":"boolean","enum":[!0,!1],"default":!1,"title":"{{hideMetadata_title}}","description":"{{hideMetadata_description}}"},"metadata":{"type":"array","title":"{{metadata_title}}","description":"{{metadata_description}}","items":{"type":"object","title":"{{metadata_items_title}}","description":"{{metadata_items_description}}"}},"hideEmptyFields":{"type":"boolean","enum":[!0,!1],"default":!1,"title":"{{hideEmptyFields_title}}","description":"{{hideEmptyFields_description}}"},"hideFavorite":{"type":"boolean","enum":[!0,!1],"default":!1,"title":"{{hideFavorite_title}}","description":"{{hideFavorite_description}}"}}},"options":{"fields":{"groupBy":{"type":"select","optionLabels":["Classification","Create Date"]},"metadata":{"fields":{"item":{"type":"otconws_metadata"}}}}}}),csui.define("json!xecmpf/widgets/header/header.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","schema":{"type":"object","properties":{"workspace":{"type":"object","title":"{{workspaceTitle}}","description":"{{workspaceDescription}}","properties":{"properties":{"type":"object","title":"{{workspacePropertiesTitle}}","description":"{{workspacePropertiesDesc}}","properties":{"title":{"type":"string","title":"{{businessworkspaceTitle}}","default":"{name}","description":"{{businessworkspaceDesc}}"},"type":{"type":"string","title":"{{workspaceTypeTitle}}","default":"{business_properties.workspace_type_name}","description":"{{workspaceTypeDesc}}"},"description":{"type":"string","title":"{{descriptionSectionTitle}}","default":"{description}","description":"{{descriptionSection}}"}}}}},"completenessCheckSettings":{"type":"object","title":"{{completenessCheckTitle}}","description":"{{completenessCheckDescription}}","properties":{"hideMissingDocsCheck":{"title":"{{hideMissingDocsCheckTitle}}","description":"{{hideMissingDocsCheckDescription}}","type":"boolean","default":!1},"hideOutdatedDocsCheck":{"title":"{{hideOutdatedDocsCheckTitle}}","description":"{{hideOutdatedDocsCheckDescription}}","type":"boolean","default":!1},"hideInProcessDocsCheck":{"title":"{{hideInProcessDocsCheckTitle}}","description":"{{hideInProcessDocsCheckDesc}}","type":"boolean","default":!1}}},"headerwidget":{"type":"object","title":"{{additionalWidgetTitle}}","description":"{{additionalWidgetDescription}}","properties":{"type":{"type":"string","enum":["none","activityfeed","metadata"],"default":"none","title":"{{embedWidgetSectionTitle}}","description":"{{embedWidgetSectionDesc}}"}}},"metadataSettings":{"type":"object","title":"{{metadataWidgetTitle}}","description":"{{metadataWidgetDescription}}","properties":{"metadataInColumns":{"type":"string","enum":["singleCol","doubleCol"],"default":"doubleCol","title":"{{showMetadataTitle}}","description":"{{showMetadataTitle}}"},"hideMetadata":{"type":"boolean","enum":[!0,!1],"default":!1,"title":"{{hideMetadataTitle}}","description":"{{hideMetadataDesc}}"},"hideEmptyFields":{"type":"boolean","enum":[!0,!1],"default":!1,"title":"{{hideEmptyFieldsTitle}}","description":"{{hideEmptyFieldsDesc}}"},"metadata":{"type":"array","title":"{{metadataWidgetTitle}}","description":"{{headerMetadataDesc}}","items":{"type":"object","title":"{{categoryTitle}}","description":"{{categoryDescription}}"}}}},"favoriteSettings":{"type":"object","title":"{{favoriteWidgetTitle}}","description":"{{favoriteWidgetDesc}}","properties":{"hideFavorite":{"type":"boolean","enum":[!0,!1],"default":!1,"title":"{{hideFavoriteTitle}}","description":"{{hideFavoriteDesc}}"}}}}},"options":{"fields":{"workspace":{"fields":{"properties":{"fields":{"title":{"type":"otconws_metadata_string"},"type":{"type":"otconws_metadata_string"},"description":{"type":"otconws_metadata_string"}}}}},"metadataSettings":{"fields":{"metadata":{"fields":{"item":{"type":"otconws_metadata"}}},"metadataInColumns":{"type":"select","optionLabels":["{{singleColumnOption}}","{{doubleColumnOption}}"]}}},"headerwidget":{"fields":{"type":{"type":"select","optionLabels":["{{embedWidgetOptionLabelNone}}","{{embedWidgetOptionLabelActivityFeed}}","{{embedWidgetOptionLabelMetadata}}"]}}}}}}),csui.define("json!xecmpf/widgets/scan/scan.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema","title":"{{widgetTitle}}","description":"{{widgetDescription}}","schema":{"type":"object","properties":{"businessobjecttypes":{"description":"{{botypesDescription}}","title":"{{botypesTitle}}","type":"array","minItems":1,"items":{"type":"object","properties":{"id":{"type":"integer","description":"{{botypeBrowseDescription}}","title":"{{botypeBrowseTitle}}"}},"required":!1}}}},"options":{"fields":{"businessobjecttypes":{"items":{"fields":{"id":{"type":"otcs_node_picker","type_control":{"parameters":{"dialogTitle":"{{botypeBrowseTitle}}","select_types":[889],"globalSearch":!1,"startLocation":"xecmpf/dialogs/node.picker/start.locations/businessobjecttypes.container","startLocations":["xecmpf/dialogs/node.picker/start.locations/businessobjecttypes.container"]}}}}}}}}}),csui.define("json!xecmpf/widgets/fileupload/fileupload.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"tile","schema":{"type":"object","properties":{"title":{"type":"otcs_multilingual_string","title":"{{idTitle}}","description":"{{idDescription}}","default":""}}}}),csui.define("json!xecmpf/utils/perspective/custom.search.json",{"type":"grid","options":{"rows":[{"columns":[{"sizes":{"md":12},"heights":{"xs":"full"},"widget":{"type":"xecmpf/widgets/integration/folderbrowse/search.results","options":{"enableBackButton":!0}}}]}]}}),csui.define("xecmpf/widgets/header/impl/nls/header.manifest",{"root":!0,"en-us":!1,"en":!1});csui.define("xecmpf/widgets/header/impl/nls/root/header.manifest",{"widgetTitle":"Header","widgetDescription":"Header widget for business workspaces","workspaceTitle":"Workspace","workspaceDescription":"Workspace specific options","workspacePropertiesTitle":"Properties","workspacePropertiesDesc":"Configuration properties","businessworkspaceTitle":"Title","businessworkspaceDesc":"Name of the business workspace","workspaceTypeTitle":"Type","workspaceTypeDesc":"Name of the workspace type","descriptionSectionTitle":"Description","descriptionSection":"Description of the business workspace","completenessCheckTitle":"Completeness check","completenessCheckDescription":"Completeness check configuration","hideMissingDocsCheckTitle":"Hide missing documents check","hideMissingDocsCheckDescription":"Option to show or hide the missing document check","hideOutdatedDocsCheckTitle":"Hide outdated documents check","hideOutdatedDocsCheckDescription":"Option to show or hide the outdated document check. This option will be effective only if the Extended ECM for SAP SuccessFactors module is installed on the system","hideInProcessDocsCheckTitle":"Hide In process documents check","hideInProcessDocsCheckDesc":"Option to show or hide the In process document check. This option will be effective only if the Extended ECM for SAP SuccessFactors module is installed on the system","additionalWidgetTitle":"Widget","additionalWidgetDescription":"Additional widget that can be embedded in the header widget","embedWidgetSectionTitle":"Embed widget","embedWidgetSectionDesc":"Widget to be embedded in the header widget","embedWidgetOptionLabelNone":"None","embedWidgetOptionLabelActivityFeed":"Activity Feed","embedWidgetOptionLabelMetadata":"Metadata","metadataWidgetTitle":"Metadata","metadataWidgetDescription":"Header metadata configuration","showMetadataTitle":"Show Metadata In Columns","hideMetadataTitle":"Hide Metadata","hideMetadataDesc":"Hide metadata on header","hideEmptyFieldsTitle":"Hide empty fields","hideEmptyFieldsDesc":"Display only fields with values","headerMetadataDesc":"Metadata displayed in Header widget","categoryTitle":"Category or attribute","categoryDescription":"Category or attribute with metadata","favoriteWidgetTitle":"Favorite","favoriteWidgetDesc":"Favorite configuration","hideFavoriteTitle":"Hide Favorite","hideFavoriteDesc":"Option to hide the favorite icon on the header","singleColumnOption":"Single","doubleColumnOption":"Double"}),csui.define("xecmpf/widgets/boattachments/impl/nls/boattachments.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/boattachments/impl/nls/root/boattachments.manifest",{"widgetTitle":"Business Attachments","widgetDescription":"Shows business attachments for a business object","tileTitle":"Title","tileDescription":"Title of the business attachments widget","businessAttachmentTitle":"Business attachment","businessAttachmentDesc":"Business attachment specific options","busAttPropertiesTitle":"Properties","busAttPropertiesDesc":"Configuration properties","boIdTitle":"Business object id","boIdDesc":"ID of the business object whose business attachments are displayed","boTypeTitle":"Business object type","boTypeDesc":"Type of the business object","busAppTitle":"Business application ID","busAppDesc":"Business application of the business object","collapsedViewTitle":"Collapsed view","collapsedViewDesc":"Options for the collapsed view of this widget","noResultsPlaceholderTitle":"Message for empty result","noResultsPlaceholderDescription":"Message if there are no business attachments to display","orderTitle":"Order by","orderDescription":"Sort order of the displayed business attachments","sortColumnTitle":"Column","sortColumnDescription":"Column to order by","sortOrderTitle":"Sort order","sortOrderDescription":"Sort order to be used","sortOrderOptionLabelAsc":"Ascending","sortOrderOptionLabelDesc":"Descending","businessAttachmentsTileTitle":"Business attachment title","businessAttachmentsTileDesc":"Title of the business attachment in collapsed view","valueTitle":"Title","valueDescription":"Value for the Title field","descriptionSectionTitle":"Business attachment description","descriptionSectionDesc":"Description of the business attachment in collapsed view","descriptionValueTitle":"Description","descriptionFieldValue":"Value for the description field","topRightSectionTitle":"Top right metadata field","topRightSectionDescription":"Metadata displayed in top right  metadata field in collapsed view","topRightLabel":"Label","topRightLabelDesc":"Label for the metadata field","topRightValue":"Value","topRightValueDesc":"Value for the top right metadata field","bottomLeftTitle":"Bottom left  metadata field","bottomLeftTitleDesc":"Metadata displayed in bottom left  metadata field in collapsed view","bottomLeftLabelTitle":"Label","bottomLeftLabelDesc":"Label for the metadata field","bottomLeftValue":"Value","bottomLeftValueDesc":"Value for the bottom left metadata  metadata field","bottomRightTitle":"Bottom right  metadata field","bottomRightTitleDesc":"Metadata displayed in bottom right  metadata field in collapsed view","bottomRightLabel":"Label","bottomRightLabelDesc":"Label for the metadata field","bottomRightValue":"Value","bottomRightValueDesc":"Value for the bottom right metadata  metadata field","expandedViewTitle":"Expanded view","expandedViewDesc":"Options for the expanded view of this widget","snapshotTitle":"Snapshot","snapshotDesc":"Options for the snapshots of Business Attachments","parentFolderTitle":"Parent folder name","parentFolderDesc":"Folder in business workspace, where Snapshots are created.","snapshotNameTitle":"Snapshot name prefix","snapshotNameDesc":"The name of a snapshot consists of the prefix and a timestamp."}),csui.define("xecmpf/widgets/scan/impl/nls/scan.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/scan/impl/nls/root/scan.manifest",{"widgetTitle":"Scan barcode","widgetDescription":"Select business object types for the code scan with mobile devices. This widget can only be used with the Content Server Mobile app.","botypesTitle":"Business Object Types","botypesDescription":"List of business object types which are relavant for the scan","botypeBrowseTitle":"Business Object Type","botypeBrowseDescription":"Select the business object type which is relavant for the scan"}),csui.define("xecmpf/widgets/fileupload/impl/nls/fileupload.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/fileupload/impl/nls/root/fileupload.manifest",{"widgetTitle":"File upload","widgetDescription":"Shows information about documents uploaded and contains provision to upload documents","idTitle":"Title","idDescription":"Title of the File upload widget"}),csui.define("xecmpf/widgets/dossier/impl/nls/dossier.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("xecmpf/widgets/dossier/impl/nls/root/dossier.manifest",{"widgetTitle":"Dossier","widgetDescription":"Dossier View for business workspaces grouped by some criterion say create date ,classification","classification":"classification","create_date":"create_date","groupBy_title":"Default group by criterion","groupBy_Description":"Group by criterion that dossier view will use to load for the first time","hideGroupByCriterionDropdown_title":"Hide group by criterion dropdown","hideGroupByCriterionDropdown_description":"Option to hide the dropdown to choose the group by criterion","hideMetadata_title":"Hide metadata","hideMetadata_description":"Option to hide the document's metadata view","metadata_title":"Metadata","metadata_description":"Metadata displayed for document","metadata_items_title":"Category or attribute","metadata_items_description":"Category or attribute with metadata","hideEmptyFields_title":"Hide empty fields","hideEmptyFields_description":"Display only fields with values","hideFavorite_title":"Hide favorite","hideFavorite_description":"Option to hide the favorite icon"}),csui.define("xecmpf/utils/perspective/custom.search.perspective",["csui/lib/backbone"],function(e){return[{"decides":function(){return e.history.root&&!!e.history.root.match("xecm")},"module":"json!xecmpf/utils/perspective/custom.search.json"}]}),csui.define("xecmpf/utils/perspective/eventactionnode.perspective",[],function(){"use strict";return[{"equals":{"type":[898]},"important":!0,"module":"json!xecmpf/utils/perspective/impl/perspectives/eventaction.json"}]}),csui.define("xecmpf/utils/perspective/eventdefinitionnode.perspective",[],function(){"use strict";return[{"equals":{"type":[806]},"important":!0,"module":"json!xecmpf/utils/perspective/impl/perspectives/eventdefinition.json"}]}),csui.define("xecmpf/utils/contexts/perspective/plugins/node/impl/node.extra.data",[],function(){"use strict";return{"getModelFields":function(e){return{"external_source":[],"bwsinfo":["up"],"showworkflowicon":""}},"getModelExpand":function(e){return{}}}}),csui.define("xecmpf/utils/perspective/fileuploadnode.perspective",[],function(){"use strict";return[{"equals":{"type":[848]},"important":!0,"module":"json!xecmpf/utils/perspective/impl/perspectives/fileupload.json"}]}),csui.define("xecmpf/utils/commands/toolbar.extension",["csui/lib/jquery","csui/lib/underscore"],function(e,t){function i(){}return t.extend(i.prototype,{"OnUpdateToolbar":function(i){var n=i.async(),o=(i.container,i.toolbarItems),s=e.Deferred(),a=t.find(o,function(e){if(806===e.attributes.type)return e});a&&a.set("signature","addEvents"),s.resolve.apply(s,arguments),n()}}),function(e){var t=new i;e.on("before:updateAddToolbar",function(){t.OnUpdateToolbar.apply(t,arguments)})}}),csui.define("json!xecmpf/utils/perspective/impl/perspectives/eventaction.json",{"type":"left-center-right","options":{"center":{"kind":"fullpage","options":{},"type":"xecmpf/widgets/eac"},"left":{},"right":{}}}),csui.define("json!xecmpf/utils/perspective/impl/perspectives/eventdefinition.json",{"type":"left-center-right","options":{"center":{"kind":"fullpage","options":{},"type":"xecmpf/widgets/eac/impl/actionplan.details"},"left":{},"right":{}}}),csui.define("xecmpf/utils/contexts/fileupload/fileupload.perspective.context.plugin",["csui/lib/underscore","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/perspective/perspective.context.plugin"],function(e,t,i){"use strict";var n={"fileupload":"fileupload"};return i.extend({"constructor":function(e){i.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(t).on("change:id",this._fetchFileUploadPerspective,this)},"_fetchFileUploadPerspective":function(){var e=this.applicationScope.id;n[e]&&!this.loadingPerspective&&this.context.loadPerspective("json!xecmpf/utils/contexts/fileupload/"+n[e]+".json")}})}),csui.define("json!xecmpf/utils/contexts/fileupload/fileupload.json",{"type":"left-center-right","options":{"center":{"type":"xecmpf/widgets/fileupload/impl/fileupload.expand"}}}),csui.define("xecmpf/utils/router/fileupload/fileupload.perspective.router",["csui/lib/underscore","csui/pages/start/perspective.router","csui/utils/contexts/factories/application.scope.factory","i18n!xecmpf/widgets/fileupload/impl/nls/lang"],function(e,t,i,n){"use strict";return t.extend({"routes":{"nodes/:node_id/fileupload":"openFileUploadPerspective"},"constructor":function(e){t.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(i),this.listenTo(this.applicationScope,"change:id",this._updateUrl)},"openFileUploadPerspective":function(e){this.context.wsid=e||0,this.openApplicationScope("fileupload")},"openApplicationScope":function(e){this._updatePageTitle(),this.applicationScope.set("id",e)},"_updatePageTitle":function(){document.title=n.dialogTitle},"_updateUrl":function(){if("fileupload"===this.applicationScope.id){var e="nodes/"+this.context.wsid+"/fileupload";this.navigate(e)}}})}),csui.define("bundles/xecmpf-app",["xecmpf/pages/start/perspective-only.page.view","xecmpf/widgets/integration/folderbrowse/search.box.view","xecmpf/widgets/integration/folderbrowse/full.page.workspace.view","xecmpf/widgets/integration/folderbrowse/search.results/search.results.view","xecmpf/utils/commands/xecmpf.nodestable.toolitems","xecmpf/utils/commands/xecmpf.searchresults.toolitems","xecmpf/widgets/eac/eac.view","xecmpf/widgets/integration/folderbrowse/modaldialog/modal.dialog.view","xecmpf/utils/table/inlineforms/eventactioncenter/eventactioncenter.view","xecmpf/controls/table/cells/node.state/node.state.icons","xecmpf/utils/icons/icons","xecmpf/utils/icons/xecmpf.icons.v2","xecmpf/utils/eventdefinition.defaultactionitems","xecmpf/utils/commands/folderbrowse/go.to.workspace.history","xecmpf/utils/commands/folderbrowse/search.container","xecmpf/utils/commands/folderbrowse/open.full.page.workspace","xecmpf/utils/commands/workspaces/delete.workspace.handler","xecmpf/utils/commands/boattachments/boattachments.create","xecmpf/utils/commands/eac/eac.refresh","xecmpf/utils/commands/eac/eac.back","xecmpf/utils/commands/eac/add.to.warehouse","xecmpf/widgets/boattachments/impl/boattachment.table/commands/snapshot","xecmpf/utils/commands/eac/add.events","xecmpf/utils/commands/eac/add.action.plan","xecmpf/utils/commands/eac/delete","xecmpf/utils/commands/eac/open.eventdefinition","xecmpf/utils/commands/xecm.open.plugins/impl/xecm.open.plugins","xecmpf/utils/commands/xecm.open.plugins/impl/web.viewer.plugin","xecmpf/utils/commands/workflows","xecmpf/utils/commands/createdocument","xecmpf/behaviors/toggle.header/toggle.header.behavior","xecmpf/widgets/integration/folderbrowse/toolbaritems","xecmpf/widgets/eac/toolbaritems","xecmpf/widgets/boattachments/impl/boattachment.table/tablecell/createdby.view","xecmpf/widgets/boattachments/impl/boattachment.table/tablecell/modifiedby.view","xecmpf/controls/table/cells/eac.actionplan.view","xecmpf/controls/table/cells/location.cell.view","xecmpf/controls/table/cells/statusicon.view","xecmpf/controls/bosearch/bosearch.dialog.controller","xecmpf/controls/property.panels/reference/impl/reference.panel.view","xecmpf/widgets/boattachments/boattachments.view","xecmpf/widgets/workspaces/workspaces.widget","xecmpf/widgets/myattachments/metadata.property.panels","xecmpf/widgets/dossier/dossier.view","xecmpf/widgets/header/header.view","xecmpf/widgets/scan/scan.view","xecmpf/widgets/fileupload/fileupload.view","xecmpf/widgets/fileupload/impl/fileupload.expand/fileupload.expand.view","xecmpf/utils/document.thumbnail/document.thumbnail.view","xecmpf/controls/savedquery.node.picker/savedquery.node.picker.view","xecmpf/controls/savedquery.node.picker/impl/savedquery.form.view","xecmpf/controls/search.textbox/search.textbox.view","xecmpf/controls/property.panels/reference/reference.panel","xecmpf/dialogs/node.picker/start.locations/businessobjecttypes.container/businessobjecttypes.container.factory","xecmpf/dialogs/node.picker/start.locations/extended.ecm.volume.container/extended.ecm.volume.container.factory","xecmpf/controls/form/fields/alpaca/alpdocumenttypepickerfield","xecmpf/utils/commands/navigate/navigate.workspace","xecmpf/controls/breadcrumbspanel/breadcrumbspanel.extension","json!xecmpf/widgets/workspaces/workspaces.manifest.json","json!xecmpf/widgets/boattachments/boattachments.manifest.json","json!xecmpf/widgets/dossier/dossier.manifest.json","json!xecmpf/widgets/header/header.manifest.json","json!xecmpf/widgets/scan/scan.manifest.json","json!xecmpf/widgets/fileupload/fileupload.manifest.json","json!xecmpf/utils/perspective/custom.search.json","i18n!xecmpf/widgets/header/impl/nls/header.manifest","i18n!xecmpf/widgets/boattachments/impl/nls/boattachments.manifest","i18n!xecmpf/widgets/scan/impl/nls/scan.manifest","i18n!xecmpf/widgets/fileupload/impl/nls/fileupload.manifest","i18n!xecmpf/widgets/boattachments/impl/nls/lang","i18n!xecmpf/controls/property.panels/reference/impl/nls/lang","i18n!xecmpf/controls/table/cells/node.state/impl/nls/lang","i18n!xecmpf/dialogs/node.picker/start.locations/impl/nls/lang","i18n!xecmpf/widgets/dossier/impl/nls/dossier.manifest","xecmpf/utils/perspective/custom.search.perspective","xecmpf/widgets/boattachments/impl/boattachmentutil","xecmpf/utils/perspective/eventactionnode.perspective","xecmpf/utils/perspective/eventdefinitionnode.perspective","xecmpf/utils/contexts/perspective/plugins/node/impl/node.extra.data","xecmpf/utils/perspective/fileuploadnode.perspective","xecmpf/utils/commands/toolbar.extension","xecmpf/utils/util","json!xecmpf/utils/perspective/impl/perspectives/eventaction.json","json!xecmpf/utils/perspective/impl/perspectives/eventdefinition.json","xecmpf/utils/contexts/fileupload/fileupload.perspective.context.plugin","json!xecmpf/utils/contexts/fileupload/fileupload.json","xecmpf/utils/router/fileupload/fileupload.perspective.router"],{}),csui.require(["require","css"],function(e,t){t.styleLoad(e,"xecmpf/bundles/xecmpf-app",!0)});
//# sourceMappingURL=xecmpf-app.js.map