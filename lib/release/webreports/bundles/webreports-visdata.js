csui.define("webreports/utils/general.utils",["csui/lib/underscore","csui/utils/contexts/factories/node"],function(e,t){return e.extend({"getCaseInsensitiveProperty":function(t,o){return t&&o?t[o]||t[e.find(e.keys(t),function(e){return e.toLowerCase()===o.toLowerCase()})]:void 0},"getCurrentNode":function(e){return e.getModel(t)},"isWebReportNodeContext":function(e){var t=this.getCurrentNode(e);return t&&30303===t.get("type")}})}),csui.define("webreports/utils/url.webreports",["csui/lib/underscore","csui/utils/url","csui/utils/contexts/factories/node"],function(e,t,o){return e.extend({"appendWebReportParameters":function(t,o){return e.isUndefined(o)||(t=e.isArray(o)?this.combineQueryString(t,this._serializeWebReportParameters(o)):this.combineQueryString(t,o)),t},"appendCurrentContainer":function(t,o){var i;return e.isUndefined(o)||(i=this.getCurrentContainerID(o))&&(t=this.combineQueryString(t,"csuiContainerID="+i)),t},"appendSWRCellID":function(e,t){var o;return t&&t.data&&t.data.swrLaunchCell&&t.data.swrLaunchCell.id&&("number"!=typeof(o=parseInt(t.data.swrLaunchCell.id,10))||isNaN(o)||(e=this.combineQueryString(e,"subwebreport_id="+o))),e},"getCurrentContainerID":function(t){var i,n=t.getModel(o);return e.isUndefined(n)||(i=n.get("id")),i},"_serializeWebReportParameters":function(t){var o="";return e.each(t,function(e){null!==e.value&&void 0!==e.value||(e.value=""),""!==e.name&&(o.length?o+="&"+e.name+"="+e.value:o+=e.name+"="+e.value)}),o},"getWebReportParametersAsData":function(t){var o={};return e.isArray(t)?e.each(t,function(e){""!==e.name&&(o[e.name]=e.value)}):e.isObject(t)&&(o=t),o},"getDataAsWebReportParameters":function(t){var o=[];return e.isObject(t)&&e.mapObject(t,function(e,t){o.push({"name":t,"value":e})}),o}},t)}),csui.define("webreports/mixins/webreports.view.mixin",["csui/lib/jquery","csui/lib/underscore","webreports/utils/url.webreports"],function(e,t,o){"use strict";return{"mixin":function(e){return t.extend(e,{"setCommonModelOptions":function(e){var o={};return e&&e.data&&(this.setModelParameters(e,o),e.data.id&&t.extend(o,{"id":e.data.id}),e.context&&t.extend(o,{"context":e.context})),o},"setModelParameters":function(e,i){var n;t.has(e.data,"parameters")&&(n=e.data.parameters,t.isUndefined(n)||"object"!=typeof n||(t.extend(i,{"parameters":n}),t.extend(i,o.getWebReportParametersAsData(n))))},"getWidgetFactory":function(e,t,o){var i;return e&&e.context&&t&&o&&(i=e.context.getFactory(t,{"attributes":o})),i},"getFactory":function(){return this._factory},"setFactory":function(e){this._factory=e}})}}}),csui.define("webreports/models/run.webreport.pre/run.webreport.pre.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/base","csui/models/form","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin"],function(e,t,o,i,n,r,s){"use strict";var l=n.extend({"parametersModel":void 0,"destinationModel":void 0,"constructor":function(e,t){this.options=t||(t={}),o.Model.prototype.constructor.apply(this,arguments),this.makeConnectable(t),this.makeFetchable(t)},"url":function(){var t=this.connector,o={"id":this.options.id},n="forms/nodes/run?"+e.param(o);return i.Url.combine(t.connection.url,n)},"parse":function(e){return this.parametersModel=new o.Model(e.data.parameters_data),this.destinationModel=new o.Model(e.data.destination_data),e.forms[0]}});return r.mixin(l.prototype),s.mixin(l.prototype),l}),csui.define("webreports/utils/contexts/factories/run.webreport.pre.factory",["csui/lib/underscore","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","webreports/models/run.webreport.pre/run.webreport.pre.model"],function(e,t,o,i){return t.extend({"propertyPrefix":"runwebreportpre","constructor":function(n,r){e.has(r,"attributes")&&delete r.attributes,e.has(r,this.propertyPrefix)&&e.has(r[this.propertyPrefix],"attributes")&&delete r[this.propertyPrefix].attributes,t.prototype.constructor.apply(this,arguments);var s=n.getObject(o,r),l=e.extend(r.options,{"connector":s});this.property=new i({},l)}})}),csui.define("webreports/utils/commands/open.classic.webreport",["csui/lib/underscore","csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,t,o){return o.extend({"defaults":{"signature":"OpenClassicWebReport","scope":"single"},"enabled":function(e){var o=t.getJustOneNode(e);return o&&30303===o.get("type")},"getUrlQueryParameters":function(t,o){var i={"func":"ll","objAction":"RunReport","objId":t.get("id"),"nexturl":location.href};return e.has(o,"parameters")&&(i=e.extend(i,o.parameters)),i}})}),csui.define("webreports/models/run.webreport/run.webreport.model",["csui/lib/underscore","csui/lib/backbone","csui/utils/base","csui/models/mixins/connectable/connectable.mixin"],function(e,t,o,i){var n=t.Model.extend({"constructor":function(e,o){this.options=o||{},t.Model.prototype.constructor.apply(this,arguments),this.makeConnectable(this.options)},"url":function(){var t,i=this.options,n=i.id,r=this.connector,s="nodes/"+n+"/output";return e.has(i,"parameters")&&!e.isArray(i.parameters)&&e.isObject(i.parameters)&&(t=i.parameters,s=s+"?"+o.Url.combineQueryString(t)),o.Url.combine(r.connection.url,s)},"parse":function(o,i){return e.has(i,"destinationModel")?i.destinationModel.set(o.data.destination_data,i):i.destinationModel=new t.Model(o.data.destination_data),o},"clearParameters":function(){e.has(this,"options")&&e.has(this.options,"parameters")&&delete this.options.parameters}});return i.mixin(n.prototype),n}),csui.define("webreports/utils/contexts/factories/run.webreport.factory",["csui/lib/underscore","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","webreports/models/run.webreport/run.webreport.model"],function(e,t,o,i){return t.extend({"propertyPrefix":"runwrmodel","constructor":function(n,r){e.has(r,"attributes")&&delete r.attributes,e.has(r,this.propertyPrefix)&&e.has(r[this.propertyPrefix],"attributes")&&delete r[this.propertyPrefix].attributes,t.prototype.constructor.apply(this,arguments);var s=n.getObject(o,r),l=e.extend(r.options,{"connector":s});e.has(r,"parameters")&&(l=e.extend(l,{"parameters":r.parameters})),this.property=new i({},l)}})}),csui.define("webreports/controls/run.webreport.pre/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/controls/run.webreport.pre/impl/nls/root/lang",{"WebReportParameters":"WebReport Parameters","RunWebReport":"Run WebReport","Cancel":"Cancel","WebReportExecutedSuccessfully":"WebReport executed successfully","WebReportExecutingInBackground":"WebReport is executing in background","anErrorOccurredExecutingTheWebReport":"An error occurred executing the WebReport","okLabel":"OK","MissingNodeModelForThisAction":"Missing node model for this action"}),csui.define("webreports/utils/commands/execute.webreport",["csui/lib/underscore","csui/lib/jquery","csui/utils/base","csui/utils/commandhelper","csui/models/command","csui/controls/globalmessage/globalmessage","webreports/utils/contexts/factories/run.webreport.factory","i18n!webreports/controls/run.webreport.pre/impl/nls/lang"],function(e,t,o,i,n,r,s,l){return n.extend({"defaults":{"signature":"ExecuteWebReport","scope":"single"},"enabled":function(e){var t=i.getJustOneNode(e);return t&&30303===t.get("type")},"convertParametersToFormData":function(t){var o="";return e.isObject(t)&&!e.isArray(t)&&e.each(t,function(e,t,i){var n,r;n=encodeURI(t),r=encodeURI(e),o.length?o+="&"+n+"="+r:o+=n+"="+r}),o},"execute":function(i,n){var l,a,c="read",u=t.Deferred(),p=n.destinationModel,d=p.get("http_method"),m=d.toLowerCase(),h=p.get("run_in_background"),f={"attributes":{"id":n.node.get("id")},"options":{"id":n.node.get("id")}},g=e.has(n,"parameters");if(l=n.context.getModel(s,f),"get"===m)c="read",g&&e.has(l,"options")&&(l.options=e.extend(l.options,{"parameters":n.parameters}));else{switch(m){case"post":c="create";break;case"put":c="update";break;case"patch":c="patch";break;case"delete":c="delete"}g&&(a=this.convertParametersToFormData(n.parameters))}return l.sync(c,l,{"data":a,"success":function(e){if(e){var t=l.parse(e,n);l.set(t,n)}l.clearParameters(),u.resolve(arguments,l)},"error":function(e,t,i){var n=new o.Error(e);r.showMessage("error",n.message,n.errorDetails),l.clearParameters(),u.reject()}}),h&&u.resolve([{},"success"],l,!0),u.promise()}})}),csui.define("webreports/controls/run.webreport.pre/run.webreport.pre.controller",["require","csui/lib/underscore","csui/lib/jquery","csui/models/nodes","csui/utils/command.error","webreports/utils/contexts/factories/run.webreport.pre.factory","webreports/utils/commands/open.classic.webreport","webreports/utils/commands/execute.webreport","i18n!webreports/controls/run.webreport.pre/impl/nls/lang"],function(require,_,$,NodeCollection,CommandError,RunWRPreModelFactory,OpenClassicWebReport,ExecuteWebReportCommand,lang){"use strict";function RunWebReportPreController(){}return _.extend(RunWebReportPreController.prototype,{"runWRPreModel":void 0,"destinationModel":void 0,"parametersModel":void 0,"promptCheckPromise":void 0,"_getCommandStatus":function(){return void 0===this.commandStatus?{"nodes":new NodeCollection(this.options.node)}:this.commandStatus},"switchToPromptView":function(e,t){var o,i,n=this,r=$.Deferred(),s=this._getCommandStatus(),l=s.nodes;return o=s.context||t&&t.context,i=s.originatingView||t.originatingView,csui.require(["csui/lib/marionette","csui/lib/backbone","webreports/widgets/parameter.prompt.form/parameter.prompt.form.view","csui/controls/dialog/dialog.view","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/previous.node","csui/utils/contexts/factories/node","csui/widgets/nodestable/nodestable.view"],function(e,t,a,c,u,p,d,m){var h,f=o.getModel(p),g=o.getModel(u),v=o.getModel(d),b={"RunWRController":n,"model":l,"originatingView":i,"context":o,"showCloseIcon":!i,"showBackIcon":!!i};if(f.clear({"silent":!0}),f.set(v.attributes),g.clear({"silent":!0}),h=new a(b),i instanceof m){var w,y,C=i.$el;C.width();C.parent().append("<div class='wr-prompt-parameters-wrapper'></div>"),y=$(C.parent().find(".wr-prompt-parameters-wrapper")[0]),y.hide(),h.render(),e.triggerMethodOn(h,"before:show"),y.append(h.el),C.hide("blind",{"direction":"left","complete":function(){y.show("blind",{"direction":"right","complete":function(){e.triggerMethodOn(h,"show")}},100)}},100),C.promise().done(function(){i.isDisplayed=!1,r.resolve()}),w=function(){y.hide("blind",{"direction":"right","complete":function(){C.show("blind",{"direction":"left","complete":function(){i.triggerMethod("dom:refresh"),i.isDisplayed=!0,!!s.collection&&(s.collection.requireSwitched=!1)}},100),h.destroy(),y.remove(),r.resolve()}},100)},t.listenTo(h,"promptView:close",_.bind(w,n)),t.listenTo(h,"promptView:close:without:animation",function(){C.show("blind",{"direction":"left","complete":function(){i.triggerMethod("dom:refresh"),!!s.collection&&(s.collection.requireSwitched=!1)}},100),h.destroy(),y.remove(),r.resolve()})}else n.dialog=new c({"className":"wr-prompt-parameters","largeSize":!0,"view":h}),n.dialog.show(),n.dialog.ui.header.hide(),n.dialog.listenTo(h,"promptView:close",function(){n.dialog.destroy(),r.resolve()}),n.dialog.listenTo(h,"promptView:close:without:animation",function(){n.dialog.destroy(),r.resolve()})},function(e){r.reject(new CommandError(e))}),r.promise()},"_getAtLeastOneNode":function(e){return e.nodes?1===e.nodes.length&&e.collection?e.collection:e.nodes:new NodeCollection},"checkForPromptParameters":function(e){var t,o,i=this,n=$.Deferred(),r=!(!e||!_.has(e,"suppressPromptView"))&&e.suppressPromptView;return this.options=e,this._blockParentActions(),this.getRunWRPreModel(e).done(function(){t=i._checkPrompts(r),n.resolve(t)}).fail(function(){i._unblockParentActions(),i._cleanupFactory(),n.reject()}),o=n.promise(),this.promptCheckPromise=o,o},"getPromptCheckPromise":function(){return this.promptCheckPromise},"getFormView":function(e){var t,o=_.has(this,"runWRPreModel")?this.runWRPreModel:_.has(e,"promptModel")?e.promptModel:void 0,i=$.Deferred();return void 0!==o?csui.require(["csui/controls/form/form.view"],function(n){t=new n({"context":e.context,"model":o,"mode":"create"}),i.resolve(t)},function(e){i.reject()}):i.reject(),i.promise()},"executeWR":function(e){var t,o,i,n=this,r=_.extend(this.options,{"destinationModel":this.destinationModel}),s=this.destinationModel,l=s.get("output_destination");o=this._checkExecutionRoute(),"classic"===o?(this.openInClassic(e),this._unblockParentActions()):(void 0!==e&&(_.extend(e,{"prompting":"done"}),this.options.parameters=e,this._blockParentActions()),"fullpagewidget"===l?n._showOutputPerspective():(t=new ExecuteWebReportCommand,i=void 0===this.commandStatus?{"nodes":new NodeCollection(r.node)}:this.commandStatus,t.enabled(i)&&t.execute(i,this.options).done(function(e,t,o){!0===n.destinationModel.get("show_status_screen")?(n.statusScreenOptions=_.extend(n.options,{"executeModel":t,"runInBackground":o}),n.showStatusScreen()):n._unblockParentActions()}).fail(function(){n._unblockParentActions()})))},"_showOutputPerspective":function(){var e=this,t=this.options,o=t&&t.node,i=o&&o.get("id");i?csui.require(["csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/previous.node","csui/utils/contexts/factories/node"],function(t,o,n){e.previousNode=e.options.context.getModel(o),e.nextNode=e.options.context.getModel(t),e.node=e.options.context.getModel(n),e.previousNode.clear({"silent":!0}),e.previousNode.set(e.node.attributes),e.nextNode.clear({"silent":!0}),e.nextNode.set({"id":i}),e._unblockParentActions()}):console.error("Unable to get node ID for WebReport")},"openInClassic":function(e){var t,o=new OpenClassicWebReport;void 0!==e&&(_.extend(e,{"prompting":"done"}),this.options.parameters=e),void 0!==this.commandStatus?t=this.commandStatus:(o.openInNewTab=!1,t={"nodes":new NodeCollection(this.options.node)}),o.execute(t,this.options)},"getRunWRPreModel":function(e){var t=this,o=$.Deferred();return this.runWRPreModel=this.getRunWrPreFactory(e),this.runWRPreModel.fetch().done(function(e,i,n){t.destinationModel=t.runWRPreModel.destinationModel,t.parametersModel=t.runWRPreModel.parametersModel,o.resolve()}).fail(function(e,t,i){o.reject()}),o.promise()},"getRunWrPreFactory":function(e){return e.context.getModel(RunWRPreModelFactory,{"unique":!0,"attributes":{"id":e.node.get("id")},"options":{"id":e.node.get("id")}})},"additionalModelMap":{"node":{"primary":"outputData.node_id","secondary":"destination_data.destination_specific.create_in_id"},"version":{"primary":"destination_data.destination_specific.add_version_to_id"},"workflow":{"primary":"destination_data.destination_specific.workflow_map_id","secondary":"outputData.work_id"}},"_getStatusScreenModels":function(){var options=this.statusScreenOptions,outputData=options.executeModel.get("data"),destination_data=outputData.destination_data,self=this,deferred=$.Deferred();csui.require(["csui/utils/contexts/factories/node","workflow/models/workitem/workitem.model.factory"],function(NodeFactory,WorkItemModelFactory){var primaryID,secondaryID,primaryFactory,primaryNode,secondaryNode,secondaryFactory,promises=[],target=destination_data.output_destination;"node"===target&&_.has(destination_data.destination_specific,"add_version_to_id")&&(target="version"),primaryFactory=NodeFactory,secondaryFactory=NodeFactory,primaryID=eval(self.additionalModelMap[target].primary),"workflow"===destination_data.output_destination?!0===destination_data.destination_specific.workflow_attach_output?(secondaryFactory=WorkItemModelFactory,secondaryID=eval(self.additionalModelMap[target].secondary)):secondaryID=void 0:secondaryID=eval(self.additionalModelMap[target].secondary),primaryNode=options.context.getModel(primaryFactory,{"attributes":{"id":primaryID}}),promises.push(primaryNode.fetch()),void 0!==secondaryID&&(secondaryNode=options.context.getModel(secondaryFactory,{"attributes":{"id":secondaryID}}),"workflow"===destination_data.output_destination&&!0===destination_data.destination_specific.workflow_attach_output&&secondaryNode.set({"process_id":secondaryID,"subprocess_id":secondaryID,"task_id":1},{"silent":!0}),promises.push(secondaryNode.fetch())),$.whenAll.apply($,promises).then(function(e){var t,o,i;options.primaryNode=primaryNode,options.secondaryNode=secondaryNode,"workflow"===destination_data.output_destination&&!0===destination_data.destination_specific.workflow_attach_output?secondaryNode.has("data_packages")?(t=secondaryNode.get("data_packages"),_.isArray(t)&&t.length>0&&_.has(t[0],"data")&&_.has(t[0].data,"attachment_folder_id")?(o=t[0].data.attachment_folder_id,i=options.context.getModel(NodeFactory,{"attributes":{"id":o}}),i.fetch().then(function(){self.options.wfAttachmentsNode=i,self._renderStatusScreen()})):(console.warn("The dataID for the Workflow Attachments is not available."),self._unblockParentActions())):(console.warn("Could not get data packages from Workflow model."),self._unblockParentActions()):self._renderStatusScreen()})},function(e){self._unblockParentActions()})},"_renderStatusScreen":function(){var e,t,o,i=this,n=this.statusScreenOptions,r=n.destinationModel.get("destination_specific"),s=n.destinationModel.get("output_destination"),l=$.Deferred();"node"===s&&_.has(r,"add_version_to_id")&&(s="version"),e=n.destinationModel.get("run_in_background")?lang.WebReportExecutingInBackground:lang.WebReportExecutedSuccessfully,this._unblockParentActions(),csui.require(["csui/controls/dialog/dialog.view","webreports/controls/status.screen/status.screen.view"],function(r,s){t=new r({"title":e,"buttons":[{"label":lang.okLabel,"close":!0,"click":_.bind(i._onCloseStatusScreen,i)}]}),o=new s(_.extend(n,{"dialogView":t})),t.options.view=o,o.on("onClickNodeLink",_.bind(i._onCloseStatusScreen,i)).on("onClickSecondaryLink",_.bind(i._onCloseStatusScreen,i)),t.show(),l.resolve()},function(){l.reject()})},"_onCloseStatusScreen":function(){this._unblockParentActions(),this._cleanupFactory()},"showStatusScreen":function(){var e=this.statusScreenOptions,t=e.runInBackground,o=t?e.destinationModel.toJSON():e.executeModel.get("data").destination_data;!t&&o.output_destination in this.additionalModelMap?this._getStatusScreenModels():this._renderStatusScreen()},"_checkExecutionRoute":function(e){var t;switch(this.destinationModel.get("output_destination")){case"browser":case"desktop":t="classic";break;default:t="smart_ui"}return t},"_checkPrompts":function(e){var t,o,i,n,r,s="noPrompts",l=this.parametersModel,a=l.get("prompt_file_id"),c=this.runWRPreModel,u=this.destinationModel,p=u.get("output_destination"),d="fullpagewidget"===p,m=this;if(void 0!==c)if(void 0!==a&&""!==a)s="showClassicPrompts";else if(n=c.get("schema"),r=c.get("options"),void 0!==n&&void 0!==r)for(t in n.properties)if(n.properties.hasOwnProperty(t)&&(o=n.properties[t],i=r.fields[t],!1===i.hidden)){if("Custom"===o.type){s="showClassicPrompts";break}s="showSmartPrompts"}if(!e)if(d)this._unblockParentActions(),this.executeWR(this.options.parameters);else switch(s){case"showSmartPrompts":this.switchToPromptView(status,this.options).done(function(){m._unblockParentActions()});break;case"showClassicPrompts":this.openInClassic(),this._unblockParentActions();break;default:this._unblockParentActions(),this.executeWR(this.options.parameters)}return this.promptRoute=s,s},"_blockParentActions":function(){var e;_.has(this,"options")&&_.has(this.options,"originatingView")&&(e=this.options.originatingView,e&&e.blockActions&&e.blockActions(),e&&e.tableView&&e.tableView.blockActions&&e.tableView.blockActions())},"_unblockParentActions":function(){var e;_.has(this,"options")&&_.has(this.options,"originatingView")&&(e=this.options.originatingView,e&&e.unblockActions&&e.unblockActions(),e&&e.tableView&&e.tableView.unblockActions&&e.tableView.unblockActions())},"_cleanupFactory":function(){var e=this.options;_.has(e,"executeModel")&&e.executeModel.clear({"silent":!0})}}),_.extend(RunWebReportPreController,{"version":"1.0"}),RunWebReportPreController}),csui.define("webreports/utils/contexts/factories/run.webreport.pre.controller.factory",["csui/lib/underscore","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","webreports/controls/run.webreport.pre/run.webreport.pre.controller"],function(e,t,o,i){return t.extend({"propertyPrefix":"runwebreportprecontroller","constructor":function(n,r){e.has(r,"attributes")&&delete r.attributes,e.has(r,this.propertyPrefix)&&e.has(r[this.propertyPrefix],"attributes")&&delete r[this.propertyPrefix].attributes,t.prototype.constructor.apply(this,arguments);var s=n.getObject(o,r),l=e.extend(r.options,{"connector":s});this.property=new i({},l)}})}),csui.define("hbs!webreports/controls/parameter.prompt/impl/parameter.prompt.footer",["module","hbs","nuc/lib/handlebars"],function(e,t,o){var i=o.template({"1":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <button type="button" class="binf-btn binf-btn-primary csui-acc-tab-region csui-acc-focusable-active cancelPrompt">'+e.escapeExpression((r=null!=(r=s(o,"cancel")||(null!=t?s(t,"cancel"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":2,"column":119},"end":{"line":2,"column":129}}}):r))+"</button>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,o,i,n){var r,s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(r=l(o,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"showCancelButton"):t,{"name":"if","hash":{},"fn":e.program(1,n,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":3,"column":7}}}))?r:"")+'    <button type="button" class="binf-btn binf-btn-primary csui-acc-tab-region csui-acc-focusable-active submitPrompt">'+e.escapeExpression((s=null!=(s=l(o,"runReport")||(null!=t?l(t,"runReport"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"runReport","hash":{},"loc":{"start":{"line":4,"column":119},"end":{"line":4,"column":132}}}):s))+"</button>"}});return o.registerPartial("webreports_controls_parameter.prompt_impl_parameter.prompt.footer",i),i}),csui.define("webreports/controls/parameter.prompt/impl/nls/parameter.prompt.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/controls/parameter.prompt/impl/nls/root/parameter.prompt.lang",{"runReport":"Run WebReport","cancel":"Cancel","noFormFields":"There are no parameter fields to show.","defaultPromptTitle":"WebReport Parameters","ariaLabel":"WebReport Parameters"}),csui.define("css!webreports/controls/parameter.prompt/impl/parameter.prompt",[],function(){}),csui.define("webreports/controls/parameter.prompt/impl/parameter.prompt.footer.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette3","hbs!webreports/controls/parameter.prompt/impl/parameter.prompt.footer","i18n!webreports/controls/parameter.prompt/impl/nls/parameter.prompt.lang","css!webreports/controls/parameter.prompt/impl/parameter.prompt"],function(e,t,o,i,n){"use strict";return o.View.extend({"className":"webreports-parameter-prompt-footer","template":i,"templateContext":function(){return{"showCancelButton":(this.options||{}).showCancelButton,"cancel":n.cancel,"runReport":n.runReport}},"ui":{"submitPrompt":".binf-btn.binf-btn-primary.submitPrompt","cancelPrompt":".binf-btn.binf-btn-primary.cancelPrompt"},"events":{"click @ui.submitPrompt":"submitPrompt","click @ui.cancelPrompt":"cancelPrompt"},"constructor":function(e){o.View.prototype.constructor.call(this,e)},"submitPrompt":function(){var e=this.options,t=e.parentView.options.originatingView,o=e.parentView.getChildView("promptForm"),i=o?o.getValues():{},n={"view":e.parentView,"formValues":i};o&&o.validate()&&(t?t.trigger("prompt:form:submitted",n):this.trigger("prompt:form:submitted",n))},"cancelPrompt":function(){var e=this.options;e&&e.originatingView?e.originatingView.trigger("prompt:form:cancelled"):this.trigger("prompt:form:cancelled")}})}),csui.define("hbs!webreports/controls/parameter.prompt/impl/parameter.prompt",["module","hbs","nuc/lib/handlebars"],function(e,t,o){var i=o.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,o,i,n){return'<div class="webreports-parameter-prompt-form-wrapper">\r\n    <div class="webreports-parameter-prompt-form"></div>\r\n</div>\r\n<div class="webreports-parameter-prompt-footer"></div>'}});return o.registerPartial("webreports_controls_parameter.prompt_impl_parameter.prompt",i),i}),csui.define("webreports/controls/parameter.prompt/parameter.prompt.view",["csui/lib/underscore","csui/lib/marionette3","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/form/form.view","webreports/controls/parameter.prompt/impl/parameter.prompt.footer.view","hbs!webreports/controls/parameter.prompt/impl/parameter.prompt","i18n!webreports/controls/parameter.prompt/impl/nls/parameter.prompt.lang","css!webreports/controls/parameter.prompt/impl/parameter.prompt"],function(e,t,o,i,n,r,s){"use strict";return t.View.extend({"className":"webreports-parameter-prompt-content","template":r,"wrapTemplate":!1,"regions":{"promptForm":{"el":".webreports-parameter-prompt-form","replaceElement":!1},"footer":{"el":".webreports-parameter-prompt-footer","replaceElement":!0}},"behaviors":{"PerfectScrolling":{"behaviorClass":o,"contentParent":".webreports-parameter-prompt-form-wrapper","suppressScrollX":!0,"scrollYMarginOffset":15}},"constructor":function(e){t.View.prototype.constructor.call(this,e)},"onRender":function(){var e=this.options,o="showSmartPrompts"!==e.promptRoute,r=new i({"context":e.context,"model":this.model}),l=new n({"context":e.context,"parentView":this,"model":this.model}),a=new t.View({"template":!1,"el":'<div class="csui-no-result-message">'+s.noFormFields+"</div>"}),c=o?a:r;this.showChildView("promptForm",c),o||this.showChildView("footer",l)}})}),csui.define("hbs!webreports/controls/parameter.prompt/impl/parameter.prompt.tile.view",["module","hbs","nuc/lib/handlebars"],function(e,t,o){var i=o.template({"1":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="tile-type-icon">\r\n            <span class="icon title-icon '+e.escapeExpression((r=null!=(r=s(o,"icon")||(null!=t?s(t,"icon"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":5,"column":41},"end":{"line":5,"column":49}}}):r))+'" aria-hidden="true"></span>\r\n        </div>\r\n'},"3":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(r=s(o,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"imageUrl"):t,{"name":"if","hash":{},"fn":e.program(4,n,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":8},"end":{"line":12,"column":15}}}))?r:""},"4":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="tile-type-image '+e.escapeExpression((r=null!=(r=s(o,"imageClass")||(null!=t?s(t,"imageClass"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"imageClass","hash":{},"loc":{"start":{"line":9,"column":40},"end":{"line":9,"column":54}}}):r))+'">\r\n                <span class="tile-type-icon tile-type-icon-img"><img src="'+e.escapeExpression((r=null!=(r=s(o,"imageUrl")||(null!=t?s(t,"imageUrl"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"imageUrl","hash":{},"loc":{"start":{"line":10,"column":74},"end":{"line":10,"column":86}}}):r))+'" alt="" aria-hidden="true"></span>\r\n            </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,o,i,n){var r,s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tile-header">\r\n\r\n'+(null!=(r=l(o,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"icon"):t,{"name":"if","hash":{},"fn":e.program(1,n,0),"inverse":e.program(3,n,0),"loc":{"start":{"line":3,"column":4},"end":{"line":13,"column":11}}}))?r:"")+'\r\n    <div class="tile-title" >\r\n        <h2 class="csui-heading">'+e.escapeExpression((s=null!=(s=l(o,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":16,"column":33},"end":{"line":16,"column":42}}}):s))+'</h2>\r\n    </div>\r\n\r\n    <div class="tile-controls" title="'+e.escapeExpression((s=null!=(s=l(o,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":19,"column":38},"end":{"line":19,"column":47}}}):s))+'"></div>\r\n\r\n</div>\r\n\r\n<div class="tile-content"></div>\r\n\r\n<div class="tile-footer"></div>\r\n'}});return o.registerPartial("webreports_controls_parameter.prompt_impl_parameter.prompt.tile.view",i),i}),csui.define("webreports/controls/parameter.prompt/parameter.prompt.tile.view",["csui/lib/underscore","csui/lib/jquery","csui/utils/base","csui/controls/tile/tile.view","webreports/controls/parameter.prompt/parameter.prompt.view","hbs!webreports/controls/parameter.prompt/impl/parameter.prompt.tile.view","i18n!webreports/controls/parameter.prompt/impl/nls/parameter.prompt.lang"],function(e,t,o,i,n,r,s){"use strict";return i.extend({"templateHelpers":function(){var t=this.options,i=!!(t&&e.has(t,"originatingView")&&e.has(t.originatingView,"options"))&&t.originatingView.options,n=i&&e.has(i,"data")&&e.has(i.data,"title")&&e.isObject(i.data.title)?i.data.title:s.defaultPromptTitle,r=i&&e.has(i,"data")&&e.has(i.data,"titleBarIcon")?i.data.titleBarIcon:"title-webreports";return{"title":o.getClosestLocalizedString(n,s.dialogTitle),"icon":r||"title-webreports"}},"template":r,"contentView":n,"constructor":function(e){this.contentViewOptions=e,i.prototype.constructor.call(this,e)}})}),csui.define("hbs!webreports/controls/parameter.prompt/impl/widget.prompt.wrapper",["module","hbs","nuc/lib/handlebars"],function(e,t,o){var i=o.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,o,i,n){return'<div class="webreports-widget-prompt-wrapper-content"></div>'}});return o.registerPartial("webreports_controls_parameter.prompt_impl_widget.prompt.wrapper",i),i}),csui.define("webreports/controls/parameter.prompt/widget.prompt.wrapper.view",["csui/lib/underscore","csui/lib/marionette3","csui/lib/backbone","csui/lib/jquery","csui/models/node/node.model","csui/controls/progressblocker/blocker","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","webreports/utils/general.utils","webreports/utils/url.webreports","webreports/mixins/webreports.view.mixin","webreports/utils/contexts/factories/run.webreport.pre.controller.factory","webreports/controls/parameter.prompt/parameter.prompt.tile.view","hbs!webreports/controls/parameter.prompt/impl/widget.prompt.wrapper"],function(e,t,o,i,n,r,s,l,a,c,u,p,d){var m=t.View.extend({"template":d,"wrapTemplate":!1,"regions":{"content":{"el":".webreports-widget-prompt-wrapper-content","replaceElement":!0}},"ui":{"showParametersBtn":".webreports-visual-count-btn-parameters","tileHeader":".tile-header"},"events":{"click @ui.showParametersBtn":"onShowParameterPromptView","keyup @ui.showParametersBtn":"onShowParameterPromptView","keydown .cs-go-back":"onKeyInView","click .cs-go-back":"onBackButton"},"constructor":function(e){var o,i,r=this,s="showPromptForm"===e.data.parameterPrompt||e.data.outputDestination&&"fullpagewidget"===e.data.outputDestination;if(this.showPrompt=s,this.widgetView=e.view,s){i=new n({"id":e.data.id,"type":30303}),o={"node":i,"context":e.context,"suppressPromptView":!0,"originatingView":this};this._getPromptView(o,e).done(function(e){e?(r.promptOptions=e,
r.listenTo(r,"prompt:form:submitted",r.onPromptFormSubmitted),r._showParameterPromptView()):(r._showWidgetView(),r._fetchWidgetFactory())}).fail(function(e){r.promptOptions=e,r._showParameterPromptView()})}t.View.prototype.constructor.apply(this,arguments),this.listenTo(this,"factory:fetched:after:prompt",this._showParameterBtn)},"templateContext":function(){return{"showPrompt":this.showPrompt}},"onShowParameterPromptView":function(e){return"click"!==e.type&&("keyup"!==e.type||13!==e.keyCode&&32!==e.keyCode)||(e.stopPropagation(),this.trigger("edit:prompt:clicked"),this._showParameterPromptView()),!1},"_showParameterPromptView":function(){var t,o=this.promptOptions;o&&(e.has(o.originatingView,"formValues")&&o.model.set({"data":o.originatingView.formValues}),t=new p(o),this.showChildView("content",t),this.propagateEventsToViews(t))},"_createWidgetView":function(){var t,o=this.widgetView;return t=e.extend(this.options,{"originatingView":this}),new o(t)},"_showWidgetView":function(){var e=this._createWidgetView();this.showChildView("content",e),this.propagateEventsToViews(e)},"_fetchWidgetFactory":function(){var e,t=this.getContentViewFactory();return t?e=t.fetch():console.error("Could not find the factory for widget."),e},"getContentViewFactory":function(){var e,t=this.getChildView("content");return t&&(e=t.getFactory()),e},"_getPromptView":function(t,o){var n=l.isWebReportNodeContext(o.context),r={"detached":!0,"unique":!n,"attributes":{"id":t.node.get("id")},"options":{"id":t.node.get("id")}},s=o.context.getObject(u,r),c=s.getPromptCheckPromise(),p=i.Deferred();return c&&n?(o&&o.data&&!o.data.parameters&&(o.data.parameters=[]),e.extend(o.data.parameters,a.getDataAsWebReportParameters(s.options.parameters))):c=s.checkForPromptParameters(t),t.model=s.runWRPreModel,i.when(c).then(function(e){"showSmartPrompts"===e?(t.promptRoute=e,o.data.parameterPrompt="showPromptForm",p.resolve(t)):p.resolve()},function(){p.reject(t)}),p.promise()},"_mergeParametersIntoOptions":function(t){var o=this.options||{};this.formValues=e.mapObject(t.formValues,function(t,o){return e.isNaN(t)&&(t=null),t}),o.data.parameters=e.has(o,"data")&&e.has(o.data,"parameters")&&e.isArray(o.data.parameters)?o.data.parameters:[],e.extend(o.data.parameters,a.getDataAsWebReportParameters(this.formValues))},"_showParameterBtn":function(){var e=this.$el.find(".webreports-widget-parameters-btn.binf-hidden");e&&e.removeClass("binf-hidden")},"onPromptFormSubmitted":function(e){this._mergeParametersIntoOptions(e),this._showWidgetView();var t=this._fetchWidgetFactory();this.trigger("factory:fetched:after:prompt",{"promise":t})},"onRender":function(){this.showPrompt?this._showParameterPromptView():this._showWidgetView()},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||this.onBackButton()},"onBackButton":function(){var e=this.options.context,t=e&&e.viewStateModel;t&&t.restoreLastFragment()}});return c.mixin(m.prototype),e.extend(m.prototype,s),m}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/impl/expanding.behavior",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/tile/behaviors/expanding.behavior"],function(e,t,o,i,n,r){"use strict";function s(e){var t=this.options||{},i=t[e];return o.isFunction(i)?t[e].call(this.view):i}return r.extend({"triggers":{"click .cs-more":"expand"},"_expand":function(){if(this.view&&this.view.chartCollection&&!this.view.chartCollection.isEmpty()){var n=this.getOption("expandedView"),r=n.prototype instanceof i.View?n:n.call(this.view),l=["csui/controls/dialog/dialog.view"],a=this;o.isString(r)&&l.push(r),e(l,function(e){o.isString(r)&&(r=arguments[1]);var i=s.call(a,"expandedViewOptions"),n=new r(i);a._dialog=new e({"iconLeft":s.call(a,"titleBarIcon"),"imageLeftUrl":s.call(a,"titleBarImageUrl"),"imageLeftClass":s.call(a,"titleBarImageClass"),"title":s.call(a,"dialogTitle"),"iconRight":s.call(a,"dialogTitleIconRight"),"className":"cs-expanded "+(s.call(a,"dialogClassName")||""),"buttons":i.buttons,"largeSize":!0,"view":n}),a.listenTo(a._dialog,"hide",function(){a.view.trigger("collapse"),a.triggerMethod("collapse")}),a.view.overlayVisible&&a.view.ui.toggleSettings.trigger("click"),a._dialog.show(),t(".webreports-visual-count-facetpanelview .cs-content .csui-facet-item-checkbox button",".webreports-visual-data.binf-modal .binf-modal-content").attr("tabindex","-1")})}}})}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/impl/visual.count.button.view",["csui/lib/marionette3","csui/lib/underscore","csui/behaviors/keyboard.navigation/tabable.region.behavior"],function(e,t,o){return e.View.extend({"tagName":"button","className":"binf-btn","template":t.noop,"triggers":{"click":"click:button"},"behaviors":{"TabableRegion":{"behaviorClass":o}},"constructor":function(t){e.View.prototype.constructor.apply(this,arguments)},"isTabable":function(){return"-1"===this.$el.attr("tabindex")&&this.$el.attr("tabindex","0"),this.$el.is(":not(:disabled)")&&this.$el.is(":not(:hidden)")},"currentlyFocusedElement":function(){return-1===this.$el.prop("tabindex")&&this.$el.prop("tabindex",0),this.$el},"onRender":function(){var e=this.$el,t=this.model.attributes;e.text(t.name),e.addClass(t.default?"binf-btn-primary cs-add-button":"binf-btn-default"),t.toolTip&&e.attr("title",t.toolTip),t.id&&e.attr("id",t.id),t.separate&&e.addClass("cs-separate"),this.updateButton(t)},"updateButton":function(e){var t=this.$el;e||(e={}),void 0!==e.hidden&&(e.hidden?t.addClass("binf-hidden"):t.removeClass("binf-hidden")),void 0!==e.disabled&&t.prop("disabled",e.disabled)}})}),csui.define("hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/impl/visual.count",["module","hbs","nuc/lib/handlebars"],function(e,t,o){var i=o.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,o,i,n){return'<div class="webreports-visual-count">\r\n    <div class="webreports-visual-count-facet-table-container">\r\n        <div class="webreports-visual-count-facetpanelview"></div>\r\n        \x3c!--outer div is needed in order to float table contents right to accommodate  facets--\x3e\r\n        <div class="webreports-visual-count-outertablecontainer">\r\n            \x3c!--inner div is needed in order to have tableview sized to remaining height of container--\x3e\r\n            <div class="webreports-visual-count-innertablecontainer">\r\n                <div class="webreports-visual-count-facetbarview"></div>\r\n                <div class="webreports-visual-count-controls-parent"></div>\r\n                <div class="webreports-visual-count-chart"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="webreports-visual-count-footer"></div>\r\n</div>\r\n'}});return o.registerPartial("webreports_widgets_visual.data.filtered.count_impl_controls_visual.count_impl_visual.count",i),i}),csui.define("css!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/impl/visual.count",[],function(){}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/impl/visual.count.footer.view",["csui/lib/marionette3","csui/lib/backbone","csui/lib/underscore","csui/utils/commands","webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/impl/visual.count.button.view","hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/impl/visual.count","css!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/impl/visual.count"],function(e,t,o,i,n,r){return e.CollectionView.extend({"className":"webreports-visual-count-footer binf-modal-footer","template":r,"childView":n,"constructor":function(t){this.collection=this._createCommandCollection(t),e.CollectionView.prototype.constructor.apply(this,arguments)},"_createCommandCollection":function(e){var i,n=e.toolbarItems;if(n&&o.has(n,"footer")){if(i=n.footer.collection){var r=i.findWhere({"signature":"disabled"});r&&i.remove(r)}}else i=new t.Collection;return i},"onChildviewClickButton":function(e){var t=this.options,o=t.originatingView;if(!o)throw"VisualCountView requires an originatingView if buttons are used";o.trigger("button:clicked",e,t)}})}),csui.define("webreports/widgets/visual.data.filtered.count/impl/models/mixins/visual.count/client.collection/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/visual.data.filtered.count/impl/models/mixins/visual.count/client.collection/nls/root/lang",{"other":"Other","noValue":"(No value)"}),csui.define("webreports/widgets/visual.data.filtered.count/impl/models/mixins/visual.count/client.collection/chart.collection.client.mixin",["csui/lib/underscore","csui/lib/d3","i18n!webreports/widgets/visual.data.filtered.count/impl/models/mixins/visual.count/client.collection/nls/lang"],function(e,t,o){"use strict";return{"mixin":function(i){return e.extend(i,{"nest":function(t,o){var i,n,r,s=[],l={},a={},c=this.columnCollection.getCountColumn(),u=o+"_formatted",p=c+"_formatted";return e.each(t,e.bind(function(t){n=this._removeEmptyValues(t[o]),i=e.findIndex(s,function(e){return e[o]===n}),-1===i?(l[o]=n,l[u]=n.toString(),l[c]=1,l[p]="1",s.push(l),l={}):(a=s[i],r=a[c],r+=1,a[c]=r,a[p]=r.toString(),s[i]=a)},this)),s},"filterBy":function(t,o){function i(e){var t,o=this._removeEmptyValues(e[n]);switch(s){case"==":t=o===r;break;case"IN":t=-1!==r.indexOf(o);break;default:t=-1!==r.indexOf(o)}return t}var n=null,r=null,s=null;return e.each(o,e.bind(function(o){r=this._removeEmptyValues(o.value),n=o.column,s=o.operator,t=t.filter(e.bind(i,this))},this)),t},"sortNest":function(e,o){var i,n,r=this.columnCollection.getActiveColumn(),s=this.columnCollection.getCountColumn(),l=[];return i=o.sortBy,n=o.sortOrder,e=e.sort(function(e,o){switch(i.toLowerCase()){case"ordinal":l=isNaN(e[r])?t.ascending(e[r],o[r]):e[r]-o[r];break;case"count":l=e[s]-o[s]}return l}),"asc"===n?e:e.reverse()},"groupOutlyingValues":function(t,i){if(t.length>i+1&&i>-1){var n=this.columnCollection.getActiveColumn(),r=this.columnCollection.getCountColumn(),s=t.slice(0,i),l=t.slice(i),a=e.pluck(l,r),c=e.reduce(a,function(e,t){return e+t},0),u={};return u[n]="ga_other",u[n+"_formatted"]=o.other,u[r]=c,u[r+"_formatted"]=c.toString(),s.push(u),s}return t},"_removeEmptyValues":function(e){return null===e||""===e||void 0===e?o.noValue:e}})}}}),csui.define("webreports/widgets/visual.data.filtered.count/impl/models/mixins/visual.count/filterable/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/visual.data.filtered.count/impl/models/mixins/visual.count/filterable/nls/root/lang",{"other":"Other"}),csui.define("webreports/widgets/visual.data.filtered.count/impl/models/mixins/visual.count/filterable/filterable.mixin",["csui/lib/underscore","csui/lib/backbone","csui/models/facets","csui/models/facettopics","webreports/utils/general.utils","i18n!webreports/widgets/visual.data.filtered.count/impl/models/mixins/visual.count/filterable/nls/lang"],function(e,t,o,i,n,r){"use strict";return{"mixin":function(s){return e.extend(s,{"makeFilterable":function(){this.facetCollection=new o,this.facetCollection.filters=[]},"setFacetData":function(o){var s=[],l=this.columnCollection.toJSON(),a=e.findWhere(l,{"active_column":!0}),c=a.name,u=this.facetCollection.findWhere({"id":a.id}),p=!e.isUndefined(u),d=!e.isUndefined(e.findWhere(this.facetCollection.filters,{"id":a.id})),m=this.columnCollection.getCountColumn(),h={},f={};if((!p||p&&!d)&&(h[a.id]=e.map(o,e.bind(function(e){var t=n.getCaseInsensitiveProperty(e,a.name+"_formatted"),o=n.getCaseInsensitiveProperty(e,c);return{"name":t||o,"value":null===o?"":o.toString(),"valueNative":o,"total":e[m],"percentage":this.getPercentageOfTotal(e[m])}},this)),h[a.id]=e.reject(h[a.id],function(e){return e.name===r.other}),s[0]=h,e.each(l,function(e){f[e.id]=e}),e.each(s,e.bind(function(o){var n=e.keys(o)[0],r=o[n]||[];({})[n]=f[n],f[n].name=f[n].name_formatted,u=new t.Model(f[n]),u.topics=new i(r),u.set({"topics":r,"total_displayable":r.length,"items_to_show":10})},this))),u=this._setAsSelected(u),u.topics.reset(u.get("topics")),this.facetCollection){var g=this._getOtherFilteredFacets();g.push(u),this.facetCollection.reset(g)}else this.makeFilterable()},"getFCFilters":function(){return this.unMapFilterData()},"getFacetFilters":function(){return this.facetCollection.filters},"setFacetFilters":function(e){e=e||[],this.facetCollection.filters||(this.facetCollection.filters=this.mapFilterData(e),this.facetCollection.trigger("reset"))},"mapFilterData":function(t){return e.map(t,function(e){return{"id":e.column.toString(),"values":[{"id":e.value.toString()}]}})},"unMapFilterData":function(){var t=[],o=this,i=this.getFacetFilters();return i.length>0&&e.each(i,function(i){var n=o.columnCollection.findWhere({"id":i.id}),r=e.map(i.values,function(e){return e.id});r=o.resolveToActualValues(i.id,r);var s={"column":n.get("name"),"operator":"IN","value":r};t.push(s)}),t},"getTotalCount":function(){var t=this.filteredData,o=this.columnCollection.getCountColumn();return e.reduce(t,function(e,t){return e+t[o]},0)},"getPercentageOfTotal":function(e){return e/this.getTotalCount()*100},"getActualColumnName":function(e){var t=e,o=this.columnCollection,i=o.findWhere({"name_formatted":e});return i&&i.get("name")!==i.get("name_formatted")&&(t=i.get("name")),t},"onFiltersUpdated":function(){this.grouped_on_server?this.fetch():(this.set(this.sortGroupAndFilter()),this.facetCollection.trigger("reset"))},"resolveToActualValues":function(t,o){var i,n=[],r=this._getFacetTopicCollection(t);return r?(e.each(o,function(e){i=r.findWhere({"value":e}),n.push(i.get("valueNative"))}),n):o},"_getFacetTopicCollection":function(e){return this.facetCollection.findWhere({"id":e}).topics},"_setAsSelected":function(t){var o=[],i=t.get("id"),n=this.facetCollection.filters,r=t.get("topics");return e.each(r,function(t){var r=e.filter(n,function(e){return e.id===i});if(r.length>0){var s=!e.isUndefined(e.findWhere(r[0].values,{"id":t.value}));!0===s&&(t.selected=s,t.count=null,t.percentage=null,o.push(t))}else o.push(t)}),t.set({"topics":o}),t},"_getOtherFilteredFacets":function(){var t=this.columnCollection.findWhere({"active_column":!0}),o=this.facetCollection.filters;return this.facetCollection.filter(function(i){return i.get("id")!==t.get("id")&&e.findWhere(o,{"id":i.get("id")})})}})}}}),csui.define("webreports/widgets/visual.data.filtered.count/impl/models/mixins/visual.count/postable/postable.mixin",["csui/lib/underscore","webreports/utils/url.webreports"],function(e,t){"use strict";return{"mixin":function(o){var i=o.fetch;return o.fetch=function(t){t||(t={});var o,n={"format":"webreport","method":"GET"},r=this.getFilteredCountQuery(t);return n=e.extend(n,r),o={"type":"POST","data":n},t?e.extend(t,o):t=o,i.call(this,t)},e.extend(o,{"getFilteredCountQuery":function(o){var i={},n=this.options.context||void 0,r=t.getCurrentContainerID(n),s=this.options.parameters||[],l=t.getWebReportParametersAsData(s);return e.isUndefined(r)||(i=e.extend(i,{"csuiContainerID":r})),e.extend(i,l,this.getFilteredCountParms()),i},"getFilteredCountParms":function(){var t={};return t.filterable=!0===this.options.filterable,t.expandable=!0===this.options.expandable,e.extend(t,this.chartControlsModel.attributes),"ordinal"===t.sort_by&&(t.sort_by=t.active_column),t.fc_filters=JSON.stringify(this.getFCFilters()),t.total_count=this.getTotalCount(),t}})}}}),csui.define("webreports/widgets/visual.data.filtered.count/impl/models/visual.count/chart.collection/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/visual.data.filtered.count/impl/models/visual.count/chart.collection/nls/root/lang",{"noValue":"(No value)","invalidActiveColumn":"An invalid Active Column was specified."}),csui.define("webreports/widgets/visual.data.filtered.count/impl/models/visual.count/chart.collection/chart.collection",["csui/lib/underscore","csui/lib/backbone","csui/dialogs/modal.alert/modal.alert","csui/models/mixins/connectable/connectable.mixin","webreports/widgets/visual.data.filtered.count/impl/models/mixins/visual.count/client.collection/chart.collection.client.mixin","webreports/widgets/visual.data.filtered.count/impl/models/mixins/visual.count/filterable/filterable.mixin","webreports/widgets/visual.data.filtered.count/impl/models/mixins/visual.count/postable/postable.mixin","webreports/utils/general.utils","i18n!webreports/widgets/visual.data.filtered.count/impl/models/visual.count/chart.collection/nls/lang","csui/utils/deepClone/deepClone"],function(e,t,o,i,n,r,s,l,a){var c=t.Collection.extend({"constructor":function(o,i){t.Collection.prototype.constructor.apply(this,arguments),e.isUndefined(i)&&(i={}),i&&i.id&&!this.id&&(this.id=i.id),this.options=i,this.makeConnectable(i),this.makeFilterable(i)},"url":function(){return this.connector.connection.url+"/nodes/"+this.id+"/output"},"parse":function(e){return e.data&&e.data.length>0?(this.grouped_on_server=e.grouped_on_server||!1,this.sorted_on_server=e.sorted_on_server||!1,this.setColumns(e.columns),this.setFacetFilters(e.fc_filters),this._isResponseValid(e)?(e.grouped_on_server?this.groupedData=e:this.rawCollection=e.data,this.sortGroupAndFilter(),this.filteredData):void 0):[]},"_isResponseValid":function(e){var t=!0;return e.grouped_on_server||this._isActiveColumnValid(e)||(o.showError(a.invalidActiveColumn),t=!1),t},"_isActiveColumnValid":function(t){return!e.isUndefined(l.getCaseInsensitiveProperty(e.first(t.data),this.columnCollection.getActiveColumn()))},"filteredData":{},"rawCollection":{},"getSortOptions":function(){return{"sortBy":this.chartControlsModel.get("sort_by"),"sortOrder":this.chartControlsModel.get("sort_order")}},"getGroupAfter":function(){return this.chartControlsModel.get("group_after")},"setColumns":function(t){var o=e.findWhere(t,{"active_column":!0}),i=e.findWhere(t,{"count_column":!0});(!o||!i)&&(t=e.map(t,e.bind(function(e){return this.options.activeColumn&&e.name.toLowerCase()===this.options.activeColumn.toLowerCase()&&(e.active_column=!0),this.options.countColumn&&e.name.toLowerCase()===this.options.countColumn.toLowerCase()&&(e.active_column=!0),e},this))),e.each(t,function(e){e.id=e.id.toString()}),this.columnCollection.set(t)},"sortGroupAndFilter":function(e){var t,o;return this.grouped_on_server?(t=this.groupedData.data,(!this.sorted_on_server||e&&e.sort)&&(t=this.sortNest(t,this.getSortOptions()))):(o=this.nest(this.filterBy(this.rawCollection,this.getFCFilters()),this.columnCollection.getActiveColumn()),t=this.groupOutlyingValues(this.sortNest(o,this.getSortOptions()),this.getGroupAfter())),t=this._checkGroupedCategory(t),this.filteredData=t,this.setFacetData(t),t},"_checkGroupedCategory":function(e){var t=this._findGroupedCategory(e);return t&&(t.grouped_category=!0),e},"_findGroupedCategory":function(t){var o={};return o[this.columnCollection.getActiveColumn()]="ga_other",e.findWhere(t,o)},"onChartOptionsUpdated":function(t){var o=0===e.keys(e.omit(t,["sort_by","sort_order","view_value_as_percentage","theme_name"])).length,i=this.grouped_on_server&&!o;e.has(t,"column_names")||(i?this.fetch():o?this.set(this.sortGroupAndFilter({"sort":!0})):(e.has(t,"active_column")&&this.columnCollection.updateActiveColumn(t.active_column),this.set(this.sortGroupAndFilter())))}});return i.mixin(c.prototype),n.mixin(c.prototype),r.mixin(c.prototype),s.mixin(c.prototype),c}),csui.define("webreports/widgets/visual.data.filtered.count/impl/models/visual.count/column.collection/column.model",["csui/lib/backbone"],function(e){return e.Model.extend({"defaults":{"active_column":!1,"client_format":{"type":"none"},"column_key":"","count_column":!1,"data_type":10,"id":void 0,"name":"","tag_format":""},"constructor":function(t,o){e.Model.prototype.constructor.apply(this,arguments)}})}),csui.define("webreports/widgets/visual.data.filtered.count/impl/models/visual.count/column.collection/column.collection",["csui/lib/backbone","csui/lib/underscore","webreports/widgets/visual.data.filtered.count/impl/models/visual.count/column.collection/column.model"],function(e,t,o){return e.Collection.extend({"constructor":function(t,o){e.Collection.prototype.constructor.apply(this,arguments)},"model":o,"getActiveColumn":function(){var e,t;return t=this.findWhere({"active_column":!0}),t&&(e=t.get("name")),e},"getActiveColumnFormatted":function(){var e,t;return t=this.findWhere({"active_column":!0}),t&&(e=t.get("name_formatted")),e},"getCountColumn":function(){var e,t;return t=this.findWhere({"count_column":!0}),t&&(e=t.get("name")),e},"getCountColumnFormatted":function(){var e,t;return t=this.findWhere({"count_column":!0}),t&&(e=t.get("name_formatted")),e},"updateActiveColumn":function(e){var o=this.models;t.each(o,function(t){!0===t.get("active_column")&&t.get("name")!==e&&t.set({"active_column":!1}),t.get("name")===e&&t.set({"active_column":!0})}),this.set(o)}})}),csui.define("webreports/widgets/visual.data.filtered.count/impl/utils/contexts/factories/visual.count.collection.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","webreports/widgets/visual.data.filtered.count/impl/models/visual.count/chart.collection/chart.collection","webreports/widgets/visual.data.filtered.count/impl/models/visual.count/column.collection/column.collection"],function(e,t,o,i,n,r,s){return i.extend({"propertyPrefix":"webreportsVisualCount","constructor":function(l,a){i.prototype.constructor.apply(this,arguments);var c=l.getObject(n,a);a.connector=c;var u=this.options.webreportsVisualCount||{};if(!(u instanceof o.Collection)){var p=e.config();u=new r(u.models,t.extend({"connector":c},u.attributes,p.options,{"autoreset":!0}));(this.options.columnCollection||{})instanceof o.Collection||(u.columnCollection=new s)}this.property=u},"fetch":function(e){return e=t.extend({"headers":{}},e),t.extend(e.headers,{"X-OriginParams":location.search}),this.property.fetch(e)}})}),csui.define("webreports/widgets/visual.data.filtered.count/impl/models/visual.count/chart.controls/chart.controls.model",["csui/lib/backbone","csui/lib/underscore"],function(e,t){return e.Model.extend({"defaults":{"active_column":"","active_column_formatted":"","theme_name":"","count_column":"","column_names":[],"column_names_formatted":[],"sort_by":"Count","sort_order":"desc","view_value_as_percentage":!1,"group_after":10},"constructor":function(t,o){e.Model.prototype.constructor.apply(this,arguments)},"updateColumnData":function(e){var o=e.filter(function(e){return!0!==e.get("count_column")});this.set({"column_names_formatted":t.map(o,function(e){return e.get("name_formatted")||e.get("name")}),"column_names":t.map(o,function(e){return e.get("name")}),"active_column":e.getActiveColumn(),"active_column_formatted":e.getActiveColumnFormatted(),"count_column":e.getCountColumn(),"count_column_formatted":e.getCountColumnFormatted()})}})}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/control.options.view",["csui/lib/marionette3","csui/lib/underscore"],function(e,t){"use strict";return e.View.extend({"tagName":"option","template":t.noop,"className":"webreports-visual-count-controls-option","constructor":function(t){e.View.prototype.constructor.apply(this,arguments)},"attributes":function(){var e=this.model;return{"value":e.get("value"),"selected":e.get("selected")}},"onRender":function(){this.$el.text(this.model.get("label"))}})}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/controls.select.view",["csui/lib/marionette3","csui/lib/underscore","webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/control.options.view"],function(e,t,o){return e.CollectionView.extend({"className":"webreports-visual-count-controls-select","tagName":"select","template":t.noop,"attributes":function(){return{"name":this.model.get("name"),"id":this.model.get("id")}},"events":{"change":"onOptionChanged"},"constructor":function(t){this.model=t.model,e.CollectionView.prototype.constructor.apply(this,arguments)},"childView":o,"onOptionChanged":function(){var e=this.model,t=this.options.originatingView,o=this.collection,i=this.$el.val();t.trigger("option:changed",{"selectModel":e,"optionCollection":o,"value":i})}})}),csui.define("hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/controls.list.item",["module","hbs","nuc/lib/handlebars"],function(e,t,o){var i=o.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<label for="'+e.escapeExpression((r=null!=(r=s(o,"id")||(null!=t?s(t,"id"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":1,"column":12},"end":{"line":1,"column":18}}}):r))+'">'+e.escapeExpression((r=null!=(r=s(o,"label")||(null!=t?s(t,"label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":1,"column":20},"end":{"line":1,"column":29}}}):r))+'</label>\r\n<select name="'+e.escapeExpression((r=null!=(r=s(o,"name")||(null!=t?s(t,"name"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":2,"column":14},"end":{"line":2,"column":22}}}):r))+'" id="'+e.escapeExpression((r=null!=(r=s(o,"id")||(null!=t?s(t,"id"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":2,"column":28},"end":{"line":2,"column":34}}}):r))+'" class="webreports-visual-count-controls-select"></select>'}});return o.registerPartial("webreports_widgets_visual.data.filtered.count_impl_controls_visual.count.tile_visual.count.controls_impl_controls.list.item",i),i}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/controls.list.item.view",["csui/lib/marionette3","csui/lib/backbone","csui/lib/underscore","webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/controls.select.view","hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/controls.list.item"],function(e,t,o,i,n){"use strict";return e.View.extend({"tagName":"li","template":n,"className":"webreports-visual-count-controls-list-item","constructor":function(t){e.View.prototype.constructor.apply(this,arguments)},"regions":{"selectList":{"el":".webreports-visual-count-controls-select","replaceElement":!0}},"templateContext":function(){var e=this.model;return{"id":e.get("id"),"label":e.get("label"),"name":e.get("name")}},"onRender":function(){this.showChildView("selectList",new i({"originatingView":this.options.originatingView,"collection":new t.Collection(this.model.get("options")),"model":this.model}))}})}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/controls.list.view",["csui/lib/marionette3","webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/controls.list.item.view"],function(e,t){"use strict";return e.CollectionView.extend({"tagName":"ul","className":"webreports-visual-count-controls-list","childView":t,"childViewOptions":function(){return{"originatingView":this.options.originatingView}},"constructor":function(t){e.CollectionView.prototype.constructor.apply(this,arguments)}})}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/nls/root/lang",{"activeColumn":"Active column","sortBy":"Sort by","count":"Count","asc":"asc","desc":"desc","showValuesAs":"Show values as","groupAfter":"Group after","actual":"Actual","percentage":"Percentage","theme":"Theme","OTPrimary":"Evening 10","OTSecondary":"Coral 10","OTTertiary":"Garden 10","DataClarity":"Clarity 20","DataClarityPatterned":"Patterned 20","OTNavy":"Navy 6","OTTeal":"Teal 6","OTIndigo":"Indigo 6","OTPlum":"Plum 6","OTMagenta":"Magenta 6"}),csui.define("hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/visual.count.controls",["module","hbs","nuc/lib/handlebars"],function(e,t,o){var i=o.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,o,i,n){return'<div class="webreports-visual-count-control-group webreports-controls-lhs"></div>\r\n<div class="webreports-visual-count-control-group webreports-controls-rhs"></div>\r\n'}});return o.registerPartial("webreports_widgets_visual.data.filtered.count_impl_controls_visual.count.tile_visual.count.controls_impl_visual.count.controls",i),i}),csui.define("css!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/visual.count.controls",[],function(){}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/visual.count.controls.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette3","csui/lib/backbone","webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/controls.list.view","webreports/widgets/visual.data.filtered.count/impl/models/visual.count/chart.controls/chart.controls.model","i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/nls/lang","hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/visual.count.controls","css!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/impl/visual.count.controls"],function(e,t,o,i,n,r,s,l){return o.View.extend({"className":"webreports-visual-count-controls","constructor":function(e){if(e.model||(e.model=new r({"vis_type":e.type,"active_column":e.activeColumn,"theme_name":e.themeName,"sort_by":e.sortBy||"Count","sort_order":e.sortOrder||"desc","view_value_as_percentage":e.viewValueAsPercentage,"group_after":e.groupAfter})),!e.chartCollection)throw"VisualCountControlsView requires a chart collection";if(this.chartCollection=e.chartCollection,this.chartCollection.chartControlsModel=e.model,!e.columnCollection)throw"VisualCountControlsView requires a columns collection";this.columnCollection=e.columnCollection,o.View.prototype.constructor.apply(this,arguments),this.listenTo(e.columnCollection,"update",this.onColumnsChanged),this.listenTo(this,"option:changed",this.onOptionChanged)},"regions":{"leftControls":{"el":".webreports-visual-count-control-group.webreports-controls-lhs"},"rightControls":{"el":".webreports-visual-count-control-group.webreports-controls-rhs"}},"template":l,"onRender":function(){var e=this._getLHSOptionsCollection(),t=this._getRHSOptionsCollection();this.model.get("column_names").length>1&&this.showChildView("leftControls",new n({"originatingView":this,"collection":e})),this.showChildView("rightControls",new n({"originatingView":this,"collection":t}))},"onDomRefresh":function(){this._reFocus()},"_getLHSOptionsCollection":function(){var t=e.map(this.model.get("column_names"),function(e,t){return{"value":e,"label":this.model.get("column_names_formatted")[t],"selected":this.model.get("active_column")===e}},this);return new i.Collection([{"label":s.activeColumn,"key":"activeColumn","options":t,"name":"webreports-select-active-column","id":this._getSelectID("webreports-select-active-column")}])},"_getRHSOptionsCollection":function(){var t=[{"value":"otPrimary",
"selected":"otPrimary"===this.model.get("theme_name"),"label":s.OTPrimary},{"value":"otSecondary","selected":"otSecondary"===this.model.get("theme_name"),"label":s.OTSecondary},{"value":"otTertiary","selected":"otTertiary"===this.model.get("theme_name"),"label":s.OTTertiary},{"value":"dataClarity","selected":"dataClarity"===this.model.get("theme_name"),"label":s.DataClarity},{"value":"dataClarityPatterned","selected":"Patterned"===this.model.get("theme_name"),"label":s.DataClarityPatterned},{"value":"otNavy","selected":"otNavy"===this.model.get("theme_name"),"label":s.OTNavy},{"value":"otTeal","selected":"otTeal"===this.model.get("theme_name"),"label":s.OTTeal},{"value":"otIndigo","selected":"otIndigo"===this.model.get("theme_name"),"label":s.OTIndigo},{"value":"otPlum","selected":"otPlum"===this.model.get("theme_name"),"label":s.OTPlum},{"value":"otMagenta","selected":"otMagenta"===this.model.get("theme_name"),"label":s.OTMagenta}],o=[{"value":"Count|asc","selected":"Count"===this.model.get("sort_by")&&"asc"===this.model.get("sort_order"),"label":s.count+":"+s.asc},{"value":"Count|desc","selected":"Count"===this.model.get("sort_by")&&"desc"===this.model.get("sort_order"),"label":s.count+":"+s.desc},{"value":"ordinal|asc","selected":"ordinal"===this.model.get("sort_by")&&"asc"===this.model.get("sort_order"),"label":s.activeColumn+":"+s.asc},{"value":"ordinal|desc","selected":"ordinal"===this.model.get("sort_by")&&"desc"===this.model.get("sort_order"),"label":s.activeColumn+":"+s.desc}],n=[{"value":"true","selected":this.model.get("view_value_as_percentage"),"label":s.percentage},{"value":"false","selected":!this.model.get("view_value_as_percentage"),"label":s.actual}],r=e.map([2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],function(e){return{"value":e,"label":e,"selected":this.model.get("group_after")===e}},this);return new i.Collection([{"label":s.theme,"key":"themeName","options":t,"name":"webreports-select-theme","id":this._getSelectID("webreports-select-theme")},{"label":s.sortBy,"key":"sortBy","options":o,"name":"webreports-select-sort-options","id":this._getSelectID("webreports-select-sort-options")},{"label":s.showValuesAs,"key":"ViewValueAsPercentage","options":n,"name":"webreports-select-value-as-percentage","id":this._getSelectID("webreports-select-value-as-percentage")},{"label":s.groupAfter,"key":"groupAfter","options":r,"name":"webreports-select-group-after","id":this._getSelectID("webreports-select-group-after")}])},"_getSelectID":function(t){return e.uniqueId(t+"_")},"_reFocus":function(){var e=this;setTimeout(function(){if(e.options&&e.options.lastRegion&&e.options.lastRegion.length>0){t("select[name="+e.options.lastRegion+"]").focus()}},1)},"onOptionChanged":function(e){this.updateControlsModel(e),this.options.lastRegion=document.querySelector("#"+e.selectModel.get("id")).attributes.name.value,this._reFocus},"onColumnsChanged":function(){this.model.updateColumnData(this.columnCollection),this.render()},"updateControlsModel":function(t){var o,i,n={},r=this.model,s=t.selectModel,l=t.optionCollection;switch(s.get("key")){case"activeColumn":o=l.findWhere({"value":t.value}),n={"active_column":o.get("value"),"active_column_formatted":o.get("label")};break;case"sortBy":i=t.value;var a=i.split("|");n={"sort_by":a[0],"sort_order":a[1]};break;case"ViewValueAsPercentage":n={"view_value_as_percentage":"true"===t.value};break;case"groupAfter":n={"group_after":parseInt(t.value)};break;case"themeName":o=l.findWhere({"value":t.value}),n={"theme_name":o.get("value")};break;default:console.warn("Invalid select key")}e.isEmpty(n)||(r.set(n),this.trigger("chart:options:updated",n))}})}),csui.define("webreports/widgets/visual.data.filtered.count/impl/mixins/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/visual.data.filtered.count/impl/mixins/visual.count.view.mixin",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/base","csui/controls/toolbar/toolitems.factory","csui/utils/contexts/factories/connector","csui/models/node/node.model","csui/models/nodes","webreports/widgets/visual.data.filtered.count/impl/utils/contexts/factories/visual.count.collection.factory","webreports/widgets/visual.data.filtered.count/impl/models/visual.count/column.collection/column.collection","webreports/widgets/visual.data.filtered.count/impl/models/visual.count/chart.controls/chart.controls.model","webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.controls/visual.count.controls.view","webreports/widgets/visual.data.filtered.count/impl/mixins/nls/lang","csui/utils/deepClone/deepClone"],function(e,t,o,i,n,r,s,l,a,c,u,p,d){"use strict";return{"mixin":function(c){return t.extend(c,{"defaults":{"theme":"otPrimary","titleBarIcon":"title-icon title-webreports","groupAfterBar":10,"groupAfterPie":5,"filterable":!1,"animate":!0,"expandable":!1,"showAsPercentage":!1,"showLegend":!0,"commandRowLimit":5e3,"commandHardRowLimit":5e4},"groupAfterIsValid":function(e){return e>=2&&e<=20},"getGroupAfterDefault":function(e){return"pie"===e||"donut"===e?this.defaults.groupAfterPie:this.defaults.groupAfterBar},"validateVisualCountOptions":function(e){var o,i=this.defaults,n=e.launchButtonConfig;return e.titleBarIcon=t.has(e,"titleBarIcon")?"title-icon "+e.titleBarIcon:i.titleBarIcon,e.filterable=t.has(e,"filterable")&&t.isBoolean(e.filterable)?e.filterable:i.filterable,e.animate=t.has(e,"animate")&&t.isBoolean(e.animate)?e.animate:i.animate,e.expandable=t.has(e,"expandable")&&t.isBoolean(e.expandable)?e.expandable:i.expandable,e.theme=t.has(e,"theme")?e.theme:i.theme,e.viewValueAsPercentage=t.has(e,"viewValueAsPercentage")&&t.isBoolean(e.viewValueAsPercentage)?e.viewValueAsPercentage:i.showAsPercentage,e.groupAfter=t.has(e,"groupAfter")&&this.groupAfterIsValid(e.groupAfter)?parseInt(e.groupAfter,i.groupAfterBar):this.getGroupAfterDefault(e.type),e.showLegend=t.has(e,"showLegend")&&t.isBoolean(e.showLegend)?e.showLegend:i.showLegend,n&&(o=n.rowLimit,t.isNumber(o)&&!t.isNaN(o)||(o=i.commandRowLimit),o>i.commandHardRowLimit&&(o=i.commandHardRowLimit),n.rowLimit=o),e},"validateCollections":function(e){var i=this.defaults;if(!e.chartCollection)throw"VisualCountView requires a chart collection";if(this.chartCollection=e.chartCollection,!e.columnCollection)throw"VisualCountView requires a column collection";if(this.columnCollection=e.columnCollection,!e.facetCollection)throw"VisualCountView requires a facet collection";this.facetCollection=e.facetCollection,e.chartOptionsModel?this.chartOptionsModel=e.chartOptionsModel:this.chartOptionsModel=new o.Model({"themeName":e.theme||i.theme,"showAsPercentage":t.has(e,"showAsPercentage")&&t.isBoolean(e.showAsPercentage)?e.showAsPercentage:i.showAsPercentage,"animate":e.animate||i.animate,"showLegend":t.has(e,"showLegend")&&t.isBoolean(e.showLegend)?e.showLegend:i.showLegend})},"getToolbarItems":function(e){var o,a,c=e.launchButtonConfig,u=c.rowLimit,p=c.launchButtons;return a=t.chain(p).reject(function(e){var o=e.launchButtonID;return!o||!t.isNumber(o)}).map(function(t){var o=e.context,n=o.getObject(r),a=new s({"id":t.launchButtonID},{"connector":n});return{"signature":"OpenWebReport","name":i.getClosestLocalizedString(t.launchButtonLabel,d.launchReport),"toolTip":i.getClosestLocalizedString(t.launchButtonTooltip,d.launchReportTooltip),"status":{"nodes":new l([a])}}}).value(),a.length>0&&(o={"footer":new n({"right":a},{"rowLimit":u})}),o},"getToolbarItemNodes":function(){var o,i,n,r=[],s=[],l=this.options,a=l.context,c=l.toolbarItems;if(c&&(o=c.footer)&&(n=o.collection,n.each(function(e){"right"===e.get("group")&&(i=t.extend({"context":a},e.get("status")),t.has(i,"nodes")&&i.nodes.length>0&&s.push(i.nodes.at(0)))})),s.length>0){t.each(s,function(e){r.push(e.fetch())});var u=function(e){console.debug(e)},p=function(e){console.log(e)};e.when(r).then(u,p)}},"setVisualCountWidgetOptions":function(e){if(!e||!e.data)throw"VisualCount widget requires valid widget options";var o,i,n=t.deepClone(e.data);return n.context=e.context,n=this.validateVisualCountOptions(n),o=this.setCommonModelOptions(e),t.extend(o,{"visType":n.type,"type":n.type,"activeColumn":n.activeColumn,"themeName":n.theme,"filters":n.filters,"filterable":n.filterable,"expandable":n.expandable,"viewValueAsPercentage":n.viewValueAsPercentage,"sortBy":n.sortBy,"sortOrder":n.sortOrder,"groupAfter":n.groupAfter,"showLegend":n.showLegend}),this.setFactory(this.getWidgetFactory(e,a,o)),n.chartCollection=e.context.getCollection(a,{"attributes":o}),n.columnCollection=n.chartCollection.columnCollection,n.facetCollection=n.chartCollection.facetCollection,t.has(e.data,"type")&&"bar"===e.data.type?n.chartType="verticalBar":n.chartType=e.data.type,n.launchButtonConfig&&(i=this.getToolbarItems(n))&&(n.toolbarItems=i,this.listenToOnce(n.chartCollection,"sync",this.getToolbarItemNodes)),n},"createChartControlsView":function(e){var t={"activeColumn":e.activeColumn,"themeName":e.theme,"type":e.type,"sortBy":e.sortBy,"sortOrder":e.sortOrder,"viewValueAsPercentage":e.viewValueAsPercentage,"groupAfter":e.groupAfter,"chartCollection":this.chartCollection,"columnCollection":this.columnCollection,"showLegend":e.showLegend};e.chartControlsModel&&(t.model=e.chartControlsModel),this.chartControlsView=new p(t),this.listenTo(this.chartControlsView,"chart:options:updated",this.onChartOptionsUpdated)}})}}}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/impl/nls/root/lang",{"tooManyRows":"Please refine your filter further. The maximum number of items that can be processed is "}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/visual.count.view",["csui/lib/marionette3","csui/lib/backbone","csui/lib/underscore","csui/lib/jquery","csui/utils/contexts/factories/connector","csui/models/node/node.model","csui/utils/commands","csui/utils/commandhelper","csui/dialogs/modal.alert/modal.alert","csui/controls/facet.bar/facet.bar.view","csui/controls/facet.panel/facet.panel.view","csui/controls/charts/visual.count/visual.count.view","csui/controls/progressblocker/blocker","webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/impl/visual.count.footer.view","webreports/mixins/webreports.view.mixin","webreports/widgets/visual.data.filtered.count/impl/mixins/visual.count.view.mixin","hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/impl/visual.count","i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/impl/nls/lang","css!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/impl/visual.count"],function(e,t,o,i,n,r,s,l,a,c,u,p,d,m,h,f,g,v){var b=e.View.extend({"className":"webreports-visual-count-container","template":g,"regions":{"facetBar":{"el":".webreports-visual-count-facetbarview"},"facetPanel":{"el":".webreports-visual-count-facetpanelview"},"chartControls":{"el":".webreports-visual-count-controls-parent"},"chart":{"el":".webreports-visual-count-chart"},"footer":{"el":".webreports-visual-count-footer","replaceElement":!0}},"constructor":function(t){t=this.validateVisualCountOptions(t),this.validateCollections(t),e.View.prototype.constructor.apply(this,arguments),this._createViews(t),d.imbue(this)},"onDomRefresh":function(){this._renderFooter(),this._renderFacetBar(),this._renderFacetPanel(),this._renderChartControls(),this._renderChart()},"onChartOptionsUpdated":function(e){this.chartOptionsModel&&(o.has(e,"theme_name")&&this.chartOptionsModel.set({"themeName":e.theme_name}),o.has(e,"view_value_as_percentage")&&this.chartOptionsModel.set({"showAsPercentage":e.view_value_as_percentage})),this.chartCollection.onChartOptionsUpdated(e)},"_clearFilters":function(){this.facetCollection.clearFilter(!1)},"_addToFacetFilter":function(e){var t=this.getRegion("chart").$el;this.facetCollection.addFilter(e),this.chartCollection.onFiltersUpdated(),this._renderFacetBar(),this._renderChartControls(),this._renderFacetPanel(),t.addClass("facet-bar-visible")},"_renderChart":function(){var e,t,i=this.chartView,n=this.getRegion("chart");n&&i?(e=this.$el.offsetParent(),!o.isNull(e)&&e.height()>0&&(n.show(this.chartView),(t=i.getChildView("chart"))&&t.trigger("redraw:chart"))):console.warn("Missing chart view or region.")},"_renderFacetBar":function(){this.facetCollection.filters.length>0&&(this.showChildView("facetBar",this.facetBarView),this.facetCollection.trigger("reset"))},"_renderFacetPanel":function(){this.showChildView("facetPanel",this.facetPanelView)},"_renderFooter":function(){var e;this.footerView&&(this.showChildView("footer",this.footerView),e=this.getRegion("footer").$el,e.addClass("has-footer"))},"_createViews":function(e){e.chartView?this.chartView=e.chartView:this._createChartView(),this.createChartControlsView(e),this._createFacetPanelView(),this._createFacetBarView(),e.toolbarItems&&(this.toolbarItems=e.toolbarItems,this._createFooterView())},"_createChartView":function(){var e=this.options,t=this.chartOptionsModel;this.chartView=new p({"context":e.context,"chartType":e.type,"collection":e.chartCollection,"columns":e.columnCollection,"chartOptions":t,"originatingView":this})},"_createFacetPanelView":function(){this.facetPanelView=new u({"collection":this.facetCollection,"enableCheckBoxes":!0,"blockingLocal":!0}),this.listenTo(this.facetPanelView,"apply:filter",this._addToFacetFilter)},"_createFacetBarView":function(){this.facetBarView=new c({"collection":this.facetCollection}),this.listenTo(this.facetBarView,"remove:filter",this._removeFacetFilter,this).listenTo(this.facetBarView,"remove:all",this._removeAll,this).listenTo(this.chartView,"apply:filter",this._addToFacetFilter,this)},"_createFooterView":function(){var e=this.options;this.footerView=new m({"context":e.context,"toolbarItems":this.toolbarItems,"originatingView":this}),this.listenTo(this,"button:clicked",this._onButtonClicked)},"_renderChartControls":function(){this.getRegion("chartControls").show(this.chartControlsView)},"_removeFacetFilter":function(e){var t=this.getRegion("chart").$el;this.facetCollection.removeFilter(e,!1),this.chartCollection.onFiltersUpdated(),o.has(this.facetCollection,"filters")&&this.facetCollection.filters.length<1&&t.removeClass("facet-bar-visible"),this._renderChartControls(),this._renderFacetPanel()},"_removeAll":function(){var e=this.getRegion("chart").$el;this._clearFilters(),this.chartCollection.onFiltersUpdated(),this._renderChartControls(),e.removeClass("facet-bar-visible")},"_onButtonClicked":function(e,t){var i,n,r,c=t.toolbarItems,u=e.model,p=this.options.context,d=u.get("signature"),m=s.findWhere({"signature":d}),h={"context":p},f={"context":p,"parameters":this.chartCollection.getFilteredCountQuery(),"originatingView":this};c&&c.footer&&c.footer.options&&(n=c.footer.options.rowLimit,r=this.chartCollection.getTotalCount(),r<=n?m&&(o.extend(h,u.get("status")),o.extend(f,u.get("commandData")),m.enabled(h,f)&&(i=m.execute(h,f),l.handleExecutionResults(i,{"command":m,"suppressSuccessMessage":!0}))):a.showError(v.tooManyRows+n))}});return h.mixin(b.prototype),f.mixin(b.prototype),b}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/impl/nls/root/lang",{"dialogTitle":"Visual Count Tile","activeColumn":"Active column","sortBy":"Sort by","count":"Count","asc":"asc","desc":"desc","showValuesAs":"Show values as","groupAfter":"Group after","actual":"Actual","percentage":"Percentage","parameters":"Report parameters","chartOptions":"Chart options"}),csui.define("hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/impl/visual.count.tile",["module","hbs","nuc/lib/handlebars"],function(e,t,o){var i=o.template({"1":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="tile-type-icon">\r\n            <span class="icon title-icon '+e.escapeExpression((r=null!=(r=s(o,"icon")||(null!=t?s(t,"icon"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":5,"column":41},"end":{"line":5,"column":49}}}):r))+'" aria-hidden="true"></span>\r\n        </div>\r\n'},"3":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(r=s(o,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"imageUrl"):t,{"name":"if","hash":{},"fn":e.program(4,n,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":8},"end":{"line":12,"column":15}}}))?r:""},"4":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="tile-type-image '+e.escapeExpression((r=null!=(r=s(o,"imageClass")||(null!=t?s(t,"imageClass"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"imageClass","hash":{},"loc":{"start":{"line":9,"column":40},"end":{"line":9,"column":54}}}):r))+'">\r\n                <img src="'+e.escapeExpression((r=null!=(r=s(o,"imageUrl")||(null!=t?s(t,"imageUrl"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"imageUrl","hash":{},"loc":{"start":{"line":10,"column":26},"end":{"line":10,"column":38}}}):r))+'" aria-hidden="true">\r\n            </div>\r\n'},"6":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="csui-favorite csui-acc-tab-region webreports-tile-toolbar-btn webreports-visual-count-btn-parameters">\r\n                <span class="csui-icon-edit inline-edit-icon icon-edit wr-icon-edit" role="button" tabindex="0" aria-label="'+e.escapeExpression((r=null!=(r=s(o,"parameters")||(null!=t?s(t,"parameters"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"parameters","hash":{},"loc":{"start":{"line":22,"column":124},"end":{"line":22,"column":138}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=s(o,"parameters")||(null!=t?s(t,"parameters"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"parameters","hash":{},"loc":{"start":{"line":22,"column":147},"end":{"line":22,"column":161}}}):r))+'"></span>\r\n            </div>\r\n'},"8":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            \x3c!-- Note: the options button must be available even when there is no header. In the case of no header, it will be positioned absolute --\x3e\r\n            <div class="csui-favorite csui-acc-tab-region webreports-tile-toolbar-btn webreports-visual-count-btn-options">\r\n                <span class="csui-icon-more inline-edit-icon icon-more" role="button" tabindex="0" aria-label="'+e.escapeExpression((r=null!=(r=s(o,"chartOptions")||(null!=t?s(t,"chartOptions"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"chartOptions","hash":{},"loc":{"start":{"line":28,"column":111},"end":{"line":28,"column":127}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=s(o,"chartOptions")||(null!=t?s(t,"chartOptions"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"chartOptions","hash":{},"loc":{"start":{"line":28,"column":136},"end":{"line":28,"column":152}}}):r))+'"></span>\r\n            </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,o,i,n){var r,s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tile-header">\r\n\r\n'+(null!=(r=l(o,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"icon"):t,{"name":"if","hash":{},"fn":e.program(1,n,0),"inverse":e.program(3,n,0),"loc":{"start":{"line":3,"column":4},"end":{"line":13,"column":11}}}))?r:"")+'\r\n    <div class="tile-title" title="'+e.escapeExpression((s=null!=(s=l(o,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":15,"column":35},"end":{"line":15,"column":44}}}):s))+'">\r\n        <h2 class="csui-heading">'+e.escapeExpression((s=null!=(s=l(o,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":16,"column":33},"end":{"line":16,"column":42}}}):s))+'</h2>\r\n    </div>\r\n\r\n    <div class="tile-controls" title="'+e.escapeExpression((s=null!=(s=l(o,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":19,"column":38},"end":{"line":19,"column":47}}}):s))+'">\r\n'+(null!=(r=l(o,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"showParameterEditBtn"):t,{"name":"if","hash":{},"fn":e.program(6,n,0),"inverse":e.noop,"loc":{"start":{"line":20,"column":8},"end":{"line":24,"column":15}}}))?r:"")+(null!=(r=l(o,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"filterable"):t,{"name":"if","hash":{},"fn":e.program(8,n,0),"inverse":e.noop,"loc":{"start":{"line":25,"column":8},"end":{"line":30,"column":15}}}))?r:"")+'    </div>\r\n\r\n</div>\r\n\r\n<div class="tile-content"></div>\r\n\r\n<div class="tile-footer binf-hidden"></div>\r\n\r\n<div class="webreports-visual-count-overlay-clip">\r\n    <div class="webreports-visual-count-overlay">\r\n        <div class="webreports-visual-count-overlay-content binf-modal-dialog">\r\n        <form class="csui-inlineform-group webreports-visual-count-settings-form">\r\n            <div class="binf-modal-content">\r\n                <div class="binf-modal-body">\r\n                    <div class="webreports-visual-count-controls-parent"></div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n'}});return o.registerPartial("webreports_widgets_visual.data.filtered.count_impl_controls_visual.count.tile_impl_visual.count.tile",i),i}),csui.define("css!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/impl/visual.count.tile",[],function(){}),csui.define("css!webreports/style/webreports",[],function(){}),csui.define("webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.tile.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/controls/tile/tile.view","csui/utils/contexts/factories/connector","csui/utils/base","csui/controls/tile/behaviors/perfect.scrolling.behavior","webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/impl/expanding.behavior","csui/controls/charts/visual.count/visual.count.view","webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/visual.count.view","webreports/mixins/webreports.view.mixin","webreports/widgets/visual.data.filtered.count/impl/mixins/visual.count.view.mixin","i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/impl/nls/lang","hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/impl/visual.count.tile","css!webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/impl/visual.count.tile","css!webreports/style/webreports.css"],function(e,t,o,i,n,r,s,l,a,c,u,p,d,m){var h=i.extend({"contentView":a,"ui":{"overlayClip":".webreports-visual-count-overlay-clip","toggleSettings":".webreports-visual-count-btn-options > span","overlay":".webreports-visual-count-overlay","footer":".tile-footer","expandButton":".cs-more"},"constructor":function(t){t&&e.has(t,"id")&&this._isTileWidget(t)&&(t.showLegend=!1),t=this.validateVisualCountOptions(t),this.validateCollections(t),this._setContentViewOptions(t),i.prototype.constructor.apply(this,arguments),this.createChartControlsView(t)},"behaviors":function(){var e={"PerfectScrolling":{"behaviorClass":s,"contentParent":".tile-content","suppressScrollX":!1,"scrollYMarginOffset":10}};return this.options.expandable&&(e.Expanding={"behaviorClass":l,"titleBarIcon":function(){return this.options.titleBarIcon},"dialogTitle":function(){return r.getClosestLocalizedString(this.options.title,d.dialogTitle)},"dialogTitleIconRight":"icon-tileCollapse","dialogClassName":"webreports-visual-data","expandedView":function(){return c},"expandedViewOptions":function(){var e=this.options;return{"context":e.context,"chartCollection":this.chartCollection,"columnCollection":this.columnCollection,"facetCollection":this.facetCollection,"type":e.chartType,"theme":this.chartOptionsModel.get("themeName"),"chartControlsModel":e.chartCollection.chartControlsModel,"chartOptionsModel":this.chartOptionsModel,"toolbarItems":e.toolbarItems}}}),e},"regions":function(){return e.extend({"visualizationControls":".webreports-visual-count-controls-parent"},i.prototype.regions)},"events":{"click @ui.toggleSettings":"toggleSettings","keyup @ui.toggleSettings":"toggleSettings","keyup @ui.expandButton":"keyboardExpand"},"keyboardExpand":function(e,t){e.preventDefault(),"keyup"!==e.type||13!==e.keyCode&&32!==e.keyCode||this.triggerMethod("expand",t)},"toggleSettings":function(e){e.preventDefault(),"click"!==e.type&&("keyup"!==e.type||13!==e.keyCode&&32!==e.keyCode)||(this.overlayVisible?(t(".webreports-visual-count-overlay",this.$el).removeClass("visible").addClass("binf-hidden"),t(".cs-more",this.$el).attr("tabindex","0"),this.overlayVisible=!1):(this.getRegion("visualizationControls").show(this.chartControlsView),t(".webreports-visual-count-overlay",this.$el).addClass("visible").removeClass("binf-hidden"),t(".cs-more",this.$el).attr("tabindex","-1"),this.overlayVisible=!0))},"template":m,"templateHelpers":function(){var t={"title":r.getClosestLocalizedString(this.options.title,d.dialogTitle),"icon":this.options.titleBarIcon||"title-webreports","activeColumn":this.options.activeColumn||"","filterable":this.options.filterable,"parameters":d.parameters,"chartOptions":d.chartOptions};return"showPromptForm"===this.options.parameterPrompt&&e.extend(t,{"showParameterEditBtn":!0}),t},"onChartOptionsUpdated":function(t){this.chartOptionsModel&&(e.has(t,"theme_name")&&this.chartOptionsModel.set({"themeName":t.theme_name}),e.has(t,"view_value_as_percentage")&&this.chartOptionsModel.set({"showAsPercentage":t.view_value_as_percentage})),this.chartCollection.onChartOptionsUpdated(t)},"_setContentViewOptions":function(e){this.contentViewOptions={"context":e.context,"chartType":e.type,"collection":e.chartCollection,"columns":e.columnCollection,"chartOptions":this.chartOptionsModel},this.listenToOnce(e.chartCollection,"sync",this._showControls)},"_showControls":function(){if(!this.chartCollection.isEmpty()&&(this.options.filterable&&this.ui.toggleSettings.removeClass("binf-hidden"),this.options.expandable)){this.ui.footer.removeClass("binf-hidden");var e=t(".tile-content > .csui-visual-count-container").parentElement,o=t(".tile-footer > .cs-more.tile-expand",e);o&&o.addClass("csui-acc-tab-region").attr("tabindex","0")}},"_isTileWidget":function(t){var o,i=!1;return t&&e.has(t,"context")&&e.has(t.context,"perspective")&&e.has(t.context.perspective.get("options"),"widgets")&&(o=t.context.perspective.get("options").widgets,o=e.filter(o,function(e){return e.kind&&"tile"===e.kind}),o.length&&(i=e.every(o,function(o){return e.has(o,"options")&&e.has(o.options,"id")&&o.options.id===t.id}))),i}});return u.mixin(h.prototype),p.mixin(h.prototype),h}),csui.define("webreports/widgets/visual.data.filtered.count/impl/visual.count.content.view",["webreports/widgets/visual.data.filtered.count/impl/controls/visual.count.tile/visual.count.tile.view","webreports/mixins/webreports.view.mixin","webreports/widgets/visual.data.filtered.count/impl/mixins/visual.count.view.mixin"],function(e,t,o){var i=e.extend({"constructor":function(t){var o=this.setVisualCountWidgetOptions(t);e.prototype.constructor.apply(this,[o]),this.options=o}});return t.mixin(i.prototype),o.mixin(i.prototype),i}),csui.define("webreports/widgets/visual.data.filtered.count/visual.data.filtered.count.view",["webreports/controls/parameter.prompt/widget.prompt.wrapper.view","webreports/widgets/visual.data.filtered.count/impl/visual.count.content.view"],function(e,t){return e.extend({"className":"cs-tile cs-list tile content-tile webreports-tilereport","constructor":function(o){o.view=t,e.prototype.constructor.apply(this,arguments)}})}),csui.define("json!webreports/widgets/visual.data.filtered.count/visual.data.filtered.count.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"header","supportedKinds":["tile","header"],"schema":{"type":"object","properties":{"title":{"title":"{{tileTitle}}","description":"{{tileDescription}}","type":"object"},"type":{"title":"{{typeTitle}}","description":"{{typeDescription}}","type":"string","enum":["bar","horizontalBar","donut","pie"],"default":"bar"},"id":{"title":"{{sourceTitle}}","description":"{{sourceDescription}}","type":"integer"},"activeColumn":{"title":"{{activeTitle}}","description":"{{activeDescription}}","type":"string"},"theme":{"title":"{{themeTitle}}","description":"{{themeDescription}}","type":"string","enum":["otPrimary","otSecondary","otTertiary","dataClarity","dataClarityPatterned","otNavy","otTeal","otIndigo","otPlum","otMagenta"],"default":"otPrimary"},"showLegend":{"title":"{{pieLegendTitle}}","description":"{{pieLegendDescription}}","type":"boolean","enum":[!0,!1],"default":!0},"viewValueAsPercentage":{"title":"{{percentTitle}}","description":"{{percentDescription}}","type":"boolean","enum":[!0,!1],"default":!1},"animate":{"title":"{{animateTitle}}","description":"{{animateDescription}}","type":"boolean","enum":[!0,!1],"default":!0},"groupAfter":{"title":"{{groupTitle}}","type":"integer","description":"{{groupDescription}}","enum":[-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],"default":-1},"sortBy":{"title":"{{sortTitle}}","description":"{{sortDescription}}","type":"string","enum":["ordinal","Count"],"default":"Count"},"sortOrder":{"title":"{{directionTitle}}","description":"{{directionDescription}}","type":"string","enum":["desc","asc"],"default":"desc"},"filterable":{"title":"{{optionsTitle}}","description":"{{optionsDescription}}","type":"boolean","enum":[!0,!1],"default":!1},"expandable":{"title":"{{expandedTitle}}","description":"{{expandedDescription}}","type":"boolean","enum":[!0,!1],"default":!1},"launchButtonConfig":{"type":"object","title":"{{buttonTitle}}","description":"{{buttonDescription}}","properties":{"rowLimit":{"title":"{{maxTitle}}","description":"{{maxDescription}}","type":"integer","default":5e3},"launchButtons":{"type":"array","title":"{{customButtonTitle}}","description":"{{customButtonDescription}}","items":{"type":"object","title":"{{addButtonTitle}}","description":"{{addButtonDescription}}","properties":{"launchButtonID":{"title":"{{reportButtonTitle}}","description":"{{reportButtonDescription}}","type":"integer"},"launchButtonLabel":{"title":"{{labelButtonTitle}}","description":"{{labelButtonDescription}}","type":"object"},"launchButtonTooltip":{"title":"{{buttonToolTitle}}","description":"{{buttonToolDescription}}","type":"object"}}}}}},"parameterPrompt":{"title":"{{parameterPromptTitle}}","description":"{{parameterPromptDescription}}","type":"string","enum":["disabled","showPromptForm"],"default":"disabled"},"parameters":{"type":"array","title":"{{paramSourceTitle}}","description":"{{paramSourceDescription}}","items":{"type":"object","title":"{{paramPairTitle}}","description":"{{paramPairDescription}}","properties":{"name":{
"type":"string","title":"{{paramNameTitle}}","description":"{{paramNameDescription}}"},"value":{"type":"string","title":"{{paramValueTitle}}","description":"{{paramValueDescription}}"}}}}},"required":["activeColumn","id"]},"options":{"fields":{"id":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[30303]}}},"title":{"type":"otcs_multilingual_string"},"parameterPrompt":{"type":"select","optionLabels":["{{parmsIgnored}}","{{enabledShowPromptForm}}"]},"launchButtonConfig":{"fields":{"launchButtons":{"items":{"fields":{"launchButtonID":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[30303]}}},"launchButtonLabel":{"type":"otcs_multilingual_string"},"launchButtonTooltip":{"type":"otcs_multilingual_string"}}}}}},"type":{"type":"select","optionLabels":["{{optionsTypeBar}}","{{optionsTypeHorizontalBar}}","{{optionsTypeDonut}}","{{optionsTypePie}}"]},"theme":{"type":"select","optionLabels":["{{optionsTypeOTPrimary}}","{{optionsTypeOTSecondary}}","{{optionsTypeOTTertiary}}","{{optionsTypeDataClarity}}","{{optionsTypeDataClarityPatterned}}","{{optionsTypeOTNavy}}","{{optionsTypeOTTeal}}","{{optionsTypeOTIndigo}}","{{optionsTypeOTPlum}}","{{optionsTypeOTMagenta}}"]},"groupAfter":{"type":"select","optionLabels":["{{optionsGroupAfterDefault}}","2","3","4","{{optionsPieDonutDefault}}","6","7","8","9","10","11","12","13","14","{{optionsBarDefault}}","16","17","18","19","20"]},"sortBy":{"type":"select","optionLabels":["{{optionsSortByActive}}","{{optionsSortByCount}}"]},"sortOrder":{"type":"select","optionLabels":["{{optionsSortOrderDsc}}","{{optionsSortOrderAsc}}"]}}}}),csui.define("webreports/widgets/visual.data.filtered.count/impl/nls/visual.data.filtered.count.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/visual.data.filtered.count/impl/nls/root/visual.data.filtered.count.manifest",{"widgetTitle":"Visual Count","widgetDescription":"This widget visualizes the total count of values matching given criteria.","tileTitle":"Title","tileDescription":"Enter the title for the widget. This title appears in the Tile header.","typeTitle":"Chart Type","typeDescription":"Select the type of chart appropriate for your data.","themeTitle":"Theme","themeDescription":"Select a color palette for your chart.","sourceTitle":"Source WebReport","sourceDescription":"Browse to select the WebReport that retrieves the data that you want to visualize.","activeTitle":"Active Column","activeDescription":"Enter the name of the data source column that provides the matching values to be counted.","optionsTitle":"Chart Options","optionsDescription":"Choose whether end users have access to chart filtering options in the Tile view.","expandedTitle":"Expanded View","expandedDescription":"Choose whether end users have access to the Expanded view of the chart.","percentTitle":"Values as Percentage","percentDescription":"Choose whether to show the chart values as percentages of the total count or as the actual count.","pieLegendTitle":"Pie legend","pieLegendDescription":"Pie and donut charts have a separate legend by default. If this is disabled, slice labels are shown instead.","animateTitle":"Animate","animateDescription":"Choose whether the chart animates or not when changing certain settings in the interface.","groupTitle":"Group After","groupDescription":"Select the threshold for the number of discrete values whose total count will appear in the chart. Values above the threshold will be grouped as 'Other' and the combined total will appear. The Chart Default is a threshold value appropriate to the chart type.","sortTitle":"Sort By","sortDescription":"Select whether to sort the chart by the value names in the Active Column or by the count of the values.","directionTitle":"Sort Direction","directionDescription":"Select whether to sort the chart in Ascending or Descending order.","buttonTitle":"Button WebReports","buttonDescription":"Configure the options for Button WebReports launched by Custom Buttons in the Expanded view","maxTitle":"Maximum Items to Process","maxDescription":"Enter the maximum number of data items to pass to the Button WebReport.","customButtonTitle":"Custom Buttons","customButtonDescription":"Set the properties for the Custom Button that appears in the Expanded View, then click the 'Add To Array' button. Repeat as required to add multiple buttons.","addButtonTitle":"Add Custom Buttons","addButtonDescription":"Configure custom buttons that will appear in the Expanded view and which will launch Button Webreports.","reportButtonTitle":"Button WebReport","reportButtonDescription":"Browse to select the WebReport that will open when you click the button.","labelButtonTitle":"Button Label","labelButtonDescription":"Enter a custom label for the button.","buttonToolTitle":"Button Tooltip","buttonToolDescription":"Enter a tool tip for the button.","parameterPromptTitle":"Parameter prompt behavior","parameterPromptDescription":"Determines how the widget should behave when the source WebReport has input parameters.","parmsIgnored":"Don't prompt - use defaults","enabledShowPromptForm":"Show prompt form","paramSourceTitle":"Source Parameters","paramSourceDescription":"Specify one or more Key/Value pairs of parameters to pass into the Source WebReport, as required.","paramPairTitle":"Source Parameters","paramPairDescription":"Specify one or more Key/Value pairs of parameters to pass into the Source WebReport, as required.","paramNameTitle":"Parameter Name","paramNameDescription":"The name of the URL parameter.","paramValueTitle":"Parameter Value","paramValueDescription":"The value of the URL parameter.","optionsTypeBar":"Vertical Bar","optionsTypeHorizontalBar":"Horizontal Bar","optionsTypeDonut":"Donut","optionsTypePie":"Pie","optionsTypeOTPrimary":"Evening 10","optionsTypeOTSecondary":"Coral 10","optionsTypeOTTertiary":"Garden 10","optionsTypeDataClarity":"Clarity 20","optionsTypeDataClarityPatterned":"Patterned 20","optionsTypeOTNavy":"Navy 6","optionsTypeOTTeal":"Teal 6","optionsTypeOTIndigo":"Indigo 6","optionsTypeOTPlum":"Plum 6","optionsTypeOTMagenta":"Magenta 6","optionsGroupAfterDefault":"Use Chart Default","optionsPieDonutDefault":"5 - Pie and Donut default","optionsBarDefault":"15 - Bar default","optionsSortByActive":"Active Column","optionsSortByCount":"Count","optionsSortOrderDsc":"Descending","optionsSortOrderAsc":"Ascending"}),csui.define("hbs!webreports/widgets/visual.count.full.page/impl/visual.count.full.page",["module","hbs","nuc/lib/handlebars"],function(e,t,o){var i=o.template({"1":function(e,t,o,i,n){var r,s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="webreports-visual-count-header tile-header">\r\n\r\n'+(null!=(r=l(o,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"wrNode"):t,{"name":"if","hash":{},"fn":e.program(2,n,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":8},"end":{"line":6,"column":15}}}))?r:"")+"\r\n"+(null!=(r=l(o,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"icon"):t,{"name":"if","hash":{},"fn":e.program(4,n,0),"inverse":e.program(6,n,0),"loc":{"start":{"line":8,"column":8},"end":{"line":18,"column":15}}}))?r:"")+'\r\n        <div class="tile-title">\r\n             <h2 class="csui-heading">'+e.escapeExpression((s=null!=(s=l(o,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":21,"column":38},"end":{"line":21,"column":47}}}):s))+'</h2>\r\n        </div>\r\n\r\n        <div class="tile-controls">\r\n            <div class="csui-favorite csui-acc-tab-region webreports-widget-parameters-btn webreports-visual-count-btn-parameters binf-hidden">\r\n                <span class="csui-icon-edit inline-edit-icon icon-edit wr-icon-edit" role="button" tabindex="0" aria-label="'+e.escapeExpression((s=null!=(s=l(o,"settings")||(null!=t?l(t,"settings"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"settings","hash":{},"loc":{"start":{"line":26,"column":124},"end":{"line":26,"column":136}}}):s))+'"></span>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n'},"2":function(e,t,o,i,n){return'            <div class="arrow_back cs-go-back"></div>\r\n'},"4":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="tile-type-icon">\r\n                <span class="icon '+e.escapeExpression((r=null!=(r=s(o,"icon")||(null!=t?s(t,"icon"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":10,"column":34},"end":{"line":10,"column":42}}}):r))+'" aria-hidden="true"></span>\r\n            </div>\r\n'},"6":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(r=s(o,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"imageUrl"):t,{"name":"if","hash":{},"fn":e.program(7,n,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":12},"end":{"line":17,"column":19}}}))?r:""},"7":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <div class="tile-type-image '+e.escapeExpression((r=null!=(r=s(o,"imageClass")||(null!=t?s(t,"imageClass"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"imageClass","hash":{},"loc":{"start":{"line":14,"column":44},"end":{"line":14,"column":58}}}):r))+'">\r\n                    <img src="'+e.escapeExpression((r=null!=(r=s(o,"imageUrl")||(null!=t?s(t,"imageUrl"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"imageUrl","hash":{},"loc":{"start":{"line":15,"column":30},"end":{"line":15,"column":42}}}):r))+'" aria-hidden="true">\r\n                </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,o,i,n){var r,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(r=s(o,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"header"):t,{"name":"if","hash":{},"fn":e.program(1,n,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":31,"column":7}}}))?r:"")+'\r\n<div class="webreports-visual-count-container"></div>'}});return o.registerPartial("webreports_widgets_visual.count.full.page_impl_visual.count.full.page",i),i}),csui.define("webreports/widgets/visual.count.full.page/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/visual.count.full.page/impl/nls/root/lang",{"visualCount":"Visual Count"}),csui.define("css!webreports/widgets/visual.count.full.page/impl/visual.count.full.page",[],function(){}),csui.define("webreports/widgets/visual.count.full.page/impl/visual.count.full.page.content.view",["csui/lib/underscore","csui/lib/marionette3","csui/utils/base","webreports/widgets/visual.data.filtered.count/impl/controls/visual.count/visual.count.view","webreports/mixins/webreports.view.mixin","webreports/utils/general.utils","webreports/widgets/visual.data.filtered.count/impl/mixins/visual.count.view.mixin","hbs!webreports/widgets/visual.count.full.page/impl/visual.count.full.page","i18n!webreports/widgets/visual.count.full.page/impl/nls/lang","css!webreports/widgets/visual.count.full.page/impl/visual.count.full.page"],function(e,t,o,i,n,r,s,l,a){var c=t.View.extend({"template":l,"className":"webreports-visual-count-fp-content-view","ui":{"visualCount":".webreports-visual-count-container"},"regions":{"visualCount":{"el":".webreports-visual-count-container","replaceElement":!0}},"constructor":function(e){e=this.setVisualCountWidgetOptions(e),t.View.prototype.constructor.apply(this,e),this.options=e,this._createVisualCountView()},"templateContext":function(){var t=this.getOption("context"),i=this.options;return{"title":o.getClosestLocalizedString(i.title,a.visualCount),"icon":i.titleBarIcon,"header":!(!e.isUndefined(i.header)&&!1===i.header),"wrNode":r.isWebReportNodeContext(t)}},"onDomRefresh":function(){this.showChildView("visualCount",this.visualCountView)},"_createVisualCountView":function(){this.visualCountView=new i(this.options)}});return n.mixin(c.prototype),s.mixin(c.prototype),c}),csui.define("webreports/widgets/visual.count.full.page/visual.count.full.page.view",["webreports/controls/parameter.prompt/widget.prompt.wrapper.view","webreports/widgets/visual.count.full.page/impl/visual.count.full.page.content.view"],function(e,t){return e.extend({"className":"webreports-visual-count-fp-view","constructor":function(o){o.data&&(o.data.parameterPrompt="showPromptForm"),o.view=t,e.prototype.constructor.apply(this,arguments)},"onDomRefresh":function(){var e=this.getChildView("content");e&&e.triggerMethod("dom:refresh")}})}),csui.define("json!webreports/widgets/visual.count.full.page/visual.count.full.page.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"fullpage","supportedKinds":["fullpage"],"schema":{"type":"object","properties":{"title":{"title":"{{tileTitle}}","description":"{{tileDescription}}","type":"object"},"type":{"title":"{{typeTitle}}","description":"{{typeDescription}}","type":"string","enum":["bar","horizontalBar","donut","pie"],"default":"bar"},"id":{"title":"{{sourceTitle}}","description":"{{sourceDescription}}","type":"integer"},"activeColumn":{"title":"{{activeTitle}}","description":"{{activeDescription}}","type":"string"},"theme":{"title":"{{themeTitle}}","description":"{{themeDescription}}","type":"string","enum":["otPrimary","otSecondary","otTertiary","dataClarity","otNavy","otTeal","otIndigo","otPlum","otMagenta"],"default":"otPrimary"},"viewValueAsPercentage":{"title":"{{percentTitle}}","description":"{{percentDescription}}","type":"boolean","enum":[!0,!1],"default":!1},"animate":{"title":"{{animateTitle}}","description":"{{animateDescription}}","type":"boolean","enum":[!0,!1],"default":!0},"groupAfter":{"title":"{{groupTitle}}","type":"integer","description":"{{groupDescription}}","enum":[-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],"default":-1},"sortBy":{"title":"{{sortTitle}}","description":"{{sortDescription}}","type":"string","enum":["ordinal","Count"],"default":"Count"},"sortOrder":{"title":"{{directionTitle}}","description":"{{directionDescription}}","type":"string","enum":["desc","asc"],"default":"desc"},"launchButtonConfig":{"type":"object","title":"{{buttonTitle}}","description":"{{buttonDescription}}","properties":{"rowLimit":{"title":"{{maxTitle}}","description":"{{maxDescription}}","type":"integer","default":5e3},"launchButtons":{"type":"array","title":"{{customButtonTitle}}","description":"{{customButtonDescription}}","items":{"type":"object","title":"{{addButtonTitle}}","description":"{{addButtonDescription}}","properties":{"launchButtonID":{"title":"{{reportButtonTitle}}","description":"{{reportButtonDescription}}","type":"integer"},"launchButtonLabel":{"title":"{{labelButtonTitle}}","description":"{{labelButtonDescription}}","type":"object"},"launchButtonTooltip":{"title":"{{buttonToolTitle}}","description":"{{buttonToolDescription}}","type":"object"}}}}}}},"required":["activeColumn","id"]},"options":{"fields":{"id":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[30303]}}},"title":{"type":"otcs_multilingual_string"},"parameterPrompt":{"type":"select","optionLabels":["{{parmsIgnored}}","{{enabledShowPromptForm}}"]},"launchButtonConfig":{"fields":{"launchButtons":{"items":{"fields":{"launchButtonID":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[30303]}}},"launchButtonLabel":{"type":"otcs_multilingual_string"},"launchButtonTooltip":{"type":"otcs_multilingual_string"}}}}}},"type":{"type":"select","optionLabels":["{{optionsTypeBar}}","{{optionsTypeHorizontalBar}}","{{optionsTypeDonut}}","{{optionsTypePie}}"]},"theme":{"type":"select","optionLabels":["{{optionsTypeOTPrimary}}","{{optionsTypeOTSecondary}}","{{optionsTypeOTTertiary}}","{{optionsTypeDataClarity}}","{{optionsTypeOTNavy}}","{{optionsTypeOTTeal}}","{{optionsTypeOTIndigo}}","{{optionsTypeOTPlum}}","{{optionsTypeOTMagenta}}"]},"groupAfter":{"type":"select","optionLabels":["{{optionsGroupAfterDefault}}","2","3","4","{{optionsPieDonutDefault}}","6","7","8","9","10","11","12","13","14","{{optionsBarDefault}}","16","17","18","19","20"]},"sortBy":{"type":"select","optionLabels":["{{optionsSortByActive}}","{{optionsSortByCount}}"]},"sortOrder":{"type":"select","optionLabels":["{{optionsSortOrderDsc}}","{{optionsSortOrderAsc}}"]}}}}),csui.define("webreports/widgets/visual.count.full.page/impl/nls/visual.count.full.page.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/visual.count.full.page/impl/nls/root/visual.count.full.page.manifest",{"widgetTitle":"Visual Count - Full","widgetDescription":"This widget visualizes the total count of values matching given criteria.","tileTitle":"Title","tileDescription":"Enter the title for the widget. This title appears in the Tile header.","typeTitle":"Chart Type","typeDescription":"Select the type of chart appropriate for your data.","themeTitle":"Theme","themeDescription":"Select a color palette for your chart.","sourceTitle":"Source WebReport","sourceDescription":"Browse to select the WebReport that retrieves the data that you want to visualize.","activeTitle":"Active Column","activeDescription":"Enter the name of the data source column that provides the matching values to be counted.","percentTitle":"Values as Percentage","percentDescription":"Choose whether to show the chart values as percentages of the total count or as the actual count.","animateTitle":"Animate","animateDescription":"Choose whether the chart animates or not when changing certain settings in the interface.","groupTitle":"Group After","groupDescription":"Select the threshold for the number of discrete values whose total count will appear in the chart. Values above the threshold will be grouped as 'Other' and the combined total will appear. The Chart Default is a threshold value appropriate to the chart type.","sortTitle":"Sort By","sortDescription":"Select whether to sort the chart by the value names in the Active Column or by the count of the values.","directionTitle":"Sort Direction","directionDescription":"Select whether to sort the chart in Ascending or Descending order.","buttonTitle":"Button WebReports","buttonDescription":"Configure the options for Button WebReports launched by Custom Buttons in the Expanded view","maxTitle":"Maximum Items to Process","maxDescription":"Enter the maximum number of data items to pass to the Button WebReport.","customButtonTitle":"Custom Buttons","customButtonDescription":"Set the properties for the Custom Button that appears in the Expanded View, then click the 'Add To Array' button. Repeat as required to add multiple buttons.","addButtonTitle":"Add Custom Buttons","addButtonDescription":"Configure custom buttons that will appear in the Expanded view and which will launch Button Webreports.","reportButtonTitle":"Button WebReport","reportButtonDescription":"Browse to select the WebReport that will open when you click the button.","labelButtonTitle":"Button Label","labelButtonDescription":"Enter a custom label for the button.","buttonToolTitle":"Button Tooltip","buttonToolDescription":"Enter a tool tip for the button.","parameterPromptTitle":"Parameter prompt behavior","parameterPromptDescription":"Determines how the widget should behave when the source WebReport has input parameters.","parmsIgnored":"Don't prompt - use defaults","enabledShowPromptForm":"Show prompt form","optionsTypeBar":"Vertical Bar","optionsTypeHorizontalBar":"Horizontal Bar","optionsTypeDonut":"Donut","optionsTypePie":"Pie","optionsTypeOTPrimary":"Evening 10","optionsTypeOTSecondary":"Coral 10","optionsTypeOTTertiary":"Garden 10","optionsTypeDataClarity":"Clarity 20","optionsTypeOTNavy":"Navy 6","optionsTypeOTTeal":"Teal 6","optionsTypeOTIndigo":"Indigo 6","optionsTypeOTPlum":"Plum 6","optionsTypeOTMagenta":"Magenta 6","optionsGroupAfterDefault":"Use Chart Default","optionsPieDonutDefault":"5 - Pie and Donut default","optionsBarDefault":"15 - Bar default","optionsSortByActive":"Active Column","optionsSortByCount":"Count","optionsSortOrderDsc":"Descending","optionsSortOrderAsc":"Ascending"}),csui.define("bundles/webreports-visdata",["webreports/widgets/visual.data.filtered.count/visual.data.filtered.count.view","json!webreports/widgets/visual.data.filtered.count/visual.data.filtered.count.manifest.json","i18n!webreports/widgets/visual.data.filtered.count/impl/nls/visual.data.filtered.count.manifest","webreports/widgets/visual.count.full.page/visual.count.full.page.view","json!webreports/widgets/visual.count.full.page/visual.count.full.page.manifest.json","i18n!webreports/widgets/visual.count.full.page/impl/nls/visual.count.full.page.manifest"],{}),csui.require(["require","css"],function(e,t){t.styleLoad(e,"webreports/bundles/webreports-visdata")});
//# sourceMappingURL=webreports-visdata.js.map