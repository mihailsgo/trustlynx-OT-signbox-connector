csui.define("esoc/lib/jquery.emojiarea/jquery.emojiarea.custom",["module","csui/lib/jquery","i18n"],function(e,t,i){return function(e,t,n){var o=["p","div","pre","form"],s=function(e){return e.is(":visible")?e.offset():{"top":0,"left":0}};e.emojiarea={"path":"","util":{},"icons":{},"widget":"","defaults":{"button":null,"buttonLabel":"Emojis","buttonPosition":"after"}},e.fn.emojiarea=function(t){return e.emojiarea.path=t.path,e.emojiarea.widget=t.widget,t=e.extend({},e.emojiarea.defaults,t),this.each(function(){var i=e(this);"contentEditable"in n.body&&!1!==t.wysiwyg?new c(i,t):new r(i,t)})};var l={};l.restoreSelection=function(){return t.getSelection?function(e){var i=t.getSelection();i.removeAllRanges();for(var n=0,o=e.length;n<o;++n)i.addRange(e[n])}:n.selection&&n.selection.createRange?function(e){e&&e.select()}:void 0}(),l.saveSelection=function(){return t.getSelection?function(){var e=t.getSelection(),i=[];if(e.rangeCount)for(var n=0,o=e.rangeCount;n<o;++n)i.push(e.getRangeAt(n));return i}:n.selection&&n.selection.createRange?function(){var e=n.selection;return"none"!==e.type.toLowerCase()?e.createRange():null}:void 0}(),l.replaceSelection=function(){return t.getSelection?function(e){var i,o=t.getSelection(),s="string"==typeof e?n.createTextNode(e):e;o.getRangeAt&&o.rangeCount&&(i=o.getRangeAt(0),i.deleteContents(),i.insertNode(s),i.setStart(s,0),t.setTimeout(function(){i=n.createRange(),i.setStartAfter(s),i.collapse(!0),o.removeAllRanges(),o.addRange(i)},0))}:n.selection&&n.selection.createRange?function(e){var t=n.selection.createRange();"string"==typeof e?t.text=e:t.pasteHTML(e.outerHTML)}:void 0}(),l.insertAtCursor=function(e,t){e=" "+e;var i,o,s=t.value;void 0!==t.selectionStart&&void 0!==t.selectionEnd?(i=t.selectionStart,t.selectionEnd,t.value=s.substring(0,i)+e+s.substring(t.selectionEnd),t.selectionStart=t.selectionEnd=i+e.length):void 0!==n.selection&&void 0!==n.selection.createRange&&(t.trigger("focus"),o=n.selection.createRange(),o.text=e,o.select())},l.extend=function(e,t){if(void 0!==e&&e||(e={}),"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},l.escapeRegex=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},l.htmlEntities=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var a=function(){};a.prototype.setup=function(){var e=this;this.$editor.on("focus",function(){e.hasFocus=!0}),this.$editor.on("blur",function(){e.hasFocus=!1}),this.setupButton()},a.prototype.setupButton=function(){var t,i=this;this.options.button?t=e(this.options.button):!1!==this.options.button?(t=e('<a href="javascript:void(0)">'),t.html(this.options.buttonLabel),t.addClass("emoji-button"),t.attr({"title":this.options.buttonLabel}),this.$editor[this.options.buttonPosition](t)):t=e(""),t.on("click",function(e){d.show(i)}),this.$button=t},a.createIcon=function(t){var i=e.emojiarea.icons[t],n=e.emojiarea.path||"";n.length&&"/"!==n.charAt(n.length-1)&&(n+="/");var o=e.emojiarea.iconsTitle,s=o[t],a=e("<img/>");return a.attr("src",n+i),a.attr("title",l.htmlEntities(s)),a.attr("alt",l.htmlEntities(t)),a.prop("outerHTML")};var r=function(e,t){this.options=t,this.$textarea=e,this.$editor=e,this.setup()};r.prototype.insert=function(t){e.emojiarea.icons.hasOwnProperty(t)&&(l.insertAtCursor(t,this.$textarea.eq(0)),this.$textarea.trigger("change"))},r.prototype.val=function(){return this.$textarea.val()},l.extend(r.prototype,a.prototype);var c=function(i,o){var s=this;this.options=o,this.$textarea=i,this.$editor=e("<div>").addClass("emoji-wysiwyg-editor"),this.$editor.text(i.val()),this.$editor.attr({"contenteditable":"true"}),this.$editor.on("blur keydown keyup paste",function(e){if(e.originalEvent&&"paste"===e.originalEvent.type&&t.clipboardData&&t.getSelection){var i=t.getSelection().getRangeAt(0);i.endOffset-i.startOffset>0&&i.deleteContents()}return s.onChange.apply(s,arguments)}),this.$editor.on("wheel",function(e){return e.originalEvent.deltaY>0?s.$editor.animate({"scrollTop":"+=100px"},10):s.$editor.animate({"scrollTop":"-=100px"},10),!1}),navigator.appVersion&&-1===navigator.appVersion.indexOf("MSIE 10")&&(this.$editor.on("mousedown focus keydown",function(){n.execCommand("AutoUrlDetect",!1,!1),n.execCommand("enableObjectResizing",!1,!1)}),this.$editor.on("blur",function(){n.execCommand("enableObjectResizing",!0,!0)}));var r=this.$editor.text(),c=/<span data-userid=.*?>\(@.*?\)<\/span>/gi,d=r.match(c),u=e.emojiarea.icons;for(var p in u)u.hasOwnProperty(p)&&(r=r.replace(new RegExp(l.escapeRegex(p),"g"),a.createIcon(p)));var m=r.match(c);if(null!==m&&m.length>0)for(var h in m)r=r.replace(m[h],d[h]);this.$editor.html(r),i.hide().after(this.$editor),this.setup(),e(n.body).on("mousedown touchstart keyup",function(){s.hasFocus&&(s.selection=l.saveSelection())})};c.prototype.onChange=function(e){this.$textarea.val(this.val(e)).trigger("change")},c.prototype.insert=function(t){var i=e(a.createIcon(t));i.attr("tabindex",-1),i[0].attachEvent&&i[0].attachEvent("onresizestart",function(e){e.returnValue=!1},!1),this.selection&&l.restoreSelection(this.selection);try{l.replaceSelection(i[0])}catch(e){}this.onChange(),e("#esoc-social-comment-container").find(".esoc-social-comment-list-item").removeClass("esoc-edit-init-min-height")},c.prototype.val=function(e){for(var t=[],i=[],n=function(){t.push(i.join("")),i=[]},s=function(e,t){if(3===e.nodeType)i.push(e.nodeValue);else if(1===e.nodeType){var l=e.tagName.toLowerCase(),a=-1!==o.indexOf(l);if(a&&i.length&&n(),"input"===l){if(t){if(8!=t.keyCode){var r=e.value||"";r&&i.push(r)}}else{var r=e.value||"";r&&i.push(r)}return}if("img"===l){var r=e.getAttribute("alt")||"";return void(r&&i.push(r))}"br"===l?n():navigator.appVersion&&-1===navigator.appVersion.indexOf("MSIE 10")&&"p"===l&&!e.hasChildNodes()&&n();for(var c=e.childNodes,d=0;d<c.length;d++)s(c[d],t);a&&i.length&&n()}},l=this.$editor[0].childNodes,a=0;a<l.length;a++)s(l[a],e);return i.length&&n(),t.join("\n")},l.extend(c.prototype,a.prototype);var d=function(){var i=this,o=(e(n.body),e(t));this.visible=!1,this.emojiarea=null,this.$menu=e("<div>"),this.$menu.addClass("binf-popover binf-bottom emoji-menu"),this.$menu.hide(),e('<div class="binf-arrow"></div>').appendTo(this.$menu),this.$items=e('<div class="myemoji">').appendTo(this.$menu),e("#esoc-social-comment-container").append(),e.emojiarea.widget.off("keydown").on("keydown",function(e){var t=i.emojiarea?i.emojiarea.$button:"";27!==e.keyCode&&9!==e.keyCode||(i.hide(),t&&t.trigger("focus"))}),e.emojiarea.widget.off("mouseup").on("mouseup",function(t){e(t.target).parents(".esoc-social-attachment-popover").length,!0===i.visible&&i.hide()}),o.off("resize").on("resize",function(){i.visible&&i.reposition()}),this.$menu.on("mouseup","a",function(e){return e.stopPropagation(),!1}),this.$items.on("keydown",function(t){switch(t.which){case e.ui.keyCode.LEFT:t.target.previousSibling&&e(t.target.previousSibling).trigger("focus"),t.preventDefault();break;case e.ui.keyCode.UP:e(t.target).prevAll().eq(4)&&e(t.target).prevAll().eq(4).trigger("focus"),t.preventDefault();break;case e.ui.keyCode.RIGHT:t.target.nextSibling&&e(t.target.nextSibling).trigger("focus"),t.preventDefault();break;case e.ui.keyCode.DOWN:e(t.target).nextAll().eq(4)&&e(t.target).nextAll().eq(4).trigger("focus"),t.preventDefault();break;case e.ui.keyCode.ESCAPE:i.emojiarea.$button.first().trigger("focus"),i.emojiarea.options&&i.emojiarea.options.util&&(i.emojiarea.options.util.emojiObj=i),t.preventDefault(),t.stopPropagation();default:return}}),this.$menu.on("click keydown","a",function(n){if("click"===n.type||32===(n.keyCode||n.which)){var o=e(".binf-label",e(this)).text();return t.setTimeout(function(){i.onItemSelected.apply(i,[o])},0),n.stopPropagation(),!1}}),this.load()};d.prototype.onItemSelected=function(e){this.emojiarea.insert(e),this.emojiarea.$editor.first().trigger("focus"),this.hide()},d.prototype.load=function(){var t=[],i=e.emojiarea.icons,n=e.emojiarea.iconsTitle,o=e.emojiarea.path;o.length&&"/"!==o.charAt(o.length-1)&&(o+="/");for(var s in i)if(i.hasOwnProperty(s)){var r=n[s];t.push('<a href="javascript:void(0)" title="'+r+'">'+a.createIcon(s)+'<span class="binf-label">'+l.htmlEntities(s)+"</span></a>")}this.$items.html(t.join(""))},d.prototype.reposition=function(){if(null!==this.emojiarea&&void 0!==this.emojiarea.options&&0===e(this.emojiarea.options.parent).find(".emoji-menu").length&&this.emojiarea.options.parent.append(this.$menu),null!==this.emojiarea){var t=this.emojiarea.$button,n=t.position();if(this.emojiarea.options.container){var o=this.emojiarea.$button.outerHeight(),l=s(this.emojiarea.options.container).top,a=s(this.emojiarea.$button).top,r=this.$menu.height();a-l>r+o?(n.top=t.outerHeight()-(r+o/2),this.$menu.removeClass("binf-bottom"),this.$menu.addClass("binf-top")):(this.$menu.removeClass("binf-top"),this.$menu.addClass("binf-bottom"),n.top+=t.outerHeight())}else n.top+=t.outerHeight();if(n.left+=Math.round(t.outerWidth()/2),i.settings.rtl){var c=t.parent().outerWidth()-n.left;this.$menu.css({"top":n.top,"right":c})}else this.$menu.css({"top":n.top,"left":n.left})}},d.prototype.hide=function(t){var i;this.emojiarea&&(i=this.emojiarea.options.util,isStatus=this.emojiarea.options.isStatus,this.emojiarea.menu=null,this.emojiarea.$button.removeClass("on"),this.emojiarea=null),this.$menu.remove(),e(".esoc-social-comment-dialog-minheight").removeClass("esoc-social-comment-dialog-minheight"),isStatus||i&&i.setCommentDialogPointer(),new u},d.prototype.show=function(e){this.emojiarea&&this.emojiarea===e||(this.emojiarea=e,this.emojiarea.menu=this,this.reposition(),this.$menu.show(),this.$menu.find("a:first").trigger("focus"),this.visible=!0)};var u=function(){d.show=function(){var e=null;return function(t){e=e||new d,e.show(t)}}()};new u}(t,window,document),t}),csui.define("esoc/lib/jquery.emojiarea/packs/custom/emojis",["module","csui/lib/jquery","esoc/lib/jquery.emojiarea/jquery.emojiarea.custom"],function(e,t,i){t.emojiarea.icons={":)":"smile32.svg",":D":"grin32.svg",":(":"sad32.svg","x(":"angry32.svg",";)":"wink32.svg",":-o":"surprise32.svg",":p":"tounge32.svg",":-s":"worried32.svg",":-/":"confused32.svg",":/)":"eyebrows_raised32.svg","(o)":"oops32.svg","(y)":"thumbsup32.svg","(n)":"thumbsdown32.svg","(*)":"star32.svg","(c)":"coffee_break32.svg","(q)":"question32.svg","(!)":"exclamation32.svg"},t.emojiarea.iconsTitle={":)":"Smile    :)",":D":"Grin    :D",":(":"Sad    :(","x(":"Angry    x(",";)":"Wink    ;)",":-o":"Surprise    :-o",":p":"Tounge    :p",":-s":"Worried    :-s",":-/":"Confused    :-/",":/)":"Raised Eyebrow   :/)","(o)":"Oops    (o)","(y)":"Thumbs Up    (y)","(n)":"Thumbs Down    (n)","(*)":"Star    (*)","(c)":"Coffee    (c)","(q)":"Question    (q)","(!)":"Exclamation    (!)"}}),csui.define("esoc/widgets/socialactions/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("esoc/widgets/socialactions/nls/root/lang",{"comments":"Comments","commentCount":"comments","oneComment":"comment","reply":"Reply","replyCount":"Reply ({0})","attachFile":"Attach file","modifiedAt":"Modified","update":"Update","cancel":"Cancel","commentBlank":"<strong>Oops.</strong> The comment field was blank.","post":"Post","posting":"Posting...","writeAComment":"Write a comment","loadingComments":"Loading comments...","deleteComment":"Delete","edit":"Edit","hide":"Hide","confirmationText1":"Are you sure that you want to delete this comment?","confirmationText2":"All replies to the comment will also be deleted.","deleteCommentheader":"Delete Comment","seeMoreReplies":"Show more replies","fromContentServer":"From Content Server","fromYourDesktop":"From your desktop","attachmentPopoverTitle":"Attachment","attachmentDeleteTitle":"Delete Attachment","editAttachmentTitle":"Edit Attachment","attachmentDeleteDescription":"Are you sure you want to delete the attachment?","close":"Close","uploadAttachment":"Uploading Attachment","deleteReplyheader":"Delete Reply","confirmationTextforReplyDelete":"Are you sure that you want to delete this reply?","emoticon":"Insert Emoji","errorOK":"OK","Smile":"Smile","Grin":"Grin","Sad":"Sad","Angry":"Angry","Wink":"Wink","Surprise":"Surprise","Tounge":"Tounge","Worried":"Worried","Confused":"Confused","RaisedEyebrow":"Raised Eyebrow","Oops":"Oops","ThumbsUp":"Thumbs Up","ThumbsDown":"Thumbs Down","Star":"Star","Coffee":"Coffee","Question":"Question","Exclamation":"Exclamation","targetPickerTitle":"Select a Shortcut","versionMsg":"Added a new version ","version":"Version -","addMsg":"Added ","defaultErrorMessageForUpdateComment":"Server Error: Unable to perform the action","defaultErrorMessageForUpdateWithAttachment":"Server Error: Unable to perform the action","defaultErrorMessageForCreateRemoteObject":"Server Error: Unable to perform the action","defaultErrorMessageForReply":"Server Error: Unable to perform the action","defaultErrorMessageCommentsFetch":"Server Error: Unable to perform the action","defaultErrorMessageUpdatePhoto":"Server Error: Unable to perform photo update","defaultErrorMessageCommentSubmit":"Server Error: Unable to post comment","more":"more","less":"less","noResults":"No results found","itemNotExist":"Sorry, the item you requested could not be accessed. Either it does not exist, or you do not have permission to access it. If you were sent a link to this item, please contact the sender for assistance."}),csui.define("esoc/widgets/socialactions/socialemoticons",["module","csui/lib/jquery"],function(e,t){t.socialEmoticons={"icons":[{"shortcut":":)","image":"smile32.svg","key":"Smile","defaulttitle":"Smile    :)"},{"shortcut":":D","image":"grin32.svg","key":"Grin","defaulttitle":"Grin    :D"},{"shortcut":":(","image":"sad32.svg","key":"Sad","defaulttitle":"Sad    :("},{"shortcut":"x(","image":"angry32.svg","key":"Angry","defaulttitle":"Angry    x("},{"shortcut":";)","image":"wink32.svg","key":"Wink","defaulttitle":"Wink    ;)"},{"shortcut":":-o","image":"surprise32.svg","key":"Surprise","defaulttitle":"Surprise    :-o"},{"shortcut":":p","image":"tounge32.svg","key":"Tounge","defaulttitle":"Tounge    :p"},{"shortcut":":-s","image":"worried32.svg","key":"Worried","defaulttitle":"Worried    :-s"},{"shortcut":":-/","image":"confused32.svg","key":"Confused","defaulttitle":"Confused    :-/"},{"shortcut":":/)","image":"eyebrows_raised32.svg","key":"RaisedEyebrow","defaulttitle":"Raised Eyebrow   :/)"},{"shortcut":"(o)","image":"oops32.svg","key":"Oops","defaulttitle":"Oops    (o)"},{"shortcut":"(y)","image":"thumbsup32.svg","key":"ThumbsUp","defaulttitle":"Thumbs Up    (y)"},{"shortcut":"(n)","image":"thumbsdown32.svg","key":"ThumbsDown","defaulttitle":"Thumbs Down    (n)"},{"shortcut":"(*)","image":"star32.svg","key":"Star","defaulttitle":"Star    (*)"},{"shortcut":"(c)","image":"coffee_break32.svg","key":"Coffee","defaulttitle":"Coffee    (c)"},{"shortcut":"(q)","image":"question32.svg","key":"Question","defaulttitle":"Question    (q)"},{"shortcut":"(!)","image":"exclamation32.svg","key":"Exclamation","defaulttitle":"Exclamation    (!)"}]}}),csui.define("esoc/widgets/activityfeedwidget/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("esoc/widgets/activityfeedwidget/impl/nls/root/lang",{"dialogTitle":"Activity Feed","searchPlaceholder":"Search in ActivityFeed","expandTitle":"Expand","name":"Step or task name","parent_id":"Workflow or task list name","versionMsg":"Added version ","modifiedAt":"Modified","addMsg":"Added ","commentMsg":"Commented ","replyMsg":"Replied ","commentLabel":"Comment","status":"\u2019s status","version":"version","contentupdates":"Content updates","statusupdates":"Status updates","attributeupdates":"Attribute updates","allusers":"All users","iamfollowing":"Users I am following","myfollowers":"My followers","myupdates":"My own updates","mentions":"@Mentions","myfavorites":"My Favorites","activitytypes":"Activity types","refineby":"Refine by","updatesfrom":"Updates from","allselectedlabel":"Activity types (All)","emptyactivityfeed":"No activities found.","emptyactivityfeedforuserprofile":"No activities","more":"more","less":"less","comments":"Comments","newupdates":"New updates","statusfeed":"Status post","cancel":"Cancel","userProfileLink":"User Profile Link","loadingText":"Loading activity feed"}),csui.define("hbs!esoc/widgets/activityfeedwidget/impl/newupdates",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"newupdates"):s,t))+'" class="'+e.escapeExpression((l=null!=(l=a(i,"newUpdatesWrapperClass")||(null!=t?a(t,"newUpdatesWrapperClass"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"newUpdatesWrapperClass","hash":{},"loc":{"start":{"line":1,"column":44},"end":{"line":1,"column":70}}}):l))+'" tabindex="0" data-cstabindex="0">\r\n  <span class="esoc-activityfeeed-new-updates">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"newupdates"):s,t))+'</span>\r\n  <span title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"cancel"):s,t))+'" class="esoc-activityfeed-close"></span>\r\n</div>'}});return i.registerPartial("esoc_widgets_activityfeedwidget_impl_newupdates",n),n}),csui.define("esoc/widgets/common/util",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","esoc/lib/jquery.emojiarea/packs/custom/emojis","csui/models/node/node.model","csui/models/nodechildren","csui/utils/log","csui/utils/commands","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/user","csui/utils/contexts/factories/member","i18n!esoc/widgets/socialactions/nls/lang","csui/dialogs/modal.alert/modal.alert","esoc/widgets/socialactions/socialemoticons","csui/utils/namedsessionstorage","csui/utils/url","csui/behaviors/keyboard.navigation/tabable.region.behavior","i18n!esoc/widgets/activityfeedwidget/impl/nls/lang","hbs!esoc/widgets/activityfeedwidget/impl/newupdates","csui/lib/jquery.binary.ajax"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f,g,b,v,y){return{"globalConstants":{"MAX_ID":"max_id","SINCE_ID":"since_id","MAX_CHAR_LIMIT":1e3,"REPLY_COUNT":"reply_count","REQUEST_TYPE_ATTACHMENT_DELETE":"AttachmentDelete","FETCH_NEXT_PAGE_MODELS_LENGTH":5,"SHOW_SEE_MORE_MODELS_LENGTH":4,"DOCUMENT_ATTACHMENT_SUBTYPE":144,"SHORTCUT_ATTACHMENT_SUBTYPE":1,"ROI_OBJECT_TYPE":952,"MEMBERS":"/members/","PHOTO":"/photo","USERID":"userid","USERDETAILS":"userdetails","ESOCIAL_USER_INFO":"esoc-user-info","EMOJI_URL":"/socialfeed/app/lib/jquery.emojiarea/packs/custom","PULSE_RESOURCE_COUNT":10,"FRIENDS":"friends","FOLLOWERS":"followers","INCLUDES":"includes","EXTENDEDINFO":"extendedInfo","CHAT_SEETING":"chatSetting","CHAT_SEETINGS":"chatSettings","FIELD_MAX_CHAR_LIMIT":"maxCharLimit","UPDATE_EXTENDED_INFO":"updateExtendedInfo","FIELDS":"fields","COUNT":"count","SETTINGS":"settings","USER_PRIVACY_SETTINGS":["everyone","follow","nobody"],"FOLLOW":"follow","UNFOLLOW":"unfollow","ACTION":"action","UPDATE_SETTINGS_ACTION":"updateSettings","CONTENT_PRIVACY":"contentPrivacy","STATUS_PRIVACY":"statusPrivacy","EXPAND":"expand","MEMBER":"member","HTTP_LINK":"http://","event_bus":i.extend({},n.Events),"URI_DELIMITER":":","AT_SIGN_SYMBOL":"@","URI_PREFIX":"sip"},"REST_URLS":{"csGetCommentRESTUrl":"/pulse/statuses/public_timeline?includes=actions,reply_count,user_info&excludes=replies&count=5&","csPostCommentRESTUrl":"/pulse/statuses/update","csGetROI":"/objectsocialinfo?","csCreateROI":"/remote_objects","csGetAFSinceId":"/pulse/statuses/socialactivity?where_feedtype=","membersRESTUrl":"/members?where_type=0","chatHistoryUrl":"/members/","pulseRestUrl":"/pulse/members/","pulseInfoRestUrl":"/pulse_info","updatePhotoUrl":"/pulse/upload_profile_photo","pulseSettingsUrl":"/pulse/settings","searchUsersUrl":"/pulse/searchUsers","deletePhotoUrl":"/pulse/members/photo"},"config_settings":{"feedsAutoRefreshWait":6e4,"maxMessageLength":1e3,"maxNumOfEntries":20,"visibility":"on"},"lang":p,"log":a,"onClickableUrl":function(e,i){e=e.replace(/<img/gi," <img"),e=e.replace(/&nbsp;/gi," ");var n=/(https?:\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi,o=/https?:\/\/\S+\.(svg)/gi,s=e.match(o);s&&s.length>0&&(e=e.replace(/.svg"/gi,'.svg" '));var l=e.match(n),a=e,r="",c=0,d=1,u=0;if(null!==l&&l.length>0){for(c=0;c<l.length;c++){u=a.indexOf(l[c]),u>0&&(r+=a.substring(0,u));var p=l[c].split("&lt;");if(0!==p[0].indexOf(t.emojiarea.path)||i)for(p[0].length>30?(p[0]=this.revHtmlEntities(p[0]),r+='<a href="'+p[0]+'" target="_blank" rel="noopener noreferrer">'+this.decodeHtmlEntities(p[0].substring(0,30))+"...</a>"):r+='<a href="'+p[0]+'" target="_blank" rel="noopener noreferrer">'+p[0]+"</a>",d=1;d<p.length;d++)r+="&lt;"+p[d];else r+=p[0];a=a.substring(u+l[c].length)}r+=a}else r=e;return r},"getEmojiPath":function(e){var t=this,i=e.connection;return new g(i.url).getOrigin()+i.supportPath+t.globalConstants.EMOJI_URL},"createEmojiIcons":function(){var e=new Object({}),i=this,n=new Object({});t.each(t.socialEmoticons.icons,function(t,o){e[o.shortcut]=o.image,i.lang[o.key]?n[o.shortcut]=i.lang[o.key]+"  "+o.shortcut:n[o.shortcut]=o.defaulttitle}),t.emojiarea.icons=e,t.emojiarea.iconsTitle=n},"addEmoji":function(e,i,n){var o=e.html(),s=t.emojiarea.icons;for(var l in s)s.hasOwnProperty(l)&&(o=o.replace(new RegExp((l+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g"),this.createIcon(l,n)));e[0].innerHTML=i?this.onClickableUrl(o):o},"preventDrop":function(e){e.on("drop",function(e){return e.preventDefault(),!1})},"createIcon":function(e,i){t.emojiarea.path=this.getEmojiPath(i);var n=t.emojiarea.icons[e],o=t.emojiarea.path||"";o.length&&"/"!==o.charAt(o.length-1)&&(o+="/");var s=t.emojiarea.iconsTitle,l=s[e];return"<img src='"+o+n+"' title='"+this.htmlEntities(l)+"' alt='"+this.htmlEntities(e)+"'>"},"htmlEntities":function(e){var t=document.createElement("textarea");return t.innerHTML=e,String(t.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},"openWarningDialog":function(e){t(e.parent).append(t("#mdAlert")),m.showWarning(this.replaceBreakTagWithNewLine(e.errorContent)),t("#mdAlert .btn-close, #mdAlert .binf-close").on("click",function(){t("body").append(t("#mdAlert"))})},"openErrorDialog":function(e){t(e.parent).append(t("#mdAlert")),m.showError(this.replaceBreakTagWithNewLine(e.errorContent)),t("#mdAlert .btn-close, #mdAlert .binf-close").on("click",function(){t("body").append(t("#mdAlert"))})},"replaceBreakTagWithNewLine":function(e){if(e){var t=/<br\s*[\/]?>/gi;return e.replace(t,"\n")}return""},"isChrome":function(){return window.navigator.appVersion.indexOf("Chrome")>0},"isIE":function(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0},"onCommentFormPaste":function(e,t,i){var n;e.preventDefault(),e.originalEvent.clipboardData?(n=(e.originalEvent||e).clipboardData.getData("text/plain"),n.length+t>i&&(n=n.substr(0,i-t)),document.execCommand("insertText",!1,n)):window.clipboardData&&(n=window.clipboardData.getData("Text"),n.length+t>i&&(n=n.substr(0,i-t)),document.execCommand("AutoUrlDetect",!1,!1),window.getSelection&&(window.getSelection().getRangeAt(0).insertNode(document.createTextNode(n)),window.getSelection().removeAllRanges()))},"fillDefaultActivityOptions":function(e){var t=e.data?e.data:e;t&&(void 0===t.feedtype&&(t.feedtype="all"),void 0===t.feedsource&&(t.feedsource={"source":"all"}),void 0===t.feedSettings&&(t.feedSettings={"enableComments":!0}),void 0===t.updatesfrom&&(t.updatesfrom={"from":"all"})),e=t},"getActivityWidgetId":function(e){var t="",i=e.data?e.data:e;return i&&(void 0!==i.feedtype&&(t="ft",i.feedtype.indexOf("all")>-1&&(t+="_a"),i.feedtype.indexOf("content")>-1&&(t+="_c"),i.feedtype.indexOf("status")>-1&&(t+="_s"),i.feedtype.indexOf("attributes")>-1&&(t+="_at")),void 0!==i.feedsource&&(t+="_fs_",void 0!==i.feedsource.source&&(t+=i.feedsource.source),void 0!==i.feedsource.id&&(t+=i.feedsource.id)),t+="_fst_",void 0!==i.feedSettings&&i.feedSettings.enableComments&&(t+="ec"),void 0!==i.feedSettings&&i.feedSettings.enableFilters&&(t+="ef"),void 0!==i.enableComments&&i.enableComments&&(t+="ec"),void 0!==i.enableFilters&&i.enableFilters&&(t+="ef"),void 0!==i.updatesfrom&&(t+="_uf_",void 0!==i.updatesfrom.from&&(t+=i.updatesfrom.from),void 0!==i.updatesfrom.id&&(t+=i.updatesfrom.id)),void 0!==i.wrapperClass&&(t+="_hr_"),void 0!==i.origin&&(t+="_org_"+i.origin),void 0!==i.honorfeedsource&&(t+="_hfs_"+i.honorfeedsource)),t},"navigationWithArrowKeys":function(e,i){var n,o,s,l,a=this;n=e.$el.find(".esoc-activityfeed-list-item a").filter(":visible"),n.prop("tabindex","-1").attr("data-cstabindex","-1"),o=e.$el.find(".esoc-activityfeed-list-item:first div a:first"),o&&o.length&&(o.prop("tabindex","0").attr("data-cstabindex","0"),l=o),s=e.$el.find("*[data-cstabindex=0]"),s.length&&s.prop("tabindex",0),e.$el.find(i).on("keydown",".esoc-activityfeed-list-item",function(i){var n,o,s,r=i.currentTarget,c=i.target,d=t(r).find("div a:not(.esoc-hide-element)"),u=d.length;if(9===i.keyCode){var p=e.options.userProfileView;p&&(s=p.$el.find("ul.esoc-user-profile-tabcontainer li").eq(p.options.tabIndex+1),s.children()&&s.children().eq(0)&&(i.preventDefault(),i.stopPropagation(),s.children().eq(0).trigger("focus")),e.$el.find("[tabindex="+p.options.tabIndex+"]").filter(":visible").prop("tabindex","-1"))}if(i.keyCode===t.ui.keyCode.DOWN){for(o=0;o<u;o++)if(d[o]===c){n=d[o+1];break}o!==u-1||n||(s=t(r).next(),n=t(s).find("div a:first")),n&&!t(n).length&&(s=t(s).next(),n=t(s).find("div a:first"))}else if(i.keyCode===t.ui.keyCode.UP){for(o=0;o<u;o++)if(d[o]===c){n=d[o-1];break}0!==o||n||(s=t(r).prev(),n=t(s).find("div a:not(.esoc-hide-element):last")),n&&!t(n).length&&(s=t(s).prev(),n=t(s).find("div a:not(.esoc-hide-element):last"))}t(n).length&&(a.moveFocusFromSrcToDest(e,t(c),t(n)),l=t(n),i.preventDefault())});var r='.csui-facet:first [data-cstabindex="0"],.csui-facet:first [data-cstabindex="-1"]',c=[];"userwidget"!==e.options.origin?(c.push(r),c.push('.csui-facet:last [data-cstabindex="0"],.csui-facet:last [data-cstabindex="-1"]')):c.push(r),c.forEach(function(i){e.$el.find(i).on("focus",function(i){var n,o=t(i.target);o.is(":visible")&&(i.hasOwnProperty("originalEvent")&&"-1"===o.attr("data-cstabindex")?(n=e.$el.find('.csui-facet:first input[data-cstabindex="0"]'),a.moveFocusFromSrcToDest(e,n,o,!0)):a.addTabableClass(e,t(i.target)))})}),e.$el.find(i).on("focus",".esoc-activityfeed-list-item",function(i){var n=t(i.target);n.is(":visible")&&(l||(l=e.$el.find('.esoc-activityfeed-list-item [data-cstabindex="0"]')),i.hasOwnProperty("originalEvent")&&"-1"===n.attr("data-cstabindex")?a.moveFocusFromSrcToDest(e,l,n,!0):a.addTabableClass(e,n),l=n)})},"moveFocusFromSrcToDest":function(e,t,i,n){if(t[0]===i[0])return void this.addTabableClass(e,i);-1===t.prop("tabindex")?i.prop("tabindex","0").attr("data-cstabindex","0"):i.prop("tabindex",t.prop("tabindex")).attr("data-cstabindex","0"),t.prop("tabindex","-1").attr("data-cstabindex","-1"),this.addTabableClass(e,i),n||i.trigger("focus")},"addTabableClass":function(e,t){var i,n=e.options.userProfileView;i=n?n.options:e,i.focusedElement&&i.focusedElement.removeClass(b.accessibilityActiveElementClass),t.addClass(b.accessibilityActiveElementClass),i.focusedElement=t},"getUserProfileRestApiURL":function(e,t){return e+this.globalConstants.MEMBERS+t+this.globalConstants.PHOTO},"getUserPhotoURL":function(e){var i=t.Deferred(),n=function(t){return g.combine(new g(e.connectionURL).getCgiScript(),t.attributes.photo_url)};if(e.userModel&&e.userModel.attributes.hasOwnProperty("photo_url")){var o=e.userModel.get("photo_url")?n(e.userModel):"";i.resolve(o)}else{var s=this.getUserWidgetModel(e);e.noCache?s.fetch().done(function(){i.resolve(n(s))}):s.ensureFetched().done(function(){i.resolve(n(s))})}return i},"updateQueryStringValues":function(e,t,i){var n=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=-1!==e.indexOf("?")?"&":"?";return e.match(n)?e.replace(n,"$1"+t+"="+i+"$2"):e+o+t+"="+i},"decodeHtmlEntities":function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},"revHtmlEntities":function(e){return String(e).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},"updateAjaxCall":function(e){var i=this,n=e.itemview,o=e.url,s=e.currentNodeModel,l=e.requestType,a=e.userId||n&&n.model.get("id"),r=e.targetElement,c=(e.photoElement,e.defaultPhotoElement,e.data),u=e.type,p=(e.imageElement,function(){var e=n.options.context&&n.options.context.getFactory(d);n&&e&&(e.options[a]&&(e.options[a]=""),e.options[a+"_blob_content"]&&(e.options[a+"_blob_content"]=""))}),m=e.connector;m.authenticator.syncStorage(),t.ajax(m.extendAjaxOptions({"url":o,"type":u,"data":c,"contentType":!1,"crossDomain":!0,"processData":!1,"success":function(e,o,a){switch(l){case"updatePhoto":p(),n.$el.find(".esoc-userprofile-actions .esoc-profile-img-load-container").removeClass("esoc-progress-display"),n.$el.find(".esoc-userprofile-actions .esoc-full-profile-avatar").removeClass("esoc-profile-opacity"),n.$el.find(t("#esoc-profilepic-desktop-attachment")).val("");var r={"noCache":!0,"connector":m,"userid":n.options.userid,"context":n.options.context};i.setProfilePic(r);var c=n.options.context.getModel(d),u=i.getUserPhotoURL({"context":r.context,"noCache":r.noCache,"connectionURL":m.connection.url,"userid":r.userid});u.promise().done(function(e){c.attributes.photo_url=e.replace(new g(m.connection.url).getCgiScript(),""),n.$el.find(".esoc-simple-user-widget").length>0&&n.model&&(n.model.attributes.photo_url=e.replace(new g(m.connection.url).getCgiScript(),"")),c.trigger("change"),t(".esoc-simple-profile-img-load-container").removeClass("esoc-simple-profile-img-load-icon")}),n.$el.find(t("#esoc-profilepic-desktop-attachment")).val("");break;case"deletePhoto":p(),r={"noCache":!0,"connector":m,"userid":n.options.userid,"context":n.options.context},i.setProfilePic(r),c=n.options.context.getModel(d),u=i.getUserPhotoURL({"context":r.context,"noCache":r.noCache,"connectionURL":m.connection.url,"userid":r.userid}),u.promise().done(function(e){c.attributes.photo_url=e.replace(new g(m.connection.url).getCgiScript(),""),n.$el.find(".esoc-userprofile-default-avatar").css("display","inline-flex"),n.$el.find(".esoc-simple-user-widget").length>0&&n.model&&(n.model.attributes.photo_url=e.replace(new g(m.connection.url).getCgiScript(),"")),c.trigger("change")});break;case"updateCommentCount":var h=e.results&&e.results.data&&e.results.data.properties;h&&i.updateCommentCount({"currentNodeModel":s,"commentCount":h.wnd_comments});break;case"getCommentCount":var f=e.results&&e.results[0]&&e.results[0].data&&e.results[0].data.properties;f&&i.updateCommentCount({"currentNodeModel":s,"commentCount":f.wnd_comments})}},"error":function(e,t,o){switch(l){case"updatePhoto":n.$el.find(".esoc-userprofile-actions .esoc-profile-img-load-container").removeClass("esoc-progress-display"),n.$el.find(".esoc-userprofile-actions .esoc-full-profile-avatar").removeClass("esoc-profile-opacity"),n.$el.find("#esoc-profilepic-desktop-attachment").val("");var s={"parent":r,"errorContent":e.responseJSON?e.responseJSON.errorDetail?e.responseJSON.errorDetail:e.responseJSON.error:i.lang.defaultErrorMessageUpdatePhoto};i.openErrorDialog(s)}}}))},"updateCommentCount":function(e){var i=e.currentNodeModel,n=e.commentCount;if(i.attributes.wnd_comments=n,void 0!==n){var o=t(".wnd_comments_validated[data-csid='"+i.attributes.id+"']"),s=t(".esoc-socialactions-comment[data-value='"+i.attributes.id+"']");n>1?(o.attr("title",n+" "+p.commentCount),s.attr("aria-label",n+" "+p.commentCount)):1===n?(o.attr("title",n+" "+p.oneComment),s.attr("aria-label",n+" "+p.oneComment)):(o.attr("title",""),
s.attr("aria-label",p.comments)),n>0?(n=n>99?"99+":n,o.html(n),s.find(".cs-icon-comment").addClass("csui-non-empty-comment-icon")):(o.html(""),s.find(".cs-icon-comment").removeClass("csui-non-empty-comment-icon"))}},"setProfilePic":function(e){var n=e.context,o=e.context.getObject(c),s=o.connection;new g(s.url);this.getUserPhotoURL({"context":e.context,"noCache":e.noCache,"connectionURL":s.url,"userid":e.userid,"userModel":e.userModel}).promise().done(function(l){var a=e.photoElement?e.photoElement:t(".esoc-userprofile-img-"+e.userid),r=e.defaultPhotElement?e.defaultPhotElement:t(".esoc-user-default-avatar-"+e.userid);l&&l.match(/v=/)?function(l){var c=t.Deferred(),u=e.userid,p=n&&n.getFactory(d),m=p&&p.options[u];return m&&m.length?p.options[u+"_blob_content"]?c.resolve(p.options[u+"_blob_content"],a,r):p.options[u].push(function(e){e?c.resolve(e,a,r):c.reject(a,r)}):(p.options[u]=[],p.options[u].push(function(e){e?c.resolve(e,a,r):c.reject(a,r)}),o.makeAjaxCall({"url":l,"dataType":"binary","connection":s}).done(function(e){var t=URL.createObjectURL(e);p.options[u+"_blob_content"]=t,i.each(p.options[u],function(e){e(t)}),p.options[u]=[]}).fail(function(){i.each(p.options[u],function(e){e()})})),c.promise()}(l).done(function(t,i,n){n.hide(),i.show(),i.removeClass("binf-hidden"),i.attr("src",t),e.viewShownEvent&&e.parentView&&e.parentView.trigger("view:shown")}).fail(function(){a.hide(),a.removeClass("binf-hidden"),r.addClass("esoc-user-show-profilepic"),r.css("display","inline-flex"),r.removeClass("binf-hidden"),e.viewShownEvent&&e.parentView&&e.parentView.trigger("view:shown")}):(a.hide(),a.removeClass("binf-hidden"),r.addClass("esoc-user-show-profilepic"),r.css("display","inline-flex"),r.removeClass("binf-hidden"),e.viewShownEvent&&e.parentView&&e.parentView.trigger("view:shown"))})},"setUserColor":function(e){var i=e.defaultPhotElement?e.defaultPhotElement:t(".esoc-user-default-avatar-"+e.userid);e.userbackgroundcolor&&i&&i.css("background",e.userbackgroundcolor)},"openItem":function(e){var i=this,n=e.node,o=e.callingViewInstance,s=!!n.original&&n.original.get("id")>0;(n.get("container")||5574===n.get("type")||s&&(n.original.get("container")||258===n.original.get("type")))&&(t(".esoc-user-widget-dialog .cs-close").trigger("click"),i.unbindWidget(),t(".activityfeed-expand .cs-close").trigger("click")),o.triggerMethod("execute:defaultAction",n)},"getV2Url":function(e){return e.getApiBase("v2")},"unbindWidget":function(e){e&&e.activityfeeditem&&(e.commentAction?(delete e.commentAction,e.activityfeeditem.trigger("commentdialog:action")):e.activityfeeditem.trigger("start:notification")),t("[id*=esoc-social-comment-widget]").remove(),t("[id*=esoc-social-comment-widget-pointer]").remove(),t("[id*=esoc-social-comment-widget-mask]").remove(),t(".cs-expanded.activityfeed-expand.esoc").prop("disabled",!1)},"isTextOverflown":function(e){var t=e[0]||e,i=t.style.overflow;i&&"visible"!==i||(t.style.overflow="hidden");var n=t.clientWidth+5<t.scrollWidth||t.clientHeight+5<t.scrollHeight;return t.style.overflow=i,n},"showMoreContent":function(e,i,n){var o=t(i.$el.find(".esoc-see-less").eq(0)),s=t(i.$el.find(".esoc-see-more").eq(0)),l=t(n).eq(0);t(o).removeAttr("style"),t(o).show().removeClass("esoc-hide-element").trigger("focus"),t(s).hide().addClass("esoc-hide-element"),t(l).removeClass("esoc-see-more-content"),i.options.parentCollectionView.triggerMethod("update:scrollbar"),t(l).removeClass("esoc-see-more-activity"),t(l).addClass("esoc-see-less-activity")},"showLessContent":function(e,i,n){var o=t(i.$el.find(".esoc-see-less").eq(0)),s=t(i.$el.find(".esoc-see-more").eq(0)),l=t(n).eq(0);t(o).hide().addClass("esoc-hide-element"),t(s).removeAttr("style"),t(s).show().removeClass("esoc-hide-element").trigger("focus"),t(l).addClass("esoc-see-more-content"),i.options.parentCollectionView.triggerMethod("update:scrollbar"),t(l).addClass("esoc-see-more-activity"),t(l).removeClass("esoc-see-less-activity")},"alignUpdateButton":function(e,i){var n,o,s=t(".esoc-activityfeed-list.esoc-activityfeed-list-"+e);i?(n=t("<div />",{"class":"esoc-activityfeed-new-updates-wrapper","html":y({"messages":v,"newUpdatesWrapperClass":"esoc-activityfeed-getnewupdates esoc-activityfeed-getnewupdates-"+e})}),0===s.closest(".esoc-afw-newupdates").parent().find(".esoc-activityfeed-getnewupdates-"+e).length&&(s.closest(".esoc-afw-newupdates").parent().append(n),o=t("<div />",{"class":"esoc-activityfeed-invisiblebutton"}),s.append(o))):n=t(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+e),s.length>0&&n.css({"position":"absolute","top":"15px","left":"50%","transform":"translate(-50%, -50%)"})},"updateSelection":function(e,i,n){if("checkbox"===e.target.type){var o=i.$el.find("#"+e.target.id+"_checkbox");e.target.checked?o.addClass("icon-checkbox-selected").removeClass("icon-checkbox"):o.addClass("icon-checkbox").removeClass("icon-checkbox-selected")}else if("radio"===e.target.type){var s=e.target.id,l=t(e.target).attr("name");i.$el.find('input[type="radio"][name='+l+"]").each(function(){var e=t(this).attr("id");e!==s?(t(this).prop("checked",!1),i.$el.find(t("#"+e+"_radio")).addClass("icon-radiobutton").removeClass("icon-radiobutton-selected")):(t(this).prop("checked",!0),i.$el.find(t("#"+e+"_radio")).addClass("icon-radiobutton-selected").removeClass("icon-radiobutton"))})}},"getUserWidgetModel":function(e){var t=e.context.getModel(u,{"attributes":{"id":e.userid},"options":{"id":e.userid,"connector":e.connector},"temporary":!0});return t.setExpand("member"),t},"buildNodeModel":function(e,t,n){var o=i.extend({},e.attributes);return delete o.actions,n?(o=i.extend({"commands":e.attributes.attachmentCommands},o),o.id=e.attributes.extended_info&&e.attributes.extended_info.attachment_original_data_id?parseInt(e.attributes.extended_info.attachment_original_data_id,10):parseInt(e.attributes.extended_info.attachment_id,10)):(o=i.extend({"commands":e.attributes.sgmCommands},o),o.id=1===e.attributes.extended_info.subtype?e.attributes.extended_info.sgm_original_data_id:e.attributes.data_id),new s(o,{"connector":t,"parse":!0})},"placeCaretAtEnd":function(e){if(void 0!==window.getSelection&&void 0!==document.createRange){e.trigger("focus");var t=(window.getSelection().focusNode.textContent,window.getSelection());if(t.rangeCount){var i=t.getRangeAt(0);i=i.cloneRange(),i.selectNodeContents(e[0]),i.collapse(!1),t.removeAllRanges(),t.addRange(i)}e.trigger("focus")}else if(void 0!==document.body.createTextRange){var n=document.body.createTextRange();n.moveToElementText(e),n.collapse(!1),n.select()}}}}),csui.define("esoc/widgets/userwidget/model/userwidget.model",["csui/lib/backbone","csui/utils/url","csui/utils/namedsessionstorage","esoc/widgets/common/util"],function(e,t,i,n){return e.Model.extend({"defaults":{"userid":"","firstname":"","lastname":"","username":""},"connector":"","namedSessionStorage":new i(n.globalConstants.ESOCIAL_USER_INFO),"constructor":function(t,i){void 0!==t&&(this.attributes=t),this.defaults.userid=i.userid,e.Model.prototype.constructor.apply(this,arguments),i&&i.connector&&i.connector.assignTo(this)},"url":function(){return n.updateQueryStringValues(t.combine(this.connector.connection.url,"members",this.attributes.userid),n.globalConstants.EXPAND,n.globalConstants.MEMBER)},"parse":function(e){var t={},i=e.data;return t.display_name=i.display_name,t.id=i.id,t.department_name=i.group_id?i.group_id.name:"",t.office_location=i.office_location,t.business_email=i.business_email,t.title=i.title,t.business_fax=i.business_fax,t.business_phone=i.business_phone,t.time_zone=i.time_zone,t.photo_url=i.photo_url,t.deleted=i.deleted,""!==this.attributes.userid&&this.namedSessionStorage.set(n.globalConstants.USERDETAILS+this.attributes.userid,t),t}})}),csui.define("esoc/widgets/userwidget/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("esoc/widgets/userwidget/nls/root/lang",{"comments":"Comments","viewprofile":"View profile","unfollow":"Unfollow","follow":"Follow","chat":"Chat","chatlabeltext":"Chat with {0}","general":"General","extended":"Extended","personal":"Personal","following":"Following","followers":"Followers","followingTooltip":"Following {0}","followersTooltip":"Followers {0}","activity":"Activity","settings":"Settings","notification":"Notifications","notifyMentions":"Notify me when I am mentioned","notifyNewFollower":"Notify me when I have a new follower","notifyCommentsMyPosts":"Notify me when someone comments on my content","notifyCommentsMyThreads":"Notify me when someone comments on a thread I have participated in","notifyPrivateMessages":"Notify me when I am sent a private message","privacySettings":"Privacy settings for content messages","privacySettingsForStatusMessages":"Privacy settings for status messages","privacyEveryOne":"Everyone","privacyFollow":"Only the people I follow","privacyNone":"Only me","notifyMyUpdatesTo":"Show my updates to:","myProfile":"My profile","othersProfile":"{0}'s profile","phone":"Phone:","fax":"Fax:","timezone":"Time zone:","facebookLink":"Facebook profile link","linkedinLink":"Linkedin profile link","twitterLink":"Twitter profile link","manager":"Manager's name","defaultManagerMessage":"Enter the name of your manager.","languagesSpoken":"Languages spoken","aboutMe":"About me","jobDescription":"Job description","expertiseAreas":"Areas of expertise","pastPositions":"Past positions","degrees":"Degrees / Certifications","awards":"Awards / Honors","defaultLanguagesMessage":"List the languages that you speak.","defaultAboutMeMessage":"Write a brief description about yourself.","defaultfacebookMessage":"Provide a link to your Facebook profile.","defaultLinkedInMessage":"Provide a link to your LinkedIn profile.","defaulttwitterLinkMessage":"Provide a link to your Twitter profile.","defaultJobDesc":"Summarize your job responsibilities.","defaultExpertise":"Describe your areas of expertise.","defaultPastPositions":"List your relevant past positions.","defaultDegreeMessage":"List your degrees or certifications.","defaultAwardMessage":"List your awards or honors.","noFollowersMessage":"List is empty. No one is following you","noFriendsMessage":"You are not following anyone yet. To begin following, search for a user and, on their profile page, click Follow.","updatePic":"Update picture","edit":"Edit","update":"Update","cancel":"Cancel","more":"more","less":"less","userpickerplaceholder":"Search Users","defaultErrorMessageForMiniProfilePopup":"Server Error: Unable to display miniprofile","defaultErrorMessageForRelation":"Server Error: Unable to perform operation","defaultErrorMessageForUpdateSettings":"Server Error: Unable to update settings","defaultErrorMessageForUpdateExtentedField":"Server Error: Unable to update field","defaultErrorMessageForUpdateExtentedLink":"Server Error: Unable to update link","defaultErrorMessageForUserProfileActionLink":"Server Error: Unable to follow/unfollow a deleted user","previous":"Previous","next":"Next","emoticon":"Insert Emoji","defaultStatusPost":"Post your status here","statusPost":"My status","defaultErrorMessageForStatusPost":"Server Error: Unable to post status","presenceTooltipTextFormat":"{0} {1}","presenceUnknownTooltipText":"Unknown","presenceBeRightBackTooltipText":"Be Right Back","presenceBusyTooltipText":"Busy","presenceAwayTooltipText":"Away","presenceOfflineTooltipText":"Offline","presenceOnlineTooltipText":"Available","presenceInaConferenceCallTooltipText":"In a Conference Call","presencePresentingTooltipText":"Presenting","presenceDoNotDisturbTooltipText":"Do Not Disturb","presenceInaMeetingTooltipText":"In a Meeting","presenceInaCallTooltipText":"In a Call","presenceIdleOnlineTooltipText":"Inactive","presenceIdleBusyTooltipText":"Inactive Busy","presenceOutOfOfficeTooltipText":"Out of Office","goBackTo":"Go Back to","othersProfileTooltip":"'{0}'s' profile","simpleUserProfileManagerLabel":"Manager","simpleUserProfileOfficeLocation":"Office location","simpleUserProfileEmail":"Email","simpleUserProfileLabel":"Update profile picture","simpleUserProfileMobile":"Mobile","simpleUserProfilePhoneLabel":"Phone","profile":"Profile","uploadProfilePicture":"Upload profile picture","deleteProfilePicture":"Delete profile picture","dialogCloseButtonTooltip":"Close","closeDialogLabel":"Close Dialog","chatLabel":"Chat","image":"User Picker Image","sidePanelCloseButton":"Close","lblLeave":"Leave","txtLeaveContentMgt":"Leave page without enabling Content Manager mode?","hrdUnsaved":"Unsaved changes","txtEnableContentMgt":"The reason you have entered for enabling Content Manager mode has not been saved.  Save before continuing?","lblSave":"Save","lblDiscard":"Discard"}),csui.define("esoc/widgets/utils/chat/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("esoc/widgets/utils/chat/impl/nls/root/lang",{"labeltext":"Chat"}),csui.define("esoc/widgets/utils/chat/impl/util",["module","csui/lib/jquery","csui/lib/underscore","i18n!esoc/widgets/utils/chat/impl/nls/lang","esoc/widgets/common/util"],function(e,t,i,n,o){return{"lang":n,"commonUtil":o,"launchChatWindow":function(e){var t=e.uriPrefix?e.uriPrefix:o.globalConstants.URI_PREFIX,i=t+o.globalConstants.URI_DELIMITER+e.tguser+o.globalConstants.AT_SIGN_SYMBOL+e.domain;window.location=i}}}),csui.define("hbs!esoc/widgets/utils/chat/impl/chatbutton",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<a class='esoc-social-chat-icon' title='"+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"labeltext"):s,t))+"'></a>"}});return i.registerPartial("esoc_widgets_utils_chat_impl_chatbutton",n),n}),csui.define("css!esoc/widgets/utils/chat/impl/chat",[],function(){}),csui.define("esoc/widgets/utils/chat/chat.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","i18n!esoc/widgets/utils/chat/impl/nls/lang","esoc/widgets/utils/chat/impl/util","hbs!esoc/widgets/utils/chat/impl/chatbutton","css!esoc/widgets/utils/chat/impl/chat.css"],function(e,t,i,n,o,s,l){return n.ItemView.extend({"className":"esoc-social-chat-control","template":function(e){return e.messages.customtemplate?e.messages.customtemplate:l(e)},"templateHelpers":function(){return{"messages":{"tguser":this.options.tguser,"labeltext":o.labeltext,"customtemplate":this.options.customtemplate}}},"events":{"click":"launchChatWindow"},"launchChatWindow":function(e){s.launchChatWindow(this.options)},"constructor":function(e){e=e||{},this.options=e,n.ItemView.prototype.constructor.call(this,e)}})}),csui.define("css!esoc/widgets/userwidget/chat/chat",[],function(){}),csui.define("esoc/widgets/userwidget/chat/chatutil",["module","require","csui/lib/jquery","csui/lib/underscore","i18n!esoc/widgets/userwidget/nls/lang","css!esoc/widgets/userwidget/chat/chat.css"],function(e,t,i,n,o){return{"updatePresenceModel":function(e,t){e.model.attributes.status="Unknown";var i=this.getPresenceStatus(t);e.model.attributes.status=i.statusCode,e.model.attributes.tooltipText=i.status,e.model.trigger("change.presencestatus")},"setIconColor":function(e,t){t.removeClass("esoc-chat-presence-Away"),t.removeClass("esoc-chat-presence-Online"),t.removeClass("esoc-chat-presence-Busy"),t.removeClass("esoc-chat-presence-IdleBusy"),t.removeClass("esoc-chat-presence-Offline"),t.removeClass("esoc-chat-presence-donotdisturb"),t.removeClass("esoc-user-profile-default-presence");var i=this.getPresenceStatus(e);t.addClass(i.statusIconClass).attr("title",i.status)},"getPresenceStatus":function(e){var t={"status":"","statusIconClass":"","statusCode":""};switch(n.isNumber(e.status)?e.status:e.activity?e.activity:e.status){case 0:case"Available":t.status=o.presenceOnlineTooltipText,t.statusIconClass="esoc-chat-presence-Online",t.statusCode="Online";break;case 1:case"Offline":t.status=o.presenceOfflineTooltipText,t.statusIconClass="esoc-chat-presence-Offline",t.statusCode="Offline";break;case 2:case"Off work":case"Away":t.status=o.presenceAwayTooltipText,t.statusIconClass="esoc-chat-presence-Away",t.statusCode="Away";break;case 3:case"Busy":t.status=o.presenceBusyTooltipText,t.statusIconClass="esoc-chat-presence-Busy",t.statusCode="Busy";break;case 4:case"BeRightBack":t.status=o.presenceBeRightBackTooltipText,t.statusIconClass="esoc-chat-presence-Away",t.statusCode="Away";break;case 5:case"on-the-phone":t.status=o.presenceInaCallTooltipText,t.statusIconClass="esoc-chat-presence-Busy",t.statusCode="Busy";break;case 7:case"in-a-meeting":t.status=o.presenceInaMeetingTooltipText,t.statusIconClass="esoc-chat-presence-Busy",t.statusCode="Busy";break;case 8:case"out-of-office":t.status=o.presenceOutOfOfficeTooltipText,t.statusIconClass="esoc-chat-presence-Away",t.statusCode="Away";break;case 9:case"DoNotDisturb":t.status=o.presenceDoNotDisturbTooltipText,t.statusIconClass="esoc-chat-presence-donotdisturb",t.statusCode="DoNotDisturb";break;case 10:case"in-a-conference":t.status=o.presenceInaConferenceCallTooltipText,t.statusIconClass="esoc-chat-presence-Busy",t.statusCode="Busy";break;case 18:case"Presenting":t.status=o.presencePresentingTooltipText,t.statusIconClass="esoc-chat-presence-donotdisturb",t.statusCode="DoNotDisturb";break;case 16:case"IdleOnline":t.status=o.presenceIdleOnlineTooltipText,t.statusIconClass="esoc-chat-presence-Away",t.statusCode="Away";break;case"IdleBusy":t.status=o.presenceIdleBusyTooltipText,t.statusIconClass="esoc-chat-presence-Busy",t.statusCode="Busy";break;default:t.status=o.presenceUnknownTooltipText,t.statusIconClass="esoc-user-profile-default-presence",t.statusCode="Unknown"}return t},"getNameCtrl":function(){var e=null,t={};try{try{this.isCompatibleMSIEVersion()&&(e=new t("Name.NameCtrl"))}catch(t){e=null}if(null==e){var i="application/x-sharepoint-uc";e=Boolean(navigator.mimeTypes)&&navigator.mimeTypes[i]&&navigator.mimeTypes[i].enabledPlugin}}catch(t){e=null}return e},"getMessageId":function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},"addHandler":function(e){window.attachEvent?window.attachEvent("onmessage",e):window.addEventListener("message",e)},"removeHandler":function(e){window.detachEvent?window.detachEvent("onmessage",e):window.removeEventListener("message",e)}}}),csui.define("esoc/widgets/userwidget/chat/skype/lib/GeneralHelper",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/lib/backbone"],function(e,t,i,n,o,s){return new s.Model({"namespace":function(e){for(var t=e.split("."),i=window,n="",o=0,s=t.length;o<s;o++)n=t[o],i[n]||(i[n]=i[n]||{}),i=i[n];return i},"generateUUID":function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},"isEmpty":function(e){return!e||!!i.isArray(e)&&0===e.length},"extractDataFromDataUri":function(e,t){var i=/^data:([^,;]+)(?:;charset=([^,;]+))?(;base64)?,(.*)$/i,n=i.exec(e);if(n[3]&&window.atob){var o=window.escape(window.atob(n[4]));return t&&t.unescape?decodeURI(o):o}var s=n[4].replace(/\+/g,"%20");return t&&t.unescape?window.unescape(s):s},"extractOriginFromAbsoluteUrl":function(e){if(e&&"string"==typeof e){var t=e.indexOf("://");if(-1!==t){t+=3;var i=e.indexOf("/",t);return e.slice(0,i)}return""}return""},"determineDomain":function(e){var t="",i=e.match(/^(?:(?:f|ht)tps?:\/\/)?([^\/:]+)/);return 0!==i.length&&(i=i[0],t=i.slice(i.indexOf(".")+1)),t},"convertJoinUrlToUri":function(e){var t=this.determineDomain(e),i=e.split(t),n="";return i.length>=2&&(i=i[1],i=i.split("/"),n="sip:"+i[1]+"@"+t+";gruu;opaque=app:conf:focus:id:"+i[2]),n},"logError":function(e){e&&e instanceof Error&&e.message&&window.console.log(e.message)},"genericRejectAction":function(e,t){window.console.log(t);var n=null;if(e){this.logError(e);try{i.isFunction(e.callback)&&e.callback(null)}catch(t){window.console.log("GeneralHelper: Encountered error executing callback"),this.logError(e)}e.deferred&&(n=e.deferred)}return n||(n=i.Deferred()),n.reject(null),n.promise()},"safeCallbackExec":function(e){if(e)if(i.isFunction(e.callback))try{i.isArray(e.params)||!e.params?e.callback.apply(this,e.params):window.console.log("object.params not in correct format: should be [] or null: unable to safe execute callback")}catch(t){e.error?window.console.log(e.error):window.console.log("Encountered error safe executing callback"),this.logError(t)}else e.callback&&window.console.log("object.callback is not a Function: unable to safe execute callback");else window.console.log("object not defined: unable to safe execute callback")},"getValue":function(e,t){return t||e},"parseHeaders":function(e){for(var t={},n=e.split("\r\n"),o=0;o<n.length;o++)if(""!==n[o]){var s=n[o].indexOf(":");if(-1!==s){var l=i.trim(n[o].slice(0,s)),a=i.trim(n[o].slice(s+1)),r=a.match(/\=".*?"/g);if(r&&0!==r.length){s=a.indexOf(r[0]);var c=a.slice(0,s),d=c.match(/\W/g),u=d?d[0]:null,p=u?i.trim(c.split(u)[0]):i.trim(c),m=a.slice(p.length+1),h=0;for(t[l]||(t[l]={});h<r.length;)for(t[l][p]||(t[l][p]={}),h;h<r.length;h++){var f=0;0!==m.indexOf(",")&&0!==m.indexOf(u)||(f+=1),1!==m.indexOf(",")&&1!==m.indexOf(u)||(f+=1),m=m.slice(f),s=m.indexOf(r[h]);var g=i.trim(m.slice(0,s));if(-1!==(s=g.lastIndexOf(u))){p=i.trim(g.slice(0,s)),m=m.slice(p.length+1);break}m=m.slice(g.length+r[h].length);var b=r[h].slice(1).replace(/"/g,"").split(",");if(1===b.length)t[l][p][g]=b[0];else{t[l][p][g]=[];for(var v=0;v<b.length;v++)t[l][p][g].push(b[v])}}}else t[l]=a.replace(/"/g,"")}else window.console.log("Not a header?")}return t}})}),csui.define("esoc/widgets/userwidget/chat/skype/lib/MemoryStorage",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","esoc/widgets/userwidget/chat/skype/lib/GeneralHelper"],function(e,t,i,n,o,s){var l=s.attributes;return new o.Model({"_data":{},"init":function(e){var t=i.Deferred();return this._data={},t.resolve(),t.promise()},"create":function(e,t,n){var o=i.Deferred();return this._data[t]=e,o.resolve(t),l.safeCallbackExec({"callback":n,"params":[t]}),o.promise()},"read":function(e,t){var n=i.Deferred();return n.resolve(this._data[e]),l.safeCallbackExec({"callback":t,"params":[this._data[e]]}),n.promise()},"update":function(e,t,n){var o=i.Deferred();this._data[t]=e,o.resolve(t),l.safeCallbackExec({"callback":n,"params":[t]}),o.promise()},"deleteVal":function(e,t){var n=i.Deferred();return delete this._data[e],n.resolve(e),l.safeCallbackExec({"callback":t,"params":[e]}),n.promise()}})}),csui.define("esoc/widgets/userwidget/chat/skype/lib/Cache",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","esoc/widgets/userwidget/chat/skype/lib/GeneralHelper","esoc/widgets/userwidget/chat/skype/lib/MemoryStorage"],function(e,t,i,n,o,s,l){var a=s.attributes,r=[],c=l.attributes;return new o.Model({"init":function(e){if(!c)return a.genericRejectAction(null,"storage object is not defined: unable to init");try{return c.init(e)}catch(e){return a.genericRejectAction(e,"Encountered error during init")}},"create":function(e){if(!(c&&e&&e.data))return a.genericRejectAction(e,"storage object or object.data not defined: unable to create");try{return c.create(e.data,e.id,e.callback).done(function(){r.push(e.id)})}catch(t){return a.logError(t),a.genericRejectAction(e,"Encountered error during create")}},"read":function(e){if(!c||!e.id)return a.genericRejectAction(e,"storage object or object.id not defined: unable to read");try{return-1!==r.indexOf(e.id)?c.read(e.id,e.callback):a.genericRejectAction(e,"_ids does not contain an entry for "+e.id+": unable to read")}catch(t){return a.logError(t),a.genericRejectAction(e,"Encountered error during read")}},"update":function(e){if(!(c&&e.id&&e.data))return a.genericRejectAction(e,"storage object, object.id, or object.data not defined: unable to update");try{return-1!==r.indexOf(e.id)?c.update(e.data,e.id,e.callback):a.genericRejectAction(e,"_ids does not contain an entry for "+e.id+": unable to update")}catch(t){return a.logError(t),a.genericRejectAction(e,"Encountered error during update")}},"deleteVal":function(e){if(!c||!e.id)return a.genericRejectAction(e,"storage object or object.id not defined: unable to delete");try{var t=r.indexOf(e.id);return-1!==t?c.deleteVal(e.id,e.callback).done(function(){r.splice(t,1)}):a.genericRejectAction(e,"_ids does not contain an entry for "+e.id+": unable to delete")}catch(t){return a.logError(t),a.genericRejectAction(e,"Encountered error during delete")}}})}),csui.define("esoc/widgets/userwidget/chat/skype/lib/Transport",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","esoc/widgets/userwidget/chat/skype/lib/GeneralHelper"],function(e,t,i,n,o,s){var l=s.attributes;return o.Model.extend({"_domain":null,"_xframe":null,"_defaultType":"application/json","_container":null,"_element":null,"_accessToken":null,"_tokenType":null,"_requestStart":null,"_requestStop":null,"_requestCounter":0,"_methods":[],"_failedAllowedList":!1,"_scope":this,"constructor":function(e){this.targetOrigin=e,o.Model.prototype.constructor.apply(this,arguments)},"createClientTransportData":function(e){var t=e.accessToken||this._accessToken,i={"type":e.type,"url":e.url,"headers":{"Accept":e.acceptType,"Authorization":this._tokenType+" "+t}};switch(e.messageId&&(i.messageId=e.messageId),t||delete i.headers.Authorization,e.type){case"get":break;case"post":case"put":e.data&&e.data.etag&&(i.headers["If-Match"]='"'+e.data.etag+'"'),e.data?(-1!==e.contentType.indexOf("json")&&(e.data=JSON.stringify(e.data)),i.headers["Content-Type"]=e.contentType):(e.data="",i.headers["Content-Type"]=""),i.data=e.data;break;case"delete":i.headers={"Authorization":this._tokenType+" "+t}}return JSON.stringify(i)},"handleUrl":function(e){return-1!==(e?e.indexOf("://"):"")?e:e?this._domain+e:this._domain},"findReasonString":function(e){var t=l.parseHeaders(e);for(var i in t["X-Ms-diagnostics"])return t["X-Ms-diagnostics"][i].reason;return null},"handleAllowedList":function(e){if(403===e.status&&!this._failedAllowedList){var t=this.findReasonString(e.headers);null!==t&&(window.console.log(t),console.log(t),this._failedAllowedList=!0)}},"handleCallback":function(e,t,i){var n=this,o=function(i){var s=JSON.parse(i.data);if(n.handleAllowedList(s),s.messageId===t){n._requestStop&&--n._requestCounter<=0&&n._requestStop();try{var a=l.parseHeaders(s.headers);if(a["Content-Type"]&&a["Content-Type"].length&&-1!==a["Content-Type"].indexOf(this._defaultType))try{s.results=JSON.parse(s.responseText);if(n.testForDomainChanges(s.results,function(){l.safeCallbackExec({"callback":e,"params":[s],"error":"Encountered error executing transport callback"}),n.removeHandler(o)}))return}catch(e){window.console.error("Encountered error parsing response: "+e.message)}}catch(e){window.console.error("Encountered error handling response: "+e.message)}l.safeCallbackExec({"callback":e,"params":[s],"error":"Encountered error executing transport callback"}),n.removeHandler(o)}};return n.addHandler(o),o},"addHandler":function(e){window.attachEvent?window.attachEvent("onmessage",e):window.addEventListener("message",e),this._methods.push(e)},"removeHandler":function(e){window.detachEvent?window.detachEvent("onmessage",e):window.removeEventListener("message",e);var t=this._methods.indexOf(e);-1!==t&&this._methods.splice(t,1)},"testForDomainChanges":function(e,t){return!(!e._links||!e._links.xframe||this._xframe===e._links.xframe.href)&&(this._xframe=e._links.xframe.href,this._scope.injectFrame(this._xframe,this._container,t),!0)},"getDomain":function(){return this._domain},"setElement":function(e,t){e&&(this._element=e,this._domain=l.extractOriginFromAbsoluteUrl(t))},"setAuthorization":function(e,t){this._accessToken=e,this._tokenType=t},"getAuthorization":function(){return{"accessToken":this._accessToken,"tokenType":this._tokenType}},"setRequestCallbacks":function(e){e&&(e.start&&(this._requestStart=e.start),e.stop&&(this._requestStop=e.stop))},"clientRequest":function(e){if(this._element&&this._domain){var t=l.generateUUID(),i=this.handleCallback(e.callback,t,e.url);this._requestStart&&!1!==e.notifyAction&&(this._requestStart(),this._requestCounter++);try{this._element.postMessage(this.createClientTransportData({"url":this.handleUrl(e.url),"type":e.type.toLocaleLowerCase(),"data":e.data,"acceptType":l.getValue(this._defaultType,e.acceptType),"contentType":l.getValue(this._defaultType,e.contentType),"messageId":t,"accessToken":e.accessToken}),l.getValue("*",this.targetOrigin))}catch(e){window.console.log("Encountered error with clientRequest: "+e.message);var n={"messageId":t,"headers":"","status":400};i({"data":JSON.stringify(n)})}}},"injectFrame":function(e,t,n){this._container=t;var o=function(){window.clearTimeout(a);var t=window.setTimeout(function(){window.console.log("Frame location not found within timeout (10000): "+e),l.safeCallbackExec({"callback":n,"params":[{"status":408,"link":e}],"error":"Encountered error executing frame injection callback"})},1e4);this._scope.setElement(s[0].contentWindow,e),this._scope.clientRequest({"url":e,"type":"get","acceptType":"text/html","notifyAction":!1,"callback":function(e){window.clearTimeout(t),l.safeCallbackExec({"callback":n,"params":[e],"error":"Encountered error executing frame injection callback"})}})},s=i("<iframe></iframe>").load(o).attr("src",e),a=window.setTimeout(o,1e4);this._container.html(s)},"cleanup":function(){for(var e=0;e<this._methods.length;e++)this.removeHandler(this._methods[e])}})}),csui.define("esoc/widgets/userwidget/chat/skype/lib/Mime",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","esoc/widgets/userwidget/chat/skype/lib/GeneralHelper"],function(e,t,i,n,o,s){s.attributes;return new o.Model({"processHeader":function(e){var t=i.trim(e).split("\n");for(var n in t)if(-1!==t[n].indexOf("boundary")){var o=t[n].split(";");for(var s in o)if(-1!==o[s].indexOf("boundary")){var l=i.trim(o[s].split("=")[1]);return'"'===l[0]&&'"'===l[l.length-1]?l.slice(1,-1):l}}},"processBody":function(e,t){var n=t.split("--"+e),o=[];for(var s in n)if(""!==i.trim(n[s])&&"--"!==i.trim(n[s])){var l=i.trim(n[s]).split("\r\n"),a={"status":null,"statusText":null,"responseText":"","header":"","messageId":null},r=null;for(var c in l)null===r&&-1!==l[c].indexOf("Content-Type")?null!==(r=this.determineContentType(l[c]))&&""===a.header&&(a.header=this.readHeader(l,c)):-1!==l[c].indexOf("HTTP/1.1")?(a.status=l[c].split(" ")[1],a.header=this.readHeader(l,++c)):null!==r&&""!==i.trim(l[c])&&(a.responseText=l[c],"json"===r&&(a.results=JSON.parse(i.trim(l[c]))));o.push(a)}return o},"determineContentType":function(e){var t=null;if(-1===e.indexOf("http; msgtype=response")){t=-1!==e.indexOf("json")?"json":i.trim(e).split("/")[1]}return t},"readHeader":function(e,t){for(var n="";""!==i.trim(e[t])&&t<e.length;)n=n.concat(e[t],"\n"),t++;return n},"processMessage":function(e){var t=this.processHeader(e.headers);return this.processBody(t,e.responseText)}})}),csui.define("esoc/widgets/userwidget/chat/skype/lib/Batch",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","esoc/widgets/userwidget/chat/skype/lib/GeneralHelper","esoc/widgets/userwidget/chat/skype/lib/Mime"],function(e,t,i,n,o,s,l){var a=s.attributes,r=l.attributes;return o.Model.extend({"_defaultType":"application/json","_batchQueue":[],"_batchSize":20,"_timerId":null,"_defaultTimerLimit":3e3,"constructor":function(e,t,i){this.cache=e,this.transport=t,this.timerLimit=i,o.Model.prototype.constructor.apply(this,arguments)},"buildMessage":function(e){var t=null,i=null,n=e.url.indexOf("://");return-1!==n?(n+=3,t=e.url.slice(n).split("/",1)[0],i=e.type.toUpperCase()+" "+e.url.slice(n+t.length)+" HTTP/1.1"):(n=this.transport.getDomain().indexOf("://"),t=-1!==n?this.transport.getDomain().slice(n+3):this.transport.getDomain(),
i=e.type.toUpperCase()+" "+e.url+" HTTP/1.1"),{"Request":i,"Host":t,"Accept":e.acceptType,"Data":e.data}},"sendBatch":function(e){var t=a.generateUUID(),i="multipart/batching;boundary="+t,n=[],o=[];for(var s in this._batchQueue)n.push(this.createDataPart(this._batchQueue[s].message,t)),o.push(this._batchQueue[s].callback);var l=function(e){for(var t=r.processMessage(e),i=0;i<t.length;i++)a.safeCallbackExec({"callback":o[i],"params":[t[i]],"error":"Encountered error executing batch callback"})},c=n.join("\r\n"),d=this;c+="\r\n\r\n--"+t+"--\r\n",this.cache.read({"id":"main"}).done(function(t){d.transport.clientRequest({"url":e,"type":"post","data":c,"acceptType":"multipart/batching","contentType":i,"callback":l})})},"createDataPart":function(e,t){var i="\r\n--"+t;return i+="\r\nContent-Type: application/http; msgtype=request\r\n",i+="\r\n"+e.Request,i+="\r\nHost: "+e.Host,i+="\r\nAccept: "+e.Accept,e.Data&&(i+="\r\nData: "+JSON.stringify(e.Data)),i+="\r\n"},"queueRequest":function(e){var t=this.buildMessage({"url":e.url,"type":e.type,"acceptType":a.getValue(this._defaultType,e.acceptType),"data":e.data});if(t)if(this._batchQueue.push({"message":t,"callback":e.callback}),this._batchQueue.length>=this._batchSize)this.processBatch();else if(!this._timerId){var i=this;this._timerId=window.setTimeout(function(){i.processBatch()},a.getValue(this._defaultTimerLimit,this.timerLimit))}},"processBatch":function(e){0!==this._batchQueue.length&&(this._timerId&&(window.clearTimeout(this._timerId),this._timerId=null),this.sendBatch(e),this._batchQueue.length=0)}})}),csui.define("esoc/widgets/userwidget/chat/skype/lib/Events",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone"],function(e,t,i,n,o){return o.Model.extend({"_handlingEvents":!1,"_handlers":{},"constructor":function(e,t,i){this.cache=e,this.transport=t,this.options=i,o.Model.prototype.constructor.apply(this,arguments)},"normalizeEventType":function(e){var t=e;return"added"===t&&(t="started"),"deleted"===t&&(t="completed"),t},"checkHrefOrOperationListeners":function(e,t){var i=this.normalizeEventType(e.type),n=null,o=[];e._embedded&&(n=e._embedded[e.link.rel].operationId||null),o.push(this._handlers[n]),o.push(this._handlers[e.link.rel]),o.push(this._handlers[e.link.href]),o.push(this._handlers["*"]);for(var s=0;s<o.length;s++)if(o[s]&&o[s][i]){var l=o[s][i];try{l(e,t)}catch(e){window.console.log("Encountered error executing event handler callback: "+e.message)}}},"processEvents":function(e){var t=[],i=[],n=0;if(e&&e.sender&&e.sender.length>0&&e.sender[0]){for(var o in e.sender){var s=e.sender[o].events;for(var l in s)s[l].link.rel&&"contactPresence"===s[l].link.rel&&(t[n]=s[l].link.href,i[n]=s[l].type,n+=1)}i.length>0&&this._handlers&&this._handlers.contactPresence&&this._handlers.contactPresence.updated(t)}},"getEventsHref":function(e){return this.options&&(this.options.low&&(this.options.low<5?this.options.low=5:this.options.low>1800&&(this.options.low=1800),e+="&low="+this.options.low),this.options.medium&&(this.options.medium<5?this.options.medium=5:this.options.medium>1800&&(this.options.medium=1800),e+="&medium="+this.options.medium),this.options.priority&&(this.options.priority<0&&(this.options.priority=0),e+="&priority="+this.options.priority),this.options.timeout&&(this.options.timeout<180?this.options.timeout=180:this.options.timeout>1800&&(this.options.timeout=1800),e+="&timeout="+this.options.timeout)),e},"startEvents":function(e){var t=this;return t._handlingEvents||(t._handlingEvents=!0),t._handlingEvents},"stopEvents":function(){this._handlingEvents=!1,this._handlers.length=0},"addEventHandlers":function(e,t){var i;e&&(i=e.href?e.href:e.rel?e.rel:e.operationId),this._handlers[i]=t},"removeEventHandlers":function(e){this._handlers[e]?delete this._handlers[e]:window.console.log("Event handler not found, unable to remove: "+e)},"updateEventOptions":function(e){this.options||(this.options={}),e&&(e.low&&(this.options.low=e.low),e.medium&&(this.options.medium=e.medium),e.priority&&(this.options.priority=e.priority),e.timeout&&(this.options.timeout=e.timeout))}})}),csui.define("esoc/widgets/userwidget/chat/skype/skype.model",["module","require","csui/lib/jquery","csui/lib/backbone"],function(e,t,i,n){return n.Model.extend({"constructor":function(e){n.Model.prototype.constructor.apply(this,arguments)},"initialize":function(){}})}),csui.define("esoc/widgets/userwidget/chat/skype/skypeucwa.attribute.model",["module","require","csui/lib/jquery","csui/lib/backbone"],function(e,t,i,n){return{"accessToken":null,"applicationsURL":null,"batchURL":null,"autoDiscoverURL":null,"iFrameURL":null,"serverURL":null,"pluginEnabled":!1,"internalServerURL":null,"externalServerURL":null,"nameCtrl":null,"chatEnabled":!1,"presenceEnabled":!1,"chatDomain":null,"eventHandling":!1,"loginUserSIP":null,"setLoginUserSIP":function(e){this.loginUserSIP=e},"getLoginUserSIP":function(){return this.loginUserSIP},"setPluginEnabled":function(e){this.pluginEnabled=e},"isPluginEnabled":function(){return this.pluginEnabled},"setChatDomain":function(e){this.chatDomain=e},"getChatDomain":function(){return this.chatDomain},"setChatEnabled":function(e){this.chatEnabled=e},"getChatEnabled":function(){return this.chatEnabled},"setPresenceEnabled":function(e){this.presenceEnabled=e},"getPresenceEnabled":function(){return this.presenceEnabled},"setInternalServerURL":function(e){this.internalServerURL=e},"getInternalServerURL":function(){return this.internalServerURL},"setExternalServerURL":function(e){this.externalServerURL=e},"getExternalServerURL":function(){return this.externalServerURL},"setAccessToken":function(e){this.accessToken=e},"getAccessToken":function(){return this.accessToken},"setApplicationsURL":function(e){this.applicationsURL=e},"getApplicationsURL":function(){return this.applicationsURL},"setBatchURL":function(e){this.batchURL=e},"getBatchURL":function(){return this.batchURL},"setEventURL":function(e){this.eventURL=e},"getEventURL":function(){return this.eventURL},"setpresenceSubscriptionURL":function(e){this.presenceSubscriptionURL=e},"getpresenceSubscriptionURL":function(){return this.presenceSubscriptionURL},"setCurrentSubscriptionURL":function(e){this.currentSubscriptionURL=e},"getCurrentSubscriptionURL":function(){return this.currentSubscriptionURL},"setAutoDiscoverURL":function(e){this.autoDiscoverURL=e},"getAutoDiscoverURL":function(e){return this.autoDiscoverURL},"setIFrameURL":function(e){this.iFrameURL=e},"getIFrameURL":function(){return this.iFrameURL},"setServerURL":function(e){this.internalServerURL.indexOf("https://")>-1?this.serverURL="https://"+e:this.serverURL="http://"+e},"getServerURL":function(){return this.serverURL},"setNameCtrl":function(e){this.nameCtrl=e},"getNameCtrl":function(){return this.nameCtrl}}}),csui.define("esoc/widgets/userwidget/chat/skype/skypeucwa.application",["module","require","csui/lib/jquery","csui/lib/underscore","esoc/widgets/common/util","csui/lib/backbone","esoc/widgets/userwidget/chat/skype/lib/Cache","esoc/widgets/userwidget/chat/skype/lib/Transport","esoc/widgets/userwidget/chat/skype/lib/Batch","esoc/widgets/userwidget/chat/skype/skypeucwa.attribute.model","esoc/widgets/userwidget/chat/chatutil","esoc/widgets/userwidget/chat/skype/lib/GeneralHelper"],function(e,t,i,n,o,s,l,a,r,c,d,u){var p=u.attributes,m=c.getAutoDiscoverURL();return{"getXframe":function(e,t){e.html("");var n=i("<iframe></iframe>").attr("src",t).attr("id","xFrame");e.html(n),i("body").append(e)},"getRESTServiceURL":function(e){var t=d.getMessageId(),i=document.getElementById("xFrame"),n=this;n.handleRESTServiceURL(e),n.sendRequest(t,i,c.internalServerURL)},"handleRESTServiceURL":function(e){var t,n=this,o=function(s){if(null===c.getAutoDiscoverURL()){var l;try{l=JSON.parse(s.data)}catch(e){}if(l)if(200!==l.status&&e.deferredObj)e.deferredObj.resolve();else{try{t=JSON.parse(l.responseText)._links.xframe.href}catch(e){}c.setIFrameURL(t),n.getXframe(i(".esoc-user-chat-xFrame"),t);var a=t.split("/Autodiscover")[0];n.authenticate(a,e),c.setAutoDiscoverURL(a)}}d.removeHandler(o)};d.addHandler(o);var s=function(){if(window.clearTimeout(l),void 0===t&&c.externalServerURL.length>0){var o=c.externalServerURL;n.getXframe(i(".esoc-user-chat-xFrame"),o+"/xframe");var s=d.getMessageId(),a=document.getElementById("xFrame");n.handleExternalRESTServiceURL(e),n.sendRequest(s,a,o)}},l=window.setTimeout(s,5e3)},"handleExternalRESTServiceURL":function(e){var t,n=this,o=function(s){if(null===c.getAutoDiscoverURL()){var l;try{l=JSON.parse(s.data)}catch(e){}if(l)if(200!==l.status&&e.deferredObj)e.deferredObj.resolve();else{try{t=JSON.parse(l.responseText)._links.xframe.href}catch(e){}c.setIFrameURL(t),n.getXframe(i(".esoc-user-chat-xFrame"),t);var a=t.split("Autodiscover")[0];n.authenticate(a,e),c.setAutoDiscoverURL(a)}}d.removeHandler(o)};d.addHandler(o)},"authenticate":function(e,t){var n=this;t&&t.appNotFound?(c.eventHandling=!1,n.sendAuthRequest(e,t)):i("iframe").on("beforeload",function(){n.sendAuthRequest(e,t)})},"handleAuthenticationCallback":function(e){var t=this,i=function(n){var o=JSON.parse(n.data),s=null;200!==o.status&&e.deferredObj?e.deferredObj.resolve():(JSON.parse(o.responseText).access_token&&(s=JSON.parse(o.responseText).access_token,c.setAccessToken(s),t.createApplication(c.getAutoDiscoverURL(),s,e)),d.removeHandler(i))};d.addHandler(i)},"createApplication":function(e,t,i){if(this.handleCreateApplicationCallback(i),t){var n=d.getMessageId(),o={"type":"post","data":'{\r\n  "userAgent":"esocial1",\r\n  "endpointId":"'+n+'",\r\n  "culture":"en-US"\r\n}\r\n',"contentType":"application/json","url":e+"/ucwa/oauth/v1/applications","headers":{"Accept":"application/json","Content-Type":"application/json","Authorization":"Bearer "+t}};document.getElementById("xFrame").contentWindow.postMessage(JSON.stringify(o),p.getValue("*",m))}},"handleCreateApplicationCallback":function(e){var t=function(i){var n,o,s,l,a=JSON.parse(i.data),r=JSON.parse(a.responseText);201!==a.status&&e.deferredObj?e.deferredObj.resolve():(r._links&&(n=r._links.self.href,o=r._links.batch.href,s=r._links.events.href),r._embedded&&(l=r._embedded.people._links.presenceSubscriptions.href),c.setApplicationsURL(n),c.setBatchURL(o),c.setEventURL(s),c.setpresenceSubscriptionURL(l),e.deferredObj&&e.deferredObj.resolve(),d.removeHandler(t))};d.addHandler(t)},"sendRequest":function(e,t,n){i("iframe").on("beforeload",function(){if(t){var i={"type":"get","url":n,"contentType":"application/x-www-form-urlencoded;charset='utf-8'","headers":{"Accept":"application/json","Content-Type":"application/x-www-form-urlencoded;charset='utf-8'"},"messageId":e};t.contentWindow.postMessage(JSON.stringify(i),p.getValue("*",m))}})},"sendAuthRequest":function(e,t){var i=d.getMessageId(),n=document.getElementById("xFrame"),o=this;if(null!==n){o.handleAuthenticationCallback(t);var s={"type":"post","url":e+"/WebTicket/oauthtoken","contentType":"application/x-www-form-urlencoded;charset='utf-8'","headers":{"Accept":"application/json","Content-Type":"application/x-www-form-urlencoded;charset='utf-8'"},"data":{"grant_type":"urn:microsoft.rtc:windows"},"messageId":i};n.contentWindow.postMessage(JSON.stringify(s),p.getValue("*",m))}}}}),csui.define("esoc/widgets/userwidget/chat/skype/skypeucwa.model",["require","csui/lib/jquery","csui/lib/backbone","csui/utils/base","csui/utils/contexts/factories/connector","esoc/widgets/userwidget/chat/chatutil","esoc/widgets/userwidget/chat/skype/lib/Cache","esoc/widgets/userwidget/chat/skype/lib/Transport","esoc/widgets/userwidget/chat/skype/lib/Batch","esoc/widgets/userwidget/chat/skype/lib/Events","esoc/widgets/userwidget/chat/skype/skype.model","esoc/widgets/userwidget/chat/skype/skypeucwa.application","esoc/widgets/userwidget/chat/skype/skypeucwa.attribute.model","esoc/widgets/userwidget/chat/skype/lib/GeneralHelper"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m){var h=m.attributes;return new(d.extend({"constructor":function(e){t("body").append('<span style="display:none" class="esoc-user-chat-xFrame"></span>'),i.Model.prototype.constructor.apply(this,arguments)},"initialize":function(){},"initializeApplication":function(e){p.internalServerURL.length>0&&(u.getXframe(t(".esoc-user-chat-xFrame"),p.internalServerURL+"/xframe"),u.getRESTServiceURL(e))},"showUserPresence":function(e){if(e.autoDiscoverURL=p.getAutoDiscoverURL(),e.email instanceof Array){var t,i=p.getServerURL(),n=p.getAutoDiscoverURL(),o=document.getElementById("xFrame"),s=l.attributes,c=new a(n),d=new r(s,c,4e3),m=0;if(s.create({"id":"main","data":{}}),o&&(t=o.contentWindow,c.setElement(t,i)),c.setAuthorization(p.getAccessToken(),"Bearer"),e.email&&e.email.length>0)for(m=0;m<e.email.length;m++)d.queueRequest({"url":p.getAutoDiscoverURL()+e.email[m],"type":"get","callback":function(t){JSON.parse(t.responseText).subcode;if(401===t.status){var i={"appNotFound":!0};u.authenticate(e.autoDiscoverURL,i)}else{var n=JSON.parse(t.responseText)._links.self.href;if(e.models)for(var o=0;o<e.models.length;o++)if(n.indexOf(e.models[o].get("screen_name").toLowerCase())>0){var s={"status":JSON.parse(t.responseText).availability};s.activity=JSON.parse(t.responseText).activity,e.models&&e.models[o].trigger("presence:update",s)}}}});d.processBatch(n+p.getBatchURL())}else{var f=p.getAutoDiscoverURL()+p.getApplicationsURL(),g=document.getElementById("xFrame");if(f=f+"/people/"+e.email+"/presence",this.handlePresenceCallback(e),g){var b={"type":"get","messageId":this.messageId,"url":f,"headers":{"Accept":"application/json","Authorization":"Bearer "+p.getAccessToken()}};document.getElementById("xFrame").contentWindow.postMessage(JSON.stringify(b),h.getValue("*",n))}}},"handlePresenceCallback":function(e){var t=function(i){var n;try{n=JSON.parse(i.data)}catch(e){}if(n.responseText){var o;try{o=JSON.parse(n.responseText).subcode}catch(e){}if(404===n.status&&"ApplicationNotFound"===o||401===n.status){var l={"appNotFound":!0};u.authenticate(e.autoDiscoverURL,l)}else{var a;try{a=JSON.parse(n.responseText).availability}catch(e){}var r={};r.status=a;try{r.activity=JSON.parse(n.responseText).activity}catch(e){}s.updatePresenceModel(e,r),s.removeHandler(t)}}};s.addHandler(t)},"updateEventPresence":function(t){var i,n=p.getServerURL(),o=p.getAutoDiscoverURL(),s=document.getElementById("xFrame"),r=p.getCurrentSubscriptionURL(),d=l.attributes,u=new a(o),m=new c(d,u),h=h||e("esoc/widgets/userwidget/chat/skype/skypeucwa.model");r?this.deleteSubscription(r,t):this.sendSubscription(t),d.create({"id":"main","data":{}}),s&&(i=s.contentWindow,u.setElement(i,n)),u.setAuthorization(p.getAccessToken(),"Bearer"),m.addEventHandlers({"rel":"contactPresence"},{"updated":function(e){if(t.email instanceof Array){var i={"email":e,"models":t.models};h.showUserPresence(i)}else h.showUserPresence(t)}})},"sendAckRequest":function(){var e=p.getAutoDiscoverURL(),t=e+p.getEventURL(),i=document.getElementById("xFrame"),n=s.getMessageId();if(null!==i&&!p.eventHandling){p.eventHandling=!0,this.handleEventCallback();var o={"type":"get","url":t,"contentType":"application/x-www-form-urlencoded;charset='utf-8'","headers":{"Accept":"application/json","Content-Type":"application/x-www-form-urlencoded;charset='utf-8'","Authorization":"Bearer "+p.getAccessToken()},"messageId":n};i.contentWindow.postMessage(JSON.stringify(o),h.getValue("*",e))}},"handleEventCallback":function(){var e,t=p.getAutoDiscoverURL(),i=this,n=function(o){var l=JSON.parse(o.data);if(l.responseText)if(e=JSON.parse(l.responseText),401===e.status||"ApplicationNotFound"===e.subcode){var a={"appNotFound":!0};u.authenticate(t,a)}else e.sender&&i.processEvents(l),s.removeHandler(n)};s.addHandler(n)},"processEvents":function(t){var i,n=p.getServerURL(),o=p.getAutoDiscoverURL(),s=document.getElementById("xFrame"),r=l.attributes,d=new a(o),u=new c(r,d),m=m||e("esoc/widgets/userwidget/chat/skype/skypeucwa.model"),h=JSON.parse(t.responseText);p.eventHandling&&(s&&(i=s.contentWindow,d.setElement(i,n)),d.setAuthorization(p.getAccessToken(),"Bearer"),h&&h._links&&(h._links.resync?d.clientRequest({"url":o+h._links.resync.href,"type":"get","acceptType":"application/json","callback":m.processEvents,"notifyAction":!1}):h._links.next&&d.clientRequest({"url":o+h._links.next.href,"type":"get","acceptType":"application/json","callback":m.processEvents,"notifyAction":!1})),u.processEvents(h))},"sendSubscription":function(e){var t,i=p.getServerURL(),n=p.getAutoDiscoverURL(),o=n+p.getpresenceSubscriptionURL(),s=document.getElementById("xFrame"),l=new a(n);s&&(t=s.contentWindow,l.setElement(t,i)),l.setAuthorization(p.getAccessToken(),"Bearer");var r=[];if(e.email instanceof Array)for(var c=0;c<e.email.length;c++)r[c]="sip:"+e.email[c];else r[0]="sip:"+e.email;var d={"duration":30,"uris":r};if(r.length>0){var m=this;l.clientRequest({"url":o,"type":"post","contentType":"application/json","data":d,"callback":function(t){var i=JSON.parse(t.responseText);if(401===i.status||"ApplicationNotFound"===i.subcode){var o={"appNotFound":!0};u.authenticate(n,o)}else p.setCurrentSubscriptionURL(JSON.parse(t.responseText)._links.self.href),m.processEvents(t),e.subscribeEvent&&m.sendAckRequest()}})}},"deleteSubscription":function(e,i){var n,o=p.getServerURL(),s=p.getAutoDiscoverURL(),r=document.getElementById("xFrame"),d=l.attributes,m=new a(s),h=new c(d,m);r&&(n=r.contentWindow,m.setElement(n,o)),m.setAuthorization(p.getAccessToken(),"Bearer");var f=this;m.clientRequest({"url":s+e,"type":"delete","callback":function(e){if(p.setCurrentSubscriptionURL(null),e.responseText){var n=JSON.parse(e.responseText);if(401===n.status||"ApplicationNotFound"===n.subcode){var o=t.Deferred(),l={"appNotFound":!0,"deferredObj":o};u.authenticate(s,l),o.promise().done(function(){i?f.sendSubscription(i):(h.removeEventHandlers("contactPresence"),p.eventHandling=!1)})}}else i?f.sendSubscription(i):(h.removeEventHandlers("contactPresence"),p.eventHandling=!1)}})},"showUserPresenceForTeams":function(e){var i=e.context.getObject(o),l=i.getConnectionUrl().getApiBase("v2")+"/pulse/statuses/getuserpresence/"+e.username;t.ajax(i.extendAjaxOptions({"url":l,"type":"GET","contentType":!1,"crossDomain":!0,"processData":!1,"success":function(t){var i={"status":t.results.userPresence.availability};s.updatePresenceModel(e,i)},"error":function(e){new n.RequestErrorMessage(e)}}))}}))}),csui.define("esoc/widgets/userwidget/chat/skype/skypeplugin.model",["csui/lib/jquery","csui/lib/backbone","esoc/widgets/userwidget/chat/chatutil","esoc/widgets/userwidget/chat/skype/skype.model","esoc/widgets/userwidget/chat/skype/skypeucwa.attribute.model"],function(e,t,i,n,o){return new(n.extend({"nameCtrl":null,"constructor":function(e){t.Model.prototype.constructor.apply(this,arguments)},"initialize":function(){},"updateEventPresence":function(e){this.showUserPresence(e)},"showUserPresence":function(t){if(o.getChatEnabled()&&o.getPresenceEnabled()){var n;if(t.email instanceof Array){n={"status":!1};var s=0;for(s=0;s<t.email.length;s++)n.status=this.nameCtrl.GetStatus(t.email[s],String(t.presenceHolder[s])),i.setIconColor(n,e("#"+t.presenceHolder[s]))}else n={"status":this.nameCtrl.GetStatus(t.email,t.presenceHolder)},i.updatePresenceModel(t,n)}},"attachLyncPresenceChangeEvent":function(){this.nameCtrl&&(this.nameCtrl.OnStatusChange=this.onLyncPresenceStatusChange)},"onLyncPresenceStatusChange":function(t,n,o){var s=e("#"+o),l={"status":n};i.setIconColor(l,s)},"setNameCtrl":function(e){this.nameCtrl=e},"getNameCtrl":function(){return this.nameCtrl}}))}),csui.define("esoc/widgets/userwidget/chat/realtime/realtime.model",["csui/lib/jquery","csui/lib/backbone"],function(e,t){return new(t.Model.extend({"constructor":function(e){this.submodel={},t.Model.prototype.constructor.apply(this,arguments)},"initialize":function(){},"getUserPresence":function(e){},"getUsersPresence":function(e){}}))}),csui.define("esoc/model/pulsesettings/server.adaptor.mixin",["csui/lib/underscore","csui/utils/url","esoc/widgets/common/util"],function(e,t,i){"use strict";return{"mixin":function(n){return e.extend(n,{"makeServerAdaptor":function(e){return this},"url":function(e){var n=t.combine(i.getV2Url(this.connector.getConnectionUrl()),i.REST_URLS.pulseSettingsUrl);return this.options.chat&&(n=i.updateQueryStringValues(n,i.globalConstants.FIELDS,i.globalConstants.CHAT_SEETINGS)),n},"parse":function(e){return this.options.fetched=!1,e.results},"isFetchable":function(){return this.options.fetched}})}}}),csui.define("esoc/model/pulsesettings.model",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/expandable/expandable.mixin","csui/models/mixins/resource/resource.mixin","csui/models/mixins/uploadable/uploadable.mixin","csui/models/mixins/including.additional.resources/including.additional.resources.mixin","esoc/model/pulsesettings/server.adaptor.mixin","csui/models/resource","esoc/widgets/common/util"],function(e,t,i,n,o,s,l,a,r,c,d,u,p){var m=o.Model.extend(n.extend({},u(o.Model),{"constructor":function(e,t){o.Model.prototype.constructor.apply(this,arguments),this.options=t,t&&t.connector&&t.connector.assignTo(this),this.options.fetched=!0,this.makeResource(t).makeIncludingAdditionalResources(t).makeUploadable(t).makeExpandable(t).makeServerAdaptor(t)}}));return c.mixin(m.prototype),l.mixin(m.prototype),r.mixin(m.prototype),a.mixin(m.prototype),d.mixin(m.prototype),m}),csui.define("esoc/factory/pulsesettingsfactory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","esoc/model/pulsesettings.model"],function(e,t,i,n,o,s){return n.extend({"propertyPrefix":"pulsesettings","constructor":function(l,a){n.prototype.constructor.apply(this,arguments);var r=this.options.pulsesettings||{};if(!(r instanceof i.Model)){var c=l.getObject(o,a),d=e.config();r=new s(r.attributes||d.attributes,t.defaults({"connector":c},r.options,d.options))}this.property=r},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("esoc/widgets/userwidget/chat/chatfactory",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","esoc/widgets/userwidget/chat/skype/skypeucwa.model","esoc/widgets/userwidget/chat/skype/skypeplugin.model","esoc/widgets/userwidget/chat/realtime/realtime.model","esoc/widgets/userwidget/chat/skype/skypeucwa.attribute.model","esoc/factory/pulsesettingsfactory","csui/utils/contexts/factories/user"],function(e,t,i,n,o,s,l,a,r,c,d){return new(o.Model.extend({"constructor":function(e){o.Model.prototype.constructor.apply(this,arguments)},"initializeApplication":function(e){this.options=e;var t=this,n=i.Deferred(),o={"deferredObj":n};return e.context.getModel(c,{"attributes":{"id":"chat"},"options":{"chat":!0},"permanent":!0}).ensureFetched().done(function(e){var i=e.results&&e.results.chatSettings;if(i&&i.chatEnabled&&i.presenceEnabled)if(r.setChatEnabled(i.chatEnabled),r.setPresenceEnabled(i.presenceEnabled),r.setChatDomain(i.chatDomain),r.setInternalServerURL(i.internalServerUrl),r.setExternalServerURL(i.externalServerUrl),r.setServerURL(i.chatDomain),null==l.getNameCtrl()){var a=t.getNameCtrl();try{a.GetStatus("","")}catch(e){a=null}if(null!=a){r.pluginEnabled=!0,r.setNameCtrl(a);var c=t.options.context.getModel(d),u=c.get("name")+"@"+i.chatDomain;r.setLoginUserSIP(u),!1===t.isPlugInLoggedInUser()&&(r.pluginEnabled=!1,s.initializeApplication(o))}else r.pluginEnabled=!1,s.initializeApplication(o)}else r.pluginEnabled=!0,r.setNameCtrl(a);n.resolve()}),n},"isPlugInLoggedInUser":function(){var e=r.getNameCtrl(),t=r.getLoginUserSIP(),i=!1,n=0;if(null==e)return i;for(n=0;n<20;n++)if(1!==e.GetStatus(t,"test")){i=!0;break}return i},"getProvider":function(e){return"realtime"===e?a:(!0===this.isPlugInLoggedInUser()&&(r.pluginEnabled=!0),r.pluginEnabled?!1===this.isPlugInLoggedInUser()?(r.pluginEnabled=!1,s.initializeApplication(),s):(l.setNameCtrl(r.getNameCtrl()),l.attachLyncPresenceChangeEvent(),l):s)},"getNameCtrl":function(){var e=null;try{try{this.isCompatibleMSIEVersion()&&(e=new window.ActiveXObject("Name.NameCtrl"))}catch(t){e=null}null==e&&(e=this.createNPApiOnWindowsPlugin("application/x-sharepoint-uc"),void 0===e.GetStatus&&(e=null))}catch(t){e=null}return e},"isNPAPIOnWinPluginInstalled":function(e){return Boolean(navigator.mimeTypes)&&navigator.mimeTypes[e]&&navigator.mimeTypes[e].enabledPlugin},"createNPApiOnWindowsPlugin":function(e){var t=null;try{if(t=document.getElementById(e),!Boolean(t)&&this.isNPAPIOnWinPluginInstalled(e)){var i=document.createElement("object");i.id=e,i.type=e,i.width="0",i.height="0",i.style.setProperty("visibility","hidden",""),document.body.appendChild(i),t=document.getElementById(e)}}catch(e){t=null}return t},"isCompatibleMSIEVersion":function(){return!!(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))}}))}),csui.define("esoc/widgets/userwidget/chat/model/presence.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","i18n!esoc/widgets/userwidget/nls/lang"],function(e,t,i,n){return i.Model.extend({"defaults":{"status":"Unknown","tooltipText":n.presenceUnknownTooltipText},"constructor":function(e){this.options=e,i.Model.prototype.constructor.apply(this,arguments),e&&e.connector&&e.connector.assignTo(this)}})}),csui.define("hbs!esoc/widgets/userwidget/chat/impl/presence",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"presenceEnabled"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":2},"end":{"line":11,"column":9}}}))?s:""},"2":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    <div id='esoc-chat-presence-indicator-"+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":3,"column":42},"end":{"line":3,"column":48}}}):l))+"' title='"+e.escapeExpression((l=null!=(l=a(i,"tooltipText")||(null!=t?a(t,"tooltipText"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tooltipText","hash":{},"loc":{"start":{"line":3,"column":57},"end":{"line":3,"column":72}}}):l))+"' class='esoc-chat-presence-indicator\r\n      "+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.status == 'Offline'",{"name":"xif","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":77}}}))?s:"")+"\r\n      "+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.status == 'Away'",{"name":"xif","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":70}}}))?s:"")+"\r\n      "+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.status == 'Online'",{"name":"xif","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":74}}}))?s:"")+"\r\n      "+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.status == 'Busy'",{"name":"xif","hash":{},"fn":e.program(9,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":70}}}))?s:"")+"\r\n      "+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.status == 'Unknown'",{"name":"xif","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":76}}}))?s:"")+"\r\n      "+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.status == 'DoNotDisturb'",{"name":"xif","hash":{},"fn":e.program(13,o,0),"inverse":e.noop,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":86}}}))?s:"")+'\' tabindex="0"\r\n         aria-label="'+e.escapeExpression((l=null!=(l=a(i,"tooltipText")||(null!=t?a(t,"tooltipText"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tooltipText","hash":{},"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":36}}}):l))+'"></div>\r\n'},"3":function(e,t,i,n,o){return"esoc-chat-presence-Offline "},"5":function(e,t,i,n,o){return"esoc-chat-presence-Away"},"7":function(e,t,i,n,o){return"esoc-chat-presence-Online"},"9":function(e,t,i,n,o){return"esoc-chat-presence-Busy"},"11":function(e,t,i,n,o){return"esoc-chat-presence-Unknown"},"13":function(e,t,i,n,o){return"esoc-chat-presence-donotdisturb"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"chatEnabled"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":12,"column":7}}}))?s:""}});return i.registerPartial("esoc_widgets_userwidget_chat_impl_presence",n),n}),csui.define("esoc/widgets/userwidget/chat/view/presence.view",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","esoc/widgets/userwidget/chat/chatfactory","esoc/widgets/userwidget/chat/skype/skypeucwa.attribute.model","esoc/widgets/userwidget/chat/model/presence.model","hbs!esoc/widgets/userwidget/chat/impl/presence","esoc/widgets/common/util","css!esoc/widgets/userwidget/chat/chat.css","csui/lib/handlebars.helpers.xif"],function(e,t,i,n,o,s,l,a,r){return n.ItemView.extend({"template":a,"templateHelpers":function(){return{"messages":{}}},"initialize":function(e){this.options=e;var t=this;o.initializeApplication(e).promise().done(function(){var e=s.getChatEnabled(),n=s.getPresenceEnabled();if(e&&n){t.model.attributes.chatEnabled=e,t.model.attributes.presenceEnabled=n;var l=i.extend({},t.options);t.options.username&&(l.email=t.options.username+r.globalConstants.AT_SIGN_SYMBOL+s.getChatDomain(),l.presenceHolder="esoc-chat-presence-indicator-"+t.options.model.attributes.id),o.getProvider().showUserPresenceForTeams(l)}})},"constructor":function(e){e.model=new l(e),e=e||{},n.ItemView.prototype.constructor.call(this,e),this.model.on("change.presencestatus",this.render,this)}})}),csui.define("esoc/controls/dialog/dialog.view",["module","csui/lib/underscore","csui/lib/jquery","csui/controls/dialog/dialog.view","csui/utils/log"],function(e,t,i,n,o){o=o(e.id);var s=n.extend({"templateHelpers":t.extend(function(){var e="user"+this.options.view.options.userid;return{"binfDialogSizeClassName":(this.options.largeSize?"binf-modal-lg ":this.options.midSize?"binf-modal-md ":" ")+e}}),"onRender":function(){this.$el.addClass(s.prototype.className.call(this)).attr("tabindex",0),this._renderHeader(),this.options.view&&(this.body.show(this.options.view),this.options.view.triggerMethod("dom:refresh"),this.options.view.triggerMethod("after:show")),this._renderFooter()}});return s}),csui.define("hbs!esoc/controls/dialog/impl/multiple.dialogs",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div id="modalDialogs" class="multi-modal-dialogs">\r\n  <div class="modal-dialogs-inner" id="modalDialogsInner"></div>\r\n</div>\r\n\r\n'}});return i.registerPartial("esoc_controls_dialog_impl_multiple.dialogs",n),n}),
csui.define("esoc/controls/dialog/multiple.dialogs.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/behaviors/keyboard.navigation/tabables.behavior","esoc/controls/dialog/dialog.view","hbs!esoc/controls/dialog/impl/multiple.dialogs","csui/utils/non-emptying.region/non-emptying.region","csui/utils/log","i18n","csui/lib/binf/js/binf"],function(e,t,i,n,o,s,l,a,r,c,d,u){d=d(e.id);var p=o.ItemView.extend({"className":function(){var e="cs-dialog binf-modal binf-fade";return this.options.className&&(e+=" "+t.result(this.options,"className")),e},"attributes":{"tabindex":"-1","aria-hidden":"true"},"template":r,"behaviors":{"TabablesBehavior":{"behaviorClass":l,"recursiveNavigation":!0,"containTabFocus":!0}},"events":{"hide.binf.modal":"onHiding","hidden.binf.modal":"onHidden","click .cs-close":"onClickClose","shown.binf.modal":"onShown","keydown":"onKeyInView","setCurrentTabFocus":"setCurrentTabFocus","tabNextRegion":"tabNextRegion","click .tile-type-action-icon":"onClickActionIcon"},"constructor":function(){o.ItemView.prototype.constructor.apply(this,arguments),this.listenToOnce(this,"before:hide",l.popTabableHandler),this.listenToOnce(this,"destroy:all",this.onDestroyAll)},"onKeyInView":function(e){40!==e.keyCode&&38!==e.keyCode||(e.stopPropagation(),e.preventDefault()),27===e.keyCode&&this.destroy(e)},"setCurrentTabFocus":function(){this.focusOnLastRegion=!0,this.$el.trigger("focus")},"tabNextRegion":function(){this.trigger("changed:focus")},"onRender":function(){this.$el.addClass(p.prototype.className.call(this)).attr("tabindex",0),this.appendData(this.options.views)},"appendData":function(e){var t=new a({"view":e[e.length-1],"largeSize":this.options.largeSize});t.render();var i=t.$el.find(".binf-modal-dialog").detach();this.$el.find(".modal-dialogs-inner").append(i)},"onShow":function(){i(window).scrollTop(0),this.$el.binf_modal({"backdrop":"static","keyboard":!1,"paddingWhenOverflowing":!1})},"onShown":function(){this.$el.find(".cs-close").trigger("focus")},"kill":function(){return p.__super__.destroy.apply(this,arguments),this._scrollToBegin(),!0},"destroy":function(e){var t=this.options.views.length;if(this.$el.is(":visible")&&t)if(1===t)this.$el.binf_modal("hide");else{var n;n=i(e.currentTarget).hasClass("cs-dialog")?i(e.currentTarget).find(".slick-current .binf-modal-dialog"):i(e.currentTarget).closest(".binf-modal-dialog"),this.options.util.removeSlick();var o=n.index();i(n).remove(),o>0?this.options.util.applySlick(o-1):this.options.util.applySlick(o),this.options.views.length=this.options.views.length-1,1===this.options.views.length&&this.$el.trigger("focus")}else if(p.__super__.destroy.apply(this,arguments),this.options.focusCallBack)this.options.focusCallBack();else{var s=this.options.targetEle;s&&i(s).is(":visible")&&i(s).trigger("focus")}return this._scrollToBegin(),1===this.$el.find(".binf-modal-dialog").length?this.$el.find(".cs-close").trigger("focus"):this.$el.find(".slick-current .slick -close").trigger("focus"),this},"onDestroyAll":function(){var e=this.options.views.length;this.$el.is(":visible")&&e&&1!==e&&(this.options.util.removeSlick(),this.$el.find(".binf-modal-dialog").remove()),this.$el.binf_modal("hide")},"onHiding":function(){this.triggerMethod("before:hide")},"onHidden":function(){this.triggerMethod("hide"),this.destroy()},"onClickClose":function(e){e.preventDefault(),e.stopPropagation(),this.destroy(e)},"onClickActionIcon":function(e){this.options.view.trigger("click:actionIcon")},"_scrollToBegin":function(){if(!0===u.settings.rtl){var e=i("body").width();i("body").scrollLeft(e)}else i("body").scrollLeft(0)}});return p}),csui.define("esoc/lib/slick/slick",["csui/lib/jquery"],function(e){!function(t){"use strict";e&&!e.fn.slick&&function(e){var t=window.Slick||{};t=function(){function t(t,n){var o,s=this;s.defaults={"accessibility":!0,"adaptiveHeight":!1,"appendArrows":e(t),"appendDots":e(t),"arrows":!0,"asNavFor":null,"prevArrow":'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',"nextArrow":'<button class="slick-next" aria-label="Next" type="button">Next</button>',"autoplay":!1,"autoplaySpeed":3e3,"centerMode":!1,"centerPadding":"50px","cssEase":"ease","customPaging":function(t,i){return e('<button type="button" />').text(i+1)},"dots":!1,"dotsClass":"slick-dots","draggable":!0,"easing":"linear","edgeFriction":.35,"fade":!1,"focusOnSelect":!1,"focusOnChange":!1,"infinite":!0,"initialSlide":0,"lazyLoad":"ondemand","mobileFirst":!1,"pauseOnHover":!0,"pauseOnFocus":!0,"pauseOnDotsHover":!1,"respondTo":"window","responsive":null,"rows":1,"rtl":!1,"slide":"","slidesPerRow":1,"slidesToShow":1,"slidesToScroll":1,"speed":500,"swipe":!0,"swipeToSlide":!1,"touchMove":!0,"touchThreshold":5,"useCSS":!0,"useTransform":!0,"variableWidth":!1,"vertical":!1,"verticalSwiping":!1,"waitForAnimate":!0,"zIndex":1e3},s.initials={"animating":!1,"dragging":!1,"autoPlayTimer":null,"currentDirection":0,"currentLeft":null,"currentSlide":0,"direction":1,"$dots":null,"listWidth":null,"listHeight":null,"loadIndex":0,"$nextArrow":null,"$prevArrow":null,"scrolling":!1,"slideCount":null,"slideWidth":null,"$slideTrack":null,"$slides":null,"sliding":!1,"slideOffset":0,"swipeLeft":null,"swiping":!1,"$list":null,"touchObject":{},"transformsEnabled":!1,"unslicked":!1},e.extend(s,s.initials),s.activeBreakpoint=null,s.animType=null,s.animProp=null,s.breakpoints=[],s.breakpointSettings=[],s.cssTransitions=!1,s.focussed=!1,s.interrupted=!1,s.hidden="hidden",s.paused=!0,s.positionProp=null,s.respondTo=null,s.rowCount=1,s.shouldClick=!0,s.$slider=e(t),s.$slidesCache=null,s.transformType=null,s.transitionType=null,s.visibilityChange="visibilitychange",s.windowWidth=0,s.windowTimer=null,o=e(t).data("slick")||{},s.options=e.extend({},s.defaults,n,o),s.currentSlide=s.options.initialSlide,s.originalSettings=s.options,void 0!==document.mozHidden?(s.hidden="mozHidden",s.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(s.hidden="webkitHidden",s.visibilityChange="webkitvisibilitychange"),s.autoPlay=e.proxy(s.autoPlay,s),s.autoPlayClear=e.proxy(s.autoPlayClear,s),s.autoPlayIterator=e.proxy(s.autoPlayIterator,s),s.changeSlide=e.proxy(s.changeSlide,s),s.clickHandler=e.proxy(s.clickHandler,s),s.selectHandler=e.proxy(s.selectHandler,s),s.setPosition=e.proxy(s.setPosition,s),s.swipeHandler=e.proxy(s.swipeHandler,s),s.dragHandler=e.proxy(s.dragHandler,s),s.keyHandler=e.proxy(s.keyHandler,s),s.instanceUid=i++,s.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,s.registerBreakpoints(),s.init(!0)}var i=0;return t}(),t.prototype.activateADA=function(){var e=this,t=e.$slideTrack.find(".slick-active");t.length||(t=e.$slideTrack.find(".slick-current")),t.attr({"aria-hidden":"false"}).find("a, input, button, select,[data-cstabindex=-1]").attr({"tabindex":"0","data-cstabindex":"0"})},t.prototype.addSlide=t.prototype.slickAdd=function(t,i,n){var o=this;if("boolean"==typeof i)n=i,i=null;else if(i<0||i>=o.slideCount)return!1;o.unload(),"number"==typeof i?0===i&&0===o.$slides.length?e(t).appendTo(o.$slideTrack):n?e(t).insertBefore(o.$slides.eq(i)):e(t).insertAfter(o.$slides.eq(i)):!0===n?e(t).prependTo(o.$slideTrack):e(t).appendTo(o.$slideTrack),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slides.each(function(t,i){e(i).attr("data-slick-index",t)}),o.$slidesCache=o.$slides,o.reinit()},t.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({"height":t},e.options.speed)}},t.prototype.animateSlide=function(t,i){var n={},o=this;o.animateHeight(),!0===o.options.rtl&&!1===o.options.vertical&&(t=-t),!1===o.transformsEnabled?!1===o.options.vertical?o.$slideTrack.animate({"left":t},o.options.speed,o.options.easing,i):o.$slideTrack.animate({"top":t},o.options.speed,o.options.easing,i):!1===o.cssTransitions?(!0===o.options.rtl&&(o.currentLeft=-o.currentLeft),e({"animStart":o.currentLeft}).animate({"animStart":t},{"duration":o.options.speed,"easing":o.options.easing,"step":function(e){e=Math.ceil(e),!1===o.options.vertical?(n[o.animType]="translate("+e+"px, 0px)",o.$slideTrack.css(n)):(n[o.animType]="translate(0px,"+e+"px)",o.$slideTrack.css(n))},"complete":function(){i&&i.call()}})):(o.applyTransition(),t=Math.ceil(t),!1===o.options.vertical?n[o.animType]="translate3d("+t+"px, 0px, 0px)":n[o.animType]="translate3d(0px,"+t+"px, 0px)",o.$slideTrack.css(n),i&&setTimeout(function(){o.disableTransition(),i.call()},o.options.speed))},t.prototype.getNavTarget=function(){var t=this,i=t.options.asNavFor;return i&&null!==i&&(i=e(i).not(t.$slider)),i},t.prototype.asNavFor=function(t){var i=this,n=i.getNavTarget();null!==n&&"object"==typeof n&&n.each(function(){var i=e(this).slick("getSlick");i.unslicked||i.slideHandler(t,!0)})},t.prototype.applyTransition=function(e){var t=this,i={};!1===t.options.fade?i[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:i[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,!1===t.options.fade?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.autoPlay=function(){var e=this;e.autoPlayClear(),e.slideCount>e.options.slidesToShow&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this,t=e.currentSlide+e.options.slidesToScroll;e.paused||e.interrupted||e.focussed||(!1===e.options.infinite&&(1===e.direction&&e.currentSlide+1===e.slideCount-1?e.direction=0:0===e.direction&&(t=e.currentSlide-e.options.slidesToScroll,e.currentSlide-1==0&&(e.direction=1))),e.slideHandler(t))},t.prototype.buildArrows=function(){var t=this;!0===t.options.arrows&&(t.$prevArrow=e(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=e(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),!0!==t.options.infinite&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true","tabindex":"-1"}))},t.prototype.buildDots=function(){var t,i,n=this;if(!0===n.options.dots&&n.slideCount>n.options.slidesToShow){for(n.$slider.addClass("slick-dotted"),i=e("<ul />").addClass(n.options.dotsClass),t=0;t<=n.getDotCount();t+=1)i.append(e("<li />").append(n.options.customPaging.call(this,n,t)));n.$dots=i.appendTo(n.options.appendDots),n.$dots.find("li").first().addClass("slick-active")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,i){e(i).attr("data-slick-index",t).data("originalStyling",e(i).attr("style")||"")}),t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),!0!==t.options.centerMode&&!0!==t.options.swipeToSlide||(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),!0===t.options.draggable&&t.$list.addClass("draggable"),t.slidesAdjust()},t.prototype.buildRows=function(){var e,t,i,n,o,s,l,a=this;if(n=document.createDocumentFragment(),s=a.$slider.children(),a.options.rows>0){for(l=a.options.slidesPerRow*a.options.rows,o=Math.ceil(s.length/l),e=0;e<o;e++){var r=document.createElement("div");for(t=0;t<a.options.rows;t++){var c=document.createElement("div");for(i=0;i<a.options.slidesPerRow;i++){var d=e*l+(t*a.options.slidesPerRow+i);s.get(d)&&c.appendChild(s.get(d))}r.appendChild(c)}n.appendChild(r)}a.$slider.empty().append(n),a.$slider.children().children().children().css({"width":100/a.options.slidesPerRow+"%","display":"inline-block"})}},t.prototype.checkResponsive=function(t,i){var n,o,s,l=this,a=!1,r=l.$slider.width(),c=window.innerWidth||e(window).width();if("window"===l.respondTo?s=c:"slider"===l.respondTo?s=r:"min"===l.respondTo&&(s=Math.min(c,r)),l.options.responsive&&l.options.responsive.length&&null!==l.options.responsive){o=null;for(n in l.breakpoints)l.breakpoints.hasOwnProperty(n)&&(!1===l.originalSettings.mobileFirst?s<l.breakpoints[n]&&(o=l.breakpoints[n]):s>l.breakpoints[n]&&(o=l.breakpoints[n]));null!==o?null!==l.activeBreakpoint?(o!==l.activeBreakpoint||i)&&(l.activeBreakpoint=o,"unslick"===l.breakpointSettings[o]?l.unslick(o):(l.options=e.extend({},l.originalSettings,l.breakpointSettings[o]),!0===t&&(l.currentSlide=l.options.initialSlide),l.refresh(t)),a=o):(l.activeBreakpoint=o,"unslick"===l.breakpointSettings[o]?l.unslick(o):(l.options=e.extend({},l.originalSettings,l.breakpointSettings[o]),!0===t&&(l.currentSlide=l.options.initialSlide),l.refresh(t)),a=o):null!==l.activeBreakpoint&&(l.activeBreakpoint=null,l.options=l.originalSettings,!0===t&&(l.currentSlide=l.options.initialSlide),l.refresh(t),a=o),t||!1===a||l.$slider.trigger("breakpoint",[l,a])}},t.prototype.changeSlide=function(t,i){var n,o,s,l=this,a=e(t.currentTarget);switch(a.is("a")&&t.preventDefault(),a.is("li")||(a=a.closest("li")),s=l.slideCount%l.options.slidesToScroll!=0,n=s?0:(l.slideCount-l.currentSlide)%l.options.slidesToScroll,t.data.message){case"previous":o=0===n?l.options.slidesToScroll:l.options.slidesToShow-n,l.slideCount>l.options.slidesToShow&&l.slideHandler(l.currentSlide-o,!1,i);break;case"next":o=0===n?l.options.slidesToScroll:n,l.slideCount>l.options.slidesToShow&&l.slideHandler(l.currentSlide+o,!1,i);break;case"index":var r=0===t.data.index?0:t.data.index||a.index()*l.options.slidesToScroll;l.slideHandler(l.checkNavigable(r),!1,i),a.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var t,i,n=this;if(t=n.getNavigableIndexes(),i=0,e>t[t.length-1])e=t[t.length-1];else for(var o in t){if(e<t[o]){e=i;break}i=t[o]}return e},t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&(e("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",e.proxy(t.interrupt,t,!0)).off("mouseleave.slick",e.proxy(t.interrupt,t,!1)),!0===t.options.accessibility&&t.$dots.off("keydown.slick",t.keyHandler)),t.$slider.off("focus.slick blur.slick"),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),!0===t.options.accessibility&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler))),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),!0===t.options.accessibility&&t.$list.off("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpSlideEvents=function(){var t=this;t.$list.off("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.off("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>0&&(e=t.$slides.children().children().detach(),e.removeAttr("style"),t.$slider.empty().append(e.detach()))},t.prototype.clickHandler=function(e){!1===this.shouldClick&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(t){var i=this;i.autoPlayClear(),i.touchObject={},i.cleanUpEvents(),e(".slick-cloned",i.$slider).detach(),i.$dots&&i.$dots.remove(),i.$prevArrow&&i.$prevArrow.length&&(i.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.prevArrow)&&i.$prevArrow.remove()),i.$nextArrow&&i.$nextArrow.length&&(i.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.nextArrow)&&i.$nextArrow.remove()),i.$slides&&(i.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){e(this).attr("style",e(this).data("originalStyling"))}),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.detach(),i.$list.detach(),i.$slider.append(i.$slides.detach())),i.cleanUpRows(),i.$slider.removeClass("slick-slider"),i.$slider.removeClass("slick-initialized"),i.$slider.removeClass("slick-dotted"),i.unslicked=!0,t||i.$slider.trigger("destroy",[i])},t.prototype.disableTransition=function(e){var t=this,i={};i[t.transitionType]="",!1===t.options.fade?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.fadeSlide=function(e,t){var i=this;!1===i.cssTransitions?(i.$slides.eq(e).css({"zIndex":i.options.zIndex}),i.$slides.eq(e).animate({"opacity":1},i.options.speed,i.options.easing,t)):(i.applyTransition(e),i.$slides.eq(e).css({"opacity":1,"zIndex":i.options.zIndex}),t&&setTimeout(function(){i.disableTransition(e),t.call()},i.options.speed))},t.prototype.fadeSlideOut=function(e){var t=this;!1===t.cssTransitions?t.$slides.eq(e).animate({"opacity":0,"zIndex":t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({"opacity":0,"zIndex":t.options.zIndex-2}))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;null!==e&&(t.$slidesCache=t.$slides,t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.focusHandler=function(){var t=this;t.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(i){i.stopImmediatePropagation();var n=e(this);setTimeout(function(){t.options.pauseOnFocus&&(t.focussed=n.is(":focus"),t.autoPlay())},0)})},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){return this.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,i=0,n=0;if(!0===e.options.infinite)if(e.slideCount<=e.options.slidesToShow)++n;else for(;t<e.slideCount;)++n,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(!0===e.options.centerMode)n=e.slideCount;else if(e.options.asNavFor)for(;t<e.slideCount;)++n,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else n=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll);return n-1},t.prototype.getLeft=function(e){var t,i,n,o,s=this,l=0;return s.slideOffset=0,i=s.$slides.eq(0).outerHeight(!0),!0===s.options.infinite?(s.slideCount>s.options.slidesToShow&&(s.slideOffset=s.slideWidth*s.options.slidesToShow*-1,o=-1,!0===s.options.vertical&&!0===s.options.centerMode&&(2===s.options.slidesToShow?o=-1.5:1===s.options.slidesToShow&&(o=-2)),l=i*s.options.slidesToShow*o),s.slideCount%s.options.slidesToScroll!=0&&e+s.options.slidesToScroll>s.slideCount&&s.slideCount>s.options.slidesToShow&&(e>s.slideCount?(s.slideOffset=(s.options.slidesToShow-(e-s.slideCount))*s.slideWidth*-1,l=(s.options.slidesToShow-(e-s.slideCount))*i*-1):(s.slideOffset=s.slideCount%s.options.slidesToScroll*s.slideWidth*-1,l=s.slideCount%s.options.slidesToScroll*i*-1))):e+s.options.slidesToShow>s.slideCount&&(s.slideOffset=(e+s.options.slidesToShow-s.slideCount)*s.slideWidth,l=(e+s.options.slidesToShow-s.slideCount)*i),s.slideCount<=s.options.slidesToShow&&(s.slideOffset=0,l=0),!0===s.options.centerMode&&s.slideCount<=s.options.slidesToShow?s.slideOffset=s.slideWidth*Math.floor(s.options.slidesToShow)/2-s.slideWidth*s.slideCount/2:!0===s.options.centerMode&&!0===s.options.infinite?s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)-s.slideWidth:!0===s.options.centerMode&&(s.slideOffset=0,s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)),t=!1===s.options.vertical?e*s.slideWidth*-1+s.slideOffset:e*i*-1+l,!0===s.options.variableWidth&&(n=s.slideCount<=s.options.slidesToShow||!1===s.options.infinite?s.$slideTrack.children(".slick-slide").eq(e):s.$slideTrack.children(".slick-slide").eq(e+s.options.slidesToShow),t=!0===s.options.rtl?n[0]?-1*(s.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,!0===s.options.centerMode&&(n=s.slideCount<=s.options.slidesToShow||!1===s.options.infinite?s.$slideTrack.children(".slick-slide").eq(e):s.$slideTrack.children(".slick-slide").eq(e+s.options.slidesToShow+1),t=!0===s.options.rtl?n[0]?-1*(s.$slideTrack.width()-n[0].offsetLeft-n.width()):0:n[0]?-1*n[0].offsetLeft:0,t+=(s.$list.width()-n.outerWidth())/2)),t},t.prototype.getOption=t.prototype.slickGetOption=function(e){return this.options[e]},t.prototype.getNavigableIndexes=function(){var e,t=this,i=0,n=0,o=[];for(!1===t.options.infinite?e=t.slideCount:(i=-1*t.options.slidesToScroll,n=-1*t.options.slidesToScroll,e=2*t.slideCount);i<e;)o.push(i),i=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return o},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t,i,n=this;return i=!0===n.options.centerMode?n.slideWidth*Math.floor(n.options.slidesToShow/2):0,!0===n.options.swipeToSlide?(n.$slideTrack.find(".slick-slide").each(function(o,s){if(s.offsetLeft-i+e(s).outerWidth()/2>-1*n.swipeLeft)return t=s,!1}),Math.abs(e(t).attr("data-slick-index")-n.currentSlide)||1):n.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){this.changeSlide({"data":{"message":"index","index":parseInt(e)}},t)},t.prototype.init=function(t){var i=this;e(i.$slider).hasClass("slick-initialized")||(e(i.$slider).addClass("slick-initialized"),i.buildRows(),i.buildOut(),i.setProps(),i.startLoad(),i.loadSlider(),i.initializeEvents(),i.updateArrows(),i.updateDots(),i.checkResponsive(!0),i.focusHandler()),t&&i.$slider.trigger("init",[i]),!0===i.options.accessibility&&i.initADA(),i.options.autoplay&&(i.paused=!1,i.autoPlay())},t.prototype.initADA=function(){var t=this,i=Math.ceil(t.slideCount/t.options.slidesToShow),n=t.getNavigableIndexes().filter(function(e){return e>=0&&e<t.slideCount});t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true","tabindex":"-1"}).find("a, input, button, select,[data-cstabindex=0]").attr({"tabindex":"-1","data-cstabindex":"-1"}),null!==t.$dots&&(t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(i){var o=n.indexOf(i);if(e(this).attr({"role":"tabpanel","id":"slick-slide"+t.instanceUid+i,"tabindex":-1}),-1!==o){var s="slick-slide-control"+t.instanceUid+o;e("#"+s).length&&e(this).attr({"aria-describedby":s})}}),t.$dots.attr("role","tablist").find("li").each(function(o){var s=n[o];e(this).attr({"role":"presentation"}),e(this).find("button").first().attr({"role":"tab","id":"slick-slide-control"+t.instanceUid+o,"aria-controls":"slick-slide"+t.instanceUid+s,"aria-label":o+1+" of "+i,"aria-selected":null,"tabindex":"-1"})}).eq(t.currentSlide).find("button").attr({"aria-selected":"true","tabindex":"0"}).end());for(var o=t.currentSlide,s=o+t.options.slidesToShow;o<s;o++)t.options.focusOnChange?(t.$slides.eq(o).attr({"tabindex":"0"}),t.$slides.eq(o).find(".slick-close").trigger("focus")):t.$slides.eq(o).removeAttr("tabindex");t.activateADA()},t.prototype.initArrowEvents=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.off("click.slick").on("click.slick",{"message":"previous"},e.changeSlide),e.$nextArrow.off("click.slick").on("click.slick",{"message":"next"},e.changeSlide),!0===e.options.accessibility&&(e.$prevArrow.on("keydown.slick",e.keyHandler),e.$nextArrow.on("keydown.slick",e.keyHandler)))},t.prototype.initDotEvents=function(){var t=this;!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&(e("li",t.$dots).on("click.slick",{"message":"index"},t.changeSlide),!0===t.options.accessibility&&t.$dots.on("keydown.slick",t.keyHandler)),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("mouseenter.slick",e.proxy(t.interrupt,t,!0)).on("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.initSlideEvents=function(){var t=this;t.options.pauseOnHover&&(t.$list.on("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.on("mouseleave.slick",e.proxy(t.interrupt,t,!1)))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{"action":"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{"action":"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{"action":"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{"action":"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),!0===t.options.accessibility&&t.$list.on("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(t.setPosition)},t.prototype.initUI=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.show()},t.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&!0===t.options.accessibility?t.changeSlide({"data":{"message":!0===t.options.rtl?"next":"previous"}}):39===e.keyCode&&!0===t.options.accessibility&&t.changeSlide({"data":{"message":!0===t.options.rtl?"previous":"next"}}))},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each(function(){var t=e(this),i=e(this).attr("data-lazy"),n=e(this).attr("data-srcset"),o=e(this).attr("data-sizes")||l.$slider.attr("data-sizes"),s=document.createElement("img");s.onload=function(){t.animate({"opacity":0},100,function(){n&&(t.attr("srcset",n),o&&t.attr("sizes",o)),t.attr("src",i).animate({"opacity":1},200,function(){t.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),l.$slider.trigger("lazyLoaded",[l,t,i])})},s.onerror=function(){t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),l.$slider.trigger("lazyLoadError",[l,t,i])},s.src=i})}var i,n,o,s,l=this;if(!0===l.options.centerMode?!0===l.options.infinite?(o=l.currentSlide+(l.options.slidesToShow/2+1),s=o+l.options.slidesToShow+2):(o=Math.max(0,l.currentSlide-(l.options.slidesToShow/2+1)),s=l.options.slidesToShow/2+1+2+l.currentSlide):(o=l.options.infinite?l.options.slidesToShow+l.currentSlide:l.currentSlide,s=Math.ceil(o+l.options.slidesToShow),!0===l.options.fade&&(o>0&&o--,s<=l.slideCount&&s++)),i=l.$slider.find(".slick-slide").slice(o,s),"anticipated"===l.options.lazyLoad)for(var a=o-1,r=s,c=l.$slider.find(".slick-slide"),d=0;d<l.options.slidesToScroll;d++)a<0&&(a=l.slideCount-1),i=i.add(c.eq(a)),i=i.add(c.eq(r)),a--,r++;t(i),l.slideCount<=l.options.slidesToShow?(n=l.$slider.find(".slick-slide"),t(n)):l.currentSlide>=l.slideCount-l.options.slidesToShow?(n=l.$slider.find(".slick-cloned").slice(0,l.options.slidesToShow),t(n)):0===l.currentSlide&&(n=l.$slider.find(".slick-cloned").slice(-1*l.options.slidesToShow),t(n))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({"opacity":1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){this.changeSlide({"data":{"message":"next"}})},t.prototype.orientationChange=function(){var e=this;e.checkResponsive(),e.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.autoPlay(),e.options.autoplay=!0,e.paused=!1,e.focussed=!1,e.interrupted=!1},t.prototype.postSlide=function(t){var i=this;if(!i.unslicked&&(i.$slider.trigger("afterChange",[i,t]),i.animating=!1,i.swipeLeft=null,i.options.autoplay&&i.autoPlay(),!0===i.options.accessibility&&(i.initADA(),i.options.focusOnChange))){e(i.$slides.get(i.currentSlide)).find(".slick-close").trigger("focus")}},t.prototype.prev=t.prototype.slickPrev=function(){this.changeSlide({"data":{"message":"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(t){t=t||1;var i,n,o,s,l,a=this,r=e("img[data-lazy]",a.$slider);r.length?(i=r.first(),n=i.attr("data-lazy"),o=i.attr("data-srcset"),s=i.attr("data-sizes")||a.$slider.attr("data-sizes"),l=document.createElement("img"),l.onload=function(){o&&(i.attr("srcset",o),s&&i.attr("sizes",s)),i.attr("src",n).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===a.options.adaptiveHeight&&a.setPosition(),a.$slider.trigger("lazyLoaded",[a,i,n]),a.progressiveLazyLoad()},l.onerror=function(){t<3?setTimeout(function(){a.progressiveLazyLoad(t+1)},500):(i.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),a.$slider.trigger("lazyLoadError",[a,i,n]),a.progressiveLazyLoad())},l.src=n):a.$slider.trigger("allImagesLoaded",[a])},t.prototype.refresh=function(t){var i,n,o=this;n=o.slideCount-o.options.slidesToShow,!o.options.infinite&&o.currentSlide>n&&(o.currentSlide=n),o.slideCount<=o.options.slidesToShow&&(o.currentSlide=0),i=o.currentSlide,o.destroy(!0),e.extend(o,o.initials,{"currentSlide":i}),o.init(),t||o.changeSlide({"data":{"message":"index","index":i}},!1)},t.prototype.registerBreakpoints=function(){var t,i,n,o=this,s=o.options.responsive||null;if("array"===e.type(s)&&s.length){o.respondTo=o.options.respondTo||"window";for(t in s)if(n=o.breakpoints.length-1,s.hasOwnProperty(t)){for(i=s[t].breakpoint;n>=0;)o.breakpoints[n]&&o.breakpoints[n]===i&&o.breakpoints.splice(n,1),n--;o.breakpoints.push(i),o.breakpointSettings[i]=s[t].settings}o.breakpoints.sort(function(e,t){return o.options.mobileFirst?e-t:t-e})}},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),
t.initSlideEvents(),t.checkResponsive(!1,!0),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,i){var n=this;if("boolean"==typeof e?(t=e,e=!0===t?0:n.slideCount-1):e=!0===t?--e:e,n.slideCount<1||e<0||e>n.slideCount-1)return!1;n.unload(),!0===i?n.$slideTrack.children().remove():n.$slideTrack.children(this.options.slide).eq(e).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,n.reinit()},t.prototype.setCSS=function(e){var t,i,n=this,o={};!0===n.options.rtl&&(e=-e),t="left"==n.positionProp?Math.ceil(e)+"px":"0px",i="top"==n.positionProp?Math.ceil(e)+"px":"0px",o[n.positionProp]=e,!1===n.transformsEnabled?n.$slideTrack.css(o):(o={},!1===n.cssTransitions?(o[n.animType]="translate("+t+", "+i+")",n.$slideTrack.css(o)):(o[n.animType]="translate3d("+t+", "+i+", 0px)",n.$slideTrack.css(o)))},t.prototype.setDimensions=function(){var e=this;!1===e.options.vertical?!0===e.options.centerMode&&e.$list.css({"padding":"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),!0===e.options.centerMode&&e.$list.css({"padding":e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),!1===e.options.vertical&&!1===e.options.variableWidth?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):!0===e.options.variableWidth?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();!1===e.options.variableWidth&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t,i=this;i.$slides.each(function(n,o){t=i.slideWidth*n*-1,!0===i.options.rtl?e(o).css({"position":"relative","right":t,"top":0,"zIndex":i.options.zIndex-2,"opacity":0}):e(o).css({"position":"relative","left":t,"top":0,"zIndex":i.options.zIndex-2,"opacity":0})}),i.$slides.eq(i.currentSlide).css({"zIndex":i.options.zIndex-1,"opacity":1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(){var t,i,n,o,s,l=this,a=!1;if("object"===e.type(arguments[0])?(n=arguments[0],a=arguments[1],s="multiple"):"string"===e.type(arguments[0])&&(n=arguments[0],o=arguments[1],a=arguments[2],"responsive"===arguments[0]&&"array"===e.type(arguments[1])?s="responsive":void 0!==arguments[1]&&(s="single")),"single"===s)l.options[n]=o;else if("multiple"===s)e.each(n,function(e,t){l.options[e]=t});else if("responsive"===s)for(i in o)if("array"!==e.type(l.options.responsive))l.options.responsive=[o[i]];else{for(t=l.options.responsive.length-1;t>=0;)l.options.responsive[t].breakpoint===o[i].breakpoint&&l.options.responsive.splice(t,1),t--;l.options.responsive.push(o[i])}a&&(l.unload(),l.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),!1===e.options.fade?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=!0===e.options.vertical?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),void 0===t.WebkitTransition&&void 0===t.MozTransition&&void 0===t.msTransition||!0===e.options.useCSS&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&!1!==e.animType&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&null!==e.animType&&!1!==e.animType},t.prototype.setSlideClasses=function(e){var t,i,n,o,s=this;if(i=s.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),s.$slides.eq(e).addClass("slick-current"),!0===s.options.centerMode){var l=s.options.slidesToShow%2==0?1:0;t=Math.floor(s.options.slidesToShow/2),!0===s.options.infinite&&(e>=t&&e<=s.slideCount-1-t?s.$slides.slice(e-t+l,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(n=s.options.slidesToShow+e,i.slice(n-t+1+l,n+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?i.eq(i.length-1-s.options.slidesToShow).addClass("slick-center"):e===s.slideCount-1&&i.eq(s.options.slidesToShow).addClass("slick-center")),s.$slides.eq(e).addClass("slick-center")}else e>=0&&e<=s.slideCount-s.options.slidesToShow?s.$slides.slice(e,e+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=s.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(o=s.slideCount%s.options.slidesToShow,n=!0===s.options.infinite?s.options.slidesToShow+e:e,s.options.slidesToShow==s.options.slidesToScroll&&s.slideCount-e<s.options.slidesToShow?i.slice(n-(s.options.slidesToShow-o),n+o).addClass("slick-active").attr("aria-hidden","false"):i.slice(n,n+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==s.options.lazyLoad&&"anticipated"!==s.options.lazyLoad||s.lazyLoad()},t.prototype.setupInfinite=function(){var t,i,n,o=this;if(!0===o.options.fade&&(o.options.centerMode=!1),!0===o.options.infinite&&!1===o.options.fade&&(i=null,o.slideCount>o.options.slidesToShow)){for(n=!0===o.options.centerMode?o.options.slidesToShow+1:o.options.slidesToShow,t=o.slideCount;t>o.slideCount-n;t-=1)i=t-1,e(o.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i-o.slideCount).prependTo(o.$slideTrack).addClass("slick-cloned");for(t=0;t<n+o.slideCount;t+=1)i=t,e(o.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i+o.slideCount).appendTo(o.$slideTrack).addClass("slick-cloned");o.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.interrupt=function(e){var t=this;e||t.autoPlay(),t.interrupted=e},t.prototype.selectHandler=function(t){var i=this,n=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide");if(!n.hasClass("slick-current")){var o=parseInt(n.attr("data-slick-index"));if(o||(o=0),i.slideCount<=i.options.slidesToShow)return void i.slideHandler(o,!1,!0);i.slideHandler(o)}},t.prototype.slideHandler=function(t,i,n){var o,s,l,a,r,c=null,d=this;if(i=i||!1,!(!0===d.animating&&!0===d.options.waitForAnimate||!0===d.options.fade&&d.currentSlide===t)){if(!1===i&&d.asNavFor(t),o=t,a=d.getLeft(d.currentSlide),d.currentLeft=null===d.swipeLeft?a:d.swipeLeft,!1===d.options.infinite&&!1===d.options.centerMode&&(t<0||t>d.getDotCount()*d.options.slidesToScroll))return void(!1===d.options.fade&&(o=d.currentSlide,!0!==n&&d.slideCount>d.options.slidesToShow?d.animateSlide(a,function(){d.postSlide(o)}):d.postSlide(o)));if(!1===d.options.infinite&&!0===d.options.centerMode&&(t<0||t>d.slideCount-d.options.slidesToScroll))return void(!1===d.options.fade&&(o=d.currentSlide,!0!==n&&d.slideCount>d.options.slidesToShow?d.animateSlide(a,function(){d.postSlide(o)}):d.postSlide(o)));if(d.options.autoplay&&clearInterval(d.autoPlayTimer),s=o<0?d.slideCount%d.options.slidesToScroll!=0?d.slideCount-d.slideCount%d.options.slidesToScroll:d.slideCount+o:o>=d.slideCount?d.slideCount%d.options.slidesToScroll!=0?0:o-d.slideCount:o,d.animating=!0,d.$slider.trigger("beforeChange",[d,d.currentSlide,s]),l=d.currentSlide,d.currentSlide=s,d.setSlideClasses(d.currentSlide),e(".slick-slide.slick-next-slide-adjust").removeClass("slick-next-slide-adjust"),e(".slick-slide.slick-prev-slide-adjust").removeClass("slick-prev-slide-adjust"),c=d.getLeft(o),d.slidesAdjust(),d.options.asNavFor&&(r=d.getNavTarget(),r=r.slick("getSlick"),r.slideCount<=r.options.slidesToShow&&r.setSlideClasses(d.currentSlide)),d.updateDots(),d.updateArrows(),!0===d.options.fade)return!0!==n?(d.fadeSlideOut(l),d.fadeSlide(s,function(){d.postSlide(s)})):d.postSlide(s),void d.animateHeight();!0!==n&&d.slideCount>d.options.slidesToShow?d.animateSlide(c,function(){d.postSlide(s)}):d.postSlide(s)}},t.prototype.startLoad=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,i,n,o=this;return e=o.touchObject.startX-o.touchObject.curX,t=o.touchObject.startY-o.touchObject.curY,i=Math.atan2(t,e),n=Math.round(180*i/Math.PI),n<0&&(n=360-Math.abs(n)),n<=45&&n>=0?!1===o.options.rtl?"left":"right":n<=360&&n>=315?!1===o.options.rtl?"left":"right":n>=135&&n<=225?!1===o.options.rtl?"right":"left":!0===o.options.verticalSwiping?n>=35&&n<=135?"down":"up":"vertical"},t.prototype.swipeEnd=function(e){var t,i,n=this;if(n.dragging=!1,n.swiping=!1,n.scrolling)return n.scrolling=!1,!1;if(n.interrupted=!1,n.shouldClick=!(n.touchObject.swipeLength>10),void 0===n.touchObject.curX)return!1;if(!0===n.touchObject.edgeHit&&n.$slider.trigger("edge",[n,n.swipeDirection()]),n.touchObject.swipeLength>=n.touchObject.minSwipe){switch(i=n.swipeDirection()){case"left":case"down":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide+n.getSlideCount()):n.currentSlide+n.getSlideCount(),n.currentDirection=0;break;case"right":case"up":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide-n.getSlideCount()):n.currentSlide-n.getSlideCount(),n.currentDirection=1}"vertical"!=i&&(n.slideHandler(t),n.touchObject={},n.$slider.trigger("swipe",[n,i]))}else n.touchObject.startX!==n.touchObject.curX&&(n.slideHandler(n.currentSlide),n.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(!1===t.options.swipe||"ontouchend"in document&&!1===t.options.swipe||!1===t.options.draggable&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,!0===t.options.verticalSwiping&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,i,n,o,s,l,a=this;return s=void 0!==e.originalEvent?e.originalEvent.touches:null,!(!a.dragging||a.scrolling||s&&1!==s.length)&&(t=a.getLeft(a.currentSlide),a.touchObject.curX=void 0!==s?s[0].pageX:e.clientX,a.touchObject.curY=void 0!==s?s[0].pageY:e.clientY,a.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(a.touchObject.curX-a.touchObject.startX,2))),l=Math.round(Math.sqrt(Math.pow(a.touchObject.curY-a.touchObject.startY,2))),!a.options.verticalSwiping&&!a.swiping&&l>4?(a.scrolling=!0,!1):(!0===a.options.verticalSwiping&&(a.touchObject.swipeLength=l),i=a.swipeDirection(),void 0!==e.originalEvent&&a.touchObject.swipeLength>4&&(a.swiping=!0,e.preventDefault()),o=(!1===a.options.rtl?1:-1)*(a.touchObject.curX>a.touchObject.startX?1:-1),!0===a.options.verticalSwiping&&(o=a.touchObject.curY>a.touchObject.startY?1:-1),n=a.touchObject.swipeLength,a.touchObject.edgeHit=!1,!1===a.options.infinite&&(0===a.currentSlide&&"right"===i||a.currentSlide>=a.getDotCount()&&"left"===i)&&(n=a.touchObject.swipeLength*a.options.edgeFriction,a.touchObject.edgeHit=!0),!1===a.options.vertical?a.swipeLeft=t+n*o:a.swipeLeft=t+n*(a.$list.height()/a.listWidth)*o,!0===a.options.verticalSwiping&&(a.swipeLeft=t+n*o),!0!==a.options.fade&&!1!==a.options.touchMove&&(!0===a.animating?(a.swipeLeft=null,!1):void a.setCSS(a.swipeLeft))))},t.prototype.swipeStart=function(e){var t,i=this;if(i.interrupted=!0,1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow)return i.touchObject={},!1;void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==t?t.pageX:e.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==t?t.pageY:e.clientY,i.dragging=!0},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e=this;Math.floor(e.options.slidesToShow/2),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&!1===e.options.centerMode?(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-1&&!0===e.options.centerMode&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").end(),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},t.prototype.visibility=function(){var e=this;e.options.autoplay&&(document[e.hidden]?e.interrupted=!0:e.interrupted=!1)},e.fn.slick=function(){var e,i,n=this,o=arguments[0],s=Array.prototype.slice.call(arguments,1),l=n.length;for(e=0;e<l;e++)if("object"==typeof o||void 0===o?n[e].slick=new t(n[e],o):i=n[e].slick[o].apply(n[e].slick,s),void 0!==i)return i;return n},t.prototype.slidesAdjust=function(){var t=this;e(".slick-slide.slick-next-slide-adjust").removeClass("slick-next-slide-adjust"),e(".slick-slide.slick-prev-slide-adjust").removeClass("slick-prev-slide-adjust");var i=e(t.$slides.get(t.currentSlide));i.next().addClass("slick-next-slide-adjust"),i.prev().addClass("slick-prev-slide-adjust")}}(e)}()}),csui.define("esoc/widgets/userwidget/util",["require","module","csui/lib/jquery","csui/lib/marionette","csui/lib/underscore","csui/utils/contexts/factories/connector","i18n!esoc/widgets/userwidget/nls/lang","esoc/widgets/common/util","esoc/widgets/utils/chat/chat.view","esoc/widgets/userwidget/chat/view/presence.view","esoc/widgets/userwidget/chat/skype/skypeucwa.attribute.model","csui/controls/dialog/dialog.view","csui/controls/side.panel/side.panel.view","csui/utils/non-emptying.region/non-emptying.region","esoc/controls/dialog/multiple.dialogs.view","esoc/lib/slick/slick","csui/utils/url","esoc/widgets/userwidget/chat/chatfactory","esoc/factory/pulsesettingsfactory"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f,g,b,v){return{"lang":l,"commonUtil":a,"userDialog":null,"userStack":[],"updateAjaxCall":function(e){var t=this,o=e.itemview,l=e.context,d=e.url,u=e.requestType,p=e.relation,m=e.otherUserProfile,h=e.targetElement,f=e.data,b=e.popOverTarget,y=e.type,w=e.connector?e.connector:o.options.context?o.options.context.getObject(s):o.model.connector;e.userProfileview,e.newValue;w.authenticator.syncStorage(),w.makeAjaxCall({"url":d,"type":y,"data":f,"contentType":!1,"crossDomain":!0,"processData":!1,"success":function(e,s,d){switch(u){case"membersAPI":var f=e.data;if(m)f.otherUser=!1,f.actions={"viewprofile":t.lang.viewprofile};else if(p===a.globalConstants.FRIENDS){var y={"following":!0,"selfUser":!1,"relation":p,"otherUserProfile":m};t.setRelationModel(e.data,y)}l.getModel(v,{"attributes":{"id":"chat"},"options":{"chat":!0},"permanent":!0}).ensureFetched().done(function(e){f.chatSettings=e.attributes.chatSettings,o.collection.add(f)});var w={"id":f.id,"username":f.name,"context":l},x=new n.Region({"el":o.$el.find("#esoc-mini-profile-presence-indicator")}),C=new c(w);x.show(C),o.collection.trigger("add.follower");break;case"pulseInfo":var _=e.results;o.util.changeRelationsCounts(_);var k=o.util.commonUtil.globalConstants.event_bus._events;k&&k.updatefollowerstab&&k.updatefollowerstab.length>0&&(k.updatefollowerstab=k.updatefollowerstab.slice(-1)),o.util.commonUtil.globalConstants.event_bus.trigger("updatefollowerstab",o,_);break;case"miniProfilePopup":var E=e.results,S=h.find(".esoc-miniprofile-followingaction");i(b).binf_popover("hide"),o.model.attributes.following=!o.model.attributes.following,o.model.attributes.following?S.attr("title",t.lang.unfollow):S.attr("title",t.lang.follow),o.model.attributes.following?h.find(".esoc-miniprofile-followingaction").removeClass("esoc-mini-profile-follow-icon").addClass("esoc-mini-profile-unfollow-icon"):h.find(".esoc-miniprofile-followingaction").removeClass("esoc-mini-profile-unfollow-icon").addClass("esoc-mini-profile-follow-icon");var T=o.util.commonUtil.globalConstants.event_bus._events;T&&T.changefollowingstatus&&T.changefollowingstatus.length>0&&(T.changefollowingstatus=T.changefollowingstatus.slice(-1)),T&&T.updateuserfollowingstatus&&T.updateuserfollowingstatus.length>0&&(T.updateuserfollowingstatus=T.updateuserfollowingstatus.slice(-1)),o.util.commonUtil.globalConstants.event_bus.trigger("changefollowingstatus",o,E),o.util.commonUtil.globalConstants.event_bus.trigger("updateuserfollowingstatus",o,E);break;case"userProfileFollowingAction":var P=e.results;o.model.attributes.following=!o.model.attributes.following,o.model.attributes.following?h.html(t.lang.unfollow):h.html(t.lang.follow),o.$el.find(".esoc-userprofile-following-action").attr("title",o.model.attributes.following?t.lang.unfollow:t.lang.follow),o.model.attributes.followers_count=P.data.user.followers_count,o.model.attributes.following_count=P.data.user.following_count;var O=g.combine(a.getV2Url(o.options.connector.connection.url),t.commonUtil.REST_URLS.pulseRestUrl,o.model.attributes.id),M={"itemview":o,"url":O,"type":"GET","requestType":"pulseInfo"};t.updateAjaxCall(M);break;case"relation":var A=e.results;o.model.attributes.following=!o.model.attributes.following,o.model.attributes.following?(o.model.attributes.actions.following=t.lang.unfollow,o.model.attributes.actions.followingClass="esoc-mini-profile-unfollow-icon"):(o.model.attributes.actions.following=t.lang.follow,o.model.attributes.actions.followingClass="esoc-mini-profile-follow-icon"),o.model.attributes.otherUserProfile||o.util.changeRelationsCounts(A.data.user);var U=!1;if(o.$el.find(".esoc-mini-profile-actions").hasClass("esoc-miniprofile-has-tabindex")&&(U=!0),o.render(),o.showActions(),o.setProfilePic(),o.$el.find(".esoc-mini-profile-following-action").trigger("focus"),U&&o.$el.find(".esoc-mini-profile-actions").addClass("esoc-miniprofile-has-tabindex"),o.options.model.attributes.relation===a.globalConstants.FRIENDS&&!o.options.model.attributes.otherUserProfile){var I=o.options.model.collection;I.remove(o.model.attributes.id),I.trigger("remove.relation",o,A)}break;case"miniProfileActionsDisplay":var j=JSON.parse(JSON.stringify(e.results));if(o.model.attributes.following=j.following,o.model.attributes.chatSettings=j.chatSettings,i(".esoc-mini-profile-popover .esoc-mini-profile-loading-img").hide(),o.model.attributes.following?i(".esoc-mini-profile-popover .esoc-mini-profile-following-action").find(".esoc-miniprofile-followingaction").removeClass("esoc-mini-profile-follow-icon").addClass("esoc-mini-profile-unfollow-icon").attr("title",t.lang.unfollow):i(".esoc-mini-profile-popover .esoc-mini-profile-following-action").find(".esoc-miniprofile-followingaction").removeClass("esoc-mini-profile-unfollow-icon").addClass("esoc-mini-profile-follow-icon").attr("title",t.lang.follow),o.options.model.attributes.otherUser&&!o.options.model.attributes.deleted&&j.chatSettings&&j.chatSettings.chatEnabled){i(".esoc-mini-profile-popover .esoc-mini-profile-actions").show(),i(".esoc-mini-profile-popover .esoc-chat-action-enabled-"+o.model.attributes.id).removeClass("binf-hidden");var $=new n.Region({"el":i(".esoc-mini-profile-popover .esoc-miniprofile-chat-action-"+o.model.attributes.id)}),R={"context":o.options.context,"tguser":o.options.model.attributes.name,"domain":j.chatSettings.chatDomain},D=new r(R);$.show(D),i(".esoc-simple-mini-profile-user-img .esoc-mini-profile-chat-comment").css("display","inline-block"),i(".esoc-mini-profile-chat-comment").on("click",function(e){o.options.tguser=o.options.model.get("name"),o.options.domain=o.options.model.get("chatSettings")&&o.options.model.get("chatSettings").chatDomain,o.launchChatWindow(o)})}else i(".esoc-mini-profile-popover .esoc-mini-profile-actions").show(),i(".esoc-mini-profile-popover .esoc-chat-action-disabled-"+o.model.attributes.id).removeClass("binf-hidden");break;case"updateSettings":h.prop("disabled",!1),h.trigger("focus");break;case"updateExtendedTextField":o.model.attributes.userInputField?(o.model.attributes.content=void 0!==o.managerID?o.managerID:o.model.attributes.content,o.model.attributes.reportsTo=o.$el.find(".esoc-user-extended-edit-input").val().trim()?o.$el.find(".esoc-user-extended-edit-input").val():""):o.model.attributes.content=o.$el.find(".esoc-user-extended-edit-input").val().trim()?o.$el.find(".esoc-user-extended-edit-input").val():"",o.render(),o.model.attributes.userInputField?(o.on("view:shown",function(){o.trigger("change:content","userInputChanged")}),o.isUserModelLoaded&&o.trigger("change:content","userInputChanged")):o.trigger("change:content"),o.showSeeMoreLink(),o.model.attributes.content?o.$el.find(".esoc-user-messages").trigger("focus"):o.$el.find(".esoc-user-default-content").trigger("focus"),o.options.parentView.triggerMethod("update:scrollbar");break;case"postStatus":o.$el.find(".esoc-user-extended-edit-input")[0].innerHTML=o.$el.find(".esoc-user-extended-edit-input").val(),o.model.attributes.content=o.$el.find(".esoc-user-extended-edit-input").val().trim()?o.$el.find(".esoc-user-extended-edit-input").html():o.model.attributes.content,o.render(),o.trigger("change:content"),o.showSeeMoreLink(),o.model.attributes.content?o.$el.find(".esoc-user-messages").trigger("focus"):o.$el.find(".esoc-user-default-content").trigger("focus");break;case"updateExtendedLink":var N=o.$el.find(".esoc-user-extended-edit-input").val();o.model.attributes.content=t.getValidLink(N),o.render(),o.trigger("change:content"),o.addEllipsisOnFocus(),o.model.attributes.content?o.$el.find(".esoc-user-messages a").trigger("focus"):o.$el.find(".esoc-user-default-content").trigger("focus")}},"error":function(e,n,s){switch(u){case"miniProfilePopup":i(b).binf_popover("hide");var l={"parent":h,"errorContent":e.responseJSON?e.responseJSON.errorDetail?e.responseJSON.errorDetail:e.responseJSON.error:t.lang.defaultErrorMessageForMiniProfilePopup};t.commonUtil.openErrorDialog(l);break;case"relation":var a={"parent":h,"errorContent":e.responseJSON?e.responseJSON.errorDetail?e.responseJSON.errorDetail:e.responseJSON.error:t.lang.defaultErrorMessageForRelation};t.commonUtil.openErrorDialog(a);break;case"miniProfileActionsDisplay":var r=e.responseJSON.errorDetail?e.responseJSON.errorDetail:e.responseJSON.error;i(".esoc-mini-profile-popover .esoc-mini-profile-loading-img").hide(),i(".esoc-mini-profile-popover .esoc-mini-profile-following-error").html(r),i(".esoc-mini-profile-popover .esoc-mini-profile-following-error").attr("title",r),i(".esoc-mini-profile-popover .esoc-mini-profile-following-error").show(),i(".esoc-mini-profile-popover .esoc-mini-profile-actions").hide();break;case"updateSettings":var c={"parent":h,"errorContent":e.responseJSON?e.responseJSON.errorDetail?e.responseJSON.errorDetail:e.responseJSON.error:t.lang.defaultErrorMessageForUpdateSettings};t.commonUtil.openErrorDialog(c);var d=h.val();if("privacySettings"===h.attr("name")){var p=o.$el.find("#"+h.attr("id")+"_radio"),m=o.$el.find("#esoc_privacySettings_"+o.model.attributes.settings.contentPrivacy+"_radio");p.addClass("icon-radiobutton").removeClass("icon-radiobutton-selected"),m.addClass("icon-radiobutton-selected").removeClass("icon-radiobutton"),h.prop("checked",!1),o.$el.find("#esoc_privacySettings_"+o.model.attributes.settings.contentPrivacy).prop("checked",!0)}else{var f=o.$el.find("#"+h.attr("id")+"_checkbox");o.model.attributes.settings&&o.model.attributes.settings.hasOwnProperty(d)?f.addClass("icon-checkbox-selected").removeClass("icon-checkbox"):f.addClass("icon-checkbox").removeClass("icon-checkbox-selected"),h.prop("checked",o.model.attributes.settings.hasOwnProperty(d))}h.prop("disabled",!1),h.trigger("focus");break;case"updateExtendedTextField":case"postStatus":var g={"parent":h,"errorContent":e.responseJSON?e.responseJSON.errorDetail?e.responseJSON.errorDetail:e.responseJSON.error:"postStatus"===u?t.lang.defaultErrorMessageForStatusPost:t.lang.defaultErrorMessageForUpdateExtentedField};t.commonUtil.openErrorDialog(g),o.$el.find(".esoc-user-extended-edit-mode").removeClass("esoc-extendedinfo-update-mask"),o.$el.find(".esoc-user-extended-edit-input").prop("disabled",!1),o.model.attributes.content?o.$el.find(".esoc-user-messages").trigger("focus"):o.$el.find(".esoc-user-default-content").trigger("focus");break;case"updateExtendedLink":var v={"parent":h,"errorContent":e.responseJSON?e.responseJSON.errorDetail?e.responseJSON.errorDetail:e.responseJSON.error:t.lang.defaultErrorMessageForUpdateExtentedLink};t.commonUtil.openErrorDialog(v),o.$el.find(".esoc-user-extended-edit-mode").removeClass("esoc-extendedinfo-update-mask"),o.$el.find(".esoc-user-extended-edit-input").prop("disabled",!1),o.model.attributes.content?o.$el.find(".esoc-user-messages a").trigger("focus"):o.$el.find(".esoc-user-default-content").trigger("focus");break;case"userProfileFollowingAction":var y={"parent":h,"errorContent":e.responseJSON?e.responseJSON.errorDetail?e.responseJSON.errorDetail:e.responseJSON.error:t.lang.defaultErrorMessageForUserProfileActionLink};t.commonUtil.openErrorDialog(y)}}})},"closeUserWidgetDialog":function(){i(".esoc-user-widget-dialog").is(":visible")&&i(".esoc-user-widget-dialog .cs-close").trigger("click")},"showUserProfileDialog":function(e,t,n){if(e.templateHelpers().messages.showUserProfileLink){var s,a;e.$el.find(".esoc-user-mini-profile").binf_popover("hide"),e.$el.find(".esoc-user-display-name").attr("aria-describedby")&&i(".esoc-mini-profile-popover.popover").remove(),clearTimeout(e.profileTimer),this.commonUtil.unbindWidget();var r=e.$el.offsetParent(),c=i(r).closest(".binf-popover");r&&r.offsetParent&&1===c.length&&c.hide(),i(".activityfeed-expand").is(":visible")&&i(".activityfeed-expand .cs-close").trigger("click"),this.userDialog&&!e.options.enableSimpleSettingsModel&&this.userDialog.destroy(),this.userStack.length>0&&this.userStack[this.userStack.length-1].model.id===e.model.id&&this.userStack.pop(),a=e.options.model.attributes.otherUser?o.str.sformat(e.templateHelpers().messages.othersProfile,e.model.attributes.display_name?e.model.attributes.display_name:e.options.display_name):e.templateHelpers().messages.myProfile,e.options.userWidgetView=e;var f=this;if(e.options.enableSimpleSettingsModel){var g=e.options.context.getModel("user"),v=e.options.userid!==g.id;if(this.userProfileSidePanel&&v||v){if(this.userDialog){if(0!==i(".binf-modal-dialog.user"+e.options.userid).length)return void(i(".slick-slide").length>0&&i(i(".slick-slide")[i(".binf-modal-dialog.user"+e.options.userid).parents(".slick-slide")[0].dataset.slickIndex]).trigger("click"));this.removeSlick(),this.simpleUserWidgetViews.push(new n(e.options)),this.userDialog.appendData(this.simpleUserWidgetViews)}else{this.userProfileSidePanel&&this.userProfileSidePanel.trigger("destroy"),this.simpleUserWidgetViews=[],this.simpleUserWidgetViews.push(new n(e.options)),this.userDialog=new h({"largeSize":!0,"views":this.simpleUserWidgetViews,"util":this,"className":"esoc-simple-user-widget-dialog esoc","targetEle":e.options.targetEle,"focusCallBack":e.options.focusCallBack});var y=i.fn.binf_modal.getDefaultContainer();new m({"el":y}).show(this.userDialog),this.userDialog.$el.css("display","block")}this.userDialog.$el.find(".binf-modal-header").remove(),this.userDialog.listenTo(this.userDialog,"destroy",function(){f.simpleUserWidgetViews&&1===f.simpleUserWidgetViews.length&&f.simpleUserWidgetViews[0].trigger("destroy"),f.userDialog=null,f.simpleUserWidgetViews=null}),this.simpleUserWidgetViews.length>=2&&this.userDialog.options.views[this.simpleUserWidgetViews.length-2].$el.find(".cs-field-read-content").trigger("focusout"),this.applySlick()}else if(void 0===this.simpleUserWidgetView){this.userDialog&&this.userDialog.trigger("destroy:all"),e.options.sidePanel=!0,this.simpleUserWidgetView=new n(e.options);var w=this;this.simpleUserWidgetView.layoutState={},this.userProfileSidePanel=new p({"slides":[{"content":this.simpleUserWidgetView}],"sidePanelClassName":"esoc-simple-user-widget-dialog","layout":{"header":!1,"footer":!0,"mask":!0,"resize":!1},"thresholdWidth":95,"scrollbleContent":"","contentView":this.simpleUserWidgetView,"context":e.options.context,"keyboard":!1,"footerButtonLabel":l.sidePanelCloseButton}),this.userProfileSidePanel.show(),this.simpleUserWidgetView.listenToOnce(this.simpleUserWidgetView,"before:destroy",function(){w.userProfileSidePanel&&w.userProfileSidePanel.trigger("destroy"),w.userProfileSidePanel=void 0,w.simpleUserWidgetView=void 0}),this.userProfileSidePanel.footerView.$el.on("keydown",o.bind(function(e){w.simpleUserWidgetView.trigger("sidepanel:keydown",e)})),w.userProfileSidePanel.listenToOnce(w.userProfileSidePanel,"before:destroy",function(){w.userProfileSidePanel=void 0,w.simpleUserWidgetView&&w.simpleUserWidgetView.trigger("destroy"),w.simpleUserWidgetView=void 0}),w.userProfileSidePanel.listenTo(w.userProfileSidePanel,"after:show",function(){w.simpleUserWidgetView.ui.userProfileClose.focus()})}}else s=new t(e.options),this.userDialog=new u({"title":a,"iconLeft":this.userStack.length>0?"arrow_back esoc-user-widget-dialog-back":"","largeSize":!0,"view":s,"className":"esoc-user-widget-dialog esoc","iconRight":"binf-close esoc-user-widget-dialog-close"}),this.userDialog.show()
;this.userStack.length>0&&(a=this.userStack[this.userStack.length-1].model.attributes.otherUser?o.str.sformat(l.othersProfileTooltip,this.userStack[this.userStack.length-1].model.attributes.display_name?this.userStack[this.userStack.length-1].model.attributes.display_name:e.options.display_name):this.userStack[this.userStack.length-1].templateHelpers().messages.myProfile,i("span.tile-type-icon.cs-icon-left.arrow_back.esoc-user-widget-dialog-back").attr("title",l.goBackTo+" "+a)),i(".esoc-user-widget-dialog-back").on("click",function(){var i=f.userStack.pop();i.model.id===e.model.id&&(i=f.userStack.pop()),f.showUserProfileDialog(i,t,n)}),i(".esoc-user-widget-dialog .cs-close").on("click",function(){f.userStack=[]}),0===this.userStack.length&&this.userStack.push(e),e.on("userwidgetview.show.user.dialog",function(e){var i=this;csui.require(["esoc/controls/userwidget/userwidget.view"],function(s){var l=o.extend({},i.options);e.options.userid=e.options.model.id;var a=o.extend(l,e.options);delete a.model,a.display_name=e.options.model.attributes.display_name;var r=new s(a);r.showUserProfileDialog(r,t,n)})}),d.getChatEnabled()&&d.getPresenceEnabled()&&!d.isPluginEnabled()&&i(".cs-close").on("click",function(e){-1!==i.inArray("esoc-user-widget-dialog-close",e.target.classList)&&d.getCurrentSubscriptionURL()&&b.getProvider().deleteSubscription(d.getCurrentSubscriptionURL())})}},"applySlick":function(e){i(".binf-modal-dialog").length>1?(i(".binf-modal-dialog").find(".cs-close").addClass("slick-close"),i(".modal-dialogs-inner").slick({"centerMode":!0,"easing":"easeOutElastic","focusOnSelect":!0,"focusOnChange":!0,"initialSlide":void 0!==e?e:this.simpleUserWidgetViews.length-1,"variableWidth":!0,"speed":500,"swipe":!1,"infinite":!1,"prevArrow":'<div class="slick-prev" title='+l.previous+" aria-label="+l.previous+"/>","nextArrow":'<div class="slick-next" title='+l.next+" aria-label="+l.next+"/>"})):(i(".binf-modal-dialog").find("[data-cstabindex=-1]").attr("tabindex","0").attr("data-cstabindex","0"),i(".binf-modal-dialog").find(".cs-close").removeClass("slick-close"))},"removeSlick":function(){i(".slick-list").length>0&&i(".modal-dialogs-inner").slick("unslick")},"getValidLink":function(e){var t=/((http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi;return e&&null!==e.match(t)?e:""},"displayUserWidget":function(t,n){n.find(".esoc-widget-user-display-name").each(function(){var n={"userid":i(this).data("userid"),"context":t,"placeholder":this,"showUserProfileLink":!0,"showMiniProfile":!0};e("esoc/widgets/userwidget/userwidget").getUser(n)})},"changeRelationsCounts":function(e){var t=e.friends_count>999?"999+":e.friends_count,n=e.followers_count>999?"999+":e.followers_count;i(".esoc-user-following-count").html(t),i(".esoc-user-following-tab-label").attr("title",o.str.sformat(this.lang.followingTooltip,e.friends_count)),i(".esoc-user-followers-count").html(n),i(".esoc-user-followers-tab-label").attr("title",o.str.sformat(this.lang.followersTooltip,e.followers_count))},"setRelationModel":function(e,t){e.relation=t.relation,e.following=t.following,e.otherUserProfile=t.otherUserProfile,t.selfUser?(e.actions={"viewprofile":this.lang.viewprofile},e.otherUser=!1):(e.otherUser=!0,t.following?e.actions={"following":this.lang.unfollow,"viewprofile":this.lang.viewprofile,"chat":this.lang.chat,"followingClass":"esoc-mini-profile-unfollow-icon"}:e.actions={"following":this.lang.follow,"viewprofile":this.lang.viewprofile,"chat":this.lang.chat,"followingClass":"esoc-mini-profile-follow-icon"})},"escapeSelector":function(e){var t=/^([a-zA-Z0-9_-]+)$/;return o.isNumber(e)||e.match(t)?e:e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")}}}),csui.define("hbs!esoc/widgets/userwidget/impl/userwidget",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' \x3c!-- For user show mini profile and user profile --\x3e\r\n  <a href="javascript:void(0);" class="esoc-user-container\r\n  '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showUserProfilePicture"):s,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":2},"end":{"line":3,"column":79}}}))?s:"")+"\r\n    "+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showUserProfileLink"):s,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":4},"end":{"line":4,"column":71}}}))?s:"")+"\r\n    "+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showMiniProfile"):s,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":67}}}))?s:"")+"\r\n    "+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"userWidgetWrapperClass"):s,t))+'">\r\n\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showUserProfilePicture"):s,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":4},"end":{"line":12,"column":11}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showUserDisplayName"):s,{"name":"if","hash":{},"fn":e.program(10,o,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":4},"end":{"line":20,"column":11}}}))?s:"")+"\r\n  </a>\r\n"},"2":function(e,t,i,n,o){return"esoc-user-profile-pic-container"},"4":function(e,t,i,n,o){return" esoc-user-profile-link "},"6":function(e,t,i,n,o){return" esoc-user-mini-profile "},"8":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="image_user_placeholder esoc-userwidget-default-avatar esoc-user-default-avatar-'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"userid"):s,t))+'">'+e.escapeExpression((l=null!=(l=a(i,"initials")||(null!=t?a(t,"initials"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"initials","hash":{},"loc":{"start":{"line":9,"column":119},"end":{"line":9,"column":131}}}):l))+'</span>\r\n      <img class="esoc-userprofile-img-'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"userid"):s,t))+' binf-img-circle esoc-user-widget-avatar binf-hidden"\r\n        alt="'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":11,"column":13},"end":{"line":11,"column":29}}}):l))+'" src="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"userImgSrc"):s,t))+'">\r\n'},"10":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="esoc-user-display-name" id="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"uniqueId"):s,t))+'">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"messages"):t)?a(s,"showPresenceIndicator"):s,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"loc":{"start":{"line":15,"column":4},"end":{"line":17,"column":11}}}))?s:"")+"        "+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":24}}}):l))+"\r\n    </span>\r\n"},"11":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span id="user-presence-indicator-'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"userid"):s,t))+'" class="user-presence-indicator"></span>\r\n'},"13":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' \x3c!-- For group show only plain text and/or image without any miniprofile or user profile--\x3e\r\n  <span class="esoc-group-container '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"userWidgetWrapperClass"):s,t))+'">\r\n\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showUserProfilePicture"):s,{"name":"if","hash":{},"fn":e.program(14,o,0),"inverse":e.noop,"loc":{"start":{"line":26,"column":4},"end":{"line":30,"column":11}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showUserDisplayName"):s,{"name":"if","hash":{},"fn":e.program(16,o,0),"inverse":e.noop,"loc":{"start":{"line":31,"column":4},"end":{"line":38,"column":11}}}))?s:"")+"\r\n  </span>\r\n"},"14":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="image_group_placeholder esoc-userwidget-default-avatar esoc-user-default-avatar-'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"userid"):s,t))+'"></span>\r\n      <img class="esoc-userprofile-img-'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"userid"):s,t))+' binf-img-circle esoc-user-widget-avatar binf-hidden"\r\n        alt="'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":29,"column":13},"end":{"line":29,"column":29}}}):l))+'" src="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"userImgSrc"):s,t))+'">\r\n'},"16":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="esoc-user-group-name" id="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"uniqueId"):s,t))+'">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"messages"):t)?a(s,"showPresenceIndicator"):s,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"loc":{"start":{"line":33,"column":4},"end":{"line":35,"column":11}}}))?s:"")+"        "+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":36,"column":8},"end":{"line":36,"column":24}}}):l))+"\r\n    </span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.type === 0",{"name":"xif","hash":{},"fn":e.program(1,o,0),"inverse":e.program(13,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":41,"column":8}}}))?s:""}});return i.registerPartial("esoc_widgets_userwidget_impl_userwidget",n),n}),csui.define("css!esoc/widgets/userwidget/impl/userwidget",[],function(){}),csui.define("esoc/controls/userwidget/userwidget.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/utils/contexts/factories/user","csui/utils/user.avatar.color","esoc/widgets/userwidget/model/userwidget.model","esoc/widgets/userwidget/util","hbs!esoc/widgets/userwidget/impl/userwidget","i18n!esoc/widgets/userwidget/nls/lang","esoc/widgets/userwidget/chat/chatfactory","css!esoc/widgets/userwidget/impl/userwidget.css"],function(e,t,i,n,o,s,l,a,r,c,d,u){var p=null;return o.ItemView.extend({"tagName":"span","className":"esoc-userwidget-wrapper","template":c,"util":r,"ui":{"initialsPlaceholder":".image_user_placeholder"},"templateHelpers":function(){return{"messages":{"showPresenceIndicator":this.options.showPresenceIndicator,"showMiniProfile":this.options.showMiniProfile,"showUserProfileLink":this.options.showUserProfileLink,"showUserProfilePicture":this.showProfilePic,"showUserDisplayName":!this.showProfilePic,"userWidgetWrapperClass":this.options.userWidgetWrapperClass,"myProfile":d.myProfile,"othersProfile":d.othersProfile,"userid":this.options.userid,"uniqueId":i.uniqueId(),"userImgSrc":this.options.imgSrc?this.options.imgSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=","xFrame":this.options.xFrame}}},"initialize":function(e){this.options=e;var t=this.options.context.getModel(s).get("id")||this.options.loggedUserId;this.options.model.attributes.otherUser=this.compareValues(t,this.options.userid),p=this,void 0!==this.options.showPresenceIndicator&&this.options.showPresenceIndicator&&setInterval(this.getCurrentUserStatus(),5e3),this.showProfilePic=!!this.options.showUserWidgetFor&&"profilepic"===this.options.showUserWidgetFor},"compareValues":function(e,t){return"string"==typeof e&&"string"==typeof t?e!==t:parseInt(e,10)!==parseInt(t,10)},"onRender":function(e){if(!this.options.unKnownUser&&this.showProfilePic&&void 0!==this.options.model.attributes.photo_url){var t={"userModel":this.options.model,"context":this.options.context,"userid":this.options.userid,"photoElement":this.$el.find('[class^="esoc-userprofile-img-'+r.escapeSelector(this.options.userid)+'"]'),"defaultPhotElement":this.$el.find(".esoc-user-default-avatar-"+r.escapeSelector(this.options.userid))};r.commonUtil.setProfilePic(t)}this.options.showMiniProfile&&this.$el.find(".esoc-user-mini-profile").trigger("mouseover",{"stopPropagation":!0})},"getCurrentUserStatus":function(){},"events":{"click .esoc-user-profile-link":"showUserProfileDialog","keydown .esoc-user-profile-link":"showUserProfileDialogWithSpaceKey","mouseover .esoc-user-mini-profile":"showMiniProfilePopup"},"showUserProfileDialogWithSpaceKey":function(e){32===(e.keyCode||e.which)&&(e.preventDefault(),t(e.currentTarget).trigger("click"))},"showMiniProfilePopup":function(e,t){if(0===this.model.attributes.type){var i=e||window.event;t&&t.stopPropagation&&i.stopPropagation(),this.options.targetEle=i.target,this.options.userWidgetView=this;var n=this;csui.require(["esoc/widgets/userwidget/view/userprofile.view","esoc/widgets/userwidget/view/miniprofile.view"],function(t,i){n.options.userprofileView=t,new i(n.options).render(e)})}},"showUserProfileDialog":function(e){if(0===this.model.attributes.type){if(e){var i=t(e.currentTarget).find("a");this.options.targetEle=i.is(":visible")?i:e.currentTarget}this.options.originatingView&&this.options.originatingView.disengageModalKeyboardFocusOnClose&&this.options.originatingView.disengageModalKeyboardFocusOnClose();var n=this;csui.require(["esoc/widgets/userwidget/view/userprofile.view","esoc/widgets/userwidget/view/simple.userwidget.view"],function(e,t){r.showUserProfileDialog(n,e,t),r.userStack.length>0&&r.userStack[r.userStack.length-1].model.id===n.model.id||r.userStack.push(n)})}},"constructor":function(t){var i=this;if(t=t||{},t=this.setDefaultWidgetOptions(t),u.initializeApplication(t),t.model)t.model.connector=t.connector,t.model.userid=t.model.attributes.id,t.model.attributes.userid=t.model.attributes.id;else{var n={"userid":t.userid,"connector":t.connector,"context":t.context};t.model=r.commonUtil.getUserWidgetModel(n),this.isUserModelLoaded=!1,t.model.ensureFetched().done(function(){"extendedInfoText"===t.source&&(i.$el?t.parentView.trigger("view:shown"):(i.isUserModelLoaded=!0,i.parentView=t.parentView)),t.model.userid=t.model.attributes.id,t.model.attributes.userid=t.model.attributes.id,t.model.attributes.department_name=t.model.attributes.group_id?t.model.attributes.group_id.name:""})}var s=e.config();s&&(void 0!==s.enableSimpleUserProfile&&(t.enableSimpleSettingsModel=s.enableSimpleUserProfile),void 0!==s.enableProfilePicture&&(t.enableUploadProfilePicture=s.enableProfilePicture)),o.ItemView.prototype.constructor.call(this,t),this.model.on("change",this.render,this),this.model.on("error",this.errorHandle,this),this.listenTo(this,"render",this._assignUserColor)},"onShow":function(){this.isUserModelLoaded&&this.parentView&&(this.parentView.isUserModelLoaded=!0)},"setDefaultWidgetOptions":function(e){return e.unKnownUser=-3===e.userid,e.showMiniProfile=!e.unKnownUser&&!!e.showMiniProfile&&e.showMiniProfile,e.showUserProfileLink=!e.unKnownUser&&!!e.showUserProfileLink&&e.showUserProfileLink,e.showPresenceIndicator=!e.unKnownUser&&!1,e},"errorHandle":function(e,t){},"_assignUserColor":function(){var e=l.getUserAvatarColor(this.model.attributes);this.ui.initialsPlaceholder.css("background",e)}})}),csui.define("esoc/widgets/utils/commentdialog/commentdialog.model",["csui/lib/backbone","csui/utils/url","esoc/widgets/common/util","csui/models/mixins/resource/resource.mixin"],function(e,t,i,n){var o=e.Model.extend({"defaults":{"attachementsEnabled":!0,"chatEnabled":!0,"commentingOpen":!0,"commentsEnabled":!0,"likesEnabled":!0,"taggingEnabled":!0,"threadingEnabled":!0,"csid":"","commentCount":0},"connector":"","commonUtil":i,"constructor":function(t,i){this.defaults.csid=i.nodeid,this.options=i||{},e.Model.prototype.constructor.apply(this,arguments),i&&i.connector&&i.connector.assignTo(this),this.makeResource(i)},"url":function(){var e=t.combine(this.connector.connection.url,this.commonUtil.REST_URLS.csGetROI);return e+="csid="+this.options.csid+"&includes=comment_count"},"parse":function(e){var t=JSON.parse(JSON.stringify(e.available_settings)),i={"socialactions":t};return i.id=t.CSID,i.showSocialActions=t.pulseEnabled,i.wnd_comments=t.commentCount,i.wnd_comments_validated=t.commentCount>0?t.commentCount>99?"99+":t.commentCount:"",i}});return n.mixin(o.prototype),o}),csui.define("hbs!esoc/widgets/tablecell/impl/tablecell",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="esoc-social-actions-widget-area esoc-column-social" data-csid="'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":2,"column":78},"end":{"line":2,"column":84}}}):l))+'">\r\n      <span class="esoc-column-social-comment-wrapper">\r\n        <span class="esoc-socialactions-comment" data-value="'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":4,"column":61},"end":{"line":4,"column":67}}}):l))+'"\r\n              aria-label="'+e.escapeExpression((l=null!=(l=a(i,"wnd_comments_title")||(null!=t?a(t,"wnd_comments_title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_title","hash":{},"loc":{"start":{"line":5,"column":26},"end":{"line":5,"column":48}}}):l))+'">\r\n          <button class="esoc-socialactions-comment-button cs-icon-comment csui-acc-focusable"\r\n                title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"addComments"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"addComments"):s,t))+'">\r\n            '+(null!=(s=(a(i,"icon-v2")||t&&a(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","theme":null!=t?a(t,"iconTheme"):t,"iconName":null!=t?a(t,"iconName"):t},"loc":{"start":{"line":8,"column":12},"end":{"line":8,"column":73}}}))?s:"")+'\r\n          </button>\r\n          <span title="'+e.escapeExpression((l=null!=(l=a(i,"wnd_comments_title")||(null!=t?a(t,"wnd_comments_title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_title","hash":{},"loc":{"start":{"line":10,"column":23},"end":{"line":10,"column":45}}}):l))+'" class="cs-text wnd_comments_validated"\r\n                data-csid="'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":11,"column":27},"end":{"line":11,"column":33}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"wnd_comments_validated")||(null!=t?a(t,"wnd_comments_validated"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_validated","hash":{},"loc":{"start":{"line":11,"column":35},"end":{"line":11,"column":61}}}):l))+'</span>\r\n        </span>\r\n        <span class="binf-sr-only">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"addAComment"):s,t))+"</span>\r\n      </span>\r\n  </span>\r\n"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="esoc-socialactions-comment" data-value="'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":17,"column":55},"end":{"line":17,"column":61}}}):s))+'"\r\n        aria-label="'+e.escapeExpression((s=null!=(s=l(i,"wnd_no_comments")||(null!=t?l(t,"wnd_no_comments"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"wnd_no_comments","hash":{},"loc":{"start":{"line":18,"column":20},"end":{"line":18,"column":39}}}):s))+'"></span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"showSocialActions"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":19,"column":7}}}))?s:""}});return i.registerPartial("esoc_widgets_tablecell_impl_tablecell",n),n}),csui.define("css!esoc/lib/jquery.ui/themes/opentext/jquery-ui",[],function(){}),csui.define("esoc/lib/jquery-ui",["module","csui/lib/jquery.ui/js/jquery-ui","css!esoc/lib/jquery.ui/themes/opentext/jquery-ui.css"],function(e,t){return t}),csui.define("esoc/widgets/socialactions/mentions",["module","csui/lib/jquery","esoc/widgets/common/util","esoc/lib/jquery-ui"],function(e,t,i){return function(e,t,n,o){e.widget("ui.triggeredAutocomplete",e.extend(!0,{},e.ui.autocomplete.prototype,{"options":{"trigger":"@","commonUtil":i,"allowDuplicates":!1},"_create":function(){var i=this;this.id_map={},this.stopIndex=-1,this.stopLength=-1,this.contents="",this.cursorPos=0,this.element.on("keydown.autocomplete.fix",function(t){switch(t.keyCode){case e.ui.keyCode.ESCAPE:i.close(t);break;case e.ui.keyCode.UP:case e.ui.keyCode.DOWN:i.menu.element.is(":visible")||t.stopImmediatePropagation()}});var o=this.element.attr("id_map");o&&(this.id_map=JSON.parse(o)),this.ac=e.ui.autocomplete.prototype,this.ac._create.apply(this,arguments),this.updateHidden(),this.options.select=function(t,o){sessionStorage.removeItem("esoc-user-mentions-info");var s=i.element[0].textContent,l=(i.getCursor(s),i.getCaretPosition(i.element[0]),"");if(-1===o.item.id)return l=i.options.trigger+i.userterm,!1;if(l="("+i.options.trigger+o.item.id+")","undefined"!=typeof InstallTrigger){var a=e("<span />");a.css("visibility","hidden"),a.addClass("esoc-span-mention"),a[0].innerText=l,e(i.element)[0].appendChild(a[0]);var r=e(a[0]).width();e(i.element)[0].removeChild(a[0]);var c=e("<input />");c.attr({"id":"data-userid","type":"text","value":l,"disabled":"true"}),c.addClass("esoc-user-mention"),c.css("width",r+"px")}else c=e("<input />"),c.attr({"type":"button","value":l}),c.addClass("esoc-user-mention");return setTimeout(function(){if(i.options.commonUtil.globalConstants.MAX_CHAR_LIMIT<s.length+l.length)return!1;!n.documentMode||"DIV"!==i.node.nodeName&&"P"!==i.node.nodeName?i.replaceTextNodeWithMention(i,c[0]):-1!==o.item.id&&(i.element[0].innerHTML=i.element[0].innerHTML.substring(0,i.caretPos-i.length_of_query)+c[0].innerHTML+i.element[0].innerHTML.substring(i.caretPos,i.element[0].innerHTML.length),i.replaceSelection(c[0]))},0),e(this).trigger("focus"),e(this).trigger("input"),!1},this.replaceSelection=function(){return t.getSelection?function(e){var i,o=t.getSelection(),s="string"==typeof e?n.createTextNode(e):e;o.getRangeAt&&o.rangeCount&&(i=o.getRangeAt(0),i.deleteContents(),"undefined"!=typeof InstallTrigger?(i.insertNode(n.createTextNode("\xa0")),i.insertNode(s),i.insertNode(n.createTextNode("\xa0"))):i.insertNode(s),i.setStart(s,0),t.setTimeout(function(){i=n.createRange(),i.setStartAfter(s),i.collapse(!0),o.removeAllRanges(),o.addRange(i)},0))}:n.selection&&n.selection.createRange?function(e){var t=n.selection.createRange();"string"==typeof e?t.text=e:t.pasteHTML(e.outerHTML)}:void 0}(),this.replaceTextNodeWithMention=function(e,t){e.node.splitText(e.index_for_split),e.node.nextSibling?(e.node.nextSibling.splitText(e.length_of_query),e.node.nextSibling.nodeValue=""):(e.node.nodeValue.splitText(e.length_of_query),e.node.nodeValue.nodeValue=""),e.replaceSelection(t)},this.options.focus=function(e,t){return!1},this.options.close=function(e,t){return sessionStorage.removeItem("esoc-user-mentions-info"),!1},this.menu.options.blur=function(e,t){return!1},this.element.on("focus",function(){i.updateHidden()}),this.element.on("change",function(){i.updateHidden()})},"_renderItem":function(t,i){if(-1===i.id)return e("<li></li>").append("<div class='ui-menu-item-wrapper'><a class='esoc-autosuggestion-text'>"+i.label+"</a></div>").appendTo(t);if(void 0!==i.img)return e("<li></li>").data("item.autocomplete",i).append("<div class='ui-menu-item-wrapper'><a><span class='image_user_placeholder esoc-user-mention-default-avatar'>"+i.initails+"</span><img src='esoc-user-mention-avatar"+i.img+"' /><span>"+i.label+"</span></a></div>").appendTo(t);if(void 0!==i.id){var o=n.createElement("li"),s=n.createElement("div"),l=n.createElement("a"),a=n.createElement("span"),r=n.createElement("img"),c=n.createElement("span");e(o).attr({"class":"ui-menu-item","role":"presentation"}),s.setAttribute("class","ui-menu-item-wrapper"),r.setAttribute("class","esoc-autosuggestion-img"),c.setAttribute("class","esoc-autosuggestion-name"),e(c).text(i.label+" ("+i.id+")"),a.setAttribute("class","image_user_placeholder esoc-user-mention-default-avatar"),e(a).addClass("esoc-user-default-avatar-"+i.value),e(a)[0].innerText=i.initials,e(a).css("background",i.userbackgroundcolor),l.appendChild(a),l.appendChild(r),l.appendChild(c),s.appendChild(l),o.appendChild(s);var d={"context":i.context,"userid":i.value,"photoElement":e(r),"defaultPhotElement":e(a),"photoUrl":i.photo_url};return this.options.commonUtil.setProfilePic(d),e(o).data("item.autocomplete",i).appendTo(t)}},"_move":function(e,t){if(!this.menu.element.is(":visible"))return void this.search(null,t);this.menu[e](t)},"search":function(e,i){var o=this.element.html(),s=this.getCursor(o);this.contents=o,this.cursorPos=s;var l=this,a=this.getCaretPosition(this.element[0]),r=this.element[0].textContent.substring(0,a),c=new RegExp("(^|\\s)(["+this.options.trigger+"][^W-]*)$");if(null!==r.match(/\s@/g)&&r.match(/\s@/g).length>=1){for(var d,u=new RegExp(/\s@/g),p=0;null!=(d=u.exec(r));)p=d.index;r=r.substring(p,r.length)}var m=c.exec(r);if(m&&m[2]){o=r.substring(0,a);var h=m[2].substring(1,m[2].length).toLowerCase();this.length_of_query=h.length+this.options.trigger.length;var f="";if(setTimeout(function(){if(t.getSelection&&t.getSelection().getRangeAt?f=t.getSelection().getRangeAt(0):n.selection&&n.selection.createRange&&(f=n.selection.createRange()),l.node=f.startContainer,n.documentMode)if("DIV"===l.node.nodeName||"P"===l.node.nodeName){var e=l.getCaretPosition(l.node);l.index_for_split=e-l.length_of_query,l.nodeCurPos=l.insertNodeAtCaret(l.node,n.createTextNode("\x01")),l.caretPos=l.insertNodeAtCaret(l.element[0],n.createTextNode("\x01"))}else l.index_for_split=f.startOffset-l.length_of_query;else l.index_for_split=f.startOffset-l.length_of_query},10),this.userterm=h,h.length>0)return this.updateHidden(),this._search(h);this.close()}else this.close()},"_initSource":function(){var t,i,n,o=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,s){o.xhr&&o.xhr.abort(),o.xhr=e.ajax({"url":i,"data":t,"dataType":"json","success":function(i){null!=i?(s(e.map(i,function(e){if(n="string"==typeof e?e:e.label,!o.id_map[n]||o.options.allowDuplicates)return e})),o.stopLength=-1,o.stopIndex=-1):(o.stopLength=t.term.length,o.stopIndex=o.contents.lastIndexOf(o.options.trigger),o.close())}})}):this.source=this.options.source},"destroy":function(){e.Widget.prototype.destroy.call(this)},"getCursor":function(e){var i;t.getSelection&&t.getSelection().getRangeAt?i=t.getSelection().getRangeAt(0):n.selection&&n.selection.createRange&&(i=n.selection.createRange());var o=t.getSelection().focusNode.textContent;return o=o.substring(1,i.endOffset),e.lastIndexOf(o)+o.length},"insertNodeAtCaret":function(e,i){var n=t.getSelection(),o=0;if(n.rangeCount){var s=n.getRangeAt(0);s.collapse(!1),s.insertNode(i),s=s.cloneRange(),s.selectNodeContents(i),s.collapse(!1),n.removeAllRanges(),n.addRange(s),o=e.innerHTML.indexOf("\x01"),i.parentNode.removeChild(i)}return o},"getCaretCharacterOffset":function(e){var i=0;if(void 0!==t.getSelection){var o=t.getSelection().getRangeAt(0),s=o.cloneRange();s.selectNodeContents(e),s.setEnd(o.endContainer,o.endOffset),i=s.toString().length}else if(void 0!==n.selection&&"Control"!==n.selection.type){var l=n.selection.createRange(),a=n.body.createTextRange();a.moveToElementText(e),a.setEndPoint("EndToEnd",l),i=a.text.length}return i},"updateHidden":function(){var t=this.options.trigger,i=this.element.scrollTop(),n=this.element.val();for(var o in this.id_map){var s=t+o;s=s.replace(/[^a-zA-Z 0-9@]+/g,"\\$&");var l=new RegExp(s,"g"),a=n;n=n.replace(l,t+"["+this.id_map[o]+"]"),a===n&&delete this.id_map[o]}e(this.options.hidden).val(n),this.element.scrollTop(i)},"getCharacterOffsetWithin":function(e,t){for(var i=n.createTreeWalker(t,NodeFilter.SHOW_TEXT,function(t){var i=n.createRange();return i.selectNode(t),i.compareBoundaryPoints(Range.END_TO_END,e)<1?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1),o=0;i.nextNode();)o+=i.currentNode.length;return 3===e.startContainer.nodeType&&(o+=e.startOffset),o},"getCaretPosition":function(e){var i=t.getSelection().getRangeAt(0);return this.getCharacterOffsetWithin(i,e)}}))}(t,window,document),t}),csui.define("hbs!esoc/widgets/socialactions/attachmentpopovertemplate",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span id="esoc-social-selected-attachment-dialog-title" title="'+e.escapeExpression((s=null!=(s=l(i,"popoverTitle")||(null!=t?l(t,"popoverTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"popoverTitle","hash":{},"loc":{"start":{"line":2,"column":65},"end":{"line":2,"column":81}}}):s))+'"\r\n       class="esoc-social-attachment-dialog-title">\r\n    <span class="esoc-social-attachment-label" title="'+e.escapeExpression((s=null!=(s=l(i,"popoverTitle")||(null!=t?l(t,"popoverTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"popoverTitle","hash":{},"loc":{"start":{"line":4,"column":54},"end":{"line":4,"column":70}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"popoverTitle")||(null!=t?l(t,"popoverTitle"):t))?s:e.hooks.helperMissing,
"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"popoverTitle","hash":{},"loc":{"start":{"line":4,"column":72},"end":{"line":4,"column":88}}}):s))+"</span>\r\n  </span>\r\n"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="esoc-social-attachment-dialog">\r\n    <div class="esoc-social-attachment-row">\r\n      <span id="esoc-social-attachment-cs-icon-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":10,"column":47},"end":{"line":10,"column":53}}}):s))+'"\r\n            class="esoc-social-attachment-cs-icon"></span>\r\n      <a href="javascript:void(0);" id="esoc-social-attachment-cs-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":12,"column":66},"end":{"line":12,"column":72}}}):s))+'"\r\n         class="esoc-social-attachment-cs" title="'+e.escapeExpression((s=null!=(s=l(i,"fromContentServer")||(null!=t?l(t,"fromContentServer"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"fromContentServer","hash":{},"loc":{"start":{"line":13,"column":50},"end":{"line":13,"column":71}}}):s))+'">\r\n        <span>'+e.escapeExpression((s=null!=(s=l(i,"fromContentServer")||(null!=t?l(t,"fromContentServer"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"fromContentServer","hash":{},"loc":{"start":{"line":14,"column":14},"end":{"line":14,"column":35}}}):s))+'</span>\r\n      </a>\r\n    </div>\r\n    <div class="esoc-social-attachment-row">\r\n      <span id="esoc-social-attachment-desktop-icon-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":18,"column":52},"end":{"line":18,"column":58}}}):s))+'"\r\n            class="esoc-social-attachment-desktop-icon"></span>\r\n      <a href="javascript:void(0);" id="esoc-social-attachment-desktop-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":20,"column":71},"end":{"line":20,"column":77}}}):s))+'"\r\n         class="esoc-social-attachment-desktop" title="'+e.escapeExpression((s=null!=(s=l(i,"fromYourDesktop")||(null!=t?l(t,"fromYourDesktop"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"fromYourDesktop","hash":{},"loc":{"start":{"line":21,"column":55},"end":{"line":21,"column":74}}}):s))+'">\r\n        <span>'+e.escapeExpression((s=null!=(s=l(i,"fromYourDesktop")||(null!=t?l(t,"fromYourDesktop"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"fromYourDesktop","hash":{},"loc":{"start":{"line":22,"column":14},"end":{"line":22,"column":33}}}):s))+'</span>\r\n      </a>\r\n    </div>\r\n  </div><input type="file" id="'+e.escapeExpression((s=null!=(s=l(i,"desktopAttachmentInputId")||(null!=t?l(t,"desktopAttachmentInputId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"desktopAttachmentInputId","hash":{},"loc":{"start":{"line":25,"column":31},"end":{"line":25,"column":59}}}):s))+'" name="AddDesktopDoc"\r\n               style="display:none" />\r\n'},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div id="esoc-social-selected-attachment-dialog">\r\n    <div class="esoc-social-selected-file row-fluid">\r\n\r\n      <a href="javascript:void(0);" id="esoc-social-selected-file-icon-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":32,"column":71},"end":{"line":32,"column":77}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=l(i,"filename")||(null!=t?l(t,"filename"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"filename","hash":{},"loc":{"start":{"line":32,"column":86},"end":{"line":32,"column":98}}}):s))+'"\r\n         class="esoc-social-selected-file-icon '+e.escapeExpression((s=null!=(s=l(i,"filemimetypeicon")||(null!=t?l(t,"filemimetypeicon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"filemimetypeicon","hash":{},"loc":{"start":{"line":33,"column":47},"end":{"line":33,"column":69}}}):s))+' binf-col-lg-1 binf-col-md-1 binf-col-sm-1 binf-col-xs-1 esoc-social-no-padding-right binf-pull-left"></a>\r\n\r\n      <a href="javascript:void(0);" id="esoc-social-attachment-name-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":35,"column":68},"end":{"line":35,"column":74}}}):s))+'"\r\n         class="esoc-social-attachment-name binf-col-lg-6 binf-col-md-6 binf-col-sm-6 binf-col-xs-6 esoc-social-no-padding-right"\r\n         title="'+e.escapeExpression((s=null!=(s=l(i,"filename")||(null!=t?l(t,"filename"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"filename","hash":{},"loc":{"start":{"line":37,"column":16},"end":{"line":37,"column":28}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"filename")||(null!=t?l(t,"filename"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"filename","hash":{},"loc":{"start":{"line":37,"column":30},"end":{"line":37,"column":42}}}):s))+'</a>\r\n            <span id="esoc-social-attachment-size-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":38,"column":50},"end":{"line":38,"column":56}}}):s))+'" class="esoc-social-attachment-size binf-col-lg-3 binf-col-md-3 binf-col-sm-3 binf-col-xs-3\r\n                  esoc-social-no-padding-right">'+e.escapeExpression((s=null!=(s=l(i,"filesize")||(null!=t?l(t,"filesize"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"filesize","hash":{},"loc":{"start":{"line":39,"column":48},"end":{"line":39,"column":60}}}):s))+'</span>\r\n      <a href="javascript:void(0);" id="esoc-social-attachment-delete-icon-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":40,"column":75},"end":{"line":40,"column":81}}}):s))+'" class="esoc-social-attachment-icon-delete binf-col-lg-2 binf-col-md-2 binf-col-sm-2 binf-col-xs-2\r\n                  esoc-social-no-padding-right" title="'+e.escapeExpression((s=null!=(s=l(i,"deletetitle")||(null!=t?l(t,"deletetitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"deletetitle","hash":{},"loc":{"start":{"line":41,"column":55},"end":{"line":41,"column":70}}}):s))+'"></a>\r\n    </div>\r\n  </div>\r\n'},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div id="esoc-social-selected-attachment-dialog">\r\n    <div class="esoc-social-selected-file row-fluid">\r\n\r\n            <span class="csui-icon-group" title="'+e.escapeExpression((s=null!=(s=l(i,"filename")||(null!=t?l(t,"filename"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"filename","hash":{},"loc":{"start":{"line":49,"column":49},"end":{"line":49,"column":61}}}):s))+'">\r\n                  <span id="esoc-social-selected-file-icon-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":50,"column":59},"end":{"line":50,"column":65}}}):s))+'"\r\n                        class="esoc-social-selected-file-icon esoc-social-mime-icon esoc-comment-valign '+e.escapeExpression((s=null!=(s=l(i,"filemimetypeicon")||(null!=t?l(t,"filemimetypeicon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"filemimetypeicon","hash":{},"loc":{"start":{"line":51,"column":104},"end":{"line":51,"column":124}}}):s))+' binf-col-lg-1 binf-col-md-1 binf-col-sm-1 binf-col-xs-1 esoc-social-no-padding-right binf-pull-left"></span>\r\n                  <a href="javascript:void(0);" class="csui-icon csui-icon-shortcut-overlay"></a>\r\n            </span>\r\n\r\n      <a href="javascript:void(0);" id="esoc-social-attachment-name-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":55,"column":68},"end":{"line":55,"column":74}}}):s))+'"\r\n         class="esoc-social-attachment-name binf-col-lg-6 binf-col-md-6 binf-col-sm-6 binf-col-xs-6 esoc-social-no-padding-right esoc-social-shortcut-name"\r\n         title="'+e.escapeExpression((s=null!=(s=l(i,"filename")||(null!=t?l(t,"filename"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"filename","hash":{},"loc":{"start":{"line":57,"column":16},"end":{"line":57,"column":28}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"filename")||(null!=t?l(t,"filename"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"filename","hash":{},"loc":{"start":{"line":57,"column":30},"end":{"line":57,"column":42}}}):s))+'</a>\r\n      <span\r\n          class="esoc-social-attachment-size binf-col-lg-4 binf-col-md-4 binf-col-sm-4 binf-col-xs-4 esoc-social-no-padding-right"></span>\r\n      <a href="javascript:void(0);" id="esoc-social-attachment-delete-icon-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":60,"column":75},"end":{"line":60,"column":81}}}):s))+'"\r\n         class="esoc-social-attachment-icon-delete binf-col-lg-1 binf-col-md-1 binf-col-sm-4 binf-col-xs-1 esoc-social-no-padding-right esoc-shortcut-delete-icon"\r\n         title="'+e.escapeExpression((s=null!=(s=l(i,"deletetitle")||(null!=t?l(t,"deletetitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"deletetitle","hash":{},"loc":{"start":{"line":62,"column":16},"end":{"line":62,"column":31}}}):s))+'"></a>\r\n    </div>\r\n  </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"popoverTitle"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":6,"column":7}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"attachFilesPopover"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":0},"end":{"line":27,"column":7}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"attachmentPopover"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":28,"column":0},"end":{"line":44,"column":7}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"shortcutPopover"):t,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":45,"column":0},"end":{"line":65,"column":7}}}))?s:"")}});return i.registerPartial("esoc_widgets_socialactions_attachmentpopovertemplate",n),n}),csui.define("hbs!esoc/widgets/socialactions/maskingtemplate",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="esoc-profile-img-load-container esoc-comment-masking-container">\r\n  <div class="esoc-profile-img-loader">\r\n    <div class="esoc-profile-img-inner-border"></div>\r\n  </div>\r\n</div>'}});return i.registerPartial("esoc_widgets_socialactions_maskingtemplate",n),n}),csui.define("esoc/widgets/userwidget/userwidget",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/connector","esoc/controls/userwidget/userwidget.view","csui/utils/contexts/factories/connector"],function(e,t,i,n,o,s,l,a){return{"getUser":function(e){i(e.placeholder).ready(function(){var s,r=new o.Region({"el":i(e.placeholder)});e.connector||(e.connector=e.context.getObject(a));var c=n.extend({},e);l=l||t("esoc/controls/userwidget/userwidget.view"),s=new l(c),r.show(s)})}}}),csui.define("esoc/widgets/socialactions/util",["module","csui/lib/jquery","csui/lib/underscore","esoc/widgets/socialactions/mentions","csui/utils/namedsessionstorage","csui/utils/url","csui/utils/base","csui/dialogs/node.picker/node.picker","hbs!esoc/widgets/socialactions/attachmentpopovertemplate","hbs!esoc/widgets/socialactions/maskingtemplate","esoc/widgets/common/util","csui/utils/nodesprites","csui/utils/user.avatar.color","esoc/widgets/userwidget/userwidget","i18n!esoc/widgets/socialactions/nls/lang","i18n"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f){var g=function(e){return e.is(":visible")?e.offset():{"top":0,"left":0}};return{"commonUtil":d,"base":l,"namedSessionStorage":new o("esoc-user-mentions-info"),"attachmentPopoverTemplate":r,"maskingTemplate":c,"lang":h,"updateCommentAjaxCall":function(e){var i=e.model,n=i.model;"AttachmentDelete"===e.requestType?t.ajax(i.options.model.collection.connector.extendAjaxOptions({"url":e.url,"type":e.type,"dataType":e.dataType,"data":e.data,"success":this.onDeleteSuccess.bind(this,e),"error":this.onDeleteFailure.bind(this,e)})):(t(document.body).hasClass("binf-comment-dialog-open")&&t(document.body).removeClass("binf-modal-open"),n.destroy({"wait":!0,"success":this.onDeleteSuccess.bind(this,e),"error":this.onDeleteFailure.bind(this,e)}))},"onDeleteSuccess":function(e,i,n,o){var s=e.model,l=e.requestType,a=s.collection,r=this,c=s.model;s.options.commentConfigOptions.commentAction=!0;var d=s.collection.models.length,u=!1,p=s.collection.models[d-1];switch(p=p||e.model.model,d=p.id,l){case"CommentDelete":a.models.length&&(u=!a.models[a.models.length-1].attributes.noMoreData,u=u&&a.models.length===r.commonUtil.globalConstants.FETCH_NEXT_PAGE_MODELS_LENGTH),r.hideMask(s.$el),s.destroy(),a.remove(s.model),u&&(a.defaults.params[r.commonUtil.globalConstants.MAX_ID]=d,a.fetch({"remove":!1}));var m=0;o.xhr.responseJSON?m=o.xhr.responseJSON.commentCount:(m=s.collection.models.length,s.collection.find(c)&&m--),s.options.commentConfigOptions.currentNodeModel.set("wnd_comments",m,{"silent":!0}),s.options.commentConfigOptions.currentNodeModel.trigger("comment:icon:view"),0===a.models.length&&(t("#esoc-social-comment-container").find(".esoc-social-comment-body-divider").each(function(){t(this).remove()}),t("#esoc-social-comment-container").css("border-bottom","0px solid #ffffff"),t("#esoc-social-comment-form-buttons-container").addClass("esoc-social-form-minheight"));break;case"ReplyDelete":var h=!1;a.models.length>0&&(h=!a.models[a.models.length-1].attributes.noMoreData),u=h&&a.models.length===r.commonUtil.globalConstants.FETCH_NEXT_PAGE_MODELS_LENGTH,u&&t(".esoc-social-reply-seemore:visible").trigger("click"),s.$el.find(".esoc-social-reply-seemore").remove(),r.hideMask(s.$el),s.destroy(),a.remove(s.model),h&&a.models.length>r.commonUtil.globalConstants.SHOW_SEE_MORE_MODELS_LENGTH&&t(".esoc-social-reply-seemore:last").show(1e3),s.options.commentConfigOptions.parentCollectionView.triggerMethod("update:scrollbar");break;default:var f=JSON.parse(i).status;s.model.attributes.data_id=f.data_id,s.model.attributes.created_at_iso8601=f.created_at_iso8601,s.model.attributes.modified_at_iso8601=r.base.formatFriendlyDateTimeNow(f.modified_at_iso8601),s.model.attributes.text=f.text,s.model.attributes.feed_event_type=f.feed_event_type,s.model.attributes.user.name=f.user.name,s.model.attributes.user.screen_name=f.user.screen_name,s.model.attributes.user.profile_image_url=f.user.profile_image_url,l===r.commonUtil.globalConstants.REQUEST_TYPE_ATTACHMENT_DELETE&&(f.extended_info&&f.extended_info.attachment_id||(s.model.attributes.extended_info.attachment_id="")),r.hideMask(s.$el),s.render(),!1===s.model.collection.models[s.model.collection.length-1].attributes.noMoreData&&t(".esoc-social-reply-seemore:last").show()}s.showSeeMoreLink(s.$el.find(s.contentTypeElement))},"onDeleteFailure":function(e,t,i,n){var o=e.model;this.hideMask(o.$el),o.showSeeMoreLink(o.$el.find(o.contentTypeElement)),this.commonUtil.openErrorDialog({"parent":".esoc-social-comment-widget","errorContent":t.responseJSON?t.responseJSON.errorDetail?t.responseJSON.errorDetail:t.responseJSON.error:this.lang.defaultErrorMessageForUpdateComment})},"setSelectionRange":function(e,i){var n=i,o=i;if(e.setSelectionRange)t(e).trigger("focus"),e.setSelectionRange(n,o);else if(e.createTextRange){var s=e.createTextRange();s.collapse(!0),s.moveEnd("character",o),s.moveStart("character",n),s.select()}},"openConfirmationDialog":function(e){var i=t("#esoc-social-dialog");i.binf_modal({"backdrop":"static","show":!1,"paddingWhenOverflowing":!1});var n=this;i.on("show.binf.modal",function(o){var s=t(this);i.addClass("esoc-social-delete-dialog-mask"),s.find("#myModalTitle").text(e.dialogtitle),i.find(".binf-modal-backdrop").remove(),s.find("#myModalConfirmationText").text(e.dialogmessage);var l,a;l=t(this).clone(),l.css("display","block"),l.appendTo(document.body),a=Math.round((t(".esoc-social-comment-widget").height()-l.find(".binf-modal-content").height())/2)+10,a=a>0?a:0,l.remove(),t(".esoc-social-modal-content").attr("style","margin-top:"+a+"px !important"),t(".esoc-social-dialog-delete-button").off("click").on("click",function(t){i.hide(),i.off(),i.removeData("binf.modal"),n.updateCommentAjaxCall(e.ajaxParams),n.setFocusOnDefaultElement()}),t(".esoc-social-dialog-cancel-button").on("keydown",function(e){9===(e.keyCode||e.which)&&(t(".esoc-social-dialog-delete-button").trigger("focus"),e.preventDefault())})}),i.on("shown.binf.modal",function(e){t(".esoc-social-dialog-cancel-button").trigger("focus")}),i.on("hidden.binf.modal",function(o){t(document.body).hasClass("binf-comment-dialog-open")||t(document.body).addClass("binf-modal-open"),n.hideMask(e.ajaxParams.model.$el);var s=t(this);s.find("#myModalTitle").text(""),s.find("#myModalConfirmationText").text(""),i.removeClass("esoc-social-delete-dialog-mask"),i.off(),t(document.activeElement).trigger("blur");var l=t("#esoc-social-comment-title")[0];t(l).trigger("focus"),document.activeElement=l})},"closeCommentDialog":function(e,i){var n=!1,o=e||window.event;if("popstate"!==o.type&&"hashchange"!==o.type&&"close"!==o.type||(n=!0),!("keyup"!==o.type&&"keydown"!==o.type||27!==o.keyCode&&27!==o.which)){var s=0===t(".esoc-social-comment-attachment").next(".binf-popover:visible").length?t(".esoc-social-attachment-file").next(".binf-popover:visible"):t(".esoc-social-comment-attachment").next(".binf-popover:visible"),l=t(".esoc-social-comment-emoticon").siblings(".binf-popover.emoji-menu:visible");if(s.is(":visible"))s.binf_popover("hide"),s.hide(),s.prev().trigger("focus"),o.stopImmediatePropagation();else if(l.length)e&&e.data&&e.data.util&&e.data.util.emojiObj&&(e.data.util.emojiObj.hide(),delete e.data.util.emojiObj);else if(t(".binf-modal-dialog").is(":visible")||(n=!0),t("#esoc-social-dialog").is(":visible")&&t(this).find(".esoc-social-dialog-cancel-button").trigger("click"),!t("#esoc-social-dialog").is(":visible")&&t(".cs-dialog").is(":visible")&&(n=!0),n){t(document.body).hasClass("binf-modal-open")&&t(document.body).hasClass("binf-comment-dialog-open")?(t(document.body).removeClass("binf-modal-open"),t(document.body).removeClass("binf-comment-dialog-open")):t(document.body).hasClass("binf-comment-dialog-open")?t(document.body).removeClass("binf-comment-dialog-open"):t(document.body).addClass("binf-modal-open"),t(document).off(o.type),t("[id^='esoc-social-comment-widget-mask_']").removeAttr("tabindex"),t(".cs-expanded.activityfeed-expand.esoc.cs-dialog.binf-modal.binf-fade.binf-in").attr("tabindex","-1"),t(".esoc-user-widget-dialog.cs-dialog.binf-modal.binf-fade.binf-in").attr("tabindex","-1").prop("disabled",!1);var a=o.data.dialogOptions;if(a){var r=a.currentTarget;"keydown"===o.type&&t(r).on("keyup",function(e){t(r).is(":focus")&&(t(r).off("keyup"),e.stopPropagation())}),r&&(t(r).trigger("focus"),setTimeout(function(){t(r).trigger("focus")},1))}}}t(o.target).closest(".esoc-socialactions-getcomments").length||"click"!==o.type||t(o.target).closest("[id*=esoc-social-comment-widget]").length&&!t(o.target).closest("[id*=esoc-social-comment-widget-mask_]").length||t(o.target).closest("[class*=ui-autocomplete]").length||t("#esoc-social-dialog").is(":visible")||t("#mdAlert").is(":visible")||(n=!0),n&&o.data&&o.data.dialogOptions&&o.data.dialogOptions.commentsHeaderView&&(o.data.dialogOptions.commentsHeaderView.disengageModalKeyboardFocusOnClose(),delete o.data.dialogOptions.commentsHeaderView),n&&o.data.callbackFun(o.data.dialogOptions),27!==o.keyCode&&27!==o.which||t(".cs-dialog").length>0&&t(".cs-dialog").eq(0).trigger("focus"),t(".esoc-acitivityfeed-collection").css("overflow","")},"showBrowsePopup":function(e,t,i,n){!n.shortcutsEnabled&&n.attachementsEnabled&&0===i.val().length&&this.selectAttachment(e,i)},"selectAttachment":function(e,t){e.preventDefault(),e.stopPropagation(),t.trigger("click")},"resetAttachmentInput":function(e,t){e.length>0&&(e.val(""),e[0].files&&navigator.appVersion&&-1!==navigator.appVersion.indexOf("MSIE 10")&&(e.wrap("<form>").parent("form").trigger("reset"),e.unwrap(),e[0].files[0]=""),t.attachementsEnabled&&t.shortcutsEnabled&&e[0].files&&e.remove())},"resetAttachmentPopup":function(e,i,n,o){if(this.resetAttachmentInput(n,o),i.attr("data-binf-original-title",""),i.attr("data-binf-content",""),o.attachementsEnabled&&o.shortcutsEnabled){var s=e||window.event;s.preventDefault(),s.stopPropagation(),i.binf_popover("show"),t(".esoc-social-comment-dialog-att-minheight").removeClass("esoc-social-comment-dialog-att-minheight"),t(".esoc-social-comment-widget").addClass("esoc-social-comment-dialog-minheight")}else i.binf_popover("hide"),i.binf_popover("destroy"),t(".esoc-social-comment-dialog-att-minheight").removeClass("esoc-social-comment-dialog-att-minheight"),t(".esoc-social-comment-dialog-minheight").removeClass("esoc-social-comment-dialog-minheight");i.trigger("focus"),this.setCommentDialogPointer()},"hideAttachmentPopup":function(e,i,n){this.resetAttachmentInput(i,n),e.attr("data-binf-original-title",""),e.attr("data-binf-content",""),e.binf_popover("hide"),void 0!==n&&n.attachementsEnabled&&!n.shortcutsEnabled&&e.binf_popover("destroy"),t(".esoc-social-comment-dialog-minheight").removeClass("esoc-social-comment-dialog-att-minheight"),this.setCommentDialogPointer()},"showAttachmentPopOver":function(e,i){if(void 0!==i.socialActions&&i.socialActions.attachementsEnabled&&i.socialActions.shortcutsEnabled)this.showAttachFilesPopOver(e,i);else{var n=this;e.off("click").on("click",function(o){var s=t("#"+i.desktopAttachmentInputId);!i.socialActions.attachementsEnabled&&i.socialActions.shortcutsEnabled?0===i.shortcutIdHolder.val().length&&(n.hideAttachmentPopup(e,s,i.socialActions),n.openTargetPicker(e,i)):(0===s.val().length&&n.hideAttachmentPopup(e,s,i.socialActions),s.off("change").on("change",function(t){s.val().length>0&&n.showSelectedAttachmentPopOver(e,i)}),n.showBrowsePopup(o,e,s,i.socialActions)),t(".esoc-social-comment-attachment-header").attr("title",n.commonUtil.lang.attachFile),t(".esoc-social-comment-attachment").attr("title",n.commonUtil.lang.attachFile)})}},"showAttachFilesPopOver":function(e,i){var n=this,o=i.id,s=i.uniqueId,l={"attachFilesPopover":!0,"id":o,"fromContentServer":this.commonUtil.lang.fromContentServer,"fromYourDesktop":this.commonUtil.lang.fromYourDesktop,"desktopAttachmentInputId":i.desktopAttachmentInputId},a={"popoverTitle":this.commonUtil.lang.attachFile},r=this.attachmentPopoverTemplate(l),c=this.attachmentPopoverTemplate(a);e.binf_popover({"content":r,"title":c,"delay":{"show":100},"placement":function(i,n){var l=g(t(n)),a=l.top,r=g(t("#esoc-social-comment-container")).top,c=t("#esoc-social-comment-container").height(),d=t("<div/>").attr("style","display:block; left:-5000px;").addClass("esoc-temp-attach-div").append(e.data("binf.popover").tip());t(i).addClass("esoc-social-attachment-popover"),t("#esoc-social-comment-input-holder-"+s).append(d);var u=this.$tip.height();d.remove();var p=c-(a-r),m="bottom";t(n).hasClass("esoc-social-attachment-file-alone")?m=f.settings.rtl?"left":"right":c>p+u&&p<u&&(m="top");var h=t("#esoc-social-comment-container"),b="";return e.hasClass("esoc-social-attachment-file-alone")?b="status-attachment-alone-init-min-height":e.hasClass("comment esoc-social-attachment-file")?b="status-attachment-init-min-height":e.parent().attr("id")==="esoc-social-edit-comment-icons-"+o&&(b="esoc-edit-init-min-height"),h.find(".esoc-social-comment-list-item").length<=1?h.find(".esoc-social-comment-list-item").addClass(b):h.find(".esoc-social-comment-list-item").removeClass("status-attachment-init-min-height status-attachment-alone-init-min-height esoc-edit-init-min-height"),m}}),e.on("shown.binf.popover",function(s){var l=t("#"+i.desktopAttachmentInputId);t("#esoc-social-attachment-desktop-"+o).off("click touchstart").on("click touchstart",function(e){l.val(""),e.stopPropagation(),l.trigger("click")}),l.off("change").on("change",function(t){i.attachFiles?l.val().length>0&&(l.appendTo(e),i.itemview.uploadAttachment()):l.val().length>0&&n.showSelectedAttachmentPopOver(e,i)}),t("#esoc-social-attachment-cs-"+o).off("click").on("click",function(t){n.openTargetPicker(e,i)}),t(".esoc-social-comment-widget").addClass("esoc-social-comment-dialog-minheight"),n.setCommentDialogPointer()}),this.hidePopOvers()},"openTargetPicker":function(e,i){var n=this;new a({"connector":i.connector,"dialogTitle":this.commonUtil.lang.targetPickerTitle,"resolveShortcuts":!0}).show().done(function(o){if(o.nodes.length){var s=o.nodes[0];i.node=s,i.shortcutIdHolder.length>0?(i.shortcutIdHolder.val(i.node.get("id")),i.attachFiles?i.itemview.uploadAttachment():n.showSelectedShortcutPopOver(e,i)):n.showSelectedShortcutPopOver(e,i)}t(".esoc-social-comment-attachment-header").attr("title",n.commonUtil.lang.attachFile),t(".esoc-social-comment-attachment").attr("title",n.commonUtil.lang.attachFile)}).always(function(){e.trigger("focus")})},"hidePopOvers":function(){var e=this;t(".esoc-social-comment-widget").on("click",function(i){t(".esoc-social-comment-widget [aria-describedby]").each(function(){t(this).is(i.target)||0!==t(this).has(i.target).length||0!==t(".binf-popover").has(i.target).length||t(i.target).is(t(".esoc-social-comment-load-more:last"))||(t(this).binf_popover("hide"),t(".esoc-social-comment-dialog-minheight").removeClass("esoc-social-comment-dialog-minheight"),t(".esoc-social-comment-dialog-att-minheight").removeClass("esoc-social-comment-dialog-att-minheight"),e.setCommentDialogPointer())})})},"showSelectedAttachmentPopOver":function(e,i){var n,o,s=t("#"+i.desktopAttachmentInputId),l=s[0].files[0],a=this,r="0 B",c=i.id;if(0!==l.size){var d=Math.floor(Math.log(l.size)/Math.log(1024));r=Math.ceil(l.size/Math.pow(1024,d))+" "+["B","KB","MB","GB","TB"][d]}i.socialActions.attachementsEnabled&&i.socialActions.shortcutsEnabled&&s.length>0&&s.appendTo(e);var p=l.type;if(""===p){var m=l.name,h=m.split(".").pop().toLowerCase();t.inArray(h,["zip","rar","war","jar"])>-1?p="application/zip":t.inArray(h,["json","properties"])>-1&&(p="text/plain")}var f={"attributes":{"type":144},"mime_type":p,"container":!1,"get":function(e){return this[e]}};o={"attachmentPopover":!0,"id":c,"filesize":r,"filename":l.name,"filemimetypeicon":u.findClassByNode(f),"deletetitle":this.commonUtil.lang.deleteComment},n={"popoverTitle":this.commonUtil.lang.attachmentPopoverTitle};var g=this.commonUtil.lang.attachFile;e.attr("data-binf-original-title",this.attachmentPopoverTemplate(n)),e.attr("data-binf-content",this.attachmentPopoverTemplate(o)),e.binf_popover("show"),e.on("shown.binf.popover",function(n){t(".esoc-social-comment-attachment-header").attr("title",g),t(".esoc-social-comment-attachment").attr("title",g),t("#esoc-social-attachment-delete-icon-"+c).off("click keydown").on("click keydown",function(t){32!==(t.keyCode||t.which)&&"click"!==t.type||a.resetAttachmentPopup(t,e,s,i.socialActions)}),t("<div />").html(e.attr("data-binf-content")).find(".esoc-social-selected-file").length>0?(t(".esoc-social-comment-dialog-minheight").removeClass("esoc-social-comment-dialog-minheight"),t(".esoc-social-comment-widget").addClass("esoc-social-comment-dialog-att-minheight")):(t(".esoc-social-comment-dialog-att-minheight").removeClass("esoc-social-comment-dialog-att-minheight"),t(".esoc-social-comment-widget").addClass("esoc-social-comment-dialog-minheight")),a.setCommentDialogPointer(),t("#esoc-social-attachment-delete-icon-"+c).trigger("focus")}),this.hidePopOvers()},"showSelectedShortcutPopOver":function(e,i){var n=!!i.node.attributes.original_id,o={"attributes":{"type":n?i.node.attributes.original_id.type:i.node.get("type")},"mime_type":n?i.node.attributes.original_id.mime_type:i.node.get("mime_type"),"container":n?i.node.attributes.original_id.container:i.node.get("container"),"get":function(e){return this[e]}},s=this,l={"shortcutPopover":!0,"id":i.node.get("id"),"filename":i.node.get("name"),"filemimetypeicon":u.findClassByNode(o),"deletetitle":this.commonUtil.lang.deleteComment},a={"popoverTitle":this.commonUtil.lang.attachmentPopoverTitle};i.shortcutIdHolder.length>0&&i.shortcutIdHolder.val(l.id);var r=s.commonUtil.lang.attachFile;e.attr("data-binf-original-title",this.attachmentPopoverTemplate(a)),e.attr("data-binf-content",this.attachmentPopoverTemplate(l)),e.binf_popover("show"),e.on("shown.binf.popover",function(n){t(".esoc-social-comment-attachment-header").attr("title",r),t(".esoc-social-comment-attachment").attr("title",r),t("#esoc-social-attachment-delete-icon-"+l.id).off("click keydown").on("click keydown",function(t){32!==(t.keyCode||t.which)&&"click"!==t.type||s.resetAttachmentPopup(t,e,i.shortcutIdHolder,i.socialActions)}),t(".esoc-social-comment-dialog-minheight").removeClass("esoc-social-comment-dialog-minheight"),t(".esoc-social-comment-widget").addClass("esoc-social-comment-dialog-att-minheight"),s.setCommentDialogPointer(),t("#esoc-social-attachment-delete-icon-"+l.id).trigger("focus")}),this.hidePopOvers()},"updateWithAttachmentAjaxCall":function(e){var i=e.url,n=e.type,o=e.data,s=e.itemview,l=this,a=(e.commentId,e.feedType),r=t.Deferred();return t.ajax(s.model.collection.connector.extendAjaxOptions({"url":i,"type":n,"data":o,"contentType":!1,"crossDomain":!0,"processData":!1,"success":function(e,i,n){s.options.commentConfigOptions.commentAction=!0,s.model.attributes.text=e.status.text,e.status.extended_info.attachment_id?(s.model.attributes.attachmentCommands=e.status.attachmentCommands,s.model.attributes.extended_info.attachment_parent_data_id=e.status.extended_info.object_id,s.model.attributes.extended_info.attachment_name=e.status.extended_info.attachment_name,s.model.attributes.extended_info.attachment_size=e.status.extended_info.attachment_size,s.model.attributes.extended_info.attachment_icon_id=e.status.extended_info.attachment_icon_id,
s.model.attributes.extended_info.attachment_original_data_id=e.status.extended_info.attachment_original_data_id,s.model.attributes.extended_info.attachment_id=e.status.extended_info.attachment_id,s.model.attributes.extended_info.attachment_subtype=parseInt(e.status.extended_info.attachment_subtype,10),s.model.attributes.extended_info.attachment_mime_type=e.status.extended_info.attachment_mime_type,1===s.model.attributes.extended_info.attachment_subtype&&(s.model.attributes.extended_info.attachment_original_sub_type=parseInt(e.status.extended_info.attachment_original_sub_type,10),s.model.attributes.extended_info.attachment_original_mime_type=e.status.extended_info.attachment_original_mime_type,s.model.attributes.extended_info.attachment_original_container=e.status.extended_info.attachment_original_container)):s.model.attributes.extended_info.attachment_id="",s.model.attributes.modified_at_iso8601=l.base.formatFriendlyDateTimeNow(e.status.modified_at_iso8601),l.hideMask(s.$el),s.render(),!1===s.model.collection.models[s.model.collection.length-1].attributes.noMoreData&&t(".esoc-social-reply-seemore:last").show(),s.showSeeMoreLink(s.$el.find(s.contentTypeElement)),l.setFocusOnDefaultElement(),s.options.commentConfigOptions.parentCollectionView?s.options.commentConfigOptions.parentCollectionView.triggerMethod("update:scrollbar"):s.options.parentCollectionView.triggerMethod("update:scrollbar"),r.resolve()},"error":function(e,i,n){l.hideMask(s.$el);var o={"parent":".esoc-social-comment-widget","errorContent":e.responseJSON?e.responseJSON.errorDetail?e.responseJSON.errorDetail:e.responseJSON.error:l.lang.defaultErrorMessageForUpdateWithAttachment};"comment"===a?t(".esoc-comment-attachment").show():t(".esoc-reply-attachment").show(),t("[data-binf-original-title]").each(function(){"none"!==t('[id^="popover"]').css("display")&&t(this).binf_popover("hide")}),l.commonUtil.openErrorDialog(o),s.showSeeMoreLink(s.$el.find(s.contentTypeElement)),l.setFocusOnDefaultElement(),r.reject()}})),r.promise()},"triggerAutoCompleteSuggestion":function(e){var i=this,n=e.element,o=e.appendToElement;n.triggeredAutocomplete({"hidden":"#hidden_inputbox","minLength":2,"autoFocus":!0,"source":function(n,o){var s=n.term,l={};if(n.term.split(" ").length>3||1!==n.term.split(/\n/g).length||"@"===n.term[0])return this.close(),!1;i.namedSessionStorage.get("querystring"+s)?l=i.namedSessionStorage.get("querystring"+s):(l=i.autoCompleteAjax(e.connector,n),i.namedSessionStorage.set("querystring"+s,l)),o(t.map(l,function(t){var i=p.getUserAvatarColor(t);return{"label":t.first_name&&t.last_name?t.first_name+" "+t.last_name:t.name,"value":t.id,"initials":t.initials,"id":t.name,"photo_url":t.photo_url,"userbackgroundcolor":i,"context":e.context}})),(s.length<=2||s.trim().length>1)&&(l.length||(l=[{"label":i.lang.noResults,"value":""}],o(t.map(l,function(e){return{"label":e.label,"value":e.value,"id":-1}}))))},"trigger":"@","appendTo":o,"open":function(){t(".ui-autocomplete").css("width",t(o).width())}})},"autoCompleteAjax":function(e,i){var n={},o=s.combine(e.connection.url,"members"),l=1===i.term.length?i.term.trim():i.term;return t.ajax(e.extendFetchOptions({"url":o,"dataType":"json","async":!1,"data":{"limit":5,"where_type":0,"query":l},"success":function(e){n=e.data}})),n},"updateQueryStringValues":function(e,t,i){var n=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=-1!==e.indexOf("?")?"&":"?";return e.match(n)?e.replace(n,"$1"+t+"="+i+"$2"):e+o+t+"="+i},"createRemoteObject":function(e){var i=e.socialActionsInstanse.model.attributes.roid,n=e.socialActionsInstanse.model.attributes.socialactions.ParentID,o=e.socialActionsInstanse.options.connector.connection.url,s=o+this.commonUtil.REST_URLS.csCreateROI,l={"csid":"","error":""},a=this;return t.ajax(e.socialActionsInstanse.options.connector.extendAjaxOptions({"url":s,"type":"POST","dataType":"json","data":{"name":i,"remote_object_id":i,"parent_id":n,"type":a.commonUtil.globalConstants.ROI_OBJECT_TYPE},"async":!1,"success":function(e){l.csid=e.id},"error":function(e){l.csid="",l.error=e.responseJSON.error;var t={"parent":".esoc-social-comment-widget","errorContent":e.responseJSON?e.responseJSON.errorDetail?e.responseJSON.errorDetail:e.responseJSON.error:a.lang.defaultErrorMessageForCreateRemoteObject};a.commonUtil.openErrorDialog(t)}})),l},"hidePopover":function(e){t(".esoc-social-comment-widget [aria-describedby]").each(function(){t(this).binf_popover("hide")})},"setCommentDialogPointer":function(){if(this.widgetBaseElement=0===t(this.widgetBaseElement).width()?t("[data-value="+t(this.widgetBaseElement).attr("data-value")+"]"):this.widgetBaseElement,0!==this.widgetBaseElement.length){if(this.widgetBaseElement.length>1){var e=0;this.widgetBaseElement.each(function(i){var n=t(this).is(":visible");e=n&&0===e?i:e}),this.widgetBaseElement=e>0?t(this.widgetBaseElement[e]):this.widgetBaseElement}var i=t(this.widgetDialog),n=t(this.widgetDialogPointer),o=t(this.widgetBaseElement),s=!1;i.css({"position":"absolute","left":"0","top":"0"}),n.css({"position":"absolute","left":"0","top":"0"}).addClass("esoc-socialactions-widget-arrow-left");var l=parseInt(o.width()+10,10);i.position({"my":"left top","at":"left+"+l+" top -"+o.parent().height(),"of":this.widgetBaseElement,"collision":"flipfit flipfit"});var a=g(i).left,r=g(i).left+i.width(),c=g(o).left,d=g(o).top,u=o.parent().height()===o.height();u&&(d=g(o).top+Math.ceil(o.height()/4)+2),a<c?(n.css({"position":"absolute","left":r,"top":d}),f.settings.rtl?n.removeClass("esoc-socialactions-widget-arrow-right").addClass("esoc-socialactions-widget-arrow-left"):n.removeClass("esoc-socialactions-widget-arrow-left").addClass("esoc-socialactions-widget-arrow-right"),s=parseInt(t(n).css("left").replace("px",""),10)+1>g(o).left):(n.css({"position":"absolute","left":a-10,"top":d}),f.settings.rtl?n.removeClass("esoc-socialactions-widget-arrow-left").addClass("esoc-socialactions-widget-arrow-right"):n.removeClass("esoc-socialactions-widget-arrow-right").addClass("esoc-socialactions-widget-arrow-left"),s=parseInt(t(n).css("left").replace("px",""),10)+1<g(o).left+o.width());var p=g(i).top+i.height(),m=g(n).top+25;p<m?i.css("top",parseInt(g(i).top+(u?0:20),10)):p-m>20&&i.css("top",parseInt(g(i).top-(u?0:20),10)),s?(i.css({"left":t(window).width()/2-i.width()/2}),n.css({"opacity":"0"})):n.css({"opacity":"1"})}},"isValidInput":function(e){return void 0!==e&&void 0!==e.val()&&e.val().length>0},"getUser":function(e){return new m(e)},"showMask":function(e){e.append(this.maskingTemplate()),e.find(".esoc-comment-masking-container").addClass("esoc-progress-display")},"hideMask":function(e){e.find(".esoc-comment-masking-container").remove()},"onMentionNameEdit":function(e){for(var i=t(e.currentTarget).children(),n=0;n<i.length;n++)if("DIV"!==t(e.currentTarget).children()[n].tagName&&"P"!==t(e.currentTarget).children()[n].tagName||"@"===t(e.currentTarget).children()[n].textContent.charAt(0)&&(t(e.currentTarget).children()[n].innerHTML=" "+t(e.currentTarget).children()[n].innerHTML,this.setCursorPosition(e,n)),"undefined"!=typeof InstallTrigger&&0!==t(e.currentTarget).children("br").length){var o=t(e.currentTarget).children("br").get(n);o&&o.nextSibling&&"@"===o.nextSibling.textContent.charAt(0)&&(t(e.currentTarget).children("br").get(n).nextSibling.textContent=" "+t(e.currentTarget).children("br").get(n).nextSibling.textContent,this.setCursorPosition(e,n))}},"setCursorPosition":function(e,i){var n=e.currentTarget.id,o=document.getElementById(n),s=document.createRange(),l=window.getSelection();"undefined"!=typeof InstallTrigger?s.setStart(t(e.currentTarget).children("br").get(i).nextSibling,2):s.setStart(o.children[i],1),l.removeAllRanges(),l.addRange(s),t(o).trigger("focus")},"setFocusOnDefaultElement":function(e){t("#esoc-social-focus-element").trigger("focus")},"createChickletForMentions":function(e){for(var i=e.find("span.esoc-widget-user-display-name"),n=0;n<i.length;n++){var o,s,l,a;for(s=t(i[n]),l=s.find("img"),o=0;o<l.length;o++)a=document.createTextNode(t(l[o]).attr("alt")),i[n].replaceChild(a,l[o]);if("undefined"!=typeof InstallTrigger){var r=t("<span />");r.css("visibility","hidden"),r.addClass("esoc-span-mention"),r[0].innerText=i[n].innerHTML,document.body.appendChild(r[0]);var c=t(r[0]).width()-i[n].innerHTML.length;document.body.removeChild(r[0]);var d=t("<input />");d.attr({"id":"data-userid","type":"text","value":i[n].innerHTML,"disabled":"true"}),d.addClass("esoc-user-mention"),d.css("width",c+"px"),e[0].replaceChild(d[0],i[n])}else{var u=t("<input />");u.attr({"id":t(i[n]).attr("data-userid"),"type":"button","value":i[n].innerHTML}),u.addClass("esoc-user-mention"),e[0].replaceChild(u[0],i[n])}}"undefined"!=typeof InstallTrigger&&(e[0].innerHTML="&nbsp;"+e[0].innerHTML+"&nbsp;")},"setCursorPositionAtStartOFMention":function(e){if(window.chrome&&window.chrome.webstore){var t=document.createRange(),i=window.getSelection();t.setStart(e.currentTarget,0),i.removeAllRanges(),i.addRange(t)}},"applySpaceKeyEvent":function(e){32===(e.keyCode||e.which)&&(e.preventDefault(),t(e.currentTarget).trigger("click"))}}}),csui.define("esoc/widgets/socialactions/comment/server.adaptor.mixin",["csui/lib/jquery","csui/lib/backbone","csui/lib/underscore","csui/utils/url","esoc/widgets/socialactions/util"],function(e,t,i,n,o){"use strict";return{"mixin":function(e){return i.extend(e,{"makeServerAdaptor":function(e){return this},"sync":function(e,n,s){switch(e){case"create":i.extend(s,{"contentType":!1,"crossDomain":!0,"processData":!1,"url":this.connector.connection.url+o.commonUtil.REST_URLS.csPostCommentRESTUrl});break;case"delete":i.extend(s,{"url":this.connector.connection.url+this.attributes.actions.deleteAction.href+"?id="+this.id})}return t.Collection.prototype.sync.apply(this,arguments)}})}}}),csui.define("esoc/widgets/socialactions/comment.model",["csui/lib/jquery","csui/lib/backbone","csui/models/mixins/expandable/expandable.mixin","csui/models/mixins/resource/resource.mixin","csui/models/mixins/uploadable/uploadable.mixin","csui/models/mixins/including.additional.resources/including.additional.resources.mixin","esoc/widgets/socialactions/comment/server.adaptor.mixin"],function(e,t,i,n,o,s,l){var a=t.Model.extend({"defaults":{"id":0,"data_id":0,"created_at":"-","modified_at":"","text":"-","feed_event_type":0,"user":{"name":"-","screen_name":"-","profile_image_url":"-"},"noMoreData":!0,"actions":{},"extended_info":{}},"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments),this.makeResource(i).makeIncludingAdditionalResources(i).makeUploadable(i).makeExpandable(i).makeServerAdaptor(i)},"isNew":function(){return 0===this.id}});return s.mixin(a.prototype),i.mixin(a.prototype),o.mixin(a.prototype),n.mixin(a.prototype),l.mixin(a.prototype),a}),csui.define("esoc/widgets/socialactions/commentscollection/server.adaptor.mixin",["csui/lib/jquery","csui/lib/backbone","csui/lib/underscore","csui/utils/url","csui/utils/base","csui/behaviors/default.action/impl/defaultaction"],function(e,t,i,n,o,s){"use strict";return{"mixin":function(l){return i.extend(l,{"makeServerAdaptor":function(e){return this},"base":o,"url":function(){return this.getCommentsRESTUrl},"fetch":function(i){i.params=e.extend(this.defaults.params,i.params);var o=new s,l={"commands":o.actionItems.getAllCommandSignatures(o.commands)};this.getCommentsRESTUrl=n.appendQuery(this.defaults.csRESTUrl,n.combineQueryString(e.param(i.params),l)),t.Collection.prototype.fetch.apply(this,arguments)},"parse":function(e){this.util.commonUtil.globalConstants.MAX_CHAR_LIMIT=void 0!==this.maxMessageLength&&parseInt(this.maxMessageLength,10)>0?parseInt(this.maxMessageLength,10):e.config_settings.maxMessageLength?e.config_settings.maxMessageLength:this.commonUtil.globalConstants.MAX_CHAR_LIMIT;var t=JSON.parse(JSON.stringify(e.data));return delete this.defaults.params[this.util.commonUtil.globalConstants.SINCE_ID],this.parseCommentsCollectionResponse(t)},"parseCommentsCollectionResponse":function(t){for(var i in t){var n=t[i];n.text=e.trim(n.text),n.created_at_iso8601=this.base.formatFriendlyDateTimeNow(n.created_at_iso8601),""!==n.modified_at_iso8601&&void 0!==n.modified_at_iso8601&&(n.modified_at_iso8601=this.base.formatFriendlyDateTimeNow(n.modified_at_iso8601))}return t},"sync":function(e,i,n){return t.Collection.prototype.sync.apply(this,arguments)}})}}}),csui.define("esoc/widgets/socialactions/commentscollection.model",["csui/lib/jquery","csui/lib/backbone","csui/lib/underscore","csui/utils/base","csui/utils/url","csui/utils/namedsessionstorage","csui/behaviors/default.action/impl/defaultaction","esoc/widgets/socialactions/comment.model","esoc/widgets/socialactions/util","csui/models/mixins/expandable/expandable.mixin","csui/models/mixins/resource/resource.mixin","csui/models/mixins/uploadable/uploadable.mixin","csui/models/mixins/including.additional.resources/including.additional.resources.mixin","esoc/widgets/socialactions/commentscollection/server.adaptor.mixin","i18n!esoc/widgets/socialactions/nls/lang"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h){var f=t.Collection.extend({"defaults":{"params":{"data_id":"","commands":"default"},"csRESTUrl":""},"model":a,"util":r,"namedSessionStorage":new s(r.commonUtil.globalConstants.ESOCIAL_USER_INFO),"getCommentsRESTUrl":"","context":"","currentNodeModel":void 0,"constructor":function(i){delete this.defaults.params[this.util.commonUtil.globalConstants.MAX_ID],delete this.defaults.params[this.util.commonUtil.globalConstants.SINCE_ID],this.defaults.params=e.extend(this.defaults.params,i.params),this.defaults.params.sort_by_nid=!0,this.defaults.params.data_id=i.nodeID,this.getCommentsRESTUrl=i.connector.connection.url,this.context=i.context,i.statusInfo&&i.statusInfo.getStatusUrl?(this.getCommentsRESTUrl+=i.statusInfo.getStatusUrl,this.getCommentsRESTUrl=r.updateQueryStringValues(this.getCommentsRESTUrl,"conversation_id",i.statusInfo.conversation_id),this.getCommentsRESTUrl=r.updateQueryStringValues(this.getCommentsRESTUrl,"item_id",i.statusInfo.item_id)):this.getCommentsRESTUrl+=this.util.commonUtil.REST_URLS.csGetCommentRESTUrl,this.defaults.csRESTUrl=this.getCommentsRESTUrl,this.getCommentsRESTUrl+=e.param(this.defaults.params),i&&i.connector&&i.connector.assignTo(this),t.Collection.prototype.constructor.apply(this,arguments),this.currentNodeModel=i.currentNodeModel,this.makeResource(i).makeIncludingAdditionalResources(i).makeUploadable(i).makeExpandable(i).makeServerAdaptor(i)},"initialize":function(){},"fetchError":function(e,t){var i={"parent":"body","errorContent":t.responseJSON?t.responseJSON.errorDetail?t.responseJSON.errorDetail:t.responseJSON.error:h.defaultErrorMessageCommentsFetch};r.commonUtil.openErrorDialog(i)}});return p.mixin(f.prototype),c.mixin(f.prototype),u.mixin(f.prototype),d.mixin(f.prototype),m.mixin(f.prototype),f}),csui.define("esoc/widgets/socialactions/socialactions.model",["csui/lib/backbone","csui/utils/url","csui/utils/namedsessionstorage","esoc/widgets/common/util"],function(e,t,i,n){return e.Model.extend({"defaults":{"attachementsEnabled":!0,"chatEnabled":!0,"commentingOpen":!0,"commentsEnabled":!0,"likesEnabled":!0,"taggingEnabled":!0,"threadingEnabled":!0,"csid":"","rockey":"","roid":""},"connector":"","commonUtil":n,"namedSessionStorage":new i,"constructor":function(t,i){this.defaults.rockey=i.rockey,this.defaults.roid=i.roid,this.defaults.csid=i.csid,e.Model.prototype.constructor.apply(this,arguments),i&&i.connector&&i.connector.assignTo(this)},"url":function(){var e=t.combine(this.connector.connection.url,this.commonUtil.REST_URLS.csGetROI);return e+="rockey="+encodeURIComponent(this.attributes.rockey)+"&roid="+encodeURIComponent(this.attributes.roid),void 0!==this.namedSessionStorage.get(this.attributes.rockey+this.attributes.roid)?e+="&csid="+this.namedSessionStorage.get(this.attributes.rockey+this.attributes.roid):""!==this.attributes.csid&&this.attributes.csid.toString().length>0&&(e+="&csid="+this.attributes.csid),e},"parse":function(e){var t=JSON.parse(JSON.stringify(e.available_settings));return this.attributes.rockey+this.attributes.roid!==""&&this.attributes.rockey+this.attributes.roid.toString().length>0&&this.namedSessionStorage.set(this.attributes.rockey+this.attributes.roid,t.CSID),{"socialactions":t}}})}),csui.define("esoc/widgets/socialactions/reply/server.adaptor.mixin",["csui/lib/jquery","csui/lib/backbone","csui/lib/underscore","csui/utils/url","esoc/widgets/socialactions/util"],function(e,t,i,n,o){"use strict";return{"mixin":function(e){return i.extend(e,{"makeServerAdaptor":function(e){return this},"sync":function(e,n,s){switch(e){case"create":i.extend(s,{"contentType":!1,"dataType":"text","crossDomain":!0,"processData":!1,"url":this.connector.connection.url+o.commonUtil.REST_URLS.csPostCommentRESTUrl});break;case"delete":i.extend(s,{"url":this.connector.connection.url+this.attributes.actions.deleteAction.href+"?id="+this.id})}return t.Collection.prototype.sync.apply(this,arguments)}})}}}),csui.define("esoc/widgets/socialactions/reply.model",["csui/lib/jquery","csui/lib/backbone","csui/models/mixins/expandable/expandable.mixin","csui/models/mixins/resource/resource.mixin","csui/models/mixins/uploadable/uploadable.mixin","csui/models/mixins/including.additional.resources/including.additional.resources.mixin","esoc/widgets/socialactions/reply/server.adaptor.mixin"],function(e,t,i,n,o,s,l){var a=t.Model.extend({"defaults":{"id":0,"data_id":0,"created_at":"-","text":"-","feed_event_type":0,"user":{"name":"-","screen_name":"-","profile_image_url":"-"},"noMoreData":!0,"actions":{},"extended_info":{}},"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments),this.makeResource(i).makeIncludingAdditionalResources(i).makeUploadable(i).makeExpandable(i).makeServerAdaptor(i)},"isNew":function(){return 0===this.id}});return s.mixin(a.prototype),i.mixin(a.prototype),o.mixin(a.prototype),n.mixin(a.prototype),l.mixin(a.prototype),a}),csui.define("esoc/widgets/socialactions/replycollection/server.adaptor.mixin",["csui/lib/jquery","csui/lib/backbone","csui/lib/underscore","csui/utils/base","csui/utils/url","csui/behaviors/default.action/impl/defaultaction"],function(e,t,i,n,o,s){"use strict";return{"mixin":function(l){return i.extend(l,{"makeServerAdaptor":function(e){return this},"url":function(){return this.getRepliesUrl},"fetch":function(i){i&&i.params&&(delete i.params.data_id,delete this.defaults.params.data_id),i.params=e.extend(this.defaults.params,i.params);var n=new s,l={"commands":n.actionItems.getAllCommandSignatures(n.commands)};this.getRepliesUrl=o.appendQuery(this.defaults.csRESTUrl,o.combineQueryString(e.param(i.params),l)),t.Collection.prototype.fetch.apply(this,arguments)},"parse":function(e,t){if(void 0!==e.data[0].reply_count&&e.data[0].id===t.item_id){if(document.getElementById("reply_link_count_"+t.item_id))document.getElementById("reply_link_count_"+t.item_id).innerHTML="("+e.data[0].reply_count+")";else{var i="reply_link_count_"+e.data[0].id;document.getElementById("reply_link_"+t.item_id).innerHTML+="<span id ="+i+">("+e.data[0].reply_count+" )</span>"}t.parentCommentModel.attributes.reply_count=e.data[0].reply_count}else document.getElementById("reply_link_count_"+t.item_id)&&(document.getElementById("reply_link_count_"+t.item_id).innerHTML="");for(var n in e.data)e.data[n].id===e.data[n].extended_info.conversation_id&&e.data.splice(n,1);var o=JSON.parse(JSON.stringify(e.data));return this.parseReplyCollectionResponse(o)},"parseReplyCollectionResponse":function(t){for(var i in t){var o=t[i];o.text=e.trim(o.text),o.created_at_iso8601=n.formatFriendlyDateTimeNow(o.created_at_iso8601),""!==o.modified_at_iso8601&&void 0!==o.modified_at_iso8601&&(o.modified_at_iso8601=n.formatFriendlyDateTimeNow(o.modified_at_iso8601))}return t},"fetchSuccess":function(t,i,n){e(".esoc-social-reply-seemore").hide(),e(n.selEle).parent().parent().next().find("a:first").trigger("focus"),i.data[i.data.length-1]&&!1===i.data[i.data.length-1].noMoreData&&e(".esoc-social-reply-seemore:last").show();var o=i.data.length>0&&i.data[i.data.length-1].noMoreData;for(var s in t.models)t.models[s].attributes.noMoreData=o},"fetchError":function(e,t){}})}}}),csui.define("esoc/widgets/socialactions/replycollection.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/behaviors/default.action/impl/defaultaction","csui/utils/contexts/factories/connector","esoc/widgets/socialactions/reply.model","esoc/widgets/common/util","csui/models/mixins/expandable/expandable.mixin","csui/models/mixins/resource/resource.mixin","csui/models/mixins/uploadable/uploadable.mixin","csui/models/mixins/including.additional.resources/including.additional.resources.mixin","esoc/widgets/socialactions/replycollection/server.adaptor.mixin"],function(e,t,i,n,o,s,l,a,r,c,d,u,p){var m=i.Collection.extend({"defaults":{"params":{},"csRESTUrl":""},"model":l,"thisjQuery":t,"commonUtil":a,"constructor":function(e){e.connector=e.connector||e.context.getObject(s),delete this.defaults.params[this.commonUtil.globalConstants.MAX_ID],delete this.defaults.params[this.commonUtil.globalConstants.SINCE_ID],this.defaults.params=t.extend(this.defaults.params,e.params),this.defaults.params.sort_by_nid=!0,this.getRepliesUrl=e.connector.connection.url,this.getRepliesUrl+=e.getRepliesUrl,this.defaults.csRESTUrl=this.getRepliesUrl,this.getRepliesUrl+=t.param(this.defaults.params),e&&e.connector&&e.connector.assignTo(this),i.Collection.prototype.constructor.apply(this,arguments),this.makeResource(e).makeIncludingAdditionalResources(e).makeUploadable(e).makeExpandable(e).makeServerAdaptor(e)},"initialize":function(){}});return u.mixin(m.prototype),r.mixin(m.prototype),d.mixin(m.prototype),c.mixin(m.prototype),p.mixin(m.prototype),m}),csui.define("hbs!esoc/widgets/socialactions/reply",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="esoc-social-comment-timestamp">\r\n              <span class="esoc-social-comment-timestamp-ago"></span>\r\n              <span class="esoc-social-comment-blue">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"modifiedAt"):s,t))+'</span>\r\n              <span class="esoc-social-timestamp-text">'+e.escapeExpression((l=null!=(l=a(i,"modified_at_iso8601")||(null!=t?a(t,"modified_at_iso8601"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"modified_at_iso8601","hash":{},"loc":{"start":{"line":18,"column":55},"end":{"line":18,"column":78}}}):l))+"</span>\r\n            </span>\r\n"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span\r\n                class="esoc-social-comment-timestamp esoc-social-timestamp-text">'+e.escapeExpression((s=null!=(s=l(i,"created_at_iso8601")||(null!=t?l(t,"created_at_iso8601"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"created_at_iso8601","hash":{},"loc":{"start":{"line":22,"column":81},"end":{"line":22,"column":103}}}):s))+"</span>\r\n"},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <a href="javascript:void(0);"\r\n               class="esoc-social-comment-button esoc-social-comment-icon-edit"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"edit"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"edit"):s,t))+'"></a>\r\n'},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="esoc-social-comment-icon-spacer"></div>\r\n            <a href="javascript:void(0);"\r\n               class="esoc-social-comment-button esoc-social-reply-delete-confirm esoc-social-comment-icon-delete"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"deleteReply"):s,t))+'" data-binf-toggle="modal"\r\n               data-binf-target="#esoc-social-dialog" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"deleteReply"):s,t))+'"></a>\r\n'},"9":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="esoc-social-comment-icon-spacer"></div>\r\n            <a href="javascript:void(0);"\r\n               class="esoc-social-comment-button esoc-social-comment-icon-hide"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"hide"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"hide"):s,t))+'"></a>\r\n'},"11":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(12,o,0),"inverse":e.program(15,o,0),"loc":{"start":{"line":86,"column":6},"end":{"line":127,"column":14}}}))?s:""},"12":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div id="esoc-social-reply-attachment-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":87,"column":46},"end":{"line":87,"column":52}}}):l))+'"\r\n             class="binf-col-lg-8 binf-col-md-8 binf-col-sm-10 binf-col-xs-10 esoc-social-attachment">\r\n          <span class="csui-icon-group esoc-social-attachment-icon"\r\n                title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_name"):s,t))+'">\r\n            <a href="javascript:void(0);" id="esoc-social-selected-file-icon-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":91,"column":77},"end":{"line":91,"column":83}}}):l))+'" class="binf-col-lg-2 binf-col-md-2 binf-col-sm-2 binf-col-xs-2\r\n                  '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"mimeTypeClass"):s,t))+'" />\r\n            <a href="javascript:void(0);" class="csui-icon csui-icon-shortcut-overlay"></a>\r\n          </span>\r\n\r\n          <div class="binf-col-lg-9 binf-col-md-9 binf-col-sm-9 binf-col-xs-9 esoc-social-attachment-name">\r\n            <a href="javascript:void(0);" class="esoc-social-attachment-download"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_name"):s,t))+"</a>\r\n          </div>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"actions"):t)?a(s,"addshortcut"):s,{"name":"if","hash":{},"fn":e.program(13,o,0),"inverse":e.noop,"loc":{"start":{"line":100,"column":10},"end":{"line":105,"column":17}}}))?s:"")+"        </div>\r\n"},"13":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <a href="javascript:void(0);" id="esoc-social-reply-attachment-icon-delete-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":101,"column":87},"end":{"line":101,"column":93}}}):l))+'"\r\n               class="binf-col-lg-1 binf-col-md-1 binf-col-sm-1 binf-col-xs-1 reply esoc-social-reply-attachment-icon-delete"\r\n               data-binf-toggle="modal" data-binf-target="#esoc-social-dialog"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"deleteReply"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"deleteReply"):s,t))+'"></a>\r\n'},"15":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages.documentAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(16,o,0),"inverse":e.noop,"loc":{"start":{"line":107,"column":6},"end":{"line":127,"column":6}}}))?s:""},"16":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div id="esoc-social-reply-attachment-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":108,"column":46},"end":{"line":108,"column":52}}}):l))+'"\r\n             class="binf-col-lg-8 binf-col-md-8 binf-col-sm-10 binf-col-xs-10 esoc-social-attachment">\r\n          <a href="javascript:void(0);"\r\n             class="binf-col-lg-2 binf-col-md-2 binf-col-sm-2 binf-col-xs-2 esoc-social-attachment-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_name"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_name"):s,t))+'"></a>\r\n\r\n          <div class="binf-col-lg-7 binf-col-md-7 binf-col-sm-7 binf-col-xs-7 esoc-social-attachment-name">\r\n            <a href="javascript:void(0);" class="esoc-social-attachment-download"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_name"):s,t))+'</a>\r\n          </div>\r\n          <div\r\n              class="binf-col-lg-2 binf-col-md-2 binf-col-sm-2 binf-col-xs-2 esoc-social-attachment-size">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_size"):s,t))+"</div>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"actions"):t)?a(s,"addattachment"):s,{"name":"if","hash":{},"fn":e.program(13,o,0),"inverse":e.noop,"loc":{"start":{"line":120,"column":10},"end":{"line":125,"column":17}}}))?s:"")+"        </div>\r\n      "},"18":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.actions.addattachment || this.actions.addshortcut",{"name":"xif","hash":{},"fn":e.program(19,o,0),"inverse":e.noop,"loc":{"start":{"line":129,"column":6},"end":{"line":136,"column":14}}}))?s:""},"19":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-social-reply-list-actions binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n          <span class="esoc-reply-attachment">\r\n            <a class="reply esoc-social-attachment-file" href="javascript:void(0)" data-html="true"\r\n               data-binf-placement="bottom"> '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachFile"):s,t))+" </a>\r\n          </span>\r\n        </div>\r\n"},"21":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){
if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div id="show_more_'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":152,"column":21},"end":{"line":152,"column":27}}}):l))+'" class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <a href="javascript:void(0);" class="esoc-social-reply-seemore"\r\n       style="display:none">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"seeMoreRepiles"):s,t))+"</a>\r\n  </div>\r\n"},"23":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <input type="file" id="esoc-social-replyedit-desktop-attachment-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":159,"column":66},"end":{"line":159,"column":72}}}):s))+'" name="AddDesktopDoc"\r\n         style="display:none" /><input type="file"\r\n                                       id="esoc-social-replylist-desktop-attachment-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":161,"column":84},"end":{"line":161,"column":90}}}):s))+'"\r\n                                       name="AddDesktopDoc" style="display:none" />\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-social-comment-body-divider"></div>\r\n<div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-comment-list-divider"></div>\r\n<div class="esoc-profileimg-block">\r\n  <span class="esoc-userprofile-img">\r\n    <img class="esoc-userprofile-img-'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"user"):t)?a(s,"id"):s,t))+' binf-img-circle" src=""></img>\r\n  </span>\r\n</div>\r\n<div class="esoc-commentinfo-block-wrapper binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n  <div class="esoc-commentinfo-block binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <div class="esoc-social-comment-details">\r\n      <div class="esoc-social-comment-user-details binf-col-lg-10 binf-col-md-10 binf-col-sm-10 binf-col-xs-10">\r\n        <span class="esoc-user-widget"></span>\r\n        <span class="esoc-social-timestamp">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"modified_at_iso8601"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":14,"column":10},"end":{"line":23,"column":17}}}))?s:"")+'        </span>\r\n      </div>\r\n      <div class="esoc-social-comment-icon-holder binf-col-lg-2 binf-col-md-2 binf-col-sm-2 binf-col-xs-2">\r\n        <div class="esoc-social-comment-icon-holder esoc-social-comment-icon-holder-inner">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"actions"):t)?a(s,"edit"):s,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":28,"column":10},"end":{"line":32,"column":17}}}))?s:"")+"\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"actions"):t)?a(s,"deleteAction"):s,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":34,"column":10},"end":{"line":40,"column":17}}}))?s:"")+"\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"actions"):t)?a(s,"hide"):s,{"name":"if","hash":{},"fn":e.program(9,o,0),"inverse":e.noop,"loc":{"start":{"line":42,"column":10},"end":{"line":47,"column":17}}}))?s:"")+'        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <div class="binf-alert binf-alert-danger binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-social-warning"\r\n         role="alert"></div>\r\n    <div class="esoc-extended-view-mode">\r\n      <div\r\n          class="esoc-social-reply-data esoc-social-reply-comment-data esoc-social-comment-text binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"\r\n          data-id="'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":58,"column":19},"end":{"line":58,"column":25}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"text")||(null!=t?a(t,"text"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"text","hash":{},"loc":{"start":{"line":58,"column":27},"end":{"line":58,"column":35}}}):l))+'</div>\r\n      <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'"\r\n         class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'">\r\n        <span class="icon-arrow-down"></span></a>\r\n      <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'"\r\n         class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'">\r\n        <span class="icon-arrow-up"></span></a>\r\n    </div>\r\n    <div id="esoc-social-reply-input-holder-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":66,"column":44},"end":{"line":66,"column":50}}}):l))+'" class="esoc-social-reply-input-holder binf-col-lg-8\r\n    binf-col-md-8 binf-col-sm-7 binf-col-xs-5">\r\n            <textarea class="esoc-social-reply-data-textarea esoc-social-reply-data-textarea-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":68,"column":93},"end":{"line":68,"column":99}}}):l))+'"\r\n                      placeholder="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"writeAComment"):s,t))+'">'+e.escapeExpression((l=null!=(l=a(i,"text")||(null!=t?a(t,"text"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"text","hash":{},"loc":{"start":{"line":69,"column":63},"end":{"line":69,"column":71}}}):l))+'</textarea>\r\n\r\n      <div id="esoc-suggestion-reply-item_'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":71,"column":42},"end":{"line":71,"column":48}}}):l))+'"></div>\r\n    </div>\r\n\r\n    <div class="esoc-social-reply-icons-container binf-col-lg-4 binf-col-md-4 binf-col-sm-5 binf-col-xs-7">\r\n      <div class="esoc-social-edit-icons" id="esoc-social-edit-reply-icons-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":75,"column":75},"end":{"line":75,"column":81}}}):l))+'">\r\n        <a href="javascript:void(0);" id="esoc-social-reply-edit-attachment-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":76,"column":76},"end":{"line":76,"column":82}}}):l))+'"\r\n           class="esoc-social-comment-attachment" data-html="true" data-binf-placement="bottom" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"attachFile"):s,t))+'"\r\n        ></a>\r\n        <a href="javascript:void(0);"\r\n           class="esoc-social-comment-emoticon-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":80,"column":47},"end":{"line":80,"column":53}}}):l))+' esoc-social-comment-emoticon esoc-social-reply-emoticon"\r\n           id="esoc-social-reply-emoticon-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":81,"column":42},"end":{"line":81,"column":48}}}):l))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"emoticon"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"emoticon"):s,t))+'"></a>\r\n      </div>\r\n    </div>\r\n\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_id"):s,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.program(18,o,0),"loc":{"start":{"line":85,"column":4},"end":{"line":137,"column":11}}}))?s:"")+'\r\n    <div class="esoc-social-reply-list-update binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      <button class="esoc-social-reply-update binf-btn binf-btn-primary">\r\n        '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"update"):s,t))+'\r\n      </button>\r\n      <button class="esoc-social-reply-cancel binf-btn binf-btn-default">\r\n        '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"cancel"):s,t))+'\r\n      </button>\r\n      <span class="esoc-social-reply-hidden-text">'+e.escapeExpression((l=null!=(l=a(i,"text")||(null!=t?a(t,"text"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"text","hash":{},"loc":{"start":{"line":146,"column":50},"end":{"line":146,"column":58}}}):l))+"</span>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"noMoreData"):t,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(21,o,0),"loc":{"start":{"line":151,"column":0},"end":{"line":156,"column":7}}}))?s:"")+'<span class="esoc-social-reply-delete"></span>\r\n'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.actions.addattachment && !this.actions.addshortcut",{"name":"xif","hash":{},"fn":e.program(23,o,0),"inverse":e.noop,"loc":{"start":{"line":158,"column":0},"end":{"line":163,"column":8}}}))?s:"")+'<input type="hidden" id="esoc-social-reply-cs-shortcut-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":164,"column":55},"end":{"line":164,"column":61}}}):l))+'-attachfiles" value="" /><input\r\n    type="hidden" id="esoc-social-reply-cs-shortcut-edit-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":165,"column":57},"end":{"line":165,"column":63}}}):l))+'" value="" />\r\n<div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-social-comment-body-divider"></div>\r\n'}});return i.registerPartial("esoc_widgets_socialactions_reply",n),n}),csui.define("esoc/widgets/socialactions/replylist.view",["require","csui/lib/jquery","csui/lib/backbone","csui/lib/underscore","csui/lib/marionette","csui/lib/moment","csui/lib/handlebars","csui/utils/contexts/factories/connector","i18n!esoc/widgets/socialactions/nls/lang","hbs!esoc/widgets/socialactions/reply","esoc/widgets/userwidget/userwidget","esoc/widgets/socialactions/util","csui/utils/url","csui/utils/nodesprites","csui/utils/namedsessionstorage","esoc/widgets/userwidget/util","csui/lib/handlebars.helpers.xif"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f){return o.ItemView.extend({"tagName":"li","className":"esoc-social-reply-list-item binf-col-lg-12 col-md-12 binf-col-sm-12 binf-col-xs-12","momentJS":s,"util":u,"namedSessionStorage":new h(u.commonUtil.globalConstants.ESOCIAL_USER_INFO),"template":c,"templateHelpers":function(){var e,t,i="";this.model.attributes&&this.model.attributes.extended_info&&this.model.attributes.extended_info.attachment_subtype&&(e=this.model,i="csui-icon mime_document",t=this.model.attributes.extended_info.attachment_subtype,e.attributes.type=1===t?this.model.attributes.extended_info.attachment_original_sub_type:t,e.attributes.mime_type=1===t?this.model.attributes.extended_info.attachment_original_mime_type:this.model.attributes.extended_info.attachment_mime_type,e.attributes.container=1===t?this.model.attributes.extended_info.attachment_original_container:this.model.attributes.extended_info.attachment_container,i=m.findClassByNode(e));var o={"seeMoreRepiles":r.seeMoreReplies,"attachFile":r.attachFile,"modifiedAt":r.modifiedAt,"update":r.update,"cancel":r.cancel,"writeAComment":r.writeAComment,"deleteReply":r.deleteComment,"edit":r.edit,"hide":r.hide,"attachmentDeleteDescription":r.attachmentDeleteDescription,"attachmentDeleteTitle":r.attachmentDeleteTitle,"uploadAttachment":r.uploadAttachment,"deleteReplyheader":r.deleteReplyheader,"confirmationTextforReplyDelete":r.confirmationTextforReplyDelete,"shortcutAttachmentSubtype":this.util.commonUtil.globalConstants.SHORTCUT_ATTACHMENT_SUBTYPE,"documentAttachmentSubtype":this.util.commonUtil.globalConstants.DOCUMENT_ATTACHMENT_SUBTYPE,"emoticon":r.emoticon,"more":r.more,"less":r.less,"mimeTypeClass":i};return this.uniqueId=n.uniqueId(),{"messages":o}},"initialize":function(e){if(0===e.model.collection.options.csBaseUrl.indexOf("http")&&void 0!==e.model.collection.options.csBaseUrl){var t=e.model.collection.options.csBaseUrl.split(/[\/]+/);void 0!==this.model.attributes.extended_info&&void 0!==this.model.attributes.extended_info.attachment_icon_id&&(this.model.attributes.extended_info.attachment_icon_id=t[0]+"//"+t[1]+this.model.attributes.extended_info.attachment_icon_id)}},"events":{"click .esoc-social-comment-icon-edit":"onEditReply","click .esoc-social-comment-icon-hide":"onHideReply","click .esoc-social-comment-icon-delete.esoc-social-reply-delete-confirm":"onRemoveModel","keydown .esoc-social-comment-icon-delete.esoc-social-reply-delete-confirm":"onClickWithSpaceKey","click .esoc-social-reply-update":"onUpdateReply","click .esoc-social-reply-cancel":"onUpdateCancelReply","input .esoc-social-editable":"onEditTextChanged","input .esoc-social-reply-data-textarea":"onEditTextKeyPress","input .esoc-reply-emoji-comment":"onEditTextKeyPress","keyup .esoc-reply-emoji-comment":"onEditTextKeyPress","change .esoc-social-reply-data-textarea":"onEditTextKeyPress","focus .esoc-social-reply-data-textarea":"onFocusEditTextKey","click .esoc-social-reply-seemore":"fetchMoreReplies","click .reply.esoc-social-reply-attachment-icon-delete":"onReplyAttachmentDelete","click .reply.esoc-social-attachment-file":"selectAttachment","keydown .reply.esoc-social-attachment-file":"onClickWithSpaceKey","focus .esoc-reply-emoji-comment":"onFocusEditTextKey","click .esoc-social-reply-emoticon":"onEmojiPress","click .esoc-social-comment-attachment":"onAttachementPress","click .esoc-social-attachment-icon, .esoc-social-attachment-download":"openAttachment","click .esoc-see-more-activity":"showMoreContent","click .esoc-see-less-activity":"showLessContent","mousedown .esoc-reply-emoji-comment .esoc-user-mention":"onReplyEditEmojiMentionMouseClick"},"constructor":function(e){this.options=e||{},this.options.connector=this.options.connector||this.options.context.getObject(a),o.ItemView.prototype.constructor.apply(this,arguments)},"onClickWithSpaceKey":function(e){u.applySpaceKeyEvent(e)},"remove":function(){var e=this;this.$el.fadeOut(function(){o.ItemView.prototype.remove.call(e),e.util.setCommentDialogPointer()})},"onFocusEditTextKey":function(e){e.preventDefault(),e.stopPropagation()},"openAttachment":function(e){e.preventDefault(),e.stopPropagation(),this.trigger("click:attachment")},"onEditReply":function(e){if(e.preventDefault(),e.stopPropagation(),t(".esoc-social-comment-cancel:visible").length>0&&t(".esoc-social-comment-cancel:visible").trigger("click"),t(".esoc-social-reply-cancel:visible").length>0){var i=t(".esoc-social-reply-cancel:visible").closest("li.esoc-social-reply-list-item"),n=t(i).find(".esoc-social-reply-data").height(),o=t(i).find("#esoc-social-comment-reply-list-"+this.model.attributes.id).height(),s=parseInt(t(i.children()).find("div[data-id]")[0].getAttribute("data-id"),10);t(".esoc-social-reply-cancel:visible").trigger("click")}this.$el.find(".esoc-social-comment-icon-holder, .esoc-social-reply-list-actions").hide(),this.$el.find(".esoc-social-reply-list-update").show(),this.$el.find(".esoc-social-edit-icons").show(),this.$el.find(".esoc-social-edit-icons").animate({"opacity":1},0),this.$el.find(".esoc-social-edit-icons").addClass("esoc-social-editable-attachment-icons"),this.applyReplyEmoji(e),this.$el.find('[class*="esoc-social-reply-comment-data"]').hide();var l=this.$el.find(".emoji-wysiwyg-editor");this.util.createChickletForMentions(l),l.show().trigger("focus"),this.$el.find("#esoc-social-reply-attachment-icon-delete-"+this.model.attributes.id).addClass("esoc-social-reply-edit"),(this.model.collection.socialActions.attachementsEnabled||this.model.collection.socialActions.shortcutsEnabled)&&""===this.model.attributes.extended_info.attachment_id||(this.$el.find("#esoc-social-reply-edit-attachment-"+this.model.attributes.id).hide(),this.$el.find(".esoc-social-reply-data").hide().addClass("esoc-social-editable-icons"),this.$el.find(".esoc-social-edit-icons").addClass("esoc-social-icon-when-no-attachment"),this.$el.find(".esoc-reply-emoji-comment").addClass("esoc-social-input-when-no-attachment"));var a=t("#esoc-social-comment-container")[0];this.model.id<s&&(a.scrollTop=a.scrollTop+(n-o));var c={"socialActions":this.model.collection.socialActions,"id":this.model.attributes.id,"uniqueId":this.uniqueId,"desktopAttachmentInputId":"esoc-social-replyedit-desktop-attachment-"+this.model.attributes.id,"shortcutIdHolder":this.$el.find("#esoc-social-reply-cs-shortcut-edit-"+this.model.attributes.id),"connector":this.options.connector};this.util.showAttachmentPopOver(this.$el.find("#esoc-social-reply-edit-attachment-"+this.model.attributes.id),c),this.$el.find("#esoc-social-reply-edit-attachment-"+this.model.attributes.id).attr("title",r.attachFile),this.util.commonUtil.preventDrop(this.$el.find(".esoc-reply-emoji-comment"));var d=this;this.$el.find("#esoc-social-comment-reply-list-"+this.model.attributes.id).on("paste",function(e){var i=d.util.commonUtil.globalConstants.MAX_CHAR_LIMIT,n=t(".esoc-social-reply-data-textarea-"+d.model.id).val().length;d.util.commonUtil.onCommentFormPaste(e,n,i),t(".esoc-social-reply-data-textarea-"+d.model.id).innerHTML=t("#esoc-social-comment-reply-list-"+this.model.attributes.id).html(),d.onEditTextKeyPress(e)}),this.$el.find(".esoc-see-more").hide(),this.$el.find(".esoc-see-less").hide(),this.options.parentCollectionView.triggerMethod("update:scrollbar")},"onEditTextKeyPress":function(e){this.util.onMentionNameEdit(e);var t=this.$el.find('[class*="esoc-social-reply-data-textarea-"]'),i=t.val(),n=this.$el.find(".esoc-social-reply-data"),o=this.$el.find("#esoc-social-comment-reply-list-"+this.model.attributes.id),s=this.util.commonUtil.globalConstants.MAX_CHAR_LIMIT;n.text(i);var l=e||window.event;if(i.length>s){var a=i.substr(0,s);t.val(a),n.text(a),o.html("")[0].textContent=a,this.util.commonUtil.addEmoji(o,!1,this.options.connector),this.util.commonUtil.placeCaretAtEnd(o),l.preventDefault()}},"onRender":function(t){var i=this.model,o=this;if(this.inactivateUnsupportedSubType(i),this.listenTo(this.options.model.collection,"sync",function(){var e=o.model;o.$el.find("#esoc-social-reply-attachment-"+e.attributes.id+" .esoc-social-attachment-name").removeClass("esoc-social-comment-inactive"),o.$el.find("#esoc-social-reply-attachment-"+e.attributes.id+" .esoc-social-attachment-icon").removeClass("esoc-social-comment-inactive"),o.inactivateUnsupportedSubType(e)}),this.model.collection.socialActions.attachementsEnabled&&this.model.collection.socialActions.shortcutsEnabled){var s={"id":"attachfile-"+this.model.attributes.id,"uniqueId":this.uniqueId,"socialActions":this.model.collection.socialActions,"desktopAttachmentInputId":"esoc-social-replylist-desktop-attachment-"+this.model.attributes.id,"shortcutIdHolder":this.$el.find("#esoc-social-reply-cs-shortcut-"+this.model.attributes.id+"-attachfiles"),"attachFiles":!0,"itemview":this,"connector":this.options.connector};this.util.showAttachmentPopOver(this.$el.find(".esoc-social-attachment-file"),s)}if(void 0!==this.model.attributes.user&&void 0!==this.model.attributes.user.id){d||(d=e("esoc/widgets/userwidget/userwidget"));var l={"userid":this.model.attributes.user.id,"context":this.options.context,"showUserProfileLink":!0,"showMiniProfile":!0,"UserWidget":d},a=n.extend({"placeholder":this.$el.find(".esoc-user-widget")},l);d.getUser(a);var r=n.extend({"placeholder":this.$el.find(".esoc-profileimg-block"),"showUserWidgetFor":"profilepic","userWidgetWrapperClass":"esoc-social-comment-userprofile-pic"},l);d.getUser(r)}this.applyReplyEmoji(t);var c=this.options.context;f.displayUserWidget(c,this.$el)},"onShow":function(e){-1!==t.inArray(this.model.attributes.feed_event_type,[7,8])&&this.$el.find(".esoc-social-reply-data").css("white-space","inherit"),this.util.setCommentDialogPointer();var i=this.options.context;f.displayUserWidget(i,this.$el),-1===t.inArray(this.model.attributes.feed_event_type,[7,8,9])&&this.showSeeMoreLink(this.$el.find(this.contentTypeElement)),this.options.parentCollectionView.triggerMethod("update:scrollbar")},"showSeeMoreLink":function(e){var i=t(e)[0];t(i).addClass("esoc-see-more-content"),t(i).addClass("esoc-see-min-height"),this.util.setCommentDialogPointer(e);var n=this;setTimeout(function(){n.util.commonUtil.isTextOverflown(i)&&(n.$el.find(".esoc-see-more").show(),t(i).addClass("esoc-see-more-activity")),t(i).removeClass("esoc-see-min-height"),n.options.parentCollectionView.triggerMethod("update:scrollbar")},1e3)},"contentTypeElement":".esoc-extended-view-mode","showMoreContent":function(e){""===window.getSelection().toString()&&(this.util.commonUtil.showMoreContent(e,this,this.$el.find(this.contentTypeElement)),this.util.setCommentDialogPointer(e),e.preventDefault(),e.stopPropagation())},"showLessContent":function(e){""===window.getSelection().toString()&&(this.util.commonUtil.showLessContent(e,this,this.$el.find(this.contentTypeElement)),this.util.setCommentDialogPointer(e),e.preventDefault(),e.stopPropagation())},"onUpdateCancelReply":function(e){this.$el.removeClass("esoc-social-editable-parent").find(".esoc-social-reply-data-textarea-"+this.model.attributes.id).removeClass("esoc-social-editable").val(this.$el.find(".esoc-social-reply-hidden-text").text()).hide(),this.applyReplyEmoji(e),this.$el.find(".esoc-social-comment-icon-holder, .esoc-social-reply-list-actions").show(),this.$el.find("#esoc-social-reply-attachment-"+this.model.attributes.id).show(),this.$el.find(".esoc-social-reply-list-update").hide(),this.$el.find(".esoc-social-warning").hide(),this.$el.find(".esoc-social-edit-icons").hide(),this.$el.removeClass("esoc-social-editable-parent").find(".esoc-social-reply-data").removeClass("esoc-social-editable"),this.$el.find(".esoc-social-reply-data").attr("class","binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-social-reply-data esoc-social-reply-comment-data"),this.$el.find("#esoc-social-reply-attachment-icon-delete-"+this.model.attributes.id).removeClass("esoc-social-reply-edit"),(this.model.collection.socialActions.attachementsEnabled||this.model.collection.socialActions.shortcutsEnabled)&&""===this.model.attributes.extended_info.attachment_id||(this.$el.find(".esoc-social-reply-data").removeClass("esoc-social-editable-icons"),this.$el.find(".esoc-social-edit-icons").removeClass("esoc-social-icon-when-no-attachment"),this.$el.find(".esoc-reply-emoji-comment").removeClass("esoc-social-input-when-no-attachment"));var t=this.$el.find("#esoc-social-reply-edit-attachment-"+this.model.attributes.id),i=this.$el.find("#esoc-social-replyedit-desktop-attachment-"+this.model.attributes.id);t.attr("data-binf-original-title")&&t.attr("data-binf-original-title").length>0&&this.util.hideAttachmentPopup(t,i,this.model.collection.socialActions),this.$el.find(".esoc-comment-emoji").hide(),this.$el.find(".esoc-reply-emoji-comment").hide(),this.$el.find('[class*="esoc-social-reply-comment-data"]').show(),this.$el.find("#esoc-social-reply-cs-shortcut-edit-"+this.model.attributes.id).val(""),this.util.setFocusOnDefaultElement(e);var n=this.options.context;f.displayUserWidget(n,this.$el),this.showSeeMoreLink(this.$el.find(this.contentTypeElement)),this.options.parentCollectionView.triggerMethod("update:scrollbar"),this.$el.find(".esoc-social-comment-icon-edit:first-child").trigger("focus")},"onUpdateReply":function(e){var i,n=this.$el.find('[class*="esoc-social-reply-data-textarea-"]'),o=void 0!==n?n.val().trim():"",s=this.model.attributes.id,l=this.model.attributes.actions.edit.href,a=t("#esoc-social-reply-cs-shortcut-edit-"+s),r=new FormData,c=t("#esoc-social-replyedit-desktop-attachment-"+s);if(o=this.util.commonUtil.revHtmlEntities(o),r.append("commands","default"),""!==a.val())r.append("ATT_ID",parseInt(a.val(),10)),i=!0;else if(c.length>0){var d=c[0].files[0];d?(r.append("AddDesktopDoc",d),i=!0):i=!1}else i=this.$el.find(".esoc-social-reply-edit").is(":hidden");this.util.showMask(this.$el),r.append("status",o),r.append("id",s),r.append("replace",i);var u=this;if(""!==o){var p={"url":u.options.connector.connection.url+l,"type":u.model.attributes.actions.edit.method,"dataType":"text","data":r,"itemview":this,"baseURL":this.model.collection.options.csBaseUrl};this.util.updateWithAttachmentAjaxCall(p).done(function(){u.$el.find(".esoc-social-comment-icon-edit:first-child").trigger("focus")})}else this.$el.find("#esoc-social-comment-reply-list-"+this.model.attributes.id).trigger("focus"),this.util.hideMask(this.$el);this.$el.find("#esoc-social-reply-attachment-icon-delete-"+this.model.attributes.id).removeClass("esoc-social-reply-edit")},"onHideReply":function(e){},"onRemoveModel":function(e){this.util.showMask(this.$el);var t=this.model.attributes.id,i=this.model.attributes.actions.deleteAction.href,n=this,o={"url":n.options.connector.connection.url+i+"?id="+t,"type":n.model.attributes.actions.deleteAction.method,"model":this,"async":!1,"requestType":"ReplyDelete"},s={"dialogtitle":this.templateHelpers().messages.deleteReplyheader,"dialogmessage":this.templateHelpers().messages.confirmationTextforReplyDelete,"ajaxParams":o};this.util.openConfirmationDialog(s)},"destroy":function(e){this.undelegateEvents(),this.off(),this.remove()},"fetchMoreReplies":function(e){var t=this.model.collection;delete t.defaults.params[this.util.commonUtil.globalConstants.SINCE_ID],t.fetch({"remove":!1,"selEle":this.$el.find(".esoc-social-reply-seemore"),"params":{"max_id":this.model.attributes.id},"success":t.fetchSuccess,"error":t.fetchError})},"onReplyAttachmentDelete":function(e){if(e.target.classList.contains("esoc-social-reply-edit"))e.preventDefault(),e.stopPropagation(),this.$el.find("#esoc-social-reply-attachment-"+this.model.attributes.id).hide(),this.$el.find("#esoc-social-reply-edit-attachment-"+this.model.attributes.id).show(),this.$el.find(".esoc-social-edit-icons").removeClass("esoc-social-icon-when-no-attachment"),this.$el.find(".esoc-reply-emoji-comment").removeClass("esoc-social-input-when-no-attachment"),this.$el.find(".esoc-social-reply-data").removeClass("esoc-social-editable-icons"),this.$el.find(".esoc-social-reply-data-textarea").removeClass("esoc-social-editable-icons"),t("#esoc-social-comment-reply-list-"+this.model.attributes.id).trigger("focus");else{var i=this,n=this.model.attributes.id,o=this.model.attributes.actions.edit.href,s=t("<div />").html(this.model.attributes.text),l=s.text(),a={"url":i.options.connector.connection.url+o,"type":i.model.attributes.actions.edit.method,"dataType":"text","data":{"id":n,"status":l,"replace":!0},"model":i,"requestType":"AttachmentDelete"},r={"dialogtitle":this.templateHelpers().messages.attachmentDeleteTitle,"dialogmessage":this.templateHelpers().messages.attachmentDeleteDescription,"ajaxParams":a};this.util.openConfirmationDialog(r)}},"uploadAttachment":function(e){var i=this.model.attributes.id,n=this.model.attributes.actions.edit.href,o=this.$el.find("#esoc-social-replylist-desktop-attachment-"+i),s=t("#esoc-social-reply-cs-shortcut-"+i+"-attachfiles"),l=new FormData;if(l.append("commands","default"),""!==s.val())l.append("ATT_ID",parseInt(s.val(),10));else if(o.length>0){var a=o[0].files[0];l.append("AddDesktopDoc",a)}var r=t("<div />").html(this.model.attributes.text),c=r.text();l.append("id",i),l.append("status",c),this.$el.find(".esoc-reply-attachment").hide(),this.util.showMask(this.$el);var d={"url":this.options.connector.connection.url+n,"type":this.model.attributes.actions.edit.method,"data":l,"itemview":this,"baseURL":this.model.collection.options.csBaseUrl,"commentId":i,"feedType":"reply"};this.util.updateWithAttachmentAjaxCall(d),s.val(""),this.util.resetAttachmentInput(o,this.model.collection.socialActions)},"selectAttachment":function(e){if(this.model.collection.socialActions.attachementsEnabled&&!this.model.collection.socialActions.shortcutsEnabled){var i=this,n=this.$el.find("#esoc-social-replylist-desktop-attachment-"+this.model.attributes.id);n.off("change").on("change",function(e){n.val().length>0&&i.uploadAttachment(e)}),this.openBrowseWindow(e,n)}else if(!this.model.collection.socialActions.attachementsEnabled&&this.model.collection.socialActions.shortcutsEnabled){var o={"shortcutIdHolder":t("#esoc-social-reply-cs-shortcut-"+this.model.attributes.id+"-attachfiles"),"itemview":this,"attachFiles":!0};this.util.openTargetPicker(this.$el.find(".esoc-social-attachment-file"),o)}},"openBrowseWindow":function(e,t){t.val(""),t.trigger("click")},"applyReplyEmoji":function(e){if(void 0!==this.model.attributes.id){this.$el.find(".emoji-wysiwyg-editor").remove();var i=this.$el.find(".esoc-social-reply-data-textarea-"+this.model.attributes.id);i.val(i.val().replace(/&quot;/gi,'"'));var n=(i.emojiarea({"path":this.util.commonUtil.getEmojiPath(this.options.connector),"wysiwyg":!0,"button":".esoc-social-comment-emoticon-"+this.model.attributes.id,"id":"esoc-social-comment-reply-textarea-"+this.model.attributes.conversation_id,"parent":this.$el.find("#esoc-social-edit-reply-icons-"+this.model.attributes.id),"container":t("#esoc-social-comment-container"),"util":this.util,"widget":t(".esoc-social-comment-widget")}),this.$el.find(".emoji-wysiwyg-editor"));i.hide(),n.hide(),n.addClass("esoc-reply-emoji-comment").attr({"id":"esoc-social-comment-reply-list-"+this.model.attributes.id,"data-text":this.templateHelpers().messages.writeAComment});var o=n.html();o=this.util.commonUtil.onClickableUrl(o),this.$el.find(".esoc-social-reply-data").html(o),this.$el.find('[class*="esoc-social-reply-comment-data"]').html(o),n.html(n.html().replace(/\n/gi,"<br>"))}var s={"context":this.options.context,"connector":this.options.connector,"element":this.$el.find("#esoc-social-comment-reply-list-"+this.model.attributes.id),"appendToElement":this.$el.find("[id^='esoc-suggestion-reply-item_']")};this.util.triggerAutoCompleteSuggestion(s)},"onEmojiPress":function(e){
void 0!==this.model.attributes.id&&this.util.hidePopover(this.$el.find(".esoc-social-comment-emoticon-"+this.model.attributes.id)),e.stopPropagation()},"onAttachementPress":function(e){this.$el.find(".emoji-menu").hide()},"onReplyEditEmojiMentionMouseClick":function(e){this.util.setCursorPositionAtStartOFMention(e)},"inactivateUnsupportedSubType":function(e){if(e.collection&&(this.attachmentModel=this.util.commonUtil.buildNodeModel(e,this.options.connector,!0),this.options.parentCollectionView.defaultActionController&&!this.options.parentCollectionView.defaultActionController.hasAction(this.attachmentModel))){this.$el.find("#esoc-social-reply-attachment-"+this.model.attributes.id+" .esoc-social-attachment-name").addClass("esoc-social-comment-inactive"),this.$el.find("#esoc-social-reply-attachment-"+this.model.attributes.id+" .esoc-social-attachment-icon").addClass("esoc-social-comment-inactive")}}})}),csui.define("esoc/widgets/socialactions/replycollection.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","esoc/widgets/socialactions/replylist.view","csui/behaviors/default.action/default.action.behavior","esoc/widgets/socialactions/util"],function(e,t,i,n,o,s,l){return n.CollectionView.extend({"tagName":"div","className":"comments-list","childView":o,"util":l,"constructor":function(e){this.childViewOptions=e,n.CollectionView.prototype.constructor.apply(this,arguments)},"onRender":function(){this.$el.find(".esoc-social-reply-list-item").hide()},"behaviors":{"DefaultAction":{"behaviorClass":s}},"childEvents":{"click:attachment":"onClickAttachment"},"onClickAttachment":function(e){var t={"node":e.attachmentModel,"callingViewInstance":this};this.util.commonUtil.openItem(t)}})}),csui.define("hbs!esoc/widgets/socialactions/replytemplate",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <a href="javascript:void(0);" id="esoc-social-reply-attachment"\r\n             class="esoc-social-comment-attachment" data-html="true"\r\n             data-binf-placement="bottom" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachFile"):s,t))+'"></a>\r\n'},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"shortcutsEnabled"):s,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":24,"column":10},"end":{"line":28,"column":17}}}))?s:""},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <a href="javascript:void(0);" id="esoc-social-reply-attachment"\r\n               class="esoc-social-comment-attachment" data-html="true"\r\n               data-binf-placement="bottom" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachFile"):s,t))+'"></a>\r\n'},"6":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"shortcutsEnabled"):s,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(7,o,0),"loc":{"start":{"line":39,"column":4},"end":{"line":42,"column":11}}}))?s:""},"7":function(e,t,i,n,o){return'      <input type="file" id="esoc-social-reply-desktop-attachment" name="AddDesktopDoc"\r\n             style="display:none" />\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="esoc-social-reply-create-container" class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n  <div id="esoc-social-reply-warning" style="display:none"\r\n       class="binf-alert binf-alert-danger esoc-social-warning" role="alert"></div>\r\n  <div id="esoc-social-reply-form-container" class="esoc-social-reply-form-container">\r\n    <div class="esoc-social-reply-form-mask"></div>\r\n    <div id="esoc-social-reply-input-holder" class="esoc-social-reply-input-holder">\r\n        <div class="esoc-socialactions-widget-arrow-up"></div>\r\n        <div class="esoc-social-reply-data" style="display:none"></div>\r\n        <textarea id="esoc-social-reply-input-'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"replyId"):s,t))+'" class="esoc-social-reply-input binf-form-control"\r\n                  placeholder="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"writeAComment"):s,t))+'"></textarea>\r\n        <div id="esoc-suggestion-reply-header_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"replyId"):s,t))+'"\r\n             class="esoc-suggestion-reply-header"></div>\r\n    </div>\r\n\r\n    <div id="esoc-social-reply-form-buttons-container"\r\n         class="esoc-social-reply-form-buttons-container">\r\n      <div id="esoc-social-textinput-button-holder-reply"\r\n           class="esoc-social-textinput-button-holder-reply">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachementsEnabled"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":19,"column":8},"end":{"line":29,"column":15}}}))?s:"")+'        <a href="javascript:void(0);"\r\n           class="esoc-social-reply-emoticon-'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"replyId"):s,t))+' esoc-social-comment-emoticon"\r\n           id="esoc-social-reply-comment-emoticon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"emoticon"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"emoticon"):s,t))+'"></a>\r\n        <button id="esoc-social-reply-submit" disabled class="binf-btn binf-btn-primary esoc-social-reply-submit"\r\n                type="submit" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"post"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"post"):s,t))+"</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachementsEnabled"):s,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":38,"column":2},"end":{"line":43,"column":9}}}))?s:"")+'  <input type="hidden" id="esoc-social-reply-cs-shortcut" value="" />\r\n\r\n  <div id="esoc-social-comment-body-divider"></div>\r\n  <div id="esoc-social-reply-container" class="binf-container esoc-social-reply-container"></div>\r\n</div>\r\n'}});return i.registerPartial("esoc_widgets_socialactions_replytemplate",n),n}),csui.define("esoc/widgets/socialactions/replyheader.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/lib/handlebars","csui/utils/base","csui/utils/contexts/factories/connector","esoc/widgets/socialactions/reply.model","esoc/widgets/socialactions/util","hbs!esoc/widgets/socialactions/replytemplate","i18n!esoc/widgets/socialactions/nls/lang"],function(e,t,i,n,o,s,l,a,r,c,d){var u=null;return n.ItemView.extend({"initialize":function(e){this.options=e,this.options.connector=this.options.connector||this.options.context.getObject(l),u=this},"options":{},"base":s,"util":r,"_elements":{"csuiSocialReplyInput":null,"csuiSocialReplyInputHolder":null,"csuiSocialReplySubmitButton":null,"csuiSocialButtonsContainer":null,"csuiSocialFormContainer":null,"csuiSocialFormWarning":null,"csuiSocialReplyHiddenData":null,"csuiSocialReplyAttachmentPopupContent":null,"csuiSocialReplyAttachmentPopupTitle":null,"csuiSocialReplyShortcut":null},"tagName":"div","template":c,"templateHelpers":function(){var i={"post":d.post,"posting":d.posting,"writeAComment":d.writeAComment,"attachFile":d.attachFile,"replyId":this.options.item_id,"emoticon":d.emoticon};return this.uniqueId=t.uniqueId(),i=e.extend(this.options.socialActions,i),{"messages":i}},"events":{"click #esoc-social-reply-submit":"onReplyFormSubmit","focus .esoc-reply-emoji":"onReplyFormFocus","click .esoc-reply-emoji":"onReplyInputFocus","input .esoc-reply-emoji":"onReplyFormKeypress","click #esoc-social-reply-comment-emoticon":"onEmojiPress","click .esoc-social-comment-attachment":"onAttachementPress","keyup .esoc-reply-emoji":"onReplyFormKeypress","change .esoc-social-reply-input":"onReplyFormKeypress","mousedown .esoc-reply-emoji .esoc-user-mention":"onReplyEmojiMentionMouseClick"},"onRender":function(t){this._elements.csuiSocialReplyInput=this.$el.find("#esoc-social-reply-input-"+this.options.item_id),this._elements.csuiSocialEmojiInput=this.$el.find(".esoc-reply-emoji"),this._elements.csuiSocialReplyInputHolder=this.$el.find("#esoc-social-reply-input-holder"),this._elements.csuiSocialReplySubmitButton=this.$el.find("#esoc-social-reply-submit"),this._elements.csuiSocialButtonsContainer=this.$el.find("#esoc-social-textinput-button-holder-reply"),this._elements.csuiSocialFormContainer=this.$el.find("#esoc-social-reply-form-container"),this._elements.csuiSocialFormWarning=this.$el.find(".esoc-social-warning"),this._elements.csuiSocialReplyHiddenData=this.$el.find(".esoc-social-reply-data"),this._elements.csuiSocialReplyShortcut=this.$el.find("#esoc-social-reply-cs-shortcut"),this._elements.csuiSocialReplyAttachmentName=this.$el.find("#esoc-social-reply-attachment-name"),this._elements.csuiSocialReplyAttachmentSize=this.$el.find("#esoc-social-reply-attachment-size"),this._elements.csuiSocialReplyAttachmentIcon=this.$el.find("#esoc-social-reply-attachment"),this._elements.csuiSocialReplyAttachmentPopupTitle=this.$el.find("#esoc-social-reply-selected-attachment-dialog-title"),this._elements.csuiSocialReplyAttachmentPopupContent=this.$el.find("#esoc-social-reply-selected-attachment-dialog"),this.options.canReply?this._elements.csuiSocialFormContainer.show():this._elements.csuiSocialFormContainer.hide(),this._elements.csuiSocialReplySubmitButton.hide();var i={"socialActions":this.options.socialActions,"id":"reply","uniqueId":this.uniqueId,"desktopAttachmentInputId":"esoc-social-reply-desktop-attachment","shortcutIdHolder":this._elements.csuiSocialReplyShortcut,"connector":this.options.connector};this.util.showAttachmentPopOver(this._elements.csuiSocialReplyAttachmentIcon,i),this._elements.csuiSocialReplyAttachmentIcon.attr("title",d.attachFile),e(".esoc-social-comment-widget").off("mousedown touchstart").on("mousedown touchstart",function(e){u.onCommentDialogClick(e)}),this.onReplyFormBlur()},"onShow":function(t){this.applyemoji(t),e("[id^='esoc-social-comment-widget-pointer']").on("click",function(e){u.onCommentDialogClick(e)});var i=this;e("#esoc-social-comment-reply-header").on("paste",function(t){var n=i.util.commonUtil.globalConstants.MAX_CHAR_LIMIT,o=e("#esoc-social-reply-input-"+i.options.conversation_id).val().length;i.util.commonUtil.onCommentFormPaste(t,o,n),e("#esoc-social-reply-input-"+i.options.conversation_id).innerHTML=e("#esoc-social-comment-reply-header").html(),i.onReplyFormKeypress(t)}),e("#esoc-social-comment-reply-header").on("mouseleave",function(e){u.onCommentFormMouseLeave(e)}),this.util.commonUtil.preventDrop(e(".esoc-reply-emoji"))},"onCommentDialogClick":function(t){"esoc-social-comment-reply-header"===t.target.id||"esoc-social-reply-comment-emoticon"===t.target.id||"esoc-social-reply-attachment"===t.target.id||"esoc-social-reply-desktop-attachment"===t.target.id||e(t.target).parents("#esoc-social-comment-reply-header").length>0||e(t.target).closest(".binf-popover").length>0||"esoc-social-reply-submit"===t.target.id||this.onReplyFormBlur()},"onCommentFormMouseLeave":function(e){this.$el.find("#esoc-social-reply-input-"+this.options.item_id)[0].innerHTML=this.$el.find("#esoc-social-reply-input-"+this.options.item_id).val()},"onReplyInputFocus":function(e){this.$el.find(".esoc-reply-emoji").trigger("focus")},"onReplyFormFocus":function(e){var t=this._elements.csuiSocialReplyInput.val().trim();void 0!==t&&""!==t?this.$el.find("#esoc-social-reply-submit").prop("disabled",!1):this.$el.find("#esoc-social-reply-submit").prop("disabled",!0),e.stopPropagation(),e.preventDefault(),this.$el.find(".esoc-reply-emoji").addClass("emoji-wysiwyg-editor-focus"),this._elements.csuiSocialButtonsContainer.css({"display":"block"}),this.util.commonUtil.isIE()&&this.$el.find(".esoc-reply-emoji").length>0&&0===this.$el.find(".esoc-reply-emoji")[0].textContent.length&&this.$el.find(".esoc-reply-emoji").attr("data-text",""),this._elements.csuiSocialButtonsContainer.animate({"opacity":1},0),this._elements.csuiSocialReplySubmitButton.show(),this.options.socialActions.attachementsEnabled||this.options.socialActions.shortcutsEnabled||(this._elements.csuiSocialButtonsContainer.addClass("esoc-social-icon-when-no-attachment"),this._elements.csuiSocialReplyHiddenData.addClass("esoc-social-input-when-no-attachment"),this.$el.find(".esoc-reply-emoji").addClass("esoc-social-input-when-no-attachment"));var i=""===this.$el.find(".esoc-reply-emoji").html()||"<br>"===this.$el.find(".esoc-reply-emoji").html();this.adjustCommentAreaWidth(e,i),this.$el.find(".esoc-social-attachment-popover").is(":visible")&&this._elements.csuiSocialReplyAttachmentIcon.binf_popover("hide")},"adjustCommentAreaWidth":function(e,t){var i=this.$el.find(".esoc-reply-emoji");t&&(i.css("width",""),i.width(this.$el.find(".esoc-reply-emoji").width()-parseInt(this.$el.find("#esoc-social-reply-submit").outerWidth()-57,10)),this.$el.find(".esoc-suggestion-reply-header").width(i.outerWidth()))},"onReplyFormBlur":function(t){if(!this.$el.find(".esoc-social-comment-form-mask").is(":visible")){var i,n,o=this.$el.find("#esoc-social-reply-input-"+this.options.item_id).val(),s=this.$el.find(".esoc-reply-emoji").html(),l=this.$el.find("#esoc-social-reply-desktop-attachment");l.length>0&&l[0].files&&l[0].files.length>0&&(i=l[0].files[0]),this._elements.csuiSocialReplyShortcut.val().length>0&&(n=parseInt(this._elements.csuiSocialReplyShortcut.val(),10)),void 0!==o&&""!==o||void 0!==i&&""!==i||void 0!==n||void 0!==s&&""!==s&&"<br>"!==s||(this._elements.csuiSocialReplySubmitButton.hide(),this._elements.csuiSocialButtonsContainer.hide(),this._elements.csuiSocialButtonsContainer.animate({"opacity":0},0,function(){e(this).css({"display":"none"})}),e("#esoc-social-comment-reply-header").removeClass("emoji-wysiwyg-editor-focus").trigger("blur"),this.util.commonUtil.isIE()&&this.$el.find(".esoc-reply-emoji").length>0&&0===this.$el.find(".esoc-reply-emoji")[0].textContent.length&&e(".esoc-reply-emoji").attr("data-text",this.templateHelpers().messages.writeAComment),this._elements.csuiSocialReplyAttachmentIcon.attr("data-binf-original-title")&&this._elements.csuiSocialReplyAttachmentIcon.attr("data-binf-original-title").length>0&&this.util.hideAttachmentPopup(this._elements.csuiSocialReplyAttachmentIcon,this.$el.find("#esoc-social-reply-desktop-attachment"),this.options.socialActions),this.options.socialActions.attachementsEnabled||this.options.socialActions.shortcutsEnabled||(this._elements.csuiSocialButtonsContainer.removeClass("esoc-social-icon-when-no-attachment"),this._elements.csuiSocialReplyHiddenData.removeClass("esoc-social-input-when-no-attachment"),this.$el.find(".esoc-reply-emoji").removeClass("esoc-social-input-when-no-attachment")));var a=e("#esoc-social-comment-container").find(".esoc-social-comment-list-item");a.length<=1&&e(a).removeClass("").removeClass("esoc-attachment-init-min-height esoc-emoji-init-min-height")}},"onReplyFormKeypress":function(e){var t=this._elements.csuiSocialReplyInput.val().trim();void 0!==t&&""!==t?this.$el.find("#esoc-social-reply-submit").prop("disabled",!1):this.$el.find("#esoc-social-reply-submit").prop("disabled",!0),this.util.onMentionNameEdit(e);var i=this.$el.find("#esoc-social-reply-input-"+this.options.item_id),n=i.val(),o=this.util.commonUtil.globalConstants.MAX_CHAR_LIMIT,s=e||window.event;if(n.length>o){var l=n.substr(0,o);i.val(l),this.$el.find("#esoc-social-comment-reply-header").html("")[0].textContent=l,this.util.commonUtil.addEmoji(this.$el.find("#esoc-social-comment-reply-header"),!1,this.options.model.connector),this.util.commonUtil.placeCaretAtEnd(this.$el.find("#esoc-social-comment-reply-header")),s.preventDefault()}},"onReplyFormSubmit":function(e){e.stopPropagation(),e.preventDefault(),this._elements.csuiSocialReplyAttachmentIcon.binf_popover("hide");var i,n,o=this._elements.csuiSocialReplyInput.val().trim(),s=new FormData,l=this.$el.find("#esoc-social-reply-desktop-attachment"),r={};l.length>0&&(i=l[0].files[0]),this._elements.csuiSocialReplyShortcut.val().length>0&&(n=parseInt(this._elements.csuiSocialReplyShortcut.val(),10)),o.length&&(this.$el.find(".esoc-social-reply-form-mask").show(),this.$el.find("#esoc-social-reply-submit").html(d.posting),this.adjustCommentAreaWidth(e,!0),this.util.showMask(this.$el.find(".esoc-social-reply-form-mask")),this._elements.csuiSocialReplyInput.val(""),n?r.ATT_ID=n:i&&(r.AddDesktopDoc=i),r.status=o,r.eventtype=1,r.in_reply_to_status_id=this.options.item_id,t.each(r,function(e,t){s.append(t,e)}),new a({},{"connector":this.model.connector}).save({},{"wait":!0,"dataType":"text","data":s,"jsonFormData":r,"parentCommentModel":this.model.options.parentCommentModel,"success":this.onReplySubmitSuccess,"error":this.onReplySubmitFailure.bind(this,l)})),void 0===o||""===o?this.$el.find("#esoc-social-comment-reply-header").trigger("focus"):(this.util.resetAttachmentInput(l,this.options.socialActions),this._elements.csuiSocialReplyShortcut.val(""))},"removeMask":function(e){u.$el.find("#esoc-social-reply-submit").html(d.post),u.adjustCommentAreaWidth(e,!0),u.util.hideMask(u.$el.find(".esoc-social-reply-form-mask")),u.$el.find(".esoc-social-reply-form-mask").hide()},"onReplySubmitFailure":function(t,i,n,o){this.util.resetAttachmentInput(t,this.options.socialActions),this._elements.csuiSocialReplyShortcut.val(""),this._elements.csuiSocialEmojiInput.html(""),this.removeMask(),e('textarea[id^="esoc-social-reply-input-"]').val("");var s={"parent":".esoc-social-comment-widget","errorContent":n.responseJSON?n.responseJSON.errorDetail?n.responseJSON.errorDetail:n.responseJSON.error:d.defaultErrorMessageForReply};this.util.commonUtil.openErrorDialog(s)},"onReplySubmitSuccess":function(e,t,i){u.options.commentAction=!0,u.$el.find(".esoc-reply-emoji")[0].textContent="",u.removeMask(),u.util.resetAttachmentInput(u.$el.find("#esoc-social-reply-desktop-attachment"),u.options.socialActions),u._elements.csuiSocialReplyShortcut.val(""),u._elements.csuiSocialReplyAttachmentIcon.binf_popover("hide"),u.$el.find('textarea[id^="esoc-social-reply-input-"]').text("").height("").trigger("blur"),u.$el.find("#esoc-social-reply-form-container").height(""),u.$el.find("#esoc-social-reply-warning").hide(),u.$el.find(".esoc-reply-emoji").html("").trigger("blur"),setTimeout(function(){u.onReplyFormBlur()},0);var n=u.model;if(delete n.defaults.params[u.util.commonUtil.globalConstants.MAX_ID],n.length>0){var o=n.at(0).id;n.fetch({"remove":!1,"params":{"since_id":o},"at":0})}else n.fetch({});setTimeout(function(){u.$el.find("#esoc-social-comment-reply-header").trigger("focus")},200),u.$el.find("#esoc-social-reply-submit").attr("disabled",!0)},"applyemoji":function(t){if(void 0!==this.options.item_id){this.$el.find(".emoji-wysiwyg-editor").remove();var i=this.$el.find("#esoc-social-reply-input-"+this.options.item_id);i.val(i.val().replace(/&quot;/gi,'"'));var n=(i.emojiarea({"path":this.util.commonUtil.getEmojiPath(this.options.model.connector),"wysiwyg":!0,"button":".esoc-social-reply-emoticon-"+this.options.item_id,"id":"esoc-social-comment-reply-textarea-"+this.options.item_id,"parent":this.$el.find("#esoc-social-textinput-button-holder-reply"),"container":e("#esoc-social-comment-container"),"util":this.util,"widget":e(".esoc-social-comment-widget")}),this.$el.find(".emoji-wysiwyg-editor"));n.addClass("esoc-reply-emoji").attr({"id":"esoc-social-comment-reply-header","data-text":this.templateHelpers().messages.writeAComment}),i.hide(),n.show()}this.listenToOnce(this.model,"sync",function(){var e={"context":this.options.context,"connector":this.options.connector,"element":this.$el.find("#esoc-social-comment-reply-header"),"appendToElement":this.$el.find("[id^='esoc-suggestion-reply-header_']")};this.util.triggerAutoCompleteSuggestion(e),this.$el.find(".emoji-wysiwyg-editor").removeAttr("autocomplete")})},"onEmojiPress":function(t){var i=e("#esoc-social-comment-container").find(".esoc-social-comment-list-item");i.length<=1&&e(i).removeClass("esoc-attachment-init-min-height").addClass("esoc-emoji-init-min-height"),void 0!==this.options.item_id&&this.util.hidePopover(this.$el.find(".esoc-social-reply-emoticon-"+this.options.item_id)),t.stopPropagation()},"onAttachementPress":function(t){var i=e("#esoc-social-comment-container").find(".esoc-social-comment-list-item");i.length<=1&&e(i).removeClass("esoc-emoji-init-min-height").addClass("esoc-attachment-init-min-height"),this.$el.find(".emoji-menu").hide()},"onReplyEmojiMentionMouseClick":function(e){this.util.setCursorPositionAtStartOFMention(e)}})}),csui.define("esoc/widgets/socialactions/replycollectionbase",["csui/lib/marionette","csui/lib/jquery","csui/utils/connector","esoc/widgets/socialactions/replycollection.model","esoc/widgets/socialactions/replycollection.view","esoc/widgets/socialactions/replyheader.view"],function(e,t,i,n,o,s){function l(i){var l=t(i.parentNode),a=new n(i);i.model=a,a.socialActions=i.socialActions,a.options=i,new e.Region({"el":i.parentNode}).show(new s(i));var r=new e.Region({"el":"#esoc-social-reply-container"}),c=new o({"context":a.options.context,"collection":a,"parentCollectionView":i.parentCollectionView,"commentConfigOptions":i,"sort":!0});r.show(c),i.success=a.fetchSuccess,i.error=a.fetchError,a.fetch(i),l.css({"display":"block"}),l.animate({"opacity":1}),this.getConfig=function(){return i}}return l}),csui.define("hbs!esoc/widgets/socialactions/comment",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="esoc-social-comment-timestamp">\r\n              <span class="esoc-social-comment-timestamp-ago"></span>\r\n              <span class="esoc-social-comment-blue">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"modifiedAt"):s,t))+'</span>\r\n              <span class="esoc-social-timestamp-text">'+e.escapeExpression((l=null!=(l=a(i,"modified_at_iso8601")||(null!=t?a(t,"modified_at_iso8601"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"modified_at_iso8601","hash":{},"loc":{"start":{"line":20,"column":55},"end":{"line":20,"column":78}}}):l))+"</span>\r\n            </span>\r\n"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span\r\n                class="esoc-social-comment-timestamp esoc-social-timestamp-text">'+e.escapeExpression((s=null!=(s=l(i,"created_at_iso8601")||(null!=t?l(t,"created_at_iso8601"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"created_at_iso8601","hash":{},"loc":{"start":{"line":24,"column":81},"end":{"line":24,"column":103}}}):s))+"</span>\r\n"},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <a href="javascript:void(0);"\r\n               class="esoc-social-comment-button esoc-social-comment-icon-edit"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"edit"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"edit"):s,t))+'"></a>\r\n'},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="esoc-social-comment-icon-spacer"></div>\r\n            <a href="javascript:void(0);"\r\n               class="esoc-social-comment-button esoc-social-comment-delete-confirm esoc-social-comment-icon-delete"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"deleteComment"):s,t))+'" data-binf-toggle="modal"\r\n               data-binf-target="#esoc-social-dialog" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"deleteComment"):s,t))+'"></a>\r\n'},"9":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="esoc-social-comment-icon-spacer"></div>\r\n            <a href="javascript:void(0);"\r\n               class="esoc-social-comment-button esoc-social-comment-icon-hide"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"hide"):s,t))+'"></a>\r\n'},"11":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-social-comment-data binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"\r\n           data-id="'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":59,"column":20},"end":{"line":59,"column":26}}}):l))+'">\r\n        <span class="esoc-social-text esoc-comment-valign">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"textmsg"):s,t))+"</span>\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(12,o,0),"inverse":e.noop,"loc":{"start":{"line":61,"column":8},"end":{"line":66,"column":16}}}))?s:"")+'\r\n        <span class="esoc-object-name esoc-comment-valign" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"name"):s,t))+'">\r\n'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.subtype != this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(14,o,0),"inverse":e.noop,"loc":{"start":{"line":69,"column":10},"end":{"line":72,"column":18}}}))?s:"")+"          "+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"name"):s,t))+'\r\n        </span>\r\n      </div>\r\n      <div class="esoc-extended-view-mode">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"sgm_description"):s,{"name":"if","hash":{},"fn":e.program(16,o,0),"inverse":e.noop,"loc":{"start":{"line":77,"column":8},"end":{"line":81,"column":15}}}))?s:"")+'        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'"\r\n           class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'">\r\n          <span class="icon-arrow-down"></span></a>\r\n        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'"\r\n           class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'">\r\n          <span class="icon-arrow-up"></span></a>\r\n      </div>\r\n\r\n      <div class="binf-alert binf-alert-danger binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-social-warning"\r\n           role="alert"></div>\r\n'},"12":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="esoc-social-mime-icon esoc-comment-valign csui-icon-group">\r\n            <span class="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" />\r\n            <a href="javascript:void(0);" class="csui-icon csui-icon-shortcut-overlay"></a>\r\n          </span>\r\n'},"14":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="esoc-social-mime-icon esoc-comment-valign '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'"\r\n                  title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></span>\r\n'},"16":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="esoc-social-comment-data">\r\n            <div class="esoc-description">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"sgm_description"):s,t))+"</div>\r\n          </div>\r\n"},"18":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 8",{"name":"xif","hash":{},"fn":e.program(19,o,0),"inverse":e.program(21,o,0),"loc":{"start":{"line":92,"column":4},"end":{"line":151,"column":4}}}))?s:""},"19":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-social-comment-data binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"\r\n           data-id="'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":94,"column":20},"end":{"line":94,"column":26}}}):l))+'">\r\n        <span class="esoc-social-text esoc-comment-valign">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"textmsg"):s,t))+'</span>\r\n        <span class="esoc-object-name esoc-comment-valign" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"name"):s,t))+'">\r\n          <span class="esoc-social-mime-icon esoc-comment-valign '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"mimeTypeClass"):s,t))+'"\r\n                title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"name"):s,t))+'"></span>\r\n          '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"name"):s,t))+'\r\n        </span>\r\n        <span class="esoc-social-version esoc-comment-valign">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"version"):s,t))+'</span>\r\n        <span class="esoc-version-number esoc-comment-valign">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"version_name"):s,t))+'</span>\r\n      </div>\r\n      <div class="esoc-extended-view-mode">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"sgm_description"):s,{"name":"if","hash":{},"fn":e.program(16,o,0),"inverse":e.noop,"loc":{"start":{"line":105,"column":8},"end":{"line":109,"column":15}}
}))?s:"")+'        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'"\r\n           class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'">\r\n          <span class="icon-arrow-down"></span></a>\r\n        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'"\r\n           class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'">\r\n          <span class="icon-arrow-up"></span></a>\r\n      </div>\r\n      <div class="binf-alert binf-alert-danger binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-social-warning"\r\n           role="alert"></div>\r\n'},"21":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 9",{"name":"xif","hash":{},"fn":e.program(22,o,0),"inverse":e.program(24,o,0),"loc":{"start":{"line":119,"column":4},"end":{"line":151,"column":4}}}))?s:""},"22":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-extended-view-mode">\r\n        <div class="esoc-social-comment-data binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"\r\n             data-id="'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":122,"column":22},"end":{"line":122,"column":28}}}):l))+'"></div>\r\n        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'"\r\n           class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'">\r\n          <span class="icon-arrow-down"></span></a>\r\n        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'"\r\n           class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'">\r\n          <span class="icon-arrow-up"></span></a>\r\n      </div>\r\n      <div class="binf-alert binf-alert-danger binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-social-warning"\r\n           role="alert"></div>\r\n'},"24":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-extended-view-mode">\r\n        <div\r\n            class="esoc-social-comment-data esoc-social-comment-text binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"\r\n            data-id="'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":136,"column":21},"end":{"line":136,"column":27}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"text")||(null!=t?a(t,"text"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"text","hash":{},"loc":{"start":{"line":136,"column":29},"end":{"line":136,"column":37}}}):l))+'</div>\r\n        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'"\r\n           class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'">\r\n          <span class="icon-arrow-down"></span></a>\r\n        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'"\r\n           class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'">\r\n          <span class="icon-arrow-up"></span></a>\r\n      </div>\r\n      <div class="binf-alert binf-alert-danger binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-social-warning"\r\n           role="alert"></div>\r\n      <div id="esoc-social-comment-input-holder-'+e.escapeExpression((l=null!=(l=a(i,"uniqueId")||(null!=t?a(t,"uniqueId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"uniqueId","hash":{},"loc":{"start":{"line":146,"column":48},"end":{"line":146,"column":60}}}):l))+'" class="esoc-social-comment-input-holder\r\n      binf-col-lg-8 binf-col-md-8 binf-col-sm-7 binf-col-xs-5">\r\n        <textarea class="esoc-social-comment-data-textarea esoc-social-comment-data-textarea-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":148,"column":93},"end":{"line":148,"column":99}}}):l))+'"\r\n                  placeholder="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"writeAComment"):s,t))+'" aria-label="'+e.escapeExpression((l=null!=(l=a(i,"text")||(null!=t?a(t,"text"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"text","hash":{},"loc":{"start":{"line":149,"column":71},"end":{"line":149,"column":79}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"text")||(null!=t?a(t,"text"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"text","hash":{},"loc":{"start":{"line":149,"column":81},"end":{"line":149,"column":89}}}):l))+"</textarea>\r\n      </div>\r\n    "},"26":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(27,o,0),"inverse":e.program(30,o,0),"loc":{"start":{"line":165,"column":6},"end":{"line":205,"column":14}}}))?s:""},"27":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div id="esoc-social-comment-attachment-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":166,"column":48},"end":{"line":166,"column":54}}}):l))+'"\r\n             class="binf-col-lg-7 binf-col-md-7 binf-col-sm-9 binf-col-xs-9 esoc-social-attachment">\r\n          <span class="csui-icon-group esoc-social-attachment-icon"\r\n                title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_name"):s,t))+'">\r\n            <span id="esoc-social-selected-file-icon-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":170,"column":53},"end":{"line":170,"column":59}}}):l))+'" class="binf-col-lg-2 binf-col-md-2 binf-col-sm-2 binf-col-xs-2\r\n                  '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"mimeTypeClass"):s,t))+'"></span>\r\n            <a href="javascript:void(0);" class="csui-icon csui-icon-shortcut-overlay"></a>\r\n          </span>\r\n\r\n          <div class="binf-col-lg-9 binf-col-md-9 binf-col-sm-9 binf-col-xs-9 esoc-social-attachment-name">\r\n            <a href="javascript:void(0);" class="esoc-social-attachment-download"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_name"):s,t))+"</a>\r\n          </div>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"actions"):t)?a(s,"addshortcut"):s,{"name":"if","hash":{},"fn":e.program(28,o,0),"inverse":e.noop,"loc":{"start":{"line":179,"column":10},"end":{"line":184,"column":17}}}))?s:"")+"        </div>\r\n"},"28":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <a href="javascript:void(0);" id="esoc-social-attachment-icon-delete-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":180,"column":81},"end":{"line":180,"column":87}}}):l))+'"\r\n               class="binf-col-lg-1 binf-col-md-1 binf-col-sm-1 binf-col-xs-1 comment esoc-social-attachment-icon-delete"\r\n               data-binf-toggle="modal" data-binf-target="#esoc-social-dialog"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"deleteComment"):s,t))+'"></a>\r\n'},"30":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages.documentAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(31,o,0),"inverse":e.noop,"loc":{"start":{"line":186,"column":6},"end":{"line":205,"column":6}}}))?s:""},"31":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div id="esoc-social-comment-attachment-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":187,"column":48},"end":{"line":187,"column":54}}}):l))+'"\r\n             class="binf-col-lg-7 binf-col-md-7 binf-col-sm-9 binf-col-xs-9 esoc-social-attachment">\r\n          <a href="javascript:void(0);" class="binf-col-lg-2 binf-col-md-2 binf-col-sm-2 binf-col-xs-2 esoc-social-attachment-icon\r\n             '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_name"):s,t))+'"></a>\r\n\r\n          <div class="binf-col-lg-7 binf-col-md-7 binf-col-sm-7 binf-col-xs-7 esoc-social-attachment-name">\r\n            <a href="javascript:void(0);" class="esoc-social-attachment-download"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_name"):s,t))+'</a>\r\n          </div>\r\n          <div\r\n              class="binf-col-lg-2 binf-col-md-2 binf-col-sm-2 binf-col-xs-2 esoc-social-attachment-size">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_size"):s,t))+"</div>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"actions"):t)?a(s,"addattachment"):s,{"name":"if","hash":{},"fn":e.program(28,o,0),"inverse":e.noop,"loc":{"start":{"line":198,"column":10},"end":{"line":203,"column":17}}}))?s:"")+"        </div>\r\n      "},"33":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span class="esoc-comment-reply">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"reply_count"):t,{"name":"if","hash":{},"fn":e.program(34,o,0),"inverse":e.program(37,o,0),"loc":{"start":{"line":211,"column":10},"end":{"line":227,"column":17}}}))?s:"")+"        </span>\r\n"},"34":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <a id="reply_link_'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":212,"column":30},"end":{"line":212,"column":36}}}):l))+'" class="esoc-reply_link" href="javascript:void(0)">\r\n              '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"reply"):s,t))+'\r\n              <span id="reply_link_count_'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":214,"column":41},"end":{"line":214,"column":47}}}):l))+'">('+e.escapeExpression((l=null!=(l=a(i,"reply_count")||(null!=t?a(t,"reply_count"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"reply_count","hash":{},"loc":{"start":{"line":214,"column":50},"end":{"line":214,"column":65}}}):l))+")</span>\r\n            </a>\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_id == '' && (this.actions.addattachment || this.actions.addshortcut)",{"name":"xif","hash":{},"fn":e.program(35,o,0),"inverse":e.noop,"loc":{"start":{"line":216,"column":12},"end":{"line":218,"column":20}}}))?s:"")},"35":function(e,t,i,n,o){return'              <span class="item-separator">|</span>\r\n'},"37":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=(s=null!=t?l(t,"actions"):t)?l(s,"reply"):s)?l(s,"can_reply"):s,{"name":"if","hash":{},"fn":e.program(38,o,0),"inverse":e.noop,"loc":{"start":{"line":220,"column":12},"end":{"line":226,"column":19}}}))?s:""},"38":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <a id="reply_link_'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":221,"column":32},"end":{"line":221,"column":38}}}):l))+'" class="esoc-reply_link"\r\n                 href="javascript:void(0)"> '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"reply"):s,t))+" </a>\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_id == '' && (this.actions.addattachment || this.actions.addshortcut)",{"name":"xif","hash":{},"fn":e.program(39,o,0),"inverse":e.noop,"loc":{"start":{"line":223,"column":14},"end":{"line":225,"column":22}}}))?s:"")},"39":function(e,t,i,n,o){return'                <span class="item-separator">|</span>\r\n'},"41":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <a class="comment esoc-social-attachment-file '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentPositionClass"):s,t))+'"\r\n             href="javascript:void(0)" data-html="true"\r\n             data-binf-placement="bottom"> '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachFile"):s,t))+" </a>\r\n"},"43":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <input type="file" id="esoc-social-commentedit-desktop-attachment-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":240,"column":72},"end":{"line":240,"column":78}}}):s))+'" name="AddDesktopDoc"\r\n             style="display:none" />\r\n      <input type="file" id="esoc-social-commentlist-desktop-attachment-'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":242,"column":72},"end":{"line":242,"column":78}}}):s))+'" name="AddDesktopDoc"\r\n             style="display:none" />\r\n'},"45":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div id="'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":263,"column":11},"end":{"line":263,"column":17}}}):s))+'" class="esoc-social-comment-load-more"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-social-comment-body-divider"></div>\r\n<div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-comment-list-divider"></div>\r\n<div class="esoc-profileimg-block">\r\n  <span class="esoc-userprofile-img">\r\n    <img class="esoc-userprofile-img-'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"user"):t)?a(s,"id"):s,t))+' binf-img-circle" src="" />\r\n  </span>\r\n</div>\r\n\r\n<div class="esoc-commentinfo-block-wrapper binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n\r\n  <div class="esoc-commentinfo-block binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <div class="esoc-social-comment-details">\r\n      <div class="esoc-social-comment-user-details binf-col-lg-10 binf-col-md-10 binf-col-sm-10 binf-col-xs-10">\r\n        <span class="esoc-user-widget"></span>\r\n        <span class="esoc-social-timestamp">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"modified_at_iso8601"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":16,"column":10},"end":{"line":25,"column":17}}}))?s:"")+'        </span>\r\n      </div>\r\n      <div class="esoc-social-comment-icon-holder binf-col-lg-2 binf-col-md-2 binf-col-sm-2 binf-col-xs-2">\r\n        <div class="esoc-social-comment-icon-holder esoc-social-comment-icon-holder-inner">\r\n\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"actions"):t)?a(s,"edit"):s,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":31,"column":10},"end":{"line":35,"column":17}}}))?s:"")+"\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.messages.feedEventType != 1 && this.actions.deleteAction",{"name":"xif","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":37,"column":10},"end":{"line":43,"column":18}}}))?s:"")+"\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"actions"):t)?a(s,"hide"):s,{"name":"if","hash":{},"fn":e.program(9,o,0),"inverse":e.noop,"loc":{"start":{"line":45,"column":10},"end":{"line":50,"column":17}}}))?s:"")+'        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 7",{"name":"xif","hash":{},"fn":e.program(11,o,0),"inverse":e.program(18,o,0),"loc":{"start":{"line":57,"column":4},"end":{"line":151,"column":12}}}))?s:"")+'    <div class="esoc-social-icons-container binf-col-lg-4 binf-col-md-4 binf-col-sm-5 binf-col-xs-7">\r\n      <div class="esoc-social-edit-icons" id="esoc-social-edit-comment-icons-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":153,"column":77},"end":{"line":153,"column":83}}}):l))+'">\r\n        <a href="javascript:void(0);" id="esoc-social-comment-edit-attachment-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":154,"column":78},"end":{"line":154,"column":84}}}):l))+'"\r\n           class="esoc-social-comment-attachment" data-html="true" data-binf-placement="bottom" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"editAttachment"):s,t))+'"\r\n        ></a>\r\n        <a href="javascript:void(0);"\r\n           class="esoc-social-comment-emoticon esoc-social-comment-emotion-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":158,"column":75},"end":{"line":158,"column":81}}}):l))+'"\r\n           id="esoc-social-comment-emoticon-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":159,"column":44},"end":{"line":159,"column":50}}}):l))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"emoticon"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"emoticon"):s,t))+'"></a>\r\n      </div>\r\n    </div>\r\n    <div id="esoc-suggestion-comment-list_'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":162,"column":42},"end":{"line":162,"column":48}}}):l))+'"></div>\r\n\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"extended_info"):t)?a(s,"attachment_id"):s,{"name":"if","hash":{},"fn":e.program(26,o,0),"inverse":e.noop,"loc":{"start":{"line":164,"column":4},"end":{"line":206,"column":11}}}))?s:"")+'\r\n    <div class="esoc-social-comment-list-actions binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.messages.feedEventType != 1 && this.messages.feedEventType != 2",{"name":"xif","hash":{},"fn":e.program(33,o,0),"inverse":e.noop,"loc":{"start":{"line":209,"column":6},"end":{"line":229,"column":14}}}))?s:"")+'\r\n      <span class="esoc-comment-attachment">\r\n'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_id == '' && (this.actions.addattachment || this.actions.addshortcut)",{"name":"xif","hash":{},"fn":e.program(41,o,0),"inverse":e.noop,"loc":{"start":{"line":232,"column":8},"end":{"line":236,"column":16}}}))?s:"")+"      </span>\r\n    </div>\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.actions.addattachment && !this.actions.addshortcut",{"name":"xif","hash":{},"fn":e.program(43,o,0),"inverse":e.noop,"loc":{"start":{"line":239,"column":4},"end":{"line":244,"column":12}}}))?s:"")+'    <input type="hidden" id="esoc-social-comment-cs-shortcut-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":245,"column":61},"end":{"line":245,"column":67}}}):l))+'-attachfiles" value="" />\r\n    <input type="hidden" id="esoc-social-comment-cs-shortcut-edit-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":246,"column":66},"end":{"line":246,"column":72}}}):l))+'" value="" />\r\n\r\n    <div id="reply_'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":248,"column":19},"end":{"line":248,"column":27}}}):l))+'" data-id="'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":248,"column":38},"end":{"line":248,"column":46}}}):l))+'"\r\n         class="reply-thread-list binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n\r\n    <div class="esoc-social-comment-list-update binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      <button class="esoc-social-comment-update binf-btn binf-btn-primary" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"update"):s,t))+'">\r\n        '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"update"):s,t))+'\r\n      </button>\r\n      <button class="esoc-social-comment-cancel binf-btn binf-btn-default" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"cancel"):s,t))+'">\r\n        '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"cancel"):s,t))+'\r\n      </button>\r\n      <span class="esoc-social-comment-hidden-text">'+e.escapeExpression((l=null!=(l=a(i,"text")||(null!=t?a(t,"text"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"text","hash":{},"loc":{"start":{"line":258,"column":52},"end":{"line":258,"column":60}}}):l))+"</span>\r\n    </div>\r\n  </div>\r\n</div>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"noMoreData"):t,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(45,o,0),"loc":{"start":{"line":262,"column":0},"end":{"line":264,"column":7}}}))?s:"")+'<span class="esoc-social-comment-delete"></span>\r\n<div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-social-comment-body-divider"></div>\r\n'}});return i.registerPartial("esoc_widgets_socialactions_comment",n),n}),csui.define("esoc/widgets/socialactions/commentslist.view",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/moment","csui/lib/handlebars","csui/utils/contexts/factories/connector","i18n!esoc/widgets/socialactions/nls/lang","esoc/widgets/socialactions/replycollectionbase","esoc/widgets/userwidget/userwidget","hbs!esoc/widgets/socialactions/comment","esoc/widgets/socialactions/util","csui/utils/url","csui/utils/nodesprites","csui/utils/namedsessionstorage","esoc/widgets/userwidget/util","csui/lib/handlebars.helpers.xif"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f,g){return o.ItemView.extend({"tagName":"li","momentJS":s,"util":p,"namedSessionStorage":new f(p.commonUtil.globalConstants.ESOCIAL_USER_INFO),"className":"esoc-social-comment-list-item binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12","template":u,"templateHelpers":function(){var e,n,o="csui-icon mime_document",s=this.model;-1!==i.inArray(this.model.attributes.feed_event_type,[7,8,9])?(n=1===this.model.attributes.extended_info.subtype,s.attributes.type=n?this.model.attributes.extended_info.sgm_original_sub_type:this.model.attributes.extended_info.subtype,s.attributes.mime_type=n?this.model.attributes.extended_info.sgm_original_mime_type:this.model.attributes.extended_info.mime_type,s.attributes.container=n?this.model.attributes.extended_info.sgm_original_container:this.model.attributes.extended_info.sgm_container,o=h.findClassByNode(s)):this.model.attributes.extended_info&&this.model.attributes.extended_info.attachment_subtype&&(e=this.model.attributes.extended_info.attachment_subtype,s.attributes.type=1===e?this.model.attributes.extended_info.attachment_original_sub_type:e,s.attributes.mime_type=1===e?this.model.attributes.extended_info.attachment_original_mime_type:this.model.attributes.extended_info.attachment_mime_type,s.attributes.container=1===e?this.model.attributes.extended_info.attachment_original_container:this.model.attributes.extended_info.attachment_container,o=h.findClassByNode(s));var l={"reply":r.reply,"replyCount":this.model.get(this.util.commonUtil.globalConstants.REPLY_COUNT)?t.str.sformat(r.replyCount,this.model.get(this.util.commonUtil.globalConstants.REPLY_COUNT)):"","attachFile":r.attachFile,"modifiedAt":r.modifiedAt,"update":r.update,"cancel":r.cancel,"deleteComment":r.deleteComment,"edit":r.edit,"hide":r.hide,"post":r.post,"writeAComment":r.writeAComment,"attachmentDeleteDescription":r.attachmentDeleteDescription,"attachmentDeleteTitle":r.attachmentDeleteTitle,"deleteCommentheader":r.deleteCommentheader,"confirmationText1":r.confirmationText1,"confirmationText2":r.confirmationText2,"shortcutAttachmentSubtype":this.util.commonUtil.globalConstants.SHORTCUT_ATTACHMENT_SUBTYPE,"documentAttachmentSubtype":this.util.commonUtil.globalConstants.DOCUMENT_ATTACHMENT_SUBTYPE,"emoticon":r.emoticon,"feedEventType":parseInt(this.model.attributes.feed_event_type,10),"version":r.version,"more":r.more,"less":r.less,"mimeTypeClass":o,"editAttachment":r.editAttachmentTitle};if(l.attachmentPositionClass=1===parseInt(this.model.attributes.feed_event_type,10)||this.model.attributes.actions&&this.model.attributes.actions.reply&&!this.model.attributes.actions.reply.can_reply?"esoc-social-attachment-file-alone":"",7===this.model.attributes.feed_event_type){var a=void 0===this.model.attributes.extended_info.subtype_name?"":this.model.attributes.extended_info.subtype_name;l.textmsg=""!==a?r.addMsg+a+" ":this.model.attributes.text}return 8===this.model.attributes.feed_event_type&&(l.textmsg=r.versionMsg),this.uniqueId=t.uniqueId(),{"uniqueId":this.uniqueId,"messages":l}},"initialize":function(e){if(e.connector=e.connector||e.context.getObject(a),0===e.model.collection.baseURL.indexOf("http")&&void 0!==e.model.collection.baseURL){var t=e.model.collection.baseURL.split(/[\/]+/);void 0!==this.model.attributes.extended_info&&void 0!==this.model.attributes.extended_info.attachment_icon_id&&(this.model.attributes.extended_info.attachment_icon_id=t[0]+"//"+t[1]+this.model.attributes.extended_info.attachment_icon_id)}this.listenTo(this.model,"change",this.render)},"events":{"click .esoc-social-comment-icon-edit":"onEditComment","keydown .esoc-social-comment-icon-edit":"onClickWithSpaceKey","click .esoc-social-comment-icon-hide":"onHideComment","click .esoc-social-comment-icon-delete.esoc-social-comment-delete-confirm":"onRemoveModel","keydown .esoc-social-comment-icon-delete.esoc-social-comment-delete-confirm":"onClickWithSpaceKey","click .esoc-social-comment-update":"onUpdateComment","click .esoc-social-comment-cancel":"onUpdateCancelComment","input .esoc-social-editable":"onEditTextChanged","input .esoc-social-comment-data-textarea":"onEditTextKeyPress","focus .esoc-social-comment-data-textarea":"onFocusCommentEdit","click .esoc-reply_link":"onCommentReply","keydown .esoc-reply_link":"onClickWithSpaceKey","click .comment.esoc-social-attachment-icon-delete":"onAttachmentDelete","keydown .comment.esoc-social-attachment-icon-delete":"onClickWithSpaceKey","click .comment.esoc-social-attachment-file":"selectAttachment","keydown .comment.esoc-social-attachment-file":"onClickWithSpaceKey","input .esoc-comment-emoji":"onEditTextKeyPress","keyup .esoc-comment-emoji":"onEditTextKeyPress","change .esoc-social-comment-data-textarea":"onEditTextKeyPress","focus .esoc-comment-emoji":"onFocusCommentEdit","click .esoc-social-comment-emoticon":"onEmojiPress","click .esoc-social-comment-attachment":"onAttachementPress","click .esoc-object-name, .esoc-social-mime-icon":"openItem","click .esoc-social-attachment-icon, .esoc-social-attachment-download":"openAttachment",
"keydown .esoc-social-attachment-icon, .esoc-social-attachment-download":"onClickWithSpaceKey","click .esoc-see-more-activity":"showMoreContent","click .esoc-see-less-activity":"showLessContent","mousedown .esoc-comment-emoji .esoc-user-mention":"onCommentEmojiMentionMouseClick"},"_elements":{"csuisocialcommentdatatextarea":null},"constructor":function(){o.ItemView.prototype.constructor.apply(this,arguments)},"onClickWithSpaceKey":function(e){p.applySpaceKeyEvent(e)},"onRender":function(n){var o=this.model,s=this;this.inactivateUnsupportedSubType(o),this.listenTo(this.options.model.collection,"sync",function(){var e=this.model,t="esoc-social-comment-inactive";s.$el.find(".esoc-social-comment-data .esoc-social-mime-icon").removeClass(t),s.$el.find(".esoc-social-comment-data .esoc-object-name").removeClass(t),s.$el.find("#esoc-social-comment-attachment-"+e.attributes.id+" .esoc-social-attachment-name").removeClass(t),s.$el.find("#esoc-social-comment-attachment-"+e.attributes.id+" .esoc-social-attachment-icon").removeClass(t),s.inactivateUnsupportedSubType(e)}),this.options.model.collection.models.length>0&&0===i("#esoc-social-comment-container").find(".esoc-social-comment-body-divider").length&&0!==this.options.model.collection.models[0].id&&(i("#esoc-social-comment-container").css("border-bottom","2px solid #ffffff"),i("#esoc-social-comment-form-buttons-container").removeClass("esoc-social-form-minheight")),2===this.model.attributes.feed_event_type&&(this.$el.addClass("esoc-social-status-reply"),this.$el.find(".esoc-social-attachment").attr("class","binf-col-lg-8 binf-col-md-8 binf-col-sm-10 binf-col-xs-10 esoc-social-attachment")),0===this.$el.find(".esoc-comment-reply").children().length&&0===this.$el.find(".esoc-comment-attachment").children().length&&this.$el.find(".esoc-social-comment-list-actions").hide();this.$el.find(".esoc-social-comment-data").html(),this.model.attributes.extended_info?this.model.attributes.extended_info.user_photo_id:this.model.attributes.data_id;if(this._elements.csuisocialcommentdatatextarea=this.$el.find(".esoc-social-comment-data-textarea"),void 0!==this.model.collection.socialActions&&this.model.collection.socialActions.attachementsEnabled&&this.model.collection.socialActions.shortcutsEnabled){var l={"socialActions":this.model.collection.socialActions,"id":this.model.attributes.id,"uniqueId":this.uniqueId,"desktopAttachmentInputId":"esoc-social-commentlist-desktop-attachment-"+this.model.attributes.id,"attachFiles":!0,"itemview":this,"shortcutIdHolder":this.$el.find("#esoc-social-comment-cs-shortcut-"+this.model.attributes.id+"-attachfiles"),"connector":this.options.connector};this.util.showAttachmentPopOver(this.$el.find(".esoc-social-attachment-file"),l)}if(7!==this.model.attributes.feed_event_type&&8!==this.model.attributes.feed_event_type&&9!==this.model.attributes.feed_event_type&&this.applyemoji(n),9===this.model.attributes.feed_event_type){var a=this.util.commonUtil.onClickableUrl(this.model.attributes.text);a=1===this.model.attributes.extended_info.subtype?a.replace("[MimeType]","<span class='csui-icon-group esoc-social-mime-icon esoc-comment-valign'><span class='"+this.templateHelpers().messages.mimeTypeClass+"'></span><span class='csui-icon csui-icon-shortcut-overlay'></span></span></span>"):a.replace("[MimeType]","<span class='"+this.templateHelpers().messages.mimeTypeClass+" esoc-social-mime-icon esoc-comment-valign'></span>"),this.$el.find(".esoc-social-comment-data").html(a),this.$el.find(".esoc-object-name").addClass("esoc-comment-valign"),this.$el.find(".esoc-social-comment-data").addClass("esoc-social-sgm-attr-change"),this.$el.find(".esoc-object-name").attr("title",this.model.attributes.extended_info.name),this.$el.find(".esoc-social-mime-icon").attr("title",this.model.attributes.extended_info.name)}if(void 0!==this.model.attributes.user&&void 0!==this.model.attributes.user.id){d||(d=e("esoc/widgets/userwidget/userwidget"));var r={"userid":this.model.attributes.user.id,"context":this.model.collection.context,"showUserProfileLink":!0,"showMiniProfile":!0,"UserWidget":d},c=t.extend({"placeholder":this.$el.find(".esoc-profileimg-block"),"showUserWidgetFor":"profilepic","userWidgetWrapperClass":"esoc-social-comment-userprofile-pic","commentsHeaderView":this.options.commentConfigOptions&&this.options.commentConfigOptions.commentsHeaderView},r);d.getUser(c);var u=t.extend({"placeholder":this.$el.find(".esoc-user-widget"),"commentsHeaderView":this.options.commentConfigOptions&&this.options.commentConfigOptions.commentsHeaderView},r);d.getUser(u)}var p=this.options.context?this.options.context:this.model.attributes.widgetOptions.activityfeed.context;g.displayUserWidget(p,this.$el),1===this.model.attributes.feed_event_type&&this.showSeeMoreLink(this.$el.find(this.contentTypeElement))},"onShow":function(t){if(-1!==i.inArray(this.model.attributes.feed_event_type,[7,8])&&(this.$el.find(".esoc-social-comment-data").css("white-space","inherit"),this.$el.find(".esoc-description").length>0)){var n=this.$el.find(".esoc-description").html();n=this.util.commonUtil.onClickableUrl(n),this.$el.find(".esoc-description").html(n)}this.util.setCommentDialogPointer(),d||(d=e("esoc/widgets/userwidget/userwidget"));var o=this;this.$el.find(".esoc-old-user-display-name").each(function(){var e={"userid":i(this).data("userid"),"context":o.options.context?o.options.context:o.model.attributes.widgetOptions.activityfeed.context,"placeholder":this,"showUserProfileLink":!0,"showMiniProfile":!0};d.getUser(e)}),this.$el.find(".esoc-new-user-display-name").each(function(){var e={"userid":i(this).data("userid"),"context":o.options.context?o.options.context:o.model.attributes.widgetOptions.activityfeed.context,"placeholder":this,"showUserProfileLink":!0,"showMiniProfile":!0};d.getUser(e)});var s=this.options.context?this.options.context:this.model.attributes.widgetOptions.activityfeed.context;g.displayUserWidget(s,this.$el),this.showSeeMoreLink(this.$el.find(this.contentTypeElement))},"showSeeMoreLink":function(e){var t=i(e)[0];i(t).addClass("esoc-see-more-content"),this.util.setCommentDialogPointer(e);var n=this;setTimeout(function(){n.util.commonUtil.isTextOverflown(t)&&(n.$el.find(".esoc-see-more").show(),i(t).addClass("esoc-see-more-activity")),n.options.parentCollectionView.triggerMethod("update:scrollbar")},1e3)},"contentTypeElement":".esoc-extended-view-mode","showMoreContent":function(e){""===window.getSelection().toString()&&(this.util.commonUtil.showMoreContent(e,this,this.$el.find(this.contentTypeElement)),this.util.setCommentDialogPointer(e),e.preventDefault(),e.stopPropagation())},"showLessContent":function(e){""===window.getSelection().toString()&&(this.util.commonUtil.showLessContent(e,this,this.$el.find(this.contentTypeElement)),this.util.setCommentDialogPointer(e),e.preventDefault(),e.stopPropagation())},"remove":function(){var e=this;this.$el.fadeOut(function(){o.ItemView.prototype.remove.call(e),e.util.setCommentDialogPointer()})},"openItem":function(){this.trigger("click:item")},"openAttachment":function(e){e.preventDefault(),e.stopPropagation(),this.trigger("click:attachment")},"onFocusCommentEdit":function(e){e.preventDefault(),e.stopPropagation()},"onEditComment":function(e){e.stopPropagation(),e.preventDefault();var t=i("#esoc-social-comment-container")[0].scrollTop,n="",o=0,s=0,l=0,a=0;i(".esoc-social-comment-cancel:visible").length>0&&(n=i(".esoc-social-comment-cancel:visible").closest("li.esoc-social-comment-list-item"),o=i(n).find(".esoc-social-comment-data").height(),s=i(n).find("#esoc-social-comment-edit-"+this.model.attributes.id).height(),l=parseInt(i(n).find(".esoc-social-comment-data").attr("data-id"),10),a=parseInt(o-s,10),i(".esoc-social-comment-cancel:visible").trigger("click")),i(".esoc-social-reply-cancel:visible").length>0&&(n=i(".esoc-social-reply-cancel:visible").closest("li.esoc-social-reply-list-item"),o=i(n).find(".esoc-social-reply-comment-data").height(),s=i(n).find("#esoc-social-comment-reply-list-"+this.model.attributes.id).height(),l=parseInt(i(n).closest(".reply-thread-list").attr("data-id"),10),a=parseInt(o-s,10),i(".esoc-social-reply-cancel:visible").trigger("click")),7!==this.model.attributes.feed_event_type&&8!==this.model.attributes.feed_event_type&&9!==this.model.attributes.feed_event_type&&this.applyemoji(e),this.$el.find('[id^="esoc-social-comment-edit-textarea-"]').hide();var c=this.$el.find(".emoji-wysiwyg-editor");this.util.createChickletForMentions(c),c.show().trigger("focus"),c.first().trigger("focus"),this.$el.find(".esoc-social-comment-data").hide(),this.$el.find(".esoc-social-comment-icon-holder, .esoc-social-comment-list-actions, .reply-thread-list").hide(),this.$el.find(".esoc-social-comment-list-update").show(),this.$el.find(".esoc-social-edit-icons").show(),this.$el.find(".esoc-social-edit-icons").animate({"opacity":1},0);var d=this.model.id;i("#esoc-social-comment-container")[0].scrollTop=null===n||void 0===n||null!==n&&l<d?t:parseInt(t+a-36,10),(this.model.collection.socialActions.attachementsEnabled||this.model.collection.socialActions.shortcutsEnabled)&&""===this.model.attributes.extended_info.attachment_id||(this.$el.find("#esoc-social-comment-edit-attachment-"+this.model.attributes.id).hide(),this.$el.find(".esoc-social-comment-data").hide().addClass("esoc-social-editable-icons"),this.$el.find(".esoc-social-edit-icons").addClass("esoc-social-icon-when-no-attachment"),this.$el.find(".esoc-comment-emoji").addClass("esoc-social-input-when-no-attachment"));var u={"socialActions":this.model.collection.socialActions,"id":this.model.attributes.id,"uniqueId":this.uniqueId,"desktopAttachmentInputId":"esoc-social-commentedit-desktop-attachment-"+this.model.attributes.id,"shortcutIdHolder":this.$el.find("#esoc-social-comment-cs-shortcut-edit-"+this.model.attributes.id),"connector":this.options.connector};this.util.showAttachmentPopOver(this.$el.find("#esoc-social-comment-edit-attachment-"+this.model.attributes.id),u),this.$el.find("#esoc-social-comment-edit-attachment-"+this.model.attributes.id).attr("title",r.attachFile),this.$el.find("#esoc-social-attachment-icon-delete-"+this.model.attributes.id).addClass("esoc-social-comment-edit"),this.$el.find('[id^="esoc-suggestion-comment-list_"]').width(c.outerWidth()),this.util.commonUtil.preventDrop(this.$el.find(".esoc-comment-emoji"));var p=this;this.$el.find("#esoc-social-comment-edit-"+this.model.attributes.id).on("paste",function(e){var t=p.util.commonUtil.globalConstants.MAX_CHAR_LIMIT,n=i(".esoc-social-comment-data-textarea-"+p.model.id).val().length;p.util.commonUtil.onCommentFormPaste(e,n,t),i(".esoc-social-comment-data-textarea-"+p.model.id).innerHTML=i("#esoc-social-comment-edit-"+p.model.attributes.id).html(),p.onEditTextKeyPress(e)}),this.$el.find(".esoc-see-more").hide(),this.$el.find(".esoc-see-less").hide(),this.options.parentCollectionView.triggerMethod("update:scrollbar"),this.options.commentsHeaderView.triggerMethod("dom:refresh")},"onEditTextKeyPress":function(e){this.util.onMentionNameEdit(e);var t=this.$el.find(".esoc-social-comment-data-textarea-"+this.model.attributes.id),i=t.val(),n=this.$el.find(".esoc-social-comment-data"),o=this.util.commonUtil.globalConstants.MAX_CHAR_LIMIT;n.text(i);var s=e||window.event;if(i.length>o){var l=i.substr(0,o);t.val(l),n.text(l),this.$el.find("#esoc-social-comment-edit-"+this.model.attributes.id).html("")[0].textContent=l,this.util.commonUtil.addEmoji(this.$el.find("#esoc-social-comment-edit-"+this.model.attributes.id),!1,this.options.connector),this.util.commonUtil.placeCaretAtEnd(this.$el.find("#esoc-social-comment-edit-"+this.model.attributes.id)),s.preventDefault()}},"onUpdateCancelComment":function(e){var t=i("#esoc-social-comment-container").find(".esoc-social-comment-list-item");t.length<=1&&i(t).removeClass("status-attachment-init-min-height status-attachment-alone-init-min-height esoc-edit-init-min-height"),this.$el.removeClass("esoc-social-editable-parent").find(".esoc-social-comment-data-textarea-"+this.model.attributes.id).removeClass("esoc-social-editable").val(this.$el.find(".esoc-social-comment-hidden-text").text()).hide(),this.applyemoji(e),this.$el.find("#esoc-social-comment-data-textarea-"+this.model.attributes.id).css("display","none"),this.$el.find("#esoc-social-comment-reply-textarea").css("display","none"),this.$el.find(".esoc-social-comment-icon-holder, .esoc-social-comment-list-actions").show(),this.$el.find("#esoc-social-comment-attachment-"+this.model.attributes.id).show(),this.$el.find(".esoc-social-comment-list-update").hide(),this.$el.find(".esoc-social-warning").hide(),this.$el.find(".esoc-social-edit-icons").hide(),this.$el.removeClass("esoc-social-editable-parent").find(".esoc-social-comment-data").removeClass("esoc-social-editable"),this.$el.find(".esoc-social-comment-data").css("display","block"),this.$el.find(".esoc-social-comment-data").attr("class","binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-social-comment-data"),this.$el.find("#esoc-social-attachment-icon-delete-"+this.model.attributes.id).removeClass("esoc-social-comment-edit"),(this.model.collection.socialActions.attachementsEnabled||this.model.collection.socialActions.shortcutsEnabled)&&""===this.model.attributes.extended_info.attachment_id||(this.$el.find(".esoc-social-comment-data").removeClass("esoc-social-editable-icons"),this.$el.find(".esoc-social-comment-data-textarea").removeClass("esoc-social-editable-icons"),this.$el.find(".esoc-comment-emoji").removeClass("esoc-social-input-when-no-attachment"));var n=this.$el.find("#esoc-social-comment-edit-attachment-"+this.model.attributes.id),o=this.$el.find("#esoc-social-commentedit-desktop-attachment-"+this.model.attributes.id);n.attr("data-binf-original-title")&&n.attr("data-binf-original-title").length>0&&this.util.hideAttachmentPopup(n,o,this.model.collection.socialActions),this.$el.find("#esoc-social-comment-cs-shortcut-edit-"+this.model.attributes.id).val(""),this.util.setFocusOnDefaultElement(e);var s=this.options.context?this.options.context:this.model.attributes.widgetOptions.activityfeed.context;g.displayUserWidget(s,this.$el),this.showSeeMoreLink(this.$el.find(this.contentTypeElement)),this.options.parentCollectionView.triggerMethod("update:scrollbar"),this.$el.find(".esoc-social-comment-icon-edit:first-child").trigger("focus")},"onUpdateComment":function(e){var t=i("#esoc-social-comment-container").find(".esoc-social-comment-list-item");t.length<=1&&i(t).removeClass("status-attachment-init-min-height status-attachment-alone-init-min-height esoc-edit-init-min-height");var n,o=this.$el.find(".esoc-social-comment-data-textarea-"+this.model.attributes.id),s=void 0!==o?o.val().trim():"",l=this.model.attributes.id,a=this.model.attributes.actions.edit.href,r=i("#esoc-social-comment-cs-shortcut-edit-"+l),c=new FormData,d=i("#esoc-social-commentedit-desktop-attachment-"+l);if(c.append("commands","default"),r.val().length>0)c.append("ATT_ID",parseInt(r.val(),10)),n=!0;else if(d.length>0){var u=d[0].files[0];u?(c.append("AddDesktopDoc",u),n=!0):n=!1}else n=this.$el.find(".esoc-social-comment-edit").is(":hidden");this.util.showMask(this.$el),c.append("status",s),c.append("id",l),c.append("replace",n);var p=this;if(""!==s){var m={"url":p.options.connector.connection.url+a,"type":p.model.attributes.actions.edit.method,"data":c,"itemview":this,"baseURL":this.model.collection.baseURL};this.util.updateWithAttachmentAjaxCall(m).done(function(){p.$el.find(".esoc-social-comment-icon-edit:first-child").trigger("focus")})}else this.$el.find("#esoc-social-comment-edit-"+this.model.attributes.id).trigger("focus"),this.util.hideMask(this.$el);this.$el.find("#esoc-social-attachment-icon-delete-"+this.model.attributes.id).removeClass("esoc-social-comment-edit")},"onHideComment":function(e){},"onRemoveModel":function(e){this.util.showMask(this.$el);var t=this.model.attributes.id,i=this.model.attributes.actions.deleteAction.href,n=this,o={"url":n.options.connector.connection.url+i+"?id="+t,"type":n.model.attributes.actions.deleteAction.method,"model":this,"async":!1,"requestType":"CommentDelete"},s={"dialogtitle":this.templateHelpers().messages.deleteCommentheader,"dialogmessage":this.templateHelpers().messages.confirmationText1+" "+this.templateHelpers().messages.confirmationText2,"ajaxParams":o};this.util.openConfirmationDialog(s)},"destroy":function(e){this.undelegateEvents(),this.off(),this.remove()},"onCommentReply":function(e){var t="#reply_"+this.model.id;if(i(t).is(":visible"))i(t).children("div").remove(),i(t).hide(),this.$el.find(".esoc-social-comment-icon-holder").show(),this.options.parentCollectionView.triggerMethod("update:scrollbar"),this.util.setCommentDialogPointer();else{var n=parseInt(i('div[id^="reply_"]:visible').attr("data-id"),10),o=this.model.id,s=i("#esoc-social-comment-container").height(),l=i("#esoc-social-comment-container")[0].scrollHeight,a=i("#esoc-social-comment-container")[0].scrollTop,r=i('div[id^="reply_"]:visible').height(),d=i("#esoc-social-comment-container")[0];o<n&&(r<a||r-a<s)&&(d.scrollHeight=l-r,d.scrollTop=a-r),i('div[id^="reply_"]').children("div").remove(),i('div[id^="reply_"]').hide();var u={"parentNode":t,"csBaseUrl":this.options.model.collection.baseURL,"context":this.options.context,"getRepliesUrl":m.appendQuery(this.model.attributes.actions.reply.href,""),"conversation_id":this.model.attributes.extended_info.conversation_id,"item_id":this.model.id,"parentCommentModel":this.model,"parentCollectionView":this.options.parentCollectionView,"canReply":this.model.attributes.actions.reply.can_reply,"socialActions":this.model.collection.socialActions};new c(u),this.$el.find(".esoc-reply-emoji").trigger("focus")}},"onAttachmentDelete":function(e){if(e.target.classList.contains("esoc-social-comment-edit"))e.preventDefault(),e.stopPropagation(),this.$el.find("#esoc-social-comment-attachment-"+this.model.attributes.id).hide(),this.$el.find("#esoc-social-comment-edit-attachment-"+this.model.attributes.id).show(),this.$el.find(".esoc-social-edit-icons").removeClass("esoc-social-icon-when-no-attachment "),this.$el.find(".esoc-comment-emoji").removeClass("esoc-social-input-when-no-attachment"),this.$el.find(".esoc-social-comment-data").removeClass("esoc-social-editable-icons"),this.$el.find(".esoc-social-comment-data-textarea").removeClass("esoc-social-editable-icons"),i("#esoc-social-comment-edit-"+this.model.attributes.id).trigger("focus");else{var t=this,n=this.model.attributes.id,o=this.model.attributes.actions.edit.href,s=i("<div />").html(this.model.attributes.text),l=s.text(),a={"url":t.options.connector.connection.url+o,"type":t.model.attributes.actions.edit.method,"dataType":"text","data":{"id":n,"status":l,"ATT_ID":0,"replace":!0},"model":t,"requestType":"AttachmentDelete"},r={"dialogtitle":this.templateHelpers().messages.attachmentDeleteTitle,"dialogmessage":this.templateHelpers().messages.attachmentDeleteDescription,"ajaxParams":a};this.util.openConfirmationDialog(r)}},"uploadAttachment":function(e){var t=this.model.attributes.id,n=this.model.attributes.actions.edit.href,o=i("#esoc-social-comment-cs-shortcut-"+this.model.attributes.id+"-attachfiles"),s=new FormData,l=this.$el.find("#esoc-social-commentlist-desktop-attachment-"+t);if(s.append("commands","default"),""!==o.val())s.append("ATT_ID",parseInt(o.val(),10));else if(l.length>0){var a=l[0].files[0];a&&s.append("AddDesktopDoc",a)}this.$el.find(".esoc-comment-attachment").hide(),this.$el.find(".item-separator").hide(),this.util.showMask(this.$el);var r=i("<div />").html(this.model.attributes.text),c=r.text();s.append("status",c),s.append("id",t);var d={"url":this.options.connector.connection.url+n,"type":this.model.attributes.actions.edit.method,"data":s,"itemview":this,"baseURL":this.model.collection.baseURL,"commentId":t,"feedType":"comment"};this.util.updateWithAttachmentAjaxCall(d),o.val(""),this.util.resetAttachmentInput(l,this.model.collection.socialActions)},"selectAttachment":function(e){if(this.model.collection.socialActions.attachementsEnabled&&!this.model.collection.socialActions.shortcutsEnabled){var t=this,n=this.$el.find("#esoc-social-commentlist-desktop-attachment-"+this.model.attributes.id);n.off("change").on("change",function(e){n.val().length>0&&t.uploadAttachment(e)}),this.openBrowseWindow(e,n)}else if(!this.model.collection.socialActions.attachementsEnabled&&this.model.collection.socialActions.shortcutsEnabled){var o={"shortcutIdHolder":i("#esoc-social-comment-cs-shortcut-"+this.model.attributes.id+"-attachfiles"),"itemview":this,"attachFiles":!0};this.util.openTargetPicker(this.$el.find(".esoc-social-attachment-file"),o)}},"openBrowseWindow":function(e,t){t.val(""),t.trigger("click")},"applyemoji":function(e){if(void 0!==this.model.attributes&&void 0!==this.model.attributes.id){this.$el.find(".emoji-wysiwyg-editor").remove();var t=this.$el.find(".esoc-social-comment-data-textarea-"+this.model.attributes.id);t.val(t.val().replace(/&quot;/gi,'"'));var n=(t.emojiarea({"path":this.util.commonUtil.getEmojiPath(this.options.connector),"wysiwyg":!0,"button":".esoc-social-comment-emotion-"+this.model.attributes.id,"id":"esoc-social-comment-edit-textarea-"+this.model.attributes.id,"parent":this.$el.find("#esoc-social-edit-comment-icons-"+this.model.attributes.id),"container":i("#esoc-social-comment-container"),"util":this.util,"widget":i(".esoc-social-comment-widget")}),this.$el.find(".emoji-wysiwyg-editor"));n.addClass("esoc-comment-emoji").attr({"id":"esoc-social-comment-edit-"+this.model.attributes.id,"data-text":this.templateHelpers().messages.writeAComment}),t.hide(),n.hide();var o=n.html();o=this.util.commonUtil.onClickableUrl(o),this.$el.find(".esoc-social-comment-data").html(o),n.html(n.html().replace(/\n/gi,"<br>"))}var s={"context":this.options.context,"connector":this.options.connector,"element":this.$el.find("#esoc-social-comment-edit-"+this.model.attributes.id),"appendToElement":this.$el.find("[id^='esoc-suggestion-comment-list_']")};this.util.triggerAutoCompleteSuggestion(s),this.$el.find(".emoji-wysiwyg-editor").removeAttr("autocomplete")},"onEmojiPress":function(e){e.target.parentNode.id==="esoc-social-edit-comment-icons-"+this.model.attributes.id&&i("#esoc-social-comment-container").find(".esoc-social-comment-list-item").length<=1&&i("#esoc-social-comment-container").find(".esoc-social-comment-list-item").addClass("esoc-edit-init-min-height"),void 0!==this.model.attributes&&void 0!==this.model.attributes.id&&this.util.hidePopover(this.$el.find(".esoc-social-comment-emotion-"+this.model.attributes.id)),e.stopPropagation()},"onAttachementPress":function(e){this.$el.find(".emoji-menu").hide()},"onCommentEmojiMentionMouseClick":function(e){this.util.setCursorPositionAtStartOFMention(e)},"inactivateUnsupportedSubType":function(e){var t="esoc-social-comment-inactive",n=this.options.parentCollectionView.defaultActionController;-1!==i.inArray(this.model.attributes.feed_event_type,[7,8,9])?(this.sgmModel=this.util.commonUtil.buildNodeModel(e,this.options.connector),n&&!n.hasAction(this.sgmModel)&&(this.$el.find(".esoc-social-comment-data .esoc-social-mime-icon").addClass(t),this.$el.find(".esoc-social-comment-data .esoc-object-name").addClass(t))):this.model.attributes.extended_info&&this.model.attributes.extended_info.attachment_subtype&&(this.attachmentModel=this.util.commonUtil.buildNodeModel(e,this.options.connector,!0),n&&!n.hasAction(this.attachmentModel)&&(this.$el.find("#esoc-social-comment-attachment-"+this.model.attributes.id+" .esoc-social-attachment-name").addClass(t),this.$el.find("#esoc-social-comment-attachment-"+this.model.attributes.id+" .esoc-social-attachment-icon").addClass(t)))}})}),csui.define("esoc/widgets/socialactions/social.infinite.scrolling.behavior",["csui/controls/tile/behaviors/infinite.scrolling.behavior"],function(e){"use strict";return e.extend({"_checkScrollPositionFetch":function(){var e=this._content,t=e.height(),i=e[0].scrollHeight;e.scrollTop()+30>=i-t&&this._content.find(".esoc-social-comment-load-more:last").trigger("click")}})}),csui.define("esoc/widgets/socialactions/commentscollection.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/behaviors/default.action/default.action.behavior","esoc/widgets/socialactions/commentslist.view","esoc/widgets/socialactions/util","csui/controls/tile/behaviors/perfect.scrolling.behavior","esoc/widgets/socialactions/social.infinite.scrolling.behavior"],function(e,t,i,n,o,s,l,a,r){return n.CollectionView.extend({"tagName":"ul","className":"comments-list","childView":s,"util":l,"constructor":function(e){this.childViewOptions=e,this.childViewOptions.parentCollectionView=this,n.CollectionView.prototype.constructor.apply(this,arguments),this.listenTo(this.collection,"remove sync",this.triggerMethod("update:scrollbar"))},"events":{"click .esoc-social-comment-load-more":"loadMoreItems"},"onRender":function(){var t=this;this.$el.find(".esoc-social-comment-list-item").hide(),this.util.setCommentDialogPointer(),e(window).on("resize",function(i){e("[id*=esoc-social-comment-widget]")&&e("[id*=esoc-social-comment-widget]").length>0&&t.util.setCommentDialogPointer()})},"behaviors":{"PerfectScrolling":{"behaviorClass":a,"suppressScrollX":!0},"InfiniteScrolling":{"behaviorClass":r},"DefaultAction":{"behaviorClass":o}},"childEvents":{"click:item":"onClickItem","click:attachment":"onClickAttachment"},"onClickItem":function(e){var t={"node":e.sgmModel,"callingViewInstance":this};this.util.commonUtil.openItem(t)},"onClickAttachment":function(e){var t={"node":e.attachmentModel,"callingViewInstance":this};this.util.commonUtil.openItem(t)},"loadMoreItems":function(e){this.collection.models[this.collection.models.length-1].attributes.noMoreData||(delete this.collection.defaults.params[this.util.commonUtil.globalConstants.SINCE_ID],this.collection.defaults.params[this.util.commonUtil.globalConstants.MAX_ID]=e.target.id,this.collection.fetch({"remove":!1}))}})}),csui.define("hbs!esoc/widgets/socialactions/commentsheadertemplate",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div id="esoc-social-comment-form-container" class="esoc-social-comment-form-container">\r\n      <div class="esoc-social-comment-form-mask"></div>\r\n      <div id="esoc-social-comment-form-buttons-container"\r\n           class="row-fluid esoc-social-form-minheight">\r\n        <div class="esoc-social-comment-avatar-container">\r\n          \x3c!-- TODO: need to replace this image with current logged-in user\'s profile image and remove the background related css properties --\x3e\r\n          <span id="esoc-social-default-avatar" class="image_user_placeholder\r\n          esoc-social-comment-default-avatar">'+e.escapeExpression((l=null!=(l=a(i,"initials")||(null!=t?a(t,"initials"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"initials","hash":{},"loc":{"start":{"line":23,"column":46},"end":{"line":23,"column":58}}}):l))+'</span>\r\n          <img id="esoc-social-comment-avatar" class="binf-img-circle esoc-social-comment-avatar"\r\n               src="#" alt="'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":25,"column":28},"end":{"line":25,"column":44}}}):l))+'"/>\r\n        </div>\r\n        <div class="esoc-social-comment-input-container">\r\n          <div class="esoc-social-add-comment-data" style="display:none;"></div>\r\n                    <textarea id="esoc-social-comment-input"\r\n                              class="binf-form-control esoc-social-comment-input"\r\n                              placeholder="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"writeAComment"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"writeAComment"):s,t))+'"></textarea>\r\n\r\n          <div id="esoc-suggestion-comment-header"></div>\r\n          <div id="esoc-social-textinput-button-holder" class="esoc-social-textinput-button-holder">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"messages"):t)?a(s,"attachementsEnabled"):s,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":35,"column":12},"end":{"line":45,"column":19}}}))?s:"")+'            <a href="javascript:void(0);"\r\n               class="esoc-social-comment-header-emotion esoc-social-comment-emoticon"\r\n               id="esoc-social-comment-emoticon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"emoticon"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"emoticon"):s,t))+'"></a>\r\n            <button id="esoc-social-comment-submit" disabled\r\n                    class="binf-btn binf-btn-primary esoc-social-comment-submit" type="submit"\r\n                    title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"post"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"post"):s,t))+"</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"messages"):t)?a(s,"attachementsEnabled"):s,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":55,"column":6},"end":{"line":60,"column":13}}}))?s:"")+'      <input type="hidden" id="esoc-social-comment-cs-shortcut" value="" />\r\n    </div>\r\n'},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <a href="javascript:void(0);" id="esoc-social-comment-attachment"\r\n                 class="esoc-social-comment-attachment esoc-social-comment-attachment-header"\r\n                 data-html="true" data-binf-placement="bottom" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachFile"):s,t))+'"></a>\r\n'},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"shortcutsEnabled"):s,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":40,"column":14},"end":{"line":44,"column":21}}}))?s:""},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <a href="javascript:void(0);" id="esoc-social-comment-attachment"\r\n                   class="esoc-social-comment-attachment esoc-social-comment-attachment-header"\r\n                   data-html="true" data-binf-placement="bottom" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachFile"):s,t))+'"></a>\r\n'},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"shortcutsEnabled"):s,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(8,o,0),"loc":{"start":{"line":56,"column":8},"end":{"line":59,"column":15}}}))?s:""},"8":function(e,t,i,n,o){return'          <input type="file" id="esoc-social-comment-desktop-attachment" name="AddDesktopDoc"\r\n                 style="display:none" />\r\n'},"10":function(e,t,i,n,o){return"    <hr>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}
;return'<div id="esoc-social-comment-create-container" class="">\r\n  <div id="esoc-social-comment-title-bar" class="esoc-social-comment-title-bar">\r\n    <div id="esoc-social-comment-title"\r\n         class="esoc-social-comment-title"> '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"comments"):s,t))+' </div>\r\n    <div id="esoc-social-comment-title-actions" class="esoc-social-comment-title-actions">\r\n      <a href="javascript:void(0);" id="esoc-social-comment-close-button"\r\n         class="esoc-social-comment-close-button" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"close"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"close"):s,t))+'"></a>\r\n      <a href="javascript:void(0);" id="esoc-social-focus-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"close"):s,t))+'"></a>\r\n    </div>\r\n  </div>\r\n  <div id="esoc-social-comment-warning"\r\n       class="binf-alert binf-alert-danger esoc-social-warning esoc-social-comment-warning" role="alert">\r\n    '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"commentBlank"):s,t))+"\r\n  </div>\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"commentingOpen"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(10,o,0),"loc":{"start":{"line":15,"column":2},"end":{"line":65,"column":9}}}))?s:"")+'  <div id="esoc-social-comment-loading-indication"\r\n       class="esoc-social-comment-loading-indication">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"loadingComments"):s,t))+'</div>\r\n  <div id="esoc-social-comment-container" class="binf-container esoc-social-comment-container"></div>\r\n</div>\r\n\r\n<div class="binf-modal binf-fade" id="esoc-social-dialog" tabindex="-1" role="dialog"\r\n     aria-labelledby="myModalTitle" aria-hidden="true">\r\n  <div class="binf-modal-dialog">\r\n    <div class="binf-modal-content esoc-social-modal-content">\r\n      <div class="binf-modal-header">\r\n        <h4 class="binf-modal-title" id="myModalTitle"></h4>\r\n      </div>\r\n      <div class="binf-modal-body">\r\n        <div class="binf-row">\r\n          <div class="binf-col-sm-2">\r\n            <span class="esoc-dialog-warning-icon"></span>\r\n            \x3c!-- need to change to warning icon as per mockup--\x3e\r\n          </div>\r\n          <div id="myModalConfirmationText" class="binf-col-sm-8"></div>\r\n        </div>\r\n        <div class="binf-row esoc-dialog-warning-margin">\r\n          <div class="binf-col-md-12 esoc-dialog-warning-buttons-align-middle">\r\n            <button type="button"\r\n                    class="binf-btn binf-btn-default esoc-social-dialog-delete-button">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"deleteComment"):s,t))+'</button>\r\n            <button type="button" class="binf-btn binf-btn-default esoc-social-dialog-cancel-button"\r\n                    data-binf-dismiss="modal">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"cancel"):s,t))+"</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>"}});return i.registerPartial("esoc_widgets_socialactions_commentsheadertemplate",n),n}),csui.define("css!esoc/lib/jquery.emojiarea/jquery.emojiarea",[],function(){}),csui.define("css!esoc/lib/jquery.emojiarea/jquery.emojiarea.custom",[],function(){}),csui.define("esoc/widgets/socialactions/commentsheader.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/lib/handlebars","csui/utils/url","csui/utils/contexts/factories/user","csui/utils/user.avatar.color","csui/utils/contexts/factories/connector","csui/controls/mixins/keyboard.navigation/modal.keyboard.navigation.mixin","i18n!esoc/widgets/socialactions/nls/lang","hbs!esoc/widgets/socialactions/commentsheadertemplate","esoc/widgets/socialactions/util","esoc/widgets/socialactions/comment.model","esoc/widgets/socialactions/mentions","esoc/lib/jquery.emojiarea/jquery.emojiarea.custom","esoc/lib/jquery.emojiarea/packs/custom/emojis","css!esoc/lib/jquery.emojiarea/jquery.emojiarea.css","css!esoc/lib/jquery.emojiarea/jquery.emojiarea.custom.css","csui/lib/binf/js/binf"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f,g){var b=null,v=n.ItemView.extend({"initialize":function(t){this.options=t,this.options.connector=this.options.connector||this.options.context.getObject(r),b=this,this.currentTarget=this.options.currentTarget,this.wrapperElement=e(this.currentTarget).parent()},"options":{},"_elements":{"csuiSocialCommentInput":null,"csuiSocialSubmitButton":null,"csuiSocialButtonsContainer":null,"csuiSocialAvatarIcon":null,"csuiSocialFormContainer":null,"csuiSocialCommentInputHolder":null,"csuiSocialCommentInputHiddenData":null,"csuiSocialFormWarning":null,"csuiSocialCommentShortcut":null,"csuiSocialCommentAttachmentName":null,"csuiSocialCommentAttachmentSize":null,"csuiSocialCommentAttachmentIcon":null,"csuiSocialCommentAttachmentPopupTitle":null,"csuiSocialCommentAttachmentPopupContent":null,"csuiSocialCommentDiv":null},"textareaScrollThresh":45,"tagName":"div","util":p,"emojis":g,"emojiarea":new f,"mentions":h,"template":u,"templateHelpers":function(){var i={"comments":d.comments,"commentBlank":d.commentBlank,"post":d.post,"posting":d.posting,"writeAComment":d.writeAComment,"loadingComments":d.loadingComments,"confirmationText1":d.confirmationText1,"confirmationText2":d.confirmationText2,"cancel":d.cancel,"deleteComment":d.deleteComment,"deleteCommentheader":d.deleteCommentheader,"close":d.close,"emoticon":d.emoticon,"attachFile":d.attachFile};return this.uniqueId=t.uniqueId(),i=e.extend(this.options.socialActions,i),{"messages":i}},"events":{"keydown .esoc-social-attachment-file":"_refreshtabs","click #esoc-social-comment-create-container":"onCommentDialogClick","touchstart #esoc-social-comment-create-container":"onCommentDialogClick","focus .esoc-header-emoji":"onCommentFormFocus","click .esoc-header-emoji":"onCommentInputFocus","click #esoc-social-comment-submit":"onCommentFormSubmit","input .esoc-header-emoji":"onCommentFormKeypress","click #esoc-social-comment-close-button":"onCloseButton","keydown #esoc-social-comment-close-button":"onClickWithSpaceKey","click #esoc-social-comment-emoticon":"onEmojiPress","keydown #esoc-social-comment-emoticon":"onClickWithSpaceKey","click .esoc-social-comment-attachment":"onAttachementPress","keydown .esoc-social-comment-attachment":"onClickWithSpaceKey","change #esoc-social-comment-input":"onCommentChange","keyup .esoc-header-emoji":"onCommentEmojiKeypress","mousedown .esoc-header-emoji .esoc-user-mention":"onCommentEmojiMentionMouseDown","keydown .esoc-social-attachment-cs":"onCSAttachmentKeyDown","keydown .esoc-social-attachment-desktop":"onDesktopAttachmentKeyDown"},"onClickWithSpaceKey":function(e){p.applySpaceKeyEvent(e)},"onCSAttachmentKeyDown":function(t){9===(t.keyCode||t.which)&&t.shiftKey&&e(t.target.closest(".binf-popover")).binf_popover("hide")},"onDesktopAttachmentKeyDown":function(t){9!==(t.keyCode||t.which)||t.shiftKey||e(t.target.closest(".binf-popover")).binf_popover("hide")},"onRender":function(i){this._elements.csuiSocialCommentInput=this.$el.find("#esoc-social-comment-input"),this._elements.csuiSocialCommentInputHiddenData=this.$el.find(".esoc-social-add-comment-data"),this._elements.csuiSocialSubmitButton=this.$el.find("#esoc-social-comment-submit"),this._elements.csuiSocialButtonsContainer=this.$el.find("#esoc-social-textinput-button-holder"),this._elements.csuiSocialAvatarIcon=this.$el.find("#esoc-social-comment-avatar"),this._elements.csuiSocialFormContainer=this.$el.find("#esoc-social-comment-form-container"),this._elements.csuiSocialFormWarning=this.$el.find(".esoc-social-warning"),this._elements.csuiSocialCommentShortcut=this.$el.find("#esoc-social-comment-cs-shortcut"),this._elements.csuiSocialCommentAttachmentName=this.$el.find("#esoc-social-comment-header-attachment-name"),this._elements.csuiSocialCommentAttachmentSize=this.$el.find("#esoc-social-comment-header-attachment-size"),this._elements.csuiSocialCommentAttachmentIcon=this.$el.find("#esoc-social-comment-attachment"),this._elements.csuiSocialCommentAttachmentPopupTitle=this.$el.find("#esoc-social-selected-attachment-dialog-title"),this._elements.csuiSocialCommentAttachmentPopupContent=this.$el.find("#esoc-social-selected-attachment-dialog"),this._elements.csuiSocialSubmitButton.hide(),this._elements.csuiSocialButtonsContainer.hide();var n={"socialActions":this.options.socialActions,"id":"comment","uniqueId":this.uniqueId,"desktopAttachmentInputId":"esoc-social-comment-desktop-attachment","shortcutIdHolder":this._elements.csuiSocialCommentShortcut,"connector":this.options.connector};this.util.showAttachmentPopOver(this._elements.csuiSocialCommentAttachmentIcon,n),this._elements.csuiSocialCommentAttachmentIcon.attr("title",d.attachFile),this.onCommentFormBlur();var o=this;e(window).on("resize",function(e){o.adjustCommentAreaWidth(e,!0)}),this.listenTo(this,"collection:sync:callback",t.bind(function(){var e=this.$el.closest(".esoc-social-comment-widget");e.show();var i=e.parent();(i.find(".esoc-socialactions-widget-arrow-right").length?i.find(".esoc-socialactions-widget-arrow-right"):i.find(".esoc-socialactions-widget-arrow-left")).show(),p.setCommentDialogPointer(),this.addFocus(),this.applyReplyEmoji(),e.find("[id^='esoc-social-comment-widget-pointer']").on("click",function(e){b.onCommentDialogClick(e)}),this._elements.csuiSocialCommentDiv=this.$el.find(".esoc-header-emoji");var n=e.find("#esoc-social-comment-header");n.length&&(n.on("paste",t.bind(function(t){var i=this.util.commonUtil.globalConstants.MAX_CHAR_LIMIT,o=e.find("#esoc-social-comment-input").val().length;this.util.commonUtil.onCommentFormPaste(t,o,i),e.find("#esoc-social-comment-input").innerHTML=n.html(),this.onCommentChange(t)},this)),n.off("mouseleave").on("mouseleave",t.bind(function(e){this.onCommentFormMouseLeave(e)},this)),this.util.commonUtil.preventDrop(n.find(".esoc-header-emoji")),n.trigger("focus"),this.engageModalKeyboardFocusOnOpen(this.el))},this))},"_refreshtabs":function(){this.triggerMethod("dom:refresh")},"onCommentDialogClick":function(t){"esoc-social-comment-header"===t.target.id||"esoc-social-comment-emoticon"===t.target.id||"esoc-social-comment-attachment"===t.target.id||"esoc-social-comment-desktop-attachment"===t.target.id||e(t.target).parents("#esoc-social-comment-header").length>0||e(t.target).closest(".binf-popover").length>0||"esoc-social-comment-submit"===t.target.id||this.onCommentFormBlur(t);var i=e("#esoc-social-comment-container").find(".esoc-social-comment-list-item");e(t.target.parentNode).hasClass("esoc-social-attachment-cs")||e(t.target.parentNode).hasClass("esoc-social-attachment-desktop")||e(t.target).hasClass("esoc-social-attachment-file-alone")||e(t.target).hasClass("esoc-social-comment-attachment")||e(t.target).hasClass("esoc-social-comment-emoticon")||e(t.target.parentNode.parentNode).hasClass("myemoji")||e(t.target).hasClass("esoc-social-attachment-file")||setTimeout(function(){e(i).removeClass("status-attachment-alone-init-min-height"),e(i).removeClass("esoc-attachment-init-min-height").removeClass("esoc-emoji-init-min-height"),e("#esoc-social-comment-container").find(".esoc-social-comment-list-item").removeClass("esoc-edit-init-min-height").removeClass("status-attachment-init-min-height")},100)},"onShow":function(){this.user=this.options.context.getModel(l),this.listenTo(this.model,"sync",function(){this.user&&this.user.get("id")&&this.updateUserProfilePicture(this.user.get("id"),this.user)})},"addFocus":function(t){e(".cs-expanded.activityfeed-expand.esoc.cs-dialog.binf-modal.binf-fade.binf-in").removeAttr("tabindex").prop("disabled",!0),e("[id^='esoc-social-comment-widget-mask_']").attr("tabindex","-1"),e(".cs-expanded.activityfeed-expand.esoc.cs-dialog.binf-modal.binf-fade.binf-in").removeAttr("tabindex").prop("disabled",!1)},"onCommentFormMouseLeave":function(e){this._elements.csuiSocialCommentInput[0].innerHTML=this._elements.csuiSocialCommentInput.val()},"updateUserProfilePicture":function(e,t){var i=t.get("initials"),n=a.getUserAvatarColor(t.attributes);if(void 0!==e&&""!==e){var o=this.$el.find("#esoc-social-comment-avatar"),s=this.$el.find("#esoc-social-default-avatar");s[0].innerText=i,o.addClass("esoc-userprofile-img-"+e),s.addClass("esoc-user-default-avatar-"+e),s.css("background",n);var l={"userid":e,"context":this.options.context,"photoElement":o,"defaultPhotElement":s}}this.util.commonUtil.setProfilePic(l)},"onCommentInputFocus":function(e){this.$el.find(".esoc-header-emoji").trigger("focus")},"onCommentFormFocus":function(t){var i=this._elements.csuiSocialCommentInput.val().trim();void 0!==i&&""!==i?this.$el.find("#esoc-social-comment-submit").prop("disabled",!1):this.$el.find("#esoc-social-comment-submit").prop("disabled",!0),t.stopPropagation(),this.$el.find(".esoc-header-emoji").addClass("emoji-wysiwyg-editor-focus"),this._elements.csuiSocialButtonsContainer.css({"display":"block"}),this.util.commonUtil.isIE()&&this.$el.find(".esoc-header-emoji").length>0&&0===this.$el.find(".esoc-header-emoji")[0].textContent.length&&this.$el.find(".esoc-header-emoji").attr("data-text",""),this.options.socialActions.attachementsEnabled||this.options.socialActions.shortcutsEnabled||(this._elements.csuiSocialButtonsContainer.addClass("esoc-social-textinput-without-attachment"),this.$el.find(".esoc-header-emoji").addClass("esoc-social-input-when-no-attachment"),this._elements.csuiSocialCommentInputHiddenData.addClass("esoc-social-input-when-no-attachment")),this._elements.csuiSocialButtonsContainer.animate({"opacity":1},0),this._elements.csuiSocialAvatarIcon.animate({"opacity":1},0),this._elements.csuiSocialButtonsContainer.show(),this._elements.csuiSocialSubmitButton.show();var n=""===this.$el.find(".esoc-header-emoji").html()||"<br>"===this.$el.find(".esoc-header-emoji").html();this.adjustCommentAreaWidth(t,n),this.$el.find(".esoc-social-attachment-popover").is(":visible")&&(this._elements.csuiSocialCommentAttachmentIcon.binf_popover("hide"),e(".esoc-social-comment-dialog-att-minheight").removeClass("esoc-social-comment-dialog-att-minheight"),e(".esoc-social-comment-dialog-minheight").removeClass("esoc-social-comment-dialog-minheight"),this.util.setCommentDialogPointer())},"adjustCommentAreaWidth":function(e,t){var i=this.$el.find(".esoc-header-emoji");t&&(i.css("width",""),i.width(this.$el.find(".esoc-header-emoji").width()-parseInt(this.$el.find("#esoc-social-comment-submit").outerWidth()+14,10)),this.$el.find("#esoc-suggestion-comment-header").width(i.outerWidth()))},"onCommentFormBlur":function(t){if(!this.$el.find(".esoc-social-comment-form-mask").is(":visible")){var i,n,o=this._elements.csuiSocialCommentInput.val(),s=this.$el.find(".esoc-header-emoji").html(),l=this.$el.find("#esoc-social-comment-desktop-attachment");l.length>0&&l[0].files&&l[0].files.length>0&&(i=l[0].files[0]),this.util.isValidInput(this._elements.csuiSocialCommentShortcut)&&(n=parseInt(this._elements.csuiSocialCommentShortcut.val(),10)),void 0!==o&&""!==o||void 0!==i&&""!==i||void 0!==n||void 0!==s&&""!==s&&"<br>"!==s||(this._elements.csuiSocialAvatarIcon.animate({"opacity":.3},0),void 0===this.options.socialActions||this.options.socialActions.attachementsEnabled||this.options.socialActions.shortcutsEnabled||(this._elements.csuiSocialButtonsContainer.removeClass("esoc-social-textinput-without-attachment"),this.$el.find(".esoc-header-emoji").removeClass("esoc-social-input-when-no-attachment"),this._elements.csuiSocialCommentInputHiddenData.removeClass("esoc-social-input-when-no-attachment")),this.$el.find(".esoc-header-emoji").removeClass("emoji-wysiwyg-editor-focus"),this._elements.csuiSocialButtonsContainer.hide(),this._elements.csuiSocialSubmitButton.hide(),this._elements.csuiSocialButtonsContainer.animate({"opacity":0},0,function(){e(this).css({"display":"none"})}),this.$el.find(".esoc-header-emoji").css("width","95%"),e("#esoc-social-comment-header").removeClass("emoji-wysiwyg-editor-focus").trigger("blur"),this.util.commonUtil.isIE()&&this.$el.find(".esoc-header-emoji").length>0&&0===this.$el.find(".esoc-header-emoji")[0].textContent.length&&e(".esoc-header-emoji").attr("data-text",this.templateHelpers().messages.writeAComment),this._elements.csuiSocialCommentAttachmentIcon.attr("data-binf-original-title")&&this._elements.csuiSocialCommentAttachmentIcon.attr("data-binf-original-title").length>0&&this.util.hideAttachmentPopup(this._elements.csuiSocialCommentAttachmentIcon,this.$el.find("#esoc-social-comment-desktop-attachment"),this.options.socialActions))}},"onCommentChange":function(e){var t=this._elements.csuiSocialCommentInput.val().trim();void 0!==t&&""!==t?this.$el.find("#esoc-social-comment-submit").prop("disabled",!1):this.$el.find("#esoc-social-comment-submit").prop("disabled",!0),this.triggerMethod("dom:refresh");var i=this._elements.csuiSocialCommentInput.val(),n=e||window.event,o=this.util.commonUtil.globalConstants.MAX_CHAR_LIMIT;if(i.length>o){var s=i.substr(0,o);this._elements.csuiSocialCommentInput[0].innerHTML=s,this._elements.csuiSocialCommentInputHiddenData.val(s),this.$el.find("#esoc-social-comment-header").html("")[0].textContent=s,this.util.commonUtil.addEmoji(this.$el.find("#esoc-social-comment-header"),!1,this.options.connector),this.$el.find("#esoc-social-comment-header").trigger("focus"),this.util.commonUtil.placeCaretAtEnd(this.$el.find("#esoc-social-comment-header")),n.preventDefault(),this.util.setCommentDialogPointer()}},"onCommentFormSubmit":function(e){e.stopPropagation(),e.preventDefault(),this._elements.csuiSocialCommentAttachmentIcon.binf_popover("hide");var i,n,o=this._elements.csuiSocialCommentInput.val().trim(),s=new FormData,l=this.$el.find("#esoc-social-comment-desktop-attachment"),a={};l.length>0&&(i=l[0].files[0]),this._elements.csuiSocialCommentShortcut.val().length>0&&(n=parseInt(this._elements.csuiSocialCommentShortcut.val(),10)),o.length&&(this.$el.find(".esoc-social-comment-form-mask").show(),this.$el.find("#esoc-social-comment-submit").html(d.posting),this.adjustCommentAreaWidth(e,!0),this.util.showMask(this.$el.find(".esoc-social-comment-form-mask")),this._elements.csuiSocialCommentInput.val(""),n?a.ATT_ID=n:i&&(a.AddDesktopDoc=i),a.status=o,a.eventtype=1,this.options.statusInfo&&this.options.statusInfo.getStatusUrl?a.in_reply_to_status_id=this.options.statusInfo.conversation_id:a.in_comment_on_obj_id=this.options.nodeID,t.each(a,function(e,t){s.append(t,e)}),new m({},{"connector":this.model.connector}).save({},{"wait":!0,"data":s,"jsonFormData":a,"currentNodeModel":this.model.currentNodeModel,"success":this.onCommentSubmitSuccess.bind(this),"error":this.onCommentSubmitFailure.bind(this,l)})),void 0===o||""===o?this.$el.find("#esoc-social-comment-header").trigger("focus"):(this.util.resetAttachmentInput(l,this.options.socialActions),this._elements.csuiSocialCommentShortcut.val(""))},"removeMask":function(e){b.$el.find("#esoc-social-comment-submit").html(d.post),b.adjustCommentAreaWidth(e,!0),b.util.hideMask(b.$el.find(".esoc-social-comment-form-mask")),b.$el.find(".esoc-social-comment-form-mask").hide()},"onCommentSubmitFailure":function(e,t,i){this._elements.csuiSocialCommentShortcut.val(""),this.$el.find(".esoc-header-emoji").html(""),this.removeMask(),this.util.hideAttachmentPopup(this._elements.csuiSocialCommentAttachmentIcon,e,this.options.socialActions);i.responseJSON?i.responseJSON.errorDetail?i.responseJSON.errorDetail:i.responseJSON.error:d.defaultErrorMessageCommentSubmit},"onCommentSubmitSuccess":function(e,t){b.options.commentAction=!0;var i=t.commentCount;void 0===i&&(i=b.model.length+1),this.model&&this.model.currentNodeModel&&this.model.currentNodeModel.set({"wnd_comments":i},{"silent":!0}),this.model&&this.model.currentNodeModel&&this.model.currentNodeModel.trigger("comment:icon:view"),b.$el.find(".esoc-header-emoji")[0].textContent="",b.removeMask(),b.onCommentFormBlur();var n=0;b.options.statusInfo&&b.options.statusInfo.getStatusUrl&&(n=1),b.util.resetAttachmentInput(b.$el.find("#esoc-social-comment-desktop-attachment"),b.options.socialActions),b._elements.csuiSocialCommentShortcut.val(""),b._elements.csuiSocialCommentAttachmentIcon.binf_popover("hide"),b.$el.find("#esoc-social-comment-input").text("").height("").trigger("blur"),b.$el.find("#esoc-social-comment-form-container").height(""),b.$el.find("#esoc-social-comment-warning").hide(),b.$el.find("#esoc-social-comment-container").scrollTop(0),b.$el.find(".esoc-header-emoji").html("").trigger("blur");var o=b.model;if(o.length>n){var s=o.at(n).id;delete o.defaults.params[b.util.commonUtil.globalConstants.MAX_ID],o.defaults.params[b.util.commonUtil.globalConstants.SINCE_ID]=s,o.fetch({"remove":!1,"at":n})}else 0===o.length&&delete o.defaults.params[b.util.commonUtil.globalConstants.MAX_ID],o.fetch({});b.$el.find(".comments-list").scrollTop(0),setTimeout(function(){b.$el.find("#esoc-social-comment-header").trigger("focus")},200),b.$el.find("#esoc-social-comment-submit").prop("disabled",!0),this.trigger("dom:refresh")},"findFocusElement":function(t){var i=e(t).find(".csui-acc-focusable");return i.length?i:t},"getCurrentObject":function(){var t=e(this.findFocusElement(this.currentTarget));return t.is(":visible")||(this.currentTarget=this.wrapperElement.find(".csui-acc-focusable"),t=this.currentTarget),t},"onCloseButton":function(t){e("[id^='esoc-social-comment-widget-mask_']").removeAttr("tabindex"),e(".cs-expanded.activityfeed-expand.esoc.cs-dialog.binf-modal.binf-fade.binf-in").attr("tabindex","-1"),e(".esoc-user-widget-dialog.cs-dialog.binf-modal.binf-fade.binf-in").attr("tabindex","-1").prop("disabled",!1);var i=this.getCurrentObject();i&&(e(i).trigger("focus"),setTimeout(function(){e(i).trigger("focus")},1)),e(document).off("keyup"),this.util.commonUtil.unbindWidget(this.options),this.disengageModalKeyboardFocusOnClose(),e(".esoc-acitivityfeed-collection").css("overflow",""),e(document.body).hasClass("binf-modal-open")&&e(document.body).hasClass("binf-comment-dialog-open")?(e(document.body).removeClass("binf-modal-open"),e(document.body).removeClass("binf-comment-dialog-open")):e(document.body).hasClass("binf-comment-dialog-open")?e(document.body).removeClass("binf-comment-dialog-open"):e(document.body).addClass("binf-modal-open")},"onEmojiPress":function(t){var i=this._elements.csuiSocialCommentDiv;this.util.hidePopover(i);var n=function(e){return e.is(":visible")?e.offset():{"top":0,"left":0}},o=n(e(this.options.baseElement)),s=n(i);parseInt(o.top-s.top,10)<150&&(e(".esoc-social-comment-dialog-att-minheight").removeClass("esoc-social-comment-dialog-att-minheight"),e(".esoc-social-comment-widget").addClass("esoc-social-comment-dialog-minheight"),this.util.setCommentDialogPointer()),t.stopPropagation()},"onAttachementPress":function(t){this.$el.find(".emoji-menu").hide(),e(".esoc-social-comment-widget").removeClass("esoc-social-comment-dialog-minheight"),this.util.setCommentDialogPointer()},"applyReplyEmoji":function(t){this.$el.find(".emoji-wysiwyg-editor").remove(),this.$el.find("#esoc-social-comment-input").emojiarea({"path":this.util.commonUtil.getEmojiPath(this.options.connector),"wysiwyg":!0,"button":".esoc-social-comment-header-emotion","id":"esoc-social-comment-header","parent":this.$el.find("#esoc-social-textinput-button-holder"),"util":this.util,"widget":e(".esoc-social-comment-widget")}),this.$el.find(".emoji-wysiwyg-editor").addClass("esoc-header-emoji").attr({"id":"esoc-social-comment-header","data-text":this.templateHelpers().messages.writeAComment}),this.listenToOnce(this.model,"sync",function(){var e={"context":this.options.context,"connector":this.options.connector,"element":this.$el.find("#esoc-social-comment-header"),"appendToElement":this.$el.find("#esoc-suggestion-comment-header")};this.util.triggerAutoCompleteSuggestion(e),this.$el.find(".emoji-wysiwyg-editor").removeAttr("autocomplete")})},"onCommentEmojiKeypress":function(e){this.util.onMentionNameEdit(e)},"onCommentEmojiMentionMouseDown":function(e){this.util.setCursorPositionAtStartOFMention(e)}});return c.mixin(v.prototype),v}),csui.define("css!esoc/widgets/socialactions/socialactions",[],function(){}),csui.define("esoc/widgets/socialactions/commentscollectionwidget",["csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/lib/jquery","csui/utils/connector","i18n!esoc/widgets/socialactions/nls/lang","esoc/widgets/socialactions/commentscollection.model","esoc/widgets/socialactions/socialactions.model","esoc/widgets/socialactions/commentscollection.view","esoc/widgets/socialactions/commentsheader.view","esoc/widgets/socialactions/util","esoc/widgets/common/util","csui/utils/contexts/factories/connector","esoc/lib/jquery-ui","css!esoc/widgets/socialactions/socialactions.css"],function(e,t,i,n,o,s,l,a,r,c,d,u,p){function m(e){n(document).on("keyup",{"callbackFun":d.commonUtil.unbindWidget,"dialogOptions":e,"util":d},d.closeCommentDialog);var t;if(e=e||{},e.CSID=e.nodeID=e.baseElement.dataset?e.baseElement.dataset.value:n(e.baseElement).attr("data-value"),""===e.CSID){var o=d.createRemoteObject(e);if(""!==o.error)return n(e.baseElement).parent().parent().find(".esoc-error-socialactions").length>0?(n(e.baseElement).parent().parent().find(".esoc-error-socialactions").show(),n(e.baseElement).parent().parent().find(".binf-panel-title").html(o.error),n(e.baseElement).hide()):n(e.baseElement).text(o.error),void(this.show=function(){});e.CSID=e.nodeID=t=o.csid,n(e.baseElement).attr("data-value",t)}else parseInt(e.CSID,10)>0?e.statusInfo={}:t=e.CSID;var s=e.socialActionsInstanse&&e.socialActionsInstanse.options.model.id?e.CSID+"_"+e.socialActionsInstanse.options.model.id:e.CSID,m="#esoc-social-comment-widget_"+s,h="#esoc-social-comment-widget-pointer_"+s,f="#esoc-social-comment-widget-mask_"+s;if(n(m).is(":visible"))n(m).remove(),n(h).remove(),n(f).remove(),this.show=function(){};else{var g,b,v;document.getElementById("esoc-social-comment-widget_"+s)?(g=document.getElementById("esoc-social-comment-widget_"+s),b=document.getElementById("esoc-social-comment-widget-pointer_"+s),v=document.getElementById("esoc-social-comment-widget-mask_"+s)):(m.indexOf("esoc-social-comment-widget")>0&&d.commonUtil.unbindWidget(this.options),g=document.createElement("div"),g.id="esoc-social-comment-widget_"+s,g.setAttribute("class","esoc-social-comment-widget esoc"),b=document.createElement("div"),b.id="esoc-social-comment-widget-pointer_"+s,v=document.createElement("div"),v.id="esoc-social-comment-widget-mask_"+s),n(document.body).hasClass("binf-modal-open")||n(document.body).addClass("binf-comment-dialog-open"),d.widgetDialog=g,d.widgetDialogPointer=b,d.widgetDialogMask=v,e.socialActionsInstanse&&e.socialActionsInstanse.model&&e.socialActionsInstanse.options.connector?e.connector=e.socialActionsInstanse.model.connector:e.connector=e.context.getObject(p),e.params={"page":1,"data_id":t},e.rockey=e.roid="",e.csid=t;var y=new a("",e);e.model=y,e.socialActionsInstanse&&(e.socialActions=e.socialActionsInstanse.model.attributes.socialactions),e.context||(e.context=e.socialActionsInstanse.options.context),d.widgetBaseElement=e.baseElement;var w=n(m);e.params={"page":1,"data_id":t};var x=new l(e);x.baseURL=e.connector.connection.url,x.nodeID=e.nodeID,x.socialActions=e.socialActions,e.maxMessageLength&&(x.maxMessageLength=e.maxMessageLength),e.model=x,this.show=function(){var t=n.fn.binf_modal.getDefaultContainer();n(t).append(v).append(g).append(b),n("[id^='esoc-social-comment-widget-mask_']").on("keydown click close",{"callbackFun":d.commonUtil.unbindWidget,"dialogOptions":e},d.closeCommentDialog),n(window).on("popstate hashchange",{"callbackFun":d.commonUtil.unbindWidget,"dialogOptions":e},d.closeCommentDialog),this.initializeWidget(),u.createEmojiIcons()},this.initializeWidget=function(){var t=new i.Region({"el":m}),o=new c(e);t.show(o),e.originatingView=t.currentView;var s=new i.Region({"el":"#esoc-social-comment-container"}),l=new r({"context":x.context,"collection":x,"commentConfigOptions":e,"commentsHeaderView":o,"sort":!0});s.show(l),x.fetch({"success":function(){o.trigger("collection:sync:callback"),e.blockingParentView&&e.blockingParentView.unblockActions()},"error":x.fetchError}),w.css({"display":"block"}),w.animate({"opacity":1}),l.listenToOnce(e.context,"change:perspective retain:perspective",function(){var e=n("[id^='esoc-social-comment-widget-mask_']");e.length&&e.trigger("close")}),e.blockingParentView&&i.triggerMethodOn(e.blockingParentView,"popover:open",this)},this.getConfig=function(){return e}}}return m}),csui.define("esoc/factory/commentmodelfactory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","esoc/widgets/utils/commentdialog/commentdialog.model"],function(e,t,i,n,o,s){"use strict";return n.extend({"propertyPrefix":"comment","constructor":function(l,a){n.prototype.constructor.apply(this,arguments);var r=this.options.comment||{},c=e.config();if(!(r instanceof i.Model)){var d={"connector":this.options.connector||l.getObject(o,a),"csid":this.options.attributes.id};r=new s(r.attributes,t.extend(d,r.options,c.options))}this.property=r},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("esoc/widgets/tablecell/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("esoc/widgets/tablecell/nls/root/lang",{"addComments":"Comments","addAComment":"Add a comment","commentCount":"comments","noComments":"No comments","oneComment":"comment"}),csui.define("esoc/controls/icons/esoc.icons.v2",[],function(){return{"esoc_no_comment32":'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve" class="csui-icon-v2 csui-icon-v2__esoc_no_comment32"><circle cx="16" cy="16" r="14" fill="none" class="csui-icon-v2-state"/><path d="M12.259,23.75v-2.955c-2.066,0-3.741-1.654-3.741-3.694v-2.956c0-2.04,1.675-3.694,3.741-3.694h7.481c2.066,0,3.741,1.654,3.741,3.694V17.1c0,2.04-1.675,3.694-3.741,3.694h-4.489L12.259,23.75z M15.868,22.295h3.873c2.877,0,5.241-2.308,5.241-5.194v-2.956c0-2.886-2.364-5.194-5.241-5.194h-7.481c-2.877,0-5.241,2.308-5.241,5.194V17.1c0,2.364,1.586,4.34,3.741,4.978v1.672c0,0.605,0.363,1.151,0.922,1.384c0.558,0.233,1.202,0.108,1.632-0.317L15.868,22.295z" fill-rule="evenodd" clip-rule="evenodd" fill="#333333" class="csui-icon-v2-metaphor0"/><circle cx="16" cy="16" r="15.5" fill="none" stroke="#2E3D98" class="csui-icon-v2-focus"/></svg>',"esoc_comment32":'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve" class="csui-icon-v2 csui-icon-v2__esoc_comment32"><circle cx="16" cy="16" r="14" fill="none" class="csui-icon-v2-state"/><path d="M19.741,22.295h-3.873l-2.554,2.523c-0.431,0.425-1.074,0.55-1.632,0.317c-0.558-0.233-0.922-0.779-0.922-1.384v-1.672C8.605,21.44,7.019,19.464,7.019,17.1v-2.956c0-2.886,2.364-5.194,5.241-5.194h7.481c2.877,0,5.241,2.308,5.241,5.194V17.1C24.981,19.986,22.617,22.295,19.741,22.295z" fill-rule="evenodd" clip-rule="evenodd" fill="#333333" class="csui-icon-v2-metaphor0"/><circle cx="16" cy="16" r="15.5" fill="none" stroke="#2E3D98" class="csui-icon-v2-focus"/></svg>'}}),csui.define("css!esoc/widgets/tablecell/impl/social",[],function(){}),
csui.define("esoc/widgets/utils/commentdialog/commentdialog.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/utils/contexts/factories/connector","esoc/widgets/utils/commentdialog/commentdialog.model","hbs!esoc/widgets/tablecell/impl/tablecell","esoc/widgets/socialactions/commentscollectionwidget","esoc/widgets/common/util","esoc/factory/commentmodelfactory","csui/utils/log","csui/utils/url","i18n!esoc/widgets/tablecell/nls/lang","esoc/controls/icons/esoc.icons.v2","css!esoc/widgets/socialactions/socialactions.css","css!esoc/widgets/tablecell/impl/social.css"],function(e,t,i,n,o,s,l,a,r,c,d,u,p){var m=null;return n.ItemView.extend({"className":"esoc-socialactions-wrapper","template":l,"templateHelpers":function(){var e={"addComments":p.addComments},t=this.model.get("wnd_comments")||0;return{"messages":e,"wnd_comments_title":t>0?t>1?t+" "+p.commentCount:t+" "+p.oneComment:"","iconName":t>0?"esoc_comment32":"esoc_no_comment32","iconTheme":this._iconTheme}},"initialize":function(t){this.options=t,m=this,e(document).on("keydown click",this.closeCommentDialog)},"events":{"click .esoc-socialactions-comment .esoc-socialactions-comment-button":"onClickComments"},"log":d,"commonUtil":r,"constructor":function(e){if(e=e||{},this._iconTheme=e.useIconsForDarkBackground?"dark":"",e.connector=e.connector?e.connector:e.context.getObject(o),e.model){this.updateSocailActions(e.model);var i=e.model.get("wnd_comments")||0,l=i>0?i>99?"99+":i:"",a=new s({"wnd_comments_validated":l,"wnd_comments":e.model.get("wnd_comments"),"socialactions":e.model.get("socialactions"),"id":e.model.get("id"),"showSocialActions":e.model.get("showSocialActions")},{"connector":e.connector,"csid":e.nodeid});e.model.attributes=t.extend(e.model.attributes,a.attributes)}else e.model=e.context.getModel(c,{"attributes":{"id":e.nodeid},"connector":e.connector}),e.model.ensureFetched();n.ItemView.prototype.constructor.call(this,e),this.model.on("change",this.render,this),this.model.on("error",this.errorHandle,this)},"errorHandle":function(e,t){var i=t.responseJSON?t.responseJSON.errorDetail?t.responseJSON.errorDetail:t.responseJSON.error:p.defaultErrorMessageCommentsFetch;m.log.info("Error Occured :"+i)},"updateSocailActions":function(e){var t=!!e.actions.get("comment");e.attributes.showSocialActions=t,e.attributes.socialactions={"attachementsEnabled":t,"chatEnabled":t,"commentingOpen":t,"commentsEnabled":t,"CSID":e.attributes.id,"likesEnabled":t,"taggingEnabled":t,"threadingEnabled":t,"shortcutEnabled":t}},"onClickComments":function(t){t.preventDefault(),t.stopPropagation(),this.options.originatingView&&this.options.originatingView._blockingCounter<1&&this.options.originatingView.blockActions();var i={"tablecellwidget":!0,"currentNodeModel":this.model,"baseElement":this.$el.find(".esoc-socialactions-comment"),"currentTarget":t.currentTarget,"socialActionsInstanse":this,"nodeID":this.options.CSID,"context":this.options.context,"blockingParentView":this.options.originatingView},n=i.nodeID;i.csId=n;var o={"url":u.combine(r.getV2Url(this.options.connector.getConnectionUrl()),"nodes",n),"type":"GET","connector":this.options.connector,"currentNodeModel":this.model,"requestType":"updateCommentCount"};r.updateAjaxCall(o);var s,l=u.combine(this.options.connector.connection.url,this.commonUtil.REST_URLS.csGetROI)+"CSID="+n;e.ajax(this.options.connector.extendAjaxOptions({"type":"GET","async":!1,"cache":!1,"url":l,"success":function(e){s=JSON.parse(JSON.stringify(e.available_settings))},"error":function(){m.log.error("Error while getting available settings")}})),this.model.attributes.socialactions=s,i.socialActionsInstanse.options.connector.connection.url=this.options.connector.connection.url,new a(i).show(),e(document.activeElement).trigger("blur")}})}),csui.define("esoc/widgets/utils/commentdialog/commentdialog",["module","require","csui/lib/jquery","csui/lib/marionette","csui/utils/connector","esoc/widgets/utils/commentdialog/commentdialog.view","csui/utils/contexts/factories/connector"],function(e,t,i,n,o,s,l){return{"getCommentButton":function(e){e.connector||(e.connector=e.context.getObject(l)),i(e.placeholder).ready(function(){var t=new n.Region({"el":i(e.placeholder)}),o=new s({"connector":e.connector,"CSID":e.nodeid,"baseElement":i(e.placeholder),"context":e.context});t.show(o)})}}}),csui.define("hbs!esoc/widgets/utils/command/comment/comment.toolitem",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return""},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"iconName"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.program(12,o,0),"loc":{"start":{"line":3,"column":2},"end":{"line":41,"column":9}}}))?s:""},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"renderIconAndText"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.program(7,o,0),"loc":{"start":{"line":4,"column":4},"end":{"line":31,"column":11}}}))?s:""},"5":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a href="#" class="needsclick csui-acc-focusable csui-toolitem csui-toolitem-iconandtext"\r\n         tabindex="-1" data-cstabindex="-1" title= "'+e.escapeExpression((l=null!=(l=a(i,"commentTooltip")||(null!=t?a(t,"commentTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"commentTooltip","hash":{},"loc":{"start":{"line":6,"column":52},"end":{"line":6,"column":70}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=a(i,"wnd_comments_title")||(null!=t?a(t,"wnd_comments_title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_title","hash":{},"loc":{"start":{"line":6,"column":84},"end":{"line":6,"column":106}}}):l))+'">\r\n        '+(null!=(s=(a(i,"icon-v2")||t&&a(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","iconName":null!=t?a(t,"iconName"):t},"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":53}}}))?s:"")+"\r\n        <span>"+e.escapeExpression((l=null!=(l=a(i,"name")||(null!=t?a(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":14},"end":{"line":8,"column":22}}}):l))+'</span>\r\n        <span title="'+e.escapeExpression((l=null!=(l=a(i,"wnd_comments_title")||(null!=t?a(t,"wnd_comments_title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_title","hash":{},"loc":{"start":{"line":9,"column":21},"end":{"line":9,"column":43}}}):l))+'"\r\n              class="cs-text wnd-comment-count wnd_comments_validated"\r\n              data-csid="'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":11,"column":25},"end":{"line":11,"column":31}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"wnd_comments_validated")||(null!=t?a(t,"wnd_comments_validated"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_validated","hash":{},"loc":{"start":{"line":11,"column":33},"end":{"line":11,"column":59}}}):l))+"</span>\r\n      </a>\r\n"},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"renderTextOnly"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.program(10,o,0),"loc":{"start":{"line":14,"column":6},"end":{"line":30,"column":13}}}))?s:""},"8":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <a href="#" class="needsclick csui-toolitem csui-toolitem-textonly csui-acc-focusable"\r\n           tabindex="-1" data-cstabindex="-1" title= "'+e.escapeExpression((s=null!=(s=l(i,"commentTooltip")||(null!=t?l(t,"commentTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"commentTooltip","hash":{},"loc":{"start":{"line":16,"column":54},"end":{"line":16,"column":72}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"wnd_comments_title")||(null!=t?l(t,"wnd_comments_title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_title","hash":{},"loc":{"start":{"line":16,"column":86},"end":{"line":16,"column":108}}}):s))+'">\r\n          <span>'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":17,"column":16},"end":{"line":17,"column":24}}}):s))+'</span>\r\n          <span title="'+e.escapeExpression((s=null!=(s=l(i,"wnd_comments_title")||(null!=t?l(t,"wnd_comments_title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_title","hash":{},"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":45}}}):s))+'"\r\n                class="cs-text wnd-comment-count wnd_comments_validated"\r\n                data-csid="'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":20,"column":27},"end":{"line":20,"column":33}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"wnd_comments_validated")||(null!=t?l(t,"wnd_comments_validated"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_validated","hash":{},"loc":{"start":{"line":20,"column":35},"end":{"line":20,"column":61}}}):s))+"</span>\r\n        </a>\r\n"},"10":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <a href="#" class="needsclick csui-toolitem csui-toolitem-icononly csui-acc-focusable"\r\n           tabindex="-1" data-cstabindex="-1" title= "'+e.escapeExpression((l=null!=(l=a(i,"commentTooltip")||(null!=t?a(t,"commentTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"commentTooltip","hash":{},"loc":{"start":{"line":24,"column":54},"end":{"line":24,"column":72}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=a(i,"wnd_comments_title")||(null!=t?a(t,"wnd_comments_title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_title","hash":{},"loc":{"start":{"line":24,"column":86},"end":{"line":24,"column":108}}}):l))+'">\r\n          '+(null!=(s=(a(i,"icon-v2")||t&&a(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","theme":null!=t?a(t,"iconTheme"):t,"iconName":null!=t?a(t,"iconName"):t},"loc":{"start":{"line":25,"column":10},"end":{"line":25,"column":71}}}))?s:"")+'\r\n          <span title="'+e.escapeExpression((l=null!=(l=a(i,"wnd_comments_title")||(null!=t?a(t,"wnd_comments_title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_title","hash":{},"loc":{"start":{"line":26,"column":23},"end":{"line":26,"column":45}}}):l))+'"\r\n                class="cs-text wnd-comment-count wnd_comments_validated"\r\n                data-csid="'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":28,"column":27},"end":{"line":28,"column":33}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"wnd_comments_validated")||(null!=t?a(t,"wnd_comments_validated"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_validated","hash":{},"loc":{"start":{"line":28,"column":35},"end":{"line":28,"column":61}}}):l))+"</span>\r\n        </a>\r\n"},"12":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <a href="#" class="needsclick csui-toolitem csui-toolitem-textonly csui-acc-focusable"\r\n       tabindex="-1" data-cstabindex="-1" title= "'+e.escapeExpression((s=null!=(s=l(i,"commentTooltip")||(null!=t?l(t,"commentTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"commentTooltip","hash":{},"loc":{"start":{"line":34,"column":50},"end":{"line":34,"column":68}}}):s))+'"\r\n       aria-label="'+e.escapeExpression((s=null!=(s=l(i,"wnd_comments_title")||(null!=t?l(t,"wnd_comments_title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_title","hash":{},"loc":{"start":{"line":35,"column":19},"end":{"line":35,"column":41}}}):s))+'">\r\n      <span>'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":20}}}):s))+'</span>\r\n      <span title="'+e.escapeExpression((s=null!=(s=l(i,"wnd_comments_title")||(null!=t?l(t,"wnd_comments_title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_title","hash":{},"loc":{"start":{"line":37,"column":19},"end":{"line":37,"column":41}}}):s))+'"\r\n            class="cs-text wnd-comment-count wnd_comments_validated"\r\n            data-csid="'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":39,"column":23},"end":{"line":39,"column":29}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"wnd_comments_validated")||(null!=t?l(t,"wnd_comments_validated"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"wnd_comments_validated","hash":{},"loc":{"start":{"line":39,"column":31},"end":{"line":39,"column":57}}}):s))+"</span>\r\n    </a>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isSeparator"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":42,"column":7}}}))?s:""}});return i.registerPartial("esoc_widgets_utils_command_comment_comment.toolitem",n),n}),csui.define("esoc/widgets/utils/command/comment/comment.toolitem.view",["module","csui/lib/jquery","csui/lib/underscore","csui/utils/log","hbs!esoc/widgets/utils/command/comment/comment.toolitem","csui/controls/toolbar/toolitem.view","i18n!esoc/widgets/tablecell/nls/lang","esoc/controls/icons/esoc.icons.v2"],function(e,t,i,n,o,s,l){return s.extend({"tagName":"li","template":o,"templateHelpers":function(){var e=this.nodeModel.get("wnd_comments");return{"iconName":e>0?"esoc_comment32":"esoc_no_comment32","iconTheme":this._iconTheme,"renderIconAndText":!0===this.options.renderIconAndText,"renderTextOnly":!0===this.options.renderTextOnly,"isSeparator":this.model.isSeparator(),"id":this.model.attributes.commandData.id,"wnd_comments_title":this._getCommentsTitle(e),"wnd_comments_validated":e>99?"99+":e>0?e:"","commentTooltip":l.addComments}},"constructor":function(e){e||(e={}),s.prototype.constructor.apply(this,arguments),this.nodeModel=this.model.get("commandData").currentNodeModel,this.listenTo(this.nodeModel,"change comment:icon:view",this.render),this._iconTheme=e.useIconsForDarkBackground?"dark":""},"_getCommentsTitle":function(e){return Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},e=Number.isInteger(e)?e:0,1!==e?e+" "+l.commentCount:"1 "+l.oneComment}})}),csui.define("esoc/commands/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("esoc/commands/nls/root/lang",{"commentLabel":"Comment"}),csui.define("esoc/commands/comment/comment.command",["require","csui/lib/marionette","csui/lib/jquery","csui/lib/underscore","csui/utils/commandhelper","csui/utils/commands/node","csui/utils/command.error","csui/utils/url","i18n!esoc/commands/nls/lang"],function(e,t,i,n,o,s,l,a,r){"use strict";return s.extend({"constructor":function(e,t){s.prototype.constructor.call(this,arguments);var i=this;csui.require(["esoc/widgets/utils/command/comment/comment.toolitem.view"],function(e){i.customView=e})},"defaults":{"signature":"Comment","command_key":["comment","Comment"],"scope":"single","name":r.name,"verb":r.verb,"doneVerb":r.doneVerb},"enabled":function(e){var t;return e&&e.data?(t=e.data.useContainer?e.container:o.getJustOneNode(e))&&e.toolItem&&e.toolItem.set({"commandData":n.defaults({"currentNodeModel":t,"wnd_comments":t.get("wnd_comments"),"id":t.get("id"),"customView":this.customView},e.toolItem.get("commandData"))}):t=o.getJustOneNode(e),t&&!!t.actions.get("comment")},"execute":function(e,t){var s=e.data&&e.data.useContainer?e.container:o.getJustOneNode(e),r=i.Deferred();return csui.require(["esoc/widgets/socialactions/commentscollectionwidget","esoc/widgets/common/util"],function(t,i){var o,c=void 0!==window.require?window.require.s.contexts._.config:window.csui.require.s.contexts._.config,d=n.extend(c,{"tablecellwidget":!0,"currentNodeModel":s,"nodeID":s.get("id"),"CSID":s.get("id"),"context":e.context,"baseElement":e.toolItemView.$el,"connector":s.connector,"currentTarget":document.activeElement}),u=a.combine(s.connector.connection.url,i.REST_URLS.csGetROI)+"CSID="+d.CSID;e.originatingView&&(d.blockingParentView=e.originatingView,e.originatingView._blockingCounter<1&&e.originatingView.blockActions()),s.connector.makeAjaxCall({"type":"GET","cache":!1,"url":u,"success":function(e){o=JSON.parse(JSON.stringify(e.available_settings)),s.attributes.socialactions=o,d.socialActions=o,d.baseElement.dataset={"value":s.get("id")},new t(d).show(),r.resolve()},"error":function(t,i){e.originatingView&&e.originatingView.unblockActions(),r.reject(new l(i))}})},function(e){r.reject(new l(e))}),r.promise()}})}),csui.define("esoc/commands/open.roi",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,t){return t.extend({"defaults":{"signature":"OpenROI"},"enabled":function(t){var i=e.getJustOneNode(t);return i&&952===i.get("type")},"getUrlQueryParameters":function(e,t){return{"func":"ll","objAction":"info","objId":e.get("id"),"nexturl":location.href}}})}),csui.define("esoc/widgets/utils/esocactionitems",[],function(){"use strict";return[{"type":952,"signature":"OpenROI","sequence":20}]}),csui.define("css!esoc/widgets/utils/esocnodesprites",[],function(){}),csui.define("esoc/widgets/utils/esocnodesprites",["css!esoc/widgets/utils/esocnodesprites"],function(){"use strict";return[{"equals":{"type":951},"className":"csui-icon esoc-icon-pulse-roc","mimeType":"Remote Object Container","sequence":100},{"equals":{"type":952},"className":"csui-icon esoc-icon-pulse-roi","mimeType":"Remote Object Instance","sequence":100},{"equals":{"type":907},"className":"csui-icon esoc-icon-activity-manager","sequence":1e3}]}),csui.define("hbs!esoc/widgets/socialactions/socialactions",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="esoc-socialactions-getcomments" data-value="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"socialactions"):t)?l(s,"CSID"):s,t))+'">\r\n            <div class="binf-btn binf-btn-primary"> '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"comments"):s,t))+" </div>\r\n        </span>\r\n"},"3":function(e,t,i,n,o){return'      <span>\r\n        <div class="binf-btn binf-btn-success">Like</div>\r\n      </span>\r\n'},"5":function(e,t,i,n,o){return'      <span>\r\n        <div class="binf-btn btn-binf-warning">Tag</div>\r\n      </span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span>\r\n  <div class="esoc-error-socialactions" style="display: none;">\r\n    <div class="binf-panel-danger">\r\n      <div class="binf-panel-heading">\r\n        <h4 class="binf-panel-title"></h4>\r\n      </div>\r\n    </div>\r\n  </div>\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"socialactions"):t)?l(s,"commentsEnabled"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":9,"column":2},"end":{"line":13,"column":9}}}))?s:"")+"  \x3c!--\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"socialactions"):t)?l(s,"likesEnabled"):s,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":15,"column":4},"end":{"line":19,"column":11}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"socialactions"):t)?l(s,"taggingEnabled"):s,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":20,"column":4},"end":{"line":24,"column":11}}}))?s:"")+"  --\x3e\r\n</span>\r\n"}});return i.registerPartial("esoc_widgets_socialactions_socialactions",n),n}),csui.define("esoc/widgets/socialactions/socialactions.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","esoc/widgets/socialactions/socialactions.model","i18n!esoc/widgets/socialactions/nls/lang","hbs!esoc/widgets/socialactions/socialactions","esoc/widgets/socialactions/commentscollectionwidget","css!esoc/widgets/socialactions/socialactions.css"],function(e,t,i,n,o,s,l,a){var r=null;return n.ItemView.extend({"className":"esoc-socialactions-wrapper panel panel-default","template":l,"templateHelpers":function(){return{"messages":{"comments":s.comments}}},"initialize":function(t){this.options=t,r=this,e(document).on("keydown click",this.closeCommentDialog)},"events":{"click .esoc-socialactions-getcomments":"getComments","click .esoc-socialactions-getlikes":"getLikes","click .esoc-socialactions-gettags":"getTags"},"constructor":function(e){e=e||{},e.model||(e.model=new o(void 0,{"connector":e.connector,"rockey":e.rockey,"roid":e.roid,"csid":e.csid}),e.model.fetch()),n.ItemView.prototype.constructor.call(this,e),this.model.on("change",this.render,this),this.model.on("error",this.errorHandle,this)},"errorHandle":function(e,t){this.$el.find(".esoc-error-socialactions").show(),this.$el.find(".binf-panel-title").html(t.responseJSON.error)},"getComments":function(e){var t={"baseElement":this.$el.find(".esoc-socialactions-getcomments"),"socialActionsInstanse":this,"maxMessageLength":this.options.maxMessageLength,"context":this.options.context};new a(t).show()}})}),csui.define("esoc/widgets/socialactions/socialactions.main",["module","require","csui/lib/jquery","csui/lib/marionette","csui/utils/connector","csui/utils/namedsessionstorage","esoc/widgets/socialactions/socialactions.view","csui/utils/contexts/factories/connector"],function(e,t,i,n,o,s,l,a){function r(e){e.connector||(e.connector=e.context.getObject(a));var t=new s;i(e.placeholder).ready(function(){i(e.placeholder).each(function(){var o=new n.Region({"el":i(this)}),s=i(this).data("rockey"),a=i(this).data("roid");void 0!==t.get(s+a)&&t.get(s+a).length>0&&i(this).attr("data-csid",t.get(s+a));var r=new l({"connector":e.connector,"context":e.context,"rockey":s,"roid":a,"csid":i(this).data("csid"),"baseElement":i(this),"maxMessageLength":e.config_settings.maxMessageLength});o.show(r)})})}return r}),csui.define("hbs!esoc/widgets/activityfeedwidget/activityfeed",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'  <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-comment-list-divider"></div>\r\n'},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"actionType"):s,t))+"\r\n"},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"textmsg"):s,t))+"\r\n"},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="esoc-social-comment-timestamp">'+e.escapeExpression((s=null!=(s=l(i,"created_at_iso8601")||(null!=t?l(t,"created_at_iso8601"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"created_at_iso8601","hash":{},"loc":{"start":{"line":23,"column":56},"end":{"line":23,"column":78}}}):s))+"</span>\r\n"},"9":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="esoc-social-comment-timestamp">\r\n              <span class="esoc-social-comment-timestamp-ago" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"modifiedAt"):s,t))+'">\r\n              </span>\r\n              '+e.escapeExpression((l=null!=(l=a(i,"modified_at_iso8601")||(null!=t?a(t,"modified_at_iso8601"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"modified_at_iso8601","hash":{},"loc":{"start":{"line":28,"column":14},"end":{"line":28,"column":37}}}):l))+"\r\n            </span>\r\n"},"11":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="esoc-social-comment-list-actions">\r\n            <div class="esoc-social-comment-container esoc-socialactions-getcomments">\r\n              <span class="esoc-activity-feed-comment esoc-socialactions-comment">\r\n                <button class="esoc-socialactions-comment-button cs-icon-comment"\r\n                        data-value='+e.escapeExpression((l=null!=(l=a(i,"data_id")||(null!=t?a(t,"data_id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"data_id","hash":{},"loc":{"start":{"line":37,"column":35},"end":{"line":37,"column":46}}}):l))+' title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"comments"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"comments"):s,t))+'">\r\n                  '+(null!=(s=(a(i,"icon-v2")||t&&a(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","theme":null!=t?a(t,"iconTheme"):t,"iconName":null!=t?a(t,"iconName"):t},"loc":{"start":{"line":38,"column":18},"end":{"line":38,"column":79}}}))?s:"")+"\r\n                </button>\r\n              </span>\r\n            </div>\r\n          </div>\r\n"},"13":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-comment-msg">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,{"name":"if","hash":{},"fn":e.program(14,o,0),"inverse":e.program(16,o,0),"loc":{"start":{"line":49,"column":10},"end":{"line":66,"column":17}}}))?s:"")+"      </div>\r\n"},"14":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span>\r\n            <span class="esoc-activity-object-info '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"inactiveClass"):s,t))+'">\r\n              <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-social-mime-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></a>\r\n              <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-object-name"\r\n                title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+"</a>\r\n            </span>\r\n          </span>\r\n"},"16":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span>\r\n            <span class="esoc-activity-object-info '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"inactiveClass"):s,t))+'">\r\n              <span class="esoc-social-no-link-mime-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></span>\r\n              <span class="esoc-object-no-link-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+"</span>\r\n            </span>\r\n          </span>\r\n"},"18":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 2",{"name":"xif","hash":{},"fn":e.program(19,o,0),"inverse":e.noop,"loc":{"start":{"line":68,"column":4},"end":{"line":75,"column":4}}}))?s:""},"19":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-comment-msg">\r\n        <span class="esoc-status-feed-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"statusfeed"):s,t))+'"></span>\r\n        <span class="esoc-social-comment-details esoc-reply-user-widget"></span>\r\n        <span class="esoc-activityfeed-status-action"> '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"status"):s,t))+"</span>\r\n        </span>\r\n      </div>\r\n    "},"21":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-social-comment-data">\r\n          <span class="esoc-activity-object-info '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"inactiveClass"):s,t))+'">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,{"name":"if","hash":{},"fn":e.program(22,o,0),"inverse":e.program(27,o,0),"loc":{"start":{"line":83,"column":12},"end":{"line":113,"column":19}}}))?s:"")+"          </span>\r\n        </div>\r\n"+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.sgm_description != ''",{"name":"xif","hash":{},"fn":e.program(32,o,0),"inverse":e.noop,"loc":{"start":{"line":116,"column":8},
"end":{"line":128,"column":16}}}))?s:"")+"\r\n"},"22":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(23,o,0),"inverse":e.noop,"loc":{"start":{"line":84,"column":16},"end":{"line":90,"column":24}}}))?s:"")+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.subtype != this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(25,o,0),"inverse":e.noop,"loc":{"start":{"line":91,"column":16},"end":{"line":95,"column":24}}}))?s:"")+'                <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-object-name"\r\n                  title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+"</a>\r\n"},"23":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                  <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-social-mime-icon csui-icon-group"\r\n                    title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">\r\n                    <span class="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'"></span>\r\n                    <span class="csui-icon csui-icon-shortcut-overlay"></span>\r\n                  </a>\r\n'},"25":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                  <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-social-mime-icon  '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"\r\n                    aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></a>\r\n'},"27":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(28,o,0),"inverse":e.noop,"loc":{"start":{"line":99,"column":16},"end":{"line":105,"column":24}}}))?s:"")+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.subtype != this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(30,o,0),"inverse":e.noop,"loc":{"start":{"line":106,"column":16},"end":{"line":110,"column":24}}}))?s:"")+'                <span class="esoc-object-no-link-name"\r\n                  title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+"</span>\r\n"},"28":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                  <span class="esoc-social-no-link-mime-icon csui-icon-group"\r\n                    title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">\r\n                    <span class="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'"></span>\r\n                    <span class="csui-icon csui-icon-shortcut-overlay"></span>\r\n                  </span>\r\n'},"30":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                  <span class="esoc-social-no-link-mime-icon  '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"\r\n                    aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></span>\r\n'},"32":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="esoc-extended-view-mode">\r\n            <div class="esoc-social-comment-data">\r\n              <div class="esoc-description">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"sgm_description"):s,t))+'</div>\r\n            </div>\r\n            <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'"\r\n               class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'">\r\n              <span class="icon-arrow-down"></span></a>\r\n            <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'"\r\n               class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'">\r\n              <span class="icon-arrow-up"></span></a>\r\n          </div>\r\n'},"34":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 8",{"name":"xif","hash":{},"fn":e.program(35,o,0),"inverse":e.program(37,o,0),"loc":{"start":{"line":130,"column":6},"end":{"line":190,"column":6}}}))?s:""},"35":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-social-comment-data">\r\n          <span class="esoc-activity-object-info '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"inactiveClass"):s,t))+'">\r\n            <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-social-mime-icon\r\n            '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"\r\n               aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></a>\r\n            <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'"\r\n               class="esoc-object-name  esoc-object-name-with-version"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'</a>\r\n            <span class="esoc-social-version">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"version"):s,t))+'</span>\r\n            <span class="esoc-version-number">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"version_name"):s,t))+"</span>\r\n          </span>\r\n        </div>\r\n"+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.sgm_description != ''",{"name":"xif","hash":{},"fn":e.program(32,o,0),"inverse":e.noop,"loc":{"start":{"line":143,"column":8},"end":{"line":155,"column":16}}}))?s:"")+"\r\n"},"37":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 9",{"name":"xif","hash":{},"fn":e.program(38,o,0),"inverse":e.program(40,o,0),"loc":{"start":{"line":157,"column":6},"end":{"line":190,"column":6}}}))?s:""},"38":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-extended-view-mode">\r\n          <div class="esoc-social-comment-data"></div>\r\n          <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'"\r\n             class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'">\r\n            <span class="icon-arrow-down"></span></a>\r\n          <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'"\r\n             class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'">\r\n            <span class="icon-arrow-up"></span></a>\r\n        </div>\r\n      \x3c!-- for this event type (4), the content \'commentText\' is escaped at the back-end except\r\n           for the required html to be embedded, which is back-end generated and safe.\r\n           So it is required here to not escape it (JIRA : ESOC-9929)--\x3e\r\n'},"40":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 4",{"name":"xif","hash":{},"fn":e.program(41,o,0),"inverse":e.program(43,o,0),"loc":{"start":{"line":170,"column":6},"end":{"line":190,"column":6}}}))?s:""},"41":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="esoc-extended-view-mode">\r\n            <div class="esoc-social-comment-data">'+(null!=(l=null!=(l=a(i,"commentText")||(null!=t?a(t,"commentText"):t))?l:e.hooks.helperMissing,s="function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"commentText","hash":{},"loc":{"start":{"line":172,"column":50},"end":{"line":172,"column":67}}}):l)?s:"")+'</div>\r\n            <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'"\r\n               class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'">\r\n              <span class="icon-arrow-down"></span></a>\r\n            <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'"\r\n               class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'">\r\n              <span class="icon-arrow-up"></span></a>\r\n          </div>\r\n'},"43":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-extended-view-mode">\r\n          <div class="esoc-social-comment-data">'+e.escapeExpression((l=null!=(l=a(i,"commentText")||(null!=t?a(t,"commentText"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"commentText","hash":{},"loc":{"start":{"line":182,"column":48},"end":{"line":182,"column":63}}}):l))+'</div>\r\n          <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'"\r\n             class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'">\r\n            <span class="icon-arrow-down"></span></a>\r\n          <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'"\r\n             class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'">\r\n            <span class="icon-arrow-up"></span></a>\r\n        </div>\r\n      '},"45":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-social-attachment '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentInactiveClass"):s,t))+'">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"isBwsNode"):s,{"name":"if","hash":{},"fn":e.program(46,o,0),"inverse":e.program(52,o,0),"loc":{"start":{"line":197,"column":8},"end":{"line":225,"column":15}}}))?s:"")+"      </div>\r\n"},"46":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(47,o,0),"inverse":e.program(49,o,0),"loc":{"start":{"line":198,"column":10},"end":{"line":208,"column":18}}}))?s:"")+'          <span class="esoc-header-view-object-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+"</span>\r\n"},"47":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="csui-icon-group esoc-social-no-link-mime-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'">\r\n            <span class="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentMimeTypeClass"):s,t))+'"></span>\r\n            <span class="csui-icon csui-icon-shortcut-overlay"></span>\r\n          </span>\r\n'},"49":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages\r\n                .documentAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(50,o,0),"inverse":e.noop,"loc":{"start":{"line":203,"column":10},"end":{"line":208,"column":10}}}))?s:""},"50":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="esoc-social-no-link-mime-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentMimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'"\r\n            aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'"></span>\r\n          '},"52":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(53,o,0),"inverse":e.program(55,o,0),"loc":{"start":{"line":212,"column":10},"end":{"line":222,"column":18}}}))?s:"")+'          <a href="javascript:void(0);" class="esoc-social-attachment-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+"</a>\r\n"},"53":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="csui-icon-group esoc-social-attachment-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'">\r\n            <span class="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentMimeTypeClass"):s,t))+'"></span>\r\n            <span class="csui-icon csui-icon-shortcut-overlay"></span>\r\n          </span>\r\n'},"55":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages\r\n                .documentAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(56,o,0),"inverse":e.noop,"loc":{"start":{"line":217,"column":10},"end":{"line":222,"column":10}}}))?s:""},"56":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <a href="javascript:void(0);" class="esoc-social-attachment-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentMimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'"\r\n            aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'"></a>\r\n          '},"58":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div id="'+e.escapeExpression((s=null!=(s=l(i,"uniqueId")||(null!=t?l(t,"uniqueId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"uniqueId","hash":{},"loc":{"start":{"line":231,"column":11},"end":{"line":231,"column":23}}}):s))+'" class="esoc-social-activity-load-more"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"messages"):t)?a(s,"isFirstItem"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":3,"column":7}}}))?s:"")+'<a href="javascript:void(0);" class="esoc-activity-focus-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"userProfileLink"):s,t))+'"></a>\r\n<div class="esoc-profileimg-block">\r\n    <span class="esoc-userprofile-img">\r\n        <img class="esoc-userprofile-img-'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"user"):t)?a(s,"id"):s,t))+' binf-img-circle" src="" />\r\n    </span>\r\n</div>\r\n<div class="esoc-commentinfo-block-wrapper binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n  <div class="esoc-commentinfo-block binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <div class="esoc-social-comment-details">\r\n      <div class="esoc-comment-user-details binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n        <span class="esoc-user-widget"></span>\r\n        <span class="esoc-activityfeed-actiontype">\r\n'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 4 || this.feed_event_type == 2",{"name":"xif","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":16,"column":10},"end":{"line":18,"column":18}}}))?s:"")+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 7 || this.feed_event_type == 8",{"name":"xif","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":19,"column":10},"end":{"line":21,"column":18}}}))?s:"")+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.modified_at_iso8601 == ''",{"name":"xif","hash":{},"fn":e.program(7,o,0),"inverse":e.program(9,o,0),"loc":{"start":{"line":22,"column":10},"end":{"line":30,"column":18}}}))?s:"")+"        </span>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"messages"):t)?a(s,"enableComments"):s,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"loc":{"start":{"line":32,"column":8},"end":{"line":43,"column":15}}}))?s:"")+"\r\n      </div>\r\n    </div>\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 4",{"name":"xif","hash":{},"fn":e.program(13,o,0),"inverse":e.program(18,o,0),"loc":{"start":{"line":47,"column":4},"end":{"line":75,"column":12}}}))?s:"")+'  </div>\r\n\r\n  <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <div id="esoc-social-comment-input-holder-'+e.escapeExpression((l=null!=(l=a(i,"uniqueId")||(null!=t?a(t,"uniqueId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"uniqueId","hash":{},"loc":{"start":{"line":79,"column":46},"end":{"line":79,"column":58}}}):l))+'">\r\n'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 7",{"name":"xif","hash":{},"fn":e.program(21,o,0),"inverse":e.program(34,o,0),"loc":{"start":{"line":80,"column":6},"end":{"line":190,"column":14}}}))?s:"")+"    </div>\r\n\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_id != '' && (this.extended_info.attachment_subtype ==\r\n    this.messages.shortcutAttachmentSubtype || this.extended_info.attachment_subtype == this\r\n    .messages.documentAttachmentSubtype)",{"name":"xif","hash":{},"fn":e.program(45,o,0),"inverse":e.noop,"loc":{"start":{"line":193,"column":4},"end":{"line":227,"column":12}}}))?s:"")+"  </div>\r\n</div>\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.noMoreData == false",{"name":"xif","hash":{},"fn":e.program(58,o,0),"inverse":e.noop,"loc":{"start":{"line":230,"column":0},"end":{"line":232,"column":8}}}))?s:"")+'<span class="esoc-social-comment-delete"></span>\r\n'}});return i.registerPartial("esoc_widgets_activityfeedwidget_activityfeed",n),n}),csui.define("hbs!esoc/widgets/activityfeedwidget/activityfeedstandard",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'  <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-comment-list-divider"></div>\r\n'},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"actionType"):s,t))+"\r\n"},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"textmsg"):s,t))+"\r\n"},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="esoc-social-comment-timestamp">'+e.escapeExpression((s=null!=(s=l(i,"created_at_iso8601")||(null!=t?l(t,"created_at_iso8601"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"created_at_iso8601","hash":{},"loc":{"start":{"line":23,"column":56},"end":{"line":23,"column":78}}}):s))+"</span>\r\n"},"9":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="esoc-social-comment-timestamp">\r\n              <span class="esoc-social-comment-timestamp-ago" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"modifiedAt"):s,t))+'">\r\n            </span>\r\n              '+e.escapeExpression((l=null!=(l=a(i,"modified_at_iso8601")||(null!=t?a(t,"modified_at_iso8601"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"modified_at_iso8601","hash":{},"loc":{"start":{"line":28,"column":14},"end":{"line":28,"column":37}}}):l))+"\r\n            </span>\r\n"},"11":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-social-comment-list-actions">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"enableComments"):s,{"name":"if","hash":{},"fn":e.program(12,o,0),"inverse":e.noop,"loc":{"start":{"line":34,"column":10},"end":{"line":44,"column":17}}}))?s:"")+"        </div>\r\n"},"12":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="esoc-social-comment-container esoc-socialactions-getcomments">\r\n               <span class="esoc-activity-feed-comment esoc-socialactions-comment">\r\n                 <button class="esoc-social-comment-container esoc-socialactions-comment-button\r\n                  cs-icon-comment" data-value='+e.escapeExpression((l=null!=(l=a(i,"data_id")||(null!=t?a(t,"data_id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"data_id","hash":{},"loc":{"start":{"line":38,"column":46},"end":{"line":38,"column":57}}}):l))+' title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"comments"):s,t))+'"\r\n                         aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"comments"):s,t))+'">\r\n                   3'+(null!=(s=(a(i,"icon-v2")||t&&a(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","theme":null!=t?a(t,"iconTheme"):t,"iconName":null!=t?a(t,"iconName"):t},"loc":{"start":{"line":40,"column":20},"end":{"line":40,"column":81}}}))?s:"")+"\r\n                 </button>\r\n               </span>\r\n            </div>\r\n"},"14":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="esoc-comment-msg">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,{"name":"if","hash":{},"fn":e.program(15,o,0),"inverse":e.program(17,o,0),"loc":{"start":{"line":51,"column":8},"end":{"line":68,"column":15}}}))?s:"")+"    </div>\r\n"},"15":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span>\r\n          <span class="esoc-activity-object-info '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"inactiveClass"):s,t))+'">\r\n            <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-social-mime-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></a>\r\n            <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-object-name"\r\n              title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+"</a>\r\n          </span>\r\n        </span>\r\n"},"17":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span>\r\n          <span class="esoc-activity-object-info '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"inactiveClass"):s,t))+'">\r\n            <span class="esoc-social-no-link-mime-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></span>\r\n            <span class="esoc-object-no-link-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+"</span>\r\n          </span>\r\n        </span>\r\n"},"19":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 2",{"name":"xif","hash":{},"fn":e.program(20,o,0),"inverse":e.noop,"loc":{"start":{"line":70,"column":2},"end":{"line":77,"column":2}}}))?s:""},"20":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-comment-msg">\r\n        <span class="esoc-status-feed-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"statusfeed"):s,t))+'"></span>\r\n        <span class="esoc-social-comment-details esoc-reply-user-widget"></span>\r\n        <span class="esoc-activityfeed-status-action"> '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"status"):s,t))+"</span>\r\n        </span>\r\n      </div>\r\n  "},"22":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-social-comment-data">\r\n      <span class="esoc-activity-object-info '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"inactiveClass"):s,t))+'">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,{"name":"if","hash":{},"fn":e.program(23,o,0),"inverse":e.program(28,o,0),"loc":{"start":{"line":85,"column":10},"end":{"line":113,"column":17}}}))?s:"")+"       </span>\r\n      </div>\r\n"+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.sgm_description != ''",{"name":"xif","hash":{},"fn":e.program(33,o,0),"inverse":e.noop,"loc":{"start":{"line":116,"column":4},"end":{"line":128,"column":12}}}))?s:"")},"23":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(24,o,0),"inverse":e.noop,"loc":{"start":{"line":86,"column":14},"end":{"line":92,"column":22}}}))?s:"")+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.subtype != this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(26,o,0),"inverse":e.noop,"loc":{"start":{"line":93,"column":14},
"end":{"line":96,"column":22}}}))?s:"")+'              <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-object-name"\r\n                title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+"</a>\r\n"},"24":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-social-mime-icon csui-icon-group" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"\r\n                aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">\r\n                <span class="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'"></span>\r\n                <span class="csui-icon csui-icon-shortcut-overlay"></span>\r\n              </a>\r\n'},"26":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-social-mime-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></a>\r\n'},"28":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(29,o,0),"inverse":e.noop,"loc":{"start":{"line":100,"column":14},"end":{"line":106,"column":22}}}))?s:"")+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.subtype != this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(31,o,0),"inverse":e.noop,"loc":{"start":{"line":107,"column":14},"end":{"line":110,"column":22}}}))?s:"")+'              <span href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-object-no-link-name"\r\n                title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+"</span>\r\n"},"29":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <span class="esoc-social-no-link-mime-icon csui-icon-group" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"\r\n                aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">\r\n                <span class="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'"></span>\r\n                <span class="csui-icon csui-icon-shortcut-overlay"></span>\r\n              </span>\r\n'},"31":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <span class="esoc-social-no-link-mime-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></span>\r\n'},"33":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-extended-view-mode">\r\n          <div class="esoc-social-comment-data">\r\n            <div class="esoc-description">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"sgm_description"):s,t))+'</div>\r\n          </div>\r\n          <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'"\r\n             class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'">\r\n            <span class="icon-arrow-down"></span></a>\r\n          <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'"\r\n             class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'">\r\n            <span class="icon-arrow-up"></span></a>\r\n        </div>\r\n'},"35":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 8",{"name":"xif","hash":{},"fn":e.program(36,o,0),"inverse":e.program(39,o,0),"loc":{"start":{"line":129,"column":4},"end":{"line":189,"column":6}}}))?s:""},"36":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-social-comment-data">\r\n           <span class="esoc-activity-object-info '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"inactiveClass"):s,t))+'">\r\n              <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-social-mime-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"\r\n                 aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></a>\r\n              <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'"\r\n                 class="esoc-object-name  esoc-object-name-with-version"\r\n                 title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'</a>\r\n              <span class="esoc-social-version">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"version"):s,t))+'</span>\r\n              <span class="esoc-version-number">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"version_name"):s,t))+"</span>\r\n            </span>\r\n        </div>\r\n"+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.sgm_description != ''",{"name":"xif","hash":{},"fn":e.program(37,o,0),"inverse":e.noop,"loc":{"start":{"line":142,"column":6},"end":{"line":154,"column":14}}}))?s:"")+"\r\n"},"37":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="esoc-extended-view-mode">\r\n            <div class="esoc-social-comment-data">\r\n              <div class="esoc-description">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"sgm_description"):s,t))+'</div>\r\n            </div>\r\n            <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'"\r\n               class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'">\r\n              <span class="icon-arrow-down"></span></a>\r\n            <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'"\r\n               class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'">\r\n              <span class="icon-arrow-up"></span></a>\r\n          </div>\r\n'},"39":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 9",{"name":"xif","hash":{},"fn":e.program(40,o,0),"inverse":e.program(42,o,0),"loc":{"start":{"line":156,"column":6},"end":{"line":189,"column":6}}}))?s:""},"40":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="esoc-extended-view-mode">\r\n            <div class="esoc-social-comment-data"></div>\r\n            <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'"\r\n               class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'">\r\n              <span class="icon-arrow-down"></span></a>\r\n            <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'"\r\n               class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'">\r\n              <span class="icon-arrow-up"></span></a>\r\n          </div>\r\n      \x3c!-- for this event type (4), the content \'commentText\' is escaped at the back-end except\r\n           for the required html to be embedded, which is back-end generated and safe.\r\n           So it is required here to not escape it (JIRA : ESOC-9929)--\x3e\r\n'},"42":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 4",{"name":"xif","hash":{},"fn":e.program(43,o,0),"inverse":e.program(45,o,0),"loc":{"start":{"line":169,"column":6},"end":{"line":189,"column":6}}}))?s:""},"43":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="esoc-extended-view-mode">\r\n            <div class="esoc-social-comment-data">'+(null!=(l=null!=(l=a(i,"commentText")||(null!=t?a(t,"commentText"):t))?l:e.hooks.helperMissing,s="function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"commentText","hash":{},"loc":{"start":{"line":171,"column":50},"end":{"line":171,"column":67}}}):l)?s:"")+'</div>\r\n            <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'"\r\n               class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'">\r\n              <span class="icon-arrow-down"></span></a>\r\n            <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'"\r\n               class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'">\r\n              <span class="icon-arrow-up"></span></a>\r\n          </div>\r\n'},"45":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="esoc-extended-view-mode">\r\n            <div class="esoc-social-comment-data">'+e.escapeExpression((l=null!=(l=a(i,"commentText")||(null!=t?a(t,"commentText"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"commentText","hash":{},"loc":{"start":{"line":181,"column":50},"end":{"line":181,"column":65}}}):l))+'</div>\r\n            <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'"\r\n               class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'">\r\n              <span class="icon-arrow-down"></span></a>\r\n            <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'"\r\n               class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'">\r\n              <span class="icon-arrow-up"></span></a>\r\n          </div>\r\n      '},"47":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-social-attachment '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentInactiveClass"):s,t))+'">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"isBwsNode"):s,{"name":"if","hash":{},"fn":e.program(48,o,0),"inverse":e.program(54,o,0),"loc":{"start":{"line":196,"column":12},"end":{"line":224,"column":23}}}))?s:"")+"            </div>\r\n"},"48":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(49,o,0),"inverse":e.program(51,o,0),"loc":{"start":{"line":197,"column":16},"end":{"line":207,"column":24}}}))?s:"")+'                <span class="esoc-header-view-object-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+"</span>\r\n"},"49":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <span class="csui-icon-group esoc-social-no-link-mime-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'">\r\n                  <span class="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentMimeTypeClass"):s,t))+'"></span>\r\n                  <span class="csui-icon csui-icon-shortcut-overlay"></span>\r\n                </span>\r\n'},"51":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages\r\n                                  .documentAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(52,o,0),"inverse":e.noop,"loc":{"start":{"line":202,"column":16},"end":{"line":207,"column":16}}}))?s:""},"52":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <span class="esoc-social-no-link-mime-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentMimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'"\r\n                  aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'"></span>\r\n                '},"54":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(55,o,0),"inverse":e.program(57,o,0),"loc":{"start":{"line":211,"column":16},"end":{"line":221,"column":24}}}))?s:"")+'                <a href="javascript:void(0);" class="esoc-social-attachment-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+"</a>  \r\n"},"55":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <span class="csui-icon-group esoc-social-attachment-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'">\r\n                  <span class="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentMimeTypeClass"):s,t))+'"></span>\r\n                  <span class="csui-icon csui-icon-shortcut-overlay"></span>\r\n                </span>\r\n'},"57":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages\r\n                        .documentAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(58,o,0),"inverse":e.noop,"loc":{"start":{"line":216,"column":16},"end":{"line":221,"column":16}}}))?s:""},"58":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <a href="javascript:void(0);" class="esoc-social-attachment-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentMimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'"\r\n                  aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'"></a>\r\n                '},"60":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div id="'+e.escapeExpression((s=null!=(s=l(i,"uniqueId")||(null!=t?l(t,"uniqueId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"uniqueId","hash":{},"loc":{"start":{"line":230,"column":19},"end":{"line":230,"column":31}}}):s))+'" class="esoc-social-activity-load-more"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"messages"):t)?a(s,"isFirstItem"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":3,"column":7}}}))?s:"")+'<a href="javascript:void(0);" class="esoc-activity-focus-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"userProfileLink"):s,t))+'"></a>\r\n<div class="esoc-profileimg-block">\r\n    <span class="esoc-userprofile-img">\r\n        <img class="esoc-userprofile-img-'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"user"):t)?a(s,"id"):s,t))+' binf-img-circle" src="" />\r\n    </span>\r\n</div>\r\n<div class="esoc-commentinfo-block-wrapper binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n<div class="esoc-commentinfo-block binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n  <div class="esoc-social-comment-details">\r\n    <div class="esoc-comment-user-details binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      <span class="esoc-user-widget"></span>\r\n        <span class="esoc-activityfeed-actiontype">\r\n'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 4 || this.feed_event_type == 2",{"name":"xif","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":16,"column":10},"end":{"line":18,"column":18}}}))?s:"")+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 7 || this.feed_event_type == 8",{"name":"xif","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":19,"column":10},"end":{"line":21,"column":18}}}))?s:"")+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.modified_at_iso8601 == ''",{"name":"xif","hash":{},"fn":e.program(7,o,0),"inverse":e.program(9,o,0),"loc":{"start":{"line":22,"column":10},"end":{"line":30,"column":18}}}))?s:"")+"        </span>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"showCommentIcon"):t,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"loc":{"start":{"line":32,"column":6},"end":{"line":46,"column":13}}}))?s:"")+"    </div>\r\n  </div>\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 4",{"name":"xif","hash":{},"fn":e.program(14,o,0),"inverse":e.program(19,o,0),"loc":{"start":{"line":49,"column":0},"end":{"line":77,"column":10}}}))?s:"")+'  </div>\r\n\r\n  <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n  <div id="esoc-social-comment-input-holder-'+e.escapeExpression((l=null!=(l=a(i,"uniqueId")||(null!=t?a(t,"uniqueId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"uniqueId","hash":{},"loc":{"start":{"line":81,"column":44},"end":{"line":81,"column":56}}}):l))+'">\r\n'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 7",{"name":"xif","hash":{},"fn":e.program(22,o,0),"inverse":e.program(35,o,0),"loc":{"start":{"line":82,"column":2},"end":{"line":189,"column":14}}}))?s:"")+"      </div>\r\n\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_id != '' && (this.extended_info.attachment_subtype ==\r\n    this.messages.shortcutAttachmentSubtype || this.extended_info.attachment_subtype == this\r\n    .messages.documentAttachmentSubtype)",{"name":"xif","hash":{},"fn":e.program(47,o,0),"inverse":e.noop,"loc":{"start":{"line":192,"column":6},"end":{"line":226,"column":20}}}))?s:"")+"           </div>\r\n          </div>\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.noMoreData == false",{"name":"xif","hash":{},"fn":e.program(60,o,0),"inverse":e.noop,"loc":{"start":{"line":229,"column":8},"end":{"line":231,"column":16}}}))?s:"")+'        <span class="esoc-social-comment-delete"></span>\r\n'}});return i.registerPartial("esoc_widgets_activityfeedwidget_activityfeedstandard",n),n}),csui.define("hbs!esoc/widgets/activityfeedwidget/impl/activityfeedheader",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'  <div class="esoc-comment-list-header-divider"></div>\r\n'},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"actionType"):s,t))+"\r\n"},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"textmsg"):s,t))+"\r\n"},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="esoc-social-comment-timestamp">'+e.escapeExpression((s=null!=(s=l(i,"created_at_iso8601")||(null!=t?l(t,"created_at_iso8601"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"created_at_iso8601","hash":{},"loc":{"start":{"line":28,"column":56},"end":{"line":28,"column":78}}}):s))+"</span>\r\n"},"9":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="esoc-social-comment-timestamp">\r\n              <span class="esoc-social-comment-timestamp-ago" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"modifiedAt"):s,t))+'">\r\n              </span>\r\n              '+e.escapeExpression((l=null!=(l=a(i,"modified_at_iso8601")||(null!=t?a(t,"modified_at_iso8601"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"modified_at_iso8601","hash":{},"loc":{"start":{"line":33,"column":14},"end":{"line":33,"column":37}}}):l))+"\r\n            </span>\r\n"},"11":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="esoc-comment-msg binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,{"name":"if","hash":{},"fn":e.program(12,o,0),"inverse":e.program(14,o,0),"loc":{"start":{"line":45,"column":6},"end":{"line":61,"column":13}}}))?s:"")+"    </div>\r\n"},"12":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="esoc-activity-object-information '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"inactiveClass"):s,t))+'">\r\n        <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-social-mime-icon  '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'"\r\n          title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></a>\r\n        <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-object-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">\r\n          '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+"\r\n        </a>\r\n      </span>\r\n"},"14":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="esoc-activity-object-information '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"inactiveClass"):s,t))+'">\r\n        <span class="esoc-social-no-link-mime-icon  '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"\r\n          aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></span>\r\n        <span  class="esoc-header-view-object-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">\r\n          '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+"\r\n        </span>\r\n      </span>\r\n"},"16":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="esoc-comment-msg binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      <div class="esoc-social-comment-details binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n        <div class="esoc-comment-user-details">\r\n          <span class="esoc-reply-user-widget"></span>\r\n        <span class="esoc-activityfeed-actiontype esoc-activityfeed-header-status">\r\n          '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"status"):s,t))+"\r\n        </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n"},"18":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="esoc-comment-msg binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <div class="esoc-activity-object-information '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"inactiveClass"):s,t))+'">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,{"name":"if","hash":{},"fn":e.program(19,o,0),"inverse":e.program(24,o,0),"loc":{"start":{"line":82,"column":6},"end":{"line":106,"column":13}}}))?s:"")+"    </div>\r\n  </div>\r\n"},"19":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(20,o,0),"inverse":e.program(22,o,0),"loc":{"start":{"line":83,"column":10},"end":{"line":92,"column":18}}}))?s:"")+'          <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-object-name"\r\n            title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+"</a>\r\n"},"20":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-social-mime-icon csui-icon-group" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"\r\n              aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">\r\n            </a>\r\n            <span class="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'"></span>\r\n            <span class="csui-icon csui-icon-shortcut-overlay"></span>\r\n'},"22":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-social-mime-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></a>\r\n'},"24":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},
"fn":e.program(25,o,0),"inverse":e.program(27,o,0),"loc":{"start":{"line":96,"column":10},"end":{"line":104,"column":18}}}))?s:"")+'          <span class="esoc-header-view-object-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+"</span>\r\n"},"25":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <span class="esoc-social-no-link-mime-icon csui-icon-group" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"\r\n              aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></span>\r\n              <span class="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'"></span>\r\n              <span class="csui-icon csui-icon-shortcut-overlay"></span>\r\n'},"27":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <span class="esoc-social-no-link-mime-icon  '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></span>\r\n'},"29":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="esoc-comment-msg binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      <div class="esoc-activity-object-information '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"inactiveClass"):s,t))+'">\r\n        <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'" class="esoc-social-mime-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'"></a>\r\n        <a href="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"defaultActionUrl"):s,t))+'"\r\n           class="esoc-object-name  esoc-object-name-with-version"\r\n           title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"name"):s,t))+'</a>\r\n        <span class="esoc-social-version">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"version"):s,t))+'</span>\r\n        <span class="esoc-version-number">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"version_name"):s,t))+"</span>\r\n      </div>\r\n    </div>\r\n"},"31":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.sgm_description != ''",{"name":"xif","hash":{},"fn":e.program(32,o,0),"inverse":e.noop,"loc":{"start":{"line":130,"column":6},"end":{"line":142,"column":14}}}))?s:""},"32":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-extended-view-mode">\r\n          <div class="esoc-social-comment-data">\r\n            <div class="esoc-description">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"sgm_description"):s,t))+'</div>\r\n          </div>\r\n          <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'"\r\n             class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'">\r\n            <span class="icon-arrow-down-dark"></span></a>\r\n          <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'"\r\n             class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'">\r\n            <span class="icon-arrow-up-dark"></span></a>\r\n        </div>\r\n'},"34":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-extended-view-mode">\r\n        <div class="esoc-social-comment-data"></div>\r\n        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'"\r\n           class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'">\r\n          <span class="icon-arrow-down-dark"></span></a>\r\n        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'"\r\n           class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'">\r\n          <span class="icon-arrow-up-dark"></span></a>\r\n      </div>\r\n    </div>\r\n'},"36":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-extended-view-mode">\r\n        <div class="esoc-social-comment-data">'+(null!=(l=null!=(l=a(i,"commentText")||(null!=t?a(t,"commentText"):t))?l:e.hooks.helperMissing,s="function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"commentText","hash":{},"loc":{"start":{"line":162,"column":46},"end":{"line":162,"column":63}}}):l)?s:"")+'</div>\r\n        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'"\r\n           class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'">\r\n          <span class="icon-arrow-down-dark"></span></a>\r\n        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'"\r\n           class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'">\r\n          <span class="icon-arrow-up-dark"></span></a>\r\n      </div>\r\n'},"38":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-extended-view-mode">\r\n        <div class="esoc-social-comment-data">'+e.escapeExpression((l=null!=(l=a(i,"commentText")||(null!=t?a(t,"commentText"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"commentText","hash":{},"loc":{"start":{"line":175,"column":46},"end":{"line":175,"column":61}}}):l))+'</div>\r\n        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'"\r\n           class="esoc-see-more esoc-see-more-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"more"):s,t))+'">\r\n          <span class="icon-arrow-down-dark"></span></a>\r\n        <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'"\r\n           class="esoc-see-less esoc-see-less-activity esoc-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"less"):s,t))+'">\r\n          <span class="icon-arrow-up-dark"></span></a>\r\n      </div>\r\n'},"40":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="esoc-social-comment-list-actions binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"enableComments"):s,{"name":"if","hash":{},"fn":e.program(41,o,0),"inverse":e.noop,"loc":{"start":{"line":188,"column":6},"end":{"line":196,"column":13}}}))?s:"")+"    </div>\r\n"},"41":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-social-comment-container esoc-socialactions-getcomments esoc-socialactions-comment">\r\n          <button class="esoc-social-comment-container esoc-socialactions-comment-button\r\n                  cs-icon-comment" data-value='+e.escapeExpression((l=null!=(l=a(i,"data_id")||(null!=t?a(t,"data_id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"data_id","hash":{},"loc":{"start":{"line":191,"column":46},"end":{"line":191,"column":57}}}):l))+' title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"comments"):s,t))+'"\r\n                  aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"comments"):s,t))+'">\r\n            2'+(null!=(s=(a(i,"icon-v2")||t&&a(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","theme":null!=t?a(t,"iconTheme"):t,"iconName":null!=t?a(t,"iconName"):t},"loc":{"start":{"line":193,"column":13},"end":{"line":193,"column":74}}}))?s:"")+"\r\n          </button>\r\n        </div>\r\n"},"43":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="esoc-social-attachment '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentInactiveClass"):s,t))+'">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"isBwsNode"):s,{"name":"if","hash":{},"fn":e.program(44,o,0),"inverse":e.program(49,o,0),"loc":{"start":{"line":204,"column":4},"end":{"line":232,"column":11}}}))?s:"")+"  </div>\r\n"},"44":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(45,o,0),"inverse":e.noop,"loc":{"start":{"line":205,"column":6},"end":{"line":210,"column":14}}}))?s:"")+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages.documentAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(47,o,0),"inverse":e.noop,"loc":{"start":{"line":211,"column":6},"end":{"line":215,"column":14}}}))?s:"")+'      <span class="esoc-header-view-object-name"\r\n        title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+"</span>\r\n"},"45":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="csui-icon-group esoc-social-no-link-mime-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'">\r\n        <span class="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentMimeTypeClass"):s,t))+'"></span>\r\n        <span class="csui-icon csui-icon-shortcut-overlay"></span>\r\n      </span>\r\n'},"47":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="esoc-social-no-link-mime-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentMimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'"\r\n        aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'"></span>\r\n'},"49":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages.shortcutAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(50,o,0),"inverse":e.noop,"loc":{"start":{"line":219,"column":6},"end":{"line":224,"column":14}}}))?s:"")+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_subtype == this.messages.documentAttachmentSubtype",{"name":"xif","hash":{},"fn":e.program(52,o,0),"inverse":e.noop,"loc":{"start":{"line":225,"column":6},"end":{"line":229,"column":14}}}))?s:"")+'      <a href="javascript:void(0);" class="esoc-social-attachment-name"\r\n        title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+"</a>\r\n"},"50":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="csui-icon-group esoc-social-attachment-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'">\r\n        <span class="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentMimeTypeClass"):s,t))+'"></span>\r\n        <span class="csui-icon csui-icon-shortcut-overlay"></span>\r\n      </span>\r\n'},"52":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a href="javascript:void(0);" class="esoc-social-attachment-icon '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attachmentMimeTypeClass"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'"\r\n        aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"extended_info"):t)?l(s,"attachment_name"):s,t))+'"></a>\r\n'},"54":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div id="'+e.escapeExpression((s=null!=(s=l(i,"uniqueId")||(null!=t?l(t,"uniqueId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"uniqueId","hash":{},"loc":{"start":{"line":239,"column":11},"end":{"line":239,"column":23}}}):s))+'" class="esoc-social-activity-load-more"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"messages"):t)?a(s,"isFirstItem"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":3,"column":7}}}))?s:"")+'\r\n<a href="javascript:void(0);" class="esoc-activity-focus-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"userProfileLink"):s,t))+'"></a>\r\n<div class="esoc-profileimg-block">\r\n    <span class="esoc-userprofile-img">\r\n        <img class="esoc-userprofile-img-'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"user"):t)?a(s,"id"):s,t))+' binf-img-circle" src="" />\r\n    </span>\r\n</div>\r\n\r\n<div class="esoc-commentinfo-block-wrapper esoc-activityfeed-header binf-col-lg-12 binf-col-md-12\r\nbinf-col-sm-12 binf-col-xs-12">\r\n\r\n  \x3c!-- first line - begin: <<user-display-name>> <<action-type>> <<time-stamp>> --\x3e\r\n  <div class="esoc-commentinfo-block binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <div class="esoc-social-comment-details binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      <div class="esoc-comment-user-details">\r\n        <span class="esoc-user-widget"></span>\r\n        <span class="esoc-activityfeed-actiontype">\r\n'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 4 || this.feed_event_type == 2",{"name":"xif","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":21,"column":10},"end":{"line":23,"column":18}}}))?s:"")+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 7 || this.feed_event_type == 8",{"name":"xif","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":24,"column":10},"end":{"line":26,"column":18}}}))?s:"")+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.modified_at_iso8601 == ''",{"name":"xif","hash":{},"fn":e.program(7,o,0),"inverse":e.program(9,o,0),"loc":{"start":{"line":27,"column":10},"end":{"line":35,"column":18}}}))?s:"")+"        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \x3c!-- first line - end: <<user-display-name>> <<action-type>> <<time-stamp>> --\x3e\r\n\r\n  \x3c!-- second line - begin: <<object-mime-type>> <<object-name>> version <<version-number>>--\x3e\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 4",{"name":"xif","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"loc":{"start":{"line":43,"column":2},"end":{"line":63,"column":10}}}))?s:"")+"\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 2",{"name":"xif","hash":{},"fn":e.program(16,o,0),"inverse":e.noop,"loc":{"start":{"line":65,"column":2},"end":{"line":76,"column":10}}}))?s:"")+"\r\n\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 7",{"name":"xif","hash":{},"fn":e.program(18,o,0),"inverse":e.noop,"loc":{"start":{"line":79,"column":2},"end":{"line":109,"column":10}}}))?s:"")+"\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 8",{"name":"xif","hash":{},"fn":e.program(29,o,0),"inverse":e.noop,"loc":{"start":{"line":111,"column":2},"end":{"line":123,"column":10}}}))?s:"")+'  \x3c!-- second line - end: <<object-mime-type>> <<object-name>> version <<version-number>>--\x3e\r\n\r\n  \x3c!-- third line - begin:FFT(Free FlowText)<<comment/reply/description/attribute-change-text>>--\x3e\r\n  <div class="esoc-acitivity-feed-fft binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n  <div id="esoc-social-comment-input-holder-'+e.escapeExpression((l=null!=(l=a(i,"uniqueId")||(null!=t?a(t,"uniqueId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"uniqueId","hash":{},"loc":{"start":{"line":128,"column":44},"end":{"line":128,"column":56}}}):l))+'">\r\n'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 7 || this.feed_event_type == 8",{"name":"xif","hash":{},"fn":e.program(31,o,0),"inverse":e.noop,"loc":{"start":{"line":129,"column":4},"end":{"line":143,"column":12}}}))?s:"")+"\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 9",{"name":"xif","hash":{},"fn":e.program(34,o,0),"inverse":e.noop,"loc":{"start":{"line":145,"column":4},"end":{"line":156,"column":12}}}))?s:"")+"    \x3c!-- for this event type (4), the content 'commentText' is escaped at the back-end except\r\n         for the required html to be embedded, which is back-end generated and safe.\r\n         So it is required here to not escape it (JIRA : ESOC-9929)--\x3e\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type == 4",{"name":"xif","hash":{},"fn":e.program(36,o,0),"inverse":e.noop,"loc":{"start":{"line":160,"column":4},"end":{"line":170,"column":12}}}))?s:"")+"\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.feed_event_type != 7 && this.feed_event_type != 8\r\n            && this.feed_event_type != 9 && this.feed_event_type != 4",{"name":"xif","hash":{},"fn":e.program(38,o,0),"inverse":e.noop,"loc":{"start":{"line":172,"column":4},"end":{"line":183,"column":12}}}))?s:"")+"  </div>\r\n\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"showCommentIcon"):t,{"name":"if","hash":{},"fn":e.program(40,o,0),"inverse":e.noop,"loc":{"start":{"line":186,"column":2},"end":{"line":198,"column":9}}}))?s:"")+"</div>\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.extended_info.attachment_id != '' && (this.extended_info.attachment_subtype ==\r\n    this.messages.shortcutAttachmentSubtype || this.extended_info.attachment_subtype == this\r\n    .messages.documentAttachmentSubtype)",{"name":"xif","hash":{},"fn":e.program(43,o,0),"inverse":e.noop,"loc":{"start":{"line":200,"column":0},"end":{"line":234,"column":8}}}))?s:"")+"\x3c!-- third line - end:FFT(Free FlowText)<<comment/reply/description/attribute-change-text>>--\x3e\r\n\r\n</div>\r\n"+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.noMoreData == false",{"name":"xif","hash":{},"fn":e.program(54,o,0),"inverse":e.noop,"loc":{"start":{"line":238,"column":0},"end":{"line":240,"column":8}}}))?s:"")+'<span class="esoc-social-comment-delete"></span>\r\n'}});return i.registerPartial("esoc_widgets_activityfeedwidget_impl_activityfeedheader",n),n}),csui.define("esoc/widgets/activityfeedwidget/activityfeeditem.view",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/moment","csui/lib/handlebars","csui/utils/contexts/factories/connector","hbs!esoc/widgets/activityfeedwidget/activityfeed","hbs!esoc/widgets/activityfeedwidget/activityfeedstandard","hbs!esoc/widgets/activityfeedwidget/impl/activityfeedheader","esoc/widgets/socialactions/commentscollectionwidget","esoc/widgets/userwidget/userwidget","i18n!esoc/widgets/activityfeedwidget/impl/nls/lang","esoc/widgets/common/util","esoc/widgets/userwidget/util","csui/utils/log","csui/utils/url","csui/utils/nodesprites","csui/utils/node.links/node.links","csui/utils/namedsessionstorage","csui/lib/handlebars.helpers.xif","css!esoc/widgets/tablecell/impl/social.css","esoc/controls/icons/esoc.icons.v2"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f,g,b,v,y,w){return o.ItemView.extend({"regions":{"tableRegion":"#tableview"},"momentJS":s,"commonUtil":h,"log":g,"namedSessionStorage":new w(h.globalConstants.ESOCIAL_USER_INFO),"className":function(){return this.options.strdViewOptions?"esoc-activityfeed-list-item binf-row object-group-item":"esoc-activityfeed-list-item binf-row object-group-item esoc-activityfeed-expanded-view"},"template":r,"templateHelpers":function(){var e,i,n,o,s="csui-icon mime_document",l="",a="",r="",c=this.model,d=this.options.defaultActionController?this.options.defaultActionController:this.options.parentCollectionView.defaultActionController;try{""===this.model.attributes.extended_info.display_icon_id?s="":(n=1===this.model.attributes.extended_info.subtype,c.attributes.type=n?this.model.attributes.extended_info.sgm_original_sub_type:this.model.attributes.extended_info.subtype,c.attributes.mime_type=n?this.model.attributes.extended_info.sgm_original_mime_type:this.model.attributes.extended_info.mime_type,c.attributes.container=n?this.model.attributes.extended_info.sgm_original_container:this.model.attributes.extended_info.sgm_container,s=v.findClassByNode(c),this.sgmModel=this.commonUtil.buildNodeModel(c,c.connector),this.bwsNodeId=this.options.context.viewStateModel.attributes.session_state&&this.options.context.viewStateModel.attributes.session_state.id?this.options.context.viewStateModel.attributes.session_state.id:this.options.context.node?this.options.context.node.get("id"):void 0,this.bwsNodeId===this.sgmModel.get("id")&&848===this.sgmModel.get("type")||(i=y.getUrl(this.sgmModel),d&&(d.hasAction(this.sgmModel)||(a="esoc-social-activityfeeditem-inactive")))),""!==this.model.attributes.extended_info.attachment_subtype&&(l="csui-icon mime_document",e=this.model.attributes.extended_info.attachment_subtype,c.attributes.type=1===e?this.model.attributes.extended_info.attachment_original_sub_type:e,c.attributes.mime_type=1===e?this.model.attributes.extended_info.attachment_original_mime_type:this.model.attributes.extended_info.attachment_mime_type,c.attributes.container=1===e?this.model.attributes.extended_info.attachment_original_container:this.model.attributes.extended_info.attachment_container,l=v.findClassByNode(c),this.attachmentModel=this.commonUtil.buildNodeModel(c,c.connector,!0),d&&(d.hasAction(this.attachmentModel)||(r="esoc-social-activityfeeditem-inactive")),this.bwsNodeId===this.attachmentModel.get("id")&&848===this.attachmentModel.get("type")&&(o=!0))}catch(e){this.log.error(e)}var u={"commentLabel":m.commentLabel,"modifiedAt":m.modifiedAt,"shortcutAttachmentSubtype":this.commonUtil.globalConstants.SHORTCUT_ATTACHMENT_SUBTYPE,"documentAttachmentSubtype":this.commonUtil.globalConstants.DOCUMENT_ATTACHMENT_SUBTYPE,"mimeTypeClass":s,"attachmentMimeTypeClass":l,"inactiveClass":a,"attachmentInactiveClass":r,"more":m.more,"less":m.less,"comments":m.comments,"statusfeed":m.statusfeed,"userProfileLink":m.userProfileLink,"defaultActionUrl":i,"isBwsNode":o};return 4===this.model.attributes.feed_event_type&&(u.actionType=""!==this.model.attributes.extended_info.name&&this.model.attributes.extended_info.conversation_id===this.model.attributes.id?m.commentMsg:m.replyMsg),2===this.model.attributes.feed_event_type&&(u.actionType=m.commentMsg),7===this.model.attributes.feed_event_type&&(u.textmsg=m.addMsg),8===this.model.attributes.feed_event_type&&(u.textmsg=m.versionMsg),u.enableComments=void 0===this.model.collection.enableComments||this.model.collection.enableComments,u.status=m.status,u.version=m.version,u.isFirstItem=this.model.collection.at(0).cid!==this.model.cid,{"uniqueId":t.uniqueId(),"iconTheme":this._iconTheme,"iconName":this.iconName,"messages":u}},"events":{"click .esoc-socialactions-getcomments.esoc-social-comment-container button":"getComments","click .esoc-object-name, .esoc-social-mime-icon":"openItem","click .esoc-social-attachment-name, .esoc-social-attachment-icon":"openAttachment","click .esoc-see-more-activity":"showMoreContent","click .esoc-see-less-activity":"showLessContent"},"_elements":{},"constructor":function(e){e=e||{},this.options=e,this.isHeaderView=!!e.strdViewOptions&&!!e.strdViewOptions.headerView,this._iconTheme=e.useIconsForDarkBackground?"dark":"",o.ItemView.prototype.constructor.apply(this,arguments),this.options.connector=this.options.connector||this.options.context.getObject(a),this.isHeaderView?(e.model.attributes.showCommentIcon=e.strdViewOptions.showCommentIcon,this.template=d):e.strdViewOptions?(e.model.attributes.showCommentIcon=e.strdViewOptions.showCommentIcon,this.template=c):this.template=r,this.listenTo(this.model,"change",this.render),this.on("commentdialog:action",function(e){this.trigger("childview:comment:action")}),this.on("start:notification",function(e){this.trigger("childview:start:notification")});var t=this.model.get("wnd_comments")||this.model.get("comments")||0;this.iconName=t>0?"esoc_comment32":"esoc_no_comment32"},"openItem":function(e){e.preventDefault(),e.stopPropagation(),this.trigger("click:item",this)},"openAttachment":function(){this.trigger("click:attachment",this)},"onRender":function(i){var n,o;this.model.attributes.user.id;if(p||(p=e("esoc/widgets/userwidget/userwidget")),void 0!==this.model.attributes.user&&void 0!==this.model.attributes.user.id){o={"userid":this.model.attributes.user.id,"context":this.options.context,"showUserProfileLink":!0,"showMiniProfile":!0},n=t.extend({"placeholder":this.$el.find(".esoc-user-widget")},o),p.getUser(n);var s=t.extend({"placeholder":this.$el.find(".esoc-profileimg-block"),"userWidgetWrapperClass":"esoc-activityfeed-userprofile-pic","showUserWidgetFor":"profilepic"},o);p.getUser(s)}if(2===this.model.attributes.feed_event_type&&""!==this.model.attributes.in_reply_to_user_id){var l=t.extend({},n);l.userid=this.model.attributes.in_reply_to_user_id,l.placeholder=this.$el.find(".esoc-reply-user-widget"),p.getUser(l)}var a=this.options.context;f.displayUserWidget(a,this.$el)},"onShow":function(n){if(0===this.options.index?(this.$el.find("a").prop("tabindex","-1").attr("data-cstabindex","-1"),this.$el.find(".esoc-profileimg-block a").prop("tabindex","0").attr("data-cstabindex","0")):this.$el.find("a").prop("tabindex","-1").attr("data-cstabindex","-1"),1===this.model.attributes.feed_event_type&&this.$el.find(".esoc-commentinfo-block").addClass("esoc-commentinfo-status"),-1!==i.inArray(this.model.attributes.feed_event_type,[7,8,9])){if(this.$el.find(".esoc-commentinfo-block").addClass("esoc-commentinfo-sgm"),this.$el.find(".esoc-social-comment-data").css("white-space","inherit"),this.$el.find(".esoc-description").length>0){var o=this.$el.find(".esoc-description").html();o=this.commonUtil.onClickableUrl(o,!0),this.$el.find(".esoc-description").html(o)}}else this.commonUtil.addEmoji(this.$el.find(".esoc-social-comment-data"),!0,this.options.connector);if(9===this.model.attributes.feed_event_type){var s=this.commonUtil.onClickableUrl(this.model.attributes.text,!0);this.isBwsNode=this.model.attributes.data_id===this.bwsNodeId&&848===this.model.attributes.type,s=1===this.model.attributes.extended_info.subtype?this.isBwsNode?s.replace("[MimeType]","<span class='csui-icon-group esoc-social-no-link-mime-icon'><span class='"+this.templateHelpers().messages.mimeTypeClass+"'></span><span class='csui-icon csui-icon-shortcut-overlay'></span></span></span>"):s.replace("[MimeType]","<span class='csui-icon-group esoc-social-mime-icon'><span class='"+this.templateHelpers().messages.mimeTypeClass+"'></span><span class='csui-icon csui-icon-shortcut-overlay'></span></span></span>"):this.isBwsNode?s.replace("[MimeType]","<span class='"+this.templateHelpers().messages.mimeTypeClass+" esoc-social-no-link-mime-icon'></span>"):s.replace("[MimeType]","<span class='"+this.templateHelpers().messages.mimeTypeClass+" esoc-social-mime-icon'></span>"),this.$el.find(".esoc-social-comment-data").html(s),this.$el.find(".esoc-social-comment-data").addClass("esoc-social-sgm-attr-change"),this.isBwsNode?(this.$el.find(".esoc-object-name").addClass("esoc-object-no-link-name"),this.$el.find(".esoc-object-name").removeClass("esoc-object-name"),this.$el.find(".esoc-object-no-link-name").addClass(this.templateHelpers().messages.inactiveClass)):(this.$el.find(".esoc-object-name").attr("title",this.model.attributes.extended_info.name),this.$el.find(".esoc-social-mime-icon").attr("title",this.model.attributes.extended_info.name),this.$el.find(".esoc-object-name").addClass(this.templateHelpers().messages.inactiveClass)),this.$el.find(".esoc-social-mime-icon").addClass(this.templateHelpers().messages.inactiveClass)}p||(p=e("esoc/widgets/userwidget/userwidget"));var l=this.options.context;if(this.$el.find(".esoc-old-user-display-name").each(function(){var e={
"userid":i(this).data("userid"),"context":l,"placeholder":this,"showUserProfileLink":!0,"showMiniProfile":!0};p.getUser(e)}),this.$el.find(".esoc-new-user-display-name").each(function(){var e={"userid":i(this).data("userid"),"context":l,"placeholder":this,"showUserProfileLink":!0,"showMiniProfile":!0};p.getUser(e)}),f.displayUserWidget(l,this.$el),this.showSeeMoreLink(this.$el.find(this.contentTypeElement)),this.isHeaderView&&this.$el.find(".esoc-activityfeed-header").length>0&&this.$el.find(".esoc-activityfeed-header").each(t.bind(function(e){var t=i(this.$el.find(".esoc-activityfeed-actiontype")[e]).width()+(0===e?10:7);t="calc(100% - "+t+"px)",0===e?i(this.$el.find(".esoc-activityfeed-header .esoc-commentinfo-block .esoc-userwidget-wrapper")).css("max-width",t):i(this.$el.find(".esoc-activityfeed-header .esoc-comment-msg .esoc-userwidget-wrapper")).css("max-width",t)},this)),!this.isHeaderView&&this.$el.find(".esoc-reply-user-widget").length>0){var a=this.$el.find(".esoc-activityfeed-status-action").width()+10;a="calc(100% - "+a+"px)",i(this.$el.find(".esoc-reply-user-widget .esoc-userwidget-wrapper")).css("max-width",a)}},"showSeeMoreLink":function(e){if(i(e).length>0){var t=i(e).eq(0);i(t).addClass("esoc-see-more-content");var n=this;setTimeout(function(){n.commonUtil.isTextOverflown(t)&&(n.$el.find(".esoc-see-more").show(),i(t).addClass("esoc-see-more-activity"),i(t).find("a.esoc-see-more-activity").removeClass("esoc-hide-element"))},2e3)}},"contentTypeElement":".esoc-extended-view-mode","showMoreContent":function(e){""===window.getSelection().toString()&&(this.commonUtil.showMoreContent(e,this,this.$el.find(this.contentTypeElement)),this.$el.find(".esoc-extended-view-mode").trigger("focus"))},"showLessContent":function(e){""===window.getSelection().toString()&&this.commonUtil.showLessContent(e,this,this.$el.find(this.contentTypeElement))},"addFocus":function(e){i(".esoc-user-widget-dialog.cs-dialog.binf-modal.binf-fade.binf-in").removeAttr("tabindex").attr("disabled","true"),i("[id^='esoc-social-comment-widget-mask_']").attr("tabindex","-1")},"getComments":function(t){var n={"baseElement":t.target,"currentTarget":t.currentTarget,"socialActionsInstanse":this,"placeholder":this.model.collection.placeholder,"context":this.options.context,"maxMessageLength":this.options.model.attributes.maxMessageLength,"activityfeeditem":this};this.addFocus(t);var o,s=this;if(1!==this.model.attributes.feed_event_type&&2!==this.model.attributes.feed_event_type){var l=this.model.attributes.data_id,a=b.combine(this.options.connector.connection.url,this.commonUtil.REST_URLS.csGetROI)+"CSID="+l;i.ajax(this.options.connector.extendAjaxOptions({"type":"GET","async":!1,"cache":!1,"url":a,"success":function(e){o=JSON.parse(JSON.stringify(e.available_settings))},"error":function(){s.log.error("TEMP.  ERROR Getting available settings")}}))}else o={"attachementsEnabled":!0,"commentingOpen":!0,"commentsEnabled":!0,"CSID":0,"likesEnabled":!0,"shortcutsEnabled":!0,"taggingEnabled":!0,"threadingEnabled":!0};n.socialActionsInstanse.model.attributes.socialactions=o,n.statusInfo={},!this.model.attributes.feed_event_type||1!==this.model.attributes.feed_event_type&&2!==this.model.attributes.feed_event_type||(n.statusInfo={"getStatusUrl":this.model.attributes.actions.filter(function(e){return"reply"===e.signature})[0].href,"conversation_id":this.model.attributes.extended_info.conversation_id,"item_id":this.model.attributes.id}),clearInterval(this.model.collection.widgetOptions.expNotificationInterval),i(".esoc-acitivityfeed-collection").css("overflow","hidden"),e(["esoc/widgets/socialactions/commentscollectionwidget"],function(e){new e(n).show(),i(document.activeElement).trigger("blur");var t=i("#esoc-social-comment-title").eq(0);i(t).trigger("focus"),document.activeElement=t})}})}),csui.define("hbs!esoc/widgets/activityfeedwidget/impl/emptyactivityfeed",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="esoc-empty-activityfeed-message" title="'+e.escapeExpression((s=null!=(s=l(i,"emptyActivityFeed")||(null!=t?l(t,"emptyActivityFeed"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"emptyActivityFeed","hash":{},"loc":{"start":{"line":1,"column":52},"end":{"line":1,"column":73}}}):s))+'"><p\r\n    class="esoc-empty-activityfeed-text">'+e.escapeExpression((s=null!=(s=l(i,"emptyActivityFeed")||(null!=t?l(t,"emptyActivityFeed"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"emptyActivityFeed","hash":{},"loc":{"start":{"line":2,"column":41},"end":{"line":2,"column":62}}}):s))+"</p></div>"}});return i.registerPartial("esoc_widgets_activityfeedwidget_impl_emptyactivityfeed",n),n}),csui.define("css!esoc/widgets/activityfeedwidget/activityfeed",[],function(){}),csui.define("esoc/widgets/activityfeedwidget/emptyactivityfeed.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","i18n!esoc/widgets/activityfeedwidget/impl/nls/lang","hbs!esoc/widgets/activityfeedwidget/impl/emptyactivityfeed","css!esoc/widgets/activityfeedwidget/activityfeed.css"],function(e,t,i,n,o){return i.ItemView.extend({"className":"esoc-empty-activityfeed-wrapper","template":o,"templateHelpers":function(){return{"emptyActivityFeed":this.options&&this.options.parentCollectionView&&e.contains(["userwidget","metadata"],this.options.parentCollectionView.options.origin)?n.emptyactivityfeedforuserprofile:n.emptyactivityfeed}},"constructor":function(e){i.ItemView.prototype.constructor.apply(this,arguments)}})}),csui.define("esoc/widgets/activityfeedwidget/afw.infinite.scrolling.behavior",["csui/controls/tile/behaviors/infinite.scrolling.behavior"],function(e){"use strict";return e.extend({"_checkScrollPositionFetch":function(){var e=this._content,t=e.height(),i=e[0].scrollHeight;e.scrollTop()+30>=i-t&&this._content.find(".esoc-social-activity-load-more:last").trigger("click")}})}),csui.define("esoc/widgets/activityfeedwidget/util",["module","csui/lib/jquery","csui/lib/underscore","i18n!esoc/widgets/userwidget/nls/lang","esoc/widgets/common/util"],function(e,t,i,n,o){return{"lang":n,"commonUtil":o}}),csui.define("hbs!esoc/widgets/activityfeedwidget/object/impl/object",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="esoc-activityfeed-list esoc-activityfeed-list-'+e.escapeExpression((s=null!=(s=l(i,"feedtype")||(null!=t?l(t,"feedtype"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"feedtype","hash":{},"loc":{"start":{"line":1,"column":58},"end":{"line":1,"column":70}}}):s))+'">\r\n  <div class="object-group"></div>\r\n  <div class="tile-footer"></div>\r\n</div>'}});return i.registerPartial("esoc_widgets_activityfeedwidget_object_impl_object",n),n}),csui.define("esoc/widgets/utils/adaptivepoll",["module"],function(e){return function(e,t,i){var n=this;this.init=function(n){this.timer=0,this.iterations=0,this.PERIOD_VISIBLE=i,this.IDLE_TIMEOUT=this.PERIOD_VISIBLE/1e3-1,this._localStorageKey=t,this._idleSecondsTimer=null,this._lastResetTimeStamp=(new Date).getTime(),this._localStorage=null,this.noActivity=!1,this.lastState=0,this.LAST_STATE_LIMIT=8,this._callback=e,this.AttachEvent(document,"click",this.ResetTime),this.AttachEvent(document,"mousemove",this.ResetTime),this.AttachEvent(document,"keypress",this.ResetTime),this.AttachEvent(window,"load",this.ResetTime),this.param1=n[3],this.param2=n[4];try{this._localStorage=window.localStorage}catch(e){}this._idleSecondsTimer=window.setInterval(this.CheckIdleTime,i),document.addEventListener&&document.addEventListener("visibilitychange",this.ResetTime)},this.GetLastResetTimeStamp=function(){var e=0;return n._localStorage?(e=parseInt(n._localStorage[n._localStorageKey],10),(isNaN(e)||e<0)&&(e=(new Date).getTime())):e=n._lastResetTimeStamp,e},this.SetLastResetTimeStamp=function(e){n._localStorage?n._localStorage[n._localStorageKey]=e:n._lastResetTimeStamp=e},this.ResetTime=function(){n.lastState>1&&setTimeout(n._callback,1e3,n.param1,n.param2),n.noActivity=!1,n.SetLastResetTimeStamp((new Date).getTime()),n.setUpdateTimer()},this.AttachEvent=function(e,t,i){return e.addEventListener?(e.addEventListener(t,i,!1),!0):!!e.attachEvent&&(e.attachEvent("on"+t,i),!0)},this.RemoveEvent=function(e,t,i){return e.addEventListener?(e.removeEventListener(t,i,!1),!0):!!e.attachEvent&&(e.attachEvent("off"+t,i),!0)},this.CheckIdleTime=function(){var e=(new Date).getTime(),t=n.GetLastResetTimeStamp(),i=Math.floor((e-t)/1e3);i<=0&&(n.ResetTime(),i=0),i>=n.IDLE_TIMEOUT&&(n.noActivity||(n.noActivity=!0,n.setUpdateTimer()))},this.setUpdateTimer=function(){return n.noActivity?(clearInterval(n.timer),n.lastState=Math.min(n.LAST_STATE_LIMIT,n.lastState+2),n.lastState===n.LAST_STATE_LIMIT?clearInterval(n.timer):n.timer=setInterval(n._callback,n.PERIOD_VISIBLE*n.lastState,n.param1,n.param2)):n.lastState>0&&(clearInterval(n.timer),n.timer=setInterval(n._callback,n.PERIOD_VISIBLE,n.param1,n.param2),n.lastState=0),n.timer},this.destroy=function(){clearInterval(n._idleSecondsTimer),clearInterval(n.timer),n.RemoveEvent(document,"click",this.ResetTime),n.RemoveEvent(document,"mousemove",this.ResetTime),n.RemoveEvent(document,"keypress",this.ResetTime),n.RemoveEvent(window,"load",this.ResetTime),document.removeEventListener("visibilitychange",n.ResetTime)},this.init(arguments)}}),csui.define("css!esoc/widgets/activityfeedwidget/object/impl/object",[],function(){}),csui.define("esoc/widgets/activityfeedwidget/object/object.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/behaviors/default.action/default.action.behavior","csui/utils/contexts/factories/connector","esoc/widgets/common/util","csui/utils/base","esoc/widgets/activityfeedwidget/activityfeeditem.view","esoc/widgets/activityfeedwidget/emptyactivityfeed.view","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/progressblocker/blocker","esoc/widgets/activityfeedwidget/afw.infinite.scrolling.behavior","esoc/widgets/activityfeedwidget/util","csui/utils/contexts/factories/node","csui/controls/error/error.view","hbs!esoc/widgets/activityfeedwidget/object/impl/object","i18n!esoc/widgets/activityfeedwidget/impl/nls/lang","esoc/widgets/utils/adaptivepoll","css!esoc/widgets/activityfeedwidget/object/impl/object"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f,g,b,v,y){return n.CompositeView.extend({"className":"esoc-afw-object-view esoc-afw-newupdates  esoc","initialize":function(o){var s=this;this.options.connector=this.options.connector?this.options.connector:this.options.context.getObject(l),this.options.blockingParentView?p.delegate(this,this.options.blockingParentView):p.imbue(this),this.loadingText=o.loadingText||v.loadingText,this.setError=function(e){var t=new r.Error(e),o=new n.Region({"el":this.el});this.unblockActions(),this.$el.find(".esoc-empty-activityfeed-wrapper").show(),this.el.classList.add("esoc-afw-error"),o.show(new g({"model":new i.Model({"message":t.message})}))},this.listenTo(this.collection,"error",e.bind(function(e,t,i){if(s.$el.parents().hasClass("tile-content"))this.setError(t);else var n=setInterval(function(){s.$el.parents().hasClass("conws-header-widget")&&(s.setError(t),clearInterval(n))},100)},this)).listenTo(this.collection,"request",function(){this.blockActions(),this.$el.find(".esoc-empty-activityfeed-wrapper").hide()}).listenTo(this.collection,"sync",function(){this.unblockActions(),this.$el.find(".esoc-empty-activityfeed-wrapper").show(),this.triggerMethod("update:scrollbar")});var a=this.options.context?this.options.context.getObject(f):void 0;a&&(this._lastContainerId=a.get("id"),this.listenTo(this.options.context,"request",function(){this.handleContainerChange(a)}),this.listenTo(a,"change:id",function(){this.handleContainerChange(a)})),this.on("refresh:collection",function(i){if(i){var n=e.extend({},s.options);i.feedtype&&(n.feedtype=i.feedtype),i.updatesfrom&&(n.updatesfrom=i.updatesfrom),s.collection.fetch(n),t(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+n.collection.widgetOptions.activityfeed.widgetId).hide()}this.triggerMethod("update:notification")})},"log":o,"commonUtil":a,"template":b,"templateHelpers":function(){var e="";void 0!==this.options.wrapperClass&&(e=this.options.wrapperClass);return void 0!==this.options.feedtype&&this.options.feedtype,{"title":this.options.title||v.dialogTitle,"icon":this.options.titleBarIcon,"searchPlaceholder":v.searchPlaceholder,"wrapperClass":e,"feedtype":this.options.widgetId||this.options.collection.widgetOptions.activityfeed.widgetId,"feedOptions":this.options,"noActivityFeedMessage":v.noactivities}},"childViewContainer":".object-group","childView":c,"emptyView":d,"childViewOptions":function(e,t){return{"strdViewOptions":this.options,"context":this.options.context,"parentCollectionView":this,"index":t}},"events":{"click .esoc-social-activity-load-more":"loadMoreItems","click .esoc-activityfeed-invisiblebutton":"getNewSinceId"},"triggers":{"click .tile-header":"click:header"},"behaviors":{"PerfectScrolling":{"behaviorClass":u,"suppressScrollX":!0},"InfiniteScrolling":{"behaviorClass":m},"DefaultAction":{"behaviorClass":s}},"childEvents":{"click:item":"onClickItem","click:attachment":"onClickAttachment","childview:comment:action":"onCommentdialogAction","childview:start:notification":"resumeNotification"},"onShow":function(){var e=this;this.options.headerView&&setTimeout(function(){e.triggerMethod("dom:refresh"),h.commonUtil.navigationWithArrowKeys(e,".object-group")},1e3);var t=this.collection.widgetOptions.config_settings&&this.collection.widgetOptions.config_settings.feedsAutoRefreshWait?this.collection.widgetOptions.config_settings.feedsAutoRefreshWait:this.collection.config_settings.feedsAutoRefreshWait?this.collection.config_settings.feedsAutoRefreshWait:void 0;t&&this.updateGetNotification(t),this.listenToOnce(this.collection,"sync",function(){t=t||this.collection.config_settings&&this.collection.config_settings.feedsAutoRefreshWait,setTimeout(function(){e.options.headerView||h.commonUtil.navigationWithArrowKeys(e,".object-group"),e.updateGetNotification(t)},500)})},"updateGetNotification":function(e){var i=this.collection.widgetOptions.activityfeed.widgetId;if(0===t(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+i).length&&setTimeout(this.commonUtil.alignUpdateButton,1e3,i,!0),0!==e){clearInterval(this.collection.widgetOptions.notificationInterval);(void 0===this.collection.widgetOptions.getNewUpdates||this.collection.widgetOptions.getNewUpdates)&&(this.adaptivepollObj=this.adaptivepollObj||new y(this.getLatestSinceId,"global_countdown_last_reset_timestamp",e,i,this),this.adaptivepollObj.lastState=1)}},"isSameContainer":function(e){var t=e.get("id");return t===this._lastContainerId||(this._lastContainerId=t,!1)},"handleContainerChange":function(e){if(!this.isSameContainer(e)&&this.options&&void 0!==this.options.honorfeedsource&this.options.honorfeedsource){this.options.objectnodeid=e.get("id");var i=this.collection.widgetOptions.activityfeed.widgetId,n=this.options.context._factories[i];void 0!==n&&(n.options.objectnodeid=this.options.objectnodeid),this.collection.fetch(this.options),this.triggerMethod("update:notification");var o=t(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+i);o.length>0&&o.hide()}},"getLatestSinceId":function(e,i){t(".esoc-activityfeed-list.esoc-activityfeed-list-"+e).find(".esoc-activityfeed-invisiblebutton").length>0&&(i.getNewSinceId(),i.collection.widgetOptions.notificationInterval=i.adaptivepollObj&&i.adaptivepollObj.setUpdateTimer())},"onUpdateNotification":function(){var e=this.collection.widgetOptions.activityfeed.widgetId;t(".esoc-activityfeed-expand-getnewupdates.esoc-activityfeed-expand-getnewupdates-"+e).hide(),t(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+e).hide();var i=this.options.config_settings&&this.options.config_settings.feedsAutoRefreshWait||this.collection.config_settings&&this.collection.config_settings.feedsAutoRefreshWait;i&&this.updateGetNotification(i)},"onCommentdialogAction":function(){t(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+this.collection.widgetOptions.activityfeed.widgetId).hide(),this.collection.fetch(e.extend(this.collection.widgetOptions,{"remove":!0}))},"resumeNotification":function(){var e=this.collection.config_settings&&this.collection.config_settings.feedsAutoRefreshWait;this.updateGetNotification(e)},"loadMoreItems":function(t){this.options=e.extend(this.options,{});var i=this.collection.models[this.collection.models.length-1];i.attributes.noMoreData||(delete this.collection.defaults.params.since_id,i.collection.defaults.params.queryParams={},this.collection.defaults.params.queryParams.max_id=i.get("id"),this.collection.fetch(e.extend({"remove":!1},this.collection.widgetOptions)),delete this.collection.defaults.params.queryParams.max_id)},"onClickItem":function(e){var t={"node":e.sgmModel,"callingViewInstance":this};this.commonUtil.openItem(t)},"onClickAttachment":function(e){var t={"node":e.attachmentModel,"callingViewInstance":this};this.commonUtil.openItem(t)},"onDestroy":function(){clearInterval(this.collection.widgetOptions.notificationInterval),this.adaptivepollObj&&this.adaptivepollObj.destroy()},"getNewSinceId":function(e){var i=this.collection.models.length>0?this.collection.models[0].attributes.id:0,n=this.options.connector,o=this.options.hideHeader,s=this,l="",a=void 0!==s.options.context?s.options.context:s.options.activityfeed.context,r=s.collection.widgetOptions.activityfeed.widgetId;s.feedtype=this.collection.widgetOptions.feedtype?this.collection.widgetOptions.feedtype:this.options.feedtype,s.updatesfrom=this.collection.widgetOptions.updatesfrom?this.collection.widgetOptions.updatesfrom:this.options.updatesfrom,s.widgetId=r;var c=a._factories[r];void 0!==c&&void 0!==c.options&&void 0!==c.options.honorfeedsource&&c.options.honorfeedsource&&void 0!==c.options.objectnodeid?(i=this.collection.models.length>0?this.collection.models[0].attributes.id:0,l="&where_feedsource=pulsefrom&where_feedsource_id="+c.options.objectnodeid):void 0!==this.options.feedsource&&(void 0!==this.options.feedsource.source&&this.options.feedsource.source&&(l="&where_feedsource="+this.options.feedsource.source),void 0!==this.options.feedsource.id&&this.options.feedsource.id&&(l=l+"&where_feedsource_id="+this.options.feedsource.id)),void 0!==s.updatesfrom&&(void 0!==s.updatesfrom.from&&s.updatesfrom.from&&(l=l+"&where_updatesfrom="+s.updatesfrom.from),void 0!==s.updatesfrom.id&&s.updatesfrom.id&&(l=l+"&where_updatesfrom_id="+s.updatesfrom.id)),t.ajax(n.extendAjaxOptions({"url":n.getConnectionUrl().getApiBase("v2")+this.commonUtil.REST_URLS.csGetAFSinceId+s.feedtype+l,"type":"GET","success":function(e,n,l){if(void 0!==e.results.lastestIDReturned&&parseInt(e.lastestIDReturned,10)!==parseInt(i,10)){var a=t(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+s.widgetId);t(a).addClass(o?"":"esoc-activityfeed-getnewupdates-top").show(),t(a).one("click",s,s.getNewUpdates),t(a).on("keydown",s,function(e){var t=e.keyCode||e.which;13!==t&&32!==t||s.getNewUpdates(e)}),clearInterval(s.options.collection.widgetOptions.notificationInterval),null!==s.adaptivepollObj&&(s.adaptivepollObj.destroy(),s.adaptivepollObj=null)}},"error":function(e,t,i){s.log.error("Error while retriving the latest since Id...")}}))},"getNewUpdates":function(i){var n=i.data,o=n.options.widgetId||n.collection.widgetOptions.activityfeed.widgetId,s=n.options.config_settings&&n.options.config_settings.feedsAutoRefreshWait||n.collection.config_settings&&n.collection.config_settings.feedsAutoRefreshWait;if(!t(i.target).hasClass("esoc-activityfeed-close")){delete n.collection.defaults.params.since_id,delete n.collection.defaults.params.max_id,n.collection.defaults.params.queryParams={};void 0!==n.options.context?n.options.context:n.options.activityfeed.context;n.$el.scrollTop(0),n.collection.fetch(e.extend(n.collection.widgetOptions,{"remove":!0}))}t(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+o).hide(),t(".esoc-activityfeed-new-updates-wrapper").css("outline","none"),s&&n.updateGetNotification(s)}})}),csui.define("esoc/widgets/activityfeedwidget/activityfeeditem.model",["csui/lib/jquery","csui/lib/backbone"],function(e,t,i){return t.Model.extend({"defaults":{"id":0,"data_id":0,"created_at":"-","text":"-","feed_event_type":0,"user":{"name":"-","screen_name":"-","profile_image_url":"-"},"noMoreData":!0},"constructor":function(){t.Model.prototype.constructor.apply(this,arguments)}})}),csui.define("esoc/widgets/activityfeedwidget/activityfeed.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/base","csui/utils/url","csui/behaviors/default.action/impl/defaultaction","csui/models/connectable","csui/models/fetchable","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model","csui/models/clientsidecollection","esoc/widgets/activityfeedwidget/activityfeeditem.model","esoc/widgets/common/util"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m){var h=r.extend({}),f=(c.extend({"model":h,"getColumnModels":function(t,i){var n=c.prototype.getColumnModels.call(this,t,i);return e.each(n,function(e){var t=e.column_key;"type"!==t&&"name"!==t&&"modify_date"!==t||(e.sort=!0)}),n}}),d.extend({"parse":function(e,t){return e.name=e.text,d.prototype.parse.call(this,e,t)}}));return i.Collection.extend(e.extend({},l(i.Collection),a(i.Collection),u(),{"defaults":{"params":{"data_id":"","text":"","since_id":"","max_id":""}},"model":f,"base":n,"feedRESTUrl":"","constRESTUrl":"","maxMessageLength":"","feedtype":"","widgetOptions":{},"context":"","commonUtil":m,"config_settings":{},"url":function(){return this.constructURL(this.options),this.feedRESTUrl},"constructURL":function(e){if(e){this.options=e||{},this.constRESTUrl=e.connector?e.connector.connection.url:this.connector.connection.url,this.constRESTUrl+="/pulse/statuses/public_timeline?commands=default&count="+(e.feedsize?e.feedsize:15)+"&includes=actions,reply_count&where_feedtype="+(e.feedtype?e.feedtype:"all");var i,n,l="";void 0!==e.honorfeedsource?i=e.honorfeedsource:e.activityfeed&&void 0!==e.activityfeed.honorfeedsource&&(i=e.activityfeed.honorfeedsource),void 0!==e.objectnodeid?n=e.objectnodeid:e.activityfeed&&void 0!==e.activityfeed.objectnodeid&&(n=e.activityfeed.objectnodeid),i&&void 0!==n?l="&where_feedsource=pulsefrom&where_feedsource_id="+n:void 0!==e.feedsource&&(void 0!==e.feedsource.source&&e.feedsource.source&&(l="&where_feedsource="+e.feedsource.source),void 0!==e.feedsource.id&&e.feedsource.id&&(l=l+"&where_feedsource_id="+e.feedsource.id)),void 0!==e.updatesfrom&&(void 0!==e.updatesfrom.from&&e.updatesfrom.from&&(l=l+"&where_updatesfrom="+e.updatesfrom.from),void 0!==e.updatesfrom.id&&e.updatesfrom.id&&(l=l+"&where_updatesfrom_id="+e.updatesfrom.id));var a=new s,r={"commands":a.actionItems.getAllCommandSignatures(a.commands)};if(this.constRESTUrl=o.appendQuery(this.constRESTUrl,o.combineQueryString(r))+l,this.feedRESTUrl=this.constRESTUrl,e.params=t.extend(this.defaults.params,e.params),e.params.queryParams){var c=void 0!==e.params.queryParams?"&"+t.param(e.params.queryParams):"";this.feedRESTUrl=this.constRESTUrl+c}delete this.widgetOptions.remove,delete e.remove,this.widgetOptions=t.extend(this.widgetOptions,e)}return this.constRESTUrl},"constructor":function(e,n){if(this.options=n||{},n&&n.connector&&n.connector.assignTo(this),n){this.defaults.params=t.extend(this.defaults.params,n.params),this.constRESTUrl=n.connector.connection.url,this.constRESTUrl+="/pulse/statuses/public_timeline?commands=default&count="+(n.feedsize?n.feedsize:15)+"&includes=actions,reply_count&where_feedtype="+(n.feedtype?n.feedtype:"all");var o,s,l="";void 0!==n.honorfeedsource?o=n.honorfeedsource:n.activityfeed&&void 0!==n.activityfeed.honorfeedsource&&(o=n.activityfeed.honorfeedsource),void 0!==n.objectnodeid?s=n.objectnodeid:n.activityfeed&&void 0!==n.activityfeed.objectnodeid&&(s=n.activityfeed.objectnodeid),o&&void 0!==s?l="&where_feedsource=pulsefrom&where_feedsource_id="+s:void 0!==n.feedsource&&(void 0!==n.feedsource.source&&n.feedsource.source&&(l="&where_feedsource="+n.feedsource.source),void 0!==n.feedsource.id&&n.feedsource.id&&(l=l+"&where_feedsource_id="+n.feedsource.id)),void 0!==n.updatesfrom&&(void 0!==n.updatesfrom.from&&n.updatesfrom.from&&(l=l+"&where_updatesfrom="+n.updatesfrom.from),void 0!==n.updatesfrom.id&&n.updatesfrom.id&&(l=l+"&where_updatesfrom_id="+n.updatesfrom.id)),this.constRESTUrl=this.constRESTUrl+l,this.feedRESTUrl=this.constRESTUrl,this.enableComments=n.enableComments,this.enableFilters=n.enableFilters,this.maxMessageLength=n.maxMessageLength,this.feedtype=n.feedtype,this.context=void 0!==n.context?n.context:n.activityfeed.context,this.widgetOptions=t.extend(n,this.widgetOptions)}i.Collection.prototype.constructor.apply(this,arguments)},"fetch":function(i){return i&&!t.isEmptyObject(i)&&e.extend(this.options,i),this.Fetchable.fetch.apply(this,arguments)},"parse":function(e){var t=JSON.parse(JSON.stringify(e.data));return this.config_settings=e.config_settings,this.parseActivityFeedResponse(t)},"fetchError":function(e,t){var i={"parent":"body","errorContent":t.responseJSON?t.responseJSON.errorDetail?t.responseJSON.errorDetail:t.responseJSON.error:e.lang.defaultErrorMessageCommentsFetch};e.commonUtil.openErrorDialog(i)},"parseActivityFeedResponse":function(e){for(var i in e){var n=e[i];n.commentText=t.trim(n.text),n.maxMessageLength=this.maxMessageLength,n.feedtype=this.options.feedtype?this.options.feedtype:this.feedtype,n.widgetOptions=this.widgetOptions,n.config_settings=this.config_settings,n.created_at_iso8601=this.base.formatFriendlyDateTimeNow(n.created_at_iso8601),""!==n.modified_at_iso8601&&void 0!==n.modified_at_iso8601&&(n.modified_at_iso8601=this.base.formatFriendlyDateTimeNow(n.modified_at_iso8601))}return e}}))}),csui.define("esoc/widgets/activityfeedwidget/activityfeed.view",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/behaviors/default.action/default.action.behavior","csui/utils/contexts/factories/connector","esoc/widgets/activityfeedwidget/activityfeeditem.view","esoc/widgets/activityfeedwidget/emptyactivityfeed.view","esoc/widgets/common/util","i18n!esoc/widgets/activityfeedwidget/impl/nls/lang","hbs!esoc/widgets/activityfeedwidget/impl/newupdates","esoc/widgets/utils/adaptivepoll"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m){var h=null;return o.CollectionView.extend({"tagName":"div","className":"activityfeed-list binf-container-fluid","childView":r,"emptyView":c,"log":s,"commonUtil":d,"feedtype":"","options":{},"childViewOptions":function(e,t){return{"context":this.options.context,"defaultActionController":this.defaultActionController,"parentCollectionView":this.options.parentCollectionView?this.options.parentCollectionView:this.options.activityfeed&&this.options.activityfeed.parentCollectionView,"index":t}},"setParentView":function(e){this.parentView=e},"initialize":function(t){h=this,this.listenTo(this.collection,"request",function(){this.$el.find(".esoc-empty-activityfeed-wrapper").hide()}).listenTo(this.collection,"sync",function(){this.$el.find(".esoc-empty-activityfeed-wrapper").show()}),this.childView||(this.childView=e("esoc/widgets/activityfeedwidget/activityfeeditem.view")),this.on("refresh:collection",function(e){if(e){var t=i.extend({},this.options);e.feedtype&&(t.feedtype=e.feedtype),e.updatesfrom&&(t.updatesfrom=e.updatesfrom),this.collection.fetch(i.extend({"error":this.collection.fetchError},t)),this.triggerMethod("update:notification")}})},"constructor":function(e){e.connector=e.connector?e.connector:e.context.getObject(a),o.CollectionView.prototype.constructor.apply(this,arguments)},"behaviors":{"DefaultAction":{"behaviorClass":l}},"childEvents":{"click:item":"onClickItem","click:attachment":"onClickAttachment","childview:comment:action":"onCommentdialogAction","childview:start:notification":"resumeNotification"},"events":{"click .esoc-social-activity-load-more":"loadMoreItems"},"onCommentdialogAction":function(){t(".esoc-activityfeed-expand-getnewupdates.esoc-activityfeed-expand-getnewupdates-"+this.collection.widgetOptions.activityfeed.widgetId).hide(),t(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+this.collection.widgetOptions.activityfeed.widgetId).hide(),t(".esoc-acitivityfeed-collection").scrollTop(0),t(".esoc-afw-object-view").has(".esoc-activityfeed-list-"+this.collection.widgetOptions.activityfeed.widgetId).scrollTop(0),this.collection.fetch(i.extend(this.collection.widgetOptions,{"remove":!0}));var e=this.collection.config_settings&&this.collection.config_settings.feedsAutoRefreshWait;this.updateGetNotification(e)},"resumeNotification":function(e){var t=this.collection.config_settings&&this.collection.config_settings.feedsAutoRefreshWait;this.updateGetNotification(t)},"onClickItem":function(e){var t={"node":e.sgmModel,"callingViewInstance":this};this.commonUtil.openItem(t)},"onClickAttachment":function(e){var t={"node":e.attachmentModel,"callingViewInstance":this};this.commonUtil.openItem(t)},"onShow":function(e){var i=this.options.collection.widgetOptions;void 0!==i.activityfeed&&(i=i.activityfeed);var n=i.wrapperClass;if(n&&n.trim().length>0){var o=this.$el.parent().parent();o.addClass(n);var s=this.$el.closest(".activityfeed-expand").find("."+n),l=t("."+n).css("background-color");o.css("background-color",l),this.$el.closest(".activityfeed-expand").find(".tile-content").css("background-color",l),s.find(".object-group-item").css("background-color",l),s.find(".tile-header").css("background-color",l),this.$el.closest(".activityfeed-expand").find(".binf-container-fluid").css("background-color",l),this.$el.closest(".activityfeed-expand").find(".binf-modal-body").css("background-color",l)}var a=this.options.collection.config_settings&&this.options.collection.config_settings.feedsAutoRefreshWait;if(a)this.updateGetNotification(a),t(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+i.widgetId)&&0!==a&&this.getExpandNewSinceId();else{var r=this;this.listenToOnce(this.options.collection,"sync",function(){a=r.options.collection.config_settings&&r.options.collection.config_settings.feedsAutoRefreshWait,r.updateGetNotification(a),t(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+i.widgetId)&&0!==a&&r.getExpandNewSinceId()})}},"onDestroy":function(){clearInterval(this.collection.widgetOptions.expNotificationInterval),this.adaptivepollObj&&this.adaptivepollObj.destroy()},"onUpdateNotification":function(){var e=this.collection.widgetOptions.activityfeed.widgetId;t(".esoc-activityfeed-expand-getnewupdates.esoc-activityfeed-expand-getnewupdates-"+e).hide(),t(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+e).hide();var i=this.collection.config_settings&&this.collection.config_settings.feedsAutoRefreshWait;i&&this.updateGetNotification(i)},"loadMoreItems":function(e){var t=this.collection.models[this.collection.models.length-1];if(!t.attributes.noMoreData){delete this.collection.defaults.params.since_id,this.collection.defaults.params.queryParams={},this.collection.defaults.params.queryParams.max_id=t.get("id");void 0!==this.options.context?this.options.context:this.options.activityfeed.context;this.collection.widgetOptions.remove&&(this.collection.widgetOptions.remove=!1),this.collection.fetch(i.extend({"remove":!1},this.collection.widgetOptions)),
delete this.collection.defaults.params.queryParams.max_id}},"updateGetNotification":function(e){var i=this.collection.widgetOptions.activityfeed.widgetId;0===t(".esoc-activityfeed-expand-getnewupdates.esoc-activityfeed-expand-getnewupdates-"+i).length&&setTimeout(this.alignUpdateButton,1e3,this.$el,i),0!==e&&(clearInterval(this.collection.widgetOptions.expNotificationInterval),this.adaptivepollObj=this.adaptivepollObj||new m(this.getExpandLatestSinceId,"global_countdown_last_reset_timestamp",e,i,this),this.adaptivepollObj.lastState=1)},"alignUpdateButton":function(e,i){var n=t("<div />",{"class":"esoc-activityfeed-new-updates-wrapper","html":p({"messages":u,"newUpdatesWrapperClass":"esoc-activityfeed-expand-getnewupdates esoc-activityfeed-expand-getnewupdates-"+i})}),o=t("<div />",{"class":"activityfeed-expand-invisiblebutton-"+i});n.css({"position":"absolute","top":"15px","left":"50%","transform":"translate(-50%, -50%)"}),e.closest(".esoc-afw-newupdates").parent().append(n),e.append(o)},"getNewUpdates":function(e){var n=e.data,o=n.options.config_settings&&n.options.config_settings.feedsAutoRefreshWait||n.collection.config_settings&&n.collection.config_settings.feedsAutoRefreshWait;if(!t(e.target).hasClass("esoc-activityfeed-close")){delete n.collection.defaults.params.since_id,delete n.collection.defaults.params.max_id,n.collection.defaults.params.queryParams={};void 0!==n.options.context?n.options.context:n.options.activityfeed.context;t(".esoc-acitivityfeed-collection").scrollTop(0),n.collection.fetch(i.extend(n.options,{"remove":!0})),t(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+n.options.activityfeed.widgetId).trigger("click")}t(".esoc-activityfeed-expand-getnewupdates.esoc-activityfeed-expand-getnewupdates-"+n.options.activityfeed.widgetId).hide(),o&&n.updateGetNotification(o)},"getExpandNewSinceId":function(e){e=e&&e.data?e.data:h;var i=e.collection.models.length>0?e.collection.models[0].attributes.id:0,n=this.options.connector,o=e.options.hideHeader;e.feedtype=e.collection.widgetOptions.feedtype,e.updatesfrom=e.collection.widgetOptions.updatesfrom?e.collection.widgetOptions.updatesfrom:e.options.updatesfrom;var s="",l=e.collection.models.length>0?e.collection.models[0].attributes.widgetOptions:e.collection.widgetOptions;e.options=!1===t.isEmptyObject(l)?l:e.options;var a=void 0!==e.options.context?e.options.context:e.options.activityfeed.context,r=a._factories[e.collection.widgetOptions.activityfeed.widgetId];void 0!==r&&void 0!==r.options&&void 0!==r.options.honorfeedsource&&r.options.honorfeedsource&&void 0!==r&&void 0!==r.options&&void 0!==r.options.objectnodeid?s="&where_feedsource=pulsefrom&where_feedsource_id="+r.options.objectnodeid:void 0!==e.options.feedsource&&(void 0!==e.options.feedsource.source&&e.options.feedsource.source&&(s="&where_feedsource="+e.options.feedsource.source),void 0!==e.options.feedsource.id&&e.options.feedsource.id&&(s=s+"&where_feedsource_id="+e.options.feedsource.id)),void 0!==e.updatesfrom&&(void 0!==e.updatesfrom.from&&e.updatesfrom.from&&(s=s+"&where_updatesfrom="+e.updatesfrom.from),void 0!==e.updatesfrom.id&&e.updatesfrom.id&&(s=s+"&where_updatesfrom_id="+e.updatesfrom.id)),t.ajax(n.extendAjaxOptions({"url":n.getConnectionUrl().getApiBase("v2")+e.commonUtil.REST_URLS.csGetAFSinceId+e.feedtype+s,"type":"GET","success":function(n,s,l){if(void 0!==n.results.lastestIDReturned&&parseInt(n.lastestIDReturned,10)!==parseInt(i,10)){var a=t(".esoc-activityfeed-expand-getnewupdates.esoc-activityfeed-expand-getnewupdates-"+e.options.activityfeed.widgetId);t(a).addClass(o?"":"esoc-activityfeed-expand-getnewupdates-top").show(),t(a).on("focus",function(i){var n=t(i.target),o=e.parentView;n.is(":visible")&&o&&h.commonUtil.addTabableClass(o,n)}),t(a).length>0&&(clearInterval(e.collection.widgetOptions.expNotificationInterval),null!==e.adaptivepollObj&&(e.adaptivepollObj.destroy(),e.adaptivepollObj=null)),t(a).on("keydown",h,function(t){var i=t.keyCode||t.which;13!==i&&32!==i||e.getNewUpdates(t)}),t(a).one("click",e,e.getNewUpdates)}},"error":function(e,t,i){h.log.error("Error while retriving the latest since Id...")}}))},"getExpandLatestSinceId":function(e,i){t(".activityfeed-expand-invisiblebutton-"+e).length>0&&(i.getExpandNewSinceId(i),i.collection.widgetOptions.expNotificationInterval=i.adaptivepollObj&&i.adaptivepollObj.setUpdateTimer())}})}),csui.define("esoc/widgets/activityfeedwidget/activityfeedfactory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/utils/namedsessionstorage","esoc/widgets/activityfeedwidget/activityfeed.model","csui/utils/contexts/factories/node"],function(e,t,i,n,o,s,l,a){return n.extend({"propertyPrefix":"activityfeed","uniqueid":"all","namedSessionStorage":new s("esoc-activity-filterinfo"),"constructor":function(s,r){n.prototype.constructor.apply(this,arguments),this.options.activityfeed=this.options[this.uniqueid]||{};var c,d=this.options.filterSource?this.options.filterSource+"_"+this.uniqueid:this.uniqueid;c=this.namedSessionStorage.get(d),this.options.activityfeed=this.options[this.uniqueid]||{},this.options.activityfeed.widgetId=this.uniqueid,c&&(c.feedtype&&(this.options.activityfeed.feedtype=c.feedtype),c.updatesfrom&&(this.options.activityfeed.updatesfrom=c.updatesfrom));var u=this.options.activityfeed||{};if(!(u instanceof i.Collection)){var p=s.getObject(o,r),m=s.getObject(a),h=e.config();this.options.connector=p,this.options.feedsize=void 0!==this.options.activityfeed.feedsize?parseInt(this.options.activityfeed.feedsize,10):15,this.options.feedtype=void 0!==this.options.activityfeed.feedtype?this.options.activityfeed.feedtype:"all",void 0!==this.options.activityfeed.feedSettings&&void 0!==this.options.activityfeed.feedSettings.enableComments?this.options.enableComments=this.options.activityfeed.feedSettings.enableComments:this.options.enableComments=!0,void 0!==this.options.activityfeed.feedSettings&&void 0!==this.options.activityfeed.feedSettings.enableFilters?this.options.enableFilters=this.options.activityfeed.feedSettings.enableFilters:this.options.enableFilters=!1;var f=void 0!==this.options.activityfeed.honorfeedsource&&this.options.activityfeed.honorfeedsource;f&&(this.options.honorfeedsource=f,void 0!==m.get("id")&&(this.options.objectnodeid=m.get("id"))),void 0!==this.options.activityfeed.feedsource?this.options.feedsource=this.options.activityfeed.feedsource:this.options.feedsource={"source":"all"},void 0!==this.options.activityfeed.updatesfrom?this.options.updatesfrom=this.options.activityfeed.updatesfrom:this.options.updatesfrom={"from":"all"},void 0!==this.options.activityfeed.wrapperClass&&(this.options.wrapperClass=this.options.activityfeed.wrapperClass);var g;void 0!==this.options.activityfeed.config_settings&&void 0!==this.options.activityfeed.config_settings.feedsAutoRefreshWait&&(g=this.options.activityfeed.config_settings.feedsAutoRefreshWait),this.options.config_settings={"feedsAutoRefreshWait":g},this.options.maxMessageLength=void 0!==this.options.activityfeed.config_settings&&void 0!==this.options.activityfeed.config_settings.maxMessageLength?parseInt(this.options.activityfeed.config_settings.maxMessageLength,10):void 0,u=new l(u.models,t.extend({"connector":p,"context":s},this.options,h.options,{"autoreset":!0}))}this.property=u},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("hbs!esoc/widgets/activityfeedwidget/impl/activityfilter",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return" icon-checkbox-selected "},"3":function(e,t,i,n,o){return" icon-checkbox "},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="csui-facet">\r\n            <a href="javascript:void(0);" class="esoc-activityfeed-filter-updatesfrom"\r\n               data-binf-toggle="collapse"\r\n               data-binf-target="#esoc-activityfeed-updatesfromfilter-'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"widgetid"):s,t))+'">\r\n              <div class="csui-facet-header">\r\n                <div class="header-label"\r\n                     title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"updatesfrom"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"updatesfrom"):s,t))+'</div>\r\n                <div class="cs-icon csui-button-icon icon-expandArrowDown"></div>\r\n                <div class="cs-icon csui-button-icon icon-expandArrowUp"></div>\r\n                <div class="csui-right-shadow"></div>\r\n              </div>\r\n            </a>\r\n\r\n            <div id="esoc-activityfeed-updatesfromfilter-'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"widgetid"):s,t))+'"\r\n                 class="binf-in csui-facet-content esoc-activity-filter-content">\r\n              <div class="cs-filter-group">\r\n                <div class="csui-facet-item">\r\n                  <div class="esoc-activity-filter-selection-label">\r\n                    <input type="radio" name="updatesfrom" id="esoc_activityfeed_filter_allusers"\r\n                           class="esoc_activityfeed_filter"\r\n                           value="all" checked="'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"from"):s)?l(s,"all"):s,t))+'">\r\n                    <span id="esoc_activityfeed_filter_allusers_radio"\r\n                          class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"from"):s)?l(s,"all"):s,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.program(8,o,0),"loc":{"start":{"line":99,"column":33},"end":{"line":99,"column":129}}}))?s:"")+'"></span>\r\n                  </div>\r\n\r\n                  <div class="csui-filter-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"allusers"):s,t))+'">\r\n                      <label for="esoc_activityfeed_filter_allusers" class="csui-name">\r\n                          '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"allusers"):s,t))+'\r\n                      </label>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="csui-facet-item">\r\n                  <div class="esoc-activity-filter-selection-label">\r\n                    <input type="radio" name="updatesfrom"\r\n                           id="esoc_activityfeed_filter_iamfollowing"\r\n                           value="following"  checked="'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"from"):s)?l(s,"following"):s,t))+'"\r\n                           class="esoc_activityfeed_filter">\r\n                    <span id="esoc_activityfeed_filter_iamfollowing_radio"\r\n                          class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"from"):s)?l(s,"following"):s,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.program(8,o,0),"loc":{"start":{"line":116,"column":33},"end":{"line":116,"column":135}}}))?s:"")+'"></span>\r\n                  </div>\r\n\r\n                  <div class="csui-filter-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"iamfollowing"):s,t))+'">\r\n                      <label for="esoc_activityfeed_filter_iamfollowing" class="csui-name">\r\n                          '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"iamfollowing"):s,t))+'\r\n                      </label>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="csui-facet-item">\r\n                  <div class="esoc-activity-filter-selection-label">\r\n                    <input type="radio" name="updatesfrom" id="esoc_activityfeed_filter_myfollowers"\r\n                           class="esoc_activityfeed_filter"\r\n                           value="followers"  checked="'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"from"):s)?l(s,"followers"):s,t))+'">\r\n                    <span id="esoc_activityfeed_filter_myfollowers_radio"\r\n                          class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"from"):s)?l(s,"followers"):s,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.program(8,o,0),"loc":{"start":{"line":132,"column":33},"end":{"line":132,"column":135}}}))?s:"")+'"></span>\r\n                  </div>\r\n\r\n                  <div class="csui-filter-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"myfollowers"):s,t))+'">\r\n                      <label for="esoc_activityfeed_filter_myfollowers" class="csui-name">\r\n                          '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"myfollowers"):s,t))+'\r\n                      </label>\r\n                  </div>\r\n                </div>\r\n                <div class="csui-facet-item">\r\n                  <div class="esoc-activity-filter-selection-label">\r\n                    <input type="radio" name="updatesfrom" id="esoc_activityfeed_filter_myupdates"\r\n                           value="myupdates" checked="'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"from"):s)?l(s,"myupdates"):s,t))+'"\r\n                           class="esoc_activityfeed_filter">\r\n                    <span id="esoc_activityfeed_filter_myupdates_radio"\r\n                          class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"from"):s)?l(s,"myupdates"):s,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.program(8,o,0),"loc":{"start":{"line":147,"column":33},"end":{"line":147,"column":135}}}))?s:"")+'"></span>\r\n                  </div>\r\n\r\n                  <div class="csui-filter-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"myupdates"):s,t))+'">\r\n                      <label for="esoc_activityfeed_filter_myupdates" class="csui-name">\r\n                          '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"myupdates"):s,t))+'\r\n                      </label>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="csui-facet-item">\r\n                  <div class="esoc-activity-filter-selection-label">\r\n                    <input type="radio" name="updatesfrom" id="esoc_activityfeed_filter_mentions"\r\n                           value="mentions"\r\n                           class="esoc_activityfeed_filter"\r\n                           checked="'+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"from"):s)?l(s,"mentions"):s,t))+'">\r\n                    <span id="esoc_activityfeed_filter_mentions_radio"\r\n                          class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"from"):s)?l(s,"mentions"):s,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.program(8,o,0),"loc":{"start":{"line":164,"column":33},"end":{"line":164,"column":134}}}))?s:"")+'"></span>\r\n                  </div>\r\n\r\n                  <div class="csui-filter-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mentions"):s,t))+'">\r\n                      <label for="esoc_activityfeed_filter_mentions" class="csui-name">\r\n                          '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"mentions"):s,t))+'\r\n                      </label>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="csui-facet-item">\r\n                  <div class="esoc-activity-filter-selection-label">\r\n                    <input type="radio" name="updatesfrom" id="esoc_activityfeed_filter_myfavorites"\r\n                           value="myfavorites"\r\n                           class="esoc_activityfeed_filter" '+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"from"):s)?l(s,"myfavorites"):s,t))+'>\r\n                    <span id="esoc_activityfeed_filter_myfavorites_radio"\r\n                          class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"from"):s)?l(s,"myfavorites"):s,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.program(8,o,0),"loc":{"start":{"line":180,"column":33},"end":{"line":180,"column":137}}}))?s:"")+'"></span>\r\n                  </div>\r\n\r\n                  <div class="csui-filter-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"myfavorites"):s,t))+'">\r\n                      <label for="esoc_activityfeed_filter_myfavorites" class="csui-name">\r\n                          '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"myfavorites"):s,t))+"\r\n                      </label>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n            </div>\r\n          </div>\r\n"},"6":function(e,t,i,n,o){return" icon-radiobutton-selected "},"8":function(e,t,i,n,o){return" icon-radiobutton "},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="esoc-activityfeed-filter">\r\n  <div class="cs-simplelist csui-facet-panel">\r\n    <div class="cs-header binf-panel-heading">\r\n      <span class="cs-title">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"refineby"):s,t))+'</span>\r\n\r\n      <div class="csui-right-shadow"></div>\r\n    </div>\r\n    <div class="esoc-activityfeed-filters cs-content">\r\n      <div class="cs-list-group">\r\n        <div class="csui-facet">\r\n          <a href="javascript:void(0);" class="esoc-activityfeed-filter-types"\r\n             data-binf-toggle="collapse"\r\n             data-binf-target="#esoc-activityfeed-filtertypes-'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"widgetid"):s,t))+'">\r\n            <div class="csui-facet-header">\r\n              <div class="header-label esoc-activityfeed-allfilter-label binf-hidden"\r\n                   title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"allselectedlabel"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"allselectedlabel"):s,t))+'</div>\r\n              <div class="header-label esoc-activityfeed-filter-feedtypes binf-hidden"\r\n                   title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"activitytypes"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"activitytypes"):s,t))+'</div>\r\n              <div class="cs-icon csui-button-icon icon-expandArrowDown"></div>\r\n              <div class="cs-icon csui-button-icon icon-expandArrowUp"></div>\r\n              <div class="csui-right-shadow"></div>\r\n            </div>\r\n          </a>\r\n\r\n          <div id="esoc-activityfeed-filtertypes-'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"widgetid"):s,t))+'"\r\n               class="binf-in csui-facet-content esoc-activity-filter-content">\r\n            <div class="cs-filter-group">\r\n              <div class="csui-facet-item">\r\n                <div class="esoc-activity-filter-selection-label">\r\n                  <input type="checkbox" name="feedtype" value="status"\r\n                         id="esoc_activityfeed_filter_status"\r\n                         class="esoc_activityfeed_filter" '+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"status"):s,t))+' >\r\n                  <span id="esoc_activityfeed_filter_status_checkbox"\r\n                        class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"status"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":34,"column":31},"end":{"line":34,"column":119}}}))?s:"")+'"></span>\r\n                </div>\r\n\r\n                <div class="csui-filter-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"statusupdates"):s,t))+'">\r\n                    <label for="esoc_activityfeed_filter_status" class="csui-name">\r\n                        '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"statusupdates"):s,t))+'\r\n                    </label>\r\n                </div>\r\n              </div>\r\n              <div class="csui-facet-item">\r\n                <div class="esoc-activity-filter-selection-label">\r\n                  <input type="checkbox" name="feedtype" value="content"\r\n                         id="esoc_activityfeed_filter_content"\r\n                         class="esoc_activityfeed_filter" '+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"content"):s,t))+'>\r\n                  <span id="esoc_activityfeed_filter_content_checkbox"\r\n                        class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"content"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":49,"column":31},"end":{"line":49,"column":120}}}))?s:"")+'"></span>\r\n                </div>\r\n\r\n                <div class="csui-filter-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"contentupdates"):s,t))+'">\r\n                    <label for="esoc_activityfeed_filter_content" class="csui-name">\r\n                        '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"contentupdates"):s,t))+'\r\n                    </label>\r\n                </div>\r\n              </div>\r\n              <div class="csui-facet-item">\r\n                <div class="esoc-activity-filter-selection-label">\r\n                  <input type="checkbox" name="feedtype" value="attribute"\r\n                         id="esoc_activityfeed_filter_attribute"\r\n                         class="esoc_activityfeed_filter" '+e.escapeExpression(e.lambda(null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"attribute"):s,t))+'>\r\n                  <span id="esoc_activityfeed_filter_attribute_checkbox"\r\n                        class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=(s=null!=t?l(t,"messages"):t)?l(s,"fieldValue"):s)?l(s,"attribute"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":64,"column":31},"end":{"line":64,"column":122}}}))?s:"")+'"></span>\r\n                </div>\r\n\r\n                <div class="csui-filter-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attributeupdates"):s,t))+'">\r\n                    <label for="esoc_activityfeed_filter_attribute" class="csui-name">\r\n                        '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"attributeupdates"):s,t))+"\r\n                    </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"hideupdatesfrom"):s,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(5,o,0),"loc":{"start":{"line":76,"column":8},"end":{"line":193,"column":15}}}))?s:"")+"      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n"}});return i.registerPartial("esoc_widgets_activityfeedwidget_impl_activityfilter",n),n}),csui.define("esoc/widgets/activityfeedwidget/activityfeedfilter.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/utils/namedsessionstorage","csui/utils/contexts/factories/user","esoc/widgets/activityfeedwidget/util","i18n!esoc/widgets/activityfeedwidget/impl/nls/lang","hbs!esoc/widgets/activityfeedwidget/impl/activityfilter","csui/lib/perfect-scrollbar"],function(e,t,i,n,o,s,l,a,r){var c=null;return n.ItemView.extend({"className":"esoc-activity-filter-view","isAlreadyClicked":!1,"template":r,"namedSessionStorage":new o("esoc-activity-filterinfo"),"util":l,"templateHelpers":function(){return{"messages":{"fieldValue":this.fillFormFields(),"hideupdatesfrom":this.options.hideupdatesfrom,"contentupdates":a.contentupdates,"attributeupdates":a.attributeupdates,"statusupdates":a.statusupdates,"allusers":a.allusers,"iamfollowing":a.iamfollowing,"myfollowers":a.myfollowers,"myupdates":a.myupdates,"mentions":a.mentions,"myfavorites":a.myfavorites,"activitytypes":a.activitytypes,"refineby":a.refineby,"updatesfrom":a.updatesfrom,"allselectedlabel":a.allselectedlabel,"widgetid":this.options.widgetId||this.options.collection.widgetOptions.activityfeed.widgetId}}},"initialize":function(e){this.options=e,c=this},"constructor":function(e,t){e=e||{},n.ItemView.prototype.constructor.call(this,e),this.firstFilterIndex=0,this.lastFilterIndex=0,this.parentView=t},"onKeyInView":function(t,i){var n=t.keyCode,o=e(t.target);switch(n){case 32:case 13:o.prop("checked")?o.prop("checked",!1):o.prop("checked",!0),o.triggerHandler("click",!0);break;case 38:case 40:this.moveToNextFilter(this,38===n,o,i);break;default:return!0}return!1},"moveToNextFilter":function(e,t,i,n){n?this.processFilter(".csui-facet:first .csui-facet-item",t,"firstFilter"):this.processFilter(".csui-facet:last .csui-facet-item",t,"lastFilter")},"processFilter":function(t,i,n){var o=this.$el.find(t),s=o.length-1,a=n+"Index",r=n+"Element",c=e(o[this[a]]).find(".esoc_activityfeed_filter");this[a]=i?0===this[a]?s:--this[a]:this[a]===s?0:++this[a],this[r]=e(o[this[a]]).find(".esoc_activityfeed_filter"),this.parentView&&l.commonUtil.moveFocusFromSrcToDest(this.parentView,c,this[r],!0);var d=this[r].first();"radio"!==d.attr("type")&&d.trigger("focus")},"onAfterShow":function(){var e,t=this;t.$el.find(".esoc_activityfeed_filter").on("click",function(e,i){if(i)t.updateActivityFeed(e),t.isAlreadyClicked=!0;else{if(t.isAlreadyClicked)return t.isAlreadyClicked=!1,e.preventDefault(),e.stopPropagation(),!1;t.updateActivityFeed(e)}}),this.parentView&&(e=this.parentView,"userwidget"!==e.options.origin?(t.$el.find(".cs-filter-group:first .esoc_activityfeed_filter").on("keydown",function(e){t.onKeyInView(e,!0)}),t.$el.find(".cs-filter-group:last .esoc_activityfeed_filter").on("keydown",function(e){t.onKeyInView(e,!1)})):t.$el.find(".cs-filter-group .esoc_activityfeed_filter").on("keydown",function(e){t.onKeyInView(e,!0)})),this.$el.find(".esoc-activityfeed-filters").perfectScrollbar({"suppressScrollX":!0}),this.options.connector.authenticator.on("loggedOut",function(){t.namedSessionStorage.storage.removeItem("esoc-activity-filterinfo")})},"fillFormFields":function(){var t=(this.options.feedtype,{"status":"","content":"","attribute":""}),i={"all":"","following":"","followers":"","myupdates":"","mentions":"","myfavorites":""},n={},o={},s=c.options.widgetId||c.options.collection.widgetOptions.activityfeed.widgetId,l=c.options.filterSource?c.options.filterSource+"_"+s:s;return c.namedSessionStorage.get(l)?(n=c.namedSessionStorage.get(l),n.feedtype=n.feedtype,n.updatesfrom&&n.updatesfrom.from&&(n.updatesfrom=n.updatesfrom.from)):(n.feedtype=this.options.feedtype,c.options.updatesfrom&&c.options.updatesfrom.from&&(n.updatesfrom=c.options.updatesfrom.from)),i[n.updatesfrom]=!!n.updatesfrom,"all"===n.feedtype?e.each(t,function(e,t){o[e]="checked"}):n.feedtype&&(t="string"==typeof n.feedtype?n.feedtype.split(","):n.feedtype,t.forEach(function(e){o[e]="checked"})),o.from=i,o},"onShow":function(e){this.changeLabel()},"updateActivityFeed":function(i){if(this.parentView){var n=e(i.target);n.prop("tabindex","0").attr("data-cstabindex","0"),this.parentView.focusedElement=n}this.parentView.activityview.adaptivepollObj&&this.parentView.activityview.adaptivepollObj.destroy(),this.changeLabel(),this.util.commonUtil.updateSelection(i,this,"updatesfrom");var o={},l=0,a=[],r="";this.$el.find("input[type=checkbox]:checked").each(function(){a[l++]=e(this).val()}),this.$el.find("input[type=radio]").each(function(){e(this).is(":checked")&&(r=e(this).val())}),o=t.extend(o,{"feedtype":a}),this.user=this.options.context?this.options.context.getModel(s):void 0,r&&(o=-1!==e.inArray(r,["following","followers"])?t.extend(o,{"updatesfrom":{"from":r,"id":c.user&&c.user.get("id")?c.user.get("id"):0}}):t.extend(o,{"updatesfrom":{"from":r}}));var d=c.options.widgetId||c.options.collection.widgetOptions.activityfeed.widgetId,u=!1;this.namedSessionStorage.get(d)||(this.storeFilterInfo(o),u=!0),!0!==u&&this.namedSessionStorage.get(d).updatesfrom.from===r&&"feedtype"!==i.currentTarget.name||(u=!1,this.storeFilterInfo(o),this.trigger("select:filter",o))},"storeFilterInfo":function(e){if(!c.options.otherUser){var t=c.options.widgetId||c.options.collection.widgetOptions.activityfeed.widgetId,i=c.options.filterSource?c.options.filterSource+"_"+t:t;this.namedSessionStorage.set(i,e)}},"changeLabel":function(){var e=this.$el.find("input[name='feedtype']:checked").length;0===e||e===this.$el.find("input[name='feedtype']").length?(this.$el.find(".esoc-activityfeed-allfilter-label").removeClass("binf-hidden"),this.$el.find(".esoc-activityfeed-filter-feedtypes").addClass("binf-hidden")):(this.$el.find(".esoc-activityfeed-filter-feedtypes").removeClass("binf-hidden"),this.$el.find(".esoc-activityfeed-allfilter-label").addClass("binf-hidden"))}})}),csui.define("hbs!esoc/widgets/activityfeedwidget/impl/activityfeedwithfilter",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'  <div class="binf-col-lg-2 binf-col-md-2 binf-col-sm-2 binf-col-xs-2 esoc-activityfeed-filter"></div>\r\n  <div\r\n      class="binf-col-lg-10 binf-col-md-10 binf-col-sm-10 binf-col-xs-10 esoc-acitivityfeed-collection\r\n      esoc-afw-newupdates esoc-acitivity-feed-filter-enabled"></div>\r\n'},"3":function(e,t,i,n,o){return'  <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-acitivityfeed-collection esoc-afw-newupdates"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"enableFilters"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":8,"column":7}}}))?s:""}});return i.registerPartial("esoc_widgets_activityfeedwidget_impl_activityfeedwithfilter",n),n}),
csui.define("esoc/widgets/activityfeedwidget/activityfeedwithfilter.view",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","esoc/widgets/activityfeedwidget/activityfeedfactory","esoc/widgets/activityfeedwidget/activityfeed.view","esoc/widgets/activityfeedwidget/activityfeedfilter.view","esoc/widgets/activityfeedwidget/util","hbs!esoc/widgets/activityfeedwidget/impl/activityfeedwithfilter","csui/utils/contexts/factories/connector","csui/controls/progressblocker/blocker","csui/utils/namedsessionstorage","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/behaviors/keyboard.navigation/tabables.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f,g){var b=o.LayoutView.extend({"className":"esoc-activityfeed-with-filter","feedCount":0,"initialActivationWeight":0,"template":c,"namedSessionStorage":new p("esoc-activity-filterinfo"),"regions":{"filterRegion":".esoc-activityfeed-filter","feedRegion":".esoc-acitivityfeed-collection"},"templateHelpers":function(){return{"messages":{"enableFilters":this.options.feedSettings.enableFilters}}},"behaviors":{"PerfectScrolling":{"behaviorClass":m,"contentParent":".esoc-acitivityfeed-collection","suppressScrollX":!0},"TabableRegionBehavior":{"behaviorClass":f}},"onLastTabElement":function(e){var i=this.$("[data-cstabindex=0]").filter(":visible"),n=i.length-1;if(i.length){var o=e?i[0]:i[n];return t(o).hasClass(f.accessibilityActiveElementClass)}return!0},"currentlyFocusedElement":function(e){var i=this.focusedElement;return e&&e.shiftKey?i&&t(i).length?i:void 0:this.$el.find("a.esoc-activityfeed-filter-types")},"events":{"keydown":"onKeyInView"},"constructor":function(i){if(i||(i={}),i.connector=i.connector?i.connector:i.context.getObject(d),this.options=i,this.listenToOnce(this,"before:hide",h.popTabableHandler),this.propagateEventsToRegions(),!this.options.collection){r.commonUtil.fillDefaultActivityOptions(i),void 0!==this.options.feedtype&&(s.prototype.propertyPrefix=r.commonUtil.getActivityWidgetId(this.options),s.prototype.uniqueid=r.commonUtil.getActivityWidgetId(this.options));var n,c=this.options.filterSource?this.options.filterSource+"_"+s.prototype.uniqueid:s.prototype.uniqueid;n=this.namedSessionStorage.get(c),n&&(n.feedtype&&(this.options.feedtype=n.feedtype),n.updatesfrom&&(this.options.updatesfrom=n.updatesfrom)),"userwidget"===this.options.origin&&delete this.options.context._factories[r.commonUtil.getActivityWidgetId(this.options)],this.options.collection=this.options.context.getCollection(s,this.options)}var p=this;this.options.parentCollectionView=this,l||(l=e("esoc/widgets/activityfeedwidget/activityfeed.view")),this.activityview=new l(this.options,{"collection":this.options.collection}),this.activityview.setParentView(this),this.activityview.listenTo(this.options.collection,"sync",function(e,i){p.triggerMethod("dom:refresh"),p.$el.find("[data-cstabindex=0]").attr("tabindex","0"),p.focusedElement&&t(p.focusedElement).trigger("focus"),p.triggerMethod("update:scrollbar")}),this.options.feedSettings.enableFilters&&(this.filterview=new a(this.options,this),this.filterview.on("select:filter",function(e){p.$el.find(".esoc-acitivityfeed-collection").scrollTop(0),p.activityview.trigger("refresh:collection",e)})),o.LayoutView.prototype.constructor.apply(this,i),this.options.blockingParentView?u.delegate(this,this.options.blockingParentView):u.imbue(this),this.listenTo(this.options.collection,"request",this.blockActions).listenTo(this.options.collection,"sync",this.unblockActions).listenTo(this.options.collection,"error",this.unblockActions)},"onRender":function(){this.feedRegion.show(this.activityview),this.options.feedSettings.enableFilters&&this.filterRegion.show(this.filterview)},"onShow":function(e){this.options.userActivity&&this.onAfterShow(e)},"onAfterShow":function(e){if(this.$el.find(".csui-facet .esoc_activityfeed_filter").prop("tabindex","-1").attr("data-cstabindex","-1"),this.$el.find(".esoc-activityfeed-filter-types").prop("tabindex","0").attr("data-cstabindex","0"),this.$el.find("#esoc_activityfeed_filter_status").prop("tabindex","0").attr("data-cstabindex","0"),this.$el.find(".esoc-activityfeed-filter-updatesfrom").prop("tabindex","0").attr("data-cstabindex","0"),this.$el.find("input[type=radio][checked]").each(function(){t(this).prop("tabindex","0").attr("data-cstabindex","0")}),r.commonUtil.navigationWithArrowKeys(this,"div.activityfeed-list"),this.options.selectedTab){var i=this,n=t(".activityfeed-expand");n.length>0&&n.find(".cs-close").on("click",function(e){i.options.selectedTab===r.commonUtil.globalConstants.FRIENDS?t("#esoc-user-profile-following-tab").trigger("click"):i.options.selectedTab===r.commonUtil.globalConstants.FOLLOWERS&&t("#esoc-user-profile-followers-tab").trigger("click")})}this.options.feedSettings.enableFilters&&this.filterview.triggerMethod("after:show");var o=this,s=o.$el.find(".esoc-acitivityfeed-collection");s.on("scroll",function(e,t){var i=s.height(),n=s[0].scrollHeight;s.scrollTop()+30>=n-i&&s.find(".esoc-social-activity-load-more:last").trigger("click")})}});return i.extend(b.prototype,g),b}),csui.define("esoc/widgets/activityfeedwidget/activityfeedwidget.view",["csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","esoc/widgets/activityfeedwidget/object/object.view","csui/controls/tile/tile.view","csui/behaviors/limiting/limiting.behavior","csui/controls/tile/behaviors/blocking.behavior","csui/controls/tile/behaviors/expanding.behavior","csui/behaviors/default.action/default.action.behavior","csui/lib/jquery","csui/utils/connector","esoc/widgets/activityfeedwidget/activityfeed.model","esoc/widgets/activityfeedwidget/activityfeed.view","esoc/widgets/activityfeedwidget/activityfeedwithfilter.view","esoc/widgets/activityfeedwidget/activityfeedfactory","i18n!esoc/widgets/activityfeedwidget/impl/nls/lang","esoc/widgets/activityfeedwidget/util","csui/models/mixins/fetchable/fetchable.mixin","csui/models/browsable/client-side.mixin","css!esoc/widgets/activityfeedwidget/activityfeed.css"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f,g,b,v){return o.extend({"constructor":function(e){e||(e={}),e.title=e.title||f.dialogTitle,e.icon=e.titleBarIcon||"title-activityfeed",g.commonUtil.fillDefaultActivityOptions(e),o.prototype.constructor.apply(this,arguments)},"initialize":function(t){t=t.data?e.extend(t,t.data):t,delete t.data,this.options=t,void 0!==this.options.feedtype&&(h.prototype.propertyPrefix=g.commonUtil.getActivityWidgetId(this.options),h.prototype.uniqueid=g.commonUtil.getActivityWidgetId(this.options)),void 0!==this.options.wrapperClass&&this.$el.addClass(this.options.wrapperClass),this.collection=t.context.getCollection(h,t),this.options.blockingParentView=this,this.contentViewOptions=e.extend(this.options,{"collection":this.collection}),v.mixin(h),b.mixin(h),this.loadingText=t.loadingText||f.loadingText,this.listenTo(this.collection,"request",this.blockActions).listenTo(this.collection,"sync",this.unblockActions).listenTo(this.collection,"error",this.unblockActions)},"childEvents":{"click:item":"onClickItem"},"events":{"keydown .icon-tileExpand":"onKeydownHeader"},"contentView":n,"behaviors":{"Blocking":{"behaviorClass":l},"Expanding":{"titleBarIcon":function(){return this.options.icon||"title-activityfeed"},"behaviorClass":a,"expandedView":m,"dialogTitle":function(){return this.options.title||f.dialogTitle},"dialogTitleIconNameRight":"csui_action_minimize32","dialogClassName":"activityfeed-expand esoc","expandedViewOptions":function(){return e.extend(this.options,{"collection":this.collection})}},"DefaultAction":{"behaviorClass":r}},"onClickItem":function(e){this.triggerMethod("execute:defaultAction",e.model)},"onClickHeader":function(e){this.triggerMethod("expand")},"onKeydownHeader":function(e){var t=e.keyCode||e.which;32!==t&&13!==t||this.triggerMethod("expand")},"onShow":function(){var t=e.uniqueId("activityfeedTitle");this.$el.find(".tile-title .csui-heading").attr("id",t),this.$el.find(".tile-header").parent().attr("role","region").attr("aria-labelledby",t),this.$el.find(".tile-content").attr("aria-labelledby",t)},"onDomRefresh":function(){var e=this.$el.find(".icon-tileExpand");e.attr("title",f.expandTitle),e&&c(e).length&&c(e[0]).attr("tabindex",0)}})}),csui.define("hbs!esoc/widgets/activityfeedwidget/impl/activityfeedcontent",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'  <div class="binf-col-lg-2 binf-col-md-2 binf-col-sm-2 binf-col-xs-2 esoc-activityfeed-filter "></div>\r\n  <div\r\n      class="binf-col-lg-10 binf-col-md-10 binf-col-sm-10 binf-col-xs-10  eosc-acitivity-feed-content esoc-acitivity-feed-filter-enabled"></div>\r\n'},"3":function(e,t,i,n,o){return'  <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 eosc-acitivity-feed-content"></div>\r\n'},"5":function(e,t,i,n,o){return'  <div class="tile-footer"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"enableFiltersForStandardView"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":7,"column":7}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"hideExpandIcon"):s,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(5,o,0),"loc":{"start":{"line":8,"column":0},"end":{"line":10,"column":7}}}))?s:"")}});return i.registerPartial("esoc_widgets_activityfeedwidget_impl_activityfeedcontent",n),n}),csui.define("esoc/widgets/activityfeedwidget/activityfeedcontent",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/handlebars","csui/controls/tile/behaviors/expanding.behavior","esoc/widgets/activityfeedwidget/activityfeedfactory","esoc/widgets/activityfeedwidget/activityfeed.view","esoc/widgets/activityfeedwidget/activityfeedwithfilter.view","csui/utils/contexts/page/page.context","esoc/widgets/activityfeedwidget/object/object.view","esoc/widgets/activityfeedwidget/activityfeedfilter.view","esoc/widgets/activityfeedwidget/util","hbs!esoc/widgets/activityfeedwidget/impl/activityfeedcontent","i18n!esoc/widgets/activityfeedwidget/impl/nls/lang","csui/controls/progressblocker/blocker","csui/utils/namedsessionstorage","css!esoc/widgets/activityfeedwidget/activityfeed.css","csui/controls/list/list.view","csui/controls/tile/tile.view"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f,g,b){function v(i){m.commonUtil.fillDefaultActivityOptions(i),void 0!==i.feedtype&&(a.prototype.propertyPrefix=m.commonUtil.getActivityWidgetId(i),a.prototype.uniqueid=m.commonUtil.getActivityWidgetId(i));var n=o.LayoutView.extend({"className":"esoc-activityfeed-contentwidget cs-list","template":h,"regions":{"listRegion":".eosc-acitivity-feed-content","filterRegion":".esoc-activityfeed-filter"},"namedSessionStorage":new b("esoc-activity-filterinfo"),"templateHelpers":function(){return{"messages":{"hideExpandIcon":this.options.hideExpandIcon,"enableFiltersForStandardView":this.options.enableFiltersForStandardView}}},"constructor":function(i){i||(i={}),this.options=i,o.LayoutView.prototype.constructor.apply(this,arguments);var n=this;void 0!==this.options.wrapperClass&&this.$el.addClass(this.options.wrapperClass);var s,l=i.filterSource?i.filterSource+"_"+a.prototype.uniqueid:a.prototype.uniqueid;s=this.namedSessionStorage.get(l),s&&(s.feedtype&&(i.feedtype=s.feedtype),s.updatesfrom&&(i.updatesfrom=s.updatesfrom)),"userwidget"===i.origin&&delete i.context._factories[a.prototype.uniqueid],this.collection=i.context.getCollection(a,i);var r=t.extend(i,{"collection":this.collection}),c=c||e("esoc/widgets/activityfeedwidget/object/object.view");this.listView=new c(r),this.options.enableFiltersForStandardView&&(this.activityFeedFilterView=new p(r),this.activityFeedFilterView.on("select:filter",function(e){n.listView.trigger("refresh:collection",e)})),this.options.blockingParentView?g.delegate(this,this.options.blockingParentView):g.imbue(this),this.listenTo(this,"dom:refresh",function(){m.commonUtil.navigationWithArrowKeys(this,".object-group")}),this.listenTo(this.collection,"request",this.blockActions).listenTo(this.collection,"sync",this.unblockActions).listenTo(this.collection,"error",this.unblockActions)},"events":{"keydown .icon-tileExpand":"onTileExpandKeydown"},"behaviors":{"Expanding":{"behaviorClass":l,"expandedView":function(){return this.options.feedSettings&&this.options.feedSettings.enableFilters?c:r},"titleBarIcon":i.titleBarIcon||"title-activityfeed","dialogTitle":i.title||f.dialogTitle,"dialogTitleIconRight":"icon-tileCollapse","dialogClassName":"activityfeed-expand esoc","expandedViewOptions":t.extend(i,{"collection":this.collection})}},"onTileExpandKeydown":function(e){var t=e.keyCode||e.which;32!==t&&13!==t||this.triggerMethod("expand")},"onShow":function(){this.options.enableFiltersForStandardView&&(this.filterRegion.show(this.activityFeedFilterView),this.activityFeedFilterView.triggerMethod("after:show")),this.listRegion.show(this.listView),this.options.headerView&&this.listRegion.$el&&this.listRegion.$el.addClass("esoc-activityfeed-header-container"),this.$el.find(".icon-tileExpand").attr("tabindex","0").attr("data-cstabindex","0")}}),s=new n(i);this.contentView=s}return v}),csui.define("esoc/widgets/tablecell/server.adaptor.mixin",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","esoc/widgets/common/util"],function(e,t,i,n){"use strict";return{"mixin":function(o){return e.extend(o,{"makeServerAdaptor":function(e){return this},"url":function(){var e=this.attributes.csId,t=this.attributes.currentNodeModel,o=this.connector,s=t.get("parent_id"),l=s&&s instanceof Object?s.id:s,a=n.updateQueryStringValues(i.combine(n.getV2Url(o.getConnectionUrl()),"nodes",l,"nodes"),"where_name",t.get("name")),r={"url":a,"type":"GET","currentNodeModel":t,"connector":o,"requestType":"getCommentCount"};return n.updateAjaxCall(r),i.combine(t.connector.connection.url,n.REST_URLS.csGetROI)+"CSID="+e},"sync":function(e,i,n){return n.cache=!1,t.Model.prototype.sync.apply(this,arguments)}})}}}),csui.define("esoc/widgets/tablecell/tablecell.model",["csui/lib/backbone","csui/models/mixins/expandable/expandable.mixin","csui/models/mixins/resource/resource.mixin","csui/models/mixins/uploadable/uploadable.mixin","csui/models/mixins/including.additional.resources/including.additional.resources.mixin","esoc/widgets/tablecell/server.adaptor.mixin"],function(e,t,i,n,o,s){"use strict";var l=e.Model.extend({"constructor":function(t,i){e.Model.prototype.constructor.call(this,t,i),this.makeResource(i).makeIncludingAdditionalResources(i).makeUploadable(i).makeExpandable(i).makeServerAdaptor(i)},"clone":function(){return new this.constructor(this.attributes,{"connector":this.connector})}});return o.mixin(l.prototype),t.mixin(l.prototype),n.mixin(l.prototype),i.mixin(l.prototype),s.mixin(l.prototype),l}),csui.define("esoc/widgets/tablecell/tablecell.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/handlebars","csui/lib/marionette","csui/utils/contexts/factories/connector","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","csui/controls/table/table.columns","csui/utils/url","csui/utils/log","hbs!esoc/widgets/tablecell/impl/tablecell","esoc/widgets/socialactions/commentscollectionwidget","esoc/widgets/tablecell/tablecell.model","esoc/widgets/common/util","i18n!esoc/widgets/tablecell/nls/lang","esoc/controls/icons/esoc.icons.v2","css!esoc/widgets/tablecell/impl/social.css","css!esoc/widgets/socialactions/socialactions.css"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h){i.registerHelper("value-if",function(t,i,n){return e.isObject(n)&&e.isObject(n.hash)&&(n=""),t?i:n});var f=s.extend({"className":"csui-nowrap","template":d,"title":"","events":{"keydown":"onKeyInView","click .esoc-socialactions-comment .esoc-socialactions-comment-button":"onClickComment"},"log":c,"commonUtil":m,"constructor":function(e){e||(e={}),s.prototype.constructor.apply(this,arguments),this._iconTheme=this.options.useIconsForDarkBackground?"dark":"",this._iconName="esoc_no_comment32",this._iconNameForOn="esoc_comment32",this.listenTo(this.model,"change comment:icon:view",function(){this.render()})},"getValueData":function(){var e=this.model&&this.model.collection&&this.model.collection.delayedActions,t=this,i=this.model.get("wnd_comments")||0;return this.updateSocailActions(this.model),e&&this.stopListening(e,"sync").listenTo(e,"sync",function(){var e=t.model.get("commentsEnabled");t.updateSocailActions(t.model),e!==t.model.get("commentsEnabled")&&t.render()}),this.model.set("messages",h,{"silent":!0}),this.model.get("wnd_comments")>0?this.model.set("iconName",this._iconNameForOn,{"silent":!0}):this.model.set("iconName",this._iconName,{"silent":!0}),this.model.set("iconTheme",this._iconTheme,{"silent":!0}),this.model.set("wnd_comments_title",i>0?i>1?i+" "+h.commentCount:i+" "+h.oneComment:"",{"silent":!0}),this.model.set("wnd_comments_validated",i>0?i>99?"99+":i:"",{"silent":!0}),this.model.set("wnd_no_comments",h.noComments,{"silent":!0}),this.model.set("className",this.classNames,{"silent":!0}),this.model.toJSON()},"updateSocailActions":function(e){var t=!!e.actions.get("comment");e.attributes.showSocialActions=t,e.attributes.socialactions={"attachementsEnabled":t,"chatEnabled":t,"commentingOpen":t,"commentsEnabled":t,"CSID":e.attributes.id,"likesEnabled":t,"taggingEnabled":t,"threadingEnabled":t,"shortcutEnabled":t}},"onClickComment":function(e){e.preventDefault(),e.stopPropagation(),this.options.connector=this.options.connector||this.options.context.getObject(o);var i={"tablecellwidget":!0,"currentNodeModel":this.model,"currentTarget":t(e.currentTarget).closest("td"),"baseElement":this.$el.find(".esoc-socialactions-comment"),"socialActionsInstanse":this},n=this.$el.find(".esoc-socialactions-comment")[0],s=n.getAttribute("data-value")||n.dataset.value;i.csId=s,this.options.tableView&&this.options.tableView.childWithBlockingView&&(i.blockingParentView=this.options.tableView.childWithBlockingView,this.options.tableView.childWithBlockingView._blockingCounter<1&&this.options.tableView.childWithBlockingView.blockActions()),new p({"csId":s,"currentNodeModel":this.model},{"connector":this.options.connector}).fetch().then(function(e){this.model.attributes.socialactions=e.available_settings,i.socialActionsInstanse.options.connector.connection.url=this.options.connector.connection.url,new u(i).show()}.bind(this),function(e,t,i){this.options.tableView&&this.options.tableView.childWithBlockingView&&this.options.tableView.childWithBlockingView.unblockActions(),this.log.error("TEMP.  ERROR Getting available settings")}.bind(this))},"onKeyInView":function(e){if(32===e.keyCode||13===e.keyCode){!!this.model.actions.get("comment")&&(e.preventDefault(),this.onClickComment(e))}}},{"hasFixedWidth":!0,"columnClassName":"csui-table-cell-esoc-social"});l.registerByColumnKey("wnd_comments",f),a.add({"key":"wnd_comments","sequence":905,"permanentColumn":!0})}),csui.define("esoc/widgets/tablecell/thumbnail.content.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/handlebars","csui/lib/marionette","csui/utils/contexts/factories/connector","csui/controls/thumbnail/content/content.registry","csui/controls/thumbnail/thumbnail.content","csui/utils/url","csui/utils/log","hbs!esoc/widgets/tablecell/impl/tablecell","esoc/widgets/socialactions/commentscollectionwidget","esoc/widgets/tablecell/tablecell.model","esoc/widgets/common/util","i18n!esoc/widgets/tablecell/nls/lang","css!esoc/widgets/tablecell/impl/social.css","css!esoc/widgets/socialactions/socialactions.css"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m){i.registerHelper("value-if",function(t,i,n){return e.isObject(n)&&e.isObject(n.hash)&&(n=""),t?i:n});var h=n.ItemView.extend({"className":"csui-nowrap csui-thumbnail-test","template":c,"title":"","events":{"keydown":"onKeyInView","click .esoc-socialactions-comment .esoc-socialactions-comment-button":"onClickComment"},"log":r,"commonUtil":p,"constructor":function(e){e||(e={}),n.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(this.model,"change comment:icon:view",this.render),this._iconTheme=e.useIconsForDarkBackground?"dark":""},"templateHelpers":function(){var e=this.model.collection&&this.model.collection.delayedActions,t=this,i=this.model.get("wnd_comments")||0;return this.updateSocailActions(this.model),e&&this.listenTo(e,"sync",function(){t.updateSocailActions(t.model),t.render()}),this.model.set("messages",m,{"silent":!0}),this.model.set("iconName",i>0?"esoc_comment32":"esoc_no_comment32",{"silent":!0}),this.model.set("iconTheme",this._iconTheme,{"silent":!0}),this.model.set("wnd_comments_title",i>0?i>1?i+" "+m.commentCount:i+" "+m.oneComment:"",{"silent":!0}),this.model.set("wnd_comments_validated",i>0?i>99?"99+":i:"",{"silent":!0}),this.model.set("wnd_no_comments",m.noComments,{"silent":!0}),this.model.toJSON()},"updateSocailActions":function(e){var t=!!e.actions.get("comment");e.attributes.showSocialActions=t,e.attributes.socialactions={"attachementsEnabled":t,"chatEnabled":t,"commentingOpen":t,"commentsEnabled":t,"CSID":e.attributes.id,"likesEnabled":t,"taggingEnabled":t,"threadingEnabled":t,"shortcutEnabled":t}},"onClickComment":function(e){e.preventDefault(),e.stopPropagation(),this.options.connector||(this.options.connector=this.options.context.getObject(o));var i={"tablecellwidget":!0,"currentNodeModel":this.model,"currentTarget":t(e.currentTarget).closest(".csui-thumbnail-content.csui-thumbnail-wnd_comments"),"baseElement":this.$el.find(".esoc-socialactions-comment"),"socialActionsInstanse":this},n=this.$el.find(".esoc-socialactions-comment")[0],s=n.getAttribute("data-value")||n.dataset.value;i.csId=s,this.options.originatingView&&(i.blockingParentView=this.options.originatingView,this.options.originatingView._blockingCounter<1&&this.options.originatingView.blockActions()),new u({"csId":s,"currentNodeModel":this.model},{"connector":this.options.connector}).fetch().then(function(e){this.model.attributes.socialactions=e.available_settings,i.socialActionsInstanse.options.connector.connection.url=this.options.connector.connection.url,new d(i).show()}.bind(this),function(e,t,i){this.options.originatingView&&this.options.originatingView.unblockActions(),this.log.error("TEMP.  ERROR Getting available settings")}.bind(this))},"onKeyInView":function(e){if(32===e.keyCode||13===e.keyCode){!!this.model.actions.get("comment")&&this.onClickComment(e)}}},{"hasFixedWidth":!0,"columnClassName":"csui-table-cell-esoc-social"});s.registerByKey("wnd_comments",h),l.add({"key":"wnd_comments","sequence":905,"permanentColumn":!0})}),csui.define("esoc/widgets/userwidget/model/extended.model",["csui/lib/backbone","csui/lib/jquery","csui/lib/underscore","csui/utils/url","esoc/widgets/userwidget/util","i18n!esoc/widgets/userwidget/nls/lang"],function(e,t,i,n,o,s){return e.Model.extend({"connector":"","restUrl":"","userWidgetView":"","constructor":function(t){this.options=t,this.userWidgetView=t.userWidgetView,this.restUrl=o.commonUtil.updateQueryStringValues(n.combine(o.commonUtil.getV2Url(t.connector.getConnectionUrl()),o.commonUtil.REST_URLS.pulseRestUrl,this.userWidgetView.model.attributes.userid),o.commonUtil.globalConstants.FIELDS,o.commonUtil.globalConstants.EXTENDEDINFO);var i=o.commonUtil.globalConstants.FIELDS+"="+o.commonUtil.globalConstants.CHAT_SEETING;i=i+"&"+o.commonUtil.globalConstants.FIELDS+"="+o.commonUtil.globalConstants.FIELD_MAX_CHAR_LIMIT,this.restUrl=n.appendQuery(this.restUrl,i),e.Model.prototype.constructor.apply(this,arguments),t&&t.connector&&t.connector.assignTo(this)},"url":function(){return this.restUrl},"fetch":function(){this.connector.authenticator.syncStorage(),e.Model.prototype.fetch.apply(this,arguments)},"fetchSuccess":function(e,i){t(".esoc-user-profile-tabcontainer li.esoc-user-pulse-enabled-tabs").show(),t(".esoc-userprofile-action-names a.esoc-userprofile-following-action").show().html(i.results.following?s.unfollow:s.follow),t(".esoc-userprofile-action-names a.esoc-userprofile-following-action").attr("title",i.results.following?s.unfollow:s.follow),o.changeRelationsCounts(i.results),e.attributes.otherUser&&e.attributes.chatSettings&&e.attributes.chatSettings.chatEnabled&&t(".esoc-userprofile-action-names .esoc-user-profile-chat-action").show()},"fetchError":function(e,n){t(".esoc-user-profile-tabcontainer li.esoc-user-pulse-enabled-tabs").remove(),e.attributes.isError=!0,e.attributes=i.extend(e.attributes,e.userWidgetView.model.attributes)},"parse":function(e,t){o.commonUtil.globalConstants.MAX_CHAR_LIMIT=e.results.maxCharLimit;var n=this.userWidgetView.model.attributes,s=["followers_count","friends_count","following","chatSettings"];return i.each(s,function(t,i){n[t]=e.results[t]}),e=i.extend(e.results,this.userWidgetView.model.attributes)}})}),csui.define("esoc/widgets/userwidget/view/extendedinfo.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","esoc/widgets/userwidget/util","i18n!esoc/widgets/userwidget/nls/lang","esoc/lib/jquery.emojiarea/jquery.emojiarea.custom","css!esoc/lib/jquery.emojiarea/jquery.emojiarea.css","css!esoc/lib/jquery.emojiarea/jquery.emojiarea.custom.css"],function(e,t,i,n,o,s,l){var a=null;return n.ItemView.extend({"tagName":"div","className":"binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12","util":o,"emojiarea":new l,"templateHelpers":function(){return{"messages":{"edit":s.edit,"update":s.update,"cancel":s.cancel,"facebookLink":s.facebookLink,"linkedinLink":s.linkedinLink,"twitterLink":s.twitterLink,"manager":s.manager,"defaultManagerMessage":s.defaultManagerMessage,"languagesSpoken":s.languagesSpoken,"aboutMe":s.aboutMe,"jobDescription":s.jobDescription,"expertiseAreas":s.expertiseAreas,"pastPositions":s.pastPositions,"degrees":s.degrees,"awards":s.awards,"defaultLanguagesMessage":s.defaultLanguagesMessage,"defaultAboutMeMessage":s.defaultAboutMeMessage,"defaultfacebookMessage":s.defaultfacebookMessage,"defaultLinkedInMessage":s.defaultLinkedInMessage,"defaulttwitterLinkMessage":s.defaulttwitterLinkMessage,"defaultJobDesc":s.defaultJobDesc,"defaultExpertise":s.defaultExpertise,"defaultPastPositions":s.defaultPastPositions,"defaultDegreeMessage":s.defaultDegreeMessage,"defaultAwardMessage":s.defaultAwardMessage,"more":s.more,"less":s.less,"emoticon":s.emoticon}}},"initialize":function(e){this.extendedInfo=e,a=this},"constructor":function(e){e=e||{},n.ItemView.prototype.constructor.call(this,e)},"onEditClick":function(t){if(this.model.attributes.isEditable){if(this.$el.find(".esoc-user-see-more").hide(),this.$el.find(".esoc-user-see-less").hide(),this.$el.find(".esoc-user-extended-view-mode").hide(),this.$el.find(".esoc-user-extended-edit-mode").show(),this.options.parentView.triggerMethod("update:scrollbar"),this.model.attributes.userInputField){if(this.model.attributes.content){var i={"id":this.model.attributes.content,"name":this.$el.find(".esoc-user-display-name").text().trim()};"status"===this.model.attributes.formField&&(this.$el.find(".esoc-user-extended-edit-input").trigger("focus"),this.applyEmoji(t),this.$el.find(".emoji-wysiwyg-editor").trigger("focus")),this.pickerView.model.set(i),this.pickerView.render()}this.$el.find(".esoc-user-manager-picker-holder input").trigger("focus")}else this.$el.find(".esoc-user-extended-edit-input").trigger("focus"),"status"===this.model.attributes.formField&&(this.applyEmoji(t),this.$el.find(".emoji-wysiwyg-editor").trigger("focus"));var n=this;e("#esoc-social-status-header").on("paste",function(t){var i=n.util.commonUtil.globalConstants.MAX_CHAR_LIMIT,o=e("#esoc-social-status-input").val().length;n.util.commonUtil.onCommentFormPaste(t,o,i),e("#esoc-social-status-input").innerHTML=e("#esoc-social-status-header").html(),n.onStatusChange(t)}),this.util.commonUtil.preventDrop(e("#esoc-social-status-header")),setTimeout(function(){e("#esoc-social-status-header").trigger("focus")},1e3),this.$el.find(".esoc-user-label").removeClass("esoc-cursor-pointer"),this.$el.find(".esoc-user-extended-edit").removeClass("esoc-edit-icon")}},"showEditLinkForText":function(e){this.$el.find(".esoc-user-extended-edit-input").is(":visible")||(this.$el.find(".esoc-user-extended-edit").addClass("esoc-edit-icon"),this.$el.find(".esoc-user-extended-edit").attr("href","javascript:void(0);").attr("tabindex","0"))},"hideEditLinkForText":function(e){this.$el.find(".esoc-user-extended-edit").removeClass("esoc-edit-icon"),this.$el.find(".esoc-user-extended-edit").removeAttr("href"),this.$el.find(".esoc-user-extended-edit").attr("tabindex","-1")},"submitOnEnter":function(e){13===(e.keyCode?e.keyCode:e.which)&&this.updateExtendedInfoField(e)},"applyEmoji":function(t){this.$el.find(".emoji-wysiwyg-editor").remove(),this.$el.find("#esoc-social-status-input").emojiarea({"path":this.util.commonUtil.getEmojiPath(this.model.attributes.connector),"wysiwyg":!0,"button":".esoc-social-status-header-emotion","id":"esoc-social-status-header","parent":this.$el.find(".esoc-status-textinput-button-holder"),"util":this.util,"isStatus":!0,"container":e(".esoc-general-tab"),"widget":e(".esoc-user-widget-dialog .binf-modal-content")}),this.$el.find(".emoji-wysiwyg-editor").addClass("esoc-status-header-emoji").attr({"id":"esoc-social-status-header","style":"min-height: 100%","data-text":this.templateHelpers().messages.defaultMessage})}})}),csui.define("esoc/controls/userwidget/userwidget.model.mixin",["csui/lib/jquery","csui/lib/underscore"],function(e,t){"use strict";return{"parseModelResponse":function(e,t){e.attributes.display_name=e.get("name_formatted"),e.attributes.department_name=e.get("group_id")?e.get("group_id").name:""}}}),csui.define("hbs!esoc/widgets/userwidget/impl/miniprofile",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="esoc-mini-profile-user binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      <div class="esoc-simple-mini-profile-user">\r\n        <div\r\n            class="esoc-mini-profile-userinfo binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n          <div class="esoc-mini-profile-user-displayname">\r\n            <a href="javascript:void(0);" class="esoc-mini-profile-user-name binf-line-clamp"\r\n               title="'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":9,"column":22},"end":{"line":9,"column":38}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":9,"column":40},"end":{"line":9,"column":56}}}):l))+"</a>\r\n          </div>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"title"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":11,"column":10},"end":{"line":13,"column":17}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"office_location"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":14,"column":10},"end":{"line":18,"column":17}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"business_email"):t,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{
"line":19,"column":10},"end":{"line":24,"column":17}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"business_phone"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":25,"column":10},"end":{"line":31,"column":17}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"cell_phone"):t,{"name":"if","hash":{},"fn":e.program(10,o,0),"inverse":e.noop,"loc":{"start":{"line":32,"column":10},"end":{"line":37,"column":17}}}))?s:"")+'        </div>\r\n      </div>\r\n      <div class="esoc-simple-mini-profile-user-img">\r\n\r\n        <div class="esoc-mini-profile-img">\r\n        <span class="esoc-mini-profile-avatar">\r\n           <a href="javascript:void(0);" class="esoc-mini-profile-pic">\r\n             <span class="image_user_placeholder esoc-miniprofile-default-avatar\r\n                esoc-user-default-avatar-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":46,"column":41},"end":{"line":46,"column":47}}}):l))+'" title="'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":46,"column":56},"end":{"line":46,"column":72}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"initials")||(null!=t?a(t,"initials"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"initials","hash":{},"loc":{"start":{"line":46,"column":74},"end":{"line":46,"column":86}}}):l))+'</span>\r\n             <img id="esoc-mini-profile-pic-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":47,"column":44},"end":{"line":47,"column":50}}}):l))+'" class="esoc-userprofile-img-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":47,"column":80},"end":{"line":47,"column":86}}}):l))+'\r\n                binf-img-circle" title="'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":48,"column":40},"end":{"line":48,"column":56}}}):l))+'" alt="'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":48,"column":63},"end":{"line":48,"column":79}}}):l))+'" src="#">\r\n           </a>\r\n        </span>\r\n        </div>\r\n        <div id="esoc-mini-profile-chat-comment" class="esoc-miniprofile-chat-action-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":52,"column":85},"end":{"line":52,"column":91}}}):l))+'\r\n        esoc-mini-profile-chat-comment"></div>\r\n        <div id="esoc-mini-profile-presence-indicator" class="esoc-mini-profile-presence-indicator binf-col-lg-12 binf-col-md-12 binf-col-sm-12\r\n      binf-col-xs-12"></div>\r\n      </div>\r\n\r\n    </div>\r\n'},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="esoc-mini-profile-user-title" title="'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":12,"column":61},"end":{"line":12,"column":70}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":12,"column":72},"end":{"line":12,"column":81}}}):s))+"</div>\r\n"},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="esoc-mini-profile-user-location"\r\n                 title="'+e.escapeExpression((s=null!=(s=l(i,"office_location")||(null!=t?l(t,"office_location"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"office_location","hash":{},"loc":{"start":{"line":16,"column":24},"end":{"line":16,"column":43}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"office_location")||(null!=t?l(t,"office_location"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"office_location","hash":{},"loc":{"start":{"line":16,"column":45},"end":{"line":16,"column":64}}}):s))+"\r\n            </div>\r\n"},"6":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="esoc-mini-profile-user-displayemail">\r\n              <a class="esoc-mini-profile-user-email" href="mailto:'+e.escapeExpression((s=null!=(s=l(i,"business_email")||(null!=t?l(t,"business_email"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"business_email","hash":{},"loc":{"start":{"line":21,"column":67},"end":{"line":21,"column":85}}}):s))+'"\r\n                 title="'+e.escapeExpression((s=null!=(s=l(i,"business_email")||(null!=t?l(t,"business_email"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"business_email","hash":{},"loc":{"start":{"line":22,"column":24},"end":{"line":22,"column":42}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"business_email")||(null!=t?l(t,"business_email"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"business_email","hash":{},"loc":{"start":{"line":22,"column":44},"end":{"line":22,"column":62}}}):s))+"</a>\r\n            </div>\r\n"},"8":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="esoc-mini-profile-user-phone-data">\r\n              <div class="esoc-mini-profile-user-phone-label">'+e.escapeExpression((s=null!=(s=l(i,"business_phone_label")||(null!=t?l(t,"business_phone_label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"business_phone_label","hash":{},"loc":{"start":{"line":27,"column":62},"end":{"line":27,"column":86}}}):s))+'</div>\r\n              <div class="esoc-mini-profile-user-phone"\r\n                   title="'+e.escapeExpression((s=null!=(s=l(i,"business_phone")||(null!=t?l(t,"business_phone"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"business_phone","hash":{},"loc":{"start":{"line":29,"column":26},"end":{"line":29,"column":44}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"business_phone")||(null!=t?l(t,"business_phone"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"business_phone","hash":{},"loc":{"start":{"line":29,"column":46},"end":{"line":29,"column":64}}}):s))+"</div>\r\n            </div>\r\n"},"10":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="esoc-mini-profile-user-mobile-data">\r\n              <div class="esoc-mini-profile-user-mobile-label">'+e.escapeExpression((s=null!=(s=l(i,"cell_phone_label")||(null!=t?l(t,"cell_phone_label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cell_phone_label","hash":{},"loc":{"start":{"line":34,"column":63},"end":{"line":34,"column":83}}}):s))+'</div>\r\n              <div class="esoc-mini-profile-user-mobile" title="'+e.escapeExpression((s=null!=(s=l(i,"cell_phone")||(null!=t?l(t,"cell_phone"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cell_phone","hash":{},"loc":{"start":{"line":35,"column":64},"end":{"line":35,"column":78}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"cell_phone")||(null!=t?l(t,"cell_phone"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cell_phone","hash":{},"loc":{"start":{"line":35,"column":80},"end":{"line":35,"column":94}}}):s))+"</div>\r\n            </div>\r\n"},"12":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-mini-profile-user binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n          <div class="esoc-mini-profile-img">\r\n        <span class="esoc-mini-profile-avatar">\r\n           <a href="javascript:void(0);" class="esoc-mini-profile-pic">\r\n             <span class="image_user_placeholder esoc-miniprofile-default-avatar\r\n                esoc-user-default-avatar-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":65,"column":41},"end":{"line":65,"column":47}}}):l))+'" title="'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":65,"column":56},"end":{"line":65,"column":72}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"initials")||(null!=t?a(t,"initials"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"initials","hash":{},"loc":{"start":{"line":65,"column":74},"end":{"line":65,"column":86}}}):l))+'</span>\r\n             <img id="esoc-mini-profile-pic-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":66,"column":44},"end":{"line":66,"column":50}}}):l))+'" class="esoc-userprofile-img-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":66,"column":80},"end":{"line":66,"column":86}}}):l))+'\r\n                binf-img-circle" title="'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":67,"column":40},"end":{"line":67,"column":56}}}):l))+'" alt="'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":67,"column":63},"end":{"line":67,"column":79}}}):l))+'">\r\n           </a>\r\n        </span>\r\n          </div>\r\n          <div id="esoc-mini-profile-presence-indicator"\r\n               class="esoc-mini-profile-presence-indicator binf-col-lg-12 binf-col-md-12 binf-col-sm-12\r\n      binf-col-xs-12"></div>\r\n          <div class="esoc-mini-profile-userinfo binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n              <div class="esoc-mini-profile-user-displayname">\r\n                  <a href="javascript:void(0);" class="esoc-mini-profile-user-name binf-line-clamp"\r\n                     title="'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":77,"column":28},"end":{"line":77,"column":44}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":77,"column":46},"end":{"line":77,"column":62}}}):l))+"</a>\r\n              </div>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"business_email"):t,{"name":"if","hash":{},"fn":e.program(13,o,0),"inverse":e.noop,"loc":{"start":{"line":79,"column":14},"end":{"line":84,"column":21}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"title"):t,{"name":"if","hash":{},"fn":e.program(15,o,0),"inverse":e.noop,"loc":{"start":{"line":85,"column":14},"end":{"line":87,"column":21}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"office_location"):t,{"name":"if","hash":{},"fn":e.program(17,o,0),"inverse":e.noop,"loc":{"start":{"line":88,"column":14},"end":{"line":91,"column":21}}}))?s:"")+'          </div>\r\n\r\n          <div class="esoc-mini-profile-actions binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"deleted"):t,{"name":"if","hash":{},"fn":e.program(19,o,0),"inverse":e.program(21,o,0),"loc":{"start":{"line":95,"column":14},"end":{"line":156,"column":21}}}))?s:"")+'          </div>\r\n          <div class="esoc-mini-profile-loading-img binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n              <span class="esoc-mini-profile-progress-icon" />\r\n          </div>\r\n          <div class="esoc-mini-profile-following-error binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n      </div>\r\n      <div id="'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":163,"column":15},"end":{"line":163,"column":21}}}):l))+'" class="esoc-social-users-load-more"></div>\r\n'},"13":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                  <div class="esoc-mini-profile-user-displayemail">\r\n                      <a class="esoc-mini-profile-user-email" href="mailto:'+e.escapeExpression((s=null!=(s=l(i,"business_email")||(null!=t?l(t,"business_email"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"business_email","hash":{},"loc":{"start":{"line":81,"column":75},"end":{"line":81,"column":93}}}):s))+'"\r\n                         title="'+e.escapeExpression((s=null!=(s=l(i,"business_email")||(null!=t?l(t,"business_email"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"business_email","hash":{},"loc":{"start":{"line":82,"column":32},"end":{"line":82,"column":50}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"business_email")||(null!=t?l(t,"business_email"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"business_email","hash":{},"loc":{"start":{"line":82,"column":52},"end":{"line":82,"column":70}}}):s))+"</a>\r\n                  </div>\r\n"},"15":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                  <div class="esoc-mini-profile-user-title" title="'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":86,"column":67},"end":{"line":86,"column":76}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":86,"column":78},"end":{"line":86,"column":87}}}):s))+"</div>\r\n"},"17":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                  <div class="esoc-mini-profile-user-location"\r\n                       title="'+e.escapeExpression((s=null!=(s=l(i,"office_location")||(null!=t?l(t,"office_location"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"office_location","hash":{},"loc":{"start":{"line":90,"column":30},"end":{"line":90,"column":49}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"office_location")||(null!=t?l(t,"office_location"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"office_location","hash":{},"loc":{"start":{"line":90,"column":51},"end":{"line":90,"column":70}}}):s))+"</div>\r\n"},"19":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                  <a href="javascript:void(0);" class="esoc-viewminiprofile-action" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"viewprofile"):s,t))+'">\r\n                      <div class="esoc-mini-profile-selfuser-actions">\r\n                          <div class="esoc-mini-profile-view-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"viewprofile"):s,t))+'"></div>\r\n                      </div>\r\n                  </a>\r\n'},"21":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"otherUser"):t,{"name":"if","hash":{},"fn":e.program(22,o,0),"inverse":e.program(29,o,0),"loc":{"start":{"line":96,"column":18},"end":{"line":149,"column":25}}}))?s:""},"22":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                      <div class="esoc-chat-action-enabled esoc-chat-action-enabled-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":97,"column":84},"end":{"line":97,"column":90}}}):l))+' binf-hidden">\r\n'+(null!=(s=a(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?a(t,"hideFollow"):t,{"name":"unless","hash":{},"fn":e.program(23,o,0),"inverse":e.noop,"loc":{"start":{"line":98,"column":26},"end":{"line":105,"column":37}}}))?s:"")+'                          <div class="esoc-mini-profile-otheruser-actions-spacing "></div>\r\n                          <a href="javascript:void(0);" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"chat"):s,t))+'">\r\n                              <div class="esoc-miniprofile-chat-action-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":108,"column":71},"end":{"line":108,"column":77}}}):l))+'\r\n                     esoc-miniprofile-otheruser-actions-withchat esoc-miniprofile-chat-action"></div>\r\n                          </a>\r\n\r\n                          <div class="esoc-mini-profile-otheruser-actions-spacing "></div>\r\n                          <a href="javascript:void(0);" class="esoc-viewminiprofile-action" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"actions"):t)?a(s,"viewprofile"):s,t))+'">\r\n                              <div class="esoc-miniprofile-otheruser-actions-withchat">\r\n                                  <div class="esoc-mini-profile-view-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"actions"):t)?a(s,"viewprofile"):s,t))+'"></div>\r\n                              </div>\r\n                          </a>\r\n                      </div>\r\n\r\n                      <div class="esoc-chat-action-disabled esoc-chat-action-disabled-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":120,"column":86},"end":{"line":120,"column":92}}}):l))+' binf-hidden">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"hideFollow"):t,{"name":"if","hash":{},"fn":e.program(25,o,0),"inverse":e.program(27,o,0),"loc":{"start":{"line":121,"column":26},"end":{"line":141,"column":33}}}))?s:"")+"                      </div>\r\n"},"23":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                              <a href="javascript:void(0);" class="esoc-mini-profile-following-action" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"following"):s,t))+'">\r\n                                  <div class="esoc-miniprofile-otheruser-actions-withchat">\r\n                                      <div class="esoc-miniprofile-followingaction '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"followingClass"):s,t))+'"\r\n                                           title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"following"):s,t))+'"></div>\r\n                                  </div>\r\n                              </a>\r\n'},"25":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                              <a href="javascript:void(0);" class="esoc-viewminiprofile-action">\r\n                                  <div class="esoc-mini-profile-selfuser-actions">\r\n                                      <div class="esoc-mini-profile-view-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"viewprofile"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"viewprofile"):s,t))+'"></div>\r\n                                  </div>\r\n                              </a>\r\n'},"27":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                              <a href="javascript:void(0);" class="esoc-mini-profile-following-action" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"followingClass"):s,t))+'">\r\n                                  <div class="esoc-mini-profile-otheruser-actions-without-chat">\r\n                                      <div class="esoc-miniprofile-followingaction '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"followingClass"):s,t))+'"\r\n                                           title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"following"):s,t))+'"></div>\r\n                                  </div>\r\n                              </a>\r\n                              <div class="esoc-mini-profile-otheruser-actions-spacing "></div>\r\n                              <a href="javascript:void(0);" class="esoc-viewminiprofile-action" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"viewprofile"):s,t))+'">\r\n                                  <div class="esoc-mini-profile-otheruser-actions-without-chat">\r\n                                      <div class="esoc-mini-profile-view-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"viewprofile"):s,t))+'"></div>\r\n                                  </div>\r\n                              </a>\r\n'},"29":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                      <a href="javascript:void(0);" class="esoc-viewminiprofile-action" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"viewprofile"):s,t))+'">\r\n                          <div class="esoc-mini-profile-selfuser-actions">\r\n                              <div class="esoc-mini-profile-view-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"viewprofile"):s,t))+'"></div>\r\n                          </div>\r\n                      </a>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="'+e.escapeExpression((l=null!=(l=a(i,"className")||(null!=t?a(t,"className"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"className","hash":{},"loc":{"start":{"line":1,"column":12},"end":{"line":1,"column":25}}}):l))+' esoc-mini-profile-widget binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableSimpleSettingsModel"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(12,o,0),"loc":{"start":{"line":2,"column":2},"end":{"line":164,"column":9}}}))?s:"")+"</div>\r\n"}});return i.registerPartial("esoc_widgets_userwidget_impl_miniprofile",n),n}),csui.define("esoc/widgets/userwidget/view/miniprofile.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/utils/url","csui/utils/user.avatar.color","i18n!esoc/widgets/userwidget/nls/lang","hbs!esoc/widgets/userwidget/impl/miniprofile","esoc/widgets/common/util","esoc/widgets/userwidget/util","esoc/widgets/utils/chat/impl/util","esoc/widgets/userwidget/chat/view/presence.view","css!esoc/widgets/userwidget/impl/userwidget.css"],function(e,t,i,n,o,s,l,a,r,c,d,u,p){var m=e.config();return i.defaults(m,{"hideFollow":!1}),o.ItemView.extend({"commonUtil":c,"util":d,"className":"esoc-miniprofile-view","template":r,"ui":{"initialsPlaceholder":".image_user_placeholder"},"templateHelpers":function(){var e=void 0!==this.options.showPresenceIndicator&&this.options.showPresenceIndicator;return{"messages":{"enableSimpleSettingsModel":!!this.options.enableSimpleSettingsModel,"showPresenceIndicator":e,"viewprofile":a.viewprofile,"unfollow":a.unfollow,"follow":a.follow,"chat":a.chat,"following":this.options.model.attributes.following?"esoc-mini-profile-unfollow-icon":"esoc-mini-profile-follow-icon"}}},"initialize":function(e){this.options=e,this.followUnfollowActionUrl=s.combine(d.commonUtil.getV2Url(this.options.connector.getConnectionUrl()),d.commonUtil.REST_URLS.pulseRestUrl,this.model.id)},"constructor":function(t){t=t||{},o.ItemView.prototype.constructor.call(this,t),this.model.id||(this.model.id=this.model.get("id"));var i=e.config();i&&(this.options.enableSimpleSettingsModel=i.enableSimpleUserProfile)},"getParentView":function(){return this.options.userWidgetView},"getElementOffset":function(e){return e.is(":visible")?e.offset():{"top":0,"left":0}},"onRender":function(e){var i=this.options.targetEle,n=this.options.model.attributes,c=n.following?this.templateHelpers().messages.unfollow:this.templateHelpers().messages.follow,u=(t(i).attr("id"),{"id":n.id,"display_name":n.display_name,"office_location":n.office_location,"business_email":n.business_email,"business_phone":n.business_phone,"business_phone_label":a.simpleUserProfilePhoneLabel,"cell_phone_label":a.simpleUserProfileMobile,"cell_phone":n.cell_phone,"title":n.title,"showPresenceIndicator":this.templateHelpers().messages.showPresenceIndicator,"otherUser":n.otherUser,"hideFollow":m.hideFollow,"deleted":n.deleted,"initials":n.initials,"actions":{"viewprofile":this.templateHelpers().messages.viewprofile,"following":c,"chat":this.templateHelpers().messages.chat},"enableSimpleSettingsModel":this.templateHelpers().messages.enableSimpleSettingsModel}),h=this.template(u),f=this;this.options.userbackgroundcolor=l.getUserAvatarColor(this.model.attributes),t(i).binf_popover({"content":h,"placement":function(e){t(e).addClass("esoc-mini-profile-popover esoc"),u.enableSimpleSettingsModel&&t(e).addClass("esoc-simple-mini-profile-popover");var n=t("<div/>").attr("style","display:none").addClass("esoc-mini-profile-popover binf-popover esoc-mini-profile-temp-div").append(r);t(i).append(n);var o=t(".esoc-mini-profile-temp-div").height()+40,s=t(".esoc-mini-profile-temp-div").width()+40;n.remove();var l=t(i),a=f.getElementOffset(l),c=a.left,d=a.top,p=t(window).width()-(c+l.outerWidth());return t(window).height()-(d+l.outerHeight(!0))>o?"bottom":p>s?"right":c>s?"left":d>o?"top":"auto"},"html":!0,"trigger":"manual","container":t.fn.binf_modal.getDefaultContainer()}),t(i).off("mouseenter").on("mouseenter",function(e){var n=f.getParentView();clearTimeout(n.profileTimer),f.options.originatingView&&f.options.originatingView.disengageModalKeyboardFocusOnClose&&f.options.originatingView.disengageModalKeyboardFocusOnClose();var o=setTimeout(function(){t(i).binf_popover("show")},1e3);n.profileTimer=o}),t(i).off("mouseleave").on("mouseleave",function(e){var t=f.getParentView();clearTimeout(t.profileTimer)}),t(i).off("shown.binf.popover").on("shown.binf.popover",function(e){var n={"id":f.model.attributes.id,"username":f.model.attributes.name,"context":f.options.context},l=new o.Region({"el":t(".esoc-mini-profile-popover #esoc-mini-profile-presence-indicator")}),a=new p(n);if(l.show(a),t(".esoc-mini-profile-popover .esoc-mini-profile-following-action").off("click").on("click",function(e){var n=new FormData,o=f.model.attributes.following?d.commonUtil.globalConstants.UNFOLLOW:d.commonUtil.globalConstants.FOLLOW;n.append(d.commonUtil.globalConstants.ACTION,o);var s={"itemview":f,"url":f.followUnfollowActionUrl,"type":"POST","data":n,"requestType":"miniProfilePopup","targetElement":t(this),"popOverTarget":i};f.util.updateAjaxCall(s)}),t(".esoc-mini-profile-popover .esoc-viewminiprofile-action,.esoc-mini-profile-popover .esoc-mini-profile-user-name,.esoc-mini-profile-popover .esoc-mini-profile-pic").off("click").on("click",function(e){e.stopPropagation(),f.options.userWidgetView.showUserProfileDialog(e)}),f.model.attributes.otherUser){var r=s.combine(d.commonUtil.getV2Url(f.options.connector.getConnectionUrl()),d.commonUtil.REST_URLS.pulseRestUrl,f.model.id);r=d.commonUtil.updateQueryStringValues(r,d.commonUtil.globalConstants.FIELDS,d.commonUtil.globalConstants.CHAT_SEETING);var c={"itemview":f,"url":r,"type":"GET","requestType":"miniProfileActionsDisplay"};f.util.updateAjaxCall(c)}else t(".esoc-mini-profile-popover .esoc-mini-profile-loading-img").hide(),t(".esoc-mini-profile-popover .esoc-mini-profile-actions").show();if(t("*").one("scroll",function(){t(i).binf_popover("hide")}),t(i).one("remove",function(){t(i).binf_popover("hide")}),t("[aria-describedby]").each(function(){t(this).is(e.target)||0!==t(this).has(e.target).length||0!==t(".popover").has(e.target).length||t("#"+t(this)[0].getAttribute("aria-describedby")).find(e.target).is(e.target)||t(this).binf_popover("hide")}),t(".esoc-mini-profile-popover").on("mouseleave",function(e){var n=e.target.id?"#"+e.target.id:"";n||t(n).attr("aria-describedby")===t(i).attr("aria-describedby")||t(i).binf_popover("hide")}),t(i).off("mouseleave").on("mouseleave",function(e){setTimeout(function(){0===t(".esoc-mini-profile-popover:hover").length&&t(i).binf_popover("hide")},1e3)}),t(i).one("destroyed.binf.popover hidden.binf.popover",function(e){f.options.originatingView&&!f.options.originatingView.isDestroyed&&f.options.originatingView.engageModalKeyboardFocusOnOpen&&f.options.originatingView.engageModalKeyboardFocusOnOpen()}),f.listenTo(f.options.originatingView,"destroy",function(e){t(i).binf_popover("destroy")}),void 0!==f.model.id){var u={"context":f.options.context,"userid":f.model.attributes.id,"photoElement":t(".esoc-mini-profile-popover .esoc-userprofile-img-"+d.escapeSelector(f.model.attributes.id)),"defaultPhotElement":t(".esoc-mini-profile-popover .esoc-user-default-avatar-"+d.escapeSelector(f.model.attributes.id)),
"userbackgroundcolor":f.options.userbackgroundcolor};f.util.commonUtil.setProfilePic(u),f.util.commonUtil.setUserColor(u)}})},"launchChatWindow":function(e){u.launchChatWindow(e.options)},"_assignUserColor":function(){var e=d.commonUtil.getUserAvatarColor(this.model.attributes);this.ui.initialsPlaceholder.css("background",e)}})}),csui.define("hbs!esoc/widgets/userwidget/impl/userpickercard",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return" binf-disabled"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="message binf-pull-left">'+e.escapeExpression((s=null!=(s=l(i,"disabled-message")||(null!=t?l(t,"disabled-message"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"disabled-message","hash":{},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":63}}}):s))+"</span>\r\n"},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a href="javascript:void(0);" class="esoc-viewminiprofile-action" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"viewprofile"):s,t))+'">\r\n        <div class="esoc-mini-profile-selfuser-actions">\r\n          <div class="esoc-mini-profile-view-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"viewprofile"):s,t))+'"></div>\r\n        </div>\r\n      </a>\r\n'},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"otherUser"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.program(10,o,0),"loc":{"start":{"line":19,"column":6},"end":{"line":63,"column":13}}}))?s:""},"8":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-chat-action-enabled esoc-chat-action-enabled-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":20,"column":70},"end":{"line":20,"column":76}}}):l))+' binf-hidden">\r\n          <a href="javascript:void(0);" class="esoc-mini-profile-following-action" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"actions"):t)?a(s,"following"):s,t))+'">\r\n            <div class="esoc-miniprofile-otheruser-actions-withchat">\r\n              <div class="esoc-miniprofile-followingaction '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"actions"):t)?a(s,"followingClass"):s,t))+'"\r\n                   title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"actions"):t)?a(s,"following"):s,t))+'"></div>\r\n            </div>\r\n          </a>\r\n\r\n          <div class="esoc-mini-profile-otheruser-actions-spacing "></div>\r\n          <a href="javascript:void(0);" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"chat"):s,t))+'">\r\n            <div class="esoc-miniprofile-chat-action-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":30,"column":53},"end":{"line":30,"column":59}}}):l))+'\r\n                   esoc-miniprofile-otheruser-actions-withchat esoc-miniprofile-chat-action"></div>\r\n          </a>\r\n\r\n          <div class="esoc-mini-profile-otheruser-actions-spacing "></div>\r\n          <a href="javascript:void(0);" class="esoc-viewminiprofile-action" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"actions"):t)?a(s,"viewprofile"):s,t))+'">\r\n            <div class="esoc-miniprofile-otheruser-actions-withchat">\r\n              <div class="esoc-mini-profile-view-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"actions"):t)?a(s,"viewprofile"):s,t))+'"></div>\r\n            </div>\r\n          </a>\r\n        </div>\r\n\r\n        <div class="esoc-chat-action-disabled esoc-chat-action-disabled-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":42,"column":72},"end":{"line":42,"column":78}}}):l))+' binf-hidden">\r\n          <a href="javascript:void(0);" class="esoc-mini-profile-following-action" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"actions"):t)?a(s,"following"):s,t))+'">\r\n            <div class="esoc-mini-profile-otheruser-actions-without-chat">\r\n              <div class="esoc-miniprofile-followingaction '+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"actions"):t)?a(s,"followingClass"):s,t))+'"\r\n                   title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"actions"):t)?a(s,"following"):s,t))+'"></div>\r\n            </div>\r\n          </a>\r\n\r\n          <div class="esoc-mini-profile-otheruser-actions-spacing "></div>\r\n          <a href="javascript:void(0);" class="esoc-viewminiprofile-action" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"actions"):t)?a(s,"viewprofile"):s,t))+'">\r\n            <div class="esoc-mini-profile-otheruser-actions-without-chat">\r\n              <div class="esoc-mini-profile-view-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"actions"):t)?a(s,"viewprofile"):s,t))+'"></div>\r\n            </div>\r\n          </a>\r\n        </div>\r\n'},"10":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <a href="javascript:void(0);" class="esoc-viewminiprofile-action" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"viewprofile"):s,t))+'">\r\n          <div class="esoc-mini-profile-selfuser-actions">\r\n            <div class="esoc-mini-profile-view-icon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"actions"):t)?l(s,"viewprofile"):s,t))+'"></div>\r\n          </div>\r\n        </a>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="'+e.escapeExpression((l=null!=(l=a(i,"className")||(null!=t?a(t,"className"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"className","hash":{},"loc":{"start":{"line":1,"column":12},"end":{"line":1,"column":25}}}):l))+'">\r\n  <div class="member-picture'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":28},"end":{"line":2,"column":65}}}))?s:"")+' binf-pull-left">\r\n    <span class="esoc-user-picker-default-img-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":3,"column":46},"end":{"line":3,"column":52}}}):l))+' csui-icon-paceholder csui-icon\r\n            image_user_placeholder" style="background-color:'+e.escapeExpression((l=null!=(l=a(i,"userbackgroundcolor")||(null!=t?a(t,"userbackgroundcolor"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"userbackgroundcolor","hash":{},"loc":{"start":{"line":4,"column":60},"end":{"line":4,"column":83}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"initials")||(null!=t?a(t,"initials"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"initials","hash":{},"loc":{"start":{"line":4,"column":85},"end":{"line":4,"column":97}}}):l))+'</span>\r\n    <img class="esoc-user-picker-img-'+e.escapeExpression((l=null!=(l=a(i,"id")||(null!=t?a(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":5,"column":37},"end":{"line":5,"column":43}}}):l))+' csui-icon-user csui-icon binf-img-circle binf-hidden" alt="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"image"):s,t))+'">\r\n  </div>\r\n  <div class="member-info'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":25},"end":{"line":7,"column":62}}}))?s:"")+' binf-pull-left">\r\n    <span class="name binf-pull-left" title="'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":8,"column":45},"end":{"line":8,"column":61}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":8,"column":63},"end":{"line":8,"column":79}}}):l))+'</span>\r\n    <span class="email binf-pull-left" title="'+e.escapeExpression((l=null!=(l=a(i,"email")||(null!=t?a(t,"email"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"email","hash":{},"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":55}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"business_email")||(null!=t?a(t,"business_email"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"business_email","hash":{},"loc":{"start":{"line":9,"column":57},"end":{"line":9,"column":75}}}):l))+'</span>\r\n    <span class="title binf-pull-left" title="'+e.escapeExpression((l=null!=(l=a(i,"title")||(null!=t?a(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":55}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"title")||(null!=t?a(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":10,"column":57},"end":{"line":10,"column":66}}}):l))+'</span>\r\n    <span class="department binf-pull-left" title="'+e.escapeExpression((l=null!=(l=a(i,"department_name")||(null!=t?a(t,"department_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"department_name","hash":{},"loc":{"start":{"line":11,"column":51},"end":{"line":11,"column":70}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"department_name")||(null!=t?a(t,"department_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"department_name","hash":{},"loc":{"start":{"line":11,"column":72},"end":{"line":11,"column":91}}}):l))+'</span>\r\n    <span class="office binf-pull-left" title="'+e.escapeExpression((l=null!=(l=a(i,"office_location")||(null!=t?a(t,"office_location"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"office_location","hash":{},"loc":{"start":{"line":12,"column":47},"end":{"line":12,"column":66}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"office_location")||(null!=t?a(t,"office_location"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"office_location","hash":{},"loc":{"start":{"line":12,"column":68},"end":{"line":12,"column":87}}}):l))+"</span>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":4},"end":{"line":15,"column":11}}}))?s:"")+'  </div>\r\n  <div class="esoc-mini-profile-actions">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"deleted"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.program(7,o,0),"loc":{"start":{"line":18,"column":4},"end":{"line":70,"column":11}}}))?s:"")+"  </div>\r\n</div>\r\n"}});return i.registerPartial("esoc_widgets_userwidget_impl_userpickercard",n),n}),csui.define("esoc/widgets/userwidget/view/userpickercard.view",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/utils/url","csui/utils/user.avatar.color","esoc/widgets/userwidget/view/miniprofile.view","esoc/widgets/utils/chat/chat.view","esoc/widgets/userwidget/util","i18n!esoc/widgets/userwidget/nls/lang","hbs!esoc/widgets/userwidget/impl/userpickercard","esoc/factory/pulsesettingsfactory","esoc/controls/userwidget/userwidget.view","css!esoc/widgets/userwidget/impl/userwidget.css"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m){return o.ItemView.extend({"util":c,"className":"esoc-userpickercard-container","template":u,"initialize":function(e){this.options=e;var t=this.options.connector||this.model.collection.connector;this.chatSettings=e.context.getModel(p,{"attributes":{"id":"chat"},"options":{"chat":!0},"permanent":!0}).ensureFetched(),this.followUnfollowActionUrl=s.combine(this.util.commonUtil.getV2Url(t.getConnectionUrl()),this.util.commonUtil.REST_URLS.pulseRestUrl,this.model.attributes.id),this.model.on("show:Actions",this.showActions,this),this.model.on("hide:Actions",this.hideActions,this)},"constructor":function(e){e=e||{},o.ItemView.prototype.constructor.call(this,e)},"ui":{"viewProfileAction":".esoc-picker-view .esoc-viewminiprofile-action","followUnFollowAction":".esoc-picker-view .esoc-mini-profile-following-action","chatAction":".esoc-picker-view .esoc-social-chat-icon","actionSpacing":".esoc-picker-view .esoc-mini-profile-otheruser-actions-spacing"},"templateHelpers":function(){return{"messages":{"chat":d.chatLabel,"image":d.image}}},"events":{"click @ui.viewProfileAction":"showUserProfileDialog","click @ui.followUnFollowAction":"followUnfollowAction","mousedown @ui.followUnFollowAction":"preventDefaultAction","mousedown @ui.chatAction":"preventDefaultAction","mousedown @ui.actionSpacing":"preventDefaultAction","click @ui.actionSpacing":"preventDefaultAction","click @ui.chatAction":"preventDefaultAction"},"preventDefaultAction":function(e){e.preventDefault(),e.stopImmediatePropagation()},"showActions":function(){this.$el.find(".esoc-mini-profile-userinfo").addClass("esoc-mini-profile-userinfo-with-actions"),this.$el.find(".member-info").addClass("member-info-with-actions"),this.$el.find(".esoc-mini-profile-actions").show()},"hideActions":function(){this.$el.find(".esoc-mini-profile-actions").hide(),this.$el.find(".member-info").removeClass("member-info-with-actions")},"onRender":function(e){var t=this;t.options.userbackgroundcolor=l.getUserAvatarColor(this.model.attributes),t.model.attributes.otherUser&&t.chatSettings.done(function(e){if(e.attributes.chatSettings.chatEnabled){t.$el.find(".esoc-chat-action-enabled-"+t.model.attributes.id).removeClass("binf-hidden");var i=new o.Region({"el":t.$el.find(".esoc-miniprofile-chat-action")}),n={"context":t.options.context,"tguser":t.model.attributes.name,"domain":e.attributes.chatSettings.chatDomain},s=new r(n);i.show(s)}else t.$el.find(".esoc-chat-action-disabled-"+t.model.attributes.id).removeClass("binf-hidden")}),this.setProfilePic()},"setProfilePic":function(){var e=this.options.model.attributes.id,t={"context":this.options.context,"userid":e,"photoElement":this.$el.find(".esoc-user-picker-img-"+c.escapeSelector(e)),"defaultPhotElement":this.$el.find(".esoc-user-picker-default-img-"+c.escapeSelector(e)),"userbackgroundcolor":this.options.userbackgroundcolor};this.util.commonUtil.setProfilePic(t),this.util.commonUtil.setUserColor(t)},"showUserProfileDialog":function(t){this.model.attributes.userid=this.model.attributes.id;var n=i.extend({},this.options.widgetOptions);delete n.model,n.model=this.model,m=m||e("esoc/controls/userwidget/userwidget.view"),new m(n).showUserProfileDialog(t)},"followUnfollowAction":function(e){e.stopPropagation(e);var i=new FormData,n=(e||window.event,this.model.attributes.following?c.commonUtil.globalConstants.UNFOLLOW:c.commonUtil.globalConstants.FOLLOW);i.append(c.commonUtil.globalConstants.ACTION,n);var o={"itemview":this,"url":this.followUnfollowActionUrl,"type":"POST","data":i,"requestType":"miniProfilePopup","targetElement":t(e.target.parentElement),"connector":this.options.connector};this.util.updateAjaxCall(o)}})}),csui.define("esoc/widgets/userwidget/model/userpickercard.model",["csui/lib/underscore","csui/lib/backbone","csui/models/resource","esoc/widgets/userwidget/util"],function(e,t,i,n){return t.Model.extend(e.extend({},i(t.Model),{"defaults":{"className":"esoc-picker-view csui-userpicker-item"},"constructor":function(e){t.Model.prototype.constructor.apply(this,arguments)},"parse":function(e,t){var i=e.data.properties;return i.display_name=i.name_formatted,i.department_name=i.group_id_expand?i.group_id_expand.name:"",n.setRelationModel(i,{"following":i.following,"selfUser":i.self}),i}}))}),csui.define("esoc/widgets/userwidget/model/userpicker.model",["csui/lib/jquery","csui/lib/backbone","csui/lib/underscore","esoc/widgets/userwidget/model/userpickercard.model","esoc/widgets/userwidget/util","csui/utils/url","csui/utils/contexts/factories/user","i18n!esoc/widgets/userwidget/nls/lang","csui/models/resource"],function(e,t,i,n,o,s,l,a,r){return t.Collection.extend(i.extend({},r(t.Collection),{"util":o,"model":n,"constructor":function(e){this.user=e.context?e.context.getModel(l):void 0,this.limit=e.limit||10,this.query=e.query||"",e.memberFilter&&e.memberFilter.type&&(this.memberType=e.memberFilter.type),this.memberType||(this.memberType=[0,1]),e&&e.connector&&e.connector.assignTo(this),t.Collection.prototype.constructor.apply(this,arguments)},"urlRoot":function(){return s.combine(this.util.commonUtil.getV2Url(this.connector.getConnectionUrl()),this.util.commonUtil.REST_URLS.searchUsersUrl)},"url":function(){var e="?limit="+this.limit,t=this.memberType.length&&"&where_type="+this.memberType.join("&where_type=")||"",n=encodeURIComponent("&expand=properties{group_id}"),o="&query="+encodeURIComponent(this.query);return i.result(this,"urlRoot")+e+t+n+o},"parse":function(e){for(var t in e.results){var i=e.results[t];i.data.properties.id===this.user.get("id")&&(i.data.properties.self=!0)}return e.results},"fetch":function(){return this.Fetchable.fetch.apply(this,arguments)}}))}),csui.define("esoc/widgets/userwidget/view/customuserpicker.view",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/controls/userpicker/userpicker.view","esoc/controls/userwidget/userwidget.view","esoc/controls/userwidget/userwidget.model.mixin","esoc/widgets/userwidget/view/userpickercard.view","esoc/widgets/userwidget/model/userpicker.model"],function(e,t,i,n,o,s,l,a,r,c){var d=s.extend({"constructor":function(e){e||(e={}),e.userView=e.widgetoptions.showActions?r:"",e.connector=e.widgetoptions.connector,e.relation=e.widgetoptions.relation;var t=new c(e);e.collection=e.widgetoptions.showActions?t:"",this.options=e,s.prototype.constructor.apply(this,arguments)},"currentlyFocusedElement":function(e){this.ui.searchclear&&i(this.ui.searchclear).is(":visible")?this.ui.searchclear.attr("tabindex","0").attr("data-cstabindex","0"):this.ui.searchbox.attr("tabindex","0").attr("data-cstabindex","0")},"_retrieveMembers":function(e){var t=this;return t.collection.query=e,t.collection.fetch({"reset":!0}).then(function(){return"function"==typeof t.options.onRetrieveMembers&&t.options.onRetrieveMembers({"collection":t.collection}),t.collection.models})},"_renderHighlighter":function(e){var t=this.collection.findWhere({"name":e});return new(0===t.get("type")?this.options.userView:this.options.groupView)({"model":t,"connector":this.options.widgetoptions.connector,"widgetOptions":this.options.widgetoptions,"context":this.options.context,"disabledMessage":this.options.disabledMessage}).render().el},"_resetInput":function(e){"esoc-activityfeed-invisiblebutton"!==e.target.className&&"activityfeed-expand-invisiblebutton"!==e.target.className&&i(".typeahead.binf-form-control.cs-search").val("")},"onShow":function(e){this.options.widgetoptions.showActions&&i(".typeahead.binf-form-control.cs-search").on("focusout",this,this._resetInput)},"_afterSelect":function(i){if(this.options.widgetoptions.showActions){var n=t.extend({},this.options.widgetoptions);delete n.model,this.parseModelResponse(i),n.model=i,n.userid=i.attributes.id,l=l||e("esoc/controls/userwidget/userwidget.view");new l(n).showUserProfileDialog()}else{var s=this.options.clearOnSelect?"":o.formatMemberName(i);this.ui.searchbox.val(s),this.updateStyles(),this.options.userView.userPicked=!0,this.trigger("item:change",{"item":i})}},"_nextHighlighter":function(e){this.options.widgetoptions.showActions&&e.data("value")&&e.data("value").trigger("show:Actions")},"_currentHighlighter":function(e){this.options.widgetoptions.showActions&&e.data("value")&&e.data("value").trigger("hide:Actions")},"_positionContainer":function(e){e.$scrollContainer.perfectScrollbar("update"),this.collection.length>0&&e.$menu.removeClass("csui-no-results-wrapper"),s.prototype._positionContainer.call(this,e),e.$element.css("height","")}});return t.extend(d.prototype,a),d}),csui.define("hbs!esoc/widgets/userwidget/impl/extendedinfotextfield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="esoc-user-label esoc-user-textarea-label">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"extendedLabelClass"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":3,"column":2},"end":{"line":7,"column":9}}}))?s:"")+'    <div class="esoc-user-extended-info esoc-user-extended-view-mode">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"userInputField"):t,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.program(10,o,0),"loc":{"start":{"line":9,"column":6},"end":{"line":40,"column":13}}}))?s:"")+'      <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'"\r\n         class="esoc-user-see-more esoc-user-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"more"):s,t))+'">\r\n        <span class="icon-arrow-down"></span></a>\r\n      <a href="javascript:void(0);" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'"\r\n         class="esoc-user-see-less esoc-user-hide-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"less"):s,t))+'">\r\n        <span class="icon-arrow-up"></span></a>\r\n    </div>\r\n'},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"      <span class="+e.escapeExpression((s=null!=(s=l(i,"extendedLabelClass")||(null!=t?l(t,"extendedLabelClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"extendedLabelClass","hash":{},"loc":{"start":{"line":4,"column":18},"end":{"line":4,"column":40}}}):s))+">"+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":4,"column":41},"end":{"line":4,"column":50}}}):s))+"</span>\r\n"},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="esoc-user-extended-info-label">'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":6,"column":50},"end":{"line":6,"column":59}}}):s))+"</span>\r\n"},"6":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-user-manager-field">\r\n          <div class="esoc-user-manager-avatar-container">\r\n        <span id="esoc-user-default-avatar" class="image_user_placeholder\r\n          esoc-user-default-avatar">'+e.escapeExpression((l=null!=(l=a(i,"initials")||(null!=t?a(t,"initials"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"initials","hash":{},"loc":{"start":{"line":13,"column":36},"end":{"line":13,"column":48}}}):l))+'</span>\r\n            <img id="esoc-user-manager-avatar" class="binf-img-circle esoc-user-manager-avatar" src="" />\r\n          </div>\r\n      <span class="esoc-widget-user-display-name esoc-user-messages" data-userid="'+e.escapeExpression((l=null!=(l=a(i,"content")||(null!=t?a(t,"content"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"content","hash":{},"loc":{"start":{"line":16,"column":82},"end":{"line":16,"column":93}}}):l))+'"\r\n            data-username="'+e.escapeExpression((l=null!=(l=a(i,"reportsTo")||(null!=t?a(t,"reportsTo"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"reportsTo","hash":{},"loc":{"start":{"line":17,"column":27},"end":{"line":17,"column":40}}}):l))+'" />\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"isEditable"):t,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":18,"column":10},"end":{"line":23,"column":17}}}))?s:"")+"        </div>\r\n"},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div\r\n                class="esoc-user-extendedinfo-edit-icon '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"reportsTo"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":20,"column":56},"end":{"line":20,"column":125}}}))?s:"")+'">\r\n              <a class="esoc-user-extended-edit" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"edit"):s,t))+'"></a>\r\n            </div>\r\n'},"8":function(e,t,i,n,o){return" esoc-user-extendedinfo-reports-to-edit-icon "},"10":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-user-extendedinfo">\r\n          <div class="esoc-user-extendedinfo-content">\r\n            <a '+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"isEditable"):t,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"loc":{"start":{"line":28,"column":15},"end":{"line":28,"column":68}}}))?s:"")+'\r\n                                  class="esoc-user-messages-content esoc-user-messages">\r\n              <div class="esoc-social-status-data esoc-user-content esoc-user-messages-content\r\n                  esoc-user-extended-info-content '+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"isEditable"):t,{"name":"if","hash":{},"fn":e.program(13,o,0),"inverse":e.noop,"loc":{"start":{"line":31,"column":50},"end":{"line":31,"column":96}}}))?s:"")+'">'+e.escapeExpression((l=null!=(l=a(i,"content")||(null!=t?a(t,"content"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"content","hash":{},"loc":{"start":{"line":31,"column":98},"end":{"line":31,"column":109}}}):l))+"</div>\r\n            </a>\r\n          </div>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"isEditable"):t,{"name":"if","hash":{},"fn":e.program(15,o,0),"inverse":e.noop,"loc":{"start":{"line":34,"column":10},"end":{"line":38,"column":17}}}))?s:"")+"        </div>\r\n"},"11":function(e,t,i,n,o){return' href="javascript:void(0);" '},"13":function(e,t,i,n,o){return" esoc-cursor-pointer "},"15":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="esoc-user-extendedinfo-edit-icon">\r\n              <a class="esoc-user-extended-edit" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"edit"):s,t))+'"></a>\r\n            </div>\r\n'},"17":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isEditable"):t,{"name":"if","hash":{},"fn":e.program(18,o,0),"inverse":e.noop,"loc":{"start":{"line":49,"column":2},"end":{"line":67,"column":9}}}))?s:""},"18":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="esoc-user-label esoc-user-textarea-label ">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"extendedLabelClass"):t,{"name":"if","hash":{},"fn":e.program(19,o,0),"inverse":e.program(21,o,0),"loc":{"start":{"line":51,"column":8},"end":{"line":55,"column":15}}}))?s:"")+'      </div>\r\n      <div\r\n          class="esoc-user-extended-info esoc-user-extended-view-mode esoc-user-default-content-mode">\r\n        <div class="esoc-user-extendedinfo-default-content">\r\n          <a '+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"isEditable"):t,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"loc":{"start":{"line":60,"column":13},"end":{"line":60,"column":66}}}))?s:"")+'\r\n                                class="esoc-user-default-content '+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"isEditable"):t,{"name":"if","hash":{},"fn":e.program(23,o,0),"inverse":e.noop,"loc":{"start":{"line":61,"column":65},"end":{"line":61,"column":109}}}))?s:"")+'">'+e.escapeExpression((l=null!=(l=a(i,"defaultMessage")||(null!=t?a(t,"defaultMessage"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"defaultMessage","hash":{},"loc":{"start":{"line":61,"column":111},"end":{"line":61,"column":129}}}):l))+'</a>\r\n        </div>\r\n        <div class="esoc-user-extendedinfo-edit-icon">\r\n          <a class="esoc-user-extended-edit" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"edit"):s,t))+'"></a>\r\n        </div>\r\n      </div>\r\n'},"19":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"          <span class="+e.escapeExpression((s=null!=(s=l(i,"extendedLabelClass")||(null!=t?l(t,"extendedLabelClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"extendedLabelClass","hash":{},"loc":{"start":{"line":52,"column":22},"end":{"line":52,"column":44}}}):s))+">"+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":52,"column":45},"end":{"line":52,"column":54}}}):s))+"</span>\r\n"},"21":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="esoc-user-extended-info-label">'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":54,"column":54},"end":{"line":54,"column":63}}}):s))+"</span>\r\n"},"23":function(e,t,i,n,o){return"esoc-cursor-pointer"},"25":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}
;return'    <div class="esoc-user-hide-element esoc-user-extended-edit-mode">\r\n'+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.formField === 'status'",{"name":"xif","hash":{},"fn":e.program(26,o,0),"inverse":e.program(28,o,0),"loc":{"start":{"line":71,"column":6},"end":{"line":105,"column":14}}}))?s:"")+"    </div>\r\n  </div>\r\n"},"26":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-social-status-input-container">\r\n          <textarea id=\'esoc-social-status-input\' class="esoc-user-extended-edit-textarea\r\n          esoc-user-extended-edit-input" placeholder="'+e.escapeExpression((l=null!=(l=a(i,"defaultMessage")||(null!=t?a(t,"defaultMessage"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"defaultMessage","hash":{},"loc":{"start":{"line":74,"column":54},"end":{"line":74,"column":72}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"content")||(null!=t?a(t,"content"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"content","hash":{},"loc":{"start":{"line":74,"column":74},"end":{"line":74,"column":85}}}):l))+'</textarea>\r\n        </div>\r\n        <div class="esoc-status-textinput-button-holder">\r\n          <a href="javascript:void(0);"\r\n             class="esoc-social-status-header-emotion esoc-social-comment-emoticon"\r\n             id="esoc-social-status-emoticon" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"emoticon"):s,t))+'"></a>\r\n        </div>\r\n        <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-user-text-edit-buttons">\r\n          <button id="esoc-user-status-update" class="esoc-user-status-update binf-btn binf-btn-primary"\r\n                  title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"update"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"update"):s,t))+'</button>\r\n          <button class="esoc-user-cancel binf-btn binf-btn-default"\r\n                  title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"cancel"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"cancel"):s,t))+"</button>\r\n        </div>\r\n"},"28":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"userInputField"):t,{"name":"if","hash":{},"fn":e.program(29,o,0),"inverse":e.program(31,o,0),"loc":{"start":{"line":88,"column":8},"end":{"line":98,"column":15}}}))?s:"")+'        <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-user-text-edit-buttons">\r\n          <button class="esoc-user-update binf-btn binf-btn-primary"\r\n                  title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"update"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"update"):s,t))+'</button>\r\n          <button class="esoc-user-cancel binf-btn binf-btn-default"\r\n                  title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"cancel"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"cancel"):s,t))+"</button>\r\n        </div>\r\n"},"29":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n            <div class="esoc-user-manager-picker-holder"></div>\r\n            <input type="text"\r\n                   class="esoc-user-extended-edit-text esoc-user-extended-edit-input esoc-user-hide-element"\r\n                   value="'+e.escapeExpression((s=null!=(s=l(i,"content")||(null!=t?l(t,"content"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"content","hash":{},"loc":{"start":{"line":93,"column":26},"end":{"line":93,"column":37}}}):s))+'" placeholder="'+e.escapeExpression((s=null!=(s=l(i,"defaultMessage")||(null!=t?l(t,"defaultMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"defaultMessage","hash":{},"loc":{"start":{"line":93,"column":52},"end":{"line":93,"column":70}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"defaultMessage")||(null!=t?l(t,"defaultMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"defaultMessage","hash":{},"loc":{"start":{"line":93,"column":84},"end":{"line":93,"column":102}}}):s))+'"/>\r\n          </div>\r\n'},"31":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <textarea class="esoc-user-extended-edit-textarea esoc-user-extended-edit-input"\r\n                    placeholder="'+e.escapeExpression((s=null!=(s=l(i,"defaultMessage")||(null!=t?l(t,"defaultMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"defaultMessage","hash":{},"loc":{"start":{"line":97,"column":33},"end":{"line":97,"column":51}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"defaultMessage")||(null!=t?l(t,"defaultMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"defaultMessage","hash":{},"loc":{"start":{"line":97,"column":65},"end":{"line":97,"column":83}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"content")||(null!=t?l(t,"content"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"content","hash":{},"loc":{"start":{"line":97,"column":85},"end":{"line":97,"column":96}}}):s))+"</textarea>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"content"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(17,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":68,"column":7}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isEditable"):t,{"name":"if","hash":{},"fn":e.program(25,o,0),"inverse":e.noop,"loc":{"start":{"line":69,"column":0},"end":{"line":108,"column":7}}}))?s:"")}});return i.registerPartial("esoc_widgets_userwidget_impl_extendedinfotextfield",n),n}),csui.define("esoc/widgets/userwidget/view/extendedinfotextfield.view",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/utils/contexts/factories/connector","esoc/widgets/userwidget/view/extendedinfo.view","esoc/widgets/userwidget/util","esoc/widgets/userwidget/view/customuserpicker.view","hbs!esoc/widgets/userwidget/impl/extendedinfotextfield","i18n!esoc/widgets/userwidget/nls/lang","csui/lib/perfect-scrollbar"],function(e,t,i,n,o,s,l,a,r,c,d){var u=null;return l.extend({"tagName":"div","className":"esoc-user-extended-info-text-field binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12","template":c,"util":a,"initialize":function(e){this.extendedInfo=e,u=this},"events":{"focusin .esoc-user-extended-edit-mode":"onStatusInputFocusIn","focusout .esoc-user-extended-edit-mode":"onStatusInputFocusOut","click #esoc-user-status-update":"postStatus","click .esoc-user-update":"updateExtendedInfoField","click .esoc-user-cancel":"cancelUpdateExtendedInfoField","click .esoc-user-extended-edit, .esoc-user-messages-content, .esoc-user-default-content":"onEditClick","click .esoc-user-see-more":"showMoreContent","click .esoc-user-see-less":"showLessContent","click .esoc-user-messages-content":"onContentClick","mouseenter .esoc-user-default-content-mode, .esoc-user-extendedinfo, .esoc-user-manager-field":"showEditLinkForText","mouseleave .esoc-user-default-content-mode, .esoc-user-extendedinfo, .esoc-user-manager-field":"hideEditLinkForText","focusin .esoc-user-manager-field":"showEditLinkForText","focusout .esoc-user-manager-field":"hideEditLinkForText","keypress .esoc-user-extended-edit-text":"submitOnEnter","change #esoc-social-status-input":"onStatusChange","input #esoc-social-status-input":"onStatusChange"},"constructor":function(e){e=e||{},e.connector=e.connector?e.connector:e.context.getObject(s),this.options=e,o.ItemView.prototype.constructor.call(this,e)},"onRender":function(){if(this.options.model.attributes.userInputField){if(this.options.model.attributes.isEditable){this.pickerView=new r({"context":this.options.context,"memberFilter":{"type":[0]},"widgetoptions":{"connector":this.options.connector,"showActions":!1}});new o.Region({"el":this.$el.find(".esoc-user-manager-picker-holder")}).show(this.pickerView),this.listenTo(this.pickerView,"item:change",this.onItemChange)}if(this.options.model.attributes.content){a.displayUserWidget(this.options.context,this.$el);var t={"userid":this.options.model.attributes.content,"context":this.options.context,"placeholder":this.$el.find(".esoc-user-manager-avatar-container"),"showUserProfileLink":!0,"showMiniProfile":!0,"showUserWidgetFor":"profilepic","source":"extendedInfoText","parentView":this};e("esoc/widgets/userwidget/userwidget").getUser(t)}else this.trigger("view:shown")}},"onStatusChange":function(e){var t=this.$el.find("#esoc-social-status-input").val(),i=e||window.event,n=this.util.commonUtil.globalConstants.MAX_CHAR_LIMIT;if(t.length>n){var o=t.substr(0,n);this.$el.find("#esoc-social-status-input")[0].innerHTML=o,this.$el.find("#esoc-social-status-header").html("")[0].textContent=o,this.util.commonUtil.addEmoji(this.$el.find("#esoc-social-status-header"),!1,this.options.connector),this.$el.find("#esoc-social-status-header").trigger("focus"),this.util.commonUtil.placeCaretAtEnd(this.$el.find("#esoc-social-status-header")),i.preventDefault()}},"onItemChange":function(e){this.managerID=e.item.attributes.id,this.$el.find(".esoc-user-extended-edit-text").val(e.item.attributes.id)},"updateExtendedInfoField":function(e){if(this.options.model.attributes.userInputField){this.pickerView.$el.find("input").val().trim()||(this.managerID="",this.$el.find(".esoc-user-extended-edit-text").val(""))}var i=new FormData,n=this.$el.find(".esoc-user-extended-edit-input").val(),o=this.options.connector;i.append(this.util.commonUtil.globalConstants.ACTION,this.util.commonUtil.globalConstants.UPDATE_EXTENDED_INFO),i.append(this.model.attributes.formField,n),this.$el.find(".esoc-user-extended-edit-mode").addClass("esoc-extendedinfo-update-mask"),this.$el.find(".esoc-user-extended-edit-input").prop("disabled",!0);var s={"itemview":this,"url":this.util.commonUtil.getV2Url(o.getConnectionUrl())+this.util.commonUtil.REST_URLS.pulseRestUrl+this.model.attributes.userid,"type":"POST","data":i,"requestType":"updateExtendedTextField","newValue":n,"targetElement":t(e.target),"connector":o};this.util.updateAjaxCall(s)},"postStatus":function(e){var i=new FormData,n=this.$el.find(".esoc-user-extended-edit-input").val(),o=this.options.connector;i.append(this.model.attributes.formField,n),this.$el.find(".esoc-user-extended-edit-mode").addClass("esoc-extendedinfo-update-mask"),this.$el.find(".esoc-user-extended-edit-input").prop("disabled",!0);var s={"itemview":this,"url":o.connection.url+this.util.commonUtil.REST_URLS.csPostCommentRESTUrl,"type":"POST","data":i,"requestType":"postStatus","newValue":n,"targetElement":t(e.target),"connector":o};this.util.updateAjaxCall(s)},"onShow":function(e){this.showSeeMoreLink(e),this.options.model.attributes.userInputField?this.isUserModelLoaded&&this.trigger("view:shown"):this.trigger("view:shown")},"showSeeMoreLink":function(e){var t=this.$el.find(".esoc-user-content");t.length>0&&("status"===this.model.attributes.formField?(t[0].innerHTML=t.text(),t.addClass("esoc-see-more-content"),a.commonUtil.isTextOverflown(t[0])&&this.$el.find(".esoc-user-see-more").show(),this.util.commonUtil.addEmoji(this.$el.find(".esoc-user-content"),!0,this.options.connector)):(t.html(a.commonUtil.onClickableUrl(t.html(),!0)),t.addClass("esoc-see-more-content"),a.commonUtil.isTextOverflown(t[0])&&this.$el.find(".esoc-user-see-more").show()))},"onContentClick":function(e){e.stopPropagation(),this.$el.find(".esoc-user-see-more").is(":visible")?this.showMoreContent(e):this.$el.find(".esoc-user-see-less").is(":visible")&&this.showLessContent(e)},"showMoreContent":function(e){""===window.getSelection().toString()&&(this.$el.find(".esoc-user-see-less").show(),this.$el.find(".esoc-user-see-more").hide(),this.$el.find(".esoc-user-content").removeClass("esoc-see-more-content"),t("#esoc-user-focus-element").trigger("focus"))},"showLessContent":function(e){""===window.getSelection().toString()&&(this.$el.find(".esoc-user-see-less").hide(),this.$el.find(".esoc-user-see-more").show(),this.$el.find(".esoc-user-content").addClass("esoc-see-more-content"),t("#esoc-user-focus-element").trigger("focus"),this.options.parentView.triggerMethod("update:scrollbar"))},"cancelUpdateExtendedInfoField":function(e){this.render(),this.trigger("change:content"),this.model.attributes.content?this.model.attributes.userInputField?this.$el.find(".esoc-user-messages a").trigger("focus"):this.$el.find(".esoc-user-messages").trigger("focus"):this.$el.find(".esoc-user-default-content").trigger("focus"),this.showSeeMoreLink(e),this.options.parentView.triggerMethod("update:scrollbar")},"onStatusInputFocusIn":function(e){this.$el.find(".esoc-status-header-emoji").addClass("esoc-status-header-emoji-focus")},"onStatusInputFocusOut":function(e){this.$el.find(".esoc-status-header-emoji").removeClass("esoc-status-header-emoji-focus")}})}),csui.define("hbs!esoc/widgets/userwidget/impl/extendedinfolinkfield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <a href="'+e.escapeExpression((l=null!=(l=a(i,"content")||(null!=t?a(t,"content"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"content","hash":{},"loc":{"start":{"line":2,"column":11},"end":{"line":2,"column":22}}}):l))+'" target="_blank" class="'+e.escapeExpression((l=null!=(l=a(i,"linkClass")||(null!=t?a(t,"linkClass"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"linkClass","hash":{},"loc":{"start":{"line":2,"column":47},"end":{"line":2,"column":60}}}):l))+' esoc-user-external-profile-link\r\n  binf-col-lg-3 binf-col-md-3 binf-col-sm-3 binf-col-xs-3" aria-label="'+e.escapeExpression((l=null!=(l=a(i,"label")||(null!=t?a(t,"label"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":3,"column":71},"end":{"line":3,"column":80}}}):l))+'">\r\n  </a>\r\n  <div class="esoc-extended-info-link-holder binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <div class="esoc-user-extended-label esoc-user-profile-link-label esoc-user-label">'+e.escapeExpression((l=null!=(l=a(i,"label")||(null!=t?a(t,"label"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":6,"column":87},"end":{"line":6,"column":96}}}):l))+'\r\n    </div>\r\n    <div class="esoc-user-extended-view-mode esoc-user-profile-link-content esoc-user-links">\r\n      <div class="esoc-user-messages-content esoc-user-messages esoc-user-widget-links-content">\r\n        <a href="'+e.escapeExpression((l=null!=(l=a(i,"content")||(null!=t?a(t,"content"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"content","hash":{},"loc":{"start":{"line":10,"column":17},"end":{"line":10,"column":28}}}):l))+'" target="_blank">'+e.escapeExpression((l=null!=(l=a(i,"content")||(null!=t?a(t,"content"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"content","hash":{},"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":57}}}):l))+"</a>\r\n      </div>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"isEditable"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":12,"column":6},"end":{"line":16,"column":13}}}))?s:"")+"    </div>\r\n  </div>\r\n"},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-user-extendedinfo-edit-icon">\r\n          <a class="esoc-user-extended-edit" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"edit"):s,t))+'"></a>\r\n        </div>\r\n'},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isEditable"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":20,"column":2},"end":{"line":37,"column":9}}}))?s:""},"5":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div\r\n        class="'+e.escapeExpression((l=null!=(l=a(i,"linkClass")||(null!=t?a(t,"linkClass"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"linkClass","hash":{},"loc":{"start":{"line":22,"column":15},"end":{"line":22,"column":28}}}):l))+' esoc-user-external-profile-link binf-col-lg-3 binf-col-md-3 binf-col-sm-3 binf-col-xs-3"></div>\r\n    <div class="esoc-extended-info-link-holder binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      <div class=" esoc-user-extended-label esoc-user-profile-link-label esoc-user-label">'+e.escapeExpression((l=null!=(l=a(i,"label")||(null!=t?a(t,"label"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":24,"column":90},"end":{"line":24,"column":99}}}):l))+'\r\n      </div>\r\n      <div\r\n          class="esoc-user-extended-info esoc-user-extended-view-mode esoc-user-default-content-mode">\r\n        <div class="esoc-user-extendedinfo-default-content">\r\n          <a href="javascript:void(0);"\r\n             class="esoc-user-profile-link-content esoc-user-default-content '+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"isEditable"):t,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":30,"column":77},"end":{"line":30,"column":123}}}))?s:"")+'">'+e.escapeExpression((l=null!=(l=a(i,"defaultMessage")||(null!=t?a(t,"defaultMessage"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"defaultMessage","hash":{},"loc":{"start":{"line":30,"column":125},"end":{"line":30,"column":143}}}):l))+'</a>\r\n        </div>\r\n        <div class="esoc-user-extendedinfo-edit-icon">\r\n          <a class="esoc-user-extended-edit" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"edit"):s,t))+'"></a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n'},"6":function(e,t,i,n,o){return" esoc-cursor-pointer "},"8":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="esoc-extended-info-link-holder binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <div\r\n        class="esoc-user-hide-element esoc-user-extended-edit-mode esoc-user-extended-edit-content">\r\n      <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-user-edit-textbox">\r\n        <input type="text" class="esoc-user-extended-edit-text esoc-user-extended-edit-input"\r\n               value="'+e.escapeExpression((l=null!=(l=a(i,"content")||(null!=t?a(t,"content"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"content","hash":{},"loc":{"start":{"line":45,"column":22},"end":{"line":45,"column":33}}}):l))+'" placeholder="'+e.escapeExpression((l=null!=(l=a(i,"defaultMessage")||(null!=t?a(t,"defaultMessage"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"defaultMessage","hash":{},"loc":{"start":{"line":45,"column":48},"end":{"line":45,"column":66}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=a(i,"defaultMessage")||(null!=t?a(t,"defaultMessage"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"defaultMessage","hash":{},"loc":{"start":{"line":45,"column":80},"end":{"line":45,"column":98}}}):l))+'"/>\r\n      </div>\r\n      <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-user-text-edit-buttons">\r\n        <button class="esoc-user-update binf-btn binf-btn-primary"\r\n                title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"update"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"update"):s,t))+'</button>\r\n        <button class="esoc-user-cancel binf-btn binf-btn-default"\r\n                title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"cancel"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"cancel"):s,t))+"</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"content"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":38,"column":7}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isEditable"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":39,"column":0},"end":{"line":55,"column":7}}}))?s:"")}});return i.registerPartial("esoc_widgets_userwidget_impl_extendedinfolinkfield",n),n}),csui.define("esoc/widgets/userwidget/view/extendedinfolinkfield.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","esoc/widgets/userwidget/view/extendedinfo.view","esoc/widgets/userwidget/util","hbs!esoc/widgets/userwidget/impl/extendedinfolinkfield","i18n!esoc/widgets/userwidget/nls/lang","csui/lib/perfect-scrollbar"],function(e,t,i,n,o,s,l,a){var r=null;return o.extend({"tagName":"div","className":"esoc-user-extended-info-link binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12","template":l,"util":s,"initialize":function(e){this.extendedInfo=e,r=this},"events":{"click .esoc-user-update":"updateExtendedInfoField","click .esoc-user-cancel":"cancelUpdateExtendedInfoField","click .esoc-user-extended-edit, .esoc-user-default-content":"onEditClick","mouseenter .esoc-user-links, .esoc-user-default-content-mode":"showEditLinkForText","mouseleave .esoc-user-links, .esoc-user-default-content-mode":"hideEditLinkForText","focusin .esoc-user-links":"showEditLinkForText","focusout .esoc-user-links":"hideEditLinkForText","keypress .esoc-user-extended-edit-text":"submitOnEnter"},"constructor":function(e){e=e||{},n.ItemView.prototype.constructor.call(this,e)},"onEditClick":function(e){if(this.model.attributes.isEditable){var t=this.model.attributes.content;this.$el.find(".esoc-user-extended-view-mode").hide(),this.$el.find(".esoc-user-extended-edit-mode").show(),this.$el.find(".esoc-user-extended-edit-input").trigger("focus"),this.$el.find(".esoc-user-label").removeClass("esoc-cursor-pointer"),this.$el.find(".esoc-user-extended-edit").removeClass("esoc-edit-icon"),void 0!==t&&0!==t.length||this.$el.find(".esoc-user-extended-edit-input").val(this.util.commonUtil.globalConstants.HTTP_LINK)}},"updateExtendedInfoField":function(t){var i=new FormData,n=this.$el.find(".esoc-user-extended-edit-input").val(),o=/(^(https?):\/\/)/i,s=this.options.connector;n.length>0&&null===n.match(o)&&(n=this.util.commonUtil.globalConstants.HTTP_LINK+n,this.$el.find(".esoc-user-extended-edit-input").val(n)),this.$el.find(".esoc-user-extended-edit-mode").addClass("esoc-extendedinfo-update-mask"),this.$el.find(".esoc-user-extended-edit-input").prop("disabled",!0),i.append(this.util.commonUtil.globalConstants.ACTION,this.util.commonUtil.globalConstants.UPDATE_EXTENDED_INFO),i.append(this.model.attributes.formField,n);var l={"itemview":this,"url":this.util.commonUtil.getV2Url(s.getConnectionUrl())+this.util.commonUtil.REST_URLS.pulseRestUrl+this.model.attributes.userid,"type":"POST","data":i,"requestType":"updateExtendedLink","targetElement":e(t.target),"connector":s};this.util.updateAjaxCall(l)},"onShow":function(){this.addEllipsisOnFocus(),this.trigger("view:shown")},"cancelUpdateExtendedInfoField":function(e){this.$el.find(".esoc-user-extended-edit-mode").hide(),this.$el.find(".esoc-user-extended-edit-input").val(this.model.attributes.content),this.$el.find(".esoc-user-extended-view-mode").show(),this.model.attributes.content?this.$el.find(".esoc-user-messages a").trigger("focus"):this.$el.find(".esoc-user-default-content").trigger("focus")},"addEllipsisOnFocus":function(){var t=this;this.$el.find(".esoc-user-links .esoc-user-messages").each(function(i){e(this).innerWidth()<e(this)[0].scrollWidth&&t.$el.find(".esoc-user-messages a").addClass("esoc-user-links-ellipsis-onfocus")})}})}),csui.define("hbs!esoc/widgets/userwidget/impl/general",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"chatSettings"):t)?l(s,"presenceEnabled"):s,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":10},"end":{"line":9,"column":17}}}))?s:"")+"        "},"2":function(e,t,i,n,o){return'            <div id="esoc-user-profile-presence-indicator" class="esoc-user-profile-presence-indicator binf-col-lg-12 binf-col-md-12 binf-col-sm-12\r\n    binf-col-xs-12"></div>\r\n'},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-user-title binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":12,"column":97},"end":{"line":12,"column":106}}}):s))+"</div>\r\n"},"6":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div\r\n            class="esoc-department-name binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">'+e.escapeExpression((s=null!=(s=l(i,"department_name")||(null!=t?l(t,"department_name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"department_name","hash":{},"loc":{"start":{"line":16,"column":101},"end":{"line":16,"column":120}}}):s))+"</div>\r\n"},"8":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div\r\n            class="esoc-user-location binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">'+e.escapeExpression((s=null!=(s=l(i,"office_location")||(null!=t?l(t,"office_location"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"office_location","hash":{},"loc":{"start":{"line":20,"column":99},"end":{"line":20,"column":118}}}):s))+"</div>\r\n"},"10":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-user-email esoc-user-links binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n          <a href="mailto:'+e.escapeExpression((s=null!=(s=l(i,"business_email")||(null!=t?l(t,"business_email"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"business_email","hash":{},"loc":{"start":{"line":24,"column":26},"end":{"line":24,"column":44}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"business_email")||(null!=t?l(t,"business_email"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"business_email","hash":{},"loc":{"start":{"line":24,"column":46},"end":{"line":24,"column":64}}}):s))+"</a>\r\n        </div>\r\n"},"12":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-user-business-phone binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n          <span\r\n              class="esoc-user-messages-business-phone esoc-user-general-info-label">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"phone"):s,t))+' </span>\r\n          <span class="esoc-user-general-info-content">'+e.escapeExpression((l=null!=(l=a(i,"business_phone")||(null!=t?a(t,"business_phone"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"business_phone","hash":{},"loc":{"start":{"line":31,"column":55},"end":{"line":31,"column":73}}}):l))+"</span>\r\n        </div>\r\n"},"14":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-user-business-fax binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n          <span\r\n              class="esoc-user-messages-business-fax esoc-user-general-info-label">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"fax"):s,t))+' </span>\r\n          <span class="esoc-user-general-info-content">'+e.escapeExpression((l=null!=(l=a(i,"business_fax")||(null!=t?a(t,"business_fax"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"business_fax","hash":{},"loc":{"start":{"line":38,"column":55},"end":{"line":38,"column":71}}}):l))+"</span>\r\n        </div>\r\n"},"16":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="esoc-user-time-zone binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n          <span\r\n              class="esoc-user-messages-timezone esoc-user-general-info-label">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"timezone"):s,t))+' </span>\r\n          <span class="esoc-user-general-info-content">'+e.escapeExpression((l=null!=(l=a(i,"time_zone")||(null!=t?a(t,"time_zone"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"time_zone","hash":{},"loc":{"start":{"line":46,"column":55},"end":{"line":46,"column":68}}}):l))+"</span>\r\n        </div>\r\n"},"18":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showFacebookLink"):s,{"name":"if","hash":{},"fn":e.program(19,o,0),"inverse":e.noop,"loc":{"start":{"line":52,"column":6},"end":{"line":54,"column":13}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showLinkedinLink"):s,{"name":"if","hash":{},"fn":e.program(21,o,0),"inverse":e.noop,"loc":{"start":{"line":55,"column":6},"end":{"line":57,"column":13}}
}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showTwitterLink"):s,{"name":"if","hash":{},"fn":e.program(23,o,0),"inverse":e.noop,"loc":{"start":{"line":58,"column":6},"end":{"line":60,"column":13}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showReportsTo"):s,{"name":"if","hash":{},"fn":e.program(25,o,0),"inverse":e.noop,"loc":{"start":{"line":61,"column":6},"end":{"line":63,"column":13}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showLangSpoken"):s,{"name":"if","hash":{},"fn":e.program(27,o,0),"inverse":e.noop,"loc":{"start":{"line":64,"column":6},"end":{"line":66,"column":13}}}))?s:"")},"19":function(e,t,i,n,o){return'        <div class="esoc-user-facebook-link"></div>\r\n'},"21":function(e,t,i,n,o){return'        <div class="esoc-user-linked-link"></div>\r\n'},"23":function(e,t,i,n,o){return'        <div class="esoc-user-twitter-link"></div>\r\n'},"25":function(e,t,i,n,o){return'        <div class="esoc-user-reports-to"></div>\r\n'},"27":function(e,t,i,n,o){return'        <div class="esoc-user-languages-spoken"></div>\r\n'},"29":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"statusPost"):s,{"name":"if","hash":{},"fn":e.program(30,o,0),"inverse":e.noop,"loc":{"start":{"line":71,"column":6},"end":{"line":73,"column":13}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showAboutMe"):s,{"name":"if","hash":{},"fn":e.program(32,o,0),"inverse":e.noop,"loc":{"start":{"line":74,"column":6},"end":{"line":76,"column":13}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showJobDesc"):s,{"name":"if","hash":{},"fn":e.program(34,o,0),"inverse":e.noop,"loc":{"start":{"line":77,"column":6},"end":{"line":79,"column":13}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showExpertise"):s,{"name":"if","hash":{},"fn":e.program(36,o,0),"inverse":e.noop,"loc":{"start":{"line":80,"column":6},"end":{"line":82,"column":13}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showPastPositions"):s,{"name":"if","hash":{},"fn":e.program(38,o,0),"inverse":e.noop,"loc":{"start":{"line":83,"column":6},"end":{"line":85,"column":13}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showDegrees"):s,{"name":"if","hash":{},"fn":e.program(40,o,0),"inverse":e.noop,"loc":{"start":{"line":86,"column":6},"end":{"line":88,"column":13}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"showAwards"):s,{"name":"if","hash":{},"fn":e.program(42,o,0),"inverse":e.noop,"loc":{"start":{"line":89,"column":6},"end":{"line":91,"column":13}}}))?s:"")},"30":function(e,t,i,n,o){return'        <div class="esoc-user-status-post"></div>\r\n'},"32":function(e,t,i,n,o){return'        <div class="esoc-user-about-me"></div>\r\n'},"34":function(e,t,i,n,o){return'        <div class="esoc-user-job-description"></div>\r\n'},"36":function(e,t,i,n,o){return'        <div class="esoc-user-expertise"></div>\r\n'},"38":function(e,t,i,n,o){return'        <div class="esoc-user-past-positions"></div>\r\n'},"40":function(e,t,i,n,o){return'        <div class="esoc-user-degree"></div>\r\n'},"42":function(e,t,i,n,o){return'        <div class="esoc-user-awards"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="esoc-general-tab-content binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n  <div class="esoc-general-tab-sub-content binf-col-lg-6 binf-col-md-6 binf-col-sm-12 binf-col-xs-12">\r\n    <div class="esoc-user-general-details binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      <div class="esoc-user-name binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"chatSettings"):t)?a(s,"chatEnabled"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":8},"end":{"line":10,"column":15}}}))?s:"")+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":10,"column":15},"end":{"line":10,"column":31}}}):l))+"</div>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"title"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":11,"column":6},"end":{"line":13,"column":13}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"department_name"):t,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":14,"column":6},"end":{"line":17,"column":13}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"office_location"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":18,"column":6},"end":{"line":21,"column":13}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"business_email"):t,{"name":"if","hash":{},"fn":e.program(10,o,0),"inverse":e.noop,"loc":{"start":{"line":22,"column":6},"end":{"line":26,"column":13}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"business_phone"):t,{"name":"if","hash":{},"fn":e.program(12,o,0),"inverse":e.noop,"loc":{"start":{"line":27,"column":6},"end":{"line":33,"column":13}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"business_fax"):t,{"name":"if","hash":{},"fn":e.program(14,o,0),"inverse":e.noop,"loc":{"start":{"line":34,"column":6},"end":{"line":40,"column":13}}}))?s:"")+"\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"messages"):t)?a(s,"time_zone"):s,{"name":"if","hash":{},"fn":e.program(16,o,0),"inverse":e.noop,"loc":{"start":{"line":42,"column":6},"end":{"line":48,"column":13}}}))?s:"")+"    </div>\r\n\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"errorMessage"):t,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(18,o,0),"loc":{"start":{"line":51,"column":4},"end":{"line":67,"column":11}}}))?s:"")+'  </div>\r\n  <div class="esoc-general-tab-sub-content binf-col-lg-6 binf-col-md-6 binf-col-sm-12 binf-col-xs-12">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"errorMessage"):t,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(29,o,0),"loc":{"start":{"line":70,"column":4},"end":{"line":92,"column":11}}}))?s:"")+"  </div>\r\n</div>\r\n"}});return i.registerPartial("esoc_widgets_userwidget_impl_general",n),n}),csui.define("esoc/widgets/userwidget/view/general.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/handlebars","csui/lib/marionette","csui/utils/contexts/factories/connector","esoc/widgets/userwidget/model/extended.model","esoc/widgets/userwidget/util","esoc/widgets/userwidget/view/extendedinfotextfield.view","esoc/widgets/userwidget/view/extendedinfolinkfield.view","esoc/widgets/userwidget/chat/view/presence.view","esoc/widgets/userwidget/chat/chatfactory","hbs!esoc/widgets/userwidget/impl/general","i18n!esoc/widgets/userwidget/nls/lang","csui/controls/tile/behaviors/perfect.scrolling.behavior"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h){return o.ItemView.extend({"tagName":"div","className":"esoc-general-tab binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12","template":p,"util":a,"templateHelpers":function(){var e=this.options.model.attributes.extendedInfo,t=!this.options.model.attributes.otherUser&&!!e&&e.isEditable;return{"messages":{"phone":m.phone,"fax":m.fax,"timezone":m.timezone,"showFacebookLink":t||!!e&&!!e.facebookLink,"showLinkedinLink":t||!!e&&!!e.linkedinLink,"showTwitterLink":t||!!e&&!!e.twitterLink,"showReportsTo":t||!!e&&!!e.reportsTo,"showLangSpoken":t||!!e&&!!e.languagesSpoken,"showAboutMe":t||!!e&&!!e.bio,"statusPost":!1,"showJobDesc":t||!!e&&!!e.jobDescription,"showExpertise":t||!!e&&!!e.expertise,"showPastPositions":t||!!e&&!!e.pastPositions,"showDegrees":t||!!e&&!!e.degree,"showAwards":t||!!e&&!!e.awardsHonours,"time_zone":!!this.options.model.attributes.time_zone&&-1!==this.options.model.attributes.time_zone}}},"behaviors":{"PerfectScrolling":{"behaviorClass":h,"suppressScrollX":!0,"contentParent":".esoc-general-tab-content","scrollYMarginOffset":15}},"initialize":function(e){var n=[];if(this.options=e,this.options.connector||(this.options.connector=this.options.context.getObject(s)),!this.options.model.attributes.isError){var o=this,l=i.Model.extend({}),a=this.templateHelpers().messages,d=this.model.attributes.extendedInfo,u={"userid":this.model.attributes.userid,"connector":this.options.connector,"isEditable":!this.model.attributes.otherUser&&!!d&&d.isEditable};a.showFacebookLink&&(this.facebookLinkInfo=new l(t.extend({"label":m.facebookLink,"content":this.util.getValidLink(d.facebookLink),"formField":"facebookLink","defaultMessage":m.defaultfacebookMessage,"linkClass":"esoc-user-facebook-link"},u)),this.facebookLinkView=new c({"model":this.facebookLinkInfo,"tabIndex":this.options.tabIndex,"connector":this.options.connector}),n.push(this.facebookLinkView)),a.showLinkedinLink&&(this.linkedLinkInfo=new l(t.extend({"label":m.linkedinLink,"content":this.util.getValidLink(d.linkedinLink),"formField":"linkedinLink","defaultMessage":m.defaultLinkedInMessage,"linkClass":"esoc-user-linkedin-link"},u)),this.linkedInLinkView=new c({"model":this.linkedLinkInfo,"tabIndex":this.options.tabIndex,"connector":this.options.connector}),n.push(this.linkedInLinkView)),a.showTwitterLink&&(this.twitterLinkInfo=new l(t.extend({"label":m.twitterLink,"content":this.util.getValidLink(d.twitterLink),"formField":"twitterLink","defaultMessage":m.defaulttwitterLinkMessage,"linkClass":"esoc-user-twitter-link"},u)),this.twitterLinkView=new c({"model":this.twitterLinkInfo,"tabIndex":this.options.tabIndex,"connector":this.options.connector}),n.push(this.twitterLinkView)),a.showReportsTo&&(this.reportsInfo=new l(t.extend({"label":m.manager,"content":d.reportsToID,"reportsTo":d.reportsTo&&d.reportsTo.trim()?d.reportsTo:"","formField":"reportsTo","defaultMessage":m.defaultManagerMessage,"userInputField":!0,"extendedLabelClass":"esoc-user-extended-label"},u)),this.reportsView=new r({"model":this.reportsInfo,"context":this.options.context,"parentView":o,"tabIndex":this.options.tabIndex}),n.push(this.reportsView)),a.showLangSpoken&&(this.langSpokenInfo=new l(t.extend({"label":m.languagesSpoken,"content":d.languagesSpoken&&d.languagesSpoken.trim()?d.languagesSpoken:"","formField":"languagesSpoken","defaultMessage":m.defaultLanguagesMessage,"extendedLabelClass":"esoc-user-extended-label"},u)),this.langSpokenView=new r({"model":this.langSpokenInfo,"parentView":o,"tabIndex":this.options.tabIndex,"connector":this.options.connector}),n.push(this.langSpokenView)),a.statusPost&&(this.statusPostInfo=new l(t.extend({"label":m.statusPost,"content":d.status&&d.status.trim()?d.status:"","formField":"status","defaultMessage":m.defaultStatusPost},u)),this.statusPostView=new r({"model":this.statusPostInfo,"parentView":o,"tabIndex":this.options.tabIndex,"connector":this.options.connector}),n.push(this.statusPostView)),a.showAboutMe&&(this.aboutMeInfo=new l(t.extend({"label":m.aboutMe,"content":d.bio&&d.bio.trim()?d.bio:"","formField":"bio","defaultMessage":m.defaultAboutMeMessage},u)),this.aboutMeView=new r({"model":this.aboutMeInfo,"parentView":o,"tabIndex":this.options.tabIndex,"connector":this.options.connector}),n.push(this.aboutMeView)),a.showJobDesc&&(this.jobDescriptionInfo=new l(t.extend({"label":m.jobDescription,"content":d.jobDescription&&d.jobDescription.trim()?d.jobDescription:"","formField":"jobDescription","defaultMessage":m.defaultJobDesc},u)),this.jobDescriptionView=new r({"model":this.jobDescriptionInfo,"parentView":o,"tabIndex":this.options.tabIndex,"connector":this.options.connector}),n.push(this.jobDescriptionView)),a.showExpertise&&(this.expertiseInfo=new l(t.extend({"label":m.expertiseAreas,"content":d.expertise&&d.expertise.trim()?d.expertise:"","formField":"expertise","defaultMessage":m.defaultExpertise},u)),this.expertiseView=new r({"model":this.expertiseInfo,"parentView":o,"tabIndex":this.options.tabIndex,"connector":this.options.connector}),n.push(this.expertiseView)),a.showPastPositions&&(this.pastPositionsInfo=new l(t.extend({"label":m.pastPositions,"content":d.pastPositions&&d.pastPositions.trim()?d.pastPositions:"","formField":"pastPositions","defaultMessage":m.defaultPastPositions},u)),this.pastPositionsView=new r({"model":this.pastPositionsInfo,"parentView":o,"tabIndex":this.options.tabIndex,"connector":this.options.connector}),n.push(this.pastPositionsView)),a.showDegrees&&(this.degreeInfo=new l(t.extend({"label":m.degrees,"content":d.degree&&d.degree.trim()?d.degree:"","formField":"degree","defaultMessage":m.defaultDegreeMessage},u)),this.degreeView=new r({"model":this.degreeInfo,"parentView":o,"tabIndex":this.options.tabIndex,"connector":this.options.connector}),n.push(this.degreeView)),a.showAwards&&(this.awardsInfo=new l(t.extend({"label":m.awards,"content":d.awardsHonours&&d.awardsHonours.trim()?d.awardsHonours:"","formField":"awardsHonours","defaultMessage":m.defaultAwardMessage},u)),this.awardsView=new r({"model":this.awardsInfo,"parentView":o,"tabIndex":this.options.tabIndex,"connector":this.options.connector}),n.push(this.awardsView)),this.childViews=n}},"constructor":function(e){e=e||{};var i=t.extend({},e);i.model=new l(i),i.model.fetch({"success":i.model.fetchSuccess,"error":i.model.fetchError,"async":!1}),o.ItemView.prototype.constructor.call(this,i)},"errorHandle":function(e,t){},"onShow":function(i){if(this.model.attributes.chatSettings&&this.model.attributes.chatSettings.chatEnabled&&this.model.attributes.chatSettings.presenceEnabled){var n={"id":this.model.attributes.id,"context":this.options.context,"username":this.model.attributes.name,"subscribeEvent":!0},s=new o.Region({"el":e("#esoc-user-profile-presence-indicator")}),l=new d(n);s.show(l)}var a=this.templateHelpers().messages,r=this;if(!this.options.model.attributes.isError){var c=0;if(t.each(this.childViews,function(e){r.listenToOnce(e,"view:shown",function(){++c===r.childViews.length&&r.trigger("view:shown")}),r.listenTo(e,"change:content",function(t){r.trigger("view:shown","contentChanged"),"userInputChanged"===t&&e.$el.find("a.esoc-user-container").trigger("focus")})}),a.showFacebookLink){new o.Region({"el":".esoc-user-facebook-link"}).show(this.facebookLinkView)}if(a.showLinkedinLink){new o.Region({"el":".esoc-user-linked-link"}).show(this.linkedInLinkView)}if(a.showTwitterLink){new o.Region({"el":".esoc-user-twitter-link"}).show(this.twitterLinkView)}if(a.showReportsTo){new o.Region({"el":".esoc-user-reports-to"}).show(this.reportsView)}if(a.showLangSpoken){new o.Region({"el":".esoc-user-languages-spoken"}).show(this.langSpokenView)}if(a.statusPost){new o.Region({"el":".esoc-user-status-post"}).show(this.statusPostView)}if(a.showAboutMe){new o.Region({"el":".esoc-user-about-me"}).show(this.aboutMeView)}if(a.showJobDesc){new o.Region({"el":".esoc-user-job-description"}).show(this.jobDescriptionView)}if(a.showExpertise){new o.Region({"el":".esoc-user-expertise"}).show(this.expertiseView)}if(a.showPastPositions){new o.Region({"el":".esoc-user-past-positions"}).show(this.pastPositionsView)}if(a.showDegrees){new o.Region({"el":".esoc-user-degree"}).show(this.degreeView)}if(a.showAwards){new o.Region({"el":".esoc-user-awards"}).show(this.awardsView)}}this.$el.find(".esoc-user-links.esoc-user-email").each(function(t){e(this).innerWidth()<e(this)[0].scrollWidth&&r.$el.find(".esoc-user-email a").addClass("esoc-user-links-ellipsis-onfocus")})}})}),csui.define("hbs!esoc/widgets/userwidget/impl/personal",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-col-lg-12">\r\n    <span class="binf-col-lg-1 binf-col-md-1 binf-col-sm-1 binf-col-xs-1">Location  : </span>\r\n    <span class="binf-col-lg-2 binf-col-md-2 binf-col-sm-2 binf-col-xs-2">'+e.escapeExpression((s=null!=(s=l(i,"office_location")||(null!=t?l(t,"office_location"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"office_location","hash":{},"loc":{"start":{"line":3,"column":74},"end":{"line":3,"column":93}}}):s))+" </span>\r\n</div>\r\n"}});return i.registerPartial("esoc_widgets_userwidget_impl_personal",n),n}),csui.define("esoc/widgets/userwidget/view/personal.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","hbs!esoc/widgets/userwidget/impl/personal","i18n!esoc/widgets/userwidget/nls/lang"],function(e,t,i,n,o,s){var l=null;return n.ItemView.extend({"tagName":"div","className":"esoc-personal-tab","template":o,"initialize":function(e){this.options=e,l=this},"constructor":function(e){e=e||{},n.ItemView.prototype.constructor.call(this,e)},"errorHandle":function(e,t){}})}),csui.define("esoc/widgets/userwidget/view/miniprofilecard.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/utils/url","csui/utils/user.avatar.color","esoc/widgets/userwidget/view/miniprofile.view","esoc/widgets/utils/chat/chat.view","esoc/widgets/userwidget/util","esoc/widgets/userwidget/chat/chatutil","i18n!esoc/widgets/userwidget/nls/lang","css!esoc/widgets/userwidget/impl/userwidget.css"],function(e,t,i,n,o,s,l,a,r,c,d){return l.extend({"util":r,"className":"esoc-miniprofilecard-container binf-col-lg-5 binf-col-md-5 binf-col-sm-5 binf-col-xs-5","initialize":function(e){this.options=e,this.followUnfollowActionUrl=o.combine(this.util.commonUtil.getV2Url(this.model.collection.connector.getConnectionUrl()),this.util.commonUtil.REST_URLS.pulseRestUrl,this.model.attributes.id)},"constructor":function(e){e=e||{},n.ItemView.prototype.constructor.call(this,e),this.model.on("presence:update",this.onPresenceUpdate,this)},"events":{"click .esoc-viewminiprofile-action, .esoc-mini-profile-avatar, .esoc-mini-profile-user-name":"showUserProfileDialog","click .esoc-mini-profile-following-action":"followUnfollowAction","mouseenter .esoc-miniprofile-view":"showActions","mouseleave .esoc-miniprofile-view":"hideActions"},"showActions":function(){this.$el.find(".esoc-mini-profile-userinfo").addClass("esoc-mini-profile-userinfo-with-actions"),this.$el.find(".esoc-mini-profile-actions").show()},"hideActions":function(){this.$el.find(".esoc-mini-profile-actions").hide(),this.$el.find(".esoc-mini-profile-userinfo").removeClass("esoc-mini-profile-userinfo-with-actions"),this.$el.find(".esoc-mini-profile-actions").hasClass("esoc-miniprofile-has-tabindex")&&(this.options.model.attributes.business_email?this.$el.find(".esoc-mini-profile-userinfo").find(".esoc-mini-profile-user-email").trigger("focus"):this.$el.find(".esoc-mini-profile-userinfo").find(".esoc-mini-profile-user-name").trigger("focus"),this.$el.find(".esoc-mini-profile-actions").removeClass("esoc-miniprofile-has-tabindex"))},"onRender":function(t){var i=this;if(i.options.userbackgroundcolor=s.getUserAvatarColor(i.model.attributes),i.model.attributes.chatSettings&&i.model.attributes.chatSettings.chatEnabled&&i.model.attributes.chatSettings.presenceEnabled&&i.$el.find("#esoc-mini-profile-presence-indicator").addClass("esoc-user-profile-default-presence").attr("title",d.presenceUnknownTooltipText),i.model.attributes.otherUser&&i.model.attributes.chatSettings&&i.model.attributes.chatSettings.chatEnabled){i.$el.find(".esoc-chat-action-enabled-"+i.model.attributes.id).removeClass("binf-hidden");var o=new n.Region({"el":i.$el.find(".esoc-miniprofile-chat-action")}),l={"context":i.options.parentViewOptions.context,"tguser":i.model.get("screen_name")||i.model.get("name"),"domain":i.options.model.get("chatSettings")&&i.options.model.get("chatSettings").chatDomain},r=new a(l);o.show(r)}else i.$el.find(".esoc-chat-action-disabled-"+i.model.attributes.id).removeClass("binf-hidden");i.$el.find(".esoc-mini-profile-user").find(".esoc-mini-profile-pic").on("keyup",function(t){9===(t.keyCode||t.which)&&e(".esoc-mini-profile-actions").hasClass("esoc-miniprofile-has-tabindex")&&e(".esoc-mini-profile-actions").removeClass("esoc-miniprofile-has-tabindex")}),i.$el.find(".esoc-mini-profile-actions").find(".esoc-mini-profile-following-action, .esoc-viewminiprofile-action").on("keyup",function(e){9===(e.keyCode||e.which)&&i.$el.find(".esoc-mini-profile-actions").addClass("esoc-miniprofile-has-tabindex")})},"onShow":function(){this.setProfilePic()},"setProfilePic":function(){var e=this.options.model.attributes.id,t={"context":this.options.parentViewOptions.context,"userid":e,"photoElement":this.$el.find(".esoc-userprofile-img-"+r.escapeSelector(e)),"defaultPhotElement":this.$el.find(".esoc-user-default-avatar-"+r.escapeSelector(e)),"userbackgroundcolor":this.options.userbackgroundcolor};this.util.commonUtil.setProfilePic(t),this.util.commonUtil.setUserColor(t)},"showUserProfileDialog":function(e){this.trigger("show.user.dialog")},"followUnfollowAction":function(t){var i=new FormData,n=t||window.event,o=this.model.attributes.following?r.commonUtil.globalConstants.UNFOLLOW:r.commonUtil.globalConstants.FOLLOW;i.append(r.commonUtil.globalConstants.ACTION,o);var s={"itemview":this,"url":this.followUnfollowActionUrl,"type":"POST","data":i,"requestType":"relation","targetElement":e(n.target)};this.util.updateAjaxCall(s)},"onPresenceUpdate":function(e){c.setIconColor(e,this.$el.find("#esoc-mini-profile-presence-indicator"))}})}),csui.define("esoc/widgets/userwidget/view/miniprofilecollection.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/utils/contexts/factories/connector","esoc/widgets/userwidget/view/miniprofilecard.view","i18n!esoc/widgets/userwidget/nls/lang","esoc/widgets/userwidget/util","csui/controls/tile/behaviors/perfect.scrolling.behavior"],function(e,t,i,n,o,s,l,a,r){var c=null;return n.CollectionView.extend({"tagName":"div","className":"binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 esoc-miniprofile-collection","childView":s,"childViewOptions":function(){return{"context":this.options.context,"parentViewOptions":this.options}},"initialize":function(t){this.options=t,this.options.connector||(this.options.connector=this.options.context.getObject(o)),c=this,this.listenTo(this,"childview:show.user.dialog",function(e){c.trigger("collectionview.show.user.dialog",e)}),this.listenTo(a.commonUtil.globalConstants.event_bus,"changefollowingstatus",function(t,i){if(e("#esoc-user-profile-following-tab").hasClass("binf-active")&&!e("#esoc-social-comment-create-container").is(":visible")||e("#esoc-user-profile-activity-tab").hasClass("binf-active")&&!e("#esoc-social-comment-create-container").is(":visible")||e("#esoc-user-profile-followers-tab").hasClass("binf-active")&&!e("#esoc-social-comment-create-container").is(":visible")){var n,o=this.options.collection.get(t.model.attributes.id);if(o){var s=o.attributes;s.relation===a.commonUtil.globalConstants.FRIENDS?s.otherUserProfile?(n=t.model.attributes.following,s.following=n,n?(s.actions.following=l.unfollow,s.actions.followingClass="esoc-mini-profile-unfollow-icon"):(s.actions.following=l.follow,s.actions.followingClass="esoc-mini-profile-follow-icon"),this.render()):(this.options.collection.remove(t.model.attributes.id),this.options.collection.trigger("remove.relation",t,i)):s.relation===a.commonUtil.globalConstants.FOLLOWERS&&(n=t.model.attributes.following,s.following=n,s.following=n,n?(s.actions.following=l.unfollow,s.actions.followingClass="esoc-mini-profile-unfollow-icon"):(s.actions.following=l.follow,s.actions.followingClass="esoc-mini-profile-follow-icon"),this.render(),s.otherUserProfile||a.changeRelationsCounts(i.data.user))}else if(this.options.relation===a.commonUtil.globalConstants.FRIENDS&&!this.options.otherUserProfile){var r={"itemview":c,"url":c.options.connector.connection.url+a.commonUtil.REST_URLS.chatHistoryUrl+t.model.attributes.id,"type":"GET","relation":this.options.relation,"otherUserProfile":this.options.otherUserProfile,"requestType":"membersAPI","context":this.options.context};a.updateAjaxCall(r)}}}),this.listenTo(a.commonUtil.globalConstants.event_bus,"updatefollowerstab",function(t,i){if((e("#esoc-user-profile-following-tab").hasClass("binf-active")&&!e("#esoc-social-comment-create-container").is(":visible")||e("#esoc-user-profile-activity-tab").hasClass("binf-active")&&!e("#esoc-social-comment-create-container").is(":visible")||e("#esoc-user-profile-followers-tab").hasClass("binf-active")&&!e("#esoc-social-comment-create-container").is(":visible"))&&this.options.relation===a.commonUtil.globalConstants.FOLLOWERS)if(this.options.collection.get(this.options.loggedUserId))this.options.collection.remove(this.options.loggedUserId),this.options.collection.trigger("remove.relation",t,i);else{var n={"itemview":c,"url":c.options.connector.connection.url+a.commonUtil.REST_URLS.chatHistoryUrl+this.options.loggedUserId,"type":"GET","requestType":"membersAPI","context":this.options.context};a.updateAjaxCall(n)}})},"onRender":function(t){var i;this.$el.on("scroll",function(t,n){var o=e(this),s=o.height(),l=o[0].scrollHeight,a=o.scrollTop();a+17>=l-s&&(!i||i&&a-parseInt(i,10)>50)&&(i=a,e(this).find(".esoc-social-users-load-more:last").trigger("click"))})},"behaviors":{"PerfectScrolling":{"behaviorClass":r,"suppressScrollX":!0,"scrollYMarginOffset":15}},"constructor":function(){n.CollectionView.prototype.constructor.apply(this,arguments)},"errorHandle":function(e,t){},"events":{"click .esoc-social-users-load-more":"loadMoreItems"},"loadMoreItems":function(e){this.collection.defaults.params.cursor>0&&this.collection.fetch({"remove":!1,"params":{"cursor":this.collection.defaults.params.cursor},"success":this.collection.fetchSuccess})}})}),csui.define("esoc/widgets/userwidget/model/miniprofilecard.model",["csui/lib/backbone","esoc/widgets/userwidget/util"],function(e,t){return e.Model.extend({"defaults":{"userid":"","display_name":"","business_email":"","title":"","className":"esoc-miniprofile-view","otherUser":"","following":"","otherUserProfile":""},"constructor":function(t){e.Model.prototype.constructor.apply(this,arguments)},"parse":function(e,t){return e.user.business_email=e.user.email,e.user.id=parseInt(e.user.id,10),e.user.display_name=e.user.name,e.user}})}),csui.define("esoc/widgets/userwidget/model/relations.model",["csui/lib/jquery","csui/lib/backbone","esoc/widgets/userwidget/model/miniprofilecard.model","esoc/widgets/userwidget/util","csui/utils/url","csui/utils/contexts/factories/user","esoc/widgets/userwidget/chat/chatfactory","esoc/widgets/userwidget/chat/skype/skypeucwa.attribute.model","i18n!esoc/widgets/userwidget/nls/lang"],function(e,t,i,n,o,s,l,a,r){return t.Collection.extend({"getRelationsRESTUrl":"","util":n,"defaults":{"params":{"cursor":-1},"relationsRESTUrl":"","loggedUserId":"","relation":"","otherUserProfile":"","extendedmodel":""},"model":i,"constructor":function(e){var i=this.util.commonUtil.updateQueryStringValues(this.util.commonUtil.updateQueryStringValues(o.combine(this.util.commonUtil.REST_URLS.pulseRestUrl,e.userid),this.util.commonUtil.globalConstants.COUNT,this.util.commonUtil.globalConstants.PULSE_RESOURCE_COUNT),this.util.commonUtil.globalConstants.FIELDS,e.relation),n=this.util.commonUtil.globalConstants.FIELDS+"="+this.util.commonUtil.globalConstants.CHAT_SEETING;i=o.appendQuery(i,n),this.getRelationsRESTUrl=o.combine(this.util.commonUtil.getV2Url(e.connector.getConnectionUrl()),i),this.relationsRESTUrl=this.getRelationsRESTUrl,this.defaults.loggedUserId=e.context.getModel(s)||e.loggedUserId,this.defaults.relation=e.relation,this.defaults.extendedmodel=e.userwidgetmodel,this.defaults.otherUserProfile=e.userwidgetmodel.attributes.otherUser,e&&e.connector&&e.connector.assignTo(this),t.Collection.prototype.constructor.apply(this,arguments)},"url":function(){return this.getRelationsRESTUrl},"parse":function(e){var t=e.results;this.defaults.extendedmodel.attributes.followers_count=t.followers_count,this.defaults.extendedmodel.attributes.friends_count=t.friends_count,this.defaults.extendedmodel.attributes.following=t.following;var i=t[this.defaults.relation];this.defaults.params.cursor=i.next_cursor;for(var n in i.users){var o=i.users[n].user,s=parseInt(o.id,10)===parseInt(this.defaults.loggedUserId,10);t.chatSettings&&(o.chatSettings=t.chatSettings);var l={"relation":this.defaults.relation,"selfUser":s,"otherUserProfile":this.defaults.otherUserProfile,"following":o.following};this.util.setRelationModel(o,l)}return JSON.parse(JSON.stringify(i.users))},"fetch":function(i){i&&i.params&&(i.params=e.extend(this.defaults.params,i.params),this.getRelationsRESTUrl=this.relationsRESTUrl+"&"+e.param(i.params)),t.Collection.prototype.fetch.apply(this,arguments)},"fetchSuccess":function(e,t,i){if(t.results.chatSettings.chatEnabled&&t.results.chatSettings.presenceEnabled){var n,o=[],s=[],r=[],c=Math.ceil(e.length/10);if(e.defaults.relation===e.util.commonUtil.globalConstants.FRIENDS?(n=t.results.friends.users,t.results.friends_count):e.defaults.relation===e.util.commonUtil.globalConstants.FOLLOWERS&&(n=t.results.followers.users,t.results.followers_count),n.length>0){for(var d in n)o[d]=n[d].user.screen_name+"@"+t.results.chatSettings.chatDomain,r[d]="esoc-mini-profile-presence-indicator-"+n[d].user.id,s[d]=e.models[10*(c-1)+parseInt(d,10)];var u={"presenceHolder":r,"email":o,"context":i.context,"models":s};a.isPluginEnabled()?l.getProvider().showUserPresence(u):l.getProvider().updateEventPresence(u)}}}})}),csui.define("hbs!esoc/widgets/userwidget/impl/relations",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"isFollowingTab"):s,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":4},"end":{"line":6,"column":11}}}))?s:""},"2":function(e,t,i,n,o){return'      <div id="esoc-user-picker"\r\n           class="esoc-user-picker-holder binf-col-lg-4 binf-col-md-6 binf-col-sm-6 binf-col-xs-8"></div>\r\n'},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"isFollowingTab"):s,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":9,"column":4},"end":{"line":15,"column":11}}}))?s:""},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div\r\n          class="esoc-user-hide-element esoc-user-no-relations binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n        <div id="esoc-user-no-relations"\r\n             class="esoc-user-relations-list esoc-user-default-content">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"followingListEmptyMessage"):s,t))+"</div>\r\n      </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){
if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="esoc-user-relations-container binf-col-lg-8 binf-col-md-8 binf-col-sm-8 binf-col-xs-8">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"otherUser"):s,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(1,o,0),"loc":{"start":{"line":2,"column":2},"end":{"line":7,"column":9}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"otherUser"):s,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(4,o,0),"loc":{"start":{"line":8,"column":2},"end":{"line":16,"column":9}}}))?s:"")+'  <div id="esoc-user-relations-list"\r\n       class="esoc-user-relations-list binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n</div>\r\n<div id="esoc-user-relations-activity-list"\r\n     class="esoc-user-relations-activity-list binf-col-lg-4 binf-col-md-4 binf-col-sm-4 binf-col-xs-4"></div>\r\n'}});return i.registerPartial("esoc_widgets_userwidget_impl_relations",n),n}),csui.define("esoc/widgets/userwidget/view/relations.view",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/utils/contexts/factories/user","esoc/widgets/userwidget/view/miniprofilecollection.view","esoc/widgets/activityfeedwidget/activityfeedcontent","esoc/widgets/userwidget/model/relations.model","esoc/widgets/userwidget/view/customuserpicker.view","hbs!esoc/widgets/userwidget/impl/relations","esoc/widgets/userwidget/util","esoc/widgets/userwidget/chat/chatutil","esoc/widgets/userwidget/chat/chatfactory","i18n!esoc/widgets/userwidget/nls/lang","esoc/widgets/userwidget/chat/skype/skypeucwa.attribute.model"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f){var g=null;return o.ItemView.extend({"tagName":"div","className":"esoc-user-relation-tab","template":d,"miniProfileCollectionView":"","activityFeedView":"","activityFeedOptions":"","ActivityFeedWidgetView":"","templateHelpers":function(){return{"messages":{"isFollowingTab":this.options.selectedtab===u.commonUtil.globalConstants.FRIENDS,"followingListEmptyMessage":h.noFriendsMessage,"otherUser":this.options.userwidgetmodel.attributes.otherUser}}},"initialize":function(n){this.options=n,g=this;var o=u.commonUtil,a=n.selectedtab===o.globalConstants.FRIENDS?"following":o.globalConstants.FOLLOWERS;this.ActivityFeedContent=e("esoc/widgets/activityfeedwidget/activityfeedcontent"),n.relation=n.selectedtab===o.globalConstants.FRIENDS?o.globalConstants.FRIENDS:o.globalConstants.FOLLOWERS;var d=new r(n);this.activityFeedOptions={"context":n.context,"otherUser":n.userwidgetmodel.attributes.otherUser,"hideupdatesfrom":!0,"updatesfrom":{"from":a,"id":n.userwidgetmodel.attributes.userid},"feedSettings":{"enableFilters":!0},"filterSource":"userprofile","selectedTab":n.selectedtab,"origin":"userwidget"},d.fetch({"async":!1,"success":d.fetchSuccess,"context":n.context}),t(".esoc-userprofile-action-names a.esoc-userprofile-following-action").show().html(this.options.userwidgetmodel.attributes.following?h.unfollow:h.follow),t(".esoc-userprofile-action-names a.esoc-userprofile-following-action").attr("title",this.options.userwidgetmodel.attributes.following?h.unfollow:h.follow);var p=n.context?n.context.getModel(s):void 0,m=p&&p.get("id")?p.get("id"):n.loggedUserId;this.miniProfileCollectionView=new l({"collection":d,"loggedUserId":m,"relation":n.relation,"otherUserProfile":n.userwidgetmodel.attributes.otherUser,"context":n.context});var f=this.options.selectedtab===u.commonUtil.globalConstants.FRIENDS?this.options.userwidgetmodel.attributes.friends_count:this.options.userwidgetmodel.attributes.followers_count;u.changeRelationsCounts(this.options.userwidgetmodel.attributes),this.options.userwidgetmodel.attributes.relationCount=f,this.activityFeedView=new this.ActivityFeedContent(this.activityFeedOptions),this.listenTo(this.miniProfileCollectionView,"collectionview.show.user.dialog",function(e){g.trigger("relationsview.show.user.dialog",e)}),d.on("remove.relation",function(e,t){void 0!==g.activityFeedView.contentView.collection.widgetOptions.getNewUpdates&&delete g.activityFeedView.contentView.collection.widgetOptions.getNewUpdates;var n=void 0!==t.friends_count?t.friends_count:t.data.user.friends_count,o=void 0!==t.followers_count?t.followers_count:t.data.user.followers_count,s=g.activityFeedOptions.collection.widgetOptions.activityfeed.widgetId,l={"friends_count":n,"followers_count":o};u.changeRelationsCounts(l),(g.options.selectedtab===u.commonUtil.globalConstants.FRIENDS&&0===parseInt(n,10)||g.options.selectedtab===u.commonUtil.globalConstants.FOLLOWERS&&0===parseInt(o,10))&&(g.options.userwidgetmodel.attributes.followers_count=parseInt(o,10),g.options.userwidgetmodel.attributes.friends_count=parseInt(n,10),g.options.userwidgetmodel.attributes.relationCount=g.options.selectedtab===u.commonUtil.globalConstants.FRIENDS?g.options.userwidgetmodel.attributes.friends_count:g.options.userwidgetmodel.attributes.followers_count,g.options.selectedtab===u.commonUtil.globalConstants.FRIENDS&&(g.$el.find(".esoc-user-no-relations").show(),g.$el.find("#esoc-user-no-relations").show()),g.$el.find("#esoc-user-relations-list").hide(),g.$el.find("#esoc-user-relations-activity-list").hide(),g.activityFeedView.contentView.collection.widgetOptions=i.extend({"getNewUpdates":!1},g.activityFeedView.contentView.collection.widgetOptions),!g.options.userwidgetmodel.attributes.otherUser&&g.templateHelpers().messages.isFollowingTab&&g.$el.find(".esoc-user-no-relations").show()),g.$el.find(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+s).hide(),g.options.context._factories[s].fetch(g.activityFeedOptions)}),this.listenTo(d,"add.follower",this.onAddFollower),this.options.showActions=!0,this.pickerView=new c({"context":this.options.context,"limit":5,"memberFilter":{"type":[0]},"widgetoptions":this.options,"placeholder":h.userpickerplaceholder,"prettyScrolling":!0,"scrollContainerHeight":"auto"})},"constructor":function(e){e=e||{},o.ItemView.prototype.constructor.call(this,e)},"errorHandle":function(e,t){},"onShow":function(){void 0!==g.activityFeedView.contentView.collection.widgetOptions.getNewUpdates&&delete g.activityFeedView.contentView.collection.widgetOptions.getNewUpdates,g.showUserPicker();var e=new o.Region({"el":"#esoc-user-relations-list"}),t=new o.Region({"el":"#esoc-user-relations-activity-list"});if(e.show(this.miniProfileCollectionView),t.show(this.activityFeedView.contentView),0===this.options.userwidgetmodel.attributes.relationCount&&(g.activityFeedView.contentView.collection.widgetOptions=i.extend({"getNewUpdates":!1},g.activityFeedView.contentView.collection.widgetOptions),g.$el.find("#esoc-user-relations-list").hide(),g.$el.find("#esoc-user-relations-activity-list").hide(),!g.options.userwidgetmodel.attributes.otherUser&&g.templateHelpers().messages.isFollowingTab&&g.$el.find(".esoc-user-no-relations").show()),g.options.context._factories[g.activityFeedOptions.collection.widgetOptions.activityfeed.widgetId].fetch(g.activityFeedOptions).done(function(){g.trigger("view:shown")}),f.getPresenceEnabled()&&f.isPluginEnabled()){var n=g.miniProfileCollectionView.collection.length,s=g.miniProfileCollectionView.collection,l=[],a=[];if(n>0){for(var r=0;r<n;r++)l[r]=s.models[r].attributes.screen_name+"@"+s.models[r].attributes.chatSettings.chatDomain,a[r]="esoc-mini-profile-presence-indicator-"+s.models[r].attributes.id;var c={"presenceHolder":a,"email":l,"context":g.options.context};l.length>0&&a.length>0&&m.getProvider().showUserPresence(c)}}},"onAddFollower":function(e){var t=g.activityFeedOptions.collection.widgetOptions.activityfeed.widgetId;0===g.options.userwidgetmodel.attributes.relationCount&&(void 0!==g.activityFeedView.contentView.collection.widgetOptions.getNewUpdates&&delete g.activityFeedView.contentView.collection.widgetOptions.getNewUpdates,g.options.selectedtab===u.commonUtil.globalConstants.FRIENDS&&g.$el.find("#esoc-user-no-relations").hide(),g.$el.find("#esoc-user-relations-list").show(),g.$el.find("#esoc-user-relations-activity-list").show(),u.commonUtil.alignUpdateButton(t,!1),this.options.relation===u.commonUtil.globalConstants.FOLLOWERS&&(g.options.userwidgetmodel.attributes.relationCount=g.options.userwidgetmodel.attributes.followers_count),g.activityFeedView instanceof a||(g.activityFeedView=new this.ActivityFeedContent(g.activityFeedOptions))),g.$el.find(".esoc-activityfeed-getnewupdates.esoc-activityfeed-getnewupdates-"+t).hide(),g.options.context._factories[t].fetch(g.activityFeedOptions)},"showUserPicker":function(){if(!g.options.userwidgetmodel.attributes.otherUser&&g.options.relation===u.commonUtil.globalConstants.FRIENDS){new o.Region({"el":this.$el.find("#esoc-user-picker")}).show(this.pickerView),this.$el.find(".esoc-user-relations-list").addClass("esoc-user-relations-with-picker")}},"onDestroy":function(){g.activityFeedView.contentView.destroy()}})}),csui.define("hbs!esoc/widgets/userwidget/impl/settings",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return"checked"},"3":function(e,t,i,n,o){return" icon-checkbox-selected "},"5":function(e,t,i,n,o){return" icon-checkbox "},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div\r\n        class="esoc-setting-privacySettings csui-facet-panel binf-col-lg-6 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      <div class="esoc-setting-name">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacySettings"):s,t))+'</div>\r\n      <span class="esoc-sub-setting-name">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"notifyMyUpdatesTo"):s,t))+'</span>\r\n\r\n      <div class="csui-facet-item">\r\n        <div class="esoc-settings-selection-label">\r\n          <input type="radio" name="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"CONTENT_PRIVACY"):s,t))+'" value="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"EVERYONE"):s,t))+'"\r\n                 id="esoc_privacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"EVERYONE"):s,t))+'" class="esoc_setting_edit_field"\r\n                 '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"contentPrivacyEveryOne"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":96,"column":17},"end":{"line":96,"column":70}}}))?s:"")+' >\r\n          <span id="esoc_privacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"EVERYONE"):s,t))+'_radio"\r\n                class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"contentPrivacyEveryOne"):s,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.program(10,o,0),"loc":{"start":{"line":98,"column":23},"end":{"line":98,"column":122}}}))?s:"")+'"></span>\r\n        </div>\r\n\r\n        <div class="csui-filter-name">\r\n            <label for="esoc_privacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"EVERYONE"):s,t))+'" class="csui-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacyEveryOne"):s,t))+'">\r\n                '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacyEveryOne"):s,t))+'\r\n\t    </label>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="csui-facet-item">\r\n        <div class="esoc-settings-selection-label">\r\n          <input type="radio" name="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"CONTENT_PRIVACY"):s,t))+'" value="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"FOLLOW"):s,t))+'"\r\n                 id="esoc_privacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"FOLLOW"):s,t))+'" class="esoc_setting_edit_field"\r\n                 '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"contentPrivacyFollow"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":112,"column":17},"end":{"line":112,"column":68}}}))?s:"")+' >\r\n          <span id="esoc_privacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"FOLLOW"):s,t))+'_radio"\r\n                class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"contentPrivacyFollow"):s,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.program(10,o,0),"loc":{"start":{"line":114,"column":23},"end":{"line":114,"column":120}}}))?s:"")+'"></span>\r\n        </div>\r\n\r\n        <div class="csui-filter-name">\r\n            <label for="esoc_privacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"FOLLOW"):s,t))+'" class="csui-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacyFollow"):s,t))+'">\r\n                '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacyFollow"):s,t))+'\r\n\t    </label>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="csui-facet-item">\r\n        <div class="esoc-settings-selection-label">\r\n          <input type="radio" name="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"CONTENT_PRIVACY"):s,t))+'" value="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"NONE"):s,t))+'"\r\n                 id="esoc_privacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"NONE"):s,t))+'" class="esoc_setting_edit_field"\r\n                 '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"contentPrivacyNone"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":128,"column":17},"end":{"line":128,"column":66}}}))?s:"")+' >\r\n          <span id="esoc_privacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"NONE"):s,t))+'_radio"\r\n                class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"contentPrivacyNone"):s,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.program(10,o,0),"loc":{"start":{"line":130,"column":23},"end":{"line":130,"column":118}}}))?s:"")+'"></span>\r\n        </div>\r\n\r\n        <div class="csui-filter-name">\r\n            <label for="esoc_privacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"NONE"):s,t))+'" class="csui-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacyNone"):s,t))+'">\r\n                '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacyNone"):s,t))+"\r\n            </label>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n"},"8":function(e,t,i,n,o){return" icon-radiobutton-selected "},"10":function(e,t,i,n,o){return" icon-radiobutton "},"12":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div\r\n        class="esoc-setting-status-privacySettings csui-facet-panel binf-col-lg-6 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      <div class="esoc-setting-name">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacySettingsForStatusMessages"):s,t))+'</div>\r\n      <span class="esoc-sub-setting-name">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"notifyMyUpdatesTo"):s,t))+'</span>\r\n\r\n      <div class="csui-facet-item">\r\n        <div class="esoc-settings-selection-label">\r\n          <input type="radio" name="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"STATUS_PRIVACY"):s,t))+'" value="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"EVERYONE"):s,t))+'"\r\n                 id="esoc_statusPrivacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"EVERYONE"):s,t))+'"\r\n                 class="esoc_setting_edit_field"\r\n                 '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"statusPrivacyEveryOne"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":153,"column":17},"end":{"line":153,"column":69}}}))?s:"")+' >\r\n          <span id="esoc_statusPrivacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"EVERYONE"):s,t))+'_radio"\r\n                class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"statusPrivacyEveryOne"):s,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.program(10,o,0),"loc":{"start":{"line":155,"column":23},"end":{"line":155,"column":121}}}))?s:"")+'"></span>\r\n        </div>\r\n\r\n        <div class="csui-filter-name">\r\n            <label for="esoc_statusPrivacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"EVERYONE"):s,t))+'" class="csui-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacyEveryOne"):s,t))+'">\r\n                '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacyEveryOne"):s,t))+'\r\n            </label>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="csui-facet-item">\r\n        <div class="esoc-settings-selection-label">\r\n          <input type="radio" name="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"STATUS_PRIVACY"):s,t))+'" value="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"FOLLOW"):s,t))+'"\r\n                 id="esoc_statusPrivacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"FOLLOW"):s,t))+'" class="esoc_setting_edit_field"\r\n                 '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"statusPrivacyFollow"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":169,"column":17},"end":{"line":169,"column":67}}}))?s:"")+' >\r\n          <span id="esoc_statusPrivacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"FOLLOW"):s,t))+'_radio"\r\n                class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"statusPrivacyFollow"):s,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.program(10,o,0),"loc":{"start":{"line":171,"column":23},"end":{"line":171,"column":119}}}))?s:"")+'"></span>\r\n        </div>\r\n\r\n        <div class="csui-filter-name">\r\n            <label for="esoc_statusPrivacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"FOLLOW"):s,t))+'" class="csui-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacyFollow"):s,t))+'">\r\n                '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacyFollow"):s,t))+'\r\n\t    </label>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="csui-facet-item">\r\n        <div class="esoc-settings-selection-label">\r\n          <input type="radio" name="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"STATUS_PRIVACY"):s,t))+'" value="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"NONE"):s,t))+'"\r\n                 id="esoc_statusPrivacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"NONE"):s,t))+'" class="esoc_setting_edit_field"\r\n                 '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"statusPrivacyNone"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":185,"column":17},"end":{"line":185,"column":65}}}))?s:"")+' >\r\n          <span id="esoc_statusPrivacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"NONE"):s,t))+'_radio"\r\n                class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"statusPrivacyNone"):s,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.program(10,o,0),"loc":{"start":{"line":187,"column":23},"end":{"line":187,"column":117}}}))?s:"")+'"></span>\r\n        </div>\r\n\r\n        <div class="csui-filter-name">\r\n            <label for="esoc_statusPrivacySettings_'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"NONE"):s,t))+'" class="csui-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacyNone"):s,t))+'">\r\n                '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"privacyNone"):s,t))+"\r\n            </label>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\x3c!--This class(esoc_setting_edit_field) is used for click event, do not use it for styling --\x3e\r\n<div class="esoc-settings-tab-content binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n  <div class="esoc-setting-notification csui-facet-panel">\r\n    <div class="esoc-setting-name">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"notification"):s,t))+'</div>\r\n\r\n    <div class="csui-facet-item">\r\n      <div class="esoc-settings-selection-label">\r\n        <input type="checkbox" name="notification" value="notifyMentions"\r\n               id="esoc_setting_notifyMentions" class="esoc_setting_edit_field"\r\n               '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"notifyMentions"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":15},"end":{"line":10,"column":60}}}))?s:"")+'>\r\n        <span id="esoc_setting_notifyMentions_checkbox"\r\n              class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"notifyMentions"):s,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.program(5,o,0),"loc":{"start":{"line":12,"column":21},"end":{"line":12,"column":106}}}))?s:"")+'"></span>\r\n      </div>\r\n\r\n      <div class="csui-filter-name">\r\n          <label for="esoc_setting_notifyMentions" class="csui-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"notifyMentions"):s,t))+'">\r\n              '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"notifyMentions"):s,t))+'\r\n\t  </label>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="csui-facet-item">\r\n      <div class="esoc-settings-selection-label">\r\n        <input type="checkbox" name="notification" value="notifyNewFollower"\r\n               id="esoc_setting_notifyNewFollower" class="esoc_setting_edit_field"\r\n               '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"notifyNewFollower"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":26,"column":15},"end":{"line":26,"column":63}}}))?s:"")+'>\r\n        <span id="esoc_setting_notifyNewFollower_checkbox"\r\n              class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"notifyNewFollower"):s,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.program(5,o,0),"loc":{"start":{"line":28,"column":21},"end":{"line":28,"column":109}}}))?s:"")+'"></span>\r\n      </div>\r\n\r\n      <div class="csui-filter-name">\r\n          <label for="esoc_setting_notifyNewFollower" class="csui-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"notifyNewFollower"):s,t))+'">\r\n              '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"notifyNewFollower"):s,t))+'\r\n\t  </label>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="csui-facet-item">\r\n      <div class="esoc-settings-selection-label">\r\n        <input type="checkbox" name="notification" value="notifyCommentsMyPosts"\r\n               id="esoc_setting_notifyCommentsMyPosts" class="esoc_setting_edit_field"\r\n               '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"notifyCommentsMyPosts"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":42,"column":15},"end":{"line":42,"column":67}}}))?s:"")+'>\r\n        <span id="esoc_setting_notifyCommentsMyPosts_checkbox"\r\n              class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"notifyCommentsMyPosts"):s,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.program(5,o,0),"loc":{"start":{"line":44,"column":21},"end":{"line":44,"column":113}}}))?s:"")+'"></span>\r\n      </div>\r\n\r\n      <div class="csui-filter-name">\r\n          <label for="esoc_setting_notifyCommentsMyPosts" class="csui-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"notifyCommentsMyPosts"):s,t))+'">\r\n              '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"notifyCommentsMyPosts"):s,t))+'\r\n\t  </label>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="csui-facet-item">\r\n      <div class="esoc-settings-selection-label">\r\n        <input type="checkbox" name="notification" value="notifyCommentsMyThreads"\r\n               id="esoc_setting_notifyCommentsMyThreads" class="esoc_setting_edit_field"\r\n               '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"notifyCommentsMyThreads"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":58,"column":15},"end":{"line":58,"column":69}}}))?s:"")+'>\r\n        <span id="esoc_setting_notifyCommentsMyThreads_checkbox"\r\n              class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"notifyCommentsMyThreads"):s,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.program(5,o,0),"loc":{"start":{"line":60,"column":21},"end":{"line":60,"column":115}}}))?s:"")+'"></span>\r\n      </div>\r\n\r\n      <div class="csui-filter-name">\r\n          <label for="esoc_setting_notifyCommentsMyThreads" class="csui-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"notifyCommentsMyThreads"):s,t))+'">\r\n              '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"notifyCommentsMyThreads"):s,t))+'\r\n\t  </label>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="csui-facet-item">\r\n      <div class="esoc-settings-selection-label">\r\n        <input type="checkbox" name="notification" value="notifyPrivateMessages"\r\n               id="esoc_setting_notifyPrivateMessages" class="esoc_setting_edit_field"\r\n               '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"notifyPrivateMessages"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":74,"column":15},"end":{"line":74,"column":67}}}))?s:"")+'>\r\n        <span id="esoc_setting_notifyPrivateMessages_checkbox"\r\n              class="'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"notifyPrivateMessages"):s,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.program(5,o,0),"loc":{"start":{"line":76,"column":21},"end":{"line":76,"column":113}}}))?s:"")+'"></span>\r\n      </div>\r\n\r\n      <div class="csui-filter-name">\r\n          <label for="esoc_setting_notifyPrivateMessages" class="csui-name" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"notifyPrivateMessages"):s,t))+'">\r\n              '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"notifyPrivateMessages"):s,t))+"\r\n\t  </label>\r\n      </div>\r\n    </div>\r\n  </div>\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"contentPrivacy"):s,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":86,"column":2},"end":{"line":141,"column":9}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"settings"):t)?l(s,"statusPrivacy"):s,{"name":"if","hash":{},"fn":e.program(12,o,0),"inverse":e.noop,"loc":{"start":{"line":142,"column":2},"end":{"line":198,"column":9}}}))?s:"")+"</div>\r\n"}});return i.registerPartial("esoc_widgets_userwidget_impl_settings",n),n}),csui.define("esoc/widgets/userwidget/model/settings.model",["csui/lib/backbone","csui/lib/jquery","csui/lib/underscore","csui/utils/url","esoc/widgets/userwidget/util"],function(e,t,i,n,o){return e.Model.extend({"connector":"","restUrl":"","constructor":function(t){this.options=t,this.restUrl=n.combine(o.commonUtil.getV2Url(t.connector.getConnectionUrl()),o.commonUtil.REST_URLS.pulseRestUrl,t.userWidgetView.model.attributes.userid),this.restUrl=o.commonUtil.updateQueryStringValues(this.restUrl,o.commonUtil.globalConstants.FIELDS,o.commonUtil.globalConstants.SETTINGS),e.Model.prototype.constructor.apply(this,arguments),t&&t.connector&&t.connector.assignTo(this)},"url":function(){return this.restUrl},"fetch":function(){e.Model.prototype.fetch.apply(this,arguments)},"parse":function(e,i){var n=e.results,s=o.commonUtil.globalConstants.USER_PRIVACY_SETTINGS,l=["PrivacyEveryOne","PrivacyFollow","PrivacyNone"],a=l[t.inArray(n.settings.contentPrivacy,s)],r=l[t.inArray(n.settings.statusPrivacy,s)];return n.settings["content"+a]="on",n.settings["status"+r]="on",n}})}),csui.define("esoc/widgets/userwidget/view/settings.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/utils/url","hbs!esoc/widgets/userwidget/impl/settings","i18n!esoc/widgets/userwidget/nls/lang","esoc/widgets/userwidget/model/settings.model","esoc/widgets/userwidget/util","csui/controls/tile/behaviors/perfect.scrolling.behavior"],function(e,t,i,n,o,s,l,a,r,c){return n.ItemView.extend({"tagName":"div","className":"esoc-settings-tab","template":s,"util":r,"templateHelpers":function(){return{"messages":{"notification":l.notification,"notifyMentions":l.notifyMentions,"notifyNewFollower":l.notifyNewFollower,"notifyCommentsMyPosts":l.notifyCommentsMyPosts,"notifyCommentsMyThreads":l.notifyCommentsMyThreads,"notifyPrivateMessages":l.notifyPrivateMessages,"privacySettings":l.privacySettings,"privacySettingsForStatusMessages":l.privacySettingsForStatusMessages,"notifyMyUpdatesTo":l.notifyMyUpdatesTo,"privacyEveryOne":l.privacyEveryOne,"privacyFollow":l.privacyFollow,"privacyNone":l.privacyNone,"EVERYONE":r.commonUtil.globalConstants.USER_PRIVACY_SETTINGS[0],"FOLLOW":r.commonUtil.globalConstants.USER_PRIVACY_SETTINGS[1],"NONE":r.commonUtil.globalConstants.USER_PRIVACY_SETTINGS[2],"CONTENT_PRIVACY":r.commonUtil.globalConstants.CONTENT_PRIVACY,"STATUS_PRIVACY":r.commonUtil.globalConstants.STATUS_PRIVACY}}},"events":{"click .esoc_setting_edit_field ":"updateSetting"},"behaviors":{"PerfectScrolling":{"behaviorClass":c,"suppressScrollX":!0,"contentParent":".esoc-settings-tab-content","scrollYMarginOffset":15}},"initialize":function(e){this.options=e,this.editSettingUrl=o.combine(this.util.commonUtil.getV2Url(this.options.connector.getConnectionUrl()),this.util.commonUtil.REST_URLS.pulseRestUrl,this.model.attributes.userid)},"constructor":function(e){e=e||{};var i=t.extend({},e);i.model=new a(i),i.model.fetch({"async":!1}),n.ItemView.prototype.constructor.call(this,i)},"onDomRefresh":function(){this.trigger("view:shown",this)},"errorHandle":function(e,t){},"updateSetting":function(t){var i=e(t.target).val(),n=e(t.target).attr("name"),o=new FormData
;o.append(this.util.commonUtil.globalConstants.ACTION,this.util.commonUtil.globalConstants.UPDATE_SETTINGS_ACTION),n===this.util.commonUtil.globalConstants.CONTENT_PRIVACY||n===this.util.commonUtil.globalConstants.STATUS_PRIVACY?o.append(n,i):e(t.target).is(":checked")?o.append(i,"on"):o.append(i,"off");var s={"itemview":this,"url":this.editSettingUrl,"type":"POST","data":o,"requestType":"updateSettings","targetElement":e(t.target)};this.util.updateAjaxCall(s),e(t.target).prop("disabled",!0),this.util.commonUtil.updateSelection(t,this,n)}})}),csui.define("esoc/widgets/userwidget/model/view.simple.user.form",["csui/lib/underscore","csui/utils/url","csui/models/form","csui/lib/moment","csui/models/mixins/resource/resource.mixin","esoc/widgets/userwidget/util"],function(e,t,i,n,o,s){"use strict";var l=i.extend({"util":s,"constructor":function(e,t){i.prototype.constructor.apply(this,arguments),this.makeResource(t)},"clone":function(){return new this.constructor(this.attributes,{"connector":this.connector})},"url":function(){return t.combine(this.connector.connection.url,"forms","users",this.attributes.userId,"view")},"parse":function(e){return!!e.forms&&e.forms[0]}});return o.mixin(l.prototype),l}),csui.define("hbs!esoc/controls/form/view.simple.user.info/impl/view.simple.user.form",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="binf-row">\r\n  <div class="esoc-simple-user-widget-form binf-col-md-12 binf-col-sm-12\r\n  binf-col-lg-12\r\n  binf-col-xs-12">\r\n    <div id="metadata-pane-left-{{options.cid}}" class="cs-form-singlecolumn">\r\n      <div id="reportsToID-{{options.cid}}" class="esoc-simple-user-widget-manager"></div>\r\n      <div id="OfficeLocation-{{options.cid}}"\r\n           class="esoc-simple-user-widget-office-location"></div>\r\n      <div id="MailAddress-{{options.cid}}" class="esoc-simple-user-widget-email"></div>\r\n      <div id="Contact-{{options.cid}}" class="esoc-simple-user-widget-phone"></div>\r\n      <div id="CellularPhone-{{options.cid}}" class="esoc-simple-user-widget-mobile"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("esoc_controls_form_view.simple.user.info_impl_view.simple.user.form",n),n}),csui.define("esoc/controls/form/view.simple.user.info/view.simple.user.form",["csui/lib/underscore","csui/lib/jquery","csui/controls/form/form.view","esoc/widgets/userwidget/util","hbs!esoc/controls/form/view.simple.user.info/impl/view.simple.user.form"],function(e,t,i,n,o){"use strict";return i.extend({"className":"cs-form esoc-simple-user-widget-view-form","formTemplate":o,"util":n,"formTemplateHelpers":function(){return{"cid":this.model.cid}},"constructor":function(n){i.prototype.constructor.call(this,n),this.listenTo(this,"change:field",this._saveField),this.onWinResize=e.bind(this.windowResize,this),t(window).on("resize.app",this.onWinResize),this.originalHeight=0},"windowResize":function(){this.formHeight(),this.triggerMethod("dom:refresh")},"formHeight":function(){this.options.orginatingView.$el.is(":visible")?(this.options.orginatingView.options.sidePanel||(0===this.originalHeight&&(this.originalHeight=t(".esoc-simple-user-widget-body .tab-links > .esoc-simple-user-widget-form-body").length>0?t(".esoc-simple-user-widget-form-content").height()+52:t(".esoc-simple-user-widget-body").height()),t(".esoc-simple-user-widget-dialog .binf-modal-content").css("height",this.originalHeight+t(".esoc-simple-user-widget-header").height()+t(".esoc-simple-user-widget-dialog .esoc-simple-user-widget-footer").height()+2),t(".esoc-simple-user-widget-body").css("height",t(".esoc-simple-user-widget-dialog .binf-modal-content").height()-t(".esoc-simple-user-widget-header").height()-t(".esoc-simple-user-widget-dialog .esoc-simple-user-widget-footer").height()),t(".esoc-simple-user-widget-body .tab-links > .esoc-simple-user-widget-form-body").length>0&&t(".esoc-simple-user-widget-form-body").css("height",t(".esoc-simple-user-widget-body").height()-48),t(".esoc-simple-user-widget-dialog .esoc-simple-user-widget-footer").css("display","block")),this.options.orginatingView.triggerMethod("update:scrollbar")):(t(window).off("resize.app",this.onWinResize),this.destroy())},"onRenderForm":function(){this.formHeight(),this.handleManagerAttributes(),this.options.orginatingView.trigger("view:shown")},"_getLayout":function(){return{"parent":"bootstrap-csui","layout":{"template":this.getOption("formTemplate").call(this,{"data":this.alpaca.data,"mode":this.mode}),"bindings":this._getBindings()}}},"_getBindings":function(){return{"reportsToID":e.str.sformat("reportsToID-{0}",this.model.cid),"OfficeLocation":e.str.sformat("OfficeLocation-{0}",this.model.cid),"MailAddress":e.str.sformat("MailAddress-{0}",this.model.cid),"Contact":e.str.sformat("Contact-{0}",this.model.cid),"CellularPhone":e.str.sformat("CellularPhone-{0}",this.model.cid)}},"_saveField":function(e){var t=new FormData,i=e.value?e.value:"",n=this.model.connector;if("reportsToID"==e.name){t.append(this.util.commonUtil.globalConstants.ACTION,this.util.commonUtil.globalConstants.UPDATE_EXTENDED_INFO),t.append("reportsTo",i);var o={"itemview":this,"url":this.util.commonUtil.getV2Url(n.getConnectionUrl())+this.util.commonUtil.REST_URLS.pulseRestUrl+e.model.attributes.userId,"type":"PUT","data":t,"connector":n}}else{switch(e.name){case"OfficeLocation":t.append("office_location",i);break;case"MailAddress":t.append("business_email",i);break;case"Contact":t.append("business_phone",i);break;case"CellularPhone":t.append("cell_phone",i)}var o={"itemview":this,"url":this.util.commonUtil.getV2Url(n.getConnectionUrl())+"/members/"+e.model.attributes.userId,"type":"PUT","data":t,"connector":n}}this.util.updateAjaxCall(o),this.handleManagerAttributes()},"handleManagerAttributes":function(){this.$el.find(".cs-field-read-inner button").attr("tabindex","0"),this.$el.find(".esoc-user-container").on("keypress",function(e){e.stopPropagation()})}})}),csui.define("hbs!esoc/widgets/userwidget/impl/simple.userwidget.form.view",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="esoc-simple-user-widget-form-view">\r\n  <div class="esoc-simple-user-widget-form-content"></div>\r\n</div>'}});return i.registerPartial("esoc_widgets_userwidget_impl_simple.userwidget.form.view",n),n}),csui.define("esoc/widgets/userwidget/view/simple.userwidget.form.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/handlebars","csui/lib/marionette","csui/controls/tile/behaviors/perfect.scrolling.behavior","esoc/widgets/userwidget/model/view.simple.user.form","esoc/controls/form/view.simple.user.info/view.simple.user.form","hbs!esoc/widgets/userwidget/impl/simple.userwidget.form.view","css!esoc/widgets/userwidget/impl/userwidget.css"],function(e,t,i,n,o,s,l,a,r){return o.ItemView.extend({"className":"esoc-simple-user-widget-profile-view","template":r,"behaviors":{"PerfectScrolling":{"behaviorClass":s,"suppressScrollX":!0,"contentParent":".esoc-simple-user-widget-form-view","scrollYMarginOffset":15}},"constructor":function(e){e=e||{},o.ItemView.prototype.constructor.call(this,e);var t=new l({"userId":this.options.userwidgetmodel.attributes.id},{"connector":this.options.connector}),i=this;t.fetch().done(function(){i.formView=new a({"context":i.options.context,"orginatingView":i,"model":t}),i.render()})},"onRender":function(){if(this.formView){new o.Region({"el":this.$el.find(".esoc-simple-user-widget-form-content")}).show(this.formView)}}})}),csui.define("esoc/widgets/userwidget/userprofile",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","i18n!esoc/widgets/userwidget/nls/lang","esoc/widgets/userwidget/view/general.view","esoc/widgets/userwidget/view/personal.view","esoc/widgets/userwidget/view/relations.view","esoc/widgets/userwidget/view/settings.view","esoc/widgets/activityfeedwidget/activityfeedwithfilter.view","csui/behaviors/keyboard.navigation/tabable.region.behavior","esoc/widgets/userwidget/view/simple.userwidget.form.view","csui-ext!esoc/widgets/userprofile/tab.extension","esoc/widgets/common/util"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h){var f,g={"userProfileTabViewMapping":{"esoc-user-profile-general-tab":l,"esoc-user-profile-personal-tab":a,"esoc-user-profile-activity-tab":d,"esoc-user-profile-following-tab":r,"esoc-user-profile-followers-tab":r,"esoc-user-profile-settings-tab":c},"showTab":function(e,s,l,a){this.uniqueId=n.uniqueId();var r,c=new o.Region({"el":a.$el.find("#"+s)}),d=this;if("esoc-user-profile-following-tab"===e?l.selectedtab=h.globalConstants.FRIENDS:"esoc-user-profile-followers-tab"===e&&(l.selectedtab=h.globalConstants.FOLLOWERS),f&&i("esoc-simple-user-profile-tab-"+l.uniqueId).length>0&&f.destroy(),"esoc-user-profile-activity-tab"===e){var u=t("esoc/widgets/activityfeedwidget/activityfeedwithfilter.view");r={"context":l.context,"otherUser":l.model.attributes.otherUser,"hideupdatesfrom":!0,"hideExpandIcon":!0,"feedSettings":{"enableFilters":!0},"updatesfrom":{"from":"user","id":l.model.attributes.userid},"filterSource":"userprofile","userActivity":!0,"showCommentIcon":!0,"origin":"userwidget","userProfileView":a},f=new u(r)}else{var m=n.extend({},l);m.userwidgetmodel=l.model,delete m.model,this.userProfileTabViewMapping["esoc-simple-user-profile-tab-"+l.uniqueId]=p,f=new this.userProfileTabViewMapping[e](m)}f.on("relationsview.show.user.dialog",function(e){a.trigger("userprofileview.show.user.dialog",e)});var g="a[href],input[type!='radio'],input[type='radio']:checked,textarea,*[tabindex] *[data-cstabindex],button";a.on("view:shown",function(){var t=a.$el.find("img.esoc-full-profile-avatar-cursor");"#"!==t.attr("src")?t.attr("tabindex","0").attr("data-cstabindex","0"):a.$el.find("span.esoc-full-profile-avatar-cursor").attr("tabindex","0").attr("data-cstabindex","0"),a.setTabIndexForNonTabs&&a.setTabIndexForNonTabs(),a.trigger("dom:refresh"),a.options.viewShown?(d.setTabbing(a,g,e),a.options.tabClicked=!0):a.options.viewShown=!0}),f.on("view:shown",function(t){a.options.viewShown?(d.setTabbing(a,g,e,t),a.options.tabClicked=!0):a.options.viewShown=!0}),c.show(f),"esoc-user-profile-activity-tab"===e&&l.context._factories[r.collection.widgetOptions.activityfeed.widgetId].fetch(r).done(function(){f.trigger("view:shown")})},"setTabbing":function(e,t,n,o){var s=this;"esoc-user-profile-activity-tab"!==n&&(s.setTabIndexForViewElements(e),s.setTabIndexForViewInstanceElements(f,t)),i(".esoc-user-widget-dialog-back").attr("tabindex","0").attr("data-cstabindex","0"),e.$el.find("[data-cstabindex=0]").filter(":not(a:empty)").on("focus",function(t){s.addTabableClass(e,t)}),e.options.tabClicked&&"contentChanged"!==o&&f.$el.find("[data-cstabindex=0]").filter(":visible").filter(":not(a:empty)").first().trigger("focus")},"setTabIndexForViewElements":function(e){e.setTabIndexForTabs&&e.setTabIndexForTabs()},"addTabableClass":function(e,t){var n=i(t.target);e.options.focusedElement&&e.options.focusedElement.removeClass(u.accessibilityActiveElementClass),n.addClass(u.accessibilityActiveElementClass),e.options.focusedElement=n},"setTabIndexForViewInstanceElements":function(e,t){e.$el.find(t).attr("tabindex","0").attr("data-cstabindex","0")}};return m&&(m=n.flatten(m,!0),n.each(m,function(e){var t="esoc-user-profile-"+e.tabName+"-tab";g.userProfileTabViewMapping[t]=e.tabContentView})),g}),csui.define("hbs!esoc/widgets/userwidget/impl/userprofile",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return"\r\n      esoc-full-profile-avatar-cursor "},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"otherUser"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.program(6,o,0),"loc":{"start":{"line":25,"column":8},"end":{"line":42,"column":15}}}))?s:""},"4":function(e,t,i,n,o){return'          <a href="javascript:void(0);">\r\n            <div id="esoc-userprofile-chat-action" class="esoc-user-profile-chat-action"></div>\r\n          </a>\r\n          <a href="javascript:void(0);" class="esoc-userprofile-following-action">\r\n          </a>\r\n'},"6":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"messages"):t)?l(s,"enableUploadProfilePicture"):s,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":32,"column":10},"end":{"line":41,"column":17}}}))?s:""},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <a href="javascript:void(0);" class="esoc-update-profilepic"\r\n               title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"updatePic"):s,t))+'">\r\n              <div class="esoc-userprofile-actions-name">\r\n                '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"updatePic"):s,t))+'\r\n              </div>\r\n            </a>\r\n            <input type="file" id="esoc-profilepic-desktop-attachment" name="updateProfilePic"\r\n                   accept="image/*" style="display:none" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"updatePic"):s,t))+'"/>\r\n'},"9":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li role="presentation" class="esoc-user-profile-tab" id="esoc-user-profile-personal-tab">\r\n          <a href="#tab3" data-binf-toggle="tab">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"personal"):s,t))+"</a>\r\n        </li>\r\n"},"11":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?l(t,"hideFollowing"):t,{"name":"unless","hash":{},"fn":e.program(12,o,0),"inverse":e.noop,"loc":{"start":{"line":68,"column":3},"end":{"line":79,"column":14}}}))?s:"")+(null!=(s=l(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?l(t,"hideFollowers"):t,{"name":"unless","hash":{},"fn":e.program(14,o,0),"inverse":e.noop,"loc":{"start":{"line":80,"column":3},"end":{"line":91,"column":14}}}))?s:"")},"12":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t\t<li role="presentation" class="esoc-user-profile-tab esoc-user-pulse-enabled-tabs"\r\n\t\t\t\t  id="esoc-user-profile-following-tab">\r\n\t\t\t\t\t<a href="#tab4" data-binf-toggle="tab" class="esoc-user-following-tab-label"\r\n\t\t\t\t\t   title= '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"followingCount"):s,t))+'>\r\n\t\t\t\t\t  <span class="esoc-user-following-tab-label"\r\n\t\t\t\t\t\t\ttitle= '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"followingCount"):s,t))+">"+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"following"):s,t))+'</span>\r\n\t\t\t\t\t  <span class="esoc-user-following-count esoc-user-following-tab-label"\r\n\t\t\t\t\t\t\ttitle= '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"followingCount"):s,t))+"></span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</li>\r\n"},"14":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t\t<li role="presentation" class="esoc-user-profile-tab esoc-user-pulse-enabled-tabs"\r\n\t\t\t\t  id="esoc-user-profile-followers-tab">\r\n\t\t\t\t\t<a href="#tab5" data-binf-toggle="tab" class="esoc-user-followers-tab-label"\r\n\t\t\t\t\t   title= '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"followersCount"):s,t))+'>\r\n\t\t\t\t\t  <span class="esoc-user-followers-tab-label"\r\n\t\t\t\t\t\t\ttitle= '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"followersCount"):s,t))+">"+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"followers"):s,t))+'</span>\r\n\t\t\t\t\t  <span class="esoc-user-followers-count esoc-user-followers-tab-label"\r\n\t\t\t\t\t\t\ttitle= '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"followersCount"):s,t))+"></span>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</li>\r\n"},"16":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t<li role="presentation" class="esoc-user-profile-tab esoc-user-pulse-enabled-tabs"\r\n\t\t\t\tid="esoc-user-profile-activity-tab">\r\n\t\t\t  <a href="#tab6" data-binf-toggle="tab" class="esoc-user-activity-tab-label"\r\n\t\t\t\t title= '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"activity"):s,t))+'>\r\n\t\t\t\t<span class="esoc-user-activity-tab-label"\r\n\t\t\t\t\t  title= '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"activity"):s,t))+">"+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"activity"):s,t))+"</span></a>\r\n\t\t\t</li>\r\n"},"18":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?l(t,"hideSettings"):t,{"name":"unless","hash":{},"fn":e.program(19,o,0),"inverse":e.noop,"loc":{"start":{"line":103,"column":3},"end":{"line":111,"column":14}}}))?s:""},"19":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t\t<li role="presentation" class="esoc-user-profile-tab esoc-user-pulse-enabled-tabs"\r\n\t\t\t\t  id="esoc-user-profile-settings-tab">\r\n\t\t\t\t\t<a href="#tab7" data-binf-toggle="tab" class="esoc-user-settings-tab-label"\r\n\t\t\t\t\t   title= '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"settings"):s,t))+'>\r\n\t\t\t\t\t  <span class="esoc-user-settings-tab-label" title= '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"settings"):s,t))+">"+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"settings"):s,t))+"</span></a>\r\n\t\t\t\t</li>\r\n"},"21":function(e,t,i,n,o){var s;return null!=(s=e.hooks.blockHelperMissing.call(t,e.lambda(t,t),{"name":"this","hash":{},"fn":e.program(22,o,0),"inverse":e.noop,"loc":{"start":{"line":114,"column":10},"end":{"line":130,"column":19}}}))?s:""},"22":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"show"):t,{"name":"if","hash":{},"fn":e.program(23,o,0),"inverse":e.noop,"loc":{"start":{"line":115,"column":12},"end":{"line":129,"column":19}}}))?s:""},"23":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <li role="presentation" class="esoc-user-profile-tab"\r\n                id="esoc-user-profile-'+e.escapeExpression((l=null!=(l=a(i,"tabName")||(null!=t?a(t,"tabName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabName","hash":{},"loc":{"start":{"line":117,"column":38},"end":{"line":117,"column":49}}}):l))+'-tab">\r\n              <a href="#'+e.escapeExpression((l=null!=(l=a(i,"tabName")||(null!=t?a(t,"tabName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabName","hash":{},"loc":{"start":{"line":118,"column":24},"end":{"line":118,"column":35}}}):l))+'" data-binf-toggle="tab"\r\n                 class="esoc-user-profile-'+e.escapeExpression((l=null!=(l=a(i,"tabName")||(null!=t?a(t,"tabName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabName","hash":{},"loc":{"start":{"line":119,"column":42},"end":{"line":119,"column":53}}}):l))+'-tab-label" title= '+e.escapeExpression((l=null!=(l=a(i,"tabName")||(null!=t?a(t,"tabName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabName","hash":{},"loc":{"start":{"line":119,"column":72},"end":{"line":119,"column":83}}}):l))+'>\r\n              <span class="esoc-user-'+e.escapeExpression((l=null!=(l=a(i,"tabName")||(null!=t?a(t,"tabName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabName","hash":{},"loc":{"start":{"line":120,"column":37},"end":{"line":120,"column":48}}}):l))+'-tab-label esoc-user-profile-tab-label"\r\n                    title="'+e.escapeExpression((l=null!=(l=a(i,"tabDisplayName")||(null!=t?a(t,"tabDisplayName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabDisplayName","hash":{},"loc":{"start":{"line":121,"column":27},"end":{"line":121,"column":45}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"tabDisplayName")||(null!=t?a(t,"tabDisplayName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabDisplayName","hash":{},"loc":{"start":{"line":121,"column":47},"end":{"line":121,"column":65}}}):l))+"</span>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"tabCount"):t,{"name":"if","hash":{},"fn":e.program(24,o,0),"inverse":e.noop,"loc":{"start":{"line":122,"column":16},"end":{"line":126,"column":23}}}))?s:"")+"              </a>\r\n            </li>\r\n"},"24":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                  <span class="esoc-user-'+e.escapeExpression((l=null!=(l=a(i,"tabName")||(null!=t?a(t,"tabName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabName","hash":{},"loc":{"start":{"line":123,"column":41},"end":{"line":123,"column":52}}}):l))+'-count\r\n              esoc-user-profile-tab-count esoc-user-profile-tab-label"\r\n                        title= "'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"tabCount"):t)?a(s,"count"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"tabCount"):t)?a(s,"count"):s,t))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12  esoc-nopadding-right">\r\n  <div class="esoc-userprofile-actions">\r\n    <div class="esoc-userprofile-pic-actions">\r\n      <span class="'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"!this.messages.isOtherUser && this.messages.enableUploadProfilePicture",{"name":"xif","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":19},"end":{"line":5,"column":46}}}))?s:"")+"\r\n      image_user_placeholder esoc-userprofile-default-avatar esoc-full-profile-avatar-update\r\n    esoc-user-default-avatar-"+e.escapeExpression((l=null!=(l=a(i,"userid")||(null!=t?a(t,"userid"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"userid","hash":{},"loc":{"start":{"line":7,"column":29},"end":{"line":7,"column":39}}}):l))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"displayname"):s,t))+'">'+e.escapeExpression((l=null!=(l=a(i,"initials")||(null!=t?a(t,"initials"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"initials","hash":{},"loc":{"start":{"line":7,"column":74},"end":{"line":7,"column":86}}}):l))+'</span>\r\n      <img class="'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"!this.messages.isOtherUser && this.messages.enableUploadProfilePicture",{"name":"xif","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":18},"end":{"line":9,"column":46}}}))?s:"")+" esoc-full-profile-avatar\r\n    esoc-full-profile-avatar-update binf-img-circle esoc-image\r\n    esoc-upload-image-style\r\n    esoc-userprofile-img-"+e.escapeExpression((l=null!=(l=a(i,"userid")||(null!=t?a(t,"userid"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"userid","hash":{},"loc":{"start":{"line":12,"column":25},"end":{"line":12,"column":35}}}):l))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"displayname"):s,t))+'"\r\n           alt="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"display_name"):s,t))+'" src="#"/>\r\n    </div>\r\n    <div class="esoc-profile-img-load-container esoc-social-progress-style">\r\n      <div class="esoc-profile-img-outer-border">\r\n        <div class="esoc-profile-img-loader">\r\n          <div class="esoc-profile-img-inner-border"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="esoc-userprofile-action-names">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"deleted"):t,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(3,o,0),"loc":{"start":{"line":24,"column":6},"end":{"line":43,"column":13}}}))?s:"")+'    </div>\r\n  </div>\r\n  <a href="javascript:void(0);" id="esoc-user-focus-element" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"updatePic"):s,t))+'"></a>\r\n\r\n  <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 tab-links esoc-profile-tabs\r\n  esoc-nopadding-right">\r\n    <div class="tab-links-bar">\r\n      <div class="left-toolbar"></div>\r\n      <ul class=\'binf-nav binf-nav-pills esoc-user-profile-tabcontainer\'>\r\n        <li role="presentation" class="esoc-user-profile-tab binf-active"\r\n            id="esoc-user-profile-general-tab">\r\n          <a href="#tab1" data-binf-toggle="tab" class="esoc-user-general-tab-label"\r\n             title='+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"general"):s,t))+'>\r\n          <span class="esoc-user-general-tab-label"\r\n                title='+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"general"):s,t))+">"+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"general"):s,t))+"</span></a>\r\n        </li>\r\n        \x3c!--\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"otherUser"):t,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(9,o,0),"loc":{"start":{"line":61,"column":6},"end":{"line":65,"column":13}}}))?s:"")+"      //--\x3e\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"deleted"):t,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(11,o,0),"loc":{"start":{"line":67,"column":8},"end":{"line":92,"column":15}}}))?s:"")+(null!=(s=a(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?a(t,"hideActivity"):t,{"name":"unless","hash":{},"fn":e.program(16,o,0),"inverse":e.noop,"loc":{"start":{"line":93,"column":2},"end":{"line":101,"column":13}}}))?s:"")+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"otherUser"):t,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(18,o,0),"loc":{"start":{"line":102,"column":8},"end":{"line":112,"column":15}}}))?s:"")+(null!=(s=a(i,"each").call(null!=t?t:e.nullContext||{},null!=t?a(t,"extraTabs"):t,{"name":"each","hash":{},"fn":e.program(21,o,0),"inverse":e.noop,"loc":{"start":{"line":113,"column":8},"end":{"line":131,"column":17}}}))?s:"")+'      </ul>\r\n      <div class="right-toolbar"></div>\r\n      <div id="esoc-user-profile-tab-content"\r\n           class="esoc-user-profile-tab-content binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n'}});return i.registerPartial("esoc_widgets_userwidget_impl_userprofile",n),n}),csui.define("hbs!esoc/widgets/userwidget/impl/customchatbtn",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<a class='esoc-social-chat-control' title='"+e.escapeExpression((s=null!=(s=l(i,"labeltext")||(null!=t?l(t,"labeltext"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"labeltext","hash":{},"loc":{"start":{"line":1,"column":43},"end":{"line":1,"column":56}}}):s))+"'> "+e.escapeExpression((s=null!=(s=l(i,"chat")||(null!=t?l(t,"chat"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"chat","hash":{},"loc":{"start":{"line":1,"column":59},"end":{"line":1,"column":67}}}):s))+" </a>"}});return i.registerPartial("esoc_widgets_userwidget_impl_customchatbtn",n),n}),csui.define("esoc/widgets/userwidget/view/userprofile.view",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/utils/url","csui/controls/tab.panel/tab.links.ext.scroll.mixin","csui/behaviors/keyboard.navigation/tabables.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/utils/user.avatar.color","esoc/widgets/userwidget/userprofile","esoc/widgets/userwidget/util","esoc/widgets/utils/chat/chat.view","csui-ext!esoc/widgets/userprofile/tab.extension","hbs!esoc/widgets/userwidget/impl/userprofile","hbs!esoc/widgets/userwidget/impl/customchatbtn","i18n!esoc/widgets/userwidget/nls/lang","css!esoc/widgets/userwidget/impl/userwidget.css"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f,g,b,v){var y,w,x,C=e.config(),_=null,k=function(){var e=i.Deferred();return y&&w&&x?e.resolve():csui.require(["csui/controls/tab.panel/tab.panel.view","csui/controls/tab.panel/impl/tab.contents.view","csui/controls/tab.panel/impl/tab.links.view"],function(t,o,s){y=o.extend({"className":"esoc-userprofile-widget","constructor":function(e){e||(e={}),n.defaults(e,{"toolbar":!0,"searchTabContentForTabableElements":!0}),o.prototype.constructor.apply(this,arguments)}}),w=t.extend({"className":"esoc-userprofile-widget","constructor":function(e){e||(e={}),n.defaults(e,{"toolbar":!0,"searchTabContentForTabableElements":!0}),t.prototype.constructor.apply(this,arguments)},"behaviors":{"TabableRegionBehavior":{"behaviorClass":c}},"currentlyFocusedElement":function(e){var t=this.options.focusedElement;return e&&e.shiftKey?t&&i(t).length?t:void 0:this.$el.find("[data-cstabindex=0]")[0]},"onLastTabElement":function(e){var t=this.$("[data-cstabindex=0]").filter(":visible"),n=t.length-1;if(t.length){var o=e?t[0]:t[n];return i(o).hasClass(c.accessibilityActiveElementClass)}return!0}}),x=s.extend({"className":"esoc-userprofile-widget","constructor":function(e){e||(e={}),n.defaults(e,{"toolbar":!0,"searchTabContentForTabableElements":!0}),s.prototype.constructor.apply(this,arguments)}}),e.resolve()},e.reject),e.promise()},E=s.ItemView.extend({"className":"esoc-userprofile-widget","template":g,"util":m,"templateHelpers":function(){return{"hideFollowing":C.hideFollowing,"hideFollowers":C.hideFollowers,"hideActivity":C.hideActivity,"hideSettings":C.hideSettings,"extraTabs":this.getExtraTabs(f),"messages":{"general":v.general,"extended":v.extended,"personal":v.personal,"following":v.following,"followers":v.followers,"activity":v.activity,"settings":v.settings,"unfollow":v.unfollow,"follow":v.follow,"updatePic":v.updatePic,"displayname":this.model.attributes.display_name?this.model.attributes.display_name:this.options.display_name,"enableUploadProfilePicture":!!this.options.enableUploadProfilePicture,"isOtherUser":!!this.model.attributes.otherUser}}},"behaviors":{"TabableRegionBehavior":{"behaviorClass":c}},"initialize":function(e){
this.options=e,_=this;var t=this.model.id?this.model.id:this.options.userid;_.userProfileFollowingUrl=l.combine(this.util.commonUtil.getV2Url(this.options.connector.getConnectionUrl()),this.util.commonUtil.REST_URLS.pulseRestUrl,t),_.userPulseInfoUrl=l.combine(_.util.commonUtil.getV2Url(_.options.connector.getConnectionUrl()),_.util.commonUtil.REST_URLS.pulseRestUrl,t),i(window).on("popstate hashchange",this.util.closeUserWidgetDialog),this.listenToOnce(e.context,"change:perspective retain:perspective",this.util.closeUserWidgetDialog),this.listenTo(this.util.commonUtil.globalConstants.event_bus,"updateuserfollowingstatus",function(e,t){if(this.model.attributes.otherUser){if(e.model.attributes.id===this.model.attributes.id){this.model.attributes.following=e.model.attributes.following,e.model.attributes.following?(i(".esoc-userprofile-following-action").html(v.unfollow),i(".esoc-userprofile-following-action").attr("title",v.unfollow)):(i(".esoc-userprofile-following-action").html(v.follow),i(".esoc-userprofile-following-action").attr("title",v.follow));var n={"itemview":_,"url":_.userPulseInfoUrl,"type":"GET","requestType":"pulseInfo"};_.util.updateAjaxCall(n)}}else this.util.changeRelationsCounts(t.data.user)})},"events":{"click .esoc-user-profile-tab":"showTab","click .esoc-userprofile-following-action":"followUnFollowAction","click .esoc-update-profilepic":"updateProfilePicAction","touchend .esoc-update-profilepic":"updateProfilePicAction","click .esoc-full-profile-avatar-update":"updateProfilePicAction","keydown .esoc-full-profile-avatar-update":"updateProfilePicAction","touchend .esoc-full-profile-avatar-update":"updateProfilePicAction"},"constructor":function(e){e=e||{},n.defaults(e,{"toolbar":!0,"tabClickedOnce":!1,"initialActivationWeight":0}),this.options=e,this.listenToOnce(this,"before:hide",r.popTabableHandler),s.ItemView.prototype.constructor.call(this,e),i(window).on("resize",n.bind(this._onWindowResize,this))},"errorHandle":function(e,t){},"onDestroy":function(){var e=this.options.targetEle;e&&i(e).is(":visible")?i(e).trigger("focus"):e||(e=i(".nav-profile"))&&e.length&&i(e).trigger("focus"),i(window).off("resize",this._onWindowResize)},"_onWindowResize":function(){this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(n.bind(function(){this._enableToolbarState()},this),200)},"_initializeOthers":function(){var e={"gotoPreviousTooltip":v.previous,"gotoNextTooltip":v.next};this._initializeToolbars(e),this._listenToTabEvent(),setTimeout(n.bind(this._enableToolbarState,this),300)},"onRender":function(e){var t=this;t.options.userbackgroundcolor=u.getUserAvatarColor(this.model.attributes),k().done(function(){t.propagateEventsToRegions();var e=new w(n.extend(t));e.tabLinks=new x(n.extend(t)),e.tabContent=new y(n.extend(t)),e.options=t.options,i.extend(t,e),t.on("userprofileview.show.user.dialog",function(e){t.options.userWidgetView.trigger("userwidgetview.show.user.dialog",e)}),t._initializeOthers()})},"tabItemsFocus":function(e){this.options.focusedElement&&this.options.focusedElement.removeClass(c.accessibilityActiveElementClass);var t=i(e.target);t.addClass(c.accessibilityActiveElementClass),this.options.focusedElement=t,"radio"===t.attr("type")&&(t[0].checked=!0)},"setTabIndexForTabs":function(){this.$el.find("a[href][title],*[tabindex] *[data-cstabindex]").filter(":visible").filter(":not(a:empty)").attr("tabindex","0").attr("data-cstabindex","0")},"onAfterShow":function(e){var t=this;this._initializeOthers(),this.$el.find("#esoc-user-profile-general-tab").trigger("click");var i=this.model.id?this.model.id:this.options.userid,o={"userid":i,"context":t.options.context,"photoElement":t.$el.find(".esoc-userprofile-img-"+m.escapeSelector(i)),"defaultPhotElement":t.$el.find(".esoc-user-default-avatar-"+m.escapeSelector(i)),"userbackgroundcolor":this.options.userbackgroundcolor,"parentView":this,"viewShownEvent":!0};if(t.util.commonUtil.setProfilePic(o),t.util.commonUtil.setUserColor(o),this.options.model.attributes.otherUser&&!this.options.model.attributes.deleted&&this.options.model.attributes.chatSettings&&this.options.model.attributes.chatSettings.chatEnabled){var l={"chat":v.chat,"labeltext":n.str.sformat(v.chatlabeltext,this.options.model.attributes.name)},a=new s.Region({"el":"#esoc-userprofile-chat-action"}),r={"context":this.options.context,"tguser":this.options.model.attributes.name,"customtemplate":b(l),"domain":this.options.model.attributes.chatSettings.chatDomain},c=new h(r);a.show(c)}},"showTab":function(e){p.showTab(e.currentTarget.id,"esoc-user-profile-tab-content",_.options,this)},"followUnFollowAction":function(e){var t=new FormData,n=this.model.attributes.following?m.commonUtil.globalConstants.UNFOLLOW:m.commonUtil.globalConstants.FOLLOW;t.append(m.commonUtil.globalConstants.ACTION,n);var o={"itemview":this,"url":this.userProfileFollowingUrl,"type":"POST","data":t,"requestType":"userProfileFollowingAction","targetElement":i(e.target)};this.util.updateAjaxCall(o)},"updateProfilePicAction":function(e){if(!this.processKeyEvent(e)){var t=this,i=this.$el.find("#esoc-profilepic-desktop-attachment");i.off("change").on("change",function(e){if(i.val().length>0){var n=new FormData,o=i[0].files[0];o&&n.append("photo",o),t.$el.find(".esoc-userprofile-actions .esoc-full-profile-avatar").addClass("esoc-profile-opacity"),t.$el.find(".esoc-userprofile-actions .esoc-profile-img-load-container").addClass("esoc-progress-display");var s=t.options.connector.getConnectionUrl().getApiBase("v2"),a={"itemview":t,"url":l.combine(s,t.util.commonUtil.REST_URLS.updatePhotoUrl),"type":"POST","requestType":"updatePhoto","data":n,"targetElement":e.target,"connector":t.options.connector};t.util.commonUtil.updateAjaxCall(a)}}),e.preventDefault(),i.trigger("click")}},"processKeyEvent":function(e){if("keydown"===e.type){var t=e.keyCode||e.which;if(32!==t&&13!==t)return!0}return!1},"getExtraTabs":function(e){var t=this;return e=n.flatten(e,!0),n.each(e,function(e){e.tabCount&&(e.tabCount.count=e.tabCount.getItemCount(t.model,t.options)),e.show=!0,e.showTab&&(e.show=e.showTab(t.model,t.options))}),e}});return n.extend(E.prototype,a),n.extend(E.prototype,d),E}),csui.define("hbs!esoc/widgets/userwidget/impl/simple.userwidget.tabs",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 tab-links esoc-profile-tabs\r\n  esoc-nopadding-right">\r\n    <div class="tab-links">\r\n     <div class="tab-links-header">\r\n       <div class="left-toolbar"></div>\r\n       <div class="tab-links-bar">\r\n        <ul class=\'binf-nav binf-nav-pills esoc-user-profile-tabcontainer\' role="tablist">\r\n        <li role="presentation" class="esoc-user-profile-tab binf-active"\r\n            id="esoc-simple-user-profile-tab-'+e.escapeExpression((l=null!=(l=a(i,"uniqueId")||(null!=t?a(t,"uniqueId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"uniqueId","hash":{},"loc":{"start":{"line":10,"column":45},"end":{"line":10,"column":57}}}):l))+'">\r\n          <a href="#tab1" data-binf-toggle="tab" class="esoc-simple-user-profile-tab-label"\r\n             role="tab" title='+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"profile"):s,t))+'>\r\n          <span class="esoc-simple-user-profile-tab-label"\r\n                title='+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"profile"):s,t))+">"+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"profile"):s,t))+"</span></a>\r\n        </li>\r\n\r\n"+(null!=(s=a(i,"each").call(null!=t?t:e.nullContext||{},null!=t?a(t,"extraTabs"):t,{"name":"each","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":17,"column":8},"end":{"line":35,"column":17}}}))?s:"")+'      </ul>\r\n       </div>\r\n      <div class="right-toolbar"></div>\r\n      </div>\r\n      <div id="esoc-simple-user-widget-form-body-'+e.escapeExpression((l=null!=(l=a(i,"uniqueId")||(null!=t?a(t,"uniqueId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"uniqueId","hash":{},"loc":{"start":{"line":40,"column":49},"end":{"line":40,"column":61}}}):l))+'"\r\n      class="esoc-simple-user-widget-form-body" role="tabpanel"></div>\r\n    </div>\r\n  </div>\r\n'},"2":function(e,t,i,n,o){var s;return null!=(s=e.hooks.blockHelperMissing.call(t,e.lambda(t,t),{"name":"this","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":18,"column":10},"end":{"line":34,"column":19}}}))?s:""},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"show"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":19,"column":12},"end":{"line":33,"column":19}}}))?s:""},"4":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <li role="presentation" class="esoc-user-profile-tab"\r\n                  id="esoc-user-profile-'+e.escapeExpression((l=null!=(l=a(i,"tabName")||(null!=t?a(t,"tabName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabName","hash":{},"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":51}}}):l))+'-tab">\r\n                <a href="#'+e.escapeExpression((l=null!=(l=a(i,"tabName")||(null!=t?a(t,"tabName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabName","hash":{},"loc":{"start":{"line":22,"column":26},"end":{"line":22,"column":37}}}):l))+'" data-binf-toggle="tab" role="tab"\r\n                        class="esoc-user-profile-'+e.escapeExpression((l=null!=(l=a(i,"tabName")||(null!=t?a(t,"tabName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabName","hash":{},"loc":{"start":{"line":23,"column":49},"end":{"line":23,"column":60}}}):l))+'-tab-label" title= '+e.escapeExpression((l=null!=(l=a(i,"tabDisplayName")||(null!=t?a(t,"tabDisplayName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabDisplayName","hash":{},"loc":{"start":{"line":23,"column":79},"end":{"line":23,"column":97}}}):l))+'>\r\n              <span class="esoc-user-'+e.escapeExpression((l=null!=(l=a(i,"tabName")||(null!=t?a(t,"tabName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabName","hash":{},"loc":{"start":{"line":24,"column":37},"end":{"line":24,"column":48}}}):l))+'-tab-label esoc-user-profile-tab-label"\r\n                    title="'+e.escapeExpression((l=null!=(l=a(i,"tabDisplayName")||(null!=t?a(t,"tabDisplayName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabDisplayName","hash":{},"loc":{"start":{"line":25,"column":27},"end":{"line":25,"column":45}}}):l))+'">'+e.escapeExpression((l=null!=(l=a(i,"tabDisplayName")||(null!=t?a(t,"tabDisplayName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabDisplayName","hash":{},"loc":{"start":{"line":25,"column":47},"end":{"line":25,"column":65}}}):l))+"</span>\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"tabCount"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":26,"column":18},"end":{"line":30,"column":25}}}))?s:"")+"                </a>\r\n              </li>\r\n"},"5":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                    <span class="esoc-user-'+e.escapeExpression((l=null!=(l=a(i,"tabName")||(null!=t?a(t,"tabName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"tabName","hash":{},"loc":{"start":{"line":27,"column":43},"end":{"line":27,"column":54}}}):l))+'-count\r\n              esoc-user-profile-tab-count esoc-user-profile-tab-label"\r\n                          title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"tabCount"):t)?a(s,"count"):s,t))+'">'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"tabCount"):t)?a(s,"count"):s,t))+"</span>\r\n"},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div id="esoc-simple-user-widget-form-body-'+e.escapeExpression((s=null!=(s=l(i,"uniqueId")||(null!=t?l(t,"uniqueId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"uniqueId","hash":{},"loc":{"start":{"line":45,"column":45},"end":{"line":45,"column":57}}}):s))+'" class="esoc-simple-user-widget-form-body" role="tabpanel"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"extraTabs"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(7,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":46,"column":7}}}))?s:""}});return i.registerPartial("esoc_widgets_userwidget_impl_simple.userwidget.tabs",n),n}),csui.define("esoc/widgets/userwidget/view/simple.userwidget.tabs.view",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/handlebars","csui/lib/marionette","csui/utils/url","csui/controls/tab.panel/tab.links.ext.scroll.mixin","csui/behaviors/keyboard.navigation/tabables.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","esoc/widgets/userwidget/userprofile","esoc/widgets/userwidget/view/simple.userwidget.form.view","csui-ext!esoc/widgets/userprofile/tab.extension","hbs!esoc/widgets/userwidget/impl/simple.userwidget.tabs","i18n!esoc/widgets/userwidget/nls/lang","css!esoc/widgets/userwidget/impl/userwidget.css"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f){var g,b,v,y=function(){var e=t.Deferred();return g&&b&&v?e.resolve():csui.require(["csui/controls/tab.panel/tab.panel.view","csui/controls/tab.panel/impl/tab.contents.view","csui/controls/tab.panel/impl/tab.links.view"],function(n,o,s){g=o.extend({"className":"esoc-simple-user-widget-tab-view","constructor":function(e){e||(e={}),i.defaults(e,{"toolbar":!0,"searchTabContentForTabableElements":!0}),o.prototype.constructor.apply(this,arguments)}}),b=n.extend({"className":"esoc-simple-user-widget-tab-view","constructor":function(e){e||(e={}),i.defaults(e,{"toolbar":!0,"searchTabContentForTabableElements":!0}),n.prototype.constructor.apply(this,arguments)},"behaviors":{"TabableRegionBehavior":{"behaviorClass":c}},"currentlyFocusedElement":function(e){var i=this.options.focusedElement;return void 0===e||!1===e.shiftKey?t(this.$el.find("a[title]").filter(":visible").filter(":not(a:empty)")[0]):i&&t(i).length?i:void 0},"onLastTabElement":function(e){var i=this.$el.find("[tabindex="+this.options.tabCount+"]").filter(":visible").filter(":not(a:empty)"),n=e?this.$el.find("a[title]").filter(":visible").filter(":not(a:empty)")[0]:i.last();return e||1!==i.length||this.options.tabIndex+1!==this.options.tabCount?t(n).hasClass(c.accessibilityActiveElementClass):(this.options.tabIndex=0,!0)}}),v=s.extend({"className":"esoc-simple-user-widget-tab-view","constructor":function(e){e||(e={}),i.defaults(e,{"toolbar":!0,"searchTabContentForTabableElements":!0}),s.prototype.constructor.apply(this,arguments)}}),e.resolve()},e.reject),e.promise()},w=s.ItemView.extend({"className":"esoc-simple-user-widget-tab-view","template":h,"templateHelpers":function(){return{"uniqueId":this.options.uniqueId,"extraTabs":this.getExtraTabs(m),"messages":{"profile":f.profile,"settings":f.settings}}},"events":{"click .esoc-user-profile-tab":"showTab"},"behaviors":{"TabableRegionBehavior":{"behaviorClass":c}},"constructor":function(e){e=e||{},i.defaults(e,{"toolbar":!0,"tabClickedOnce":!1,"initialActivationWeight":1}),t(window).on("resize",{"view":this},this._onWindowResize),s.ItemView.prototype.constructor.call(this,e),this.uniqueId=i.uniqueId()},"onRender":function(e){var n=this;y().done(function(){n.propagateEventsToRegions();var e=new b(i.extend(n));e.tabLinks=new v(i.extend(n)),e.tabContent=new g(i.extend(n)),e.options=n.options,t.extend(n,e),n._initializeOthers()})},"onShow":function(){if(0===this.templateHelpers().extraTabs.length){this.options.userwidgetmodel=this.options.model;var e=new p(this.options);new s.Region({"el":this.$el.find("#esoc-simple-user-widget-form-body-"+this.options.uniqueId)}).show(e)}},"onAfterShow":function(){y()},"_onWindowResize":function(e){e&&e.data&&e.data.view&&e.data.view._enableToolbarState()},"_initializeOthers":function(){var e={"gotoPreviousTooltip":f.previous,"gotoNextTooltip":f.next};this._initializeToolbars(e),this._listenToTabEvent(),setTimeout(i.bind(this._enableToolbarState,this),300)},"saveOrDeclineAlert":function(e){var t=this;csui.require(["csui/dialogs/modal.alert/modal.alert"],function(i){i.confirmWarning(f.txtEnableContentMgt,f.hrdUnsaved,{"buttons":{"showYes":!0,"labelYes":f.lblSave,"showNo":!0,"labelNo":f.lblDiscard}}).done(function(e){t.options.context.canBeSavedDirectlyMethod&&"function"==typeof t.options.context.canBeSavedDirectlyMethod.saveContentMgtData&&t.options.context.canBeSavedDirectlyMethod.saveContentMgtData(!0)}).fail(function(){t.options.context.canBeSavedDirectlyAlert=!1,t.showTab(e)})})},"leaveOrCancelAlert":function(e,i){var n=t.Deferred(),o=this;csui.require(["csui/dialogs/modal.alert/modal.alert"],function(s){o.dialog=s.confirmQuestion("",f.txtLeaveContentMgt,{"buttons":{"showYes":!0,"labelYes":f.lblLeave,"showNo":!1,"showCancel":!0,"labelCancel":f.cancel}}).then(function(i){if(o.options.context.cannotMoveOutOfSettingPage=!1,o.settingTab){var n=o.settingTab.parentElement;n&&t(n).removeClass("binf-active")}o.showTab(e)},function(){if(o.settingTab){o.settingTab.focus();var e=o.settingTab.parentElement;e&&(i&&t(i.parentElement).removeClass("binf-active"),t(e).addClass("binf-active"))}n.resolve()})},n.reject)},"showTab":function(e){var t,i,n=document.activeElement;if(this.settingTab||(e.target.hash?(t=e.target.hash,i=e.target):e.target.parentElement&&e.target.parentElement.hash&&(t=e.target.parentElement.hash,i=e.target.parentElement),"#usersettings"===t&&(this.settingTab=i)),this.options.context.cannotMoveOutOfSettingPage)return e.preventDefault(),void this.leaveOrCancelAlert(e,n);this.options.context.canBeSavedDirectlyAlert&&this.saveOrDeclineAlert(e),u.showTab(e.currentTarget.id,"esoc-simple-user-widget-form-body-"+this.options.uniqueId,this.options,this);var o=this.$el.find("#"+e.currentTarget.id);o.find("a").attr("aria-selected",!0),o.siblings().find("a").attr("aria-selected",!1)},"getExtraTabs":function(e){var t=this;return e=i.flatten(e,!0),t.extraTabsShownCount=0,i.each(e,function(e){e.tabCount&&(e.tabCount.count=e.tabCount.getItemCount(t.model,t.options)),e.show=!0,e.showTab&&(e.show=e.showTab(t.model,t.options)),e.show&&(t.extraTabsShownCount+=1)}),e}});return i.extend(w.prototype,a),i.extend(w.prototype,d),w}),csui.define("hbs!esoc/widgets/userwidget/impl/simple.userwidget",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return" csui-side-panel-user-profile "},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"chatSettings"):t)?l(s,"presenceEnabled"):s,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":8},"end":{"line":11,"column":15}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"otherUser"):t,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":12,"column":8},"end":{"line":15,"column":15}}}))?s:"")},"4":function(e,t,i,n,o){return'          <div id="esoc-user-profile-presence-indicator" class="esoc-user-profile-presence-indicator binf-col-lg-12 binf-col-md-12 binf-col-sm-12\r\n    binf-col-xs-12"></div>\r\n'},"6":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div role="button" class="esoc-user-profile-chat-comment" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"chatLabel")||(null!=t?l(t,"chatLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"chatLabel","hash":{},"loc":{"start":{"line":13,"column":80},"end":{"line":13,"column":93}}}):s))+'"\r\n               tabindex="0" data-cstabindex="0"></div>\r\n'},"8":function(e,t,i,n,o){return" esoc-full-profile-avatar-cursor "},"10":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="edit-user-image-placeholder edit-user"></span>\r\n            <input type="file" id="esoc-profilepic-desktop-attachment"\r\n                   class="esoc-profilepic-desktop-attachment" name="updateProfilePic" accept="image/*"\r\n                   aria-label="'+e.escapeExpression((s=null!=(s=l(i,"simpleUserProfileLabel")||(null!=t?l(t,"simpleUserProfileLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"simpleUserProfileLabel","hash":{},"loc":{"start":{"line":34,"column":31},"end":{"line":34,"column":57}}}):s))+'"/>\r\n\r\n            <div class="esoc-simple-profile-img-load-container esoc-social-progress-style">\r\n                <div class="esoc-simple-profile-img-outer-border">\r\n                    <div class="esoc-simple-profile-img-loader">\r\n                        <div class="esoc-simple-profile-img-inner-border"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n'},"12":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div\r\n            class="esoc-user-title binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":50,"column":96},"end":{"line":50,"column":105}}}):s))+"</div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="esoc-simple-user-widget '+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"sidePanel"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":36},"end":{"line":1,"column":90}}}))?s:"")+'">\r\n  <div class="esoc-simple-user-widget-header">\r\n    <div class="cs-close binf-close esoc-user-widget-dialog-close" role="button"\r\n         title="'+e.escapeExpression((l=null!=(l=a(i,"dialogCloseButtonTooltip")||(null!=t?a(t,"dialogCloseButtonTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"dialogCloseButtonTooltip","hash":{},"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":44}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=a(i,"closeDialogLabel")||(null!=t?a(t,"closeDialogLabel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"closeDialogLabel","hash":{},"loc":{"start":{"line":4,"column":58},"end":{"line":4,"column":78}}}):l))+'" tabindex="0"\r\n         data-cstabindex="0"></div>\r\n    <div class="esoc-userprofile-pic-actions">\r\n'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?a(t,"chatSettings"):t)?a(s,"chatEnabled"):s,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":6},"end":{"line":16,"column":13}}}))?s:"")+'      <span role="button" class="'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"otherUser"):t,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(8,o,0),"loc":{"start":{"line":17,"column":33},"end":{"line":17,"column":90}}}))?s:"")+"\r\n      image_user_placeholder esoc-userprofile-default-avatar esoc-full-profile-avatar-update\r\n    esoc-user-default-avatar-"+e.escapeExpression((l=null!=(l=a(i,"userid")||(null!=t?a(t,"userid"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"userid","hash":{},"loc":{"start":{"line":19,"column":29},"end":{"line":19,"column":39}}}):l))+'" id="esoc-simple-user-default-avatar-'+e.escapeExpression((l=null!=(l=a(i,"uniqueId")||(null!=t?a(t,"uniqueId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"uniqueId","hash":{},"loc":{"start":{"line":19,"column":77},"end":{"line":19,"column":89}}}):l))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"displayname"):s,t))+'" aria-label="'+e.escapeExpression((l=null!=(l=a(i,"simpleUserProfileLabel")||(null!=t?a(t,"simpleUserProfileLabel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"simpleUserProfileLabel","hash":{},"loc":{"start":{"line":20,"column":34},"end":{"line":20,"column":60}}}):l))+'" tabindex="0"\r\n            data-cstabindex="0">'+e.escapeExpression((l=null!=(l=a(i,"initials")||(null!=t?a(t,"initials"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"initials","hash":{},"loc":{"start":{"line":21,"column":32},"end":{"line":21,"column":44}}}):l))+'</span>\r\n      <img role="button" class="'+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"otherUser"):t,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(8,o,0),"loc":{"start":{"line":22,"column":32},"end":{"line":22,"column":89}}}))?s:"")+"\r\n      esoc-full-profile-avatar\r\n    esoc-full-profile-avatar-update binf-img-circle esoc-image\r\n    esoc-upload-image-style\r\n    esoc-userprofile-img-"+e.escapeExpression((l=null!=(l=a(i,"userid")||(null!=t?a(t,"userid"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"userid","hash":{},"loc":{"start":{"line":26,"column":25},"end":{"line":26,"column":35}}}):l))+'" id="esoc-simple-user-image-avatar-'+e.escapeExpression((l=null!=(l=a(i,"uniqueId")||(null!=t?a(t,"uniqueId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"uniqueId","hash":{},"loc":{"start":{"line":26,"column":71},"end":{"line":26,"column":83}}}):l))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"displayname"):s,t))+'" alt="'+e.escapeExpression(e.lambda(null!=(s=null!=t?a(t,"messages"):t)?a(s,"displayname"):s,t))+'" aria-label="'+e.escapeExpression((l=null!=(l=a(i,"simpleUserProfileLabel")||(null!=t?a(t,"simpleUserProfileLabel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"simpleUserProfileLabel","hash":{},"loc":{"start":{"line":27,"column":65},"end":{"line":27,"column":91}}}):l))+'"\r\n           tabindex="0" data-cstabindex="0" src="#"/>\r\n\r\n'+(null!=(s=(a(i,"xif")||t&&a(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.isEnableUploadProfilePicture && !this.otherUser",{"name":"xif","hash":{},"fn":e.program(10,o,0),"inverse":e.noop,"loc":{"start":{"line":30,"column":8},"end":{"line":43,"column":16}}}))?s:"")+'    </div>\r\n\r\n    <div class="esoc-user-name binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      '+e.escapeExpression((l=null!=(l=a(i,"display_name")||(null!=t?a(t,"display_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"display_name","hash":{},"loc":{"start":{"line":47,"column":6},"end":{"line":47,"column":22}}}):l))+"\r\n"+(null!=(s=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"title"):t,{"name":"if","hash":{},"fn":e.program(12,o,0),"inverse":e.noop,"loc":{"start":{"line":48,"column":6},"end":{"line":51,"column":13}}}))?s:"")+'    </div>\r\n  </div>\r\n  <div class="esoc-simple-user-widget-body">\r\n    <div class="esoc-simple-user-widget-tabs"></div>\r\n  </div>\r\n  <div class="esoc-simple-user-widget-footer"></div>\r\n</div>\r\n<div class="esoc-simple-user-widget-backdrop"></div>\r\n'}});return i.registerPartial("esoc_widgets_userwidget_impl_simple.userwidget",n),n}),csui.define("hbs!esoc/widgets/userwidget/impl/edit.profile.photo",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="esoc-simple-user-profile-pic-update">\r\n  <div class="esoc-simple-user-profile-pic-edit\r\n  esoc-profile-pic-edit" role="button" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"uploadProfilePicture")||(null!=t?l(t,"uploadProfilePicture"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"uploadProfilePicture","hash":{},"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":75}}}):s))+'"\r\n       tabindex="-1">'+e.escapeExpression((s=null!=(s=l(i,"uploadProfilePicture")||(null!=t?l(t,"uploadProfilePicture"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"uploadProfilePicture","hash":{},"loc":{"start":{"line":4,"column":21},"end":{"line":4,"column":45}}}):s))+'</div>\r\n  <div class="esoc-simple-user-profile-pic-delete\r\n  esoc-profile-pic-edit" role="button" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"deleteProfilePicture")||(null!=t?l(t,"deleteProfilePicture"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"deleteProfilePicture","hash":{},"loc":{"start":{"line":6,"column":51},"end":{"line":6,"column":75}}}):s))+'"\r\n       tabindex="-1">'+e.escapeExpression((s=null!=(s=l(i,"deleteProfilePicture")||(null!=t?l(t,"deleteProfilePicture"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"deleteProfilePicture","hash":{},"loc":{"start":{"line":7,"column":21},"end":{"line":7,"column":45}}}):s))+"</div>\r\n</div>"}});return i.registerPartial("esoc_widgets_userwidget_impl_edit.profile.photo",n),n}),csui.define("esoc/widgets/userwidget/view/simple.userwidget.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/handlebars","csui/lib/marionette","csui/utils/url","csui/controls/form/fields/userfield.view","csui/utils/user.avatar.color","esoc/widgets/userwidget/model/extended.model","esoc/widgets/userwidget/userprofile","esoc/widgets/userwidget/util","esoc/widgets/userwidget/view/extendedinfotextfield.view","esoc/widgets/userwidget/chat/view/presence.view","esoc/widgets/userwidget/chat/chatfactory","esoc/widgets/utils/chat/impl/util","esoc/widgets/userwidget/view/simple.userwidget.form.view","esoc/widgets/userwidget/view/simple.userwidget.tabs.view","hbs!esoc/widgets/userwidget/impl/simple.userwidget","hbs!esoc/widgets/userwidget/impl/edit.profile.photo","i18n!esoc/widgets/userwidget/nls/lang","css!esoc/widgets/userwidget/impl/userwidget.css"],function(e,t,i,n,o,s,l,a,r,c,d,u,p,m,h,f,g,b,v,y){return o.ItemView.extend({"className":"esoc-simple-user-widget-view","template":b,"editProfilePhotoTemplate":v,"util":d,"ui":{"initialsPlaceholder":".image_user_placeholder","userProfileClose":".esoc-user-widget-dialog-close"},"templateHelpers":function(){
var e=this.options.model.attributes.extendedInfo,t=!this.options.model.attributes.otherUser&&!!e&&e.isEditable,i=this.model.attributes.chatSettings&&this.model.attributes.chatSettings.chatEnabled,n=i&&this.model.attributes.chatSettings.presenceEnabled&&this.options.showPresenceIndicator;return{"uniqueId":this.uniqueId,"sidePanel":this.options.sidePanel,"messages":{"displayname":this.model.attributes.display_name?this.model.attributes.display_name:this.options.display_name,"showReportsTo":t||!!e&&!!e.reportsTo},"simpleUserProfileLabel":y.simpleUserProfileLabel,"isEnableUploadProfilePicture":!!this.options.enableUploadProfilePicture,"dialogCloseButtonTooltip":y.dialogCloseButtonTooltip,"chatLabel":y.chatLabel,"closeDialogLabel":y.closeDialogLabel,"chatSettings":{"chatEnabled":i,"presenceEnabled":n}}},"events":{"mouseover .esoc-simple-user-widget-header .edit-user":"onMouseoverProfilePic","mouseout .edit-user":"onMouseoutProfilePic","focusin .edit-user":"onMouseoverProfilePic","focusout .edit-user":"onMouseoutProfilePic","click .esoc-simple-user-widget-header .edit-user":"editProfilePhoto","click .esoc-user-profile-chat-comment":"launchChatWindow","keydown .esoc-user-profile-chat-comment":"launchChatWindow","click .csui-side-panel-user-profile .esoc-user-widget-dialog-close":"closeSimpleUserWidgetUponClick","keydown .esoc-user-widget-dialog-close":"closeSimpleUserWidget","click .esoc-simple-user-profile-pic-edit":"uploadPhoto","click .esoc-simple-user-profile-pic-delete":"deletePhoto","keydown .esoc-simple-user-profile-pic-edit":"uploadPhoto","keydown .esoc-simple-user-profile-pic-delete":"deletePhoto","keydown":"onKeyDown"},"onKeyDown":function(t){if(9===t.keyCode||t.shiftKey){var i=this.$el.find(this.focusablesSelector).filter(":visible");t.target===i[0]&&t.shiftKey&&9===t.which?(this.options.sidePanel?e(".cs-footer-btn.binf-btn").trigger("focus"):i.last().trigger("focus"),t.preventDefault(),t.stopPropagation()):t.target!==i[i.length-1]||t.shiftKey?t.target===e("#csui-side-panel-cancel")[0]&&(t.shiftKey&&9===t.which?i.last().trigger("focus"):9===t.keyCode&&i.first().trigger("focus"),t.preventDefault(),t.stopPropagation()):(this.options.sidePanel?e(".cs-footer-btn.binf-btn").trigger("focus"):i.first().trigger("focus"),t.preventDefault(),t.stopPropagation())}},"initialize":function(e){if(this.options=e,!this.options.model.attributes.isError){var n=(i.Model.extend({}),this.templateHelpers().messages,this.model.attributes.extendedInfo);this.model.attributes.userid,this.options.connector,!this.model.attributes.otherUser&&!!n&&n.isEditable}this.uniqueId=t.uniqueId();var o="mouseover #esoc-simple-user-default-avatar-"+this.uniqueId;this.events[o]="onMouseoverProfilePic";var s="focusin #esoc-simple-user-default-avatar-"+this.uniqueId;this.events[s]="onMouseoverProfilePic";var l="mouseout #esoc-simple-user-default-avatar-"+this.uniqueId;this.events[l]="onMouseoutProfilePic";var a="focusout #esoc-simple-user-default-avatar-"+this.uniqueId;this.events[a]="onMouseoutProfilePic";var r="keydown #esoc-simple-user-default-avatar-"+this.uniqueId;this.events[r]="editProfilePhoto";this.uniqueId;this.events[o]="onMouseoverProfilePic";var c="focusin #esoc-simple-user-image-avatar-"+this.uniqueId;this.events[c]="onMouseoverProfilePic";var d="mouseout #esoc-simple-user-image-avatar-"+this.uniqueId;this.events[d]="onMouseoutProfilePic";var u="focusout #esoc-simple-user-image-avatar-"+this.uniqueId;this.events[u]="onMouseoutProfilePic";var p="keydown #esoc-simple-user-image-avatar-"+this.uniqueId;this.events[p]="editProfilePhoto",this.focusablesSelector="a[href], area[href], input:not([disabled]), select:not([disabled]),textarea:not([disabled]),  button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",this.delegateEvents()},"constructor":function(e){e=e||{};var i=t.extend({},e);i.model=new r(i),i.model.fetch({"success":i.model.fetchSuccess,"error":i.model.fetchError,"async":!1}),o.ItemView.prototype.constructor.call(this,i),this.listenTo(this,"render",this._assignUserColor),this.listenTo(this,"sidepanel:keydown",this.onKeyDown)},"onShow":function(e){var i=new o.Region({"el":this.$el.find(".esoc-simple-user-widget-tabs")});this.options.uniqueId=t.uniqueId();var n=new g(this.options);i.show(n),n.triggerMethod("after:show"),i.$el.find("#esoc-simple-user-profile-tab-"+this.options.uniqueId).trigger("click");var s=this.options.model.id?this.options.model.id:this.options.userid,l={"userid":s,"context":this.options.context,"photoElement":this.$el.find(".esoc-userprofile-img-"+d.escapeSelector(s)),"defaultPhotElement":this.$el.find(".esoc-user-default-avatar-"+d.escapeSelector(s)),"parentView":this,"viewShownEvent":!0};if(this.util.commonUtil.setProfilePic(l),this.model.attributes.chatSettings&&this.model.attributes.chatSettings.chatEnabled&&this.model.attributes.chatSettings.presenceEnabled&&this.options.showPresenceIndicator){var a={"id":this.model.attributes.id,"context":this.options.context,"username":this.model.attributes.name,"subscribeEvent":!0},r=new o.Region({"el":this.$el.find("#esoc-user-profile-presence-indicator")});m.initializeApplication(this.options).promise().done(function(){var e=new p(a);r.show(e)})}this.options.enableUploadProfilePicture&&!this.model.attributes.otherUser||(this.$el.find("#esoc-simple-user-default-avatar-"+this.uniqueId).attr("tabindex","-1"),this.$el.find("#esoc-simple-user-image-avatar-"+this.uniqueId).attr("tabindex","-1")),n.extraTabsShownCount||this.$el.find(".esoc-simple-user-widget-tabs .tab-links-header").hide()},"uploadPhoto":function(t){if(!this.processKeyEvent(t)){var i=this,n=this.$el.find("#esoc-profilepic-desktop-attachment");n.off("change").on("change",function(t){if(n.val().length>0){var o=new FormData,l=n[0].files[0];l&&o.append("photo",l),i.$el.find(".esoc-userprofile-actions .esoc-full-profile-avatar").addClass("esoc-profile-opacity"),i.$el.find(".esoc-userprofile-actions .esoc-profile-img-load-container").addClass("esoc-progress-display"),e(".esoc-simple-profile-img-load-container").addClass("esoc-simple-profile-img-load-icon");var a=i.options.connector.getConnectionUrl().getApiBase("v2"),r={"itemview":i,"url":s.combine(a,i.util.commonUtil.REST_URLS.updatePhotoUrl),"type":"POST","requestType":"updatePhoto","data":o,"targetElement":t.target,"connector":i.options.connector};i.util.commonUtil.updateAjaxCall(r)}}),t.preventDefault(),n.trigger("click"),this.$el.find(".edit-user").css("opacity","0"),this.$el.find(".esoc-full-profile-avatar-cursor").trigger("focus")}},"editProfilePhoto":function(t){if(!this.processKeyEvent(t))if(this.$el.find(".esoc-simple-user-edit-pic-popover").is(":visible"))this.popoverTarget.binf_popover("destroy");else{var i=this,n=function(e){return e.is(":visible")?e.offset():{"top":0,"left":0}};if(i.options.enableUploadProfilePicture&&i.model.attributes.photo_url){this.popoverTarget=i.$el.find(".edit-user");var o={"uploadProfilePicture":y.uploadProfilePicture,"deleteProfilePicture":y.deleteProfilePicture},s=this.editProfilePhotoTemplate(o);this.popoverTarget.binf_popover({"content":s,"html":!0,"placement":function(t,o){e(t).addClass("esoc-simple-user-edit-pic-popover");var s=e("<div/>").addClass("esoc-simple-user-edit-pic-popover binf-popover esoc-simple-user-edit-pic-popover-temp-div").append(i.editProfilePhotoTemplate);i.popoverTarget.find(".edit-user").append(s);var l=e(".esoc-simple-user-edit-pic-popover-temp-div").height()+40;e(".esoc-simple-user-edit-pic-popover-temp-div").width();s.remove();var a=n(e(o)),r=a.top;return e(window).height()-(r+i.popoverTarget.outerHeight(!0))>l?"bottom":r>l?"top":"auto"}}),this.popoverTarget.binf_popover("show"),e("*").one("scroll",function(){i.popoverTarget.binf_popover("destroy")}),e(".esoc-simple-user-widget-dialog").on("click",function(t){e(".esoc-simple-user-widget-dialog [aria-describedby]").each(function(){i.popoverTarget.is(t.target)||0!==i.popoverTarget.has(t.target).length||0!==e(".binf-popover").has(t.target).length||i.popoverTarget.binf_popover("destroy")})}),e(".esoc-simple-user-widget-dialog .csui-icon-edit").on("click",function(e){i.popoverTarget.binf_popover("destroy")}),e(".esoc-simple-user-widget-dialog .btn-container").on("click",function(e){i.popoverTarget.binf_popover("destroy")}),this.$el.find(".esoc-simple-user-profile-pic-update").on("keydown",function(t){var n=t.keyCode||t.which;13!==n&&(t.preventDefault(),t.stopPropagation()),27===n&&(i.popoverTarget.binf_popover("destroy"),i.popoverTarget.siblings("img").first().trigger("focus")),t.target.classList.contains("esoc-simple-user-profile-pic-edit")?40!==n&&38!==n||e(".esoc-simple-user-profile-pic-delete").trigger("focus"):t.target.classList.contains("esoc-simple-user-profile-pic-delete")&&(40!==n&&38!==n||e(".esoc-simple-user-profile-pic-edit").trigger("focus"))}),this.$el.find(".esoc-simple-user-profile-pic-edit").trigger("focus"),this.$el.find(".esoc-simple-user-profile-pic-edit").attr("tabindex","0"),this.$el.find(".esoc-simple-user-profile-pic-delete").attr("tabindex","0")}else this.uploadPhoto(t)}},"deletePhoto":function(e){if(!this.processKeyEvent(e)){this.popoverTarget.binf_popover("destroy");var t=this.options.connector.getConnectionUrl().getApiBase("v2"),i={"itemview":this,"url":s.combine(t,this.util.commonUtil.REST_URLS.deletePhotoUrl),"type":"DELETE","requestType":"deletePhoto","targetElement":e.target,"connector":this.options.connector};this.util.commonUtil.updateAjaxCall(i)}},"onMouseoverProfilePic":function(){this.$el.find(".edit-user").css("opacity","1")},"onMouseoutProfilePic":function(){this.$el.find(".edit-user").css("opacity","0")},"launchChatWindow":function(e){this.processKeyEvent(e)||(this.options.tguser=this.options.model.get("name"),this.options.domain=this.options.model.get("chatSettings")&&this.options.model.get("chatSettings").chatDomain,h.launchChatWindow(this.options))},"onDestroy":function(){var t=this.options.targetEle;t&&e(t).is(":visible")?e(t).trigger("focus"):t||(t=e(".nav-profile"))&&t.length&&t.trigger("focus"),this.$el.find(".esoc-simple-user-profile-pic-update").off("keydown"),this.$el.hasClass("csui-dialog-page-reload")&&location.reload()},"closeSimpleUserWidget":function(t){if(!this.processKeyEvent(t)){e(t.target).trigger("click")}},"saveOrDeclineAlert":function(e){var t=this;csui.require(["csui/dialogs/modal.alert/modal.alert"],function(i){i.confirmWarning(y.txtEnableContentMgt,y.hrdUnsaved,{"buttons":{"showYes":!0,"labelYes":y.lblSave,"showNo":!0,"labelNo":y.lblDiscard}}).done(function(){t.options.context.canBeSavedDirectlyMethod&&"function"==typeof t.options.context.canBeSavedDirectlyMethod.saveContentMgtData&&t.options.context.canBeSavedDirectlyMethod.saveContentMgtData(!0)}).fail(function(){t.options.context.canBeSavedDirectlyAlert=!1,t.closeSimpleUserWidgetUponClick(e)})})},"leaveOrCancelAlert":function(t){var i=e.Deferred(),n=this;csui.require(["csui/dialogs/modal.alert/modal.alert"],function(e){n.dialog=e.confirmQuestion("",y.txtLeaveContentMgt,{"buttons":{"showYes":!0,"labelYes":y.lblLeave,"showNo":!1,"showCancel":!0,"labelCancel":y.cancel}}).then(function(e){n.options.context.cannotMoveOutOfSettingPage=!1,n.closeSimpleUserWidgetUponClick(t)},function(){i.resolve()})},i.reject)},"closeSimpleUserWidgetUponClick":function(e){return this.options.context.cannotMoveOutOfSettingPage?void this.leaveOrCancelAlert(e):this.options.context.canBeSavedDirectlyAlert?void this.saveOrDeclineAlert(e):void this.trigger("destroy")},"processKeyEvent":function(e){if("keydown"===e.type){var t=e.keyCode||e.which;if(32!==t&&13!==t)return!0}return!1},"_assignUserColor":function(){var e=a.getUserAvatarColor(this.model.attributes);this.ui.initialsPlaceholder.css("background","#FFFFFF"),this.ui.initialsPlaceholder.css("color",e)}})}),csui.define("json!esoc/widgets/activityfeedwidget/activityfeedwidget.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{title}}","description":"{{description}}","kind":"tile","schema":{"type":"object","properties":{"wrapperClass":{"title":"{{wrapperClassTitle}}","description":"{{wrapperClassDescription}}","type":"string","default":""},"feedsize":{"title":"{{feedSizeTitle}}","description":"{{feedSizeDescription}}","type":"number","default":20},"feedtype":{"title":"{{feedTypeTitle}}","description":"{{feedTypeDescription}}","type":"string","default":"all","enum":["all","content","status","attribute"]},"feedSettings":{"title":"{{feedSettingsTitle}}","description":"{{feedSettingsDescription}}","type":"object","properties":{"enableComments":{"title":"{{enableCommentsTitle}}","description":"{{enableCommentsDescription}}","type":"boolean","default":!0},"enableFilters":{"title":"{{enableFiltersTitle}}","description":"{{enableFiltersDescription}}","type":"boolean","default":!1}}},"honorfeedsource":{"title":"{{honorfeedsourceTitle}}","description":"{{honorfeedsourceDescription}}","type":"boolean","default":!1},"headerView":{"title":"{{headerViewTitle}}","description":"{{headerViewDescription}}","type":"boolean","default":!1},"feedsource":{"title":"{{feedsourceTitle}}","description":"{{feedsourceDescription}}","type":"object","properties":{"source":{"title":"{{sourceTitle}}","description":"{{sourceDescription}}","type":"string","default":"all","enum":["all","node","pulsefrom"]},"id":{"title":"{{feedsourceIdTitle}}","description":"{{feedsourceIdDescription}}","type":"integer"}}},"updatesfrom":{"title":"{{updatesfromTitle}}","description":"{{updatesfromDescription}}","type":"object","properties":{"from":{"title":"{{fromTitle}}","description":"{{fromDescription}}","type":"string","default":"all","enum":["all","iamfollowing","myfollowers","following","followers","myupdates","mentions","myfavorites","user","group"]},"id":{"title":"{{updatesfromIdTitle}}","description":"{{updatesfromIdDescription}}","type":"string","default":""}}},"config_settings":{"title":"{{configSettingsTitle}}","description":"{{configSettingsDescription}}","type":"object","properties":{"feedsAutoRefreshWait":{"title":"{{feedsAutoRefreshWaitTitle}}","description":"{{feedsAutoRefreshWaitDescription}}","type":"number","default":6e4},"maxMessageLength":{"title":"{{maxMessageLengthTitle}}","description":"{{maxMessageLengthDescription}}","type":"number","default":1e3}}}}},"options":{"fields":{"feedtype":{"optionLabels":["{{feedTypeAll}}","{{feedTypeContent}}","{{feedTypeStatus}}","{{feedTypeAttribute}}"]},"feedsource":{"fields":{"source":{"optionLabels":["{{sourceAll}}","{{sourceNode}}","{{sourcePulseFrom}}"]},"id":{"type":"otcs_node_picker"}}},"updatesfrom":{"fields":{"from":{"optionLabels":["{{fromAll}}","{{fromIamfollowing}}","{{fromMyfollowers}}","{{fromFollowing}}","{{fromFollowers}}","{{fromMyupdates}}","{{fromMentions}}","{{fromMyFavorites}}","{{fromUser}}","{{fromGroup}}"]}}}}}}),csui.define("esoc/widgets/activityfeedwidget/impl/nls/activityfeedwidget.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("esoc/widgets/activityfeedwidget/impl/nls/root/activityfeedwidget.manifest",{"title":"Activity Feed","description":"Shows activity feeds for the given option parameters.","wrapperClassTitle":"Wrapper class","wrapperClassDescription":"Wrapper class to be apply on top of activity feed list","feedSizeTitle":"Feed size","feedSizeDescription":"Number of feed items to be fetched per page","feedTypeTitle":"Feed type","feedTypeDescription":"Type of the feeds that should be consider","feedTypeAll":"All","feedTypeContent":"Content","feedTypeStatus":"Status","feedTypeAttribute":"Attribute","feedSettingsTitle":"Feed settings","feedSettingsDescription":"Feed settings to be considered","enableCommentsTitle":"Enable comments","enableCommentsDescription":"Whether to show comment button or not respective to each feed","enableFiltersTitle":"Enable filters","enableFiltersDescription":"Whether to show filter panel at left side or not in expanded view","honorfeedsourceTitle":"Honor feed source","honorfeedsourceDescription":"Whether to consider pulsefrom or consider widget options as feed source","headerViewTitle":"Dark theme","headerViewDescription":"Show feeds in horizontal view with dark theme","feedsourceTitle":"Feed source","feedsourceDescription":"Source for the feed to be considered","sourceTitle":"Source","sourceDescription":"Consider feed source as all or node or pulsefrom","sourceAll":"All","sourceNode":"Node","sourcePulseFrom":"Pulsefrom","feedsourceIdTitle":"id","feedsourceIdDescription":"Object id to be consider as feed source and applicable only when feedsource.source is either node or pulsefrom","updatesfromTitle":"Updates from","updatesfromDescription":"Feed updates from all/iamfollowing/myfollowers/following/followers/myupdates/mentions/myfavorites/user/group","fromTitle":"From","fromDescription":"Consider feed updates from different available sources","fromAll":"All","fromIamfollowing":"Users I am following","fromMyfollowers":"My followers","fromFollowing":"Following","fromFollowers":"Followers","fromMyupdates":"My own updates","fromMentions":"@Mentions","fromMyFavorites":"My favorites","fromUser":"User","fromGroup":"Group","updatesfromIdTitle":"id","updatesfromIdDescription":"User id or group id and applicable only if updatesfrom.from is following/followers/user/group","configSettingsTitle":"Config settings","configSettingsDescription":"Widget instance level config settings","feedsAutoRefreshWaitTitle":"Activity feed auto refresh wait","feedsAutoRefreshWaitDescription":"Auto feed refresh interval time","maxMessageLengthTitle":"Maximum message length","maxMessageLengthDescription":"Maximum text length should be allowed while posting a comment or reply"}),csui.define("bundles/esoc-all",["esoc/controls/userwidget/userwidget.view","esoc/widgets/utils/commentdialog/commentdialog","esoc/widgets/utils/commentdialog/commentdialog.view","esoc/widgets/utils/command/comment/comment.toolitem.view","esoc/commands/comment/comment.command","esoc/commands/open.roi","esoc/widgets/utils/esocactionitems","esoc/widgets/utils/esocnodesprites","esoc/controls/icons/esoc.icons.v2","esoc/widgets/socialactions/socialactions.main","esoc/widgets/activityfeedwidget/activityfeedwidget.view","esoc/widgets/activityfeedwidget/activityfeedfactory","esoc/widgets/activityfeedwidget/activityfeedcontent","esoc/widgets/tablecell/tablecell.view","esoc/widgets/tablecell/thumbnail.content.view","esoc/widgets/userwidget/userwidget","esoc/widgets/userwidget/view/userprofile.view","esoc/widgets/userwidget/view/miniprofile.view","esoc/widgets/userwidget/view/simple.userwidget.view","json!esoc/widgets/activityfeedwidget/activityfeedwidget.manifest.json","i18n!esoc/widgets/activityfeedwidget/impl/nls/activityfeedwidget.manifest"],{}),csui.require(["require","css"],function(e,t){t.styleLoad(e,"esoc/bundles/esoc-all",!0)});
//# sourceMappingURL=esoc-all.js.map