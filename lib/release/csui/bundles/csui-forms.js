csui.define("csui/lib/alpaca/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/lib/alpaca/nls/root/lang",{"empty":"","required":"This field is required.","valid":"","invalid":"This field is invalid.","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"timeUnits":{"SECOND":"seconds","MINUTE":"minutes","HOUR":"hours","DAY":"days","MONTH":"months","YEAR":"years"},"notOptional":"This is a required field.","disallowValue":"{0} are disallowed values.","invalidValueOfEnum":"This field should have one of the values in {0}.  Current value is: {1}","notEnoughItems":"The minimum number of items is {0}","tooManyItems":"The maximum number of items is {0}","valueNotUnique":"Values must be unique.","notAnArray":"This value is not an Array","invalidDate":"Invalid date format.","invalidEmail":"Invalid Email format.","stringNotAnInteger":"This value must be an integer.","invalidIPv4":"Invalid IPv4 address. A valid format is 123.456.0.1","stringValueTooSmall":"The minimum value for this field is {0}.","stringValueTooLarge":"The maximum value for this field is {0}.","stringValueTooSmallExclusive":"Enter a value greater than {0}.","stringValueTooLargeExclusive":"Enter a value less than {0}.","stringDivisibleBy":"The value must be divisible by {0}.","stringNotANumber":"This value must be a number.","stringValueNotMultipleOf":"This value must be a multiple of {0}.","invalidPassword":"Invalid Password","invalidPhone":"Invalid Phone Number, e.g. (123) 456-9999","invalidPattern":"This field must have pattern {0}.","stringTooShort":"This field must contain at least {0} numbers or characters.","stringTooLong":"This field must not contain more than {0} characters","noneLabel":"None","addItemButtonLabel":"Add New Item","addButtonLabel":"Add","removeButtonLabel":"Remove","upButtonLabel":"Up","downButtonLabel":"Down","webAddressNeeded":"Web addess needs to be added."}),csui.define("csui/lib/alpaca/js/alpaca.lite",["csui/lib/jquery","csui/lib/handlebars","csui/lib/moment","i18n!csui/lib/alpaca/nls/lang","csui/lib/binf/js/binf"],function($,Handlebars,moment,lang){function findElementFromCollection(e,t){var i=[];if(e&&e.length>0)for(var n=0;n<e.length;n++)if(e[n]instanceof HTMLElement){var l=e[n].querySelectorAll(t);l=Array.prototype.slice.call(l),i=i.concat(l)}return i}var jQuery=$;return this.HandlebarsPrecompiled=this.HandlebarsPrecompiled||{},this.HandlebarsPrecompiled["web-display"]=this.HandlebarsPrecompiled["web-display"]||{},this.HandlebarsPrecompiled["web-display"]["container-array-item"]=Handlebars.template({"1":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o='<script type="text/x-handlebars-template">\n\n    <div>\n        ';return a=null!=(a=t.itemField||(null!=e?e.itemField:e))?a:t.helperMissing,s={"name":"itemField","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.itemField||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n    </div>\n\n<\/script>\n"},"useData":!0}),this.HandlebarsPrecompiled["web-display"]["container-array"]=Handlebars.template({"1":function(e,t,i,n){var l,a,s,o="\n            ";return a=null!=(a=t.item||(null!=e?e.item:e))?a:t.helperMissing,s={"name":"item","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.item||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n\n"},"2":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l;return'<script type="text/x-handlebars-template">\n\n    <div>\n\n'+(null!=(l=t.each.call(e,null!=e?e.items:e,{"name":"each","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-display"]["container-object-item"]=Handlebars.template({"1":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o='<script type="text/x-handlebars-template">\n\n    <div>\n        ';return a=null!=(a=t.itemField||(null!=e?e.itemField:e))?a:t.helperMissing,s={"name":"itemField","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.itemField||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n    </div>\n\n<\/script>\n"},"useData":!0}),this.HandlebarsPrecompiled["web-display"]["container-object"]=Handlebars.template({"1":function(e,t,i,n){var l,a,s,o="\n            ";return a=null!=(a=t.item||(null!=e?e.item:e))?a:t.helperMissing,s={"name":"item","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.item||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n\n"},"2":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l;return'<script type="text/x-handlebars-template">\n\n    <div>\n\n'+(null!=(l=t.each.call(e,null!=e?e.items:e,{"name":"each","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-display"]["container-table-item"]=Handlebars.template({"1":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l;return'<script type="text/x-handlebars-template">\n\n    <tr>\n        '+(null!=(l=(t.itemField||e&&e.itemField||t.helperMissing).call(e,"td",{"name":"itemField","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n    </tr>\n\n\n<\/script>\n"},"useData":!0}),this.HandlebarsPrecompiled["web-display"]["container-table"]=Handlebars.template({"1":function(e,t,i,n){return""},"3":function(e,t,i,n){var l;return"                    <th>"+this.escapeExpression(this.lambda(null!=(l=null!=e?e.value:e)?l.title:l,e))+"</th>\n"},"5":function(e,t,i,n){var l;return"\n                "+(null!=(l=(t.item||e&&e.item||t.helperMissing).call(e,"tr",{"name":"item","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o=t.helperMissing,r='<script type="text/x-handlebars-template">\n\n    <div>\n\n        ';return a=null!=(a=t.arrayToolbar||(null!=e?e.arrayToolbar:e))?a:o,s={"name":"arrayToolbar","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.arrayToolbar||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(r+=l),r+"\n\n        <table>\n\n            \x3c!-- table headers --\x3e\n            <thead>\n                <tr>\n"+(null!=(l=(t.eachProperty||e&&e.eachProperty||o).call(e,null!=(l=null!=(l=null!=e?e.schema:e)?l.items:l)?l.properties:l,{"name":"eachProperty","hash":{},"fn":this.program(3,n,0),"inverse":this.noop,"data":n}))?l:"")+"                </tr>\n            </thead>\n\n            \x3c!-- table body --\x3e\n            <tbody>\n"+(null!=(l=t.each.call(e,null!=e?e.items:e,{"name":"each","hash":{},"fn":this.program(5,n,0),"inverse":this.noop,"data":n}))?l:"")+"            </tbody>\n\n        </table>\n\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-display"]["container-tablerow-item"]=Handlebars.template({"1":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o='<script type="text/x-handlebars-template">\n\n    <td>\n        ';return a=null!=(a=t.itemField||(null!=e?e.itemField:e))?a:t.helperMissing,s={"name":"itemField","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.itemField||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n    </td>\n\n<\/script>\n"},"useData":!0}),this.HandlebarsPrecompiled["web-display"]["container-tablerow"]=Handlebars.template({"1":function(e,t,i,n){var l,a,s,o="            ";return a=null!=(a=t.item||(null!=e?e.item:e))?a:t.helperMissing,s={"name":"item","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.item||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n"},"2":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l;return'<script type="text/x-handlebars-template">\n\n    <div class="alpaca-merge-up">\n\n'+(null!=(l=t.each.call(e,null!=e?e.items:e,{"name":"each","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-display"].container=Handlebars.template({"1":function(e,t,i,n){var l;return'        <label class="'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.labelClass:l,{"name":"if","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n}))?l:"")+' alpaca-container-label">'+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.label:l,e))?l:"")+"</label>\n"},"2":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.labelClass:l,e))},"4":function(e,t,i,n){var l;return'        <p class="alpaca-helper '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helperClass:l,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.noop,"data":n}))?l:"")+'">\n            <i class="alpaca-icon-helper"></i>\n            '+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.helper:l,e))?l:"")+"\n        </p>\n"},"5":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.helperClass:l,e))},"7":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o='<script type="text/x-handlebars-template">\n\n    <div>\n\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.label:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n"+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helper:l,{"name":"if","hash":{},"fn":this.program(4,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n        ";return a=null!=(a=t.container||(null!=e?e.container:e))?a:t.helperMissing,s={"name":"container","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.container||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-display"]["control-any"]=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l;return'<script type="text/x-handlebars-template">\n\n    <div>'+(null!=(l=(t.str||e&&e.str||t.helperMissing).call(e,null!=e?e.data:e,{"name":"str","hash":{},"data":n}))?l:"")+"</div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-display"]["control-checkbox"]=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l;return'<script type="text/x-handlebars-template">\n\n    <div>'+(null!=(l=(t.str||e&&e.str||t.helperMissing).call(e,null!=e?e.data:e,{"name":"str","hash":{},"data":n}))?l:"")+"</div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-display"]["control-image"]=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a=t.helperMissing,s=this.escapeExpression;return'<script type="text/x-handlebars-template">\n\n    <div class="alpaca-image-display">\n        <img id="'+s((l=null!=(l=t.id||(null!=e?e.id:e))?l:a,"function"==typeof l?l.call(e,{"name":"id","hash":{},"data":n}):l))+'-image" src="'+s((l=null!=(l=t.data||(null!=e?e.data:e))?l:a,"function"==typeof l?l.call(e,{"name":"data","hash":{},"data":n}):l))+'">\n    </div>\n\n<\/script>'},"useData":!0}),this.HandlebarsPrecompiled["web-display"]["control-radio"]=Handlebars.template({"1":function(e,t,i,n,l,a){var s;return null!=(s=(t.compare||e&&e.compare||t.helperMissing).call(e,null!=e?e.value:e,null!=a[1]?a[1].data:a[1],{"name":"compare","hash":{},"fn":this.program(2,n,0,l,a),"inverse":this.noop,"data":n}))?s:""},"2":function(e,t,i,n){var l,a;return"                "+(null!=(a=null!=(a=t.text||(null!=e?e.text:e))?a:t.helperMissing,l="function"==typeof a?a.call(e,{"name":"text","hash":{},"data":n}):a)?l:"")+"\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s;return'<script type="text/x-handlebars-template">\n\n    <div>\n'+(null!=(s=t.each.call(e,null!=e?e.selectOptions:e,{"name":"each","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"    </div>\n\n<\/script>\n"},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["web-display"]["control-select"]=Handlebars.template({"1":function(e,t,i,n,l,a){var s;return null!=(s=(t.compare||e&&e.compare||t.helperMissing).call(e,null!=e?e.value:e,null!=a[1]?a[1].data:a[1],{"name":"compare","hash":{},"fn":this.program(2,n,0,l,a),"inverse":this.noop,"data":n}))?s:""},"2":function(e,t,i,n){var l,a;return"                "+(null!=(a=null!=(a=t.text||(null!=e?e.text:e))?a:t.helperMissing,l="function"==typeof a?a.call(e,{"name":"text","hash":{},"data":n}):a)?l:"")+"\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s;return'<script type="text/x-handlebars-template">\n\n    <div>\n'+(null!=(s=t.each.call(e,null!=e?e.selectOptions:e,{"name":"each","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"    </div>\n\n<\/script>\n"},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["web-display"]["control-text"]=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a;return'<script type="text/x-handlebars-template">\n\n    <div>'+(null!=(a=null!=(a=t.data||(null!=e?e.data:e))?a:t.helperMissing,l="function"==typeof a?a.call(e,{"name":"data","hash":{},"data":n}):a)?l:"")+"</div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-display"]["control-textarea"]=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a;return'<script type="text/x-handlebars-template">\n\n    <p>\n        '+(null!=(a=null!=(a=t.data||(null!=e?e.data:e))?a:t.helperMissing,l="function"==typeof a?a.call(e,{"name":"data","hash":{},"data":n}):a)?l:"")+"\n    </p>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-display"]["control-url"]=Handlebars.template({"1":function(e,t,i,n){var l;return'target="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.anchorTarget:l,e))+'"'},"3":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.anchorTitle:l,e))},"5":function(e,t,i,n){var l;return this.escapeExpression((l=null!=(l=t.data||(null!=e?e.data:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"data","hash":{},"data":n}):l))},"7":function(e,t,i,n){var l;return"            "+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.anchorTitle:l,e))+"\n"},"9":function(e,t,i,n){var l;return"            "+this.escapeExpression((l=null!=(l=t.data||(null!=e?e.data:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"data","hash":{},"data":n}):l))+"\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a;return'<script type="text/x-handlebars-template">\n\n    <a href="'+this.escapeExpression((a=null!=(a=t.data||(null!=e?e.data:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{"name":"data","hash":{},"data":n}):a))+'" '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.anchorTarget:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+' title="'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.anchorTitle:l,{"name":"if","hash":{},"fn":this.program(3,n,0),"inverse":this.program(5,n,0),"data":n}))?l:"")+'">\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.anchorTitle:l,{"name":"if","hash":{},"fn":this.program(7,n,0),"inverse":this.program(9,n,0),"data":n}))?l:"")+"    </a>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-display"].control=Handlebars.template({"1":function(e,t,i,n){var l,a;return'        <label class="'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.labelClass:l,{"name":"if","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n}))?l:"")+' alpaca-control-label" for="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a))+'">'+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.label:l,e))?l:"")+"</label>\n"},"2":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.labelClass:l,e))},"4":function(e,t,i,n){return""},"6":function(e,t,i,n){var l;return'        <p class="'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helperClass:l,{"name":"if","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n}))?l:"")+'">\n            <i class="info-sign"></i>\n            '+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.helper:l,e))?l:"")+"\n        </p>\n"},"7":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.helperClass:l,e))},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o='<script type="text/x-handlebars-template">\n\n    <div>\n\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.label:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n        ";return a=null!=(a=t.control||(null!=e?e.control:e))?a:t.helperMissing,s={"name":"control","hash":{},"fn":this.program(4,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.control||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n\n"+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helper:l,{"name":"if","hash":{},"fn":this.program(6,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n    </div>\n\n<\/script>\n"},"useData":!0}),this.HandlebarsPrecompiled["web-display"].form=Handlebars.template({"1":function(e,t,i,n){return""},"3":function(e,t,i,n,l,a){var s;return null!=(s=t.each.call(e,null!=(s=null!=e?e.options:e)?s.buttons:s,{"name":"each","hash":{},"fn":this.program(4,n,0,l,a),"inverse":this.noop,"data":n}))?s:""},"4":function(e,t,i,n,l,a){var s,o,r=t.helperMissing,c=this.escapeExpression;return'            <button data-key="'+c((o=null!=(o=t.key||n&&n.key)?o:r,"function"==typeof o?o.call(e,{"name":"key","hash":{},"data":n}):o))+'" '+(null!=(s=(t.compare||e&&e.compare||r).call(e,null!=e?e.type:e,"submit",{"name":"compare","hash":{},"fn":this.program(5,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+" "+(null!=(s=(t.compare||e&&e.compare||r).call(e,null!=e?e.type:e,"reset",{"name":"compare","hash":{},"fn":this.program(7,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+' class="alpaca-form-button alpaca-form-button-'+c((o=null!=(o=t.key||n&&n.key)?o:r,"function"==typeof o?o.call(e,{"name":"key","hash":{},"data":n}):o))+" "+c(this.lambda(null!=(s=null!=(s=null!=a[2]?a[2].view:a[2])?s.styles:s)?s.button:s,e))+'" '+(null!=(s=t.each.call(e,null!=e?e.value:e,{"name":"each","hash":{},"fn":this.program(9,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+">"+(null!=(o=null!=(o=t.value||(null!=e?e.value:e))?o:r,s="function"==typeof o?o.call(e,{"name":"value","hash":{},"data":n}):o)?s:"")+"</button>\n"},"5":function(e,t,i,n){return'type="submit"'},"7":function(e,t,i,n){return'type="reset"'},"9":function(e,t,i,n){var l,a=t.helperMissing,s=this.escapeExpression;return s((l=null!=(l=t.key||n&&n.key)?l:a,"function"==typeof l?l.call(e,{"name":"key","hash":{},"data":n}):l))+'="'+s((l=null!=(l=t.value||(null!=e?e.value:e))?l:a,"function"==typeof l?l.call(e,{"name":"value","hash":{},"data":n}):l))+'"'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s,o,r,c='<script type="text/x-handlebars-template">\n\n    <form role="form">\n\n        ';return o=null!=(o=t.formItems||(null!=e?e.formItems:e))?o:t.helperMissing,r={"name":"formItems","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.noop,"data":n},s="function"==typeof o?o.call(e,r):o,t.formItems||(s=t.blockHelperMissing.call(e,s,r)),null!=s&&(c+=s),c+'\n\n        <div class="alpaca-form-buttons-container">\n'+(null!=(s=t.if.call(e,null!=(s=null!=e?e.options:e)?s.buttons:s,{"name":"if","hash":{},"fn":this.program(3,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"        </div>\n\n    </form>\n\n<\/script>"},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["web-edit"]=this.HandlebarsPrecompiled["web-edit"]||{},this.HandlebarsPrecompiled["web-edit"]["container-array-actionbar"]=Handlebars.template({"1":function(e,t,i,n,l,a){var s,o,r=this.escapeExpression;return'        <button  class="alpaca-array-actionbar-action '+r(this.lambda(null!=(s=null!=(s=null!=a[1]?a[1].view:a[1])?s.styles:s)?s.smallButton:s,e))+'" data-alpaca-array-actionbar-action="'+r((o=null!=(o=t.action||(null!=e?e.action:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"action","hash":{},"data":n}):o))+'" title="'+this.escapeExpression(this.lambda(null!=e?e.title:e,e))+'" aria-label="'+a[0].actionAria+'">\n'+(null!=(s=t.if.call(e,null!=e?e.iconClass:e,{"name":"if","hash":{},"fn":this.program(2,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"            "+(null!=(s=t.if.call(e,null!=e?e.label:e,{"name":"if","hash":{},"fn":this.program(4,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"\n        </button>\n"},"2":function(e,t,i,n){return'            <i class="'+this.escapeExpression(this.lambda(null!=e?e.iconClass:e,e))+'"></i>\n'},"4":function(e,t,i,n){var l,a;return null!=(a=null!=(a=t.label||(null!=e?e.label:e))?a:t.helperMissing,l="function"==typeof a?a.call(e,{"name":"label","hash":{},"data":n}):a)?l:""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s,o,r=t.helperMissing,c=this.escapeExpression;return'<script type="text/x-handlebars-template">\n\n    <div class="alpaca-array-actionbar alpaca-array-actionbar-'+c((o=null!=(o=t.actionbarStyle||(null!=e?e.actionbarStyle:e))?o:r,"function"==typeof o?o.call(e,{"name":"actionbarStyle","hash":{},"data":n}):o))+' binf-btn-group" data-alpaca-array-actionbar-parent-field-id="'+c((o=null!=(o=t.parentFieldId||(null!=e?e.parentFieldId:e))?o:r,"function"==typeof o?o.call(e,{"name":"parentFieldId","hash":{},"data":n}):o))+'" data-alpaca-array-actionbar-field-id="'+c((o=null!=(o=t.fieldId||(null!=e?e.fieldId:e))?o:r,"function"==typeof o?o.call(e,{"name":"fieldId","hash":{},"data":n}):o))+'" data-alpaca-array-actionbar-item-index="'+c((o=null!=(o=t.itemIndex||(null!=e?e.itemIndex:e))?o:r,"function"==typeof o?o.call(e,{"name":"itemIndex","hash":{},"data":n}):o))+'">\n'+(null!=(s=t.each.call(e,null!=e?e.actions:e,{"name":"each","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"    </div>\n\n<\/script>"},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["web-edit"]["container-array-item"]=Handlebars.template({"1":function(e,t,i,n){var l,a,s,o=t.helperMissing,r=t.blockHelperMissing,c='        <div class="binf-pull-left">\n            ';return a=null!=(a=t.arrayActionbar||(null!=e?e.arrayActionbar:e))?a:o,s={"name":"arrayActionbar","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.arrayActionbar||(l=r.call(e,l,s)),null!=l&&(c+=l),c+='\n        </div>\n        <div class="binf-pull-right">\n            ',a=null!=(a=t.itemField||(null!=e?e.itemField:e))?a:o,s={"name":"itemField","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.itemField||(l=r.call(e,l,s)),null!=l&&(c+=l),c+'\n        </div>\n        <div class="clear"></div>\n'},"2":function(e,t,i,n){return""},"4":function(e,t,i,n){var l;return null!=(l=(t.compare||e&&e.compare||t.helperMissing).call(e,null!=e?e.actionbarStyle:e,"right",{"name":"compare","hash":{},"fn":this.program(5,n,0),"inverse":this.program(7,n,0),"data":n}))?l:""},"5":function(e,t,i,n){var l,a,s,o=t.helperMissing,r=t.blockHelperMissing,c='            <div class="binf-pull-left">\n                ';return a=null!=(a=t.itemField||(null!=e?e.itemField:e))?a:o,s={"name":"itemField","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.itemField||(l=r.call(e,l,s)),null!=l&&(c+=l),c+='\n            </div>\n            <div class="binf-pull-right">\n                ',a=null!=(a=t.arrayActionbar||(null!=e?e.arrayActionbar:e))?a:o,s={"name":"arrayActionbar","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.arrayActionbar||(l=r.call(e,l,s)),null!=l&&(c+=l),c+'\n            </div>\n            <div class="alpaca-clear"></div>\n'},"7":function(e,t,i,n){var l,a,s,o=t.helperMissing,r="            <div>\n\n"+(null!=(l=(t.compare||e&&e.compare||o).call(e,null!=e?e.actionbarStyle:e,"top",{"name":"compare","hash":{},"fn":this.program(8,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n                ";return a=null!=(a=t.itemField||(null!=e?e.itemField:e))?a:o,s={"name":"itemField","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.itemField||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(r+=l),r+"\n\n"+(null!=(l=(t.compare||e&&e.compare||o).call(e,null!=e?e.actionbarStyle:e,"bottom",{"name":"compare","hash":{},"fn":this.program(8,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n            </div>\n"},"8":function(e,t,i,n){var l,a,s,o="                ";return a=null!=(a=t.arrayActionbar||(null!=e?e.arrayActionbar:e))?a:t.helperMissing,s={"name":"arrayActionbar","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.arrayActionbar||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l;return'<script type="text/x-handlebars-template">\n\n    <div>\n'+(null!=(l=(t.compare||e&&e.compare||t.helperMissing).call(e,null!=e?e.actionbarStyle:e,"left",{"name":"compare","hash":{},"fn":this.program(1,n,0),"inverse":this.program(4,n,0),"data":n}))?l:"")+"    </div>\n\n<\/script>\n"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["container-array-toolbar"]=Handlebars.template({"1":function(e,t,i,n){return" binf-btn-group"},"3":function(e,t,i,n,l,a){var s,o=t.helperMissing;return"\n"+(null!=(s=(t.compare||e&&e.compare||o).call(e,null!=a[1]?a[1].toolbarStyle:a[1],"link",{"name":"compare","hash":{},"fn":this.program(4,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"\n"+(null!=(s=(t.compare||e&&e.compare||o).call(e,null!=a[1]?a[1].toolbarStyle:a[1],"button",{"name":"compare","hash":{},"fn":this.program(6,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"\n"},"4":function(e,t,i,n,l,a){var s,o=this.lambda;return'                <a href="#" class="alpaca-array-toolbar-action" data-alpaca-array-toolbar-action="'+this.escapeExpression(o(null!=a[1]?a[1].action:a[1],e))+'">'+(null!=(s=o(null!=a[1]?a[1].label:a[1],e))?s:"")+"</a>\n"},"6":function(e,t,i,n,l,a){var s,o=this.lambda,r=this.escapeExpression;return'                <button class="alpaca-array-toolbar-action '+r(o(null!=(s=null!=(s=null!=a[2]?a[2].view:a[2])?s.styles:s)?s.smallButton:s,e))+'" data-alpaca-array-toolbar-action="'+r(o(null!=a[1]?a[1].action:a[1],e))+'">\n'+(null!=(s=t.if.call(e,null!=a[1]?a[1].iconClass:a[1],{"name":"if","hash":{},"fn":this.program(7,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"                    "+(null!=(s=t.if.call(e,null!=a[1]?a[1].label:a[1],{"name":"if","hash":{},"fn":this.program(9,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"\n                </button>\n"},"7":function(e,t,i,n,l,a){return'                    <i class="'+this.escapeExpression(this.lambda(null!=a[1]?a[1].iconClass:a[1],e))+'"></i>\n'},"9":function(e,t,i,n,l,a){var s;return null!=(s=this.lambda(null!=a[1]?a[1].label:a[1],e))?s:""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s,o,r=t.helperMissing;return'<script type="text/x-handlebars-template">\n\n    <div class="alpaca-array-toolbar" data-alpaca-array-toolbar-field-id="'+this.escapeExpression((o=null!=(o=t.id||(null!=e?e.id:e))?o:r,"function"==typeof o?o.call(e,{"name":"id","hash":{},"data":n}):o))+'" '+(null!=(s=(t.compare||e&&e.compare||r).call(e,null!=e?e.toolbarStyle:e,"button",{"name":"compare","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+">\n\n"+(null!=(s=t.each.call(e,null!=e?e.actions:e,{"name":"each","hash":{},"fn":this.program(3,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"\n    </div>\n\n<\/script>"},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["web-edit"]["container-array"]=Handlebars.template({"1":function(e,t,i,n){return""},"3":function(e,t,i,n){var l,a,s,o="\n            ";return a=null!=(a=t.item||(null!=e?e.item:e))?a:t.helperMissing,s={"name":"item","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.item||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o='<script type="text/x-handlebars-template">\n\n    <div>\n\n        ';return a=null!=(a=t.arrayToolbar||(null!=e?e.arrayToolbar:e))?a:t.helperMissing,s={"name":"arrayToolbar","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.arrayToolbar||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n\n"+(null!=(l=t.each.call(e,null!=e?e.items:e,{"name":"each","hash":{},"fn":this.program(3,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n    </div>\n\n<\/script>\n"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["container-object-item"]=Handlebars.template({"1":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o='<script type="text/x-handlebars-template">\n\n    <div>\n\n        ';return a=null!=(a=t.itemField||(null!=e?e.itemField:e))?a:t.helperMissing,s={"name":"itemField","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.itemField||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n\n    </div>\n\n<\/script>\n"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["container-object"]=Handlebars.template({"1":function(e,t,i,n){var l,a,s,o="\n            ";return a=null!=(a=t.item||(null!=e?e.item:e))?a:t.helperMissing,s={"name":"item","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.item||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n\n"},"2":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l;return'<script type="text/x-handlebars-template">\n\n    <div>\n\n'+(null!=(l=t.each.call(e,null!=e?e.items:e,{"name":"each","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["container-table-item"]=Handlebars.template({"1":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l;return'<script type="text/x-handlebars-template">\n\n    <tr>\n        '+(null!=(l=(t.itemField||e&&e.itemField||t.helperMissing).call(e,"td",{"name":"itemField","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n    </tr>\n\n\n<\/script>\n"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["container-table"]=Handlebars.template({"1":function(e,t,i,n){return""},"3":function(e,t,i,n){var l;return"                    <th>"+this.escapeExpression(this.lambda(null!=(l=null!=e?e.value:e)?l.title:l,e))+"</th>\n"},"5":function(e,t,i,n){return"                        <th>Actions</th>\n"},"7":function(e,t,i,n){var l;return"\n                "+(null!=(l=(t.item||e&&e.item||t.helperMissing).call(e,"tr",{"name":"item","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o=t.helperMissing,r='<script type="text/x-handlebars-template">\n\n    <div>\n\n        ';return a=null!=(a=t.arrayToolbar||(null!=e?e.arrayToolbar:e))?a:o,s={"name":"arrayToolbar","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,
"data":n},l="function"==typeof a?a.call(e,s):a,t.arrayToolbar||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(r+=l),r+"\n\n        <table>\n\n            \x3c!-- table headers --\x3e\n            <thead>\n                <tr>\n"+(null!=(l=(t.eachProperty||e&&e.eachProperty||o).call(e,null!=(l=null!=(l=null!=e?e.schema:e)?l.items:l)?l.properties:l,{"name":"eachProperty","hash":{},"fn":this.program(3,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n"+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.showActionsColumn:l,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.noop,"data":n}))?l:"")+"                </tr>\n            </thead>\n\n            \x3c!-- table body --\x3e\n            <tbody>\n"+(null!=(l=t.each.call(e,null!=e?e.items:e,{"name":"each","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n}))?l:"")+"            </tbody>\n\n        </table>\n\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["container-tablerow-item"]=Handlebars.template({"1":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o='<script type="text/x-handlebars-template">\n\n    <td>\n        ';return a=null!=(a=t.itemField||(null!=e?e.itemField:e))?a:t.helperMissing,s={"name":"itemField","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.itemField||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n    </td>\n\n<\/script>\n"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["container-tablerow"]=Handlebars.template({"1":function(e,t,i,n){var l,a,s,o="            ";return a=null!=(a=t.item||(null!=e?e.item:e))?a:t.helperMissing,s={"name":"item","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.item||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n"},"2":function(e,t,i,n){return""},"4":function(e,t,i,n){var l,a,s,o='            <div class="alpaca-merge-up">\n                ';return a=null!=(a=t.arrayActionbar||(null!=e?e.arrayActionbar:e))?a:t.helperMissing,s={"name":"arrayActionbar","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.arrayActionbar||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n            </div>\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l;return'<script type="text/x-handlebars-template">\n\n    <div class="alpaca-merge-up">\n\n'+(null!=(l=t.each.call(e,null!=e?e.items:e,{"name":"each","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n        \x3c!-- actions cell --\x3e\n"+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.showActionsColumn:l,{"name":"if","hash":{},"fn":this.program(4,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"].container=Handlebars.template({"1":function(e,t,i,n){var l;return'        <label class="'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.labelClass:l,{"name":"if","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n}))?l:"")+' alpaca-container-label">'+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.label:l,e))?l:"")+"</label>\n"},"2":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.labelClass:l,e))},"4":function(e,t,i,n){var l;return'        <p class="alpaca-helper '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helperClass:l,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.noop,"data":n}))?l:"")+'">\n            <i class="alpaca-icon-helper"></i>\n            '+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.helper:l,e))?l:"")+"\n        </p>\n"},"5":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.helperClass:l,e))},"7":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o='<script type="text/x-handlebars-template">\n\n    <div>\n\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.label:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n"+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helper:l,{"name":"if","hash":{},"fn":this.program(4,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n        ";return a=null!=(a=t.container||(null!=e?e.container:e))?a:t.helperMissing,s={"name":"container","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.container||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["control-any"]=Handlebars.template({"1":function(e,t,i,n){return'readonly="readonly"'},"3":function(e,t,i,n){var l;return'name="'+this.escapeExpression((l=null!=(l=t.name||(null!=e?e.name:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"name","hash":{},"data":n}):l))+'"'},"5":function(e,t,i,n){var l,a=this.escapeExpression;return"data-"+a((l=null!=(l=t.key||n&&n.key)?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"key","hash":{},"data":n}):l))+'="'+a(this.lambda(e,e))+'"'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a;return'<script type="text/x-handlebars-template">\n\n    <input type="text" id="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a))+'" size="40" '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.readonly:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=e?e.name:e,{"name":"if","hash":{},"fn":this.program(3,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.each.call(e,null!=(l=null!=e?e.options:e)?l.data:l,{"name":"each","hash":{},"fn":this.program(5,n,0),"inverse":this.noop,"data":n}))?l:"")+"/>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["control-checkbox"]=Handlebars.template({"1":function(e,t,i,n,l,a){var s;return"\n"+(null!=(s=t.each.call(e,null!=e?e.checkboxOptions:e,{"name":"each","hash":{},"fn":this.program(2,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"\n"},"2":function(e,t,i,n,l,a){var s,o,r=t.helperMissing,c=this.escapeExpression;return'\n            <div>\n\n                <label>\n\n                    <input type="checkbox" data-checkbox-index="'+c((o=null!=(o=t.index||n&&n.index)?o:r,"function"==typeof o?o.call(e,{"name":"index","hash":{},"data":n}):o))+'" data-checkbox-value="'+c((o=null!=(o=t.value||(null!=e?e.value:e))?o:r,"function"==typeof o?o.call(e,{"name":"value","hash":{},"data":n}):o))+'" '+(null!=(s=t.if.call(e,null!=(s=null!=a[2]?a[2].options:a[2])?s.readonly:s,{"name":"if","hash":{},"fn":this.program(3,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+" "+(null!=(s=t.if.call(e,null!=e?e.name:e,{"name":"if","hash":{},"fn":this.program(5,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+" "+(null!=(s=t.each.call(e,null!=(s=null!=a[2]?a[2].options:a[2])?s.data:s,{"name":"each","hash":{},"fn":this.program(7,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"/>\n                    "+(null!=(o=null!=(o=t.text||(null!=e?e.text:e))?o:r,s="function"==typeof o?o.call(e,{"name":"text","hash":{},"data":n}):o)?s:"")+"\n\n                </label>\n            </div>\n\n"},"3":function(e,t,i,n){return'readonly="readonly"'},"5":function(e,t,i,n){var l;return'name="'+this.escapeExpression((l=null!=(l=t.name||(null!=e?e.name:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"name","hash":{},"data":n}):l))+'"'},"7":function(e,t,i,n){var l,a=t.helperMissing,s=this.escapeExpression;return"data-"+s((l=null!=(l=t.key||n&&n.key)?l:a,"function"==typeof l?l.call(e,{"name":"key","hash":{},"data":n}):l))+'="'+s((l=null!=(l=t.value||(null!=e?e.value:e))?l:a,"function"==typeof l?l.call(e,{"name":"value","hash":{},"data":n}):l))+'"'},"9":function(e,t,i,n){var l;return'\n        <div>\n\n            <label>\n\n                <input type="checkbox" '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.readonly:l,{"name":"if","hash":{},"fn":this.program(3,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=e?e.name:e,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.each.call(e,null!=(l=null!=e?e.options:e)?l.data:l,{"name":"each","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n}))?l:"")+"/>\n\n                "+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.rightLabel:l,e))?l:"")+"\n            </label>\n\n        </div>\n\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s;return'<script type="text/x-handlebars-template">\n\n'+(null!=(s=t.if.call(e,null!=(s=null!=e?e.options:e)?s.multiple:s,{"name":"if","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.program(9,n,0,l,a),"data":n}))?s:"")+"\n<\/script>\n"},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["web-edit"]["control-ckeditor"]=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l;return'<script type="text/x-handlebars-template">\n\n    <textarea id="'+this.escapeExpression((l=null!=(l=t.id||(null!=e?e.id:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"id","hash":{},"data":n}):l))+'" cols="80" rows="10">\n    </textarea>\n\n<\/script>'},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["control-editor"]=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l;return'<script type="text/x-handlebars-template">\n\n    <div id="'+this.escapeExpression((l=null!=(l=t.id||(null!=e?e.id:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"id","hash":{},"data":n}):l))+'" class="control-field-editor-el"></div>\n\n<\/script>'},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["control-file"]=Handlebars.template({"1":function(e,t,i,n){var l;return'size="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.size:l,e))+'"'},"3":function(e,t,i,n){return'readonly="readonly"'},"5":function(e,t,i,n){var l;return'name="'+this.escapeExpression((l=null!=(l=t.name||(null!=e?e.name:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"name","hash":{},"data":n}):l))+'"'},"7":function(e,t,i,n){var l,a=this.escapeExpression;return"data-"+a((l=null!=(l=t.key||n&&n.key)?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"key","hash":{},"data":n}):l))+'="'+a(this.lambda(e,e))+'"'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a;return'<script type="text/x-handlebars-template">\n\n    <input type="file" id="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a))+'" '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.size:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.readonly:l,{"name":"if","hash":{},"fn":this.program(3,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=e?e.name:e,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.each.call(e,null!=(l=null!=e?e.options:e)?l.data:l,{"name":"each","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n}))?l:"")+"/>\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["control-hidden"]=Handlebars.template({"1":function(e,t,i,n){var l;return'name="'+this.escapeExpression((l=null!=(l=t.name||(null!=e?e.name:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"name","hash":{},"data":n}):l))+'"'},"3":function(e,t,i,n){var l,a=this.escapeExpression;return"data-"+a((l=null!=(l=t.key||n&&n.key)?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"key","hash":{},"data":n}):l))+'="'+a(this.lambda(e,e))+'"'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a;return'<script type="text/x-handlebars-template">\n\n    <input type="hidden" id="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a))+'" '+(null!=(l=t.if.call(e,null!=e?e.name:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.each.call(e,null!=(l=null!=e?e.options:e)?l.data:l,{"name":"each","hash":{},"fn":this.program(3,n,0),"inverse":this.noop,"data":n}))?l:"")+"/>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["control-image"]=Handlebars.template({"1":function(e,t,i,n){var l;return'placeholder="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.placeholder:l,e))+'"'},"3":function(e,t,i,n){var l;return'size="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.size:l,e))+'"'},"5":function(e,t,i,n){return'readonly="readonly"'},"7":function(e,t,i,n){var l;return'name="'+this.escapeExpression((l=null!=(l=t.name||(null!=e?e.name:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"name","hash":{},"data":n}):l))+'"'},"9":function(e,t,i,n){var l,a=this.escapeExpression;return"data-"+a((l=null!=(l=t.key||n&&n.key)?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"key","hash":{},"data":n}):l))+'="'+a(this.lambda(e,e))+'"'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s=t.helperMissing,o=this.escapeExpression;return'<script type="text/x-handlebars-template">\n\n    <input type="text" id="'+o((a=null!=(a=t.id||(null!=e?e.id:e))?a:s,"function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a))+'" '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.placeholder:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.size:l,{"name":"if","hash":{},"fn":this.program(3,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.readonly:l,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=e?e.name:e,{"name":"if","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.each.call(e,null!=(l=null!=e?e.options:e)?l.data:l,{"name":"each","hash":{},"fn":this.program(9,n,0),"inverse":this.noop,"data":n}))?l:"")+'/>\n\n    <div class="alpaca-image-display">\n        <h5>Preview</h5>\n        <img id="'+o((a=null!=(a=t.id||(null!=e?e.id:e))?a:s,"function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a))+'-image" src="'+o((a=null!=(a=t.data||(null!=e?e.data:e))?a:s,"function"==typeof a?a.call(e,{"name":"data","hash":{},"data":n}):a))+'">\n    </div>\n\n<\/script>'},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["control-password"]=Handlebars.template({"1":function(e,t,i,n){var l;return'placeholder="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.placeholder:l,e))+'"'},"3":function(e,t,i,n){var l;return'size="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.size:l,e))+'"'},"5":function(e,t,i,n){return'readonly="readonly"'},"7":function(e,t,i,n){var l;return'name="'+this.escapeExpression((l=null!=(l=t.name||(null!=e?e.name:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"name","hash":{},"data":n}):l))+'"'},"9":function(e,t,i,n){var l,a=this.escapeExpression;return"data-"+a((l=null!=(l=t.key||n&&n.key)?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"key","hash":{},"data":n}):l))+'="'+a(this.lambda(e,e))+'"'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a;return'<script type="text/x-handlebars-template">\n\n    <input type="password" id="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a))+'" '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.placeholder:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.size:l,{"name":"if","hash":{},"fn":this.program(3,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.readonly:l,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=e?e.name:e,{"name":"if","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.each.call(e,null!=(l=null!=e?e.options:e)?l.data:l,{"name":"each","hash":{},"fn":this.program(9,n,0),"inverse":this.noop,"data":n}))?l:"")+"/>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["control-radio"]=Handlebars.template({"1":function(e,t,i,n){return""},"3":function(e,t,i,n){var l,a,s=t.helperMissing;return'<div class="binf-radio"><label><input type="radio" '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.readonly:l,{"name":"if","hash":{},"fn":this.program(4,n,0),"inverse":this.noop,"data":n}))?l:"")+' name="'+this.escapeExpression((a=null!=(a=t.name||(null!=e?e.name:e))?a:s,"function"==typeof a?a.call(e,{"name":"name","hash":{},"data":n}):a))+'" value=""/>'+(null!=(a=null!=(a=t.noneLabel||(null!=e?e.noneLabel:e))?a:s,l="function"==typeof a?a.call(e,{"name":"noneLabel","hash":{},"data":n}):a)?l:"")+"</label></div>"},"4":function(e,t,i,n){return'readonly="readonly"'},"6":function(e,t,i,n,l,a){var s,o,r=this.escapeExpression,c=t.helperMissing;return'<div class="binf-radio"><label><input type="radio" '+(null!=(s=t.if.call(e,null!=(s=null!=a[1]?a[1].options:a[1])?s.readonly:s,{"name":"if","hash":{},"fn":this.program(4,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+' name="'+r(this.lambda(null!=a[1]?a[1].name:a[1],e))+'" value="'+r((o=null!=(o=t.value||(null!=e?e.value:e))?o:c,"function"==typeof o?o.call(e,{"name":"value","hash":{},"data":n}):o))+'" '+(null!=(s=(t.compare||e&&e.compare||c).call(e,null!=e?e.value:e,null!=a[1]?a[1].data:a[1],{"name":"compare","hash":{},"fn":this.program(7,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"/>"+(null!=(o=null!=(o=t.text||(null!=e?e.text:e))?o:c,s="function"==typeof o?o.call(e,{"name":"text","hash":{},"data":n}):o)?s:"")+"</label></div>"},"7":function(e,t,i,n){return'checked="checked"'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s;return'<script type="text/x-handlebars-template">'+(null!=(s=t.if.call(e,null!=e?e.hideNone:e,{"name":"if","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.program(3,n,0,l,a),"data":n}))?s:"")+(null!=(s=t.each.call(e,null!=e?e.selectOptions:e,{"name":"each","hash":{},"fn":this.program(6,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"<\/script>"},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["web-edit"]["control-select"]=Handlebars.template({"1":function(e,t,i,n){return'readonly="readonly"'},"3":function(e,t,i,n){return'multiple="multiple"'},"5":function(e,t,i,n){var l;return'size="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.size:l,e))+'"'},"7":function(e,t,i,n){var l;return'name="'+this.escapeExpression((l=null!=(l=t.name||(null!=e?e.name:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"name","hash":{},"data":n}):l))+'"'},"9":function(e,t,i,n,l,a){var s;return"\n"+(null!=(s=t.if.call(e,null!=e?e.hideNone:e,{"name":"if","hash":{},"fn":this.program(10,n,0,l,a),"inverse":this.program(12,n,0,l,a),"data":n}))?s:"")+"\n"+(null!=(s=t.each.call(e,null!=e?e.selectOptions:e,{"name":"each","hash":{},"fn":this.program(14,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"\n"},"10":function(e,t,i,n){return""},"12":function(e,t,i,n){var l,a;return'        <option value="">'+(null!=(a=null!=(a=t.noneLabel||(null!=e?e.noneLabel:e))?a:t.helperMissing,l="function"==typeof a?a.call(e,{"name":"noneLabel","hash":{},"data":n}):a)?l:"")+"</option>\n"},"14":function(e,t,i,n,l,a){var s,o,r=t.helperMissing;return'        <option value="'+(null!=(o=null!=(o=t.value||(null!=e?e.value:e))?o:r,s="function"==typeof o?o.call(e,{"name":"value","hash":{},"data":n}):o)?s:"")+'" '+(null!=(s=t.each.call(e,null!=a[1]?a[1].data:a[1],{"name":"each","hash":{},"fn":this.program(15,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+">"+this.escapeExpression((o=null!=(o=t.text||(null!=e?e.text:e))?o:r,"function"==typeof o?o.call(e,{"name":"text","hash":{},"data":n}):o))+"</option>\n"},"15":function(e,t,i,n,l,a){var s;return null!=(s=(t.compare||e&&e.compare||t.helperMissing).call(e,null!=e?e.value:e,null!=a[2]?a[2].value:a[2],{"name":"compare","hash":{},"fn":this.program(16,n,0,l,a),"inverse":this.noop,"data":n}))?s:""},"16":function(e,t,i,n){return'selected="selected"'},"18":function(e,t,i,n,l,a){var s;return"\n"+(null!=(s=t.if.call(e,null!=e?e.hideNone:e,{"name":"if","hash":{},"fn":this.program(10,n,0,l,a),"inverse":this.program(12,n,0,l,a),"data":n}))?s:"")+"\n"+(null!=(s=t.each.call(e,null!=e?e.selectOptions:e,{"name":"each","hash":{},"fn":this.program(19,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"\n"},"19":function(e,t,i,n,l,a){var s,o,r=t.helperMissing;return'        <option value="'+(null!=(o=null!=(o=t.value||(null!=e?e.value:e))?o:r,s="function"==typeof o?o.call(e,{"name":"value","hash":{},"data":n}):o)?s:"")+'" '+(null!=(s=(t.compare||e&&e.compare||r).call(e,null!=e?e.value:e,null!=a[2]?a[2].data:a[2],{"name":"compare","hash":{},"fn":this.program(16,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+">"+this.escapeExpression((o=null!=(o=t.text||(null!=e?e.text:e))?o:r,"function"==typeof o?o.call(e,{"name":"text","hash":{},"data":n}):o))+"</option>\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s,o;return'<script type="text/x-handlebars-template">\n\n    <select id="'+this.escapeExpression((o=null!=(o=t.id||(null!=e?e.id:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"id","hash":{},"data":n}):o))+'" '+(null!=(s=t.if.call(e,null!=(s=null!=e?e.options:e)?s.readonly:s,{"name":"if","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+" "+(null!=(s=t.if.call(e,null!=(s=null!=e?e.options:e)?s.multiple:s,{"name":"if","hash":{},"fn":this.program(3,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+" "+(null!=(s=t.if.call(e,null!=(s=null!=e?e.options:e)?s.size:s,{"name":"if","hash":{},"fn":this.program(5,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+" "+(null!=(s=t.if.call(e,null!=e?e.name:e,{"name":"if","hash":{},"fn":this.program(7,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+">\n\n"+(null!=(s=t.if.call(e,null!=(s=null!=e?e.options:e)?s.multiple:s,{"name":"if","hash":{},"fn":this.program(9,n,0,l,a),"inverse":this.program(18,n,0,l,a),"data":n}))?s:"")+"\n    </select>\n\n<\/script>"},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["web-edit"]["control-text"]=Handlebars.template({"1":function(e,t,i,n){var l;return'placeholder="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.placeholder:l,e))+'"'},"3":function(e,t,i,n){var l;return'size="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.size:l,e))+'"'},"5":function(e,t,i,n){return'readonly="readonly"'},"7":function(e,t,i,n){var l;return'name="'+this.escapeExpression((l=null!=(l=t.name||(null!=e?e.name:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"name","hash":{},"data":n}):l))+'"'},"9":function(e,t,i,n){var l,a=this.escapeExpression;return"data-"+a((l=null!=(l=t.key||n&&n.key)?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"key","hash":{},"data":n}):l))+'="'+a(this.lambda(e,e))+'"'},"11":function(e,t,i,n){var l,a=this.escapeExpression;return a((l=null!=(l=t.key||n&&n.key)?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"key","hash":{},"data":n}):l))+'="'+a(this.lambda(e,e))+'"'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s=t.helperMissing,o=this.escapeExpression;return'<script type="text/x-handlebars-template">\n\n    <input type="'+o((a=null!=(a=t.inputType||(null!=e?e.inputType:e))?a:s,"function"==typeof a?a.call(e,{"name":"inputType","hash":{},"data":n}):a))+'" id="'+o((a=null!=(a=t.id||(null!=e?e.id:e))?a:s,"function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a))+'" '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.placeholder:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.size:l,{"name":"if","hash":{},"fn":this.program(3,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.readonly:l,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=e?e.name:e,{"name":"if","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.each.call(e,null!=(l=null!=e?e.options:e)?l.data:l,{"name":"each","hash":{},"fn":this.program(9,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.each.call(e,null!=(l=null!=e?e.options:e)?l.attributes:l,{"name":"each","hash":{},"fn":this.program(11,n,0),"inverse":this.noop,"data":n}))?l:"")+"/>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["control-textarea"]=Handlebars.template({"1":function(e,t,i,n){var l;return'placeholder="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.placeholder:l,e))+'"'},"3":function(e,t,i,n){var l;return'rows="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.rows:l,e))+'"'},"5":function(e,t,i,n){var l;return'cols="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.cols:l,e))+'"'},"7":function(e,t,i,n){return'readonly="readonly"'},"9":function(e,t,i,n){var l;return'name="'+this.escapeExpression((l=null!=(l=t.name||(null!=e?e.name:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"name","hash":{},"data":n}):l))+'"'},"11":function(e,t,i,n){var l,a,s=t.helperMissing;return"data-"+this.escapeExpression((a=null!=(a=t.fieldId||(null!=e?e.fieldId:e))?a:s,"function"==typeof a?a.call(e,{"name":"fieldId","hash":{},"data":n}):a))+'="'+(null!=(a=null!=(a=t.value||(null!=e?e.value:e))?a:s,l="function"==typeof a?a.call(e,{"name":"value","hash":{},"data":n}):a)?l:"")+'"'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a;return'<script type="text/x-handlebars-template">\n\n    <textarea id="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a))+'" '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.placeholder:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.rows:l,{"name":"if","hash":{},"fn":this.program(3,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.cols:l,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.readonly:l,{"name":"if","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=e?e.name:e,{"name":"if","hash":{},"fn":this.program(9,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.each.call(e,null!=(l=null!=e?e.options:e)?l.data:l,{"name":"each","hash":{},"fn":this.program(11,n,0),"inverse":this.noop,"data":n}))?l:"")+"/>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"]["control-url"]=Handlebars.template({"1":function(e,t,i,n){var l;return'placeholder="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.placeholder:l,e))+'"'},"3":function(e,t,i,n){var l;return'size="'+this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.size:l,e))+'"'},"5":function(e,t,i,n){return'readonly="readonly"'},"7":function(e,t,i,n){var l;return'name="'+this.escapeExpression((l=null!=(l=t.name||(null!=e?e.name:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"name","hash":{},"data":n}):l))+'"'},"9":function(e,t,i,n){var l,a=this.escapeExpression;return"data-"+a((l=null!=(l=t.key||n&&n.key)?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"key","hash":{},"data":n}):l))+'="'+a(this.lambda(e,e))+'"'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a;return'<script type="text/x-handlebars-template">\n\n    <input type="text" id="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a))+'" '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.placeholder:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.size:l,{"name":"if","hash":{},"fn":this.program(3,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.readonly:l,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.if.call(e,null!=e?e.name:e,{"name":"if","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n}))?l:"")+" "+(null!=(l=t.each.call(e,null!=(l=null!=e?e.options:e)?l.data:l,{"name":"each","hash":{},"fn":this.program(9,n,0),"inverse":this.noop,"data":n}))?l:"")+"/>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"].control=Handlebars.template({"1":function(e,t,i,n){var l,a;return'        <label class="'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.labelClass:l,{"name":"if","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n}))?l:"")+' alpaca-control-label" for="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a))+'">'+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.label:l,e))?l:"")+"</label>\n"},"2":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.labelClass:l,e))},"4":function(e,t,i,n){return""},"6":function(e,t,i,n){var l;return'        <p class="'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helperClass:l,{"name":"if","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n}))?l:"")+'">\n            <i class="info-sign"></i>\n            '+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.helper:l,e))?l:"")+"\n        </p>\n"},"7":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.helperClass:l,e))},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o='<script type="text/x-handlebars-template">\n\n    <div>\n\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.label:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n        ";return a=null!=(a=t.control||(null!=e?e.control:e))?a:t.helperMissing,s={"name":"control","hash":{},"fn":this.program(4,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.control||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n\n"+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helper:l,{"name":"if","hash":{},"fn":this.program(6,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"].form=Handlebars.template({"1":function(e,t,i,n){return""},"3":function(e,t,i,n,l,a){var s;return null!=(s=t.each.call(e,null!=(s=null!=e?e.options:e)?s.buttons:s,{"name":"each","hash":{},"fn":this.program(4,n,0,l,a),"inverse":this.noop,"data":n}))?s:""},"4":function(e,t,i,n,l,a){var s,o,r=t.helperMissing,c=this.escapeExpression;return'                    <button data-key="'+c((o=null!=(o=t.key||n&&n.key)?o:r,"function"==typeof o?o.call(e,{"name":"key","hash":{},"data":n}):o))+'" type="'+c((o=null!=(o=t.type||(null!=e?e.type:e))?o:r,"function"==typeof o?o.call(e,{"name":"type","hash":{},"data":n}):o))+'" class="alpaca-form-button alpaca-form-button-'+c((o=null!=(o=t.key||n&&n.key)?o:r,"function"==typeof o?o.call(e,{"name":"key","hash":{},"data":n
}):o))+" "+c(this.lambda(null!=(s=null!=(s=null!=a[2]?a[2].view:a[2])?s.styles:s)?s.button:s,e))+'" '+(null!=(s=t.each.call(e,null!=e?e.value:e,{"name":"each","hash":{},"fn":this.program(5,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+">"+(null!=(o=null!=(o=t.value||(null!=e?e.value:e))?o:r,s="function"==typeof o?o.call(e,{"name":"value","hash":{},"data":n}):o)?s:"")+"</button>\n"},"5":function(e,t,i,n){var l,a=t.helperMissing,s=this.escapeExpression;return s((l=null!=(l=t.key||n&&n.key)?l:a,"function"==typeof l?l.call(e,{"name":"key","hash":{},"data":n}):l))+'="'+s((l=null!=(l=t.value||(null!=e?e.value:e))?l:a,"function"==typeof l?l.call(e,{"name":"value","hash":{},"data":n}):l))+'"'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s,o,r,c='<script type="text/x-handlebars-template">\n\n    <form role="form">\n\n        ';return o=null!=(o=t.formItems||(null!=e?e.formItems:e))?o:t.helperMissing,r={"name":"formItems","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.noop,"data":n},s="function"==typeof o?o.call(e,r):o,t.formItems||(s=t.blockHelperMissing.call(e,s,r)),null!=s&&(c+=s),c+'\n\n        <div class="alpaca-form-buttons-container">\n'+(null!=(s=t.if.call(e,null!=(s=null!=e?e.options:e)?s.buttons:s,{"name":"if","hash":{},"fn":this.program(3,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"        </div>\n\n    </form>\n\n<\/script>"},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["web-edit"].message=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s=t.helperMissing;return'<script type="text/x-handlebars-template">\n\n    <div class="alpaca-message alpaca-message-'+(null!=(a=null!=(a=t.id||(null!=e?e.id:e))?a:s,l="function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a)?l:"")+'">\n        '+(null!=(a=null!=(a=t.message||(null!=e?e.message:e))?a:s,l="function"==typeof a?a.call(e,{"name":"message","hash":{},"data":n}):a)?l:"")+"\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["web-edit"].wizard=Handlebars.template({"1":function(e,t,i,n){var l;return'        <div class="alpaca-wizard-nav">\n            <nav class="binf-navbar binf-navbar-default" role="navigation">\n                <div class="binf-container-fluid alpaca-wizard-back">\n                    <ul class="binf-nav binf-navbar-nav">\n'+(null!=(l=t.each.call(e,null!=e?e.steps:e,{"name":"each","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n}))?l:"")+"                    </ul>\n                </div>\n            </nav>\n        </div>\n"},"2":function(e,t,i,n){var l,a,s=t.helperMissing;return'                        <li data-alpaca-wizard-step-index="'+this.escapeExpression((a=null!=(a=t.index||n&&n.index)?a:s,"function"==typeof a?a.call(e,{"name":"index","hash":{},"data":n}):a))+'">\n                            <div class="holder">\n                                <div class="title">'+(null!=(a=null!=(a=t.title||(null!=e?e.title:e))?a:s,l="function"==typeof a?a.call(e,{"name":"title","hash":{},"data":n}):a)?l:"")+'</div>\n                                <div class="description">'+(null!=(a=null!=(a=t.description||(null!=e?e.description:e))?a:s,l="function"==typeof a?a.call(e,{"name":"description","hash":{},"data":n}):a)?l:"")+'</div>\n                            </div>\n                            <div class="chevron"></div>\n                        </li>\n'},"4":function(e,t,i,n){return'        <div class="alpaca-wizard-progress-bar">\n            <div class="binf-progress">\n                <div class="binf-progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">\n                </div>\n            </div>\n        </div>\n'},"6":function(e,t,i,n){var l,a;return"            <h3>"+(null!=(a=null!=(a=t.wizardTitle||(null!=e?e.wizardTitle:e))?a:t.helperMissing,l="function"==typeof a?a.call(e,{"name":"wizardTitle","hash":{},"data":n}):a)?l:"")+"</h3>\n"},"8":function(e,t,i,n){var l,a;return"            <h4>"+(null!=(a=null!=(a=t.wizardDescription||(null!=e?e.wizardDescription:e))?a:t.helperMissing,l="function"==typeof a?a.call(e,{"name":"wizardDescription","hash":{},"data":n}):a)?l:"")+"</h4>\n"},"10":function(e,t,i,n,l,a){var s;return null!=(s=(t.compare||e&&e.compare||t.helperMissing).call(e,null!=e?e.align:e,"left",{"name":"compare","hash":{},"fn":this.program(11,n,0,l,a),"inverse":this.noop,"data":n}))?s:""},"11":function(e,t,i,n,l,a){var s,o,r=t.helperMissing,c=this.escapeExpression;return'                        <button type="'+c((o=null!=(o=t.type||(null!=e?e.type:e))?o:r,"function"==typeof o?o.call(e,{"name":"type","hash":{},"data":n}):o))+'" class="'+c(this.lambda(null!=(s=null!=(s=null!=a[2]?a[2].view:a[2])?s.styles:s)?s.button:s,e))+'" data-alpaca-wizard-button-key="'+c((o=null!=(o=t.key||n&&n.key)?o:r,"function"==typeof o?o.call(e,{"name":"key","hash":{},"data":n}):o))+'">'+(null!=(o=null!=(o=t.title||(null!=e?e.title:e))?o:r,s="function"==typeof o?o.call(e,{"name":"title","hash":{},"data":n}):o)?s:"")+"</button>\n"},"13":function(e,t,i,n,l,a){var s;return null!=(s=(t.compare||e&&e.compare||t.helperMissing).call(e,null!=e?e.align:e,"right",{"name":"compare","hash":{},"fn":this.program(11,n,0,l,a),"inverse":this.noop,"data":n}))?s:""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s;return'<script type="text/x-handlebars-template">\n\n    <div class="alpaca-wizard">\n\n        \x3c!-- nav bar --\x3e\n'+(null!=(s=t.if.call(e,null!=e?e.showSteps:e,{"name":"if","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"\n        \x3c!-- wizard progress bar --\x3e\n"+(null!=(s=t.if.call(e,null!=e?e.showProgressBar:e,{"name":"if","hash":{},"fn":this.program(4,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"\n"+(null!=(s=t.if.call(e,null!=e?e.wizardTitle:e,{"name":"if","hash":{},"fn":this.program(6,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+(null!=(s=t.if.call(e,null!=e?e.wizardDescription:e,{"name":"if","hash":{},"fn":this.program(8,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+'\n        \x3c!-- wizard steps --\x3e\n        <div class="alpaca-wizard-steps">\n\n        </div>\n\n        \x3c!-- wizard buttons --\x3e\n        <div class="alpaca-wizard-buttons">\n\n            <div class="binf-pull-left">\n'+(null!=(s=t.each.call(e,null!=e?e.buttons:e,{"name":"each","hash":{},"fn":this.program(10,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+'            </div>\n\n            <div class="binf-pull-right">\n'+(null!=(s=t.each.call(e,null!=e?e.buttons:e,{"name":"each","hash":{},"fn":this.program(13,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+'            </div>\n\n            <div style="clear:both"></div>\n\n        </div>\n\n    </div>\n\n<\/script>'},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["bootstrap-display"]=this.HandlebarsPrecompiled["bootstrap-display"]||{},this.HandlebarsPrecompiled["bootstrap-display"].container=Handlebars.template({"1":function(e,t,i,n){var l;return'        <label class="'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.labelClass:l,{"name":"if","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n}))?l:"")+'alpaca-container-label">\n\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.collapsible:l,{"name":"if","hash":{},"fn":this.program(4,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n            "+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.label:l,e))?l:"")+"\n\n"+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.collapsible:l,{"name":"if","hash":{},"fn":this.program(6,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n        </label>\n"},"2":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.labelClass:l,e))+" "},"4":function(e,t,i,n){return'            <span data-binf-toggle="collapse">\n'},"6":function(e,t,i,n){return"            </span>\n"},"8":function(e,t,i,n){var l;return'        <p class="alpaca-helper binf-help-block '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helperClass:l,{"name":"if","hash":{},"fn":this.program(9,n,0),"inverse":this.noop,"data":n}))?l:"")+'">\n            <i class="alpaca-icon-16 binf-glyphicon binf-glyphicon-info-sign"></i>\n            '+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.helper:l,e))?l:"")+"\n        </p>\n"},"9":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.helperClass:l,e))},"11":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o='<script type="text/x-handlebars-template">\n\n    <div>\n\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.label:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n"+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helper:l,{"name":"if","hash":{},"fn":this.program(8,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n        ";return a=null!=(a=t.container||(null!=e?e.container:e))?a:t.helperMissing,s={"name":"container","hash":{},"fn":this.program(11,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.container||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n\n    </div>\n\n<\/script>\n"},"useData":!0}),this.HandlebarsPrecompiled["bootstrap-display"]["control-radio"]=Handlebars.template({"1":function(e,t,i,n,l,a){var s;return null!=(s=(t.compare||e&&e.compare||t.helperMissing).call(e,null!=e?e.value:e,null!=a[1]?a[1].data:a[1],{"name":"compare","hash":{},"fn":this.program(2,n,0,l,a),"inverse":this.noop,"data":n}))?s:""},"2":function(e,t,i,n){var l,a;return"                "+(null!=(a=null!=(a=t.text||(null!=e?e.text:e))?a:t.helperMissing,l="function"==typeof a?a.call(e,{"name":"text","hash":{},"data":n}):a)?l:"")+"\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s;return'<script type="text/x-handlebars-template">\n\n    <div>\n'+(null!=(s=t.each.call(e,null!=e?e.selectOptions:e,{"name":"each","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"    </div>\n\n<\/script>\n"},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["bootstrap-display"]["control-select"]=Handlebars.template({"1":function(e,t,i,n,l,a){var s;return null!=(s=(t.compare||e&&e.compare||t.helperMissing).call(e,null!=e?e.value:e,null!=a[1]?a[1].data:a[1],{"name":"compare","hash":{},"fn":this.program(2,n,0,l,a),"inverse":this.noop,"data":n}))?s:""},"2":function(e,t,i,n){var l,a;return"            "+(null!=(a=null!=(a=t.text||(null!=e?e.text:e))?a:t.helperMissing,l="function"==typeof a?a.call(e,{"name":"text","hash":{},"data":n}):a)?l:"")+"\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s;return'<script type="text/x-handlebars-template">\n\n    <div>\n'+(null!=(s=t.each.call(e,null!=e?e.selectOptions:e,{"name":"each","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"    </div>\n\n<\/script>\n"},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["bootstrap-display"].control=Handlebars.template({"1":function(e,t,i,n){var l,a;return'        <label class="'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.labelClass:l,{"name":"if","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n}))?l:"")+' binf-control-label alpaca-control-label" for="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a))+'">'+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.label:l,e))?l:"")+"</label>\n"},"2":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.labelClass:l,e))},"4":function(e,t,i,n){return""},"6":function(e,t,i,n){var l;return'        <p class="binf-help-block '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helperClass:l,{"name":"if","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n}))?l:"")+'">\n            <i class="binf-glyphicon binf-glyphicon-info-sign"></i>\n            '+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.helper:l,e))?l:"")+"\n        </p>\n"},"7":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.helperClass:l,e))},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o='<script type="text/x-handlebars-template">\n\n    <div class="binf-form-group">\n\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.label:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n        ";return a=null!=(a=t.control||(null!=e?e.control:e))?a:t.helperMissing,s={"name":"control","hash":{},"fn":this.program(4,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.control||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n\n"+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helper:l,{"name":"if","hash":{},"fn":this.program(6,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["bootstrap-display"].message=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a;return'<script type="text/x-handlebars-template">\n\n    <div class="binf-help-block">\n        <i class="binf-glyphicon binf-glyphicon-exclamation-sign"></i>'+(null!=(a=null!=(a=t.message||(null!=e?e.message:e))?a:t.helperMissing,l="function"==typeof a?a.call(e,{"name":"message","hash":{},"data":n}):a)?l:"")+"\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["bootstrap-edit"]=this.HandlebarsPrecompiled["bootstrap-edit"]||{},this.HandlebarsPrecompiled["bootstrap-edit"]["container-grid"]=Handlebars.template({"1":function(e,t,i,n){return" binf-btn-group"},"3":function(e,t,i,n,l,a){var s,o=t.helperMissing;return"\n"+(null!=(s=(t.compare||e&&e.compare||o).call(e,null!=(s=null!=a[1]?a[1].options:a[1])?s.toolbarStyle:s,"link",{"name":"compare","hash":{},"fn":this.program(4,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"\n"+(null!=(s=(t.compare||e&&e.compare||o).call(e,null!=(s=null!=a[1]?a[1].options:a[1])?s.toolbarStyle:s,"button",{"name":"compare","hash":{},"fn":this.program(6,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"\n"},"4":function(e,t,i,n){var l=this.lambda,a=this.escapeExpression;return'                <a href="#" class="alpaca-array-toolbar-action" data-array-toolbar-action="'+a(l(null!=e?e.action:e,e))+'">'+a(l(null!=e?e.label:e,e))+"</a>\n"},"6":function(e,t,i,n,l,a){var s,o=this.lambda,r=this.escapeExpression;return'                <button class="alpaca-array-toolbar-action '+r(o(null!=(s=null!=(s=null!=a[2]?a[2].view:a[2])?s.styles:s)?s.button:s,e))+'" data-array-toolbar-action="'+r(o(null!=e?e.action:e,e))+'">\n'+(null!=(s=t.if.call(e,null!=e?e.iconClass:e,{"name":"if","hash":{},"fn":this.program(7,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"                    "+(null!=(s=t.if.call(e,null!=e?e.label:e,{"name":"if","hash":{},"fn":this.program(9,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"\n                </button>\n"},"7":function(e,t,i,n){return'                    <i class="'+this.escapeExpression(this.lambda(null!=e?e.iconClass:e,e))+'"></i>\n'},"9":function(e,t,i,n){var l,a;return null!=(a=null!=(a=t.label||(null!=e?e.label:e))?a:t.helperMissing,l="function"==typeof a?a.call(e,{"name":"label","hash":{},"data":n}):a)?l:""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s;return'<script type="text/x-handlebars-template">\n\n    <div>\n\n        <div class="alpaca-array-toolbar" '+(null!=(s=(t.compare||e&&e.compare||t.helperMissing).call(e,null!=(s=null!=e?e.options:e)?s.toolbarStyle:s,"button",{"name":"compare","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+">\n\n"+(null!=(s=t.each.call(e,null!=e?e.arrayToolbarActions:e,{"name":"each","hash":{},"fn":this.program(3,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+'\n        </div>\n\n        <div class="alpaca-container-grid-holder"></div>\n\n    </div>\n\n<\/script>'},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["bootstrap-edit"].container=Handlebars.template({"1":function(e,t,i,n){var l;return'        <label class="'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.labelClass:l,{"name":"if","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n}))?l:"")+'alpaca-container-label">'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.collapsible:l,{"name":"if","hash":{},"fn":this.program(4,n,0),"inverse":this.noop,"data":n}))?l:"")+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.label:l,e))?l:"")+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.collapsible:l,{"name":"if","hash":{},"fn":this.program(6,n,0),"inverse":this.noop,"data":n}))?l:"")+"</label>\n"},"2":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.labelClass:l,e))+" "},"4":function(e,t,i,n){return'            <span data-binf-toggle="collapse">\n'},"6":function(e,t,i,n){return"            </span>\n"},"8":function(e,t,i,n){var l;return'        <p class="alpaca-helper binf-help-block '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helperClass:l,{"name":"if","hash":{},"fn":this.program(9,n,0),"inverse":this.noop,"data":n}))?l:"")+'">\n            <i class="alpaca-icon-16 binf-glyphicon binf-glyphicon-info-sign"></i>\n            '+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.helper:l,e))?l:"")+"\n        </p>\n"},"9":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.helperClass:l,e))},"11":function(e,t,i,n){return""},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s;return helpersHtml=(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helper:l,{"name":"if","hash":{},"fn":this.program(8,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n        ",preHelpersHtml="",postHelpersHtml=helpersHtml,buffer='<script type="text/x-handlebars-template">\n\n    <div>\n\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.label:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n"+preHelpersHtml,a=null!=(a=t.container||(null!=e?e.container:e))?a:t.helperMissing,s={"name":"container","hash":{},"fn":this.program(11,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.container||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(buffer+=l),buffer+postHelpersHtml+"\n\n    </div>\n\n<\/script>\n"},"useData":!0}),this.HandlebarsPrecompiled["bootstrap-edit"]["control-upload-partial-download"]=Handlebars.template({"1":function(e,t,i,n){var l,a=this.lambda,s=this.escapeExpression;return'        <td></td>\n        <td class="name">\n            <span>'+s(a(null!=(l=null!=e?e.file:e)?l.name:l,e))+'</span>\n        </td>\n        <td class="size">\n            <span>'+s(a(null!=(l=null!=e?e.file:e)?l.size:l,e))+'</span>\n        </td>\n        <td class="error" colspan="2">\n            Error:\n            '+s(a(null!=(l=null!=e?e.file:e)?l.error:l,e))+"\n        </td>\n"},"3":function(e,t,i,n){var l,a=this.lambda,s=this.escapeExpression;return'        <td class="preview">\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.file:e)?l.thumbnailUrl:l,{"name":"if","hash":{},"fn":this.program(4,n,0),"inverse":this.noop,"data":n}))?l:"")+'        </td>\n        <td class="name">\n            <a href="'+s(a(null!=(l=null!=e?e.file:e)?l.url:l,e))+'" title="'+s(a(null!=(l=null!=e?e.file:e)?l.name:l,e))+'" data-gallery="'+s(a(null!=(l=null!=e?e.file:e)?l.thumbnailUrl:l,e))+'gallery" download="'+s(a(null!=(l=null!=e?e.file:e)?l.name:l,e))+'">'+s(a(null!=(l=null!=e?e.file:e)?l.name:l,e))+'</a>\n        </td>\n        <td class="size"><span>'+s(a(null!=(l=null!=e?e.file:e)?l.size:l,e))+'</span></td>\n        <td colspan="2"></td>\n'},"4":function(e,t,i,n){var l,a=this.lambda,s=this.escapeExpression;return'            <a href="'+s(a(null!=(l=null!=e?e.file:e)?l.url:l,e))+'" title="'+s(a(null!=(l=null!=e?e.file:e)?l.name:l,e))+'" data-gallery="gallery" download="'+s(a(null!=(l=null!=e?e.file:e)?l.name:l,e))+'">\n                <img src="'+s(a(null!=(l=null!=e?e.file:e)?l.thumbnailUrl:l,e))+'">\n            </a>\n'},"6":function(e,t,i,n,l,a){var s;return null!=(s=t.each.call(e,null!=e?e.buttons:e,{"name":"each","hash":{},"fn":this.program(7,n,0,l,a),"inverse":this.noop,"data":n}))?s:""},"7":function(e,t,i,n,l,a){var s;return null!=(s=t.if.call(e,null!=e?e.isDelete:e,{"name":"if","hash":{},"fn":this.program(8,n,0,l,a),"inverse":this.program(11,n,0,l,a),"data":n}))?s:""},"8":function(e,t,i,n){var l,a=this.lambda,s=this.escapeExpression;return'                        <button class="delete binf-btn binf-btn-danger" data-type="'+s(a(null!=(l=null!=e?e.file:e)?l.deleteType:l,e))+'" data-file-id="'+s(a(null!=(l=null!=e?e.file:e)?l.id:l,e))+'" data-url="'+s(a(null!=(l=null!=e?e.file:e)?l.deleteUrl:l,e))+'" '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.file:e)?l.deleteWithCredentials:l,{"name":"if","hash":{},"fn":this.program(9,n,0),"inverse":this.noop,"data":n}))?l:"")+'>\n                            <i class="binf-glyphicon binf-glyphicon-trash glyphicon-white"></i>\n                        </button>\n'},"9":function(e,t,i,n){return'data-xhr-fields="{\\"withCredentials\\":true}" '},"11":function(e,t,i,n,l,a){var s,o,r=t.helperMissing,c=this.escapeExpression;return'                        <button class="'+c((o=null!=(o=t.key||(null!=e?e.key:e))?o:r,"function"==typeof o?o.call(e,{"name":"key","hash":{},"data":n}):o))+" binf-btn "+c((o=null!=(o=t.buttonClass||(null!=e?e.buttonClass:e))?o:r,"function"==typeof o?o.call(e,{"name":"buttonClass","hash":{},"data":n}):o))+'" data-file-id="'+c(this.lambda(null!=(s=null!=a[2]?a[2].file:a[2])?s.id:s,e))+'">\n'+(null!=(s=t.if.call(e,null!=e?e.iconClass:e,{"name":"if","hash":{},"fn":this.program(12,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+(null!=(s=t.if.call(e,null!=e?e.label:e,{"name":"if","hash":{},"fn":this.program(14,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"                        </button>\n"},"12":function(e,t,i,n){var l;return'                                <i class="'+this.escapeExpression((l=null!=(l=t.iconClass||(null!=e?e.iconClass:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"iconClass","hash":{},"data":n}):l))+'"></i>\n'},"14":function(e,t,i,n){var l;return"                                "+this.escapeExpression((l=null!=(l=t.label||(null!=e?e.label:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"label","hash":{},"data":n}):l))+"\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n,l,a){var s;return'<script type="text/x-handlebars-template">\n\n    <tr class="template-download">\n'+(null!=(s=t.if.call(e,null!=(s=null!=e?e.file:e)?s.error:s,{"name":"if","hash":{},"fn":this.program(1,n,0,l,a),"inverse":this.program(3,n,0,l,a),"data":n}))?s:"")+"        <td>\n"+(null!=(s=t.if.call(e,null!=e?e.buttons:e,{"name":"if","hash":{},"fn":this.program(6,n,0,l,a),"inverse":this.noop,"data":n}))?s:"")+"        </td>\n    </tr>\n\n<\/script>"},"useData":!0,"useDepths":!0}),this.HandlebarsPrecompiled["bootstrap-edit"]["control-upload-partial-upload"]=Handlebars.template({"1":function(e,t,i,n){return'        <td class="preview">\n            <span class="binf-fade"></span>\n        </td>\n'},"3":function(e,t,i,n){return"        <td></td>\n"},"5":function(e,t,i,n){var l;return'        <td class="error" colspan="2"><span class="binf-label label-important">Error</span> '+this.escapeExpression(this.lambda(null!=(l=null!=e?e.file:e)?l.error:l,e))+"</td>\n"},"7":function(e,t,i,n){var l;return null!=(l=t.if.call(e,null!=(l=null!=e?e.file:e)?l.valid:l,{"name":"if","hash":{},"fn":this.program(8,n,0),"inverse":this.program(15,n,0),"data":n}))?l:""},"8":function(e,t,i,n){var l;return(null!=(l=(t.compare||e&&e.compare||t.helperMissing).call(e,n&&n.index,0,{"name":"compare","hash":{},"fn":this.program(9,n,0),"inverse":this.noop,"data":n}))?l:"")+'            <td class="start">\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.autoUpload:l,{"name":"if","hash":{},"fn":this.program(11,n,0),"inverse":this.program(13,n,0),"data":n}))?l:"")+"            </td>\n"},"9":function(e,t,i,n){return'                <td>\n                    <div class="binf-progress progress-success binf-progress-striped binf-active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">\n                        <div class="binf-progress-bar" style="width:0%;"></div>\n                    </div>\n                </td>\n'},"11":function(e,t,i,n){return""},"13":function(e,t,i,n){return'                <button class="binf-btn binf-btn-primary"> \\\n                    <i class="binf-glyphicon binf-glyphicon-upload glyphicon-white"></i>\n                    <span>Start</span>\n                </button>\n'},"15":function(e,t,i,n){var l;return'            <td></td>\n            <td class="cancel">\n'+(null!=(l=(t.compare||e&&e.compare||t.helperMissing).call(e,n&&n.index,0,{"name":"compare","hash":{},"fn":this.program(16,n,0),"inverse":this.noop,"data":n}))?l:"")+"            </td>\n"},"16":function(e,t,i,n){return'                <button class="binf-btn binf-btn-warning">\n                    <i class="binf-glyphicon binf-glyphicon-ban-circle glyphicon-white"></i>\n                    <span>Cancel</span>\n                </button>\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a=this.lambda,s=this.escapeExpression;return'<script type="text/x-handlebars-template">\n\n    <tr class="template-upload">\n\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.showUploadPreview:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.program(3,n,0),"data":n}))?l:"")+'\n        <td class="name"><span>'+s(a(null!=(l=null!=e?e.file:e)?l.name:l,e))+'</span></td>\n        <td class="size"><span>'+s(a(null!=(l=null!=e?e.file:e)?l.size:l,e))+"</span></td>\n\n"+(null!=(l=t.if.call(e,null!=(l=null!=e?e.file:e)?l.error:l,{"name":"if","hash":{},"fn":this.program(5,n,0),"inverse":this.program(7,n,0),"data":n}))?l:"")+"        <td></td>\n    </tr>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["bootstrap-edit"]["control-upload"]=Handlebars.template({"1":function(e,t,i,n){var l;return this.escapeExpression((l=null!=(l=t.cssClasses||(null!=e?e.cssClasses:e))?l:t.helperMissing,"function"==typeof l?l.call(e,{"name":"cssClasses","hash":{},"data":n}):l))},"3":function(e,t,i,n){var l;return"                        <thead>\n                            <tr>\n"+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.showUploadPreview:l,{"name":"if","hash":{},"fn":this.program(4,n,0),"inverse":this.program(6,n,0),"data":n}))?l:"")+'                                <td>Name</td>\n                                <td>Size</td>\n                                <td colspan="2"></td>\x3c!-- error or start or progress indicator --\x3e\n                                <td>Actions</td>\n                            </tr>\n                        </thead>\n'},"4":function(e,t,i,n){return"                                    <td>Thumbnail</td>\n"},"6":function(e,t,i,n){return"                                    <td></td>\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s=this.escapeExpression,o=t.helperMissing;return'<script type="text/x-handlebars-template">\n\n    <div class="alpaca-fileupload-container '+(null!=(l=t.if.call(e,null!=e?e.cssClasses:e,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+'">\n        <div class="binf-container-fluid">\n            <div class="binf-row">\n                <div class="binf-col-md-12">\n                    <div class="binf-btn-group">\n                        <span class="'+s(this.lambda(null!=(l=null!=(l=null!=e?e.view:e)?l.styles:l)?l.button:l,e))+' fileinput-button">\n                            <i class="binf-glyphicon binf-glyphicon-upload"></i>\n                            <span class="fileupload-add-button">'+s((a=null!=(a=t.chooseButtonLabel||(null!=e?e.chooseButtonLabel:e))?a:o,"function"==typeof a?a.call(e,{"name":"chooseButtonLabel","hash":{},"data":n}):a))+'</span>\n                            <input class="alpaca-fileupload-input" type="file" name="'+s((a=null!=(a=t.name||(null!=e?e.name:e))?a:o,"function"==typeof a?a.call(e,{"name":"name","hash":{},"data":n}):a))+'_files">\n                            <input class="alpaca-fileupload-input-hidden" type="hidden" name="'+s((a=null!=(a=t.name||(null!=e?e.name:e))?a:o,"function"==typeof a?a.call(e,{"name":"name","hash":{},"data":n}):a))+'_files_hidden">\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div class="binf-row alpaca-fileupload-well">\n                <div class="binf-col-md-12 fileupload-active-zone">\n                    <table class="binf-table binf-table-striped">\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.showHeaders:l,{"name":"if","hash":{},"fn":this.program(3,n,0),"inverse":this.noop,"data":n}))?l:"")+'                        <tbody class="files">\n                        </tbody>\n                    </table>\n                    <p align="center" class="dropzone-message">'+s((a=null!=(a=t.dropZoneMessage||(null!=e?e.dropZoneMessage:e))?a:o,"function"==typeof a?a.call(e,{"name":"dropZoneMessage","hash":{},"data":n}):a))+'</p>\n                </div>\n            </div>\n            <div class="binf-row">\n                <div class="binf-col-md-12">\n                    <div id="progress" class="binf-progress">\n                        <div class="binf-progress-bar binf-progress-bar-success"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n<\/script>'},"useData":!0}),this.HandlebarsPrecompiled["bootstrap-edit"].control=Handlebars.template({"1":function(e,t,i,n){var l,a;return'        <label class="'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.labelClass:l,{"name":"if","hash":{},"fn":this.program(2,n,0),"inverse":this.noop,"data":n}))?l:"")+' binf-control-label alpaca-control-label" for="'+this.escapeExpression((a=null!=(a=t.id||(null!=e?e.id:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a))+'">'+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.label:l,e))?l:"")+"</label>\n"},"2":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.labelClass:l,e))},"4":function(e,t,i,n){return""},"6":function(e,t,i,n){var l;return'        <p class="binf-help-block '+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helperClass:l,{"name":"if","hash":{},"fn":this.program(7,n,0),"inverse":this.noop,"data":n}))?l:"")+'">\n            <i class="binf-glyphicon binf-glyphicon-info-sign"></i>\n            '+(null!=(l=this.lambda(null!=(l=null!=e?e.options:e)?l.helper:l,e))?l:"")+"\n        </p>\n"},"7":function(e,t,i,n){var l;return this.escapeExpression(this.lambda(null!=(l=null!=e?e.options:e)?l.helperClass:l,e))},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s,o='<script type="text/x-handlebars-template">\n\n    <div class="binf-form-group">\n\n'+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.label:l,{"name":"if","hash":{},"fn":this.program(1,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n        ";return a=null!=(a=t.control||(null!=e?e.control:e))?a:t.helperMissing,s={"name":"control","hash":{},"fn":this.program(4,n,0),"inverse":this.noop,"data":n},l="function"==typeof a?a.call(e,s):a,t.control||(l=t.blockHelperMissing.call(e,l,s)),null!=l&&(o+=l),o+"\n\n"+(null!=(l=t.if.call(e,null!=(l=null!=e?e.options:e)?l.helper:l,{"name":"if","hash":{},"fn":this.program(6,n,0),"inverse":this.noop,"data":n}))?l:"")+"\n    </div>\n\n<\/script>"},"useData":!0}),this.HandlebarsPrecompiled["bootstrap-edit"].message=Handlebars.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,n){var l,a,s=t.helperMissing
;return'<script type="text/x-handlebars-template">\n\n    <div class="binf-help-block alpaca-message alpaca-message-'+(null!=(a=null!=(a=t.id||(null!=e?e.id:e))?a:s,l="function"==typeof a?a.call(e,{"name":"id","hash":{},"data":n}):a)?l:"")+'">\n        <i class="binf-glyphicon binf-glyphicon-exclamation-sign"></i>'+(null!=(a=null!=(a=t.message||(null!=e?e.message:e))?a:s,l="function"==typeof a?a.call(e,{"name":"message","hash":{},"data":n}):a)?l:"")+"\n    </div>\n\n<\/script>"},"useData":!0}),function(e,t){e.Base=function(){var e=!1,t=["constructor","toString","valueOf"],i=t.length,n=/\bbase\b/,l=function(){},a={"toSource":null,"base":l},s=function(){};return s.extend=function(t,i){var n=s.prototype.extend;e=!0;var l=new this;n.call(l,t),l.base=a.base,e=!1;var o=l.constructor,r=l.constructor=function(){e||(this&&(this._constructing||this.constructor===r)?(this._constructing=!0,o.apply(this,arguments),this._constructing=!1):arguments.length&&s.cast.apply(r,arguments))};return n.call(r,this),r.ancestor=this,r.prototype=l,r.valueOf=function(e){return"object"===e?r:o.valueOf()},n.call(r,i),"function"==typeof r.init&&r.init(),r},s.prototype.extend=function(l,o){if("string"==typeof l&&arguments.length>1){var r=this[l];if(r&&"function"==typeof o&&(!r.valueOf||r.valueOf()!==o.valueOf())&&n.test(o)){var c=o.valueOf();o=function(){var e,t=this.base||a.base;return this.base=r,e=0===arguments.length?c.call(this):c.apply(this,arguments),this.base=t,e},o.valueOf=function(e){return"object"===e?o:c},o.toString=s.toString}this[l]=o}else if(l){var d=s.prototype.extend;e||"function"==typeof this||(d=this.extend||d);for(var u,p=e?0:1;p<i;p++)u=t[p],l[u]!==a[u]&&d.call(this,u,l[u]);for(u in l)a[u]||d.call(this,u,l[u])}return this},s=s.extend({"base":a.base},{"ancestor":Object,"version":"1.1","cast":function(){for(var e,t,i=0,n=arguments.length;i<n;i++)t=arguments[i],e=t.extend||s.prototype.extend,"function"==typeof t?(e=t.prototype.extend||s.prototype.extend,e.call(t.prototype,this.prototype),e.call(t,this),t.ancestor=this):e.call(t,this.prototype);return this},"implement":function(){for(var e=0;e<arguments.length;e++)this.cast.call(arguments[e],this);return this},"toString":function(){return this.valueOf()+""}})}()}(this),function(e){var t=function(){var i=t.makeArray(arguments);if(0===i.length)return t.throwDefaultError("You must supply at least one argument.  This argument can either be a DOM element against which Alpaca will generate a form or it can be a function name.  See http://www.alpacajs.org for more details.");var n=i[0];n&&t.isString(n)&&(n=e("#"+n));var l=null,a=null,s=null,o=null,r=null,c=null,d=null,u=null,p=!1,h={},f=null,m=null,g=null,v=null,b=["get","exists","destroy"],y=i.length>1&&t.isString(i[1])&&b.indexOf(i[1])>-1,w=function(){var i=null,l=e(n).find(":first");if(l.length>0){var a=e(l[0]).attr("data-alpaca-field-id");if(a){var s=t.fieldInstances[a];s&&(i=s)}else{if(e(l[0]).attr("data-alpaca-form-id")){var o=e(l[0]).find(":first");if(o.length>0){var r=e(o[0]).attr("data-alpaca-field-id");if(r){var s=t.fieldInstances[r];s&&(i=s)}}}}}return i}();if(w||y){if(y){var x=i[1];return"get"===x?w:"exists"===x?!!w:"destroy"===x?void w.destroy():t.throwDefaultError("Unknown special function: "+x)}return w}var C=null;if(1===i.length){var k=e(n).text();C=JSON.parse(k),e(n).html("")}else C=t.isObject(i[1])?i[1]:t.isFunction(i[1])?i[1]():{"data":i[1]};if(!C)return t.throwDefaultError("Unable to determine Alpaca configuration");l=C.data,a=C.schema,s=C.options,o=C.view,r=C.render,C.callback&&(r=C.callback),c=C.postRender,d=C.error,u=C.connector,f=C.dataSource,m=C.schemaSource,g=C.optionsSource,v=C.viewSource,C.ui&&(h.ui=C.ui),C.type&&(h.type=C.type),t.isEmpty(C.notTopLevel)||(p=C.notTopLevel),t.isEmpty(d)&&(d=t.defaultErrorCallback);var F="default",E={};t.isString(u)?F=u:t.isObject(u)&&u.id&&(F=u.id,u.config&&(E=u.config));var I=t.getConnectorClass(F);u=new I(F,E);var V=u;if(p){V=new(t.getConnectorClass("default"))("default")}s||(s={});var M=function(e){e.parent||(e.hideInitValidationError||e.refreshValidationState(!0),"view"!==e.view.type&&t.fieldApplyFieldAndChildren(e,function(e){e.hideInitValidationError=!1}))},_=function(e){e.parent||(e.observableScope=t.generateId()),t.isUndefined(s.focus)&&!e.parent&&(s.focus=t.defaultFocus),s&&s.focus?window.setTimeout(function(){var t=function(e){e.suspendBlurFocus=!0,e.trigger("focus"),e.suspendBlurFocus=!1};if(s.focus){if(e.isControlField&&e.isAutoFocusable())t(e);else if(e.isContainerField)if(!0===s.focus){if(e.children&&e.children.length>0)for(var i=0;i<e.children.length;i++)if(e.children[i].isControlField&&e.children[i].isAutoFocusable()&&!e.children[i].options.readonly){t(e.children[i]);break}}else if("string"==typeof s.focus){var n=e.getControlByPath(s.focus);n&&n.isControlField&&n.isAutoFocusable()&&t(n)}M(e)}},500):M(e),c&&c(e)};V.loadAll({"data":l,"schema":a,"options":s,"view":o,"dataSource":f,"schemaSource":m,"optionsSource":g,"viewSource":v},function(e,i,c,p){return e=e||l,c=c||a,i=i||s,p=p||o,t.isEmpty(e)&&t.isEmpty(c)&&(t.isEmpty(i)||t.isEmpty(i.type))&&(e="",t.isEmpty(i)?i="text":s&&t.isObject(s)&&(i.type="text")),i.view&&(p=i.view),t.init(n,e,i,c,p,h,r,_,u,d)},function(e){return d(e),null})};t.Fields={},t.Connectors={},t.Extend=e.extend,t.Create=function(){var t=Array.prototype.slice.call(arguments);return t.unshift({}),e.extend.apply(this,t)},t.Extend(t,{"makeArray":function(e){return Array.prototype.slice.call(e)},"isFunction":function(e){return"[object Function]"===Object.prototype.toString.call(e)},"isString":function(e){return"string"==typeof e},"isObject":function(e){return!t.isUndefined(e)&&"[object Object]"===Object.prototype.toString.call(e)},"isPlainObject":function(t){return e.isPlainObject(t)},"isNumber":function(e){return"number"==typeof e},"isArray":function(e){return e instanceof Array},"isBoolean":function(e){return"boolean"==typeof e},"isUndefined":function(e){return void 0===e},"trim":function(e){var i=e;return i&&t.isString(i)&&(i=i.replace(/^\s+|\s+$/g,"")),i},"safeDomParse":function(i){if(i&&t.isString(i)){i=t.trim(i);var n=null;try{n=e(i)}catch(t){i="<div>"+i+"</div>",n=e(i).children()}return n}return i},"isEmpty":function(e){var i=this;if(t.isUndefined(e))return!0;if(null===e)return!0;if(e&&t.isObject(e)){if(0===i.countProperties(e))return!0}return!1},"countProperties":function(e){var i=0;if(e&&t.isObject(e))for(var n in e)e.hasOwnProperty(n)&&"function"!=typeof e[n]&&i++;return i},"copyOf":function(i){var n=i;if(t.isArray(i)){n=[];for(var l=0;l<i.length;l++)n.push(t.copyOf(i[l]))}else if(t.isObject(i)){if(i instanceof Date)return new Date(i.getTime());if(i instanceof RegExp)return new RegExp(i);if(i.nodeType&&"cloneNode"in i)n=i.cloneNode(!0);else if(e.isPlainObject(i)){n={};for(var a in i)i.hasOwnProperty(a)&&(n[a]=t.copyOf(i[a]))}}return n},"cloneObject":function(e){return t.copyOf(e)},"spliceIn":function(e,t,i){return e.substring(0,t)+i+e.substring(t,e.length)},"compactArray":function(e){var t,i=[],n=e.length;for(t=0;t<n;t++)lang.isNull(e[t])||lang.isUndefined(e[t])||i.push(e[t]);return i},"removeAccents":function(e){return e.replace(/[\xe0\xe1\xe2\xe3\xe4\xe5]/g,"a").replace(/[\xe8\xe9\xea\xeb]/g,"e").replace(/[\xec\xed\xee\xef]/g,"i").replace(/[\xf2\xf3\xf4\xf5\xf6]/g,"o").replace(/[\xf9\xfa\xfb\xfc]/g,"u").replace(/[\xfd\xff]/g,"y").replace(/[\xf1]/g,"n").replace(/[\xe7]/g,"c").replace(/[\u0153]/g,"oe").replace(/[\xe6]/g,"ae")},"indexOf":function(e,i,n){var l,a=i.length;for(t.isFunction(n)||(n=function(e,t){return e===t}),l=0;l<a;l++)if(n.call({},e,i[l]))return l;return-1},"uniqueIdCounter":0,"defaultLocale":"en_US","defaultFocus":!0,"setDefaultLocale":function(e){this.defaultLocale=e},"defaultSchemaFieldMapping":{},"registerDefaultSchemaFieldMapping":function(e,t){e&&t&&(this.defaultSchemaFieldMapping[e]=t)},"defaultFormatFieldMapping":{},"registerDefaultFormatFieldMapping":function(e,t){e&&t&&(this.defaultFormatFieldMapping[e]=t)},"getSchemaType":function(e){var i=null;return t.isEmpty(e)?i="string":t.isArray(e)?i="array":t.isObject(e)?i="object":t.isString(e)?i="string":t.isNumber(e)?i="number":t.isBoolean(e)&&(i="boolean"),i||"object"!=typeof e||(i="object"),i},"views":{},"generateViewId":function(){return"view-"+this.generateId()},"registerView":function(e){var i=e.id;if(!i)return t.throwDefaultError("Cannot register view with missing view id: "+i);var n=this.views[i];if(n)t.mergeObject(n,e);else{this.views[i]=e,e.templates||(e.templates={});for(var l=t.TemplateEngineRegistry.ids(),a=0;a<l.length;a++){var s=l[a],o=t.TemplateEngineRegistry.find(s);if(o)for(var r=o.findCacheKeys(i),c=0;c<r.length;c++){var d=t.splitCacheKey(r[c]);e.templates[d.templateId]={"type":s,"template":!0,"cacheKey":r[c]}}}}},"getNormalizedView":function(e){return this.normalizedViews[e]},"lookupNormalizedView":function(e,t){var i=null;for(var n in this.normalizedViews){var l=this.normalizedViews[n];if(l.ui===e&&l.type===t){i=n;break}}return i},"registerTemplate":function(e,t,i){i||(i="base"),this.views[i]||(this.views[i]={},this.views[i].id=i),this.views[i].templates||(this.views[i].templates={}),this.views[i].templates[e]=t},"registerTemplates":function(e,t){for(var i in e)this.registerTemplate(i,e[i],t)},"registerMessage":function(e,t,i){i||(i="base"),this.views[i]||(this.views[i]={},this.views[i].id=i),this.views[i].messages||(this.views[i].messages={}),this.views[i].messages[e]=t},"registerMessages":function(e,t){for(var i in e)e.hasOwnProperty(i)&&this.registerMessage(i,e[i],t)},"defaultDateFormat":"MM/DD/YYYY","defaultTimeFormat":"HH:SS","regexps":{"email":/^[a-z0-9!\#\$%&'\*\-\/=\?\+\-\^_`\{\|\}~]+(?:\.[a-z0-9!\#\$%&'\*\-\/=\?\+\-\^_`\{\|\}~]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,6}$/i,"url":/^[a-z0-9]+:\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*(\:[0-9]{1,5})?(([0-9]{1,5})?\/.*)?$/i,"password":/^[0-9a-zA-Z\x20-\x7E]*$/,"date":/^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.]\d\d$/,"integer":/^([\+\-]?([0-9]\d*)|0)$/,"number":/^([\+\-]?((([0-9]+(\.)?)|([0-9]*\.[0-9]+))([eE][+-]?[0-9]+)?))$/,"phone":/^(\D?(\d{3})\D?\D?(\d{3})\D?(\d{4}))?$/,"ipv4":/^(?:1\d?\d?|2(?:[0-4]\d?|[6789]|5[0-5]?)?|[3-9]\d?|0)(?:\.(?:1\d?\d?|2(?:[0-4]\d?|[6789]|5[0-5]?)?|[3-9]\d?|0)){3}$/,"zipcode-five":/^(\d{5})?$/,"zipcode-nine":/^(\d{5}(-\d{4})?)?$/},"fieldInstances":{},"fieldClassRegistry":{},"registerFieldClass":function(e,t){this.fieldClassRegistry[e]=t},"getFieldClass":function(e){return this.fieldClassRegistry[e]},"getFieldClassType":function(e){for(var t in this.fieldClassRegistry)if(this.fieldClassRegistry.hasOwnProperty(t)&&this.fieldClassRegistry[t]===e)return t;return null},"connectorClassRegistry":{},"registerConnectorClass":function(e,t){this.connectorClassRegistry[e]=t},"getConnectorClass":function(e){return this.connectorClassRegistry[e]},"replaceAll":function(e,t,i){return e.replace(new RegExp(t,"g"),i)},"element":function(t,i,n,l){var a=e("<"+t+"/>");if(i&&a.attr(i),n&&a.css(n),l)for(var s in l)a.addClass(s)},"elementFromTemplate":function(i,n){var l=i;if(n)for(var a in n)l=t.replaceAll(l,"${"+a+"}",n[a]);return e(l)},"generateId":function(){return"alpaca"+ ++t.uniqueIdCounter},"later":function(t,i,n,l,a){t=t||0,i=i||{};var s,o,r=n,c=e.makeArray(l);if("string"==typeof n&&(r=i[n]),!r)throw{"name":"TypeError","message":"The function is undefined."};return s=function(){r.apply(i,c)},o=a?setInterval(s,t):setTimeout(s,t),{"id":o,"interval":a,"cancel":function(){this.interval?clearInterval(o):clearTimeout(o)}}},"endsWith":function(e,t){return-1!==e.indexOf(t,e.length-t.length)},"startsWith":function(e,t){return e.substr(0,t.length)===t},"isUri":function(e){return t.isString(e)&&(t.startsWith(e,"http://")||t.startsWith(e,"https://")||t.startsWith(e,"/")||t.startsWith(e,"./")||t.startsWith(e,"../"))},"traverseObject":function(e,i,n){t.isString(i)&&(i=i.split("."));var l=null,a=e,s=null;do{s=i.shift(),n&&s===n&&(s=i.shift()),t.isEmpty(a[s])?i=[]:(a=a[s],0===i.length&&(l=a))}while(i.length>0);return l},"each":function(e,i){if(t.isArray(e))for(var n=0;n<e.length;n++)i.apply(e[n]);else if(t.isObject(e))for(var l in e)i.apply(e[l])},"merge":function(e,i,n){e||(e={});for(var l in i){var a=!0;n&&(a=n(l)),a&&(t.isEmpty(i[l])?e[l]=i[l]:t.isObject(i[l])?(e[l]||(e[l]={}),e[l]=t.merge(e[l],i[l])):e[l]=i[l])}return e},"mergeObject":function(e,t){return e||(e={}),t||(t={}),this.mergeObject2(t,e),e},"mergeObject2":function(i,n){var l=t.isArray,a=t.isObject,s=t.isUndefined,o=t.copyOf,r=function(t,i){return l(t)?l(i)&&e.each(t,function(e){i.push(o(t[e]))}):a(t)?a(i)&&e.each(t,function(e){s(i[e])?i[e]=o(t[e]):i[e]=r(t[e],i[e])}):i=o(t),i};return r(i,n),n},"substituteTokens":function(e,i){if(!t.isEmpty(e))for(var n=0;n<i.length;n++){var l="{"+n+"}",a=e.indexOf(l);if(a>-1){var s=e.substring(0,a)+i[n]+e.substring(a+3);e=s}}return e},"compareObject":function(e,t){return equiv(e,t)},"compareArrayContent":function(t,i){var n=t&&i&&t.length===i.length;if(n)for(var l=t.length-1;l>=0;l--){var a=t[l];if(e.inArray(a,i)<0)return!1}return n},"testRegex":function(e,t){return new RegExp(e).test(t)},"isValEmpty":function(i){var n=!1;return t.isEmpty(i)?n=!0:(t.isString(i)&&""===i&&(n=!0),t.isObject(i)&&e.isEmptyObject(i)&&(n=!0),t.isArray(i)&&0===i.length&&(n=!0),t.isNumber(i)&&isNaN(i)&&(n=!0)),n},"init":function(e,i,n,l,a,s,o,r,c,d){var u=this;if(t.isObject(a)){a.id||(a.id=this.generateViewId());a.parent||(a.parent="bootstrap-edit"),this.registerView(a),a=a.id}this.compile(function(p){if(p.errors&&p.errors.length>0){for(var h=[],f=0;f<p.errors.length;f++){var m=p.errors[f].view,g=p.errors[f].cacheKey,v=p.errors[f].err,b="The template with cache key: "+g+" for view: "+m+" failed to compile";v&&v.message&&(b+=", message: "+v.message,h.push(v.message)),v&&(b+=", err: "+JSON.stringify(v)),t.logError(b),delete u.normalizedViews[m],delete u.views[m]}return t.throwErrorWithCallback("View compilation failed, cannot initialize Alpaca. "+h.join(", "),d)}u._init(e,i,n,l,a,s,o,r,c,d)},d)},"_init":function(i,n,l,a,s,o,r,c,d,u){var p=this,h=t.defaultView||null,f=null;if(e.mobile&&!h&&(h="jquerymobile"),"function"==typeof e.fn.modal&&!h&&(h="bootstrap"),void 0!==e.ui&&!h&&(h="jqueryui"),h&&(f=n?"edit":"create"),!s){var m=o.ui,g=o.type;m||(h||(h=t.defaultUI),h&&(m=h)),m&&(g||(g=f||"edit"),t.logDebug("No view provided but found request for UI: "+m+" and type: "+g),s=this.lookupNormalizedView(m,g),s?t.logDebug("Found view: "+s):t.logDebug("No view found for UI: "+m+" and type: "+g))}if(!s)return t.throwErrorWithCallback("A view was not specified and could not be automatically determined.",u);if(t.isString(s)&&!this.normalizedViews[s])return t.throwErrorWithCallback("The desired view: "+s+" could not be loaded.  Please make sure it is loaded and not misspelled.",u);var v=t.createFieldInstance(i,n,l,a,s,d,u);if(v){e(i).addClass("alpaca-field-rendering"),e(i).addClass("alpaca-hidden"),t.fieldInstances[v.getId()]=v,v.allFieldInstances=function(){return t.fieldInstances},t.isEmpty(r)&&(r=v.view.render),t.isEmpty(c)&&(c=v.view.postRender);var b=function(){v.parent||v.getFieldEl().addClass("alpaca-"+p.getNormalizedView(s).type),v.parent||v.getFieldEl().addClass("alpaca-top"),e(i).removeClass("alpaca-field-rendering"),e(i).removeClass("alpaca-hidden"),v._oldFieldEl&&e(v._oldFieldEl).remove(),c(v)};t.isEmpty(r)?v.render(function(){b()}):r(v,function(){b()}),v.callback=r,v.renderedCallback=c}},"createFieldInstance":function(e,i,n,l,a,s,o){if(t.isValEmpty(n)&&(n={}),t.isValEmpty(l)&&(l={}),n&&t.isString(n)){var r=n;n={},n.type=r}n.type||(l.type||(l.type=t.getSchemaType(i)),l.type||(i&&t.isArray(i)?l.type="array":l.type="object"),l&&l.enum?l.enum.length>3?n.type="select":n.type="radio":n.type=t.defaultSchemaFieldMapping[l.type],l.format&&t.defaultFormatFieldMapping[l.format]&&(n.type=t.defaultFormatFieldMapping[l.format]));var c=t.getFieldClass(n.type);return c?new c(e,i,n,l,a,s,o):(o({"message":"Unable to find field class for type: "+n.type,"reason":"FIELD_INSTANTIATION_ERROR"}),null)},"parseJSON":function(t){return t?e.parseJSON(t):null},"compile":function(i,n){var l=this,a={"errors":[],"count":0,"successCount":0},s=function(e){if(0===a.errors.length)for(var t in e)l.normalizedViews[t]=e[t];i(a)},o=function(e,t,i,n,l){var o=i.id;a.count++,t?a.errors.push({"view":o,"cacheKey":n,"err":t}):a.successCount++,a.count==l&&s(e)},r=function(i,n,l,a,s,r,c){var d=t.makeCacheKey(n.id,l,a,s),u="text/x-handlebars-template";if(r&&t.isObject(r)&&(u=r.type,r.cacheKey&&(d=r.cacheKey),r=r.template),r&&"string"==typeof r){var p=r.toLowerCase();if(0===p.indexOf("http://")||0===p.indexOf("https://")||0===p.indexOf("/")||0===p.indexOf("./"));else if(!r||0!==r.indexOf("#")&&0!==r.indexOf(".")){if(r){var h=n.templates[r];h&&(r=h)}}else{var f=e(r);u=e(f).attr("type"),r=e(f).html()}}if(!u){t.logError("Engine type was empty");var m=new Error("Engine type was empty");return void o(i,m,n,d,c)}var g=t.TemplateEngineRegistry.find(u);if(!g){t.logError("Cannot find template engine for type: "+type);var m=new Error("Cannot find template engine for type: "+type);return void o(i,m,n,d,c)}if(!0===r){if(g.isCached(d))return void o(i,null,n,d,c);var v="View configuration for view: "+n.id+" claims to have precompiled template for cacheKey: "+d+" but it could not be found";return t.logError(v),void o(i,new Error(v),n,d,c)}if(g.isCached(d))return void o(i,null,n,d,c);g.compile(d,r,function(e){o(i,e,n,d,c)})},c=function(e){var t=[];for(var i in e){var n=e[i];if(n.templates)for(var l in n.templates){var a=n.templates[l];t.push(function(e,t,i,n,l,a){return function(i){r(e,t,"view",n,l,a,i)}}(e,n,0,n.id,l,a))}if(n.fields)for(var s in n.fields)if(n.fields[s].templates)for(var l in n.fields[s].templates){var a=n.fields[s].templates[l];t.push(function(e,t,i,n,l,a){return function(i){r(e,t,"field",n,l,a,i)}}(e,n,0,s,l,a))}if(n.layout&&n.layout.template){var a=n.layout.template;t.push(function(e,t,i,n,l,a){return function(i){r(e,t,"layout","layout","layoutTemplate",a,i)}}(e,n,0,0,0,a))}if(n.globalTemplate){var a=n.globalTemplate;t.push(function(e,t,i,n,l,a){return function(i){r(e,t,"global","global","globalTemplate",a,i)}}(e,n,0,0,0,a))}}for(var o=t.length,c=0;c<t.length;c++)t[c](o)};!function(){var e={},i=0;t.normalizedViews||(t.normalizedViews={}),l.normalizedViews=t.normalizedViews;for(var a in l.views)if(!t.normalizedViews[a]){var o=new t.NormalizedView(a);if(!o.normalize(l.views))return t.throwErrorWithCallback("View normalization failed, cannot initialize Alpaca.  Please check the error logs.",n);e[a]=o,i++}i>0?c(e):s(e)}()},"getTemplateDescriptor":function(e,i,n){var l=null,a=null,s=null;if(e.templates&&e.templates[i]){s=t.makeCacheKey(e.id,"view",e.id,i);var o=e.templates[i];t.isObject(o)&&o.cacheKey&&(s=o.cacheKey)}if(n&&n.path){var r=n.path;if(e&&e.fields&&r&&r.length>1){var c=function(n,l,a){if(l!=n.length){var s=n.slice(),o=!1,r=n[l],d=r.indexOf("[");d>-1&&(r=r.substring(0,d),o=!0),s[l]=r;var u=s.join("/");if(e.fields[u]&&e.fields[u].templates&&e.fields[u].templates[i]){var p=t.makeCacheKey(e.id,"field",u,i);p&&a.push({"path":u,"cacheKey":p})}c(n,l+1,a),o&&c(s,l+1,a)}},d=r.split("/"),u=[];c(d,0,u),u.length>0&&(s=u[0].cacheKey)}}if("globalTemplate"!==i&&"global"!==i||(s=t.makeCacheKey(e.id,"global","global","globalTemplate")),"layoutTemplate"!==i&&"layout"!==i||(s=t.makeCacheKey(e.id,"layout","layout","layoutTemplate")),s){for(var p=t.TemplateEngineRegistry.ids(),h=0;h<p.length;h++){var f=p[h];if(t.TemplateEngineRegistry.find(f).isCached(s)){a=f;break}}a&&(l={"engine":a,"cacheKey":s})}return l},"tmpl":function(e,i){var n=t.tmplHtml(e,i);return t.safeDomParse(n)},"tmplHtml":function(e,i){i||(i={});var n=e.engine,l=t.TemplateEngineRegistry.find(n);if(!l)return t.throwDefaultError("Cannot find template engine for type: "+n);var a=e.cacheKey;return l.execute(a,i,function(e){var i=JSON.stringify(e);return e.message&&(i=e.message),t.throwDefaultError("The compiled template: "+a+" failed to execute: "+i)})}}),t.DEBUG=0,t.INFO=1,t.WARN=2,t.ERROR=3,t.logLevel=t.WARN,t.logDebug=function(e){t.log(t.DEBUG,e)},t.logInfo=function(e){t.log(t.INFO,e)},t.logWarn=function(e){t.log(t.WARN,e)},t.logError=function(e){t.log(t.ERROR,e)},t.LOG_METHOD_MAP={"0":"debug","1":"info","2":"warn","3":"error"},t.log=function(e,i){if(t.logLevel<=e){var n=t.LOG_METHOD_MAP[e];"undefined"!=typeof console&&console[n]&&("debug"===n?console.debug(i):"info"===n?console.info(i):"warn"===n?console.warn(i):"error"===n?console.error(i):console.log(i))}},t.checked=function(e,i){return t.attrProp(e,"checked",i)},t.readonly=function(i,n){return e(i).prop("readonly",!1),t.attrProp(i,"readonly",n)},t.disabled=function(e,i){return t.attrProp(e,"disabled",i)},t.attrProp=function(t,i,n){return void 0!==n&&(e(t).prop?e(t).prop(i,n):n?e(t).attr(i,n):e(t).removeAttr(i)),e(t).prop?e(t).prop(i):e(t).attr(i)},t.loadRefSchemaOptions=function(e,i,n){if(i)if("#"===i)n(e.schema,e.options);else if(0===i.indexOf("#/")){for(var l=i.substring(2),a=l.split("/"),s=e.schema,o=0;o<a.length;o++){var r=a[o];if(s[r])s=s[r];else if(s.properties&&s.properties[r])s=s.properties[r];else{if(!s.definitions||!s.definitions[r]){s=null;break}s=s.definitions[r]}}for(var c=e.options,o=0;o<a.length;o++){var r=a[o];if(c[r])c=c[r];else if(c.fields&&c.fields[r])c=c.fields[r];else{if(!c.definitions||!c.definitions[r]){c=null;break}c=c.definitions[r]}}n(s,c)}else if(0===i.indexOf("#")){var d=t.resolveReference(e.schema,e.options,i);d?n(d.schema,d.options):n()}else{var u=t.pathParts(i);e.connector.loadReferenceSchema(u.path,function(i){e.connector.loadReferenceOptions(u.path,function(e){if(u.id){var l=t.resolveReference(i,e,u.id);l&&(i=l.schema,e=l.options)}n(i,e)},function(){n(i)})},function(){n()})}else n()},t.DEFAULT_ERROR_CALLBACK=function(e){if(e&&e.message)throw t.logError(JSON.stringify(e)),new Error("Alpaca caught an error with the default error handler: "+JSON.stringify(e))},t.defaultErrorCallback=t.DEFAULT_ERROR_CALLBACK,t.throwDefaultError=function(e){e&&t.isObject(e)&&(e=JSON.stringify(e));var i={"message":e};t.defaultErrorCallback(i)},t.throwErrorWithCallback=function(e,i){e&&t.isObject(e)&&(e=JSON.stringify(e));var n={"message":e};i?i(n):t.defaultErrorCallback(n)},t.resolveReference=function(e,i,n){if(e.id===n||"#"+e.id===n){var l={};return e&&(l.schema=e),i&&(l.options=i),l}if(e&&e.properties)for(var a in e.properties){var s=e.properties[a],o=null;i&&i.fields&&i.fields[a]&&(o=i.fields[a]);var r=t.resolveReference(s,o,n);if(r)return r}return null},e.alpaca=window.Alpaca=t,e.fn.alpaca=function(){var i=t.makeArray(arguments),n=[].concat(this,i),l=t.apply(this,n);return void 0===l&&(l=e(this)),l},e.fn.outerHTML=function(t){return t?e("<div></div>").append(this).html():e("<div></div>").append(this.clone()).html()},e.fn.swapWith=function(t){return this.each(function(){var i=e(t).clone(),n=e(this).clone();e(t).replaceWith(n),e(this).replaceWith(i)})},e.fn.attrProp=function(i,n){return t.attrProp(e(this),i,n)},e.event.special.destroyed={"remove":function(e){e.handler&&e.handler()}},t.pathParts=function(e){if("string"!=typeof e)return e;var i=e,n=null,l=i.indexOf("#");l>-1&&(n=i.substring(l+1),i=i.substring(0,l)),t.endsWith(i,"/")&&(i=i.substring(0,i.length-1));var a={};return a.path=i,n&&(a.id=n),a},t.resolveField=function(e,i){var n=null;if("string"==typeof i)if(0===i.indexOf("#/")&&propertyId.length>2);else if("#"===i||"#/"===i)n=e;else if(0===i.indexOf("#")){for(var l=e;l.parent;)l=l.parent;var a=i.substring(1);n=t.resolveFieldByReference(l,a)}else n=e.childrenByPropertyId[i];return n},t.resolveFieldByReference=function(e,i){if(e.schema&&e.schema.id==i)return e;if(e.children&&e.children.length>0)for(var n=0;n<e.children.length;n++){var l=e.children[n],a=t.resolveFieldByReference(l,i);if(a)return a}return null},t.anyEquality=function(e,i){var n={};if("object"==typeof e||t.isArray(e))for(var l in e)n[e[l]]=!0;else n[e]=!0;var a=!1;if("object"==typeof i||t.isArray(i))for(var l in i){var s=i[l];if(n[s]){a=!0;break}}else a=n[i];return a},t.series=function(e,t){async.series(e,function(){t()})},t.parallel=function(e,t){async.parallel(e,function(){t()})},t.nextTick=function(e){async.nextTick(function(){e()})},t.compileValidationContext=function(e,t){var i=[],n=e;do{n.isValidationParticipant()||(n=null),n&&i.push(n),n&&(n=n.parent)}while(n);i.reverse();var l=[],a=function(e,t,i){if(!e||0===e.length)return void i();var n=e[0],l={};l.id=n.getId(),l.field=n,l.path=n.path;var s=n.isValid();n.isContainer()&&(s=n.isValid(!0)),l.before=s;var o=function(e,i,n){var l=e._previouslyValidated;e.validate(),e._validateCustomValidator(function(){var a=e.isValid();e.isContainer()&&(a=e.isValid(!0)),i.after=a,i.validated=!1,i.invalidated=!1,!s&&a?i.validated=!0:s&&!a?i.invalidated=!0:l||a||(i.invalidated=!0),i.container=e.isContainer(),i.valid=i.after,t.push(i),n()})};if(e.length>1){var r=e.slice(0);r.shift(),a(r,t,function(){o(n,l,function(){i()})})}else o(n,l,function(){i()})};a(i,l,function(){t(l)})},t.updateValidationStateForContext=function(e,i){for(var n=0;n<i.length;n++){var l=i[n],a=l.field;if(a.getFieldEl().removeClass("alpaca-invalid alpaca-invalid-hidden alpaca-valid"),a.fireCallback("clearValidity"),l.valid)a.getFieldEl().addClass("alpaca-field-valid"),a.fireCallback("valid");else if(a.options.readonly)t.logWarn("The field (id="+a.getId()+", title="+a.getTitle()+", path="+a.path+") is invalid and also read-only");else{var s=!1;a.hideInitValidationError&&(s=!0),a.fireCallback("invalid",s),a.getFieldEl().addClass("alpaca-invalid"),s&&a.getFieldEl().addClass("alpaca-invalid-hidden")}if(l.validated?t.later(25,this,function(){a.trigger("validated")}):l.invalidated&&t.later(25,this,function(){a.trigger("invalidated")}),a.options.showMessages&&!a.initializing){var o=[];for(var r in a.validation)a.validation[r].status||(a.options.readonly?t.logWarn("Validation for field (id="+a.getId()+", title="+a.getTitle()+", path="+a.path+"): "+a.validation[r].message):o.push({"id":r,"message":a.validation[r].message}));a.options.readonly||a.displayMessage(o,a.valid)}}},t.fieldApplyFieldAndChildren=function(e,i){if(i(e),e.children&&e.children.length>0)for(var n=0;n<e.children.length;n++)t.fieldApplyFieldAndChildren(e.children[n],i)},t.replaceAll=function(e,t,i){return e.replace(new RegExp(t,"g"),i)},t.asArray=function(e){if(!t.isArray(e)){var i=[];return i.push(e),i}return e},function(){function e(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(n,arguments)}}function t(e){return e.constructor===String?"string":e.constructor===Boolean?"boolean":e.constructor===Number?isNaN(e)?"nan":"number":void 0===e?"undefined":null===e?"null":e instanceof Array?"array":e instanceof Date?"date":e instanceof RegExp?"regexp":"object"==typeof e?"object":e instanceof Function?"function":void 0}function i(e,i,n){var l=t(e);if(l)return"function"===t(i[l])?i[l].apply(i,n):i[l]}var n,l,a={};n=this,null!=n&&(l=n.async),a.noConflict=function(){return n.async=l,a};var s=function(e,t){if(e.forEach)return e.forEach(t);for(var i=0;i<e.length;i+=1)t(e[i],i,e)},o=function(e,t){if(e.map)return e.map(t);var i=[];return s(e,function(e,n,l){i.push(t(e,n,l))}),i},r=function(e,t,i){return e.reduce?e.reduce(t,i):(s(e,function(e,n,l){i=t(i,e,n,l)}),i)},c=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t};"undefined"!=typeof process&&process.nextTick?(a.nextTick=process.nextTick,"undefined"!=typeof setImmediate?a.setImmediate=function(e){setImmediate(e)}:a.setImmediate=a.nextTick):"function"==typeof setImmediate?(a.nextTick=function(e){setImmediate(e)},a.setImmediate=a.nextTick):(a.nextTick=function(e){setTimeout(e,0)},a.setImmediate=a.nextTick),a.each=function(t,i,n){if(n=n||function(){},!t.length)return n();var l=0;s(t,function(a){i(a,e(function(e){e?(n(e),n=function(){}):(l+=1)>=t.length&&n(null)}))})},a.forEach=a.each,a.eachSeries=function(e,t,i){if(i=i||function(){},!e.length)return i();var n=0,l=function(){t(e[n],function(t){t?(i(t),i=function(){}):(n+=1,n>=e.length?i(null):l())})};l()},a.forEachSeries=a.eachSeries,a.eachLimit=function(e,t,i,n){d(t).apply(null,[e,i,n])},a.forEachLimit=a.eachLimit;var d=function(e){return function(t,i,n){if(n=n||function(){},!t.length||e<=0)return n();var l=0,a=0,s=0;!function o(){if(l>=t.length)return n();for(;s<e&&a<t.length;)a+=1,s+=1,i(t[a-1],function(e){e?(n(e),n=function(){}):(l+=1,s-=1,l>=t.length?n():o())})}()}},u=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[a.each].concat(t))}},p=function(e,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,[d(e)].concat(i))}},h=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[a.eachSeries].concat(t))}},f=function(e,t,i,n){var l=[];t=o(t,function(e,t){return{"index":t,"value":e}}),e(t,function(e,t){i(e.value,function(i,n){l[e.index]=n,t(i)})},function(e){n(e,l)})};a.map=u(f),a.mapSeries=h(f),a.mapLimit=function(e,t,i,n){return m(t)(e,i,n)};var m=function(e){return p(e,f)};a.reduce=function(e,t,i,n){a.eachSeries(e,function(e,n){i(t,e,function(e,i){t=i,n(e)})},function(e){n(e,t)})},a.inject=a.reduce,a.foldl=a.reduce,a.reduceRight=function(e,t,i,n){var l=o(e,function(e){return e}).reverse();a.reduce(l,t,i,n)},a.foldr=a.reduceRight;var g=function(e,t,i,n){var l=[];t=o(t,function(e,t){return{"index":t,"value":e}}),e(t,function(e,t){i(e.value,function(i){i&&l.push(e),t()})},function(e){n(o(l.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};a.filter=u(g),a.filterSeries=h(g),a.select=a.filter,a.selectSeries=a.filterSeries;var v=function(e,t,i,n){var l=[];t=o(t,function(e,t){return{"index":t,"value":e}}),e(t,function(e,t){i(e.value,function(i){i||l.push(e),t()})},function(e){n(o(l.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};a.reject=u(v),a.rejectSeries=h(v);var b=function(e,t,i,n){e(t,function(e,t){i(e,function(i){i?(n(e),n=function(){}):t()})},function(e){n()})};a.detect=u(b),a.detectSeries=h(b),a.some=function(e,t,i){a.each(e,function(e,n){t(e,function(e){e&&(i(!0),i=function(){}),n()})},function(e){i(!1)})},a.any=a.some,a.every=function(e,t,i){a.each(e,function(e,n){t(e,function(e){e||(i(!1),i=function(){}),n()})},function(e){i(!0)})},a.all=a.every,a.sortBy=function(e,t,i){a.map(e,function(e,i){t(e,function(t,n){t?i(t):i(null,{"value":e,"criteria":n})})},function(e,t){if(e)return i(e);var n=function(e,t){var i=e.criteria,n=t.criteria;return i<n?-1:i>n?1:0};i(null,o(t.sort(n),function(e){return e.value}))})},a.auto=function(e,t){t=t||function(){};var i=c(e);if(!i.length)return t(null);var n={},l=[],o=function(e){l.unshift(e)},d=function(e){for(var t=0;t<l.length;t+=1)if(l[t]===e)return void l.splice(t,1)},u=function(){s(l.slice(0),function(e){e()})};o(function(){c(n).length===i.length&&(t(null,n),t=function(){})}),s(i,function(i){var l=e[i]instanceof Function?[e[i]]:e[i],p=function(e){var l=Array.prototype.slice.call(arguments,1);if(l.length<=1&&(l=l[0]),e){var o={};s(c(n),function(e){o[e]=n[e]}),o[i]=l,t(e,o),t=function(){}}else n[i]=l,a.setImmediate(u)},h=l.slice(0,Math.abs(l.length-1))||[],f=function(){return r(h,function(e,t){return e&&n.hasOwnProperty(t)},!0)&&!n.hasOwnProperty(i)};if(f())l[l.length-1](p,n);else{var m=function(){f()&&(d(m),l[l.length-1](p,n))};o(m)}})},a.waterfall=function(e,t){if(t=t||function(){},e.constructor!==Array){var i=new Error("First argument to waterfall must be an array of functions");return t(i)}if(!e.length)return t();var n=function(e){return function(i){if(i)t.apply(null,arguments),t=function(){};else{var l=Array.prototype.slice.call(arguments,1),s=e.next();s?l.push(n(s)):l.push(t),a.setImmediate(function(){e.apply(null,l)})}}};n(a.iterator(e))()};var y=function(e,t,i){if(i=i||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),t.call(null,e,i)})},i);else{var n={};e.each(c(t),function(e,i){
t[e](function(t){var l=Array.prototype.slice.call(arguments,1);l.length<=1&&(l=l[0]),n[e]=l,i(t)})},function(e){i(e,n)})}};a.parallel=function(e,t){y({"map":a.map,"each":a.each},e,t)},a.parallelLimit=function(e,t,i){y({"map":m(t),"each":d(t)},e,i)},a.series=function(e,t){if(t=t||function(){},e.constructor===Array)a.mapSeries(e,function(e,t){e&&e(function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),t.call(null,e,i)})},t);else{var i={};a.eachSeries(c(e),function(t,n){e[t](function(e){var l=Array.prototype.slice.call(arguments,1);l.length<=1&&(l=l[0]),i[t]=l,n(e)})},function(e){t(e,i)})}},a.iterator=function(e){var t=function(i){var n=function(){return e.length&&e[i].apply(null,arguments),n.next()};return n.next=function(){return i<e.length-1?t(i+1):null},n};return t(0)},a.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var w=function(e,t,i,n){var l=[];e(t,function(e,t){i(e,function(e,i){l=l.concat(i||[]),t(e)})},function(e){n(e,l)})};a.concat=u(w),a.concatSeries=h(w),a.whilst=function(e,t,i){e()?t(function(n){if(n)return i(n);a.whilst(e,t,i)}):i()},a.doWhilst=function(e,t,i){e(function(n){if(n)return i(n);t()?a.doWhilst(e,t,i):i()})},a.until=function(e,t,i){e()?i():t(function(n){if(n)return i(n);a.until(e,t,i)})},a.doUntil=function(e,t,i){e(function(n){if(n)return i(n);t()?i():a.doUntil(e,t,i)})},a.queue=function(t,i){function n(e,t,n,l){t.constructor!==Array&&(t=[t]),s(t,function(t){var s={"data":t,"callback":"function"==typeof l?l:null};n?e.tasks.unshift(s):e.tasks.push(s),e.saturated&&e.tasks.length===i&&e.saturated(),a.setImmediate(e.process)})}void 0===i&&(i=1);var l=0,o={"tasks":[],"concurrency":i,"saturated":null,"empty":null,"drain":null,"push":function(e,t){n(o,e,!1,t)},"unshift":function(e,t){n(o,e,!0,t)},"process":function(){if(l<o.concurrency&&o.tasks.length){var i=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),l+=1;var n=function(){l-=1,i.callback&&i.callback.apply(i,arguments),o.drain&&o.tasks.length+l===0&&o.drain(),o.process()},a=e(n);t(i.data,a)}},"length":function(){return o.tasks.length},"running":function(){return l}};return o},a.cargo=function(e,t){var i=!1,n=[],l={"tasks":n,"payload":t,"saturated":null,"empty":null,"drain":null,"push":function(e,i){e.constructor!==Array&&(e=[e]),s(e,function(e){n.push({"data":e,"callback":"function"==typeof i?i:null}),l.saturated&&n.length===t&&l.saturated()}),a.setImmediate(l.process)},"process":function a(){if(!i){if(0===n.length)return void(l.drain&&l.drain());var r="number"==typeof t?n.splice(0,t):n.splice(0),c=o(r,function(e){return e.data});l.empty&&l.empty(),i=!0,e(c,function(){i=!1;var e=arguments;s(r,function(t){t.callback&&t.callback.apply(null,e)}),a()})}},"length":function(){return n.length},"running":function(){return i}};return l};var x=function(e){return function(t){var i=Array.prototype.slice.call(arguments,1);t.apply(null,i.concat([function(t){var i=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&s(i,function(t){console[e](t)}))}]))}};a.log=x("log"),a.dir=x("dir"),a.memoize=function(e,t){var i={},n={};t=t||function(e){return e};var l=function(){var l=Array.prototype.slice.call(arguments),a=l.pop(),s=t.apply(null,l);s in i?a.apply(null,i[s]):s in n?n[s].push(a):(n[s]=[a],e.apply(null,l.concat([function(){i[s]=arguments;var e=n[s];delete n[s];for(var t=0,l=e.length;t<l;t++)e[t].apply(null,arguments)}])))};return l.memo=i,l.unmemoized=e,l},a.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},a.times=function(e,t,i){for(var n=[],l=0;l<e;l++)n.push(l);return a.map(n,t,i)},a.timesSeries=function(e,t,i){for(var n=[],l=0;l<e;l++)n.push(l);return a.mapSeries(n,t,i)},a.compose=function(){var e=Array.prototype.reverse.call(arguments);return function(){var t=this,i=Array.prototype.slice.call(arguments),n=i.pop();a.reduce(e,i,function(e,i,n){i.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,i){n.apply(t,[e].concat(i))})}};var C=function(e,t){var i=function(){var i=this,n=Array.prototype.slice.call(arguments),l=n.pop();return e(t,function(e,t){e.apply(i,n.concat([t]))},l)};if(arguments.length>2){return i.apply(this,Array.prototype.slice.call(arguments,2))}return i};a.applyEach=u(C),a.applyEachSeries=h(C),a.forever=function(e,t){function i(n){if(n){if(t)return t(n);throw n}e(i)}i()},n.async=a;n.equiv=function(){var e,n=[],l=function(){function i(e,t){return e instanceof t.constructor||t instanceof e.constructor?t==e:t===e}return{"string":i,"boolean":i,"number":i,"null":i,"undefined":i,"nan":function(e){return isNaN(e)},"date":function(e,i){return"date"===t(e)&&i.valueOf()===e.valueOf()},"regexp":function(e,i){return"regexp"===t(e)&&i.source===e.source&&i.global===e.global&&i.ignoreCase===e.ignoreCase&&i.multiline===e.multiline},"function":function(){var e=n[n.length-1];return e!==Object&&void 0!==e},"array":function(i,n){var l,a;if("array"!==t(i))return!1;if((a=n.length)!==i.length)return!1;for(l=0;l<a;l++)if(!e(n[l],i[l]))return!1;return!0},"object":function(t,i){var l,a=!0,s=[],o=[];if(i.constructor!==t.constructor)return!1;n.push(i.constructor);for(l in i)s.push(l),e(i[l],t[l])||(a=!1);n.pop();for(l in t)o.push(l);return a&&e(s.sort(),o.sort())}}}();return e=function(){var e=Array.prototype.slice.apply(arguments);return e.length<2||function(e,n){return e===n||null!==e&&null!==n&&void 0!==e&&void 0!==n&&t(e)===t(n)&&i(e,l,[n,e])}(e[0],e[1])&&arguments.callee.apply(this,e.splice(1,e.length-1))}}()}(),t.MARKER_CLASS_CONTROL_FIELD="alpaca-marker-control-field",t.MARKER_CLASS_CONTAINER_FIELD="alpaca-marker-container-field",t.MARKER_CLASS_CONTAINER_FIELD_ITEM="alpaca-marker-control-field-item",t.MARKER_DATA_CONTAINER_FIELD_ITEM_KEY="data-alpaca-container-field-item-key",t.MARKER_CLASS_FORM_ITEMS_FIELD="alpaca-marker-form-items-field",t.CLASS_CONTAINER="alpaca-container",t.CLASS_CONTROL="alpaca-control",t.MARKER_CLASS_INSERT="alpaca-marker-insert",t.MARKER_DATA_INSERT_KEY="data-alpaca-marker-insert-key",t.MARKER_CLASS_ARRAY_TOOLBAR="alpaca-marker-array-field-toolbar",t.MARKER_DATA_ARRAY_TOOLBAR_FIELD_ID="data-alpaca-array-field-toolbar-field-id",t.MARKER_CLASS_ARRAY_ITEM_ACTIONBAR="alpaca-marker-array-field-item-actionbar",t.MARKER_DATA_ARRAY_ITEM_KEY="data-alpaca-marker-array-field-item-key",t.MARKER_DATA_ARRAY_ITEM_PARENT_FIELD_ID="data-alpaca-marker-array-field-item-parent-field-id",t.MARKER_CLASS_CONTAINER_FIELD_ITEM_FIELD="alpaca-marker-container-field-item-field",t.makeCacheKey=function(e,t,i,n){return e+":"+t+":"+i+":"+n},t.splitCacheKey=function(e){var t={},i=e.indexOf(":"),n=e.lastIndexOf(":");t.viewId=e.substring(0,i),t.templateId=e.substring(n+1);var l=e.substring(i+1,n),a=l.indexOf(":");return t.scopeType=l.substring(0,a),t.scopeId=l.substring(a+1),t},t.createEmptyDataInstance=function(e){return""},t.animatedSwap=function(t,i,n,l){"function"==typeof n&&(l=n,n=500);!function(t,i,n,l){var a=e(t),s=e(i),o=a.offset(),r=s.offset(),c=a.clone(),d=s.clone(),u=r.top+s.height()-o.top,p=0,h=0,f=r.left+s.width()-o.left,m=0,g=0;a.css("opacity",0),s.css("opacity",0),c.insertAfter(a).css({"position":"absolute","width":a.outerWidth(),"height":a.outerHeight()}).offset(o).css("z-index","999"),d.insertAfter(s).css({"position":"absolute","width":s.outerWidth(),"height":s.outerHeight()}).offset(r).css("z-index","999"),o.top!==r.top&&(p=u-a.height()),h=u-s.height(),o.left!==r.left&&(m=f-a.width()),g=f-s.width(),c.animate({"top":"+="+p+"px","left":"+="+m+"px"},n,function(){s.css("opacity",1),e(this).remove()}),d.animate({"top":"-="+h+"px","left":"-="+g+"px"},n,function(){a.css("opacity",1),e(this).remove()}),window.setTimeout(function(){c.remove(),d.remove(),l()},n+1)}(t,i,n,l)},t.readCookie=function(e){var t=null;return"undefined"!=typeof document&&(t=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var l=i[n];" "==l.charAt(0);)l=l.substring(1,l.length);if(0==l.indexOf(t))return l.substring(t.length,l.length)}return null}(e)),t},t.CSRF_TOKEN=null,t.CSRF_COOKIE_NAMES=["CSRF-TOKEN","XSRF-TOKEN"],t.CSRF_HEADER_NAME="X-CSRF-TOKEN"}(jQuery),function(e){var t=e.alpaca;t.listenerId=function(){var e=0;return function(){return"listener-"+e++}}(),t.subscribe=function(){var e=t.makeArray(arguments),i=null,n=null,l=null;if(2==e.length?(i="global",n=e.shift(),l=e.shift()):(i=e.shift(),n=e.shift(),l=e.shift()),n&&t.isObject(n)&&(n=n.path),!n)return t.logError("Missing observable subscribe id: "+n),null;var a=l._lfid;a||(a=t.listenerId(),l._lfid=a);var s=function(e){return function(){return l.apply(e,arguments)}}(this);return s._lfid=l._lfid,t.ScopedObservables.get(i).observable(n).subscribe(a,s),{"scope":i,"id":n,"listenerId":a}},t.unsubscribe=function(){var e=t.makeArray(arguments),i=null,n=null,l=null;2==e.length?(i="global",n=e.shift(),l=e.shift()):3==e.length&&(i=e.shift(),n=e.shift(),l=e.shift());var a=l;return t.isFunction(a)&&(a=a._lfid),n&&t.isObject(n)&&(n=n.path),n?(t.ScopedObservables.get(i).observable(n).unsubscribe(a),{"scope":i,"id":n,"listenerId":a}):(t.logError("Missing observable id: "+n),null)},t.observable=function(){var e,i,n=t.makeArray(arguments);if(1==n.length?(e="global",i=n.shift()):2==n.length&&(e=n.shift(),i=n.shift()),i&&t.isObject(i)&&(i=i.path),i){var l=t.ScopedObservables.get(e);observable=l.observable(i)}else t.logError("Missing observable id: "+JSON.stringify(n));return observable},t.clearObservable=function(){var e,i,n=t.makeArray(arguments);1==n.length?(e="global",i=n.shift()):2==n.length&&(e=n.shift(),i=n.shift()),i&&t.isObject(i)&&(i=i.path),i||t.logError("Missing observable id: "+JSON.stringify(n)),t.ScopedObservables.get(e).observable(i).clear()},t.dependentObservable=function(){var e=null,i=null,n=null,l=t.makeArray(arguments);if(2==l.length)e="global",i=l.shift(),n=l.shift();else{if(3!=l.length)return void t.error("Wrong number of arguments");e=l.shift(),i=l.shift(),n=l.shift()}return i&&t.isObject(i)&&(i=i.path),i||t.logError("Missing observable id: "+JSON.stringify(l)),t.ScopedObservables.get(e).dependentObservable(i,n)}}(jQuery),function(e){var t=e.alpaca;t.Observables=Base.extend({"constructor":function(e){this.base(),this.scope=e,this.observables={}},"observable":function(e,i){if(!this.observables[e]){var n=new t.Observable(this.scope,e);i&&n.set(i),this.observables[e]=n}return this.observables[e]},"dependentObservable":function(e,i){var n=this;if(!this.observables[e]){var l=this.observable(e),a=new t.Observables(this.scope);a.observable=function(e,t){var i=n.observable(e,t);return i.markDependentOnUs(l),i};var s=function(){return i.call(a)};l.setValueFunction(s)}return this.observables[e]},"observables":function(){return this.observables}})}(jQuery),function(e){e.alpaca.Observable=Base.extend({"constructor":function(t,i){this.base(),this.id=t+"-"+i,this.value=null,this.subscribers={},this.dependentOnUs={},this.notifySubscribers=function(t){var i=this;e.each(this.subscribers,function(e,n){n(i.value,t)})},this.notifyDependents=function(t){e.each(this.dependentOnUs,function(e,t){t.onDependencyChange()})},this.valueFunction=null},"setValueFunction":function(e){this.valueFunction=e,this.onDependencyChange()},"subscribe":function(e,t){this.isSubscribed(e)||(this.subscribers[e]=t)},"unsubscribe":function(e){delete this.subscribers[e]},"isSubscribed":function(e){return!!this.subscribers[e]},"markDependentOnUs":function(e){this.dependentOnUs[e.id]=e},"onDependencyChange":function(){var e=this.get();if(this.valueFunction){var t=this.valueFunction();e!=t&&this.set(t)}},"set":function(e){var t=this.value;this.value=e,this.notifyDependents(t),this.notifySubscribers(t)},"get":function(e){var t=this.value;return t||(t=e),t},"clear":function(){var e=this.value;delete this.value,this.notifyDependents(e),this.notifySubscribers(e)}})}(jQuery),function(e){var t=e.alpaca;t.ScopedObservables={},t.ScopedObservables.map={},t.ScopedObservables.get=function(e){return t.ScopedObservables.map[e]||(t.ScopedObservables.map[e]=new t.Observables(e)),t.ScopedObservables.map[e]}}(jQuery),function(){Alpaca.TemplateEngineRegistry=function(){var e={};return{"register":function(t,i){e[t]=i,i.init()},"find":function(t){var i=null;if(e[t])i=e[t];else for(var n in e)for(var l=e[n].supportedMimetypes(),a=0;a<l.length;a++)if(t.toLowerCase()===l[a].toLowerCase()){i=e[n];break}return i},"ids":function(){var t=[];for(var i in e)t.push(i);return t}}}()}(),function(e){Alpaca.AbstractTemplateEngine=Base.extend({"constructor":function(e){this.base(),this.id=e,this.cleanup=function(e){if(e){var t=document.createElement("div");t.innerHTML=e;var i=t.children;if(1===i.length){var n=i[0];if("SCRIPT"===n.tagName)return n.innerHTML}}return e}},"compile":function(t,i,n){var l=this,a="html";if(Alpaca.isString(i)){var s=i.toLowerCase();0===s.indexOf("http://")||0===s.indexOf("https://")||0===s.indexOf("./")||0===s.indexOf("/")||0===s.indexOf("../")?a="uri":0!==i.indexOf("#")&&0!==i.indexOf(".")&&0!==i.indexOf("[")||(a="selector")}if("selector"===a)l._compile(t,i,function(e){n(e)});else if("uri"===a){var o=l.fileExtension(),r=i;-1===r.indexOf("."+o)&&(r+="."+o),e.ajax({"url":r,"dataType":"html","success":function(e,i,a){e=l.cleanup(e),l._compile(t,e,function(e){n(e)})},"error":function(e,t){n({"message":e.responseText,"xhr":e,"code":t},null)}})}else if("html"===a){var c=i;c instanceof jQuery&&(c=e(c).outerHTML()),l._compile(t,c,function(e){n(e)})}else n(new Error("Template engine cannot determine how to handle type: "+a))},"_compile":function(e,t,i){Alpaca.isEmpty(t)&&(t=""),t=Alpaca.trim(t),0===t.toLowerCase().indexOf("<script")||(t="<script type='"+this.supportedMimetypes()[0]+"'>"+t+"<\/script>"),Alpaca.logDebug("Compiling template: "+this.id+", cacheKey: "+e+", template: "+t),this.doCompile(e,t,i)},"doCompile":function(e,t,i){},"execute":function(e,t,i){Alpaca.logDebug("Executing template for cache key: "+e);var n=this.doExecute(e,t,i);return n=this.cleanup(n)},"doExecute":function(e,t,i){return null},"fileExtension":function(){return"html"},"supportedMimetypes":function(){return[]},"isCached":function(e){return!1},"findCacheKeys":function(e){return[]}})}(jQuery),function($,Handlebars,HandlebarsPrecompiled){var COMPILED_TEMPLATES={},helpers={};helpers.compare=function(e,t,i){if(arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");var n=i.hash.operator||"==",l={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"typeof":function(e,t){return typeof e==t}};if(!l[n])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+n);return l[n](e,t)?i.fn(this):i.inverse(this)},helpers.ifnot=function(e,t){return e?t.inverse(this):t.fn(this)},helpers.times=function(e,t){for(var i="",n=0;n<e;++n)i+=t.fn(n);return i},helpers.control=function(e){return"<div class='"+Alpaca.MARKER_CLASS_CONTROL_FIELD+"'></div>"},helpers.container=function(e){return"<div class='"+Alpaca.MARKER_CLASS_CONTAINER_FIELD+"'></div>"},helpers.item=function(e,t){return Alpaca.isObject(e)&&(e,e="div"),"<"+e+" class='"+Alpaca.MARKER_CLASS_CONTAINER_FIELD_ITEM+"' "+Alpaca.MARKER_DATA_CONTAINER_FIELD_ITEM_KEY+"='"+this.name+"'></"+e+">"},helpers.itemField=function(e,t){return Alpaca.isObject(e)&&(e,e="div"),"<"+e+" class='"+Alpaca.MARKER_CLASS_CONTAINER_FIELD_ITEM_FIELD+"'></"+e+">"},helpers.formItems=function(e){return"<div class='"+Alpaca.MARKER_CLASS_FORM_ITEMS_FIELD+"'></div>"},helpers.insert=function(e){return"<div class='"+Alpaca.MARKER_CLASS_INSERT+"' "+Alpaca.MARKER_DATA_INSERT_KEY+"='"+e+"'></div>"},helpers.str=function(e){return!1===e?"false":!0===e?"true":0===e?"0":void 0===e?"":null===e?"":Alpaca.isString(e)?e:Alpaca.isNumber(e)?e:Alpaca.isObject(e)?JSON.stringify(e,null,"  "):Alpaca.isArray(e)?JSON.stringify(e,null,"  "):e},helpers.arrayToolbar=function(e){return"<div class='"+Alpaca.MARKER_CLASS_ARRAY_TOOLBAR+"' "+Alpaca.MARKER_DATA_ARRAY_TOOLBAR_FIELD_ID+"='"+this.id+"'></div>"},helpers.arrayActionbar=function(e){return"<div class='"+Alpaca.MARKER_CLASS_ARRAY_ITEM_ACTIONBAR+"' "+Alpaca.MARKER_DATA_ARRAY_ITEM_KEY+"='"+this.name+"' "+Alpaca.MARKER_DATA_ARRAY_ITEM_PARENT_FIELD_ID+"='"+this.parentFieldId+"'></div>"},Handlebars.registerHelper("arrayToolbar",helpers.arrayToolbar),Handlebars.registerHelper("arrayActionbar",helpers.arrayActionbar),Handlebars.registerHelper("setIndex",function(e){this.index=Number(e)}),Handlebars.registerHelper("eachProperty",function(e,t){var i="";for(var n in e)i+=t.fn({"key":n,"value":e[n]});return i}),Handlebars.registerHelper("uploadErrorMessage",function(e){var t=e;return 1===e?t="File exceeds upload_max_filesize":2===e?t="File exceeds MAX_FILE_SIZE":3===e?t="File was only partially uploaded":4===e?t="No File was uploaded":5===e?t="Missing a temporary folder":6===e?t="Failed to write file to disk":7===e?t="File upload stopped by extension":"maxFileSize"===e?t="File is too big":"minFileSize"===e?t="File is too small":"acceptFileTypes"===e?t="Filetype not allowed":"maxNumberOfFiles"===e?t="Max number of files exceeded":"uploadedBytes"===e?t="Uploaded bytes exceed file size":"emptyResult"===e&&(t="Empty file upload result"),t}),Handlebars.registerHelper("compare",helpers.compare),Handlebars.registerHelper("control",helpers.control),Handlebars.registerHelper("container",helpers.container),Handlebars.registerHelper("item",helpers.item),Handlebars.registerHelper("itemField",helpers.itemField),Handlebars.registerHelper("formItems",helpers.formItems),Handlebars.registerHelper("times",helpers.times),Handlebars.registerHelper("str",helpers.str),Handlebars.registerHelper("with",function(e,t){return t.fn(e)}),Handlebars.registerHelper("ifnot",helpers.ifnot);var partials={};Alpaca.HandlebarsTemplateEngine=Alpaca.AbstractTemplateEngine.extend({"fileExtension":function(){return"html"},"supportedMimetypes":function(){return["text/x-handlebars-template","text/x-handlebars-tmpl"]},"init":function(){if(HandlebarsPrecompiled)for(var e in HandlebarsPrecompiled){var t=HandlebarsPrecompiled[e];for(var i in t){var n=t[i];if("function"==typeof n){var l=Alpaca.makeCacheKey(e,"view",e,i);COMPILED_TEMPLATES[l]=n}}}},"doCompile":function(cacheKey,html,callback){var self=this,template=null;try{var functionString=Handlebars.precompile(html);template=eval("("+functionString+")"),template=Handlebars.template(template),COMPILED_TEMPLATES[cacheKey]=template}catch(e){return void callback(e)}callback()},"doExecute":function(e,t,i){var n=COMPILED_TEMPLATES[e];if(!n)return void i(new Error("Could not find handlebars cached template for key: "+e));var l=null;try{l=n(t)}catch(e){return i(e),null}return l},"isCached":function(e){return!!COMPILED_TEMPLATES[e]},"findCacheKeys":function(e){var t=[];for(var i in COMPILED_TEMPLATES)0===i.indexOf(e+":")&&t.push(i);return t}}),Alpaca.TemplateEngineRegistry.register("handlebars",new Alpaca.HandlebarsTemplateEngine("handlebars"))}(jQuery,void 0!==Handlebars?Handlebars:window.Handlebars,"undefined"!=typeof HandlebarsPrecompiled?HandlebarsPrecompiled:window.HandlebarsPrecompiled),function(e){var t=e.alpaca;t.NormalizedView=Base.extend({"constructor":function(e){this.id=e},"normalize":function(e){var i=e[this.id];if(!i)return t.logError("View compilation failed - view not found: "+this.id),!1;for(var n=[],l=i;l;){n.push(l);var a=l.parent;if(a){var s=e[l.parent];if(!s)return t.logError("View compilation failed - cannot find parent view: "+a+" for view: "+l.id),!1;l=s}else l=null}n=n.reverse();for(var o=function(e,i,n){var l=i[n],a=e[n];t.isUndefined(a)||t.isUndefined(l)||t.logDebug("View property: "+n+" already has value: "+a+" and overwriting to: "+l),t.isUndefined(l)||(e[n]=l)},r=function(e,i,n){var l=i[n],a=e[n];t.isUndefined(a)||t.isUndefined(l)||t.logDebug("View property: "+n+" already has function, overwriting"),t.isUndefined(l)||(e[n]=l)},c=function(e,i,n){var l=i[n];l&&(e[n]||(e[n]={}),t.mergeObject2(l,e[n]))},d=0;d<n.length;d++){var u=n[d];o(this,u,"type"),o(this,u,"ui"),o(this,u,"displayReadonly"),o(this,u,"locale"),r(this,u,"render"),r(this,u,"postRender"),c(this,u,"templates"),c(this,u,"fields"),c(this,u,"layout"),c(this,u,"styles"),c(this,u,"callbacks"),c(this,u,"messages"),o(this,u,"horizontal"),o(this,u,"collapsible"),o(this,u,"labelStyle"),o(this,u,"toolbarStyle"),o(this,u,"buttonStyle"),o(this,u,"toolbarSticky"),o(this,u,"globalTemplate"),c(this,u,"wizard")}return t.logDebug("View compilation complete for view: "+this.id),t.logDebug("Final view: "),t.logDebug(JSON.stringify(this,null,"   ")),!0}})}(jQuery),function(e){var t=e.alpaca;t.RuntimeView=Base.extend({"constructor":function(e,t){this.field=t,this.setView(e)},"setView":function(e){e||(e="web-edit");var i=t.getNormalizedView(e);if(!i)throw new Error("Runtime view for view id: "+e+" could not find a normalized view");for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n])},"getWizard":function(){return this.getViewParam("wizard")},"getGlobalTemplateDescriptor":function(){return this.getTemplateDescriptor("globalTemplate")},"getLayout":function(){var e=this;return{"templateDescriptor":this.getTemplateDescriptor("layoutTemplate",e),"bindings":this.getViewParam(["layout","bindings"],!0)}},"getTemplateDescriptor":function(e,i){return t.getTemplateDescriptor(this,e,i)},"getMessage":function(e,i){i||(i=t.defaultLocale);var n=this.getViewParam(["messages",i,e]);return t.isEmpty(n)&&(n=this.getViewParam(["messages",e])),n},"getViewParam":function(e,i){var n=this.field.path;if(this.fields&&this.fields[n]){var l=this._getConfigVal(this.fields[n],e);if(!t.isEmpty(l))return l}if(n&&-1!==n.indexOf("[")&&-1!==n.indexOf("]")&&(n=n.replace(/\[\d+\]/g,"[*]"),this.fields&&this.fields[n])){var l=this._getConfigVal(this.fields[n],e);if(!t.isEmpty(l))return l}return!t.isEmpty(i)&&i&&"/"!==this.field.path?null:this._getConfigVal(this,e)},"_getConfigVal":function(e,i){if(t.isArray(i))for(var n=0;n<i.length&&!t.isEmpty(e);n++)e=e[i[n]];else t.isEmpty(e)||(e=e[i]);return e},"fireCallback":function(e,t,i,n,l,a,s){this.callbacks&&this.callbacks[t]&&this.callbacks[t].call(e,i,n,l,a,s)},"applyStyle":function(t,i){var n=i;n&&n.getFieldEl&&(n=n.getFieldEl()),n&&this.styles&&this.styles[t]&&e(n).addClass(this.styles[t])},"getStyle":function(e){return this.styles[e]?this.styles[e]:""}})}(jQuery),function(e){var t=e.alpaca;t.Field=Base.extend({"constructor":function(e,i,n,l,a,s,o){var r=this;this.initializing=!0,this.domEl=e,this.parent=null,this.data=i,this.options=n,this.schema=l,this.connector=s,this.errorCallback=function(e){o?o(e):t.defaultErrorCallback.call(r,e)},this.singleLevelRendering=!1,this.view=new t.RuntimeView(a,this);this.options||(this.options={}),this.id=this.options.id,this.type=this.options.type,this.id||(this.id=t.generateId());this.schema||(this.schema={}),this.options.label||null===this.schema.title||(this.options.label=this.schema.title),t.isEmpty(this.options.readonly)&&!t.isEmpty(this.schema.readonly)&&(this.options.readonly=this.schema.readonly),t.isValEmpty(this.data)&&!t.isEmpty(this.schema.default)&&(this.data=this.schema.default,this.showingDefaultData=!0),this.path="/",this.validation={},this._events={},this.isDisplayOnly=function(){return"view"===r.view.type||"display"==r.view.type},this.schema&&this.schema.id&&0===this.schema.id.indexOf("#")&&(this.schema.id=this.schema.id.substring(1)),this._previouslyValidated=!1,this.updateObservable=function(){this.data?this.observable(this.path).set(this.data):this.observable(this.path).clear()},this.getObservableScope=function(){for(var e=this;!e.isTop();)e=e.parent;var t=e.observableScope;return t||(t="global"),t},this.ensureProperType=function(e){var i=this;return void 0!==e&&(t.isString(e)?"number"===i.schema.type?e=parseFloat(e):"boolean"===i.schema.type&&(e=""!==e&&"false"!==e.toLowerCase()):t.isNumber(e)&&("string"===i.schema.type?e=""+e:"boolean"===i.schema.type&&(e=-1!==e&&0!==e))),e},this.onConstruct()},"onConstruct":function(){},"isTop":function(){return!this.parent},"getTemplateDescriptorId":function(){throw new Error("Template descriptor ID was not specified")},"initTemplateDescriptor":function(){var e=this,i=this.view.getTemplateDescriptor(this.getTemplateDescriptorId(),this),n=this.view.getGlobalTemplateDescriptor(),l=this.view.getLayout(),a=!1;if(this.isTop()&&(n?(this.setTemplateDescriptor(n),this.singleLevelRendering=!0,a=!0):l&&l.templateDescriptor&&(this.setTemplateDescriptor(l.templateDescriptor),a=!0)),!a&&i&&this.setTemplateDescriptor(i),!this.getTemplateDescriptor())return t.throwErrorWithCallback("Unable to find template descriptor for field: "+e.getFieldType())},"setup":function(){this.initializing||(this.data=this.getValue()),this.initTemplateDescriptor(),t.isUndefined(this.schema.required)&&(this.schema.required=!1),t.isUndefined(this.options.validate)&&(this.options.validate=!0),t.isUndefined(this.options.disabled)&&(this.options.disabled=!1),t.isUndefined(this.options.showMessages)&&(this.options.showMessages=!0)},"on":function(e,i){return t.logDebug("Adding listener for event: "+e),this._events[e]=i,this},"triggerWithPropagation":function(e,t){this.trigger.call(this,e,t),this.parent&&this.parent.triggerWithPropagation.call(this.parent,e,t)},"trigger":function(e,i){var n=this._events[e],l=null;if("function"==typeof n){t.logDebug("Firing event: "+e);try{l=n.call(this,i)}catch(i){t.logDebug("The event handler caught an exception: "+e)}}return l},"bindData":function(){t.isEmpty(this.data)||this.setValue(this.data)},"render":function(e,i){e&&(t.isString(e)||t.isObject(e))?this.view.setView(e):t.isEmpty(i)&&t.isFunction(e)&&(i=e),null===this.options.label&&this.propertyId&&(this.options.label=this.propertyId),this.options.name&&(this.name=this.options.name),this.calculateName(),this.setup(),this._render(i)},"calculateName":function(){if(!this.name||this.name&&this.nameCalculated)if(this.parent&&this.parent.name&&this.path){var e=this.path.substring(this.path.lastIndexOf("/")+1);-1!==e.indexOf("[")&&-1!==e.indexOf("]")&&(e=e.substring(e.indexOf("[")+1,e.indexOf("]"))),e&&(this.name=this.parent.name+"_"+e,this.nameCalculated=!0)}else this.path&&(this.name=this.path.replace(/\//g,"").replace(/\[/g,"_").replace(/\]/g,""),this.nameCalculated=!0)},"_render":function(i){var n=this;if(n.options.form&&t.isObject(n.options.form)){n.options.form.viewType=this.view.type;var l=n.form;l||(l=new t.Form(n.domEl,this.options.form,n.view.id,n.connector,n.errorCallback)),l.render(function(l){var a=e("<div></div>");n._processRender(a,function(){l.formFieldsContainer.before(n.field),l.formFieldsContainer.remove(),l.topControl=n,n.view.type&&"view"!==n.view.type&&l.initEvents(),n.form=l,n.postRender(function(){i&&t.isFunction(i)&&i(n)})})})}else this._processRender(n.domEl,function(){n.postRender(function(){i&&t.isFunction(i)&&i(n)})})},"_processRender":function(e,t){var i=this;i.renderField(e,function(){i.fireCallback("field"),i.renderFieldElements(function(){t()})})},"renderFieldDomElement":function(e){var i=this.getTemplateDescriptor();return t.tmpl(i,{"id":this.getId(),"options":this.options,"schema":this.schema,"data":e,"view":this.view,"path":this.path,"name":this.name})},"renderField":function(t,i){var n=this,l=this.data;this.isDisplayOnly()&&"object"==typeof l&&(l=JSON.stringify(l));var a=n.renderFieldDomElement(l);if(e(a).length>0){for(var s=null,o=0;o<e(a).length;o++){var r=e(a)[o].nodeName;if(r&&("div"===(r=r.toLowerCase())||"span"===r)){s=e(e(a)[o]);break}}s||(s=e(e(a).last())),s&&(a=s)}n._oldFieldEl=n.field,this.field=a,this.field.appendTo(t),i()},"renderFieldElements":function(e){e()},"postRender":function(i){var n=this;if(this.field.addClass("alpaca-field"),this.field.addClass("alpaca-field-"+this.getFieldType()),this.field.attr("data-alpaca-field-id",this.getId()),"view"!==this.view.type){this.isRequired()?(e(this.field).addClass("alpaca-required"),n.fireCallback("required")):(e(this.field).addClass("alpaca-optional"),n.fireCallback("optional"));var l=function(i){i&&(t.disabled(e(":input",n.field),!0),t.disabled(e("select",n.field),!0),t.disabled(e(":radio",n.field),!0),t.disabled(e(":checkbox",n.field),!0)),e(":radio",n.field).off().on("click",function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1}),e(".binf-radio label",n.field).off().on("click",function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1}),e(":input",n.field).off().on("click",function(e){return e.preventDefault(),e.stopImmediatePropagation(),!1})};this.options.readonly&&(e(this.field).addClass("alpaca-readonly"),function(){t.readonly(e('input:not([type="checkbox"])',n.field),!0)}(),l(),n.fireCallback("readonly")),this.options.disabled&&(e(this.field).addClass("alpaca-disabled"),l(this.options.disabled),n.fireCallback("disabled"));!function(e,i){if(i){var n=0,l=null;if(t.isArray(i))for(n=0;n<i.length;n++)e.addClass(i[n]);else if(i.indexOf(",")>-1)for(l=i.split(","),n=0;n<l.length;n++)e.addClass(l[n]);else if(i.indexOf(" ")>-1)for(l=i.split(" "),n=0;n<l.length;n++)e.addClass(l[n]);else e.addClass(i)}}(this.field,this.options.fieldClass),this.options.disabled&&(this.disable(),n.fireCallback("disable")),this.view.type&&"edit"===this.view.type?this.bindData():this.showingDefaultData&&this.bindData(),"create"===this.view.type&&t.logDebug("Skipping data binding for field: "+this.id+" since view mode is 'create'"),this.view.type&&"view"!==this.view.type&&this.initEvents()}this.options.hidden&&this.field.addClass("binf-hidden"),this.initializing=!1;var a="create"===this.view.type&&!this.refreshed;this.hideInitValidationError=t.isValEmpty(this.options.hideInitValidationError)?a:this.options.hideInitValidationError,this.view.displayReadonly||e(this.field[0].querySelectorAll(".alpaca-readonly")).addClass("binf-hidden"),this.options.postRender?this.options.postRender.call(this,function(){i()}):i()},"refresh":function(t){var i=this;i.refreshed=!0;var n=e("<div></div>");e(i.field).before(n),i.domEl=e("<div></div>"),i.setup(),i._render(function(){e(i.domEl.children()[0]).find(".alpaca-message").remove(),e(n).before(i.domEl.children()),e(n).remove(),i._oldFieldEl&&e(i._oldFieldEl).remove(),t&&t()})},"refreshContainer":function(t,i){var n=this;n.refreshed=!0;var l=e("<div></div>");e(n.field).before(l),n.domEl=e("<div></div>"),n.setup(),n.data=t,n._render(function(){e(n.domEl.children()[0]).find(".alpaca-message").remove(),e(l).before(n.domEl.children()),e(l).remove(),n._oldFieldEl&&e(n._oldFieldEl).remove(),i&&i()})},"applyStyle":function(e,t){this.view.applyStyle(e,t)},"fireCallback":function(e,t,i,n,l,a){this.view.fireCallback(this,e,t,i,n,l,a)},"getFieldEl":function(){return this.field},"getId":function(){return this.id},"getParent":function(){return this.parent},"isTopLevel":function(){return t.isEmpty(this.parent)},"getValue":function(){var e=this,t=this.data;return t=e.ensureProperType(t)},"setValue":function(e){this.data=e,this.updateObservable(),this.triggerUpdate()},"setDefault":function(){},"getTemplateDescriptor":function(){return this.templateDescriptor},"setTemplateDescriptor":function(e){this.templateDescriptor=e},"displayMessage":function(i,n){var l=this;i&&t.isObject(i)&&(i=[i]),i&&t.isString(i)&&(i=[{"id":"custom","message":i}]),e(this.getFieldEl()).children(".alpaca-message").remove(),l.fireCallback("removeMessages"),i&&i.length>0&&e.each(i,function(i,n){var a=!1;l.hideInitValidationError&&(a=!0);var s=l.view.getTemplateDescriptor("message");if(s){var o=t.tmpl(s,{"id":n.id,"message":n.message,"view":l.view});o.addClass("alpaca-message").attr("role","alert"),a&&o.addClass("alpaca-message-hidden"),e(l.getFieldEl()).append(o)}l.fireCallback("addMessage",i,n.id,n.message,a)})},"refreshValidationState":function(e,i){var n=this,l=[],a=[],s=function(e,i){
return function(n){t.nextTick(function(){t.compileValidationContext(e,function(e){i.push(e),n()})})}};if(e){var o=function(e,t){if(e.isValidationParticipant()){if(e.children&&e.children.length>0)for(var i=0;i<e.children.length;i++)o(e.children[i],t);a.push(s(e,t))}};o(this,l)}a.push(s(this,l)),t.series(a,function(e){for(var a={},s=[],o=0;o<l.length;o++)for(var r=l[o],c=s.length,d=0;d<r.length;d++){var u=r[d],p=a[u.id];if(p)u.validated&&!p.invalidated&&(p.validated=!0,p.invalidated=!1,p.valid=u.valid),u.invalidated&&(p.invalidated=!0,p.validated=!1,p.valid=u.valid);else{var h={};h.id=u.id,h.path=u.path,h.domEl=u.domEl,h.field=u.field,h.validated=u.validated,h.invalidated=u.invalidated,h.valid=u.valid,s.splice(c,0,h),a[h.id]=h}}s.reverse(),n.hideInitValidationError||t.updateValidationStateForContext(n.view,s),i&&i()})},"getMessage":function(e){return this.view.getMessage(e,this.view.locale)},"validate":function(e){var i=!0;if(!this.initializing&&this.options.validate){if(this.children&&e)for(var n=0;n<this.children.length;n++){var l=this.children[n];l.isValidationParticipant()&&l.validate(e)}if(!(i=this.handleValidate())&&t.logLevel==t.DEBUG){var a=[];for(var s in this.validation)this.validation[s].status||a.push(this.validation[s].message);t.logDebug("Validation failure for field (id="+this.getId()+", path="+this.path+"), messages: "+JSON.stringify(a))}}return this._previouslyValidated=!0,i},"handleValidate":function(){var e=this.validation,i=this._validateOptional();return e.notOptional={"message":i?"":this.getMessage("notOptional"),"status":i},i=this._validateDisallow(),e.disallowValue={"message":i?"":t.substituteTokens(this.getMessage("disallowValue"),[this.schema.disallow.join(", ")]),"status":i},e.notOptional.status&&e.disallowValue.status},"_validateCustomValidator":function(e){var i=this;this.options.validator&&t.isFunction(this.options.validator)?this.options.validator.call(this,function(t){i.validation.custom=t,e()}):e()},"_validateOptional":function(){return!this.isRequired()||!this.isEmpty()},"_validateDisallow":function(){if(!t.isValEmpty(this.schema.disallow)){var i=this.getValue(),n=this.schema.disallow;if(t.isArray(n)){var l=!0;return e.each(n,function(e,n){(t.isObject(i)||t.isArray(i)&&t.isString(n))&&(n=t.parseJSON(n)),t.compareObject(i,n)&&(l=!1)}),l}return(t.isObject(i)||t.isArray(i)&&t.isString(n))&&(n=t.parseJSON(n)),!t.compareObject(i,n)}return!0},"triggerUpdate":function(){e(this.field).trigger("fieldupdate")},"disable":function(){},"enable":function(){},"focus":function(e){e&&e(this)},"destroy":function(){t.observable(this.path).clear(),t&&t.fieldInstances&&t.fieldInstances[this.getId()]&&delete t.fieldInstances[this.getId()],e(this.field).remove()},"show":function(){if(!this.options||!this.options.hidden){var t=e(this.field);if(!t.hasClass("alpaca-container-item")){var i=t.closest(".alpaca-container-item");i.length&&i[0].classList.contains("binf-hidden")&&i[0].classList.remove("binf-hidden")}t[0]&&t[0].classList.remove("binf-hidden"),this.standaloneHelper&&this.standaloneHelper[0].classList&&this.standaloneHelper[0].classList.remove("binf-hidden"),this.onShow(),this.fireCallback("show")}},"onShow":function(){},"hide":function(){var t=e(this.field);if(t[0]&&t[0].classList.add("binf-hidden"),!t.hasClass("alpaca-container-item")){var i=t.closest(".alpaca-container-item");i.length&&i[0].classList&&i[0].classList.add("binf-hidden")}this.standaloneHelper&&this.standaloneHelper[0]&&this.standaloneHelper[0].classList.add("binf-hidden"),this.onHide(),this.fireCallback("hide")},"onHide":function(){},"isValidationParticipant":function(){return this.isShown()},"isShown":function(){return this.isVisible()},"isVisible":function(){return!this.isHidden()},"isHidden":function(){return"none"===e(this.field).css("display")||this.field[0]&&this.field[0].classList.contains("binf-hidden")},"print":function(){this.getFieldEl().printArea&&this.getFieldEl().printArea()},"onDependentReveal":function(){},"onDependentConceal":function(){},"reload":function(){this.initializing=!0,t.isEmpty(this.callback)?this.render(this.renderedCallback):this.callback(this,this.renderedCallback)},"clear":function(){var e=null;this.data&&(e=this.data),this.setValue(e)},"isEmpty":function(){return t.isValEmpty(this.getValue())},"isValid":function(t){if(t&&this.children)for(var i=0;i<this.children.length;i++){var n=this.children[i];if(n.isValidationParticipant()&&!n.isValid(t))return!1}if(e.isEmptyObject(this.validation))return!0;for(var l in this.validation)if(!this.validation[l].status)return!1;return!0},"initEvents":function(){var i=this;this.field&&(this.field.on("mouseover",function(e){i.onMouseOver.call(i,e),i.trigger("mouseover",e)}),this.field.on("mouseout",function(e){i.onMouseOut.call(i,e),i.trigger("mouseout",e)}),e.each(this.options,function(e,n){if(t.startsWith(e,"onField")&&t.isFunction(n)){var l=e.substring(7).toLowerCase();i.field.on(l,function(e){n.call(i,e)})}}),this.options&&this.options.events&&e.each(this.options.events,function(e,n){t.isFunction(n)&&i.field.on(e,function(e){n.call(i,e)})}))},"onFocus":function(t){e(this.field).removeClass("alpaca-field-empty"),e(this.field).addClass("alpaca-field-focused")},"onBlur":function(t){var i=e(this.field).hasClass("alpaca-field-focused");e(this.field).removeClass("alpaca-field-focused"),i&&this.refreshValidationState()},"onChange":function(e){this.data=this.getValue(),this.updateObservable(),this.triggerUpdate()},"onMouseOver":function(e){},"onMouseOut":function(e){},"getControlByPath":function(e){var i=this;if(e){for(var n=e.split("/"),l=0;l<n.length;l++){if(t.isValEmpty(n[l]))return null;if(!i||!i.childrenByPropertyId)return null;if(!i.childrenByPropertyId[n[l]])return null;i=i.childrenByPropertyId[n[l]]}return i}},"subscribe":function(){var e=t.makeArray(arguments);return e.unshift(this.getObservableScope()),t.subscribe.apply(this,e)},"unsubscribe":function(){var e=t.makeArray(arguments);return e.unshift(this.getObservableScope()),t.unsubscribe.apply(this,e)},"observable":function(){var e=t.makeArray(arguments);return e.unshift(this.getObservableScope()),t.observable.apply(this,e)},"clearObservable":function(){var e=t.makeArray(arguments);return e.unshift(this.getObservableScope()),t.clearObservable.apply(this,e)},"dependentObservable":function(){var e=t.makeArray(arguments);return e.unshift(this.getObservableScope()),t.dependentObservable.apply(this,e)},"getType":function(){},"getFieldType":function(){return""},"getBaseFieldType":function(){var e=null,t=this.constructor.ancestor.prototype;return t&&t.getFieldType&&(e=t.getFieldType()),e},"isContainer":function(){return!1},"isRequired":function(){var e=!1;if("boolean"==typeof this.schema.required&&(e=this.schema.required),this.parent&&this.parent.schema.required&&t.isArray(this.parent.schema.required)){var i=this.parent.schema.required;if(i)for(var n=0;n<i.length;n++)if(i[n]===this.propertyId){e=!0;break}}return e},"getTitle":function(){},"getDescription":function(){},"getSchemaOfSchema":function(){var e={"title":this.getTitle(),"description":this.getDescription(),"type":"object","properties":{"title":{"title":"Title","description":"Short description of the property.","type":"string"},"description":{"title":"Description","description":"Detailed description of the property.","type":"string"},"readonly":{"title":"Readonly","description":"Indicates that the field is read-only.  A read-only field cannot have it's value changed.  Read-only fields render in a grayed-out or disabled control.  If the field is rendered using a view with the <code>displayReadonly</code> attribute set to false, the read-only field will not appear.","type":"boolean","default":!1},"required":{"title":"Required","description":"Indicates whether the field's value is required.  If set to true, the field must take on a valid value and cannnot be left empty or unassigned.","type":"boolean","default":!1},"default":{"title":"Default","description":"The default value to be assigned for this property.  If the data for the field is empty or not provided, this default value will be plugged in for you.  Specify a default value when you want to pre-populate the field's value ahead of time.","type":"any"},"type":{"title":"Type","description":"Data type of the property.","type":"string","readonly":!0},"format":{"title":"Format","description":"Data format of the property.","type":"string"},"disallow":{"title":"Disallowed Values","description":"List of disallowed values for the property.","type":"array"},"dependencies":{"title":"Dependencies","description":"List of property dependencies.","type":"array"}}};return this.getType&&!t.isValEmpty(this.getType())&&(e.properties.type.default=this.getType(),e.properties.type.enum=[this.getType()]),e},"getOptionsForSchema":function(){return{"fields":{"title":{"helper":"Field short description","type":"text"},"description":{"helper":"Field detailed description","type":"textarea"},"readonly":{"helper":"Field will be read only if checked","rightLabel":"This field is read-only","type":"checkbox"},"required":{"helper":"Field value must be set if checked","rightLabel":"This field is required","type":"checkbox"},"default":{"helper":"Field default value","type":"textarea"},"type":{"helper":"Field data type","type":"text"},"format":{"type":"select","dataSource":function(e){for(var i in t.defaultFormatFieldMapping)this.selectOptions.push({"value":i,"text":i});e()}},"disallow":{"helper":"Disallowed values for the field","itemLabel":"Value","type":"array"},"dependencies":{"helper":"Field Dependencies","multiple":!0,"size":3,"type":"select","dataSource":function(e,t){if(e.parent&&e.parent.schemaParent&&e.parent.schemaParent.parent)for(var i in e.parent.schemaParent.parent.childrenByPropertyId)i!=e.parent.schemaParent.propertyId&&e.selectOptions.push({"value":i,"text":i});t&&t()}}}}},"getSchemaOfOptions":function(){var e={"title":"Options for "+this.getTitle(),"description":this.getDescription()+" (Options)","type":"object","properties":{"form":{},"id":{"title":"Field Id","description":"Unique field id. Auto-generated if not provided.","type":"string"},"type":{"title":"Field Type","description":"Field type.","type":"string","default":this.getFieldType(),"readonly":!0},"validate":{"title":"Validation","description":"Field validation is required if true.","type":"boolean","default":!0},"showMessages":{"title":"Show Messages","description":"Display validation messages if true.","type":"boolean","default":!0},"disabled":{"title":"Disabled","description":"Field will be disabled if true.","type":"boolean","default":!1},"readonly":{"title":"Readonly","description":"Field will be readonly if true.","type":"boolean","default":!1},"hidden":{"title":"Hidden","description":"Field will be hidden if true.","type":"boolean","default":!1},"label":{"title":"Label","description":"Field label.","type":"string"},"helper":{"title":"Helper","description":"Field help message.","type":"string"},"fieldClass":{"title":"CSS class","description":"Specifies one or more CSS classes that should be applied to the dom element for this field once it is rendered.  Supports a single value, comma-delimited values, space-delimited values or values passed in as an array.","type":"string"},"hideInitValidationError":{"title":"Hide Initial Validation Errors","description":"Hide initial validation errors if true.","type":"boolean","default":!1},"focus":{"title":"Focus","description":"If true, the initial focus for the form will be set to the first child element (usually the first field in the form).  If a field name or path is provided, then the specified child field will receive focus.  For example, you might set focus to 'name' (selecting the 'name' field) or you might set it to 'client/name' which picks the 'name' field on the 'client' object.","type":"checkbox","default":!0},"optionLabels":{"title":"Enumerated Value Labels","description":"An array of string labels for items in the enum array","type":"array"},"view":{"title":"Override of the view for this field","description":"Allows for this field to be rendered with a different view (such as 'display' or 'create')","type":"string"}}};return this.isTopLevel()?e.properties.form={"title":"Form","description":"Options for rendering the FORM tag.","type":"object","properties":{"attributes":{"title":"Form Attributes","description":"List of attributes for the FORM tag.","type":"object","properties":{"id":{"title":"Id","description":"Unique form id. Auto-generated if not provided.","type":"string"},"action":{"title":"Action","description":"Form submission endpoint","type":"string"},"method":{"title":"Method","description":"Form submission method","enum":["post","get"],"type":"string"},"rubyrails":{"title":"Ruby On Rails","description":"Ruby on Rails Name Standard","enum":["true","false"],"type":"string"},"name":{"title":"Name","description":"Form name","type":"string"},"focus":{"title":"Focus","description":"Focus Setting","type":"any"}}},"buttons":{"title":"Form Buttons","description":"Configuration for form-bound buttons","type":"object","properties":{"submit":{"type":"object","title":"Submit Button","required":!1},"reset":{"type":"object","title":"Reset button","required":!1}}},"toggleSubmitValidState":{"title":"Toggle Submit Valid State","description":"Toggle the validity state of the Submit button","type":"boolean","default":!0}}}:delete e.properties.form,e},"getOptionsForOptions":function(){var e={"type":"object","fields":{"id":{"type":"text","readonly":!0},"type":{"type":"text"},"validate":{"rightLabel":"Enforce validation","type":"checkbox"},"showMessages":{"rightLabel":"Show validation messages","type":"checkbox"},"disabled":{"rightLabel":"Disable this field","type":"checkbox"},"hidden":{"type":"checkbox","rightLabel":"Hide this field"},"label":{"type":"text"},"helper":{"type":"textarea"},"fieldClass":{"type":"text"},"hideInitValidationError":{"rightLabel":"Hide initial validation errors","type":"checkbox"},"focus":{"type":"checkbox","rightLabel":"Auto-focus first child field"},"optionLabels":{"type":"array","items":{"type":"string"}},"view":{"type":"text"}}};return this.isTopLevel()&&(e.fields.form={"type":"object","fields":{"attributes":{"type":"object","fields":{"id":{"type":"text","readonly":!0},"action":{"type":"text"},"method":{"type":"select"},"name":{"type":"text"}}}}}),e}}),t.registerMessages({"disallowValue":lang.disallowValue,"notOptional":lang.notOptional})}(jQuery),function(e){var t=e.alpaca;t.ControlField=t.Field.extend({"onConstruct":function(){var t=this;this.isControlField=!0,this._getControlVal=function(i){var n=null;return this.control&&(n=e(this.control).val(),i&&(n=t.ensureProperType(n))),n}},"setup":function(){var e=this;this.base();var i=e.resolveControlTemplateType();if(!i)return t.throwErrorWithCallback("Unable to find template descriptor for control: "+e.getFieldType());this.controlDescriptor=this.view.getTemplateDescriptor("control-"+i,e)},"getControlEl":function(){return this.control},"resolveControlTemplateType":function(){var e=this,t=!1,i=null,n=this;do{if(n.getFieldType){var l=this.view.getTemplateDescriptor("control-"+n.getFieldType(),e);l?(i=n.getFieldType(),t=!0):n=n.constructor.ancestor.prototype}else t=!0}while(!t);return i},"onSetup":function(){},"isAutoFocusable":function(){return!0},"getTemplateDescriptorId":function(){return"control"},"renderFieldElements":function(i){var n=this;this.control=e(this.field[0].querySelectorAll("."+t.MARKER_CLASS_CONTROL_FIELD)),this.control.removeClass(t.MARKER_CLASS_CONTROL_FIELD),n.prepareControlModel(function(e){n.beforeRenderControl(e,function(){n.renderControl(e,function(l){l&&(n.control.replaceWith(l),n.control=l,n.control.addClass(t.CLASS_CONTROL)),n.fireCallback("control"),n.afterRenderControl(e,function(){i()})})})})},"prepareControlModel":function(e){var t={};t.id=this.getId(),t.name=this.name,t.options=this.options,t.schema=this.schema,t.data=this.data,t.required=this.isRequired(),t.view=this.view,e(t)},"beforeRenderControl":function(e,t){t()},"afterRenderControl":function(e,t){var i=this;i.firstUpdateObservableFire||void 0===i.data||null==i.data||(i.firstUpdateObservableFire=!0,i.updateObservable()),t()},"renderControl":function(e,i){var n=null;this.controlDescriptor&&(n=t.tmpl(this.controlDescriptor,e)),i(n)},"postRender":function(e){this.base(function(){e()})},"setDefault":function(){var e=t.isEmpty(this.schema.default)?"":this.schema.default;this.setValue(e)},"_validateEnum":function(){if(this.schema.enum){var i=this.data;return i=this.getValue(),!(this.isRequired()||!t.isValEmpty(i))||e.inArray(i,this.schema.enum)>-1}return!0},"handleValidate":function(){var e=this.base(),i=this.validation,n=this._validateEnum();return i.invalidValueOfEnum={"message":n?"":t.substituteTokens(this.getMessage("invalidValueOfEnum"),[this.schema.enum.join(", "),this.data]),"status":n},e&&i.invalidValueOfEnum.status},"initEvents":function(){this.base(),this.control&&this.control.length>0&&this.initControlEvents()},"initControlEvents":function(){var e=this,t=this.control;t.on("click",function(t){e.onClick.call(e,t),e.trigger("click",t)}),t.on("change",function(t){setTimeout(function(){e.onChange.call(e,t),e.triggerWithPropagation("change",t)},250)}),t.on("focus",function(t){if(e.wasFocused=!0,!e.suspendBlurFocus){var i=e.onFocus.call(e,t);return!1!==i&&(i=e.trigger("focus",t)),i}}),t.on("blur",function(t){if(e.wasBlurred=!0,!e.suspendBlurFocus){var i=e.onBlur.call(e,t);return!1!==i&&(i=e.trigger("blur",t)),i}}),t.on("keypress",function(t){var i=e.onKeyPress.call(e,t);return!1!==i&&(i=e.trigger("keypress",t)),i}),t.on("keyup",function(t){var i=e.onKeyUp.call(e,t);return!1!==i&&(i=e.trigger("keyup",t)),i}),t.on("keydown",function(t){var i=e.onKeyDown.call(e,t);return!1!==i&&(i=e.trigger("keydown",t)),i})},"onKeyPress":function(e){var t=this,i=!1;if(t.view.type&&"edit"===t.view.type){var n=this.isValid();n||(i=!0)}else if(t.view.type&&"create"===t.view.type){var n=this.isValid();!n&&t.wasBlurred&&(i=!0)}i&&window.setTimeout(function(){t.refreshValidationState()},50)},"onKeyDown":function(e){},"onKeyUp":function(e){},"onClick":function(e){},"disable":function(){this.base(),this.control&&this.control.length>0&&e(this.control).prop("disabled",!0)},"enable":function(){this.base(),this.control&&this.control.length>0&&e(this.control).prop("disabled",!1)},"getSchemaOfSchema":function(){return t.merge(this.base(),{"properties":{"enum":{"title":"Enumerated Values","description":"List of specific values for this property","type":"array"}}})},"getOptionsForSchema":function(){return t.merge(this.base(),{"fields":{"enum":{"itemLabel":"Value","type":"array"}}})},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"name":{"title":"Field Name","description":"Field Name.","type":"string"}}})},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{"name":{"type":"text"}}})}}),t.registerMessages({"invalidValueOfEnum":lang.invalidValueOfEnum})}(jQuery),function(e){var t=e.alpaca;t.ContainerField=t.Field.extend({"onConstruct":function(){this.isContainerField=!0},"isContainer":function(){return!0},"getContainerEl":function(){return this.container},"getTemplateDescriptorId":function(){return"container"},"resolveContainerTemplateType":function(){var e=!1,t=null,i=this;do{if(i.getFieldType){var n=this.view.getTemplateDescriptor("container-"+i.getFieldType(),this);n?(t=i.getFieldType(),e=!0):i=i.constructor.ancestor.prototype}else e=!0}while(!e);return t},"resolveContainerItemTemplateType":function(){var e=!1,t=null,i=this;do{if(i.getFieldType){var n=this.view.getTemplateDescriptor("container-"+i.getFieldType()+"-item",this);n?(t=i.getFieldType(),e=!0):i=i.constructor.ancestor.prototype}else e=!0}while(!e);return t},"setup":function(){var e=this;this.base();var i=e.resolveContainerTemplateType();if(!i)return t.throwErrorWithCallback("Unable to find template descriptor for container: "+e.getFieldType());this.containerDescriptor=this.view.getTemplateDescriptor("container-"+i,e);var n=!0;t.isEmpty(this.view.collapsible)||(n=this.view.collapsible),t.isEmpty(this.options.collapsible)||(n=this.options.collapsible),this.options.collapsible=n;var l="button";t.isEmpty(this.view.labelStyle)||(l=this.view.labelStyle),t.isEmpty(this.options.labelStyle)||(l=this.options.labelStyle),this.options.labelStyle=l,this.lazyLoading=!1,t.isEmpty(this.options.lazyLoading)||(this.lazyLoading=this.options.lazyLoading,this.lazyLoading&&(this.options.collapsed=!0)),this.children=[],this.childrenById={},this.childrenByPropertyId={}},"destroy":function(){this.form&&(this.form.destroy(!0),delete this.form),t.each(this.children,function(){this.destroy()}),this.base()},"renderFieldElements":function(i){var n=this;this.container=e(this.field[0].querySelectorAll("."+t.MARKER_CLASS_CONTAINER_FIELD)),this.container.removeClass(t.MARKER_CLASS_CONTAINER_FIELD),n.prepareContainerModel(function(e){n.beforeRenderContainer(e,function(){n.renderContainer(e,function(l){l&&(n.container.replaceWith(l),n.container=l,n.container.addClass(t.CLASS_CONTAINER)),n.view.horizontal?n.container.addClass("alpaca-horizontal"):n.container.addClass("alpaca-vertical"),n.fireCallback("container"),n.afterRenderContainer(e,function(){i()})})})})},"prepareContainerModel":function(e){var t=this,i={"id":this.getId(),"name":this.name,"schema":this.schema,"options":this.options,"view":this.view};t.createItems(function(t){t||(t=[]);for(var n=0;n<t.length;n++)t[n].containerItemEl||(t[n].containerItemEl=t[n].getFieldEl());i.items=t,e(i)})},"beforeRenderContainer":function(e,t){t()},"renderContainer":function(e,i){var n=null;this.containerDescriptor&&(n=t.tmpl(this.containerDescriptor,e)),i(n)},"afterRenderContainer":function(e,t){var i=this;i.beforeApplyCreatedItems(e,function(){i.applyCreatedItems(e,function(){i.afterApplyCreatedItems(e,function(){t()})})})},"postRender":function(e){this.base(function(){e()})},"initEvents":function(){this.base()},"createItems":function(e){e()},"beforeApplyCreatedItems":function(e,t){t()},"applyCreatedItems":function(i,n){var l=this,a=null;if(l.isTopLevel()&&l.view.getLayout()&&!(a=l.view.getLayout().bindings)&&l.view.getLayout().templateDescriptor&&i.items.length>0){a={};for(var s=0;s<i.items.length;s++){var o=i.items[s].name;a[o]="[data-alpaca-layout-binding='"+o+"']"}}i.items.length>0?(e(l.container).addClass("alpaca-container-has-items"),e(l.container).attr("data-alpaca-container-item-count",i.items.length)):(e(l.container).removeClass("alpaca-container-has-items"),e(l.container).removeAttr("data-alpaca-container-item-count"));for(var s=0;s<i.items.length;s++){var r=i.items[s],c="."+t.MARKER_CLASS_CONTAINER_FIELD_ITEM+"["+t.MARKER_DATA_CONTAINER_FIELD_ITEM_KEY+"='"+r.name+"']",d=e(findElementFromCollection(l.container,c));if(a){var u=a[r.name];if(u){var p=e(u,l.field);if(0==p.length)try{p=e("#"+u,l.field)}catch(e){}p.length>0&&(e(r.containerItemEl).appendTo(p),r.domEl=p)}e(d).remove()}else{var p=e(d).parent();e(d).replaceWith(r.containerItemEl),r.domEl=p}r.containerItemEl[0].classList.add("alpaca-container-item"),0===s&&r.containerItemEl[0].classList.add("alpaca-container-item-first"),s+1===i.items.length&&r.containerItemEl[0].classList.add("alpaca-container-item-last"),r.containerItemEl[0].setAttribute("data-alpaca-container-item-index",s),r.containerItemEl[0].setAttribute("data-alpaca-container-item-name",r.name),r.containerItemEl[0].setAttribute("data-alpaca-container-item-parent-field-id",l.getId()),l.registerChild(r,s)}l.options.collapsible&&l.fireCallback("collapsible"),l.triggerUpdate(),n()},"afterApplyCreatedItems":function(e,t){t()},"registerChild":function(e,i){t.isEmpty(i)?this.children.push(e):this.children.splice(i,0,e),this.childrenById[e.getId()]=e,e.propertyId&&(this.childrenByPropertyId[e.propertyId]=e),e.parent=this},"unregisterChild":function(e){var i=this.children[e];i&&(t.isEmpty(e)||this.children.splice(e,1),delete this.childrenById[i.getId()],i.propertyId&&delete this.childrenByPropertyId[i.propertyId],i.parent=null)},"updateChildDOMElements":function(){var t=this,i=null;if(t.view.getLayout()&&(i=t.view.getLayout().bindings),!i){t.children.length>0?(e(t.getContainerEl()).addClass("alpaca-container-has-items"),e(t.getContainerEl()).attr("data-alpaca-container-item-count",t.children.length)):(e(t.getContainerEl()).removeClass("alpaca-container-has-items"),e(t.getContainerEl()).removeAttr("data-alpaca-container-item-count"));for(var n=0;n<t.children.length;n++){var l=t.children[n],a=l.name;l.path=t.path+"["+n+"]",l.calculateName(),e(l.containerItemEl).removeClass("alpaca-container-item-first"),e(l.containerItemEl).removeClass("alpaca-container-item-last"),e(l.containerItemEl).removeClass("alpaca-container-item-index"),e(l.containerItemEl).removeClass("alpaca-container-item-key"),e(l.containerItemEl).addClass("alpaca-container-item"),0===n&&e(l.containerItemEl).addClass("alpaca-container-item-first"),n+1===t.children.length&&e(l.containerItemEl).addClass("alpaca-container-item-last"),e(l.containerItemEl).attr("data-alpaca-container-item-index",n),e(l.containerItemEl).attr("data-alpaca-container-item-name",l.name),e(l.containerItemEl).attr("data-alpaca-container-item-parent-field-id",t.getId()),e(l.containerItemEl).find('[data-alpaca-container-item-name ^="'+a+'"]').each(function(){var t=e(this).attr("data-alpaca-container-item-name").replace(a,l.name);e(this).attr("data-alpaca-container-item-name",t)}),e(l.containerItemEl).find('[data-name ^="'+a+'"]').each(function(){var t=e(this).attr("data-name").replace(a,l.name);e(this).attr("data-name",t)});var s="csui-scrollable-"+a+" csui-scrollable-"+l.name;e(l.containerItemEl).find(".csui-scrollable-"+a).toggleClass(s)}}},"onDependentReveal":function(){for(var e=0;e<this.children.length;e++)this.children[e].onDependentReveal()},"onDependentConceal":function(){for(var e=0;e<this.children.length;e++)this.children[e].onDependentConceal()},"focus":function(e){this.base();for(var t=-1,i=0;i<this.children.length;i++)if(!this.children[i].isValid(!0)){t=i;break}-1===t&&this.children.length>0&&(t=0),t>-1&&(this.children[t].trigger("focus"),e&&e(this.children[t]))},"disable":function(){this.base();for(var e=0;e<this.children.length;e++)this.children[e].disable()},"enable":function(){this.base();for(var e=0;e<this.children.length;e++)this.children[e].enable()},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"lazyLoading":{"title":"Lazy Loading","description":"Child fields will only be rendered when the fieldset is expanded if this option is set true.","type":"boolean","default":!1},"collapsible":{"title":"Collapsible","description":"Field set is collapsible if true.","type":"boolean","default":!0},"collapsed":{"title":"Collapsed","description":"Field set is initially collapsed if true.","type":"boolean","default":!1},"labelStyle":{"title":"label Style","description":"Field set label style.","type":"string","enum":["button","link"],"default":"button"},"animate":{"title":"Animate movements and transitions","description":"Up and down transitions will be animated","type":"boolean","default":!0}}})},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{"lazyLoading":{"rightLabel":"Lazy loading child fields ?","helper":"Lazy loading will be enabled if checked.","type":"checkbox"},"collapsible":{"rightLabel":"Field set collapsible ?","helper":"Field set is collapsible if checked.","type":"checkbox"},"collapsed":{"rightLabel":"Field set initially collapsed ?","description":"Field set is initially collapsed if checked.","type":"checkbox"},"labelStyle":{"type":"select"},"animate":{"rightLabel":"Animate movements and transitions","type":"checkbox"}}})}})}(jQuery),function(e){var t=e.alpaca;t.Form=Base.extend({"constructor":function(e,i,n,l,a){if(this.domEl=e,this.parent=null,this.connector=l,this.errorCallback=a,this.options=i,this.options.attributes?this.attributes=this.options.attributes:this.attributes={},this.options.buttons){this.options.buttons.submit&&(this.options.buttons.submit.type||(this.options.buttons.submit.type="submit"),this.options.buttons.submit.name||(this.options.buttons.submit.name="submit"),this.options.buttons.submit.value||(this.options.buttons.submit.value="Submit")),this.options.buttons.reset&&(this.options.buttons.reset.type||(this.options.buttons.reset.type="reset"),this.options.buttons.reset.name||(this.options.buttons.reset.name="reset"),this.options.buttons.reset.value||(this.options.buttons.reset.value="Reset"));for(var s in this.options.buttons)this.options.buttons[s].label&&(this.options.buttons[s].value=this.options.buttons[s].label),this.options.buttons[s].title&&(this.options.buttons[s].value=this.options.buttons[s].title),this.options.buttons[s].type||(this.options.buttons[s].type="button")}this.attributes.id?this.id=this.attributes.id:(this.id=t.generateId(),this.attributes.id=this.id),this.options.buttons&&this.options.buttons.submit&&t.isUndefined(this.options.toggleSubmitValidState)&&(this.options.toggleSubmitValidState=!0),this.viewType=i.viewType,this.view=new t.RuntimeView(n,this)},"render":function(e){var t=this;this.form&&this.form.remove(),this.processRender(this.domEl,function(){t.form.appendTo(t.container),t.form.addClass("alpaca-form"),t.fireCallback("form"),e(t)})},"isFormValid":function(){return this.topControl.validate(!0),this.topControl.isValid(!0)},"isValid":function(){return this.isFormValid()},"validate":function(e){return this.topControl.validate(e)},"enableSubmitButton":function(){if(e(".alpaca-form-button-submit").attrProp("disabled",!1),e.mobile)try{e(".alpaca-form-button-submit").button("refresh")}catch(e){}},"disableSubmitButton":function(){if(e(".alpaca-form-button-submit").attrProp("disabled",!0),e.mobile)try{e(".alpaca-form-button-submit").button("refresh")}catch(e){}},"adjustSubmitButtonState":function(){this.disableSubmitButton(),this.isFormValid()&&this.enableSubmitButton()},"processRender":function(i,n){var l=this;if(this.formDescriptor=this.view.getTemplateDescriptor("form"),!this.formDescriptor)return t.throwErrorWithCallback("Could not find template descriptor: form");var a=t.tmpl(this.formDescriptor,{"id":this.getId(),"options":this.options,"view":this.view});a.appendTo(i),this.form=a,this.formFieldsContainer=e(this.form[0].querySelectorAll("."+t.MARKER_CLASS_FORM_ITEMS_FIELD)),this.formFieldsContainer.removeClass(t.MARKER_CLASS_FORM_ITEMS_FIELD),t.isEmpty(this.form.attr("id"))&&this.form.attr("id",this.getId()+"-form-outer"),t.isEmpty(this.form.attr("data-alpaca-form-id"))&&this.form.attr("data-alpaca-form-id",this.getId()),i.find("form").attr(this.attributes),this.buttons={},e(i[0].querySelectorAll(".alpaca-form-button")).each(function(){thisElem=e(this),thisElem.on("click",function(e){thisElem.attr("button-pushed",!0)});var t=thisElem.attr("data-key");if(t){var i=l.options.buttons[t];i&&i.click&&thisElem.on("click",function(e,t){return function(i){i.preventDefault(),t.call(e,i)}}(l,i.click))}}),n()},"getId":function(){return this.id},"getType":function(){return this.type},"getParent":function(){return this.parent},"getValue":function(){return this.topControl.getValue()},"setValue":function(e){this.topControl.setValue(e)},"initEvents":function(){var t=this,i=e(this.domEl[0].querySelectorAll("form")),n=this.getValue();e(i).on("submit",n,function(e){return t.onSubmit(e,t)}),this.options.toggleSubmitValidState&&(e(t.topControl.getFieldEl()).on("fieldupdate",function(){t.adjustSubmitButtonState()}),this.adjustSubmitButtonState())},"getButtonEl":function(t){return e(this.domEl[0].querySelectorAll(".alpaca-form-button-"+t))},"onSubmit":function(e,i){if(!this.isFormValid())return e.stopPropagation(),this.refreshValidationState(!0),!1;if(this.submitHandler){e.stopPropagation();var n=this.submitHandler(e,i);return t.isUndefined(n)&&(n=!1),n}},"registerSubmitHandler":function(e){t.isFunction(e)&&(this.submitHandler=e)},"refreshValidationState":function(e,t){this.topControl.refreshValidationState(e,t)
},"disable":function(){this.topControl.disable()},"enable":function(){this.topControl.enable()},"focus":function(e){this.topControl.on("focus",function(t){e(t)})},"destroy":function(e){this.getFormEl().remove(),!e&&this.parent&&this.parent.destroy()},"show":function(){this.getFormEl().css({"display":""})},"hide":function(){this.getFormEl().css({"display":"none"})},"clear":function(e){this.topControl.clear(e)},"isEmpty":function(){return this.topControl.isEmpty()},"fireCallback":function(e,t,i,n,l,a){this.view.fireCallback(this,e,t,i,n,l,a)},"getFormEl":function(){return this.form},"submit":function(){this.form.submit()},"ajaxSubmit":function(){var t=this;return e.ajax({"data":this.getValue(),"url":t.options.attributes.action,"type":t.options.attributes.method,"dataType":"json"})}})}(jQuery),function(e){var t=e.alpaca;t.Connector=Base.extend({"constructor":function(e,n){this.id=e,this.config=n,this.isUri=function(e){return!t.isEmpty(e)&&t.isUri(e)},this.cache=new i("URL",!0,36e5)},"connect":function(e,t){e()},"loadTemplate":function(e,i,n){t.isEmpty(e)?n({"message":"Empty data source.","reason":"TEMPLATE_LOADING_ERROR"}):t.isUri(e)?this.loadUri(e,!1,function(e){i&&t.isFunction(i)&&i(e)},function(e){n&&t.isFunction(n)&&n(e)}):i(e)},"loadData":function(e,t,i){return this._handleLoadJsonResource(e,t,i)},"loadSchema":function(e,t,i){return this._handleLoadJsonResource(e,t,i)},"loadOptions":function(e,t,i){return this._handleLoadJsonResource(e,t,i)},"loadView":function(e,t,i){return this._handleLoadJsonResource(e,t,i)},"loadAll":function(e,i,n){var l=this,a=function(){var a=e.dataSource,s=e.schemaSource,o=e.optionsSource,r=e.viewSource;s||"string"!=typeof e.schema||(s=e.schema),o||"string"!=typeof e.options||(o=e.options),r||"string"!=typeof e.view||(r=e.view);var c={},d=0,u=0,p=function(){d===u&&i&&t.isFunction(i)&&i(c.data,c.options,c.schema,c.view)},h=function(e){n&&t.isFunction(n)&&n(e)};if(a&&u++,s&&u++,o&&u++,r&&u++,0===u)return void p();var f=function(e,i,n){c[e]=i,n&&("object"==typeof c[e]&&"object"==typeof n?t.mergeObject(c[e],n):c[e]=n)};a&&l.loadData(a,function(t){f("data",e.data,t),d++,p()},h),s&&l.loadSchema(s,function(t){f("schema",e.schema,t),d++,p()},h),o&&l.loadOptions(o,function(t){f("options",e.options,t),d++,p()},h),r&&l.loadView(r,function(t){f("view",e.view,t),d++,p()},h)},s=function(e){n&&t.isFunction(n)&&n(e)};l.connect(a,s)},"loadJson":function(e,t,i){this.loadUri(e,!0,t,i)},"buildAjaxConfig":function(e,t){var i={"url":e,"type":"get"};return i.dataType=t?"json":"text",i},"loadUri":function(i,n,l,a){var s=this,o=s.buildAjaxConfig(i,n);o.success=function(e){s.cache.put(i,e),l&&t.isFunction(l)&&l(e)},o.error=function(e,n,l){a&&t.isFunction(a)&&a({"message":"Unable to load data from uri : "+i,"stage":"DATA_LOADING_ERROR","details":{"jqXHR":e,"textStatus":n,"errorThrown":l}})};var r=s.cache.get(i);!1!==r&&l&&t.isFunction(l)?l(r):e.ajax(o)},"loadReferenceSchema":function(e,t,i){return this._handleLoadJsonResource(e,t,i)},"loadReferenceOptions":function(e,t,i){return this._handleLoadJsonResource(e,t,i)},"_handleLoadJsonResource":function(e,t,i){this.isUri(e)?this.loadJson(e,function(e){t(e)},i):t(e)}}),t.registerConnectorClass("default",t.Connector);var i=function(e,t,i){switch(this.on=!!t,null!=i&&(this.defaultLifetime=i),this.type=e,this.type){case"URL":this.put=this.put_url;break;case"GET":this.put=this.put_GET}};i.prototype.on=!1,i.prototype.type=void 0,i.prototype.defaultLifetime=18e5,i.prototype.items={},i.prototype.put_url=function(e,t,i){null==i&&(i=this.defaultLifetime);var n=this.make_key(e);return this.items[n]={},this.items[n].key=n,this.items[n].url=e,this.items[n].response=t,this.items[n].expire=(new Date).getTime()+i,!0},i.prototype.put_GET=function(e,t,i,n){null==n&&(n=this.defaultLifetime);var l=this.make_key(e,[t]);return this.items[l]={},this.items[l].key=l,this.items[l].url=e,this.items[l].data=t,this.items[l].response=i,this.items[l].expire=(new Date).getTime()+n,!0},i.prototype.get=function(e,t){var i=this.make_key(e,t);return null!=this.items[i]&&(!(this.items[i].expire<(new Date).getTime())&&this.items[i].response)},i.prototype.make_key=function(e,t){var i=e;switch(this.type){case"URL":break;case"GET":i+=this.stringify(t[0])}return i},i.prototype.flush=function(){return cache.items={},!0},i.prototype.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return this.str("",{"":e})},i.prototype.quote=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},i.prototype.str=function(e,t){var i,n,l,a,s,o=gap,r=t[e];switch(r&&"object"==typeof r&&"function"==typeof r.toJSON&&(r=r.toJSON(e)),"function"==typeof rep&&(r=rep.call(t,e,r)),typeof r){case"string":return this.quote(r);case"number":return isFinite(r)?String(r):"null";case"boolean":case"null":return String(r);case"object":if(!r)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(r)){for(a=r.length,i=0;i<a;i+=1)s[i]=this.str(i,r)||"null";return l=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+o+"]":"["+s.join(",")+"]",gap=o,l}if(rep&&"object"==typeof rep)for(a=rep.length,i=0;i<a;i+=1)"string"==typeof(n=rep[i])&&(l=this.str(n,r))&&s.push(this.quote(n)+(gap?": ":":")+l);else for(n in r)Object.hasOwnProperty.call(r,n)&&(l=this.str(n,r))&&s.push(this.quote(n)+(gap?": ":":")+l);return l=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+o+"}":"{"+s.join(",")+"}",gap=o,l}}}(jQuery),function(e){var t=e.alpaca;t.Fields.TextField=t.ControlField.extend({"getFieldType":function(){return"text"},"setup":function(){this.base(),this.inputType||(this.inputType="text"),this.options.inputType&&(this.inputType=this.options.inputType),this.options.data||(this.options.data={}),this.options.attributes||(this.options.attributes={}),void 0===this.options.allowOptionalEmpty&&(this.options.allowOptionalEmpty=!0),this.options.autocomplete&&"string"==typeof this.options.autocomplete&&("on"===this.options.autocomplete.toLowerCase()?this.options.autocomplete=!0:"true"===this.options.autocomplete.toLowerCase()?this.options.autocomplete=!0:"yes"===this.options.autocomplete.toLowerCase()?this.options.autocomplete=!0:this.options.autocomplete=!1),void 0===this.options.autocomplete&&(this.options.autocomplete=!1),void 0===this.options.disallowEmptySpaces&&(this.options.disallowEmptySpaces=!1)},"destroy":function(){this.base(),this.control&&this.control.typeahead&&this.options.typeahead&&e(this.control).typeahead("destroy")},"postRender":function(e){var t=this;this.base(function(){t.control&&(t.applyAutocomplete(),t.applyMask(),t.applyTypeAhead(),t.updateMaxLengthIndicator()),e()})},"applyAutocomplete":function(){var t=this;t.options.autocomplete&&(e(t.field).addClass("alpaca-autocomplete"),e(t.control).attr("autocomplete",t.options.autocomplete?"on":"off"),t.fireCallback("autocomplete"))},"applyMask":function(){var e=this;e.control.mask&&e.options.maskString&&e.control.mask(e.options.maskString)},"applyTypeAhead":function(){var i=this;if(i.control.typeahead&&i.options.typeahead&&!t.isEmpty(i.options.typeahead)){var n=i.options.typeahead.config;n||(n={});var l=i.options.typeahead.datasets;l||(l={}),l.name||(l.name=i.getId());var a=i.options.typeahead.events;if(a||(a={}),"local"===l.type||"remote"===l.type||"prefetch"===l.type){var s={"datumTokenizer":function(e){return Bloodhound.tokenizers.whitespace(e.value)},"queryTokenizer":Bloodhound.tokenizers.whitespace};if("local"===l.type){var o=[];if("function"==typeof l.source)s.local=l.source;else{for(var r=0;r<l.source.length;r++){var c=l.source[r];"string"==typeof c&&(c={"value":c}),o.push(c)}s.local=o}l.local&&(s.local=l.local)}"prefetch"===l.type&&(s.prefetch={"url":l.source},l.filter&&(s.prefetch.filter=l.filter)),"remote"===l.type&&(s.remote={"url":l.source},l.filter&&(s.remote.filter=l.filter),l.replace&&(s.remote.replace=l.replace));var d=new Bloodhound(s);d.initialize(),l.source=d.ttAdapter()}if(l.templates)for(var u in l.templates){var p=l.templates[u];"string"==typeof p&&(l.templates[u]=Handlebars.compile(p))}e(i.control).typeahead(n,l),e(i.control).on("typeahead:autocompleted",function(t,n){i.setValue(n.value),e(i.control).trigger("change")}),e(i.control).on("typeahead:selected",function(t,n){i.setValue(n.value),e(i.control).trigger("change")}),a&&(a.autocompleted&&e(i.control).on("typeahead:autocompleted",function(e,t){a.autocompleted(e,t)}),a.selected&&e(i.control).on("typeahead:selected",function(e,t){a.selected(e,t)}));var h=e(i.control);e(i.control).on("change",function(){var t=e(this).val(),i=e(h).typeahead("val");i!==t&&e(h).typeahead("val",i)}),e(i.field).find("span.twitter-typeahead").first().css("display","block"),e(i.field).find("span.twitter-typeahead input.tt-input").first().css("background-color","")}},"prepareControlModel":function(e){var t=this;this.base(function(i){i.inputType=t.inputType,e(i)})},"updateMaxLengthIndicator":function(){var i=this,n=!1,l="";if(!t.isEmpty(i.schema.maxLength)&&i.options.showMaxLengthIndicator){var a=i.getValue()||"",s=i.schema.maxLength-a.length;s>=0?l="You have "+s+" characters remaining":(l="Your message is too long by "+-1*s+" characters",n=!0);var o=e(i.field).find(".alpaca-field-text-max-length-indicator");0===o.length&&(o=e("<p class='alpaca-field-text-max-length-indicator'></p>"),e(i.control).after(o)),e(o).html(l),e(o).removeClass("err"),n&&e(o).addClass("err")}},"getValue":function(){var t=this,i=null;if(!this.isDisplayOnly()&&this.control&&this.control.length>0){if(i=this._getControlVal(!0),t.control.mask&&t.options.maskString){var n=e(this.control).data(e.mask.dataName);n&&(i=n(),i=t.ensureProperType(i))}}else i=this.base();return i},"setValue":function(e){this.control&&this.control.length>0&&(t.isEmpty(e)?this.control.val(""):this.control.val(e)),this.base(e),this.updateMaxLengthIndicator()},"handleValidate":function(){var e=this.base(),i=this.validation,n=this._validatePattern();return i.invalidPattern={"message":n?"":t.substituteTokens(this.getMessage("invalidPattern"),[this.schema.pattern]),"status":n},n=this._validateMaxLength(),i.stringTooLong={"message":n?"":t.substituteTokens(this.getMessage("stringTooLong"),[this.schema.maxLength]),"status":n},n=this._validateMinLength(),i.stringTooShort={"message":n?"":t.substituteTokens(this.getMessage("stringTooShort"),[this.schema.minLength]),"status":n},e&&i.invalidPattern.status&&i.stringTooLong.status&&i.stringTooShort.status},"_validatePattern":function(){if(this.schema.pattern){var e=this.getValue();if(""===e&&this.options.allowOptionalEmpty&&!this.isRequired())return!0;if(t.isEmpty(e)&&(e=""),this.fieldView&&"url"===this.fieldView.alpacaField.type){var i=/^((http||https):\/\/)/;e.match(/^\?func=[a-z0-9]/i)?this.schema.pattern=/^\?func=[a-z0-9]/i:"writeonly"===this.fieldView.mode&&this.schema.pattern&&!i.test(e)?this.schema.pattern=/^[a-z0-9]+([\-\.]{1}[a-z0-9]+)*(\:[0-9]{1,5})?(([0-9]{1,5})?\/.*)?$/i:this.schema.pattern=/^[a-z0-9]+:\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*(\:[0-9]{1,5})?(([0-9]{1,5})?\/.*)?$/i}if(!e.match(this.schema.pattern))return!1}return!0},"_validateMinLength":function(){if(!t.isEmpty(this.schema.minLength)){var e=this.getValue();if(""===e&&this.options.allowOptionalEmpty&&!this.isRequired())return!0;if(t.isEmpty(e)&&(e=""),e.length<this.schema.minLength)return!1}return!0},"_validateMaxLength":function(){if(!t.isEmpty(this.schema.maxLength)){var e=this.getValue();if(""===e&&this.options.allowOptionalEmpty&&!this.isRequired())return!0;if(t.isEmpty(e)&&(e=""),e.length>this.schema.maxLength)return!1}return!0},"focus":function(t){if(this.control&&this.control.length>0){var i=e(this.control).get(0);try{var n=i.value?i.value.length:0;i.selectionStart=n,i.selectionEnd=n}catch(e){}i.focus(),t&&t(this)}},"getType":function(){return"string"},"onKeyDown":function(e){var i=this;if(8===e.keyCode){if(!t.isEmpty(i.schema.minLength)&&(i.options.constrainLengths||i.options.constrainMinLength)){var n=i.getValue()||"";n.length<=i.schema.minLength&&(e.preventDefault(),e.stopImmediatePropagation())}}else if(!t.isEmpty(i.schema.maxLength)&&(i.options.constrainLengths||i.options.constrainMaxLength)){var n=i.getValue()||"";n.length>=i.schema.maxLength&&(e.preventDefault(),e.stopImmediatePropagation())}32===e.keyCode&&i.options.disallowEmptySpaces&&(e.preventDefault(),e.stopImmediatePropagation())},"onKeyUp":function(e){this.updateMaxLengthIndicator()},"getTitle":function(){return"Single-Line Text"},"getDescription":function(){return"Text field for single-line text."},"getSchemaOfSchema":function(){return t.merge(this.base(),{"properties":{"minLength":{"title":"Minimal Length","description":"Minimal length of the property value.","type":"number"},"maxLength":{"title":"Maximum Length","description":"Maximum length of the property value.","type":"number"},"pattern":{"title":"Pattern","description":"Regular expression for the property value.","type":"string"}}})},"getOptionsForSchema":function(){return t.merge(this.base(),{"fields":{"default":{"helper":"Field default value","type":"text"},"minLength":{"type":"integer"},"maxLength":{"type":"integer"},"pattern":{"type":"text"}}})},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"size":{"title":"Field Size","description":"Field size.","type":"number","default":40},"maskString":{"title":"Mask Expression","description":"Expression for the field mask. Field masking will be enabled if not empty.","type":"string"},"placeholder":{"title":"Field Placeholder","description":"Field placeholder.","type":"string"},"typeahead":{"title":"Type Ahead","description":"Provides configuration for the $.typeahead plugin if it is available.  For full configuration options, see: https://github.com/twitter/typeahead.js"},"allowOptionalEmpty":{"title":"Allow Optional Empty","description":"Allows this non-required field to validate when the value is empty"},"inputType":{"title":"HTML5 Input Type","description":"Allows for the override of the underlying HTML5 input type.  If not specified, an assumed value is provided based on the kind of input control (i.e. 'text', 'date', 'email' and so forth)","type":"string"},"data":{"title":"Data attributes for the underlying DOM input control","description":"Allows you to specify a key/value map of data attributes that will be added as DOM attribuets for the underlying input control.  The data attributes will be added as data-{name}='{value}'.","type":"object"},"autocomplete":{"title":"HTML autocomplete attribute for the underlying DOM input control","description":"Allows you to specify the autocomplete attribute for the underlying input control whether or not field should have autocomplete enabled.","type":"string"},"disallowEmptySpaces":{"title":"Disallow Empty Spaces","description":"Whether to disallow the entry of empty spaces in the text","type":"boolean","default":!1}}})},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{"size":{"type":"integer"},"maskString":{"helper":"a - an alpha character;9 - a numeric character;* - an alphanumeric character","type":"text"},"typeahead":{"type":"object"},"allowOptionalEmpty":{"type":"checkbox"},"inputType":{"type":"text"},"data":{"type":"object"}}})}}),t.registerMessages({"invalidPattern":lang.invalidPattern,"stringTooShort":lang.stringTooShort,"stringTooLong":lang.stringTooLong}),t.registerFieldClass("text",t.Fields.TextField),t.registerDefaultSchemaFieldMapping("string","text")}(jQuery),function(e){var t=e.alpaca;t.Fields.TextAreaField=t.Fields.TextField.extend({"getFieldType":function(){return"textarea"},"setup":function(){this.base(),this.options.rows||(this.options.rows=5),this.options.cols||(this.options.cols=40)},"handleValidate":function(){var e=this.base(),i=this.validation,n=this._validateWordCount();return i.wordLimitExceeded={"message":n?"":t.substituteTokens(this.getMessage("wordLimitExceeded"),[this.options.wordlimit]),"status":n},e&&i.wordLimitExceeded.status},"_validateWordCount":function(){if(this.options.wordlimit&&this.options.wordlimit>-1){var e=this.data;if(e){if(e.split(" ").length>this.options.wordlimit)return!1}}return!0},"getTitle":function(){return"Multi-Line Text"},"getDescription":function(){return"Textarea field for multiple line text."},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"rows":{"title":"Rows","description":"Number of rows","type":"number","default":5},"cols":{"title":"Columns","description":"Number of columns","type":"number","default":40},"wordlimit":{"title":"Word Limit","description":"Limits the number of words allowed in the text area.","type":"number","default":-1}}})},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{"rows":{"type":"integer"},"cols":{"type":"integer"},"wordlimit":{"type":"integer"}}})}}),t.registerMessages({"wordLimitExceeded":"The maximum word limit of {0} has been exceeded."}),t.registerFieldClass("textarea",t.Fields.TextAreaField)}(jQuery),function(e){var t=e.alpaca;t.Fields.CheckBoxField=t.ControlField.extend({"getFieldType":function(){return"checkbox"},"setup":function(){var i=this;i.base(),this.options.rightLabel||(this.options.rightLabel=""),void 0===i.options.multiple&&("array"===i.schema.type?i.options.multiple=!0:void 0!==i.schema.enum&&(i.options.multiple=!0)),i.checkboxOptions=[],i.options.multiple&&e.each(i.getEnum(),function(e,n){var l=n;i.options.optionLabels&&(t.isEmpty(i.options.optionLabels[e])?t.isEmpty(i.options.optionLabels[n])||(l=i.options.optionLabels[n]):l=i.options.optionLabels[e]),i.checkboxOptions.push({"value":n,"text":l})})},"getEnum":function(){var e=[];return this.schema&&this.schema.enum&&(e=this.schema.enum),e},"onClick":function(e){this.refreshValidationState()},"prepareControlModel":function(e){var t=this;this.base(function(i){i.checkboxOptions=t.checkboxOptions,e(i)})},"postRender":function(t){var i=this;this.base(function(){if(i.data&&void 0!==i.data&&i.setValue(i.data),i.getFieldEl()[0]&&(e(i.getFieldEl()[0].querySelectorAll("input")).on("change",function(e){i.triggerWithPropagation("change")}),e(i.getFieldEl()[0].querySelectorAll("checkbox")).on("change",function(e){i.triggerWithPropagation("change")})),i.options.multiple&&(e(i.getFieldEl()).find("input:checkbox").prop("checked",!1),i.data)){var n=i.data;if("string"==typeof i.data){n=i.data.split(",");for(var l=0;l<n.length;l++)n[l]=e.trim(n[l])}for(var a in n)e(i.getFieldEl()).find('input:checkbox[data-checkbox-value="'+n[a]+'"]').prop("checked",!0)}t()})},"getValue":function(){var i=this,n=null;if(i.options.multiple){for(var l=[],a=0;a<i.checkboxOptions.length;a++){var s=e(i.getFieldEl()).find("input[data-checkbox-index='"+a+"']");if(t.checked(s)){var o=e(s).attr("data-checkbox-value");l.push(o)}}"array"===i.schema.type?n=l:"string"===i.schema.type&&(n=l.join(","))}else{var r=e(i.getFieldEl()).find("input");n=r.length>0&&t.checked(e(r[0]))}return n},"setValue":function(i){var n=this,l=function(i){t.isString(i)&&(i="true"===i);var l=e(n.getFieldEl()).find("input");l.length>0&&t.checked(e(l[0]),i)},a=function(l){"string"==typeof l&&(l=l.split(","));for(var a=0;a<l.length;a++)l[a]=t.trim(l[a]);for(var s=0;s<l.length;s++){var o=e(n.getFieldEl()).find('input[data-checkbox-value="'+l[s]+'"]');o.length>0&&t.checked(e(o[0]),i)}},s=!1;n.options.multiple?"string"==typeof i?(a(i),s=!0):t.isArray(i)&&(a(i),s=!0):"boolean"==typeof i?(l(i),s=!0):"string"==typeof i&&(l(i),s=!0),!s&&i&&t.logError("CheckboxField cannot set value for schema.type="+n.schema.type+" and value="+i),this.base(i)},"_validateEnum":function(){var e=this;if(!e.options.multiple)return!0;var i=e.getValue();return!(e.isRequired()||!t.isValEmpty(i))||("string"==typeof i&&(i=i.split(",")),t.anyEquality(i,e.schema.enum))},"disable":function(){e(this.control).find("input").each(function(){e(this).disabled=!0})},"enable":function(){e(this.control).find("input").each(function(){e(this).disabled=!1})},"getType":function(){return"boolean"},"getTitle":function(){return"Checkbox Field"},"getDescription":function(){return"Checkbox Field for boolean (true/false), string ('true', 'false' or comma-delimited string of values) or data array."},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"rightLabel":{"title":"Option Label","description":"Optional right-hand side label for single checkbox field.","type":"string"},"multiple":{"title":"Multiple","description":"Whether to render multiple checkboxes for multi-valued type (such as an array or a comma-delimited string)","type":"boolean"}}})},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{"rightLabel":{"type":"text"},"multiple":{"type":"checkbox"}}})}}),t.registerFieldClass("checkbox",t.Fields.CheckBoxField),t.registerDefaultSchemaFieldMapping("boolean","checkbox")}(jQuery),function(e){var t=e.alpaca;t.Fields.FileField=t.Fields.TextField.extend({"getFieldType":function(){return"file"},"setValue":function(e){this.data=e,this.data=e,this.updateObservable(),this.triggerUpdate()},"getValue":function(){return this.data},"onChange":function(e){this.base(e),this.options.selectionHandler&&this.processSelectionHandler(e.target.files)},"processSelectionHandler":function(e){if(e&&e.length>0&&"undefined"!=typeof FileReader){var t=[],i=0,n=new FileReader;n.onload=function(){var n=this;return function(l){var a=l.target.result;t.push(a),++i===e.length&&n.options.selectionHandler.call(n,e,t)}}.call(this);for(var l=0;l<e.length;l++)n.readAsDataURL(e[l])}},"getTitle":function(){return"File Field"},"getDescription":function(){return"Field for uploading files."},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"selectionHandler":{"title":"Selection Handler","description":"Function that should be called when files are selected.  Requires HTML5.","type":"boolean","default":!1}}})},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{"selectionHandler":{"type":"checkbox"}}})}}),t.registerFieldClass("file",t.Fields.FileField)}(jQuery),function(e){var t=e.alpaca;t.Fields.ListField=t.ControlField.extend({"setup":function(){var i=this;i.base(),i.selectOptions=[],i.getEnum()&&e.each(i.getEnum(),function(e,n){var l=n;i.options.optionLabels&&(t.isEmpty(i.options.optionLabels[e])?t.isEmpty(i.options.optionLabels[n])||(l=i.options.optionLabels[n]):l=i.options.optionLabels[e]),i.selectOptions.push({"value":n,"text":l})}),i.isRequired()&&!i.data&&!0===i.options.removeDefaultNone&&i.schema.enum&&i.schema.enum.length>0&&(i.data=i.schema.enum[0])},"prepareControlModel":function(e){var t=this;this.base(function(i){i.noneLabel=t.getMessage("noneLabel"),void 0!==t.options.noneLabel&&(i.noneLabel=t.options.noneLabel),i.hideNone=t.isRequired(),void 0!==t.options.removeDefaultNone&&(i.hideNone=t.options.removeDefaultNone),e(i)})},"getEnum":function(){if(this.schema&&this.schema.enum)return this.schema.enum},"getValue":function(i){var n=this;return t.isArray(i)?e.each(i,function(t,l){e.each(n.selectOptions,function(e,n){n.value===l&&(i[t]=n.value)})}):e.each(this.selectOptions,function(e,t){t.value===i&&(i=t.value)}),i},"beforeRenderControl":function(i,n){var l=this;this.base(i,function(){if(l.options.dataSource){l.selectOptions=[];var a=function(){l.schema.enum=[],l.options.optionLabels=[];for(var e=0;e<l.selectOptions.length;e++)l.schema.enum.push(l.selectOptions[e].value),l.options.optionLabels.push(l.selectOptions[e].text);i.selectOptions=l.selectOptions,n()};if(t.isFunction(l.options.dataSource))l.options.dataSource.call(l,function(e){if(t.isArray(e)){for(var i=0;i<e.length;i++)"string"==typeof e[i]?l.selectOptions.push({"text":e[i],"value":e[i]}):t.isObject(e[i])&&l.selectOptions.push(e[i]);a()}else if(t.isObject(e)){for(var n in e)l.selectOptions.push({"text":n,"value":e[n]});a()}else a()});else if(t.isUri(l.options.dataSource))e.ajax({"url":l.options.dataSource,"type":"get","dataType":"json","success":function(i){var n=i;l.options.dsTransformer&&t.isFunction(l.options.dsTransformer)&&(n=l.options.dsTransformer(n)),n&&(t.isObject(n)?(e.each(n,function(e,t){l.selectOptions.push({"value":e,"text":t})}),a()):t.isArray(n)&&(e.each(n,function(e,t){l.selectOptions.push({"value":t.value,"text":t.text})}),a()))},"error":function(e,t,i){l.errorCallback({"message":"Unable to load data from uri : "+_this.options.dataSource,"stage":"DATASOURCE_LOADING_ERROR","details":{"jqXHR":e,"textStatus":t,"errorThrown":i}})}});else if(t.isArray(l.options.dataSource)){for(var s=0;s<l.options.dataSource.length;s++)"string"==typeof l.options.dataSource[s]?l.selectOptions.push({"text":l.options.dataSource[s],"value":l.options.dataSource[s]}):t.isObject(l.options.dataSource[s])&&l.selectOptions.push(l.options.dataSource[s]);a()}else n()}else n()})},"getSchemaOfSchema":function(){return t.merge(this.base(),{"properties":{"enum":{"title":"Enumeration","description":"List of field value options","type":"array","required":!0}}})},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"optionLabels":{"title":"Option Labels","description":"Labels for options. It can either be a map object or an array field that maps labels to items defined by enum schema property one by one.","type":"array"},"dataSource":{"title":"Option Datasource","description":"Datasource for generating list of options.  This can be a string or a function.  If a string, it is considered to be a URI to a service that produces a object containing key/value pairs or an array of elements of structure {'text': '', 'value': ''}.  This can also be a function that is called to produce the same list.","type":"string"},"removeDefaultNone":{"title":"Remove Default None","description":"If true, the default 'None' option will not be shown.","type":"boolean","default":!1},"noneLabel":{"title":"None Label","description":"The label to use for the 'None' option in a list (select, radio or otherwise).","type":"string","default":"None"},"hideNone":{"title":"Hide None","description":"Whether to hide the None option from a list (select, radio or otherwise).  This will be true if the field is required and false otherwise.","type":"boolean","default":!1}}})},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{"optionLabels":{"itemLabel":"Label","type":"array"},"dataSource":{"type":"text"},"removeDefaultNone":{"type":"checkbox","rightLabel":"Remove Default None"},"noneLabel":{"type":"text"},"hideNone":{"type":"checkbox","rightLabel":"Hide the 'None' option from the list"}}})}}),t.registerMessages({"noneLabel":lang.noneLabel})}(jQuery),function(e){var t=e.alpaca;t.Fields.RadioField=t.Fields.ListField.extend({"getFieldType":function(){return"radio"},"setup":function(){this.base(),this.options.name?this.name=this.options.name:this.name||(this.name=this.getId()+"-name"),t.isUndefined(this.options.emptySelectFirst)&&(this.options.emptySelectFirst=!1),t.isUndefined(this.options.vertical)&&(this.options.vertical=!0)},"getValue":function(){var t=this,i=null;return e(this.control).find(":checked").each(function(){i=e(this).val(),i=t.ensureProperType(i)}),i},"setValue":function(i){var n=this;e(this.control).find("input").each(function(){t.checked(e(this),null)}),void 0!==i&&t.checked(e(n.control).find('input[value="'+i+'"]'),"checked"),this.options.emptySelectFirst&&0===e(this.control).find("input:checked").length&&t.checked(e(n.control).find("input:radio").first(),"checked"),this.base(i)},"initControlEvents":function(){var t=this;t.base();var i=e(this.control).find("input");i.on("focus",function(e){t.suspendBlurFocus||(t.onFocus.call(t,e),t.trigger("focus",e))}),i.on("blur",function(e){t.suspendBlurFocus||(t.onBlur.call(t,e),t.trigger("blur",e))})},"prepareControlModel":function(e){var t=this;this.base(function(i){i.selectOptions=t.selectOptions,i.removeDefaultNone=t.options.removeDefaultNone,e(i)})},"afterRenderControl":function(i,n){var l=this;this.base(i,function(){l.options.emptySelectFirst&&l.selectOptions&&l.selectOptions.length>0&&(l.data=l.selectOptions[0].value,0===e("input:radio:checked",l.control).length&&t.checked(e(l.control).find('input:radio[value="'+l.data+'"]'),"checked")),l.options.vertical?e(l.control).css("display","block"):e(l.control).css("display","inline-block"),n()})},"onClick":function(t){this.base(t);var i=this,n=e(t.currentTarget).find("input").val();void 0!==n&&(i.setValue(n),i.refreshValidationState())},"getTitle":function(){return"Radio Group Field"},"getDescription":function(){return"Radio Group Field with list of options."},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"name":{"title":"Field name","description":"Field name.","type":"string"},"emptySelectFirst":{"title":"Empty Select First","description":"If the data is empty, then automatically select the first item in the list.","type":"boolean","default":!1},"vertical":{"title":"Position the radio selector items vertically","description":"By default, radio controls are stacked vertically.  Set to false if you'd like radio controls to lay out horizontally.","type":"boolean","default":!0}}})}}),t.registerFieldClass("radio",t.Fields.RadioField)}(jQuery),function(e){var t=e.alpaca;t.Fields.SelectField=t.Fields.ListField.extend({"getFieldType":function(){return"select"},"setup":function(){this.base()},"getValue":function(){if(this.control&&this.control.length>0){var e=this._getControlVal(!0);return void 0===e&&(e=this.data),this.base(e)}},"setValue":function(e){t.isArray(e)?t.compareArrayContent(e,this.getValue())||(!t.isEmpty(e)&&this.control&&this.control.val(e),this.base(e)):e!==this.getValue()&&(this.control&&void 0!==e&&null!=e&&this.control.val(e),this.base(e))},"getEnum":function(){if(this.schema){if(this.schema.enum)return this.schema.enum;if(this.schema.type&&"array"===this.schema.type&&this.schema.items&&this.schema.items.enum)return this.schema.items.enum}},"initControlEvents":function(){var e=this;if(e.base(),e.options.multiple){var t=this.control.parent().find("button.multiselect");t.on("focus",function(t){e.suspendBlurFocus||(e.onFocus.call(e,t),e.trigger("focus",t))}),t.on("blur",function(t){e.suspendBlurFocus||(e.onBlur.call(e,t),e.trigger("blur",t))})}},"beforeRenderControl":function(e,t){var i=this;this.base(e,function(){i.schema.type&&"array"===i.schema.type&&(i.options.multiple=!0),t()})},"prepareControlModel":function(e){var t=this;this.base(function(i){i.selectOptions=t.selectOptions,e(i)})},"afterRenderControl":function(i,n){var l=this;this.base(i,function(){if(t.isUndefined(l.data)&&l.options.emptySelectFirst&&l.selectOptions&&l.selectOptions.length>0&&(l.data=l.selectOptions[0].value),l.data&&l.setValue(l.data),l.options.multiple&&e.fn.multiselect){var i=null;i=l.options.multiselect?l.options.multiselect:{},i.nonSelectedText||(i.nonSelectedText="None",l.options.noneLabel&&(i.nonSelectedText=l.options.noneLabel)),l.options.hideNone&&delete i.nonSelectedText,e(l.getControlEl()).multiselect(i)}n()})},"_validateEnum":function(){var i=this;if(this.schema.enum){var n=this.data;if(!this.isRequired()&&t.isValEmpty(n))return!0;if(this.options.multiple){var l=!0;return n||(n=[]),t.isArray(n)||t.isObject(n)||(n=[n]),e.each(n,function(t,n){if(e.inArray(n,i.schema.enum)<=-1)return l=!1,!1}),l}return e.inArray(n,this.schema.enum)>-1}return!0},"onChange":function(e){this.base(e);var i=this;t.later(25,this,function(){var e=i.getValue();i.setValue(e),i.refreshValidationState()})},"_validateMinItems":function(){return!(this.schema.items&&this.schema.items.minItems&&e(":selected",this.control).length<this.schema.items.minItems)},"_validateMaxItems":function(){
return!(this.schema.items&&this.schema.items.maxItems&&e(":selected",this.control).length>this.schema.items.maxItems)},"handleValidate":function(){var e=this.base(),i=this.validation,n=this._validateMaxItems();return i.tooManyItems={"message":n?"":t.substituteTokens(this.getMessage("tooManyItems"),[this.schema.items.maxItems]),"status":n},n=this._validateMinItems(),i.notEnoughItems={"message":n?"":t.substituteTokens(this.getMessage("notEnoughItems"),[this.schema.items.minItems]),"status":n},e&&i.tooManyItems.status&&i.notEnoughItems.status},"getTitle":function(){return"Select Field"},"getDescription":function(){return"Select Field"},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"multiple":{"title":"Mulitple Selection","description":"Allow multiple selection if true.","type":"boolean","default":!1},"size":{"title":"Displayed Options","description":"Number of options to be shown.","type":"number"},"emptySelectFirst":{"title":"Empty Select First","description":"If the data is empty, then automatically select the first item in the list.","type":"boolean","default":!1},"multiselect":{"title":"Multiselect Plugin Settings","description":"Multiselect plugin properties - http://davidstutz.github.io/bootstrap-multiselect","type":"any"}}})},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{"multiple":{"rightLabel":"Allow multiple selection ?","helper":"Allow multiple selection if checked","type":"checkbox"},"size":{"type":"integer"},"emptySelectFirst":{"type":"checkbox","rightLabel":"Empty Select First"},"multiselect":{"type":"object","rightLabel":"Multiselect plugin properties - http://davidstutz.github.io/bootstrap-multiselect"}}})}}),t.registerFieldClass("select",t.Fields.SelectField)}(jQuery),function(e){var t=e.alpaca;t.Fields.NumberField=t.Fields.TextField.extend({"setup":function(){this.base()},"getFieldType":function(){return"number"},"getValue":function(){var e=this._getControlVal(!0);return void 0===e||""==e?e:parseFloat(e)},"handleValidate":function(){var e=this.base(),i=this.validation,n=this._validateNumber();return i.stringNotANumber={"message":n?"":this.getMessage("stringNotANumber"),"status":n},n=this._validateDivisibleBy(),i.stringDivisibleBy={"message":n?"":t.substituteTokens(this.getMessage("stringDivisibleBy"),[this.schema.divisibleBy]),"status":n},n=this._validateMaximum(),i.stringValueTooLarge={"message":"","status":n},n||(this.schema.exclusiveMaximum?i.stringValueTooLarge.message=t.substituteTokens(this.getMessage("stringValueTooLargeExclusive"),[this.schema.maximum]):i.stringValueTooLarge.message=t.substituteTokens(this.getMessage("stringValueTooLarge"),[this.schema.maximum])),n=this._validateMinimum(),i.stringValueTooSmall={"message":"","status":n},n||(this.schema.exclusiveMinimum?i.stringValueTooSmall.message=t.substituteTokens(this.getMessage("stringValueTooSmallExclusive"),[this.schema.minimum]):i.stringValueTooSmall.message=t.substituteTokens(this.getMessage("stringValueTooSmall"),[this.schema.minimum])),n=this._validateMultipleOf(),i.stringValueNotMultipleOf={"message":"","status":n},n||(i.stringValueNotMultipleOf.message=t.substituteTokens(this.getMessage("stringValueNotMultipleOf"),[this.schema.multipleOf])),e&&i.stringNotANumber.status&&i.stringDivisibleBy.status&&i.stringValueTooLarge.status&&i.stringValueTooSmall.status&&i.stringValueNotMultipleOf.status},"_validateNumber":function(){var e=this._getControlVal();if("number"==typeof e&&(e=""+e),t.isValEmpty(e))return!0;if(!t.testRegex(t.regexps.number,e))return!1;var i=this.getValue();return!isNaN(i)},"_validateDivisibleBy":function(){var e=this.getValue();return!(!t.isEmpty(this.schema.divisibleBy)&&e%this.schema.divisibleBy!=0)},"_validateMaximum":function(){var e=this.getValue();if(!t.isEmpty(this.schema.maximum)){if(e>this.schema.maximum)return!1;if(!t.isEmpty(this.schema.exclusiveMaximum)&&e==this.schema.maximum&&this.schema.exclusiveMaximum)return!1}return!0},"_validateMinimum":function(){var e=this.getValue();if(!t.isEmpty(this.schema.minimum)){if(e<this.schema.minimum)return!1;if(!t.isEmpty(this.schema.exclusiveMinimum)&&e==this.schema.minimum&&this.schema.exclusiveMinimum)return!1}return!0},"_validateMultipleOf":function(){var e=this.getValue();return!(!t.isEmpty(this.schema.multipleOf)&&e&&0!==this.schema.multipleOf)},"getType":function(){return"number"},"getSchemaOfSchema":function(){return t.merge(this.base(),{"properties":{"multipleOf":{"title":"Multiple Of","description":"Property value must be a multiple of the multipleOf schema property such that division by this value yields an interger (mod zero).","type":"number"},"minimum":{"title":"Minimum","description":"Minimum value of the property.","type":"number"},"maximum":{"title":"Maximum","description":"Maximum value of the property.","type":"number"},"exclusiveMinimum":{"title":"Exclusive Minimum","description":"Property value can not equal the number defined by the minimum schema property.","type":"boolean","default":!1},"exclusiveMaximum":{"title":"Exclusive Maximum","description":"Property value can not equal the number defined by the maximum schema property.","type":"boolean","default":!1}}})},"getOptionsForSchema":function(){return t.merge(this.base(),{"fields":{"multipleOf":{"title":"Multiple Of","description":"The value must be a integral multiple of the property","type":"number"},"minimum":{"title":"Minimum","description":"Minimum value of the property","type":"number"},"maximum":{"title":"Maximum","description":"Maximum value of the property","type":"number"},"exclusiveMinimum":{"rightLabel":"Exclusive minimum ?","helper":"Field value must be greater than but not equal to this number if checked","type":"checkbox"},"exclusiveMaximum":{"rightLabel":"Exclusive Maximum ?","helper":"Field value must be less than but not equal to this number if checked","type":"checkbox"}}})},"getTitle":function(){return"Number Field"},"getDescription":function(){return"Field for float numbers."}}),t.registerMessages({"stringValueTooSmall":lang.stringValueTooSmallExclusive,"stringValueTooLarge":lang.stringValueTooLarge,"stringValueTooSmallExclusive":lang.stringValueTooSmallExclusive,"stringValueTooLargeExclusive":lang.stringValueTooLargeExclusive,"stringDivisibleBy":lang.stringDivisibleBy,"stringNotANumber":lang.stringNotANumber,"stringValueNotMultipleOf":lang.stringValueNotMultipleOf}),t.registerFieldClass("number",t.Fields.NumberField),t.registerDefaultSchemaFieldMapping("number","number")}(jQuery),function(e){var t=e.alpaca;t.Fields.ArrayField=t.ContainerField.extend({"getFieldType":function(){return"array"},"setup":function(){var i=this;this.base();var n=i.resolveContainerItemTemplateType();if(!n)return t.throwErrorWithCallback("Unable to find template descriptor for container item: "+i.getFieldType());this.containerItemTemplateDescriptor=i.view.getTemplateDescriptor("container-"+n+"-item",i),this.options.toolbarStyle||(this.options.toolbarStyle=t.isEmpty(this.view.toolbarStyle)?"button":this.view.toolbarStyle),this.options.toolbarStyle||(this.options.toolbarStyle="button"),this.options.actionbarStyle||(this.options.actionbarStyle=t.isEmpty(this.view.actionbarStyle)?"top":this.view.actionbarStyle),this.options.actionbarStyle||(this.options.actionbarStyle="top"),this.schema.items&&(this.schema.items.maxItems&&(this.schema.maxItems=this.schema.items.maxItems,delete this.schema.items.maxItems),this.schema.items.minItems&&(this.schema.minItems=this.schema.items.minItems,delete this.schema.items.minItems),this.schema.items.uniqueItems&&(this.schema.uniqueItems=this.schema.items.uniqueItems,delete this.schema.items.uniqueItems)),this.options.rubyrails=!1,this.parent&&this.parent.options&&this.parent.options.form&&this.parent.options.form.attributes&&(t.isEmpty(this.parent.options.form.attributes.rubyrails)||(this.options.rubyrails=!0)),this.options.items||(this.options.items={});var l=void 0;if(t.isEmpty(this.view.toolbarSticky)||(l=this.view.toolbarSticky),t.isEmpty(this.options.toolbarSticky)||(l=this.options.toolbarSticky),this.options.toolbarSticky=l,this.schema.items&&this.schema.uniqueItems&&t.mergeObject(this.options,{"forceRevalidation":!0}),void 0===this.data&&(this.data=[]),null==this.data&&(this.data=[]),""===this.data&&(this.data=[]),t.isString(this.data))try{var a=t.parseJSON(this.data);if(!t.isArray(a)&&!t.isObject(a))return void t.logWarn("ArrayField parsed string data but it was not an array: "+this.data);this.data=a}catch(e){this.data=[this.data]}if(!t.isArray(this.data)&&!t.isObject(this.data))return void t.logWarn("ArrayField data is not an array: "+JSON.stringify(this.data,null,"  "));var s=function(e,t,n){var l=i.findAction(e,t);l||(l={"core":!0},e.push(l));for(var a in n)l[a]||(l[a]=n[a])},o=function(e,t){var i=0;do{void 0===e[i].enabled&&(e[i].enabled=!0),t||delete e[i].label,e[i].enabled?i++:e.splice(i,1)}while(i<e.length);e.sort(function(e,t){return e.core&&!t.core?-1:!e.core&&t.core?1:0})};if(i.toolbar={},i.options.toolbar)for(var r in i.options.toolbar)i.toolbar[r]=i.options.toolbar[r];if(void 0===i.toolbar.showLabels&&(i.toolbar.showLabels=!0),i.toolbar.actions||(i.toolbar.actions=[]),s(i.toolbar.actions,"add",{"label":i.getMessage("addItemButtonLabel"),"action":"add","iconClass":i.view.getStyle("addIcon"),"click":function(e,n){i.resolveItemSchemaOptions(function(e,n,l){if(l)return t.throwErrorWithCallback("Circular reference detected for schema: "+JSON.stringify(e),i.errorCallback);var a=t.createEmptyDataInstance(e);i.addItem(0,e,n,a,function(){})})}}),o(i.toolbar.actions,i.toolbar.showLabels),i.actionbar={},i.options.actionbar)for(var c in i.options.actionbar)i.actionbar[c]=i.options.actionbar[c];void 0===i.actionbar.showLabels&&(i.actionbar.showLabels=!1),i.actionbar.actions||(i.actionbar.actions=[]),s(i.actionbar.actions,"add",{"label":i.getMessage("addButtonLabel"),"action":"add","iconClass":i.view.getStyle("addIcon"),"click":function(e,n,l){i=this,i.resolveItemSchemaOptions(function(e,n,a){if(a)return t.throwErrorWithCallback("Circular reference detected for schema: "+JSON.stringify(e),i.errorCallback);var s=t.createEmptyDataInstance(e);i.addItem(l+1,e,n,s,function(){})})}}),s(i.actionbar.actions,"remove",{"label":i.getMessage("removeButtonLabel"),"action":"remove","iconClass":i.view.getStyle("removeIcon"),"click":function(e,t,n){i=this,i.removeItem(n,function(){})}}),s(i.actionbar.actions,"up",{"label":i.getMessage("upButtonLabel"),"action":"up","iconClass":i.view.getStyle("upIcon"),"click":function(e,t,n){i.moveItem(n,n-1,i.options.animate,function(){})}}),s(i.actionbar.actions,"down",{"label":i.getMessage("downButtonLabel"),"action":"down","iconClass":i.view.getStyle("downIcon"),"click":function(e,t,n){i.moveItem(n,n+1,i.options.animate,function(){})}}),o(i.actionbar.actions,i.actionbar.showLabels);var d=this.data.length,u=e.extend(!0,{},this.data);u.length=d,this.data=Array.prototype.slice.call(u)},"setValue":function(e){var i=this;if(e&&t.isArray(e)){var n=0;do{if(n<i.children.length){var l=i.children[n];e.length>n?(l.setValue(e[n]),n++):i.removeItem(n)}}while(n<i.children.length);n<e.length&&i.resolveItemSchemaOptions(function(l,a,s){if(l||t.logDebug("Unable to resolve schema for item: "+n),s)return t.throwErrorWithCallback("Circular reference detected for schema: "+JSON.stringify(l),i.errorCallback);for(var o=[];n<e.length;){var r=function(e,n){return function(s){i.addItem(e,l,a,n[e],function(){t.nextTick(function(){s()})})}}(n,e[n]);o.push(r),n++}t.series(o,function(){})})}},"getValue":function(){var e=this.view.field.schema.items.minItems&&0!==this.view.field.schema.items.minItems?0:this.view.field.schema.items.minItems-1;if(this.children.length!==e||this.isRequired()){for(var t=[],i=0;i<this.children.length;i++){var n=this.children[i].getValue();void 0!==n&&t.push(n)}return t}},"createItems":function(e){var i=this,n=[];i.data&&i.data.length>0?i.resolveItemSchemaOptions(function(l,a,s){if(s)return t.throwErrorWithCallback("Circular reference detected for schema: "+JSON.stringify(l),i.errorCallback);for(var o=[],r=0;r<i.data.length;r++){var c=i.data[r],d=function(e,s){return function(o){i.createItem(e,l,a,s,function(e){n.push(e),t.nextTick(function(){o()})})}}(r,c);o.push(d)}t.series(o,function(t){e(n)})}):e(n)},"createItem":function(i,n,l,a,s){var o=this;if(o._validateEqualMaxItems()){e("<div></div>").alpaca({"data":a,"options":l,"schema":n,"view":this.view.id?this.view.id:this.view,"connector":this.connector,"error":function(e){o.destroy(),o.errorCallback.call(o,e)},"notTopLevel":!0,"render":function(e,t){e.parent=o,e.path=o.path+"["+i+"]",e.render(null,function(){o.refreshValidationState(),o.updatePathAndName(),o.triggerUpdate(),t&&t()})},"postRender":function(i){var n=t.tmpl(o.containerItemTemplateDescriptor,{"id":o.getId(),"name":i.name,"parentFieldId":o.getId(),"actionbarStyle":o.options.actionbarStyle,"view":o.view,"data":a}),l=e(findElementFromCollection(n,"."+t.MARKER_CLASS_CONTAINER_FIELD_ITEM_FIELD));if(0===l.length&&e(n).hasClass(t.MARKER_CLASS_CONTAINER_FIELD_ITEM_FIELD)&&(l=e(n)),0===l.length)return void o.errorCallback.call(o,{"message":"Cannot find insertion point for field: "+o.getId()});e(l).before(i.getFieldEl()),e(l).remove(),i.containerItemEl=n,t.fieldApplyFieldAndChildren(i,function(e){e.hideInitValidationError=!1}),t.isFunction(o.options.items.postRender)&&o.options.items.postRender.call(i,l),s&&s(i)}})}},"resolveItemSchemaOptions":function(e){var i,n=this,l=function(t,i,l){n.options.readonly&&(i.readonly=!0),e(t,i,l)};!i&&n.options&&n.options.fields&&n.options.fields.item&&(i=n.options.fields.item),!i&&n.options&&n.options.items&&(i=n.options.items);var a;if(n.schema&&n.schema.items&&(a=n.schema.items),a&&a.$ref){for(var s=a.$ref,o=this,r=[o];o.parent;)o=o.parent,r.push(o);var c=a,d=i;t.loadRefSchemaOptions(o,s,function(e,i){for(var n=0,a=0;a<r.length;a++)r[a].schema&&(r[a].schema.id===s||r[a].schema.id==="#"+s?n++:r[a].schema.$ref===s&&n++);var o=n>10,u={};c&&t.mergeObject(u,c),e&&t.mergeObject(u,e),delete u.id;var p={};d&&t.mergeObject(p,d),i&&t.mergeObject(p,i),t.nextTick(function(){l(u,p,o)})})}else t.nextTick(function(){l(a,i)})},"handleValidate":function(){var e=this.base(),i=this.validation,n=this._validateUniqueItems();return i.valueNotUnique={"message":n?"":this.getMessage("valueNotUnique"),"status":n},n=this._validateMaxItems(),i.tooManyItems={"message":n?"":t.substituteTokens(this.getMessage("tooManyItems"),[this.schema.maxItems]),"status":n},n=this._validateMinItems(),i.notEnoughItems={"message":n?"":t.substituteTokens(this.getMessage("notEnoughItems"),[this.schema.minItems]),"status":n},e&&i.valueNotUnique.status&&i.tooManyItems.status&&i.notEnoughItems.status},"_validateEqualMaxItems":function(){return!(this.schema.maxItems&&this.schema.maxItems>=0&&this.getSize()>=this.schema.maxItems)},"_validateEqualMinItems":function(){return!(this.schema.minItems&&this.schema.minItems>=0&&this.getSize()<=this.schema.minItems)},"_validateMinItems":function(){return!(this.schema.minItems&&this.schema.minItems>=0&&1!==this.getSize()&&this.getSize()<this.schema.minItems)},"_validateMaxItems":function(){return!(this.schema.maxItems&&this.schema.maxItems>=0&&this.getSize()>this.schema.maxItems)},"_validateUniqueItems":function(){if(this.schema.items&&this.schema.uniqueItems)for(var e={},t=0,i=this.children.length;t<i;++t){if(e.hasOwnProperty(this.children[t]))return!1;e[this.children[t]]=!0}return!0},"findAction":function(t,i){var n=null;return e.each(t,function(e,t){t.action==i&&(n=t)}),n},"postRender":function(e){var t=this;this.base(function(){t.updateToolbars(),e()})},"getSize":function(){return this.children.length},"updatePathAndName":function(){var i=function(n){n.children&&e.each(n.children,function(l,a){n.prePath&&t.startsWith(a.path,n.prePath)&&(a.prePath=a.path,a.path=a.path.replace(n.prePath,n.path)),n.preName&&t.startsWith(a.name,n.preName)&&(a.preName=a.name,a.name=a.name.replace(n.preName,n.name),a.field&&e(a.field).attr("data-name",a.name)),i(a)})};this.children&&this.children.length>0&&e.each(this.children,function(t,n){var l=n.path.lastIndexOf("/"),a=n.path.substring(l+1);a.indexOf("[")<0&&a.indexOf("]")<0&&(a=a.substring(a.indexOf("[")+1,a.indexOf("]"))),a!==t&&(n.prePath=n.path,n.path=n.path.substring(0,l)+"/["+t+"]"),n.nameCalculated&&(n.preName=n.name,n.parent&&n.parent.name&&n.path?n.name=n.parent.name+"_"+t:n.path&&(n.name=n.path.replace(/\//g,"").replace(/\[/g,"_").replace(/\]/g,"")),this.parent.options.rubyrails?e(n.field).attr("data-name",n.parent.name):e(n.field).attr("data-name",n.name)),n.prePath||(n.prePath=n.path),i(n)})},"updateToolbars":function(){var t=this;if("display"!==this.view.type&&!this.schema.readonly){t.toolbar&&(t.fireCallback("arrayToolbar",!0),t.fireCallback("arrayToolbar")),t.actionbar&&(t.fireCallback("arrayActionbars",!0),t.fireCallback("arrayActionbars"));var i=e(this.getFieldEl()).find(".alpaca-array-toolbar[data-alpaca-array-toolbar-field-id='"+t.getId()+"']");if(this.children.length>0?e(i).addClass("binf-hidden"):(e(i).removeClass("binf-hidden"),e(findElementFromCollection(i,"[data-alpaca-array-toolbar-action]")).each(function(){var i=e(this),n=i.attr("data-alpaca-array-toolbar-action"),l=t.findAction(t.toolbar.actions,n);l&&i.off().on("click",function(e){e.preventDefault(),l.click.call(t,n,l)})})),void 0===this.options.toolbarSticky){var n=this.getFieldEl().find(".alpaca-container-item");e(n).each(function(i){var n=e(t.getFieldEl()).find(".alpaca-array-actionbar[data-alpaca-array-actionbar-parent-field-id='"+t.getId()+"'][data-alpaca-array-actionbar-item-index='"+i+"']");n&&n.length>0&&(e(this).hover(function(){e(n).removeClass("binf-hidden")},function(){e(n).addClass("binf-hidden")}),e(n).addClass("binf-hidden"))})}else this.options.toolbarSticky?e(t.getFieldEl()).find(".alpaca-array-actionbar[data-alpaca-array-actionbar-parent-field-id='"+t.getId()+"']").removeClass("binf-hidden"):this.options.toolbarSticky||e(t.getFieldEl()).find(".alpaca-array-actionbar[data-alpaca-array-actionbar-parent-field-id='"+t.getId()+"']").addClass("binf-hidden");var l=e(t.getFieldEl()).find(".alpaca-array-actionbar[data-alpaca-array-actionbar-parent-field-id='"+t.getId()+"']");e(l).each(function(){var i=e(this).attr("data-alpaca-array-actionbar-item-index");"string"==typeof i&&(i=parseInt(i,10)),e(this.querySelectorAll("[data-alpaca-array-actionbar-action]")).each(function(){var n=e(this),l=n.attr("data-alpaca-array-actionbar-action"),a=t.findAction(t.actionbar.actions,l);a&&n.off().on("click",function(e){e.preventDefault(),a.click.call(t,l,a,i)})}),t._validateEqualMaxItems()?e(this.querySelectorAll("[data-alpaca-array-actionbar-action='add']")).each(function(i){e(this).removeClass("alpaca-button-disabled"),t.fireCallback("enableButton",this)}):e(this.querySelectorAll("[data-alpaca-array-actionbar-action='add']")).each(function(i){e(this).addClass("alpaca-button-disabled"),t.fireCallback("disableButton",this)}),t._validateEqualMinItems()?e(this.querySelectorAll("[data-alpaca-array-actionbar-action='remove']")).each(function(i){e(this).removeClass("alpaca-button-disabled"),t.fireCallback("enableButton",this)}):e(this.querySelectorAll("[data-alpaca-array-actionbar-action='remove']")).each(function(i){e(this).addClass("alpaca-button-disabled"),t.fireCallback("disableButton",this)})}),e(l).first().find("[data-alpaca-array-actionbar-action='up']").each(function(){e(this).addClass("alpaca-button-disabled"),t.fireCallback("disableButton",this)}),e(l).last().find("[data-alpaca-array-actionbar-action='down']").each(function(){e(this).addClass("alpaca-button-disabled"),t.fireCallback("disableButton",this)})}},"doResolveItemContainer":function(){return e(this.container)},"doAddItem":function(t,i){var n=this,l=n.doResolveItemContainer();if(0===t)e(l).append(i.containerItemEl);else{var a=l.children("[data-alpaca-container-item-index='"+(t-1)+"']");a&&a.length>0&&a.after(i.containerItemEl)}n.doAfterAddItem(i)},"doAfterAddItem":function(e){},"addItem":function(e,t,i,n,l){var a=this;a._validateEqualMaxItems()&&a.createItem(e,t,i,n,function(t){a.registerChild(t,e),a.doAddItem(e,t),a.updateChildDOMElements(),a.updateToolbars(),a.refreshValidationState(),a.triggerUpdate(),l&&l()})},"doRemoveItem":function(e){this.doResolveItemContainer().children(".alpaca-container-item[data-alpaca-container-item-index='"+e+"']").remove()},"removeItem":function(e,t){var i=this;this._validateEqualMinItems()&&(i.unregisterChild(e),i.doRemoveItem(e),i.updateChildDOMElements(),i.updateToolbars(),i.refreshValidationState(),i.triggerUpdate(),t&&t())},"moveItem":function(i,n,l,a){var s=this;if("function"==typeof l&&(a=l,l=s.options.animate),void 0===l&&(l=!s.options.animate||s.options.animate),"string"==typeof i&&(i=parseInt(i,10)),"string"==typeof n&&(n=parseInt(n,10)),n<0&&(n=0),n>=s.children.length&&(n=s.children.length-1),-1!==n&&i!==n){if(s.children[n]){var o=s.getId(),r=s.getContainerEl().find(".alpaca-container-item[data-alpaca-container-item-index='"+i+"'][data-alpaca-container-item-parent-field-id='"+o+"']"),c=s.getContainerEl().find(".alpaca-container-item[data-alpaca-container-item-index='"+n+"'][data-alpaca-container-item-parent-field-id='"+o+"']"),d=e("<div class='tempMarker1'></div>");r.before(d);var u=e("<div class='tempMarker2'></div>");c.before(u);var p=function(){for(var t=[],l=0;l<s.children.length;l++)t[l]=l===i?s.children[n]:l===n?s.children[i]:s.children[l];s.children=t,d.replaceWith(c),u.replaceWith(r),s.updateChildDOMElements(),e(r).find(".alpaca-container-item[data-alpaca-array-actionbar-item-index='"+i+"']").attr("data-alpaca-array-actionbar-item-index",n),e(c).find(".alpaca-container-item[data-alpaca-array-actionbar-item-index='"+n+"']").attr("data-alpaca-array-actionbar-item-index",i),s.updateToolbars(),s.refreshValidationState(),s.triggerUpdate(),a&&a()},h=0;l&&(h=500),t.animatedSwap(r,c,h,function(){p()})}}},"getType":function(){return"array"},"getTitle":function(){return"Array Field"},"getDescription":function(){return"Field for list of items with same data type or structure."},"getSchemaOfSchema":function(){var e={"properties":{"items":{"title":"Array Items","description":"Schema for array items.","type":"object"},"minItems":{"title":"Minimum Items","description":"Minimum number of items.","type":"number"},"maxItems":{"title":"Maximum Items","description":"Maximum number of items.","type":"number"},"uniqueItems":{"title":"Items Unique","description":"Item values should be unique if true.","type":"boolean","default":!1}}};return this.children&&this.children[0]&&t.merge(e.properties.items.properties,this.children[0].getSchemaOfSchema()),t.merge(this.base(),e)},"getOptionsForSchema":function(){return t.merge(this.base(),{"fields":{"items":{"type":"object"},"minItems":{"type":"integer"},"maxItems":{"type":"integer"},"uniqueItems":{"type":"checkbox"}}})},"getSchemaOfOptions":function(){var e={"properties":{"toolbarSticky":{"title":"Sticky Toolbar","description":"If true, the array item toolbar will always be enabled.  If false, the toolbar is always disabled.  If undefined or null, the toolbar will appear when hovered over.","type":"boolean","default":void 0},"toolbarStyle":{"title":"Toolbar Style","description":"The kind of top-level toolbar to render for the array field.  Either 'button' or 'link'.","type":"string","default":"button"},"actionbarStyle":{"title":"Actionbar Style","description":"The kind of actionbar to render for each item in the array.  Either 'top', 'bottom', 'left', or 'right'.","type":"string","default":"top"},"toolbar":{"type":"object","title":"Toolbar Configuration","properties":{"showLabels":{"type":"boolean","default":!0,"title":"Whether to show labels next to actions"},"actions":{"type":"array","title":"Toolbar Actions Configuration","items":{"action":{"type":"string","title":"Action Key"},"label":{"type":"string","title":"Action Label"},"iconClass":{"type":"string","title":"Action CSS Classes for Icon"},"click":{"type":"function","title":"Action Click Handler"},"enabled":{"type":"boolean","title":"Whether to enable the action","default":!0}}}}},"actionbar":{"type":"object","properties":{"showLabels":{"type":"boolean","default":!1,"title":"Whether to show labels next to actions"},"actions":{"type":"array","title":"Actions Bar Actions Configuration","items":{"action":{"type":"string","title":"Action Key"},"label":{"type":"string","title":"Action Label"},"iconClass":{"type":"string","title":"Action CSS Classes for Icon"},"click":{"type":"function","title":"Action Click Handler"},"enabled":{"type":"boolean","title":"Whether to enable the action","default":!0}}}}}}};return this.children&&this.children[0]&&t.merge(e.properties.items.properties,this.children[0].getSchemaOfSchema()),t.merge(this.base(),e)},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{"toolbarSticky":{"type":"checkbox"},"items":{"type":"object","fields":{}}}})}}),t.registerMessages({"notEnoughItems":lang.notEnoughItems,"tooManyItems":lang.tooManyItems,"valueNotUnique":lang.valueNotUnique,"notAnArray":lang.notAnArray}),t.registerFieldClass("array",t.Fields.ArrayField),t.registerDefaultSchemaFieldMapping("array","array"),t.registerMessages({"addItemButtonLabel":lang.addItemButtonLabel,"addButtonLabel":lang.addButtonLabel,"removeButtonLabel":lang.removeButtonLabel,"upButtonLabel":lang.upButtonLabel,"downButtonLabel":lang.downButtonLabel})}(jQuery),function(e){var t=e.alpaca;t.Fields.ObjectField=t.ContainerField.extend({"getFieldType":function(){return"object"},"setup":function(){var e=this;this.base();var i=e.resolveContainerItemTemplateType();if(!i){e.resolveContainerItemTemplateType();return t.throwErrorWithCallback("Unable to find template descriptor for container item: "+e.getFieldType())}if(this.containerItemTemplateDescriptor=e.view.getTemplateDescriptor("container-"+i+"-item",e),!t.isEmpty(this.data)&&""!==this.data&&!t.isObject(this.data)){if(!t.isString(this.data))return;try{if(this.data=t.parseJSON(this.data),!t.isObject(this.data))return void t.logWarn("ObjectField parsed data but it was not an object: "+JSON.stringify(this.data))}catch(e){return}}},"setValue":function(e){if(e||(e={}),t.isObject(e)){var i={};for(var n in this.childrenById){var l=this.childrenById[n].propertyId;i[l]=this.childrenById[n]}var a={};for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);for(var l in a){var o=i[l];o&&(o.setValue(a[l]),delete i[l],delete a[l])}for(var l in i){var o=i[l];o.setValue(null)}}},"getValue":function(){if(0===this.children.length&&!this.isRequired())return{};for(var e={},i=0;i<this.children.length;i++){var n=this.children[i].propertyId,l=this.children[i].getValue();if(void 0!==l&&this.determineAllDependenciesValid(n)){var a=null;"boolean"==typeof l?a=!!l:t.isArray(l)||t.isObject(l)||t.isNumber(l)?a=l:l&&(a=l),null!==a&&(e[n]=a)}}return e},"afterRenderContainer":function(e,i){var n=this;this.base(e,function(){if(n.isTopLevel()&&n.view){n.wizardConfigs=n.view.getWizard(),void 0!==n.wizardConfigs&&(n.wizardConfigs&&!0!==n.wizardConfigs||(n.wizardConfigs={}));var e=n.view.getLayout().templateDescriptor;n.wizardConfigs&&t.isObject(n.wizardConfigs)&&(!e||n.wizardConfigs.bindings?n.autoWizard():n.wizard())}i()})},"createItems":function(e){var i=this,n=[],l={};for(var a in i.data)l[a]=a;var s=i.data;i.schema&&i.schema.properties&&(s=i.schema.properties);var o=function(){var i=[];for(var a in l)i.push(a);i.length>0&&t.logDebug("There were "+i.length+" extra data keys that were not part of the schema "+JSON.stringify(i)),e(n)},r=[];for(var c in s){var d=null;i.data&&(d=i.data[c]);var u=function(e,l,a){return function(s){i.resolvePropertySchemaOptions(e,function(o,r,c){if(c)return t.throwErrorWithCallback("Circular reference detected for schema: "+JSON.stringify(o),_this.errorCallback);o||t.logDebug("Unable to resolve schema for property: "+e),i.createItem(e,o,r,l,null,function(i){r.hasOwnProperty("order")?(order=parseInt(r.order,10),order===order?n.splice(order,0,i):n.push(i)):n.push(i),delete a[e],t.nextTick(function(){s()})})})}}(c,d,l);r.push(u)}t.series(r,function(e){for(var t=!1,i=n.length,l=0;l<i;l++)if(void 0!==n[l].options.order){t=!0;break}t&&n.sort(function(e,t){return(e.options.order?e.options.order:0)-(t.options.order?t.options.order:0)}),o()})},"createItem":function(i,n,l,a,s,o){var r=this;e("<div></div>").alpaca({"data":a,"options":l,"schema":n,"view":this.view.id?this.view.id:this.view,"connector":this.connector,"error":function(e){r.destroy(),r.errorCallback.call(r,e)},"notTopLevel":!0,"render":function(e,t){e.parent=r,e.propertyId=i,"/"!==r.path?e.path=r.path+"/"+i:e.path=r.path+i,e.render(null,function(){t()})},"postRender":function(i){var n=t.tmpl(r.containerItemTemplateDescriptor,{"id":r.getId(),"name":i.name,"parentFieldId":r.getId(),"actionbarStyle":r.options.actionbarStyle,"view":r.view,"data":a}),l=e(n).find("."+t.MARKER_CLASS_CONTAINER_FIELD_ITEM_FIELD);if(0===l.length&&e(n).hasClass(t.MARKER_CLASS_CONTAINER_FIELD_ITEM_FIELD)&&(l=e(n)),0===l.length)return void r.errorCallback.call(r,{"message":"Cannot find insertion point for field: "+r.getId()});e(l).before(i.getFieldEl()),e(l).remove();var s=e(n).find(".alpaca-field > .binf-help-block"),c="";if(s.length){var d=s.attr("id");d||(d=t.generateId(),s.attr("id",d),i.options&&(i.options.descriptionId=d),s.hasClass("binf-help-block-standalone")&&(c=s[0].outerHTML,s.remove(),i.standaloneHelper=e(c),n.append(i.standaloneHelper)))}i.containerItemEl=n,t.fieldApplyFieldAndChildren(i,function(e){e.hideInitValidationError=!1}),o&&o(i)}})},"resolvePropertySchemaOptions":function(e,i){var n=this,l=function(e,t,l){n.options.readonly&&(t.readonly=!0),i(e,t,l)},a=null;n.schema&&n.schema.properties&&n.schema.properties[e]&&(a=n.schema.properties[e]);var s={};if(n.options&&n.options.fields&&n.options.fields[e]&&(s=n.options.fields[e]),a&&a.$ref){for(var o=a.$ref,r=this,c=[r];r.parent;)r=r.parent,c.push(r);var d=a,u=s;t.loadRefSchemaOptions(r,o,function(e,i){for(var n=0,a=0;a<c.length;a++)c[a].schema&&(c[a].schema.id===o||c[a].schema.id==="#"+o?n++:c[a].schema.$ref===o&&n++);var s=n>1,r={};d&&t.mergeObject(r,d),e&&t.mergeObject(r,e),d&&d.id&&(r.id=d.id);var p={};u&&t.mergeObject(p,u),i&&t.mergeObject(p,i),t.nextTick(function(){l(r,p,s)})})}else t.nextTick(function(){l(a,s)})},"applyCreatedItems":function(e,t){var i=this;this.base(e,function(){var n=function(l){if(l===e.items.length)return void t();var a=e.items[l],s=a.propertyId;i.showOrHidePropertyBasedOnDependencies(s),i.bindDependencyFieldUpdateEvent(s),i.refreshDependentFieldStates(s),n(l+1)};n(0)})},"handleValidate":function(){var e=this.base(),i=this.validation,n=this._validateMaxProperties();return i.tooManyProperties={"message":n?"":t.substituteTokens(this.getMessage("tooManyProperties"),[this.schema.maxProperties]),"status":n},n=this._validateMinProperties(),i.tooFewProperties={"message":n?"":t.substituteTokens(this.getMessage("tooManyItems"),[this.schema.items.minProperties]),"status":n},e&&i.tooManyProperties.status&&i.tooFewProperties.status},"_validateMaxProperties":function(){if(void 0===this.schema.maxProperties)return!0;var e=this.schema.maxProperties,t=0;for(var i in this.data)t++;return t<=e},"_validateMinProperties":function(){if(void 0===this.schema.minProperties)return!0;var e=this.schema.minProperties,t=0;for(var i in this.data)t++;return t>=e},"showOrHidePropertyBasedOnDependencies":function(e){var i=this,n=this.childrenByPropertyId[e];if(!n)return t.throwErrorWithCallback("Missing property: "+e,i.errorCallback);this.determineAllDependenciesValid(e)?(n.show(),n.onDependentReveal()):(n.hide(),n.onDependentConceal()),n.getFieldEl().trigger("fieldupdate")},"determineAllDependenciesValid":function(i){var n=this,l=this.childrenByPropertyId[i];if(!l)return t.throwErrorWithCallback("Missing property: "+i,n.errorCallback);var a=l.schema.dependencies;if(!a)return!0;var s=!0;return t.isString(a)?s=n.determineSingleDependencyValid(i,a):t.isArray(a)&&e.each(a,function(e,t){
s=s&&n.determineSingleDependencyValid(i,t)}),s},"bindDependencyFieldUpdateEvent":function(i){var n=this,l=this.childrenByPropertyId[i];if(!l)return t.throwErrorWithCallback("Missing property: "+i,n.errorCallback);var a=l.schema.dependencies;if(!a)return!0;var s=function(e,i){var a=t.resolveField(n,i);a&&(a.getFieldEl().on("fieldupdate",function(e,t,i,l){return function(t){n.showOrHidePropertyBasedOnDependencies(i),e.getFieldEl().trigger("fieldupdate")}}(l,0,e)),a.getFieldEl().trigger("fieldupdate"))};t.isString(a)?s(i,a):t.isArray(a)&&e.each(a,function(e,t){s(i,t)})},"refreshDependentFieldStates":function(i){var n=this,l=this.childrenByPropertyId[i];if(!l)return t.throwErrorWithCallback("Missing property: "+i,n.errorCallback);var a=l.schema.dependencies;if(!a)return!0;var s=function(e){var i=t.resolveField(n,e);i&&i.getFieldEl().trigger("fieldupdate")};t.isString(a)?s(a):t.isArray(a)&&e.each(a,function(e,t){s(t)})},"determineSingleDependencyValid":function(e,i){var n=this,l=t.resolveField(n,i);if(!l)return!1;var a=l.data,s=!1,o=this.childrenByPropertyId[e].options.dependencies;if(o&&0!==o.length){"boolean"!==l.getType()||a||(a=!1);var r=o[i];!t.isEmpty(r)&&t.isFunction(r)?s=r.call(this,a):(s=!0,t.isArray(r)?t.anyEquality(a,r)||(s=!1):t.isEmpty(r)||t.anyEquality(r,a)||(s=!1))}else s=!("boolean"===l.getType()&&!this.childrenByPropertyId[e].options.dependencies&&!a)&&!t.isValEmpty(l.data);return l&&l.isHidden()&&(s=!1),s},"getIndex":function(e){if(t.isEmpty(e))return-1;for(var i=0;i<this.children.length;i++){if(this.children[i].propertyId==e)return i}return-1},"addItem":function(t,i,n,l,a,s){var o=this;this.createItem(t,i,n,l,a,function(t){var i=null;if(a&&o.childrenById[a])for(var n=0;n<o.children.length;n++)if(o.children[n].getId()==a){i=n;break}if(o.registerChild(t,null!=i?i+1:null),i){var l=o.getContainerEl().children("[data-alpaca-container-item-index='"+i+"']");l&&l.length>0&&l.after(t.getFieldEl())}else e(o.container).append(t.getFieldEl());o.updateChildDOMElements(),o.refreshValidationState(!0,function(){o.triggerUpdate(),s&&s()})})},"removeItem":function(t,i){var n=this;this.children=e.grep(this.children,function(e,i){return e.getId()!=t});var l=this.childrenById[t];delete this.childrenById[t],l.propertyId&&delete this.childrenByPropertyId[l.propertyId],l.destroy(),this.refreshValidationState(!0,function(){n.triggerUpdate(),i&&i()})},"getType":function(){return"object"},"moveItem":function(i,n,l,a){var s=this;if("function"==typeof l&&(a=l,l=s.options.animate),void 0===l&&(l=!s.options.animate||s.options.animate),"string"==typeof i&&(i=parseInt(i,10)),"string"==typeof n&&(n=parseInt(n,10)),n<0&&(n=0),n>=s.children.length&&(n=s.children.length-1),-1!==n){if(s.children[n]){var o=s.getContainerEl().children("[data-alpaca-container-item-index='"+i+"']"),r=s.getContainerEl().children("[data-alpaca-container-item-index='"+n+"']"),c=e("<div class='tempMarker1'></div>");o.before(c);var d=e("<div class='tempMarker2'></div>");r.before(d);var u=function(){for(var t=[],l=0;l<s.children.length;l++)t[l]=l===i?s.children[n]:l===n?s.children[i]:s.children[l];s.children=t,c.replaceWith(r),d.replaceWith(o),s.updateChildDOMElements(),e(o).find("[data-alpaca-array-actionbar-item-index='"+i+"']").attr("data-alpaca-array-actionbar-item-index",n),e(r).find("[data-alpaca-array-actionbar-item-index='"+n+"']").attr("data-alpaca-array-actionbar-item-index",i),s.refreshValidationState(),s.triggerUpdate(),a&&a()};l?t.animatedSwap(o,r,500,function(){u()}):u()}}},"getTitle":function(){return"Object Field"},"getDescription":function(){return"Object field for containing other fields"},"getSchemaOfSchema":function(){var e={"properties":{"properties":{"title":"Properties","description":"List of child properties.","type":"object"},"maxProperties":{"type":"number","title":"Maximum Number Properties","description":"The maximum number of properties that this object is allowed to have"},"minProperties":{"type":"number","title":"Minimum Number of Properties","description":"The minimum number of properties that this object is required to have"}}},i=e.properties.properties;if(i.properties={},this.children)for(var n=0;n<this.children.length;n++){var l=this.children[n].propertyId;i.properties[l]=this.children[n].getSchemaOfSchema(),i.properties[l].title=l+" :: "+i.properties[l].title}return t.merge(this.base(),e)},"getSchemaOfOptions":function(){var e=t.merge(this.base(),{"properties":{},"order":{"type":"number","title":"Order","description":"Allows for optional specification of the index of this field in the properties array."}}),i={"properties":{"fields":{"title":"Field Options","description":"List of options for child fields.","type":"object"}}},n=i.properties.fields;if(n.properties={},this.children)for(var l=0;l<this.children.length;l++){var a=this.children[l].propertyId;n.properties[a]=this.children[l].getSchemaOfOptions(),n.properties[a].title=a+" :: "+n.properties[a].title}return t.merge(e,i)}}),t.registerMessages({"tooManyProperties":"The maximum number of properties ({0}) has been exceeded.","tooFewProperties":"There are not enough properties ({0} are required)"}),t.registerFieldClass("object",t.Fields.ObjectField),t.registerDefaultSchemaFieldMapping("object","object")}(jQuery),function(e){var t=e.alpaca;t.Fields.AnyField=t.ControlField.extend({"getFieldType":function(){return"any"},"setup":function(){this.base()},"getValue":function(){return this._getControlVal(!0)},"setValue":function(e){t.isEmpty(e)?this.control.val(""):this.control.val(e),this.base(e)},"disable":function(){this.control.disabled=!0},"enable":function(){this.control.disabled=!1},"focus":function(e){this.control.trigger("focus"),e&&e(this)},"getType":function(){return"any"},"getTitle":function(){return"Any Field"},"getDescription":function(){return"Any field."},"getSchemaOfSchema":function(){return t.merge(this.base(),{"properties":{}})},"getOptionsForSchema":function(){return t.merge(this.base(),{"fields":{}})},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{}})},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{}})}}),t.registerFieldClass("any",t.Fields.AnyField),t.registerDefaultSchemaFieldMapping("any","any")}(jQuery),function(e){var t=e.alpaca;t.Fields.HiddenField=t.ControlField.extend({"getFieldType":function(){return"hidden"},"setup":function(){this.base()},"getValue":function(){return this._getControlVal(!0)},"setValue":function(e){t.isEmpty(e)?this.getControlEl().val(""):this.getControlEl().val(e),this.base(e)},"getType":function(){return"string"},"getTitle":function(){return"Hidden"},"getDescription":function(){return"Field for a hidden HTML input"}}),t.registerFieldClass("hidden",t.Fields.HiddenField)}(jQuery),function(e){var t=e.alpaca;t.Fields.DateField=t.Fields.TextField.extend({"getFieldType":function(){return"date"},"getDefaultFormat":function(){return"MM/DD/YYYY"},"getDefaultExtraFormats":function(){return[]},"setup":function(){var e=this;if(this.base(),e.options.picker||(e.options.picker={}),void 0===e.options.picker.useCurrent&&(e.options.picker.useCurrent=!1),e.options.picker.format&&(e.options.dateFormat=e.options.picker.format),e.options.dateFormat||(e.options.dateFormat=e.getDefaultFormat()),e.options.picker.format||(e.options.picker.format=e.options.dateFormat),!e.options.picker.extraFormats){var t=e.getDefaultExtraFormats();t&&(e.options.picker.extraFormats=t)}},"afterRenderControl":function(t,i){var n=this;this.base(t,function(){"display"!==n.view.type&&e.fn.datetimepicker&&(n.getControlEl().datetimepicker(n.options.picker),n.picker=n.getControlEl().data("DateTimePicker"),n.picker&&n.options.dateFormat&&n.picker.format(n.options.dateFormat),n.picker&&(n.options.dateFormat=n.picker.format())),i()})},"getDate":function(){var e=this,t=null;try{t=e.picker?e.picker.date()?e.picker.date()._d:null:new Date(this.getValue())}catch(e){console.error(e)}return t},"date":function(){return this.getDate()},"onChange":function(e){this.base(),this.refreshValidationState()},"isAutoFocusable":function(){return!1},"handleValidate":function(){var e=this.base(),i=this.validation,n=this._validateDateFormat();return i.invalidDate={"message":n?"":t.substituteTokens(this.getMessage("invalidDate"),[this.options.dateFormat]),"status":n},e&&i.invalidDate.status},"_validateDateFormat":function(){var e=this,t=!0;if(e.options.dateFormat){var i=e.getValue();if(i||e.isRequired()){var n=[];if(n.push(e.options.dateFormat),e.options.picker&&e.options.picker.extraFormats)for(var l=0;l<e.options.picker.extraFormats.length;l++)n.push(e.options.picker.extraFormats[l]);for(var l=0;l<n.length;l++)t=t&&moment(i,e.options.dateFormat,!0).isValid()}}return t},"setValue":function(e){var t=this;this.base(e),this.picker&&moment(e,t.options.dateFormat,!0).isValid()&&this.picker.date(e)},"getValue":function(){return this.base()},"destroy":function(){this.base(),this.picker=null},"getTitle":function(){return"Date Field"},"getDescription":function(){return"Date Field"},"getSchemaOfSchema":function(){return t.merge(this.base(),{"properties":{"format":{"title":"Format","description":"Property data format","type":"string","default":"date","enum":["date"],"readonly":!0}}})},"getOptionsForSchema":function(){return t.merge(this.base(),{"fields":{"format":{"type":"text"}}})},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"dateFormat":{"title":"Date Format","description":"Date format (using moment.js format)","type":"string"},"picker":{"title":"DatetimePicker options","description":"Options that are supported by the <a href='http://eonasdan.github.io/bootstrap-datetimepicker/'>Bootstrap DateTime Picker</a>.","type":"any"}}})},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{"dateFormat":{"type":"text"},"picker":{"type":"any"}}})}}),t.registerMessages({"invalidDate":lang.invalidDate}),t.registerFieldClass("date",t.Fields.DateField),t.registerDefaultFormatFieldMapping("date","date")}(jQuery),function(e){var t=e.alpaca;t.Fields.DatetimeField=t.Fields.DateField.extend({"getFieldType":function(){return"datetime"},"getDefaultFormat":function(){return"MM/DD/YYYY HH:mm:ss"},"getDefaultExtraFormats":function(){return["MM/DD/YYYY hh:mm:ss a","MM/DD/YYYY HH:mm","MM/DD/YYYY"]},"setup":function(){this.base()},"getTitle":function(){return"Datetime Field"},"getDescription":function(){return"Datetime Field based on <a href='http://eonasdan.github.io/bootstrap-datetimepicker/'>Bootstrap DateTime Picker</a>."}}),t.registerFieldClass("datetime",t.Fields.DatetimeField),t.registerDefaultFormatFieldMapping("datetime","datetime"),t.registerDefaultFormatFieldMapping("date-time","datetime")}(jQuery),function(e){var t=e.alpaca;t.Fields.IntegerField=t.Fields.NumberField.extend({"getFieldType":function(){return"integer"},"getValue":function(){var e=this.base();return void 0===e||""==e?e:parseInt(e,10)},"onChange":function(e){this.base(),this.slider&&this.slider.slider("value",this.getValue())},"postRender":function(i){var n=this;this.base(function(){n.options.slider&&(t.isEmpty(n.schema.maximum)||t.isEmpty(n.schema.minimum)||n.control&&(n.control.after('<div id="slider"></div>'),n.slider=e("#slider",n.control.parent()).slider({"value":n.getValue(),"min":n.schema.minimum,"max":n.schema.maximum,"slide":function(e,t){n.setValue(t.value),n.refreshValidationState()}}))),i()})},"handleValidate":function(){var e=this.base(),t=this.validation,i=this._validateInteger();return t.stringNotANumber={"message":i?"":this.getMessage("stringNotAnInteger"),"status":i},e&&i},"_validateInteger":function(){var e=this._getControlVal();if("number"==typeof e&&(e=""+e),t.isValEmpty(e))return!0;if(!t.testRegex(t.regexps.integer,e))return!1;var i=this.getValue();return!isNaN(i)},"getType":function(){return"integer"},"getTitle":function(){return"Integer Field"},"getDescription":function(){return"Field for integers."},"getSchemaOfSchema":function(){return t.merge(this.base(),{"properties":{"minimum":{"title":"Minimum","description":"Minimum value of the property.","type":"integer"},"maximum":{"title":"Maximum","description":"Maximum value of the property.","type":"integer"},"divisibleBy":{"title":"Divisible By","description":"Property value must be divisible by this number.","type":"integer"}}})},"getOptionsForSchema":function(){return t.merge(this.base(),{"fields":{"minimum":{"helper":"Minimum value of the field.","type":"integer"},"maximum":{"helper":"Maximum value of the field.","type":"integer"},"divisibleBy":{"helper":"Property value must be divisible by this number.","type":"integer"}}})},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"slider":{"title":"Slider","description":"Generate jQuery UI slider control with the field if true.","type":"boolean","default":!1}}})},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{"slider":{"rightLabel":"Slider control ?","helper":"Generate slider control if selected.","type":"checkbox"}}})}}),t.registerMessages({"stringNotAnInteger":lang.stringNotAnInteger}),t.registerFieldClass("integer",t.Fields.IntegerField),t.registerDefaultSchemaFieldMapping("integer","integer")}(jQuery),function(e){var t=e.alpaca;t.Fields.LowerCaseField=t.Fields.TextField.extend({"getFieldType":function(){return"lowercase"},"setValue":function(e){var t=e.toLowerCase();t!=this.getValue()&&this.base(t)},"onKeyPress":function(e){this.base(e);var i=this;t.later(25,this,function(){var e=i.getValue();i.setValue(e)})},"getTitle":function(){return"Lowercase Text"},"getDescription":function(){return"Text field for lowercase text."}}),t.registerFieldClass("lowercase",t.Fields.LowerCaseField),t.registerDefaultFormatFieldMapping("lowercase","lowercase")}(jQuery),function(e){var t=e.alpaca;t.Fields.MapField=t.Fields.ArrayField.extend({"getFieldType":function(){return"map"},"getType":function(){return"object"},"setup":function(){if(this.data&&t.isObject(this.data)){var i=[];e.each(this.data,function(e,n){var l=t.copyOf(n);l._key=e,i.push(l)}),this.data=i}this.base(),t.mergeObject(this.options,{"forceRevalidation":!0}),t.isEmpty(this.data)},"getValue":function(){if(0!==this.children.length||this.isRequired()){for(var e={},t=0;t<this.children.length;t++){var i=this.children[t].getValue(),n=i._key;n&&(delete i._key,e[n]=i)}return e}},"handleValidate":function(){var e=this.base(),t=this.validation,i=this._validateMapKeysNotEmpty();t.keyMissing={"message":i?"":this.getMessage("keyMissing"),"status":i};var n=this._validateMapKeysUnique();return t.keyNotUnique={"message":n?"":this.getMessage("keyNotUnique"),"status":n},e&&t.keyMissing.status&&t.keyNotUnique.status},"_validateMapKeysNotEmpty":function(){for(var e=!0,t=0;t<this.children.length;t++){if(!this.children[t].getValue()._key){e=!1;break}}return e},"_validateMapKeysUnique":function(){for(var e=!0,t={},i=0;i<this.children.length;i++){var n=this.children[i].getValue(),l=n._key;t[l]&&(e=!1),t[l]=l}return e},"getTitle":function(){return"Map Field"},"getDescription":function(){return"Field for objects with key/value pairs that share the same schema for values."}}),t.registerFieldClass("map",t.Fields.MapField),t.registerMessages({"keyNotUnique":"Keys of map field are not unique.","keyMissing":"Map contains an empty key."})}(jQuery),function(e){var t=e.alpaca;t.Fields.PasswordField=t.Fields.TextField.extend({"getFieldType":function(){return"password"},"setup":function(){this.base(),this.schema.pattern||(this.schema.pattern=t.regexps.password)},"handleValidate":function(){var e=this.base(),t=this.validation;return t.invalidPattern.status||(t.invalidPattern.message=this.getMessage("invalidPassword")),e},"getTitle":function(){return"Password Field"},"getDescription":function(){return"Password Field."},"getSchemaOfSchema":function(){var e=this.schema&&this.schema.pattern?this.schema.pattern:/^[0-9a-zA-Z\x20-\x7E]*$/;return t.merge(this.base(),{"properties":{"pattern":{"title":"Pattern","description":"Field Pattern in Regular Expression","type":"string","default":this.schema.pattern,"enum":[e],"readonly":!0},"format":{"title":"Format","description":"Property data format","type":"string","default":"password","enum":["password"],"readonly":!0}}})},"getOptionsForSchema":function(){return t.merge(this.base(),{"fields":{"format":{"type":"text"}}})}}),t.registerMessages({"invalidPassword":lang.invalidPassword}),t.registerFieldClass("password",t.Fields.PasswordField),t.registerDefaultFormatFieldMapping("password","password")}(jQuery),function(e){var t=e.alpaca;t.Fields.PhoneField=t.Fields.TextField.extend({"setup":function(){this.inputType="tel",this.base(),this.schema.pattern||(this.schema.pattern=t.regexps.phone),t.isEmpty(this.options.maskString)&&(this.options.maskString="(999) 999-9999")},"postRender":function(e){this.base(function(){e()})},"handleValidate":function(){var e=this.base(),t=this.validation;return t.invalidPattern.status||(t.invalidPattern.message=this.getMessage("invalidPhone")),e},"getFieldType":function(){return"phone"},"getTitle":function(){return"Phone Field"},"getDescription":function(){return"Phone Field."},"getSchemaOfSchema":function(){var e=this.schema&&this.schema.pattern?this.schema.pattern:t.regexps.phone;return t.merge(this.base(),{"properties":{"pattern":{"title":"Pattern","description":"Field Pattern in Regular Expression","type":"string","default":e,"enum":[e],"readonly":!0},"format":{"title":"Format","description":"Property data format","type":"string","default":"phone","enum":["phone"],"readonly":!0}}})},"getOptionsForSchema":function(){return t.merge(this.base(),{"fields":{"format":{"type":"text"}}})},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"maskString":{"title":"Field Mask String","description":"Expression for field mask","type":"string","default":"(999) 999-9999"}}})}}),t.registerMessages({"invalidPhone":lang.invalidPhone}),t.registerFieldClass("phone",t.Fields.PhoneField),t.registerDefaultFormatFieldMapping("phone","phone")}(jQuery),function(e){var t=e.alpaca;t.Fields.SearchField=t.Fields.TextField.extend({"setup":function(){this.inputType="search",this.base(),this.options.attributes.results=5},"getFieldType":function(){return"search"},"getType":function(){return"string"},"getTitle":function(){return"Search Field"},"getDescription":function(){return"A search box field"}}),t.registerFieldClass("search",t.Fields.SearchField),t.registerDefaultSchemaFieldMapping("search","search")}(jQuery),function(e){var t=e.alpaca;t.Fields.TableField=t.Fields.ArrayField.extend({"setup":function(){var e=this;e.options||(e.options={}),void 0===e.options.animate&&(e.options.animate=!1),this.base(),this.options.items.type||(this.options.items.type="tablerow"),this.options.datatable&&(this.options.datatables=this.options.datatable),void 0===this.options.datatables&&(this.options.datatables={"paging":!1,"lengthChange":!1,"info":!1,"searching":!1,"ordering":!0}),void 0===this.options.showActionsColumn&&(this.options.showActionsColumn=!0,this.options.readonly&&(this.options.showActionsColumn=!1),this.isDisplayOnly()&&(this.options.showActionsColumn=!1))},"getFieldType":function(){return"table"},"afterRenderContainer":function(t,i){var n=this;this.base(t,function(){n.cleanupDomInjections();var t=e(this.container).find("table");n.applyStyle("table",t),n.options.datatables&&e.fn.DataTable&&e(this.container).find("table").DataTable(n.options.datatables),i()}.bind(n))},"cleanupDomInjections":function(){var i=function(t){var i=e(t).parent(),n=e(t).children(),l=e(t).attr("class").split(/\s+/);e.each(l,function(t,n){"alpaca-merge-up"===n||e(i).addClass(n)}),e.each(e(t)[0].attributes,function(){this.name&&0===this.name.indexOf("data-")&&e(i).attr(this.name,this.value)}),n.length>0?e(t).replaceWith(n):e(t).remove()};this.getFieldEl().find("tr > .alpaca-field").each(function(){i(this)}),this.getFieldEl().find("tr > .alpaca-container").each(function(){i(this)});var n=this.getFieldEl().find("."+t.MARKER_CLASS_ARRAY_ITEM_ACTIONBAR);n.length>0&&n.each(function(){var t=e("<td class='actionbar' nowrap='nowrap'></td>");e(this).before(t),e(t).append(this)}),this.getFieldEl().find(".alpaca-merge-up").each(function(){i(this)})},"doResolveItemContainer":function(){return e(this.container).find("table tbody")},"doAfterAddItem":function(e){this.cleanupDomInjections()},"doAfterRemoveItem":function(e){this.cleanupDomInjections()},"getType":function(){return"array"},"getTitle":function(){return"Table Field"},"getDescription":function(){return"Renders array items into a table"},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"datatables":{"title":"DataTables Configuration","description":"Optional configuration to be passed to the underlying DataTables Plugin.","type":"object"},"showActionsColumn":{"title":"Show Actions Column","default":!0,"description":"Whether to show or hide the actions column.","type":"boolean"}}})},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{"datatables":{"type":"object"},"showActionsColumn":{"type":"checkbox"}}})}}),t.registerFieldClass("table",t.Fields.TableField)}(jQuery),function(e){var t=e.alpaca;t.Fields.TableRowField=t.Fields.ObjectField.extend({"prepareContainerModel":function(e){var t=this;this.base(function(i){i.options.showActionsColumn=t.parent.options.showActionsColumn,e(i)})},"getFieldType":function(){return"tablerow"},"getType":function(){return"object"},"getTitle":function(){return"Table Row Field"},"getDescription":function(){return"Renders object items into a table row"}}),t.registerFieldClass("tablerow",t.Fields.TableRowField)}(jQuery),function(e){var t=e.alpaca;t.Fields.TagField=t.Fields.LowerCaseField.extend({"getFieldType":function(){return"tag"},"setup":function(){this.base(),this.options.separator||(this.options.separator=",")},"getValue":function(){var e=this.base();return""===e?[]:e.split(this.options.separator)},"setValue":function(e){if(""!==e)return e?void this.base(e.join(this.options.separator)):void this.base("")},"onBlur":function(t){this.base(t);var i=this.getValue(),n=[];e.each(i,function(e,t){""!==t.trim()&&n.push(t.trim())}),this.setValue(n)},"getTitle":function(){return"Tag Field"},"getDescription":function(){return"Text field for entering list of tags separated by delimiter."},"getSchemaOfOptions":function(){return t.merge(this.base(),{"properties":{"separator":{"title":"Separator","description":"Separator used to split tags.","type":"string","default":","}}})},"getOptionsForOptions":function(){return t.merge(this.base(),{"fields":{"separator":{"type":"text"}}})}}),t.registerFieldClass("tag",t.Fields.TagField)}(jQuery),function(e){var t=e.alpaca;t.Fields.TimeField=t.Fields.DateField.extend({"getFieldType":function(){return"time"},"getDefaultFormat":function(){return"h:mm:ss a"},"setup":function(){this.base()},"getTitle":function(){return"Time Field"},"getDescription":function(){return"Time Field"}}),t.registerMessages({"invalidTime":"Invalid time"}),t.registerFieldClass("time",t.Fields.TimeField),t.registerDefaultFormatFieldMapping("time","time")}(jQuery),function(e){var t=e.alpaca;t.Fields.UploadField=t.Fields.TextField.extend({"constructor":function(i,n,l,a,s,o){var r=this;this.base(i,n,l,a,s,o),this.wrapTemplate=function(i){return function(n){for(var l=n.files,a=n.formatFileSize,s=n.options,o=[],c=0;c<l.length;c++){var d={};d.options=r.options,d.file=t.cloneObject(l[c]),d.size=a(d.size),d.buttons=r.options.buttons,d.view=r.view;var u=t.tmpl(r.view.getTemplateDescriptor(i),d,r);o.push(u[0])}return o=e(o),e(o).each(function(){s.fileupload&&s.fileupload.autoUpload&&e(this).find("button.start").css("display","none"),r.handleWrapRow(this,s),e(this).find("button.delete").on("destroyed",function(){setTimeout(function(){r.onFileDelete(u),r.triggerWithPropagation("change"),r.refreshUIState()},400)})}),e(o)}}},"getFieldType":function(){return"upload"},"setup":function(){var e=this;this.base(),e.options.buttons||(e.options.buttons=[]),e.options.hideDeleteButton||e.options.buttons.push({"key":"delete","isDelete":!0}),void 0===e.options.multiple&&(e.options.multiple=!1),void 0===e.options.showUploadPreview&&(e.options.showUploadPreview=!0),void 0===e.options.showHeaders&&(e.options.showHeaders=!0),e.data||(e.data=[]),e.options.upload||(e.options.upload={}),void 0===e.options.maxNumberOfFiles&&(e.options.upload.maxNumberOfFiles?(e.options.maxNumberOfFiles=e.options.upload.maxNumberOfFiles,1===e.options.maxNumberOfFiles?e.options.multiple=!1:e.options.maxNumberOfFiles>1&&(e.options.multiple=!0)):(e.options.maxNumberOfFiles=1,"boolean"==typeof e.options.multiple&&e.options.multiple&&(e.options.maxNumberOfFiles=-1)),e.options.maxNumberOfFiles&&(e.options.upload.maxNumberOfFiles=e.options.maxNumberOfFiles)),void 0===e.options.maxFileSize&&(e.options.upload.maxFileSize?e.options.maxFileSize=e.options.upload.maxFileSize:e.options.maxFileSize=-1,e.options.maxFileSize&&(e.options.upload.maxFileSize=e.options.maxFileSize)),void 0===e.options.fileTypes&&(e.options.upload.acceptFileTypes?e.options.fileTypes=e.options.upload.acceptFileTypes:e.options.fileTypes=null,e.options.fileTypes&&(e.options.upload.acceptFileTypes=e.options.fileTypes)),e.options.errorHandler||(e.options.errorHandler=function(e){alert(e.join("\n"))});var i=e.determineCsrfToken();i&&(e.options.upload||(e.options.upload={}),e.options.upload.headers||(e.options.upload.headers={}),e.options.upload.headers[t.CSRF_HEADER_NAME]=i)},"determineCsrfToken":function(){var e=t.CSRF_TOKEN;if(!e)for(var i=0;i<t.CSRF_COOKIE_NAMES.length;i++){var n=t.CSRF_COOKIE_NAMES[i],l=t.readCookie(n);if(l){e=l;break}}return e},"prepareControlModel":function(e){var t=this;t.base(function(i){i.chooseButtonLabel=t.options.chooseButtonLabel,i.chooseButtonLabel||(i.chooseButtonLabel=t.getMessage("chooseFiles"),1===t.options.maxNumberOfFiles&&(i.chooseButtonLabel=t.getMessage("chooseFile"))),i.dropZoneMessage=t.options.dropZoneMessage,i.dropZoneMessage||(i.dropZoneMessage=t.getMessage("dropZoneSingle"),1===i.maxNumberOfFiles&&(i.dropZoneMessage=t.getMessage("dropZoneMultiple"))),e(i)})},"afterRenderControl":function(e,t){var i=this;this.base(e,function(){i.handlePostRender(function(){t()})})},"getUploadTemplate":function(){return this.wrapTemplate("control-upload-partial-upload")},"getDownloadTemplate":function(){return this.wrapTemplate("control-upload-partial-download")},"handlePostRender":function(t){var i=this,n=this.control,l={};if(l.dataType="json",l.uploadTemplateId=null,l.uploadTemplate=this.getUploadTemplate(),l.downloadTemplateId=null,l.downloadTemplate=this.getDownloadTemplate(),l.filesContainer=e(n).find(".files"),l.dropZone=e(n).find(".fileupload-active-zone"),l.url="/",l.method="post",l.showUploadPreview=i.options.showUploadPreview,i.options.upload)for(var a in i.options.upload)l[a]=i.options.upload[a];i.options.multiple&&(e(n).find(".alpaca-fileupload-input").attr("multiple",!0),e(n).find(".alpaca-fileupload-input").attr("name",i.name+"_files[]")),e(n).find(".binf-progress").css("display","none"),l.progressall=function(t,i){var l=!1;if(i.loaded<i.total&&(l=!0),l){e(n).find(".binf-progress").css("display","block");var a=parseInt(i.loaded/i.total*100,10);e("#progress .binf-progress-bar").css("width",a+"%")}else e(n).find(".binf-progress").css("display","none")},l.add=function(e,t){for(var n=[],l=0;l<t.originalFiles.length;l++){if(i.options.fileTypes){var a=i.options.fileTypes;"string"==typeof i.options.fileTypes&&(a=new RegExp(i.options.fileTypes)),a.test(t.originalFiles[l].type)||n.push("Not an accepted file type: "+t.originalFiles[l].type)}i.options.maxFileSize>-1&&t.originalFiles[l].size>i.options.maxFileSize&&n.push("Filesize is too big: "+t.originalFiles[l].size)}n.length>0?i.options.errorHandler(n):t.submit()},i.applyConfiguration(l);var s=i.fileUpload=e(n).find(".alpaca-fileupload-input").fileupload(l);s.bindFirst("fileuploaddone",function(e,t){var n=i.options.enhanceFiles;n?n(l,t):i.enhanceFiles(l,t),t.files=t.result.files,setTimeout(function(){i.refreshUIState()},250)}),s.bindFirst("fileuploadsubmit",function(t,n){i.options.properties&&e.each(n.files,function(e,t){for(var l in i.options.properties){var a="property"+e+"__"+l,s=i.options.properties[l];s=i.applyTokenSubstitutions(s,e,t),n.formData||(n.formData={}),n.formData[a]=s}}),i.options.parameters&&e.each(n.files,function(e,t){for(var l in i.options.parameters){var a="param"+e+"__"+l,s=i.options.parameters[l];s=i.applyTokenSubstitutions(s,e,t),n.formData||(n.formData={}),n.formData[a]=s}})}),s.on("fileuploaddone",function(e,t){var n=i.getValue(),l=function(e){if(e===t.files.length)return void i.setValue(n);i.convertFileToDescriptor(t.files[e],function(t,i){i&&n.push(i),l(e+1)})};l(0)}),s.on("fileuploadfail",function(e,t){t.errorThrown&&i.onUploadFail(t)}),s.on("fileuploadalways",function(e,t){i.refreshUIState()}),i.applyBindings(s,n),i.preload(s,n,function(l){if(l){var a=e(i.control).find(".alpaca-fileupload-input");e(a).fileupload("option","done").call(a,e.Event("done"),{"result":{"files":l}}),i.afterPreload(s,n,l,function(){t()})}else t()}),"undefined"!=typeof document&&e(document).on("drop dragover",function(e){e.preventDefault()})},"handleWrapRow":function(e,t){},"applyTokenSubstitutions":function(e,t,i){var n={"index":t,"name":i.name,"size":i.size,"url":i.url,"thumbnailUrl":i.thumbnailUrl},l=-1,a=0;do{if((l=e.indexOf("{",a))>-1){var s=e.indexOf("}",l);if(s>-1){var o=e.substring(l+car.length,s),r=n[o];r&&(e=e.substring(0,l)+r+e.substring(s+1)),a=s+1}}}while(l>-1);return e},"removeValue":function(e){for(var t=this,i=t.getValue(),n=0;n<i.length;n++)if(i[n].id==e){i.splice(n,1);break}t.setValue(i)},"applyConfiguration":function(e){},"applyBindings":function(e){},"convertFileToDescriptor":function(e,t){t(null,{"id":e.id,"name":e.name,"size":e.size,"url":e.url,"thumbnailUrl":e.thumbnailUrl,"deleteUrl":e.deleteUrl,"deleteType":e.deleteType})},"convertDescriptorToFile":function(e,t){t(null,{"id":e.id,"name":e.name,"size":e.size,"url":e.url,"thumbnailUrl":e.thumbnailUrl,"deleteUrl":e.deleteUrl,"deleteType":e.deleteType})},"enhanceFiles":function(e,t){},"preload":function(e,t,i){var n=this,l=[],a=n.getValue(),s=function(e){if(e==a.length)return void i(l);n.convertDescriptorToFile(a[e],function(t,i){i&&l.push(i),s(e+1)})};s(0)},"afterPreload":function(e,t,i,n){this.refreshUIState(),n()},"getValue":function(){return this.data},"setValue":function(e){e||(e=[]),this.data=e,this.updateObservable(),this.triggerUpdate()},"reload":function(t){var i=this,n=this.getValue(),l=[],a=function(s){if(s===n.length){var o=e(i.control).find(".alpaca-fileupload-input");return e(o).fileupload("option","done").call(o,e.Event("done"),{"result":{"files":l}}),i.refreshValidationState(),void t()}i.convertDescriptorToFile(n[s],function(e,t){t&&l.push(t),a(s+1)})};a(0)},"plugin":function(){return e(this.control).find(".alpaca-fileupload-input").data().blueimpFileupload},"refreshUIState":function(){var e=this,t=e.plugin();if(t){var i=e.options.maxNumberOfFiles;t.options.getNumberOfFiles&&t.options.getNumberOfFiles()>=i?e.refreshButtons(!1):e.refreshButtons(!0)}},"refreshButtons":function(t){var i=this;e(i.control).find(".binf-btn.fileinput-button").prop("disabled",!0),e(i.control).find(".binf-btn.fileinput-button").attr("disabled","disabled"),e(i.control).find(".fileupload-active-zone p.dropzone-message").css("display","none"),t&&(e(i.control).find(".binf-btn.fileinput-button").prop("disabled",!1),e(i.control).find(".binf-btn.fileinput-button").attr("disabled",null),e(i.control).find(".fileupload-active-zone p.dropzone-message").css("display","block"))},"onFileDelete":function(e){},"onUploadFail":function(e){for(var t=this,i=0;i<e.files.length;i++)e.files[i].error=e.errorThrown;t.options.uploadFailHandler&&t.options.uploadFailHandler.call(t,e)},"getTitle":function(){return"Upload Field"},"getDescription":function(){return"Provides an upload field with support for thumbnail preview"},"getType":function(){return"array"},"getSchemaOfOptions":function(){
return t.merge(this.base(),{"properties":{"maxNumberOfFiles":{"title":"Maximum Number of Files","description":"The maximum number of files to allow to be uploaded.  If greater than zero, the maximum number will be constrained.  If -1, then no limit is imposed.","type":"number","default":1},"maxFileSize":{"title":"Maximum File Size (in bytes)","description":"The maximum file size allowed per upload.  If greater than zero, the maximum file size will be limited to the given size in bytes.  If -1, then no limit is imposed.","type":"number","default":-1},"fileTypes":{"title":"File Types","description":"A regular expression limiting the file types that can be uploaded based on filename","type":"string"},"multiple":{"title":"Multiple","description":"Whether to allow multiple file uploads.  If maxNumberOfFiles is not specified, multiple will toggle between 1 and unlimited.","type":"boolean","default":!1},"showUploadPreview":{"title":"Show Upload Preview","description":"Whether to show thumbnails for uploaded assets (requires preview support)","type":"boolean","default":!0},"errorHandler":{"title":"Error Handler","description":"Optional function handler to be called when there is an error uploading one or more files.  This handler is typically used to instantiate a modal or other UI element to inform the end user.","type":"function"},"uploadFailHandler":{"title":"Upload Fail Handler","description":"Optional function handler to be called when one or more files fails to upload.  This function is responsible for parsing the underlying xHR request and populating the error message state.","type":"function"}}})}}),t.registerFieldClass("upload",t.Fields.UploadField),t.registerMessages({"chooseFile":"Choose file...","chooseFiles":"Choose files...","dropZoneSingle":"Click the Choose button or Drag and Drop a file here to upload...","dropZoneMultiple":"Click the Choose button or Drag and Drop files here to upload..."}),function(e){function t(t){return o?t.data("events"):e._data(t[0]).events}function i(e,i,n){var l=t(e),a=l[i];if(!o){var s=n?a.splice(a.delegateCount-1,1)[0]:a.pop();return void a.splice(n?0:a.delegateCount||0,0,s)}n?l.live.unshift(l.live.pop()):a.unshift(a.pop())}function n(t,n,l){var a=n.split(/\s+/);t.each(function(){for(var t=0;t<a.length;++t){var n=e.trim(a[t]).match(/[^\.]+/i)[0];i(e(this),n,l)}})}var l=e.fn.jquery.split("."),a=parseInt(l[0]),s=parseInt(l[1]),o=a<1||1===a&&s<7;e.fn.bindFirst=function(){var t=e.makeArray(arguments),i=t.shift();return i&&(e.fn.bind.apply(this,arguments),n(this,i)),this}}(e)}(jQuery),function(e){var t=e.alpaca;t.Fields.UpperCaseField=t.Fields.TextField.extend({"getFieldType":function(){return"uppercase"},"setValue":function(e){var t=e.toUpperCase();t!=this.getValue()&&this.base(t)},"onKeyPress":function(e){this.base(e);var i=this;t.later(25,this,function(){var e=i.getValue();i.setValue(e)})},"getTitle":function(){return"Uppercase Text"},"getDescription":function(){return"Text field for uppercase text."}}),t.registerFieldClass("uppercase",t.Fields.UpperCaseField),t.registerDefaultFormatFieldMapping("uppercase","uppercase")}(jQuery),function(e){var t=e.alpaca;t.Fields.URLField=t.Fields.TextField.extend({"getFieldType":function(){return"url"},"setup":function(){this.inputType="url",this.base(),this.schema.pattern=t.regexps.url,this.schema.format="uri"},"handleValidate":function(){var e=this.validation,t=this._validateOptional();return e.notOptional={"message":t?"":lang.webAddressNeeded,"status":t},t?(t=this._validatePattern(),e.invalidPattern={"message":t?"":this.getMessage("invalidURLFormat"),"status":t}):e.invalidPattern={"message":"","status":!0},t},"getTitle":function(){return"URL Field"},"getDescription":function(){return"Provides a text control with validation for an internet web address."}}),t.registerMessages({"invalidURLFormat":"The URL provided is not a valid web address."}),t.registerFieldClass("url",t.Fields.URLField),t.registerDefaultFormatFieldMapping("url","url")}(jQuery),function(e){var t=e.alpaca,i={};i.field=function(){},i.control=function(){},i.container=function(){},i.form=function(){},i.required=function(){},i.optional=function(){},i.readonly=function(){},i.disabled=function(){},i.enabled=function(){},i.clearValidity=function(){},i.invalid=function(e){},i.valid=function(){},i.addMessage=function(e,t,i,n){},i.removeMessages=function(){},i.enableButton=function(e){},i.disableButton=function(e){},i.arrayToolbar=function(i){var n=this;if(i){var l=e(n.getFieldEl()).find(".alpaca-array-toolbar[data-alpaca-array-toolbar-field-id='"+n.getId()+"']");if(l.length>0){var a=e("<div class='"+t.MARKER_CLASS_ARRAY_TOOLBAR+"' "+t.MARKER_DATA_ARRAY_TOOLBAR_FIELD_ID+"='"+n.getId()+"'></div>");l.before(a),l.remove()}}else{var a=e(n.getContainerEl()).find("."+t.MARKER_CLASS_ARRAY_TOOLBAR+"["+t.MARKER_DATA_ARRAY_TOOLBAR_FIELD_ID+"='"+n.getId()+"']");if(a.length>0){var s=n.view.getTemplateDescriptor("container-array-toolbar",n);if(s){var o=t.tmpl(s,{"actions":n.toolbar.actions,"id":n.getId(),"toolbarStyle":n.options.toolbarStyle,"view":n.view});e(a).before(o),e(a).remove()}}}},i.arrayActionbars=function(i){for(var n=this,l=0;l<n.children.length;l++){var a=n.children[l],s=a.getId();if(i){var o=e(n.getFieldEl()).find(".alpaca-array-actionbar[data-alpaca-array-actionbar-field-id='"+s+"']");if(o.length>0){var r=e("<div class='"+t.MARKER_CLASS_ARRAY_ITEM_ACTIONBAR+"' "+t.MARKER_DATA_ARRAY_ITEM_KEY+"='"+a.name+"'></div>");o.before(r),o.remove()}}else{var r=e(n.getFieldEl()).find("."+t.MARKER_CLASS_ARRAY_ITEM_ACTIONBAR+"["+t.MARKER_DATA_ARRAY_ITEM_KEY+"='"+a.name+"']");if(r.length>0){var c=n.view.getTemplateDescriptor("container-array-actionbar",n);if(c){var d=t.tmpl(c,{"actions":n.actionbar.actions,"name":a.name,"parentFieldId":n.getId(),"fieldId":a.getId(),"itemIndex":l,"actionbarStyle":n.options.actionbarStyle,"view":n.view});e(r).before(d),e(r).remove()}}}}},i.autocomplete=function(){};var n={};n.button="",n.smallButton="",n.addIcon="",n.removeIcon="",n.upIcon="",n.downIcon="",n.expandedIcon="",n.collapsedIcon="",n.table="",t.registerView({"id":"web-display","parent":"base","type":"display","ui":"web","title":"Default HTML5 display view","displayReadonly":!0,"templates":{},"callbacks":i,"styles":n,"horizontal":!1}),t.registerView({"id":"web-display-horizontal","parent":"web-display","horizontal":!0}),t.registerView({"id":"web-edit","parent":"base","type":"edit","ui":"web","title":"Default HTML5 edit view","displayReadonly":!0,"templates":{},"callbacks":i,"styles":n,"horizontal":!1}),t.registerView({"id":"web-edit-horizontal","parent":"web-edit","horizontal":!0}),t.registerView({"id":"web-create","parent":"web-edit","type":"create","title":"Default HTML5 create view","displayReadonly":!1,"templates":{},"horizontal":!1}),t.registerView({"id":"web-create-horizontal","parent":"web-create","horizontal":!0})}(jQuery),function(e){var t=e.alpaca,i={};i.button="binf-btn binf-btn-default",i.smallButton="binf-btn binf-btn-default binf-btn-sm",i.addIcon="binf-glyphicon binf-glyphicon-plus-sign",i.removeIcon="binf-glyphicon binf-glyphicon-minus-sign",i.upIcon="binf-glyphicon binf-glyphicon-chevron-up",i.downIcon="binf-glyphicon binf-glyphicon-chevron-down",i.expandedIcon="binf-glyphicon binf-glyphicon-circle-arrow-down",i.collapsedIcon="binf-glyphicon binf-glyphicon-circle-arrow-right",i.table="binf-table binf-table-striped binf-table-bordered binf-table-hover";var n={};n.required=function(){var t=this.getFieldEl(),i=e(t[0].querySelectorAll("label.alpaca-control-label"));e('<span class="alpaca-icon-required binf-glyphicon binf-glyphicon-star"></span>').prependTo(i)},n.invalid=function(){this.isControlField&&e(this.getFieldEl()).addClass("binf-has-error")},n.valid=function(){e(this.getFieldEl()).removeClass("binf-has-error")},n.control=function(){var t=this.getFieldEl(),i=this.getControlEl();if(e(t[0].querySelectorAll("input")).addClass("binf-form-control"),e(t[0].querySelectorAll("textarea")).addClass("binf-form-control"),e(t[0].querySelectorAll("select")).addClass("binf-form-control"),e(t[0].querySelectorAll("input[type=checkbox]")).removeClass("binf-form-control"),e(t[0].querySelectorAll("input[type=file]")).removeClass("binf-form-control"),e(t[0].querySelectorAll("input[type=radio]")).removeClass("binf-form-control"),"color"===this.inputType&&e(t).find("input").removeClass("binf-form-control"),e(t[0].querySelectorAll("input[type=checkbox]")).parent().parent().addClass("binf-checkbox"),e(t[0].querySelectorAll("input[type=radio]")).parent().parent().addClass("binf-radio"),e(t).parents("form").hasClass("binf-form-inline")&&(e(t).find("input[type=checkbox]").parent().addClass("binf-checkbox-inline"),e(t).find("input[type=radio]").parent().addClass("binf-radio-inline")),e(t[0].querySelectorAll("label.alpaca-control-label")).addClass("binf-control-label"),this.view.horizontal){e(t[0].querySelectorAll("label.alpaca-control-label")).addClass("binf-col-sm-3");var n=e("<div></div>");n.addClass("binf-col-sm-9"),e(i).after(n),n.append(i),e(t).append("<div style='clear:both;'></div>"),e(t).find(".binf-help-block").length&&e(t[0].querySelectorAll(".binf-help-block")).addClass("binf-help-block-standalone")}},n.container=function(){var t=this.getContainerEl();this.view.horizontal&&e(t).addClass("binf-form-horizontal")},n.form=function(){this.getFormEl()},n.enableButton=function(t){e(t).prop("disabled",!1)},n.disableButton=function(t){e(t).attr("disabled",!0)},n.collapsible=function(){var i=this.getFieldEl(),n=e(i).find("label").first(),l=e("[data-binf-toggle='collapse']",n);if(e(l).length>0){var a=this.getContainerEl(),s=e(a).attr("id");s||(s=t.generateId(),e(a).attr("id",s)),e(a).addClass("binf-collapse binf-in"),e(l).attr("data-binf-target")||e(l).attr("data-binf-target","#"+s),e(l).on("mouseover",function(t){e(this).css("cursor","pointer")})}},t.registerView({"id":"bootstrap-display","parent":"web-display","type":"display","ui":"bootstrap","title":"Display View for Bootstrap 3","displayReadonly":!0,"callbacks":n,"styles":i,"templates":{}}),t.registerView({"id":"bootstrap-display-horizontal","parent":"bootstrap-display","horizontal":!0}),t.registerView({"id":"bootstrap-edit","parent":"web-edit","type":"edit","ui":"bootstrap","title":"Edit View for Bootstrap 3","displayReadonly":!0,"callbacks":n,"styles":i,"templates":{}}),t.registerView({"id":"bootstrap-edit-horizontal","parent":"bootstrap-edit","horizontal":!0}),t.registerView({"id":"bootstrap-create","parent":"bootstrap-edit","title":"Create View for Bootstrap 3","type":"create","displayReadonly":!1}),t.registerView({"id":"bootstrap-create-horizontal","parent":"bootstrap-create","horizontal":!0})}(jQuery),Alpaca.defaultView="bootstrap",Alpaca}),csui.define("hbs!csui/controls/form/impl/templates/form",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="'+e.escapeExpression((a=null!=(a=s(i,"id")||(null!=t?s(t,"id"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":1,"column":9},"end":{"line":1,"column":15}}}):a))+'" role="'+e.escapeExpression((a=null!=(a=s(i,"role")||(null!=t?s(t,"role"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"role","hash":{},"loc":{"start":{"line":1,"column":23},"end":{"line":1,"column":31}}}):a))+'" class="cs-form-inner">\r\n  \x3c!-- Specific tab pane. ID is the name of the href --\x3e\r\n  <div id="form-pane" class="">\r\n\r\n    <span class="title">Description</span>\r\n        <span class="general-body">\r\n            This static content has to be replaced by a dynamically rendered form. The form is rendered from the form\r\n          description given through the constructor, which comprises data, schema and options in the alpaca style. When\r\n          this is done, most of the hbs and css can be thrown away. The markup generated by the full implementation\r\n          of this control should resemble the current static content.\r\n        </span>\r\n\r\n    <div class="general-information">\r\n      <div class="data-line">\r\n        <span class="title">Created</span><span class="label-data">2015-02-06 07:24 PM</span>\r\n      </div>\r\n      <div class="data-line">\r\n        <span class="title">Created by</span><span class="label-data">Jean-Pierre Martin</span>\r\n      </div>\r\n      <div class="data-line">\r\n        <span class="title">Modified</span><span class="label-data">2015-02-14 14:24 PM</span>\r\n      </div>\r\n      <div class="data-line">\r\n        <span class="title">Owner</span><span class="label-data">Clare Fallon</span>\r\n      </div>\r\n      <div class="data-line">\r\n        <span class="title">Type</span><span class="label-data">PDF</span>\r\n      </div>\r\n      <div class="data-line">\r\n        <span class="title">Size</span><span class="label-data">1.2Mb</span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="general-extensions">\r\n      <span class="title">Extensions</span>\r\n\r\n      <div class="extensions-wrap">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="extensions-body">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tStandard classification\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<br/><br/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tBrava\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n'}});return i.registerPartial("csui_controls_form_impl_templates_form",n),n}),csui.define("hbs!csui/controls/form/impl/templates/formsinglecol",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l,a,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isSetType"):t,{"name":"if","hash":{},"fn":e.program(2,l,0,a,s),"inverse":e.program(4,l,0,a,s),"data":l,"loc":{"start":{"line":8,"column":4},"end":{"line":13,"column":11}}}))?o:""},"2":function(e,t,i,n,l,a,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="binf-col-md-12 cs-form-singlecolumn csui-form-set-array-wrapper cs-form-set"\r\n           id="csfSingleCol_'+e.escapeExpression(e.lambda(null!=s[1]?r(s[1],"modelId"):s[1],t))+e.escapeExpression((o=null!=(o=r(i,"index")||l&&r(l,"index"))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"index","hash":{},"data":l,"loc":{"start":{"line":10,"column":42},"end":{"line":10,"column":52}}}):o))+'"></div>\r\n'},"4":function(e,t,i,n,l,a,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="binf-col-md-12 cs-form-doublecolumn" id="csfLeftCol_'+e.escapeExpression(e.lambda(null!=s[1]?r(s[1],"modelId"):s[1],t))+e.escapeExpression((o=null!=(o=r(i,"index")||l&&r(l,"index"))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"index","hash":{},"data":l,"loc":{"start":{"line":12,"column":84},"end":{"line":12,"column":94}}}):o))+'"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l,a,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-row">\r\n  {{#if options.label}}\r\n  <div class="binf-col-md-12 alpaca-container-label">\r\n    <h4>{{options.label}}</h4>\r\n  </div>\r\n  {{/if}}\r\n'+(null!=(o=r(i,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"fields"):t,{"name":"each","hash":{},"fn":e.program(1,l,0,a,s),"inverse":e.noop,"data":l,"loc":{"start":{"line":7,"column":2},"end":{"line":14,"column":11}}}))?o:"")+"</div>\r\n"},"useData":!0,"useDepths":!0});return i.registerPartial("csui_controls_form_impl_templates_formsinglecol",n),n}),csui.define("hbs!csui/controls/form/impl/templates/formdoublecol",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l,a,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isSetType"):t,{"name":"if","hash":{},"fn":e.program(2,l,0,a,s),"inverse":e.program(4,l,0,a,s),"data":l,"loc":{"start":{"line":8,"column":4},"end":{"line":16,"column":11}}}))?o:""},"2":function(e,t,i,n,l,a,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="binf-col-md-12 cs-form-singlecolumn csui-form-set-array-wrapper cs-form-set"\r\n           id="csfSingleCol_'+e.escapeExpression(e.lambda(null!=s[1]?r(s[1],"modelId"):s[1],t))+e.escapeExpression((o=null!=(o=r(i,"index")||l&&r(l,"index"))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"index","hash":{},"data":l,"loc":{"start":{"line":10,"column":42},"end":{"line":10,"column":52}}}):o))+'"></div>\r\n'},"4":function(e,t,i,n,l,a,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="binf-col-md-6 cs-form-doublecolumn cs-form-leftcolumn"\r\n           id="csfLeftCol_'+e.escapeExpression(e.lambda(null!=s[1]?r(s[1],"modelId"):s[1],t))+e.escapeExpression((o=null!=(o=r(i,"index")||l&&r(l,"index"))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"index","hash":{},"data":l,"loc":{"start":{"line":13,"column":40},"end":{"line":13,"column":50}}}):o))+'"></div>\r\n      <div class="binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn"\r\n           id="csfRightCol_'+e.escapeExpression(e.lambda(null!=s[1]?r(s[1],"modelId"):s[1],t))+e.escapeExpression((o=null!=(o=r(i,"index")||l&&r(l,"index"))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"index","hash":{},"data":l,"loc":{"start":{"line":15,"column":41},"end":{"line":15,"column":51}}}):o))+'"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l,a,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-row">\r\n  {{#if options.label}}\r\n  <div class="binf-col-md-12 alpaca-container-label">\r\n    <h4>{{options.label}}</h4>\r\n  </div>\r\n  {{/if}}\r\n'+(null!=(o=r(i,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"fields"):t,{"name":"each","hash":{},"fn":e.program(1,l,0,a,s),"inverse":e.noop,"data":l,"loc":{"start":{"line":7,"column":2},"end":{"line":17,"column":11}}}))?o:"")+"</div>\r\n"},"useData":!0,"useDepths":!0});return i.registerPartial("csui_controls_form_impl_templates_formdoublecol",n),n}),csui.define("txt!csui/controls/form/impl/templates/alpaca.container.array.txt",[],function(){return'{{#if options.canWrite}}\r\n  {{#if options.isMultiRowSetEnabled}}\r\n    <div class="icon-container csui-array-bulk-edit csui-array-bulk-edit-set binf-hidden">\r\n      <div class="csui-icon-edit inline-edit-icon icon-edit csui-bulk-edit csui-bulk-edit-{{options\r\n      .uniqueId}}" title="{{options.messages.editFields}}" aria-label="{{options.messages.editFields}}" tabindex="0" data-cstabindex="0"></div>\r\n      <div>\r\n        <span class="csui-bulk-edit-cancel-{{options.uniqueId}} csui-icon-edit inline-edit-icon\r\n        edit-cancel csui-bulk-edit-cancel binf-hidden" title="{{options.messages.cancel}}" aria-label="{{options.messages.cancel}}"\r\n        tabindex="-1" data-cstabindex="-1"></span>\r\n      </div>\r\n    </div>\r\n  {{else}}\r\n  {{/if}}\r\n{{/if}}\r\n<div class="{{#if options.isMultiRowSetEnabled}} cs-form-set {{else}}csui-multivalue-container {{#if options\r\n.isEditMode}} csui-multivalue-block csui-multivalue-read-block {{/if}} {{/if}} cs-form-set-container\r\ncs-form-set-container-{{options.uniqueId}}" {{#if options.isTabable}}tabindex="0"{{/if}}\r\ndata-alpaca-container-item-name={{options.uniqueId}}>\r\n  {{#each items}}\r\n    {{#item}}{{/item}}\r\n  {{/each}}\r\n</div>\r\n{{#if options.canWrite}}\r\n  {{#if options.isMultiRowSetEnabled}}\r\n   {{#if options.applyFlag}}\r\n      <div class="icon-container apply-set binf-hidden">\r\n         <button class="csui-icon apply-all block binf-hidden" title="{{options.messages.titleApplyAll}}"\r\n         aria-label="{{options.messages.titleApplyAll}}" tabindex="0" data-cstabindex="0">\r\n         </button>\r\n      </div>\r\n   {{/if}}\r\n  {{else}}\r\n    {{#if options.isMultiFieldItem}}\r\n    {{else}}\r\n      {{#if options.applyFlag}}\r\n        <div class="icon-container apply-mv binf-hidden">\r\n           <button class="csui-icon apply-all block binf-hidden" title="{{options.messages.titleApplyAll}}"\r\n           aria-label="{{options.messages.titleApplyAll}}" tabindex="0" data-cstabindex="0">\r\n           </button>\r\n        </div>\r\n      {{/if}}\r\n\r\n      <div class="icon-container csui-array-bulk-edit binf-hidden csui-array-bulk-edit-noset">\r\n        <div class="csui-icon-edit inline-edit-icon icon-edit csui-bulk-edit csui-bulk-edit-{{options\r\n        .uniqueId}}" title="{{options.messages.editFields}}" aria-label="{{options.messages.editFields}}"></div>\r\n        <div>\r\n          <span class="csui-bulk-edit-cancel-{{options.uniqueId}} csui-icon-edit inline-edit-icon\r\n          edit-cancel csui-bulk-edit-cancel binf-hidden" title="{{options.messages.cancel}}"\r\n          aria-label="{{options.messages.cancel}}" tabindex="-1" data-cstabindex="-1"></span>\r\n        </div>\r\n      </div>\r\n    {{/if}}\r\n  {{/if}}\r\n{{/if}}\r\n'}),csui.define("txt!csui/controls/form/impl/templates/alpaca.container.array.item.txt",[],function(){return'<div class="cs-array">\r\n    <div class="cs-pull-left cs-array-item-field-wrapper">\r\n        {{#itemField}}{{/itemField}}\r\n    </div>\r\n    <div class="cs-pull-right">\r\n        {{#arrayActionbar}}{{/arrayActionbar}}\r\n    </div>\r\n    <div class="alpaca-clear"></div>\r\n</div>\r\n'}),csui.define("csui/controls/form/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/form/impl/nls/root/lang",{"nodePickerDialogTitle":"Select {0}","noValue":"(no value)","edit":"Edit","cancel":"Cancel","editFields":"Edit fields","fieldEditAria":"{0}: {1}, Click to Edit","fieldReadOnlyAria":"{0}: {1}","userFieldReadOnlyAria":"{0}: {1}, Click to view profile","emptyUserFieldReadOnlyAria":"{0}: {1}","requiredField":", Required","addField":"Add new field","removeField":"Remove field","addRow":"Add row","removeRow":"Remove row","selectFieldDefaultLabel":"None","selectValueLabel":"Select value","addFieldAria":"Add {0} field","removeFieldAria":"Remove {0} field","clearIconAriaLabel":"Clear location","clearIconTooltip":"Clear","browseIconAriaLabel":"Browse location","browseIconTooltip":"Browse","datePickerIcon":"Date picker","originalNodeUnavailable":"Unavailable node","originalNodeUnavailableTooltip":"The original node is unavailable or you do not have permission to access it.","invalidItem":"Invalid item","invalidUser":"Invalid user","invalidGroup":"Invalid group","invalidUserOrGroup":"Invalid user or group","invalidTkl":"Invalid Value","alpacaPlaceholderNotAvailable":"n/a","alpacaPlaceholderGeneric":"Add value","alpacaPlaceholderNumber":"Add value","alpacaPlaceholderText":"Add text","alpacaPlaceholderTime":"Add time","alpacaPlaceholderDate":"Add date","alpacaPlaceholderDateTime":"Add date and time","alpacaPlaceholderEmail":"Add email","alpacaPlaceholderFile":"Select file","alpacaPlaceholderPassword":"Add password","alpacaPlaceholderPhone":"Add phone number","alpacaPlaceholderSearch":"Enter search","alpacaPlaceholderUrl":"Add web address","alpacaPlaceholderIPv4":"Add IP address","alpacaPlaceholderOTUserPicker":"Add user","alpacaPlaceholderOTGroupPicker":"Add group","alpacaPlaceholderOTUserGroupPicker":"Add user or group","alpacaPlaceholderOTNodePicker":"Select","titleApplyAll":"Apply to all selected items","confirmApplyNotification":"Applied to all selected documents","titleColoutButton":"Open summary view","seeMore":"See more","seeLess":"See less","tklFieldNone":"None","noResultFound":"No Result Found","noOwner":"<No Owner>","noValueSet":"No value","radioFieldValidationErrorInvalidValue":"The selected value does not exist anymore.","showMore":"Show more","showLess":"Show less","showMoreAria":"Show more rows","showLessAria":"Show less rows"}),csui.define("csui/controls/form/fields/alpaca/alpcsuipickerfield.mixin",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette"],function(e,t,i,n){return{"mixin":function(l){return e.extend(l,{"makeAlpCsuiPickerField":function(){},"getFieldType":function(){return this.options.alpacaFieldType},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType()),this.field.parent().addClass(this.options.alpacaFieldClasses||"csui-field-otcs_csuipicker")},"showField":function(){var l,a=this.id,s=this.options?this.options.descriptionId:"",o=t(this.field[0]).find("label");o&&1==o.length&&(l=o.attr("for")+"Label",o.attr("id",l)),this.fieldView=new this.options.PickerFieldView({"context":this.connector.config.context,"formView":this.connector.config.formView,"model":new i.Model({"data":this.data,"options":this.options,"schema":this.schema,"id":a}),"id":e.uniqueId(a),"alpacaField":this,"labelId":l,"descriptionId":s,"value":this.data,"readonly":!0,"dataId":this.name,"path":this.path,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema}});var r=t("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(r),this.region=new n.Region({"el":r}),this.region.show(this.fieldView)},"setValueAndValidate":function(e,t){this.setValue(e);var i=!0;return t&&(i=this.validate(),this.refreshValidationState(!1)),i},"focus":function(){this.fieldView.$el.trigger("focus")},"destroy":function(){this.base(),this.region&&this.region.destroy()}})}}}),csui.define("csui/controls/form/fields/base/csformfield.states.behavior",["csui/lib/underscore","csui/lib/jquery","csui/lib/handlebars","csui/lib/marionette","csui/utils/log","csui/controls/form/pub.sub","csui/utils/base"],function(e,t,i,n,l,a,s){return n.Behavior.extend({"constructor":function(t,i){n.Behavior.prototype.constructor.apply(this,arguments),this.view=i,this.view.getStatesBehavior=e.bind(function(){return this},this)},"ui":function(){return e.extend({"readArea":".cs-field-read","readAreaInner":".cs-field-read-inner > .btn-container","writeArea":".cs-field-write"},this.view.ui)},"onRender":function(){var e=this.view.model.get("options");e&&e.readonly&&(this.view.mode="readonly"),this.state?this.setStateFromMode(this.state,!1,!1):this.setStateFromMode(this.view.mode,!1,!1)},"isMultiFieldView":function(e){return!e.isTKLField&&!e.isNonTKLField||e.alpacaField.options.isMultiFieldItem&&!!e.alpacaField.parent&&!!e.alpacaField.parent.schema.maxItems&&e.alpacaField.parent.schema.maxItems>1},"setViewStateWriteAndEnterEditMode":function(){var e="--{0}:setViewStateWriteAndEnterEditMode {1} {2}";if(l.debug(e,this.constructor.name,"enter")&&console.log(l.last),!this.isReadOnly()){this.setStateWrite(!0,!0),"writeonly"!==this.mode&&this.view.childTKLViews.map(function(e){this.buildHelpers(),this.isMultiFieldView(e)?e._showItemsInWriteMode():"write"!==e.getStatesBehavior().state&&(e.isMultiFieldView(e)?e.alpacaField.parent._showItemsInWriteMode():(e.valuesPulled=!0,e.getStatesBehavior().setViewStateWriteAndEnterEditMode(!1,!1)))},this),l.debug(e,this.constructor.name,"return")&&console.log(l.last)}},"trySetValueAndLeaveEditMode":function(e){this.trySetValue()&&this.setViewReadOnlyAndLeaveEditMode(e,!0)},"setViewReadOnlyAndLeaveEditMode":function(e,t){var i="{0}:setViewReadOnlyAndLeaveEditMode {1} {2}";l.debug(i,this.constructor.name,"enter")&&console.log(l.last),this.isWriteOnly()||(this.setStateRead(e,t),l.debug(i,this.constructor.name,"return")&&console.log(l.last))},"setStateFromMode":function(e,t,i){switch(e){case"read":case"readonly":this.setStateRead(t,i);break;case"write":case"writeonly":this.setStateWrite(t,i);break;default:this.setStateRead(t,i)}},"buildHelpers":function(){a.tklHelpers||(a.tklHelpers={},a.tklHelpers.viewsInWriteMode=[]),this.isMultiFieldView(this.view)?this.view.alpacaField.parent._updateViewsInWriteMode(this.view):this.view.getEditableBehavior()._updateViewsInWriteMode(this.view),a.tklHelpers.tabInView||(a.tklHelpers.tabInView=this.view)},"setStateWrite":function(e,t){var i="---{0}:setStateWrite {1} {2} {3}";l.debug(i,this.constructor.name,"enter",e,t)&&console.log(l.last);var n=this.state;this.state="write",this.view.setStateWrite(e,t,n)||this._setStateWrite(e,t),s.isLandscape()&&this.$el.find(".icon-date_picker").length>0&&this.view.$el.find(".icon-date_picker ").focus(),(this.view.childTKLViews&&this.view.childTKLViews.length||this.view.alpacaField&&this.view.alpacaField.parent&&(this.view.alpacaField.parent.childRelations&&this.view.alpacaField.parent.childRelations.length||this.view.alpacaField.parent.parentRelations&&this.view.alpacaField.parent.parentRelations.length))&&this.buildHelpers(),l.debug(i,this.constructor.name,"return")&&console.log(l.last)},"_setStateWrite":function(e,t){var i="----{0}:_setStateWrite {1} {2} {3}";l.debug(i,this.constructor.name,"enter",e,t)&&console.log(l.last),this.ui.readArea.addClass("binf-hidden"),this.ui.writeArea.removeClass("binf-hidden"),t&&!this.hasWriteFocus()&&this.view.ui.writeField.trigger("focus").trigger("focus"),t&&!this.view.ui.writeField.is(":disabled")&&this.view.ui.writeField.trigger("select"),l.debug(i,this.constructor.name,"return")&&console.log(l.last)},"setStateRead":function(e){if(this.view.options.model.attributes.options&&this.view.options.model.attributes.options.isMultiFieldItem){this.view.$el.closest(".cs-form-set-container.csui-multivalue-block").addClass("csui-multivalue-read-block");var t=this.view.$el.closest(".cs-form-set-container").is("visible");t.length>0&&t.removeClass("csui-multivalue-set-write-mode")}var i="---{0}:setStateRead {1} {2}";l.debug(i,this.constructor.name,"enter")&&console.log(l.last),this.state="read",this.view.setStateRead(e)||this._setStateRead(e),a.tklHelpers&&a.tklHelpers.viewsInWriteMode.length>0&&(-1!==a.tklHelpers.viewsInWriteMode.indexOf(this.view)&&a.tklHelpers.viewsInWriteMode.splice(a.tklHelpers.viewsInWriteMode.indexOf(this.view),1),0===a.tklHelpers.viewsInWriteMode.length&&delete a.tklHelpers),l.debug(i,this.constructor.name,"return")&&console.log(l.last)},"_setStateRead":function(e){var t="----{0}:_setStateRead {1} {2}";l.debug(t,this.constructor.name,"enter")&&console.log(l.last),this.ui.writeArea.addClass("binf-hidden"),this.ui.readArea.removeClass("binf-hidden"),e&&this.view.ui.readField.length>0?this.view.ui.readField.trigger("focus"):e&&this.view.ui.readArea.find("a").length>0&&this.view.ui.readArea.find("a").trigger("focus"),l.debug(t,this.constructor.name,"return")&&console.log(l.last)},"isReadOnly":function(){return this.view.$el.hasClass("cs-booleanfield")?"readonly"===this.view.mode:this.view.options.alpacaField?this.view.options.alpacaField.schema.readonly:"readonly"===this.view.mode},"isWriteOnly":function(){return"writeonly"===this.view.mode},"isStateRead":function(){return"read"===this.state},"isStateWrite":function(){return"write"===this.state},"hasReadFocus":function(){return this.ui.readField.is(":focus")},"hasReadHover":function(){return this.ui.readField.is(":hover")},"hasWriteFocus":function(){return this.ui.writeField.is(":focus")}})}),csui.define("csui/controls/form/impl/fields/csformfield.states.behavior",["csui/controls/form/fields/base/csformfield.states.behavior"],function(e){return e}),csui.define("csui/controls/form/fields/base/csformfield.editable.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/handlebars","csui/lib/marionette","csui/controls/form/pub.sub","csui/utils/log","i18n!csui/controls/form/impl/nls/lang","csui/utils/base"],function(e,t,i,n,l,a,s,o,r){
var c=new s(e.id);return l.Behavior.extend({"constructor":function(e,i){if(l.Behavior.prototype.constructor.apply(this,arguments),this.view=i,this.isIE11=r.isIE11(),this.view.childTKLViews=[],this.view.parentViews=[],this.view.cancelClicked=!1,this.view.isTKLField||(this.view.isNonTKLField=!0),this.tabableElements=[],this.tabContentSelectors="input:visible, .cs-field-write button:visible:not(:disabled),textarea:visible, .icon-date_picker:visible, .csui-multilingual-icon:visible",e.tabContentSelectors&&(e.overrideTabContentSelectors?this.tabContentSelectors=e.tabContentSelectors:this.tabContentSelectors+=", "+e.tabContentSelectors),this.view.formView=this.view.options.alpacaField&&this.view.options.alpacaField.connector.config.formView,this.view.isCustomView=!(!this.view.formView||!this.view.formView.options.customView),this.view.options.alpacaField){var n,s;this.view.isCustomView?n=this.view.options.alpacaField.schema.fieldID:(s=this.view.options.alpacaField.parent&&this.view.options.alpacaField.parent.parent,s&&(s=s.parent&&s.parent.options.isSetType),n=this.view.options.alpacaField.propertyId||this.view.options.alpacaField.parent&&this.view.options.alpacaField.parent.propertyId),n&&(s&&(this.isMultiFieldView()?n+="_"+this.view.options.alpacaField.parent.parent.name.split("_").pop():n+="_"+this.view.options.alpacaField.parent.name.split("_").pop()),n+=this.view.formView.cid,a.off(n+"tkl:buildRelation"),this.listenTo(a,n+"tkl:buildRelation",this.buildRelation)),this.listenTo(this.view,"selection:changed",function(){this.view.trigger("parenttkl:changed",this.view.childTKLViews)}),this.listenTo(this.view,"parenttkl:changed",this.changeChildrenValues)}this.view.getEditableBehavior=t.bind(function(){return this},this),this.listenTo(this.view,"field:changed",function(){this.view.isValidField=!1}),this.view.listenTo(this.view,"render disable:field",t.bind(function(){this.disableField()},this)),this.view.listenTo(this.view.formView,"request:completed",t.bind(function(){this.view.formView&&this.view.formView.propagatedView&&this.isEventPending&&(this.view=this.view.formView.propagatedView,this.setViewStateWriteAndEnterEditMode())},this)),this.view.listenTo(this.view.formView,"update:form",t.bind(function(){this.trySetValue()},this))},"ui":function(){return t.extend({"editIcon":".csui-icon-edit.icon-edit","cancelIcon":".edit-cancel","icons":".inline-edit-icon","readArea":".cs-field-read","readAreaInner":".cs-field-read-inner","writeArea":".cs-field-write","applyAll":".apply-all","globeIcon":".csui-multilingual-icon"},this.view.ui)},"events":{"click @ui.editIcon":"onEditIconClicked","mouseleave @ui.editIcon":"onMouseOutRead","mousedown @ui.applyAll":"onApplyAllClicked","keydown @ui.applyAll":"onApplyAllClicked","click @ui.cancelIcon":"onCancelClicked","mousedown @ui.cancelIcon":"onMouseDownCancel","touchend @ui.cancelIcon":"onMouseDownCancel","mouseup @ui.readField":"onMouseupRead","click @ui.readArea":"onReadAreaClicked","mouseleave @ui.readArea":"onMouseOutRead","mouseover @ui.readArea":"onMouseOverRead","focusout @ui.writeField":"onFocusOutWrite","focusout @ui.globeIcon":"onFocusOutWrite","focusout @ui.writeArea":"onFocusOutWriteArea","focusin @ui.writeField":"onFocusInWrite","focusout @ui.browseIcon":"onFocusOutWrite","focusin @ui.browseIcon":"onFocusInWrite","focusout @ui.clearIcon":"onFocusOutWrite","focusin @ui.clearIcon":"onFocusInWrite","focusin @ui.subInputField":"actionOnFocusIn","focusout @ui.readField":"onFocusOutRead","focusin @ui.readField":"onFocusInRead","keypress @ui.writeField":"onChangeWriteField","input @ui.writeField":"onChangeWriteField","change @ui.writeField":"onChangeWriteField","paste":"onKeyPress","keypress":"onKeyPress","keydown":"onKeyDown","mousedown":"onMouseDown","touchend":"onMouseDown"},"onRender":function(){this.hasReadFocus()?this._showEditIcon():this._hideEditIcon(),"writeonly"===this.view.mode&&this._hideCancelIcon(),this.mouseDownCancel=!1},"disableField":function(){this.view.ui.writeField&&this.view&&this.view.alpacaField&&this.view.alpacaField.schema&&this.view.alpacaField.schema.disabled&&(this.view.ui.writeField.prop("disabled",!1),this.view.ui.writeField.attr("readonly",!0),this.view.ui.writeField.attr("aria-disabled",!0),this.view.ui.writeField.addClass("csui-formfield-disabled"))},"onDestroy":function(){this.unsetCheckShowEditIcon()},"buildRelation":function(e){this.isMultiFieldView(e)?(-1===this.view.childTKLViews.indexOf(e.alpacaField.parent)&&this.view.childTKLViews.push(e.alpacaField.parent),e.alpacaField.parent.parentRelations=e.alpacaField.parent.parentRelations?e.alpacaField.parent.parentRelations:[],-1===e.alpacaField.parent.parentRelations.indexOf(this.view)&&e.alpacaField.parent.parentRelations.push(this.view)):-1===this.view.childTKLViews.push(e)&&this.view.childTKLViews.push(e),e.parentViews=e.parentViews?e.parentViews:[],-1===e.parentViews.indexOf(this.view)&&e.parentViews.push(this.view)},"isMultiFieldView":function(e){e||(e=this.view);var t=e.alpacaField||e.options.alpacaField;return!e.isTKLField&&!e.isNonTKLField||t.options.isMultiFieldItem&&!!t.parent&&!!t.parent.schema.maxItems&&t.parent.schema.maxItems>1},"isDropDownOpen":function(){return void 0!==this.view.alpacaField&&("select"!==this.view.alpacaField.type&&this.view.options.isDropDownOpen||"select"===this.view.alpacaField.type&&!!this.view.isDropdownOpen&&this.view.isDropdownOpen())},"onMouseDown":function(){this.escapePressed=!1,this.mouseDownCancel=!1,this.view.cancelClicked=!1,this.view.alpacaField&&(this.view.alpacaField.parent.cancelClicked=!1),this.isIE11&&(this.ui.writeField&&!this.ui.writeField.val()?this.tabPressed=void 0:this.tabPressed=!1)},"cancelViewInEditMode":function(e){e._resetOldValue();var t=e.view.alpacaField,i=!(!t||!t.schema.required||t.options.validate),n=this.view.$el.find(".binf-datetimepicker-widget");r.isLandscape()&&n.length>0&&n.hide(),i&&(t.schema.required=!1,t.options.validate=!0),t&&t.setValueAndValidate(e.view.oldVal,!0),i&&(t.schema.required=!0,t.options.validate=!1),this.escapePressed||e.setViewReadOnlyAndLeaveEditMode(!0,!0),this.escapePressed=!1,e.$el.removeClass("cs-formfield-invalid")},"onCancelClicked":function(){var e=this;if(a.tklHelpers&&a.tklHelpers.viewsInWriteMode.length>0)for(var t,i=a.tklHelpers.viewsInWriteMode.length-1;i>=0&&a.tklHelpers;i--)(t=a.tklHelpers.viewsInWriteMode[i])&&(t.alpacaField.parent.cancelClicked=!0,e.isMultiFieldView(t)?t.alpacaField.parent.getFieldEl().find(".csui-bulk-edit-cancel").trigger("click"):t.getEditableBehavior().cancelViewInEditMode(t.getEditableBehavior()),t.cancelClicked=!1);else this.view.cancelClicked=!0,this.cancelViewInEditMode(this),this.view.cancelClicked=!1;a.tklHelpers&&0===a.tklHelpers.viewsInWriteMode.length&&delete a.tklHelpers},"onMouseDownCancel":function(e){this.mouseDownCancel=!0,e.stopPropagation()},"onKeyPress":function(e){if(!this.view.onKeyPress||!this.view.onKeyPress(e))return 13===e.keyCode&&(this.view.getStatesBehavior().isStateRead()&&this.view.allowEditOnEnter()?this.setViewStateWriteAndEnterEditMode():this.view.getStatesBehavior().isStateWrite()&&this.view.allowSaveOnEnter()&&(e.preventDefault(),e.stopPropagation(),this.trySetValueAndLeaveEditMode(!0,!0))),!0},"onKeyDown":function(e){var t=!1;if(this.escapePressed=!1,this.tabPressed=!1,27===e.keyCode)this.view.getStatesBehavior().isStateWrite()&&(this.escapePressed=!0,"writeonly"!==this.view.mode?(t=!0,this.cancelViewInEditMode(this)):"writeonly"===this.view.mode&&this.trySetValue(),this.isDropDownOpen()||(t=!this.view.getStatesBehavior().isWriteOnly(),this.setViewReadOnlyAndLeaveEditMode(!0,!0)));else if(113===e.keyCode)this.view.getStatesBehavior().isStateRead()?this.setViewStateWriteAndEnterEditMode():this.view.getStatesBehavior().isStateWrite()&&((null!==this.view.getOldValue()?this.view.getOldValue().toString():"")!==this.view.getEditValue()&&this.changeChildrenValues(this.view.childTKLViews),this.validateRelatedFields(),this.trySetValueAndLeaveEditMode(!0,!0));else if(9===e.keyCode){if(this.view.alpacaField&&"create"===this.view.alpacaField.options.mode){var n=i.Event("tab:content:field:changed");this.view.$el.trigger(n)}var l=this.view.options.mode||this.view.alpacaField&&this.view.alpacaField.options.mode;"create"!==l&&this.view.getStatesBehavior().isStateWrite()&&this.moveTab(e),this.tabPressed=!0}return!t},"_updateTabableElements":function(e){this.tabableElements.length=0;var n=this.view.alpacaField?this.view.alpacaField.containerItemEl.closest(".cs-form"):this.view.$el.closest(".cs-form");this.tabableElements=n.find(this.tabContentSelectors).filter(function(t,n){var l=!0;return i(e.target).closest(".cs-form-set")[0]?l=i(e.target).closest(".cs-form-set")[0]===i(n).closest(".cs-form-set")[0]:i(n).is(":checkbox")&&(l=!1),l}),this.view.alpacaField&&"otcs_node_picker"===this.view.alpacaField.type&&(this.tabableElements=t.filter(this.tabableElements,function(e){return!t.contains(e.classList,"cs-nodepicker-input")}))},"moveTab":function(e){this._updateTabableElements(e);var t=i(this.tabableElements).index(e.target),n=(t===this.tabableElements.length-1||e.shiftKey&&0===t)&&"writeonly"===this.view.mode;return e.shiftKey?t>0?t-=1:t=this.tabableElements.length-1:t>=this.tabableElements.length-1?t=0:t+=1,n||(this.tabableElements[t].focus(),e.preventDefault(),e.stopPropagation()),this.tabableElements[t]},"_showApplyAll":function(e){var t=this.$el.find(".icon-container");if(t.hasClass("binf-hidden")&&(t.first().removeClass("binf-hidden"),t.removeAttr("data-cstabindex"),t.removeAttr("tabindex")),this.view.options.alpaca&&"create"===this.view.options.alpaca.options.mode&&0===this.view.$el.closest(".csui-general-form").length){var n=this.$(e.target).parents(".cs-field-write").parent().find(".csui-icon.apply-all"),l=this.$el.closest(".cs-metadata-properties").find(".csui-icon.apply-all").not(".binf-hidden");if(l=l.filter(function(e,t){return t=t!==n[0]?t:void 0}),l&&l.length>0&&(l.addClass("binf-hidden"),l.parent().addClass("binf-hidden")),n.hasClass("binf-hidden")){n.removeAttr("style"),n.removeClass("binf-hidden"),n.prop("tabindex","0"),n.parent().hasClass("binf-hidden")&&n.parent().removeClass("binf-hidden");var a=i.Event("tab:content:field:changed");this.view.$el.trigger(a)}}},"_hideApplyAll":function(e){if(this.$el&&0===this.$el.find(".apply-all").not(".binf-hidden").length){var t=document.querySelectorAll(".cs-form .apply-all:not(.binf-hidden)");t.length>0&&t[0].classList.add("binf-hidden")}else if(this.escapePressed){var i=this.$el.find(".icon-container");i[0].classList.add("binf-hidden"),i.attr("data-cstabindex",-1),i.attr("tabindex",-1)}},"_updateTabPositionFocus":function(e){var t,n,l,a,s;for(t=i(document.querySelectorAll(".binf-tab-content")).children(),n=t.find("input, textarea, button.binf-dropdown-toggle"),a=n.length,s=0;s<a&&(!(l=n[s])||!i(l).is(i(e.currentTarget).find("input,textarea,button:not(:disabled)").first()));)s++;s<=a&&i(n[s+1]).trigger("focus")},"showAppliedTick":function(e,t){var n=e.target;n.callback=t,n.eve=e,i(n).fadeOut(100,function(){i(this).removeClass(),i(this).addClass("csui-icon applied_done"),i(this).fadeIn(100,function(){setTimeout(function(e){i(e).fadeOut(800,function(){i(this).removeClass(),i(this).addClass("csui-icon apply-all binf-hidden"),this.callback(this.eve)})},1e3,this)})}),i(".metadata-sidebar .metadata-sidebar-fadeout").fadeOut(2e3,function(){i(".metadata-sidebar .cs-list-group .arrow-overlay").removeClass("metadata-sidebar-arrow-overlay"),i(".metadata-sidebar .cs-list-group").removeClass("metadata-sidebar-cs-list-group"),i(this).remove()})},"onApplyAllClicked":function(e){("keydown"===e.type&&13===e.keyCode||"mousedown"===e.type)&&(this.view.selectField&&(this.view.trySetValue()?this.$el.removeClass("cs-formfield-invalid"):this.$el.addClass("cs-formfield-invalid")),setTimeout(function(n){if(i(e.currentTarget).parents(".alpaca-container-item")&&0===i(e.currentTarget).parents(".alpaca-container-item").find(".cs-formfield-invalid").length){var l=n.view.getValue();l instanceof Object&&(l=l.id);var a={"fieldvalue":null===l?"":l.toString(),"fieldpath":n.view.alpacaField&&n.view.alpacaField.name,"action":n.showAppliedTick,"fieldevent":e,"callback":n._updateTabPositionFocus};i(".metadata-sidebar .cs-list-group").addClass("metadata-sidebar-cs-list-group"),i(".metadata-sidebar .cs-list-group .arrow-overlay").addClass("metadata-sidebar-arrow-overlay"),i("<div/>",{"class":"metadata-sidebar-fadeout"}).appendTo(i(".metadata-sidebar .cs-list-group"));var s=i.Event("click:applyAll");if(t.extend(s,a),n.$el.trigger(s),n.view&&n.view.alpacaField&&"tkl"===n.view.alpacaField.type){var o=function(e){e.parentViews.length>0&&t.each(e.parentViews,function(e){n.view.isMultiFieldView(e)?(a.fieldpath=e.propertyId,a.fieldvalue=e.getValue(),t.extend(s,a),n.$el.trigger(s),o(e.children[0].fieldView)):(a.fieldpath=e.alpacaField?e.alpacaField.name:e.view.field.name,a.fieldvalue=e.getValue()instanceof Object?e.getValue().id:e.getValue().toString(),t.extend(s,a),n.$el.trigger(s),o(e))})};o(n.view);var r=function(e){e.children.length>0&&t.each(e.children,function(e){n.view.isMultiFieldView(e)?(a.fieldpath=e.propertyId,a.fieldvalue=e.getValue(),t.extend(s,a),n.$el.trigger(s),o(e.children[0].fieldView)):(a.fieldpath=e.alpacaField?e.alpacaField.name:e.view.field.name,a.fieldvalue=e.getValue()instanceof Object?e.getValue().id:e.getValue().toString(),t.extend(s,a),n.$el.trigger(s),r(e))})};r(n.view)}}},100,this))},"onChangeWriteField":function(e){(this.isIE11||"keypress"!==e.type)&&(this.isIE11&&"input"===e.type&&(void 0===this.tabPressed||this.tabPressed)||("write"===this.view.getStatesBehavior().state&&(this._showApplyAll(e),setTimeout(t.bind(this.adjustSetRows,this),100)),this.escapePressed&&"write"===this.view.getStatesBehavior().state&&this._hideApplyAll(e)))},"onFocusInWrite":function(e){return this.view&&this.view.multiLingualForm&&this.view.multiLingualForm.$popover&&this.view.multiLingualForm.$popover.is(":visible")||this.checkAndScrollElemToViewport(e.currentTarget),this.isIE11&&(""===this.ui.writeField.val()?this.tabPressed=void 0:void 0===this.ui.writeField.val()?this.tabPressed=void 0:this.tabPressed=!1),this._hideApplyAll(e),!1},"onFocusOutWrite":function(e){c.debug("onFocusOutWrite")&&console.log(c.last);var t;if(i(e.target).parents(".csui-normal-scrolling").css("overflow","auto"),!this.view.selectField){if(c.debug("onFocusOutWrite value {0}",e.target.value)&&console.log(c.last),""!==e.target.value){if(this.view.getItemPicked){if(c.debug("onFocusOutWrite picked item {0}",this.view.getItemPicked())&&console.log(c.last),this.view.alpacaField&&this.view.alpacaField.refreshValidationState(!1),!this.view.getItemPicked()){this.$el.addClass("cs-formfield-invalid");var n=this.ui.writeField&&this.ui.writeField.val();return this.$el.hasClass("cs-formfield-invalid")&&this.preVal!==n&&(this.$el.find("input.typeahead").select(),this.preVal=n),void this.$el.trigger(i.Event("field:invalid"))}this.$el.removeClass("cs-formfield-invalid")}}else this.isIE11&&(""===this.ui.writeField.val()?this.tabPressed=void 0:void 0===this.ui.writeField.val()?this.tabPressed=void 0:this.tabPressed=!1);if("writeonly"!==this.view.mode){if(this.view.cancelClicked=this.view.alpacaField?this.isCancelClicked(this.view.alpacaField.parent):this.view.cancelClicked,!this.view.isReadyToSave()||this.escapePressed||this.mouseDownCancel)return void(this.mouseDownCancel=!1);if(this.view.cancelClicked)return void this.onCancelClicked();if(this.view.isValidField=!this.view.$el.closest(".csui-custom-view-search").length&&!!this.view.oldVal&&this.view.curVal===this.view.getEditValue()&&!this.view.$el.closest(".alpaca-field").find(".binf-help-block").length,this.view.isValidField?t=this.view.isValidField&&this.validateRelatedFields()&&this.trySetValue():this.isRelatedFieldInFocus(e.relatedTarget)?this.view.oldVal=this.view.curVal:(this.changeChildrenValues(this.view.childTKLViews,this.view,(null!==this.view.getOldValue()?this.view.getOldValue().toString():"")!==this.view.getEditValue()),t=this.validateRelatedFields()&&this.trySetValue()),this.isRelatedFieldInFocus(e.relatedTarget)&&(this.view.alpacaField&&"select"!==this.view.alpacaField.type||this.view.alpacaField&&"otcs_user"!==this.view.alpacaField.type))return void((!!this.view.getOldValue()&&this.view.getOldValue().toString())!==(this.view.getEditValue()&&this.view.getEditValue().toString())?this.changeChildrenValues(this.view.childTKLViews):this.changeChildrenValues(this.view.childTKLViews,void 0,!1))}else t=this.trySetValue();return t&&(this.$el.removeClass("cs-formfield-invalid"),this.setViewReadOnlyAndLeaveEditMode(!0,!1),"writeonly"===this.view.mode&&0===document.querySelectorAll(".binf-has-error").length&&(i(".metadata-validation-error").hide(),i("div").removeClass("show-validation-error"))),this.view.getOldValue()&&this.view.getOldValue()!==this.view.getEditValue()&&this.view.getEditableBehavior().changeChildrenValues(this.view.childTKLViews),void(a.tklHelpers&&0===a.tklHelpers.viewsInWriteMode.length&&delete a.tklHelpers)}var l=this;setTimeout(function(){if(l.view.isReadyToSave()||l.escapePressed||l.mouseDownCancel)return void(l.mouseDownCancel=!1);if(l.isRelatedFieldInFocus(e.relatedTarget)||(t=l.validateRelatedFields()&&l.trySetValue()),t){if(l.$el.removeClass("cs-formfield-invalid"),l.isRelatedFieldInFocus(e.relatedTarget))return void(l.view.getOldValue()&&l.view.getOldValue()!==l.view.getEditValue()&&l.changeChildrenValues(l.view.childTKLViews,void 0,!1));l.setViewReadOnlyAndLeaveEditMode(!0,!1),"writeonly"===l.view.mode&&0===document.querySelectorAll(".binf-has-error").length&&(i(".metadata-validation-error").hide(),i("div").removeClass("show-validation-error"))}else l.isRelatedFieldInFocus(e.relatedTarget)||l.$el.addClass("cs-formfield-invalid");a.tklHelpers&&0===a.tklHelpers.viewsInWriteMode.length&&delete a.tklHelpers},0)},"validateRelatedFields":function(){var e,t=!0;if(a.tklHelpers&&a.tklHelpers.viewsInWriteMode.length>0&&this.view.childTKLViews.length||this.view.parentViews.length)for(var i=0;i<a.tklHelpers.viewsInWriteMode.length;i++)e=a.tklHelpers.viewsInWriteMode[i],a.tklHelpers.viewsInWriteMode[i]!==this.view&&(t?t=e.alpacaField.setValueAndValidate(e.getEditValue(),!0):e.alpacaField.setValueAndValidate(e.getEditValue(),!0));return t},"isCancelClicked":function(e,t){for(var n=t&&t.relatedTarget&&i(t.relatedTarget).hasClass("csui-icon-edit"),l=[],s=0;a.tklHelpers&&s<a.tklHelpers.viewsInWriteMode.length;s++){var o=a.tklHelpers.viewsInWriteMode[s];if(o.$el.is(":visible")){if(this.isMultiFieldView(o)){if(o.alpacaField.parent.cancelClicked){n=!0;break}}else if(o.getEditableBehavior().mouseDownCancel){n=!0;break}}else l.push(o)}return a.tklHelpers&&l.length&&(a.tklHelpers.viewsInWriteMode=a.tklHelpers.viewsInWriteMode.filter(function(e){return-1===l.indexOf(e)})),n||e&&e.cancelClicked},"getFieldIndex":function(e){if(e.alpacaField&&e.alpacaField.options.isMultiFieldItem&&e.alpacaField.parent.schema.maxItems&&1!==e.alpacaField.parent.schema.maxItems)return e.alpacaField.parent.children.indexOf(e.alpacaField)},"getRowIndex":function(e){e||(e=this.view.alpacaField.parent),this.isMultiFieldView(e)||(e=e.alpacaField.parent);var t=e.parent;return t&&t.parent?t.parent.children.indexOf(t):-1},"changeChildrenValues":function(e,i,n){var l,a,s=this.options.dataId?this:this.view,o=!1,r=-1!==s.options.dataId.indexOf("x")&&1===s.options.dataId.match(/x/g).length;t.each(e,function(e){if(!r||this.getEditableBehavior().getRowIndex()===this.getEditableBehavior().getRowIndex(e))if(this.getEditableBehavior().isMultiFieldView(this)){if(l=this.getEditableBehavior().getFieldIndex(this),a=this.getEditableBehavior().normalizeViews(e),r&&parseInt(this.options.dataId.split("_")[2])!==parseInt(a[0].options.dataId.split("_")[2]))return;a[0].alpacaField.options.isMultiFieldItem?(a.forEach(function(e){e.getEditableBehavior().changeChildrenValues(e.children,e,!1),e.valuesPulled=!1}),a[l]&&(e=a[l],o=void 0===n||n,this.getEditableBehavior().changeChildrenValues(e.children,e))):0===l&&(e=a[l],o=!0,this.getEditableBehavior().changeChildrenValues(e.children,e)),o&&(e.valuesPulled=!1,e.ui.writeField.val(""),e.setValue("",!0),e.needRerender=!0,e.options.enum.length=0,e.trigger("tkl:refresh"))}else{if(a=this.getEditableBehavior().normalizeViews(e),r&&parseInt(this.options.dataId.split("_")[2])!==parseInt(a[0].options.dataId.split("_")[2]))return;var t=this;o=void 0===n||n,a.forEach(function(e){t.getEditableBehavior().changeChildrenValues(e.children,e,n),e.valuesPulled=!1,o&&(e.isValidTKLState=!0,e.options.alpacaField.isRequired()?e.isValidTKLState=!1:(e.$el.parents(".binf-form-group.alpaca-field").removeClass("binf-has-error alpaca-invalid"),e.$el.removeClass("cs-formfield-invalid")),e.$el.parents(".binf-form-group.alpaca-field").find(".binf-help-block.alpaca-message.alpaca-message-custom").hide(),e.setValue(""),e.options.alpaca.schema.enum.length=0,e.trigger("tkl:refresh"))})}},i||s)},"isRelatedFieldInFocus":function(e){return e=e||document.activeElement,a.tklHelpers?a.tklHelpers.viewsInWriteMode.some(function(t){return t.ui.writeField[0]===e}):i.contains(this.view.$el[0],e)},"normalizeViews":function(e){var t=[];return e.isTKLField||e.isNonTKLField?t.push(e):this.isMultiFieldView(e)?e.children.map(function(e){t.push(e.fieldView)}):t.push(e.children[0].fieldView),t},"onFocusOutWriteArea":function(e){var t=i(e.delegateTarget);r.isLandscape()&&t.find(".binf-datetimepicker-widget").length>0&&t.find(".binf-datetimepicker-widget").hide()},"onFocusInRead":function(e){this.checkAndScrollElemToViewport(e.currentTarget),this._showEditIcon()},"actionOnFocusIn":function(e){this.checkAndScrollElemToViewport(e.currentTarget)},"checkAndScrollElemToViewport":function(e){r.checkAndScrollElemToViewport(e)},"onFocusOutRead":function(e){if(this.view.isBooleanField||e.stopPropagation(),!this.view.getStatesBehavior().isReadOnly()&&!this.view.getStatesBehavior().isWriteOnly()){if(this._hideEditIcon(),this.$el.closest(".alpaca-container-item-last").length>0){this.$el.closest(".alpaca-field-array").find(".csui-array-bulk-edit-noset").not(".binf-hidden").addClass("binf-hidden")}clearTimeout(this.mouseOverTimeout),this.mouseOverTimeout=null}},"onMouseOverRead":function(){this.view.getStatesBehavior().isReadOnly()||"create"===this.options.mode||this.mouseOverTimeout||0!==document.querySelectorAll(".cs-form .cs-formfield-invalid").length||(this.mouseOverTimeout=setTimeout(t.bind(this._showEditIcon,this),300))},"onMouseOutRead":function(){this.hasReadFocus()||this.view.getStatesBehavior().isWriteOnly()||(this._hideEditIcon(),clearTimeout(this.mouseOverTimeout),this.mouseOverTimeout=null)},"onEditIconClicked":function(e){e.stopImmediatePropagation(),this.setViewStateWriteAndEnterEditMode()},"onReadAreaClicked":function(e){return!this.view.isBooleanField&&("create"===this.options.mode||0!==document.querySelectorAll(".cs-form .cs-formfield-invalid").length?(document.querySelector(".cs-form .cs-formfield-invalid input, .cs-form .cs-formfield-invalid .cs-field-write button").focus(),!1):!!(!this.view.getStatesBehavior().isReadOnly()||this.view.alpacaField&&this.view.alpacaField.options&&"url"===this.view.alpacaField.options.type)&&void((e.target.classList.contains("icon-edit")||this.view.allowEditOnClickReadArea(e))&&(e.stopImmediatePropagation(),e.preventDefault(),this.setViewStateWriteAndEnterEditMode())))},"onMouseupRead":function(e){e.stopPropagation(),e.preventDefault(),this.view.ui.readField.trigger("focus")},"setCheckShowEditIcon":function(){this.checkShowEditIcon=setInterval(t.bind(this.checkShowEditIcon,this),10)},"unsetCheckShowEditIcon":function(){clearInterval(this.checkShowEditIcon)},"checkShowEditIcon":function(){this.view.getStatesBehavior().isStateRead()&&this.hasReadFocus()},"buildHelpers":function(){a.tklHelpers||(a.tklHelpers={},a.tklHelpers.viewsInWriteMode=[]),this._updateViewsInWriteMode(this.view),a.tklHelpers.tabInView||(a.tklHelpers.tabInView=this.view)},"setViewStateWriteAndEnterEditMode":function(e){if(this.view.cancelClicked=!1,this.view.formView&&(this.view.formView.isDataUpdating||(this.isEventPending=!1),this.view.formView.isDataUpdating))return this.view.formView.options.metadataView&&!this.view.formView.options.metadataView.blockingView.$el.is(":visible")&&(this.view.formView.options.metadataView.blockActions(),this.isEventPending=!0,this.view.formView.triggerMethod("request:processing",this.view)),!1;if(!this.view.getStatesBehavior().isReadOnly()){var t=!1!==e||e;if(this.view.getStatesBehavior().setStateWrite(!1,t),r.isLandscape()&&this.$el.find(".icon-date_picker").length>0&&this.view.$el.find(".icon-date_picker").focus(),this.view.handleToggle&&this.view.handleToggle(),"writeonly"!==this.mode){(this.view.alpacaField&&"tkl"===this.view.alpacaField.type?this.view.children:this.view.childTKLViews).map(function(e){this.buildHelpers(),this.isMultiFieldView(e)?(e=e._showItemsInWriteMode?e:e.alpacaField.parent,e._showItemsInWriteMode(),e.getFieldEl().find(".csui-array-bulk-edit").removeClass("binf-hidden"),e.getFieldEl().find(".csui-bulk-edit-cancel").removeClass("binf-hidden"),e.getFieldEl().find(".csui-bulk-edit-submit").removeClass("binf-hidden"),e.getFieldEl().find(".csui-bulk-edit").addClass("binf-hidden")):"write"!==e.getStatesBehavior().state&&(e.isMultiFieldView(e)?e.alpacaField.parent._showItemsInWriteMode():e.getEditableBehavior().setViewStateWriteAndEnterEditMode(!1))},this)}this.view._beforeTurnsToWriteMode&&this.view._beforeTurnsToWriteMode(),(this.view.isTextAreaField||this.view.isMultilingualField)&&this.view.metadataLanguages&&this.view.metadataLanguages.enabled&&this.view._openMLFlyoutInEditMode()}},"trySetValueAndLeaveEditMode":function(e,t){var i=null!==this.view.getOldValue()&&void 0!==this.view.getOldValue()?this.view.getOldValue().toString():"";this.changeChildrenValues(this.view.childTKLViews,this.view,i!==this.view.getEditValue());var n=!0,l=this;(a.tklHelpers&&a.tklHelpers.viewsInWriteMode.length?a.tklHelpers.viewsInWriteMode:this.view.childTKLViews).map(function(e){e!==l.view&&(n=e.alpacaField&&e.alpacaField.setValueAndValidate(e.getEditValue(),!0)&&n)}),n&&this.trySetValue()&&this.setViewReadOnlyAndLeaveEditMode(e,t)},"setViewReadOnlyAndLeaveEditMode":function(e,t){if(!this.view.getStatesBehavior().isWriteOnly()){this.view._beforeTurnsToReadMode&&this.view._beforeTurnsToReadMode(),this.view.getStatesBehavior().setStateRead(t);var i,n,l=a.tklHelpers&&a.tklHelpers.viewsInWriteMode.length?a.tklHelpers.viewsInWriteMode:this.view.childTKLViews;if(l&&l.length>0){i=this.isCancelClicked(this.view.alpacaField.parent)||this.escapePressed;for(var s=l.length-1;s>=0;s--)(n=l[s])&&(this.isMultiFieldView(n)?(n=n.alpacaField?n.alpacaField.parent:n,i?(n.getFieldEl().find(".csui-bulk-edit-cancel").trigger("click"),n.cancelClicked=!1,this.view.alpacaField.parent&&(this.view.alpacaField.parent.cancelClicked=!1)):n.children[0]&&"tkl"===n.children[0].type?n._doBulkSubmitActionTKL(!0):n._doBulkSubmitAction()):((n.alpacaField.parent.cancelClicked||this.escapePressed)&&"write"===n.getStatesBehavior().state&&(n.getEditableBehavior().escapePressed=!1,n.cancelClicked=!1,n.getEditableBehavior()._resetOldValue(),"tkl"===n.alpacaField.type&&(n.isValidTKLState=!0),n.alpacaField.refreshValidationState(),n.$el.removeClass("cs-formfield-invalid")),n.isTKLField&&(n.oldVal=n.curVal),n.getStatesBehavior().setStateRead(t)))}this.view.cancelClicked=!1}},"trySetValue":function(){var e=this.view.trySetValue?this.view.trySetValue():this._trySetValue();return this.view.isValidField=e,e},"_showCancelIcon":function(){this.ui.cancelIcon.show()},"_hideCancelIcon":function(){this.ui.cancelIcon.hide()},"_showEditIcon":function(){this.view.getStatesBehavior().isReadOnly()||this._isEditIconVisible()||this.ui.editIcon.removeClass("binf-hidden")},"_hideEditIcon":function(){this.ui.editIcon.addClass("binf-hidden")},"_isEditIconVisible":function(){return!this.view.getStatesBehavior().isStateWrite()&&!this.ui.editIcon.hasClass("binf-hidden")},"_isCancelIconVisible":function(){return this.ui.cancelIcon.is(":visible")},"hasReadFocus":function(){return this.ui.readField.is(":focus")},"hasReadHover":function(){return this.ui.readField.is(":hover")},"hasWriteFocus":function(){return this.ui.writeField.is(":focus")},"_updateViewsInWriteMode":function(e){setTimeout(function(){a.tklHelpers||(a.tklHelpers={},a.tklHelpers.viewsInWriteMode=[]),e.isCustomView||-1!==a.tklHelpers.viewsInWriteMode.indexOf(e)||(e.cancelClicked=!1,e.alpacaField.parent&&(e.alpacaField.parent.cancelClicked=!1),a.tklHelpers.viewsInWriteMode.push(e)),a.tklHelpers.tabInView||(a.tklHelpers.tabInView=e)},151)},"_trySetValue":function(){var e=null!==this.view.getEditValue()&&void 0!==this.view.getEditValue()?this.view.getEditValue():"",t=null!==this.view.getValue()&&void 0!==this.view.getValue()?this.view.getValue().toString():"",i=!0,n=this.view.$el.hasClass("cs-formfield-invalid"),l=this.view.isReadyToSave(),s=this.view.alpacaField&&this.view.alpacaField.schema.required,o=this.view.alpacaField&&this.view.alpacaField.options.validate,r="writeonly"===this.view.mode,c=""===t;if(this.view.alpacaField&&"otcs_user"===this.view.alpacaField.type&&(i=this.view.getItemPicked&&this.view.getItemPicked()),l&&(e!==t||r||n||!r&&s&&o&&c)||this.view.mlDataChanged){if(this.view.mlDataChanged){var d=this.view.formView.node&&this.view.formView.node.get("description_multilingual");this.view.setValue(e,!0,{"silent":!0}),this.view.model.trigger("change",this.view.model,d)}else i=this.view.setValue(e,!0);i&&a.tklHelpers&&a.tklHelpers.viewsInWriteMode.map(function(e){e.isTKLField&&(e.oldVal=e.curVal,e.valuesPulled=!1)}),!i&&this.view.ui.writeField.select}return i},"_resetOldValue":function(){if(!this.view.resetOldValueAfterCancel()){var e=this.view.getValue();this.view.getItemPicked&&!1===this.view.getItemPicked()||(e=e instanceof Object?e.display_name:e,this.ui.writeField.val(e)),void 0!==this.view.setItemPicked&&this.view.setItemPicked(!0)}this.$el.hasClass("cs-formfield-invalid")&&this.$el.removeClass("cs-formfield-invalid")},"adjustSetRows":function(){var e=this.$el.parents(".cs-form-set-container.csui-hoveredScrollable").find(".csui-set-scroll-container-child"),t=this.$el.parents().closest(".cs-form-set-container.csui-hoveredScrollable .csui-scrollablecols");void 0!==e&&void 0!==t&&e.scrollLeft(t.scrollLeft())}})}),csui.define("csui/controls/form/impl/fields/csformfield.editable.behavior",["csui/controls/form/fields/base/csformfield.editable.behavior"],function(e){return e}),csui.define("csui/controls/form/fields/base/csformarrayfield.editable.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/handlebars","csui/lib/marionette","csui/controls/form/impl/fields/csformfield.editable.behavior","csui/controls/form/pub.sub","csui/utils/log","csui/utils/base"],function(e,t,i,n,l,a,s,o,r){"use strict";return a.extend({"jQuery":i,"constructor":function(e,i){a.prototype.constructor.apply(this,arguments),this.view=i,this.tabContentSelectors+=", button.alpaca-array-actionbar-action:visible:not(:disabled),button.csui-icon.apply-all:visible,span.cs-clear-icon:visible,span.cs-browse-icon:visible",e.tabContentSelectors&&(e.overrideTabContentSelectors?this.tabContentSelectors=e.tabContentSelectors:this.tabContentSelectors+=", "+e.tabContentSelectors);var n=this.view.options.alpacaField.name.split("_")[0]+"_"+this.view.options.alpacaField.name.split("_")[1];n+=this.view.formView.cid,s.off(n+"tkl:buildRelation"),this.listenTo(s,n+"tkl:buildRelation",this.buildRelation),this.view.listenTo(this.view.formView,"request:completed",t.bind(function(){this.view.formView&&this.view.formView.propagatedView&&this.view.formView.propagatedView.isEventPending&&this.propagatedEvent&&(this.view=this.view.formView.propagatedView,this.onReadAreaClicked(this.propagatedEvent))},this)),this.view.getEditableBehavior=t.bind(function(){return this},this)},"ui":function(){return t.extend({},{"editIcon":".csui-icon-edit.icon-edit",
"cancelIcon":".edit-cancel","icons":".inline-edit-icon","readArea":".cs-field-read","readAreaInner":".cs-field-read-inner","writeArea":".cs-field-write"},this.view.ui)},"events":function(){return t.extend({},a.prototype.events,{"mouseenter @ui.writeArea":"mouseInFieldArea","focusin @ui.flagWriteField":"actionOnFocusIn","mouseleave @ui.writeArea":"mouseOutFieldArea","focusin @ui.subInputField":"actionOnFocusIn"})},"buildRelation":function(e){this.view.alpacaField.parent.childRelations||(this.view.alpacaField.parent.childRelations=[]),this.view.getEditableBehavior().isMultiFieldView(e)&&!e.alpacaField.parent.parentRelations&&(e.alpacaField.parent.parentRelations=[]),this.view.alpacaField.parent.children.forEach(function(t){if(this.view.getEditableBehavior().isMultiFieldView(e)){if(-1===this.view.alpacaField.parent.childRelations.indexOf(e.alpacaField.parent)&&this.view.alpacaField.parent.childRelations.push(e.alpacaField.parent),t.fieldView)t.fieldView.childTKLViews.push(e.alpacaField.parent);else var i=setInterval(function(){t.fieldView&&(t.fieldView.childTKLViews.push(e.alpacaField.parent),clearInterval(i))},10);-1===e.alpacaField.parent.parentRelations.indexOf(this.view.alpacaField.parent)&&e.alpacaField.parent.parentRelations.push(this.view.alpacaField.parent)}else-1===this.view.alpacaField.parent.childRelations.indexOf(e)&&this.view.alpacaField.parent.childRelations.push(e),t.fieldView&&t.fieldView.childTKLViews.push(e),-1===e.parentViews.indexOf(this.view.alpacaField.parent)&&e.parentViews.push(this.view.alpacaField.parent)},this),-1===e.parentViews.indexOf(this.view.alpacaField.parent)&&e.parentViews.push(this.view.alpacaField.parent)},"onMouseOverRead":function(){this.view.getStatesBehavior().isReadOnly()||"create"===this.options.mode||this.mouseOverTimeout||0!==this.jQuery(".cs-form .cs-formfield-invalid").length||(this.mouseOverTimeout=setTimeout(t.bind(this._showEditIcon,this),300))},"onFocusInWrite":function(e){this.checkAndScrollElemToViewport(e.currentTarget);var n=this.$el.find("input").length;if("radio"===this.view.alpacaField.type&&n>1?i(this.$el).find('input[type="radio"]').each(function(){i(this).is(":checked")&&i(this).parent().parent().parent().trigger("focus")}):this.view.options&&"otcs_node_picker"===this.view.options.alpacaField.type?0===this.ui.nodepickerIconsContainer.find(document.activeElement).length&&(this.ui.clearIcon.is(":visible")?this.ui.clearIcon.trigger("focus"):this.ui.browseIcon.trigger("focus")):this.$el.find("input").trigger("select"),this.$el.find("textarea").trigger("select"),this.$el.closest(".cs-form-set-container:not(.csui-multivalue-container)").length>0){var l=this.$el.closest(".cs-form-set-container:not(.csui-multivalue-container)").find(".csui-current-focused");l.length>0&&l.removeClass("csui-current-focused"),i(e.target).addClass("csui-current-focused")}if((this.view.alpacaField&&"otcs_user_picker"===this.view.alpacaField.schema.type||this.view.alpacaField&&"otcs_member_picker"===this.view.alpacaField.schema.type||this.view.alpacaField&&"otcs_group_picker"===this.view.alpacaField.schema.type)&&e.target!==e.relatedTarget){var a=this.$el.closest(".cs-form-set-container:not(.csui-multivalue-container)").find(".binf-open");a.length>0&&a.find(".binf-dropdown-toggle").binf_dropdown("toggle")}if("write"===this.view.getStatesBehavior().state&&this._showOrHideInlineActionButtons(e),!this.view.getStatesBehavior().isReadOnly()){if(this.view.options.path&&2===this.view.options.path.split("/").length){var s=this.$el.parents(".cs-form-set-container").find(".alpaca-array-actionbar");s.off("mouseenter").on("mouseenter",t.bind(this.mouseInActionArea,this)),s.off("mouseleave").on("mouseleave",t.bind(this.mouseOutActionArea,this))}else{var o=this.jQuery(e.target).closest(".cs-form-set-container").parent().closest(".cs-pull-left");0===o.length&&(o=this.jQuery(e.target).closest(".cs-pull-left")),o.parent().siblings().off("mouseenter").on("mouseenter",t.bind(this.mouseInArrayActionArea,this)),o.parent().siblings().off("mouseleave").on("mouseleave",t.bind(this.mouseOutArrayActionArea,this)),o.parent().off("mouseenter").on("mouseenter",t.bind(this.mouseInArrayActionArea,this)),o.parent().off("mouseleave").on("mouseleave",t.bind(this.mouseOutArrayActionArea,this)),0===o.find(".alpaca-array-actionbar").length?(o.parent().find(".alpaca-array-actionbar").off("mouseenter").on("mouseenter",t.bind(this.mouseInActionArea,this)),o.parent().find(".alpaca-array-actionbar").off("mouseleave").on("mouseleave",t.bind(this.mouseOutActionArea,this))):(o.find(".alpaca-array-actionbar").off("mouseenter").on("mouseenter",t.bind(this.mouseInActionArea,this)),o.find(".alpaca-array-actionbar").off("mouseleave").on("mouseleave",t.bind(this.mouseOutActionArea,this))),o.parent().siblings().find(".cs-pull-left").find(".alpaca-array-actionbar").off("mouseenter").on("mouseenter",t.bind(this.mouseInActionArea,this)),o.parent().siblings().find(".cs-pull-left").find(".alpaca-array-actionbar").off("mouseleave").on("mouseleave",t.bind(this.mouseOutActionArea,this)),o.parent().find(".cs-pull-left").find(".alpaca-array-actionbar").off("mouseenter").on("mouseenter",t.bind(this.mouseInActionArea,this)),o.parent().find(".cs-pull-left").find(".alpaca-array-actionbar").off("mouseleave").on("mouseleave",t.bind(this.mouseOutActionArea,this)),o.siblings(".cs-pull-right").length>0&&(o.siblings(".cs-pull-right").find(".circle_add_grey").parent().hasClass("alpaca-button-disabled")&&o.siblings(".cs-pull-right").find(".circle_delete_grey").parent().hasClass("alpaca-button-disabled")?o.siblings(".cs-pull-right").removeClass("csui-set-action-bar"):o.siblings(".cs-pull-right").find(".circle_add_grey").parent().hasClass("alpaca-button-disabled")&&o.siblings(".cs-pull-right").find(".circle_delete_grey").parent().hasClass("alpaca-button-disabled")||o.siblings(".cs-pull-right").addClass("csui-set-action-bar"))}return!1}},"actionOnFocusIn":function(e){if(this.checkAndScrollElemToViewport(e.currentTarget),"write"===this.view.getStatesBehavior().state&&this._showOrHideInlineActionButtons(e),!this.view.getStatesBehavior().isReadOnly()&&"read"!==this.view.getStatesBehavior().state)if(this.view.options.path&&2===this.view.options.path.split("/").length){var i=this.$el.parents(".cs-form-set-container").find(".alpaca-array-actionbar");i.off("mouseenter").on("mouseenter",t.bind(this.mouseInActionArea,this)),i.off("mouseleave").on("mouseleave",t.bind(this.mouseOutActionArea,this))}else{var n=this.jQuery(e.target).closest(".cs-form-set-container").parent().closest(".cs-pull-left");0===n.length&&(n=this.jQuery(e.target).closest(".cs-pull-left")),0===n.find(".alpaca-array-actionbar").length?(n.parent().find(".alpaca-array-actionbar").off("mouseenter").on("mouseenter",t.bind(this.mouseInActionArea,this)),n.parent().find(".alpaca-array-actionbar").off("mouseleave").on("mouseleave",t.bind(this.mouseOutActionArea,this))):(n.find(".alpaca-array-actionbar").off("mouseenter").on("mouseenter",t.bind(this.mouseInActionArea,this)),n.find(".alpaca-array-actionbar").off("mouseleave").on("mouseleave",t.bind(this.mouseOutActionArea,this))),n.parent().siblings().find(".cs-pull-left").find(".alpaca-array-actionbar").off("mouseenter").on("mouseenter",t.bind(this.mouseInActionArea,this)),n.parent().siblings().find(".cs-pull-left").find(".alpaca-array-actionbar").off("mouseleave").on("mouseleave",t.bind(this.mouseOutActionArea,this)),n.parent().find(".cs-pull-left").find(".alpaca-array-actionbar").off("mouseenter").on("mouseenter",t.bind(this.mouseInActionArea,this)),n.parent().find(".cs-pull-left").find(".alpaca-array-actionbar").off("mouseleave").on("mouseleave",t.bind(this.mouseOutActionArea,this)),n.siblings(".cs-pull-right").length>0&&(n.siblings(".cs-pull-right").find(".circle_add_grey").parent().hasClass("alpaca-button-disabled")&&n.siblings(".cs-pull-right").find(".circle_delete_grey").parent().hasClass("alpaca-button-disabled")?n.siblings(".cs-pull-right").removeClass("csui-set-action-bar"):n.siblings(".cs-pull-right").find(".circle_add_grey").parent().hasClass("alpaca-button-disabled")&&n.siblings(".cs-pull-right").find(".circle_delete_grey").parent().hasClass("alpaca-button-disabled")||n.siblings(".cs-pull-right").addClass("csui-set-action-bar"))}},"_showOrHideInlineActionButtons":function(e){var t=this.$el.parents(".cs-form-set-container"),n=t[t.length-1],l=this.jQuery(n),a=this.jQuery(e.target).closest(".cs-form-set-container");if(!this.isDropDownOpen()){var s=l.find(".cs-array .cs-pull-right");s.find(".circle_delete_grey").parent().addClass("binf-hidden"),s.removeClass("csui-set-action-bar"),s.find(".circle_add_grey").parent().addClass("binf-hidden"),a.find(".circle_add_grey").parent().addClass("binf-hidden"),this.$el.parent().closest(".cs-form-set-container").find(".circle_delete_grey").parent().addClass("binf-hidden")}if(this.view.options.path&&2===this.view.options.path.split("/").length)l.length>0?i(l.find(".cs-array .cs-pull-left").find(".cs-field-write-inner").first()):a.length>0&&i(a.find(".cs-array .cs-pull-left").find(".cs-field-write-inner").first());else{l.length>0?i(l.find(".cs-array .cs-pull-left").find(".cs-field-write-inner").first()):a.length>0&&i(a.find(".cs-array .cs-pull-left").find(".cs-field-write-inner").first());var o=a.parents(".cs-array").height();a.parent().hasClass("cs-form-multi-action-container")&&(a.parents(".cs-array").find(">.cs-pull-right").find("button[data-alpaca-array-actionbar-action*='add']").css("top",parseInt(o)/2),a.parents(".cs-form-set-container").not(".csui-multivalue-block").find(">.cs-array:first-child").find(">.cs-pull-right").find("button[data-alpaca-array-actionbar-action*='remove']").css("top",14)),a.parents(".cs-array").find(">.cs-pull-right").find("button[data-alpaca-array-actionbar-action*='remove']").addClass("cs-array-set-remove-align")}var r=parseInt(this.$el.outerHeight()),c=this.$el.parent().closest(".alpaca-container-item");this.isDropDownOpen()||(c.find(".circle_delete_grey").parent().removeClass("binf-hidden"),c.find(".circle_add_grey").removeClass("alpaca-button-disabled").parent().removeClass("binf-hidden")),(c.hasClass("cs-form-multi-action-container")||c.parent().hasClass("cs-form-multi-action-container"))&&(c.find(".circle_delete_grey").parent().css("top",r/2-7),c.find(".circle_add_grey").parent().css("top",r-7)),c=this.$el.closest(".cs-pull-left").siblings(".cs-pull-right"),this.isDropDownOpen()||(c.find(".circle_delete_grey").parent().removeClass("binf-hidden"),c.find(".circle_add_grey").removeClass("alpaca-button-disabled").parent().removeClass("binf-hidden")),a.parent().closest(".cs-pull-left")&&(c=a.parent().closest(".cs-pull-left").siblings(".cs-pull-right"),this.isDropDownOpen()||(c.find(".circle_delete_grey").parent().removeClass("binf-hidden"),c.find(".circle_add_grey").removeClass("alpaca-button-disabled").parent().removeClass("binf-hidden")),c.find(".circle_add_grey").parent().hasClass("alpaca-button-disabled")||c.find(".circle_delete_grey").parent().hasClass("alpaca-button-disabled"))},"onFocusOutWrite":function(e){if(i(e.target).parents(".csui-normal-scrolling").css("overflow","auto"),void 0!==this.view.isFocusedOut&&this.view.isFocusedOut(e))return!1;if(this.view.options.path&&2===this.view.options.path.split("/").length){var t=this.$el.parents(".cs-form-set-container").find(".alpaca-array-actionbar");t.off("mouseenter"),t.off("mouseleave")}else l=this.jQuery(e.target).closest(".cs-form-set-container").parent().closest(".cs-pull-left"),0===l.length&&(l=this.jQuery(e.target).closest(".cs-pull-left")),this.view.alpacaField&&this.view.alpacaField.options&&"create"!==this.view.alpacaField.options.mode&&(l.parent().siblings().off("mouseenter"),l.parent().siblings().off("mouseleave"),l.parent().off("mouseenter"),l.parent().off("mouseleave")),0===l.find(".alpaca-array-actionbar").length?(l.parent().find(".alpaca-array-actionbar").off("mouseenter"),l.parent().find(".alpaca-array-actionbar").off("mouseleave")):(l.find(".alpaca-array-actionbar").off("mouseenter"),l.find(".alpaca-array-actionbar").off("mouseleave")),l.parent().siblings().find(".cs-pull-left").find(".alpaca-array-actionbar").off("mouseenter"),l.parent().siblings().find(".cs-pull-left").find(".alpaca-array-actionbar").off("mouseleave"),l.parent().find(".cs-pull-left").find(".alpaca-array-actionbar").off("mouseenter"),l.parent().find(".cs-pull-left").find(".alpaca-array-actionbar").off("mouseleave"),l.siblings(".cs-pull-right").length>0&&(l.siblings(".cs-pull-right").find(".circle_add_grey").parent().hasClass("alpaca-button-disabled")&&l.siblings(".cs-pull-right").find(".circle_delete_grey").parent().hasClass("alpaca-button-disabled")?l.siblings(".cs-pull-right").removeClass("csui-set-action-bar"):l.siblings(".cs-pull-right").find(".circle_add_grey").parent().hasClass("alpaca-button-disabled")&&l.siblings(".cs-pull-right").find(".circle_delete_grey").parent().hasClass("alpaca-button-disabled")||l.siblings(".cs-pull-right").addClass("csui-set-action-bar"));var n=this.jQuery(e.target).closest(".cs-form-set-container"),l=n.parent().closest(".cs-pull-left").siblings(".cs-pull-right"),a=this.$el.closest(".cs-pull-left").siblings(".cs-pull-right");if(void 0!==this.view.userPicked&&(this.view.options.isDropDownOpen=!1,""!==e.target.value)){if(!this.view.userPicked){this.view.alpacaField&&this.view.alpacaField.refreshValidationState(!1),this.$el.addClass("cs-formfield-invalid");var s=this.ui.writeField&&this.ui.writeField.val();return this.$el.hasClass("cs-formfield-invalid")&&this.preVal!==s&&(this.$el.find("input").select(),this.preVal=s),void this.$el.trigger(i.Event("field:invalid"))}this.$el.removeClass("cs-formfield-invalid")}if(this.view.isReadyToSave()&&!this.escapePressed&&!this.mouseDownCancel&&!this.jQuery(e.relatedTarget).hasClass("csui-icon-edit")||"select"===this.view.alpacaField.type||"tkl"===this.view.alpacaField.type){var o=this.view.getEditValue(),r=this.view.getValue(),c=o!==r;i.contains(this.view.alpacaField.parent.getFieldEl()[0],e.relatedTarget);if(this.view.alpacaField&&"select"===this.view.alpacaField.type)this.view.oldVal=this.view.curVal,c=this.trySetValue();else if(this.view.alpacaField&&"tkl"===this.view.alpacaField.type)c=this.trySetValue();else{var d=this.view.alpacaField.options.validate;if(this.view.alpacaField.options.inContainer)if(null!=o&&o.trim&&o.trim())this.view.alpacaField.options.validate=!0;else{var u=this.view.alpacaField.validation;for(var p in u)void 0!==u[p]&&(u[p].status=!0,u[p].message="")}c=this.view.alpacaField.setValueAndValidate(o,!0),this.view.alpacaField.options.validate=d}var h="integer"===this.view.alpacaField.type&&null!==this.view.curVal?this.view.curVal.toString():this.view.curVal,f=this.view.getEditValue();"select"===this.view.alpacaField.type&&(h=this.view.curVal.get("id"),f=this.view.getEditValue().get("id"));var m=this.view.getEditableBehavior().isRelatedFieldInFocus(e.relatedTarget);return h!==f&&this.view.getEditableBehavior().changeChildrenValues(this.view.alpacaField.parent.childRelations),!this.options.isSetType&&m||i(e.relatedTarget).closest(".cs-tkl-options").length>0?(this.view.alpacaField.parent.turnToReadMode=!1,void(this.view.isTKLField&&!i.contains(this.view.ui.tklOptions[0],e.relatedTarget)&&this.view.hideDropdown())):(this.view.alpacaField.parent.turnToReadMode=!0,"create"!==this.view.alpacaField.options.mode||this.jQuery(e.relatedTarget).parent().hasClass("alpaca-array-actionbar")||!e.relatedTarget||e.relatedTarget.classList.contains("icon-date_picker")||(l=this.jQuery(e.target).closest(".cs-form-set-container").find(".cs-pull-left"),a=this.jQuery(e.target).closest(".cs-form-set-container").find(".cs-pull-left").find(".cs-pull-right"),l.find(".circle_delete_grey").parent().addClass("binf-hidden"),l.find(".circle_add_grey").parent().addClass("binf-hidden"),a.find(".circle_delete_grey").parent().addClass("binf-hidden"),a.find(".circle_add_grey").parent().addClass("binf-hidden")),void(c?(this.$el.removeClass("cs-formfield-invalid"),c=this.view.alpacaField.setValueAndValidate(f,!0),o&&!o.toString().length&&c&&this.view.isTKLField&&this.view.changeChildrenValues(this.view.children)):(this.$el.addClass("cs-formfield-invalid"),this.$el.trigger(i.Event("field:invalid")))))}this.mouseDownCancel=!1,this.view.alpacaField&&"create"===this.view.alpacaField.options.mode&&(l.find(".circle_delete_grey").parent().addClass("binf-hidden"),l.find(".circle_add_grey").parent().addClass("binf-hidden"));var g=i(e.target).closest(".csui-scrollable-writemode");g&&g.hasClass("csui-dropdown-open")&&g.removeClass("csui-dropdown-open")},"_showApplyAll":function(e){if(this.view.options.alpaca&&"create"===this.view.options.alpaca.options.mode){var t=this.$(e.target).closest(".alpaca-field-array").find(".csui-icon.apply-all.block:first").length>0?this.$(e.target).closest(".alpaca-field-array").find(".csui-icon.apply-all.block:first"):this.$(e.target).closest(".alpaca-field-array").children(".cs-form-set-container").length>0?this.$(e.target).closest(".alpaca-field-array").parents(".alpaca-field-array").find(".csui-icon.apply-all.block:first"):this.$(e.target).closest(".alpaca-field-array").closest(".csui-form-set-array-wrapper").find(".csui-icon.apply-all.block:first"),i=this.$el.closest(".cs-metadata-properties").find(".csui-icon.apply-all").not(".binf-hidden");i=i.filter(function(e,i){return i=i!==t[0]?i:void 0}),i&&i.length>0&&(i.addClass("binf-hidden"),i.parent().addClass("binf-hidden")),t.parent().hasClass("binf-hidden")&&t.parent().removeClass("binf-hidden alpaca-container"),t.hasClass("binf-hidden")&&(t.removeAttr("style"),t.removeClass("binf-hidden"),t.prop("tabindex","0"))}},"onReadAreaClicked":function(e){if(this.view.formView.propagatedEvent=null,this.view.isEventaPropagated=!1,this.propagatedEvent=null,this.view.isEventPending=!1,"create"===this.options.mode||0!==i(".cs-form .cs-formfield-invalid").length)return void i(i(".cs-form .cs-formfield-invalid")[0]).find(":input").trigger("focus").trigger("focus");if(!this.view.getStatesBehavior().isReadOnly()){var t=e.target.classList.contains("icon-edit");if("writeonly"!==this.view.mode&&(t||this.view.allowEditOnClickReadArea(e))){e.stopImmediatePropagation(),e.preventDefault();var n=e,l=i(".csui-bulk-edit-"+this.view.options.dataId.slice(0,this.view.options.dataId.indexOf("_",this.view.options.dataId.indexOf("_")+1)));if(l.length>1&&(l=l.parent()&&l.parent().not(".binf-hidden").find(".csui-bulk-edit-"+this.view.options.dataId.slice(0,this.view.options.dataId.indexOf("_",this.view.options.dataId.indexOf("_")+1)))),l&&0===l.length&&(l=this.jQuery(n.target).closest(".cs-form-set-container").parent().find(".csui-bulk-edit")),this.view.isEventPending=!1,this.view.formView.isDataUpdating)return this.view.formView.options.metadataView&&!this.view.formView.options.metadataView.blockingView.$el.is(":visible")&&(this.view.formView.options.metadataView.blockActions(),this.view.isEventPending=!0,this.propagatedEvent=event,this.view.formView.triggerMethod("request:processing",this.view)),!1;i(l).closest(".csui-array-bulk-edit").removeClass("binf-hidden"),i(l).trigger("click"),this.setViewStateWriteAndEnterEditMode()}}},"setViewStateWriteAndEnterEditMode":function(){if(!this.view.getStatesBehavior().isReadOnly()){this.view.alpacaField&&!this.view.alpacaField.options.isMultiFieldItem&&"select"===this.view.alpacaField.type&&this.view.$el.find(".binf-dropdown-toggle").trigger("click"),this.view.getStatesBehavior().setStateWrite(!1,!0),r.isLandscape()&&this.$el.find(".icon-date_picker").length>0&&this.view.$el.find(".icon-date_picker").trigger("focus"),this.adjustSetRows()}},"setViewReadOnlyAndLeaveEditMode":function(e,t){this.view.getStatesBehavior().isWriteOnly()||this.view.getStatesBehavior().setStateRead(t)},"onKeyDown":function(e){if(this.escapePressed=!1,this.tabPressed=!1,27===e.keyCode){var t=i(".csui-bulk-edit-cancel-"+this.view.options.dataId.slice(0,this.view.options.dataId.indexOf("_",this.view.options.dataId.indexOf("_")+1)));t&&0===t.length&&(t=this.jQuery(e.target).closest(".cs-form-set-container").parent().find(".csui-bulk-edit-cancel")),"writeonly"!==this.view.mode&&(this.isDropDownOpen()||i(t).trigger("click"))}else 9===e.keyCode&&(this.tabPressed=!0,!!this.view.handleTabKey&&this.view.handleTabKey(e),"create"!==(this.view.options.mode||this.view.alpacaField&&this.view.alpacaField.options.mode)&&this.view.getStatesBehavior().isStateWrite()&&this.moveTab(e))},"normalizeViews":function(e){var t=[];return e.isTKLField||e.isNonTKLField?t.push(e):this.isMultiFieldView(e)?e.children.map(function(e){t.push(e.fieldView)}):t.push(e.children[0].fieldView),t},"mouseInFieldArea":function(e){if(e.preventDefault(),e.stopPropagation(),"write"===this.view.getStatesBehavior().state&&this.$el.closest(".cs-array").find(".csui-shadowright-container").off("mouseenter").on("mouseenter",t.bind(this.mouseInFieldArea,this)),!this.view.getStatesBehavior().isStateRead()){var n,l=this.$el.closest(".cs-pull-left");if(l.parent().hasClass("cs-form-multi-action-container")){var a=i(document.activeElement).parents(".alpaca-container-item:not(.cs-form-multi-action-container)"),s=l.closest(".csui-form-set-array-wrapper .cs-form-set").children().not(a);s.find(".circle_add_grey").parent().addClass("binf-hidden"),s.find(".circle_delete_grey").parent().addClass("binf-hidden"),s.find(".cs-pull-right").removeClass("csui-set-action-bar")}return(this.$el.parents(".cs-form-set-container").find(document.activeElement).length<=1||this.$el.find(document.activeElement).length<=1)&&(l.siblings(".cs-pull-right").find(".circle_add_grey").parent().removeClass("binf-hidden"),l.siblings(".cs-pull-right").find(".circle_delete_grey").parent().removeClass("binf-hidden")),this.view.options.path&&this.view.options.path.split("/").length>2&&this.$el.find(document.activeElement).length>0&&(l.siblings(".cs-pull-right").find(".circle_add_grey").parent().removeClass("binf-hidden"),l.siblings(".cs-pull-right").find(".circle_delete_grey").parent().removeClass("binf-hidden"),l.parents(".cs-pull-left").siblings(".cs-pull-right").find(".circle_add_grey").parent().removeClass("binf-hidden"),l.parents(".cs-pull-left").siblings(".cs-pull-right").find(".circle_delete_grey").parent().removeClass("binf-hidden"),n=l.parents(".cs-pull-left").length>0?l.parents(".cs-pull-left"):l,this._alignSetContainerActionButtons(n)),this.view.options.path&&2===this.view.options.path.split("/").length?this._alignMultiFieldContainerActionButtons(l):(this._alignMultiFieldContainerActionButtons(l),n=l.parents(".cs-pull-left").length>0?l.parents(".cs-pull-left"):l,n.siblings(".cs-pull-right").find(".circle_delete_grey").parent().addClass("cs-array-set-remove-align"),this._alignSetContainerActionButtons(n)),"select"!==this.view.alpacaField.type&&this.view.options.isDropDownOpen?this.hideActions(e):"select"===this.view.alpacaField.type&&this.view.isDropdownOpen&&this.view.isDropdownOpen()?this.hideActions(e):this.showActions(e),!0}},"_alignMultiFieldContainerActionButtons":function(e){var t=this.$el.height(),i=e.siblings(".cs-pull-right");e.parent().hasClass("cs-form-multi-action-container")&&(i.find(".circle_add_grey").parent().css("top",t-7),i.find(".circle_delete_grey").parent().css("top",t/2-7))},"_alignSetContainerActionButtons":function(e){var t=e.siblings(".cs-pull-right");t.find(".circle_add_grey").parent().removeClass("binf-hidden"),t.find(".circle_delete_grey").parent().removeClass("binf-hidden"),t.find(".circle_add_grey").parent().hasClass("alpaca-button-disabled")&&t.find(".circle_delete_grey").parent().hasClass("alpaca-button-disabled")||t.addClass("csui-set-action-bar"),t.find(".circle_add_grey").parent().hasClass("alpaca-button-disabled")||t.find(".circle_delete_grey").parent().hasClass("alpaca-button-disabled")},"mouseOutFieldArea":function(e){if(e.preventDefault(),!this.view.getStatesBehavior().isStateRead()){var t=this.$el.closest(".cs-pull-left"),i=t.siblings(".cs-pull-right"),n=t.parents(".cs-pull-left").length>0?t.parents(".cs-pull-left"):t,l=this.$el.parents(".cs-form-set-container"),a=n.siblings(".cs-pull-right");return 0!==l.find(document.activeElement).length&&0!==this.$el.find(document.activeElement).length||0!==i.find(document.activeElement).length||i.hasClass("csui-set-action-bar")||(i.removeClass("csui-set-action-bar"),i.find(".circle_add_grey").parent().addClass("binf-hidden"),i.find(".circle_delete_grey").parent().addClass("binf-hidden")),a.is(":visible")||a.removeClass("csui-set-action-bar"),!0}},"mouseInActionArea":function(e){e.preventDefault(),e.stopPropagation(),this.view.getStatesBehavior().isStateRead()||(this.jQuery(e.target).closest(".cs-pull-right").find(".circle_add_grey").parent().removeClass("binf-hidden"),this.jQuery(e.target).closest(".cs-pull-right").find(".circle_delete_grey").parent().removeClass("binf-hidden"))},"mouseOutActionArea":function(e){e.preventDefault(),e.stopPropagation(),this.view.getStatesBehavior().isStateRead()||(0===this.jQuery(document.activeElement).parents(".cs-pull-right").length?0===this.jQuery(document.activeElement).parent().closest(".cs-pull-left").siblings(".cs-pull-right").find(e.target).length&&(this.jQuery(e.target).closest(".cs-pull-right").find(".circle_add_grey").parent().addClass("binf-hidden"),this.jQuery(e.target).closest(".cs-pull-right").find(".circle_delete_grey").parent().addClass("binf-hidden")):1===this.jQuery(document.activeElement).parents(".cs-pull-right").length&&0===this.jQuery(document.activeElement).parent().closest(".cs-pull-right").find(e.target).length&&(this.jQuery(e.target).closest(".cs-pull-right").find(".circle_add_grey").parent().addClass("binf-hidden"),this.jQuery(e.target).closest(".cs-pull-right").find(".circle_delete_grey").parent().addClass("binf-hidden")))},"mouseInArrayActionArea":function(e){if(e.preventDefault(),e.stopPropagation(),!this.view.getStatesBehavior().isStateRead()){var t=this.jQuery(e.target).closest(".cs-array");if(0===t.find(document.activeElement).length&&(t.children(".cs-pull-right").find(".circle_delete_grey").parent().removeClass("binf-hidden"),t.children(".cs-pull-right").find(".circle_add_grey").removeClass("alpaca-button-disabled").parent().removeClass("binf-hidden")),t.children(".cs-pull-right").is(":visible")){var i=t.children(".cs-pull-right");i.find(".circle_add_grey").parent().hasClass("alpaca-button-disabled")&&i.find(".circle_delete_grey").parent().hasClass("alpaca-button-disabled")||i.addClass("csui-set-action-bar")}}},"mouseOutArrayActionArea":function(e){if(e.preventDefault(),e.stopPropagation(),!this.view.getStatesBehavior().isStateRead()){var t=this.jQuery(e.target).closest(".cs-array");0===t.find(document.activeElement).length?(t.children(".cs-pull-right").find(".circle_delete_grey").parent().addClass("binf-hidden"),t.children(".cs-pull-right").find(".circle_add_grey").removeClass("alpaca-button-disabled").parent().addClass("binf-hidden")):(t.children(".cs-pull-right").find(".circle_delete_grey").parent().removeClass("binf-hidden"),t.children(".cs-pull-right").find(".circle_add_grey").removeClass("alpaca-button-disabled").parent().removeClass("binf-hidden")),t.children(".cs-pull-right").removeClass("csui-set-action-bar")}},"showActions":function(e){this.$el.closest(".cs-pull-left")&&this.$el.closest(".cs-pull-left").siblings(".cs-pull-right")&&this.$el.closest(".cs-pull-left").siblings(".cs-pull-right").find(".circle_add_grey").parent().hasClass("binf-hidden")&&this.$el.closest(".cs-pull-left").siblings(".cs-pull-right").find(".circle_add_grey").parent().removeClass("binf-hidden"),this.$el.closest(".cs-pull-left")&&this.$el.closest(".cs-pull-left").siblings(".cs-pull-right")&&this.$el.closest(".cs-pull-left").siblings(".cs-pull-right").find(".circle_delete_grey").parent().hasClass("binf-hidden")&&this.$el.closest(".cs-pull-left").siblings(".cs-pull-right").find(".circle_delete_grey").parent().removeClass("binf-hidden")},"hideActions":function(e){this.$el.closest(".cs-form-set-container").hasClass("csui-multivalue-container")&&(this.$el.closest(".cs-pull-left")&&this.$el.closest(".cs-pull-left").siblings(".cs-pull-right")&&!this.$el.closest(".cs-pull-left").siblings(".cs-pull-right").find(".circle_add_grey").parent().hasClass("binf-hidden")&&this.$el.closest(".cs-pull-left").siblings(".cs-pull-right").find(".circle_add_grey").parent().addClass("binf-hidden"),this.$el.closest(".cs-pull-left")&&this.$el.closest(".cs-pull-left").siblings(".cs-pull-right")&&!this.$el.closest(".cs-pull-left").siblings(".cs-pull-right").find(".circle_delete_grey").parent().hasClass("binf-hidden")&&this.$el.closest(".cs-pull-left").siblings(".cs-pull-right").find(".circle_delete_grey").parent().addClass("binf-hidden"))}})}),csui.define("csui/controls/form/impl/array/csformarrayfield.editable.behavior",["csui/controls/form/fields/base/csformarrayfield.editable.behavior"],function(e){return e}),csui.define("csui/controls/form/fields/base/csformarrayfield.states.behavior",["csui/lib/underscore","csui/lib/jquery","csui/lib/handlebars","csui/lib/marionette","csui/controls/form/impl/fields/csformfield.states.behavior","csui/utils/log","csui/utils/base"],function(e,t,i,n,l,a,s){"use strict";return l.extend({"constructor":function(e,t){l.apply(this,arguments)},"_setStateWrite":function(e,t){var i="----{0}:_setStateWrite {1} {2} {3}";a.debug(i,this.constructor.name,"enter",e,t)&&console.log(a.last),this.ui.readArea.addClass("binf-hidden"),this.ui.writeArea.removeClass("binf-hidden"),this.view.options.model.attributes.options.isMultiFieldItem&&this.ui.writeArea.find(".icon-container").addClass("binf-hidden"),!t||this.hasWriteFocus()||s.isLandscape()&&this.$el.find(".icon-date_picker").length>0?s.isLandscape()&&this.$el.find(".icon-date_picker").length>0&&this.$el.find(".icon-date_picker").trigger("focus"):this.view.ui.writeField.trigger("focus").trigger("focus"),t&&!this.view.options.model.attributes.options.isMultiFieldItem&&this.view.ui.writeField.select(),a.debug(i,this.constructor.name,"return")&&console.log(a.last)}})}),csui.define("csui/controls/form/impl/array/csformarrayfield.states.behavior",["csui/controls/form/fields/base/csformarrayfield.states.behavior"],function(e){return e}),csui.define("css!csui/controls/form/impl/fields/csformfield",[],function(){}),csui.define("csui/controls/form/fields/base/csformfield.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/controls/form/impl/fields/csformfield.editable.behavior","csui/controls/form/impl/fields/csformfield.states.behavior","csui/controls/form/impl/array/csformarrayfield.editable.behavior","csui/controls/form/impl/array/csformarrayfield.states.behavior","csui/behaviors/default.action/default.action.behavior","csui/controls/form/pub.sub","i18n!csui/controls/form/impl/nls/lang","css!csui/controls/form/impl/fields/csformfield","csui/lib/binf/js/binf"],function(e,t,i,n,l,a,s,o,r,c,d,u){"use strict";return n.ItemView.extend({"constructor":function(t){this.options=t||{},t.model.attributes.options&&t.model.attributes.options.isMultiFieldItem?this.behaviors=e.extend({"FormFieldEditable":{"behaviorClass":o},"FormFieldStates":{"behaviorClass":r}},this.behaviors):this.behaviors=e.extend({"FormFieldEditable":{"behaviorClass":a},"FormFieldStates":{"behaviorClass":s}},this.behaviors),n.ItemView.apply(this,arguments),void 0!==this.options.alpacaField&&(this.alpacaField=this.options.alpacaField),this.options.dataId||(this.options.dataId=this.options.id),this.listenTo(this.model,"change",this._render),this.listenTo(this.model,"change",this._raiseValueChanged);var i=this.model.attributes.schema,l=this.model.attributes.options;i?i.readonly?(this.mode="readonly",this.$el.addClass("cs-formfield-readonly")):l.setRequiredFieldsEditable?this.mode="writeonly":this.mode="read":(this.mode=this.options.mode||"read",this.model.set("schema",{"readonly":"readonly"===this.options.mode},{"silent":!0})),this.curVal=this.oldVal=this.model.get("data")
;var c=this.alpacaField&&this.alpacaField.field&&this.alpacaField.field.parent().find("label");c&&c.length&&c.on("click",e.bind(this.onClickLabel,this))},"behaviors":{"DefaultAction":{"behaviorClass":c}},"ui":{"writeArea":".cs-field-write","writeField":".cs-field-write input","browseIcon":".cs-browse-icon","clearIcon":".cs-clear-icon","writeDateField":".cs-field-write .csui-datefield-input","readArea":".cs-field-read","readField":".cs-field-read button"},"templateHelpers":function(){var e=this.curVal,t=this._getPlaceHolder(),i=(this.options.alpaca&&this.options.alpaca.schema&&this.options.alpaca.schema.tooltip?this.options.alpaca.schema.tooltip:void 0)||e;return{"emptyLabel":"readonly"==this.mode?u.noValueSet:t,"hasData":""!==e&&null!==e,"noValue":"","edit":u.edit,"cancel":u.cancel,"mode":this.mode,"tooltip":i,"titleApplyAll":u.titleApplyAll,"datePickerIcon":u.datePickerIcon}},"className":"cs-formfield","_render":function(){(this.alpacaField&&"create"!==this.alpacaField.options.mode||this.model.get("options")&&"create"!==this.model.get("options").mode)&&!this.silentRender&&(this.render(),this.isValidField=!1),setTimeout(e.bind(function(){var e=t.Event("tab:content:field:changed");this.$el.trigger(e)},this),100)},"onClickLabel":function(e){!("readonly"===this.mode)&&this.ui.readField.trigger(e.type)},"setMode":function(e){this.mode=e,this.getStatesBehavior().state=void 0},"getOldValue":function(){return this.oldVal},"isMultiFieldView":function(e){return!e.isTKLField&&!e.isNonTKLField||e.alpacaField.options.isMultiFieldItem&&!!e.alpacaField.parent&&!!e.alpacaField.parent.schema.maxItems&&e.alpacaField.parent.schema.maxItems>1},"isReadyToSave":function(){return!0},"getEditValue":function(){return this.ui.writeField.val()},"getValue":function(){return this.model.get("data")},"normalizeViews":function(e){var t=[];return e.isTKLField||e.isNonTKLField?t.push(e):this.isMultiFieldView(e)?e.children.map(function(e){t.push(e.fieldView)}):t.push(e.children[0].fieldView),t},"getFieldIndex":function(e){if(e.alpacaField.options.isMultiFieldItem&&e.alpacaField.parent.schema.maxItems&&1!==e.alpacaField.parent.schema.maxItems)return e.alpacaField.parent.children.indexOf(e.alpacaField)},"changeChildrenValues":function(t,i,n){var l,a,s=this.options.dataId?this:this.view,o=!1,r=-1!==s.options.dataId.indexOf("x")&&1===s.options.dataId.match(/x/g).length;e.each(t,function(e){if(this.isMultiFieldView(this)){if(l=this.getFieldIndex(this),a=this.normalizeViews(e),r&&parseInt(this.options.dataId.split("_")[2])!==parseInt(a[0].options.dataId.split("_")[2]))return;a[0].alpacaField.options.isMultiFieldItem?(a.forEach(function(e){e.changeChildrenValues(e.children,e,!1),e.valuesPulled=!1}),a[l]&&(e=a[l],o=void 0===n||n,this.changeChildrenValues(e.children,e))):0===l&&(e=a[l],o=!0,this.changeChildrenValues(e.children,e)),o&&(e.valuesPulled=!1,e.setValue(""),e.options.alpaca.schema.enum.length=0,e.trigger("tkl:refresh"))}else{if(a=this.normalizeViews(e),r&&parseInt(this.options.dataId.split("_")[2])!==parseInt(a[0].options.dataId.split("_")[2]))return;var t=this;a.forEach(function(e){o=!0,t.changeChildrenValues(e.children,e),o&&(e.valuesPulled=!1,e.isValidTKLState=!0,e.options.alpacaField.isRequired()?e.isValidTKLState=!1:(e.$el.parents(".binf-form-group.alpaca-field").removeClass("binf-has-error alpaca-invalid"),e.$el.removeClass("cs-formfield-invalid")),e.$el.parents(".binf-form-group.alpaca-field").find(".binf-help-block.alpaca-message.alpaca-message-custom").hide(),e.setValue(""),e.options.alpaca.schema.enum.length=0,e.trigger("tkl:refresh"))})}},i||s)},"setValue":function(i,n,l){e.isFunction(this.preSetValue)&&(i=this.preSetValue(i));var a=!0,s=this.ui.writeField&&i!==this.ui.writeField.val()?this.ui.writeField.val():i;if(n&&this.alpacaField){if(this.oldVal=this.curVal,this.$el.hasClass("cs-formfield-invalid")&&this.preVal===s)return!1;var o=this.alpacaField.options.validate;if(this.alpacaField.options){var r=this.getEditValue();if(null!=r&&r.trim&&r.trim())this.alpacaField.options.validate=!0;else{var c=this.alpacaField.validation;for(var d in c)void 0!==c[d]&&(c[d].status=!0,c[d].message="")}}a=this.alpacaField.setValueAndValidate(i,n),this.alpacaField.options.validate=o}if(a||!this.$el.is(":visible"))this.$el.removeClass("cs-formfield-invalid"),void 0!==this.curVal&&null!==this.curVal||(l=l||""===i),i!==this.curVal&&(this.curVal=i),this.model.set("data",i,{"silent":!!l}),this.$el.trigger(t.Event("field:valid"),this);else{this.$el.find("input")&&this.$el.find("input").select(),this.$el.addClass("cs-formfield-invalid");var u=t.Event("field:invalid");this.$el.trigger(u,this)}return this.preVal=s,a},"validate":function(e){e()},"allowEditOnClickReadArea":function(){return!0},"allowSaveOnEnter":function(){return!0},"allowEditOnEnter":function(){return!0},"setFocus":function(){this.ui.readField.is(":visible")?this.ui.readField.trigger("focus"):this.ui.writeField.is(":visible")&&this.ui.writeField.trigger("focus")},"setStateWrite":function(e,t){this.childTKLViews.length||this.parentViews.length||this.setValue(this.curVal,e);return!1},"setStateRead":function(e,t){return!1},"getEditableBehavior":function(){return this._behaviors[0]},"getStatesBehavior":function(){return this._behaviors[1]},"_raiseValueChanged":function(){var i=this._getChangeEventValue(),n={"fieldvalue":i,"fieldid":this.options.dataId,"fieldpath":this.options.path,"targetfieldpath":this.options.path,"fieldView":this};this.trigger("field:changed",n),d.trigger(this.options.dataId+"dependentattrchanged",this);var l=t.Event("field:changed");e.extend(l,n),this.$el.trigger(l)},"_getChangeEventValue":function(){return this.getValue()},"onKeyPress":function(e){return!1},"resetOldValueAfterCancel":function(){return!1},"_getPlaceHolder":function(){var e,t=this.model.get("options"),i=this.model.get("schema");if(t&&t.placeholder)e=t.placeholder;else if(i&&i.disabled)e=u.noValueSet;else if(t){switch(t.type){case"number":case"integer":e=u.alpacaPlaceholderNumber;break;case"text":case"otcs_multilingual_textarea":case"textarea":e=u.alpacaPlaceholderText;break;case"time":e=u.alpacaPlaceholderTime;break;case"date":e=u.alpacaPlaceholderDate;break;case"datetime":e=u.alpacaPlaceholderDateTime;break;case"email":e=u.alpacaPlaceholderEmail;break;case"file":e=u.alpacaPlaceholderFile;break;case"password":e=u.alpacaPlaceholderPassword;break;case"phone":e=u.alpacaPlaceholderPhone;break;case"search":e=u.alpacaPlaceholderSearch;break;case"url":e=u.alpacaPlaceholderUrl;break;case"ipv4":e=u.alpacaPlaceholderIPv4;break;case"otcs_user_picker":e=u.alpacaPlaceholderOTUserPicker;break;case"otcs_member_picker":e=u.alpacaPlaceholderOTUserGroupPicker;break;case"otcs_group_picker":e=u.alpacaPlaceholderOTGroupPicker;break;case"otcs_user":e="otcs_user_picker"===this.model.get("schema").type?u.alpacaPlaceholderOTUserPicker:"otcs_group_picker"===this.model.get("schema").type?u.alpacaPlaceholderOTGroupPicker:u.alpacaPlaceholderOTUserGroupPicker;break;case"otcs_node_picker":e=u.alpacaPlaceholderOTNodePicker;break;default:e=u.alpacaPlaceholderGeneric}t.placeholder=e}return e}})}),csui.define("csui/controls/form/impl/fields/csformfield.view",["csui/controls/form/fields/base/csformfield.view"],function(e){return e}),csui.define("hbs!csui/controls/form/impl/fields/nodepicker/nodepicker",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){return"csui-nodepicker-required "},"3":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'placeholder="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"placeholder"):a,t))+'"'},"5":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'size="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"size"):a,t))+'"'},"7":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'name="'+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"data":l,"loc":{"start":{"line":6,"column":22},"end":{"line":6,"column":30}}}):a))+'"'},"9":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"data-"+e.escapeExpression((a=null!=(a=s(i,"key")||l&&s(l,"key"))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"key","hash":{},"data":l,"loc":{"start":{"line":7,"column":31},"end":{"line":7,"column":39}}}):a))+'="'+e.escapeExpression(e.lambda(t,t))+'"'},"11":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((a=null!=(a=s(i,"key")||l&&s(l,"key"))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"key","hash":{},"data":l,"loc":{"start":{"line":8,"column":32},"end":{"line":8,"column":40}}}):a))+'="'+e.escapeExpression(e.lambda(t,t))+'"'},"13":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n    aria-labelledby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnLabel")||(null!=t?s(t,"idBtnLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnLabel","hash":{},"data":l,"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":35}}}):a))+'" '},"15":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-describedby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnDescription")||(null!=t?s(t,"idBtnDescription"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnDescription","hash":{},"data":l,"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":66}}}):a))+'" '},"17":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((a=null!=(a=s(i,"multiFieldLabel")||(null!=t?s(t,"multiFieldLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"multiFieldLabel","hash":{},"data":l,"loc":{"start":{"line":12,"column":40},"end":{"line":12,"column":59}}}):a))+'"'},"19":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-label="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"anchorTitle"):a,t))+'"'},"21":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="icon-container">\r\n        <div class="csui-icon-edit inline-edit-icon edit-cancel" title="'+e.escapeExpression((a=null!=(a=s(i,"cancel")||(null!=t?s(t,"cancel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"data":l,"loc":{"start":{"line":21,"column":72},"end":{"line":21,"column":82}}}):a))+'"></div>\r\n      </div>\r\n'},"23":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="icon-container binf-hidden">\r\n        <div class="csui-icon apply-all binf-hidden" title="'+e.escapeExpression((a=null!=(a=s(i,"titleApplyAll")||(null!=t?s(t,"titleApplyAll"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"titleApplyAll","hash":{},"data":l,"loc":{"start":{"line":26,"column":60},"end":{"line":26,"column":77}}}):a))+'" tabindex="0"\r\n             data-cstabindex="0"></div>\r\n      </div>\r\n'},"25":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a href="javascript:void(0);" tabindex="0" data-cstabindex="0" class="'+(null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"asReadonly"):t,{"name":"if","hash":{},"fn":e.program(26,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":39,"column":76},"end":{"line":40,"column":51}}}))?a:"")+"\r\n              "+(null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"options"):t)?s(a,"buttonDisabled"):a,{"name":"if","hash":{},"fn":e.program(28,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":41,"column":14},"end":{"line":41,"column":59}}}))?a:"")+'"\r\n'+(null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(30,l,0),"inverse":e.program(32,l,0),"data":l,"loc":{"start":{"line":42,"column":10},"end":{"line":45,"column":78}}}))?a:"")+">\r\n"+(null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"options"):t)?s(a,"anchorTitle"):a,{"name":"if","hash":{},"fn":e.program(34,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":46,"column":10},"end":{"line":52,"column":17}}}))?a:"")+"      </a>\r\n"},"26":function(e,t,i,n,l){return" csui-nodepicker-readonly "},"28":function(e,t,i,n,l){return"disabled"},"30":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              aria-label="'+e.escapeExpression((s=null!=(s=o(i,"multiFieldLabel")||(null!=t?o(t,"multiFieldLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"multiFieldLabel","hash":{},"data":l,"loc":{"start":{"line":43,"column":26},"end":{"line":43,"column":45}}}):s))+" "+e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"anchorTitleShort"):a,t))+'"\r\n'},"32":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              aria-label="'+e.escapeExpression((s=null!=(s=o(i,"idBtnLabel")||(null!=t?o(t,"idBtnLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"idBtnLabel","hash":{},"data":l,"loc":{"start":{"line":45,"column":26},"end":{"line":45,"column":40}}}):s))+" "+e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"anchorTitleShort"):a,t))+'" '},"34":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'             <span class="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"disabledClass"):a,t))+'"\r\n                title="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"anchorTitle"):a,t))+'">\r\n                  '+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"anchorTitleShort"):a,t))+"\r\n                </span>\r\n         \r\n"},"36":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"             <span class='placeholder' title=\""+e.escapeExpression((s=null!=(s=o(i,"noValue")||(null!=t?o(t,"noValue"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"noValue","hash":{},"data":l,"loc":{"start":{"line":55,"column":46},"end":{"line":55,"column":57}}}):s))+'"\r\n                '+(null!=(a=o(i,"unless").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"schema"):t)?o(a,"readonly"):a,{"name":"unless","hash":{},"fn":e.program(37,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":56,"column":16},"end":{"line":56,"column":73}}}))?a:"")+">\r\n             "+(null!=(a=o(i,"unless").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"schema"):t)?o(a,"readonly"):a,{"name":"unless","hash":{},"fn":e.program(39,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":57,"column":13},"end":{"line":57,"column":65}}}))?a:"")+"\r\n             </span>\r\n"},"37":function(e,t,i,n,l){return"data-cstabindex='0'"},"39":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"data":l,"loc":{"start":{"line":57,"column":40},"end":{"line":57,"column":54}}}):a))},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-field-write '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"isRequired"):t,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":1,"column":27},"end":{"line":1,"column":77}}}))?a:"")+'">\r\n  <div class="cs-field-write-inner ">\r\n  <input  class="cs-nodepicker-input" type="'+e.escapeExpression((s=null!=(s=o(i,"inputType")||(null!=t?o(t,"inputType"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"inputType","hash":{},"data":l,"loc":{"start":{"line":3,"column":44},"end":{"line":3,"column":57}}}):s))+'" id="'+e.escapeExpression((s=null!=(s=o(i,"id")||(null!=t?o(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"data":l,"loc":{"start":{"line":3,"column":63},"end":{"line":3,"column":69}}}):s))+'" readonly\r\n         '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"placeholder"):a,{"name":"if","hash":{},"fn":e.program(3,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":4,"column":9},"end":{"line":4,"column":80}}}))?a:"")+" \r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"size"):a,{"name":"if","hash":{},"fn":e.program(5,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":54}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"name"):t,{"name":"if","hash":{},"fn":e.program(7,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":38}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"data"):a,{"name":"each","hash":{},"fn":e.program(9,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":7,"column":4},"end":{"line":7,"column":59}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"attributes"):a,{"name":"each","hash":{},"fn":e.program(11,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":60}}}))?a:"")+'\r\n    value="'+e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"anchorTitleShort"):a,t))+'" '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnLabel"):t,{"name":"if","hash":{},"fn":e.program(13,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":9,"column":41},"end":{"line":10,"column":44}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnDescription"):t,{"name":"if","hash":{},"fn":e.program(15,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":75}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(17,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":67}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"unless","hash":{},"fn":e.program(19,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":78}}}))?a:"")+'\r\n    title="'+e.escapeExpression(e.lambda(null!=(a=null!=t?o(t,"options"):t)?o(a,"anchorTitle"):a,t))+'"  tabindex="-1"/>\r\n    <div class="csui-nodepicker-icon-container">\r\n      <span class="csui-icon cs-clear-icon formfield_clear" title="'+e.escapeExpression((s=null!=(s=o(i,"clearIconTooltip")||(null!=t?o(t,"clearIconTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"clearIconTooltip","hash":{},"data":l,"loc":{"start":{"line":16,"column":67},"end":{"line":16,"column":87}}}):s))+'" role="button" aria-label="'+e.escapeExpression((s=null!=(s=o(i,"clearIconAriaLabel")||(null!=t?o(t,"clearIconAriaLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"clearIconAriaLabel","hash":{},"data":l,"loc":{"start":{"line":16,"column":115},"end":{"line":16,"column":137}}}):s))+'" tabindex="0" data-cstabindex="0"></span>\r\n      <span class="csui-icon cs-browse-icon icon-cs-browse" title="'+e.escapeExpression((s=null!=(s=o(i,"browseIconTooltip")||(null!=t?o(t,"browseIconTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"browseIconTooltip","hash":{},"data":l,"loc":{"start":{"line":17,"column":67},"end":{"line":17,"column":88}}}):s))+'" role="button" aria-label="'+e.escapeExpression((s=null!=(s=o(i,"browseIconAriaLabel")||(null!=t?o(t,"browseIconAriaLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"browseIconAriaLabel","hash":{},"data":l,"loc":{"start":{"line":17,"column":116},"end":{"line":17,"column":139}}}):s))+'" tabindex="0" data-cstabindex="0"></span>\r\n    </div>\r\n'+(null!=(a=(o(i,"xif")||t&&o(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.mode !== 'writeonly'",{"name":"xif","hash":{},"fn":e.program(21,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":19,"column":4},"end":{"line":23,"column":12}}}))?a:"")+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"applyFlag"):a,{"name":"if","hash":{},"fn":e.program(23,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":24,"column":4},"end":{"line":29,"column":11}}}))?a:"")+'  </div>\r\n</div>\r\n\r\n<div class="cs-field-read">\r\n  <div class="cs-field-read-inner">\r\n    <div class="btn-container">\r\n'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"anchorTitle"):a,{"name":"if","hash":{},"fn":e.program(25,l,0),"inverse":e.program(36,l,0),"data":l,"loc":{"start":{"line":38,"column":4},"end":{"line":59,"column":20}}}))?a:"")+"    </div>\r\n    <div class='icon-container'>\r\n      <div class='csui-icon-edit inline-edit-icon icon-edit' title='"+e.escapeExpression((s=null!=(s=o(i,"edit")||(null!=t?o(t,"edit"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"data":l,"loc":{"start":{"line":62,"column":68},"end":{"line":62,"column":76}}}):s))+"'></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n"},"useData":!0});return i.registerPartial("csui_controls_form_impl_fields_nodepicker_nodepicker",n),n}),csui.define("css!csui/controls/form/impl/fields/nodepicker/nodepicker",[],function(){}),csui.define("csui/controls/form/fields/nodepickerfield.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/contexts/factories/connector","csui/models/node/node.model","csui/models/nodeancestors","csui/controls/form/impl/fields/csformfield.states.behavior","csui/controls/form/impl/fields/csformfield.view","csui/behaviors/default.action/default.action.behavior","csui/utils/contexts/factories/node","hbs!csui/controls/form/impl/fields/nodepicker/nodepicker","csui/controls/form/impl/array/csformarrayfield.states.behavior","csui/utils/commands","csui/utils/defaultactionitems","csui/utils/node.links/node.links","i18n!csui/controls/form/impl/nls/lang","css!csui/controls/form/impl/fields/nodepicker/nodepicker","csui/lib/binf/js/binf"],function(e,t,i,n,l,a,s,o,r,c,d,u,p,h,f,m,g,v){"use strict";var b=e.config();return t.defaults(b,{"maxDesciptLines":5}),c.extend({"constructor":function(e){c.apply(this,arguments),this.behaviors=t.extend({"defaultAction":{"behaviorClass":d}},this.behaviors);var i=this.options.context;this.connector=i.getObject(a);var n=this.model.get("data");this.node=new s(void 0,{"connector":this.connector,"autofetch":!0,"commands":m.getAllCommandSignatures(f)}),this.listenTo(this.node,"sync",this._renderNode).listenTo(this.node,"error",this._renderError),this.ancestors=new o(void 0,{"node":this.node,"autofetch":!0}),this.listenTo(this.ancestors,"sync",this._renderNode).listenTo(this.ancestors,"error",this._renderError),this.options.alpacaField&&this.options.alpacaField.options.mode&&(this.options.alpacaField.options.anchorTitle="",this.options.alpacaField.options.anchorTitleShort=""),n&&this.mapFieldValueToNodeId(n).then(t.bind(function(e){if(e){var t=this.options.context.getModel(u,{"attributes":{"id":e},"temporary":!0});this.node.set(t.attributes)}},this)),this._isReadyToSave=!0,this.editVal=n,this.oldVal=n},"mapFieldValueToNodeId":function(e){return i.Deferred().resolve(e).promise()},"mapNodeIdToFieldValue":function(e){return i.Deferred().resolve(e).promise()},"ui":{"readArea":".cs-field-read","readField":".cs-field-read a","writeArea":".cs-field-write","writeField":".cs-field-write input","searchIcon":".cs-search-icon","nodepickerIconsContainer":".csui-nodepicker-icon-container","browseIcon":".cs-browse-icon","clearIcon":".cs-clear-icon","button":".cs-field-read a"},"events":{"keydown @ui.writeArea":"onKeyDown","click @ui.searchIcon":"onSearchIconClicked","click @ui.browseIcon":"onClickWriteField","keydown @ui.browseIcon":"onClickWriteField","click @ui.clearIcon":"onClickClearIcon","keydown @ui.clearIcon":"onClickClearIcon","click @ui.button":"onClickButton"},"className":"cs-formfield cs-nodepicker","template":p,"templateHelpers":function(){var e="",i=this.options.alpacaField&&this.options.alpacaField.isRequired();return this.alpacaField&&this.alpacaField.options&&this.alpacaField.options.isMultiFieldItem&&(e=this.alpacaField.parent&&this.alpacaField.parent.options?this.alpacaField.parent.options.label:""),t.extend(c.prototype.templateHelpers.apply(this),{"asReadonly":"create"===(this.options.formView?this.options.formView.mode:this.mode),"inputType":"text","idBtnLabel":this.options.labelId,"idBtnDescription":this.options.descriptionId,"isRequired":i,"multiFieldLabel":e,"clearIconAriaLabel":v.clearIconAriaLabel,"clearIconTooltip":v.clearIconTooltip,"browseIconAriaLabel":v.browseIconAriaLabel,"browseIconTooltip":v.browseIconTooltip})},"onRender":function(){this.ui.writeField.on("change",t.bind(function(){this._isReadyToSave=!0},this)),this._parent&&this._parent.currentView&&!this._parent.currentView.isCustomView&&setTimeout(t.bind(function(){var e=i.Event("tab:content:field:changed");this.$el.trigger(e),this.ui.browseIcon&&this.ui.browseIcon.trigger("focus")},this),100),this.$el.on("focusout",t.bind(function(e){var t=this;setTimeout(function(){t.$el[0].contains(document.activeElement)||e.stopPropagation()},200)},this))},"onClickClearIcon":function(e){("keydown"!==e.type||13!==e.keyCode&&32!==e.keyCode)&&"click"!==e.type||(this.ui.writeArea.removeClass("csui-nodepicker-hasvalue"),this.editVal="",this.setValue("",!0),this.node.unset("id"),this.model.set("data",{}),this._renderField("",!0,"",""),this.ui.browseIcon.trigger("focus"))},"allowEditOnClickReadArea":function(){return!1},"allowSaveOnEnter":function(){return!1},"allowEditOnEnter":function(){return!1},"_getNodePicker":function(){var e=i.Deferred(),n=this,l=this.model.get("options")||{},a=this.model.get("schema")||{},s=l.label||a.title,o=this.node.parent&&this.node.parent.attributes||l.type_control&&l.type_control.parameters.parent||this.alpacaField&&this.alpacaField.parent.data[0]||void 0,r=o&&o.id||o;return(!r||r<0)&&(r=this.node.attributes.id),csui.require(["csui/dialogs/node.picker/node.picker"],function(i,a){var o=l.type_control.parameters,c=o.dialogTitle||s,d={"connector":n.connector,"dialogTitle":t.str.sformat(v.nodePickerDialogTitle,c),"selectableTypes":o.select_types,"unselectableTypes":o.nonselect_types,"globalSearch":!1!==o.globalSearch,"context":n.options.context,"initialContainer":{"id":r},"initialSelection":[n.node],"unselectableNodes":function(){var e=n.alpacaField&&n.alpacaField.parent&&n.alpacaField.parent.data?n.alpacaField.parent.data:void 0;return e=t.isArray(e)&&e.length?e:[n.node]}(),"resolveShortcuts":!0,"resultOriginalNode":!0};t.extend(d,o),o.startLocation&&(d.startLocation=o.startLocation),o.startLocations&&(d.startLocations=o.startLocations);var u=new i(d);e.resolve(u)},function(t){e.reject(t)}),e.promise()},"_showNodePicker":function(){this._isReadyToSave&&(this._isReadyToSave=!1,this._getNodePicker().then(t.bind(function(e){e.show().done(t.bind(function(e){var i=e.nodes[0],n=i.get("id");this.pickerArgs=e,this.mapNodeIdToFieldValue(n).then(t.bind(function(e){this.getStatesBehavior().isWriteOnly()||this.getStatesBehavior().isStateWrite()?this.editVal=e:this.getStatesBehavior().setStateRead(!1,!0),this.setValue(e,!0),this.node.set(i.attributes),this.isValueChanged=!0,this.options.context.getModel(u,{"attributes":{"id":n},"temporary":!0}).set(i.attributes)},this))},this)).fail(t.bind(function(){},this)).always(t.bind(function(){this.editVal?this.ui.clearIcon.trigger("focus"):this.ui.browseIcon.trigger("focus"),this._isReadyToSave=!0},this))},this)))},"getEditValue":function(){return this.editVal},"getOldValue":function(){return this.oldVal},"isReadyToSave":function(){return this._isReadyToSave},"onKeyDown":function(e){40===e.keyCode&&this._showNodePicker()},"onClickWriteField":function(e){("keydown"!==e.type||13!==e.keyCode&&32!==e.keyCode)&&"click"!==e.type||this._showNodePicker()},"onClickButton":function(e){e.preventDefault(),"create"!==(this.options.formView?this.options.formView.mode:this.mode)&&this.node.get("id")&&this.triggerMethod("execute:defaultAction",this.node)},"setStateWrite":function(e,t){return this.getStatesBehavior().isWriteOnly()||this.getStatesBehavior().isStateWrite()?(this.ui.readArea.addClass("binf-hidden"),this.ui.writeArea.removeClass("binf-hidden"),t&&(i(this.ui.clearIcon).is(":visible")?this.ui.clearIcon.trigger("focus"):this.ui.browseIcon.trigger("focus"))):this._showNodePicker(),!0},"_prepareFieldText":function(){var e,t=this.ancestors.pluck("name");if(this.$el.width()>0&&t.length>0){var i=this._getLocationElement(),n=this._getElementHeightWithXLines(i,b.maxDesciptLines);e=this._truncateAncestorsToFit(t,i,n).slice(-1)[0]}else e=this.ancestors.pluck("name").slice(-1)[0];return e},"_getLocationElement":function(){var e=this.$el,t=e.find("> .cs-field-read .btn-container span");return t=t.length>0?t:e.find("> .cs-field-read .btn-container a")},"_getElementHeightWithXLines":function(e,t){var i=e.css("line-height");return parseInt(i)*t},"_truncateAncestorsToFit":function(e,t,i){var n,l,a=this._removeAncestorsToFit(e,t,i);if(n=this._checkAncestorsFit(a,t,i),!0==(a.length>1&&"..."===a[1])&&!0===n.underflow){var s=e.length-a.length+1,o=e[s];1===s?(a[1]=o,l=1):(a.splice(2,0,o),l=2),a=this._truncateNameToFit(a,t,i,l)}return n=this._checkAncestorsFit(a,t,i),!0===n.overflow&&(l=0,a=this._truncateNameToFit(a,t,i,l)),n=this._checkAncestorsFit(a,t,i),!0===n.overflow&&(l=a.length-1,a=this._truncateNameToFit(a,t,i,l)),a},"_removeAncestorsToFit":function(e,t,i){var n,l,a=[].concat(e),s=2;for(l=!1,n=this._checkAncestorsFit(a,t,i);!0===n.overflow&&a.length>s;)!1===l?(a.splice(1,1,"..."),l=!0,s=3):a.splice(2,1),n=this._checkAncestorsFit(a,t,i);return a},"_truncateNameToFit":function(e,t,i,n){var l,a=[].concat(e),s=a[n];for(l=this._checkAncestorsFit(a,t,i);!0===l.overflow&&s.length>1;)s=s.substr(0,s.length-1),a[n]=s+"...",l=this._checkAncestorsFit(a,t,i);return a},"_checkAncestorsFit":function(e,t,i){t.text(e.join(" > "));var n=t.height();return{"overflow":n>i,"underflow":n<i}},"_renderNode":function(){
var e=g.getUrl(this.node),t=this.defaultActionController.hasAction(this.node),i=this.ancestors.pluck("name").join(" > "),n=this._prepareFieldText();this._renderField(e,t,i,n),this.ui.writeArea.addClass("csui-nodepicker-hasvalue");var l=this;this.isValueChanged&&setTimeout(function(){l.options.alpacaField.isRequired()?l.ui.browseIcon.trigger("focus"):l.ui.clearIcon.trigger("focus")},0)},"_renderError":function(){this._renderField("#",!1,v.originalNodeUnavailableTooltip,v.originalNodeUnavailable),this.ui.writeArea.addClass("csui-nodepicker-hasvalue")},"_renderField":function(e,i,n,l){var a,s;window.csui&&window.csui.mobile?(a=this.model.attributes.options.buttonDisabled,s=this.model.attributes.options.disabledClass):(a=!i,s=i?"":"binf-disabled"),t.extend(this.model.attributes.options,{"url":e,"buttonDisabled":a,"disabledClass":s,"anchorTitle":n,"anchorTitleShort":l}),this.render()},"resetOldValueAfterCancel":function(){return!0},"isFocusedOut":function(e){return i(".target-browse").length>0}})}),csui.define("csui/controls/form/fields/alpaca/alpnodepickerfield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/alpaca/js/alpaca.lite","csui/utils/namedsessionstorage","csui/controls/form/fields/alpaca/alpcsuipickerfield.mixin","csui/controls/form/fields/nodepickerfield.view"],function(e,t,i,n,l,a,s){var o=(new l(e.id),a.mixin({"constructor":function(e,i,n,l,a,o,r){n=t.extend(n||{},{"alpacaFieldType":"otcs_node_picker","PickerFieldView":s}),this.base(e,i,n,l,a,o,r),this.makeAlpCsuiPickerField()}}));return n.Fields.CsuiNodePickerField=n.Fields.IntegerField.extend(o),n.registerFieldClass("otcs_node_picker",n.Fields.CsuiNodePickerField,"bootstrap-csui"),n.registerFieldClass("otcs_node_picker",n.Fields.CsuiNodePickerField,"bootstrap-edit-horizontal"),i.alpaca.Fields.CsuiNodePickerField}),csui.define("hbs!csui/controls/form/impl/fields/datefield/datefield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' step="'+e.escapeExpression((a=null!=(a=s(i,"inputStep")||(null!=t?s(t,"inputStep"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"inputStep","hash":{},"data":l,"loc":{"start":{"line":5,"column":30},"end":{"line":5,"column":43}}}):a))+'"'},"3":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' size="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"size"):a,t))+'"'},"5":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' name="'+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"data":l,"loc":{"start":{"line":7,"column":25},"end":{"line":7,"column":33}}}):a))+'"'},"7":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-required="'+e.escapeExpression((a=null!=(a=s(i,"ariaRequired")||(null!=t?s(t,"ariaRequired"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"ariaRequired","hash":{},"data":l,"loc":{"start":{"line":8,"column":42},"end":{"line":8,"column":58}}}):a))+'" '},"9":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" data-"+e.escapeExpression((a=null!=(a=s(i,"key")||l&&s(l,"key"))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"key","hash":{},"data":l,"loc":{"start":{"line":9,"column":34},"end":{"line":9,"column":42}}}):a))+'="'+e.escapeExpression(e.lambda(t,t))+'" '},"11":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((a=null!=(a=s(i,"key")||l&&s(l,"key"))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"key","hash":{},"data":l,"loc":{"start":{"line":10,"column":34},"end":{"line":10,"column":42}}}):a))+'="'+e.escapeExpression(e.lambda(t,t))+'" '},"13":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-labelledby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnLabel")||(null!=t?s(t,"idBtnLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnLabel","hash":{},"data":l,"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":55}}}):a))+'" '},"15":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-describedby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnDescription")||(null!=t?s(t,"idBtnDescription"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnDescription","hash":{},"data":l,"loc":{"start":{"line":13,"column":48},"end":{"line":13,"column":68}}}):a))+'" '},"17":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((a=null!=(a=s(i,"multiFieldLabel")||(null!=t?s(t,"multiFieldLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"multiFieldLabel","hash":{},"data":l,"loc":{"start":{"line":14,"column":42},"end":{"line":14,"column":61}}}):a))+'" '},"19":function(e,t,i,n,l){return"cs-icon-disabled\r\n      "},"21":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'" tabindex="0" aria-label="'+e.escapeExpression((a=null!=(a=s(i,"datePickerIconAria")||(null!=t?s(t,"datePickerIconAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"datePickerIconAria","hash":{},"data":l,"loc":{"start":{"line":18,"column":41},"end":{"line":18,"column":63}}}):a))},"23":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="icon-container">\r\n        <div class="csui-icon-edit inline-edit-icon edit-cancel" title="'+e.escapeExpression((a=null!=(a=s(i,"cancel")||(null!=t?s(t,"cancel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"data":l,"loc":{"start":{"line":24,"column":72},"end":{"line":24,"column":82}}}):a))+'"></div>\r\n      </div>\r\n'},"25":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"options"):t)?s(a,"applyFlag"):a,{"name":"if","hash":{},"fn":e.program(26,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":27,"column":6},"end":{"line":32,"column":13}}}))?a:""},"26":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="icon-container binf-hidden">\r\n          <div class="csui-icon apply-all binf-hidden" title="'+e.escapeExpression((a=null!=(a=s(i,"titleApplyAll")||(null!=t?s(t,"titleApplyAll"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"titleApplyAll","hash":{},"data":l,"loc":{"start":{"line":29,"column":62},"end":{"line":29,"column":79}}}):a))+'" tabindex="0"\r\n               data-cstabindex="0"></div>\r\n        </div>\r\n'},"28":function(e,t,i,n,l){return" disabled "},"30":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeMultiFieldAria")||(null!=t?s(t,"readModeMultiFieldAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeMultiFieldAria","hash":{},"data":l,"loc":{"start":{"line":43,"column":24},"end":{"line":43,"column":50}}}):a))+'" data-multi="true"\r\n'},"32":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeAria")||(null!=t?s(t,"readModeAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeAria","hash":{},"data":l,"loc":{"start":{"line":45,"column":24},"end":{"line":45,"column":40}}}):a))+'"\r\n'},"34":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span title="'+e.escapeExpression((a=null!=(a=s(i,"readData")||(null!=t?s(t,"readData"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readData","hash":{},"data":l,"loc":{"start":{"line":49,"column":23},"end":{"line":49,"column":35}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"readData")||(null!=t?s(t,"readData"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readData","hash":{},"data":l,"loc":{"start":{"line":49,"column":37},"end":{"line":49,"column":49}}}):a))+"</span>\r\n"},"36":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="placeholder" title="'+e.escapeExpression((a=null!=(a=s(i,"noValue")||(null!=t?s(t,"noValue"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"noValue","hash":{},"data":l,"loc":{"start":{"line":51,"column":43},"end":{"line":51,"column":54}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"data":l,"loc":{"start":{"line":51,"column":56},"end":{"line":51,"column":70}}}):a))+"</span>\r\n"},"38":function(e,t,i,n,l){return""},"40":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="icon-container">\r\n        <div class="csui-icon-edit inline-edit-icon icon-date_picker1 icon-edit" title="'+e.escapeExpression((a=null!=(a=s(i,"edit")||(null!=t?s(t,"edit"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"data":l,"loc":{"start":{"line":58,"column":88},"end":{"line":58,"column":96}}}):a))+'"></div>\r\n      </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-field-write">\r\n  <div class="cs-field-write-inner">\r\n    <div class="binf-input-group csui-datefield-input">\r\n    <input type="'+e.escapeExpression((s=null!=(s=o(i,"inputType")||(null!=t?o(t,"inputType"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"inputType","hash":{},"data":l,"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":30}}}):s))+'" id="'+e.escapeExpression((s=null!=(s=o(i,"id")||(null!=t?o(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"data":l,"loc":{"start":{"line":4,"column":36},"end":{"line":4,"column":42}}}):s))+'" placeholder="'+e.escapeExpression((s=null!=(s=o(i,"placeholder")||(null!=t?o(t,"placeholder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"placeholder","hash":{},"data":l,"loc":{"start":{"line":4,"column":57},"end":{"line":4,"column":72}}}):s))+'" autocomplete="off"\r\n      '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"inputStep"):t,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":51}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"size"):a,{"name":"if","hash":{},"fn":e.program(3,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":57}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"name"):t,{"name":"if","hash":{},"fn":e.program(5,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":41}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"ariaRequired"):t,{"name":"if","hash":{},"fn":e.program(7,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":67}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"data"):a,{"name":"each","hash":{},"fn":e.program(9,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":63}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"attributes"):a,{"name":"each","hash":{},"fn":e.program(11,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":10,"column":6},"end":{"line":10,"column":63}}}))?a:"")+'\r\n      value="'+e.escapeExpression((s=null!=(s=o(i,"data")||(null!=t?o(t,"data"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"data":l,"loc":{"start":{"line":11,"column":13},"end":{"line":11,"column":21}}}):s))+'"\r\n      '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnLabel"):t,{"name":"if","hash":{},"fn":e.program(13,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":64}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnDescription"):t,{"name":"if","hash":{},"fn":e.program(15,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":13,"column":6},"end":{"line":13,"column":77}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(17,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":14,"column":6},"end":{"line":14,"column":70}}}))?a:"")+'/>\r\n      <span class="input-group-">\r\n          <span tabindex="0" title="'+e.escapeExpression((s=null!=(s=o(i,"datePickerIcon")||(null!=t?o(t,"datePickerIcon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"datePickerIcon","hash":{},"data":l,"loc":{"start":{"line":16,"column":36},"end":{"line":16,"column":54}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=o(i,"datePickerIcon")||(null!=t?o(t,"datePickerIcon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"datePickerIcon","hash":{},"data":l,"loc":{"start":{"line":16,"column":68},"end":{"line":16,"column":86}}}):s))+'"\r\n                role="button" class="icon-date_picker '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(19,l,0),"inverse":e.program(21,l,0),"data":l,"loc":{"start":{"line":17,"column":54},"end":{"line":18,"column":70}}}))?a:"")+'"></span>\r\n      </span>\r\n    </div>\r\n\r\n'+(null!=(a=(o(i,"xif")||t&&o(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.mode !== 'writeonly'",{"name":"xif","hash":{},"fn":e.program(23,l,0),"inverse":e.program(25,l,0),"data":l,"loc":{"start":{"line":22,"column":4},"end":{"line":33,"column":12}}}))?a:"")+'  </div>\r\n</div>\r\n\r\n<div class="cs-field-read">\r\n  <div class="cs-field-read-inner">\r\n    <div class="btn-container">\r\n      <button\r\n          '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"schema"):t)?o(a,"readonly"):a,{"name":"if","hash":{},"fn":e.program(28,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":41,"column":10},"end":{"line":41,"column":50}}}))?a:"")+"\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(30,l,0),"inverse":e.program(32,l,0),"data":l,"loc":{"start":{"line":42,"column":10},"end":{"line":46,"column":17}}}))?a:"")+"      >\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"readData"):t,{"name":"if","hash":{},"fn":e.program(34,l,0),"inverse":e.program(36,l,0),"data":l,"loc":{"start":{"line":48,"column":8},"end":{"line":52,"column":15}}}))?a:"")+"      </button>\r\n    </div>\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"schema"):t)?o(a,"readonly"):a,{"name":"if","hash":{},"fn":e.program(38,l,0),"inverse":e.program(40,l,0),"data":l,"loc":{"start":{"line":55,"column":4},"end":{"line":60,"column":11}}}))?a:"")+"  </div>\r\n</div>\r\n"},"useData":!0});return i.registerPartial("csui_controls_form_impl_fields_datefield_datefield",n),n}),csui.define("css!csui/controls/form/impl/fields/datefield/datefield",[],function(){}),csui.define("csui/lib/binf/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/lib/binf/nls/root/lang",{"previousDecade":"Previous Decade","selectDecade":"Select Decade","nextDecade":"Next Decade","previousCentury":"Previous Century","nextCentury":"Next Century","previousMonth":"Previous Month","selectMonth":"Select Month","nextMonth":"Next Month","incrementHour":"Increment Hour","pickHour":"Pick Hour","decrementHour":"Decrement Hour","incrementMinute":"Increment Minute","pickMinute":"Pick Minute","decrementMinute":"Decrement Minute","incrementSecond":"Increment Second","pickSecond":"Pick Second","decrementSecond":"Decrement Second","togglePeriod":"Toggle Period","goToToday":"Go to today","selectTime":"Select Time","selectDate":"Select Date","clearSelection":"Clear selection","closeThePicker":"Close the picker","previousYear":"Previous Year","selectYear":"Select Year","nextYear":"Next Year"}),csui.define("css!csui/lib/binf/css/binf-datetimepicker",[],function(){}),csui.define("csui/lib/binf/js/binf-datetimepicker",["csui/lib/jquery","csui/lib/moment","i18n!csui/lib/binf/nls/lang","css!csui/lib/binf/css/binf-datetimepicker","csui/lib/binf/js/binf"],function(e,t,i){"use strict";if(!t)throw new Error("binf-datetimepicker requires Moment.js to be loaded first");var n=function(n,l){var a,s,o,r,c,d={},u=t().startOf("d"),p=u.clone(),h=!0,f=!1,m=!1,g=0,v=[{"clsName":"days","navFnc":"M","navStep":1},{"clsName":"months","navFnc":"y","navStep":1},{"clsName":"years","navFnc":"y","navStep":10},{"clsName":"decades","navFnc":"y","navStep":100}],b=["days","months","years","decades"],y=["top","bottom","auto"],w=["left","right","auto"],x=["default","top","bottom"],C={"up":38,"38":"up","down":40,"40":"down","left":37,"37":"left","right":39,"39":"right","tab":9,"9":"tab","escape":27,"27":"escape","enter":13,"13":"enter","pageUp":33,"33":"pageUp","pageDown":34,"34":"pageDown","shift":16,"16":"shift","control":17,"17":"control","space":32,"32":"space","t":84,"84":"t","delete":46,"46":"delete"},k={},F=!1,E=function(e){if("string"!=typeof e||e.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(e){case"y":return-1!==o.indexOf("Y");case"M":return-1!==o.indexOf("M");case"d":return-1!==o.toLowerCase().indexOf("d");case"h":case"H":return-1!==o.toLowerCase().indexOf("h");case"m":return-1!==o.indexOf("m");case"s":return-1!==o.indexOf("s");default:return!1}},I=function(){return E("h")||E("m")||E("s")},V=function(){return E("y")||E("M")||E("d")},M=function(){var t=e("<thead>").append(e("<tr>").append(e("<th>").addClass("binf-prev").attr("data-action","previous").append(e("<span>").addClass(l.icons.previous))).append(e("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",l.calendarWeeks?"6":"5")).append(e("<th>").addClass("binf-next").attr("data-action","next").append(e("<span>").addClass(l.icons.next)))),i=e("<tbody>").append(e("<tr>").append(e("<td>").attr("colspan",l.calendarWeeks?"8":"7")));return[e("<div>").addClass("datepicker-days").append(e("<table>").addClass("binf-table-condensed").append(t).append(e("<tbody>"))),e("<div>").addClass("datepicker-months").append(e("<table>").addClass("binf-table-condensed").append(t.clone()).append(i.clone())),e("<div>").addClass("datepicker-years").append(e("<table>").addClass("binf-table-condensed").append(t.clone()).append(i.clone())),e("<div>").addClass("datepicker-decades").append(e("<table>").addClass("binf-table-condensed").append(t.clone()).append(i.clone()))]},_=function(){var t=e("<tr>"),n=e("<tr>"),a=e("<tr>");return E("h")&&(t.append(e("<td>").append(e("<a>").attr({"href":"#","tabindex":"-1","title":i.incrementHour}).addClass("binf-btn").attr("data-action","incrementHours").append(e("<span>").addClass(l.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours","title":i.pickHour}).attr("data-action","showHours"))),a.append(e("<td>").append(e("<a>").attr({"href":"#","tabindex":"-1","title":i.decrementHour}).addClass("binf-btn").attr("data-action","decrementHours").append(e("<span>").addClass(l.icons.down))))),E("m")&&(E("h")&&(t.append(e("<td>").addClass("separator")),n.append(e("<td>").addClass("separator").html(":")),a.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({"href":"#","tabindex":"-1","title":i.incrementMinute}).addClass("binf-btn").attr("data-action","incrementMinutes").append(e("<span>").addClass(l.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes","title":i.pickMinute}).attr("data-action","showMinutes"))),a.append(e("<td>").append(e("<a>").attr({"href":"#","tabindex":"-1","title":i.decrementMinute}).addClass("binf-btn").attr("data-action","decrementMinutes").append(e("<span>").addClass(l.icons.down))))),E("s")&&(E("m")&&(t.append(e("<td>").addClass("separator")),n.append(e("<td>").addClass("separator").html(":")),a.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({"href":"#","tabindex":"-1","title":i.incrementSecond}).addClass("binf-btn").attr("data-action","incrementSeconds").append(e("<span>").addClass(l.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds","title":i.pickSecond}).attr("data-action","showSeconds"))),a.append(e("<td>").append(e("<a>").attr({"href":"#","tabindex":"-1","title":i.decrementSecond}).addClass("binf-btn").attr("data-action","decrementSeconds").append(e("<span>").addClass(l.icons.down))))),s||(t.append(e("<td>").addClass("separator")),n.append(e("<td>").append(e("<button>").addClass("binf-btn binf-btn-primary").attr({"data-action":"togglePeriod","tabindex":"-1","title":i.togglePeriod}))),a.append(e("<td>").addClass("separator"))),e("<div>").addClass("timepicker-picker").append(e("<table>").addClass("binf-table-condensed").append([t,n,a]))},O=function(){var t=e("<div>").addClass("timepicker-hours").append(e("<table>").addClass("binf-table-condensed")),i=e("<div>").addClass("timepicker-minutes").append(e("<table>").addClass("binf-table-condensed")),n=e("<div>").addClass("timepicker-seconds").append(e("<table>").addClass("binf-table-condensed")),l=[_()];return E("h")&&l.push(t),E("m")&&l.push(i),E("s")&&l.push(n),l},T=function(){var t=[];return l.showTodayButton&&t.push(e("<td>").append(e("<a>").attr({"data-action":"today","title":i.goToToday}).append(e("<span>").addClass(l.icons.today)))),!l.sideBySide&&V()&&I()&&t.push(e("<td>").append(e("<a>").attr({"data-action":"togglePicker","title":i.selectTime}).append(e("<span>").addClass(l.icons.time)))),l.showClear&&t.push(e("<td>").append(e("<a>").attr({"data-action":"clear","title":i.clearSelection}).append(e("<span>").addClass(l.icons.clear)))),l.showClose&&t.push(e("<td>").append(e("<a>").attr({"data-action":"close","title":i.closeThePicker}).append(e("<span>").addClass(l.icons.close)))),e("<table>").addClass("binf-table-condensed").append(e("<tbody>").append(e("<tr>").append(t)))},S=function(){var t=e("<div>").addClass("binf-datetimepicker-widget binf-dropdown-menu"),i=e("<div>").addClass("datepicker").append(M()),n=e("<div>").addClass("timepicker").append(O()),a=e("<ul>").addClass("binf-list-unstyled"),o=e("<li>").addClass("picker-switch"+(l.collapse?" accordion-toggle":"")).append(T());return l.inline&&t.removeClass("binf-dropdown-menu"),s&&t.addClass("usetwentyfour"),E("s")&&!s&&t.addClass("wider"),l.sideBySide&&V()&&I()?(t.addClass("timepicker-sbs"),t.append(e("<div>").addClass("binf-row").append(i.addClass("binf-col-sm-6")).append(n.addClass("binf-col-sm-6"))),t.append(o),t):("top"===l.toolbarPlacement&&a.append(o),V()&&a.append(e("<li>").addClass(l.collapse&&I()?"binf-collapse binf-in":"").append(i)),"default"===l.toolbarPlacement&&a.append(o),I()&&a.append(e("<li>").addClass(l.collapse&&V()?"binf-collapse":"").append(n)),"bottom"===l.toolbarPlacement&&a.append(o),t.append(a))},A=function(){var t,i,a,s=(f||n).position(),o=(f||n).offset(),r=l.widgetPositioning.vertical,c=l.widgetPositioning.horizontal;if(l.widgetParent)t=l.widgetParent.append(m);else if(n.is("input"))t=n.after(m).parent();else{if(l.inline)return void(t=n.append(m));t=n,n.children().first().after(m)}if(i=t.closest(".cs-form").length?t.closest(".cs-form").offset().top:t.offset().top,a=t.closest(".csui-perfect-scrolling").length>0?".csui-perfect-scrolling":".csui-normal-scrolling",t.closest(a)&&t.closest(a).offset()&&(i=t.closest(a).offset().top),"auto"===r&&(r=o.top-i>250?"top":"bottom"),"auto"===c&&(c=t.width()<o.left+m.outerWidth()/2&&o.left+m.outerWidth()>e(window).width()?"right":"left"),"top"===r?m.addClass("binf-top").removeClass("binf-bottom"):m.addClass("binf-bottom").removeClass("binf-top"),"right"===c?m.addClass("binf-pull-right"):m.removeClass("binf-pull-right"),"relative"!==t.css("position")&&(t=t.parents().filter(function(){return"relative"===e(this).css("position")}).first()),0===t.length)throw new Error("datetimepicker component should be placed within a relative positioned container");m.css({"top":"top"===r?s.top+t.scrollTop()-m.height()-n.outerHeight():s.top+n.outerHeight()+t.scrollTop(),"bottom":"auto","left":"left"===c?0:"auto","right":"left"===c?"auto":t.outerWidth()-n.outerWidth()-(t===n?0:s.left)}),P({"type":"dp.place"})},P=function(e){"dp.change"===e.type&&(e.date&&e.date.isSame(e.oldDate)||!e.date&&!e.oldDate)||n.trigger(e)},D=function(e){"y"===e&&(e="YYYY"),P({"type":"dp.update","change":e,"viewDate":p.clone()})},L=function(e){m&&(e&&(c=Math.max(g,Math.min(3,c+e))),m.find(".datepicker > div").hide().filter(".datepicker-"+v[c].clsName).show())},R=function(){var t=e("<tr>"),i=p.clone().startOf("w").startOf("d");for(!0===l.calendarWeeks&&t.append(e("<th>").addClass("cw").text("#"));i.isBefore(p.clone().endOf("w"));)t.append(e("<th>").addClass("dow").text(i.format("dd"))),i.add(1,"d");m.find(".datepicker-days thead").append(t)},j=function(e){return!0===l.disabledDates[e.format("YYYY-MM-DD")]},B=function(e){return!0===l.enabledDates[e.format("YYYY-MM-DD")]},H=function(e){return!0===l.disabledHours[e.format("H")]},N=function(e){return!0===l.enabledHours[e.format("H")]},q=function(t,i){if(!t.isValid())return!1;if(l.disabledDates&&"d"===i&&j(t))return!1;if(l.enabledDates&&"d"===i&&!B(t))return!1;if(l.minDate&&t.isBefore(l.minDate,i))return!1;if(l.maxDate&&t.isAfter(l.maxDate,i))return!1;if(l.daysOfWeekDisabled&&"d"===i&&-1!==l.daysOfWeekDisabled.indexOf(t.day()))return!1;if(l.disabledHours&&("h"===i||"m"===i||"s"===i)&&H(t))return!1;if(l.enabledHours&&("h"===i||"m"===i||"s"===i)&&!N(t))return!1;if(l.disabledTimeIntervals&&("h"===i||"m"===i||"s"===i)){var n=!1;if(e.each(l.disabledTimeIntervals,function(){if(t.isBetween(this[0],this[1]))return n=!0,!1}),n)return!1}return!0},W=function(){for(var t=[],i=p.clone().startOf("y").startOf("d");i.isSame(p,"y");)t.push(e("<span>").attr("data-action","selectMonth").addClass("month").text(i.format("MMM"))),i.add(1,"M");m.find(".datepicker-months td").empty().append(t)},$=function(){var t=m.find(".datepicker-months"),n=t.find("th"),l=t.find("tbody").find("span");n.eq(0).find("span").attr("title",i.previousYear),n.eq(1).attr("title",i.selectYear),n.eq(2).find("span").attr("title",i.nextYear),t.find("binf-disabled").removeClass("binf-disabled"),q(p.clone().subtract(1,"y"),"y")||n.eq(0).addClass("binf-disabled"),n.eq(1).text(p.year()),q(p.clone().add(1,"y"),"y")||n.eq(2).addClass("binf-disabled"),l.removeClass("binf-active"),u.isSame(p,"y")&&!h&&l.eq(u.month()).addClass("binf-active"),l.each(function(t){q(p.clone().month(t),"M")||e(this).addClass("binf-disabled")})},U=function(){var e=m.find(".datepicker-years"),t=e.find("th"),n=p.clone().subtract(5,"y"),a=p.clone().add(6,"y"),s="";for(t.eq(0).find("span").attr("title",i.previousDecade),t.eq(1).attr("title",i.selectDecade),t.eq(2).find("span").attr("title",i.nextDecade),e.find(".binf-disabled").removeClass("binf-disabled"),l.minDate&&l.minDate.isAfter(n,"y")&&t.eq(0).addClass("binf-disabled"),t.eq(1).text(n.year()+"-"+a.year()),l.maxDate&&l.maxDate.isBefore(a,"y")&&t.eq(2).addClass("binf-disabled");!n.isAfter(a,"y");)s+='<span data-action="selectYear" class="year'+(n.isSame(u,"y")&&!h?" binf-active":"")+(q(n,"y")?"":" binf-disabled")+'">'+n.year()+"</span>",n.add(1,"y");e.find("td").html(s)},K=function(){var e=m.find(".datepicker-decades"),n=e.find("th"),a=t(p.isBefore(t({"y":1999}))?{"y":1899}:{"y":1999}),s=a.clone().add(100,"y"),o="";for(n.eq(0).find("span").attr("title",i.previousCentury),n.eq(2).find("span").attr("title",i.nextCentury),e.find(".binf-disabled").removeClass("binf-disabled"),(a.isSame(t({"y":1900}))||l.minDate&&l.minDate.isAfter(a,"y"))&&n.eq(0).addClass("binf-disabled"),n.eq(1).text(a.year()+"-"+s.year()),(a.isSame(t({"y":2e3}))||l.maxDate&&l.maxDate.isBefore(s,"y"))&&n.eq(2).addClass("binf-disabled");!a.isAfter(s,"y");)o+='<span data-action="selectDecade" class="decade'+(a.isSame(u,"y")?" binf-active":"")+(q(a,"y")?"":" binf-disabled")+'" data-selection="'+(a.year()+6)+'">'+(a.year()+1)+" - "+(a.year()+12)+"</span>",a.add(12,"y");o+="<span></span><span></span><span></span>",e.find("td").html(o)},z=function(){var n,a,s,o,r=m.find(".datepicker-days"),c=r.find("th"),d=[];if(V()){for(c.eq(0).find("span").attr("title",i.previousMonth),c.eq(1).attr("title",i.selectMonth),c.eq(2).find("span").attr("title",i.nextMonth),r.find(".binf-disabled").removeClass("binf-disabled"),c.eq(1).text(p.format(l.dayViewHeaderFormat)),q(p.clone().subtract(1,"M"),"M")||c.eq(0).addClass("binf-disabled"),q(p.clone().add(1,"M"),"M")||c.eq(2).addClass("binf-disabled"),n=p.clone().startOf("M").startOf("w").startOf("d"),o=0;o<42;o++)0===n.weekday()&&(a=e("<tr>"),l.calendarWeeks&&a.append('<td class="cw">'+n.week()+"</td>"),d.push(a)),s="",n.isBefore(p,"M")&&(s+=" old"),n.isAfter(p,"M")&&(s+=" new"),n.isSame(u,"d")&&!h&&(s+=" binf-active"),q(n,"d")||(s+=" binf-disabled"),n.isSame(t(),"d")&&(s+=" today"),0!==n.day()&&6!==n.day()||(s+=" weekend"),a.append('<td data-action="selectDay" data-day="'+n.format("L")+'" class="day'+s+'">'+n.date()+"</td>"),n.add(1,"d");r.find("tbody").empty().append(d),$(),U(),K()}},Y=function(){var t=m.find(".timepicker-hours table"),i=p.clone().startOf("d"),n=[],l=e("<tr>");for(p.hour()>11&&!s&&i.hour(12);i.isSame(p,"d")&&(s||p.hour()<12&&i.hour()<12||p.hour()>11);)i.hour()%4==0&&(l=e("<tr>"),n.push(l)),l.append('<td data-action="selectHour" class="hour'+(q(i,"h")?"":" binf-disabled")+'">'+i.format(s?"HH":"hh")+"</td>"),i.add(1,"h");t.empty().append(n)},G=function(){for(var t=m.find(".timepicker-minutes table"),i=p.clone().startOf("h"),n=[],a=e("<tr>"),s=1===l.stepping?5:l.stepping;p.isSame(i,"h");)i.minute()%(4*s)==0&&(a=e("<tr>"),n.push(a)),
a.append('<td data-action="selectMinute" class="minute'+(q(i,"m")?"":" binf-disabled")+'">'+i.format("mm")+"</td>"),i.add(s,"m");t.empty().append(n)},Q=function(){for(var t=m.find(".timepicker-seconds table"),i=p.clone().startOf("m"),n=[],l=e("<tr>");p.isSame(i,"m");)i.second()%20==0&&(l=e("<tr>"),n.push(l)),l.append('<td data-action="selectSecond" class="second'+(q(i,"s")?"":" binf-disabled")+'">'+i.format("ss")+"</td>"),i.add(5,"s");t.empty().append(n)},J=function(){var e,t,i=m.find(".timepicker span[data-time-component]");s||(e=m.find(".timepicker [data-action=togglePeriod]"),t=u.clone().add(u.hours()>=12?-12:12,"h"),e.text(u.format("A")),q(t,"h")?e.removeClass("binf-disabled"):e.addClass("binf-disabled")),i.filter("[data-time-component=hours]").text(u.format(s?"HH":"hh")),i.filter("[data-time-component=minutes]").text(u.format("mm")),i.filter("[data-time-component=seconds]").text(u.format("ss")),Y(),G(),Q()},X=function(){m&&(z(),J())},Z=function(e){var t=h?null:u;if(!e)return h=!0,a.val(""),n.data("date",""),P({"type":"dp.change","date":!1,"oldDate":t}),void X();e=e.clone().locale(l.locale),1!==l.stepping&&e.minutes(Math.round(e.minutes()/l.stepping)*l.stepping%60).seconds(0),q(e)?(u=e,p=u.clone(),a.val(u.format(l.format)),n.data("date",u.format(l.format)),h=!1,X(),P({"type":"dp.change","date":u.clone(),"oldDate":t})):(l.keepInvalid||a.val(h?"":u.format(o)),P({"type":"dp.error","date":e}))},ee=function(){var t,i,n;return m&&m.hasClass("binf-top")&&l.widgetParent&&(t=l.widgetParent.append(m),(i=t.closest(".cs-perspective-panel")&&t.closest(".cs-perspective-panel").parent()&&t.closest(".cs-perspective-panel").parent().find(".csui-navbar"))&&i.length>0&&i.css("z-index","")),n=!1,m?(m.find(".binf-collapse").each(function(){var t=e(this).data("collapse");return!t||!t.transitioning||(n=!0,!1)}),n?d:(f&&f.hasClass("binf-btn")&&f.toggleClass("binf-active"),m.hide(),e(window).off("resize",ee),m.off("click touchend","[data-action]"),m.off("mousedown touchstart",!1),m.remove(),m=!1,P({"type":"dp.hide","date":u.clone()}),d)):d},te=function(){Z(null)},ie={"next":function(){var e=v[c].navFnc;p.add(v[c].navStep,e),z(),D(e)},"previous":function(){var e=v[c].navFnc;p.subtract(v[c].navStep,e),z(),D(e)},"pickerSwitch":function(){L(1)},"selectMonth":function(t){var i=e(t.target).closest("tbody").find("span").index(e(t.target));p.month(i),c===g?(Z(u.clone().year(p.year()).month(p.month())),l.inline||ee()):(L(-1),z()),D("M")},"selectYear":function(t){var i=parseInt(e(t.target).text(),10)||0;p.year(i),c===g?(Z(u.clone().year(p.year())),l.inline||ee()):(L(-1),z()),D("YYYY")},"selectDecade":function(t){var i=parseInt(e(t.target).data("selection"),10)||0;p.year(i),c===g?(Z(u.clone().year(p.year())),l.inline||ee()):(L(-1),z()),D("YYYY")},"selectDay":function(t){var i=p.clone();e(t.target).is(".old")&&i.subtract(1,"M"),e(t.target).is(".new")&&i.add(1,"M"),Z(i.date(parseInt(e(t.target).text(),10))),I()||l.keepOpen||l.inline||ee(),e(window).off("resize",ee)},"incrementHours":function(){var e=u.clone().add(1,"h");q(e,"h")&&Z(e)},"incrementMinutes":function(){var e=u.clone().add(l.stepping,"m");q(e,"m")&&Z(e)},"incrementSeconds":function(){var e=u.clone().add(1,"s");q(e,"s")&&Z(e)},"decrementHours":function(){var e=u.clone().subtract(1,"h");q(e,"h")&&Z(e)},"decrementMinutes":function(){var e=u.clone().subtract(l.stepping,"m");q(e,"m")&&Z(e)},"decrementSeconds":function(){var e=u.clone().subtract(1,"s");q(e,"s")&&Z(e)},"togglePeriod":function(){Z(u.clone().add(u.hours()>=12?-12:12,"h"))},"togglePicker":function(t){var n,a=e(t.target),s=a.closest("ul"),o=s.find(".binf-in"),r=s.find(".binf-collapse:not(.binf-in)");if(o&&o.length){if((n=o.data("collapse"))&&n.transitioning)return;o.binf_collapse?(o.binf_collapse("hide"),r.binf_collapse("show")):(o.removeClass("binf-in"),r.addClass("binf-in")),a.hasClass("binf-glyphicon binf-glyphicon-calendar")?o.siblings().find("a:not(.binf-btn)").attr("title",i.selectTime):o.siblings().find("a:not(.binf-btn)").attr("title",i.selectDate),a.is("span")?a.toggleClass(l.icons.time+" "+l.icons.date):a.find("span").toggleClass(l.icons.time+" "+l.icons.date)}},"showPicker":function(){m.find(".timepicker > div:not(.timepicker-picker)").hide(),m.find(".timepicker .timepicker-picker").show()},"showHours":function(){m.find(".timepicker .timepicker-picker").hide(),m.find(".timepicker .timepicker-hours").show()},"showMinutes":function(){m.find(".timepicker .timepicker-picker").hide(),m.find(".timepicker .timepicker-minutes").show()},"showSeconds":function(){m.find(".timepicker .timepicker-picker").hide(),m.find(".timepicker .timepicker-seconds").show()},"selectHour":function(t){var i=parseInt(e(t.target).text(),10);s||(u.hours()>=12?12!==i&&(i+=12):12===i&&(i=0)),Z(u.clone().hours(i)),ie.showPicker.call(d)},"selectMinute":function(t){Z(u.clone().minutes(parseInt(e(t.target).text(),10))),ie.showPicker.call(d)},"selectSecond":function(t){Z(u.clone().seconds(parseInt(e(t.target).text(),10))),ie.showPicker.call(d)},"clear":te,"today":function(){q(t(),"d")&&Z(t())},"close":ee},ne=function(t){return!e(t.currentTarget).is(".binf-disabled")&&(ie[e(t.currentTarget).data("action")].apply(d,arguments),!1)},le=function(){var i,n,s,o={"year":function(e){return e.month(0).date(1).hours(0).seconds(0).minutes(0)},"month":function(e){return e.date(1).hours(0).seconds(0).minutes(0)},"day":function(e){return e.hours(0).seconds(0).minutes(0)},"hour":function(e){return e.seconds(0).minutes(0)},"minute":function(e){return e.seconds(0)}};if(""!==a.val()||h||(h=!0),a.prop("disabled")||!l.ignoreReadonly&&a.prop("readonly")||m)return d;void 0!==a.val()&&0!==a.val().trim().length?Z(re(a.val().trim())):l.useCurrent&&h&&(a.is("input")&&0===a.val().trim().length||l.inline)&&(i=l.defaultDate?l.defaultDate:t(),"string"==typeof l.useCurrent&&(i=o[l.useCurrent](i)),Z(i)),m=S(),R(),W(),m.find(".timepicker-hours").hide(),m.find(".timepicker-minutes").hide(),m.find(".timepicker-seconds").hide(),X(),L(),e(window).on("resize",ee),m.on("click touchend","[data-action]",ne),m.on("mousedown touchstart",!1),f&&f.hasClass("binf-btn")&&f.toggleClass("binf-active");var r=e("body").find(".binf-datetimepicker-widget");return ae()&&r.length>0&&r.hide(),m.show(),""===m.css("display")&&m.css("display","block"),A(),!l.focusOnShow||a.is(":focus")||ae()?ae()&&(e(a.context).find(".icon-date_picker").trigger("focus"),le()):a.trigger("focus"),P({"type":"dp.show"}),m&&m.hasClass("binf-top")&&l.widgetParent&&(s=l.widgetParent.append(m),(n=s.closest(".cs-perspective-panel")&&s.closest(".cs-perspective-panel").parent()&&s.closest(".cs-perspective-panel").parent().find(".csui-navbar"))&&n.length>0&&n.css("z-index",-n.css("z-index"))),d},ae=function(){return se()&&window.matchMedia("(orientation: landscape)").matches},se=function(){if(navigator&&null!=navigator.userAgent){return null!=navigator.userAgent.match(/(iPad)/i)}return!0},oe=function(){return m?ee():le()},re=function(e){return e=void 0===l.parseInputDate?t.isMoment(e)||e instanceof Date?t(e):t(e,r,l.useStrict):l.parseInputDate(e),e.locale(l.locale),e},ce=function(e){var t,i,n,a,s=null,o=[],r={},c=e.which;k[c]="p";for(t in k)k.hasOwnProperty(t)&&"p"===k[t]&&(o.push(t),parseInt(t,10)!==c&&(r[t]=!0));for(t in l.keyBinds)if(l.keyBinds.hasOwnProperty(t)&&"function"==typeof l.keyBinds[t]&&(n=t.split(" "),n.length===o.length&&C[c]===n[n.length-1])){for(a=!0,i=n.length-2;i>=0;i--)if(!(C[n[i]]in r)){a=!1;break}if(a){s=l.keyBinds[t];break}}F=!1,s&&(s.call(d,m)||(e.stopPropagation(),e.preventDefault(),F=!0)),9!==e.which&&13!==e.which&&27!==e.which||(k[e.which]="r")},de=function(e){k[e.which]="r",F&&(e.stopPropagation(),e.preventDefault())},ue=function(t){var i=e(t.target).val().trim(),n=i?re(i):null;return Z(n),t.stopImmediatePropagation(),!1},pe=function(){a.off({"change":ue,"blur":ee,"keydown":ce,"keyup":de,"focus":l.allowInputToggle?ee:""}),n.is("input")?a.off({"focus":le}):f&&(f.off("click touchend",oe),f.off("mousedown touchstart",!1))},he=function(t){var i={};return e.each(t,function(){var e=re(this);e.isValid()&&(i[e.format("YYYY-MM-DD")]=!0)}),!!Object.keys(i).length&&i},fe=function(t){var i={};return e.each(t,function(){i[this]=!0}),!!Object.keys(i).length&&i},me=function(){var e=l.format||"L LT";o=e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){return(u.localeData().longDateFormat(e)||e).replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){return u.localeData().longDateFormat(e)||e})}),r=l.extraFormats?l.extraFormats.slice():[],r.indexOf(e)<0&&r.indexOf(o)<0&&r.push(o),s=o.toLowerCase().indexOf("a")<1&&o.replace(/\[.*?\]/g,"").indexOf("h")<1,E("y")&&(g=2),E("M")&&(g=1),E("d")&&(g=0),c=Math.max(g,c),h||Z(u)};if(d.destroy=function(){ee(),pe(),n.removeData("DateTimePicker"),n.removeData("date")},d.toggle=oe,d.show=le,d.hide=ee,d.disable=function(){return ee(),f&&f.hasClass("binf-btn")&&f.addClass("binf-disabled"),a.prop("disabled",!0),d},d.enable=function(){return f&&f.hasClass("binf-btn")&&f.removeClass("binf-disabled"),a.prop("disabled",!1),d},d.ignoreReadonly=function(e){if(0===arguments.length)return l.ignoreReadonly;if("boolean"!=typeof e)throw new TypeError("ignoreReadonly () expects a boolean parameter");return l.ignoreReadonly=e,d},d.options=function(t){if(0===arguments.length)return e.extend(!0,{},l);if(!(t instanceof Object))throw new TypeError("options() options parameter should be an object");return e.extend(!0,l,t),e.each(l,function(e,t){if(void 0===d[e])throw new TypeError("option "+e+" is not recognized!");d[e](t)}),d},d.date=function(e){if(0===arguments.length)return h?null:u.clone();if(!(null===e||"string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return Z(null===e?null:re(e)),d},d.format=function(e){if(0===arguments.length)return l.format;if("string"!=typeof e&&("boolean"!=typeof e||!1!==e))throw new TypeError("format() expects a sting or boolean:false parameter "+e);return l.format=e,o&&me(),d},d.dayViewHeaderFormat=function(e){if(0===arguments.length)return l.dayViewHeaderFormat;if("string"!=typeof e)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return l.dayViewHeaderFormat=e,d},d.extraFormats=function(e){if(0===arguments.length)return l.extraFormats;if(!1!==e&&!(e instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return l.extraFormats=e,r&&me(),d},d.disabledDates=function(t){if(0===arguments.length)return l.disabledDates?e.extend({},l.disabledDates):l.disabledDates;if(!t)return l.disabledDates=!1,X(),d;if(!(t instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return l.disabledDates=he(t),l.enabledDates=!1,X(),d},d.enabledDates=function(t){if(0===arguments.length)return l.enabledDates?e.extend({},l.enabledDates):l.enabledDates;if(!t)return l.enabledDates=!1,X(),d;if(!(t instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return l.enabledDates=he(t),l.disabledDates=!1,X(),d},d.daysOfWeekDisabled=function(e){if(0===arguments.length)return l.daysOfWeekDisabled.splice(0);if("boolean"==typeof e&&!e)return l.daysOfWeekDisabled=!1,X(),d;if(!(e instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(l.daysOfWeekDisabled=e.reduce(function(e,t){return(t=parseInt(t,10))>6||t<0||isNaN(t)?e:(-1===e.indexOf(t)&&e.push(t),e)},[]).sort(),l.useCurrent&&!l.keepInvalid){for(var t=0;!q(u,"d");){if(u.add(1,"d"),7===t)throw"Tried 7 times to find a valid date";t++}Z(u)}return X(),d},d.maxDate=function(e){if(0===arguments.length)return l.maxDate?l.maxDate.clone():l.maxDate;if("boolean"==typeof e&&!1===e)return l.maxDate=!1,X(),d;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=t()));var i=re(e);if(!i.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+e);if(l.minDate&&i.isBefore(l.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+i.format(o));return l.maxDate=i,l.useCurrent&&!l.keepInvalid&&u.isAfter(e)&&Z(l.maxDate),p.isAfter(i)&&(p=i.clone()),X(),d},d.minDate=function(e){if(0===arguments.length)return l.minDate?l.minDate.clone():l.minDate;if("boolean"==typeof e&&!1===e)return l.minDate=!1,X(),d;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=t()));var i=re(e);if(!i.isValid())throw new TypeError("minDate() Could not parse date parameter: "+e);if(l.maxDate&&i.isAfter(l.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+i.format(o));return l.minDate=i,l.useCurrent&&!l.keepInvalid&&u.isBefore(e)&&Z(l.minDate),p.isBefore(i)&&(p=i.clone()),X(),d},d.defaultDate=function(e){if(0===arguments.length)return l.defaultDate?l.defaultDate.clone():l.defaultDate;if(!e)return l.defaultDate=!1,d;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=t()));var i=re(e);if(!i.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+e);if(!q(i))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return l.defaultDate=i,(l.defaultDate&&l.inline||""===a.val().trim()&&void 0===a.attr("placeholder"))&&Z(l.defaultDate),d},d.locale=function(e){if(0===arguments.length)return l.locale;if(!t.localeData(e))throw new TypeError("locale() locale "+e+" is not loaded from moment locales!");return l.locale=e,u.locale(l.locale),p.locale(l.locale),o&&me(),m&&(ee(),le()),d},d.stepping=function(e){return 0===arguments.length?l.stepping:(e=parseInt(e,10),(isNaN(e)||e<1)&&(e=1),l.stepping=e,d)},d.useCurrent=function(e){var t=["year","month","day","hour","minute"];if(0===arguments.length)return l.useCurrent;if("boolean"!=typeof e&&"string"!=typeof e)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof e&&-1===t.indexOf(e.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+t.join(", "));return l.useCurrent=e,d},d.collapse=function(e){if(0===arguments.length)return l.collapse;if("boolean"!=typeof e)throw new TypeError("collapse() expects a boolean parameter");return l.collapse===e?d:(l.collapse=e,m&&(ee(),le()),d)},d.icons=function(t){if(0===arguments.length)return e.extend({},l.icons);if(!(t instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return e.extend(l.icons,t),m&&(ee(),le()),d},d.useStrict=function(e){if(0===arguments.length)return l.useStrict;if("boolean"!=typeof e)throw new TypeError("useStrict() expects a boolean parameter");return l.useStrict=e,d},d.sideBySide=function(e){if(0===arguments.length)return l.sideBySide;if("boolean"!=typeof e)throw new TypeError("sideBySide() expects a boolean parameter");return l.sideBySide=e,m&&(ee(),le()),d},d.viewMode=function(e){if(0===arguments.length)return l.viewMode;if("string"!=typeof e)throw new TypeError("viewMode() expects a string parameter");if(-1===b.indexOf(e))throw new TypeError("viewMode() parameter must be one of ("+b.join(", ")+") value");return l.viewMode=e,c=Math.max(b.indexOf(e),g),L(),d},d.toolbarPlacement=function(e){if(0===arguments.length)return l.toolbarPlacement;if("string"!=typeof e)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===x.indexOf(e))throw new TypeError("toolbarPlacement() parameter must be one of ("+x.join(", ")+") value");return l.toolbarPlacement=e,m&&(ee(),le()),d},d.widgetPositioning=function(t){if(0===arguments.length)return e.extend({},l.widgetPositioning);if("[object Object]"!=={}.toString.call(t))throw new TypeError("widgetPositioning() expects an object variable");if(t.horizontal){if("string"!=typeof t.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(t.horizontal=t.horizontal.toLowerCase(),-1===w.indexOf(t.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+w.join(", ")+")");l.widgetPositioning.horizontal=t.horizontal}if(t.vertical){if("string"!=typeof t.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(t.vertical=t.vertical.toLowerCase(),-1===y.indexOf(t.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+y.join(", ")+")");l.widgetPositioning.vertical=t.vertical}return X(),d},d.calendarWeeks=function(e){if(0===arguments.length)return l.calendarWeeks;if("boolean"!=typeof e)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return l.calendarWeeks=e,X(),d},d.showTodayButton=function(e){if(0===arguments.length)return l.showTodayButton;if("boolean"!=typeof e)throw new TypeError("showTodayButton() expects a boolean parameter");return l.showTodayButton=e,m&&(ee(),le()),d},d.showClear=function(e){if(0===arguments.length)return l.showClear;if("boolean"!=typeof e)throw new TypeError("showClear() expects a boolean parameter");return l.showClear=e,m&&(ee(),le()),d},d.widgetParent=function(t){if(0===arguments.length)return l.widgetParent;if("string"==typeof t&&(t=e(t)),null!==t&&"string"!=typeof t&&!(t instanceof e))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return l.widgetParent=t,m&&(ee(),le()),d},d.keepOpen=function(e){if(0===arguments.length)return l.keepOpen;if("boolean"!=typeof e)throw new TypeError("keepOpen() expects a boolean parameter");return l.keepOpen=e,d},d.focusOnShow=function(e){if(0===arguments.length)return l.focusOnShow;if("boolean"!=typeof e)throw new TypeError("focusOnShow() expects a boolean parameter");return l.focusOnShow=e,d},d.inline=function(e){if(0===arguments.length)return l.inline;if("boolean"!=typeof e)throw new TypeError("inline() expects a boolean parameter");return l.inline=e,d},d.clear=function(){return te(),d},d.keyBinds=function(e){return l.keyBinds=e,d},d.debug=function(e){if("boolean"!=typeof e)throw new TypeError("debug() expects a boolean parameter");return l.debug=e,d},d.allowInputToggle=function(e){if(0===arguments.length)return l.allowInputToggle;if("boolean"!=typeof e)throw new TypeError("allowInputToggle() expects a boolean parameter");return l.allowInputToggle=e,d},d.showClose=function(e){if(0===arguments.length)return l.showClose;if("boolean"!=typeof e)throw new TypeError("showClose() expects a boolean parameter");return l.showClose=e,d},d.keepInvalid=function(e){if(0===arguments.length)return l.keepInvalid;if("boolean"!=typeof e)throw new TypeError("keepInvalid() expects a boolean parameter");return l.keepInvalid=e,d},d.datepickerInput=function(e){if(0===arguments.length)return l.datepickerInput;if("string"!=typeof e)throw new TypeError("datepickerInput() expects a string parameter");return l.datepickerInput=e,d},d.parseInputDate=function(e){if(0===arguments.length)return l.parseInputDate;if("function"!=typeof e)throw new TypeError("parseInputDate() sholud be as function");return l.parseInputDate=e,d},d.disabledTimeIntervals=function(t){if(0===arguments.length)return l.disabledTimeIntervals?e.extend({},l.disabledTimeIntervals):l.disabledTimeIntervals;if(!t)return l.disabledTimeIntervals=!1,X(),d;if(!(t instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return l.disabledTimeIntervals=t,X(),d},d.disabledHours=function(t){if(0===arguments.length)return l.disabledHours?e.extend({},l.disabledHours):l.disabledHours;if(!t)return l.disabledHours=!1,X(),d;if(!(t instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(l.disabledHours=fe(t),l.enabledHours=!1,l.useCurrent&&!l.keepInvalid){for(var i=0;!q(u,"h");){if(u.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}Z(u)}return X(),d},d.enabledHours=function(t){if(0===arguments.length)return l.enabledHours?e.extend({},l.enabledHours):l.enabledHours;if(!t)return l.enabledHours=!1,X(),d;if(!(t instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(l.enabledHours=fe(t),l.disabledHours=!1,l.useCurrent&&!l.keepInvalid){for(var i=0;!q(u,"h");){if(u.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}Z(u)}return X(),d},d.viewDate=function(e){if(0===arguments.length)return p.clone();if(!e)return p=u.clone(),d;if(!("string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return p=re(e),D(),d},n.is("input"))a=n;else if(a=n.find(l.datepickerInput),0===a.length)a=n.find("input");else if(!a.is("input"))throw new Error('CSS class "'+l.datepickerInput+'" cannot be applied to non input element');if(n.hasClass("binf-input-group")&&(f=0===n.find(".datepickerbutton").length?n.find('[class^="input-group-"]'):n.find(".datepickerbutton")),!l.inline&&!a.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return e.extend(!0,l,function(){var t,i={};return t=n.is("input")||l.inline?n.data():n.find("input").data(),t.dateOptions&&t.dateOptions instanceof Object&&(i=e.extend(!0,i,t.dateOptions)),e.each(l,function(e){var n="date"+e.charAt(0).toUpperCase()+e.slice(1);void 0!==t[n]&&(i[e]=t[n])}),i}()),d.options(l),me(),function(){a.on({"change":ue,"blur":l.debug?"":ee,"keydown":ce,"keyup":de,"focus":l.allowInputToggle?le:""}),n.is("input")?a.on({"focus":le}):f&&(f.on("click touchend",oe),f.on("mousedown touchstart",!1))}(),a.prop("disabled")&&d.disable(),a.is("input")&&0!==a.val().trim().length?Z(re(a.val().trim())):l.defaultDate&&void 0===a.attr("placeholder")&&Z(l.defaultDate),l.inline&&le(),d};e.fn.datetimepicker=function(t){return this.each(function(){var i=e(this);i.data("DateTimePicker")||(t=e.extend(!0,{},e.fn.datetimepicker.defaults,t),i.data("DateTimePicker",n(i,t)))})},e.fn.datetimepicker.defaults={"format":!1,"dayViewHeaderFormat":"MMMM YYYY","extraFormats":!1,"stepping":1,"minDate":!1,"maxDate":!1,"useCurrent":!0,"collapse":!0,"locale":t.locale(),"defaultDate":!1,"disabledDates":!1,"enabledDates":!1,"icons":{"time":"binf-glyphicon binf-glyphicon-time","date":"binf-glyphicon binf-glyphicon-calendar","up":"binf-glyphicon binf-glyphicon-chevron-up","down":"binf-glyphicon binf-glyphicon-chevron-down","previous":this&&this.i18n.settings.rtl?"binf-glyphicon binf-glyphicon-chevron-right":"binf-glyphicon binf-glyphicon-chevron-left","next":this&&this.i18n.settings.rtl?"binf-glyphicon binf-glyphicon-chevron-left":"binf-glyphicon binf-glyphicon-chevron-right","today":"binf-glyphicon binf-glyphicon-screenshot","clear":"binf-glyphicon binf-glyphicon-trash","close":"binf-glyphicon binf-glyphicon-remove"},"useStrict":!1,"sideBySide":!1,"daysOfWeekDisabled":!1,"calendarWeeks":!1,"viewMode":"days","toolbarPlacement":"default","showTodayButton":!1,"showClear":!1,"showClose":!1,"widgetPositioning":{"horizontal":"auto","vertical":"auto"},"widgetParent":null,"ignoreReadonly":!1,"keepOpen":!1,"focusOnShow":!0,"inline":!1,"keepInvalid":!1,"datepickerInput":".datepickerinput","keyBinds":{"up":function(e){if(e){var i=this.date()||t();e.find(".datepicker").is(":visible")?this.date(i.clone().subtract(7,"d")):this.date(i.clone().add(1,"m"))}},"down":function(e){if(!e)return void this.show();var i=this.date()||t();e.find(".datepicker").is(":visible")?this.date(i.clone().add(7,"d")):this.date(i.clone().subtract(1,"m"))},"control up":function(e){if(e){var i=this.date()||t();e.find(".datepicker").is(":visible")?this.date(i.clone().subtract(1,"y")):this.date(i.clone().add(1,"h"))}},"control down":function(e){if(e){var i=this.date()||t();e.find(".datepicker").is(":visible")?this.date(i.clone().add(1,"y")):this.date(i.clone().subtract(1,"h"))}},"left":function(e){if(e){var i=this.date()||t();e.find(".datepicker").is(":visible")&&this.date(i.clone().subtract(1,"d"))}},"right":function(e){if(e){var i=this.date()||t();e.find(".datepicker").is(":visible")&&this.date(i.clone().add(1,"d"))}},"pageUp":function(e){if(e){var i=this.date()||t();e.find(".datepicker").is(":visible")&&this.date(i.clone().subtract(1,"M"))}},"pageDown":function(e){if(e){var i=this.date()||t();e.find(".datepicker").is(":visible")&&this.date(i.clone().add(1,"M"))}},"enter":function(e){if(!e)return!0;this.hide()},"escape":function(e){if(!e)return!0;this.hide()},"tab":function(e){if(e&&e.find(".datepicker").is(":visible")){var t=e.find('.picker-switch a[data-action="togglePicker"]');t.length>0&&t.click()}else{if(!e)return!0;this.hide()}},"shift tab":function(e){if(e&&e.find(".timepicker").is(":visible")){var t=e.find('.picker-switch a[data-action="togglePicker"]');t.length>0&&t.click()}else{if(!e)return!0;this.hide()}},"control space":function(e){e.find(".timepicker").is(":visible")&&e.find('.binf-btn[data-action="togglePeriod"]').click()},"t":function(){this.date(t())},"delete":function(){this.clear()}},"debug":!1,"allowInputToggle":!1,"disabledTimeIntervals":!1,"disabledHours":!1,"enabledHours":!1,"viewDate":!1}}),csui.define("csui/controls/form/fields/impl/datebasefield.view",["i18n","csui/lib/underscore","csui/utils/base","csui/lib/jquery","csui/lib/marionette","csui/utils/types/date","csui/controls/form/impl/fields/csformfield.view","i18n!csui/controls/form/impl/nls/lang","hbs!csui/controls/form/impl/fields/datefield/datefield","css!csui/controls/form/impl/fields/datefield/datefield","csui/lib/binf/js/binf","csui/lib/binf/js/binf-datetimepicker"],function(e,t,i,n,l,a,s,o,r){"use strict";return s.extend({"constructor":function(e){this.ui.subInputField=".icon-date_picker",s.apply(this,arguments),this.curVal=this.model.get("data")},"inputType":null,"inputStep":null,"className":"cs-formfield cs-datefield","template":r,"events":{"change @ui.writeField":"onChangeWriteField","keydown .icon-date_picker":"onDateIconKeyDown","keydown @ui.writeField":"onWriteFieldKeyDown"},"onChangeWriteField":function(e){return!0},"onWriteFieldKeyDown":function(e){if(27===e.keyCode){this.$el.find(".icon-container")[0].classList.add("binf-hidden")}},"onDateIconKeyDown":function(e){13!==e.keyCode&&32!==e.keyCode||(e.stopPropagation(),e.preventDefault(),this.$el.find(".icon-date_picker").trigger("click"))},"templateHelpers":function(){var e=this.getValue(),i=this._convertFromModelToInput(e),n="",l="",a="readonly"===this.mode,r="",c=!1,d=!1,u="";if(c=this.options.alpacaField&&this.options.alpacaField.isRequired(),d=!(!this.options.alpacaField||!this.options.alpacaField.schema.disabled),u=c?o.requiredField:"",this.alpacaField&&this.alpacaField.options&&this.alpacaField.options.isMultiFieldItem&&(n=this.alpacaField.parent&&this.alpacaField.parent.options?this.alpacaField.parent.options.label:""),this.model.get("options")){var p=i||o.noValue;l=a?t.str.sformat(o.fieldReadOnlyAria,this.model.get("options").label,p)+u:t.str.sformat(o.fieldEditAria,this.model.get("options").label,p)+u}return r=a?t.str.sformat(o.fieldReadOnlyAria,n,i)+u:t.str.sformat(o.fieldEditAria,n,i)+u,t.extend(s.prototype.templateHelpers.apply(this),{"data":i,"readData":i,"placeholder":d?o.noValueSet:this.format.toLowerCase(),"inputType":"text","idBtnLabel":this.options.labelId,"idBtnDescription":this.options.descriptionId,"readModeAria":l,"readModeMultiFieldAria":r,"multiFieldLabel":n,"ariaRequired":c,"disabled":d})},"setStateWrite":function(){if(this.initialValue=this.getValue(),n.fn.datetimepicker){var l=this,a={"format":this.format,"keepInvalid":!0,"useStrict":!0,"widgetParent":this.$el,"showClear":i.isTouchBrowser(),"widgetPositioning":{"vertical":"auto","horizontal":e.settings.rtl?"right":"left"}};this.options&&this.options.alpacaField&&this.options.alpacaField.defaultDate&&t.extend(a,{"defaultDate":this.options.alpacaField.defaultDate}),this.ui.writeDateField.datetimepicker(a).on("dp.change",function(e){l.getEditableBehavior()._showApplyAll(e),e.stopImmediatePropagation(),n(e.target).parents(".csui-normal-scrolling").css("overflow","auto")}).on("dp.place",function(t){if(i.isMSBrowser()||i.isTouchBrowser()&&e&&e.settings.rtl){var a=n(t.target),s=l.$el.find(".binf-datetimepicker-widget");i.adjustDropDownField(a,s,!1,l,l.hideDateTimePicker),t.stopImmediatePropagation()}}).on("dp.show",function(t){if(l.getEditableBehavior().hideActions){l.options.isDropDownOpen=!0;var a=l.$el.closest(".csui-scrollable-writemode");a&&!a.hasClass("csui-dropdown-open")&&a.addClass("csui-dropdown-open"),l.getEditableBehavior().hideActions(t)}if(!i.isMSBrowser()||!(i.isTouchBrowser()&&e&&e.settings.rtl)){var s=n(t.target),o=l.$el.find(".binf-datetimepicker-widget");i.adjustDropDownField(s,o,!1,l,l.hideDateTimePicker)}t.stopImmediatePropagation()}).on("dp.hide",function(e){if(l.getEditableBehavior().showActions){l.options.isDropDownOpen=!1;var t=l.$el.closest(".csui-scrollable-writemode");t&&t.hasClass("csui-dropdown-open")&&t.removeClass("csui-dropdown-open"),l.getEditableBehavior().showActions(e)}e.stopImmediatePropagation(),n(e.target).parents(".csui-normal-scrolling").css("overflow","auto")})}},"hideDateTimePicker":function(e){if(e.$el.find(".icon-date_picker").trigger("click"),e.getEditableBehavior().showActions){e.options.isDropDownOpen=!1;var t=e.$el.closest(".csui-scrollable-writemode");t&&t.hasClass("csui-dropdown-open")&&t.removeClass("csui-dropdown-open"),e.getEditableBehavior().showActions()}},"getEditValue":function(){var e=this.ui.writeField.val();return this._convertFromInputToModel(e)},"resetOldValueAfterCancel":function(){return this.ui.writeField.val(this._convertFromModelToInput(this.getValue())),!0},"_convertFromInputToModel":function(e){return e?a.serializeDateTime(e,void 0,function(){return!1}):null},"_convertFromModelToInput":function(e){return e?a.formatExactDateTime(a.deserializeDate(e)):""}})}),csui.define("csui/controls/form/fields/datefield.view",["csui/utils/types/date","csui/controls/form/fields/impl/datebasefield.view"],function(e,t){"use strict";return t.extend({"format":e.exactDateFormat,"inputType":"date","constructor":function(e){t.apply(this,arguments)},"getDisplayValue":function(){return this.$el.find(":input")[0].value},"getValue":function(){var e=this.model.get("data"),t=this._convertFromModelToInput(e);return this._convertFromInputToModel(t)},"_convertFromInputToModel":function(t){return t?e.serializeDate(t,void 0,function(){return!1}):null},"_convertFromModelToInput":function(t){return t?e.formatExactDate(e.deserializeDate(t)):""}})}),csui.define("csui/controls/form/fields/alpaca/alpcsuidateonlyfield",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/utils/types/date","csui/controls/form/fields/datefield.view"],function(e,t,i,n,l,a,s){"use strict";return l.Fields.CsuiDateOnlyField=l.Fields.DateField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType())},"showField":function(){var l,a=this.id,o=this.options?this.options.descriptionId:"",r=t(this.field[0]).find("label");r&&1==r.length&&(l=r.attr("for")+"Label",r.attr("id",l)),this.fieldView=new s({"model":new i.Model({"data":this.data,"options":this.options,"schema":this.schema,"id":a}),"id":e.uniqueId(a),"alpacaField":this,"labelId":l,"descriptionId":o,"value":this.data,"readonly":!0,"dataId":this.name,"path":this.path,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema}});var c=t("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(c),this.region=new n.Region({"el":c}),this.region.show(this.fieldView)},"getValue":function(){var e=this.base();return e||null},"setValueAndValidate":function(e,t){this.setValue(e);var i=!0;return t&&(i=this.validate(),this.refreshValidationState(!1)),i},"_validateDateFormat":function(){var e=this.containerItemEl.find("input").val();return!(!e&&this.isRequired())&&(!e||a.validateDate(e))},"focus":function(){this.fieldView.setFocus()},"handleValidate":function(){var e=this.base();if(!e){var t=this.validation;if(""!==this.fieldView.ui.writeField.val())return t.notOptional.status=!0,t.notOptional.message="",e;for(var i in t)!1===t[i].status&&"notOptional"!==i&&(t[i].status=!0,t[i].message="")}return e}}),
l.registerFieldClass("date",l.Fields.CsuiDateOnlyField,"bootstrap-csui"),l.registerFieldClass("date",l.Fields.CsuiDateOnlyField,"bootstrap-edit-horizontal"),l.registerDefaultFormatFieldMapping("date","date"),l.Fields.CsuiDateOnlyField}),csui.define("csui/controls/form/fields/datetimefield.view",["csui/utils/types/date","csui/controls/form/fields/impl/datebasefield.view"],function(e,t){"use strict";return t.extend({"className":t.prototype.className+" cs-datetime","format":e.exactDateTimeFormat,"inputType":"datetime-local","inputStep":"1","constructor":function(e){t.apply(this,arguments)},"getDisplayValue":function(){return this.$el.find(":input")[0].value}})}),csui.define("csui/controls/form/fields/alpaca/alpcsuidatetimefield",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/utils/types/date","csui/controls/form/fields/datetimefield.view"],function(e,t,i,n,l,a,s){"use strict";return l.Fields.CsuiDateTimeField=l.Fields.DatetimeField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType())},"showField":function(){var l,a=this.id,o=this.options?this.options.descriptionId:"",r=t(this.field[0]).find("label");r&&1==r.length&&(l=r.attr("for")+"Label",r.attr("id",l)),this.fieldView=new s({"model":new i.Model({"data":this.data,"options":this.options,"schema":this.schema,"inputType":"text","id":a}),"id":e.uniqueId(a),"alpacaField":this,"labelId":l,"descriptionId":o,"value":this.data,"readonly":!0,"dataId":this.name,"path":this.path,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema}});var c=t("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(c),this.region=new n.Region({"el":c}),this.region.show(this.fieldView)},"getValue":function(){var e=this.base();return e||null},"setValueAndValidate":function(e,t){this.setValue(e);var i=!0;return t&&(i=this.validate(),this.refreshValidationState(!1)),i},"_validateDateFormat":function(){var e=this.containerItemEl.find("input").val();return!(!e&&this.isRequired())&&(!e||a.validateDateTime(e))},"focus":function(){this.fieldView.setFocus()},"handleValidate":function(){var e=this.base();if(!e){var t=this.validation;if(""!==this.fieldView.ui.writeField.val())return t.notOptional.status=!0,t.notOptional.message="",e;for(var i in t)!1===t[i].status&&"notOptional"!==i&&(t[i].status=!0,t[i].message="")}return e}}),l.registerFieldClass("datetime",l.Fields.CsuiDateTimeField),l.registerFieldClass("datetime",l.Fields.CsuiDateTimeField,"bootstrap-csui"),l.registerFieldClass("datetime",l.Fields.CsuiDateTimeField,"bootstrap-edit-horizontal"),l.registerDefaultFormatFieldMapping("datetime","datetime"),l.Fields.CsuiDateTimeField}),csui.define("hbs!csui/controls/form/impl/fields/booleanfield/booleanfield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-describedby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnDescription")||(null!=t?s(t,"idBtnDescription"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnDescription","hash":{},"loc":{"start":{"line":5,"column":55},"end":{"line":5,"column":75}}}):a))+'" '},"3":function(e,t,i,n,l){return" aria-checked=true"},"5":function(e,t,i,n,l){return"\r\n             aria-checked=false"},"7":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="icon-container binf-hidden">\r\n        <div class="csui-icon apply-all binf-hidden" title="'+e.escapeExpression((a=null!=(a=s(i,"titleApplyAll")||(null!=t?s(t,"titleApplyAll"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"titleApplyAll","hash":{},"loc":{"start":{"line":11,"column":60},"end":{"line":11,"column":77}}}):a))+'" tabindex="0"\r\n             data-cstabindex="0"></div>\r\n      </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-field-write csui-unedited">\r\n  <div class="cs-field-inner">\r\n    <div class="control-area">\r\n      <input type="checkbox" name="'+e.escapeExpression((s=null!=(s=o(i,"checkboxName")||(null!=t?o(t,"checkboxName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"checkboxName","hash":{},"loc":{"start":{"line":4,"column":35},"end":{"line":4,"column":51}}}):s))+'" aria-labelledby="'+e.escapeExpression((s=null!=(s=o(i,"idBtnLabel")||(null!=t?o(t,"idBtnLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"idBtnLabel","hash":{},"loc":{"start":{"line":4,"column":70},"end":{"line":4,"column":84}}}):s))+'"\r\n            '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnDescription"):t,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":12},"end":{"line":5,"column":84}}}))?a:"")+"\r\n        "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"value"):t,{"name":"if","hash":{},"fn":e.program(3,l,0),"inverse":e.program(5,l,0),"loc":{"start":{"line":6,"column":8},"end":{"line":7,"column":38}}}))?a:"")+' id="'+e.escapeExpression(e.lambda(null!=t?o(t,"id"):t,t))+'">\r\n    </div>\r\n'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"applyFlag"):t,{"name":"if","hash":{},"fn":e.program(7,l,0),"inverse":e.noop,"loc":{"start":{"line":9,"column":4},"end":{"line":14,"column":11}}}))?a:"")+"  </div>\r\n</div>\r\n"}});return i.registerPartial("csui_controls_form_impl_fields_booleanfield_booleanfield",n),n}),csui.define("css!csui/controls/form/impl/fields/booleanfield/booleanfield",[],function(){}),csui.define("csui/controls/form/fields/booleanfield.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/form/impl/fields/csformfield.states.behavior","csui/controls/form/impl/fields/csformfield.view","hbs!csui/controls/form/impl/fields/booleanfield/booleanfield","csui/controls/form/impl/fields/csformfield.editable.behavior","csui/controls/form/impl/array/csformarrayfield.editable.behavior","csui/controls/form/impl/array/csformarrayfield.states.behavior","csui/lib/binf/js/binf-switch","css!csui/controls/form/impl/fields/booleanfield/booleanfield"],function(e,t,i,n,l,a,s,o,r,c,d){return s.extend({"className":"cs-formfield cs-booleanfield","template":o,"templateHelpers":function(){return{"value":this.model.get("data"),"applyFlag":!(!this.model.get("options")||!this.model.get("options").applyFlag)&&this.model.get("options").applyFlag,"id":this.model&&this.model.get("id")?this.model.get("id"):e.uniqueId("input"),"idBtnLabel":this.options.labelId,"idBtnDescription":this.options.descriptionId,"checkboxName":e.uniqueId("csui-checkbox")}},"ui":{"flagWriteField":".cs-field-write input","readField":".cs-field-write input","readArea":".cs-field-write","subInputField":".cs-field-write input"},"events":{"click @ui.flagWriteField":"onClickWriteField","keydown @ui.flagWriteField":"onWriteFieldKeyDown"},"isBooleanField":!0,"silentRender":!0,"constructor":function(t){t.model.attributes.options&&(t.model.attributes.options.isMultiFieldItem?this.behaviors=e.extend({"FormFieldEditable":{"behaviorClass":c},"FormFieldStates":{"behaviorClass":d}},this.behaviors):this.behaviors=e.extend({"FormFieldEditable":{"behaviorClass":r},"FormFieldStates":{"behaviorClass":a}},this.behaviors)),this.setMode(t.mode),s.apply(this,arguments),this.listenTo(this.formView,"request:completed",e.bind(function(){this.isEventPropageted&&this.ui.flagWriteField.binfSwitch("toggleState")},this))},"errorExists":!1,"checkErrorExists":function(e){this.errorExists=!1;var i=t(".cs-form .cs-formfield-invalid");return i.length>0?this.$el.parents(".alpaca-container-item").last().find(".binf-has-error").length>0?this.errorExists=!1:"writeonly"!==this.mode?(i.find(":input").first().trigger("focus"),this.errorExists=!0):this.errorExists=!1:this.errorExists=!1,this.errorExists},"onRender":function(){var i=!this.model.get("data");this.ui.flagWriteField[0].checked=!i;var n=this.alpacaField&&this.alpacaField.schema&&this.alpacaField.schema.disabled||this.model&&this.model.get("schema")&&this.model.get("schema").disabled;this.ui.flagWriteField.binfSwitch({"state":i,"size":"mini","onText":"&nbsp;","offText":"&nbsp;","labelText":"&nbsp;","disabled":!!n,"readonly":"readonly"===this.mode,"isValidChange":e.bind(function(){if("writeonly"!==this.mode&&document.querySelectorAll(".binf-has-error").length>0){var e=t(t(document.querySelectorAll(".binf-has-error")).find(":input")[0]),i=e.parents(".cs-form-set.cs-form-set-container"),n=this.$el.parents(".cs-form-set.cs-form-set-container");if(!i.is(n))return e.trigger("focus"),!1}return!0},this),"onBeforeChange":e.bind(this.options.onBeforeChange||this._onBeforeChange,this),"onSwitchChange":e.bind(function(e,i){if(this.$el.find(".binf-switch-wrapper").addClass("binf-switch-disabled"),this.checkErrorExists())return!1;this.model.get("options")&&this.model.get("options").isMultiFieldItem?("create"!==this.model.get("options").mode?(this.getEditValue()===this.getValue()?this.$el.find(".cs-field-write").addClass("csui-unedited"):this.$el.find(".cs-field-write").removeClass("csui-unedited"),t(this.ui.readArea).trigger("click")):this.setValue(!i,!0),this.showApplyAll(e,!0)):(this.showApplyAll(e,!1),this.setValue(!i,!0)),this.$el.find(".binf-switch-wrapper").removeClass("binf-switch-disabled"),this.ui.flagWriteField.trigger("focus"),this.ui.flagWriteField.attr("aria-checked",!i),this.ui.flagWriteField[0].checked=!i},this)})},"showApplyAll":function(e,t){var i=this.$el.find(".icon-container");if(i.hasClass("binf-hidden")&&(i[0].classList.remove("binf-hidden"),i.removeAttr("data-cstabindex"),i.removeAttr("tabindex")),t)this.getEditableBehavior()._showApplyAll(e);else if(this.options.alpaca&&"create"===this.options.alpaca.options.mode&&0===this.$el.closest(".csui-general-form").length){var n=this.$(e.target).parents(".cs-field-write").parent().find(".csui-icon.apply-all"),l=this.$el.closest(".cs-metadata-properties").find(".csui-icon.apply-all").not(".binf-hidden");l=l.filter(function(e,t){return t=t!==n[0]?t:void 0}),l&&l.length>0&&(l.addClass("binf-hidden"),l.parent().addClass("binf-hidden"),l.parent().find(".cs-icon-applied")&&l.parent().find(".cs-icon-applied").remove()),n.parent().hasClass("binf-hidden")&&n.parent().removeClass("binf-hidden alpaca-container"),n.hasClass("binf-hidden")&&(n.removeAttr("style"),n.removeClass("binf-hidden"),n.prop("tabindex","0"))}},"onClickWriteField":function(e){e.preventDefault(),e.stopPropagation(),this.ui.flagWriteField.binfSwitch("toggleState")},"onWriteFieldKeyDown":function(e){if(27===e.keyCode&&this.model.get("options")&&"create"===this.model.get("options").mode){var t=this.$el.find(".icon-container");t.length>0&&(t[0].classList.add("binf-hidden"),t.attr("data-cstabindex",-1),t.attr("tabindex",-1))}13!==e.keyCode&&32!==e.keyCode||(this.onClickWriteField(e),e.preventDefault(),e.stopPropagation())},"getEditValue":function(){return this.errorExists?this.getValue():this.$el.find(".binf-switch").hasClass("binf-switch-off")},"setMode":function(e){var t=e;"readonly"!==e&&(t="write"),this.mode=t,this.getStatesBehavior()&&(this.getStatesBehavior().state=void 0)},"setStateRead":function(e){return this.ui.flagWriteField.binfSwitch({"readonly":!0}),e&&this.ui.flagWriteField.trigger("focus"),!0},"setStateWrite":function(e,t){return this.ui.flagWriteField.binfSwitch({"readonly":!1}),t&&this.ui.flagWriteField.trigger("focus"),!0},"getStatesBehavior":function(){var e;return this._behaviors&&(e=this._behaviors[0]),e},"_onBeforeChange":function(e){return this.formView&&this.formView.isDataUpdating?(this.isEventPropageted=!0,this.formView.options.metadataView.blockingView.$el.is(":visible")||this.formView.options.metadataView.blockActions(),!1):(this.isEventPropageted=!1,!0)}})}),csui.define("csui/controls/form/fields/alpaca/alpcsuibooleanfield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/controls/form/fields/booleanfield.view","csui/utils/base"],function(e,t,i,n,l,a,s,o){return a.Fields.CsuiBooleanField=a.Fields.CheckBoxField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"setup":function(){this.base(),this.csuiValue=this.data,this.setValue(this.data)},"getFieldType":function(){return"checkbox"},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType())},"showField":function(){var e,a=this.id,o=this.options?this.options.descriptionId:"",r=i(this.field[0]).find("label");r&&1==r.length&&(e=r.attr("for")+"Label",r.attr("id",e)),this.fieldView=new s({"model":new n.Model({"data":this.data,"options":this.options,"schema":this.schema,"id":a}),"id":t.uniqueId(a),"alpacaField":this,"labelId":e,"descriptionId":o,"value":this.data,"readonly":!0,"dataId":this.name,"path":this.path,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema}}),this.region=new l.Region({"el":i(".alpaca-control",this.containerItemEl)}),this.containerItemEl.find(".alpaca-control").empty(),this.region.show(this.fieldView),this.options.setRequiredFieldsEditable&&this.schema.required&&this.fieldView.setStateRead(!1)},"setValueAndValidate":function(e,t){return this.setValue(e),this.csuiValue=e,!0},"setValue":function(e){a.Fields.CheckBoxField.prototype.setValue.call(this,e),this.csuiValue=e},"getValue":function(){return this.csuiValue},"focus":function(){this.fieldView.setFocus()},"destroy":function(){this.base(),this.region&&this.region.destroy()}}),a.registerFieldClass("checkbox",a.Fields.CsuiBooleanField,"bootstrap-csui"),i.alpaca.Fields.CsuiBooleanField}),csui.define("hbs!csui/controls/form/impl/fields/textfield/textfield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'maxlength="'+e.escapeExpression((a=null!=(a=s(i,"maxLength")||(null!=t?s(t,"maxLength"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"maxLength","hash":{},"data":l,"loc":{"start":{"line":3,"column":70},"end":{"line":3,"column":83}}}):a))+'"'},"3":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'placeholder="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"placeholder"):a,t))+'"\r\n         '},"5":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'placeholder="'+e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"data":l,"loc":{"start":{"line":5,"column":30},"end":{"line":5,"column":44}}}):a))+'"'},"7":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'size="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"size"):a,t))+'"'},"9":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'name="'+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"data":l,"loc":{"start":{"line":7,"column":22},"end":{"line":7,"column":30}}}):a))+'"'},"11":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"data-"+e.escapeExpression((a=null!=(a=s(i,"key")||l&&s(l,"key"))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"key","hash":{},"data":l,"loc":{"start":{"line":8,"column":31},"end":{"line":8,"column":39}}}):a))+'="'+e.escapeExpression(e.lambda(t,t))+'"'},"13":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((a=null!=(a=s(i,"key")||l&&s(l,"key"))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"key","hash":{},"data":l,"loc":{"start":{"line":9,"column":32},"end":{"line":9,"column":40}}}):a))+'="'+e.escapeExpression(e.lambda(t,t))+'"'},"15":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-labelledby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnLabel")||(null!=t?s(t,"idBtnLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnLabel","hash":{},"data":l,"loc":{"start":{"line":10,"column":56},"end":{"line":10,"column":70}}}):a))+'" '},"17":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-describedby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnDescription")||(null!=t?s(t,"idBtnDescription"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnDescription","hash":{},"data":l,"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":66}}}):a))+'" '},"19":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((a=null!=(a=s(i,"multiFieldLabel")||(null!=t?s(t,"multiFieldLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"multiFieldLabel","hash":{},"data":l,"loc":{"start":{"line":12,"column":40},"end":{"line":12,"column":59}}}):a))+'"'},"21":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-required="'+e.escapeExpression((a=null!=(a=s(i,"ariaRequired")||(null!=t?s(t,"ariaRequired"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"ariaRequired","hash":{},"data":l,"loc":{"start":{"line":13,"column":40},"end":{"line":13,"column":56}}}):a))+'"'},"23":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="icon-container">\r\n        <div class="csui-icon-edit inline-edit-icon edit-cancel" title="'+e.escapeExpression((a=null!=(a=s(i,"cancel")||(null!=t?s(t,"cancel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"data":l,"loc":{"start":{"line":16,"column":72},"end":{"line":16,"column":82}}}):a))+'"></div>\r\n      </div>\r\n'},"25":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"options"):t)?s(a,"applyFlag"):a,{"name":"if","hash":{},"fn":e.program(26,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":19,"column":6},"end":{"line":23,"column":13}}}))?a:""},"26":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="icon-container binf-hidden">\r\n          <div class="csui-icon apply-all binf-hidden" title="'+e.escapeExpression((a=null!=(a=s(i,"titleApplyAll")||(null!=t?s(t,"titleApplyAll"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"titleApplyAll","hash":{},"data":l,"loc":{"start":{"line":21,"column":62},"end":{"line":21,"column":79}}}):a))+'" tabindex="0"></div>\r\n        </div>\r\n'},"28":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"          "+(null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"hasData"):t,{"name":"if","hash":{},"fn":e.program(29,l,0),"inverse":e.program(31,l,0),"data":l,"loc":{"start":{"line":32,"column":10},"end":{"line":32,"column":78}}}))?a:"")+'\r\n              target="_blank" title="'+(null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"options"):t)?s(a,"anchorTitle"):a,{"name":"if","hash":{},"fn":e.program(33,l,0),"inverse":e.program(35,l,0),"data":l,"loc":{"start":{"line":33,"column":37},"end":{"line":33,"column":110}}}))?a:"")+'"\r\n        '+(null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(37,l,0),"inverse":e.program(39,l,0),"data":l,"loc":{"start":{"line":34,"column":8},"end":{"line":35,"column":46}}}))?a:"")+">\r\n"+(null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"hasData"):t,{"name":"if","hash":{},"fn":e.program(41,l,0),"inverse":e.program(43,l,0),"data":l,"loc":{"start":{"line":36,"column":8},"end":{"line":40,"column":15}}}))?a:"")+"        </a>\r\n"},"29":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' <a href="'+e.escapeExpression((a=null!=(a=s(i,"data")||(null!=t?s(t,"data"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"data":l,"loc":{"start":{"line":32,"column":40},"end":{"line":32,"column":48}}}):a))+'" '},"31":function(e,t,i,n,l){return' <a href="#" '},"33":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"anchorTitle"):a,t))},"35":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((a=null!=(a=s(i,"data")||(null!=t?s(t,"data"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"data":l,"loc":{"start":{"line":33,"column":95},"end":{"line":33,"column":103}}}):a))},"37":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeMultiFieldAria")||(null!=t?s(t,"readModeMultiFieldAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeMultiFieldAria","hash":{},"data":l,"loc":{"start":{"line":34,"column":44},"end":{"line":34,"column":70}}}):a))+'" '},"39":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n          aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeAria")||(null!=t?s(t,"readModeAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeAria","hash":{},"data":l,"loc":{"start":{"line":35,"column":22},"end":{"line":35,"column":38}}}):a))+'"'},"41":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"          <span>"+e.escapeExpression((a=null!=(a=s(i,"data")||(null!=t?s(t,"data"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"data":l,"loc":{"start":{"line":37,"column":16},"end":{"line":37,"column":24}}}):a))+"</span>\r\n"},"43":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="placeholder" title="'+e.escapeExpression((a=null!=(a=s(i,"noValue")||(null!=t?s(t,"noValue"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"noValue","hash":{},"data":l,"loc":{"start":{"line":39,"column":43},"end":{"line":39,"column":54}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"data":l,"loc":{"start":{"line":39,"column":56},"end":{"line":39,"column":70}}}):a))+"</span>\r\n"},"45":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <button title="'+e.escapeExpression((s=null!=(s=o(i,"tooltip")||(null!=t?o(t,"tooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"tooltip","hash":{},"data":l,"loc":{"start":{"line":43,"column":23},"end":{"line":43,"column":34}}}):s))+'"\r\n          '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"schema"):t)?o(a,"readonly"):a,{"name":"if","hash":{},"fn":e.program(46,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":44,"column":10},"end":{"line":44,"column":50}}}))?a:"")+"\r\n          "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(37,l,0),"inverse":e.program(48,l,0),"data":l,"loc":{"start":{"line":45,"column":10},"end":{"line":47,"column":17}}}))?a:"")+"        >\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"hasData"):t,{"name":"if","hash":{},"fn":e.program(50,l,0),"inverse":e.program(52,l,0),"data":l,"loc":{"start":{"line":49,"column":10},"end":{"line":53,"column":17}}}))?a:"")+"        </button>\r\n"},"46":function(e,t,i,n,l){return" disabled "},"48":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n                aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeAria")||(null!=t?s(t,"readModeAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeAria","hash":{},"data":l,"loc":{"start":{"line":46,"column":28},"end":{"line":46,"column":44}}}):a))+'"\r\n'},"50":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            <span>"+e.escapeExpression((a=null!=(a=s(i,"data")||(null!=t?s(t,"data"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"data":l,"loc":{"start":{"line":50,"column":18},"end":{"line":50,"column":26}}}):a))+"</span>\r\n"},"52":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="placeholder" title="'+e.escapeExpression((a=null!=(a=s(i,"noValue")||(null!=t?s(t,"noValue"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"noValue","hash":{},"data":l,"loc":{"start":{"line":52,"column":45},"end":{"line":52,"column":56}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"data":l,"loc":{"start":{"line":52,"column":58},"end":{"line":52,"column":72}}}):a))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-field-write">\r\n  <div class="cs-field-write-inner">\r\n  <input type="'+e.escapeExpression((s=null!=(s=o(i,"inputType")||(null!=t?o(t,"inputType"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"inputType","hash":{},"data":l,"loc":{"start":{"line":3,"column":15},"end":{"line":3,"column":28}}}):s))+'" id="'+e.escapeExpression((s=null!=(s=o(i,"id")||(null!=t?o(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"data":l,"loc":{"start":{"line":3,"column":34},"end":{"line":3,"column":40}}}):s))+'" '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"maxLength"):t,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":3,"column":42},"end":{"line":3,"column":91}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"placeholder"):a,{"name":"if","hash":{},"fn":e.program(3,l,0),"inverse":e.program(5,l,0),"data":l,"loc":{"start":{"line":4,"column":4},"end":{"line":5,"column":52}}}))?a:"")+' autocomplete="off"\r\n    '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"size"):a,{"name":"if","hash":{},"fn":e.program(7,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":54}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"name"):t,{"name":"if","hash":{},"fn":e.program(9,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":7,"column":4},"end":{"line":7,"column":38}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"data"):a,{"name":"each","hash":{},"fn":e.program(11,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":59}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"attributes"):a,{"name":"each","hash":{},"fn":e.program(13,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":60}}}))?a:"")+'\r\n    value="'+e.escapeExpression((s=null!=(s=o(i,"data")||(null!=t?o(t,"data"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"data":l,"loc":{"start":{"line":10,"column":11},"end":{"line":10,"column":19}}}):s))+'" '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnLabel"):t,{"name":"if","hash":{},"fn":e.program(15,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":79}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnDescription"):t,{"name":"if","hash":{},"fn":e.program(17,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":75}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(19,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":67}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"ariaRequired"):t,{"name":"if","hash":{},"fn":e.program(21,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":64}}}))?a:"")+"/>\r\n"+(null!=(a=(o(i,"xif")||t&&o(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.mode !== 'writeonly'",{"name":"xif","hash":{},"fn":e.program(23,l,0),"inverse":e.program(25,l,0),"data":l,"loc":{"start":{"line":14,"column":4},"end":{"line":24,"column":12}}}))?a:"")+'\r\n  </div>\r\n</div>\r\n<div class="cs-field-read">\r\n  <div class="cs-field-read-inner">\r\n    <div class="btn-container">\r\n'+(null!=(a=(o(i,"xif")||t&&o(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.options && this.options.type === 'url'",{"name":"xif","hash":{},"fn":e.program(28,l,0),"inverse":e.program(45,l,0),"data":l,"loc":{"start":{"line":31,"column":6},"end":{"line":55,"column":14}}}))?a:"")+'    </div>\r\n    <div class="icon-container">\r\n      <div class="csui-icon-edit inline-edit-icon icon-edit" title="'+e.escapeExpression((s=null!=(s=o(i,"edit")||(null!=t?o(t,"edit"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"data":l,"loc":{
"start":{"line":58,"column":68},"end":{"line":58,"column":76}}}):s))+'"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"useData":!0});return i.registerPartial("csui_controls_form_impl_fields_textfield_textfield",n),n}),csui.define("css!csui/controls/form/impl/fields/textfield/textfield",[],function(){}),csui.define("csui/controls/form/fields/textfield.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/form/impl/fields/csformfield.view","csui/utils/url","csui/utils/contexts/factories/connector","i18n!csui/controls/form/impl/nls/lang","hbs!csui/controls/form/impl/fields/textfield/textfield","css!csui/controls/form/impl/fields/textfield/textfield","csui/lib/binf/js/binf","csui/lib/handlebars.helpers.xif"],function(e,t,i,n,l,a,s,o,r){"use strict";var c=l.extend({"constructor":function(e){(l.apply(this,arguments),!e.model.get("options")||!e.model.get("options").type||"url"!==e.model.get("options").type)||(this.model.get("data"),"read"===this.mode&&this.getUpdatedUrlWithPatterns(this.model.get("data"))&&(this.curVal=this.getUpdatedUrlWithPatterns(this.model.get("data"))))},"events":{"keypress @ui.readField":"onKeyPressRead"},"getDisplayValue":function(){return this.getEditValue()},"getAbsoluteUrl":function(e){var t=e;return c.urlFuncProtocolPattern.test(e)&&(this.connector=this.options.context.getObject(s),t=a.combine(this.connector.connection.url.replace("/api/v1","")+this.curVal)),t&&(t=encodeURIComponent(t)),t},"className":"cs-formfield cs-textfield","template":r,"templateHelpers":function(){var t="",i=o.noValue,n="",a="",s=!1,r="readonly"===this.mode,c="",d="",u=this.options.alpacaField&&this.options.alpacaField.schema&&this.options.alpacaField.schema.maxLength;return s=this.options.alpacaField&&this.options.alpacaField.isRequired(),c=s?o.requiredField:"",this.model.get("data")&&(i=this.model.get("data")),d=this.getAbsoluteUrl(i),this.alpacaField&&this.alpacaField.options&&this.alpacaField.options.isMultiFieldItem&&(t=this.alpacaField.parent&&this.alpacaField.parent.options?this.alpacaField.parent.options.label:""),this.model.get("options")&&(n=r?e.str.sformat(o.fieldReadOnlyAria,this.model.get("options").label,i)+c:e.str.sformat(o.fieldEditAria,this.model.get("options").label,i)+c),a=r?e.str.sformat(o.fieldReadOnlyAria,t,i)+c:e.str.sformat(o.fieldEditAria,t,i)+c,e.extend(l.prototype.templateHelpers.apply(this),{"absUrl":d,"inputType":"text","idBtnLabel":this.options.labelId,"idBtnDescription":this.options.descriptionId,"readModeAria":n,"readModeMultiFieldAria":a,"multiFieldLabel":t,"ariaRequired":s,"maxLength":u})},"onKeyPressRead":function(e){13===e.keyCode&&this.model.attributes.options&&"url"===this.model.attributes.options.type&&window.open(this.model.attributes.data,"_blank")},"allowEditOnEnter":function(){var e=!0;return this.model.attributes.options&&(e="url"!==this.model.attributes.options.type),e},"allowEditOnClickReadArea":function(){var e=!0;return this.model.attributes.options&&(e="url"!==this.model.attributes.options.type),e},"getEditValue":function(){var e=this.model.attributes.options&&"url"===this.model.attributes.options.type,t=this.ui.writeField.val();return e&&(t=this.getUpdatedUrlWithPatterns(t)),t},"getUpdatedUrlWithPatterns":function(e){return!e||c.urlFuncProtocolPattern.test(e)||c.urlProtocolPattern.test(e)||(e="http://"+e),e}},{"urlProtocolPattern":/^[a-z0-9]+:\/\//i,"urlFuncProtocolPattern":/^\?func=[a-z0-9]/i});return c}),csui.define("csui/controls/form/fields/alpaca/alpcsuitextfield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/models/form","csui/controls/form/fields/textfield.view","csui/utils/base"],function(e,t,i,n,l,a,s,o,r){return a.Fields.CsuiTextField=a.Fields.TextField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"getFieldType":function(){return"text"},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType())},"showField":function(){var e,a=this.id,s=this.options?this.options.descriptionId:"",r=i(this.field[0]).find("label");r&&1==r.length&&(e=r.attr("for")+"Label",r.attr("id",e)),this.fieldView=new o({"model":new n.Model({"data":this.data,"options":this.options,"schema":this.schema,"inputType":"text","id":a}),"id":t.uniqueId(a),"alpacaField":this,"labelId":e,"descriptionId":s,"value":this.data,"readonly":!0,"dataId":this.name,"path":this.path,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema}});var c=i("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(c),this.region=new l.Region({"el":c}),this.region.show(this.fieldView)},"setValueAndValidate":function(e,t){this.setValue(e);var i=!0;return t&&(i=this.validate(),this.refreshValidationState(!1)),i},"focus":function(){this.fieldView.setFocus()},"destroy":function(){this.base(),this.region&&this.region.destroy()}}),a.registerFieldClass("text",a.Fields.CsuiTextField,"bootstrap-csui"),a.registerFieldClass("text",a.Fields.CsuiTextField,"bootstrap-edit-horizontal"),i.alpaca.Fields.CsuiTextField}),csui.define("hbs!csui/controls/form/impl/fields/textareafield/textareafield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'maxlength="'+e.escapeExpression((a=null!=(a=s(i,"maxLength")||(null!=t?s(t,"maxLength"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"maxLength","hash":{},"loc":{"start":{"line":3,"column":84},"end":{"line":3,"column":97}}}):a))+'"'},"3":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'placeholder="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"placeholder"):a,t))+'"\r\n              '},"5":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'placeholder="'+e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"loc":{"start":{"line":5,"column":35},"end":{"line":5,"column":49}}}):a))+'"'},"7":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'rows="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"rows"):a,t))+'"'},"9":function(e,t,i,n,l){return"readonly"},"11":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'name="'+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":24},"end":{"line":8,"column":32}}}):a))+'"'},"13":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-required="'+e.escapeExpression((a=null!=(a=s(i,"ariaRequired")||(null!=t?s(t,"ariaRequired"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"ariaRequired","hash":{},"loc":{"start":{"line":9,"column":42},"end":{"line":9,"column":58}}}):a))+'"'},"15":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"data-"+e.escapeExpression((a=null!=(a=s(i,"fieldId")||(null!=t?s(t,"fieldId"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"fieldId","hash":{},"loc":{"start":{"line":10,"column":33},"end":{"line":10,"column":44}}}):a))+'="'+e.escapeExpression((a=null!=(a=s(i,"value")||(null!=t?s(t,"value"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":55}}}):a))+'" '},"17":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-labelledby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnLabel")||(null!=t?s(t,"idBtnLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnLabel","hash":{},"loc":{"start":{"line":11,"column":42},"end":{"line":11,"column":56}}}):a))+'"'},"19":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-describedby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnDescription")||(null!=t?s(t,"idBtnDescription"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnDescription","hash":{},"loc":{"start":{"line":12,"column":48},"end":{"line":12,"column":68}}}):a))+'" '},"21":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((a=null!=(a=s(i,"multiFieldLabel")||(null!=t?s(t,"multiFieldLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"multiFieldLabel","hash":{},"loc":{"start":{"line":13,"column":42},"end":{"line":13,"column":61}}}):a))+'" '},"23":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="icon-container">\r\n        <div class="csui-icon-edit inline-edit-icon edit-cancel" title="'+e.escapeExpression((a=null!=(a=s(i,"cancel")||(null!=t?s(t,"cancel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":17,"column":72},"end":{"line":17,"column":82}}}):a))+'"></div>\r\n      </div>\r\n'},"25":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"options"):t)?s(a,"applyFlag"):a,{"name":"if","hash":{},"fn":e.program(26,l,0),"inverse":e.noop,"loc":{"start":{"line":20,"column":6},"end":{"line":24,"column":13}}}))?a:""},"26":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="icon-container binf-hidden">\r\n          <div class="csui-icon apply-all binf-hidden" title="'+e.escapeExpression((a=null!=(a=s(i,"titleApplyAll")||(null!=t?s(t,"titleApplyAll"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"titleApplyAll","hash":{},"loc":{"start":{"line":22,"column":62},"end":{"line":22,"column":79}}}):a))+'" tabindex="0"></div>\r\n        </div>\r\n'},"28":function(e,t,i,n,l){return" disabled "},"30":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeMultiFieldAria")||(null!=t?s(t,"readModeMultiFieldAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeMultiFieldAria","hash":{},"loc":{"start":{"line":36,"column":26},"end":{"line":36,"column":52}}}):a))+'" data-multi="true"\r\n'},"32":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeAria")||(null!=t?s(t,"readModeAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeAria","hash":{},"loc":{"start":{"line":38,"column":26},"end":{"line":38,"column":42}}}):a))+'"\r\n        '},"34":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="csui-ellipsis-area"><span><span\r\n              class="cs-field-textarea-data">'+e.escapeExpression((a=null!=(a=s(i,"data")||(null!=t?s(t,"data"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"loc":{"start":{"line":42,"column":45},"end":{"line":42,"column":53}}}):a))+"</span></span>\r\n          </span>\r\n"},"36":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="placeholder" title="'+e.escapeExpression((a=null!=(a=s(i,"noValue")||(null!=t?s(t,"noValue"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"noValue","hash":{},"loc":{"start":{"line":45,"column":43},"end":{"line":45,"column":54}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"loc":{"start":{"line":45,"column":56},"end":{"line":45,"column":70}}}):a))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="control-area cs-field-write">\r\n  <div class="cs-field-write-inner">\r\n    <textarea id="'+e.escapeExpression((s=null!=(s=o(i,"id")||(null!=t?o(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":3,"column":18},"end":{"line":3,"column":24}}}):s))+'" class="editable cs-no-resize" '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"maxLength"):t,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":56},"end":{"line":3,"column":105}}}))?a:"")+"\r\n              "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"placeholder"):a,{"name":"if","hash":{},"fn":e.program(3,l,0),"inverse":e.program(5,l,0),"loc":{"start":{"line":4,"column":14},"end":{"line":5,"column":57}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"rows"):a,{"name":"if","hash":{},"fn":e.program(7,l,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":56}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"readonly"):a,{"name":"if","hash":{},"fn":e.program(9,l,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":45}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"name"):t,{"name":"if","hash":{},"fn":e.program(11,l,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":40}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"ariaRequired"):t,{"name":"if","hash":{},"fn":e.program(13,l,0),"inverse":e.noop,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":66}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"data"):a,{"name":"each","hash":{},"fn":e.program(15,l,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":6},"end":{"line":10,"column":66}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnLabel"):t,{"name":"if","hash":{},"fn":e.program(17,l,0),"inverse":e.noop,"loc":{"start":{"line":11,"column":6},"end":{"line":11,"column":64}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnDescription"):t,{"name":"if","hash":{},"fn":e.program(19,l,0),"inverse":e.noop,"loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":77}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(21,l,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":6},"end":{"line":13,"column":70}}}))?a:"")+">"+e.escapeExpression((s=null!=(s=o(i,"data")||(null!=t?o(t,"data"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"loc":{"start":{"line":13,"column":71},"end":{"line":13,"column":79}}}):s))+"</textarea>\r\n\r\n"+(null!=(a=(o(i,"xif")||t&&o(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.mode !== 'writeonly'",{"name":"xif","hash":{},"fn":e.program(23,l,0),"inverse":e.program(25,l,0),"loc":{"start":{"line":15,"column":4},"end":{"line":25,"column":12}}}))?a:"")+'\r\n  </div>\r\n</div>\r\n\r\n<div class="cs-field-read">\r\n  <div class="cs-field-read-inner">\r\n    <div class="btn-container">\r\n      <button title="'+e.escapeExpression((s=null!=(s=o(i,"data")||(null!=t?o(t,"data"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"loc":{"start":{"line":33,"column":21},"end":{"line":33,"column":29}}}):s))+'"\r\n        '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"schema"):t)?o(a,"readonly"):a,{"name":"if","hash":{},"fn":e.program(28,l,0),"inverse":e.noop,"loc":{"start":{"line":34,"column":8},"end":{"line":34,"column":49}}}))?a:"")+"\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(30,l,0),"inverse":e.program(32,l,0),"loc":{"start":{"line":35,"column":8},"end":{"line":39,"column":15}}}))?a:"")+">\r\n"+(null!=(a=(o(i,"xif")||t&&o(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.data !== '' && this.data !== null",{"name":"xif","hash":{},"fn":e.program(34,l,0),"inverse":e.program(36,l,0),"loc":{"start":{"line":40,"column":8},"end":{"line":46,"column":16}}}))?a:"")+'      </button>\r\n\r\n    </div>\r\n    <div class="icon-container">\r\n      <div title="'+e.escapeExpression((s=null!=(s=o(i,"edit")||(null!=t?o(t,"edit"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"loc":{"start":{"line":51,"column":18},"end":{"line":51,"column":26}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=o(i,"edit")||(null!=t?o(t,"edit"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"loc":{"start":{"line":51,"column":40},"end":{"line":51,"column":48}}}):s))+'" role="button"\r\n           class="csui-icon-edit inline-edit-icon icon-edit"></div>\r\n    </div>\r\n    <div tabindex="0" class="cs-icon icon-expandArrowDown binf-hidden cs-icon-exp-col"\r\n         aria-label="'+e.escapeExpression((s=null!=(s=o(i,"seeMore")||(null!=t?o(t,"seeMore"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"seeMore","hash":{},"loc":{"start":{"line":55,"column":21},"end":{"line":55,"column":32}}}):s))+'" role="button"></div>\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_form_impl_fields_textareafield_textareafield",n),n}),csui.define("css!csui/controls/form/impl/fields/textareafield/textareafield",[],function(){}),csui.define("csui/controls/form/fields/textareafield.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/form/impl/fields/csformfield.view","csui/utils/base","csui/controls/form/pub.sub","hbs!csui/controls/form/impl/fields/textareafield/textareafield","i18n!csui/controls/form/impl/nls/lang","css!csui/controls/form/impl/fields/textareafield/textareafield","csui/lib/binf/js/binf"],function(e,t,i,n,l,a,s,o,r){"use strict";return l.extend({"constructor":function(e){e||(e={}),this.isTextareaAutoHeight=e.isTextareAutoHeight||e&&e.alpaca&&e.alpaca.options&&e.alpaca.options.isTextareaAutoHeight,l.apply(this,arguments),this.listenTo(this.formView,"thumbnail:show:image",this.render)},"ui":{"writeField":".cs-field-write textarea","readField":".cs-field-read button","moreLink":".icon-expandArrowDown","lessLink":".icon-expandArrowUp","expColLink":".cs-icon-exp-col","ellipsisField":".csui-ellipsis-area"},"events":{"keydown @ui.writeField":"onKeyDown","input @ui.writeField":"onKeyDown","keydown @ui.lessLink":"showLessTextFromKeyboard","keydown @ui.moreLink":"showMoreTextFromKeyboard","click @ui.moreLink":"showMoreText","click @ui.lessLink":"showLessText"},"className":"cs-formfield cs-textareafield","template":o,"templateHelpers":function(){var t="readonly"===this.mode,i=this.options.alpacaField&&this.options.alpacaField.schema&&this.options.alpacaField.schema.maxLength,n="",a="",s=!1,o="",c="",d="",u="",p=this.model.get("data");s=this.options.alpacaField&&this.options.alpacaField.isRequired(),o=s?r.requiredField:"",this.alpacaField&&this.alpacaField.options&&this.alpacaField.options.isMultiFieldItem&&(c=this.alpacaField.parent&&this.alpacaField.parent.options?this.alpacaField.parent.options.label:""),this.model.get("options")&&(n=this.model.get("options").label);var h=p;return p?(a=e.isObject(p)?this.textareaValue:p,h=a):a=r.noValue,d=t?e.str.sformat(r.fieldReadOnlyAria,n,a)+o:e.str.sformat(r.fieldEditAria,n,a)+o,u=t?e.str.sformat(r.fieldReadOnlyAria,c,a)+o:e.str.sformat(r.fieldEditAria,c,a)+o,e.extend(l.prototype.templateHelpers.apply(this),{"inputType":"text","idBtnLabel":this.options.labelId,"idBtnDescription":this.options.descriptionId,"multiFieldLabel":c,"readModeAria":d,"readModeMultiFieldAria":u,"ariaRequired":s,"maxLength":i,"seeMore":r.seeMore,"data":h,"isGlobeRequired":this.isMultilingualEnabled})},"allowSaveOnEnter":function(){return!1},"onRender":function(){this._ele=this.$el.find(".cs-field-textarea-data");var t=this.model&&this.model.get("data");this.ui.writeField.val(this.curVal),e.isObject(t)&&(t=this.textareaValue,this.ui.writeField.val(t)),t&&0!==t.trim().length&&this._applyEllipses(),this.isTextareaAutoHeight&&(this.$el.addClass("csui-autoheight-textareafield"),this.ui.writeField.attr("rows",1),this.ui.readField.attr("title",""))},"_applyEllipses":function(){if(this._ele&&this._ele.height()>0){var e=this._isTextOverflown(this._ele),t=this.$el.find("textarea").val(),i=t.indexOf(" ")>=0;0===(t.match(/\n/g)||[]).length?i?this.$el.parent().removeClass("cs-field-text-nospace"):this.$el.parent().addClass("cs-field-text-nospace"):this.$el.parent().removeClass("cs-field-text-nospace"),e?(this.ui.ellipsisField.parent().addClass("adjustWidth"),this.ui.ellipsisField.addClass("binf-line-clamp"),this.$el.closest(".binf-col-sm-9").addClass("cs-text-area-field-width"),this.ui.expColLink.removeClass("binf-hidden"),this.ui.expColLink.attr("title",r.seeMore).attr("aria-label",r.seeMore).attr("aria-expanded","false")):(this.ui.ellipsisField.addClass("no-ellipsis"),this.ui.ellipsisField.parent().removeClass("adjustWidth"))}else{var n=this;setTimeout(function(){n._applyEllipses()},50)}},"_isTextOverflown":function(e){return e.height()>this.ui.readField.height()},"showMoreText":function(e){e.preventDefault(),e.stopPropagation(),this.$el.closest(".cs-formfield.cs-textareafield").addClass("csui-textareafield-reset"),this.ui.readField.addClass("csui-textareafield-reset-button"),this.ui.expColLink.removeClass("binf-hidden").removeClass("icon-expandArrowDown").addClass("icon-expandArrowUp"),this.ui.ellipsisField.removeClass("binf-line-clamp"),this.ui.expColLink.attr("title",r.seeLess).attr("aria-label",r.seeLess).attr("aria-expanded","true")},"showLessTextFromKeyboard":function(e){13!==e.keyCode&&32!==e.keyCode||this.showLessText(e)},"showMoreTextFromKeyboard":function(e){13!==e.keyCode&&32!==e.keyCode||this.showMoreText(e)},"showLessText":function(e){e.preventDefault(),e.stopPropagation(),this.ui.expColLink.removeClass("icon-expandArrowUp").addClass("icon-expandArrowDown"),this.$el.closest(".cs-formfield.cs-textareafield").removeClass("csui-textareafield-reset"),this.ui.readField.removeClass("csui-textareafield-reset-button"),this.ui.expColLink.attr("title",r.seeMore).attr("aria-label",r.seeMore).attr("aria-expanded","false"),this.ui.ellipsisField.addClass("binf-line-clamp")},"onKeyDown":function(e){13===e.keyCode&&e.stopPropagation(),this.isTextareaAutoHeight&&this.adjustTextareaHeight()},"adjustTextareaHeight":function(){var e,t,i=this.ui.writeField[0];""===i.value?(i.style.height="",this.$el.closest(".binf-tab-content").length&&this.$el.closest(".binf-tab-content").scrollTop(0)):(i.style.height="26px",e=i.scrollHeight,t=i.offsetHeight,i.style.height=t>e?t:e+"px")},"getDisplayValue":function(){return this.getEditValue()},"_beforeTurnsToWriteMode":function(){this.$el.closest(".binf-col-sm-9").removeClass("cs-text-area-field-width"),this.isTextareaAutoHeight&&this.adjustTextareaHeight()},"_beforeTurnsToReadMode":function(){this.$el.closest(".binf-col-sm-9").addClass("cs-text-area-field-width"),this.isTextareaAutoHeight&&this.adjustTextareaHeight()}})}),csui.define("csui/controls/form/fields/alpaca/alpcsuitextareafield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/models/form","csui/controls/form/fields/textareafield.view","csui/utils/base"],function(e,t,i,n,l,a,s,o,r){return a.Fields.CsuiTextAreaField=a.Fields.TextAreaField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"getFieldType":function(){return"textarea"},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType())},"showField":function(){var e,a=this.id,s=this.options?this.options.descriptionId:"",r=i(this.field[0]).find("label");r&&1==r.length&&(e=r.attr("for")+"Label",r.attr("id",e)),this.fieldView=new o({"model":new n.Model({"data":this.data,"options":this.options,"schema":this.schema,"id":a}),"id":t.uniqueId(a),"alpacaField":this,"labelId":e,"descriptionId":s,"value":this.data,"readonly":!0,"dataId":this.name,"path":this.path,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema}});var c=i("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(c),this.region=new l.Region({"el":c}),this.region.show(this.fieldView)},"setValueAndValidate":function(e,t){this.setValue(e);var i=!0;return t&&(i=this.validate(),this.refreshValidationState(!1)),i},"focus":function(){this.fieldView.setFocus()},"destroy":function(){this.base(),this.region&&this.region.destroy()}}),a.registerFieldClass("textarea",a.Fields.CsuiTextAreaField,"bootstrap-csui"),a.registerFieldClass("textarea",a.Fields.CsuiTextAreaField,"bootstrap-edit-horizontal"),i.alpaca.Fields.CsuiTextAreaField}),csui.define("hbs!csui/controls/form/impl/fields/selectfield/selectfielditem",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a role="menuitem" tabindex="-1" data-cstabindex="-1" href="#">\r\n    <span class="cs-label">'+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":2,"column":27},"end":{"line":2,"column":35}}}):a))+"</span>\r\n</a>\r\n"}});return i.registerPartial("csui_controls_form_impl_fields_selectfield_selectfielditem",n),n}),csui.define("hbs!csui/controls/form/impl/fields/selectfield/selectfield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){return' binf-dropdown-toggle"'},"3":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-describedby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnDescription")||(null!=t?s(t,"idBtnDescription"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnDescription","hash":{},"loc":{"start":{"line":8,"column":48},"end":{"line":8,"column":68}}}):a))+'" '},"5":function(e,t,i,n,l){return"cs-icon-disabled "},"7":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="icon-container">\r\n        <div class="csui-icon-edit inline-edit-icon edit-cancel" title="'+e.escapeExpression((a=null!=(a=s(i,"cancel")||(null!=t?s(t,"cancel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":15,"column":72},"end":{"line":15,"column":82}}}):a))+'"></div>\r\n      </div>\r\n'},"9":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"applyFlag"):t,{"name":"if","hash":{},"fn":e.program(10,l,0),"inverse":e.noop,"loc":{"start":{"line":18,"column":6},"end":{"line":23,"column":13}}}))?a:""},"10":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="icon-container binf-hidden">\r\n          <div class="csui-icon apply-all binf-hidden" title="'+e.escapeExpression((a=null!=(a=s(i,"titleApplyAll")||(null!=t?s(t,"titleApplyAll"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"titleApplyAll","hash":{},"loc":{"start":{"line":20,"column":62},"end":{"line":20,"column":79}}}):a))+'" tabindex="0"\r\n               data-cstabindex="0"></div>\r\n        </div>\r\n'},"12":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            title="'+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":33,"column":19},"end":{"line":33,"column":27}}}):a))+'"\r\n'},"14":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            title="'+e.escapeExpression((a=null!=(a=s(i,"noValue")||(null!=t?s(t,"noValue"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"noValue","hash":{},"loc":{"start":{"line":35,"column":19},"end":{"line":35,"column":30}}}):a))+'"\r\n'},"16":function(e,t,i,n,l){return" disabled "},"18":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"          <span>"+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":40,"column":16},"end":{"line":40,"column":24}}}):a))+"</span>\r\n"},"20":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="placeholder">'+e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"loc":{"start":{"line":42,"column":36},"end":{"line":42,"column":50}}}):a))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-field-write">\r\n  <div class="cs-field-write-inner cs-drop-down">\r\n    <div id="'+e.escapeExpression((s=null!=(s=o(i,"idValueDiv")||(null!=t?o(t,"idValueDiv"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"idValueDiv","hash":{},"loc":{"start":{"line":3,"column":13},"end":{"line":3,"column":27}}}):s))+'"></div>\r\n    <button id="'+e.escapeExpression((s=null!=(s=o(i,"idBtn")||(null!=t?o(t,"idBtn"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"idBtn","hash":{},"loc":{
"start":{"line":4,"column":16},"end":{"line":4,"column":25}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=o(i,"writeModeAria")||(null!=t?o(t,"writeModeAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"writeModeAria","hash":{},"loc":{"start":{"line":4,"column":39},"end":{"line":4,"column":56}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":4,"column":65},"end":{"line":4,"column":73}}}):s))+'" type="button"\r\n            class="binf-btn binf-btn-default '+(null!=(a=o(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"unless","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":45},"end":{"line":5,"column":103}}}))?a:"")+'\r\n            data-binf-toggle="dropdown"\r\n            aria-haspopup="true"\r\n      '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnDescription"):t,{"name":"if","hash":{},"fn":e.program(3,l,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":77}}}))?a:"")+'>\r\n      <span class="cs-label">'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":9,"column":29},"end":{"line":9,"column":37}}}):s))+'</span>\r\n      <span class="cs-icon icon-caret-down '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(5,l,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":43},"end":{"line":10,"column":88}}}))?a:"")+'"></span>\r\n    </button>\r\n    <ul class="binf-dropdown-menu" role="menu" aria-labelledby="'+e.escapeExpression((s=null!=(s=o(i,"idBtn")||(null!=t?o(t,"idBtn"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"idBtn","hash":{},"loc":{"start":{"line":12,"column":64},"end":{"line":12,"column":73}}}):s))+'"></ul>\r\n'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"isNotWriteOnly"):t,{"name":"if","hash":{},"fn":e.program(7,l,0),"inverse":e.program(9,l,0),"loc":{"start":{"line":13,"column":4},"end":{"line":24,"column":11}}}))?a:"")+'  </div>\r\n</div>\r\n\r\n<div class="cs-field-read">\r\n  <div class="cs-field-read-inner">\r\n    <div class="btn-container">\r\n      <button aria-label="'+e.escapeExpression((s=null!=(s=o(i,"readModeAria")||(null!=t?o(t,"readModeAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"readModeAria","hash":{},"loc":{"start":{"line":31,"column":26},"end":{"line":31,"column":42}}}):s))+'"\r\n'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"hasData"):t,{"name":"if","hash":{},"fn":e.program(12,l,0),"inverse":e.program(14,l,0),"loc":{"start":{"line":32,"column":10},"end":{"line":36,"column":17}}}))?a:"")+"          "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"schema"):t)?o(a,"readonly"):a,{"name":"if","hash":{},"fn":e.program(16,l,0),"inverse":e.noop,"loc":{"start":{"line":37,"column":10},"end":{"line":37,"column":50}}}))?a:"")+"\r\n        >\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"hasData"):t,{"name":"if","hash":{},"fn":e.program(18,l,0),"inverse":e.program(20,l,0),"loc":{"start":{"line":39,"column":8},"end":{"line":43,"column":15}}}))?a:"")+'      </button>\r\n    </div>\r\n    <div class="icon-container">\r\n      <div class="csui-icon-edit inline-edit-icon icon-edit" title="'+e.escapeExpression((s=null!=(s=o(i,"edit")||(null!=t?o(t,"edit"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"loc":{"start":{"line":47,"column":68},"end":{"line":47,"column":76}}}):s))+'"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_form_impl_fields_selectfield_selectfield",n),n}),csui.define("css!csui/controls/form/impl/fields/selectfield/selectfield",[],function(){}),csui.define("csui/controls/form/fields/selectfield.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/form/impl/fields/csformfield.editable.behavior","csui/controls/form/impl/fields/csformfield.states.behavior","csui/controls/form/impl/array/csformarrayfield.editable.behavior","csui/controls/form/impl/array/csformarrayfield.states.behavior","csui/controls/form/pub.sub","csui/utils/base","hbs!csui/controls/form/impl/fields/selectfield/selectfielditem","hbs!csui/controls/form/impl/fields/selectfield/selectfield","i18n!csui/controls/form/impl/nls/lang","css!csui/controls/form/impl/fields/selectfield/selectfield","csui/lib/binf/js/binf"],function(e,t,i,n,l,a,s,o,r,c,d,u,p){"use strict";var h=n.ItemView.extend({"tagName":"li","template":d,"events":{"click >a":"onClicked","keydown >a":"onKeyInView","keyup >a":"onKeyUp","mouseenter >a":"showTitle","mouseover >a":"showTitle"},"constructor":function(e){n.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(this.model,"change",this.render),this.dropdownMenuVisible=!1},"showTitle":function(e){e.preventDefault(),e.stopPropagation();var t=this.$(e.target).closest("a").width();this.$(e.target).width()>t&&this.$(e.target).attr("title",this.model.get("name"))},"activate":function(e){var t=e.charCode||e.which;this.triggerMethod("click:link",t)},"onClicked":function(e){e.preventDefault(),e.stopPropagation(),this.activate(e)},"onKeyInView":function(t){var i=t.charCode||t.which;13===i?(t.preventDefault(),t.stopPropagation(),this.onClicked(t)):27===i?(t.preventDefault(),t.stopPropagation()):32===i||9===i?(t.preventDefault(),t.stopPropagation(),setTimeout(e.bind(function(){this.onClicked(t)},this),200)):this.triggerMethod("dropdown:scroll",t)},"onKeyUp":function(e){27===(e.charCode||e.which)&&(this._parent.escapePressed=!0,e.preventDefault(),e.stopPropagation(),this.triggerMethod("keypress:escape"))}});return n.CompositeView.extend({"constructor":function(t){t.model.attributes.options.isMultiFieldItem?this.behaviors=e.extend({"FormFieldEditable":{"behaviorClass":s},"FormFieldStates":{"behaviorClass":o}},this.behaviors):this.behaviors=e.extend({"FormFieldEditable":{"behaviorClass":l},"FormFieldStates":{"behaviorClass":a}},this.behaviors),n.CompositeView.prototype.constructor.apply(this,arguments),this.model=new i.Model,this.options.selected?this._setSelection(this.options.selected):this.resetSelection(),this.listenTo(this.collection,"change",this._refreshSelection),this.listenTo(this.model,"change",this._updateSelection),this.listenTo(this.model,"change",this.render),this.listenTo(this,"dropdown:scroll",this._dropdownScroll),this.options.dataId||(this.options.dataId=this.options.id),this.mode=this.options.mode,this.mode=this.options.alpaca&&this.options.alpaca.schema.readonly?"readonly":"read",this.$el.addClass("readonly"===this.mode?"cs-formfield-readonly":""),this.curVal=this.model.clone(),this.oldVal=this.model.clone(),this.alpacaField=this.options.alpacaField,this.options.alpaca&&t.alpaca.options.setRequiredFieldsEditable&&"readonly"!==this.mode&&(this.mode="writeonly"),this.model.set("schema",{"readonly":"readonly"===this.mode},{"silent":!0}),this.deferLoad=Array.isArray(this.options.alpaca.schema.enumExtended)},"onChildviewDropdownScroll":function(e,t){this._dropdownScroll(t)},"_dropdownScroll":function(e){var i=[],n="",l=!1,a=[],s=[];"SelectFieldItemView"==e.constructor.name&&(e=arguments[1]),n=e.key,l=e.shiftKey,this.$el.find("li").each(function(e,t){var i="";(i=l?t.textContent.trim().charAt(0).toUpperCase():t.textContent.trim().charAt(0).toLowerCase())==n&&(a.push(t.textContent.trim()),s.push(e))});var o=this.$el.find("li.binf-active").text().trim();this.$el.find("li.binf-active").removeClass();var r=t.inArray(o,a);i=-1!=r?this.$el.find("li").eq(s[r+1]):this.$el.find("li").eq(s[0]),i.length>0&&(this.ui.dropdown.scrollTop(0),this.ui.dropdown.scrollTop(i.position().top),i.find("a").trigger("focus"),i.addClass("binf-active"),!this.deferLoad&&this.ui.dropdown.perfectScrollbar("update"))},"className":"cs-formfield cs-selectfield binf-dropdown","template":u,"templateHelpers":function(){var t,i,n,l=p.selectValueLabel,a="",s=(p.noValue,""),o="",r="readonly"===this.mode,c=!1,d="",u=this.options.model.get("schema");c=this.options.alpacaField&&this.options.alpacaField.isRequired(),d=c?p.requiredField:"",this.alpacaField&&(n=this.options.model.get("options")?this.options.model.get("options").label:this.alpacaField.parent&&this.alpacaField.parent.options?this.alpacaField.parent.options.label:""),this.options.model.get("data")&&this.options.model.get("data"),this.options.model&&(t=this.options.model.get("options"),i=this.options.model.get("data")),t&&t.placeholder?l=t.placeholder:u&&u.disabled&&(l=p.noValueSet),this.alpacaField&&this.alpacaField.options&&this.alpacaField.options.isMultiFieldItem&&(a=this.alpacaField.parent&&this.alpacaField.parent.options?this.alpacaField.parent.options.label:""),a&&(n=a);var h=""!==i&&null!==i&&this.options.hasValue,f=h?this.model.get("name"):p.noValue;this.deferLoad&&!h&&this.model.get("id")&&(f=this.model.get("name"),h=!0),s=r?e.str.sformat(p.fieldReadOnlyAria,n,f):e.str.sformat(p.fieldEditAria,n,f)+d,o=e.str.sformat(p.fieldReadOnlyAria,n,f)+d;var m=this.options.alpacaField?this.options.alpacaField.id:e.uniqueId("empty"),g=this.alpacaField?!!this.alpacaField.schema.disabled:this.options.alpaca.schema.disabled;return{"hasData":h,"isNotWriteOnly":"writeonly"!==this.mode,"mode":this.mode,"emptyLabel":g||r?p.noValueSet:l,"idBtn":m,"idBtnLabel":this.options.labelId,"idBtnDescription":this.options.descriptionId,"idValueDiv":m+"ValueDiv","applyFlag":t.applyFlag,"isReadOnly":r,"noValue":p.noValue,"readModeAria":s,"writeModeAria":o,"isRequired":c,"disabled":g,"titleApplyAll":p.titleApplyAll}},"childView":h,"childViewContainer":"ul","ui":{"toggle":".binf-dropdown-toggle","dropdown":".binf-dropdown-menu","selectedLabel":".binf-dropdown-toggle >.cs-label","caret":".icon-caret-down","writeField":".cs-field-write button","readField":".cs-field-read button"},"events":{"keydown @ui.writeField":"onKeyInView","keyup @ui.writeField":"onKeyUp","shown.binf.dropdown":"onShowDropDown","show.binf.dropdown":"onBeforeShowDropDown","hidden.binf.dropdown":"onHideDropDown"},"setMode":function(e){this.mode=e,this.getStatesBehavior().state=void 0},"selectField":!0,"onRender":function(){this.ui.selectedLabel.text(this.model.get("title")),this.ui.toggle.off("click"),setTimeout(e.bind(function(){var e=t.Event("tab:content:field:changed");this.$el.trigger(e)},this),100),this.alpacaField&&this.alpacaField.setValue(this.model.id)},"onBeforeShowDropDown":function(){if(c.isMSBrowser()||c.isTouchBrowser()&&c.i18n&&c.i18n.settings.rtl){var e=this.$el.find(".cs-drop-down");c.adjustDropDownField(e,this.ui.dropdown,!0,this,this.hideDropdown,this.ui.dropdown)}},"handleToggle":function(){this.alpacaField&&this.alpacaField.options&&!this.alpacaField.options.isMultiFieldItem&&(this.isDropdownOpen()||(this._handleToggleEvent=!0,this.$el.find(".binf-dropdown-toggle").trigger("click")))},"_createSelectOption":function(e){var t=document.createElement("li"),i=document.createElement("a");i.setAttribute("href","#"),i.setAttribute("role","menuitem"),i.setAttribute("tabindex","-1"),i.setAttribute("data-cstabindex","-1");var n=document.createElement("span");n.className="cs-label",n.innerText=e,t.appendChild(i),i.appendChild(n);var l=this;return i.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault();var t=e.target.textContent;l.hideDropdown(l),l.model.set({"id":t,"name":t})}),t},"onShowDropDown":function(){if(this.deferLoad){if(!(this.ui.dropdown[0].querySelectorAll("li").length>=this.options.alpaca.schema.enumExtended.length+this.options.alpaca.schema.enum.length))for(var t=0;t<this.options.alpaca.schema.enumExtended.length;t++){var i=this.options.alpaca.schema.enumExtended[t],n=this._createSelectOption(i);this.ui.dropdown[0].appendChild(n)}}var l=this.$el.closest(".csui-scrollable-writemode"),a=this.$el.closest(".csui-custom-search-formitems");if(l&&!l.hasClass("csui-dropdown-open")&&l.addClass("csui-dropdown-open"),c.isTouchBrowser()&&a&&!a.hasClass("csui-dropdown-open")&&a.addClass("csui-dropdown-open").css("overflow","hidden"),this.ui.dropdown.removeClass("dropup-menu"),this.deferLoad?this.ui.dropdown.css({"overflow-y":"auto","max-height":"auto"}):(this.ui.dropdown.css({"overflow":"hidden","max-height":"auto"}),this.ui.dropdown.perfectScrollbar({"suppressScrollX":!0})),!c.isMSBrowser()||!(c.isTouchBrowser()&&c.i18n&&c.i18n.settings.rtl)){var s=this.$el.find(".cs-drop-down");c.adjustDropDownField(s,this.ui.dropdown,!0,this,this.hideDropdown,this.ui.dropdown)}if(this.options.isDropDownOpen=!0,this._handleToggleEvent){var o=this.getEditableBehavior();this.ui.dropdown.on("focusout",e.bind(o.onFocusOutWrite,o))}this.getEditableBehavior().hideActions&&this.getEditableBehavior().hideActions();var r=this;setTimeout(function(){r.deferLoad?r.ui.dropdown.scrollTop(1):r.ui.dropdown.perfectScrollbar("update")},1)},"onHideDropDown":function(){this.ui.dropdown.off("focusout"),this.options.isDropDownOpen=!1;var e=this.$el.closest(".csui-scrollable-writemode"),t=this.$el.closest(".csui-custom-search-formitems");e&&e.hasClass("csui-dropdown-open")&&e.removeClass("csui-dropdown-open"),t&&t.hasClass("csui-dropdown-open")&&t.removeClass("csui-dropdown-open"),this.getStatesBehavior().isStateWrite()&&this.getStatesBehavior().hasWriteFocus()&&this.getEditableBehavior().showActions&&this.getEditableBehavior().showActions(),0!==this.$el.parents(".csui-multivalue-container").length||this.$el.find(".binf-dropdown-toggle")[0]==document.activeElement||this.escapePressed||this.getEditableBehavior().trySetValueAndLeaveEditMode(!0,!0),this.escapePressed=!1},"onKeyUp":function(e){e.charCode||e.which;if(27==e.keyCode&&"create"===this.options.mode){this.dropdownMenuVisible&&(e.preventDefault(),e.stopPropagation());var t=this.$el.find(".icon-container");t[0].classList.add("binf-hidden"),t.attr("data-cstabindex",-1),t.attr("tabindex",-1)}this.dropdownMenuVisible=!1},"onKeyInView":function(e){var t=e.charCode||e.which;27===t||9===t?this.isDropdownOpen()&&(this.dropdownMenuVisible=this.isDropdownOpen(),e.preventDefault(),e.stopPropagation(),this.hideDropdown(this)):this.trigger("dropdown:scroll",e)},"onChildviewKeypressEscape":function(e){this.isDropdownOpen()&&(this.hideDropdown(this),this.ui.toggle.trigger("focus"))},"onChildviewClickLink":function(e,t){if(this.getValue().id===e.model.get("id"))this.options.isDropDownOpen=!1,this.hideDropdown(this),this.ui.toggle.trigger("focus");else{if(this._setSelection(e.model),this.ui.writeField.trigger("focus"),this.alpacaField&&this.alpacaField.setValue(this.model.id),this.ui.writeField.trigger("change"),this.getValue().id===this.curVal.id&&this.getEditableBehavior()&&this.getEditableBehavior().hideActions){var i=i||arguments[0];this.getEditableBehavior().hideActions(i)}if(this.isDropdownOpen())this.options.isDropDownOpen=!0;else{this.options.isDropDownOpen=!1;var n=this.$el.closest(".csui-scrollable-writemode"),l=this.$el.closest(".csui-custom-search-formitems");l&&l.hasClass("csui-dropdown-open")&&l.removeClass("csui-dropdown-open"),n&&n.hasClass("csui-dropdown-open")&&n.removeClass("csui-dropdown-open"),this.$el.parents(".csui-normal-scrolling").css("overflow","auto")}}this.options.alpacaField&&this.options.alpacaField.refreshValidationState(!1)},"getDisplayValue":function(){return this.getValue().get("name")},"onChildviewClearActiveTab":function(e){this.children.each(function(e){e.$el.hasClass("binf-active")&&e.$el.removeClass("binf-active")})},"resetSelection":function(){this.model.set({"id":null,"name":"<"+p.selectFieldDefaultLabel+">","icon":""})},"_setSelection":function(e){var t=e.pick("id","name");this.options.model.attributes.data=t.id,this.model.set(t)},"_updateSelection":function(){this.ui.selectedLabel.text(this.model.get("name")),this.trigger("selection:changed"),this.options.hasValue=!0},"_refreshSelection":function(e){e.get("id")===this.model.get("id")&&this._setSelection(e)},"serializeData":function(){return e.defaults({"id":e.uniqueId()},this.model.toJSON())},"_raiseValueChanged":function(){var i={"fieldvalue":this.getValue().id,"fieldid":this.options.dataId,"fieldpath":this.options.path,"targetfieldpath":this.options.path,"fieldView":this};this.trigger("field:changed",i),r.trigger(this.options.dataId+"dependentattrchanged",this);var n=t.Event("field:changed");e.extend(n,i),this.$el.trigger(n)},"isReadyToSave":function(){return!t(document.activeElement).hasClass("csui-icon apply-all")&&t.contains(t(this.$el)[0],document.activeElement)},"isDropdownOpen":function(){return!this.ui.dropdown.is(":hidden")},"hideDropdown":function(e){if(e=e.originalEvent instanceof Event?this:e,e.isDropdownOpen()&&(e.ui.writeField.trigger("focus"),e.ui.toggle.binf_dropdown("toggle"),e.getEditableBehavior().showActions)){e.options.isDropDownOpen=!1;var t=e.$el.closest(".csui-scrollable-writemode"),i=e.$el.closest(".csui-custom-search-formitems");i&&i.hasClass("csui-dropdown-open")&&i.removeClass("csui-dropdown-open"),t&&t.hasClass("csui-dropdown-open")&&t.removeClass("csui-dropdown-open"),e.getEditableBehavior().showActions()}},"getEditValue":function(){return this.getValue()},"getOldValue":function(){return this.oldVal},"getValue":function(){return this.model},"setValue":function(e,t){this.oldVal=this.curVal,this.curVal=e,this._setSelection(e),!t&&this._raiseValueChanged()},"allowEditOnClickReadArea":function(){return!0},"allowEditOnEnter":function(){return!0},"allowSaveOnEnter":function(){return!0},"setStateRead":function(e){return this.curVal.id!==this.getValue().id&&(this._setSelection(this.curVal),this.alpacaField&&this.alpacaField.setValue(this.curVal.id),this.alpacaField&&this.alpacaField.validate()&&this.alpacaField.refreshValidationState(!1)),!1},"setStateWrite":function(){return!1},"trySetValue":function(i){this._setSelection(this.getValue());var n=this.getValue().id!==this.curVal.id,l=n;return i=i||l,this.alpacaField&&(l=this.alpacaField.setValueAndValidate(this.model.id,i)),n?l?(this.curVal=this.getValue().clone(),this._raiseValueChanged()):this.alpacaField.schema.required&&!l?this.$el.trigger(t.Event("field:invalid")):this.alpacaField.schema.required||(this.curVal=this.getValue().clone(),this._raiseValueChanged()):(this.alpacaField&&this.alpacaField.schema&&this.alpacaField.schema.required&&!n&&this.$el.trigger(t.Event("field:invalid")),setTimeout(e.bind(function(){var e=t.Event("tab:content:field:changed");this.$el.trigger(e)},this),100)),l},"setFocus":function(){},"getEditableBehavior":function(){return this._behaviors[0]},"getStatesBehavior":function(){return this._behaviors[1]},"resetOldValueAfterCancel":function(){return!1}})}),csui.define("csui/controls/form/fields/alpaca/alpcsuiselectfield",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/controls/form/fields/selectfield.view","csui/utils/types/date","i18n!csui/controls/form/impl/nls/lang","csui/lib/underscore.string"],function(e,t,i,n,l,a,s,o){"use strict";function r(t){e.each(t,function(e){var t,i=e.id;"string"==typeof i&&(t=c(i),t?e.name=t:(t=d(i))&&(e.name=t))})}function c(e){if(/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d:\d\dZ?$/.test(e))return s.formatExactDate(e)}function d(t){function i(t){return e.str.lpad(t,2,"0")}if(/^D\/\d\d\d\d\/\d+\/\d+:\d+:\d+:\d+$/.test(t)){var n=/^D\/(\d\d\d\d)\/(\d+)\/(\d+):(\d+):(\d+):(\d+)$/.exec(t),l=e.str.sformat("{0}-{1}-{2}T{3}:{4}:{5}",n[1],i(n[2]),i(n[3]),i(n[4]),i(n[5]),i(n[6]));return s.formatExactDate(l)}}return l.Fields.CsuiSelectField=l.Fields.SelectField.extend({"constructor":function(e,t,i,n,l,a,s){this.excludeNoneOption=void 0!==i.removeDefaultNone&&i.removeDefaultNone,this.base(e,t,i,n,l,a,s),Array.isArray(this.schema.enum)&&this.schema.enum.length>200&&(this.schema.enumExtended=this.schema.enum.slice(200),this.schema.enum=this.schema.enum.slice(0,200))},"getFieldType":function(){return"select"},"postRender":function(t){this.base(t),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType()),this.field.parent().find("label").on("click",e.bind(this.onClickLabel,this))},"onClickLabel":function(e){e.stopPropagation(),e.preventDefault(),this.fieldView&&this.fieldView.ui&&this.fieldView.ui.readField.trigger(e.type)},"showField":function(){var l=[],s=!1;if(this.options.optionLabels)l=e.zip(this.schema.enum,this.options.optionLabels).map(function(e){return s=s||null===e[0]||""===e[0],{"id":e[0],"name":e[1]}}),r(l);else if(Array.isArray(this.schema.enum))for(var c=0;c<this.schema.enum.length;c++){var d=this.schema.enum[c];s=s||null===d[0]||""===d[0],l.push({"id":d,"name":d})}else this.options.dataSource&&(l=t.map(this.options.dataSource,function(e,t){return{"id":t,"name":e}}));s||this.excludeNoneOption||l.splice(0,0,{"id":null,"name":"<"+o.selectFieldDefaultLabel+">"});var u=new i.Collection(l),p={},h=!0,f="number"!==this.schema.type||!isNaN(this.data);if(null!==this.data&&""!==this.data&&f){var m=this.schema.enumExtended?this.data:u.get(this.data)&&u.get(this.data).get("name");p=new i.Model({"id":this.data,"name":m})}else this.excludeNoneOption?(p=new i.Model({"id":"create"===this.options.mode?u.models[0].attributes.id:null,"name":u.models[0].attributes.name}),h="create"===this.options.mode):p=new i.Model({"id":null,"name":"<"+o.selectFieldDefaultLabel+">"});var g,v=this.options?this.options.descriptionId:"",b=t(this.field[0]).find("label");b&&1==b.length&&(g=b.attr("for")+"Label",b.attr("id",g));var y=this.id;this.fieldView=new a({"model":new i.Model({"data":this.data,"options":this.options,"schema":this.schema,"id":y}),"id":e.uniqueId(y),"alpacaField":this,"labelId":g,"descriptionId":v,"selected":p,"collection":u,"mode":this.options.mode,"path":this.path,"dataId":this.name,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema},"hasValue":h});var w=t("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(w),this.region=new n.Region({"el":w}),this.region.show(this.fieldView)},"setValueAndValidate":function(e,t){"writeonly"!==this.fieldView.mode&&e instanceof Object&&null===e.id?this.setValue(e.id):this.setValue(e);var i=!0;return t&&(i=this.validate()),this.refreshValidationState(!1),i},"_validator":function(e){var t=this.getValue();e(this.schema.required&&""===t?{"status":!1,"message":"This field is required"}:{"status":!0})},"validate":function(){var t=this.base();return this.validation=e.omit(this.validation,"invalidValueOfEnum"),t},"setValue":function(e){null===e?this.base(""):this.base(e)},"getValue":function(){return this.base()},"focus":function(){this.fieldView.setFocus()},"destroy":function(){this.base(),this.region&&this.region.destroy()}}),l.registerFieldClass("select",l.Fields.CsuiSelectField,"bootstrap-csui"),l.Fields.CsuiSelectField}),csui.define("hbs!csui/controls/form/impl/fields/radiofield/radiofield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l,a,s){var o,r,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li>\r\n          <div class="cs-radio-item-container">\r\n          <label class="cs-label" for="w'+e.escapeExpression((r=null!=(r=c(i,"radioId")||(null!=t?c(t,"radioId"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"radioId","hash":{},"loc":{"start":{"line":7,"column":40},"end":{"line":7,"column":51}}}):r))+'">'+e.escapeExpression((r=null!=(r=c(i,"name")||(null!=t?c(t,"name"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":7,"column":53},"end":{"line":7,"column":61}}}):r))+"\r\n            <input "+(null!=(o=c(i,"if").call(null!=t?t:e.nullContext||{},null!=t?c(t,"isReadOnly"):t,{"name":"if","hash":{},"fn":e.program(2,l,0,a,s),"inverse":e.noop,"loc":{"start":{"line":8,"column":19},"end":{"line":8,"column":54}}}))?o:"")+' type="radio" class="radio-item" name="w'+e.escapeExpression(e.lambda(null!=s[1]?c(s[1],"radioGroupName"):s[1],t))+'" id="w'+e.escapeExpression((r=null!=(r=c(i,"radioId")||(null!=t?c(t,"radioId"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"radioId","hash":{},"loc":{"start":{"line":8,"column":122},"end":{"line":8,"column":133}}}):r))+'" value="'+e.escapeExpression((r=null!=(r=c(i,"id")||(null!=t?c(t,"id"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":8,"column":142},"end":{"line":8,"column":148}}}):r))+'"  '+(null!=(r=null!=(r=c(i,"checked")||(null!=t?c(t,"checked"):t))?r:e.hooks.helperMissing,o="function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"checked","hash":{},"loc":{"start":{"line":8,"column":151},"end":{"line":8,"column":164}}}):r)?o:"")+'>\r\n            <span class="cs-radio-container"><span class="outer"><span class="inner"></span></span></span>\r\n          </label>\r\n          </div>          \r\n        </li>\r\n'},"2":function(e,t,i,n,l){return" readonly "},"4":function(e,t,i,n,l){return""},"6":function(e,t,i,n,l){return"binf-hidden"},"8":function(e,t,i,n,l,a,s){var o,r,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li>\r\n          <div class="cs-radio-item-container">\r\n          <label class="cs-label" for="r'+e.escapeExpression((r=null!=(r=c(i,"radioId")||(null!=t?c(t,"radioId"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"radioId","hash":{},"loc":{"start":{"line":25,"column":40},"end":{"line":25,"column":51}}}):r))+'">'+e.escapeExpression((r=null!=(r=c(i,"name")||(null!=t?c(t,"name"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":25,"column":53},"end":{"line":25,"column":61}}}):r))+"\r\n            <input "+(null!=(o=c(i,"if").call(null!=t?t:e.nullContext||{},null!=t?c(t,"isReadOnly"):t,{"name":"if","hash":{},"fn":e.program(2,l,0,a,s),"inverse":e.noop,"loc":{"start":{"line":26,"column":19},"end":{"line":26,"column":54}}}))?o:"")+' type="radio" class="radio-item" name="r'+e.escapeExpression(e.lambda(null!=s[1]?c(s[1],"radioGroupName"):s[1],t))+'" id="r'+e.escapeExpression((r=null!=(r=c(i,"radioId")||(null!=t?c(t,"radioId"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"radioId","hash":{},"loc":{"start":{"line":26,"column":122},"end":{"line":26,"column":133}}}):r))+'" value="'+e.escapeExpression((r=null!=(r=c(i,"id")||(null!=t?c(t,"id"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":26,"column":142},"end":{"line":26,"column":148}}}):r))+'" '+(null!=(r=null!=(r=c(i,"checked")||(null!=t?c(t,"checked"):t))?r:e.hooks.helperMissing,o="function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"checked","hash":{},"loc":{"start":{"line":26,"column":150},"end":{"line":26,"column":163}}}):r)?o:"")+'>\r\n            <span class="cs-radio-container"><span class="outer"><span class="inner"></span></span></span>\r\n          </label>\r\n          </div>\r\n        </li>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l,a,s){var o,r,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-field-write">\r\n  <div class="cs-field-write-inner">\r\n    <ul>\r\n'+(null!=(o=c(i,"each").call(null!=t?t:e.nullContext||{},null!=t?c(t,"items"):t,{"name":"each","hash":{},"fn":e.program(1,l,0,a,s),"inverse":e.noop,"loc":{"start":{"line":4,"column":6},"end":{"line":13,"column":15}}}))?o:"")+'    </ul>\r\n    <span class="validation-error-message '+(null!=(o=c(i,"if").call(null!=t?t:e.nullContext||{},null!=t?c(t,"validationErrorMsg"):t,{"name":"if","hash":{},"fn":e.program(4,l,0,a,s),"inverse":e.program(6,l,0,a,s),"loc":{"start":{"line":15,"column":42},"end":{"line":15,"column":94}}}))?o:"")+'">'+e.escapeExpression((r=null!=(r=c(i,"validationErrorMsg")||(null!=t?c(t,"validationErrorMsg"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"validationErrorMsg","hash":{},"loc":{"start":{"line":15,"column":96},"end":{"line":15,"column":118}}}):r))+'</span>\r\n  </div>\r\n</div>\r\n\r\n<div class="cs-field-read">\r\n  <div class="cs-field-read-inner">\r\n    <ul>\r\n'+(null!=(o=c(i,"each").call(null!=t?t:e.nullContext||{},null!=t?c(t,"items"):t,{"name":"each","hash":{},"fn":e.program(8,l,0,a,s),"inverse":e.noop,"loc":{"start":{"line":22,"column":6},"end":{"line":31,"column":15}}}))?o:"")+"    </ul>    \r\n  </div>\r\n</div>\r\n"},"useDepths":!0});return i.registerPartial("csui_controls_form_impl_fields_radiofield_radiofield",n),n}),csui.define("css!csui/controls/form/impl/fields/radiofield/radiofield",[],function(){}),csui.define("csui/controls/form/fields/radiofield.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/form/impl/fields/csformfield.view","csui/controls/form/fields/base/csformfield.editable.behavior","csui/controls/form/impl/array/csformarrayfield.editable.behavior","csui/controls/form/impl/array/csformarrayfield.states.behavior","csui/controls/form/fields/base/csformfield.states.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/controls/form/impl/fields/radiofield/radiofield","i18n!csui/controls/form/impl/nls/lang","css!csui/controls/form/impl/fields/radiofield/radiofield"],function(e,t,i,n,l,a,s,o,r,c,d,u){"use strict";return l.extend({"ui":{"writeField":".cs-field-write","readField":".cs-field-read","iconContainer":".cs-radio-container"},"events":{"focusout":"onFocusOutWriteArea",'keyup input[type="radio"]':"focusElement","click @ui.iconContainer":"clickRadio",'change input[type="radio"]':"onSelectionChange",'click input[type="radio"]':"updateWriteField"},"constructor":function(t){l.prototype.constructor.apply(this,arguments),t.model.attributes.options&&(t.model.attributes.options.isMultiFieldItem?this.behaviors=e.extend({"FormFieldEditable":{"behaviorClass":s},"FormFieldStates":{"behaviorClass":o}},this.behaviors):this.behaviors=e.extend({"FormFieldEditable":{"behaviorClass":a},"FormFieldStates":{"behaviorClass":r}},this.behaviors)),this.model=new i.Model,this.options.selected?this._setSelection(this.options.selected):this.resetSelection(),this.listenTo(this.model,"change",this._raiseValueChanged),this.options.dataId||(this.options.dataId=this.options.id),this.mode=this.options.mode,this.mode=this.options.alpaca&&this.options.alpaca.schema.readonly?"readonly":"read",this.$el.addClass("readonly"===this.mode?"cs-formfield-readonly":""),this.curVal=this.oldVal=this.model.clone(),this.alpacaField=this.options.alpacaField,this.options.alpaca&&(!t.alpaca.options.setRequiredFieldsEditable&&t.model.attributes.options.isMultiFieldItem||"readonly"===this.mode||(this.mode="writeonly"))},"className":"cs-formfield cs-radio-group","template":d,"templateHelpers":function(){var t,i,n;this.options.model&&(t=this.options.model.get("options"),i=this.options.model.get("data"));var l=this.collection.map(function(e){return e.attributes});e.each(l,function(t){i===t.id&&(t.checked="checked='checked''"),e.isString(t.category)&&/Error/.test(t.category)&&(t.class="radio-item-error",n||(n=u.radioFieldValidationErrorInvalidValue))});var a=this.options.dataId,s=this.options.alpacaField?this.options.alpacaField.id:e.uniqueId("empty");return{"items":l,"radioGroupName":a,"hasData":""!==i&&null!==i&&this.options.hasValue,"writeonlyMode":"writeonly"===this.mode,
"mode":this.mode,"emptyLabel":u.noValueSet,"idBtn":s,"idBtnLabel":this.options.labelId?this.options.labelId:"","idValueDiv":s+"ValueDiv","applyFlag":t.applyFlag,"isReadOnly":"readonly"===this.mode,"validationErrorMsg":n}},"onRender":function(){this.alpacaField&&this.alpacaField.setValue(this.model.get("data"))},"clickRadio":function(e){if("readonly"===this.mode)return e.preventDefault(),void e.stopPropagation();this.updateWriteField(e);var i=t(e.target).closest(".cs-radio-item-container").find("input");i.trigger("click",function(){i.trigger("focus")}),this.loadActiveRadioElement(),this.trySetValue()},"onSelectionChange":function(e){if("readonly"===this.mode)return e.preventDefault(),void e.stopPropagation();this.loadActiveRadioElement(),this.trySetValue()},"updateWriteField":function(e){this.ui.readField.has(e.target)&&this.ui.writeField.find("#w"+t(e.target).closest(".cs-radio-item-container").find("input").attr("id").substring(1)).prop("checked",!0)},"loadActiveRadioElement":function(){t(".cs-active-radio").removeClass("cs-active-radio"),t(this.$el).find('input[type="radio"]').each(function(){t(this).is(":focus")&&t(this).parent().parent().parent().addClass("cs-active-radio")})},"trySetValue":function(){var e=this.getEditValue(),t=!0;this.isReadyToSave()&&(t=this.setValue(e,!0)),this._setSelection(e),this._updateSelection();var i=this.collection.where({"id":this.model.get("data")});return i.length>0&&this.ui.writeField.find("#w"+i[0].get("radioId")).prop("checked",!0),t},"getEditValue":function(){if(this.$el.find("input:checked").length>0){var t=this.$el.find("input:checked").get(0).value;if(t&&""!==t){var i=e.find(this.collection.models,function(e){if(e.id.toString()===t)return e}),n=i.get("category"),l=!1;return l||(l=e.isString(n)&&/Error/.test(n)),l?this.$el.find(".validation-error-message").removeClass("binf-hidden"):this.$el.find(".validation-error-message").addClass("binf-hidden"),i.id}}return this.getValue().id},"_setSelection":function(e){var t;t=e instanceof i.Model?e.pick("id").id:e,this.options.model.attributes.data=t,this.model.set("data",t)},"_updateSelection":function(){var e=this.collection.where({"id":this.model.get("data")});e.length>0&&(this.ui.readField.find("#r"+e[0].get("radioId")).prop("checked",!0),this.options.hasValue=!0)},"getDisplayValue":function(){var t=e.findWhere(this.collection.models,{"id":this.model.get("data")});return t?t.get("name"):""},"serializeData":function(){return e.defaults({"id":e.uniqueId(),"name":this.getDisplayValue()},this.model.toJSON())},"_raiseValueChanged":function(){var i={"fieldvalue":this.getValue().get("data"),"fieldid":this.options.dataId,"fieldpath":this.options.path,"targetfieldpath":this.options.path};this.trigger("field:changed",i);var n=t.Event("field:changed");e.extend(n,i),this.$el.trigger(n)},"getOldValue":function(){return this.oldVal.get("data")},"setValue":function(e,i,n){var l=!0;if(i&&this.alpacaField&&(l=this.alpacaField.setValueAndValidate(e,i)),l)this.$el.removeClass("cs-formfield-invalid"),e!==this.curVal&&(this.curVal=e),this.model.set("data",e,{"silent":!!n}),this.$el.trigger(t.Event("field:valid"),this);else{this.$el.addClass("cs-formfield-invalid");var a=t.Event("field:invalid");this.$el.trigger(a)}return l},"getValue":function(){return this.model},"onFocusOutWriteArea":function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),t(".cs-active-radio").removeClass("cs-active-radio"),this.getEditableBehavior().onFocusOutWrite(e)},"focusElement":function(e){e.preventDefault(),e.stopPropagation(),t(".cs-active-radio").removeClass("cs-active-radio"),t(e.target).parent().parent().parent().addClass("cs-active-radio")}})}),csui.define("csui/controls/form/fields/alpaca/alpcsuiradiofield",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/controls/form/fields/radiofield.view","i18n!csui/controls/form/impl/nls/lang"],function(e,t,i,n,l,a,s){"use strict";return l.Fields.CsuiRadioField=l.Fields.RadioField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"getFieldType":function(){return"radio"},"setup":function(){var e=this.data;this.base(),e!==this.data&&this.isRequired()&&!0===this.options.removeDefaultNone&&(this.data=e)},"postRender":function(e){this.base(e),this.showField(),this.removeExtraDivs()},"removeExtraDivs":function(){this.fieldView.$el.closest(".binf-col-sm-9").siblings().each(function(t,i){"DIV"===this.tagName&&"binf-col-sm-9"===this.className&&e.isNull(i.firstChild)&&("function"==typeof i.remove?i.remove():i.parentNode.removeChild(i))})},"showField":function(){var l=[];this.options.optionLabels?l=e.zip(this.schema.enum,this.options.optionLabels,e.pluck(this.options.enum,"category")).map(function(t){return{"id":t[0],"name":t[1],"category":t[2],"radioId":e.uniqueId("radio")}}):this.schema.enum&&(l=this.schema.enum.map(function(t){return{"id":t,"name":t,"radioId":e.uniqueId("radio")}}));var o=new i.Collection(l),r={};r=null!==this.data&&""!==this.data?new i.Model({"id":this.data,"name":o.get(this.data)&&o.get(this.data).get("name")}):new i.Model({"id":null,"name":"<"+s.selectFieldDefaultLabel+">"});var c,d=t(this.field[0]).find("label");d&&1===d.length&&(c=d.attr("for")+"Label",d.attr("id",c));var u=this.id;this.fieldView=new a({"model":new i.Model({"data":this.data,"options":this.options,"schema":this.schema,"id":u}),"id":e.uniqueId(u),"alpacaField":this,"labelId":c,"selected":r,"collection":o,"mode":this.options.mode,"path":this.path,"dataId":this.name,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema},"hasValue":!0});var p=t("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(p),this.region=new n.Region({"el":p}),this.region.show(this.fieldView)},"setValueAndValidate":function(e,t){this.setValue(e);var i=!0;return t&&(i=this.validate(),this.refreshValidationState(!1)),i},"_validator":function(e){var t=this.getValue();e(this.schema.required&&""===t?{"status":!1,"message":"This field is required"}:{"status":!0})},"validate":function(){var t=this.base();return this.validation=e.omit(this.validation,"invalidValueOfEnum"),t},"setValue":function(e){null===e?this.base(""):this.base(e)},"getValue":function(){return this.data},"focus":function(){this.fieldView.setFocus()},"destroy":function(){this.base(),this.region&&this.region.destroy()}}),l.registerFieldClass("radio",l.Fields.CsuiRadioField,"bootstrap-csui"),l.Fields.CsuiRadioField}),csui.define("csui/controls/form/fields/alpaca/alpcsuiintegerfield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/utils/types/number","csui/models/form","csui/controls/form/fields/textfield.view","csui/utils/base"],function(e,t,i,n,l,a,s,o,r,c){return a.Fields.CsuiIntegerField=a.Fields.IntegerField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"getFieldType":function(){return"text"},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType())},"showField":function(){var e,a=this.id,o=this.options?this.options.descriptionId:"",c=i(this.field[0]).find("label");c&&1==c.length&&(e=c.attr("for")+"Label",c.attr("id",e)),this.schema.maximum=!t.isUndefined(this.schema.maximum)&&!t.isNull(this.schema.maximum)&&this.schema.maximum<s.MAX_SAFE_INTEGER?this.schema.maximum:s.MAX_SAFE_INTEGER,this.schema.minimum=!t.isUndefined(this.schema.minimum)&&!t.isNull(this.schema.minimum)&&this.schema.minimum>s.MIN_SAFE_INTEGER?this.schema.minimum:s.MIN_SAFE_INTEGER,this.fieldView=new r({"model":new n.Model({"data":this.data,"options":this.options,"schema":this.schema,"id":a}),"id":t.uniqueId(a),"alpacaField":this,"labelId":e,"descriptionId":o,"value":this.data,"readonly":!0,"dataId":this.name,"path":this.path,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema}});var d=i("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(d),this.region=new l.Region({"el":d}),this.region.show(this.fieldView)},"getValue":function(){var e=this._getControlVal(!0);return null===e||""===e?null:parseInt(e)},"setValueAndValidate":function(e,t){this.setValue(e);var i=!0;return t&&(i=this.validate(),this.refreshValidationState(!1)),i},"focus":function(){this.fieldView.setFocus()},"handleValidate":function(){var e=this.base();if(!e){var t=this.validation;if(""!==this.fieldView.ui.writeField.val())return t.notOptional.status=!0,t.notOptional.message="",e;for(var i in t)!1===t[i].status&&"notOptional"!==i&&(t[i].status=!0,t[i].message="")}return e},"destroy":function(){this.base(),this.region&&this.region.destroy()}}),a.registerFieldClass("integer",a.Fields.CsuiIntegerField,"bootstrap-csui"),a.registerFieldClass("integer",a.Fields.CsuiIntegerField,"bootstrap-edit-horizontal"),i.alpaca.Fields.CsuiIntegerField}),csui.define("hbs!csui/controls/form/impl/fields/passwordfield/passwordfield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' placeholder="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"placeholder"):a,t))+'"'},"3":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'name="'+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":6,"column":24},"end":{"line":6,"column":32}}}):a))+'"'},"5":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-describedby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnDescription")||(null!=t?s(t,"idBtnDescription"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnDescription","hash":{},"loc":{"start":{"line":7,"column":48},"end":{"line":7,"column":68}}}):a))+'" '},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="control-area cs-field-write">\r\n  <div class="cs-field-write-inner">\r\n    <input type="password" title="'+e.escapeExpression((s=null!=(s=o(i,"title")||(null!=t?o(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":3,"column":34},"end":{"line":3,"column":43}}}):s))+'" class="cs-formfield cs-passwordfield-input\r\n    cs-passwordfield-write"\r\n      '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"placeholder"):a,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":78}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"name"):t,{"name":"if","hash":{},"fn":e.program(3,l,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":40}}}))?a:"")+' id="'+e.escapeExpression((s=null!=(s=o(i,"id")||(null!=t?o(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":6,"column":45},"end":{"line":6,"column":51}}}):s))+'"\r\n      '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnDescription"):t,{"name":"if","hash":{},"fn":e.program(5,l,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":77}}}))?a:"")+'>\r\n    </input>\r\n    <div class="icon-container">\r\n      <div class="csui-icon-edit inline-edit-icon edit-cancel" title="'+e.escapeExpression((s=null!=(s=o(i,"cancel")||(null!=t?o(t,"cancel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":10,"column":70},"end":{"line":10,"column":80}}}):s))+'"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="cs-field-read">\r\n  <div class="cs-field-read-inner">\r\n    <input type="password" title="'+e.escapeExpression((s=null!=(s=o(i,"title")||(null!=t?o(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":17,"column":34},"end":{"line":17,"column":43}}}):s))+'" class="cs-formfield cs-passwordfield-input\r\n    cs-passwordfield-read"\r\n      '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"placeholder"):a,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"loc":{"start":{"line":19,"column":6},"end":{"line":19,"column":78}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"name"):t,{"name":"if","hash":{},"fn":e.program(3,l,0),"inverse":e.noop,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":40}}}))?a:"")+' >\r\n    </input>\r\n\r\n    <div class="icon-container">\r\n      <div title="'+e.escapeExpression((s=null!=(s=o(i,"edit")||(null!=t?o(t,"edit"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"loc":{"start":{"line":24,"column":18},"end":{"line":24,"column":26}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=o(i,"edit")||(null!=t?o(t,"edit"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"loc":{"start":{"line":24,"column":40},"end":{"line":24,"column":48}}}):s))+'" role="button"\r\n           class="csui-icon-edit inline-edit-icon icon-edit"></div>\r\n    </div>\r\n  </div>\r\n</div>'}});return i.registerPartial("csui_controls_form_impl_fields_passwordfield_passwordfield",n),n}),csui.define("csui/controls/form/impl/fields/passwordfield/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/form/impl/fields/passwordfield/nls/root/lang",{"title":"Enter password"}),csui.define("css!csui/controls/form/impl/fields/passwordfield/passwordfield",[],function(){}),csui.define("csui/controls/form/fields/passwordfield.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/form/impl/fields/csformfield.view","hbs!csui/controls/form/impl/fields/passwordfield/passwordfield","i18n!csui/controls/form/impl/fields/passwordfield/nls/lang","css!csui/controls/form/impl/fields/passwordfield/passwordfield"],function(e,t,i,n,l,a,s){"use strict";return l.extend({"constructor":function(e){l.apply(this,arguments)},"className":"cs-formfield cs-passwordfield","template":a,"templateHelpers":function(){return e.extend(l.prototype.templateHelpers.apply(this),{"inputType":"password","title":s.title,"idBtnDescription":this.options.descriptionId})}})}),csui.define("csui/controls/form/fields/alpaca/alpcsuipasswordfield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/utils/base","csui/controls/form/fields/passwordfield.view","i18n!csui/controls/form/impl/fields/passwordfield/nls/lang"],function(e,t,i,n,l,a,s,o,r){return a.Fields.CsuiPasswordField=a.Fields.PasswordField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"getFieldType":function(){return"password"},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType())},"showField":function(){var e,a=this.id,s=this.options?this.options.descriptionId:"",r=i(this.field[0]).find("label");r&&1==r.length&&(e=r.attr("for")+"Label",r.attr("id",e)),this.fieldView=new o({"model":new n.Model({"data":this.data,"options":this.options,"schema":this.schema,"id":a}),"id":t.uniqueId(a),"alpacaField":this,"labelId":e,"descriptionId":s,"value":this.data,"readonly":!0,"dataId":this.name,"path":this.path,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema}});var c=i("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(c),this.region=new l.Region({"el":c}),this.region.show(this.fieldView)},"setValueAndValidate":function(e,t){this.setValue(e);var i=!0;return t&&(i=this.validate(),this.refreshValidationState(!1)),i},"focus":function(){this.fieldView.setFocus()},"destroy":function(){this.base(),this.region&&this.region.destroy()}}),a.registerFieldClass("password",a.Fields.CsuiPasswordField),a.registerDefaultFormatFieldMapping("password","password"),i.alpaca.Fields.CsuiPasswordField}),csui.define("csui/controls/form/fields/alpaca/alpcsuiurlfield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/models/form","csui/controls/form/fields/textfield.view","csui/utils/base"],function(e,t,i,n,l,a,s,o,r){return a.Fields.CsuiUrlField=a.Fields.URLField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"getFieldType":function(){return"url"},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType())},"showField":function(){var e=this.id;this.fieldView=new o({"context":this.connector.config.context,"model":new n.Model({"data":this.data,"options":this.options,"schema":this.schema,"id":e}),"id":t.uniqueId(e),"alpacaField":this,"value":this.data,"readonly":!0,"dataId":this.name,"path":this.path,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema}});var a=i("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(a),this.region=new l.Region({"el":a}),this.region.show(this.fieldView)},"setValueAndValidate":function(e,t){this.setValue(e);var i=!0;return t&&(i=this.validate(),this.refreshValidationState(!1)),i},"focus":function(){this.fieldView.setFocus()},"handleValidate":function(){var e=this.base();if(!e){var t=this.validation;if(this.fieldView.cancelClicked||this.fieldView.getEditableBehavior().escapePressed)return t.invalidPattern.status=!0,t.invalidPattern.message="",!0}return e},"destroy":function(){this.base(),this.region&&this.region.destroy()}}),a.registerFieldClass("url",a.Fields.CsuiUrlField,"bootstrap-csui"),a.registerFieldClass("url",a.Fields.CsuiUrlField,"bootstrap-edit-horizontal"),i.alpaca.Fields.CsuiUrlField}),csui.define("csui/controls/form/fields/alpaca/alpcsuiarrayfield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/jsonpath","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/models/form","csui/controls/form/fields/textfield.view","csui/utils/base","csui/lib/jsonpath","i18n!csui/controls/form/impl/nls/lang","csui/controls/form/pub.sub","i18n"],function(e,t,i,n,l,a,s,o,r,c,d,u,p,h){return s.Fields.CsuiArrayField=s.Fields.ArrayField.extend({"constructor":function(e,i,n,l,a,s,o){if(i||(i=new Array(l.maxItems)),t.has(l.items,"properties")){var r=!1;t.each(l.items.properties,function(e){t.has(e,"readonly")&&(r=e.readonly)}),r&&(l.readonly=!0)}l.required&&t.has(l,"items")&&(l.items.required=!0),l.readonly&&t.has(l,"items")&&(l.items.readonly=!0),l.disabled&&t.has(l,"items")&&(l.items.disabled=!0),this.formView=s.config.formView,this.formView.listenTo(this.formView,"request:completed",t.bind(function(){this.formView&&this.propagatedEvent&&this._doEditActions(this.propagatedEvent)},this)),this.base(e,i,n,l,a,s,o),this.tabContentSelectors="input, button:not(:disabled), textarea, .icon-date_picker",this.tabableRegions=[],this.tabableElements=[],this.currentTabPosition=0,this.isWriteMode=!1,this.turnToReadMode=!0},"addItem":function(e,i,n,l,a){if(this.options.prevChildData||(this.options.prevChildData=!!this.children&&this.children.slice()),this.options.isSetType&&(this.addItemCount=this.addItemCount?this.addItemCount+1:1),this.options.isBlockModified=!0,this.options.isSetType){l=this.parent.options.defaultData?JSON.parse(JSON.stringify(this.parent.options.defaultData[this.name])):"";var s=d(l,"$..[?(@.toolbarSticky===true)]");t.each(s,function(e){t.extend(e,{"actionbar":{"actions":[{"action":"remove","enabled":!0,"iconClass":"csui-icon circle_delete_grey csui-array-icon-delete-"+e.uniqueId},{"action":"add","enabled":!0,"iconClass":"csui-icon circle_add_grey csui-array-icon-add-"+e.uniqueId},{"action":"up","enabled":!1},{"action":"down","enabled":!1}]}})})}else this.children.length>0&&1===this.field.parents(".cs-form-set-container .csui-scrollablecols").length&&this.adjustPartiallyVisibleElement();this.options&&this.options.descriptionId&&(n=n||{},n.descriptionId=this.options.descriptionId),this.base(e,i,n,l,t.bind(function(){"create"===this.options.mode&&(this._raiseValueChanged(this.getValue(),this.name,this.path,this.getValue(),this.name,this.path),this.options.isSetType||(this.field.find(".cs-form-multi-action-container .csui-icon.circle_add_grey").closest("button").addClass("binf-hidden"),this.field.find(".cs-form-multi-action-container .csui-icon.circle_delete_grey").closest("button").addClass("binf-hidden"))),a(),this.options.isSetType?(this.parent.restructureSetContainer(this.$(this.field[0]).find(".cs-form-set-container"),this.parent,e),this._hideSetActionIcon(),this._showItemsInWriteMode(e,this.parent.options.isSetType),this.options.isSetType&&this.options.rows_to_display&&this.updateShowMoreIndexes(this.$(this.field[0]).find(".cs-form-set-container")),n.isArraySchemaChanged=!0):(this.field.find(".cs-form-set-container .cs-array").removeClass("cs-form-multi-action-container").addClass("cs-form-multi-action-container"),this._registerActionEvents())},this)),this.options.isSetType||(this._showItemsInWriteMode(e),n.isArraySchemaChanged=!0),this.children[0]&&this.children[0].parent.parent&&this.children[0].parent.parent.options.isSetType||this.parent.parent&&this.parent.parent.options.isSetType?this.showApplyAll(!0):this.showApplyAll(!1)},"removeItem":function(e,i){this.options.prevChildData||(this.options.prevChildData=!!this.children&&this.children.slice()),this.options.isSetType&&(this.deletedItemCount=this.deletedItemCount?this.deletedItemCount+1:1),this.children.length>0?"tkl"===this.children[0].type?this.children[e].fieldView.changeChildrenValues(this.children[e].fieldView.children):this.children[e].fieldView&&this.children[e].fieldView.getEditableBehavior().changeChildrenValues(this.childRelations):this.children.length>0&&1===this.field.parents(".cs-form-set-container .csui-scrollablecols").length&&this.adjustPartiallyVisibleElement(),p.tklHelpers&&p.tklHelpers.viewsInWriteMode.length&&p.tklHelpers.viewsInWriteMode.splice(p.tklHelpers.viewsInWriteMode.indexOf(this.children[e].fieldView),1),this.base(e,t.bind(function(){"create"===this.options.mode&&this._raiseValueChanged(this.getValue(),this.name,this.path,this.getValue(),this.name,this.path);var e=void 0!==this.view.field.schema.items.minItems?this.view.field.schema.items.minItems:1;this.getFieldEl().find(".cs-pull-left .cs-field-write").length===e&&(this.options.isSetType&&0===e||"otcs_node_picker"===this.options.fields.item.type)&&this._raiseValueChanged(this.getValue(),this.name,this.path,this.getValue(),this.name,this.path),i&&i()},this)),this.parent.options&&this.parent.options.isSetType&&(this.parent.restructureSetContainer(this.$(this.field[0]).find(".cs-form-set-container"),this.parent),this._hideSetActionIcon());var n=this.container.parent().find(".cs-form-set-container-"+this.propertyId)[0].children,l=e===n.length?e-1:e;this._showItemsInWriteMode(l,this.parent.options.isSetType||this.parent.options.isMultiFieldItem),this.options.isSetType&&this.options.rows_to_display&&this.updateShowMoreIndexes(this.$(this.field[0]).find(".cs-form-set-container")),this.options.isArraySchemaChanged=!0,this.children[0]&&this.children[0].parent.parent&&this.children[0].parent.parent.options.isSetType||this.parent.parent&&this.parent.parent.options.isSetType?(this.showApplyAll(!0),this.children[e-1]&&this.children[e-1].field.closest(".cs-array").hasClass("alpaca-container-item-last")&&(this.$(this.children[e-1].getFieldEl().find(".cs-field-write-inner:first input")).length>0?this.$(this.children[e-1].getFieldEl().find(".cs-field-write-inner:first input")).trigger("focus"):this.$(this.children[e-1].getFieldEl().find(".cs-field-write-inner:first").children().first()).trigger("focus"))):this.showApplyAll(!1)},"adjustPartiallyVisibleElement":function(){var e,t,i=h&&h.settings.rtl,n=this.field.find(".cs-formfield").first(),l=n.parents(".csui-scrollablecols").parents(".cs-form-set-container").find(".ps-container.ps-active-x"),a=n.offset().left,s=n.parents(".csui-scrollablecols").siblings(".csui-lockedcols").find(".csui-shadowleft-container"),o=s.offset().left;if(i){var r=o+s.outerWidth();t=a+n.outerWidth()-r}else t=o-a;t>0&&(i?(e=l.scrollLeftRtl(),l.scrollLeftRtl(e+t)):(e=l.scrollLeft(),l.scrollLeft(e-t)))},"postRender":function(e){if(this.base(e),this.options&&this.options.descriptionId){this.container.find(".cs-field-write-inner button:not(:disabled), .cs-field-write-inner input, .cs-field-write-inner textarea").attr("aria-describedby",this.options.descriptionId)}if(this.$=i,this.field.on("field:changed",t.bind(this._onFieldChanged,this)),this.container.on("click",t.bind(this._doEditActions,this)),this.container.on("mouseenter",t.bind(this._mouseInArrayBlock,this)),this.container.on("mouseleave",t.bind(this._mouseOutArrayBlock,this)),this.container.parent().on("focusout",t.bind(this._mouseOutArrayBlock,this)),this.container.on("focusin",t.bind(this._hideApplyAll,this)),this.container.find(".cs-pull-right").find(".circle_add_grey").parent().addClass("binf-hidden"),this.container.find(".cs-pull-right").find(".circle_delete_grey").parent().addClass("binf-hidden"),this.container.find(".csui-icon.apply-all.block").on("click",t.bind(this.onClickApplyAll,this)),this.container.find(".csui-icon.apply-all.block").on("keypress",t.bind(this.onClickApplyAll,this)),!this.parent.parent||"create"===this.options.mode&&this.parent.parent?(this.registered=!0,this._registerBulkSubmitAction()):this.parent.parent&&void 0===this.parent.parent.options.isSetType?this._registerBulkSubmitAction():this.parent.parent&&!0===this.parent.parent.options.isSetType&&this.parent.options.isMultiField&&(this.registered=!0,this._registerBulkSubmitAction()),this.schema.required){var n=this.getFieldEl().find("label.alpaca-container-label");i('<span class="alpaca-icon-required binf-glyphicon binf-glyphicon-star"></span>').prependTo(n)}if(this.options.setRequiredFieldsEditable&&this.getFieldEl().find(".cs-pull-right").removeClass("binf-hidden"),this.options.isSetType){0===this.getFieldEl().find(".cs-pull-left .cs-field-write").length&&(this.getFieldEl().find(".cs-pull-right .circle_add_grey").parent().addClass("binf-hidden"),this.getFieldEl().find(".cs-pull-right .circle_delete_grey").parent().addClass("binf-hidden"),this.getFieldEl().find(".csui-bulk-edit").addClass("binf-hidden"))}else this.getFieldEl().find(".cs-array").addClass("cs-form-multi-action-container");this.tabableRegions.push(this.container);var l=this;t.each(this.container.find(this.tabContentSelectors),function(e){l.tabableElements.push(e)}),"create"!==this.options.mode&&this.container.on("focusin",function(){l.field.find(".csui-array-bulk-edit").removeClass("binf-hidden")}),this.field.parent().addClass("csui-field-"+this.getFieldType());var a=this.field&&this.field.parent().find("label");a&&a.on("click",t.bind(this.onClickLabel,this))},"onClickLabel":function(e){!this.isWriteMode&&this.children&&this.children[0]&&this.children[0].fieldView&&this.children[0].fieldView.ui.readField.trigger(e.type)},"_showActionIcons":function(e){for(var t=e.currentTarget.parentElement.children,i=0;i<t.length;i++)t[i].className.indexOf("cs-pull-right")>=0&&(this.$(t[i]).find(".circle_add_grey").parent().hasClass("binf-hidden")&&this.$(t[i]).find(".circle_add_grey").parent().removeClass("binf-hidden"),this.$(t[i]).find(".circle_delete_grey").parent().hasClass("binf-hidden")&&this.$(t[i]).find(".circle_delete_grey").parent().removeClass("binf-hidden"))},"_showActionIconsForSets":function(e){for(var t=e.currentTarget.parentElement,i=e.currentTarget.parentElement.children,n=0;n<i.length;n++)i[n].className.indexOf("cs-pull-right")>=0&&(this.$(i[n]).find(".circle_add_grey").parent().hasClass("binf-hidden")&&this.$(i[n]).find(".circle_add_grey").parent().removeClass("binf-hidden"),this.$(i[n]).find(".circle_delete_grey").parent().hasClass("binf-hidden")&&this.$(i[n]).find(".circle_delete_grey").parent().removeClass("binf-hidden"),this.options.isSetType&&!t.classList.contains("cs-form-multi-action-container")&&(this.$(i[n]).find(".circle_add_grey").parent().hasClass("alpaca-button-disabled")&&this.$(i[n]).find(".circle_delete_grey").parent().hasClass("alpaca-button-disabled")||this.$(i[n]).addClass("csui-set-action-bar")))},"_hideActionIcons":function(e){if(0===this.$(e.currentTarget).find(document.activeElement).length)for(var t=e.currentTarget.parentElement.children,i=0;i<t.length;i++)t[i].className.indexOf("cs-pull-right")>=0&&(this.$(t[i]).find(".circle_add_grey").parent().hasClass("binf-hidden")||this.$(t[i]).find(".circle_add_grey").parent().addClass("binf-hidden"),this.$(t[i]).find(".circle_delete_grey").parent().hasClass("binf-hidden")||this.$(t[i]).find(".circle_delete_grey").parent().addClass("binf-hidden"),this.$(t[i]).removeClass("csui-set-action-bar"))},"_hideActions":function(e){0===this.$(document.activeElement).parent().closest(".cs-pull-left").siblings(".cs-pull-right").find(this.$(e.target).closest(".cs-pull-right").find(".circle_add_grey")).length&&this.$(e.target).closest(".cs-pull-right").find(".circle_add_grey").parent().addClass("binf-hidden"),0===this.$(document.activeElement).parent().closest(".cs-pull-left").siblings(".cs-pull-right").find(this.$(e.target).closest(".cs-pull-right").find(".circle_delete_grey")).length&&this.$(e.target).closest(".cs-pull-right").find(".circle_delete_grey").parent().addClass("binf-hidden")},"onShow":function(e){if("create"===this.options.mode){var t=this.getFieldEl().find(".cs-form-set-container").parents(".cs-form-set-container");this.options.isSetType&&0===t.length&&(t=this.getFieldEl().find(".cs-form-set-container")),this.options.isSetType&&void 0===this.data[0]&&(i(this.domEl).find(".cs-pull-left").addClass("csui-emptyset"),i(this.domEl).find(".cs-pull-right").removeClass("cs-pull-right"))}"update"===this.options.mode&&this.options.isSetType&&void 0===this.data[0]&&i(this.domEl).find(".cs-pull-left").addClass("csui-emptyset"),this._registerActionEvents()},"_registerActionEvents":function(){if("create"===this.options.mode){var e=this.getFieldEl().find(".cs-form-set-container").parents(".cs-form-set-container");if(this.options.isSetType&&0===e.length&&(e=this.getFieldEl().find(".cs-form-set-container")),e.length>0)e.find(".cs-array >.cs-pull-left").on("mouseenter",t.bind(this._showActionIconsForSets,this)),e.find(".cs-array >.cs-pull-left").on("mouseleave",t.bind(this._hideActionIcons,this)),e.find(".cs-array >.cs-pull-right").on("mouseenter",t.bind(this._showActionIconsForSets,this)),e.find(".cs-array >.cs-pull-right").on("mouseleave",t.bind(this._hideActions,this));else{var i=this.getFieldEl().find(".cs-form-set-container");i.length>0&&(i.find(".cs-array >.cs-pull-right").on("mouseenter",t.bind(this._showActionIcons,this)),i.find(".cs-array >.cs-pull-right").on("mouseleave",t.bind(this._hideActions,this)))}}},"_registerBulkSubmitAction":function(){var e=this.container.parent(),n=this;n.focusedOnDocument=!1,e.off("keydown").off("focusout").on("focusout",function(l){if(!(i(l.relatedTarget).hasClass("csui-bulk-edit-cancel")||i(l.target).hasClass("csui-set-show-more-icon")||i(l.relatedTarget).hasClass("csui-set-show-more-icon")||n.isRelatedFieldInFocus(l.relatedTarget))){var a="otcs_node_picker"===n.schema.items.type?201:"otcs_node_picker"===(n.schema.items.properties&&n.schema.items.properties.classNumber&&n.schema.items.properties.classNumber.type)?201:50;setTimeout(function(){
if(0===e.find(":focus").length&&0===e.find(document.activeElement).length)if(n.focusedOnDocument=!!document.activeElement&&("BODY"===document.activeElement.tagName||"DIV"===document.activeElement.tagName),n.getFieldEl().find(".cs-pull-left .cs-field-write:not(.csui-unedited)").is(":visible")){var l=n.getFieldEl().find(".cs-formfield.cs-booleanfield .cs-field-write:not(.csui-unedited)");if(l.length>0&&l.addClass("csui-unedited"),n.children.length>0&&"tkl"===n.children[0].type){if(p.tklHelpers){for(var a=!1,s=p.tklHelpers.viewsInWriteMode.length-1;!a&&s>=0;s--)a=p.tklHelpers.viewsInWriteMode[s].getEditableBehavior().mouseDownCancel;a||n._doBulkSubmitActionTKL()}}else n._doBulkSubmitAction();"create"===n.options.mode&&(n.hideApplyAll(n.getFieldEl()),n._hideInlineAddIcon(),n._hideInlineDeleteIcon())}else 0!==n.view.field.schema.items.minItems||t.isEqual(n.getPreviousData(),n.getValue())?n.getFieldEl().find(".cs-pull-left .cs-field-write").length===n.getFieldEl().find(".cs-formfield.cs-booleanfield .cs-field-write").length&&(0===e.find(".csui-bulk-edit-cancel.binf-hidden").length?(n._showItemsInReadMode(),n._showBulkEditAction(),n._hideInlineAddIcon(),n._hideInlineDeleteIcon()):"create"===n.options.mode&&(n.hideApplyAll(n.getFieldEl()),n._hideInlineAddIcon(),n._hideInlineDeleteIcon())):!n.cancelClicked&&n.children&&n.children.length>0&&n._doBulkSubmitAction(!0);var o=n.$(".cs-form-set-container").find(".binf-popover .csui-colout-formitems"),r=o.parents(".cs-form-set-container");o.find(document.activeElement).length>0&&r.trigger("focus"),("BODY"===document.activeElement.tagName||document.activeElement!==r[0]&&(r.find(document.activeElement).hasClass("csui-colout-icon")&&!i(document.activeElement).data("binf.popover")||r.find(document.activeElement).length<1))&&n.hidePopover()}.bind(n),a)}}).on("keydown",i,function(e){var t,l=function(e){if("otcs_user_picker"===n.schema.items.type||"otcs_member_picker"===n.schema.items.type||"otcs_group_picker"===n.schema.items.type){var t=n.getFieldEl().find(".cs-pull-left .cs-field-read");e.arrayFieldIndex=i(t).index(i(e.target).closest(".cs-field-read"))}};if(!n.options.readonly)if(27===e.keyCode){if("create"===n.options.mode)return!1;!i(document.activeElement).hasClass("cs-search")||"otcs_member_picker"!==n.schema.items.type&&"otcs_group_picker"!==n.schema.items.type&&"otcs_user_picker"!==n.schema.items.type?n._changeBlockToWriteMode(e,!1):n._changeBlockToWriteMode(e,!0)}else if(13===e.keyCode){if(n.turnToReadMode=!0,i(document.activeElement).is(".binf-btn:not(.binf-dropdown-toggle)")||n.$(".cs-form-set-container").find(".binf-popover .csui-colout-formitems").length>0)return;if(i(document.activeElement).hasClass("cs-form-set-container")&&!n.isWriteMode)return i(document.activeElement).siblings(".csui-array-bulk-edit").find(".csui-bulk-edit").trigger("click"),e.preventDefault(),void e.stopPropagation();if(n.options.isSetType){i(e.target).hasClass("esoc-user-container esoc-user-mini-profile")||(e.preventDefault(),e.stopPropagation());var a=n.getFieldEl().find(".cs-pull-left .cs-field-read");a.hasClass("binf-hidden")?e.data(".cs-field-write-inner.binf-open").length>0?e.data(document.activeElement).trigger("click"):(e.data(".csui-user-picker-no-results")&&(e.preventDefault(),e.stopPropagation()),e.target.classList.contains("apply-all")&&n.onClickApplyAll(e),setTimeout(function(){n.children.length>0&&"tkl"===n.children[0].type?n._doBulkSubmitActionTKL(!0,e):n._doBulkSubmitAction(!0)},20)):(l(e),"create"===n.options.mode||i(e.target).hasClass("esoc-user-container esoc-user-mini-profile")||n._changeBlockToWriteMode(e,!0))}else{var s=n.view.field.children[0].fieldView;if("select"===s.alpacaField.type){var o=e.data.inArray(e.target,e.data(e.target).closest(".cs-form-set-container").find("button.binf-dropdown-toggle"));-1!==o&&(s=n.view.field.children[o].fieldView,s.isDropdownOpen()?(e.preventDefault(),e.stopPropagation(),e.data(document.activeElement).trigger("click")):(e.preventDefault(),e.stopPropagation(),setTimeout(function(){n.children.length>0&&"tkl"===n.children[0].type?n._doBulkSubmitActionTKL(!0,e):n._doBulkSubmitAction(!0)},20)))}else if(s.getStatesBehavior().isStateRead()&&s.allowEditOnEnter())l(e),"create"===n.options.mode||i(e.target).hasClass("esoc-user-container esoc-user-mini-profile")||n._changeBlockToWriteMode(e,!0);else if(s.getStatesBehavior().isStateWrite()&&s.allowSaveOnEnter()){if(!e.data(".csui-user-picker-no-results")||"otcs_member_picker"!==n.schema.items.type&&"otcs_user_picker"!==n.schema.items.type&&"otcs_group_picker"!==n.schema.items.type||(e.preventDefault(),e.stopPropagation()),e.target.classList.contains("apply-all"))n.onClickApplyAll(e);else if(n.children.length>0&&"tkl"!==n.children[0].type){var r;r=n.schema&&n.schema.items&&"otcs_node_picker"===n.schema.items.type?i(e.target).parents(".cs-field-write-inner").find("input")[0]:e.target,t=n.children[n._getFieldIndex(r)].fieldView,t.getOldValue()!==t.getEditValue()&&t.changeChildrenValues(n.childRelations)}setTimeout(function(){n.children.length>0?"tkl"===n.children[0].type?n._doBulkSubmitActionTKL(!0,e):n._doBulkSubmitAction(!0):0===n.container.find("ul.typeahead:visible").length&&n._doBulkSubmitAction(!0)},20)}}}else if(9===e.keyCode)if(n.isWriteMode||"create"===n.options.mode){if("create"===n.options.mode){var c=i.Event("tab:content:field:changed");n.field.trigger(c)}if(n.options.isSetType){var d=n.children[0].children[0];d.fieldView?d.fieldView.getEditableBehavior().moveTab(e):d.children[0].fieldView.getEditableBehavior().moveTab(e)}else n.children[0].fieldView&&n.children[0].fieldView.getStatesBehavior().isStateWrite()&&n.children[0].fieldView.getEditableBehavior().moveTab(e)}else n.getFieldEl().find(".csui-array-bulk-edit").addClass("binf-hidden");else if(113===e.keyCode){if(n.turnToReadMode=!0,!n.isWriteMode)return l(e),void("create"!==n.options.mode&&n._changeBlockToWriteMode(e,!0));e.stopPropagation(),e.preventDefault(),n.children.length>0&&!n.options.isSetType&&"tkl"!==n.children[0].type&&(t=n.children[n._getFieldIndex(e.target)]&&n.children[n._getFieldIndex(e.target)].fieldView)&&t.getOldValue()!==t.getEditValue()&&t.getEditableBehavior()&&t.getEditableBehavior().changeChildrenValues(n.childRelations),n.children.length&&"tkl"===n.children[0].type?n._doBulkSubmitActionTKL(!0,e):n._doBulkSubmitAction(!0),n.childRelations&&n.childRelations.length>0&&n.childRelations.forEach(function(t){n.isMultiFieldView(t)?t._doBulkSubmitActionTKL(!0,e):"write"===t.getStatesBehavior().state&&t.getEditableBehavior().trySetValueAndLeaveEditMode(!0,!1)})}else 32===e.keyCode&&(n.isWriteMode||(l(e),"create"!==n.options.mode&&n._changeBlockToWriteMode(e,!0)))})},"_moveTab":function(e,t,n){if(this._updateTabableElements(),this.currentTabPosition=i(this.tabableElements).index(t),"create"===this.options.mode){if(this.currentTabPosition===this.tabableElements.length-1||-1===this.currentTabPosition)return}else if(-1===this.currentTabPosition)return;n?this.currentTabPosition>0?this.currentTabPosition-=1:this.currentTabPosition=this.tabableElements.length-1:this.currentTabPosition>=this.tabableElements.length-1?this.currentTabPosition=0:this.currentTabPosition+=1,this.tabableElements[this.currentTabPosition].focus(),e.preventDefault(),e.stopPropagation()},"_updateTabableElements":function(){this.tabableElements.length=0;var e=this;this.options.mode&&"create"===this.options.mode?i(this.domEl.closest(".alpaca-container-item").length>0?this.domEl.closest(".alpaca-container-item"):this.domEl).find(this.tabContentSelectors).each(function(){i(this).is(":visible")&&e.tabableElements.push(this)}):i(this.tabableRegions).each(function(){i(this).find(e.tabContentSelectors).each(function(){i(this).is(":visible")&&e.tabableElements.push(this)})})},"_updateTabablePositionOnApplyAllClick":function(e,t){t._updateTabableElements(),t.currentTabPosition=i(t.tabableElements).index(e.target);var n,l,a,s,o,r;if(r=e.shiftKey,"create"===t.options.mode){if(t.currentTabPosition===t.tabableElements.length-1||-1===t.currentTabPosition){for(n=i(document.querySelectorAll(".binf-tab-content")).children(),l=n.find(t.tabContentSelectors),t.tabableElements=l,t.tabableRegions=i(t.tabableElements),s=l.length,o=0;o<s&&(!(a=t.tabableElements[o])||!i(a).is(e.target));)o++;o>=0&&o<s&&(t.currentTabPosition=o)}}else if(-1===t.currentTabPosition){for(n=i(document.querySelectorAll(".binf-tab-content")).children(),l=n.find(t.tabContentSelectors),t.tabableElements=l,t.tabableRegions=i(t.tabableElements),s=l.length,o=0;o<s&&(!(a=t.tabableElements[o])||!i(a).is(e.target));)o++;o>=0&&o<s&&(t.currentTabPosition=o)}r?t.currentTabPosition>0?t.currentTabPosition-=1:t.currentTabPosition=t.tabableElements.length-1:t.currentTabPosition>=t.tabableElements.length-1?t.currentTabPosition=0:t.currentTabPosition+=1,i(t.tabableElements[t.currentTabPosition]).prop("tabindex","0").trigger("focus")},"_changeBlockToWriteMode":function(e,t){if(t){if(0===this.field.find(".csui-bulk-edit-cancel:visible").length){e.preventDefault(),e.stopPropagation(),this.field.find(".csui-array-bulk-edit-set").length>0?i(this.field.find(".csui-array-bulk-edit-set .csui-bulk-edit")).trigger("click"):(i(this.field.find(".csui-bulk-edit")).trigger("click"),i(this.field.find(".csui-array-bulk-edit")).removeClass("binf-hidden"));var n=0;if("otcs_user_picker"===this.schema.items.type||"otcs_member_picker"===this.schema.items.type||"otcs_group_picker"===this.schema.items.type)n=e.arrayFieldIndex;else{var l=this.getFieldEl().find(".cs-pull-left .cs-field-read, .cs-booleanfield .cs-field-write");n=i(l).index(i(e.target).closest(".cs-field-read"))}var a=this.getFieldEl().find(".cs-pull-left .cs-field-write");i(a[n]).find(":input").trigger("focus")}}else this.children.length>0&&"tkl"===this.children[0].type&&this.getFieldEl().is(":visible")&&(this.parentRelations&&this.parentRelations.map(function(e){i(e.field.find(".csui-bulk-edit-cancel:visible")).trigger("click")}),this.childRelations&&this.childRelations.map(function(e){i(e.field.find(".csui-bulk-edit-cancel:visible")).trigger("click")})),i(this.field.find(".csui-bulk-edit-cancel:visible")).trigger("click")},"_showAddIconForLastElement":function(){this.container.find(".cs-pull-right").find(".circle_add_grey").parent().addClass("binf-hidden"),this.container.find(".cs-pull-right").find(".circle_add_grey").last().parent().removeClass("binf-hidden")},"_hideInlineAddIcon":function(){this.container.find(".cs-pull-right").find(".circle_add_grey").parent().addClass("binf-hidden")},"_hideInlineDeleteIcon":function(){this.container.find(".cs-pull-right").find(".circle_delete_grey").parent().addClass("binf-hidden")},"_showSetDeleteIcon":function(){this.container.find(".cs-pull-right").find(".circle_delete_grey").removeClass("binf-hidden").parent().removeClass("binf-hidden")},"_hideSetActionIcon":function(){var e=i(this.container[0]).find(".cs-array .cs-pull-right");e.find(".circle_delete_grey").parent().addClass("binf-hidden"),e.find(".circle_add_grey").parent().addClass("binf-hidden")},"_doEditActions":function(e,n){var l,a;if(this.propagatedEvent=e,this.formView.isDataUpdating)return this.formView.options.metadataView.blockingView.$el.is(":visible")||(this.formView.options.metadataView.blockActions(),this.formView.propagatedEvent=e),!1;if(this.propagatedEvent=null,n||e&&i(e.target).hasClass("csui-bulk-edit")){if(0!==i(".cs-form .cs-formfield-invalid").length)return void i(i(".cs-form .cs-formfield-invalid")[0]).find(":input").trigger("focus").trigger("focus");if(this.getFieldEl().find(".csui-array-bulk-edit").removeClass("binf-hidden"),this.getFieldEl().find(".csui-bulk-edit-cancel").removeClass("binf-hidden"),this.getFieldEl().find(".csui-bulk-edit-submit").removeClass("binf-hidden"),this.getFieldEl().find(".csui-bulk-edit").addClass("binf-hidden"),this.registered||!this.parent.parent&&!this.parent.options.isSetType||this._registerBulkSubmitAction(),this.children.length>0){var s=function(e){!!e&&e.map(function(e){if(!e.isWriteMode)if(e.alpacaField)"read"===e.getStatesBehavior().state&&e.getEditableBehavior().setViewStateWriteAndEnterEditMode();else{var t=e.getFieldEl();t.is(":visible")&&(t.find(".icon-container.csui-array-bulk-edit").removeClass("binf-hidden"),t.find(".csui-bulk-edit-cancel").removeClass("binf-hidden"),t.find(".csui-bulk-edit-submit").removeClass("binf-hidden"),t.find(".csui-bulk-edit").addClass("binf-hidden"),e.registered||!e.parent.parent&&!e.parent.options.isSetType||e._registerBulkSubmitAction(),e._showItemsInWriteMode(),!!e.childRelations&&s(e.childRelations))}})};s(this.childRelations)}this.showMoreOrLessColumns(!1),this._showItemsInWriteMode(),l=this.getFieldEl().find(".cs-pull-left .cs-field-write"),l.length>0&&i(l.first()).find(":input").trigger("focus").trigger("focus")}else if(e&&i(e.target).hasClass("csui-bulk-edit-cancel"))if(this.cancelClicked=!0,p.tklHelpers&&p.tklHelpers.viewsInWriteMode.length>0&&!this.options.isSetType)for(var o=p.tklHelpers.viewsInWriteMode.length-1;p.tklHelpers&&o>=0;o--){var r=p.tklHelpers.viewsInWriteMode[o];if(r&&"write"===r.getStatesBehavior().state)if(r.getEditableBehavior().isMultiFieldView(r)){r=r.alpacaField.parent;var c=r.getFieldEl();c.find(".csui-bulk-edit-cancel").is(":visible")&&(c.find(".csui-bulk-edit").removeClass("binf-hidden"),c.find(".csui-bulk-edit-cancel").addClass("binf-hidden"),c.find(".csui-bulk-edit-submit").addClass("binf-hidden"),r._hideInlineDeleteIcon(),r._hideInlineAddIcon(),r.options.prevChildData&&(r.children={},r.children=r.options.prevChildData),a=r.getPreviousData(),r.refreshContainer(a,t.bind(function(){this.options.prevChildDom=void 0,this.options.prevData=void 0,this.isWriteMode=!1;var e=this;"create"!==this.options.mode&&setTimeout(t.bind(function(){var t=i.Event("tab:content:field:changed");e.field.trigger(t)},e),300)},r)))}else"write"===r.getStatesBehavior().state&&(r.isTKLField?(r.setValue(r.getOldValue()),r.ui.writeField.val(r.getOldValue()),r.isValidTKLState=!0):r.ui.writeField.val(r.getValue()),r.alpacaField.refreshValidationState(),r.$el.removeClass("cs-formfield-invalid"),r.getEditableBehavior().setViewReadOnlyAndLeaveEditMode(!1,!1))}else{this.getFieldEl().find(".csui-bulk-edit").removeClass("binf-hidden"),this.getFieldEl().find(".csui-bulk-edit-cancel").addClass("binf-hidden"),this.getFieldEl().find(".csui-bulk-edit-submit").addClass("binf-hidden");var d=!1;this.getFieldEl().hasClass("cs-adjust-width")&&(d=!0),this._hideInlineDeleteIcon(),this._hideInlineAddIcon();var u=this;u.$=i,this.options.prevChildData&&(this.children={},this.children=this.options.prevChildData),a=this.getPreviousData(),this.refreshContainer(a,function(){var e=u.getFieldEl();u.container.trigger("focus"),u.options.prevChildDom=void 0,u.options.prevData=void 0,d&&e.addClass("cs-adjust-width"),u.parent.restructureSetContainer(u.$(u.field[0]).find(".cs-form-set-container"),u.parent),setTimeout(t.bind(function(){var e=i.Event("tab:content:field:changed");u.field.trigger(e),u.field.find(".csui-array-bulk-edit").removeClass("binf-hidden")},u),300),u.isWriteMode=!1})}},"showMoreOrLessColumns":function(e){var t=this.container.closest(".cs-form-set.cs-form-set-container");i(t).find(".set-row-show").length&&e?(i(t).parent().find(".csui-show-more").removeClass("binf-hidden"),i(t).parent().find(".icon-expandArrowUp")&&(i(t).parent().find(".csui-set-show-more-icon").removeClass("icon-expandArrowDown").addClass("icon-expandArrowUp"),i(t).parent().find(".csui-set-show-more-label").html(u.showLess))):(i(t).find(".set-row-hidden").addClass("set-row-show"),i(t).parent().find(".csui-show-more").addClass("binf-hidden"))},"getPreviousData":function(){var e={};if(this.options.submittedData&&this.options.submittedData.length){if(this.children[0]&&"select"===this.children[0].type&&!this.options.isSetType){var t=[];i.each(this.options.submittedData,function(e,i){i instanceof Object?t.push(parseInt(i.get("id"))):""===i||null===i?t.push(""):t.push(i)}),e=JSON.parse(JSON.stringify(t.slice()))}else e=JSON.parse(JSON.stringify(this.options.submittedData));this.options.submitArray=!1}else this.options.prevData?(e=this.options.prevData,this.options.prevData=void 0):e=JSON.parse(JSON.stringify(this.data.slice()));return e},"showAppliedTick":function(e,t,n){var l=e.target;l.callback=t,l.eve=e,i(l).fadeOut(100,function(){i(this).removeClass(),i(this).addClass("csui-icon block applied_done"),i(this).fadeIn(100,function(){setTimeout(function(e){i(e).fadeOut(800,function(){i(this).removeClass(),i(this).addClass("csui-icon apply-all block binf-hidden"),i(this).parent().addClass("binf-hidden"),this.callback(this.eve,n)})},1e3,this)})}),i(".metadata-sidebar .metadata-sidebar-fadeout").fadeOut(2e3,function(){i(".metadata-sidebar .cs-list-group .arrow-overlay").removeClass("metadata-sidebar-arrow-overlay"),i(".metadata-sidebar .cs-list-group").removeClass("metadata-sidebar-cs-list-group"),i(this).remove()})},"onClickApplyAll":function(e){if(this._doBulkSubmitAction(),i(e.currentTarget).parents(".alpaca-container-item")&&0===i(e.currentTarget).parents(".alpaca-container-item").find(".cs-formfield-invalid").length){this.updateData(this.data);var n=JSON.parse(JSON.stringify(this.data.slice())),l=this.updateData(n),a={"fieldvalue":l,"fieldpath":this.name,"action":this.showAppliedTick,"fieldevent":e,"callback":this._updateTabablePositionOnApplyAllClick,"view":this};i(".metadata-sidebar .cs-list-group").addClass("metadata-sidebar-cs-list-group"),i(".metadata-sidebar .cs-list-group .arrow-overlay").addClass("metadata-sidebar-arrow-overlay"),i("<div/>",{"class":"metadata-sidebar-fadeout"}).appendTo(i(".metadata-sidebar .cs-list-group"));var s=i.Event("click:applyAll");t.extend(s,a),this.field.trigger(s);var o=this,r=t.where(this.children,{"type":"tkl"});if(r.length>0){var c=function(e){e.children.length>0&&t.each(e.children,function(e){r[0].fieldView.isMultiFieldView(e)?(a.fieldpath=e.propertyId,a.fieldvalue=e.getValue(),t.extend(s,a),o.field.trigger(s),c(e.children[0].fieldView)):(a.fieldpath=e.alpacaField?e.alpacaField.name:e.view.field.name,a.fieldvalue=e.getValue().toString(),t.extend(s,a),o.field.trigger(s),c(e))})};c(r[0].fieldView);var d=function(e){e.parentViews.length>0&&t.each(e.parentViews,function(e){r[0].fieldView.isMultiFieldView(e)?(a.fieldpath=e.propertyId,a.fieldvalue=e.getValue(),t.extend(s,a),o.field.trigger(s),d(e.children[0].fieldView)):(a.fieldpath=e.alpacaField?e.alpacaField.name:e.view.field.name,a.fieldvalue=e.getValue().toString(),t.extend(s,a),o.field.trigger(s),d(e))})};d(r[0].fieldView)}}},"showApplyAll":function(e){if("create"===this.options.mode){var t,n=this.getFieldEl().find(".csui-icon.apply-all");e&&(t=this.getFieldEl().find(">.apply-set").length>0?this.getFieldEl().find(">.apply-set").children():this.container.parents(".cs-form-set-container").siblings(".apply-set").find(".csui-icon.apply-all"),n=t.length>0?t:n);var l=this.getFieldEl().parents(".cs-metadata-properties").find(".csui-icon.apply-all").not(".binf-hidden");if(l=l.filter(function(e,t){return t=t!==n[0]?t:void 0}),l&&l.length>0&&(l.addClass("binf-hidden"),l.parent().addClass("binf-hidden")),n.hasClass("binf-hidden")){n.removeAttr("style"),n.removeClass("binf-hidden"),n.prop("tabindex","0"),n.parent().hasClass("binf-hidden")&&n.parent().removeClass("binf-hidden");var a=i.Event("tab:content:field:changed");this.field.trigger(a)}}},"hideApplyAll":function(e){var t=e.find(".apply-all:first");0===e.find(".alpaca-message").length&&(t.hasClass("binf-hidden")||t.addClass("binf-hidden"),t.parent().hasClass("binf-hidden")||setTimeout(function(){t.parent().addClass("binf-hidden")},1100))},"_hideApplyAll":function(e){if(!(this.parent.parent&&this.parent.parent.options.isSetType||"create"!==this.options.mode||0!==this.getFieldEl().find(".apply-all").not(".binf-hidden").length)){var t=i(".cs-form .apply-all").not(".binf-hidden");t.length>0&&t.addClass("binf-hidden")}},"updateData":function(e){return i.each(e,function(e,t){if(t instanceof Object)for(var i in t)t.hasOwnProperty(i)&&t[i]instanceof Object&&void 0!==t[i].id&&(t[i]=""+t[i].id)}),e},"_showItemsInReadMode":function(){this._showBulkEditAction(),this.showInReadMode(this.children),this.focusedOnDocument&&(this.container.parent().find(".cs-form-set-container").length>0?this.container.parent().find(".cs-form-set-container").first().trigger("focus"):this.container.parents(".cs-form").find(".cs-form-set-container").length>0&&this.container.parents(".cs-form").find(".cs-form-set-container").first().trigger("focus")),this._adjustScrollContainerWidth(!1),this.isWriteMode=!1},"showInReadMode":function(e){var t=this;i.each(e,function(e,n){n.fieldView?!i.isEmptyObject(n.fieldView._behaviors)&&n.fieldView.getStatesBehavior()&&"create"!==n.options.mode&&n.fieldView.getStatesBehavior().setStateRead(!1):n.children&&t.showInReadMode(n.children)})},"_showItemsInWriteMode":function(e,t){if(!this.options.prevData)if(this.options.isSetType){var n=i.map(this.data.slice(),function(e){return i.extend(!0,{},e)});this.options.prevData=n}else this.options.prevData=this.data.slice();this.options.isSetType||this.field.find(".cs-form-set-container .cs-array").removeClass("cs-form-multi-action-container").addClass("cs-form-multi-action-container"),"create"!==this.options.mode&&this._hideBulkEditAction(),this.showInWriteMode(this.children,e);var l=this.getFieldEl().find(".cs-pull-left .cs-field-write");if(t&&void 0!==e&&null!==e){var a=this.container.parent().find(".cs-form-set-container").first();i(i(a).children().get(e)).find(".cs-pull-left .cs-field-write").first().find(":input").trigger("focus")}else void 0!==e&&null!==e&&(this.schema&&this.schema.items&&"otcs_node_picker"===this.schema.items.type?i(l.get(e)).find(".csui-icon:visible").trigger("focus"):i(l.get(e)).find(":input").trigger("focus"));this.field.find(".csui-set-scroll-container-parent").length>0&&(i(this.field).find(".csui-set-scroll-container-child").perfectScrollbar("update"),i(this.field).find(".cs-form-set-container").addClass("csui-hoveredScrollable")),this._adjustScrollContainerWidth(!0),this.isWriteMode=!0},"_adjustScrollContainerWidth":function(e){var t=this.container.parent().find(".csui-set-scroll-container-parent");if((!this.isWriteMode||!e)&&t.length>0&&"create"!==this.options.mode&&(this.isWriteMode||e)){var i=this.container.find(".csui-lockedcols").width();e&&(h&&h.settings.rtl?(this.container.parent().find(".csui-set-scroll-container-parent").css("padding-Right",i+"px"),this.container.parent().find(".csui-set-scroll-container-parent").css("padding-Left","0px")):this.container.parent().find(".csui-set-scroll-container-parent").css("padding-Left",i+"px")),this.container.parent().find(".csui-set-scroll-container-child").perfectScrollbar("update")}},"showInWriteMode":function(e,t){var n=this;if(i.each(e,function(e,l){l.fieldView?((l.options.customField||"otcs_user_picker"===l.schema.type||"otcs_member_picker"===l.schema.type||"otcs_group_picker"===l.schema.type||"otcs_node_picker"===l.schema.type)&&l.fieldView&&t&&!i.isEmptyObject(l.fieldView._behaviors)&&t!==e&&l.fieldView.getEditableBehavior().trySetValue(),i.isEmptyObject(l.fieldView._behaviors)||!l.fieldView.getStatesBehavior()||"write"===l.fieldView.getStatesBehavior().state||this.schema.readonly||(l.fieldView.getStatesBehavior().setStateWrite(!1,!1),(l.fieldView.childTKLViews.length||l.fieldView.parentViews.length||l.fieldView.children||l.parentRelations||l.childRelations)&&p.tklHelpers&&p.tklHelpers.viewsInWriteMode.length>0&&n._updateViewsInWriteMode(l.fieldView))):l.children&&n.showInWriteMode(l.children)}),this.options.fields.item.isMultiFieldItem){this.field.find(".cs-form-set-container.csui-multivalue-block").removeClass("csui-multivalue-read-block");var l=this.field.children(".cs-form-set-container").is("visible");l.length>0&&l.addClass("csui-multivalue-set-write-mode")}this.hideColout()},"hideColout":function(){this.container.parent().find(".cs-form-set-container").find(".csui-show-colout").addClass("binf-hidden"),this.container.parent().find(".cs-form-set-container").find(".csui-show-colout").parent(".csui-lockedcols").removeClass("csui-colout-visible"),this.container.parent().find(".csui-scrollablecols").addClass("csui-scrollable-writemode"),this.hidePopover()},"hidePopover":function(){i(".csui-colout-icon").each(function(){i(this).data("binf.popover")&&i(this).binf_popover("destroy")})},"validateContainer":function(e){var t=this,n=!0;i.each(e,function(e,l){l.fieldView?!i.isEmptyObject(l.fieldView._behaviors)&&l.fieldView.getStatesBehavior()&&("select"===l.fieldView.alpacaField.type?(l.fieldView.getEditValue().get("id")!==l.fieldView.getOldValue().get("id")&&(t.options.isBlockModified=!0),n=l.fieldView.trySetValue(!0),l.fieldView.ui.writeField.select()):"otcs_user_picker"===l.schema.type||"otcs_member_picker"===l.schema.type||"otcs_group_picker"===l.schema.type?(l.fieldView.getEditValue().id!==l.fieldView.getValue().id&&(""===l.fieldView.getEditValue().id&&null===l.fieldView.getValue().id||(t.options.isBlockModified=!0)),l.fieldView.userPicked?n=l.fieldView.setValue(l.fieldView.getEditValue(),!0):(l.fieldView.alpacaField.refreshValidationState(!1),n=!1)):l.options.customField||"otcs_node_picker"===l.schema.type?l.fieldView.getEditValue()===l.fieldView.getOldValue()&&""!==l.fieldView.getEditValue()||(t.options.isBlockModified=!0,n=l.fieldView.setValue(l.fieldView.getEditValue(),!0)):"tkl"===l.fieldView.alpacaField.type?(l.fieldView.getEditValue()!==l.fieldView.getOldValue()&&(t.options.isBlockModified=!0),n=l.fieldView.trySetValue(),l.fieldView.needRerender&&(l.fieldView.render(),delete l.fieldView.needRerender)):(l.fieldView.getEditValue()===l.fieldView.getValue()&&l.fieldView.getEditValue()===l.fieldView.getOldValue()||""===l.fieldView.getEditValue()&&null===l.fieldView.getValue()||(t.options.isBlockModified=!0),n=l.fieldView.setValue(l.fieldView.getEditValue(),!0)),n||!l.fieldView.$el.is(":visible")?(l.fieldView.$el.removeClass("cs-formfield-invalid"),t.isContainerValid=!0):(l.fieldView.$el.addClass("cs-formfield-invalid"),t.isContainerValid=!1)):l.children&&n&&t.validateContainer(l.children)})},"isMultiFieldView":function(e){return!e.isTKLField&&!e.isNonTKLField||e.alpacaField.options.isMultiFieldItem&&!!e.alpacaField.parent&&!!e.alpacaField.parent.schema.maxItems&&e.alpacaField.parent.schema.maxItems>1},"validateChildRelations":function(e){e&&(this.validateContainer(e),e.map(function(e){e.childRelations&&e.childRelations.length&&this.validateChildRelations(e.childRelations)},this))},"_getFieldIndex":function(e){var t=this.containerItemEl.find("input").index(e);if(-1===t){var i=this.containerItemEl.find(".cs-field-write").not(".csui-nodepicker-hasvalue");t=i.find("input.cs-nodepicker-input").length>0?this.containerItemEl.find(".cs-field-write").index(i):this.containerItemEl.find(".cs-field-write button").index(e)}return t},"_doBulkSubmitAction":function(e){var n,l,a=!1;if(this.isContainerValid=!0,this.validateContainer(this.children),this.validateChildRelations(this.childRelations),"create"===this.options.mode&&0===document.querySelectorAll(".binf-has-error").length&&(i(".metadata-validation-error").hide(),i("div").removeClass("show-validation-error")),0===i(".cs-form .cs-formfield-invalid").length){var s=this.getFieldEl().find(".cs-pull-left .cs-field-write"),o=void 0!==this.view.field.schema.items.minItems?this.view.field.schema.items.minItems:1;if(s.length>=o&&(this.options.isSetType?t.flatten(t.map(this.data,t.values)).length!==s.length&&(a=!0):this.data.length!==s.length&&(a=!0)),this.isRelatedFieldInFocus(document.activeElement)&&!e)return;if(this.isContainerValid){if(a||this.options.isBlockModified){var r={"fieldvalue":this.getValue(),"fieldid":this.name||this.id,"fieldpath":this.path,"targetfieldvalue":this.getValue(),"targetfieldid":this.name,"targetfieldpath":this.path};this.options.submitArray=!0,this.options.submittedData=this.getValue().slice(),this.options.prevData=void 0,this.options.prevChildData=void 0;var c=i.Event("field:changed");t.extend(c,r),this._onFieldChanged(c)}this.showMoreOrLessColumns(!0)}else{var d=i.Event("field:invalid");this.$el.trigger(d)}if(p.tklHelpers&&p.tklHelpers.viewsInWriteMode.length>0)for(var u,f=p.tklHelpers.viewsInWriteMode.length-1;p.tklHelpers&&f>=0;f--)(u=p.tklHelpers.viewsInWriteMode[f])&&(u===this.view,u&&(u.getEditableBehavior().isMultiFieldView(u)?"write"===u.getStatesBehavior().state&&(u=u.alpacaField.parent,u.options.submittedData=u.getValue().slice(),u._showItemsInReadMode(),u._hideInlineDeleteIcon(),u._hideInlineAddIcon(),u._showBulkEditAction()):u.getEditableBehavior().setViewReadOnlyAndLeaveEditMode(!0,!1)));"create"!==this.options.mode&&(this.focusedOnDocument=!0,this._showItemsInReadMode(),this._hideInlineDeleteIcon(),this._hideInlineAddIcon(),this._showBulkEditAction(),this.options.isSetType||i(document.activeElement).closest(".csui-multivalue-block")||i(document.activeElement).closest(".cs-form-set")||this.containerItemEl.find(".csui-multivalue-block").trigger("focus")),"create"!==this.options.mode&&(this.container.parent().find(".cs-form-set-container").find(".csui-show-colout").removeClass("binf-hidden"),this.container.parent().find(".cs-form-set-container").find(".csui-show-colout").parent(".csui-lockedcols").addClass("csui-colout-visible"),n=this.container.find(".csui-lockedcols").width(),l=this.container.find(".csui-lockedcols").find(".csui-show-colout").length>0?0:this.container.find(".csui-show-colout").width(),h&&h.settings.rtl?(this.container.parent().find(".csui-set-scroll-container-parent").css("padding-Right",n+l+"px"),this.container.parent().find(".csui-set-scroll-container-parent").css("padding-Left","0px")):this.container.parent().find(".csui-set-scroll-container-parent").css("padding-Left",n+l+"px"),this.container.parent().find(".csui-set-scroll-container-child").perfectScrollbar("update"),this.container.parent().find(".cs-form-set-container").hasClass("csui-hoveredScrollable")&&this.container.parent().find(".cs-form-set-container").removeClass("csui-hoveredScrollable"))}else this.hideColout();"create"!==this.options.mode&&(this.options.isBlockModified||this.options.isSetType||i(document.activeElement).closest(".csui-multivalue-block")||i(document.activeElement).closest(".cs-form-set")||this.containerItemEl.find(".csui-multivalue-block").trigger("focus")),this.options.isBlockModified=!1,this.options.submitArray=void 0},"_doBulkSubmitActionTKL":function(e,n){var l=this,a=void 0!==n&&n;setTimeout(function(){var n,s,o=!0,r=!1,c=l.children[0]&&l.children[0].fieldView.isReadyToSave();if((e||!c)&&(e||!l.isRelatedFieldInFocus(document.activeElement)||a&&113===a.keyCode)){if(p.tklHelpers)for(var d=p.tklHelpers.viewsInWriteMode.length-1;p.tklHelpers&&d>=0;d--){if(!p.tklHelpers.viewsInWriteMode[d])return;n=p.tklHelpers.viewsInWriteMode[d].isNonTKLField?p.tklHelpers.viewsInWriteMode[d].getEditableBehavior():p.tklHelpers.viewsInWriteMode[d],o?o=n.trySetValue():n.trySetValue(),r||(s=p.tklHelpers.viewsInWriteMode[d],l.isMultiFieldView(s)?(s=s.alpacaField.parent,r=!t.isEqual(s.getPreviousData(),s.getValue())):r=p.tklHelpers.viewsInWriteMode[d].getOldValue()!==p.tklHelpers.viewsInWriteMode[d].getValue())}if(o){if(r){var u={"fieldvalue":l.getValue(),"fieldid":l.id,"fieldpath":l.path,"targetfieldvalue":l.getValue(),"targetfieldid":l.name,"targetfieldpath":l.path};l.options.submitArray=!0,l.options.submittedData=l.getValue().slice(),l.options.prevData=void 0,l.options.prevChildData=void 0;var h=i.Event("field:changed");t.extend(h,u),l._onFieldChanged(h)}if(l.showMoreOrLessColumns(!0),"create"!==l.options.mode&&p.tklHelpers)for(var f,m=p.tklHelpers.viewsInWriteMode.length-1;m>=0&&p.tklHelpers;m--)(f=p.tklHelpers.viewsInWriteMode[m])&&(f.getEditableBehavior().isMultiFieldView(f)?(f=f.alpacaField.parent,f.children.map(function(e){e.fieldView.needRerender&&e.fieldView.render()}),f.isWriteMode&&(f.options.submittedData=f.getValue().slice(),
l.focusedOnDocument=i(a.currentTarget).find(".csui-multivalue-container")[0]===f.container[0],f._showItemsInReadMode(),f._hideInlineDeleteIcon(),f._hideInlineAddIcon(),f._showBulkEditAction())):f.isTKLField?(l.focusedOnDocument=!0,f.getEditableBehavior().trySetValueAndLeaveEditMode(!1,!1)):(f.setValue(f.getEditValue(),!0,!0),f.render(),"write"===f.getStatesBehavior().state&&f.getStatesBehavior().setStateRead(!1)));l.options.submitArray=void 0,"create"!==l.options.mode&&p.tklHelpers&&0===p.tklHelpers.viewsInWriteMode.length&&delete p.tklHelpers}}},50)},"_updateViewsInWriteMode":function(e){setTimeout(function(){p.tklHelpers||(p.tklHelpers={},p.tklHelpers.viewsInWriteMode=[]),!e.isCustomView&&-1===p.tklHelpers.viewsInWriteMode.indexOf(e)&&e.$el.is(":visible")&&(e.cancelClicked=!1,e.alpacaField.parent&&(e.alpacaField.parent.cancelClicked=!1),p.tklHelpers.viewsInWriteMode.push(e)),p.tklHelpers.tabInView||(p.tklHelpers.tabInView=e)},101)},"isRelatedFieldInFocus":function(e){return p.tklHelpers&&p.tklHelpers.viewsInWriteMode.some(function(t){return t.ui.writeField[0]===e})},"_showBulkEditAction":function(){this.getFieldEl().find(".csui-bulk-edit").removeClass("binf-hidden"),this.getFieldEl().find(".csui-bulk-edit-cancel").addClass("binf-hidden"),this.getFieldEl().find(".csui-array-bulk-edit").addClass("binf-hidden")},"_hideBulkEditAction":function(){this.getFieldEl().find(".csui-array-bulk-edit").hasClass("binf-hidden")&&this.getFieldEl().find(".csui-array-bulk-edit").removeClass("binf-hidden"),this.getFieldEl().find(".csui-bulk-edit-cancel").removeClass("binf-hidden"),this.getFieldEl().find(".csui-bulk-edit").addClass("binf-hidden")},"_mouseInArrayBlock":function(e){"create"===this.options.mode||this.schema.readonly||0!==i(".cs-form .cs-formfield-invalid").length||this.getFieldEl().find(".csui-array-bulk-edit").removeClass("binf-hidden")},"_mouseOutArrayBlock":function(e){this.getFieldEl().find(".csui-bulk-edit-cancel").hasClass("binf-hidden")&&this.getFieldEl().find(".csui-array-bulk-edit").addClass("binf-hidden"),this.getFieldEl().find(".csui-set-action-bar").removeClass("csui-set-action-bar")},"updateToolbars":function(){this.base(),this.schema.readonly&&this.getFieldEl().find(".cs-pull-right").hide(),c.isTouchBrowser()&&this.field.find(".cs-pull-left").trigger("click",void 0);this.field.find(".cs-alp-array-buttons").parent().width("2.5em").css("min-width",0);this.parent.options&&!this.parent.options.isSetType&&this.field.find(".alpaca-field-otcs_array_buttons").parent().css("min-width","3em"),0===this.field.find(".cs-alp-array-buttons").length&&this.field.find(".cs-pull-right").attr("title","")},"_onFieldChanged":function(e){if(e.stopPropagation(),!this.options.submitArray){var t=/\[([^\]]+)\]\/?([^\]]*)$/,i=t.exec(e.fieldpath);i&&4===i.length&&i[2]?this.data[parseInt(i[1])][i[2]]=e.fieldvalue:this.data[parseInt(i[1])]=e.fieldvalue}(this.options.submitArray||"create"===this.options.mode)&&(this._raiseValueChanged("create"===this.options.mode?this.getValue():e.fieldvalue,this.name,this.path,e.fieldvalue,e.fieldid,e.fieldpath),this.options.submitArray=!1,this._updateSet())},"_updateSet":function(){var e=this.containerItemEl.alpaca("get");if(e&&e.options.isSetType&&e.parent){var t=e.parent;if(e.deletedItemCount){var i=e.children.length,n=i+e.deletedItemCount;e.deletedItemCount=0;for(var l=i+1;l<=n;l++){var a=t.childrenByPropertyId[e.propertyId+"_"+l];if(!a)break;t.removeItem(a.id)}}if(e.addItemCount){var s=e.children.length,o=s-e.addItemCount;e.addItemCount=0;var r,c={"type":"string"},d={"hidden":!0};if(e.children.length){var u=t.childrenByPropertyId[e.propertyId+"_1"];u&&(c=u.schema,d=u.options,r=u.data)}for(var p=o+1;p<=s;p++)t.addItem(e.propertyId+"_"+p,c,d,r)}}},"_raiseValueChanged":function(e,n,l,a,s,o){var r={"fieldvalue":e,"fieldid":n,"fieldpath":l,"targetfieldvalue":a,"targetfieldid":s,"targetfieldpath":o,"fieldView":this},c=i.Event("field:changed");if(t.extend(c,r),this.containerItemEl.trigger(c),"create"===this.options.mode)this.parent.data[this.propertyId]=this.getValue(),this.data=e;else if(this.parent.data[this.propertyId]=e,this.data=e.slice(),this.options&&this.options.isSetType&&this.children.length===this.data.length)for(var d=0;d<this.children.length;d++)this.children[d].data=this.data[d]},"_validateAllFieldsFilled":function(){var e=!0;return this.schema.required&&t.each(this.data,function(t){t||(e=!1)}),e},"getFieldType":function(){return"array"},"updateShowMoreIndexes":function(e){var n=this,l=i(e[0]).find(">.cs-array.alpaca-container-item");l.length&&t.each(l,function(e,t){n.options.rows_to_display&&t<n.options.rows_to_display?(n.$(e).hasClass("set-row-show")&&n.$(e).removeClass("set-row-show"),n.$(e).hasClass("set-row-hidden")&&n.$(e).removeClass("set-row-hidden")):(n.$(e).removeClass("set-row-show"),n.$(e).addClass("set-row-hidden set-row-show"))})}}),s.registerFieldClass("array",s.Fields.CsuiArrayField,"bootstrap-csui"),s.registerFieldClass("array",s.Fields.CsuiArrayField,"bootstrap-edit-horizontal"),i.alpaca.Fields.CsuiArrayField}),csui.define("csui/controls/form/fields/alpaca/alpcsuiobjectfield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/jsonpath","csui/lib/alpaca/js/alpaca.lite","i18n!csui/controls/form/impl/nls/lang","csui/utils/base","i18n"],function(e,t,i,n,l,a,s,o){return l.Fields.CsuiObjectField=l.Fields.ObjectField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"postRender":function(e){if(this.base(e),this.options&&this.options.descriptionId){this.container.find(".cs-field-write-inner button:not(:disabled), .cs-field-write-inner input, .cs-field-write-inner textarea").attr("aria-describedby",this.options.descriptionId)}this.field.on("field:changed",t.bind(this._onFieldChanged,this))},"_onFieldChanged":function(e){if(this.containerItemEl){var n=this.containerItemEl.parent();e.stopPropagation();var l=e.fieldpath.split("/").pop();this.data&&(this.data[l]=e.fieldvalue);var a={"fieldvalue":this.data,"fieldid":this.name,"fieldpath":this.path,"targetfieldvalue":void 0!==e.targetfieldvalue?e.targetfieldvalue:e.fieldvalue,"targetfieldid":e.targetfieldid?e.targetfieldid:e.fieldid,"targetfieldpath":e.targetfieldpath?e.targetfieldpath:e.fieldpath,"fieldView":e.targetfieldview?e.targetfieldview:e.fieldView},s=i.Event("field:changed");t.extend(s,a),n.trigger(s)}},"bindData":function(){},"getFieldType":function(){return"object"},"showColout":function(e){if(!i(e.target).data("binf.popover")){var n=e.target.getAttribute("data-csui-name"),l=i(e.target).closest(".cs-array.alpaca-container-item").attr("data-alpaca-container-item-index"),a=e.data.data[n]?n:n.substr(0,n.lastIndexOf("_")),o=i.extend(!0,[],e.data.data[a][l]),r=i.extend(!0,[],e.data.options.fields[a].fields.item),c=i.extend(!0,[],e.data.schema.properties[a].items);e.target.setAttribute("data-csui-row-index",l),t.each(r.fields,function(e){e.readonly||(e.readonly=!0),e.isMultiFieldItem&&delete e.isMultiFieldItem}),t.each(c.properties,function(e){e.readonly||(e.readonly=!0)});var d={"targetEl":i(e.target),"coloutContainer":i(e.target).parents(".cs-form-set-container"),"formdata":o,"formoptions":{"fields":r.fields},"formschema":{"properties":c.properties}},u=i.Event("show:colout");return t.extend(u,d),e.data.domEl.trigger(u),!1}var p=i(e.target).parents(".cs-form-set-container"),h=p.closest(".ps-container").length>0?p.closest(".ps-container"):p.closest(".csui-normal-scrolling");e.preventDefault(),i(e.target).binf_popover("destroy"),s.isTouchBrowser()&&h.css({"-webkit-overflow-scrolling":"touch"})},"keyDown":function(e){var t=e.data;13===e.keyCode&&(t.showColout(e),e.stopPropagation()),9===e.keyCode&&(e.preventDefault(),i(e.target).binf_popover("destroy"))},"restructureAllSetContainer":function(e){var t=e.data.self,i=t.field.find(".csui-form-set-array-wrapper.cs-form-set").length>0||t.field.hasClass("csui-form-set-array-wrapper cs-form-set");if(t.eventType=e.type,i){var n;t.field.hasClass("cs-form-set-container")?n=t.field:t.field.find(".cs-form-set-container:not(.csui-multivalue-block )").length>0&&(n=t.field.find(".cs-form-set-container:not(.csui-multivalue-block )")),n&&1===n.length?t.restructureSetContainer(n,t):n&&n.length>1&&n.each(function(e,i){t.restructureSetContainer(i,t)})}},"restructureSetContainer":function(e,n,l){function r(e){H||(S=L?i(e).find(".csui-lockedcols").width():i(e).find(".csui-lockedcols:first").width()),S>0?(i(e).parents(".csui-perfect-scrolling").length>0?c():i(e).addClass("csui-native-scrollbar"),H&&clearInterval(H)):S=L?i(e).find(".csui-lockedcols").width():i(e).find(".csui-lockedcols:first").width()}function c(){S>0&&R&&R.find(".csui-set-scroll-container-parent").each(function(e,t){if(t=t instanceof i?t:i(t),"0px"===t.css(M)){t.css(M,"block"===t.parent().find(".csui-show-colout").css("display")?S:S-j);var n,l=i(t.parent(".cs-form-set-container").find(".csui-scrollablecols")[0]).children();T=0;for(var a=0;a<l.length;a++)n=i(i(t.parent(".cs-form-set-container").find(".csui-scrollablecols")[0]).children()[a]).width(),T+=n;t.find(".csui-scrollable-content").css("width",T),t.find(".csui-set-scroll-container-child").hasClass("ps-container")||(t.find(".csui-set-scroll-container-child").perfectScrollbar({"suppressScrollY":!0}),t.find(".csui-set-scroll-container-child").perfectScrollbar("update")),t.closest(".cs-form-set-container").find(".csui-scrollablecols").prop("scrollLeft",t.find(".ps-container").scrollLeft()),t.find(".csui-set-scroll-container-child").on("scroll",function(){i(this).parents(".cs-form-set-container").children().find(".csui-scrollablecols").prop("scrollLeft",i(this).scrollLeft());var e=i(this).parents(".cs-form-set-container").find(".ps-container.ps-active-x"),t=i.Event("set:scrolled");e.trigger(t)})}})}function d(){i(".csui-colout-icon").each(function(){i(this).data("binf.popover")&&i(this).binf_popover("destroy")})}function u(e,i){t.each(e,function(e,t){h||(t===i?h=e:e instanceof Object&&(e.fields&&e.fields.item&&e.fields.item.fields?u(e.fields.item.fields,i):u(e,i)))})}function p(t,n){(t?n.parent().parent():n.parent()).find(".csui-show-colout").remove(),n.closest(".cs-form-set-container").find(".binf-popover").remove(),i(this).parent().parent(".alpaca-field-array").removeClass("csui-set-locked-container"),i(this).parents(".alpaca-field-array").removeClass("csui-container-lockedcols"),i(this).find(".csui-lockedcols").length>0&&(i(e).find(".csui-set-scroll-container-parent").remove(),i(this).find(".csui-lockedcols").children().unwrap(),i(this).find(".csui-scrollablecols").children().unwrap(),i(this).find(".csui-shadowright-container").remove(),i(this).find(".csui-shadowleft-container").remove())}var h,f=!1;i(e).find(".alpaca-container-item-last .csui-scrollablecols").perfectScrollbar("update");var m=0,g=i(e).closest(".binf-tab-content .cs-form").length>0?i(e).closest(".binf-tab-content .cs-form"):void 0!==i(e).closest(".cs-form.cs-form-update")&&i(e).closest(".cs-form.cs-form-update").length>0?i(e).closest(".cs-form.cs-form-update"):i(e).closest(".cs-form.cs-form-create");if(void 0!==g&&g.length>0){var v=g.parent();if(void 0!==v&&v.length>0){var b=v.css("padding-right"),y=parseInt(void 0!==b?b:0),w=v.css("padding-left"),x=parseInt(void 0!==w?w:0);m=y+x+30}}var C=i("<div/>",{"class":"csui-shadowright-container"}),k=i("<div/>",{"class":"csui-shadowleft-container"}),F=i(e).attr("data-alpaca-container-item-name");u(n.options.fields,F);var E=h&&h.rows_to_display,I=h&&h.showExpanded,V=!1;if(i(e).children(":not('.binf-popover'):not('.csui-set-scroll-container-parent')").each(function(s,r){i(this).find(".csui-current-focused").trigger("focus");var c,d=[],u=[],h=i(r).find(".alpaca-container-item:not(.cs-form-multi-action-container)"),g=h.filter(function(){if(i(this.children).hasClass("binf-hidden"))return!0}),v=i(r).closest(".cs-form-set>.alpaca-container-item").attr("data-alpaca-container-item-name"),b=i(r).find(".cs-field-read").hasClass("binf-hidden"),y=b?" binf-hidden":"",w=!1,x=!1,F=i("<div/>",{"class":"csui-show-colout"+y}),M=i("<div/>",{"class":"csui-icon-container"}),_=i("<div/>",{"class":"csui-icon-container"}),O=i("<span/>",{"tabindex":0,"data-csui-name":v,"data-csui-row-index":s,"data-toggle":"popover","role":"link","title":a.titleColoutButton,"aria-label":a.titleColoutButton,"class":"csui-button-icon icon-toolbar-more csui-colout-icon csui-show-colout-"+v+"_"+s});V=b;var T=0,S=h.length,A=0===i(r).width()?i(r).closest(".cs-metadata-properties").length>0?i(r).closest(".cs-metadata-properties").width()<=100?i(r).closest(".cs-metadata-properties").parents(".cs-dialog").width():i(r).closest(".cs-metadata-properties").width():i(r).closest(".form-metadata").width():i(r).width()<=100?i(r).parents(".metadata-inner-wrapper").length>0?i(r).parents(".metadata-inner-wrapper").width():i(r).parents(".cs-dialog").width():i(r).width();S&&S<3&&i(r).closest(".alpaca-field-array").addClass("cs-single-field"),S&&S===i(r).find(".csui-field-checkbox").length&&i(r).closest(".alpaca-field-array").addClass("cs-adjust-Checkbox-width");for(var P=0;P<h.length;P++){T+=parseInt(i(i(r).find(".alpaca-container-item")[P]).css("min-width"))}if(T<A/2&&!i(r).closest(".alpaca-field-array").hasClass("cs-adjust-width")&&i(r).closest(".alpaca-field-array").addClass("cs-adjust-width"),n.uniqueId=v,h&&h.length>0){if(i(r).closest(".cs-formview-wrapper").length){c=Math.floor(i(r).closest(".cs-formview-wrapper").width()-m+5)}else c=i(r).closest(".alpaca-container .cs-form-set").length?Math.floor(i(r).parents(".alpaca-container-item").width()):Math.floor((i(r).closest(".cs-metadata-properties").length>0?i(r).closest(".cs-metadata-properties").width()<=100?i(r).closest(".cs-metadata-properties").parents(".cs-dialog").width():i(r).closest(".cs-metadata-properties").width():i(r).closest(".form-metadata").width())-m);if(c<T&&(w=!0),g.length>0&&(x=!0),!b&&E&&s>E-1&&(i(r).addClass("set-row-hidden"),I&&i(r).addClass("set-row-show")),!w)return void p.call(this,b,h);if(x&&p.call(this,b,h),0===h.parent().find(".csui-show-colout").length&&h.length>=2){0===s?(i(F).append(M),i(M).append(O)):(i(F).append(_),i(_).append(O)),f=!0,b&&F.addClass("binf-hidden"),0===h.parent(".csui-lockedcols").length&&h.parent().prepend(F),i(r).find(".csui-show-colout-"+v+"_"+s).off("click keydown").on({"click":t.bind(n.showColout,n),"keydown":t.bind(n.keyDown,n)},n);var D=h.parent().children(),L=h,R=t.findIndex(L,function(e){return!i(e.children).hasClass("binf-hidden")});if(d=b?L.splice(0,R+1):D.splice(0,R+2),u=b?L:D,0===h.parent(".csui-lockedcols").length){var j=i("<div/>",{"id":t.uniqueId("lockedcols"),"class":"csui-lockedcols csui-colout-visible"});0===i(d).parent(".csui-lockedcols").length&&i(d).wrapAll(j),i(this).parent().parent(".alpaca-field-array").addClass("csui-set-locked-container");var B=i("<div/>",{"id":t.uniqueId("scrollablecols"),"class":"csui-scrollablecols csui-scrollable-"+v});0===u.parent(".csui-scrollablecols").length&&i(u).wrapAll(B),i(this).parents(".alpaca-field-array").addClass("csui-container-lockedcols"),s>0&&(o&&o.settings.rtl||(i(e).find(".csui-scrollablecols").scrollLeft(0),i(e).find(".csui-set-scroll-container-child").scrollLeft(0))),b&&(i(e).find(".csui-scrollablecols").addClass("csui-scrollable-writemode"),i(e).find(".csui-lockedcols").addClass("csui-lockedWriteMode"),i(this).parents(".cs-form-set-container").children().find(".csui-scrollablecols").prop("scrollLeft",0))}var H;H=b?d[0].classList[0]:d[1].classList[0],i(e).find(".csui-lockedcols").addClass(H+"-lockedcolumn")}else h.parent().find(".csui-show-colout.binf-hidden").length>0&&(f=!0)}if(o&&o.settings.rtl){var N=i(e).find(".csui-set-scroll-container-child");N.scrollLeft(N.scrollLeft()-1),N.scrollLeft(N.scrollLeft()+1)}i(e).find(".csui-set-scroll-container-child").perfectScrollbar("update"),i(e).on({"mouseenter":function(){i(this).hasClass("csui-hoveredScrollable")||(i(this).find(".csui-set-scroll-container-child").perfectScrollbar("update"),i(this).addClass("csui-hoveredScrollable"))},"mouseleave":function(){i(this).hasClass("csui-hoveredScrollable")&&i(this).removeClass("csui-hoveredScrollable")}}),s===l&&0===i(i(e).find(".csui-lockedcols")[l]).find(".csui-shadowleft-container").length&&i(i(e).find(".csui-lockedcols")[l]).append(k),s===l&&0===i(i(e).find(".csui-scrollablecols")[l]).closest(".cs-array").find(".csui-shadowright-container").length&&i(i(e).find(".csui-scrollablecols")[l]).closest(".cs-array").append(C)},n,i),f){if(s.isTouchBrowser()){i(e).addClass("is-touch");i(e).find(".alpaca-container-item .csui-scrollable-"+n.uniqueId);i(e).find(".csui-scrollable-"+n.uniqueId).scroll(function(){i(".csui-colout-formitems").is(":visible")&&d(),i(this).parents(".cs-form-set-container").children().find(".csui-scrollablecols").prop("scrollLeft",i(this).scrollLeft()),i(this).parents(".cs-form-set-container").children().find(".csui-scrollablecols").hasClass("csui-dropdown-open")&&i(this).parents(".cs-form-set-container").children().find(".csui-scrollablecols").removeClass("csui-dropdown-open")})}i(e).children(":not('.binf-popover')").each(function(t,n){i(this).find(".csui-current-focused").trigger("focus");var l=i(n).closest(".cs-form-set>.alpaca-container-item").attr("data-alpaca-container-item-name");i(e).find(".csui-scrollable-"+l).on("scroll",function(){i(".csui-colout-formitems").is(":visible")&&d(),o&&o.settings.rtl||(i(this).parents(".cs-form-set-container").children().find(".csui-scrollablecols").prop("scrollLeft",i(this).scrollLeft()),i(this).parents(".cs-form-set-container").find(".csui-set-scroll-container-child").prop("scrollLeft",i(this).scrollLeft()))})});var M="rtl"===n.domEl.css("direction")?"padding-right":"padding-left",_=i(e).find(".csui-scrollablecols").closest(".cs-array").find(".csui-shadowright-container").length,O=0!==i(e).find(".csui-set-scroll-container-parent").length;if(0===_)if(0===i(e).find(".csui-scrollablecols").closest(".cs-array").find(".csui-shadowright-container").length&&i(e).find(".csui-scrollablecols").closest(".cs-array").append(C),0===i(e).find(".csui-lockedcols").find(".csui-shadowleft-container").length&&i(e).find(".csui-lockedcols").append(k),O)i(e).find(".csui-set-scroll-container-child").perfectScrollbar({"suppressScrollY":!0}),i(e).find(".csui-set-scroll-container-child").perfectScrollbar("update");else{var T,S,A=i("<div/>",{"class":"csui-set-scroll-container-parent"}),P=i("<div/>",{"class":"csui-set-scroll-container-child"}),D=i("<div/>",{"class":"csui-scrollable-content .csui-scrollable-"+n.uniqueId}),L="update"===this.connector.config.formView.mode,R=i(e).closest(".binf-tab-content .cs-form").length>0?i(e).closest(".binf-tab-content .cs-form"):void 0!==i(e).closest(".cs-form.cs-form-update")&&i(e).closest(".cs-form.cs-form-update").length>0?i(e).closest(".cs-form.cs-form-update"):i(e).closest(".cs-form.cs-form-create"),j=parseInt(i(e).find(".csui-colout-icon:first").parent().parent().css("width").match(/\d/g).join(""));i(P).append(D),i(A).append(P),i(e).append(A),i(e).find(".csui-scrollablecols").prop("scrollLeft",0),i(e).find(".csui-set-scroll-container-child").prop("scrollLeft",0);var B=this;if(B.setEl=e,"resize"===n.eventType)r(e);else var H=setInterval(function(){r(e)},100);i(e).find(".csui-set-scroll-container-child").perfectScrollbar("update")}}else i(e).find(".csui-set-scroll-container-child").hasClass("ps-container")&&i(e).find(".csui-set-scroll-container-child").perfectScrollbar("update");var N=i(e).closest(".cs-form-set.cs-form-set-container").find(">.cs-array.alpaca-container-item");if("create"!==t.find(n.options.fields,function(e,t){return""!==e.mode}).mode&&E&&E>0&&N.length>E&&0===i(e).closest(".cs-form-set.cs-form-set-container").parent().find(".csui-show-more").length){var q,W,$=i("<div/>",{"class":"csui-show-more","aria-label":a.showMoreAria,"tabindex":0,"id":n.uniqueId});I?(i(e).closest(".cs-form-set.cs-form-set-container").addClass("set-row-show"),q=i("<label/>",{"class":"csui-set-show-more-label"}).text(a.showLess),W=i("<button/>",{"class":"csui-set-show-more-icon icon-expandArrowUp","aria-label":a.showLessAria})):(i(e).closest(".cs-form-set.cs-form-set-container").removeClass("set-row-show"),q=i("<label/>",{"class":"csui-set-show-more-label","title":a.showMore}).text(a.showMore),W=i("<button/>",{"class":"csui-set-show-more-icon icon-expandArrowDown","aria-label":a.showMoreAria,"title":a.showMore})),i(q).appendTo($),i(W).appendTo($),i(e).closest(".cs-form-set.cs-form-set-container").parent().append($),I&&i(e).closest(".cs-form-set.cs-form-set-container").addClass("set-row-show"),i($).off("click").on("click",n,n.showMoreOrLessColumns),i($).off("keydown").on("keydown",n,function(e){13!==e.keyCode&&32!==e.keyCode||n.showMoreOrLessColumns(e)})}},"showMoreOrLessColumns":function(e){if(e.data&&!e.data.checkForFieldErrors(e)){var t=i(e.target).parents(".alpaca-field-array").find(".cs-form-set.cs-form-set-container"),n=i(e.target).parent();i(t).find(".set-row-show").length?(i(t).find(".set-row-hidden").removeClass("set-row-show"),i(n).find(".csui-set-show-more-icon").removeClass("icon-expandArrowUp").addClass("icon-expandArrowDown"),i(n).find(".csui-set-show-more-icon").attr({"aria-label":a.showMoreAria,"title":a.showMore}),i(n).find(".csui-set-show-more-label").html(a.showMore),i(n).find(".csui-set-show-more-label").attr({"aria-label":a.showMoreAria,"title":a.showMore})):(i(t).find(".set-row-hidden").addClass("set-row-show"),i(n).find(".csui-set-show-more-icon").removeClass("icon-expandArrowDown").addClass("icon-expandArrowUp"),i(n).find(".csui-set-show-more-icon").attr({"aria-label":a.showLessAria,"title":a.showLess}),i(n).find(".csui-set-show-more-label").html(a.showLess),i(n).find(".csui-set-show-more-label").attr({"aria-label":a.showLessAria,"title":a.showLess}))}e.preventDefault(),e.stopPropagation()},"checkForFieldErrors":function(e){var t=i(".cs-form .cs-formfield-invalid"),n=!1;return t.length>0&&(t.find(":input")[0].focus(),n=!0),n},"applyCreatedItems":function(e,t){var n=this.domEl.closest(".cs-metadata, .cs-formview-wrapper"),l=this,a={"data":{"model":e,"elements":e.items,"self":this}};this.base(e,t),this.restructureAllSetContainer(a),i(window).on("resize",{"model":e,"elements":e.items,"self":this},this.restructureAllSetContainer),n.on("toggled:navigationbar refresh:setcontainer",function(){l.restructureAllSetContainer(a)})},"getValue":function(){if(0===this.children.length&&!this.isRequired())return{};for(var e={},t=0;t<this.children.length;t++){var i=this.children[t].propertyId,n=this.children[t].getValue();if(void 0!==n&&this.determineAllDependenciesValid(i)){var a=void 0;a="boolean"==typeof n?!!n:(l.isArray(n)||l.isObject(n)||l.isNumber(n),n),void 0!==a&&(e[i]=a)}}return e}}),l.registerFieldClass("object",l.Fields.CsuiObjectField,"bootstrap-csui"),l.registerFieldClass("object",l.Fields.CsuiObjectField,"bootstrap-edit-horizontal"),i.alpaca.Fields.CsuiObjectField}),csui.define("csui/controls/form/impl/fields/arraybuttonsfield/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/form/impl/fields/arraybuttonsfield/nls/root/lang",{"title":"Remove Row"}),csui.define("hbs!csui/controls/form/impl/fields/arraybuttonsfield/arraybuttonsfield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button title="'+e.escapeExpression((a=null!=(a=s(i,"title")||(null!=t?s(t,"title"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":1,"column":15},"end":{"line":1,"column":24}}}):a))+'" class="binf-btn binf-btn-default binf-btn-sm removebtn binf-hidden">\r\n  <i class="csui-icon circle_delete"></i>\r\n</button>\r\n\r\n'}});return i.registerPartial("csui_controls_form_impl_fields_arraybuttonsfield_arraybuttonsfield",n),n}),csui.define("css!csui/controls/form/impl/fields/arraybuttonsfield/arraybuttonsfield",[],function(){}),csui.define("csui/controls/form/fields/arraybuttonsfield.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","i18n!csui/controls/form/impl/fields/arraybuttonsfield/nls/lang","hbs!csui/controls/form/impl/fields/arraybuttonsfield/arraybuttonsfield","css!csui/controls/form/impl/fields/arraybuttonsfield/arraybuttonsfield"],function(e,t,i,n,l,a){"use strict";return n.ItemView.extend({"constructor":function(e){n.ItemView.apply(this,arguments)},"className":"cs-formfield cs-arraybuttonsfield","template":a,"templateHelpers":function(){return{"title":l.title}},"ui":{"addButton":".addbtn","removeButton":".removebtn"},"events":{"click @ui.addButton":"onAddButtonClicked","click @ui.removeButton":"onRemoveButtonClicked"},"onAddButtonClicked":function(){},"onRemoveButtonClicked":function(){this.$el.closest(".cs-pull-left").parent().find(".cs-pull-right .circle_delete").parent().trigger("click")}})}),csui.define("csui/controls/form/fields/alpaca/alpcsuiarraybuttonsfield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/controls/form/fields/arraybuttonsfield.view","csui/utils/base"],function(e,t,i,n,l,a,s,o){return a.Fields.CsuiArrayButtonsField=a.Fields.TextField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"getFieldType":function(){return"otcs_array_buttons"},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType())},"getValue":function(){return null},"showField":function(){this.fieldView=new s;var e=i("<div>").addClass("alpaca-control cs-alp-array-buttons");this.getControlEl().replaceWith(e),this.region=new l.Region({"el":e}),this.region.show(this.fieldView)},"setValueAndValidate":function(e,t){this.setValue(e);var i=!0;return t&&(i=this.validate(),this.refreshValidationState(!1)),i},"focus":function(){this.fieldView.setFocus()},"destroy":function(){this.base(),this.region&&this.region.destroy()}}),a.registerFieldClass("otcs_array_buttons",a.Fields.CsuiArrayButtonsField,"bootstrap-csui"),i.alpaca.Fields.CsuiArrayButtonsField}),csui.define("csui/controls/form/impl/fields/reservebuttonfield/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/form/impl/fields/reservebuttonfield/nls/root/lang",{"reserved":"Reserved","unreserved":"Unreserved","unreserve":"Unreserve","reservedByUnreserve":"Reserved by {0}, Press to unreserve","reservedBy":"Reserved by {0}","pressToUnreserve":"Press to unreserve"}),csui.define("hbs!csui/controls/form/impl/fields/reservebuttonfield/reservebuttonfield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="cs-field-read">\r\n    <div class="cs-field-read-inner">\r\n      <div class="btn-container">\r\n        <span class="csui-btn-reserve-status '+e.escapeExpression((s=null!=(s=o(i,"noActionCSS")||(null!=t?o(t,"noActionCSS"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"noActionCSS","hash":{},"loc":{"start":{"line":5,"column":45},"end":{"line":5,"column":60}}}):s))+'">\r\n          <span tabindex="'+e.escapeExpression((s=null!=(s=o(i,"tabIndex")||(null!=t?o(t,"tabIndex"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"tabIndex","hash":{},"loc":{"start":{"line":6,"column":26},"end":{"line":6,"column":38}}}):s))+'" data-cstabindex="'+e.escapeExpression((s=null!=(s=o(i,"tabIndex")||(null!=t?o(t,"tabIndex"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"tabIndex","hash":{},"loc":{"start":{"line":6,"column":57},"end":{"line":6,"column":69}}}):s))+'"\r\n                class="csui-btn-reserve-status-action csui-icon '+e.escapeExpression((s=null!=(s=o(i,"icon")||(null!=t?o(t,"icon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":7,"column":64},"end":{"line":7,"column":72}}}):s))+'" role="button"\r\n                '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"canUnreserve"):t,{"name":"if","hash":{},"fn":e.program(2,l,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":16},"end":{"line":8,"column":62}}}))?a:"")+'\r\n                aria-label="'+e.escapeExpression((s=null!=(s=o(i,"pressToUnreserve")||(null!=t?o(t,"pressToUnreserve"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"pressToUnreserve","hash":{},"loc":{"start":{"line":9,"column":28},"end":{"line":9,"column":48}}}):s))+'"\r\n                '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"cannotUnreserve"):t,{"name":"if","hash":{},"fn":e.program(4,l,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":16},"end":{"line":10,"column":56}}}))?a:"")+"\r\n                "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnLabel"):t,{"name":"if","hash":{},"fn":e.program(6,l,0),"inverse":e.noop,"loc":{"start":{"line":11,"column":16},"end":{"line":12,"column":17}}}))?a:"")+'></span>\r\n          <span\r\n              class="csui-reserveby-status cs-formfield cs-userfield cs-formfield-readonly"></span>\r\n           <input id="'+e.escapeExpression((s=null!=(s=o(i,"reserveid")||(null!=t?o(t,"reserveid"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"reserveid","hash":{},"loc":{"start":{"line":15,"column":22},"end":{"line":15,"column":35}}}):s))+'" class="binf-hidden" value="reserved" type="button">\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n'},"2":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'title="'+e.escapeExpression((a=null!=(a=s(i,"tooltip")||(null!=t?s(t,"tooltip"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"tooltip","hash":{},"loc":{"start":{"line":8,"column":43},"end":{"line":8,"column":54}}}):a))+'"'},"4":function(e,t,i,n,l){return" disabled "},"6":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-labelledby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnLabel")||(null!=t?s(t,"idBtnLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnLabel","hash":{},"loc":{"start":{"line":11,"column":51},"end":{"line":11,"column":65}}}):a))+'"\r\n          '},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"reserved"):t,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":20,"column":7}}}))?a:""}});return i.registerPartial("csui_controls_form_impl_fields_reservebuttonfield_reservebuttonfield",n),n}),csui.define("css!csui/controls/form/impl/fields/reservebuttonfield/reservebuttonfield",[],function(){}),csui.define("csui/controls/form/fields/reservebuttonfield.view",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/models/nodes","csui/utils/commands","csui/utils/commands/unreserve","csui/utils/commandhelper","csui/utils/contexts/factories/user","csui/utils/contexts/factories/member","i18n!csui/controls/form/impl/fields/reservebuttonfield/nls/lang","hbs!csui/controls/form/impl/fields/reservebuttonfield/reservebuttonfield","css!csui/controls/form/impl/fields/reservebuttonfield/reservebuttonfield"],function(e,t,i,n,l,a,s,o,r,c,d,u,p){"use strict";return l.ItemView.extend({"constructor":function(e){if(e.data){this.connector=e.data?e.data.connector:void 0,this.unreserveCommand=new o,this.commandStatus={"nodes":new a([e.data.node])},
this.canUnreserve=this.unreserveCommand.enabled(this.commandStatus);var t=e.data.node;t&&this.listenTo(t,"sync",this._checkEnabledAction)}if(l.ItemView.apply(this,arguments),this.options.data){if(this.reserved=this.options.data.node.get("reserved"),this.reservedSharedCollaboration=this.options.data.node.get("reserved_shared_collaboration"),this.options.data.options.context){var i=this.options.data.options.context.getModel(c);this.userId=i.get("id")}var n=this.options.data.attributes.data.reserved_user_id;this.reservedUser=this.options.connector.config.context.getModel(d,{"attributes":{"id":n},"options":{"id":n,"connector":this.options.connector},"temporary":!0}),this.reservedUser.ensureFetched(),this.reservedUser.on("change",this.render,this)}else this.reserved=!1,this.canUnreserve=!1,this.reservedSharedCollaboration=!1},"_checkEnabledAction":function(){this.canUnreserve=this.unreserveCommand.enabled(this.commandStatus),this.render()},"ui":{"btnReserveAction":".csui-btn-reserve-status-action"},"events":{"mousedown @ui.btnReserveAction":"onMouseDown","mouseup @ui.btnReserveAction":"onMouseUp","click @ui.btnReserveAction":"reserveAction"},"onMouseDown":function(e){this.canUnreserve&&(this.options.data.attributes.data.reserved_user_id===this.userId?i(this.$el.find(".csui-icon")).addClass("icon-reserved_self_md"):i(this.$el.find(".csui-icon")).addClass("icon-reserved_other_md"))},"onMouseUp":function(e){this.canUnreserve&&(this.options.data.attributes.data.reserved_user_id===this.userId?i(this.$el.find(".csui-icon")).removeClass("icon-reserved_self_md"):i(this.$el.find(".csui-icon")).removeClass("icon-reserved_other_md"))},"reserveAction":function(e){this.canUnreserve&&(this.options.data.beforeAction&&t.isFunction(this.options.data.beforeAction)&&this.options.data.beforeAction(),this.reserved?this.unreserve():this.reserve(),this.canUnreserve&&this.options.data.afterAction&&t.isFunction(this.options.data.afterAction)&&this.options.data.afterAction())},"onChange":function(){this.options.data.actionOnce&&(this.$el.off("click",".csui-btn-reserve-status"),this.$el.off("mouseover",".csui-btn-reserve-status"))},"reserve":function(){},"unreserve":function(){var e;this.canUnreserve&&(e=this.unreserveCommand.execute(this.commandStatus),r.handleExecutionResults(e,{"command":this.unreserveCommand,"suppressSuccessMessage":this.commandStatus.suppressSuccessMessage,"suppressFailMessage":this.commandStatus.suppressFailMessage}))},"template":p,"templateHelpers":function(){var e,i="",n="",l=0;this.reservedSharedCollaboration?e=this.options.data.attributes.data.reserved_user_id===this.userId?"icon-shared_collaborate_self":"icon-shared_collaborate_other":this.canUnreserve?e=this.options.data.attributes.data.reserved_user_id===this.userId?"icon-reserved_metadata_self":"icon-reserved_metadata_other":this.options.data&&this.options.data.attributes.data.reserved_user_id!==this.userId?e="icon-reserved_metadata_other":this.options.data&&this.options.data.attributes.data.reserved_user_id===this.userId&&(e="icon-reserved_metadata_self"),this.canUnreserve&&this.reserved?(i=u.unreserve,this.reservedUser&&(i=t.str.sformat(u.reservedByUnreserve,this.reservedUser.get("display_name")))):l=-1,this.canUnreserve||(n="csui-btn-reserve-no-action");var a=this.canUnreserve&&this.reserved;return{"noActionCSS":n,"icon":e,"tooltip":i,"reserved":this.reserved,"reserveid":this.id,"reservedSharedCollaboration":this.reservedSharedCollaboration,"idBtnLabel":this.options.labelId,"tabIndex":l,"canUnreserve":a,"cannotUnreserve":!a,"pressToUnreserve":a?u.pressToUnreserve:this.getReserveBy()}},"getReserveBy":function(){var e="";return this.reservedUser&&(e=t.str.sformat(u.reservedBy,this.reservedUser.get("display_name"))),e},"onRender":function(){if(this.reserved){var e=this,n=this.$el.find(".csui-reserveby-status");csui.require(["esoc/controls/userwidget/userwidget.view"],function(a){var s={"userid":e.options.data.attributes.data.reserved_user_id,"context":e.options.connector.config.context,"baseElement":n,"showUserProfileLink":!0,"showMiniProfile":!0,"loggedUserId":e.userId,"connector":e.connector,"prettyScrolling":!0,"source":"extendedInfoText","parentView":e};e.region=new l.Region({"el":n});var o=function(){e.reservedUser&&n.find("a.esoc-user-container").attr("aria-label",t.str.sformat(u.reservedBy,e.reservedUser.get("display_name")))};e.listenToOnce(e,"view:shown",function(){o()});var r=new a(s);r.listenToOnce(r,"attach",function(){var t=i.Event("tab:content:field:changed");e.$el.trigger(t),o()}),e.region.show(r)})}}})}),csui.define("csui/controls/form/fields/alpaca/alpcsuireservebuttonfield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/controls/form/fields/reservebuttonfield.view","csui/utils/base"],function(e,t,i,n,l,a,s,o){return a.Fields.CsuiReserveButtonField=a.Fields.TextField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"getFieldType":function(){return"otcs_reserve_button"},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType())},"getValue":function(){var e=this,t=this.data;return t=e.ensureProperType(t)},"showField":function(){var e,n=(this.id,i(this.field[0]).find("label"));n&&1==n.length&&(e=n.attr("for")+"Label",n.attr("id",e)),this.options.labelId=e,this.fieldView=new s(t.extend(this)),this.fieldView.$el.attr("id",t.uniqueId(this.id));var a=i("<div>").addClass("alpaca-control");this.containerItemEl.find(".alpaca-control").replaceWith(a),this.region=new l.Region({"el":a}),this.region.show(this.fieldView)},"setValueAndValidate":function(e,t){this.setValue(e);var i=!0;return t&&(i=this.validate(),this.refreshValidationState(!1)),i},"focus":function(){this.fieldView.setFocus()},"destroy":function(){this.base(),this.region&&this.region.destroy()}}),a.registerFieldClass("otcs_reserve_button",a.Fields.CsuiReserveButtonField,"bootstrap-csui"),i.alpaca.Fields.CsuiReserveButtonField}),csui.define("hbs!csui/controls/form/impl/fields/tklfield/tklfield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-labelledby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnLabel")||(null!=t?s(t,"idBtnLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnLabel","hash":{},"loc":{"start":{"line":7,"column":50},"end":{"line":7,"column":64}}}):a))+'"'},"3":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-describedby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnDescription")||(null!=t?s(t,"idBtnDescription"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnDescription","hash":{},"loc":{"start":{"line":8,"column":52},"end":{"line":8,"column":72}}}):a))+'" '},"5":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((a=null!=(a=s(i,"multiFieldLabel")||(null!=t?s(t,"multiFieldLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"multiFieldLabel","hash":{},"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":65}}}):a))+'" '},"7":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-required="'+e.escapeExpression((a=null!=(a=s(i,"ariaRequired")||(null!=t?s(t,"ariaRequired"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"ariaRequired","hash":{},"loc":{"start":{"line":10,"column":45},"end":{"line":10,"column":61}}}):a))+'"'},"9":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <li id="'+e.escapeExpression((a=null!=(a=s(i,"id")||(null!=t?s(t,"id"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":18,"column":22},"end":{"line":18,"column":28}}}):a))+'" role="option"><a tabindex="-1" title="'+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":18,"column":68},"end":{"line":18,"column":76}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":18,"column":78},"end":{"line":18,"column":86}}}):a))+"</a></li>\r\n"},"11":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="icon-container">\r\n        <div class="csui-icon-edit inline-edit-icon edit-cancel" title="'+e.escapeExpression((a=null!=(a=s(i,"cancel")||(null!=t?s(t,"cancel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":26,"column":72},"end":{"line":26,"column":82}}}):a))+'"></div>\r\n      </div>\r\n'},"13":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"applyFlag"):t,{"name":"if","hash":{},"fn":e.program(14,l,0),"inverse":e.noop,"loc":{"start":{"line":29,"column":6},"end":{"line":34,"column":13}}}))?a:""},"14":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="icon-container">\r\n          <div class="csui-icon apply-all binf-hidden" title="'+e.escapeExpression((a=null!=(a=s(i,"titleApplyAll")||(null!=t?s(t,"titleApplyAll"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"titleApplyAll","hash":{},"loc":{"start":{"line":31,"column":62},"end":{"line":31,"column":79}}}):a))+'" tabindex="0"\r\n               data-cstabindex="0"></div>\r\n        </div>\r\n'},"16":function(e,t,i,n,l){return" disabled "},"18":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeMultiFieldAria")||(null!=t?s(t,"readModeMultiFieldAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeMultiFieldAria","hash":{},"loc":{"start":{"line":45,"column":45},"end":{"line":45,"column":71}}}):a))+'"'},"20":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeAria")||(null!=t?s(t,"readModeAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeAria","hash":{},"loc":{"start":{"line":45,"column":92},"end":{"line":45,"column":108}}}):a))+'"'},"22":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span title="'+e.escapeExpression((a=null!=(a=s(i,"data")||(null!=t?s(t,"data"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"loc":{"start":{"line":47,"column":23},"end":{"line":47,"column":31}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"data")||(null!=t?s(t,"data"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"loc":{"start":{"line":47,"column":33},"end":{"line":47,"column":41}}}):a))+"</span>\r\n"},"24":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="placeholder" title="'+e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"loc":{"start":{"line":49,"column":43},"end":{"line":49,"column":57}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"loc":{"start":{"line":49,"column":59},"end":{"line":49,"column":73}}}):a))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-field-write">\r\n  <div class="cs-field-write-inner">\r\n    <div class="cs-tklfield-select">\r\n      <div class="cs-tkl-search-box combobox" role=\'combobox\' aria-expanded="false"\r\n           aria-haspopup="listbox" aria-owns="'+e.escapeExpression((s=null!=(s=o(i,"id")||(null!=t?o(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":5,"column":46},"end":{"line":5,"column":52}}}):s))+'">\r\n        <input type="text" placeholder="'+e.escapeExpression((s=null!=(s=o(i,"emptyLabel")||(null!=t?o(t,"emptyLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"loc":{"start":{"line":6,"column":40},"end":{"line":6,"column":54}}}):s))+'" value="'+e.escapeExpression((s=null!=(s=o(i,"data")||(null!=t?o(t,"data"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"loc":{"start":{"line":6,"column":63},"end":{"line":6,"column":71}}}):s))+'"\r\n               '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnLabel"):t,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":15},"end":{"line":7,"column":72}}}))?a:"")+"\r\n          "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnDescription"):t,{"name":"if","hash":{},"fn":e.program(3,l,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":10},"end":{"line":8,"column":81}}}))?a:"")+"\r\n          "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(5,l,0),"inverse":e.noop,"loc":{"start":{"line":9,"column":10},"end":{"line":9,"column":74}}}))?a:"")+"\r\n          "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"ariaRequired"):t,{"name":"if","hash":{},"fn":e.program(7,l,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":10},"end":{"line":10,"column":69}}}))?a:"")+' id="'+e.escapeExpression((s=null!=(s=o(i,"id")||(null!=t?o(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":10,"column":74},"end":{"line":10,"column":80}}}):s))+'"\r\n               aria-autocomplete="list" autocomplete="off" aria-controls="'+e.escapeExpression((s=null!=(s=o(i,"id")||(null!=t?o(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":11,"column":74},"end":{"line":11,"column":80}}}):s))+'">\r\n      </div>\r\n      <div class="cs-tkl-options-container">\r\n        <div>\r\n          <ul class="cs-tkl-options" role="listbox" id="'+e.escapeExpression((s=null!=(s=o(i,"id")||(null!=t?o(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":15,"column":56},"end":{"line":15,"column":62}}}):s))+'">\r\n            <li id="'+e.escapeExpression((s=null!=(s=o(i,"noneOptionId")||(null!=t?o(t,"noneOptionId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"noneOptionId","hash":{},"loc":{"start":{"line":16,"column":20},"end":{"line":16,"column":36}}}):s))+'" role="option"><a tabindex="-1" title="'+e.escapeExpression((s=null!=(s=o(i,"emptyLabel")||(null!=t?o(t,"emptyLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"loc":{"start":{"line":16,"column":76},"end":{"line":16,"column":90}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"emptyLabel")||(null!=t?o(t,"emptyLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"loc":{"start":{"line":16,"column":92},"end":{"line":16,"column":106}}}):s))+"</a></li>\r\n"+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=t?o(t,"options"):t,{"name":"each","hash":{},"fn":e.program(9,l,0),"inverse":e.noop,"loc":{"start":{"line":17,"column":12},"end":{"line":19,"column":21}}}))?a:"")+"          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"isNotWriteOnly"):t,{"name":"if","hash":{},"fn":e.program(11,l,0),"inverse":e.program(13,l,0),"loc":{"start":{"line":24,"column":4},"end":{"line":35,"column":11}}}))?a:"")+'  </div>\r\n</div>\r\n\r\n</div>\r\n\r\n<div class="cs-field-read">\r\n  <div class="cs-field-read-inner">\r\n    <div class="btn-container">\r\n      <button '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"schema"):t)?o(a,"readonly"):a,{"name":"if","hash":{},"fn":e.program(16,l,0),"inverse":e.noop,"loc":{"start":{"line":44,"column":14},"end":{"line":44,"column":54}}}))?a:"")+"\r\n          "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(18,l,0),"inverse":e.program(20,l,0),"loc":{"start":{"line":45,"column":10},"end":{"line":45,"column":116}}}))?a:"")+" >\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"hasData"):t,{"name":"if","hash":{},"fn":e.program(22,l,0),"inverse":e.program(24,l,0),"loc":{"start":{"line":46,"column":8},"end":{"line":50,"column":15}}}))?a:"")+'      </button>\r\n    </div>\r\n    <div class="icon-container">\r\n      <div class="csui-icon-edit inline-edit-icon icon-edit" title="'+e.escapeExpression((s=null!=(s=o(i,"edit")||(null!=t?o(t,"edit"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"loc":{"start":{"line":54,"column":68},"end":{"line":54,"column":76}}}):s))+'"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_form_impl_fields_tklfield_tklfield",n),n}),csui.define("csui/controls/form/impl/tkl/cstklfield.editable.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/handlebars","csui/lib/backbone","csui/lib/marionette","csui/controls/form/impl/fields/csformfield.editable.behavior","csui/controls/form/pub.sub","csui/utils/log"],function(e,t,i,n,l,a,s,o,r){"use strict";return s.extend({"constructor":function(e,i){s.prototype.constructor.apply(this,arguments),this.view=i,this.view.getEditableBehavior=t.bind(function(){return this},this),this.isValidTKLState=!0},"updateNonTKLSilently":function(){o.tklHelpers&&o.tklHelpers.viewsInWriteMode.map(function(e){e.isNonTKLField&&(e.setValue(e.getEditValue(),!0,!0),e.render())})},"isRelatedFieldInFocus":function(e){return e=e||document.activeElement,o.tklHelpers&&o.tklHelpers.viewsInWriteMode.some(function(t){return t.ui.writeField[0]===e})},"onFocusOutWrite":function(e){i(e.target).parents(".csui-normal-scrolling").css("overflow","auto"),this.view.resetHelpers(!0);var t=this,n=!1;if(o.tklHelpers)for(var l=0;!n&&l<o.tklHelpers.viewsInWriteMode.length;l++)n=o.tklHelpers.viewsInWriteMode[l].getEditableBehavior().mouseDownCancel||o.tklHelpers.viewsInWriteMode[l].getEditableBehavior().escapePressed;var a=this.isRelatedFieldInFocus(e.relatedTarget);setTimeout(function(){if(!t.view.shouldValidate()||n||t.isRelatedFieldInFocus(e.relatedTarget))return void(i.contains(t.view.ui.tklOptions[0],e.relatedTarget)||t.view.hideDropdown());var l,s=!0,r=!1;if(o.tklHelpers)for(var c,d=0;o.tklHelpers&&d<o.tklHelpers.viewsInWriteMode.length;d++)l=o.tklHelpers.viewsInWriteMode[d],o.tklHelpers.viewsInWriteMode[d].isNonTKLField?o.tklHelpers.viewsInWriteMode[d].getEditableBehavior():o.tklHelpers.viewsInWriteMode[d],c="select"===l.alpacaField.type?l.getEditValue().get("id"):l.getEditValue(),s&&(s=l.alpacaField.setValueAndValidate(c,!0)),r||(r=!!o.tklHelpers&&o.tklHelpers.viewsInWriteMode[d].getEditValue()!==o.tklHelpers.viewsInWriteMode[d].getOldValue());if(t.view.isReadyToSave()||n||a)return void(t.mouseDownCancel=!1);if(s){if("writeonly"===t.view.mode){if(t.view.isCustomView&&t.view.shouldValidate()){l=t.view;var u=l.getEditValue();s=l.alpacaField.setValueAndValidate(u,!0)}0===document.querySelectorAll(".binf-has-error").length&&(i(".metadata-validation-error").hide(),i("div").removeClass("show-validation-error"))}if(r){if("writeonly"===t.view.mode&&o.tklHelpers)for(var p=0;p<o.tklHelpers.viewsInWriteMode.length;p++)o.tklHelpers.viewsInWriteMode[p]._raiseValueChanged(),t.updateNonTKLSilently();else t.view._raiseValueChanged(),t.updateNonTKLSilently();t.view&&t.view.formView&&t.view.formView.trigger("disable:active:item")}if(t.$el.removeClass("cs-formfield-invalid"),"writeonly"!==t.view.mode){if(o.tklHelpers){for(var h=o.tklHelpers.viewsInWriteMode.length-1;o.tklHelpers&&h>=0;h--){var f=o.tklHelpers.viewsInWriteMode[h];f&&(f===t.view,f.getEditableBehavior().isMultiFieldView(f)?"write"===f.getStatesBehavior().state&&(f=f.alpacaField.parent,f.options.submittedData=f.getValue().slice(),f._showItemsInReadMode(),f._hideInlineDeleteIcon(),f._hideInlineAddIcon(),f._showBulkEditAction()):(f.oldVal=f.curVal,f.getStatesBehavior().setStateRead()))}delete o.tklHelpers}document.activeElement===document.body&&t.view.ui.readField.trigger("focus").trigger("focus")}t.view.alpacaField.domEl.find(".cs-formfield-invalid").removeClass("cs-formfield-invalid"),"writeonly"===t.view.mode&&0===document.querySelectorAll(".binf-has-error").length&&(i(".metadata-validation-error").hide(),i("div").removeClass("show-validation-error")),t.view.needRerender&&t.view.render()}else"write"===t.view.getStatesBehavior().state&&(t.isValidTKLState=!1,t.$el.addClass("cs-formfield-invalid"))},0)},"onReadAreaClicked":function(e){var t=this,n=this.view.allowEditOnClickReadArea(e);t.view.alpacaField.parent.cancelClicked=!1,(i(e.target).hasClass("icon-edit")||n)&&(e.stopImmediatePropagation(),e.preventDefault()),setTimeout(function(){return"create"===t.options.mode||0!==document.querySelectorAll(".cs-form .cs-formfield-invalid").length?(document.querySelector(".cs-form .cs-formfield-invalid input, .cs-form .cs-formfield-invalid .cs-field-write button").focus(),!1):!t.view.getStatesBehavior().isReadOnly()&&void((i(e.target).hasClass("icon-edit")||n)&&t.setViewStateWriteAndEnterEditMode())},100)},"trySetValueAndLeaveEditMode":function(e,t){var i=this.areAllFieldsValid();if(i){if(this.isValidTKLState=!0,"writeonly"!==this.view.mode){this.updateNonTKLSilently();for(var n,l=o.tklHelpers.viewsInWriteMode.length-1;o.tklHelpers&&l>=0;l--)(n=o.tklHelpers.viewsInWriteMode[l])&&(n&&n.getEditableBehavior().isMultiFieldView(n)?"write"===n.getStatesBehavior().state&&(n=n.alpacaField.parent,n.options.submittedData=n.getValue().slice(),n._showItemsInReadMode(),n._hideInlineDeleteIcon(),n._hideInlineAddIcon(),n._showBulkEditAction()):(n.oldVal=n.curVal,n.getEditableBehavior().setViewReadOnlyAndLeaveEditMode(e,!1)))}!!t&&this.view.ui.readField.trigger("focus")}else this.isValidTKLState=!1},"onCancelClicked":function(){this.view.resetOldValueAfterCancel(),o.tklHelpers&&0===o.tklHelpers.viewsInWriteMode.length&&delete o.tklHelpers},"onMouseDown":function(){o.tklHelpers&&t.each(o.tklHelpers.viewsInWriteMode,function(e){e.cancelClicked=!1,e.alpacaField.parent.cancelClicked=!1,e.getEditableBehavior().escapePressed=!1,e.getEditableBehavior().mouseDownCancel=!1})},"onKeyDown":function(e){o.tklHelpers&&t.each(o.tklHelpers.viewsInWriteMode,function(e){e.getEditableBehavior().escapePressed=!1,e.getEditableBehavior().tabPressed=!1}),27==e.keyCode?this.view.getStatesBehavior().isStateWrite()&&(e.preventDefault(),e.stopPropagation(),this.escapePressed=!0,this.view.$el.find(".csui-icon-edit.edit-cancel").trigger("click")):113===e.keyCode?this.view.getStatesBehavior().isStateRead()?this.setViewStateWriteAndEnterEditMode():this.view.getStatesBehavior().isStateWrite()&&(this.trySetValueAndLeaveEditMode(!0,!0),this.isValidTKLState&&this.areAllFieldsValid()&&this.view._raiseValueChanged()):9===e.keyCode&&("create"!==this.view.alpacaField.options.mode&&this.view.getStatesBehavior().isStateWrite()&&this.moveTab(e),this.tabPressed=!0,o.tklHelpers&&t.each(o.tklHelpers.viewsInWriteMode,function(e){e.getEditableBehavior().tabPressed=!0}))},"onKeyPress":function(e){if(!this.view.onKeyPress||!this.view.onKeyPress(e))return 13===e.keyCode&&(this.view.getStatesBehavior().isStateRead()&&this.view.allowEditOnEnter()?this.setViewStateWriteAndEnterEditMode():this.view.getStatesBehavior().isStateWrite()&&this.view.allowSaveOnEnter()&&(e.preventDefault(),e.stopPropagation(),this.trySetValueAndLeaveEditMode(!0,!0),this.isValidTKLState&&this.view._raiseValueChanged())),!0},"areAllFieldsValid":function(){var e,t=!0;return o.tklHelpers&&o.tklHelpers.viewsInWriteMode.map(function(i){e="select"===i.alpacaField.type?i.getEditValue().get("id"):i.getEditValue(),t=i.alpacaField.setValueAndValidate(e,!0)&&t}),t}})}),csui.define("csui/controls/form/impl/tkl/tklinfinite.scrolling.behavior",["csui/lib/underscore","csui/lib/jquery","csui/controls/tile/behaviors/infinite.scrolling.behavior","csui/utils/base"],function(e,t,i,n){return i.extend({"constructor":function(e,t){i.prototype.constructor.apply(this,arguments),this.eventsName="scroll."+this.view.cid,void 0!==window.onwheel?this.eventsName+=" wheel.":void 0!==window.onmousewheel&&(this.eventsName+=" mousewheel."),this.eventsName+=this.view.cid},"_bindScrollingEvents":function(){var t=this.options.contentParent;this._contentParent=t?this.view.$(t):this.view.$el,this._contentParent.on(this.eventsName,e.bind(this._checkScrollPosition,this)),n.isTouchBrowser()&&this._contentParent.one("touchstart."+this.view.cid,e.bind(this._checkScrollPosition,this));var i=this.options.content;this._content=i?this.view.$(i):t?this._contentParent.children().first():this.view.$el},"_checkScrollPosition":function(i){if(this.view.fetchMore){var n,l=this.options.fetchMoreItemsThreshold;n=1===this._content.length?this._content.height():e.reduce(this._content,function(e,i){return e+t(i).height()},0);var a=n-this._contentParent.height();(100*this._contentParent.scrollTop()/a>=l||this._contentParent.outerHeight()>n)&&this._checkScrollPositionFetch(i),i.stopPropagation()}},"_checkScrollPositionFetch":function(e){this.view.isPullingValues||this.view.pullValidValues(null,!0)},"_unbindScrollingEvents":function(){this._contentParent&&this._contentParent.off(this.eventsName)}})}),csui.define("hbs!csui/controls/form/impl/fields/tklfield/tkloptions.loading",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){return'<li role="menuitem" class="csui-loading-parent-wrapper binf-disabled">\r\n  <span class="csui-loading-dots-wrapper">\r\n    <span class="csui-loading-dot"></span>\r\n    <span class="csui-loading-dot"></span>\r\n    <span class="csui-loading-dot"></span>\r\n  </span>\r\n</li>'}});return i.registerPartial("csui_controls_form_impl_fields_tklfield_tkloptions.loading",n),n}),csui.define("css!csui/controls/form/impl/fields/tklfield/tklfield",[],function(){}),csui.define("csui/controls/form/fields/tklfield.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/form/impl/fields/csformfield.view","hbs!csui/controls/form/impl/fields/tklfield/tklfield","csui/controls/form/impl/array/csformarrayfield.editable.behavior","csui/controls/form/impl/array/csformarrayfield.states.behavior","csui/controls/form/impl/tkl/cstklfield.editable.behavior","csui/controls/form/impl/fields/csformfield.states.behavior","csui/controls/form/pub.sub","csui/utils/base","csui/utils/url","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/form/impl/tkl/tklinfinite.scrolling.behavior","i18n!csui/controls/form/impl/nls/lang","hbs!csui/controls/form/impl/fields/tklfield/tkloptions.loading","css!csui/controls/form/impl/fields/tklfield/tklfield"],function(e,t,i,n,l,a,s,o,r,c,d,u,p,h,f,m,g,v){"use strict";var b=e.config();return t.defaults(b,{"autofillChildrenValue":!0}),a.extend({"constructor":function(e){this.dropdownMenuVisible=!1,e.model.attributes.options&&e.model.attributes.options.isMultiFieldItem?this.behaviors=t.extend({"FormFieldEditable":{"behaviorClass":o},"FormFieldStates":{"behaviorClass":r}},this.behaviors):this.behaviors=t.extend({"FormFieldEditable":{"behaviorClass":c},"FormFieldStates":{"behaviorClass":d}},this.behaviors),this.alpacaField=e.alpacaField,this.isServerTypeahead=-1===["NONE",null].indexOf(this.alpacaField.schema.typeAheadSearch),this.isServerTypeahead&&(this.pageIndex=0,this.fetchMore=!0,this.behaviors=t.extend({"TKLInfiniteScrollingBehavior":{"behaviorClass":m,"contentParent":".cs-tkl-options-container > div","fetchMoreItemsThreshold":98,"content":".cs-tkl-options"}},this.behaviors)),l.ItemView.prototype.constructor.apply(this,arguments),this.mode=this.options.mode,this.mode=this.options.alpaca&&this.options.alpaca.schema.readonly?"readonly":"read",this.options.alpaca&&e.alpaca.options.setRequiredFieldsEditable&&"readonly"!==this.mode&&(this.mode="writeonly"),this.alpacaField=this.options.alpacaField,this.curVal=this.options.alpaca.data||"",this.options.hasValue=0===this.curVal||!!this.curVal,this.oldVal=this.curVal,this.valuesPulled=!1,this.isPullingValues=!1,this.options.enum=[],this.options.alpacaField.connector.config.formView.options&&this.options.alpacaField.connector.config.formView.options.node?this.node=this.options.alpacaField.connector.config.formView.options.node:this.node=this.options.alpacaField.connector.config.formView.node,this.formView=this.alpacaField.connector.config.formView,this.isCustomView=!!this.formView.options.customView,this.isCustomView&&(this.templateId=this.formView.options.templateId),this.connector=this.isCustomView?this.formView.model.connector:this.node?this.node.connector:this.options.alpacaField.connector,this.catId=this.isCustomView?this.options.alpaca.schema.fieldID.split("_")[0]:this.options.dataId.split("_")[0],this.parentViews=[],this.children=[];var n;if(this.isSetType=this.alpacaField.parent&&this.alpacaField.parent.parent,this.isSetType&&(this.isSetType=this.isSetType.parent&&this.isSetType.parent.options.isSetType),this.alpacaField.options.isMultiFieldItem&&this.alpacaField.parent.schema.maxItems>1?(n=this.alpacaField.parent.propertyId,this.isSetType&&n&&n.indexOf("x")>-1&&(n+="_"+this.alpacaField.parent.parent.name.split("_").pop()),n+=this.formView.cid,u.off(n+"tkl:buildRelation"),this.listenTo(u,n+"tkl:buildRelation",this.buildRelation),u.trigger(n+"tkl:rebuildRelation",this)):(n=this.isCustomView?this.alpacaField.schema.fieldID:this.alpacaField.propertyId)&&(this.isSetType&&(n+="_"+this.alpacaField.parent.name.split("_").pop()),n+=this.formView.cid,u.off(n+"tkl:buildRelation"),this.listenTo(u,n+"tkl:buildRelation",this.buildRelation)),this.formView){var a=t.bind(function(){t.each(this.options.alpaca.schema.parents,function(e){-1!==e.indexOf("_x_")&&(this.isMultiFieldView()?e+="_"+this.alpacaField.parent.parent.name.split("_").pop():e+="_"+this.alpacaField.parent.name.split("_").pop()),e+=this.formView.cid,u.trigger(e+"tkl:buildRelation",this),this.listenTo(u,e+"tkl:rebuildRelation",this.rebuildRelation,e),this.listenTo(u,e+"tkl:asyncBuildRelation",this.asyncBuildRelation)},this)},this)
;this.formView.isRenderFinished()?a():this.listenTo(this.formView,"render:form",a),this.listenTo(this.model,"change",function(){this.formView.trigger("form:changed")})}this.listenTo(this,"tkl:refresh",this.refresh),this.listenTo(this.model,"change",this.render),this.relationsFiltered=!1,i.expr.pseudos.ibegins=function(e,t,n){var l=i(e),a=l.text().toString().toUpperCase();return a.startsWith?a.startsWith(n[3].toUpperCase()):0===a.indexOf(n[3].toUpperCase())},this.isValidTKLState=!0,this.isPerfectScrollbarEnabled=f.usePerfectScrollbar()},"className":"cs-formfield cs-tklfield","template":s,"templateHelpers":function(){var e="",i=g.noValue,n=this.options.alpacaField&&this.options.alpacaField.isRequired(),l="readonly"===this.mode,a="";a=n?g.requiredField:"",this.model.get("data")&&(i=this.model.get("data")),this.alpacaField&&this.alpacaField.options&&this.alpacaField.options.isMultiFieldItem&&(e=this.alpacaField.parent&&this.alpacaField.parent.options?this.alpacaField.parent.options.label:"");var s=t.uniqueId("tklitem");return{"options":this.options.enum.map(function(e){return{"name":e,"id":t.uniqueId("tklitem")}}),"noneOptionId":s,"isNotWriteOnly":"writeonly"!==this.mode,"hasData":this.options.hasValue,"notRequired":!this.options.alpaca.schema.required,"data":this.curVal,"emptyLabel":g.tklFieldNone,"applyFlag":this.options.model.get("options")?this.options.model.get("options").applyFlag:void 0,"writeonlyMode":"writeonly"===this.mode,"idBtnLabel":this.options.labelId,"idBtnDescription":this.options.descriptionId,"multiFieldLabel":e,"readModeAria":l?t.str.sformat(g.fieldReadOnlyAria,this.model.get("options").label,i)+a:t.str.sformat(g.fieldEditAria,this.model.get("options").label,i)+a,"readModeMultiFieldAria":t.str.sformat(g.fieldEditAria,e,i)+a,"ariaRequired":n}},"behaviors":{"PerfectScrolling":{"behaviorClass":f,"contentParent":".cs-tkl-options-container > div","suppressScrollX":!0}},"ui":{"writeField":".cs-field-write input","readField":".cs-field-read button","tklOptionsContainer":".cs-tkl-options-container","tklOptions":".cs-tkl-options","combobox":".cs-field-write .combobox"},"events":function(){return this.alpacaField&&this.alpacaField.schema.disabled?{}:{"click @ui.readField":"pullValidValues","click @ui.tklOptions a":"onClick","keyup @ui.writeField":t.debounce(this.isServerTypeahead?this.pullValidValues:this.search,800),"mouseup @ui.writeField":"_onMouseUpWriteField","keydown .cs-tklfield-select":"accessibility","change .cs-tklfield-select ":"inputValidations"}},"setFocus":function(){return!0},"onRender":function(){this.searchBase=this.ui.tklOptions.find("li");var e=this;this.$el.on("csui.document.active.tkl",function(t,i){i.documentActiveTKL=e});var i=t.uniqueId("tklOptionsContainer");this.ui.tklOptions.attr("id",i)},"onDestroy":function(){this.$el.off("csui.document.active.tkl")},"_onMouseUpWriteField":function(e){this.ui.tklOptionsContainer.hasClass("binf-show")?this.getEditableBehavior().showActions&&this.getEditableBehavior().showActions(e):(this.ui.tklOptions.find(".active").removeClass("active"),this.searchBase.first().addClass("active"),this.showOptions(e),this.ui.writeField.attr("aria-activedescendant",this.searchBase.first().attr("id")))},"search":function(e){var t,n=i(e.target).val(),l=[9,13,16,32,38,40,113,27];if(n&&-1===l.indexOf(e.keyCode)){this.ui.tklOptions.find(".cs-tkl-no-result").remove(),this.showOptions();var a=this.searchBase.not(':ibegins("'+n.toLowerCase()+'")');if(a.addClass("binf-hidden"),this.searchBase.not(a).removeClass("binf-hidden"),this.triggerMethod("update:scrollbar"),t=this.searchBase.filter(":visible"),0===t.length)this.ui.tklOptions.append(i('<li class="cs-tkl-no-result"><a tabindex="-1">'+g.noResultFound+"</a></li>"));else{this.ui.tklOptions.find(".active").removeClass("active");var s=t.first();s.addClass("active"),this.ui.writeField.attr("aria-activedescendant",s.attr("id"))}}else if(e.target.value)this.isMultiFieldView(this)||-1!==i.inArray(e.keyCode,[13,113])&&this.trySetValue();else if(this.ui.tklOptions.find(".cs-tkl-no-result").remove(),this.searchBase.removeClass("binf-hidden"),-1===[38,40].indexOf(e.keyCode)){this.ui.tklOptions.find(".active").removeClass("active");var o=this.searchBase.first();o.addClass("active"),this.ui.writeField.attr("aria-activedescendant",o.attr("id"))}if(27===e.keyCode&&"create"===this.options.mode){this.dropdownMenuVisible&&(e.preventDefault(),e.stopPropagation());var r=this.$el.find(".icon-container");r.first().addClass("binf-hidden"),r.attr("data-cstabindex",-1),r.attr("tabindex",-1)}this.dropdownMenuVisible=!1},"showOptions":function(e){var n=this.$el.closest(".csui-scrollable-writemode");n&&!n.hasClass("csui-dropdown-open")&&n.addClass("csui-dropdown-open"),this.isCustomView&&this.formView&&this.formView.$el.find(".cs-tkl-options-container.binf-show").length&&this.hideOptions(e),!this.isPullingValues&&this.pullValidValues(),this.adjustPosition(),this.ui.tklOptionsContainer.addClass("binf-show"),this.searchBase.filter(":visible").length>0&&this.getEditableBehavior().hideActions?(this.options.isDropDownOpen=!0,this.getEditableBehavior().hideActions(e)):this.options.isDropDownOpen=!1,!!e&&e.stopPropagation(),this.ui.combobox.attr("aria-expanded",!0),i(document).on("mouseup.tkl.options",t.bind(this.hideOptions,this))},"adjustPosition":function(){var e=this.$el.find("input");setTimeout(t.bind(function(){p.adjustDropDownField(e,this.ui.tklOptionsContainer,!0,this,this.hideDropdown,this.ui.tklOptions.parent()),this.isPerfectScrollbarEnabled&&this.trigger("update:scrollbar")},this),200)},"hideDropdown":function(e){e||(e=this),e.hideOptions(),e.getEditableBehavior().showActions&&e.getEditableBehavior().showActions(),e.options.isDropDownOpen=!1;var t=e.$el.closest(".csui-scrollable-writemode");t&&t.hasClass("csui-dropdown-open")&&t.removeClass("csui-dropdown-open")},"hideOptions":function(e){if(e){var t=e.target.parentElement&&e.target.parentElement.classList.contains("cs-tkl-options-container"),n=t&&e.target.classList.contains("csui-normal-scrolling");if(this.isPerfectScrollbarEnabled){var l=i(".cs-tkl-options-container:visible");n=l.length&&l.find(".ps--clicking").length}if(n)return e.preventDefault(),void e.stopPropagation()}(!e||!i(document.activeElement).is(i(e.target))||this.isCustomView&&this.formView&&this.formView.$el.find(".cs-tkl-options-container.binf-show").length)&&i(".cs-tkl-options-container.binf-show").removeClass("binf-show"),this.ui.combobox.attr("aria-expanded",!1),this.options.isDropDownOpen=!1,i(document).off("mouseup.tkl.options",this.hideOptions)},"accessibility":function(e){if(-1!==[38,40,113,13].indexOf(e.keyCode)){if((13===e.keyCode||113===e.keyCode)&&!this.$el.find(".cs-tkl-options").is(":visible"))return void(e.target.value.length||(this.setValue(""),this.changeChildrenValues(this.children)));this.isServerTypeahead||this.showOptions();var t=this.searchBase.filter(":visible"),n=t.index(t.filter(".active")),l=!1,a=this.$el.parents(".binf-form-group.alpaca-field");if(t.filter(".active").removeClass("active"),38===e.keyCode)n=-1===n||0===n?t.length-1:n-1;else if(40===e.keyCode)n=-1===n||n===t.length-1?0:n+1;else if(13===e.keyCode||113===e.keyCode){if(t[n]&&t[n].children[0]&&(i(t[n].children[0]).trigger("click"),l=!0),this.options.alpacaField.isRequired()){var s=this.curVal;""!==s?(this.isValidTKLState=!0,a.removeClass("binf-has-error alpaca-invalid"),this.$el.removeClass("cs-formfield-invalid"),a.find(".binf-help-block.alpaca-message.alpaca-message-notOptional").hide()):this.isValidTKLState=!1}else this.isValidTKLState=!0,a.removeClass("binf-has-error alpaca-invalid"),this.$el.removeClass("cs-formfield-invalid");this.inputValidations(e)}if(this.ui.writeField.attr("aria-activedescendant",i(t[n]).attr("id")),i(t[n]).addClass("active"),38===e.keyCode||40===e.keyCode||l){var o=t[n]&&i(t[n].children[0]).parent();o&&!l&&this._scrollIntoView(o),e.stopPropagation(),e.preventDefault()}}else 27===e.keyCode&&this.ui.tklOptionsContainer.is(":visible")&&(e.preventDefault(),e.stopPropagation(),this.dropdownMenuVisible=this.ui.tklOptionsContainer.is(":visible"),this.hideOptions(),this.getEditableBehavior().showActions&&this.getEditableBehavior().showActions(e),this.options.isDropDownOpen=!1),9===e.keyCode&&this.$el.find(".cs-tkl-options").is(":visible")&&(e.preventDefault(),e.stopPropagation(),this.dropdownMenuVisible=this.ui.tklOptionsContainer.is(":visible"),this.hideOptions(),this.options.isDropDownOpen=!1)},"_scrollIntoView":function(e){var t=e,i=e.parent().parent(),n=t.height(),l=t.offset().top-i.offset().top,a=i.scrollTop(),s=i.height();l<0?i.scrollTop(a+l):l+n>s&&i.scrollTop(a+l+2*n-s)},"inputValidations":function(e){var n=this.ui.writeField.val(),l=this.options.enum;""===n?(this.setValue(n,!0),this.setSelection(i(e.target).closest("li"),!1,!0),this.isValidTKLState=!0,this.needRerender=!0):("number"==typeof l[0]&&(n=Number(n)),t.contains(l,n)||(this.isValidTKLState=!1),delete this.needRerender)},"buildRelation":function(e,t){this.isMultiFieldView(this)?(-1===e.parentViews.indexOf(this.alpacaField.parent)&&(this.pushView(e.parentViews,this.alpacaField.parent),e.alpacaField.parent.parentRelations||(e.alpacaField.parent.parentRelations=[]),-1===e.alpacaField.parent.parentRelations.indexOf(this.alpacaField.parent)&&this.pushView(e.alpacaField.parent.parentRelations,this.alpacaField.parent)),this.alpacaField.parent.children.map(function(e){e.fieldView.children=this.children},this)):this.pushView(e.parentViews,t||this),this.isMultiFieldView(e)?-1===this.children.indexOf(e.alpacaField.parent)&&(this.pushView(this.children,e.alpacaField.parent),this.alpacaField.parent.childRelations||(this.alpacaField.parent.childRelations=[]),-1===this.alpacaField.parent.childRelations.indexOf(e.alpacaField.parent)&&this.pushView(this.alpacaField.parent.childRelations,e.alpacaField.parent)):this.pushView(this.children,e)},"pushView":function(e,t){-1===e.indexOf(t)&&e.push(t)},"rebuildRelation":function(e){this.isMultiFieldView(this)?(this.pushView(e.children,this.alpacaField.parent),this.pushView(this.parentViews,e.alpacaField.parent)):(this.pushView(e.children,this),this.pushView(this.parentViews,e))},"asyncBuildRelation":function(e){this.parentViews=this.parentViews?this.parentViews:[],this.pushView(this.parentViews,e),this.pushView(e.childTKLViews,this)},"filterRelations":function(){if(!this.relationsFiltered&&"writeonly"!==this.mode){var e,i,n,l=[],a=[];t.each(this.children,function(t){for(i=!1,e=this.normalizeViews(t),n=0;n<e.length&&!i;n++)e[n]&&e[n].$el.is(":visible")&&(i=!0);i&&this.pushView(a,t)},this),this.children=a;var s=this.formView&&this.formView.options&&this.formView.options.originatingView&&this.formView.options.originatingView.tabContentHeader&&this.formView.options.originatingView.tabContentHeader.requiredFieldSwitchModel&&this.formView.options.originatingView.tabContentHeader.requiredFieldSwitchModel.get("data");t.each(this.parentViews,function(t){for(i=!1,e=this.normalizeViews(t),n=0;n<e.length&&!i;n++)(e[n].$el.is(":visible")||s)&&(i=!0);i&&this.pushView(l,t)},this),this.parentViews=l,this.relationsFiltered=!0}},"isTKLField":!0,"setValue":function(e,t){"write"===this.getStatesBehavior().state&&this.ui.writeField.val(e),this.options.alpacaField.setValue(e),this.curVal=e,this.options.alpaca.data=e,this.options.hasValue=0===e||!!e,this.model.set("data",e,{"silent":!!t})},"getOldValue":function(){return this.oldVal},"getEditValue":function(){return this.curVal},"getValue":function(){return this.curVal},"setMode":function(e){this.mode=e,this.getStatesBehavior().state=void 0},"getEditableBehavior":function(){return this._behaviors[0]},"getStatesBehavior":function(){return this._behaviors[1]},"getDocumentActiveTKL":function(){var e={"documentActiveTKL":void 0},t="BODY"===document.activeElement.tagName?void 0:i(document.activeElement);if(t&&!t.hasClass("cs-tklfield")){var n=t.closest(".cs-formfield.cs-tklfield");n.length>0?t=n:(n=t.closest(".cs-pull-right").siblings(".cs-pull-left").find(".cs-formfield.cs-tklfield"),0===n.length&&(n=t.find(".cs-pull-left .cs-formfield.cs-tklfield")),t=n)}return!!t&&t.hasClass("cs-tklfield")&&t.trigger("csui.document.active.tkl",[e]),e.documentActiveTKL},"shouldValidate":function(){return!i.contains(this.$el[0],document.activeElement)},"isReadyToSave":function(){for(var e=i.contains(this.$el[0],document.activeElement),t=0;!e&&u.tklHelpers&&t<u.tklHelpers.viewsInWriteMode.length;t++)e=this.isMultiFieldView(u.tklHelpers.viewsInWriteMode[t])?i.contains(u.tklHelpers.viewsInWriteMode[t].alpacaField.parent.getFieldEl()[0],document.activeElement):i.contains(u.tklHelpers.viewsInWriteMode[t].$el[0],document.activeElement);return e},"trySetValue":function(e){var t;return t=!this.$el.is(":visible")||this.options.alpacaField.setValueAndValidate(this.curVal,!0),t?(this.curVal===this.oldVal&&this.curVal===this.getEditValue()||(this.setValue(this.curVal,e),this.isMultiFieldView(this)&&this._raiseValueChanged()),this.$el.removeClass("cs-formfield-invalid")):(this.$el.addClass("cs-formfield-invalid"),this.$el.trigger(i.Event("field:invalid"))),t},"setStateRead":function(e){if(u.tklHelpers&&u.tklHelpers.viewsInWriteMode){var t=u.tklHelpers.viewsInWriteMode.indexOf(this);-1!==t&&u.tklHelpers.viewsInWriteMode.splice(t,1)}return this.curVal!==this.getValue()&&(this.options.alpacaField.setValue(this.curVal),this.options.alpacaField.validate()&&this.options.alpacaField.refreshValidationState(!1)),this.hideOptions(),this.isServerTypeahead&&(this.pageIndex=0,this.fetchMore=!0,this.valuesPulled=!1),!1},"setStateWrite":function(){return this.filterRelations(),this.buildHelpers(),"writeonly"===this.mode||this.getEditableBehavior().escapePressed||this.children.map(function(e){this.isMultiFieldView(e)?e.isWriteMode||-1!==this.parentViews.indexOf(e)||e._showItemsInWriteMode():"write"===e.getStatesBehavior().state||e.alpacaField.parent.cancelClicked||e.getStatesBehavior().setStateWrite(!1,!1)},this),!1},"buildHelpers":function(){u.tklHelpers||(u.tklHelpers={},u.tklHelpers.viewsInWriteMode=[]),this.isMultiFieldView(this)?this.alpacaField.parent._updateViewsInWriteMode(this):this.getEditableBehavior()._updateViewsInWriteMode(this),u.tklHelpers.tabInView||(u.tklHelpers.tabInView=this)},"resetHelpers":function(e){if(u.tklHelpers)if(e){var i=[];t.each(u.tklHelpers.viewsInWriteMode,function(e){e&&e.$el.is(":visible")&&this.pushView(i,e)},this),u.tklHelpers.viewsInWriteMode=i}else u.tklHelpers.viewsInWriteMode.length=0},"allowEditOnClickReadArea":function(){return!0},"_raiseValueChanged":function(){u.tklHelpers&&!this.isMultiFieldView(this)?t.each(u.tklHelpers.viewsInWriteMode,function(e){this.isMultiFieldView(e)||(e.oldVal=e.curVal)},this):this.isMultiFieldView(this)||(this.oldVal=this.curVal);var e={"fieldvalue":this.getValue(),"fieldid":this.options.dataId,"fieldpath":this.options.path,"targetfieldpath":this.options.path,"fieldView":this};u.trigger(this.options.dataId+"dependentattrchanged",this);var n=i.Event("field:changed");t.extend(n,e),this.$el.trigger(n)},"pullValidValues":function(e,i){var n=[9,13,17,18,20,27,32,37,38,39,113,40];if(["STARTWITH","CONTAINS"].indexOf(this.alpacaField.schema.typeAheadSearch)>-1&&!this.ui.tklOptionsContainer.is(":visible")&&n.pop(),e&&"keyup"===e.type){if(e.ctrlKey||-1!==n.indexOf(e.keyCode))return;this.isServerTypeahead&&(this.fetchMore=!0,this.pageIndex=0)}if(!this.alpacaField.schema.readonly&&(this.relationsFiltered||this.isServerTypeahead||this.filterRelations(),!this.valuesPulled||this.isServerTypeahead&&e&&"keyup"===e.type||i)){this.isPullingValues=!0,i||(this.options.enum=[]),this.trigger("tkl:refresh"),!this.isCustomView&&this.node.attributes&&this.node.attributes.fileObject&&this.node.attributes.fileObject.attributes&&this.node.attributes.fileObject.attributes.collection&&this.node.attributes.fileObject.attributes.collection.node&&(this.parentId=this.node.attributes.fileObject.attributes.collection.node.get("id"));var l,a,s,o,r=this.connector,c=this.isCustomView?this.catId:void 0===this.node.get("id")?this.parentId||this.node.get("parent_id"):this.node.get("id"),d={"id":c,"attribute_key":this.isCustomView?this.options.alpaca.schema.fieldID:this.alpacaField.name},u=0,p=!0,h=this,f=this.formView.alpaca.data[this.catId+"_1"];if(d.version_number=f&&f.version_number?f.version_number:0,this.parentViews.length>0){var m={},g=-1!==this.options.dataId.indexOf("x")&&1===this.options.dataId.match(/x/g).length,v=!1;if(g||(v=g=this.options.dataId.match(new RegExp(this.options.dataId.substring(0,this.options.dataId.indexOf("_")),"g")).length>1),this.alpacaField.options.isMultiFieldItem)g||(d.attribute_key=(this.alpacaField.propertyId||this.alpacaField.parent.propertyId)+"_"+this.getFieldIndex(this)),o=t.filter(this.parentViews,function(e){return!!h.isMultiFieldView(e)}),this.alpacaField.options&&(u=this.alpacaField.parent.schema.maxItems&&1!==this.alpacaField.parent.schema.maxItems&&0!==o.length?this.getFieldIndex(this):0,this.parentViews.map(function(e){if(s=this.normalizeViews(e),0===u&&g)for(var t=this.alpacaField.schema.parents.slice(),i=-1,n=0;n<s.length&&(i=t.indexOf(s[n].options.alpacaField.propertyId||s[n].options.alpacaField.parent.propertyId),-1!==i&&(a=s[n].alpacaField.name,m[a]=this.getFieldValue(s[n]),t.splice(i,1)),t.length);n++);else s[u]?(a=s[u].alpacaField.name,m[a]=this.getFieldValue(s[u])):this.isMultiFieldView(e)?p=!1:(a=e.alpacaField.propertyId||e.alpacaField.parent.propertyId,m[a]=this.getFieldValue(s[0]))},this));else{d.attribute_key=this.isCustomView?this.alpacaField.schema.fieldID:this.options.dataId;var b;for(u=0;u<this.parentViews.length;u++)s=this.normalizeViews(this.parentViews[u]),b=s[0].options.dataId.split("_"),v&&b[1]===this.options.dataId.split("_")[1]?(a=b.slice(0,2).join("_")+"_",a+=s[0].alpacaField.propertyId||s[0].alpacaField.parent.propertyId):a=this.isCustomView?s[0].alpacaField.schema.fieldID:s[0].alpacaField.name,m[a]=this.getFieldValue(s[0])}m=JSON.stringify(m),d.attribute_values=m}else this.alpacaField.schema.parents.length&&(p=!1);if(!this.isCustomView&&this.node&&this.node.get("subprocess_id")&&(d.subwork_id=this.node.get("subprocess_id")),p){this.isCustomView&&(d.version_number=this.formView.alpaca.schema.properties.Category.properties["Category_"+this.catId].OTCatVerNum,d.is_search=!0),d.typeAheadSearch=this.alpacaField.schema.typeAheadSearch||"NONE",d.typeAheadSearch&&(i||!this.pageIndex&&e&&"keyup"===e.type)&&(d.FilterData=this.ui.writeField.val().trim()),this.isServerTypeahead&&(d.PageIndex=this.pageIndex),l=r.connection.url+"/tklattribute/validvalues";var y=new FormData;t.keys(d).forEach(function(e){y.append(e,d[e])});var w={"type":"POST","url":l,"data":y};r.extendAjaxOptions(w),r.makeAjaxCall(w).done(t.bind(function(e,t){this.isServerTypeahead?t[e].length?(this.options.enum=this.options.enum.concat(t[e]),this.pageIndex++):this.fetchMore=!1:this.options.enum=t[e],this.curVal&&"number"==typeof this.options.enum[0]&&(this.curVal=Number(this.curVal),this.oldVal=Number(this.oldVal)),h.isPullingValues=!1,this.trigger("tkl:refresh"),this.showOptions()},this,d.attribute_key)).fail(function(e){h.valuesPulled=!1,e.responseJSON&&e.responseJSON.error&&(h.modalAlert?h.modalAlert.showError(e.responseJSON.error):csui.require(["csui/dialogs/modal.alert/modal.alert"],function(t){h.modalAlert=t,h.modalAlert.showError(e.responseJSON.error)}))}).always(function(){h.isPullingValues=!1}),this.valuesPulled=!0}else this.options.enum.length=0,this.isPullingValues=!1,this.trigger("tkl:refresh")}},"refresh":function(){var e=this.ui.tklOptions;e.empty(),this.options.enum.length?(e.append(i('<li id="'+t.uniqueId("tklitem")+'" role="option" class="active"><a title="'+g.tklFieldNone+'" tabindex="-1">'+g.tklFieldNone+"</a></li>")),this.tklOptionsTemplate||(this.tklOptionsTemplate=t.template('<%_.each(options, function(option) {%><li id="<%_.uniqueId("tklitem")%>" role="option"><a title="<%-option%>" tabindex="-1"><%-option%></a></li><%})%>')),e.append(this.tklOptionsTemplate({"options":this.options.enum})),this.isPullingValues&&(e.append(this.tklOptionsLoadingTemplate),e.parent().scrollTop(e.outerHeight()))):this.isPullingValues?(this.tklOptionsLoadingTemplate||(this.tklOptionsLoadingTemplate=i(v())),this.ui.tklOptions.append(this.tklOptionsLoadingTemplate),this.showOptions()):this.ui.tklOptions.append(i('<li class="cs-tkl-no-result"><a tabindex="-1">'+g.noResultFound+"</a></li>")),this.searchBase=e.find("li"),this.$el.is(":visible")&&this.adjustPosition(),this.trigger("dom:refresh")},"onClick":function(e){var n=i(e.target).closest("li").index(),l="",a=i(e.target).closest("li"),s=this.$el.parents(".binf-form-group.alpaca-field"),o=this;l=0===n?"":this.options.enum[n-1],a.hasClass("cs-tkl-no-result")?this.ui.writeField.trigger("focus"):(this.options.alpacaField.isRequired()?""!==l?(this.isValidTKLState=!0,s.removeClass("binf-has-error alpaca-invalid"),this.$el.removeClass("cs-formfield-invalid"),s.find(".binf-help-block.alpaca-message").hide()):this.isValidTKLState=!1:(this.isValidTKLState=!0,s.removeClass("binf-has-error alpaca-invalid"),this.$el.removeClass("cs-formfield-invalid"),s.find(".binf-help-block.alpaca-message").hide()),this.setValue(l),this.setSelection(a,!0)),this.isServerTypeahead&&(this.valuesPulled=!1,this.pageIndex=0),this.parentViews.length&&t.each(this.parentViews,function(e){e.isBooleanField&&(o.valuesPulled=!1)})},"setSlectionRange":function(e,t,n){if(e.setSelectionRange)i(e).trigger("focus"),e.setSelectionRange(t,t);else if(e.createTextRange){var l=e.createTextRange();l.collapse(!0).moveEnd("character",n).moveStart("character",t).select()}},"getFieldValue":function(e){e.fieldView&&(e=e.fieldView);var i=e.getEditValue();return i instanceof n.Model?i=i.get("id"):t.isObject(i)&&(i=i.id),null!==i&&void 0!==i||(i=""),i.toString()},"setSelection":function(e,i,n){this.ui.writeField.val(this.getValue()),p.isMSBrowser()&&!this.ui.writeField[0].setSlectionRange&&this.setSlectionRange(this.ui.writeField[0],this.ui.writeField.val().length,this.ui.writeField.val().length),this.ui.tklOptions.find(".cs-tkl-selected").removeClass("cs-tkl-selected"),e.addClass("cs-tkl-selected"),n||(this.ui.writeField.trigger("focus"),this.ui.tklOptionsContainer.removeClass("binf-show"));var l,a={};this.isMultiFieldView(this)&&(l=this.alpacaField.parent.children.indexOf(this.alpacaField)),this.isCustomView?a[this.alpacaField.schema.fieldID]=this.getValue().toString():a[this.alpacaField.name]=this.getValue().toString(),this.getAllParents(a,this.parentViews,l),this.getAllChildren(a,this.children,l);var s=h.combine(this.connector.getConnectionUrl().getApiBase("v2"),"/tklattribute/defaultvalues"),o=new FormData,r={"attribute_key":this.isCustomView?this.options.alpaca.schema.fieldID:this.alpacaField.name,"is_search":this.isCustomView,"id":this.isCustomView?this.templateId:this.node.get("id")||this.node.get("parent_id"),"attribute_values":JSON.stringify(a)};t.keys(r).forEach(function(e){o.append(e,r[e])});var c={"type":"POST","url":s,"data":o};if(!this.isCustomView&&this.node&&this.node.get("subprocess_id")&&o.append("subwork_id",this.node.get("subprocess_id")),this.connector.extendAjaxOptions(c),this.connector.makeAjaxCall(c).done(t.bind(function(e){this.autoPopulateChildrenValues(e.results.data,this.children,l)},this)),i&&"create"===this.options.mode){var d=this;setTimeout(function(e){d.ui.writeField.trigger("change"),d.getEditableBehavior().showActions&&d.getEditableBehavior().showActions(e),d.options.isDropDownOpen=!1},110)}else this.getEditableBehavior().showActions&&this.getEditableBehavior().showActions(this),this.options.isDropDownOpen=!1;this.isValidTKLState=!0,delete this.needRerender},"getAllParents":function(e,i,n){var l,a;i.map(function(i){this.isMultiFieldView(i)?(void 0===n?i.children.map(function(t){a=this.getFieldValue(t),e[t.name]=a},this):(a=i.getValue()[n],e[i.name+"_"+n]=null!==a&&void 0!==a?a.toString():""),i.parentRelations&&i.parentRelations.length&&!t.has(e,i.name+"_"+(void 0===n?0:n))&&this.getAllParents(e,i.parentRelations,n)):(l=this.isCustomView?i.alpacaField.schema.fieldID:i.alpacaField.name,a=this.getFieldValue(i),e[l]=a,i.parentViews.length&&!t.has(e,l)&&i.getAllParents(e,i.parentViews,n))},this)},"getAllChildren":function(e,i,n){var l;i.map(function(i){this.isMultiFieldView(i)?t.has(e,i.name+"_"+(void 0===n?0:n))||(this.getAllParents(e,i.parentRelations||[],n),i.childRelations&&i.childRelations.length?this.getAllChildren(e,i.childRelations,n):i.children[n]&&i.children[n].fieldView.children.length&&(this.getAllParents(e,i.parentViews,n),this.getAllChildren(e,i.children[n].fieldView.children,n)),void 0===n?i.children.map(function(t){e[t.name]=""}):e[i.name+"_"+n]=""):(l=this.isCustomView?i.alpacaField.schema.fieldID:i.alpacaField.name,this.getAllParents(e,i.parentViews||[],n),i.children.length&&!t.has(e,l)&&i.getAllChildren(e,i.children,n),-1===this.parentViews.indexOf(i)&&(e[l]=""))},this)},"autoPopulateChildrenValues":function(e,t,i,n){var l,a=this;n||(n=[]),t.map(function(t){if(this.isCustomView||!this.isSetType||this.getRowIndex()===this.getRowIndex(t))if(this.isMultiFieldView(t)){if(-1===n.indexOf(t.name)&&(t.childRelations&&t.childRelations.length?(n.push(t.name),this.autoPopulateChildrenValues(e,t.childRelations,i,n)):t.children[i]&&t.children[i].fieldView.children.length&&this.autoPopulateChildrenValues(e,t.children[i].fieldView.children,i)),void 0===i&&t.children.map(function(t){var i=e[t.name];i=null!==i&&void 0!==i?i.toString():"",t.getValue().toString()!==i&&(a._setTklFieldValue(t.fieldView,i),t.fieldView.valuesPulled=!1,t.fieldView.alpacaField.refreshValidationState())}),t.children[i]&&t.children[i].name in e){var s=e[t.children[i].name];s=null!==s&&void 0!==s?s.toString():"",t.children[i].fieldView.getValue().toString()!==s&&(t.children[i].fieldView.valuesPulled=!1,a._setTklFieldValue(t.children[i].fieldView,s),t.children[i].fieldView.alpacaField.refreshValidationState()),""===t.children[i].fieldView.getValue().toString()&&""===s&&(t.children[i].fieldView.valuesPulled=!1)}}else if(!i){l=this.isCustomView?t.alpacaField.schema.fieldID:t.alpacaField.name,t.children.length&&-1===n.indexOf(l)&&(n.push(l),t.autoPopulateChildrenValues(e,t.children,i,n));var o=e[l];o=null!==o&&void 0!==o?o.toString():"",t.getValue().toString()!==o&&(a._setTklFieldValue(t,o),t.valuesPulled=!1,t.alpacaField.refreshValidationState()),""===t.getValue().toString()&&""===e[l].toString()&&(t.valuesPulled=!1),Array.isArray(t.children)&&(t.children[0]&&t.children[0].cid)===(t.parentViews[0]&&t.parentViews[0].cid)&&(t.valuesPulled=!1)}},this)},"_setTklFieldValue":function(e,t){!b.autofillChildrenValue&&t&&(t=""),e.setValue(t)},"changeChildrenValues":function(e,i,n){var l,a,s=!1,o=-1!==this.options.dataId.indexOf("x")&&1===this.options.dataId.match(/x/g).length;t.each(e,function(e){if(this.isMultiFieldView(this)){if(l=this.getFieldIndex(this),a=this.normalizeViews(e),o&&parseInt(this.options.dataId.split("_")[2])!==parseInt(a[0].options.dataId.split("_")[2]))return;a[0].alpacaField.options.isMultiFieldItem?(a.forEach(function(e){e.changeChildrenValues(e.children,e,!1),e.valuesPulled=!1}),a[l]&&(e=a[l],s=void 0===n||n,this.changeChildrenValues(e.children,e))):0===l&&(e=a[l],s=!0,this.changeChildrenValues(e.children,e)),s&&(e.valuesPulled=!1,e.setValue(""),e.options.enum.length=0,e.trigger("tkl:refresh"))}else{if(a=this.normalizeViews(e),o&&parseInt(this.options.dataId.split("_")[2])!==parseInt(a[0].options.dataId.split("_")[2]))return;var t=this;a.forEach(function(e){s=!0,t.changeChildrenValues(e.children,e),s&&(e.valuesPulled=!1,e.isValidTKLState=!0,e.options.alpacaField.isRequired()?e.isValidTKLState=!1:(e.$el.parents(".binf-form-group.alpaca-field").removeClass("binf-has-error alpaca-invalid"),e.$el.removeClass("cs-formfield-invalid")),e.$el.parents(".binf-form-group.alpaca-field").find(".binf-help-block.alpaca-message.alpaca-message-custom").hide(),e.setValue(""),e.options.enum.length=0,e.trigger("tkl:refresh"))})}},i||this)},"normalizeViews":function(e){var t=[];return e.isTKLField||e.isNonTKLField?this.pushView(t,e):this.isMultiFieldView(e)?e.children.map(function(e){this.pushView(t,e.fieldView)},this):this.pushView(t,e.children[0].fieldView),t},"isMultiFieldView":function(e){return e||(e=this),!e.isTKLField&&!e.isNonTKLField||e.alpacaField.options.isMultiFieldItem&&!!e.alpacaField.parent&&!!e.alpacaField.parent.schema.maxItems&&e.alpacaField.parent.schema.maxItems>1},"getFieldIndex":function(e){if(e||(e=this),e.alpacaField.options.isMultiFieldItem&&e.alpacaField.parent.schema.maxItems&&1!==e.alpacaField.parent.schema.maxItems)return e.alpacaField.parent.children.indexOf(e.alpacaField)},"getRowIndex":function(e){e||(e=this.alpacaField.parent),this.isMultiFieldView(e)||(e=e.alpacaField.parent);var t=e.parent;return t&&t.parent?t.parent.children.indexOf(t):-1},"resetOldValueAfterCancel":function(){if(u.tklHelpers)for(var e,t,i=u.tklHelpers.viewsInWriteMode.length-1;u.tklHelpers&&i>=0;i--)if(t=u.tklHelpers.viewsInWriteMode[i])if(t.isValidTKLState=!0,this.isMultiFieldView(t)){if("write"===t.getStatesBehavior().state&&(t=t.alpacaField.parent,e=t.getFieldEl(),e.find(".csui-bulk-edit-cancel").is(":visible"))){e.find(".csui-bulk-edit").removeClass("binf-hidden"),e.find(".csui-bulk-edit-cancel").addClass("binf-hidden"),e.find(".csui-bulk-edit-submit").addClass("binf-hidden"),t._hideInlineDeleteIcon(),t._hideInlineAddIcon(),t.options.prevChildData&&(t.children={},t.children=t.options.prevChildData);var n=t.getPreviousData();t.refreshContainer(n,function(){t.options.prevChildDom=void 0,t.options.prevData=void 0,t.isWriteMode=!1})}}else t.alpacaField.parent.cancelClicked=!0,"tkl"===t.alpacaField.type?t.setValue(t.getOldValue()):t.getEditableBehavior()._resetOldValue(),t.alpacaField.refreshValidationState(),t.$el.removeClass("cs-formfield-invalid"),t.getEditableBehavior().setViewReadOnlyAndLeaveEditMode(!1,!1),this.ui.readField.trigger("focus")}})}),csui.define("csui/controls/form/fields/alpaca/alpcsuitklfield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/models/form","csui/controls/form/fields/tklfield.view","csui/utils/base","i18n!csui/controls/form/impl/nls/lang"],function(e,t,i,n,l,a,s,o,r,c){return a.Fields.CsuiTKLField=a.Fields.SelectField.extend({"constructor":function(e,t,i,n,l,a,s){this.excludeNoneOption=void 0!==i.removeDefaultNone&&i.removeDefaultNone,this.base(e,t,i,n,l,a,s)},"getFieldType":function(){return"tkl"},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType()),this.field.parent().find("label").on("click",t.bind(this.onClickLabel,this))},"onClickLabel":function(e){this.fieldView&&this.fieldView.ui&&this.fieldView.ui.readField.trigger(e.type)},"showField":function(){var e=!0;null!==this.data&&""!==this.data||(e="create"===this.options.mode);var a,s=this.id,r=this.options?this.options.descriptionId:"",d=i(this.field[0]).find("label");d&&1==d.length&&(a=d.attr("for")+"Label",d.attr("id",a)),this.fieldView=new o({"model":new n.Model({"data":this.data,"options":this.options,"schema":this.schema,"id":s}),"id":t.uniqueId(s),"alpacaField":this,"labelId":a,"descriptionId":r,"mode":this.options.mode,"path":this.path,"dataId":this.name,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema},"hasValue":e}),this.options.validator=function(e){e({"status":this.fieldView.isValidTKLState,"message":this.fieldView.isValidTKLState?"":c.invalidTkl})};var u=i("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(u),this.region=new l.Region({"el":u}),this.region.show(this.fieldView)},"setValueAndValidate":function(e,t){this.setValue(e),""===this.fieldView.ui.writeField.val()&&(this.fieldView.isValidTKLState=!0);var i=!0;if(t){i=this.validate()&&this.fieldView.isValidTKLState,this.refreshValidationState(!1);var n=this.fieldView.ui.writeField&&this.fieldView.ui.writeField.val()
;this.fieldView.preVal!==n&&(!i&&this.fieldView.$el.find("input").select(),this.fieldView.preVal=n)}return i},"_validator":function(e){var t=this.getValue();e(this.schema.required&&""===t?{"status":!1,"message":"This is a required field."}:{"status":!0})},"validate":function(){var e=this.base();this.validation.invalidValueOfEnum&&!this.validation.invalidValueOfEnum.status&&(this.validation.invalidValueOfEnum.message="",this.validation.invalidValueOfEnum.status=!0,e=this.validation.notOptional.status);for(var t in this.validation)!1===this.validation[t].status&&("notOptional"!==t?(this.validation[t].status=!0,this.validation[t].message=""):this.fieldView.isValidTKLState||(this.validation.notOptional.status=!0));return e},"setValue":function(e){null===e?this.base(""):this.base(e)},"getValue":function(){return this.base()},"focus":function(){this.fieldView.setFocus()},"destroy":function(){this.base(),this.region&&this.region.destroy()}}),a.registerFieldClass("tkl",a.Fields.CsuiTKLField,"bootstrap-csui"),i.alpaca.Fields.CsuiTKLField}),csui.define("hbs!csui/controls/form/impl/fields/multilingual.textfield/multilingual.textfield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'placeholder="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"placeholder"):a,t))+'"'},"3":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'size="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"size"):a,t))+'"'},"5":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'name="'+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"data":l,"loc":{"start":{"line":6,"column":22},"end":{"line":6,"column":30}}}):a))+'"'},"7":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"data-"+e.escapeExpression((a=null!=(a=s(i,"key")||l&&s(l,"key"))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"key","hash":{},"data":l,"loc":{"start":{"line":7,"column":31},"end":{"line":7,"column":39}}}):a))+'="'+e.escapeExpression(e.lambda(t,t))+'"'},"9":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((a=null!=(a=s(i,"key")||l&&s(l,"key"))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"key","hash":{},"data":l,"loc":{"start":{"line":8,"column":32},"end":{"line":8,"column":40}}}):a))+'="'+e.escapeExpression(e.lambda(t,t))+'"'},"11":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-labelledby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnLabel")||(null!=t?s(t,"idBtnLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnLabel","hash":{},"data":l,"loc":{"start":{"line":9,"column":68},"end":{"line":9,"column":82}}}):a))+'" '},"13":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-describedby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnDescription")||(null!=t?s(t,"idBtnDescription"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnDescription","hash":{},"data":l,"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":66}}}):a))+'" '},"15":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((a=null!=(a=s(i,"multiFieldLabel")||(null!=t?s(t,"multiFieldLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"multiFieldLabel","hash":{},"data":l,"loc":{"start":{"line":11,"column":40},"end":{"line":11,"column":59}}}):a))+'"'},"17":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-required="'+e.escapeExpression((a=null!=(a=s(i,"ariaRequired")||(null!=t?s(t,"ariaRequired"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"ariaRequired","hash":{},"data":l,"loc":{"start":{"line":12,"column":40},"end":{"line":12,"column":56}}}):a))+'"'},"19":function(e,t,i,n,l){return"\r\n    readonly "},"21":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button class="icon csui-multilingual-icon">\r\n        '+(null!=(a=(s(i,"icon-v2")||t&&s(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"small","iconName":"csui_action_language_switcher24"},"data":l,"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":91}}}))?a:"")+"\r\n      </button>\r\n"},"23":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="icon-container">\r\n        <div class="csui-icon-edit inline-edit-icon edit-cancel" title="'+e.escapeExpression((a=null!=(a=s(i,"cancel")||(null!=t?s(t,"cancel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"data":l,"loc":{"start":{"line":21,"column":72},"end":{"line":21,"column":82}}}):a))+'"></div>\r\n      </div>\r\n'},"25":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"options"):t)?s(a,"applyFlag"):a,{"name":"if","hash":{},"fn":e.program(26,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":24,"column":6},"end":{"line":28,"column":13}}}))?a:""},"26":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="icon-container binf-hidden">\r\n          <div class="csui-icon apply-all binf-hidden" title="'+e.escapeExpression((a=null!=(a=s(i,"titleApplyAll")||(null!=t?s(t,"titleApplyAll"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"titleApplyAll","hash":{},"data":l,"loc":{"start":{"line":26,"column":62},"end":{"line":26,"column":79}}}):a))+'" tabindex="0"></div>\r\n        </div>\r\n'},"28":function(e,t,i,n,l){return" disabled "},"30":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeMultiFieldAria")||(null!=t?s(t,"readModeMultiFieldAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeMultiFieldAria","hash":{},"data":l,"loc":{"start":{"line":38,"column":44},"end":{"line":38,"column":70}}}):a))+'" '},"32":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n              aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeAria")||(null!=t?s(t,"readModeAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeAria","hash":{},"data":l,"loc":{"start":{"line":39,"column":26},"end":{"line":39,"column":42}}}):a))+'"\r\n'},"34":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"          <span>"+e.escapeExpression((a=null!=(a=s(i,"multilangEnValue")||(null!=t?s(t,"multilangEnValue"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"multilangEnValue","hash":{},"data":l,"loc":{"start":{"line":43,"column":16},"end":{"line":43,"column":36}}}):a))+"</span>\r\n"},"36":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="placeholder" title="'+e.escapeExpression((a=null!=(a=s(i,"noValue")||(null!=t?s(t,"noValue"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"noValue","hash":{},"data":l,"loc":{"start":{"line":45,"column":43},"end":{"line":45,"column":54}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"data":l,"loc":{"start":{"line":45,"column":56},"end":{"line":45,"column":70}}}):a))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-field-write">\r\n  <div class="cs-field-write-inner">\r\n      <input type="'+e.escapeExpression((s=null!=(s=o(i,"inputType")||(null!=t?o(t,"inputType"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"inputType","hash":{},"data":l,"loc":{"start":{"line":3,"column":19},"end":{"line":3,"column":32}}}):s))+'" id="'+e.escapeExpression((s=null!=(s=o(i,"id")||(null!=t?o(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"data":l,"loc":{"start":{"line":3,"column":38},"end":{"line":3,"column":44}}}):s))+'" autocomplete="off"\r\n             '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"placeholder"):a,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":84}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"size"):a,{"name":"if","hash":{},"fn":e.program(3,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":54}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"name"):t,{"name":"if","hash":{},"fn":e.program(5,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":38}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"data"):a,{"name":"each","hash":{},"fn":e.program(7,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":7,"column":4},"end":{"line":7,"column":59}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"attributes"):a,{"name":"each","hash":{},"fn":e.program(9,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":60}}}))?a:"")+'\r\n    value="'+e.escapeExpression((s=null!=(s=o(i,"multilangEnValue")||(null!=t?o(t,"multilangEnValue"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"multilangEnValue","hash":{},"data":l,"loc":{"start":{"line":9,"column":11},"end":{"line":9,"column":31}}}):s))+'" '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnLabel"):t,{"name":"if","hash":{},"fn":e.program(11,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":9,"column":33},"end":{"line":9,"column":91}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnDescription"):t,{"name":"if","hash":{},"fn":e.program(13,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":75}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(15,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":67}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"ariaRequired"):t,{"name":"if","hash":{},"fn":e.program(17,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":64}}}))?a:"")+" "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"isReadOnly"):t,{"name":"if","hash":{},"fn":e.program(19,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":12,"column":65},"end":{"line":13,"column":20}}}))?a:"")+" />\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"isGlobeRequired"):t,{"name":"if","hash":{},"fn":e.program(21,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":14,"column":8},"end":{"line":18,"column":11}}}))?a:"")+(null!=(a=(o(i,"xif")||t&&o(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.mode !== 'writeonly'",{"name":"xif","hash":{},"fn":e.program(23,l,0),"inverse":e.program(25,l,0),"data":l,"loc":{"start":{"line":19,"column":4},"end":{"line":29,"column":12}}}))?a:"")+'\r\n  </div>\r\n</div>\r\n<div class="cs-field-read">\r\n  <div class="cs-field-read-inner">\r\n    <div class="btn-container">\r\n      <button title="'+e.escapeExpression((s=null!=(s=o(i,"tooltip")||(null!=t?o(t,"tooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"tooltip","hash":{},"data":l,"loc":{"start":{"line":36,"column":21},"end":{"line":36,"column":32}}}):s))+'"\r\n        '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"schema"):t)?o(a,"readonly"):a,{"name":"if","hash":{},"fn":e.program(28,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":37,"column":8},"end":{"line":37,"column":48}}}))?a:"")+"\r\n        "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(30,l,0),"inverse":e.program(32,l,0),"data":l,"loc":{"start":{"line":38,"column":8},"end":{"line":40,"column":15}}}))?a:"")+"      >\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"hasData"):t,{"name":"if","hash":{},"fn":e.program(34,l,0),"inverse":e.program(36,l,0),"data":l,"loc":{"start":{"line":42,"column":8},"end":{"line":46,"column":15}}}))?a:"")+'      </button>\r\n    </div>\r\n    <div class="icon-container">\r\n      <div class="csui-icon-edit inline-edit-icon icon-edit" title="'+e.escapeExpression((s=null!=(s=o(i,"edit")||(null!=t?o(t,"edit"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"data":l,"loc":{"start":{"line":50,"column":68},"end":{"line":50,"column":76}}}):s))+'"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"useData":!0});return i.registerPartial("csui_controls_form_impl_fields_multilingual.textfield_multilingual.textfield",n),n}),csui.define("css!csui/controls/form/impl/fields/multilingual.textfield/multilingual.textfield",[],function(){}),csui.define("csui/controls/form/fields/multilingual.textfield.view",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/form/impl/fields/csformfield.view","csui/utils/url","csui/utils/base","csui/utils/contexts/factories/connector","i18n!csui/controls/form/impl/nls/lang","hbs!csui/controls/form/impl/fields/multilingual.textfield/multilingual.textfield","css!csui/controls/form/impl/fields/multilingual.textfield/multilingual.textfield","csui/lib/binf/js/binf","csui/lib/handlebars.helpers.xif"],function(e,t,i,n,l,a,s,o,r,c,d){"use strict";var u=csui.require.s.contexts._.config.config.i18n,p=u&&u.locale||"en-US",h=a.extend({"constructor":function(e){a.apply(this,arguments);var t=this.model.get("data");this.editVal=t||{},this.oldVal=t,this._isReadyToSave=!0,this.popoverRequired=!!this.formView.popover,this.loadAddionalInfo(this.popoverRequired)},"getDisplayValue":function(){return this.getEditValue()},"className":"cs-formfield cs-multilingualfield","template":d,"ui":function(){return t.extend({},a.prototype.ui,{"globeIcon":".csui-multilingual-icon"})},"events":function(){var e=t.extend({},a.prototype.events,{"keypress @ui.readField":"onKeyPressRead"});return!this.formView.popover?t.extend(e,{"click @ui.writeField":"onWiteFieldClick","click .csui-multilingual-icon":"onWiteFieldClick","keydown @ui.writeField":"onKeyDownWrite"}):t.extend(e,{"click .csui-multilingual-icon":"onClickMLGlobeIcon","keydown .csui-multilingual-icon":"onKeydownGlobeIcon","input @ui.writeField":"onValueChange","focus .csui-multilingual-icon":"onFocus","focusout .csui-multilingual-icon":"onFocusOut"}),e},"templateHelpers":function(){var e,i="",n=c.noValue,l="",s="",o="readonly"===this.mode,r="",d=!this.popoverRequired&&!0||this.popoverRequired&&this.metadataLanguages&&this.metadataLanguages.enabled,u=this.options.alpacaField&&this.options.alpacaField.isRequired();if(r=u?c.requiredField:"",this.model.get("data")&&(n=this.model.get("data")),this.alpacaField&&this.alpacaField.options&&this.alpacaField.options.isMultiFieldItem&&(i=this.alpacaField.parent&&this.alpacaField.parent.options?this.alpacaField.parent.options.label:""),this.model.get("options")&&(l=o?t.str.sformat(c.fieldReadOnlyAria,this.model.get("options").label,n[p])+r:t.str.sformat(c.fieldEditAria,this.model.get("options").label,n[p])+r),s=o?t.str.sformat(c.fieldReadOnlyAria,i,n[p])+r:t.str.sformat(c.fieldEditAria,i,n[p])+r,this.popoverRequired){if(t.isString(n)||!n)e=n;else if(!(e=n[p])&&this.metadataLanguages){var h=this.metadataLanguages.languages;for(var f in h)if(n[h[f].language_code]){e=n[h[f].language_code];break}}}else e=n[p];return this.displayValue=e,t.extend(a.prototype.templateHelpers.apply(this),{"inputType":"text","idBtnLabel":this.options.labelId,"idBtnDescription":this.options.descriptionId,"readModeAria":l,"readModeMultiFieldAria":s,"multiFieldLabel":i,"ariaRequired":u,"multilangEnValue":e,"isReadOnly":!this.popoverRequired&&!0||this.popoverRequired&&o,"isGlobeRequired":d})},"onFocus":function(e){this.targetElement.hasClass("mlDisabled")&&!this.mlOptions.popoverClosed&&this._openMLFlyoutInEditMode()},"onFocusOut":function(e){this.mlOptions.popoverClosed=!1},"getEditValue":function(){return this.editVal},"getOldValue":function(){return this.oldVal},"isReadyToSave":function(){return this._isReadyToSave},"onKeyDownWrite":function(e){13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),!this.popoverRequired&&this._showMultilingualPicker())},"preSetValue":function(e){if(!this.popoverRequired)return e;if(this.popoverRequired){var i=""===e[p]?"":e[p]?e[p]:e;return e=this.getMLData(i)}var n=this.ui.writeField.val(),l=t.clone(this.editVal);return n===this.displayValue||""===n&&void 0===this.displayValue||(t.isString(l)&&(l={}),l[p]=n,this.editVal=l),l},"onWiteFieldClick":function(e){e.preventDefault(),e.stopPropagation(),!this.popoverRequired&&this._showMultilingualPicker()},"_showMultilingualPicker":function(){this.popoverRequired?this._showmultilingualPopover():this._showLanguageTextPicker()},"loadAddionalInfo":function(e){var i=this,n=i.model.get("data"),l=this.model.get("options")||{};i.metadataLanguages=this.options.metadataLanguages||l.metadataLanguages||o.getMetadataLanguageInfo(),e&&i.metadataLanguages.enabled&&(i.isMultilingualField=!0,p=i.metadataLanguages&&i.metadataLanguages.defaultLanguage,t.isString(n)&&(n={},n[p]=i.model.get("data"),i.oldVal=n),this.stopListening(this,"ml:value:updated").listenTo(this,"ml:value:updated",function(e){i.editVal=e.value_multilingual,i.targetElement.val(e.value),i.setValue(e.value_multilingual,!0),i.cancelReadmode()}),csui.require(["csui/controls/multilingual.text.picker/multilingual.popover.mixin"],function(e){e.mixin(h.prototype),i.trigger("mlMixin:isReady")}),i.stopListening(i,"ml:close:writeMode").listenTo(i,"ml:close:writeMode",function(){i.cancelReadmode()}))},"setStateWrite":function(){if(this.popoverRequired&&this.metadataLanguages.enabled){var e,i=this,n=i.model.get("data"),l=i.model.get("schema")||{};t.isString(n)&&(n={},n[p]=i.model.get("data")),e={"targetElement":i.ui.writeField,"mlGlobeIcon":i.ui.globeIcon,"validationRequired":l.required,"multilingualData":n,"changetoReadmodeOnclose":"writeonly"!==this.mode,"isTextAreaField":!1,"popoverClosed":!1},t.isFunction(i._loadMultiLingualPopover)?i._loadMultiLingualPopover(e):i.listenToOnce(this,"mlMixin:isReady",function(){i._loadMultiLingualPopover(e)})}},"_showmultilingualPopover":function(){this._showLanguagePopover()},"cancelReadmode":function(){var e=this.$el.find(".csui-icon-edit.edit-cancel");e.length&&e.trigger("click")},"onClickMLGlobeIcon":function(e){e.preventDefault(),e.stopPropagation(),this._showLanguagePopover()},"getMLData":function(e){var i=this.multiLingualForm&&this.multiLingualForm.data,n={},l=o.getUserMetadataLanguageInfo();return t.each(i,function(e){n[e.language_code]=e.value}),n&&(n[l]=e),n},"onValueChange":function(e){var t=e.target.value;this.targetElement&&this.targetElement.val(e.target.value),this.editVal=this.getMLData(t)},"onKeydownGlobeIcon":function(e){switch(e.keyCode){case 13:case 32:e.stopPropagation(),e.preventDefault(),this.ui.globeIcon.trigger("click");break;case 27:this.multiLingualForm&&this.multiLingualForm.trigger("ml:hide:popover");break;case 9:this.multiLingualForm&&this.multiLingualForm.isPopoverOpen&&(this.trigger("ml:set:focus",e),e.preventDefault(),e.stopPropagation())}},"_showLanguageTextPicker":function(){if(this._isReadyToSave){this._isReadyToSave=!1;var e=this;csui.require(["csui/dialogs/multilingual.text.picker/multilingual.text.picker"],function(i){new i({"connector":e.connector,"data":e.model.get("data")}).show().done(t.bind(e._handlePickerSuccess,e)).fail(t.bind(e._handlePickerCancel,e)).always(function(){e.ui.writeField.trigger("focus"),e._isReadyToSave=!0})})}},"_handlePickerSuccess":function(e){this.editVal=e,this.setValue(e,!0),this.render()},"_handlePickerCancel":function(e){}});return h}),csui.define("csui/controls/form/fields/alpaca/alpcsuimultilingual.textfield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/models/form","csui/controls/form/fields/multilingual.textfield.view","csui/utils/base"],function(e,t,i,n,l,a,s,o,r){return a.Fields.CsuiMultilingualTextField=a.Fields.TextField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"getFieldType":function(){return"otcs_multilingual_string"},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType())},"showField":function(){var e,a=this.id,s=this.options?this.options.descriptionId:"",r=i(this.field[0]).find("label");r&&1==r.length&&(e=r.attr("for")+"Label",r.attr("id",e)),this.fieldView=new o({"model":new n.Model({"data":this.data,"options":this.options,"schema":this.schema,"inputType":"text","id":a}),"id":t.uniqueId(a),"alpacaField":this,"labelId":e,"descriptionId":s,"value":this.data,"readonly":!0,"dataId":this.name,"path":this.path,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema}});var c=i("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(c),this.region=new l.Region({"el":c}),this.region.show(this.fieldView)},"setValueAndValidate":function(e,t){this.setValue(e);var i=!0;return t&&(i=this.validate(),this.refreshValidationState(!1)),i},"getValue":function(){return this.data},"focus":function(){this.fieldView.setFocus()},"destroy":function(){this.base(),this.region&&this.region.destroy()}}),a.registerFieldClass("otcs_multilingual_string",a.Fields.CsuiMultilingualTextField,"bootstrap-csui"),a.registerFieldClass("otcs_multilingual_string",a.Fields.CsuiMultilingualTextField,"bootstrap-edit-horizontal"),i.alpaca.Fields.CsuiMultilingualTextField}),csui.define("hbs!csui/controls/form/impl/fields/multilingual.textareafield/textareafield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'maxlength="'+e.escapeExpression((a=null!=(a=s(i,"maxLength")||(null!=t?s(t,"maxLength"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"maxLength","hash":{},"loc":{"start":{"line":4,"column":42},"end":{"line":4,"column":55}}}):a))+'"'},"3":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'placeholder="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"placeholder"):a,t))+'"\r\n              '},"5":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'placeholder="'+e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"loc":{"start":{"line":6,"column":35},"end":{"line":6,"column":49}}}):a))+'"'},"7":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'rows="'+e.escapeExpression(e.lambda(null!=(a=null!=t?s(t,"options"):t)?s(a,"rows"):a,t))+'"'},"9":function(e,t,i,n,l){return"readonly"},"11":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'name="'+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":9,"column":24},"end":{"line":9,"column":32}}}):a))+'"'},"13":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-required="'+e.escapeExpression((a=null!=(a=s(i,"ariaRequired")||(null!=t?s(t,"ariaRequired"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"ariaRequired","hash":{},"loc":{"start":{"line":10,"column":42},"end":{"line":10,"column":58}}}):a))+'"'},"15":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"data-"+e.escapeExpression((a=null!=(a=s(i,"fieldId")||(null!=t?s(t,"fieldId"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"fieldId","hash":{},"loc":{"start":{"line":11,"column":33},"end":{"line":11,"column":44}}}):a))+'="'+e.escapeExpression((a=null!=(a=s(i,"value")||(null!=t?s(t,"value"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":55}}}):a))+'" '},"17":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-labelledby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnLabel")||(null!=t?s(t,"idBtnLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnLabel","hash":{},"loc":{"start":{"line":12,"column":42},"end":{"line":12,"column":56}}}):a))+'"'},"19":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-describedby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnDescription")||(null!=t?s(t,"idBtnDescription"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnDescription","hash":{},"loc":{"start":{"line":13,"column":48},"end":{"line":13,"column":68}}}):a))+'" '},"21":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((a=null!=(a=s(i,"multiFieldLabel")||(null!=t?s(t,"multiFieldLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"multiFieldLabel","hash":{},"loc":{"start":{"line":14,"column":42},"end":{"line":14,"column":61}}}):a))+'" '},"23":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button type="button" tabindex="0" class="icon csui-multilingual-icon">\r\n        '+(null!=(a=(s(i,"icon-v2")||t&&s(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"small","iconName":"csui_action_language_switcher24"},"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":91}}}))?a:"")+"\r\n      </button>\r\n"},"25":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="icon-container">\r\n        <div class="csui-icon-edit inline-edit-icon edit-cancel" title="'+e.escapeExpression((a=null!=(a=s(i,"cancel")||(null!=t?s(t,"cancel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":22,"column":72},"end":{"line":22,"column":82}}}):a))+'"></div>\r\n      </div>\r\n'},"27":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"options"):t)?s(a,"applyFlag"):a,{"name":"if","hash":{},"fn":e.program(28,l,0),"inverse":e.noop,"loc":{"start":{"line":25,"column":6},"end":{"line":29,"column":13}}}))?a:""},"28":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="icon-container binf-hidden">\r\n          <div class="csui-icon apply-all binf-hidden" title="'+e.escapeExpression((a=null!=(a=s(i,"titleApplyAll")||(null!=t?s(t,"titleApplyAll"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"titleApplyAll","hash":{},"loc":{"start":{"line":27,"column":62},"end":{"line":27,"column":79}}}):a))+'" tabindex="0"></div>\r\n        </div>\r\n'},"30":function(e,t,i,n,l){return" disabled "},"32":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeMultiFieldAria")||(null!=t?s(t,"readModeMultiFieldAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeMultiFieldAria","hash":{},"loc":{"start":{"line":41,"column":26},"end":{"line":41,"column":52}}}):a))+'" data-multi="true"\r\n'},"34":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeAria")||(null!=t?s(t,"readModeAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeAria","hash":{},"loc":{"start":{"line":43,"column":26},"end":{"line":43,"column":42}}}):a))+'"\r\n        '},"36":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="csui-ellipsis-area"><span><span\r\n              class="cs-field-textarea-data">'+e.escapeExpression((a=null!=(a=s(i,"data")||(null!=t?s(t,"data"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"loc":{"start":{"line":47,"column":45},"end":{"line":47,"column":53}}}):a))+"</span></span>\r\n          </span>\r\n"},"38":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="placeholder" title="'+e.escapeExpression((a=null!=(a=s(i,"noValue")||(null!=t?s(t,"noValue"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"noValue","hash":{},"loc":{"start":{"line":50,"column":43},"end":{"line":50,
"column":54}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"loc":{"start":{"line":50,"column":56},"end":{"line":50,"column":70}}}):a))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="control-area cs-field-write">\r\n  <div class="cs-field-write-inner">\r\n    <textarea id="'+e.escapeExpression((s=null!=(s=o(i,"id")||(null!=t?o(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":3,"column":18},"end":{"line":3,"column":24}}}):s))+'" class="editable cs-no-resize"\r\n              '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"maxLength"):t,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":14},"end":{"line":4,"column":63}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"placeholder"):a,{"name":"if","hash":{},"fn":e.program(3,l,0),"inverse":e.program(5,l,0),"loc":{"start":{"line":5,"column":6},"end":{"line":6,"column":57}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"rows"):a,{"name":"if","hash":{},"fn":e.program(7,l,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":56}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"readonly"):a,{"name":"if","hash":{},"fn":e.program(9,l,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":45}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"name"):t,{"name":"if","hash":{},"fn":e.program(11,l,0),"inverse":e.noop,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":40}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"ariaRequired"):t,{"name":"if","hash":{},"fn":e.program(13,l,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":6},"end":{"line":10,"column":66}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"options"):t)?o(a,"data"):a,{"name":"each","hash":{},"fn":e.program(15,l,0),"inverse":e.noop,"loc":{"start":{"line":11,"column":6},"end":{"line":11,"column":66}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnLabel"):t,{"name":"if","hash":{},"fn":e.program(17,l,0),"inverse":e.noop,"loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":64}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnDescription"):t,{"name":"if","hash":{},"fn":e.program(19,l,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":6},"end":{"line":13,"column":77}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(21,l,0),"inverse":e.noop,"loc":{"start":{"line":14,"column":6},"end":{"line":14,"column":70}}}))?a:"")+">"+e.escapeExpression((s=null!=(s=o(i,"data")||(null!=t?o(t,"data"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"loc":{"start":{"line":14,"column":71},"end":{"line":14,"column":79}}}):s))+"</textarea>\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"isGlobeRequired"):t,{"name":"if","hash":{},"fn":e.program(23,l,0),"inverse":e.noop,"loc":{"start":{"line":15,"column":4},"end":{"line":19,"column":11}}}))?a:"")+(null!=(a=(o(i,"xif")||t&&o(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.mode !== 'writeonly'",{"name":"xif","hash":{},"fn":e.program(25,l,0),"inverse":e.program(27,l,0),"loc":{"start":{"line":20,"column":4},"end":{"line":30,"column":12}}}))?a:"")+'\r\n  </div>\r\n</div>\r\n\r\n<div class="cs-field-read">\r\n  <div class="cs-field-read-inner">\r\n    <div class="btn-container">\r\n      <button title="'+e.escapeExpression((s=null!=(s=o(i,"data")||(null!=t?o(t,"data"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"loc":{"start":{"line":38,"column":21},"end":{"line":38,"column":29}}}):s))+'"\r\n        '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?o(t,"schema"):t)?o(a,"readonly"):a,{"name":"if","hash":{},"fn":e.program(30,l,0),"inverse":e.noop,"loc":{"start":{"line":39,"column":8},"end":{"line":39,"column":49}}}))?a:"")+"\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(32,l,0),"inverse":e.program(34,l,0),"loc":{"start":{"line":40,"column":8},"end":{"line":44,"column":15}}}))?a:"")+">\r\n"+(null!=(a=(o(i,"xif")||t&&o(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.data !== '' && this.data !== null",{"name":"xif","hash":{},"fn":e.program(36,l,0),"inverse":e.program(38,l,0),"loc":{"start":{"line":45,"column":8},"end":{"line":51,"column":16}}}))?a:"")+'      </button>\r\n\r\n    </div>\r\n    <div class="icon-container">\r\n      <div title="'+e.escapeExpression((s=null!=(s=o(i,"edit")||(null!=t?o(t,"edit"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"loc":{"start":{"line":56,"column":18},"end":{"line":56,"column":26}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=o(i,"edit")||(null!=t?o(t,"edit"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"loc":{"start":{"line":56,"column":40},"end":{"line":56,"column":48}}}):s))+'" role="button"\r\n           class="csui-icon-edit inline-edit-icon icon-edit"></div>\r\n    </div>\r\n    <div tabindex="0" class="cs-icon icon-expandArrowDown binf-hidden cs-icon-exp-col"\r\n         aria-label="'+e.escapeExpression((s=null!=(s=o(i,"seeMore")||(null!=t?o(t,"seeMore"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"seeMore","hash":{},"loc":{"start":{"line":60,"column":21},"end":{"line":60,"column":32}}}):s))+'" role="button"></div>\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_form_impl_fields_multilingual.textareafield_textareafield",n),n}),csui.define("css!csui/controls/form/impl/fields/multilingual.textareafield/textareafield",[],function(){}),csui.define("csui/controls/form/fields/multilingual.textareafield.view",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/form/fields/textareafield.view","csui/utils/base","hbs!csui/controls/form/impl/fields/multilingual.textareafield/textareafield","css!csui/controls/form/impl/fields/multilingual.textareafield/textareafield","csui/lib/binf/js/binf"],function(e,t,i,n,l,a,s,o){"use strict";var r=a.extend({"constructor":function(e){e||(e={});var t=e.model.get("options")||{};this.ui.subInputField=".csui-multilingual-icon",this.metadataLanguages=t.metadataLanguages||s.getMetadataLanguageInfo(),this.isMultilingualEnabled=this.metadataLanguages.enabled,this.isTextAreaField=!0,this.saveMldata="",this.isF2KeyPressed=!1,this.keyAttribute=e.model&&e.model.has("options")&&e.model.get("options").keyAttribute,this.model=e.model,this.loadAddionalInformation(),this.oldVal=this.curVal=e.model.get("data"),this.editVal=this.curVal,this._isReadyToSave=!1,a.apply(this,arguments)},"ui":function(){return t.extend({},a.prototype.ui,{"globeIcon":".csui-multilingual-icon"})},"events":function(){var e=t.extend({},a.prototype.events,{"input @ui.writeField":"onValueChange"});return this.isMultilingualEnabled&&t.extend(e,{"click @ui.globeIcon":"onClickMLGlobeIcon","keydown @ui.globeIcon":"onKeydownGlobeIcon","focus .csui-multilingual-icon":"onFocus","focusout .csui-multilingual-icon":"onFocusOut"}),e},"className":"cs-formfield cs-textareafield cs-ml-textareafield","template":o,"loadAddionalInformation":function(){if(this.updateDataObject(),this.isMultilingualEnabled){var e=this;csui.require(["csui/controls/multilingual.text.picker/multilingual.popover.mixin"],function(t){t.mixin(r.prototype),e.trigger("mlMixin:isReady")}),this.listenTo(this,"ml:value:updated",function(t){var n=e.formView&&e.formView.node&&e.formView.node;if(e.prevMultilingualVal=n&&n.get(e.keyAttribute),e.keyAttribute&&n.set(e.keyAttribute,t.value_multilingual,{"silent":!0}),e.targetElement.val(t.value),e.keyAttribute?e.editVal=t.value:e.editVal=t.value_multilingual,this.isTextareaAutoHeight&&this.adjustTextareaHeight(),e.saveMldata=t,e.mlDataChanged=!0,e.isF2KeyPressed){var l=i.Event("keydown");l.keyCode=l.which=113,e.ui.writeField.trigger(l)}}),this.listenTo(this,"ml:close:writeMode",function(){var t=e.$el.find(".csui-icon-edit.edit-cancel");t.length&&t.trigger("click")})}},"onClickMLGlobeIcon":function(e){e.preventDefault(),e.stopPropagation(),this._showLanguagePopover()},"getMLData":function(e){var i=this.multiLingualForm&&this.multiLingualForm.data,n={},l=s.getUserMetadataLanguageInfo();return t.each(i,function(e){n[e.language_code]=e.value}),n&&(n[l]=e),n},"onValueChange":function(e){var t=e.target.value;this.targetElement&&this.targetElement.val(e.target.value),this.editVal=this.getMLData(t),!this.metadataLanguages.enabled&&(this._isReadyToSave=!0)},"onKeydownGlobeIcon":function(e){switch(e.keyCode){case 13:case 32:e.stopPropagation(),e.preventDefault(),this.ui.globeIcon.trigger("click");break;case 27:this.multiLingualForm&&this.multiLingualForm.trigger("ml:hide:popover");break;case 9:this.multiLingualForm&&this.multiLingualForm.isPopoverOpen&&(this.trigger("ml:set:focus",e),e.preventDefault(),e.stopPropagation())}},"updateDataObject":function(){var e,i=this,n=i.model&&i.model.get("data"),l=i.metadataLanguages&&i.metadataLanguages.defaultLanguage;if(t.isObject(n)){if(!(e=n[l])&&i.metadataLanguages){var a=i.metadataLanguages.languages;for(var s in a)if(n[a[s].language_code]){e=n[a[s].language_code];break}}i.textareaValue=e}},"setStateWrite":function(){if(this.metadataLanguages.enabled){this.updateDataObject(),this.saveMldata="",this.isF2KeyPressed=!1;var e,i=this.model.get("data"),n=this.metadataLanguages.defaultLanguage;!!this.keyAttribute&&(i=this.formView&&this.formView.node&&this.formView.node.get(this.keyAttribute)||{}),t.isString(i)&&(i={},i[n]=this.model.get("data")),e={"targetElement":this.ui.writeField,"mlGlobeIcon":this.ui.globeIcon,"validationRequired":!1,"multilingualData":i,"isTextAreaField":!0,"changetoReadmodeOnclose":"writeonly"!==this.mode,"popoverClosed":!1},this.isMultilingualEnabled&&(t.isFunction(this._loadMultiLingualPopover)?this._loadMultiLingualPopover(e):this.listenToOnce(this,"mlMixin:isReady",t.bind(function(){this._loadMultiLingualPopover(e)},this)))}},"onFocus":function(e){this.targetElement.hasClass("mlDisabled")&&!this.mlOptions.popoverClosed&&this._openMLFlyoutInEditMode()},"onFocusOut":function(e){this.mlOptions.popoverClosed=!1},"getEditValue":function(){return"read"===this.mode&&(this.editVal=this.ui.writeField.val()),this.editVal},"getOldValue":function(){return this.oldVal},"preSetValue":function(e){var t=this.metadataLanguages&&this.metadataLanguages.defaultLanguage,i=""===e[t]?"":e[t]?e[t]:e;return this.textareaValue=i,e=this.getMLData(i)},"isReadyToSave":function(){return this._isReadyToSave}});return r}),csui.define("csui/controls/form/fields/alpaca/alpcsuimultilingual.textareafield",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/models/form","csui/controls/form/fields/multilingual.textareafield.view","csui/utils/base"],function(e,t,i,n,l,a,s,o,r){return a.Fields.CsuiMultilingualTextAreaField=a.Fields.TextAreaField.extend({"constructor":function(e,t,i,n,l,a,s){this.base(e,t,i,n,l,a,s)},"getFieldType":function(){return"otcs_multilingual_textarea"},"postRender":function(e){this.base(e),this.showField(),this.field.parent().addClass("csui-field-"+this.getFieldType())},"showField":function(){var e,a=this.id,s=this.options?this.options.descriptionId:"",r=i(this.field[0]).find("label");r&&1==r.length&&(e=r.attr("for")+"Label",r.attr("id",e)),this.fieldView=new o({"model":new n.Model({"data":this.data,"options":this.options,"schema":this.schema,"id":a}),"id":t.uniqueId(a),"alpacaField":this,"labelId":e,"descriptionId":s,"value":this.data,"readonly":!0,"dataId":this.name,"path":this.path,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema}});var c=i("<div>").addClass("alpaca-control");this.getControlEl().replaceWith(c),this.region=new l.Region({"el":c}),this.region.show(this.fieldView)},"setValueAndValidate":function(e,t){this.setValue(e);var i=!0;return t&&(i=this.validate(),this.refreshValidationState(!1)),i},"focus":function(){this.fieldView.setFocus()},"destroy":function(){this.base(),this.region&&this.region.destroy()}}),a.registerFieldClass("otcs_multilingual_textarea",a.Fields.CsuiMultilingualTextAreaField,"bootstrap-csui"),a.registerFieldClass("otcs_multilingual_textarea",a.Fields.CsuiMultilingualTextAreaField,"bootstrap-edit-horizontal"),i.alpaca.Fields.CsuiMultilingualTextAreaField}),csui.define("css!csui/lib/alpaca/css/alpaca",[],function(){}),csui.define("csui/controls/form/form.view",["csui/lib/underscore","csui/lib/backbone","csui/lib/jquery","csui/utils/url","csui/utils/log","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/models/form","hbs!csui/controls/form/impl/templates/form","hbs!csui/controls/form/impl/templates/formsinglecol","hbs!csui/controls/form/impl/templates/formdoublecol","txt!csui/controls/form/impl/templates/alpaca.container.array.txt","txt!csui/controls/form/impl/templates/alpaca.container.array.item.txt","csui/utils/non-attaching.region/non-attaching.region","i18n!csui/controls/form/impl/nls/lang","csui/controls/form/fields/alpaca/alpnodepickerfield","csui/controls/form/fields/alpaca/alpcsuidateonlyfield","csui/controls/form/fields/alpaca/alpcsuidatetimefield","csui/controls/form/fields/alpaca/alpcsuibooleanfield","csui/controls/form/fields/alpaca/alpcsuitextfield","csui/controls/form/fields/alpaca/alpcsuitextareafield","csui/controls/form/fields/alpaca/alpcsuiselectfield","csui/controls/form/fields/alpaca/alpcsuiradiofield","csui/controls/form/fields/alpaca/alpcsuiintegerfield","csui/controls/form/fields/alpaca/alpcsuipasswordfield","csui/controls/form/fields/alpaca/alpcsuiurlfield","csui/controls/form/fields/alpaca/alpnodepickerfield","csui/controls/form/fields/alpaca/alpcsuiarrayfield","csui/controls/form/fields/alpaca/alpcsuiobjectfield","csui/controls/form/fields/alpaca/alpcsuiarraybuttonsfield","csui/controls/form/fields/alpaca/alpcsuireservebuttonfield","csui/controls/form/fields/alpaca/alpcsuitklfield","csui/controls/form/fields/tklfield.view","csui/controls/form/fields/alpaca/alpcsuimultilingual.textfield","csui/controls/form/fields/alpaca/alpcsuimultilingual.textareafield","css!csui/controls/form/impl/form","css!csui/lib/alpaca/css/alpaca","csui/lib/binf/js/binf-datetimepicker","csui/lib/handlebars.helpers.xif","csui-ext!csui/controls/form/form.view","csui/lib/jquery.when.all"],function(e,t,i,n,l,a,s,o,r,c,d,u,p,h,f){s.registerView({"id":"bootstrap-csui","parent":"bootstrap-edit-horizontal","type":"edit","ui":"bootstrap","title":"","displayReadonly":!0,"templates":{"control-textarea":"<div></div>","control-checkbox":"<div></div>","control-select":"<div></div>"},"callbacks":{},"styles":{},"horizontal":!0,"collapsible":!1}),s.registerTemplate("container-array",u),s.registerTemplate("container-array-item",p);var m=a.ItemView.extend({"className":function(){var e="cs-form";switch(this.mode){case"create":e+=" cs-form-create cs-form-show-helper";break;case"read":e+=" cs-form-read";break;case"update":e+=" cs-form-update"}return e},"constructor":function(t){if(t=e.extend({},t),this.breakFieldsAt=i.isNumeric(t.breakFieldsAt)&&t.breakFieldsAt>0?t.breakFieldsAt:8,this.mode=t.mode||"update","read"!==this.mode&&"update"!==this.mode&&"create"!==this.mode)throw new Error('Invalid form mode: "'+this.mode+'".');a.ItemView.prototype.constructor.call(this,t),this.layoutMode=this.options.layoutMode||"singleCol",this.setRequiredFieldsEditable="create"===this.mode,this.listenTo(this.model,"change",this.updateForm),this.listenTo(this.model,"reset",this.render),this.listenTo(this,"before:destroy",this._beforeDestroy),i(window).on("resize resize.tableview",{"view":this},this._onWindowResize)},"popover":!0,"_onWindowResize":function(e){if(e&&e.data&&e.data.view){var t=e.data.view;t.adjustLayout(t)}},"adjustLayout":function(e){var t=e.$el.closest(".cs-metadata-properties");t.length&&(t.outerWidth()<768?t.addClass("csui-metadata-low-resolution"):t.removeClass("csui-metadata-low-resolution"))},"updateForm":function(){return this.render()},"render":function(){return this.renderFinished=!1,this.triggerMethod("before:render",this),this._renderContent(),this.options.context&&this.options.context._applicationScope&&"search"===this.options.context._applicationScope.get("id")&&(this.isFormChanged=!1),this},"_renderContent":function(){this.alpaca={"data":this.model.get("data"),"schema":this.model.get("schema"),"options":this.model.get("options")},this._destroyForm(),this._modifyModel(),this.alpaca.view=this.model.get("view")||this._getLayout(),this.$el.addClass("binf-hidden"),e.extend(this.alpaca.options,{"validate":!0,"custom":{"some":"value"}}),this._otcsContextConfig={"context":this.options.context,"formView":this},this.$form=this.$el.alpaca({"connector":{"id":"otcs_context","config":this._otcsContextConfig},"data":this.alpaca.data,"schema":this.alpaca.schema,"view":this.alpaca.view,"options":e.extend({},this.alpaca.options,this._getFormTemplateHelpers()),"postRender":e.bind(this._formRendered,this)}),this.$form.on({"field:changed":e.bind(this._onFieldChanged,this),"show:colout":e.bind(this._onShowColout,this),"field:invalid":e.bind(this._onFieldInvalid,this),"click:applyAll":e.bind(this.onClickApplyAll,this),"reset":e.bind(this.resetForm,this)})},"_onShowColout":function(e){t.trigger("closeToggleAction"),e.context=this.options.context;var n=i(e.targetEl),l=n.data("binf.popover"),a=this;l||csui.require(["csui/controls/form/colout/colout.view"],function(i){var n=new t.Model({"data":e.formdata,"options":e.formoptions,"schema":e.formschema,"targetEl":e.targetEl,"coloutContainer":e.coloutContainer,"context":e.context}),l=new i(n);a.coloutNonAttachingRegion||(a.coloutNonAttachingRegion=new h({"el":a.el})),a.coloutNonAttachingRegion.show(l,{"render":!1})})},"_onFieldInvalid":function(e){this.triggerMethod("invalid:field",e)},"onClickApplyAll":function(t){var i=this.model.node.collection||this.node.collection;this._=e,this.args=t;var n=this;i&&i.models&&e.each(i.models,function(e){if(-1!==n.args.fieldpath.indexOf("_")){var t=n.args.fieldpath.split("_"),i=n.args.fieldpath,l=i.split("_"),a=l.splice(0,2).join("_"),s=l.join("_");void 0!==e.get("data").roles.categories[t[0]]&&(2===t.length&&void 0!==e.get("data").roles.categories[t[0]][n.args.fieldpath]?e.get("data").roles.categories[t[0]][n.args.fieldpath]=n.args.fieldvalue:e.get("data").roles.categories[t[0]]&&e.get("data").roles.categories[t[0]][a]&&void 0!==e.get("data").roles.categories[t[0]][a][s]&&(e.get("data").roles.categories[t[0]][a][s]=n.args.fieldvalue)),e.newCategories&&e.newCategories.models.length>0&&this._.each(e.newCategories.models,function(e){e.id===parseInt(t[0])&&void 0!==e.get("data")&&(2===t.length&&void 0!==e.get("data")[n.args.fieldpath]?e.get("data")[n.args.fieldpath]=n.args.fieldvalue:e.get("data")[a]&&void 0!==e.get("data")[a][s]&&(e.get("data")[a][s]=n.args.fieldvalue))})}},this),t.action(t.fieldevent,t.callback,t.view),this.trigger("click:applyAll",t)},"resetForm":function(){this.render()},"_getFormTemplateHelpers":function(){var t=this.getOption("formTemplateHelpers");return e.isFunction(t)&&(t=t.call(this)),t},"_onFieldChanged":function(e,t){var i="{0}:_onFieldChanged {1} {2}";l.debug(i,this.constructor.name,"enter",e)&&console.log(l.last),this.trigger("form:changed"),this.triggerMethod("change:field",this._getChangeFieldEventData(e),t),l.debug(i,this.constructor.name,"trigger change:field",e.fieldpath)&&console.log(l.last),l.debug(i,this.constructor.name,"return")&&console.log(l.last)},"_getChangeFieldEventData":function(t){var i=t.targetfieldid?{"parentField":{"name":t.fieldid,"path":t.fieldpath,"value":t.fieldvalue},"targetField":{"name":t.targetfieldid,"path":t.targetfieldpath,"value":t.targetfieldvalue},"name":t.targetfieldid,"path":t.targetfieldpath,"value":t.targetfieldvalue}:{"targetField":{"name":t.fieldid,"path":t.fieldpath,"value":t.fieldvalue},"name":t.fieldid,"path":t.fieldpath,"value":t.fieldvalue};return e.extend(i,{"view":this,"fieldView":t.fieldView,"model":this.model}),i},"_formRendered":function(e){this.form=this._otcsContextConfig.form=e,this.$el.removeClass("binf-hidden");var t=this,n=[],l={"async":function(){var e=i.Deferred();return n.push(e),function(){e.resolve()}}};this.updateRenderedForm(l),t.triggerMethod("render",t),i.whenAll.apply(i,n).always(function(){t.renderFinished=!0,t.triggerMethod("render:form",t)}),this.setTooltipsForLabels(),this.correctLabel4MV(),this.adjustLayout(this)},"isRenderFinished":function(){return!0===this.renderFinished},"setTooltipsForLabels":function(){var e=this.$el.find(".alpaca-container-label, .alpaca-container-item label");i.each(e,function(e,t){t.setAttribute("title",t.textContent.trim())})},"correctLabel4MV":function(){var t=this.$el.find("label.alpaca-container-label");i.each(t,function(t,n){var l=i(n).siblings("div.csui-multivalue-container");if(l.length>0){var a=e.uniqueId("mvLabel");i(n).attr("id",a),i(l).find("input, textarea, button.binf-dropdown-toggle, button.csui-btn-reserve-status-action").attr("aria-labelledby",a)}})},"updateRenderedForm":function(e){this.$(".alpaca-field-object>label").on("click",function(e){e.stopPropagation(),e.preventDefault()})},"_beforeDestroy":function(){this._destroyForm()},"_getLayout":function(){var t=this._splitFields(),i="singleCol"===this.layoutMode,n={},l=e.uniqueId("csform");e.each(t,function(t,a){var s=t.isSetType?"csfSingleCol_"+l+a:"csfLeftCol_"+l+a,o=t.isSetType||i?void 0:"csfRightCol_"+l+a;e.extend(n,this._bindFields(t,s,o))},this);return{"parent":"bootstrap-csui","layout":{"template":(i?c:d).call(this,{"modelId":l,"fields":t}),"bindings":n}}},"_modifyModel":function(){this.alpaca.options=this.alpaca.options||{},this.alpaca.options.focus=!1,this.alpaca.options.hideInitValidationError=!0,"general"===this.model.get("id")&&(this.alpaca.data=e.omit(this.alpaca.data,"name"),this.alpaca.schema.properties=e.omit(this.alpaca.schema.properties,"name"),this.alpaca.options.fields=e.omit(this.alpaca.options.fields,"name")),this.alpaca.data=e.omit(this.alpaca.data,["external_create_date","external_modify_date"]),this.alpaca.schema.properties=e.omit(this.alpaca.schema.properties,["external_create_date","external_modify_date"]),this.alpaca.options.fields=e.omit(this.alpaca.options.fields,["external_create_date","external_modify_date"]);var n=!1;if(this.options.metadataView&&this.options.metadataView.model&&(n=this.options.metadataView.model.get("applyFlag")),n){var l=[];this.options.metadataView&&this.options.metadataView.model.collection.models&&this.options.metadataView.model.collection.models.length>1&&e.each(this.options.metadataView.model.collection.models,function(t,i){if(t.get("data")&&t.get("data").roles){var n=[],a=[],s=[];e.each(t.get("data").roles.categories,function(e,t){n=n.concat(t)},this),t.removedCategories&&t.removedCategories.length>0&&(a=t.removedCategories),t.newCategories&&t.newCategories.models&&t.newCategories.models.length>0&&(s=e.pluck(t.newCategories.models,"id"),s=s.concat(s.map(function(e){return e.toString()}))),s.length>0&&(a=e.difference(a,s),n=e.union(n,s)),n=e.difference(n,a),l.push(n)}},this),this.commonCategories=e.intersection.apply(e,l)}var a=function(t,i){e.extend(t,{"actionbar":{"actions":[{"action":"remove","enabled":!0,"title":t.isSetType?f.removeRow:f.removeField,"aria-label":t.isSetType?f.removeRow:f.removeField,"iconClass":"csui-icon circle_delete_grey csui-array-icon-delete-"+i,"actionAria":e.str.sformat(f.removeFieldAria,t.label)},{"action":"add","enabled":!0,"title":t.isSetType?f.addRow:f.addField,"aria-label":t.isSetType?f.addRow:f.addField,"iconClass":"csui-icon circle_add_grey csui-array-icon-add-"+i,"actionAria":e.str.sformat(f.addFieldAria,t.label)},{"action":"up","enabled":!1},{"action":"down","enabled":!1}]}})},s=function(i,n){if(!(i instanceof t.Model))for(var l in i)if(i.hasOwnProperty(l)){var o;e.isObject(i[l])?(o=i[l].type,n&&!i[l].fieldKey&&(i[l].fieldKey=l),"otcs_user_picker"!==o&&"otcs_member_picker"!==o&&"otcs_group_picker"!==o||(i[l].fields?(i[l].type=void 0,i[l].fields.type="otcs_user"):i[l].type="otcs_user"),i[l]&&!0===i[l].toolbarSticky&&a(i[l],l),s(i[l],!1)):(o=i[l],"type"===l&&("otcs_user_picker"!==o&&"otcs_member_picker"!==o&&"otcs_group_picker"!==o||(i[l]="otcs_user")),"toolbarSticky"===l&&!0===i[l]&&a(i,l))}};s(this.alpaca.options.fields,!0);var o=function(t,i,n){for(var l in i)if(i.hasOwnProperty(l)){var a="array"===i[l].type,s="object"===i[l].type;if(i[l]&&i[l].type&&(a||s)){var r=a?i[l].items:i[l],c=t[l];if(c){c.toolbarSticky=!i[l].disabled,c.isMultiField=!0,c.uniqueId=l,c.messages=f,c.isEditMode="update"===n,c.fields&&(e.extend(c.fields.item,{"isMultiFieldItem":!0,"hideInlineActions":!0}),void 0!==c.validate&&e.extend(c.fields.item,{"validate":c.validate}));var d=r;if(d){if((1!==d.minItems&&"object"===d.type||d.maxItems!==d.minItems&&"object"===d.type)&&(c.isMultiRowSetEnabled="array"===i[l].type,c.toolbarSticky=!i[l].disabled,c.fields)){var u=a?c.fields.item.fields:c.fields.fields;u&&(e.defaults(d,{"minItems":1}),e.each(u,function(t){e.extend(t,{"isMultiFieldItem":!0}),c.onlyread=t.readonly}))}c.canWrite=void 0===c.readonly?!c.onlyread:!c.readonly,c.isTabable=c.isEditMode&&!c.isMultiFieldItem}}a?t[l].fields&&t[l].fields.item&&t[l].fields.item.fields&&o(t[l].fields.item.fields,r.properties,n):s&&o(t[l].fields,r.properties,n)}}};o(this.alpaca.options.fields,this.alpaca.schema.properties,this.mode);!function(t){for(var i in t)if(t.hasOwnProperty(i)){if(!e.isObject(t[i]))return t[i],void("toolbarSticky"===i&&!0===t[i]&&a(t,i));t[i].type,t[i]&&!0===t[i].toolbarSticky&&a(t[i],i),s(t[i],!1)}}(this.alpaca.options.fields);var r=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var l=e[n];l.setRequiredFieldsEditable=t.setRequiredFieldsEditable,l.mode=t.mode,l.label&&!l.labelModifed&&(l.label=l.label.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),l.label=i("<div>").innerHTML=l.label),l.labelModifed=!0,t.inContainer&&(l.inContainer=!0),-1!==n.indexOf("_")&&t.commonCategories&&-1!==t.commonCategories.indexOf(n.split("_")[0])&&(l.applyFlag=!0),l.fields&&r(l.fields,t)}},c={"mode":this.mode,"inContainer":!!this.options&&!!this.options.node&&!!this.options.node.get("container"),"setRequiredFieldsEditable":this.setRequiredFieldsEditable,"commonCategories":this.commonCategories};r(this.alpaca.options.fields,c)},"_splitFields":function(){var t,i=function(e,t){this.isSetType=e,this.rgVals=[],this.rgKeys=[],this.rgObjectKeys=[]},n=this.alpaca.schema,l=this.alpaca.options,a=JSON.parse(JSON.stringify(this.alpaca.data)),s=new i,o=[],r={};e.reduce(n.properties,e.bind(function(n,s,c,d){var u="array"===s.type&&"object"===s.items.type;s.type;if(l.fields&&l.fields[c]&&l.fields[c].hidden)return n;if(void 0!==n.isSetType||(n.isSetType=u),n.isSetType!==u&&(o.push(n),n=new i(u)),"object"===s.type&&(n.rgObjectKeys=n.rgObjectKeys.concat(e.keys(s.properties))),u&&(l.isSetType=u,l.fields&&l.fields[c]&&e.extend(l.fields[c],{"isSetType":!0}),a[c])){var p=a[c][0]||a[c];e.each(s.properties||s.items.properties,function(e,t){var i=p[t];if(e.items&&e.items.defaultItems)if(i&&i.length>e.items.defaultItems)for(;i.length>e.items.defaultItems;)i.pop();else if(i&&i.length<e.items.defaultItems)for(;i.length<e.items.defaultItems;)i.push("")}),this.setEmptyValueInData(a),r[c]=JSON.parse(JSON.stringify(p))}return n.rgVals.push(s),n.rgKeys.push(c),t=n,n},this),s),Object.keys(r).length>0&&(l.defaultData=r),t&&o.push(t);var c=e.sortBy(l.fields,"order"),d=e.clone(s.rgKeys),u=e.clone(s.rgVals);return!!e.findKey(l.fields,"order")&&c.forEach(function(t,i){var n=e.indexOf(d,t.fieldKey);s.rgKeys[i]=d[n],s.rgVals[i]=u[n]}),o},"setEmptyValueInData":function(t){var i=this;e.each(t,function(e,n){t[n]instanceof Object?i.setEmptyValueInData(t[n]):t[n]=""})},"_bindFields":function(t,i,n){var l=t.rgKeys,a=t.rgObjectKeys,s=l.length+a.length,o={};if(t.isSetType||!n)e.each(l,function(e,t){o[e]=i},this);else if(n)if(l.length>this.breakFieldsAt)e.each(l,function(e,t){o[e]=t<s/2?i:n},this);else if(l.length<this.breakFieldsAt)e.each(l,function(e,t){o[e]=i},this);else{var r=this.breakFieldsAt/2+1;e.each(l,function(e,t){o[e]=t<r?i:n},this)}return o},"_destroyForm":function(){this.form&&(this.form.destroy(),this.form=void 0),this.$form&&(this.$form.off("field:changed"),this.$form.off("field:invalid"),this.$form.off("reset"),this.$form.off("scroll"),this.$form.empty(),this.$form=void 0),this.form&&this.form.destroy()},"validate":function(e){this.form.validate(!0);var t=this.form.isValid(!0);return this.form.refreshValidationState(!0,e),t},"setFocus":function(){this.form.children.some(function(e){var t=!e.options.readonly&&!e.schema.readonly;return t&&e.trigger("focus"),t})},"getValues":function(e){var t=this.form.getValue();return t&&e&&(t=o.getValueOnPath(t,e)),t},"_blockActions":function(){},"_unblockActions":function(){},"_validate":function(e){return!0},"hideNotRequired":function(t){var n=this.$(".alpaca-field"),l=this.$(".thumbnail_section"),a=i.merge(n,l),s=a.not(".alpaca-field-object, .cs-form-set .alpaca-field-array"),o=a.filter(".alpaca-field-object, .cs-form-set .alpaca-field-array");e.each(o,function(e){0===i(e).find(".alpaca-required").length&&s.push(e)});var r=s.not(".alpaca-required"),c=a.length===r.length,d=e.filter(r,function(e){return e=e&&i(e).closest(".cs-form-set").length>0?e:void 0}),u=e.filter(d,function(e){return e=i(e).hasClass("alpaca-field-array")&&0===i(e).closest(".cs-form-set-container").find(".alpaca-required").length?e:void 0});r=e.union(e.difference(r,d),u);var p=c?this.$el:r,h=t?"addClass":"removeClass";return p="addClass"===h?e.filter(p,function(e){return e=i(e).hasClass("binf-hidden")?i(e).addClass("hidden-field"):e}):e.filter(p,function(e){return e=i(e).hasClass("hidden-field")?void 0:e}),void 0!==t&&i(p)[h]("binf-hidden"),t?i(r).attr("data-cstabindex","-1"):i(r).removeAttr("data-cstabindex"),this.$el[h]("csui-required-fields-only"),c}});m.version="1.0";var g=s.Connector.extend({});return s.registerConnectorClass("otcs_context",g),m}),csui.define("hbs!csui/controls/typeaheadpicker/impl/typeaheaditem",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="item-info lightweight'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(2,l,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":35},"end":{"line":2,"column":72}}}))?a:"")+' binf-pull-left">\r\n    <span class="csui-item-name '+e.escapeExpression((s=null!=(s=o(i,"cssItemName")||(null!=t?o(t,"cssItemName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cssItemName","hash":{},"loc":{"start":{"line":3,"column":32},"end":{"line":3,"column":47}}
}):s))+' binf-pull-left" title="'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":71},"end":{"line":3,"column":79}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":81},"end":{"line":3,"column":89}}}):s))+"</span>\r\n  </div>\r\n"},"2":function(e,t,i,n,l){return" binf-disabled"},"4":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="item-picture csui-icon-group'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(2,l,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":43},"end":{"line":6,"column":80}}}))?a:"")+' binf-pull-left"></span>\r\n  <div class="item-info fullweight'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(2,l,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":34},"end":{"line":7,"column":71}}}))?a:"")+' binf-pull-left">\r\n    <span class="csui-item-name '+e.escapeExpression((s=null!=(s=o(i,"cssItemName")||(null!=t?o(t,"cssItemName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cssItemName","hash":{},"loc":{"start":{"line":8,"column":32},"end":{"line":8,"column":47}}}):s))+' binf-pull-left" title="'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":71},"end":{"line":8,"column":79}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":81},"end":{"line":8,"column":89}}}):s))+"</span>\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"moreHtml"):t,{"name":"if","hash":{},"fn":e.program(5,l,0),"inverse":e.noop,"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":41}}}))?a:"")+"\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(7,l,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":4},"end":{"line":12,"column":11}}}))?a:"")+"  </div>\r\n"},"5":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=null!=(s=o(i,"moreHtml")||(null!=t?o(t,"moreHtml"):t))?s:e.hooks.helperMissing,a="function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"moreHtml","hash":{},"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":34}}}):s)?a:""},"7":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="message binf-pull-left">'+e.escapeExpression((a=null!=(a=s(i,"disabled-message")||(null!=t?s(t,"disabled-message"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"disabled-message","hash":{},"loc":{"start":{"line":11,"column":43},"end":{"line":11,"column":63}}}):a))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"lightWeight"):t,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.program(4,l,0),"loc":{"start":{"line":1,"column":0},"end":{"line":14,"column":7}}}))?a:"")+"\r\n"}});return i.registerPartial("csui_controls_typeaheadpicker_impl_typeaheaditem",n),n}),csui.define("css!csui/controls/typeaheadpicker/impl/typeaheadpicker",[],function(){}),csui.define("csui/controls/typeaheadpicker/impl/typeaheaditem.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/utils/nodesprites","csui/controls/node-type.icon/node-type.icon.item.view.mixin","hbs!csui/controls/typeaheadpicker/impl/typeaheaditem","css!csui/controls/typeaheadpicker/impl/typeaheadpicker"],function(e,t,i,n,l,a,s){var o=i.ItemView.extend({"template":s,"tagName":"div","className":"csui-typeaheadpicker-item","ui":{"customImage":".item-picture .csui-custom-image","defaultIcon":".item-picture .csui-default-icon"},"templateHelpers":function(){var e;if(this.options.hbs&&this.options.hbs.itemMoreTemplate){var t=this.options.hbs.itemMoreHelper?this.options.hbs.itemMoreHelper.call(this):this.model.attributes;e=this.options.hbs.itemMoreTemplate(t)}return{"name":this.formatItemName(this.model),"moreHtml":e,"disabled":this.model.get("disabled"),"disabled-message":this.options.disabledMessage,"lightWeight":!!this.options.lightWeight,"imageUrl":"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=","cssItemName":this.options.css&&this.options.css.itemName||"name","cssCustomImage":this.options.css&&this.options.css.customImage||"csui-icon binf-img-circle","cssDefaultIcon":this.options.css&&this.options.css.defaultIcon||"csui-icon csui-initials image_typeahead_placeholder"}},"formatItemName":function(e){return this.options.formatItemName?this.options.formatItemName(e):n.formatMemberName(e)},"constructor":function(e){e||(e={}),e.disabledMessage||(e.disabledMessage=""),e.css&&e.css.root&&(this.className=e.css.root),i.ItemView.prototype.constructor.call(this,e),this.model.connector||(this.model.connector=this.options.connector),this.makeNodeTypeIconItemView()},"attachElContent":function(){var e=i.ItemView.prototype.attachElContent.apply(this,arguments);if(!this.options.lightWeight){var t=this.$(".item-picture"),n=this.options.css&&this.options.css.defaultIcon||"csui-icon csui-initials image_typeahead_placeholder",a=this.options.css&&this.options.css.customImage||"csui-icon binf-img-circle";n+=" csui-default-icon",a+=" csui-custom-image";var s={};(" "+n+" ").indexOf(" csui-initials ")<0&&(" "+n+" ").indexOf(" csui-nodesprites ")<0&&(s.nodeSprite=new l.model({"className":n})),this.renderNodeTypeIconView(this.model,t,n,a,s)}return e}});return a.mixin(o.prototype),o}),csui.define("csui/controls/typeaheadpicker/nls/typeaheadpicker.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/typeaheadpicker/nls/root/typeaheadpicker.lang",{"placeholderDefault":"Enter a name...","noResults":"No results found","titleClearIcon":"Clear search value","titleSearchIcon":"Search"}),csui.define("hbs!csui/controls/typeaheadpicker/impl/typeaheadpicker",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((a=null!=(a=s(i,"ariaLabel")||(null!=t?s(t,"ariaLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"ariaLabel","hash":{},"loc":{"start":{"line":4,"column":63},"end":{"line":4,"column":76}}}):a))+'"'},"3":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-describedby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnDescription")||(null!=t?s(t,"idBtnDescription"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnDescription","hash":{},"loc":{"start":{"line":5,"column":47},"end":{"line":5,"column":67}}}):a))+'" '},"5":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-required="'+e.escapeExpression((a=null!=(a=s(i,"isRequired")||(null!=t?s(t,"isRequired"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"isRequired","hash":{},"loc":{"start":{"line":6,"column":38},"end":{"line":6,"column":52}}}):a))+'"'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-item-picker '+e.escapeExpression((s=null!=(s=o(i,"classItemPicker")||(null!=t?o(t,"classItemPicker"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"classItemPicker","hash":{},"loc":{"start":{"line":1,"column":27},"end":{"line":1,"column":46}}}):s))+'" role="combobox"\r\n     aria-expanded="false" aria-haspopup="listbox">\r\n  <input id="'+e.escapeExpression((s=null!=(s=o(i,"id_input")||(null!=t?o(t,"id_input"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id_input","hash":{},"loc":{"start":{"line":3,"column":13},"end":{"line":3,"column":25}}}):s))+'" type="text" class="typeahead binf-form-control cs-search" autocomplete="off"\r\n         aria-autocomplete="list"'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"ariaLabel"):t,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":33},"end":{"line":4,"column":84}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnDescription"):t,{"name":"if","hash":{},"fn":e.program(3,l,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":76}}}))?a:"")+"\r\n    "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"isRequired"):t,{"name":"if","hash":{},"fn":e.program(5,l,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":60}}}))?a:"")+' placeholder="'+e.escapeExpression((s=null!=(s=o(i,"placeholder")||(null!=t?o(t,"placeholder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"placeholder","hash":{},"loc":{"start":{"line":6,"column":74},"end":{"line":6,"column":89}}}):s))+'">\r\n  <div class="typeahead cs-search-clear csui-icon formfield_clear" title="'+e.escapeExpression((s=null!=(s=o(i,"titleClearIcon")||(null!=t?o(t,"titleClearIcon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"titleClearIcon","hash":{},"loc":{"start":{"line":7,"column":74},"end":{"line":7,"column":92}}}):s))+'"\r\n       role="button" aria-label="'+e.escapeExpression((s=null!=(s=o(i,"titleClearIcon")||(null!=t?o(t,"titleClearIcon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"titleClearIcon","hash":{},"loc":{"start":{"line":8,"column":33},"end":{"line":8,"column":51}}}):s))+'" style="" tabindex="0"></div>\r\n  <div class="typeahead cs-search-icon icon-sv-search" title="'+e.escapeExpression((s=null!=(s=o(i,"titleSearchIcon")||(null!=t?o(t,"titleSearchIcon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"titleSearchIcon","hash":{},"loc":{"start":{"line":9,"column":62},"end":{"line":9,"column":81}}}):s))+'"\r\n       role="button" aria-label="'+e.escapeExpression((s=null!=(s=o(i,"titleSearchIcon")||(null!=t?o(t,"titleSearchIcon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"titleSearchIcon","hash":{},"loc":{"start":{"line":10,"column":33},"end":{"line":10,"column":52}}}):s))+'"></div>\r\n</div>'}});return i.registerPartial("csui_controls_typeaheadpicker_impl_typeaheadpicker",n),n}),csui.define("css!csui/controls/form/impl/fields/typeaheadfield/typeaheadfield",[],function(){}),csui.define("csui/controls/typeaheadpicker/typeaheadpicker.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/handlebars","csui/utils/base","csui/utils/url","csui/utils/log","csui/controls/tile/behaviors/infinite.scrolling.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/typeaheadpicker/impl/typeaheaditem.view","i18n!csui/controls/typeaheadpicker/nls/typeaheadpicker.lang","hbs!csui/controls/typeaheadpicker/impl/typeaheadpicker","css!csui/controls/typeaheadpicker/impl/typeaheadpicker","css!csui/controls/form/impl/fields/typeaheadfield/typeaheadfield","csui/lib/bootstrap3-typeahead","csui/lib/jquery.when.all"],function(e,t,i,n,l,a,s,o,r,c,d,u,p,h){function f(){var e={"args":arguments,"toString":function(){var e=Array.prototype.slice.apply(this.args);return e[2]=e[2]&&e[2][0]||"undefined",e.join(" ")}};y.debug(e)&&console.log(y.last)}function m(){this.$el.on("keydown",i.proxy(function(e){function t(){if(!e.shiftKey&&this.context&&this.context.shown){if(this.scrollByKey&&this.scrollByKey.fetching)return;var t=this.scrollByKey={"keyEvent":e},n=i.proxy(function(e){this.scrollByKey&&this.scrollByKey===t&&delete this.scrollByKey},this);return this.$el.one("mousemove",n),setTimeout(function(){this.$el.off("mousemove",n),this.scrollByKey&&this.scrollByKey===t&&delete this.scrollByKey}.bind(this),30),!0}}switch(e.keyCode){case 34:case 35:case 40:t.call(this)}},this)),this.listenTo(this,"before:collection:scroll:fetch",function(){this.scrollByKey&&(this.scrollByKey=t.extend({"fetching":!0},t.pick(this.scrollByKey,"keyEvent")))}),this.listenTo(this,"collection:scroll:fetch",function(){var e=this.context;if(e){var t=e.$scrollContainer.scrollTop(),n=e.$menu.find(".binf-active"),l=e.$menu.find("li").index(n),a=this.scrollByKey&&this.scrollByKey.keyEvent;delete this.scrollByKey,e.process(this.collection.models),l>=0&&(e.$menu.find(".binf-active").removeClass("binf-active"),n=i(e.$menu.find("li")[l]).addClass("binf-active")),n.length&&e.scrollIntoView(n,a),t>e.$scrollContainer.scrollTop()&&e.$scrollContainer.scrollTop(t)}}),this.listenTo(this,"collection:scroll:fetch:error",function(){delete this.scrollByKey})}function g(){var e=this.ui.searchbox.closest(".csui-perfect-scrolling").length>0?".csui-perfect-scrolling":".csui-normal-scrolling",t=this.ui.searchbox.closest(e);return t.length<=0&&(t=this.ui.searchbox.closest(".alpaca-field")),t}function v(e){return e.length>0?this.options.enableInfiniteScrolling:"auto"===this.options.scrollContainerHeight}function b(e,n){function l(){function l(){var t;try{f("call:",s.length,s[0],d[0]),e.apply(c,d).then(h,m),t=!0}finally{t||m()}}function o(){var e,a=!0;if(n)try{a=n(s,this.ok,arguments),e=!0}finally{e||(a=i.Deferred().reject().promise())}if(!0===a||t.isArray(a)||t.isArguments(a))d=!0===a?d:a,void 0===this.ok&&s.length>1?(f("previous then call:",s.length,s[s.length-1]),g.then(l,l)):(f("checked now call:",s.length,s[0]),l());else if(!1===a)void 0===this.ok?s.length<=1?h():(s.pop(),g.then(u.resolve,u.reject)):(this.ok?h:m).apply(u,arguments);else if(a&&a.then)void 0===this.ok&&s.length>1?(s.pop(),g.then(function(){a.then(u.resolve,u.reject)},function(){a.then(u.resolve,u.reject)})):a.then(h,m);else{if(!(void 0===this.ok&&void 0===a&&s.length>1))throw new Error("Invalid callback result!");g.then(o.bind({"ok":!0}),o.bind({"ok":!1}))}}function r(){f("clean:",s.length,s[0],this.ok,arguments[0]&&arguments[0].length),s.shift(),0===s.length&&(a=void 0),(this.ok?u.resolve:u.reject).apply(u,arguments)}var c=this,d=arguments,u=i.Deferred(),p=u.promise(),h=r.bind({"ok":!0}),m=r.bind({"ok":!1}),g=a;return a=p,s.push(d),o.call({}),p}var a,s=[];return l}var y=new r(e.id);return l.LayoutView.extend({"template":h,"templateHelpers":function(){var e=this.options.id_input&&this.options.id_input.length>0?this.options.id_input:t.uniqueId("csui-typeaheadpicker-input");return{"placeholder":this.options.placeholder,"id_input":e,"ariaLabel":this.options.ariaLabel||this.options.placeholder,"idBtnDescription":this.options.descriptionId,"titleClearIcon":this.options.titleClearIcon||p.titleClearIcon,"titleSearchIcon":this.options.titleSearchIcon||p.titleSearchIcon,"isRequired":this.options.isRequired,"classItemPicker":this.options.css&&this.options.css.itemPicker||"csui-control-typeaheadpicker"}},"ui":{"itempicker":"div.cs-item-picker","searchbox":"input.typeahead","searchicon":".typeahead.cs-search-icon","searchclear":".typeahead.cs-search-clear"},"behaviors":function(){return{"InfiniteScrolling":{"behaviorClass":c,"contentParent":function(){var e=this.context;if(e)return e.$scrollContainer},"content":function(){var e=this.context;if(e)return e.$scrollContainer[0]===e.$menu[0]?e.$menu.find("li"):e.$menu},"bindEvent":function(){return this.options.enableInfiniteScrolling?"typeahead:picker:open":"none"},"unbindEvent":function(){return this.options.enableInfiniteScrolling?"typeahead:picker:before:open before:destroy":"none"},"fetchMoreItemsThreshold":function(){return this.options.fetchMoreItemsThreshold}},"TabableRegionBehavior":{"behaviorClass":d}}},"currentlyFocusedElement":function(e){return this.ui.searchclear&&i(this.ui.searchclear).is(":visible")&&e&&e.shiftKey?this.ui.searchclear:this.ui.searchbox},"triggers":{"click @ui.searchbox":"click","click @ui.searchicon":"click"},"events":{"keyup @ui.searchbox":"onKeyUp","keydown @ui.searchbox":"onKeyDown","click @ui.searchclear":"onClickClear","keydown @ui.searchclear":"onClickClear","dragstart .typeahead.binf-dropdown-menu li > a":"onDragItem"},"constructor":function(e){if(e||(e={}),e.css&&e.css.root&&(this.className=e.css.root),this.pickerListId=t.uniqueId("pickerList"),!e.collection)throw new Error("Collection is missing in the constructor options.");void 0!==e.placeholder||(e.placeholder=p.placeholderDefault),e.clearOnSelect||(e.clearOnSelect=!1),e.items||(e.items="all"),e.delay||(e.delay=200),e.disabledMessage||(e.disabledMessage=""),e.prettyScrolling||(e.prettyScrolling=!1),e.fetchMoreItemsThreshold||(e.fetchMoreItemsThreshold=95),e.model||(e.model=new e.collection.model(void 0,{"connector":e.collection.connector})),l.LayoutView.prototype.constructor.call(this,e),this.options.enableInfiniteScrolling&&m.call(this)},"onRender":function(){i(this.ui.searchicon).on("click",t.bind(this.onClickIcon,this));var e=a.compile('<li role="option" id="noResults" title="{{langNoResults}}" class="csui-typeahead-picker-no-results{{#if classNoResults}} {{classNoResults}}{{/if}}">{{langNoResults}}</li>')({"classNoResults":this.options.css&&this.options.css.noResults,"langNoResults":p.noResults}),n=this,l=b(function(e,t,l){if(y.debug('typeaheadPickerView._retrieveItems "{0}"',e)&&console.log(y.last),n.context&&l&&l.more){var a=i.Deferred(),s=n.collection;return s.setSkip(s.length,!1),s.fetch({"reset":!1,"remove":!1,"merge":!1}).then(function(){a.resolve(n.collection.models)},function(e){a.reject(e)}),a.promise()}return n._retrieveItems.apply(n,arguments)},function(e,t,n){return e.length<=1?(f("sqcb true:",e.length,e[0]),!0):void 0===t?void f("sqcb undefined:",e.length,e[e.length-1]):(f("sqcb reject:",e.length,e[0]),i.Deferred().reject().promise())}),o={"items":this.options.items,"delay":this.options.delay,"collection":this.collection,"autoSelect":!1,"matcher":this._matchItems,"sorter":this._sortItems,"source":l,"displayText":t.bind(this._retrieveDisplayText,this),"highlighter":t.bind(this._renderHighlighter,this),"afterSelect":t.bind(this._afterSelect,this),"nextHighlighter":t.bind(this._nextHighlighter,this),"accessibility":t.bind(this._accessibility,this),"pickerListId":this.pickerListId,"currentHighlighter":t.bind(this._currentHighlighter,this),"prettyScrolling":this.options.prettyScrolling,"appendTo":this.ui.itempicker,"handleNoResults":!0,"emptyTemplate":e,"beforeShow":t.bind(this._beforePositioning,this),"afterShow":t.bind(this._positionContainer,this),"blur":this._blur};this.options.scrollContainerHeight&&(o.scrollContainerHeight=this.options.scrollContainerHeight),this.options.typeaheadOptions&&(o=i.extend(o,this.options.typeaheadOptions)),this.options.useScrollContainer||i.isFunction(i.fn.perfectScrollbar)&&this.options.prettyScrolling||(o.scrollContainer=null),this.options.enableInfiniteScrolling&&(o.showMore=function(){return!function(){var e=n.collection,t=null!=e.totalCount&&e.length>=e.totalCount;return null==e.totalCount&&(t=0===e.length?e.fetched:e.length<e.topCount),t}()}),this.typeaheadOptions=o,this.ui.searchbox.typeahead(o);var r=this.context=this.ui.searchbox.data("typeahead");r.prettyScrolling?r.$scrollContainer.addClass("csui-perfect-scrolling csui-no-scroll-x"):r.$scrollContainer.addClass("csui-normal-scrolling csui-no-scroll-x"),this.model.get(this.model.idAttribute||"id")&&this.ui.searchbox.val(s.formatMemberName(this.model)),this.updateStyles()},"onKeyUp":function(e){this.updateStyles(),""===this.ui.searchbox.val()?9!==e.keyCode&&13!==e.keyCode&&16!==e.keyCode&&38!==e.keyCode&&40!==e.keyCode?(y.debug("typeaheadPickerView.onKeyUp empty")&&console.log(y.last),this.trigger("item:clear"),this.ui.searchbox.removeAttr("aria-activedescendant")):y.debug("typeaheadPickerView.onKeyUp key skipped")&&console.log(y.last):y.debug("typeaheadPickerView.onKeyUp value")&&console.log(y.last)},"onClickIcon":function(){this.options&&this.options.showAllOnClickIcon?this.context&&this.context.$scrollContainer.is(":visible")&&""===this.query?y.debug("typeaheadPickerView.onClickIcon lookup all skipped")&&console.log(y.last):(y.debug("typeaheadPickerView.onClickIcon lookup all")&&console.log(y.last),this.ui.searchbox[0].focus(),this.ui.searchbox.select(),this.ui.searchbox.typeahead("lookup","")):this.context&&this.context.$scrollContainer.is(":visible")?y.debug("typeaheadPickerView.onClickIcon lookup skipped")&&console.log(y.last):(y.debug("typeaheadPickerView.onClickIcon lookup matching")&&console.log(y.last),this.ui.searchbox[0].focus(),this.ui.searchbox.select(),this.ui.searchbox.typeahead("lookup"))},"onKeyDown":function(e){9===e.keyCode&&i(this.ui.searchclear).is(":visible")&&(e.shiftKey?(this.updateStyles(),this.ui.searchbox.typeahead("hide")):(e.preventDefault(),e.stopPropagation(),this.ui.searchclear[0].focus()))},"onClickClear":function(e){"click"===e.type||13===e.keyCode?(y.debug("typeaheadPickerView.onClickClear clicked")&&console.log(y.last),this.ui.searchbox.val(""),this.updateStyles(),this.trigger("item:clear"),this.ui.searchbox.removeAttr("aria-activedescendant"),this.ui.searchbox.typeahead("hide"),this.ui.searchbox[0].focus()):9===e.keyCode&&i(this.ui.searchclear).is(":visible")?(y.debug("typeaheadPickerView.onClickClear tabbed")&&console.log(y.last),e.shiftKey?(e.preventDefault(),e.stopPropagation(),this.ui.searchbox[0].focus()):(this.updateStyles(),this.ui.searchbox.typeahead("hide"))):y.debug("typeaheadPickerView.onClickClear skipped")&&console.log(y.last)},"onDragItem":function(e){return!1},"updateStyles":function(){var e=this.ui.searchbox.val()&&this.ui.searchbox.val().length>0;this.ui.searchclear.css({"display":e?"":"none"})},"_retrieveItems":function(e){if(this.query=e,this.options.onRetrieveItems)return this.options.onRetrieveItems(this.collection,e);var n=this.collection,l=i.Deferred(),a=!1;return n.setFilter(t.object([this.model.nameAttribute||"name"],[e]),{"fetch":!1})?a=!0:this.options&&this.options.typeaheadOptions&&0===this.options.typeaheadOptions.minLength&&(a=!this.filled),a?(this.options.enableInfiniteScrolling&&n.setSkip(0,!1),n.fetch({"reset":!0}).then(t.bind(function(){this.filled=!0,l.resolve(n.models)},this),function(){l.reject()})):l.resolve(n.models),l.promise()},"_retrieveDisplayText":function(e){return e.get(this.model.nameAttribute||"name")},"_renderHighlighter":function(e){var i=this.collection.findWhere(t.object([this.model.nameAttribute||"name"],[e]));return new(this.options.TypeaheadItemView?this.options.TypeaheadItemView(i):u)(t.extend({"model":i,"connector":this.collection.connector,"disabledMessage":this.options.disabledMessage,"lightWeight":this.options.lightWeight},this.options.itemOptions||{})).render().el},"_matchItems":function(e){return!this.options.onMatchItems||this.options.matchItems(this.collection,e)},"_sortItems":function(e){return e},"_afterSelect":function(e){var t=this.options.clearOnSelect?"":s.formatMemberName(e);y.debug("typeaheadPickerView._afterSelect {0}",t)&&console.log(y.last),this.ui.searchbox.val(t),this.updateStyles(),this.trigger("item:change",{"item":e})},"_currentHighlighter":function(e){},"_nextHighlighter":function(e){},"_accessibility":function(e){this.ui.searchbox.attr("aria-activedescendant",e.attr(this.model.idAttribute||"id"))},"_blur":function(){this.$element.is(":focus")||(this.focused=!1),!this.mousedover&&this.shown&&this.hide()},"_beforePositioning":function(e){var t=g.call(this);t.length>0&&e.$appendTo&&e.$appendTo.addClass("csui-transparent"),this.context=e,this.trigger("typeahead:picker:before:open"),v.call(this,t)&&e.$scrollContainer.css({"max-height":"","display":"","position":"","right":"","top":"","bottom":"","left":""})},"_positionContainer":function(e){if(y.debug('typeaheadPickerView._positionContainer "{0}"',e.query)&&console.log(y.last),e.query.length<e.options.minLength)return void e.hide();var t=0,n=0,l=0,a=g.call(this),o=e.$scrollContainer.children("ul.typeahead.binf-dropdown-menu").height();if(this.ui.searchbox.attr("aria-controls",this.pickerListId),this.ui.itempicker.attr("aria-expanded",!0),this.context=e,e.$element.addClass("cs-typeaheadfield-height"),a.length>0&&(n=a.offset().top,l=a.height(),t=e.$element.offset().top,n<0&&(n*=-1),e.prettyScrolling&&t-n>l+n-t&&t>0&&e.$scrollContainer.height()>t-a.offset().top&&(e.$element.css("overflow","hidden"),e.$element.perfectScrollbar({"suppressScrollX":!0}))),v.call(this,a))this.options.enableInfiniteScrolling&&this.options.items>0||e.$scrollContainer.css("height","auto"),s.adjustDropDownField(e.$element,e.$scrollContainer,a.length>0,this,this.hideItemPicker,e.$scrollContainer),a.length<=0&&e.$scrollContainer.css({"display":"","position":"","right":"","top":"","bottom":"","left":""}),e.prettyScrolling&&e.$scrollContainer.perfectScrollbar("update"),e.$appendTo&&e.$appendTo.removeClass("csui-transparent");else if(a.length>0)return o<450&&e.$scrollContainer.children("ul.typeahead.binf-dropdown-menu").append(i("<li role='none' aria-hidden='true' class='picker-spacer'>spacer</li>")),e.$scrollContainer.css("height","auto"),void setTimeout(function(){e.$scrollContainer.scrollTop(0),e.$scrollContainer.children("ul.typeahead.binf-dropdown-menu").find(".picker-spacer").remove();var t=e.$element;s.adjustDropDownField(t,e.$scrollContainer,!0,this,this.hideItemPicker,e.$scrollContainer),e.prettyScrolling&&e.$scrollContainer.perfectScrollbar("update"),e.$appendTo&&e.$appendTo.removeClass("csui-transparent"),this.trigger("typeahead:picker:open")}.bind(this),0);setTimeout(function(){this.trigger("typeahead:picker:open")}.bind(this),0)},"hideItemPicker":function(e){e.context.hide(),e.trigger("typeahead:picker:close"),e.ui.searchbox.removeAttr("aria-controls"),e.ui.itempicker.attr("aria-expanded",!1)}})}),csui.define("hbs!csui/controls/form/impl/fields/typeaheadfield/typeaheadfield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'aria-labelledby="'+e.escapeExpression((a=null!=(a=s(i,"idBtnLabel")||(null!=t?s(t,"idBtnLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"idBtnLabel","hash":{},"loc":{"start":{"line":3,"column":70},"end":{"line":3,"column":84}}}):a))+'"'},"3":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((a=null!=(a=s(i,"multiFieldLabel")||(null!=t?s(t,"multiFieldLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"multiFieldLabel","hash":{},"loc":{"start":{"line":4,"column":42},"end":{"line":4,"column":61}}}):a))+'"'},"5":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="icon-container">\r\n        <div class="csui-icon-edit inline-edit-icon edit-cancel" title="'+e.escapeExpression((a=null!=(a=s(i,"cancel")||(null!=t?s(t,"cancel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":7,"column":72},"end":{"line":7,"column":82}}}):a))+'"></div>\r\n      </div>\r\n'},"7":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=(a=null!=t?s(t,"options"):t)?s(a,"applyFlag"):a,{"name":"if","hash":{},"fn":e.program(8,l,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":6},"end":{"line":15,"column":13}}}))?a:""},"8":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="icon-container binf-hidden">\r\n          <div class="csui-icon apply-all binf-hidden" title="'+e.escapeExpression((a=null!=(a=s(i,"titleApplyAll")||(null!=t?s(t,"titleApplyAll"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"titleApplyAll","hash":{},"loc":{"start":{"line":12,"column":62},"end":{"line":12,"column":79}}}):a))+'" tabindex="0"\r\n               data-cstabindex="0"></div>\r\n        </div>\r\n'},"10":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="cs-field-read-content"\r\n            tabindex="0" data-cstabindex="0"\r\n               aria-label="'+e.escapeExpression((s=null!=(s=o(i,"editModeAria")||(null!=t?o(t,"editModeAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"editModeAria","hash":{},"loc":{"start":{"line":27,"column":27},"end":{"line":27,"column":43}}}):s))+'">\r\n            <span class="field-picture csui-icon-group"></span>\r\n            <div class="cs-name">\r\n'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"isTouch"):t,{"name":"if","hash":{},"fn":e.program(11,l,0),"inverse":e.program(13,l,0),"loc":{"start":{"line":30,"column":14},"end":{"line":40,"column":21}}}))?a:"")+"            </div>\r\n          </div>\r\n"},"11":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <div class="csui-typeahead-container '+e.escapeExpression((a=null!=(a=s(i,"cssItemName")||(null!=t?s(t,"cssItemName"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cssItemName","hash":{},"loc":{"start":{"line":31,"column":53},"end":{"line":31,"column":68}}}):a))+'">\r\n                  '+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":32,"column":18},"end":{"line":32,"column":26}}}):a))+"\r\n                </div>\r\n"},"13":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <a href="javascript:void(0);" aria-label="'+e.escapeExpression((a=null!=(a=s(i,"readModeAria")||(null!=t?s(t,"readModeAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"readModeAria","hash":{},"loc":{"start":{"line":35,"column":58},"end":{"line":35,"column":74}}}):a))+'"\r\n                   class="csui-typeahead-container '+e.escapeExpression((a=null!=(a=s(i,"cssItemName")||(null!=t?s(t,"cssItemName"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cssItemName","hash":{},"loc":{"start":{"line":36,"column":51},"end":{"line":36,"column":66}}}):a))+'"\r\n                   data-binf-original-title="" data-cstabindex="0">\r\n                  '+e.escapeExpression((a=null!=(a=s(i,"name")||(null!=t?s(t,"name"):t))?a:e.hooks.helperMissing,
"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":38,"column":18},"end":{"line":38,"column":26}}}):a))+"\r\n                </a>\r\n"},"15":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="cs-field-read-content placeholder" role="button" title="'+e.escapeExpression((a=null!=(a=s(i,"noValue")||(null!=t?s(t,"noValue"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"noValue","hash":{},"loc":{"start":{"line":44,"column":78},"end":{"line":44,"column":89}}}):a))+'"\r\n            tabindex="0" data-cstabindex="0" aria-label="'+e.escapeExpression((a=null!=(a=s(i,"noName")||(null!=t?s(t,"noName"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"noName","hash":{},"loc":{"start":{"line":45,"column":57},"end":{"line":45,"column":67}}}):a))+'">\r\n            '+e.escapeExpression((a=null!=(a=s(i,"emptyLabel")||(null!=t?s(t,"emptyLabel"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"emptyLabel","hash":{},"loc":{"start":{"line":46,"column":12},"end":{"line":46,"column":26}}}):a))+"\r\n          </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-field-write">\r\n  <div class="cs-field-write-inner">\r\n    <div class="picker-container" '+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"idBtnLabel"):t,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":34},"end":{"line":3,"column":92}}}))?a:"")+"\r\n      "+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"multiFieldLabel"):t,{"name":"if","hash":{},"fn":e.program(3,l,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":69}}}))?a:"")+"></div>\r\n"+(null!=(a=(o(i,"xif")||t&&o(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.mode !== 'writeonly'",{"name":"xif","hash":{},"fn":e.program(5,l,0),"inverse":e.program(7,l,0),"loc":{"start":{"line":5,"column":4},"end":{"line":16,"column":12}}}))?a:"")+'\r\n  </div>\r\n</div>\r\n<div class="cs-field-read">\r\n  <div class="cs-field-read-inner">\r\n    <div class="btn-container">\r\n      <div>\r\n'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"name"):t,{"name":"if","hash":{},"fn":e.program(10,l,0),"inverse":e.program(15,l,0),"loc":{"start":{"line":24,"column":8},"end":{"line":48,"column":15}}}))?a:"")+'      </div>\r\n    </div>\r\n    <div class="icon-container">\r\n      <div class="csui-icon-edit inline-edit-icon icon-edit" title="'+e.escapeExpression((s=null!=(s=o(i,"edit")||(null!=t?o(t,"edit"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"edit","hash":{},"loc":{"start":{"line":52,"column":68},"end":{"line":52,"column":76}}}):s))+'"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n'}});return i.registerPartial("csui_controls_form_impl_fields_typeaheadfield_typeaheadfield",n),n}),csui.define("csui/controls/form/fields/typeaheadfield.view.mixin",["module","csui/utils/log","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/connector","csui/utils/base","csui/utils/nodesprites","csui/controls/form/impl/fields/csformfield.view","csui/controls/typeaheadpicker/typeaheadpicker.view","csui/controls/node-type.icon/node-type.icon.item.view.mixin","hbs!csui/controls/form/impl/fields/typeaheadfield/typeaheadfield","i18n!csui/controls/form/impl/nls/lang","css!csui/controls/form/impl/fields/typeaheadfield/typeaheadfield","csui/lib/jquery.binary.ajax"],function(e,t,i,n,l,a,s,o,r,c,d,u,p){function h(e){var t=e.localName;return t+=e.id?"#"+e.id:"",t+=e.className?"."+e.className.replace(/ /g,"."):""}var f=new t(e.id);return{"mixin":function(e){var t=i.extend({},e);return d.mixin(e),i.extend(e,{"makeTypeaheadFieldView":function(e){this.connector=this.options.context.getObject(a),this.dropdownMenuVisible=!1,e.css&&e.css.root&&(this.className=e.css.root),this.makeNodeTypeIconItemView()},"ui":{"readField":".cs-field-read-content","readFieldInner":".cs-field-read-inner","pickerContainer":".picker-container","writeField":".picker-container input","readArea":".cs-field-read","fieldPicture":".cs-field-picture","customImage":".cs-field-picture.csui-custom-image","defaultIcon":".cs-field-picture.csui-default-icon","itemName":".csui-typeahead-container","cancelIcon":".edit-cancel","readContentArea":".cs-field-read-content","itemDisplayName":".cs-name .csui-typeahead-container"},"events":function(){var e=s.isTouchBrowser()?{}:{"mouseover @ui.customImage":"showItemInfoPopup","mouseover @ui.defaultIcon":"showItemInfoPopup","mouseover @ui.itemDisplayName":"showItemInfoPopup","mouseleave @ui.customImage":"removeUnderline","mouseleave @ui.defaultIcon":"removeUnderline","mouseleave @ui.itemDisplayName":"removeUnderline","focusout @ui.itemDisplayName":"removeUnderline","click @ui.itemDisplayName":"showItemProfileDialog"};return s.isTouchBrowser()&&this.model.get("schema").readonly&&i.extend(e,{"click @ui.itemDisplayName":"showItemProfileDialog"}),i.extend(e,{"click @ui.customImage":"showItemProfileDialog","click @ui.defaultIcon":"showItemProfileDialog","keyup":"onKeyUp","keydown":"onKeyDown","click @ui.cancelIcon":"onCancelClicked","focusout @ui.writeField":"onFocusOutWrite","mousedown":"onMouseDown","click":"onClick"}),e},"onRender":function(){this.ui.itemName.hasClass("csui-hovering")||this.ui.itemName.addClass("cs-no-hover csui-hovering"),this.data=this.model.get("data"),this.editValue=this.data,this.curVal=this.editValue,this.placeHolderText=this.options.alpacaField&&this.options.alpacaField.schema.disabled?p.noValueSet:this.alpacaField&&this.alpacaField.schema&&this.alpacaField.schema.placeholder?this.alpacaField.schema.placeholder:this.options.lang&&this.options.lang.alpacaPlaceholder||p.alpacaPlaceholderGeneric;var e="";this.alpacaField&&this.alpacaField.options&&this.alpacaField.options.isMultiFieldItem?e=this.alpacaField.parent&&this.alpacaField.parent.options?this.alpacaField.parent.options.label:"":this.alpacaField&&this.alpacaField.options&&(e=this.alpacaField.options.label?this.alpacaField.options.label:"");var t=this.options.TypeaheadPickerView||c;this.pickerView=new t(n.extend({"context":this.options.context,"placeholder":this.placeHolderText,"prettyScrolling":!0,"limit":20,"id":i.uniqueId(this.model.get("id")),"id_input":this.model.get("id"),"ariaLabel":e,"isRequired":this.options.alpacaField&&this.options.alpacaField.isRequired(),"descriptionId":this.options?this.options.descriptionId:"","lang":this.options.lang},this.options.pickerOptions||{}));var l=this;this.listenTo(this.pickerView,"item:clear",function(){l.$el.hasClass("cs-userfield")||l.onItemClear()}),this.listenTo(this.pickerView,"item:change",this.onItemChange),this.listenTo(this.pickerView,"typeahead:picker:open",this.onItemPickerOpen),this.listenTo(this.pickerView,"typeahead:picker:close",this.onItemPickerClose),this.listenTo(this.pickerView,"render",this.disableField),this.setItemPicked(!0),this.dialogOpen=!1,this.ui.pickerContainer.append(this.pickerView.$el),this.ui.writeField=this.$el.find(".picker-container input"),this.getEditableBehavior().ui.writeField=this.ui.writeField,!this.data.id||void 0!==this.options.noID&&this.data.id===this.options.noID||(this.pickerView.model.set(this.data),this._keyboardNavigationNotification()),this.pickerView.render()},"attachElContent":function(){var e=t.attachElContent.apply(this,arguments),i=this.model.get("data");if(i.id&&(void 0===this.options.noID||i.id!==this.options.noID)){var n=this.$(".field-picture"),a=this.options.css&&this.options.css.defaultIcon||"csui-icon csui-initials image_typeahead_placeholder",s=this.options.css&&this.options.css.customImage||"binf-img-circle";a+=" cs-field-picture csui-default-icon csui-typeahead-icon-"+i.id,s+=" cs-field-picture csui-custom-image csui-typeahead-image-"+i.id;var r=new l.Model(i);r.imageAttribute=this.model.imageAttribute,r.nameAttribute=this.model.nameAttribute,r.connector=this.connector;var c={};(" "+a+" ").indexOf(" csui-initials ")<0&&(" "+a+" ").indexOf(" csui-nodesprites ")<0&&(c.nodeSprite=new o.model({"className":a})),this.renderNodeTypeIconView(r,n,a,s,c)}return e},"disableField":function(e){this.ui.pickerContainer.append(this.pickerView.$el),this.ui.writeField=this.$el.find(".picker-container input"),this.getEditableBehavior().ui.writeField=this.ui.writeField,this.trigger("disable:field")},"onItemPickerOpen":function(e){this.options.isDropDownOpen=!0;var t=this.$el.closest(".csui-scrollable-writemode");t&&!t.hasClass("csui-dropdown-open")&&t.addClass("csui-dropdown-open"),this.getEditableBehavior().hideActions&&this.getEditableBehavior().hideActions(e)},"onItemPickerClose":function(e){this.options.isDropDownOpen=!1;var t=this.$el.closest(".csui-scrollable-writemode");t&&t.hasClass("csui-dropdown-open")&&t.removeClass("csui-dropdown-open"),this.getEditableBehavior().showActions&&this.getEditableBehavior().showActions(e)},"removeUnderline":function(e){void 0!==this.options.noID&&this.data.id===this.options.noID||(this.ui.fieldPicture.removeClass("cs-hover"),this.ui.itemName.removeClass("cs-hover").addClass("cs-no-hover"))},"showItemProfileDialog":function(e){void 0!==this.options.noID&&this.data.id===this.options.noID||this.options.isInPopover||(e.preventDefault(),e.stopPropagation(),this.getItemWidget()?(this.dialogOpen=!0,this.showItemProfileDialogWidget(e)):this.createItemWidget("showItemProfileDialog",e))},"showItemProfileDialogWidget":function(e){this.ui.fieldPicture.addClass("cs-hover"),this.ui.itemName.removeClass("cs-no-hover").addClass("cs-hover"),this.getItemWidget().closeItemInfoPopup(e),this.getItemWidget().showItemProfileDialog(e)},"showItemInfoPopup":function(e){this.options.isInPopover=this.$el.closest(".csui-colout-formitems").length>0,void 0!==this.options.noID&&this.data.id===this.options.noID||this.options.isInPopover||(this.getItemWidget()?this.showItemInfoPopupWidget(e):this.createItemWidget("showItemInfoPopup",e))},"showItemInfoPopupWidget":function(e){this.ui.fieldPicture.addClass("cs-hover"),this.ui.itemName.removeClass("cs-no-hover").addClass("cs-hover"),this.getItemWidget().showItemInfoPopup(e)},"createItemWidget":function(e,t){if(this.options.createItemWidgetView){var n=this.$el.find(".csui-typeahead-container");this.options.createItemWidgetView.call(this,i.bind(function(l){this.setItemWidget(l),clearTimeout(this.getItemWidget().profileTimer);var a=setTimeout(i.bind(function(){n.binf_popover("show"),this[e](t)},this,t),500);this.getItemWidget().profileTimer=a,this[e](t)},this))}},"setItemWidget":function(e){this.itemWidgetView=e},"getItemWidget":function(){return this.itemWidgetView},"setItemPicked":function(e){this.itemPicked=e},"getItemPicked":function(){return this.itemPicked},"onCancelClicked":function(e){this.setItemPicked(!0)},"allowEditOnClickReadArea":function(e){var t=!("readonly"!==this.mode&&this.dialogOpen);return this.dialogOpen=!1,t||!0},"className":"cs-formfield cs-typeaheadfield","template":u,"templateHelpers":function(){var e="",t=this.options.alpacaField&&this.options.alpacaField.isRequired(),n="",l="",a=!1;n=t?p.requiredField:"",a=this.model&&this.model.attributes&&this.model.attributes.schema&&this.model.attributes.schema.readonly,this.alpacaField&&this.alpacaField.options&&this.alpacaField.options.isMultiFieldItem&&(e=this.alpacaField.parent&&this.alpacaField.parent.options?this.alpacaField.parent.options.label:"",a=this.alpacaField.parent.options.readonly),l=e||this.model.get("options")&&this.model.get("options").label;var o=this.model.get("data"),c=void 0!==this.options.noId&&o.id===this.options.noId?this.options.lang&&this.options.lang.noItem||p.noValue:o.display_name||o.name_formatted,d=c||p.noValue,u=i.str.sformat(p.fieldEditAria,l,d)+n,h=c?i.str.sformat(this.options.lang&&this.options.lang.fieldReadOnlyAria||p.fieldReadOnlyAria,l,d)+n:i.str.sformat(this.options.lang&&this.options.lang.emptyFieldReadOnlyAria||p.fieldReadOnlyAria,l,d)+n,f={"name":c,"isTouch":s.isTouchBrowser(),"idBtnLabel":this.options.labelId,"applyFlag":this.options.applyFlag,"multiFieldLabel":e,"readModeAria":h,"editModeAria":a?h:u,"noName":a?h:u,"ariaRequired":t,"imageUrl":"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=","cssItemName":this.options.css&&this.options.css.itemName||"cs-no-hover csui-hovering","cssCustomImage":this.options.css&&this.options.css.customImage||"binf-img-circle","cssDefaultIcon":this.options.css&&this.options.css.defaultIcon||"csui-icon csui-initials image_typeahead_placeholder"};return i.extend(r.prototype.templateHelpers.apply(this),f)},"formatItemName":function(e){return this.options.formatItemName?this.options.formatItemName(e):s.formatMemberName(e)},"setStateWrite":function(e,t,n){var l=this,a="writeonly"===this.mode?this.getEditValue():"read"===n?this.model.get("data"):this.getEditValue();return this.pickerView.model.set(i.extend(a,{"display_name":this.formatItemName(a)})),this.pickerView.render(),this.getStatesBehavior()._setStateWrite(e,t),t&&l.$(".picker-container input").trigger("focus").trigger("select"),this.editValue=a,!0},"isReadyToSave":function(){var e=this.$(".typeahead.binf-dropdown-menu");return(0===e.length||!e.is(":visible"))&&this.getItemPicked()},"onItemChange":function(e){f.debug("typeaheadFieldViewMixin item change")&&console.log(f.last),this.editValue=e.item.attributes,this.setItemPicked(!0),this.getEditableBehavior().showActions&&this.getEditableBehavior().showActions(this),this.options.isDropDownOpen=!1,this.trigger("selection:changed")},"getEditValue":function(){return this.pickerView.$el.find("input").val()||(this.editValue={"display_name":"","id":null,"name":""}),this.getItemPicked()&&this.pickerView.$el.find("input").val(this.formatItemName(this.editValue)),this.editValue},"_getChangeValue":function(){return this.model.get("data").id},"_keyboardNavigationNotification":function(){this.options.model&&this.options.model.attributes.options&&"create"===this.options.model.attributes.options.mode&&setTimeout(i.bind(function(){var e=n.Event("tab:content:field:changed");this.$el.trigger(e)},this),300)},"getDisplayValue":function(){return this.getEditValue().name},"onDestroy":function(){this.pickerView&&this.pickerView.destroy()},"_getChangeEventValue":function(){return this.getValue().id},"onKeyPress":function(e){return 13===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.getStatesBehavior().isStateRead()&&this.allowEditOnEnter()?this.getEditableBehavior().setViewStateWriteAndEnterEditMode():this.getStatesBehavior().isStateWrite()&&this.allowSaveOnEnter()&&this.getEditableBehavior().trySetValueAndLeaveEditMode(!0,!0)):32===e.keyCode&&this.getStatesBehavior().isStateRead()&&this.allowEditOnEnter()&&(e.preventDefault(),e.stopPropagation(),this.getEditableBehavior().setViewStateWriteAndEnterEditMode()),13===e.keyCode||9===e.keyCode||16===e.keyCode?this.alpacaField&&this.alpacaField.refreshValidationState&&this.alpacaField.refreshValidationState(!1):this.setItemPicked(!1),!0},"onKeyDown":function(e){27===e.keyCode?(this.dropdownMenuVisible=this.options.isDropDownOpen,this.onItemPickerClose(e),e.preventDefault()):13!==e.keyCode&&32!==e.keyCode||(n(e.target).hasClass("csui-typeahead-container")&&this.showItemProfileDialog(e),this.alpacaField&&(this.alpacaField.keyDown=!0))},"onKeyUp":function(e){if(13===e.keyCode){if(this.alpacaField&&this.alpacaField.refreshValidationState&&this.alpacaField.keyDown){var t=this;this.alpacaField.refreshValidationState(!1,function(){t.alpacaField.field.hasClass("alpaca-invalid")&&t.alpacaField.fieldView.$el.find("input.typeahead").select()})}this.alpacaField&&(this.alpacaField.keyDown=!1)}else 8===e.keyCode||46===e.keyCode?""===e.target.value?(this.setItemPicked(!0),"writeonly"===this.mode&&(this.model.attributes.data=""),this.getEditableBehavior().showActions&&this.getEditableBehavior().showActions(e),this.options.isDropDownOpen=!1):this.setItemPicked(!1):27===e.keyCode&&(this.dropdownMenuVisible&&(e.preventDefault(),e.stopPropagation()),this.dropdownMenuVisible=!1);this.setItemWidget("")},"handleTabKey":function(e){this.options.isDropDownOpen&&(this.pickerView.trigger("typeahead:picker:close",e),e.preventDefault(),e.stopPropagation())},"onMouseDown":function(e){var t={"toString":function(){return h(e.target)}};this._isInPicker(e.target,"input.cs-search, .csui-typeahead-picker-no-results")?(f.debug("typeaheadFieldViewMixin stop mousedown at {0}",t)&&console.log(f.last),e.preventDefault(),e.stopPropagation()):f.debug("typeaheadFieldViewMixin mousedown at {0}",t)&&console.log(f.last)},"onClick":function(e){var t={"toString":function(){return h(e.target)}};this._isInPicker(e.target,"input.cs-search, .cs-search-clear, .cs-search-icon, .csui-typeahead-picker-no-results")?(f.debug("typeaheadFieldViewMixin refresh on click at {0}",t)&&console.log(f.last),this.alpacaField&&this.alpacaField.refreshValidationState(!1)):f.debug("typeaheadFieldViewMixin click at {0}",t)&&console.log(f.last)},"_isInPicker":function(e,t){var l=this.pickerView.$(".cs-item-picker");if(l[0]&&n.contains(l[0],e)){if(t){if(n(e).is(t))return!1;if(i.some(l.find(t),function(t){return n.contains(t,e)}))return!1}return!0}return!1},"onItemClear":function(){f.debug("typeaheadFieldViewMixin item clear")&&console.log(f.last),this.$el.parents(".binf-form-group.alpaca-field").removeClass("binf-has-error alpaca-invalid"),this.$el.removeClass("cs-formfield-invalid"),this.alpacaField&&this.alpacaField.displayMessage(),this.setItemPicked(!0),this.getEditableBehavior().trySetValue(),this.alpacaField&&this.alpacaField.refreshValidationState(!1)}})}}}),csui.define("csui/controls/form/fields/typeaheadfield.view",["require","csui/lib/underscore","csui/lib/jquery","csui/utils/base","csui/controls/form/fields/base/csformfield.view","csui/controls/form/fields/typeaheadfield.view.mixin"],function(e,t,i,n,l,a){var s=l.extend({"constructor":function(e){l.apply(this,arguments),this.makeTypeaheadFieldView(e)}});return a.mixin(s.prototype),s}),csui.define("csui/controls/form/fields/alpaca/alptypeaheadfield.mixin",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/controls/form/fields/typeaheadfield.view","csui/utils/base","i18n!csui/controls/form/impl/nls/lang"],function(e,t,i,n,l,a,s,o,r){return{"mixin":function(e){return t.extend(e,{"makeAlpTypeaheadField":function(){},"getFieldType":function(){return void 0!==this.options?this.options.alpacaFieldType||"":""},"postRender":function(e){var i=this.base,n={"id":this.data,"name":this.options.type_control?this.options.type_control.name:""};if(this.itemModel=void 0,this.data&&this.data!==this.options.noId)if(this.options.ItemModelFactory){this.itemModel=this.connector.config.context.getModel(this.options.ItemModelFactory,{"attributes":{"id":this.data||""},"temporary":!0});var l=this;this.itemModel.ensureFetched().done(function(){i.call(l,e),l.showField(l.itemModel.attributes),l.field.parent().addClass("csui-field-"+l.getFieldType()),l.field.parent().addClass(l.options.alpacaFieldClasses||"csui-field-otcs_typeahead")}).fail(function(a){i.call(l,e),l.showField(t.extend(n,{"id":null})),l.field.parent().addClass("csui-field-"+l.getFieldType()),l.field.parent().addClass(l.options.alpacaFieldClasses||"csui-field-otcs_typeahead");var s=a&&a.responseJSON&&a.responseJSON.error||l.options.lang&&l.options.lang.invalidItem||r.invalidItem;l.displayMessage([{"id":"custom","message":s}],l.valid)})}else i.call(this,e),this.showField(t.extend(n,{"id":null})),this.field.parent().addClass("csui-field-"+this.getFieldType()),this.field.parent().addClass(this.options.alpacaFieldClasses||"csui-field-otcs_typeahead");else i.call(this,e),this.showField(n),this.field.parent().addClass("csui-field-"+this.getFieldType()),this.field.parent().addClass(this.options.alpacaFieldClasses||"csui-field-otcs_typeahead")},"showField":function(e){var a,o=(this.id,this.options?this.options.descriptionId:""),c=i(this.field[0]).find("label");c&&1===c.length&&(a=c.attr("for")+"Label",c.attr("id",a));var d=this.options.TypeaheadFieldView||s;this.fieldView=new d({"context":this.connector.config.context,"data":e,"applyFlag":this.options.applyFlag,"model":t.extend(new n.Model({"data":e,"options":this.options,"schema":this.schema,"id":this.id}),{"imageAttribute":this.itemModel&&this.itemModel.imageAttribute,"nameAttribute":this.itemModel&&this.itemModel.nameAttribute}),"dataId":this.name,"noId":this.options.noId,"alpacaField":this,"labelId":a,"descriptionId":o,"path":this.path,"alpaca":{"data":this.data,"options":this.options,"schema":this.schema},"id":t.uniqueId(this.id),"css":this.options.css,"lang":this.options.lang,"pickerOptions":this.options.pickerOptions}),this.options.fieldValidator?this.options.validator=this.options.fieldValidator:this.options.validator=function(e){var t=this.fieldView&&this.fieldView.getItemPicked&&this.fieldView.getItemPicked();e({"status":t,"message":t?"":this.options.lang&&this.options.lang.invalidItem||r.invalidItem})};var u=i("<div>").addClass("alpaca-control");this.containerItemEl.find(".alpaca-control").replaceWith(u),this.region=new l.Region({"el":u}),this.region.show(this.fieldView)},"getValue":function(){var e="";return this.data&&this.data.id?e=this.data.id:this.data&&(e=""===this.data.id||null===this.data.id?"":this.data),e},"setValueAndValidate":function(e,t){this.setValue(e);var n=!0;if(t)n=this.validate(),this.refreshValidationState(!1);else{this.fieldView.$el.trigger(i.Event("field:invalid"));var l=this.fieldView.ui.writeField&&this.fieldView.ui.writeField.val();this.fieldView.$el.hasClass("cs-formfield-invalid")&&this.fieldView.preVal!==l&&(this.fieldView.$el.find("input.typeahead").select(),this.fieldView.preVal=l)}return n},"destroy":function(){this.base(),this.region&&this.region.destroy()},"handleValidate":function(){var e=this.base();if(!e){var t=this.validation;if(void 0!==this.fieldView.$el.find(".picker-container input").val()&&this.fieldView.$el.find(".picker-container input").val())return t.notOptional.status=!0,t.notOptional.message="",e;for(var i in t)!1===t[i].status&&"notOptional"!==i&&(t[i].status=!0,t[i].message="")}return e}})}}}),csui.define("css!csui/controls/userpicker/impl/userpicker",[],function(){}),csui.define("csui/controls/userpicker/userpicker.view",["csui/lib/underscore","csui/lib/jquery","csui/utils/contexts/factories/connector","csui/models/member","csui/models/members","csui/models/browsable/browsable.mixin","csui/utils/url","csui/controls/typeaheadpicker/typeaheadpicker.view","csui-ext!csui/controls/userpicker/userpicker.view","css!csui/controls/userpicker/impl/userpicker"],function(e,t,i,n,l,a,s,o,r){var c=l.extend({"constructor":function(t,i){l.prototype.constructor.apply(this,arguments),this.options=e.pick(i,"onRetrieveMembers","widgetoptions","nameAttribute"),i.top=i.limit,this.makeBrowsable(i)},"url":function(){this.query=this.filters&&this.filters[this.options.nameAttribute||"name"];var e=l.prototype.url.apply(this,arguments),t=this.skipCount?this.skipCount-(this.mergeCount||0):0;return e+"&page="+(t?Math.floor(t/this.topCount)+1:1)},"fetch":function(){var t=this.query,i=this.options,n=this;return l.prototype.fetch.apply(this,arguments).then(function(){if("function"==typeof i.onRetrieveMembers&&i.onRetrieveMembers({"collection":n}),i.widgetoptions&&i.widgetoptions.collection&&i.widgetoptions.collection.extraMemberModels&&i.widgetoptions.collection.extraMemberModels.length){var l=e.filter(i.widgetoptions.collection.extraMemberModels,function(e){return n.comparator?-1!==n.comparator(e).indexOf(t.toLowerCase()):-1!==e.get("name_formatted").toLowerCase().indexOf(t.toLowerCase())}),a=n.length;n.add(l,{"merge":!0});var s=n.length-a;n.mergeCount=n.skipCount?n.mergeCount+s:s,n.skipCount+=s,n.totalCount+=n.mergeCount}}.bind(this))},"parse":function(e){var t=l.prototype.parse.apply(this,arguments),i=e.collection||e,n=i.paging;return this.totalCount=n&&n.total_count,t}});return a.mixin(c.prototype),o.extend({"constructor":function(l){t.extend(!0,l||{},{"css":{"itemPicker":"csui-control-userpicker","noResults":"csui-user-picker-no-results"},"expandFields":["group_id","leader_id"]});var a;if(l.collection)a=l.collection.connector;else{if(!l.context)throw new Error("Context is missing in the constructor options");a=l.context.getObject(i)}l.model||(l.model=new n(void 0,{"connector":a})),l.collection||(l.enableInfiniteScrolling=null==l.enableInfiniteScrolling||l.enableInfiniteScrolling,l.collection=new c(void 0,{"onRetrieveMembers":l.onRetrieveMembers,"widgetoptions":l.widgetoptions,"nameAttribute":l.model.nameAttribute,"connector":a,"memberFilter":l.memberFilter,"expandFields":l.expandFields,"limit":l.limit,"orderBy":l.orderBy||"asc_name","comparator":!l.enableInfiniteScrolling&&function(e){return e.get("name_formatted").toLowerCase()}})),l.TypeaheadItemView=function(t){return e.find(e.flatten(r),{"type":t.get("type")}).viewClass},o.prototype.constructor.call(this,l),this.listenTo(this,"typeahead:picker:open",function(){this.trigger("userpicker:open")}),this.listenTo(this,"typeahead:picker:close",function(){this.trigger("userpicker:close")})}})}),csui.define("css!csui/controls/form/impl/fields/userfield/userfield",[],function(){}),csui.define("csui/controls/form/fields/userfield.view",["module","require","csui/lib/underscore","csui/lib/jquery","csui/utils/base","csui/controls/form/fields/base/csformfield.view","csui/controls/form/fields/typeaheadfield.view.mixin","csui/controls/userpicker/userpicker.view","csui/utils/log","csui/utils/contexts/factories/member","i18n!csui/controls/form/impl/nls/lang","css!csui/controls/form/impl/fields/userfield/userfield"],function(e,t,i,n,l,a,s,o,r,c,d){var u=(new r(e.id),a.extend({"constructor":function(e){n.extend(!0,e||{},{"css":{"root":"cs-formfield cs-userfield","itemName":"esoc-user-container cs-user-container-no-hover csui-hovering esoc-user-mini-profile","customImage":"user-photo binf-img-circle","defaultIcon":"user-default-image csui-icon image_user_placeholder csui-initials"},"lang":{"fieldReadOnlyAria":d.userFieldReadOnlyAria,"emptyFieldReadOnlyAria":d.emptyUserFieldReadOnlyAria,"noItem":d.noOwner},"noId":-3}),e.createItemWidgetView=this.createUserWidgetView,e.TypeaheadPickerView=o,a.apply(this,arguments),this.makeTypeaheadFieldView(this.options),this.listenTo(this.options.model,"change",function(){this.alpacaField&&this.data.id&&(this.alpacaField.itemModel=this.options.context.getModel(c,{"attributes":{"id":this.data.id||""},"temporary":!0}),this.alpacaField.itemModel.ensureFetched())})}}));s.mixin(u.prototype);var p=i.extend({},u.prototype);i.extend(u.prototype,{"templateHelpers":function(){var e=this.model.get("data");return this.isGroup=1===e.type,this.isGroup?this.options.css.defaultIcon="user-default-image csui-icon image_group_placeholder":this.options.css.defaultIcon="user-default-image csui-icon image_user_placeholder csui-initials",p.templateHelpers.apply(this,arguments)},"onRender":function(){var e,t=this.model.get("data");this.onlyUsers="otcs_user_picker"===this.model.get("schema").type,this.onlyGroups=!this.onlyUsers&&"otcs_group_picker"===this.model.get("schema").type;var l=this.onlyUsers?[0]:this.onlyGroups?[1]:[0,1];if(this.options.alpaca){var a=this.options.alpaca.options.type_control;i.has(a,t.id)?a=this.options.alpaca.options.type_control[t.id]:i.has(a,"?")&&(a=this.options.alpaca.options.type_control["?"]),a&&i.has(a,"parameters")&&(l=a.parameters.select_types)}e=this.options.alpaca&&this.options.alpaca.options&&this.options.alpaca.options.placeholder,n.extend(!0,this.options,{"lang":{"alpacaPlaceholder":e||(this.onlyUsers?d.alpacaPlaceholderOTUserPicker:this.onlyGroups?d.alpacaPlaceholderOTGroupPicker:d.alpacaPlaceholderOTUserGroupPicker)},"pickerOptions":{"memberFilter":{"type":l}}}),this.isGroup=1===t.type,this.ui.itemName.attr("title",this.isGroup?this.ui.itemName.text().trim():null),this._isUserWidgetEnabled=!1,this.ui.customImage.removeClass("csui-typeahead-image-"+t.id),this.ui.defaultIcon.removeClass("csui-typeahead-icon-"+t.id),this.ui.customImage.addClass("esoc-userprofile-img-"+t.id),this.ui.defaultIcon.addClass("esoc-user-default-avatar-"+t.id),p.onRender.apply(this,arguments)},"removeUnderline":function(e){this.isGroup||-3===this.data.id||(this.ui.customImage.removeClass("cs-user-photo-hover"),this.ui.defaultIcon.removeClass("cs-user-photo-hover"),this.ui.itemName.removeClass("cs-user-container-hover").addClass("cs-user-container-no-hover"))},"showItemProfileDialog":function(){this.isGroup||-3===this.data.id||p.showItemProfileDialog.apply(this,arguments)},"showItemProfileDialogWidget":function(e){this.ui.customImage.addClass("cs-user-photo-hover"),this.ui.defaultIcon.addClass("cs-user-photo-hover"),this.ui.itemName.removeClass("cs-user-container-no-hover").addClass("cs-user-container-hover"),n(".esoc-mini-profile-popover").binf_popover("hide"),this.getItemWidget().showUserProfileDialog(e)},"showItemInfoPopup":function(){this.isGroup||-3===this.data.id||p.showItemInfoPopup.apply(this,arguments)},"showItemInfoPopupWidget":function(e){this.ui.customImage.addClass("cs-user-photo-hover"),this.ui.defaultIcon.addClass("cs-user-photo-hover"),this.ui.itemName.removeClass("cs-user-container-no-hover").addClass("cs-user-container-hover"),this.getItemWidget().showMiniProfilePopup(e)},"createUserWidgetView":function(e){csui.require(["esoc/controls/userwidget/userwidget.view"],i.bind(function(t){var i=new t({"userid":this.data.id,"context":this.options.context,"baseElement":this.ui.membername,"showUserProfileLink":!0,"showMiniProfile":!0,"loggedUserId":this.data.id,"connector":this.connector});e(i)},this))},"_isInPicker":function(e,t){return p._isInPicker.call(this,e,t+", csui-user-picker-no-results")}});var h=i.extend({},u.prototype),f={"showUserProfileDialog":"showItemProfileDialog","showMiniProfilePopup":"showItemInfoPopup"},m=i.invert(f);return i.extend(u.prototype,{"setUserWidget":function(e,t){f[e]&&h.createItemWidget.call(this,f[e],t)},"createItemWidget":function(e,t){m[e]&&this.setUserWidget(m[e],t)},"setItemWidget":function(e){this.userWidgetView=e},"getItemWidget":function(){return this.userWidgetView},"setItemPicked":function(e){this.userPicked=e},"getItemPicked":function(){return this.userPicked},"className":"cs-formfield cs-userfield","onUserPickerOpen":function(){return h.onItemPickerOpen.apply(this,arguments)},"onItemPickerOpen":function(){return this.onUserPickerOpen.apply(this,arguments)},"onUserPickerClose":function(){return h.onItemPickerClose.apply(this,arguments)},"onItemPickerClose":function(){return this.onUserPickerClose.apply(this,arguments)},"showUserProfileDialog":function(){return h.showItemProfileDialog.apply(this,arguments)},"showItemProfileDialog":function(){return this.showUserProfileDialog.apply(this,arguments)},"showMiniProfilePopup":function(){return h.showItemInfoPopup.apply(this,arguments)},"showItemInfoPopup":function(){return this.showMiniProfilePopup.apply(this,arguments)}}),u}),csui.define("csui/controls/form/fields/alpaca/alpuserfield",["csui/lib/underscore","csui/lib/jquery","csui/lib/alpaca/js/alpaca.lite","csui/controls/form/fields/alpaca/alptypeaheadfield.mixin","csui/controls/form/fields/userfield.view","csui/utils/contexts/factories/member","csui/controls/form/pub.sub","i18n!csui/controls/form/impl/nls/lang"],function(e,t,i,n,l,a,s,o){var r=n.mixin({"constructor":function(e,i,n,s,r,c,d){var u="otcs_user_picker"===s.type?o.invalidUser:"otcs_group_picker"===s.type?o.invalidGroup:o.invalidUserOrGroup;n=t.extend(!0,n||{},{"alpacaFieldType":"otcs_user","alpacaFieldClasses":"csui-field-otcs_user",
"lang":{"invalidItem":u},"noId":-3}),n.ItemModelFactory=a,n.TypeaheadFieldView=l,this.onlyUsers="otcs_user_picker"===s.type,this.base(e,i,n,s,r,c,d),this.makeAlpTypeaheadField()}}),c=e.extend({},r);return r=e.extend(r,{"showField":function(e){var t=c.showField.apply(this,arguments);return s.trigger(this.propertyId+this.fieldView.formView.cid+"tkl:asyncBuildRelation",this.fieldView),t}}),i.Fields.CsuiUserField=i.Fields.TextField.extend(r),i.registerFieldClass("otcs_user",i.Fields.CsuiUserField),t.alpaca.Fields.CsuiUserField}),csui.define("csui/controls/form/colout/colout.form.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/controls/form/form.view"],function(e,t,i,n,l){return l.extend({"constructor":function(e){this.options=e||{},l.prototype.constructor.call(this,e),this.options=e},"onRenderForm":function(){this.options.orginatingView.triggerMethod("render:form",this.options.originatingView)}})}),csui.define("hbs!csui/controls/form/colout/colout.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){return'<div class="csui-colout-formitems"></div>'}});return i.registerPartial("csui_controls_form_colout_colout.item",n),n}),csui.define("csui/controls/form/colout/colout.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/base","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/form/colout/colout.form.view","hbs!csui/controls/form/colout/colout.item","i18n"],function(e,t,i,n,l,a,s,o){return i.LayoutView.extend({"className":"csui-colout-container","regions":{"formRegion":".csui-colout-formitems"},"template":s,"behaviors":{"PerfectScrolling":{"behaviorClass":l,"suppressScrollX":!0,"scrollYMarginOffset":1}},"constructor":function(n){n||(n={}),i.LayoutView.prototype.constructor.call(this),this.options=n,this.options.get("targetEl").one("shown.binf.popover",t.bind(this.onShowColoutPopoverForm,this)),this.windowResizeHandler=t.bind(this._adjustColout,this),e(window).on("resize",this.windowResizeHandler),this.render()},"onRender":function(){var t,i=this.options.attributes.options.fields;for(var l in i)i[l].hasOwnProperty("prevData")&&delete i[l].prevChildData;if(n.isTouchBrowser()){var s=e(".binf-tab-content").length>0?e(".binf-tab-content").innerHeight():e(".form-metadata").innerHeight();this.$el.css({"max-height":s-100})}t=new a({"context":this.options.get("context"),"model":this.options,"layoutMode":"doubleCol","mode":"read","orginatingView":this}),this.formRegion.show(t)},"onRenderForm":function(){var e=this.options.get("targetEl");e.binf_popover({"content":this.el,"html":!0,"placement":function(e,t){var i=this,n=o&&o.settings.rtl?"left":"right";return setTimeout(function(){i.$arrow.css("top",50),i.$tip.css("top",-45)},0),n},"trigger":"manual","container":this.options.get("coloutContainer")}),e.binf_popover("show")},"onShowColoutPopoverForm":function(t){var l,a=this.options.get("targetEl"),s=this.$el.closest(".binf-popover"),r=s.find(".binf-arrow"),c=parseInt(r.css("top")),d=parseInt(r.css("height")),u=0===r.outerWidth()?28:r.outerWidth(),p=this.$el.parents(".cs-form-set-container"),h=p.closest(".ps-container").length>0?p.closest(".ps-container"):p.closest(".csui-normal-scrolling"),f=0;1===a.parents(".binf-modal-dialog").length&&(f=a.parents(".binf-modal-dialog").offset().left),l=n.isIE11()?a.offset().top-45:a.offset().top-parseInt(r.css("top"))-parseInt(r.css("top"));var m=s.find(".cs-form-doublecolumn"),g=m.length;m.parent(".cs-form").removeClass("cs-doublecolumn-form");for(var v=0;v<g;v++)e(m[v]).is(":empty")?e(m[v]).css("display","none"):(e(m[v]).css("display","table-cell"),r.css("display","block"),m.closest(".cs-form").addClass("cs-doublecolumn-form"));s.css({"position":"fixed","top":l}),n.isTouchBrowser()&&h.css({"-webkit-overflow-scrolling":"auto"}),o&&o.settings.rtl?s.css({"left":"auto","right":e(window).width()-(a.offset().left-u/2)-f}):s.css({"right":"auto","left":a.offset().left+a.width()-f}),this._adjustColout();var b=e(window).height(),y=s.innerHeight()-parseInt(r.css("top")),w=a.offset().top,x=w+y+d-b;b<w+y&&(l-=x,c+=x,s.css("top",l),r.css("top",c)),i.triggerMethodOn(this,"dom:refresh",this),a.trigger("focus")},"_adjustColout":function(){var t=this.$el.parents(".cs-form-set-container"),i=e(window).height(),n=e("nav.csui-navbar").innerHeight()/2,l=e("nav.csui-navbar").css("z-index"),a=e("#breadcrumb-wrap").css("z-index");this.$el.height()>i&&this.$el.height(i-n),e("nav.csui-navbar, #breadcrumb-wrap").css({"z-index":"auto"});var s=t.closest(".ps-container").length>0?t.closest(".ps-container"):t.closest(".csui-normal-scrolling");return e(s).on("scroll",function(){e(".csui-colout-icon").each(function(){e(this).data("binf.popover")&&(e(this).binf_popover("destroy"),e("nav.csui-navbar").css({"z-index":l}),e("#breadcrumb-wrap").css({"z-index":a}))})}),!1},"onDestroy":function(){this.windowResizeHandler&&e(window).off("resize",this.windowResizeHandler)}})}),csui.define("hbs!csui/controls/userpicker/impl/user",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="member-info'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(2,l,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":25},"end":{"line":2,"column":62}}}))?a:"")+' binf-pull-left">\r\n    <span class="name binf-pull-left" title="'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":45},"end":{"line":3,"column":53}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":55},"end":{"line":3,"column":63}}}):s))+"</span>\r\n  </div>\r\n"},"2":function(e,t,i,n,l){return" binf-disabled"},"4":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="member-picture csui-icon-group'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(2,l,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":45},"end":{"line":6,"column":82}}}))?a:"")+' binf-pull-left"></span>\r\n  <div class="member-info'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(2,l,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":25},"end":{"line":7,"column":62}}}))?a:"")+' binf-pull-left">\r\n    <span class="name binf-pull-left" title="'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":45},"end":{"line":8,"column":53}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":55},"end":{"line":8,"column":63}}}):s))+'</span>\r\n    <span class="email binf-pull-left" title="'+e.escapeExpression((s=null!=(s=o(i,"email")||(null!=t?o(t,"email"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"email","hash":{},"loc":{"start":{"line":9,"column":46},"end":{"line":9,"column":55}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"email")||(null!=t?o(t,"email"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"email","hash":{},"loc":{"start":{"line":9,"column":57},"end":{"line":9,"column":66}}}):s))+'</span>\r\n    <span class="title binf-pull-left" title="'+e.escapeExpression((s=null!=(s=o(i,"title")||(null!=t?o(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":55}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"title")||(null!=t?o(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":10,"column":57},"end":{"line":10,"column":66}}}):s))+'</span>\r\n    <span class="department binf-pull-left" title="'+e.escapeExpression((s=null!=(s=o(i,"department")||(null!=t?o(t,"department"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"department","hash":{},"loc":{"start":{"line":11,"column":51},"end":{"line":11,"column":65}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"department")||(null!=t?o(t,"department"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"department","hash":{},"loc":{"start":{"line":11,"column":67},"end":{"line":11,"column":81}}}):s))+'</span>\r\n    <span class="office binf-pull-left" title="'+e.escapeExpression((s=null!=(s=o(i,"office")||(null!=t?o(t,"office"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"office","hash":{},"loc":{"start":{"line":12,"column":47},"end":{"line":12,"column":57}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"office")||(null!=t?o(t,"office"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"office","hash":{},"loc":{"start":{"line":12,"column":59},"end":{"line":12,"column":69}}}):s))+"</span>\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(5,l,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":4},"end":{"line":15,"column":11}}}))?a:"")+"  </div>\r\n"},"5":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="message binf-pull-left">'+e.escapeExpression((a=null!=(a=s(i,"disabled-message")||(null!=t?s(t,"disabled-message"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"disabled-message","hash":{},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":63}}}):a))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"lightWeight"):t,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.program(4,l,0),"loc":{"start":{"line":1,"column":0},"end":{"line":17,"column":7}}}))?a:"")+"\r\n"}});return i.registerPartial("csui_controls_userpicker_impl_user",n),n}),csui.define("csui/controls/userpicker/roles/user.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/controls/node-type.icon/node-type.icon.item.view.mixin","hbs!csui/controls/userpicker/impl/user","css!csui/controls/userpicker/impl/userpicker"],function(e,t,i,n,l,a){var s=i.ItemView.extend({"template":a,"tagName":"div","className":"csui-userpicker-item","ui":{"personalizedImage":".csui-icon-user","defaultImage":".csui-icon-paceholder"},"templateHelpers":function(){return{"name":n.formatMemberName(this.model),"email":this.model.get("business_email"),"title":this.model.get("title"),"department":this.model.get("group_id_expand")&&this.model.get("group_id_expand").name,"office":this.model.get("office_location"),"disabled":this.model.get("disabled"),"disabled-message":this.options.disabledMessage,"lightWeight":!!this.options.lightWeight,"userImgSrc":"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs="}},"constructor":function(e){e||(e={}),e.disabledMessage||(e.disabledMessage=""),i.ItemView.prototype.constructor.call(this,e),this.model.connector||(this.model.connector=this.options.connector),this.makeNodeTypeIconItemView()},"attachElContent":function(){var e=i.ItemView.prototype.attachElContent.apply(this,arguments);if(!this.options.lightWeight){var t=this.$(".member-picture"),n="csui-icon-user csui-icon binf-img-circle esoc-userprofile-img-"+this.model.get("id");this.renderNodeTypeIconView(this.model,t,"csui-icon-paceholder csui-icon csui-initials image_user_placeholder",n)}return e}});return l.mixin(s.prototype),s}),csui.define("csui/controls/userpicker/nls/userpicker.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/userpicker/nls/root/userpicker.lang",{"placeholderDefault":"Enter a name...","groupViewGroupTitle":"User Group","groupViewLeaderTitle":"Group Leader","invalidUser":"Invalid User","noResults":"No results found","titleClearIcon":"Clear search value"}),csui.define("hbs!csui/controls/userpicker/impl/group",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="member-info'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(2,l,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":25},"end":{"line":2,"column":62}}}))?a:"")+' binf-pull-left">\r\n    <span class="name binf-pull-left" title="'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":45},"end":{"line":3,"column":53}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":55},"end":{"line":3,"column":63}}}):s))+"</span>\r\n  </div>\r\n"},"2":function(e,t,i,n,l){return" binf-disabled"},"4":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="member-picture'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(2,l,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":28},"end":{"line":6,"column":65}}}))?a:"")+' binf-pull-left">\r\n    <span class="csui-icon image_group_placeholder"></span>\r\n  </div>\r\n  <div class="member-info'+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(2,l,0),"inverse":e.noop,"loc":{"start":{"line":9,"column":25},"end":{"line":9,"column":62}}}))?a:"")+' binf-pull-left">\r\n    <span class="name binf-pull-left" title="'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":10,"column":45},"end":{"line":10,"column":53}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"name")||(null!=t?o(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":10,"column":55},"end":{"line":10,"column":63}}}):s))+'</span>\r\n    <span class="group-title binf-pull-left" title="'+e.escapeExpression((s=null!=(s=o(i,"group-title")||(null!=t?o(t,"group-title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"group-title","hash":{},"loc":{"start":{"line":11,"column":52},"end":{"line":11,"column":67}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"group-title")||(null!=t?o(t,"group-title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"group-title","hash":{},"loc":{"start":{"line":11,"column":69},"end":{"line":11,"column":84}}}):s))+"</span>\r\n"+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"leader"):t,{"name":"if","hash":{},"fn":e.program(5,l,0),"inverse":e.noop,"loc":{"start":{"line":12,"column":4},"end":{"line":15,"column":11}}}))?a:"")+(null!=(a=o(i,"if").call(null!=t?t:e.nullContext||{},null!=t?o(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(7,l,0),"inverse":e.noop,"loc":{"start":{"line":16,"column":4},"end":{"line":18,"column":11}}}))?a:"")+"  </div>\r\n"},"5":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="leader binf-pull-left" title="'+e.escapeExpression((a=null!=(a=s(i,"leader")||(null!=t?s(t,"leader"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"leader","hash":{},"loc":{"start":{"line":13,"column":49},"end":{"line":13,"column":59}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"leader")||(null!=t?s(t,"leader"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"leader","hash":{},"loc":{"start":{"line":13,"column":61},"end":{"line":13,"column":71}}}):a))+'</span>\r\n      <span class="leader-title binf-pull-left" title="'+e.escapeExpression((a=null!=(a=s(i,"leader-title")||(null!=t?s(t,"leader-title"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"leader-title","hash":{},"loc":{"start":{"line":14,"column":55},"end":{"line":14,"column":71}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"leader-title")||(null!=t?s(t,"leader-title"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"leader-title","hash":{},"loc":{"start":{"line":14,"column":73},"end":{"line":14,"column":89}}}):a))+"</span>\r\n"},"7":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="message binf-pull-left">'+e.escapeExpression((a=null!=(a=s(i,"disabled-message")||(null!=t?s(t,"disabled-message"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"disabled-message","hash":{},"loc":{"start":{"line":17,"column":43},"end":{"line":17,"column":63}}}):a))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"lightWeight"):t,{"name":"if","hash":{},"fn":e.program(1,l,0),"inverse":e.program(4,l,0),"loc":{"start":{"line":1,"column":0},"end":{"line":20,"column":7}}}))?a:"")+"\r\n"}});return i.registerPartial("csui_controls_userpicker_impl_group",n),n}),csui.define("csui/controls/userpicker/roles/group.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/utils/url","i18n!csui/controls/userpicker/nls/userpicker.lang","hbs!csui/controls/userpicker/impl/group","css!csui/controls/userpicker/impl/userpicker"],function(e,t,i,n,l,a,s){return i.ItemView.extend({"template":s,"tagName":"div","className":"csui-userpicker-item","templateHelpers":function(){return{"name":n.formatMemberName(this.model),"group-title":a.groupViewGroupTitle,"leader":this.model.get("leader_id")&&n.formatMemberName(this.model.get("leader_id")),"leader-title":a.groupViewLeaderTitle,"disabled":this.model.get("disabled"),"disabled-message":this.options.disabledMessage,"lightWeight":!!this.options.lightWeight}},"constructor":function(e){e||(e={}),e.disabledMessage||(e.disabledMessage=""),i.ItemView.prototype.constructor.call(this,e)}})}),csui.define("csui/controls/userpicker/core.userpicker.roles",["csui/controls/userpicker/roles/user.view","csui/controls/userpicker/roles/group.view"],function(e,t){"use strict";return[{"type":0,"viewClass":e},{"type":1,"viewClass":t}]}),csui.define("csui/controls/userpicker/impl/user.view",["csui/controls/userpicker/roles/user.view"],function(e){"use strict";return console.warn('DEPRECATED: depend on the module "csui/controls/userpicker/roles/user.view" instead.'),e}),csui.define("csui/controls/multilingual.text.picker/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/multilingual.text.picker/impl/nls/root/lang",{"formHeading":"This field can be translated for each defined metadata language","dialogTitle":"Multilingual Values","btnDone":"Done","btnCancel":"Cancel","globeIcon":"Edit in multiple languages","valueRequired":"One of the values is required"}),csui.define("hbs!csui/controls/multilingual.text.picker/impl/multilingual.form",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="binf-row">\r\n      <label class="binf-control-label alpaca-control-label binf-col-sm-6 text-right '+(null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},null!=t?s(t,"default"):t,{"name":"if","hash":{},"fn":e.program(2,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":9,"column":85},"end":{"line":10,"column":35}}}))?a:"")+'" for="input-'+e.escapeExpression(e.lambda(null!=t?s(t,"language_code"):t,t))+'"\r\n             title="'+e.escapeExpression(e.lambda(null!=t?s(t,"display_name"):t,t))+'">'+e.escapeExpression(e.lambda(null!=t?s(t,"display_name"):t,t))+' </label>\r\n      <div class="binf-col-sm-12 input-container">\r\n'+(null!=(a=s(i,"if").call(null!=t?t:e.nullContext||{},(a=l&&s(l,"root"))&&s(a,"textFieldRequired"),{"name":"if","hash":{},"fn":e.program(4,l,0),"inverse":e.program(6,l,0),"data":l,"loc":{"start":{"line":13,"column":8},"end":{"line":21,"column":15}}}))?a:"")+"      </div>\r\n    </div>\r\n"},"2":function(e,t,i,n,l){return"bold"},"4":function(e,t,i,n,l){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <label lang="'+e.escapeExpression(e.lambda(null!=t?a(t,"language_code"):t,t))+'">\r\n          <input id="input-'+e.escapeExpression(e.lambda(null!=t?a(t,"language_code"):t,t))+'" type="text" value="'+e.escapeExpression(e.lambda(null!=t?a(t,"value"):t,t))+'" title="'+e.escapeExpression(e.lambda(null!=t?a(t,"display_name"):t,t))+'"\r\n            lang="'+e.escapeExpression(e.lambda(null!=t?a(t,"language_code"):t,t))+'" />\r\n        </label>\r\n'},"6":function(e,t,i,n,l){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <textarea id="input-'+e.escapeExpression(e.lambda(null!=t?a(t,"language_code"):t,t))+'"\r\n                    title="'+e.escapeExpression(e.lambda(null!=t?a(t,"display_name"):t,t))+'">'+e.escapeExpression(e.lambda(null!=t?a(t,"value"):t,t))+"</textarea>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-ml-form-container alpaca-container-item">\r\n  <div class="csui-inlineform-group csui-inlineform-required-error" role="alert">\r\n    <div class="binf-text-danger" title="'+e.escapeExpression((s=null!=(s=o(i,"valueRequired")||(null!=t?o(t,"valueRequired"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"valueRequired","hash":{},"data":l,"loc":{"start":{"line":3,"column":41},"end":{"line":3,"column":58}}}):s))+'">\r\n      <span class="csui-text-danger">'+e.escapeExpression((s=null!=(s=o(i,"valueRequired")||(null!=t?o(t,"valueRequired"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"valueRequired","hash":{},"data":l,"loc":{"start":{"line":4,"column":37},"end":{"line":4,"column":54}}}):s))+"</span>\r\n    </div>\r\n  </div>\r\n"+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=t?o(t,"languages"):t,{"name":"each","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"data":l,"loc":{"start":{"line":7,"column":2},"end":{"line":24,"column":11}}}))?a:"")+"</div>\r\n\r\n"},"useData":!0});return i.registerPartial("csui_controls_multilingual.text.picker_impl_multilingual.form",n),n}),csui.define("css!csui/controls/multilingual.text.picker/impl/multilingual.form",[],function(){}),csui.define("csui/controls/multilingual.text.picker/impl/multilingual.form.view",["csui/lib/underscore","csui/lib/jquery","i18n","csui/lib/marionette3","i18n!csui/controls/multilingual.text.picker/impl/nls/lang","csui/utils/base","csui/controls/tile/behaviors/perfect.scrolling.behavior","hbs!csui/controls/multilingual.text.picker/impl/multilingual.form","css!csui/controls/multilingual.text.picker/impl/multilingual.form","csui/lib/binf/js/binf","csui/lib/handlebars.helpers.xif"],function(e,t,i,n,l,a,s,o){return n.View.extend({"template":o,"className":"cs-multilingual-form","templateContext":function(){return{"formHeading":l.formHeading,"enableheading":this.options.isDialog,"languages":this.data,"btnDone":l.btnDone,"btnCancel":l.btnCancel,"valueRequired":l.valueRequired,"isPopover":!this.options.isDialog,"textFieldRequired":this.options.textField}},"ui":{"errorMsg":".csui-inlineform-required-error","invisibleOverlay":".csui-multilingual-invisibleOverlay","textareaFields":"textarea"},"behaviors":{"PerfectScrolling":{"behaviorClass":s,"contentParent":".cs-ml-form-container","suppressScrollX":!0,"scrollYMarginOffset":15}},"events":{"keyup @ui.textareaFields":"adjustTextareaHeight","keyup":"onPopoverKeyUp","keydown input, @ui.textareaFields":"onKeyDown","focus input, @ui.textareaFields":"onFieldFocus"},"constructor":function(t){n.View.apply(this,arguments),this.options=t||(t={}),this.initializationData(),this.listenTo(this,"ml:show:popover",e.bind(this.showPopover,this)),this.listenTo(this,"ml:hide:popover",e.bind(this.closePopover,this))},"initializationData":function(){this.prevData="",e.defaults(this.options,{"valueRequired":!1,"textField":!0}),this.targetElement=t(t.fn.binf_modal.getDefaultContainer()),this.data=this.options.data;var i,n=e.findIndex(this.data,{"default":!0}),s=a.getUserMetadataLanguageInfo();if(0!==n){var o=this.data.splice(n,1);this.data.unshift(o[0])}if((i=e.findIndex(this.data,{"language_code":s}))>0){var r=this.data.splice(i,1);this.data.unshift(r[0])}this.options.popoverTargetElement.parent().addClass("csui-multilingual-input"),this.globeIcon=this.options.mlGlobeIcon,this.globeIcon&&this.globeIcon.prop({"title":l.globeIcon,"ariaLabel":l.globeIcon,"ariaExpanded":!1})},"_setFocus":function(e){var t=!e.shiftKey,i=this.$el.find("input,textarea"),n=t?0:i.length-1;i.eq(n).trigger("focus")},"_onClickDone":function(e){this.options.changetoReadmodeOnclose&&!this.options.valueRequired&&(this.options.parentView.isF2KeyPressed=!0),this.options.popoverTargetElement.prop("disabled",!1),this.options.popoverTargetElement.removeClass("mlDisabled"),this.isPopoverOpen=!1,this._result=this.getData(),this.ui.errorMsg.hide(),this._result?(this.prevData="",this.removeEventBindings(),this.$popover.binf_popover("destroy"),this.globeIcon.trigger("focus")):this.options.valueRequired?(this.ui.errorMsg.show(),this.$el.find(".binf-row:first input,.binf-row:first textarea").trigger("focus")):this.closePopover(),e&&e.preventDefault()},"closePopover":function(){this.options.popoverTargetElement.prop("disabled",!1),this.options.popoverTargetElement.removeClass("mlDisabled"),this.$popover&&this.$popover.binf_popover("destroy"),this.removeEventBindings()},"getData":function(){var t=this,i=!0;return this.prevData=JSON.parse(JSON.stringify(this.data)),e.each(this.data,function(e){e.value=t.$el.find("#input-"+e.language_code).val(),e.value&&e.value.trim()&&(i=!1)}),this.options.valueRequired&&i?null:this.data},"_placement":function(){var e=this.options.popoverTargetElement,i=e.offset().top,n=document.body.getBoundingClientRect().top,l=t(window).height(),a=n?n+i:i,s=e.is("textarea")?26:e.innerHeight(),o=e.closest(".csui-outertablecontainer"),r=e.closest(".binf-tab-content"),c=o.find("thead").length>0?o.find("thead").outerHeight():o.find(".csui-thumbnail-header").outerHeight(),d=o.find(".csui-table-paginationview"),u=o.length&&!n?o.offset().top+c:r.length?r.offset().top+n+18:0,p=d.length?d.outerHeight():20,h=l-(a+p+s),f=l-(h+u+s),m=h+f<l/2;return m&&(f=l-(h+s)),h>f?(this.popOverHeight=h-17,"bottom"):(this.popOverHeight=f-17-1,!!n&&(this.popOverHeight-=p),(!n&&e.hasClass("title-input")||m)&&(this.popOverHeight-=t(".binf-navbar-default.csui-navbar").outerHeight()||0),"top")},"showPopover":function(){this.$popover=this.targetElement,this.prevData&&(this.data=e.clone(this.prevData));var t=this.data[0],n=this.options.popoverTargetElement;!!t.value&&t.value!==n.val()&&!n.hasClass("mlDisabled")&&(t.value=n.val()),!n.hasClass("mlDisabled")&&this.options.parentView&&this.options.parentView.model&&!this.options.parentView.model.get("id")&&(t.value=n.val()),!n.hasClass("mlDisabled")&&(t.value=n.val()),this._popoverDoneRequired=!0,this.bindUIElements(),this.render(),this.options.parentView&&this.listenTo(this.options.parentView,"ml:set:focus",this._setFocus),this.options.popoverTargetElement.prop("disabled",!0),this.options.popoverTargetElement.addClass("mlDisabled");var a=this._placement(),s={"html":!0,"content":this.el,"trigger":"manual","placement":a,"class":"csui-multiLingual-popover"},o=this;this.$popover.binf_popover(s),this.$popover.binf_popover("toggle"),this.isPopoverOpen=!0,i.settings&&i.settings.rtl&&this.$el.parents(".binf-popover").addClass("csui-popover-rtl"),this.$popover&&this.$popover.append('<div class="csui-multilingual-invisibleOverlay"></div>'),this.$el.parents(".binf-popover").addClass("binf-invisible").attr("aria-label",l.dialogTitle).attr("role","dialog"),this._onShowMLPopover(a),this.$el.parents(".binf-popover").removeClass("binf-invisible"),this.addEventBindings(),this.$popover.off("shown.binf.popover").on("shown.binf.popover",function(){o.trigger("ensure:scrollbar"),o.$el.find(".binf-row:first input,.binf-row:first textarea").trigger("select"),o.options&&!o.options.textField&&e.each(o.$el.find("textarea"),function(e){o.adjustTextareaHeight(void 0,e)})}),this.$popover.off("hide.binf.popover").on("hide.binf.popover",function(){o.globeIcon.prop("ariaExpanded",!1),o._popoverDoneRequired&&(o.trigger("ml:doneWith:popover",o._result),o._popoverDoneRequired=!1)}),this.$popover.off("hidden.binf.popover").on("hidden.binf.popover",function(){o.$popover.parent().removeClass("csui-multilingual-input-wrapper"),o.$popover.binf_popover("destroy"),o.globeIcon.trigger("focus"),o.$popover&&o.$popover.find(".csui-multilingual-invisibleOverlay").remove()})},"addEventBindings":function(){t(window).off("resize",e.bind(this.closePopover,this)).on("resize",e.bind(this.closePopover,this)),t(window).off("popstate",e.bind(this.closePopover,this)).on("popstate",e.bind(this.closePopover,this)),t(document).off("scroll",e.bind(this.closePopover,this)).on("scroll",e.bind(this.closePopover,this)),t(".globe-icon-mask,.csui-multilingual-invisibleOverlay").off("click").on("click",e.bind(this._onClickDone,this))},"removeEventBindings":function(){t(window).off("resize",e.bind(this.closePopover,this)),t(document).off("scroll",e.bind(this.closePopover,this)),t(".globe-icon-mask,.csui-multilingual-invisibleOverlay").off("click")},"_onShowMLPopover":function(e){var n,s,o,r=i.settings&&i.settings.rtl,c=this.options.popoverTargetElement,d=document.body.getBoundingClientRect().top,u=d+window.scrollY,p=this.$el.parents(".binf-popover"),h=p.find(".binf-arrow"),f=this.$popover.closest(".binf-modal-dialog"),m=p.outerWidth(),g=0;p.addClass("csui-multilingual-input-wrapper"),d-=u,g=c.innerWidth()-p.innerWidth(),h.append('<div class="globe-icon-mask" title="'+l.globeIcon+'"></div>'),f.length&&(a.isIE11()||(g-=f.offset().left)),n=c.offset().top+(c.is("textarea")?26:c.innerHeight()),s=t(window).innerHeight()-c.offset().top+10,o=r?c.offset().left:g+c.offset().left,d&&(n+=d,s=t(window).innerHeight()-(c.offset().top+d)+10),h.removeClass("csui-remove-arrow-mark-styles"),o<0&&(o=this.globeIcon.offset().left-5,
h.addClass("csui-remove-arrow-mark-styles")),r&&t(window).innerWidth()<o+m&&(o=o-m+5,h.addClass("csui-remove-arrow-mark-styles"));var v={"position":"fixed","left":o,"top":"auto","bottom":"auto"};p.find(".cs-ml-form-container").css("maxHeight",this.popOverHeight),"top"===e?v.bottom=s:v.top=n,p.css(v)},"onPopoverKeyUp":function(e){switch(e.stopPropagation(),e&&e.keyCode){case 27:this.options&&this.options.changetoReadmodeOnclose?(this.closePopover(),this.trigger("ml:close:writeMode")):this._onClickDone(e);break;case 113:this.options&&this.options.changetoReadmodeOnclose&&this._onClickDone(e);break;default:return}},"onKeyDown":function(e){if(e.stopPropagation(),9===e.keyCode){var t=this.$el.find("input,textarea"),i=t.length-1,n=t.index(e.target);i!==n||e.shiftKey?0===n&&e.shiftKey&&(t.eq(i).trigger("focus"),e.stopPropagation(),e.preventDefault()):(t.eq(0).trigger("focus"),e.stopPropagation(),e.preventDefault())}else if(27===e.keyCode&&a.isIE11())return!1},"adjustTextareaHeight":function(e,t){var i,n,l=e&&e.target||t;""===l.value?l.style.height="":(l.style.height="26px",i=l.scrollHeight,n=l.offsetHeight,l.style.height=n>i?n:i+"px")},"onFieldFocus":function(e){e.stopPropagation()}})}),csui.define("csui/controls/multilingual.text.picker/multilingual.popover.mixin",["module","require","csui/lib/underscore","csui/lib/jquery","csui/utils/url","csui/utils/base"],function(e,t,i,n,l,a){"use strict";var s=e.config();return i.defaults(s,{"PopoverFormView":"csui/controls/multilingual.text.picker/impl/multilingual.form.view"}),{"mixin":function(e){return i.extend(e,{"multiLingualForm":"","_loadMultiLingualPopover":function(e){var n=this;this.targetElement=e.targetElement,n.mlOptions=e;var l=JSON.parse(JSON.stringify(n.metadataLanguages.languages));this._updatePrevobeject(l),this.mlGlobeIcon=e.mlGlobeIcon,i.defaults(e,{"valueRequired":!0,"isTextAreaField":!1,"changetoReadmodeOnclose":!1}),this.changetoReadmodeFlag=e.changetoReadmodeOnclose;var a={"data":l,"popoverTargetElement":n.targetElement,"valueRequired":e.validationRequired,"mlGlobeIcon":e.mlGlobeIcon,"parentView":n,"textField":!e.isTextAreaField,"changetoReadmodeOnclose":e.changetoReadmodeOnclose};t([s.PopoverFormView],function(e){n.multiLingualForm=new e(a),n._isReadyToSave=!0,n.trigger("multiLingualForm:isReady"),n.changetoReadmodeFlag&&n.stopListening(n.multiLingualForm,"ml:close:writeMode").listenTo(n.multiLingualForm,"ml:close:writeMode",function(){n.trigger("ml:close:writeMode")})}),void 0!==n.model.get("id")&&"writeonly"!==n.mode&&n.disableElement(l),n._isReadyToSave=!0},"_updatePrevobeject":function(e){var t=this,n=t.mlOptions.multilingualData;i.isObject(n)&&i.each(e,function(e){e.value=n[e.language_code]||""}),t.prevObject=JSON.parse(JSON.stringify(e))},"_showLanguagePopover":function(){var e=this,t=e.$el;if(!e._isReadyToSave)return void(this.multiLingualForm&&this.multiLingualForm.trigger("ml:hide:popover"));t.find(".csui-edit-save").length||(t=e.$el.parents(".csui-inline-editform")),this._updatePrevobeject(this.prevObject),t.addClass("csui-multilingual-greyout"),e._isReadyToSave=!1,this.multiLingualForm&&this.multiLingualForm.trigger("ml:show:popover"),this.stopListening(this.multiLingualForm,"ml:doneWith:popover").listenTo(this.multiLingualForm,"ml:doneWith:popover",i.bind(function(i){i&&this._handlePickerSuccess(i),t.removeClass("csui-multilingual-greyout"),e._isReadyToSave=!0,e.mlOptions.popoverClosed=!0},this))},"_handlePickerSuccess":function(e){var t=this;this.editVal="";var n={};i.each(e,function(e){n[e.language_code]=e.value,t.editVal||(t.editVal=e.value)}),this.disableElement(e),this.isEqualObjects(this.prevObject,e)?this.changetoReadmodeFlag&&this.trigger("ml:close:writeMode"):(this.trigger("ml:value:updated",{"value_multilingual":n,"value":this.editVal}),this.mlOptions.multilingualData=n)},"requiredInfoAvilable":function(e){var t=n.Deferred();if(this.model.get(e)||!this.model.get("id"))t.resolve();else{var a=this.model,s=a.get("id"),o=a.connector?a.connector:this.options.connector,r=l.combine(o.getConnectionUrl().getApiBase("v2"),"/nodes/"+s+"/properties"),c={"type":"GET","url":r};o.makeAjaxCall(c).done(i.bind(function(i){var n=i.results.data.properties,l={"name":n.name,"description":n.description,"name_multilingual":n.name_multilingual,"description_multilingual":n.description_multilingual};n[e]&&(l[e]=n[e]),a.set(l,{"silent":!0}),t.resolve(i)},this)).fail(function(e){t.reject(e)})}return t.promise()},"disableElement":function(e){var t=a.getUserMetadataLanguageInfo(),n=i.find(e,{"language_code":t}),l=i.find(e,function(e){return""!==e.value});this.targetElement.prop("disabled",!1),this.targetElement.removeClass("mlDisabled"),n&&""===n.value&&l&&(this._isReadyToSave=!0,this.targetElement.prop("disabled",!0),this.targetElement.addClass("mlDisabled"),this.mlOptions.popoverClosed=!1)},"isEqualObjects":function(e,t){var n=!0;return i.each(t,function(t){n=t.value===i.findWhere(e,{"language_code":t.language_code}).value&&(n&&!0)}),n},"keyDownOnGlobeIcon":function(e){switch(e.keyCode){case 13:case 32:this.mlGlobeIcon.prop("ariaExpanded",!0),this._showLanguagePopover(),e.preventDefault(),e.stopPropagation();break;case 27:this.multiLingualForm&&(this.multiLingualForm&&this.multiLingualForm.trigger("ml:hide:popover"),e.preventDefault(),e.stopPropagation())}},"_openMLFlyoutInEditMode":function(){var e=a.getMetadataLanguageInfo();if(e.enabled){var t=(e.defaultLanguage,a.getUserMetadataLanguageInfo()),n=this.mlOptions.multilingualData,l=i.values(n).filter(function(e){return!!e}).length>=2;!n||n[t]&&!l||(this.multiLingualForm?(this.targetElement.addClass("mlDisabled"),this._showLanguagePopover(),this.targetElement.prop("disabled",!0)):this.listenToOnce(this,"multiLingualForm:isReady",this._showLanguagePopover))}},"updateMLdata":function(e){var t=e&&e.target.value,i=a.getUserMetadataLanguageInfo(),n=this.mlOptions.multilingualData;n&&(n[i]=t)}})}}}),csui.define("csui/utils/usersettings/usersettings.tabs/usersettings.tabs",["csui/lib/underscore","csui/lib/backbone","csui-ext!csui/utils/usersettings/usersettings.tabs/usersettings.tabs"],function(e,t,i){"use strict";var n=t.Model.extend({"defaults":{"sequence":100,"viewClass":null,"viewClassOptions":null,"viewModel":null,"enabled":function(){return!0}},"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments)}}),l=t.Collection.extend({"model":n,"comparator":"sequence","constructor":function(e,i){t.Collection.prototype.constructor.apply(this,arguments)}}),a=new l;return function(t){if(t){var i=e.filter(e.flatten(t,!0),function(t){return t.enabled&&e.isFunction(t.enabled)?t.enabled():void 0===t.enabled||t.enabled});a.add(i)}}(i),a}),csui.define("csui/utils/usersettings/impl/usersettings.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/uploadable/uploadable.mixin"],function(e,t,i,n,l,a){"use strict";var s=i.Model.extend({"constructor":function(e){i.Model.prototype.constructor.apply(this,arguments),this.set({"id":e.userid},{"silent":!0}),this.makeConnectable(e),this.makeUploadable(e)},"validate":function(){if(!0!==this.get("accessibleMode")&&!1!==this.get("accessibleMode")){var e="accessibleMode attribute is invalid";return console.log(e),e}},"url":function(){var e=n.combine(this.connector.getConnectionUrl().getApiBase("v2"),"members/preferences");return e=n.appendQuery(e,"metadata=true&config_name=SmartUI&config_name=General")},"parse":function(e,t){if(Array.isArray(e.results)){var i,n=e.results[0].data;e.results[1]&&(i=e.results[1].data);var l,a=!1,s=!1;return n&&"SmartUI"===n.config_name&&(a=n.preferences.accessibleMode),i&&"General"===i.config_name&&i.preferences&&i.preferences.HasContentMgrPriv&&(s=i.preferences.HasContentMgrPriv)&&(l=n.preferences.General),{"accessibleMode":a,"hasContentMgrPriv":s,"contentMgtMode":l,"isInContentMgrMode":!(!i||!i.preferences)&&i.preferences.IsInContentMgrMode}}var o=e.links.data.self;if("PUT"===o.method&&0===o.body.length)return{}},"prepare":function(e,t){return{"SmartUI":{"accessibleMode":e.accessibleMode}}}});return l.mixin(s.prototype),a.mixin(s.prototype),s}),csui.define("csui/utils/usersettings/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/utils/usersettings/impl/nls/root/lang",{"accHeader":"Accessibility","accModeLabel":"Accessible compliant mode","accModeText":"When on, this mode will improve the usability with accessibility tools such as screen readers","settingsTabTitle":"Settings","contentMgtHeader":"Content Management","contentMgtModeLabel":"Content Manager mode","contentMgtHelper":"A reason must be provided in order to enable Content Manager mode.","lblReason":"Reason","errMsgReasonField":"Reason is a required field."}),csui.define("css!csui/utils/usersettings/impl/usersettingstab",[],function(){}),csui.define("csui/utils/usersettings/impl/usersettings.fieldtabs/setting.page.field.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/models/form","csui/models/forms","csui/controls/form/form.view","csui/utils/contexts/page/page.context","csui/utils/usersettings/impl/usersettings.model","i18n!csui/utils/usersettings/impl/nls/lang","css!csui/utils/usersettings/impl/usersettingstab"],function(e,t,i,n,l,a,s,o,r){"use strict";var c={"ACCESSIBLEMODE":"accessibleMode","CONTENTMGT":"contentMgt","CONTENTMGTHELPERTXT":"contentMgtHelperTxt","REASON4CONTENTMGT":"reason4ContentMgt"};return i.ItemView.extend({"constructor":function(e){this.model=new o(e),i.ItemView.prototype.constructor.apply(this),this.settingsModeChanged=this.model.get("settingsModeChanged")||!1},"tagName":"div","template":!1,"ui":{"btnReason":".btn-reason","reasonTxt":"#reason-txt","editReason":".edit-reason"},"events":{"click @ui.btnReason":"btnReasonClick","blur @ui.reasonTxt":"reasonTxtBlur","keyup @ui.reasonTxt":"reasonTxtKeyUp","focus @ui.reasonTxt":"reasonTxtfocus","click @ui.editReason":"editReasonclick"},"editReasonclick":function(){e(".lbl-reason-field").hide(),e(".show-reason-container").show(),e("#reason-txt").val(this.reasonvalfromApi)},"reasonTxtfocus":function(){e(".show-error-reason").hide(),e("#reason-txt").removeClass("err-reason-txt")},"btnReasonClick":function(t){var i=t.target.value||t.target.parentElement.parentElement.value;"cancel"===i?this.reasonvalfromApi?(e(".show-reason-container").hide(),e(".lbl-reason-field").show()):(this.setInizState(!1),this.handleContentManagement(!1)):"save"===i&&this.saveContentMgtData(!0)},"getURLv2":function(){var e=this.model.attributes.connector.getConnectionUrl().getApiBase("v2");return e&&(e+="members/preferences"),e},"saveContentMgtData":function(e){var t={"url":this.getURLv2(),"method":"PUT","data":{"General":{"enableCMMode":e,"cmModeReason":this.reasonValue}}};this.model.attributes.connector.makeAjaxCall(t).then(function(){e?location.reload():console.log("Content Mgt disabled")}).catch(function(e){console.log("Failed",e)})},"reasonTxtKeyUp":function(){this.reasonValue=e("#reason-txt").val(),this.reasonValue?(e(".btn-reason.save").removeAttr("disabled"),e(".show-error-reason").hide(),this.ui.reasonTxt.removeClass("err-reason-txt")):(e(".btn-reason.save").attr("disabled",!0),this.ui.reasonTxt.addClass("err-reason-txt"))},"reasonTxtBlur":function(){var t=this.model.attributes.context,i=e(".show-error-reason"),n=e("#reason-txt");this.reasonValue?(this.model.attributes.context.canBeSavedDirectlyAlert=!0,this.model.attributes.context.cannotMoveOutOfSettingPage=!1,this.model.attributes.context.canBeSavedDirectlyMethod=this,i.hide(),n.removeClass("err-reason-txt")):(t.canBeSavedDirectlyAlert=!1,t.cannotMoveOutOfSettingPage=!0,i.show(),n.addClass("err-reason-txt"))},"getContentMgtSwitch":function(e){return{"containerID":c.CONTENTMGT,"data":{"contentMgt":e},"options":{"fields":{"contentMgt":{"hidden":!1,"label":r.contentMgtModeLabel,"type":"checkbox"}}},"schema":{"properties":{"contentMgt":{"readonly":!1,"required":!1,"type":"boolean"}},"title":r.contentMgtHeader,"type":"object"}}},"getRawFormsData":function(e,t,i){var n=[{"containerID":c.ACCESSIBLEMODE,"data":{"accessibleMode":e},"options":{"fields":{"accessibleMode":{"hidden":!1,"label":r.accModeLabel,"type":"checkbox","helper":r.accModeText}}},"schema":{"properties":{"accessibleMode":{"readonly":!1,"required":!1,"type":"boolean"}},"title":r.accHeader,"type":"object"}}];return t&&n.push(this.getContentMgtSwitch(i)),{"forms":n}},"getRawFormsDataContentMgt":function(e){var t=[{"containerID":c.CONTENTMGTHELPERTXT,"data":{"contentMgtHelperTxt":r.contentMgtHelper},"schema":{"type":"object","properties":{"contentMgtHelperTxt":{"type":"string"}}},"view":{"globalTemplate":"<div style='padding:8px'><p style='font-size:12px'>{{{data.contentMgtHelperTxt}}}</p></div>"}}];return e&&t.push({"containerID":c.REASON4CONTENTMGT,"data":{"reason4ContentMgt":r.contentMgtHelper},"schema":{"type":"object","properties":{"reason4ContentMgt":{"type":"string"}}},"view":{"globalTemplate":'<div class="reason-main-container"><label class="lbl-reason" for="reason-txt"><span style="color:red; margin-right: 2px;">*</span>'+r.lblReason+'</label><div class="show-reason-container"><input type="text" id="reason-txt" tabindex="0" data-cstabindex="0" class="context-mgt-reason"><button class="btn-reason save" value="save" disabled>{{{icon-v2 iconName="csui_action_confirm32" size="small" states="normal"}}}</button><button class="btn-reason cancel" value="cancel">{{{icon-v2 iconName="csui_action_cancel32" size="small" states="normal"}}}</button><div class="show-error-reason"><div class="show-error-reason-msg"><span class="error-reason-msg-rectangle"><span class="error-cross-mark"></span></span><span class="error-msg-txt">'+r.errMsgReasonField+'</span></div></div></div><div class="lbl-reason-field"><span class="reason-text-lbl">'+this.reasonvalfromApi+'</span><span class="csui-icon-edit inline-edit-icon icon-edit edit-reason"></span></div></div>'}}),{"forms":t}},"setInizState":function(e){var t=this.model.get("accessibleMode"),i=new l,a=this.getRawFormsData(t,this.enableContentManager,e);i.reset(i.parse(a));for(var s=i.models[0].attributes.forms,o=0;o<s.length;o++){var r=new n(s[o]);this.renderFormModel(r,e)}},"renderFormModel":function(t,n){var l="container_"+Math.floor(Math.random()*Math.pow(10,8)),o=t.get("containerID")||l;this.$el.append(e("<div>").attr("id",o));var r=new i.Region({"el":this.$el.find("#"+o)[0]}),c=new a({"context":new s,"model":t,"mode":"update"});this.listenTo(c,"change:field",function(e){switch(e.name){case"contentMgt":this.handleContentManagement(e.value);break;case"accessibleMode":this.settingsModeChanged=!this.settingsModeChanged,this.model.set({"settingsModeChanged":this.settingsModeChanged,"accessibleMode":e.value}),this.model.save();break;default:console.log("Incorrect event.name = ",e.name)}},this),this.listenTo(c,"render:form",function(e){this.trigger("childview:rendered");var t=e.alpaca.data;n&&t&&t.hasOwnProperty("contentMgt")&&this.handleContentManagement(n),this.reasonvalfromApi&&t&&t.hasOwnProperty("reason4ContentMgt")&&this.populateReason()},this),r.show(c)},"populateReason":function(){e(".show-reason-container").hide(),e(".lbl-reason-field").show()},"onRender":function(){this.model.fetch({"prepare":!1,"async":!1}),this.enableContentManager=this.model.get("hasContentMgrPriv");var e=this.model.get("isInContentMgrMode");this.contentMgtEnable=e||!1,this.reasonvalfromApi="",this.setInizState(this.contentMgtEnable)},"handleContentManagement":function(t){if(!t)return this.model.attributes.context.cannotMoveOutOfSettingPage=!1,e("#"+c.CONTENTMGTHELPERTXT).remove(),e("#"+c.REASON4CONTENTMGT).remove(),e("#reason-txt").val(""),this.reasonValue="",void this.saveContentMgtData(t,"");this.contentMgtEnable||(this.model.attributes.context.cannotMoveOutOfSettingPage=!0);var i=new l;i.reset(i.parse(this.getRawFormsDataContentMgt(t)));for(var a=i.models[0].attributes.forms,s=0;s<a.length;s++){var o=new n(a[s]);this.renderFormModel(o)}}})}),csui.define("csui/utils/usersettings/usersettings.tabs/core.usersettings.tabs",["csui/utils/usersettings/impl/usersettings.fieldtabs/setting.page.field.view"],function(e){"use strict";return{"sequence":100,"viewClass":e}}),csui.define("csui/utils/usersettings/usersettings.tabs/usersettings.tabs.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette3","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/utils/usersettings/usersettings.tabs/usersettings.tabs"],function(e,t,i,n,l){"use strict";return i.CollectionView.extend({"tagName":"div","className":"csui-usersettings","behaviors":{"PerfectScrolling":{"behaviorClass":n,"suppressScrollX":!0,"scrollYMarginOffset":15}},"constructor":function(e){e||(e={}),this.options=e,this.collection=l,i.CollectionView.prototype.constructor.call(this,e)},"childView":function(e){return e.get("viewClass")},"childViewOptions":function(e){return t.extend({"context":this.options.context,"connector":this.options.connector,"userid":this.options.userid,"settingsModeChanged":!1},e.get("viewClassOptions"))},"onRender":function(){var i=[];this.children.each(t.bind(function(t){var n=e.Deferred();i.push(n.promise()),this.listenTo(t,"childview:rendered",function(){n.resolve()}),this.listenTo(t.model,"change:settingsModeChanged",function(){var t=this.children.filter(function(e){return!!e.settingsModeChanged}).length,i=this.$el.parents("div.esoc-simple-user-widget-view")[0];e(i).toggleClass("csui-dialog-page-reload",!!t)})},this)),e.whenAll.apply(e,i).then(t.bind(function(){this.triggerMethod("update:scrollbar")},this))}})}),csui.define("csui/utils/usersettings/usersettings",["csui/utils/usersettings/usersettings.tabs/usersettings.tabs.view","csui/utils/usersettings/usersettings.tabs/usersettings.tabs","i18n!csui/utils/usersettings/impl/nls/lang"],function(e,t,i){"use strict";return[{"tabName":"usersettings","tabDisplayName":i.settingsTabTitle,"tabContentView":e,"showTab":function(e,i){return!(!t.length||!0!==i.enableSimpleSettingsModel||void 0===i.showUserSettings)&&!0===i.showUserSettings}}]}),csui.define("csui/utils/userprofilesessions/userprofilesessions.tabs/userprofilesessions.tabs",["csui/lib/underscore","csui/lib/backbone","csui-ext!csui/utils/userprofilesessions/userprofilesessions.tabs/userprofilesessions.tabs"],function(e,t,i){"use strict";var n=t.Model.extend({"defaults":{"viewClass":i,"viewClassOptions":null,"viewModel":null,"enabled":function(){return!0}},"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments)}}),l=t.Collection.extend({"model":n,"comparator":"sequence","constructor":function(e,i){t.Collection.prototype.constructor.apply(this,arguments)}}),a=new l;return function(t){if(t){var i=e.filter(e.flatten(t,!0),function(t){return t.enabled&&e.isFunction(t.enabled)?t.enabled():void 0===t.enabled||t.enabled});a.add(i)}}(i),a}),csui.define("csui/utils/userprofilesessions/impl/userprofilesessions.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/utils/types/date"],function(e,t,i,n,l,a){"use strict";var s=i.Model.extend({"constructor":function(e){i.Model.prototype.constructor.apply(this,arguments),this.set({"id":e.userid},{"silent":!0}),this.makeConnectable(e)},"url":function(){return n.combine(this.connector.getConnectionUrl().getApiBase("v2"),"members/sessions")},"parse":function(e,i){var n={},l=[],s=[],o=e.results,r=o.active_sessions.recs,c=o.previous_sessions.recs;if(1==o.active_sessions.ok)r.forEach(function(e){var t={};t.createTime=a.formatExactDateTime(a.deserializeDate(e.create_time)),t.lastActivity=a.formatExactDateTime(a.deserializeDate(e.last_activity)),t.duration=e.duration,l.push(t)});else{var d={"createTime":o.active_sessions.errMsg,"lastActivity":o.active_sessions.errMsg,"duration":o.active_sessions.errMsg};l.push(d)}return n.active_sessions=l,1==o.previous_sessions.ok?(c=t.difference(c,l),c.forEach(function(e){s.push(a.formatExactDateTime(a.deserializeDate(e)))}),n.previous_sessions=s):n.previous_sessions.push(o.previous_sessions.errMsg),n}});return l.mixin(s.prototype),s}),csui.define("csui/utils/userprofilesessions/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/utils/userprofilesessions/impl/nls/root/lang",{"sessionsTabTitle":"Sessions","activeSessionsTitle":"Active sessions","previousSessionsTitle":"Previous sessions","createTime":"Create Time","lastActivity":"Last activity","duration":"Duration (minutes)","lastLogin":"Last login"}),csui.define("hbs!csui/utils/userprofilesessions/impl/sessions.field",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,l){var a,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <tr>\r\n                <td><span title="'+e.escapeExpression((a=null!=(a=s(i,"createTime")||(null!=t?s(t,"createTime"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"createTime","hash":{},"loc":{"start":{"line":17,"column":33},"end":{"line":17,"column":47}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"createTime")||(null!=t?s(t,"createTime"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"createTime","hash":{},"loc":{"start":{"line":17,"column":49},"end":{"line":17,"column":63}}}):a))+'</span></td>\r\n                <td><span title="'+e.escapeExpression((a=null!=(a=s(i,"lastActivity")||(null!=t?s(t,"lastActivity"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"lastActivity","hash":{},"loc":{"start":{"line":18,"column":33},"end":{"line":18,"column":49}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"lastActivity")||(null!=t?s(t,"lastActivity"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"lastActivity","hash":{},"loc":{"start":{"line":18,"column":51},"end":{"line":18,"column":67}}}):a))+'</span></td>\r\n                <td><span title="'+e.escapeExpression((a=null!=(a=s(i,"duration")||(null!=t?s(t,"duration"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"duration","hash":{},"loc":{"start":{"line":19,"column":33},"end":{"line":19,"column":45}}}):a))+'">'+e.escapeExpression((a=null!=(a=s(i,"duration")||(null!=t?s(t,"duration"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"duration","hash":{},"loc":{"start":{"line":19,"column":47},"end":{"line":19,"column":59}}}):a))+"</span></td>\r\n            </tr>\r\n\r\n"},"3":function(e,t,i,n,l){return'            <tr>\r\n                <td><span title="'+e.escapeExpression(e.lambda(t,t))+'">'+e.escapeExpression(e.lambda(t,t))+"</span></td>\r\n            </tr>\r\n\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,l){var a,s,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="ups-conianter">\r\n    <div class="binf-col-md-12 ups-title" title="'+e.escapeExpression((s=null!=(s=o(i,"activeSessionsTitle")||(null!=t?o(t,"activeSessionsTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"activeSessionsTitle","hash":{},"loc":{"start":{"line":2,"column":49},"end":{"line":2,"column":72}}}):s))+'">\r\n        <h4>'+e.escapeExpression((s=null!=(s=o(i,"activeSessionsTitle")||(null!=t?o(t,"activeSessionsTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"activeSessionsTitle","hash":{},"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":35}}}):s))+'</h4>\r\n    </div>\r\n\r\n    <table class="ups-info-table">\r\n        <thead>\r\n            <tr>\r\n                <th title="'+e.escapeExpression((s=null!=(s=o(i,"createTime")||(null!=t?o(t,"createTime"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"createTime","hash":{},"loc":{"start":{"line":9,"column":27},"end":{"line":9,"column":41}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"createTime")||(null!=t?o(t,"createTime"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"createTime","hash":{},"loc":{"start":{"line":9,"column":43},"end":{"line":9,"column":57}}}):s))+'</th>\r\n                <th title="'+e.escapeExpression((s=null!=(s=o(i,"lastActivity")||(null!=t?o(t,"lastActivity"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"lastActivity","hash":{},"loc":{"start":{"line":10,"column":27},"end":{"line":10,"column":43}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"lastActivity")||(null!=t?o(t,"lastActivity"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"lastActivity","hash":{},"loc":{"start":{"line":10,"column":45},"end":{"line":10,"column":61}}}):s))+'</th>\r\n                <th title="'+e.escapeExpression((s=null!=(s=o(i,"duration")||(null!=t?o(t,"duration"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"duration","hash":{},"loc":{"start":{"line":11,"column":27},"end":{"line":11,"column":39}}}):s))+'">'+e.escapeExpression((s=null!=(s=o(i,"duration")||(null!=t?o(t,"duration"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"duration","hash":{},"loc":{"start":{"line":11,"column":41},"end":{"line":11,"column":53}}}):s))+"</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n"+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=t?o(t,"activeSessionsRecord"):t,{"name":"each","hash":{},"fn":e.program(1,l,0),"inverse":e.noop,"loc":{"start":{"line":15,"column":12},"end":{"line":22,"column":21}}}))?a:"")+'\r\n        </tbody>\r\n    </table>\r\n    <br/>\r\n    <br/>\r\n</div>\r\n<div class="ups-conianter">\r\n    <div class="binf-col-md-12 ups-title" title="'+e.escapeExpression((s=null!=(s=o(i,"previousSessionsTitle")||(null!=t?o(t,"previousSessionsTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"previousSessionsTitle","hash":{},"loc":{"start":{"line":30,"column":49},"end":{"line":30,"column":74}}}):s))+'">\r\n        <h4>'+e.escapeExpression((s=null!=(s=o(i,"previousSessionsTitle")||(null!=t?o(t,"previousSessionsTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"previousSessionsTitle","hash":{},"loc":{"start":{"line":31,"column":12},"end":{"line":31,"column":37}}}):s))+'</h4>\r\n    </div>\r\n\r\n    <table class="ups-info-table">\r\n        <thead>\r\n            <tr>\r\n                <th>'+e.escapeExpression((s=null!=(s=o(i,"lastLogin")||(null!=t?o(t,"lastLogin"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"lastLogin","hash":{},"loc":{"start":{"line":37,"column":20},"end":{"line":37,"column":33}}}):s))+"</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n"+(null!=(a=o(i,"each").call(null!=t?t:e.nullContext||{},null!=t?o(t,"previousSessionsRecord"):t,{"name":"each","hash":{},"fn":e.program(3,l,0),"inverse":e.noop,"loc":{"start":{"line":41,"column":12},"end":{"line":46,"column":21}}}))?a:"")+"\r\n        </tbody>\r\n    </table>\r\n</div>"}});return i.registerPartial("csui_utils_userprofilesessions_impl_sessions.field",n),n}),csui.define("css!csui/utils/userprofilesessions/impl/userprofilesessionstab",[],function(){}),csui.define("csui/utils/userprofilesessions/impl/userprofilesessions.fieldtabs/sessions.field.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/userprofilesessions/impl/userprofilesessions.model","i18n!csui/utils/userprofilesessions/impl/nls/lang","hbs!csui/utils/userprofilesessions/impl/sessions.field","css!csui/utils/userprofilesessions/impl/userprofilesessionstab"],function(e,t,i,n,l,a){"use strict";return i.ItemView.extend({"className":"user-profile-sessions-field-view","template":a,"tagName":"div","templateHelpers":function(){return{"activeSessionsTitle":l.activeSessionsTitle,"previousSessionsTitle":l.previousSessionsTitle,"createTime":l.createTime,"lastActivity":l.lastActivity,"duration":l.duration,"lastLogin":l.lastLogin,"activeSessionsRecord":this.model.get("active_sessions"),"activeSessionsDuration":this.model.get("active_session_duration"),"previousSessionsRecord":this.model.get("previous_sessions")}},"constructor":function(e){this.model=new n(e),this.model.fetch({"prepare":!1,"async":!1}),i.ItemView.prototype.constructor.apply(this)},"onShow":function(){this.render()}})}),csui.define("csui/utils/userprofilesessions/userprofilesessions.tabs/core.userprofilesessions.tabs",["csui/utils/userprofilesessions/impl/userprofilesessions.fieldtabs/sessions.field.view"],function(e){"use strict";return{"viewClass":e}}),csui.define("csui/utils/userprofilesessions/userprofilesessions.tabs/userprofilesessions.tabs.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette3","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/utils/userprofilesessions/userprofilesessions.tabs/userprofilesessions.tabs"],function(e,t,i,n,l){"use strict";return i.CollectionView.extend({"tagName":"div","className":"csui-userprofilesessions","behaviors":{"PerfectScrolling":{"behaviorClass":n,"suppressScrollX":!0,"scrollYMarginOffset":15}},"constructor":function(e){e||(e={}),this.options=e,this.collection=l,i.CollectionView.prototype.constructor.call(this,e)},"childView":function(e){return e.get("viewClass")},"childViewOptions":function(e){return t.extend({"context":this.options.context,"connector":this.options.connector,"userid":this.options.userid,"settingsModeChanged":!1},e.get("viewClassOptions"))}})}),csui.define("csui/utils/userprofilesessions/userprofilesessions",["csui/utils/userprofilesessions/userprofilesessions.tabs/userprofilesessions.tabs.view","csui/utils/userprofilesessions/userprofilesessions.tabs/userprofilesessions.tabs","i18n!csui/utils/userprofilesessions/impl/nls/lang"],function(e,t,i){"use strict";return[{"tabName":"userprofilesessions","tabDisplayName":i.sessionsTabTitle,"tabContentView":e,"showTab":function(e,i){return!(!t.length||void 0===i.showUserProfileSessions)&&!0===i.showUserProfileSessions}}]}),
csui.define("bundles/csui-forms",["csui/controls/form/form.view","csui/controls/form/fields/radiofield.view","csui/controls/form/fields/alpaca/alpuserfield","csui/controls/form/fields/alpaca/alpcsuibooleanfield","csui/controls/form/fields/alpaca/alpcsuiselectfield","csui/controls/form/fields/alpaca/alpcsuidateonlyfield","csui/controls/form/fields/alpaca/alpcsuidatetimefield","csui/controls/form/fields/alpaca/alpcsuitextfield","csui/controls/form/fields/alpaca/alpcsuimultilingual.textfield","csui/controls/form/fields/alpaca/alpcsuitextareafield","csui/controls/form/fields/alpaca/alpcsuiintegerfield","csui/controls/form/fields/alpaca/alpcsuiurlfield","csui/controls/form/fields/alpaca/alpcsuiarrayfield","csui/controls/form/fields/alpaca/alpcsuiobjectfield","csui/controls/form/fields/alpaca/alpnodepickerfield","csui/controls/form/fields/alpaca/alpcsuiarraybuttonsfield","csui/controls/form/fields/alpaca/alpcsuipasswordfield","csui/controls/form/fields/alpaca/alpcsuitklfield","csui/controls/form/fields/alpaca/alpcsuipickerfield.mixin","csui/controls/form/fields/alpaca/alptypeaheadfield.mixin","csui/controls/form/fields/typeaheadfield.view","csui/controls/form/fields/typeaheadfield.view.mixin","csui/controls/form/fields/userfield.view","csui/controls/form/fields/booleanfield.view","csui/controls/form/fields/datefield.view","csui/controls/form/fields/datetimefield.view","csui/controls/form/fields/selectfield.view","csui/controls/form/fields/textfield.view","csui/controls/form/fields/multilingual.textfield.view","csui/controls/form/fields/textareafield.view","csui/controls/form/fields/multilingual.textareafield.view","csui/controls/form/fields/nodepickerfield.view","csui/controls/form/fields/arraybuttonsfield.view","csui/controls/form/colout/colout.view","csui/controls/form/fields/tklfield.view","csui/controls/userpicker/roles/user.view","csui/controls/userpicker/roles/group.view","csui/controls/userpicker/userpicker.view","csui/controls/userpicker/core.userpicker.roles","csui/controls/userpicker/impl/user.view","csui/controls/typeaheadpicker/typeaheadpicker.view","csui/controls/typeaheadpicker/impl/typeaheaditem.view","csui/controls/form/fields/base/csformfield.view","csui/controls/form/fields/base/csformfield.editable.behavior","csui/controls/form/fields/base/csformfield.states.behavior","csui/controls/form/fields/base/csformarrayfield.editable.behavior","csui/controls/form/fields/base/csformarrayfield.states.behavior","csui/controls/multilingual.text.picker/impl/multilingual.form.view","csui/controls/multilingual.text.picker/multilingual.popover.mixin","i18n!csui/controls/multilingual.text.picker/impl/nls/lang","csui/utils/usersettings/usersettings.tabs/usersettings.tabs","csui/utils/usersettings/usersettings.tabs/core.usersettings.tabs","csui/utils/usersettings/usersettings.tabs/usersettings.tabs.view","csui/utils/usersettings/usersettings","csui/utils/usersettings/impl/usersettings.model","csui/utils/userprofilesessions/userprofilesessions.tabs/userprofilesessions.tabs","csui/utils/userprofilesessions/userprofilesessions.tabs/core.userprofilesessions.tabs","csui/utils/userprofilesessions/userprofilesessions.tabs/userprofilesessions.tabs.view","csui/utils/userprofilesessions/userprofilesessions","csui/utils/userprofilesessions/impl/userprofilesessions.model","csui/lib/alpaca/js/alpaca.lite","i18n!csui/lib/alpaca/nls/lang","i18n!csui/controls/form/impl/nls/lang","csui/controls/form/impl/fields/csformfield.view","hbs!csui/controls/form/impl/fields/typeaheadfield/typeaheadfield","css!csui/controls/form/impl/fields/typeaheadfield/typeaheadfield","css!csui/controls/form/impl/fields/userfield/userfield"],{}),csui.require(["require","css"],function(e,t){t.styleLoad(e,"csui/bundles/csui-forms",!0)});
//# sourceMappingURL=csui-forms.js.map