csui.define("csui/models/widget/search.results/facet.server.adaptor.mixin",["csui/lib/underscore","csui/utils/url","csui/models/widget/search.results/search.facet.query.mixin"],function(e,t,i){"use strict";function s(t,i){return e.map(t,function(t){var s=e.map(t.facet_items,function(e){return{"name":e.display_name,"total":e.count,"value":e.value,"selected":i}});return{"id":t.name,"name":t.display_name,"type":t.type,"topics":s,"items_to_show":5,"select_multiple":!0}})}return{"mixin":function(o){i.mixin(o);var n=o.sync;return e.extend(o,{"filterQueryParameterName":"filter","makeServerAdaptor":function(e){return this.makeFacetQuery(e)},"cacheId":"","url":function(){var e=this.connector.getConnectionUrl().getApiBase("v2");return t.combine(e,"search")},"sync":function(t,i,s){var o=this.options.query.toJSON();return this.options.query.resetDefaults?(this.orderBy="",this.skipCount=0,this.options.query.resetDefaults=!1):(this.orderBy=this.orderBy&&this.previousQuery!==this.options.query.attributes.where?"":this.orderBy,this.skipCount=this.previousOrderBy!==this.orderBy?0:this.skipCount,this.topCount=this.options.topCount?this.options.topCount:10),e.extend(o,this.getFilterParam(this.filters)),e.extend(o,this.getBrowsableParams()),o.options="{'facets'}",(this.orderBy||this.pagination)&&this.cacheId&&(o.cache_id=this.cacheId,this.pagination=!1),e.extend(s,{"type":"POST","contentType":"application/x-www-form-urlencoded","data":o,"traditional":!0}),n.apply(this,arguments)},"parse":function(e,t){return e.results=e.featured?e.featured.concat(e.results):e.results,this.parseBrowsedState(e.collection,t),this._parseFacets(e.collection.searching.facets),e.results.sorting=e.collection.sorting,this.cacheId=e.collection&&e.collection.searching&&e.collection.searching.cache_id?e.collection.searching.cache_id:"",this.parseBrowsedItems(e,t)},"_parseFacets":function(e){var t;e&&(t=s(e.selected,!0).concat(s(e.available,!1))),this.reset(t)}})}}}),csui.define("csui/models/widget/search.results/search.facets",["csui/lib/underscore","csui/models/facets","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/browsable/v1.request.mixin","csui/models/browsable/v2.response.mixin","csui/models/widget/search.results/facet.server.adaptor.mixin","csui/utils/deepClone/deepClone"],function(e,t,i,s,o,n,a){"use strict";var r=t.extend({"constructor":function(e,i){this.options=i||(i={}),t.prototype.constructor.apply(this,arguments),this.makeConnectable(i).makeFetchable(i).makeBrowsableV1Request(i).makeBrowsableV2Response(i).makeServerAdaptor(i)},"clone":function(){return new this.constructor(this.models,{"connector":this.connector,"skip":this.skipCount,"top":this.topCount,"filters":e.deepClone(this.filters)})},"isFetchable":function(){return!!this.options.query.get("where")||!!this.options.query.get("query_id")}});return o.mixin(r.prototype),n.mixin(r.prototype),i.mixin(r.prototype),s.mixin(r.prototype),a.mixin(r.prototype),r}),csui.define("csui/utils/contexts/factories/search.results.facets.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/search.results/search.facets"],function(e,t,i,s,o,n){return s.extend({"propertyPrefix":"searchFacets","constructor":function(a,r){s.prototype.constructor.apply(this,arguments);var l=this.options.searchFacets||{};if(!(l instanceof i.Collection)){var c=a.getObject(o,r),h=l.options.query,u=e.config();l=new n(l.models,t.extend({"connector":c,"query":h,"stateEnabled":!0},l.options,u.options,{"autofetch":!0,"autoreset":!0}))}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/models/widget/search.results/object.to.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone"],function(e,t,i){"use strict";var s=i.Model.extend({"constructor":function(){i.Model.apply(this,arguments)}}),o=i.Collection.extend({"model":s,"constructor":function(){i.Collection.apply(this,arguments)},"isFetchable":!1}),n=["available","selected"];return function(e){return t.each(e,function(e){t.isObject(e)&&n.map(function(i){e[i]&&t.isArray(e[i])&&(e[i]=new o(e[i]))})}),e}}),csui.define("csui/widgets/search.custom/impl/form.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/lib/alpaca/js/alpaca.lite","csui/controls/form/form.view"],function(e,t,i,s,o,n){return n.extend({"constructor":function(e){this.options=e||{},n.prototype.constructor.call(this,i.extend(e,{"custom":{"adjustHeight":!0}})),this.jQuery=t;var s=this;this.customFlatten=function(e,t,o){return i.isObject(e)?i.each(e,function(e,i){s.customFlatten(e,t,i)}):(/^(anydate|anyvalue)/i.test(e)&&(e=""),t[o]=e),t},this.customFilter=function(){var e=this,t=[],s=e.customFlatten(e.objectList(e.getValues()),{});return i.isObject(s)&&i.each(s,function(i,o){if(e.customEndsWith(o,"_DFrom")||e.customEndsWith(o,"_DFor")||e.customEndsWith(o,"_DTo")){var n=o.substr(0,o.lastIndexOf("_"));!i&&s[n]&&(s[n]="")}i&&t.push(i)}),t},this.customEndsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},this.objectList=function(e){var t=[];return i.each(e,function(e){i.isObject(e)&&t.push(e)}),i.flatten(t)},this.$el.on("keydown",function(e){if(13!==e.keyCode||"text"!==e.target.type&&"search"!==e.target.type||""===e.target.value.trim()){if(13===e.keyCode&&s.jQuery(".binf-dropdown-menu").parent(".binf-open").length>=1)e.stopImmediatePropagation();else if(13===e.keyCode)if(""===e.target.value){var i=s.customFilter();i&&0===i.length?s.options.customView.trigger("enable:search",!1):s.triggerSearch(e)}else s.options.customView.trigger("enable:search",!0)}else{if(t(e.target).is("input.typeahead")&&0!==t(e.target).siblings(".typeahead.scroll-container:visible").length||e.target.closest(".cs-nodepicker"))return;s.triggerSearch(e)}}),this.$el.on("input change",function(e){if(""===e.target.value){s.trigger("update:form"),t(e.target).trigger("focus");var i=s.customFilter();i&&0===i.length&&s.options.customView.trigger("enable:search",!1)}else s.options.customView.trigger("enable:search",!0)})},"triggerSearch":function(e){this.options.customView.trigger("trigger:search")},"updateRenderedForm":function(){return!1},"onRenderForm":function(){this.options.customView.triggerMethod("render:form")},"onChangeField":function(e){var t=this.customFilter();0===t.length?this.options.customView.trigger("enable:search",!1):this.options.customView.trigger("enable:search",!0),!window.event||13!==window.event.keyCode&&13!==window.event.which||(e.value?(this.options.customView.trigger("enable:search",!0),this.options.customView.triggerMethod("field:updated")):t&&0===t.length?this.options.customView.trigger("enable:search",!1):t&&0!==t.length&&this.options.customView.triggerMethod("field:updated"))}})}),csui.define("hbs!csui/widgets/search.custom/impl/customsearchform",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s,o,n,a){var r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(r=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isSetType"):t,{"name":"if","hash":{},"fn":e.program(2,o,0,n,a),"inverse":e.program(4,o,0,n,a),"data":o,"loc":{"start":{"line":3,"column":4},"end":{"line":9,"column":11}}}))?r:""},"2":function(e,t,i,s,o,n,a){var r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="binf-col-md-12 cs-form-singlecolumn cs-form-set"\r\n           id="csfSingleCol_'+e.escapeExpression(e.lambda(null!=a[1]?l(a[1],"modelId"):a[1],t))+e.escapeExpression((r=null!=(r=l(i,"index")||o&&l(o,"index"))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"index","hash":{},"data":o,"loc":{"start":{"line":5,"column":42},"end":{"line":5,"column":52}}}):r))+'"></div>\r\n'},"4":function(e,t,i,s,o,n,a){var r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="binf-col-md-12 cs-form-doublecolumn"\r\n           id="csfLeftCol_'+e.escapeExpression(e.lambda(null!=a[1]?l(a[1],"modelId"):a[1],t))+e.escapeExpression((r=null!=(r=l(i,"index")||o&&l(o,"index"))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"index","hash":{},"data":o,"loc":{"start":{"line":8,"column":40},"end":{"line":8,"column":50}}}):r))+'"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,s,o,n,a){var r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-row">\r\n'+(null!=(r=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"fields"):t,{"name":"each","hash":{},"fn":e.program(1,o,0,n,a),"inverse":e.noop,"data":o,"loc":{"start":{"line":2,"column":2},"end":{"line":10,"column":11}}}))?r:"")+"</div>\r\n"},"useData":!0,"useDepths":!0});return i.registerPartial("csui_widgets_search.custom_impl_customsearchform",s),s}),csui.define("hbs!csui/widgets/search.custom/impl/customsearch.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,s,o){return'<div class="csui-custom-search-formitems"></div>'}});return i.registerPartial("csui_widgets_search.custom_impl_customsearch.item",s),s}),csui.define("csui/widgets/search.custom/impl/search.customFormView",["csui/lib/marionette","csui/lib/underscore","csui/lib/jquery","csui/utils/base","csui/widgets/search.custom/impl/form.view","hbs!csui/widgets/search.custom/impl/customsearchform","hbs!csui/widgets/search.custom/impl/customsearch.item"],function(e,t,i,s,o,n,a){return e.ItemView.extend({"tag":"div","className":"customsearch-attr-container","constructor":function(t){t||(t={}),this.options=t,e.ItemView.prototype.constructor.apply(this,arguments),this.model.on("error",this.errorHandle,this)},"template":a,"onRender":function(t){var i=new e.Region({"el":this.$el.find(".csui-custom-search-formitems")}),s=new o({"context":this.options.context,"model":this.model,"layoutMode":"singleCol","mode":"create","customView":this,"templateId":this.model.attributes.data.templateId});i.show(s),this.formView=s},"onRenderForm":function(){this.options.objectView.triggerMethod("render:form")}})}),csui.define("csui/widgets/search.custom/impl/search.customview.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/utils/url"],function(e,t,i,s,o,n){var a=i.Model.extend({"constructor":function(e,t){t||(t={}),i.Model.prototype.constructor.call(this,e,t),this.options=t,this.makeConnectable(t).makeFetchable(t)}});return s.mixin(a.prototype),o.mixin(a.prototype),e.extend(a.prototype,{"isFetchable":function(){return!!this.options},"url":function(){return n.combine(this.connector.connection.url,"nodes/"+this.options.nodeId+"/customviewsearchforms")},"parse":function(e,t){return e.name=e.text,e}}),a}),csui.define("csui/widgets/search.custom/impl/search.customview.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/widgets/search.custom/impl/search.customview.model"],function(e,t,i,s,o,n){return s.extend({"propertyPrefix":"customSearch","constructor":function(a,r){s.prototype.constructor.apply(this,arguments);var l=this.options.customSearch||{};if(!(l instanceof i.Model)){var c=a.getObject(o,r),h=e.config();l=new n(l.attributes||h.attributes,t.defaults({"connector":c,"nodeId":r.customQuery.nodeId},l.options,h.options))}this.property=l},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/widgets/search.custom/impl/search.customquery.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/utils/url"],function(e,t,i,s,o,n){var a=i.Model.extend({"constructor":function(e,t){this.options=t||(t={}),i.Model.prototype.constructor.call(this,e,t),this.makeConnectable(t).makeFetchable(t)}});return s.mixin(a.prototype),o.mixin(a.prototype),e.extend(a.prototype,{"isFetchable":function(){return this.options.node.isFetchable()},"url":function(){return n.combine(this.connector.connection.url,"searchqueries/"+this.get("id"))},"parse":function(e,t){return e.name=e.text,e}}),a}),csui.define("csui/widgets/search.custom/impl/search.customquery.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/widgets/search.custom/impl/search.customview.factory","csui/widgets/search.custom/impl/search.customquery.model","csui/utils/contexts/factories/connector"],function(e,t,i,s,o,n,a){return s.extend({"propertyPrefix":"customQuery","constructor":function(o,r){r||(r={}),s.prototype.constructor.apply(this,arguments);var l=this.options.customQuery||{};if(!(l instanceof i.Model)){var c=o.getObject(a,r),h=e.config();l=new n(r.attributes,t.extend({"connector":c},h.options,l.options))}this.property=l},"fetch":function(e){return this.property.fetch(this.options)}})}),csui.define("csui/widgets/search.custom/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.custom/impl/nls/root/lang",{"searchButtonMessage":"Search","title":"Custom View Search","loadingText":"Loading custom view search form"}),csui.define("hbs!csui/widgets/search.custom/impl/customsearch.main",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s,o){var n,a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-saved-search-submit-container">\r\n    <button class="binf-btn binf-btn-primary csui-custom-search-form-submit"\r\n            id="'+e.escapeExpression((a=null!=(a=r(i,"searchButton")||(null!=t?r(t,"searchButton"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"searchButton","hash":{},"loc":{"start":{"line":5,"column":16},"end":{"line":5,"column":32}}}):a))+'" value="Search"> '+e.escapeExpression(e.lambda(null!=(n=null!=t?r(t,"messages"):t)?r(n,"search"):n,t))+" </button>\r\n  </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,s,o){var n,a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-saved-search-form" id="'+e.escapeExpression((a=null!=(a=r(i,"searchFormId")||(null!=t?r(t,"searchFormId"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"searchFormId","hash":{},"loc":{"start":{"line":1,"column":40},"end":{"line":1,"column":56}}}):a))+'"></div>\r\n'+(null!=(n=r(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"hideSearchButton"):t,{"name":"unless","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":0},"end":{"line":7,"column":11}}}))?n:"")}});return i.registerPartial("csui_widgets_search.custom_impl_customsearch.main",s),s}),csui.define("hbs!csui/widgets/search.custom/impl/error.template",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-error-icon-div">\r\n  <div class="csui-error-icon-parent">\r\n    <div class="csui-error-icon notification_error"></div>\r\n  </div>\r\n</div>\r\n<div class="csui-suggestion">'+e.escapeExpression((n=null!=(n=a(i,"errorMessage")||(null!=t?a(t,"errorMessage"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"errorMessage","hash":{},"loc":{"start":{"line":6,"column":29},"end":{"line":6,"column":45}}}):n))+"</div>"}});return i.registerPartial("csui_widgets_search.custom_impl_error.template",s),s}),csui.define("css!csui/widgets/search.custom/impl/search.custom",[],function(){}),csui.define("csui/widgets/search.custom/impl/search.object.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/widgets/search.custom/impl/search.customFormView","csui/controls/progressblocker/blocker","csui/utils/contexts/factories/search.query.factory","csui/widgets/search.custom/impl/search.customquery.factory","csui/models/mixins/fetchable/fetchable.mixin","csui/utils/contexts/factories/application.scope.factory","i18n!csui/widgets/search.custom/impl/nls/lang","hbs!csui/widgets/search.custom/impl/customsearch.main","hbs!csui/widgets/search.custom/impl/error.template","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/utils/contexts/factories/next.node","css!csui/widgets/search.custom/impl/search.custom.css"],function(e,t,i,s,o,n,a,r,l,c,h,u,d,m,p){return i.CompositeView.extend({"className":"csui-custom-view-search initialLoading","templateHelpers":function(){return{"messages":{"search":h.searchButtonMessage},"hideSearchButton":!!this.options.hideSearchButton&&this.options.hideSearchButton,"searchFormId":this.searchFormId,"searchButton":e.uniqueId("csui-custom-search-form-submit")}},"behaviors":{"PerfectScrolling":{"behaviorClass":m,"contentParent":".csui-custom-search-formitems","scrollYMarginOffset":15}},"constructor":function(s){if(s=s||{},s.data||(s.data={}),this.context=s.context,this.searchFormId=e.uniqueId("csui-saved-search-form"),this.jQuery=t,i.CompositeView.prototype.constructor.apply(this,arguments),!s.model){var o=s.data.savedSearchQueryId||s.savedSearchQueryId;this.model=s.context.getCollection(r,{"attributes":{"id":o}}),l.mixin(r)}this.listenTo(this.model,"sync",this.render),this.listenTo(this.model,"error",this.handleError),this.loadingText=h.loadingText,this.$el.on({"change input":e.bind(this._refreshDOM,this)}),this.listenToOnce(this.model,"sync",function(){this.$el.removeClass("initialLoading")}),this.options.blockingParentView?n.delegate(this,this.options.blockingParentView):n.imbue(this),this.applicationScope=this.context.getModel(c)},"ui":function(){return{"searchFormId":"#"+this.searchFormId}},"_refreshDOM":function(){setTimeout(e.bind(function(){this.triggerMethod("dom:refresh")},this),500)},"template":u,"events":{"click .csui-custom-search-form-submit":"loadCustomSearch"},"onRender":function(t){if(this.model.attributes&&this.model.attributes.data){if(this.options.parentView)this.model.get("schema").title?this.options.parentView.options.title=this.model.get("schema").title:this.options.parentView.options.title=this.options.parentView.options.data&&this.options.parentView.options.data.title?this.options.parentView.options.data.title:this.options.parentView.options.title||h.title,this.trigger("change:title");else{var s=this.model.get("schema").title?this.model.get("schema").title:h.title;this.options.titleElement&&(this.options.titleElement.html(s),this.options.titleElement.attr("title",s))}if(this.options.customValues){this.updateCustomSearch(this.options.customValues.updatedValues,this.options.customValues.attributes,this.model.get("data"),!0)&&this.trigger("model:updated")}this.options.objectView=this;var n=new o(e.extend(this.options,{"model":this.model}));this.listenTo(n,"trigger:search",this._triggerSearch),this.listenTo(n,"enable:search",function(e){this._enableSearch(e)});new i.Region({"el":this.ui.searchFormId}).show(n),this.customFormView=n,this.listenTo(this.customFormView.formView,"form:changed",function(){this.customFormView.formView.isFormChanged=!0}),this.blockActions();var a=e.filter(e.flatten(e.map(this.model.get("data"),e.values)),function(e){return e});a&&0===a.length?this._enableSearch(!1):this._enableSearch(!0)}},"handleError":function(){if(this.unblockActions(),this.model.error&&this.model.error.message){this.options.parentView.options.title=this.options.parentView.options.data&&this.options.parentView.options.data.title?this.options.parentView.options.data.title:this.options.parentView.options.title||h.title,this.trigger("change:title"),this.ui.searchFormId.addClass("csui-custom-error");var e=d.call(this,{"errorMessage":this.model.error.message});this.ui.searchFormId.append(e),this.$el.find(".csui-saved-search-submit-container").addClass("binf-hidden")}},"_triggerSearch":function(){var e=this;setTimeout(function(t){e.jQuery(".csui-custom-search-form-submit").hasClass("binf-disabled")||e.loadCustomSearch()},50)},"_enableSearch":function(e){e?(this.jQuery(".csui-custom-search-form-submit").removeClass("binf-disabled").removeClass("csui-search-form-submit-disabled"),this.trigger("enable:search",!0)):(this.jQuery(".csui-custom-search-form-submit").addClass("binf-disabled").addClass("csui-search-form-submit-disabled"),this.trigger("enable:search",!1))},"onRenderForm":function(){this.$el.is(":visible")&&this._refreshDOM(),this.unblockActions(),this.options.parentView&&"function"==typeof this.options.parentView.unblockActions&&this.applicationScope&&"search"!=this.applicationScope.id&&this.options.parentView.unblockActions()},"onFieldUpdated":function(){this.loadCustomSearch()},"_checkEqualValues":function(e,t){for(var i=Object.keys(e),s=0;s<i.length;s++){var o=i[s];if(e[o]instanceof Object){if(!this._checkEqualValues(e[o],t[o]))return!1}else if(e[o]!=t[o])return!1}return!0},"updateCustomSearch":function(t,i,s,o){var n=!1;if(t)o&&(n=!this._checkEqualValues(this.model.attributes.data,t)),this.model.attributes.data=e.extend(this.model.attributes.data,t);else if(i){var a=Object.create(i);e.each(s,function(t,i){t instanceof Object&&e.each(t,function(i,s){i instanceof Object?i instanceof Array?a[s]&&(o&&!n&&(n=i[0]!=a[s]),i[0]=a[s],delete a[s]):e.each(i,function(e,t){a[t]&&(o&&!n&&(n=i[t]!=a[t]),i[t]=a[t],delete a[t])}):a[s]&&(o&&!n&&(n=t[s]!=a[s]),t[s]=a[s],delete a[s])})}),e.each(a,function(t,i){if("query_id"!==i){var s=-1!==i.indexOf("__")?i.split("__"):void 0,a={};if(s){var r=-1!==s[0].indexOf("_")?i.split("_"):void 0;if(r){a[i]=t;var l=this.model.attributes.data[r[0]];l[s[0]]=e.extend(l[s[0]],a),o&&(n=!0)}else a[i]=t,this.model.attributes.data[s[0]]=e.extend(this.model.attributes.data[s[0]],a),o&&(n=!0)}else{var c=-1!==i.indexOf("_")?i.split("_"):void 0;a[i]=t,c&&(this.model.attributes.data[c[0]]=e.extend(this.model.attributes.data[c[0]],a),o&&(n=!0))}}},this)}return o?n:void 0},"loadCustomSearch":function(){var t=this.customFormView.formView.customFilter();if(t&&0!==t.length){this.$(".csui-custom-search-form-submit").hasClass("binf-disabled")&&this._enableSearch(!0),this.updatedFormValues=this.customFormView.formView.getValues(),this.queryModel=this.options.query||this.context.getModel(a),this.nextNode=this.context.getModel(p),!this.options.query&&e.isEmpty(this.queryModel.attributes)&&e.isEmpty(this.nextNode.attributes)&&history.pushState({"search":{"name":void 0,"id":void 0}},"",location.href),this.queryModel.clear({"silent":!0}),this.queryModel.updatedValues=this.updatedFormValues;var i={};e.each(this.updatedFormValues,function(t){t instanceof Object&&e.each(t,function(t,s){t instanceof Object?e.each(t,function(t,s){t instanceof Object?e.each(t,function(e,t){i[t]=e}):i[s]=t}):i[s]=t})}),i.query_id=this.model.get("data").templateId,i.forcePerspectiveChange=this.options.showInSearchResultsNewPerspective,this.resetPageDefaults();var s=this.customFormView&&this.customFormView.formView?this.customFormView.formView.isFormChanged:void 0;if(void 0!==s&&!s)return;this.queryModel.set(i),this.trigger("click:search")}else this._enableSearch(!1)},"resetPageDefaults":function(){this.queryModel.resetDefaults=!0}})}),csui.define("csui/widgets/search.custom/search.custom.view",["csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/lib/jquery","csui/utils/base","csui/controls/tile/tile.view","csui/behaviors/default.action/default.action.behavior","csui/controls/tile/behaviors/blocking.behavior","csui/controls/progressblocker/blocker","csui/widgets/search.custom/impl/search.object.view","i18n!csui/widgets/search.custom/impl/nls/lang"],function(e,t,i,s,o,n,a,r,l,c,h){return n.extend({"constructor":function(t){t||(t={}),t.title=t.title||h.title,t.icon=t.titleBarIcon||"csui-icon-query-form-search",this.context=t.context,n.prototype.constructor.call(this,t),t=t.data?e.extend(t,t.data):t,this.options=t,this.options.parentView=this,this.options.blockingParentView=this,this.contentViewOptions=this.options,this.loadingText=h.loadingText,l.imbue(this),this.blockActions()},"contentView":c,"behaviors":{"DefaultAction":{"behaviorClass":a}},"onShow":function(){var t=e.uniqueId("search");this.$el.find(".tile-title .csui-heading").html("").attr("id",t),this.listenTo(this.contentView,"change:title",this.updateTitle),this.$el.find(".tile-header").parent().attr("role","region").attr("aria-labelledby",t),this.$el.find(".tile-content").attr("aria-labelledby",t)},"updateTitle":function(){this.$el.find(".tile-title .csui-heading").html(o.escapeHtml(this.options.title)),this.$el.find(".tile-title").attr("title",this.options.title),this.$el.find(".tile-controls").attr("title",this.options.title)}})}),csui.define("csui/widgets/search.forms/search.form.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/utils/url"],function(e,t,i,s,o,n){var a=i.Model.extend({"constructor":function(e,t){this.options=t||(t={}),i.Model.prototype.constructor.call(this,e,t),this.makeConnectable(t).makeFetchable(t)}});return s.mixin(a.prototype),o.mixin(a.prototype),e.extend(a.prototype,{"isFetchable":function(){return this.options.node.isFetchable()},"url":function(){return n.combine(this.connector.connection.url,"searchtemplates/"+this.get("id"))},"parse":function(e,t){return e.name=e.text,e}}),a}),csui.define("csui/widgets/search.forms/search.form.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/widgets/search.forms/search.form.model","csui/utils/contexts/factories/connector"],function(e,t,i,s,o,n){return s.extend({"propertyPrefix":"searchTemplate","constructor":function(a,r){r||(r={}),s.prototype.constructor.apply(this,arguments);var l=this.options.formQuery||{};if(!(l instanceof i.Model)){var c=a.getObject(n,r),h=e.config();l=new o(r.attributes,t.extend({"connector":c},h.options,l.options))}this.property=l},"fetch":function(e){return this.property.fetch(this.options)}})}),csui.define("csui/widgets/search.forms/search.form.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/controls/progressblocker/blocker","csui/widgets/search.custom/impl/search.object.view","csui/widgets/search.forms/search.form.factory","csui/models/mixins/fetchable/fetchable.mixin","csui/utils/contexts/factories/search.formquery.factory","csui/utils/contexts/factories/next.node","i18n!csui/widgets/search.forms/impl/nls/lang"],function(e,t,i,s,o,n,a,r,l,c){return o.extend({"constructor":function(o){if(o=o||{},o.data||(o.data={}),this.context=o.context,this.searchFormId=t.uniqueId("csui-saved-search-form"),this.jQuery=e,i.CompositeView.prototype.constructor.apply(this,arguments),!o.model){var r=o.data.searchFormId||o.searchFormId;this.model=o.context.getCollection(n,{"attributes":{"id":r}}),a.mixin(n)}this.listenTo(this.model,"sync",this.render),this.listenTo(this.model,"error",this.handleError),this.loadingText=c.loading,this.$el.on({"change input":t.bind(this._refreshDOM,this)}),this.listenToOnce(this.model,"sync",function(){this.$el.removeClass("initialLoading")}),this.options.blockingParentView?s.delegate(this,this.options.blockingParentView):s.imbue(this)},"loadCustomSearch":function(){var e=this.context&&this.context.viewStateModel;e&&e.setSessionViewState("selected_nodes",void 0);var i=this.customFormView.formView.customFilter();if(this.options.query||(this.options.query=this.model.options.options&&this.model.options.options.options.model),i&&0!==i.length){this.$(".csui-custom-search-form-submit").hasClass("binf-disabled")&&this._enableSearch(!0),this.updatedFormValues=this.customFormView.formView.getValues(),this.queryModel=this.options.query||this.context.getModel(r),this.nextNode=this.context.getModel(l),!this.options.query&&t.isEmpty(this.queryModel.attributes)&&t.isEmpty(this.nextNode.attributes)&&history.pushState({"search":{"name":void 0,"id":void 0}},"",location.href),this.queryModel.clear({"silent":!0}),this.queryModel.updatedValues=this.updatedFormValues;var s={};t.each(this.updatedFormValues,function(e){e instanceof Object&&t.each(e,function(e,i){e instanceof Object?t.each(e,function(e,i){e instanceof Object?t.each(e,function(e,t){s[t]=e}):s[i]=e}):s[i]=e})}),s.query_id=this.model.get("data").templateId,s.forcePerspectiveChange=this.options.showInSearchResultsNewPerspective,this.resetPageDefaults(),s.enableSearchForm=!0;var o=this.customFormView&&this.customFormView.formView?this.customFormView.formView.isFormChanged:void 0;if(void 0!==o&&!o)return;this.queryModel.set(s),this.trigger("click:search")}else this._enableSearch(!1)}})}),csui.define("csui/widgets/search.results/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.results/impl/nls/root/lang",{"searchHeader":"Search","searchResultsHeaderAria":"Search results header","filterHeader":"Refine by","loadingSearchResultMessage":"Loading search results...","initialLoadMessage":"Search to find","noSearchResultMessage":"No results found.","searchQueryKeyboardShortcut":"Press Ctrl+F3 to go to the Search Query box","suggestionKeyword":"Suggestions:","searchSuggestion1":"Make sure all words are spelled correctly.","searchSuggestion2":"Try different keywords.","searchSuggestion3":"Try more general keywords.","searchSuggestion4":"Try broadening or removing the location restriction.","failedSearchResultMessage":"Loading search results failed.","owner":"Owner","created":"Created","createdBy":"Created by","modified":"Modified","size":"Size","type":"Type","items":"Items","searchResults":"Search Results","searchSettings":"Search Settings","clearAll":"Clear all","about":"About","expandAll":"Expand all","collapseAll":"Collapse all","relevance":"Relevance","name":"Name","creationDate":"CreationDate","showMore":"Show more","showMoreAria":"Show more metadata","showLess":"Show less","showLessAria":"Show less metadata","selectAll":"Select all results on current page.","selectAllAria":"Select all results on current page","selectItem":"Select {0}","selectItemAria":"Select {0}. When selected an action bar of options can be reached per shift-tab","searchBackTooltip":"Go back","searchBackTooltipTo":"Go back to '{0}'","searchBackToHome":"Home","versionText":"v {0}","versionAria":"version {0}","versionSeparator":".","filterExpandTooltip":"Show filters","filterCollapseTooltip":"Hide filters","filterExpandAria":"Show filter panel","filterCollapseAria":"Hide filter panel","searchFormExpandTooltip":"Show search form","searchFormCollapseTooltip":"Hide search form","searchFormExpandAria":"Show search form panel","searchFormCollapseAria":"Hide search form panel","customSearchTab":"Search","searchFilterTab":"Refine by","mimeTypeAria":"type {0}","itemBreadcrumbAria":"Breadcrumb {0}","formatForNone":"{0} items","formatForOne":"{0} item","formatForTwo":"{0} items","formatForFive":"{0} items","promotedLabel":"Promoted","dialogTitle":"Filters","dialogTemplate":"Applying filters would clear your current selection.\nDo you want to proceed?","standardSearchView":"Standard search view","tabularSearchView":"Tabular search view","showDescription":"Show description","hideDescription":"Hide description","descriptionColumnTitle":"Description","summaryColumnTitle":"Summary","searchTableAria":"Search Results","searchResultsTitle":"Search results: ","saveAs":"Save as","saveAsAria":"Save as query","updateQuery":"Save","updateQueryAria":"Save query","saveOptionsAria":"Save Options"}),
csui.define("hbs!csui/widgets/search.results/impl/search.results.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="csui-search-facet-filter-parent binf-hidden">\r\n    <span class="csui-search-filter" role="button" aria-label="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"filterLabelAria"):n,t))+'"\r\n       aria-expanded="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"filterExpandedAria"):n,t))+'" title="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"searchFilterTooltip"):n,t))+'" tabindex="0">\r\n    </span>\r\n  </span>\r\n'},"3":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="csui-search-filter-parent binf-hidden">\r\n    <span class="csui-search-form-filter" role="button" aria-label="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"searchFormLabelAria"):n,t))+'"\r\n       aria-expanded="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"searchFormExpandedAria"):n,t))+'" title="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"searchFormTooltip"):n,t))+'" tabindex="0">\r\n    </span>\r\n  </span>\r\n'},"5":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-save-search-tools">\r\n      <button class="binf-btn binf-btn-primary csui-query-save" aria-haspopup="true"\r\n         aria-expanded="false" aria-label="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"saveAsAria"):n,t))+'" tabindex="0">'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"saveas"):n,t))+'</button>\r\n      <div class="csui-segemented-save-tools binf-hidden">\r\n        <button class="binf-btn binf-btn-primary csui-segmented-save csui-segmented-update-button"\r\n        aria-label="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"updateSavedQueryAria"):n,t))+'" tabindex="0">'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"updateSavedQuery"):n,t))+'</button>\r\n        <div class="binf-dropdown csui-segmented-dropdown">\r\n          <button class="binf-btn binf-btn-primary binf-dropdown-toggle csui-segmented-save csui-segmented-dropdown-button"\r\n          data-binf-toggle="dropdown" tabindex="0" aria-haspopup="false" aria-label="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"saveOptionsAria"):n,t))+'" aria-expanded="false">\r\n            <span class="icon-expandArrowDownWhite">\r\n            </span>\r\n          </button>\r\n          <ul class="binf-dropdown-menu" role="menu">\r\n            <li role="presentation">\r\n              <a role="button" href="#" class="csui-update-query" data-binf-toggle="tab">'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"updateSavedQuery"):n,t))+'</a>\r\n            </li>\r\n            <li role="presentation">\r\n              <a role="button" href="#" class="csui-create-query" data-binf-toggle="tab">'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"saveas"):n,t))+"</a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n"},"7":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-search-header-action csui-search-settings">\r\n        <div class="csui-setting-icon" title="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"settingsLabel"):n,t))+'"\r\n             aria-label="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"settingsLabel"):n,t))+'" tabindex="0"\r\n             role="button" aria-haspopup="true" aria-expanded="false">\r\n          '+(null!=(n=(a(i,"icon-v2")||t&&a(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","theme":null!=(n=null!=t?a(t,"messages"):t)?a(n,"iconTheme"):n,"iconName":"csui_action_settings32"},"loc":{"start":{"line":60,"column":10},"end":{"line":60,"column":96}}}))?n:"")+"\r\n        </div>\r\n        <div class=\"csui-settings-dropdown\" role='application'></div>\r\n      </div>\r\n\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-search-header" aria-label= "'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"searchResultsHeaderAria"):n,t))+'" role="toolbar">\r\n  <span class="csui-search-arrow-back-parent">\r\n    <span class="icon arrow_back cs-go-back" aria-label="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"searchBackTooltip"):n,t))+'"\r\n      title="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"searchBackTooltip"):n,t))+'" tabindex="0" role="button"></span>\r\n  </span>\r\n'+(null!=(n=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(n=null!=t?a(t,"messages"):t)?a(n,"enableSearchFilter"):n,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":2},"end":{"line":12,"column":9}}}))?n:"")+(null!=(n=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableCustomSearch"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":2},"end":{"line":19,"column":9}}}))?n:"")+'  <div class="csui-search-header-title"></div>\r\n  <div class="csui-search-right-header-container binf-hidden">\r\n'+(null!=(n=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"showSaveSearch"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":22,"column":4},"end":{"line":46,"column":11}}}))?n:"")+'    <div class="csui-search-header-action csui-search-sorting" id="csui-search-sorting"></div>\r\n    <span class="csui-search-header-action csui-description-toggle binf-hidden"\r\n          aria-label="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"descriptionTitle"):n,t))+'" title="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"descriptionTitle"):n,t))+'"\r\n          role="button" tabindex="0"></span>\r\n    <div class="csui-search-header-action csui-tabular-view"\r\n         aria-label="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"tabularViewIconTitle"):n,t))+'"\r\n         role="button" title="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"tabularViewIconTitle"):n,t))+'" tabindex="0">\r\n    </div>\r\n'+(null!=(n=a(i,"if").call(null!=t?t:e.nullContext||{},null!=(n=null!=t?a(t,"messages"):t)?a(n,"showSettings"):n,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":55,"column":4},"end":{"line":65,"column":11}}}))?n:"")+'  </div>\r\n</div>\r\n<div class="csui-table-rowselection-toolbar"></div>'}});return i.registerPartial("csui_widgets_search.results_impl_search.results.header",s),s}),csui.define("hbs!csui/widgets/search.results/impl/search.results.header.title",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,s,o){return'<div class="csui-search-header-title-container">\r\n  <h2>\r\n    <span id="resultsTitle" class="csui-results-title"></span>\r\n    <span id="customSearchTitle" class="csui-custom-search-title"></span>\r\n  </h2>\r\n</div>\r\n<span id="headerCount" class="headerCount"></span>\r\n<span id="searchHeaderCountLive" role="status" class="binf-sr-only" aria-live="polite"></span>'}});return i.registerPartial("csui_widgets_search.results_impl_search.results.header.title",s),s}),csui.define("csui/widgets/search.results/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.results/nls/root/lang",{"aboutNHits":"About {0} hits","ToolbarItemReserve":"Reserve","ToolbarItemUnreserve":"Unreserve"}),csui.define("csui/widgets/search.results/impl/search.results.header.title.view",["csui/lib/underscore","csui/lib/marionette","hbs!csui/widgets/search.results/impl/search.results.header.title","i18n!csui/widgets/search.results/nls/lang","i18n!csui/widgets/search.results/impl/nls/lang","css!csui/widgets/search.results/impl/search.results"],function(e,t,i,s,o){"use strict";return t.ItemView.extend({"template":i,"constructor":function(e){t.ItemView.prototype.constructor.apply(this,arguments)},"ui":{"resultTitle":"#resultsTitle","customSearchTitle":"#customSearchTitle","headerCount":"#headerCount","searchHeaderCountLive":"#searchHeaderCountLive"},"_assignTotalItemElem":function(){this.count=this.options.count||0;var t=e.str.sformat(s.aboutNHits,this.count),i="";return i=0!==this.count?t:o.noSearchResultMessage,this.ui.headerCount.empty(),this.ui.headerCount.append(t),this.countTextAria=o.searchResults+": "+i+". "+o.searchQueryKeyboardShortcut,this.ui.searchHeaderCountLive.text(this.countTextAria),!0},"_updateSearchResultsTitle":function(){var e,t;this.options.useCustomTitle&&this.title?(this.ui.customSearchTitle.text(this.title),t=o.searchResults+": "+this.title,e=o.searchResults+": "):(e=this.options.searchHeaderTitle||o.searchResults,t=e),this.ui.resultTitle.text(e),this.ui.resultTitle.parent().attr("title",t)},"setCustomSearchTitle":function(e){this.title='"'+e+'"',this.ui.customSearchTitle.text(e);var t=o.searchResults+": ";this.ui.resultTitle.text(t),this.ui.resultTitle.parent().attr("title",t+this.title)},"onRender":function(){this._assignTotalItemElem(),this._updateSearchResultsTitle()}})}),csui.define("csui/widgets/search.results/impl/search.results.header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/url","csui/utils/base","csui/utils/contexts/factories/previous.node","csui/utils/contexts/factories/next.node","csui/utils/namedsessionstorage","csui/models/nodes","csui/utils/contexts/factories/user","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/search.formquery.factory","csui/utils/accessibility","csui/pages/start/perspective.routing","csui/controls/settings/settings.view","csui/controls/globalmessage/globalmessage","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/widgets/search.results/controls/sorting/sort.menu.view","i18n!csui/widgets/search.results/impl/nls/lang","hbs!csui/widgets/search.results/impl/search.results.header","csui/utils/contexts/factories/application.scope.factory","csui/widgets/search.results/impl/search.results.header.title.view","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/controls/icon/icon.view","csui/utils/high.contrast/detector!","csui/utils/commands","css!csui/widgets/search.results/impl/search.results"],function(e,t,i,s,o,n,a,r,l,c,h,u,d,m,p,g,f,b,w,v,y,S,V,C,x,_,T){"use strict";var k,I=m.isAccessibleTable(),A=s.LayoutView.extend({"className":"csui-search-results-header","template":y,"templateHelpers":function(){return{"messages":{"searchResults":v.searchResults,"clearAll":v.clearAll,"about":v.about,"searchResultsHeaderAria":v.searchResultsHeaderAria,"searchBackTooltip":v.searchBackTooltip,"searchFilterTooltip":v.filterExpandTooltip,"searchFormTooltip":v.searchFormExpandTooltip,"filterLabelAria":v.filterExpandAria,"filterExpandedAria":this.options.originatingView.showFacet,"searchFormLabelAria":v.searchFormExpandAria,"searchFormExpandedAria":this.options.originatingView.showSearch,"enableSearchFilter":this.options.enableFacetFilter,"tabularViewIconTitle":v.tabularSearchView,"descriptionTitle":v.showDescription,"showSettings":!!this.options.enableSearchSettings,"settingsLabel":v.searchSettings,"tabularSearchView":"TabularView"===this.collection.prevSearchDisplayStyle,"iconTheme":this._useIconsForDarkBackground?"dark":"","saveas":v.saveAs,"saveAsAria":v.saveAsAria,"updateSavedQuery":v.updateQuery,"updateSavedQueryAria":v.updateQueryAria,"saveOptionsAria":v.saveOptionsAria},"enableCustomSearch":this.enableCustomSearch,"showSaveSearch":this.showSaveSearch}},"ui":{"back":".cs-go-back","parent":".csui-search-arrow-back-parent","filter":".csui-search-filter","filterParent":".csui-search-facet-filter-parent","searchParent":".csui-search-filter-parent","search":".csui-search-form-filter","resultTitle":".csui-results-title","searchHeaderTitle":".csui-search-header-title","settingsMenu":".csui-setting-icon","toggleResultsView":".csui-tabular-view","toggleDescription":".csui-description-toggle","headerRightToolbar":".csui-search-right-header-container","saveQuery":".csui-query-save","updateQuery":".csui-query-update","searchQuerySegmentedButton":".csui-segemented-save-tools","segmentedButtonSection":".csui-segmented-update-button","segmentedDropdownSection":".csui-segmented-dropdown-button","saveSearchTools":".csui-save-search-tools"},"events":{"click @ui.saveQuery":"onClickSaveQuery","click @ui.segmentedButtonSection":"onClickUpdateQuery","click @ui.back":"onClickBack","click @ui.parent":"onClickBack","keypress @ui.back":"onClickBack","click @ui.filter":"onClickFilter","click @ui.search":"onClickSearch","keypress @ui.search":"onClickSearch","click @ui.searchParent":"onClickSearch","keypress @ui.filter":"onClickFilter","click @ui.filterParent":"onClickFilter","click @ui.settingsMenu":"_createSettingsDropdown","keydown @ui.settingsMenu":"showSettingsDropdown","click @ui.toggleResultsView":"toggleView","keypress @ui.toggleResultsView":"toggleView","click @ui.toggleDescription":"onToggleDescriptionClick","keypress @ui.toggleDescription":"onToggleDescriptionClick","click .csui-update-query":"onClickUpdateQuery","click .csui-create-query":"onClickSaveQuery","keydown":"onKeyView"},"regions":{"settingsRegion":".csui-settings-dropdown"},"behaviors":{"TabableRegionBehavior":{"behaviorClass":b}},"currentlyFocusedElement":function(e){var i=this.$('.csui-search-header *[tabindex]:not(".binf-hidden")');return i.length>0&&i.prop("tabindex",-1),e&&e.shiftKey?t(i[i.length-1]):t(i[0]).hasClass("csui-acc-focusable-active")?this.ui.filter:t(i[0])},"currentlyFocusedElementInHeader":function(e){var i=this.$('.csui-search-header *[tabindex]:not(".binf-hidden"):visible:not(":disabled")');return i.length>0?t(i[this.accNthHeaderItemFocused]):null},"namedSessionStorage":new l,"constructor":function(e){e||(e={}),this.enableCustomSearch=e.originatingView.enableCustomSearch,this._icon_table_standard="csui_action_table_standard32",this._icon_table_tabular="csui_action_table_tabular32",this.localStorage=e&&e.localStorage,this.accNthHeaderItemFocused=this.enableCustomSearch?2:0,s.LayoutView.prototype.constructor.call(this,e),this.collection&&this.listenTo(this.collection,"reset",this.updateHeader).listenTo(this.collection,"remove",this._collectionItemRemoved),this.previousNode=e.context.getModel(a).clone(),this.nextNode=e.context.getModel(r),this.searchQuery=e.context.getModel(u),this.searchForm=e.context.getModel(d),this.applicationScope=e.context.getModel(S),this.context=e.context,this._useIconsForDarkBackground=e.useIconsForDarkBackground&&2!==_||1===_,this.localStorage.storage&&this.localStorage.storage.getItem("PrevSearchDisplayStyle")&&(this.showDescription=this.localStorage.get(this._createSearchDisplayStyleKey()+"_showDescription")),this.showSaveSearch=this.options.saveSearchTools&&this.isQueryObjectUnrestricted()},"initialize":function(){this.titleView=this.options.titleView||new V({})},"isQueryObjectUnrestricted":function(){var t=this.options.context&&this.options.context._factories.objecttypes&&e.has(this.options.context._factories.objecttypes.property.attributes,"objecttypes")&&this.options.context._factories.objecttypes.property.attributes.objecttypes;return!!e.find(t,function(e){return 258===e.type})},"toggleSaveSearchTools":function(e){this.options.originatingView&&this.options.originatingView.hasEditPermsForSearchQuery&&(this.ui.searchQuerySegmentedButton[e?"removeClass":"addClass"]("binf-hidden"),this.ui.saveQuery[e?"addClass":"removeClass"]("binf-hidden"))},"updateSaveSearchTools":function(e,t){var i=this.options.originatingView.enableCustomSearch;i?e?(this.disableSaveSearchTools=!1,this.toggleSaveSearchTools(!1)):this.disableSaveSearchTools||t||(this.disableSaveSearchTools=!0,this.toggleSaveSearchTools(!0)):!i&&this.options.originatingView.previousSavedQuery?(this.ui.searchQuerySegmentedButton.removeClass("binf-hidden"),this.ui.saveQuery.addClass("binf-hidden"),t||e?(this.ui.segmentedButtonSection.prop("disabled",!0),this.ui.segmentedDropdownSection.prop("disabled",!0)):(this.ui.segmentedButtonSection.prop("disabled",!1),this.ui.segmentedDropdownSection.prop("disabled",!1))):this.toggleSaveSearchTools(!1)},"updateHeader":function(){this.titleViewRendered||this.renderTitleView();var t=e.bind(function(e){this.ui.back[e?"addClass":"removeClass"]("search_results_data"),this.ui.filter[e?"addClass":"removeClass"]("search_results_data"),this.ui.filterParent[e?"removeClass":"addClass"]("binf-hidden"),this.ui.searchParent[e&&this.options.originatingView.enableCustomSearch?"removeClass":"addClass"]("binf-hidden"),this.ui.headerRightToolbar[e?"removeClass":"addClass"]("binf-hidden"),0!==this.ui.saveSearchTools.length&&this.ui.saveSearchTools[e&&!this.searchQuery.get("enableSearchForm")?"removeClass":"addClass"]("binf-hidden"),0!==this.ui.saveSearchTools.length&&!this.options.originatingView.hasEditPermsForSearchQuery&&this.ui.searchQuerySegmentedButton.addClass("binf-hidden")},this);this.collection&&this.collection.length?(t(!0),this.options.enableFacetFilter&&(this.filterIconView=new x({"iconName":"csui_action_filter32","states":!0,"on":this._filterStateIsOn}),this.filterIconRegion=new s.Region({"el":this.ui.filter}),this.filterIconRegion.show(this.filterIconView)),this.enableCustomSearch&&(this.searchIconView=new x({"iconName":"csui_action_search32","size":"normal","states":!0,"on":this._searchStateIsOn}),this.searchIconRegion=new s.Region({"el":this.ui.search}),this.searchIconRegion.show(this.searchIconView)),this.toggleDescriptionIconView=new x({"iconName":"csui_action_reveal_description32","states":!0,"on":this.showDescription,"theme":this._useIconsForDarkBackground?"dark":""}),this.toggleDescriptionIconRegion=new s.Region({"el":this.ui.toggleDescription}),this.toggleDescriptionIconRegion.show(this.toggleDescriptionIconView),this.toggleResultsIconView=new x({"iconName":this._icon_table_standard,"states":!0,"theme":this._useIconsForDarkBackground?"dark":""}),this.toggleResultsRegion=new s.Region({"el":this.ui.toggleResultsView}),this.toggleResultsRegion.show(this.toggleResultsIconView),this.updateToggleIcon()):(t(!1),this.setFacetOpened(!1)),this.updateToggleDescriptionIcon(),this.updateToggleDescription(),"TabularView"===this.collection.prevSearchDisplayStyle&&(this._createSortRegion(),this._createSortingView());var i=this.$('.csui-search-header *[tabindex]:not(".binf-hidden")');i.length>0&&i.splice(this.accNthHeaderItemFocused,1),i.length>0&&i.prop("tabindex",-1);var o=this.currentlyFocusedElementInHeader();o&&o.attr("tabindex",0),this.titleViewRendered=!1},"setFacetOpened":function(e){this._filterStateIsOn=e,this.filterIconView&&this.filterIconView.setIconStateIsOn(e)},"setSearchOpened":function(e){this._searchStateIsOn=e,this.searchIconView&&this.searchIconView.setIconStateIsOn(e)},"updateToggleDescriptionIcon":function(){"TabularView"===this.collection.prevSearchDisplayStyle?(this.$el.find(".csui-description-toggle").removeClass("search-settings-none"),this.$el.find(".csui-description-toggle").removeClass("binf-hidden"),this.showDescription?(this.$el.find(".csui-description-toggle").attr("title",v.hideDescription),this.$el.find(".csui-description-toggle").attr("aria-label",v.hideDescription)):(this.$el.find(".csui-description-toggle").attr("title",v.showDescription),this.$el.find(".csui-description-toggle").attr("aria-label",v.showDescription))):(this.$el.find(".csui-description-toggle").addClass("binf-hidden"),this.$el.find(".csui-description-toggle").removeClass("icon-description-shown"))},"updateToggleDescription":function(){if(this.options.originatingView&&"TabularView"===this.options.originatingView.collection.prevSearchDisplayStyle)if(I&&this.options.originatingView.targetView)this.options.originatingView.getAdditionalColumns();else{var e=this.options.originatingView.collection.filter(function(e){return e.get("description")}),t=this.options.originatingView.collection.filter(function(e){return e.get("summary")}),i=this.localStorage.get(this._createSearchDisplayStyleKey()+"_showDescription");switch(this.selectedSettings=this.selectedSettings?this.selectedSettings:this.collection.selectedSettings,this.selectedSettings){case"DO":e.length?(this.$el.find(".csui-description-toggle").removeClass("binf-hidden"),this._setShowDescriptions(i),i&&(this.$el.find(".csui-description-toggle").removeClass("icon-description-hidden").addClass("icon-description-shown"),this.$el.find(".csui-description-collapsed").removeClass("csui-description-collapsed"))):this.$el.find(".csui-description-toggle").hasClass("binf-hidden")||(this.$el.find(".csui-description-toggle").addClass("binf-hidden"),this._setShowDescriptions(!1),this.options.originatingView&&this.options.originatingView.targetView&&this.options.originatingView.targetView.$el.find(".cs-description").addClass("csui-description-collapsed"));break;case"SP":case"DP":case"SD":e.length||t.length?(this.$el.find(".csui-description-toggle").removeClass("binf-hidden"),this._setShowDescriptions(i),i&&(this.$el.find(".csui-description-toggle").removeClass("icon-description-hidden").addClass("icon-description-shown"),this.$el.find(".csui-description-collapsed").removeClass("csui-description-collapsed"))):this.$el.find(".csui-description-toggle").hasClass("binf-hidden")||(this.$el.find(".csui-description-toggle").addClass("binf-hidden"),this._setShowDescriptions(!1),this.options.originatingView&&this.options.originatingView.targetView&&this.options.originatingView.targetView.$el.find(".cs-description").addClass("csui-description-collapsed"));break;case"SO":t.length?(this.$el.find(".csui-description-toggle").removeClass("binf-hidden"),this._setShowDescriptions(i),i&&(this.$el.find(".csui-description-toggle").removeClass("icon-description-hidden").addClass("icon-description-shown"),this.$el.find(".csui-description-collapsed").removeClass("csui-description-collapsed"))):this.$el.find(".csui-description-toggle").hasClass("binf-hidden")||(this.$el.find(".csui-description-toggle").addClass("binf-hidden"),this._setShowDescriptions(!1),this.options.originatingView&&this.options.originatingView.targetView&&this.options.originatingView.targetView.$el.find(".cs-description").addClass("csui-description-collapsed"));break;case"NONE":this.$el.find(".csui-description-toggle").addClass("search-settings-none"),this.options.originatingView&&this.options.originatingView.targetView&&this.options.originatingView.targetView.$el.find(".cs-description").addClass("csui-description-collapsed"),this._setShowDescriptions(!1)}}},"onRender":function(){this.renderTitleView(),this.collection&&this.collection.length?(this.ui.back.addClass("search_results_data"),this.ui.filter.addClass("search_results_data")):(this.ui.back.addClass("search_results_nodata"),this.ui.filter.addClass("search_results_nodata")),this.listenTo(this.options.originatingView,"queryTools:update",function(){this.showSaveSearch&&this.updateSaveSearchTools()}),this.rendered=!0,this.$el.show();var e,t=this.context&&this.context.viewStateModel;this.options.enableBackButton?(this.ui.back.attr("title",this.options.backButtonToolTip),this.ui.back.attr("aria-label",this.options.backButtonToolTip)):this._isViewStateModelEnabled()&&!t.hasRouted()?e=!0:p.getInstance(this.options).hasRouted()||history.state||this._isViewStateModelEnabled()||this.previousNode.get("id")||this.namedSessionStorage&&this.namedSessionStorage.get("previousNodeId")||this._isPreviousRouter("Metadata")?this._setBackButtonTitle():e=!0,e&&(this.ui.back.hide(),this.ui.parent.hide()),this.tableRowSelectionToolbarRegion||(this._createToolbarRegion(),this.options.originatingView._updateToolbarActions()),this._isViewStateModelEnabled()&&t&&this.listenTo(t,"navigate",function(t){t&&e&&(this.ui.back.show(),this.ui.parent.show())})},"renderTitleView":function(){e.extend(this.titleView.options,{"count":this.collection&&this.collection.totalCount,"useCustomTitle":!!this.options.useCustomTitle,"searchHeaderTitle":this.collection&&this.collection.searching?this.collection.searching.result_title:v.searchResults}),this.titleView.render(),s.triggerMethodOn(this.titleView,"before:show",this.titleView,this),this.ui.searchHeaderTitle.append(this.titleView.el),s.triggerMethodOn(this.titleView,"show",this.titleView,this)},"onBeforeDestroy":function(){this.titleView.destroy()},"onClickSaveQuery":function(e){e.preventDefault(),e.stopPropagation(),this.resetTabIndex();var t=this,i=this.context,s=this.collection.connector,o=T.get("SaveQuery"),n=o.execute({"context":i,"connector":s,"originatingView":this.options.originatingView},this.collection);n.always(function(){"resolved"===n.state()&&t.updateSaveSearchTools(!1,!0)}),this._closeSaveSearchToolsDropdown()},"onClickUpdateQuery":function(e){e.preventDefault(),e.stopPropagation(),this.resetTabIndex();var t=this,i=this.context,s=this.collection.connector,o=T.get("UpdateQuery"),n=o.execute({"context":i,"connector":s},{"cache_id":this.collection.cacheId?this.collection.cacheId:this.collection.searching.cache_id,"queryId":this.searchQuery.get("query_id")?this.searchQuery.get("query_id"):this.options.originatingView.previousSavedQuery});n.always(function(){"resolved"===n.state()&&(t.enableCustomSearch&&!t.searchQuery.get("enableSearchForm")&&t.trigger("readonly:filters"),t.updateSaveSearchTools(!0,!1))}),this._closeSaveSearchToolsDropdown()},"_closeSaveSearchToolsDropdown":function(){this.ui.segmentedDropdownSection&&this.ui.segmentedDropdownSection.parent().hasClass("binf-open")&&this.ui.segmentedDropdownSection.binf_dropdown("toggle")},"showSettingsDropdown":function(e){var t=e.keyCode;13!==t&&32!==t||(this._createSettingsDropdown(e),e.preventDefault(),e.stopPropagation())},"_createSettingsDropdown":function(i){i.currentTarget.classList.contains("csui-setting-icon")&&(!this.settingsView||this.settingsView&&this.settingsView.isDestroyed()?(t(document).on("mouseup.dropdown."+this.cid,e.bind(this._closeSettingsMenu,this)),this.data={},this.settingsView=new g({"model":this.options.settings,"tableCollection":this.collection,"data":this.data,"searchResultsView":this.options.originatingView,"isTabularView":"TabularView"===this.collection.prevSearchDisplayStyle}),this.listenTo(this.settingsView,"close:menu",e.bind(function(e){this._destroySettingsDropdown(e)},this)),this.settingsRegion.show(this.settingsView),this.$el.children().find(".csui-setting-icon").attr("aria-expanded",!0),this.propagateEventsToViews(this.settingsView),this.settingsView.$el.find(".binf-show").trigger("focus"),this.settingsView.isVisible=!0,this.listenTo(this.settingsView,"update:showSummaryDescriptions",function(){this.selectedSettings=this.settingsView.model.get("display").summary_description.selected,"TabularView"===this.collection.prevSearchDisplayStyle?(this.options.originatingView.targetView.selectedSettings=this.selectedSettings,this.options.originatingView.targetView.options.descriptionRowViewOptions.showSummaryOnly="SO"===this.selectedSettings,this.updateHeader(),this._createSortRegion(),this._createSortingView(),this._createToolbarRegion(),this.options.originatingView._updateToolbarActions(),this.options.originatingView.collection.selectedItems&&this.options.originatingView.collection.selectedItems.length>0&&(this.options.originatingView.collection.selectedItems.reset(this.options.originatingView.targetView._allSelectedNodes.models),this.options.originatingView.targetView._tableRowSelectionToolbarView.trigger("toggle:condensed:header"))):(this.options.originatingView.targetView.render(),this.options.originatingView.targetView.trigger("render:metadata"))})):(this._destroySettingsDropdown(),this.$el.find(".csui-search-settings").attr("aria-expanded",!1)),this.setAccNthHeaderItemFocused(this.ui.settingsMenu))},"_destroySettingsDropdown":function(i){if(this.settingsView.destroy(),t(document).off("mouseup.dropdown."+this.cid),this.data.summary_description||this.data.display_regions){this.options.originatingView.blockActions(),this.collection.isSortOptionSelected=!0,this.formData=new FormData;var s=this;e.mapObject(this.data,function(e,t){"display_regions"===t?s.formData.append(t,e):"summary_description"===t&&s.formData.append(t,e)}),this.settingsView.model.save(null,{"parse":!1,"data":this.formData,"processData":!1,"cache":!1,"contentType":!1}).done(e.bind(function(e){s.data.summary_description&&(s.settingsView.model.get("display").summary_description.selected=s.data.summary_description,s.settingsView.trigger("update:showSummaryDescriptions"),s.options.originatingView.collection.settings_changed=!1),s.data.display_regions&&(s.options.originatingView.unblockActions(),s.options.originatingView.collection.settings_changed=!0,s.settingsView.options.tableCollection.fetch()),s.options.originatingView.collection.settings_changed||(s.options.originatingView.executeEndProcess(),s.trigger("render:table")),this.$el.find(".csui-setting-icon").trigger("focus")},this)).fail(function(e){e=new n.Error(e),f.showMessage("error",e.message),s.options.originatingView.unblockActions()}),this.options.originatingView&&this.options.originatingView.targetView&&this.options.originatingView.targetView.standardHeaderView&&(this.options.originatingView.targetView.standardHeaderView.expandAllView.pageChange(),this.options.originatingView.targetView.standardHeaderView.expandAllView._isExpanded=!1)}this.settingsView.isChanged&&this.options.originatingView&&(this.trigger("render:table"),this.settingsView.isChanged=!1)},"_closeSettingsMenu":function(e){!this.options.originatingView.$el.find(".load-container.binf-hidden").length||this.ui.settingsMenu.is&&this.ui.settingsMenu.is(e&&e.target)||this.settingsView&&this.settingsView.$el.has(e&&e.target).length?e.stopPropagation():this.settingsView&&this.settingsView.isDestroyed()||(this._destroySettingsDropdown(e),this.$el.find(".csui-setting-icon").trigger("focus").attr("aria-expanded",!1))},"onToggleDescriptionClick":function(e){if("keypress"===e.type&&(13===e.keyCode||32===e.keyCode)||"click"===e.type){e.preventDefault();var t=this.options.originatingView;this.showDescription?(this.localStorage.set(this._createSearchDisplayStyleKey()+"_showDescription",!1),t.targetView.options.descriptionRowViewOptions.showDescriptions=!1,this.ui.toggleDescription.attr("title",v.showDescription),this.ui.toggleDescription.attr("aria-label",v.showDescription),t.$el.find(".cs-description").addClass("csui-description-collapsed"),this._setShowDescriptions(!1)):(this.localStorage.set(this._createSearchDisplayStyleKey()+"_showDescription",!0),t.targetView.options.descriptionRowViewOptions.showDescriptions=!0,this.ui.toggleDescription.attr("title",v.hideDescription),this.ui.toggleDescription.attr("aria-label",v.hideDescription),this._setShowDescriptions(!0)),this.$el.find(".csui-description-toggle").trigger("focus"),this.currentlyFocusedElement(),this.setAccNthHeaderItemFocused(this.ui.toggleDescription);var i=this.currentlyFocusedElementInHeader();i&&i.attr("tabindex",0)}},"_setShowDescriptions":function(e){this.showDescription=e,this.toggleDescriptionIconView&&this.toggleDescriptionIconView.setIconStateIsOn(e),this.trigger("toggle:description",{"showDescriptions":e})},"toggleView":function(e){if("keypress"===e.type&&(13===e.keyCode||32===e.keyCode)||"click"===e.type){e.stopImmediatePropagation(),
e.preventDefault(),this.ui.toggleResultsView.removeClass("csui-toggledView"),"TabularView"===this.collection.prevSearchDisplayStyle?(this.$el.parent("#header").hasClass("csui-show-header")&&(this.$el.parent("#header").removeClass("csui-show-header"),this.$el.find(".csui-search-header").removeClass("csui-show-header")),this.$el.find(".csui-table-rowselection-toolbar").addClass("binf-hidden"),this._prevSearchDisplayStyleLocalStorage("StandardView"),this.collection.prevSearchDisplayStyle="StandardView",k&&k.$el.empty()):(this._prevSearchDisplayStyleLocalStorage("TabularView"),this.collection.prevSearchDisplayStyle="TabularView",this._createSortRegion(),this.collection.isSortOptionSelected=!0,this._createSortingView(),this._createToolbarRegion(),this.ui.toggleResultsView.addClass("csui-toggledView"),this.collection.selectedItems.length>0&&(this.$el.find(".csui-search-header").addClass("csui-show-header"),this.$el.parent("#header").addClass("csui-show-header"))),this.updateToggleIcon(),this.updateToggleDescriptionIcon(),this.updateToggleDescription(),this.trigger("reload:searchForm"),this.currentlyFocusedElement(),this.setAccNthHeaderItemFocused(this.ui.toggleResultsView);var t=this.currentlyFocusedElementInHeader();t&&t.attr("tabindex",0),this.ui.toggleResultsView.trigger("focus")}},"updateToggleIcon":function(){"TabularView"===this.collection.prevSearchDisplayStyle?(this.ui.toggleResultsView.attr("title",v.standardSearchView),this.ui.toggleResultsView.attr("aria-label",v.standardSearchView),this.toggleResultsIconView.setIcon(this._icon_table_standard)):(this.ui.toggleResultsView.attr("title",v.tabularSearchView),this.ui.toggleResultsView.attr("aria-label",v.tabularSearchView),this.toggleResultsIconView.setIcon(this._icon_table_tabular))},"_createSortRegion":function(){k=new s.Region({"el":this.$("#csui-search-sorting")})},"_createSortingView":function(){var e,t=this.options.originatingView;t&&(e=t.sortingView?t.sortingView:new w({"collection":this.options.collection,"enableSorting":void 0===this.options.enableSorting||this.options.enableSorting}),k.show(e))},"_createToolbarRegion":function(){var e=new s.Region({"el":".csui-search-results-header .csui-table-rowselection-toolbar"});this.tableRowSelectionToolbarRegion=e},"_isPreviousRouter":function(e){var t=this.context.viewStateModel;return t&&t.get(t.CONSTANTS.LAST_ROUTER)===e},"_prevSearchDisplayStyleLocalStorage":function(e){this.localStorage.set(this._createSearchDisplayStyleKey(),e)},"_setBackButtonTitle":function(){var t=v.searchBackToHome,i=this.context.viewStateModel;t=i&&i.getBackToTitle(),this.ui.back.attr("title",e.str.sformat(v.searchBackTooltipTo,t)),this.ui.back.attr("aria-label",e.str.sformat(v.searchBackTooltipTo,t))},"setCustomSearchTitle":function(e){!!this.titleView.setCustomSearchTitle&&this.titleView.setCustomSearchTitle(e)},"_collectionItemRemoved":function(){var e=this.collection.totalCount;this.collection.totalCount=--this.collection.totalCount,"TabularView"===this.collection.prevSearchDisplayStyle&&this.tableRowSelectionToolbarRegion&&delete this.tableRowSelectionToolbarRegion,this.render(),this.titleViewRendered=!0,this.updateHeader(),this.collection.totalCount=e},"onClickBack":function(e){this.backButtonClicked||(this.backButtonClicked=!0,("keypress"===e.type&&13===e.keyCode||"click"===e.type)&&(this.options.enableBackButton?(e.stopPropagation(),this.trigger("go:back")):this._isViewStateModelEnabled()?-1!==this.context.viewStateModel.getLastRouterIndex()?this.context.viewStateModel.restoreLastRouter():this.applicationScope.set("id",""):this.previousNode.get("id")||this.namedSessionStorage&&this.namedSessionStorage.get("previousNodeId")?(this.nextNode.set("id",void 0,{"silent":!0}),this.nextNode.set("id",this.namedSessionStorage.get("previousNodeId"))):this.applicationScope.set("id","")))},"_isViewStateModelEnabled":function(){return this.context&&this.context.viewStateModel},"onClickFilter":function(e){("keypress"!==e.type||13!==e.keyCode&&32!==e.keyCode)&&"click"!==e.type||(e.preventDefault(),e.stopPropagation(),this.searchinit=!1,this.filterinit=!0,this.trigger("open:facet:view",this.options.originatingView),this.trigger("toggle:filter",this.options.originatingView),this.trigger("focus:filter",this.options.originatingView),this.trigger("correct:search:aria",this.options.originatingView),this.setAccNthHeaderItemFocused(this.ui.filter))},"onClickSearch":function(e){("keypress"!==e.type||13!==e.keyCode&&32!==e.keyCode)&&"click"!==e.type||(e.preventDefault(),e.stopPropagation(),this.searchinit=!0,this.filterinit=!1,this.trigger("open:custom:view",this.options.originatingView),this.trigger("toggle:search",this.options.originatingView),this.trigger("focus:search",this.options.originatingView),this.trigger("correct:filter:aria",this.options.originatingView),this.setAccNthHeaderItemFocused(this.ui.search))},"onKeyView":function(e){if("keydown"===e.type){var i=this.$('.csui-search-header *[tabindex]:not(".binf-hidden"):visible:not(":disabled")');switch(9!=e.keyCode&&16!=e.keyCode&&this.currentlyFocusedElement(),e.keyCode){case 39:this.accNthHeaderItemFocused<i.length-1&&this.accNthHeaderItemFocused++,this._moveTo(e);break;case 37:this.accNthHeaderItemFocused>0&&this.accNthHeaderItemFocused--,this._moveTo(e);break;case 13:case 32:t(e.target).click(),e.preventDefault(),e.stopPropagation(),this.currentlyFocusedElementInHeader().trigger("focus"),this.currentlyFocusedElementInHeader().attr("tabindex",0)}}},"resetTabIndex":function(){var e=this.$('.csui-search-header *[tabindex]:not(".binf-hidden"):visible');if(e&&e.length>0){e[0].tabIndex=0;for(var t=1;t<e.length;t++)e[t].tabIndex=-1;this.accNthHeaderItemFocused=0}},"setAccNthHeaderItemFocused":function(e){var t=this.$('*[tabindex]:not(".binf-hidden"):visible');this.accNthHeaderItemFocused=t.index(e)},"_moveTo":function(e){e.preventDefault(),e.stopPropagation(),this.trigger("changed:focus",this),this.currentlyFocusedElementInHeader().trigger("focus"),this.currentlyFocusedElementInHeader().attr("tabindex",0)},"_createSearchDisplayStyleKey":function(){var e=this.context||this.options&&this.options.context,t=(new o).getAbsolute(),i=e&&e.getModel(h).get("id");return"undefined"==t||"null"==t?t&&i?t+i:"defaultSearchDisplayStyle":t&&t.split("//")[1]&&t.split("//")[1].split("/")[0].split(":")[0]+i}});return e.extend(A.prototype,C),A}),csui.define("hbs!csui/widgets/search.results/impl/metadata/search.metadata",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' <span class="csui-count" >+'+e.escapeExpression((n=null!=(n=a(i,"count")||(null!=t?a(t,"count"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"count","hash":{},"loc":{"start":{"line":9,"column":28},"end":{"line":9,"column":37}}}):n))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,s,o){var n,a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-search-metadata-label">\r\n     <span class="csui-search-metadata binf-col-lg-4 binf-col-md-4 binf-col-sm-4\r\n                    binf-col-xs-4" title="'+e.escapeExpression((a=null!=(a=r(i,"titleAttr")||(null!=t?r(t,"titleAttr"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"titleAttr","hash":{},"loc":{"start":{"line":3,"column":42},"end":{"line":3,"column":55}}}):a))+'">'+e.escapeExpression((a=null!=(a=r(i,"label")||(null!=t?r(t,"label"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":3,"column":57},"end":{"line":3,"column":66}}}):a))+'</span>\r\n</div>\r\n<div class="csui-search-metadata-value" title="'+e.escapeExpression((a=null!=(a=r(i,"tooltipText")||(null!=t?r(t,"tooltipText"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"tooltipText","hash":{},"loc":{"start":{"line":5,"column":47},"end":{"line":5,"column":62}}}):a))+'">\r\n<span class="searchDetails binf-col-lg-7 binf-col-md-7 binf-col-sm-7\r\n                    binf-col-xs-7">'+e.escapeExpression((a=null!=(a=r(i,"value")||(null!=t?r(t,"value"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":7,"column":35},"end":{"line":7,"column":44}}}):a))+"</span>\r\n"+(null!=(n=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"count"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":0},"end":{"line":10,"column":7}}}))?n:"")+"</div>\r\n\r\n"}});return i.registerPartial("csui_widgets_search.results_impl_metadata_search.metadata",s),s}),csui.define("csui/widgets/search.results/impl/metadata/search.metadata.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/base","csui/controls/table/cells/cell.factory","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/search/category/category.popover.list.view","csui/utils/types/date","i18n!csui/widgets/search.results/impl/nls/lang","hbs!csui/widgets/search.results/impl/metadata/search.metadata","css!csui/widgets/search.results/impl/search.results"],function(e,t,i,s,o,n,a,r,l,c){"use strict";var h=i.ItemView.extend({"className":"csui-search-item-details binf-col-lg-12","template":c,"attributes":{"role":"listitem"},"events":{"click .csui-count":"openPopover","keydown .csui-search-metadata-value":"onKeyInView"},"constructor":function(){i.ItemView.prototype.constructor.apply(this,arguments);var e=o.getCellView(this.model);""===e.columnClassName&&(e=n);var t={"CellView":e,"attributes":this.model.attributes,"name":this.model.get("key"),"title":this.model.get("title")||this.model.get("name")||this.model.get("column_name")};this.metadataView=new e({"tagName":"span","model":this.options.searchItemModel,"column":t,"originatingView":this.options.originatingView,"searchMetadataView":this})},"templateHelpers":function(){this._index<this.options.displayCount?this._index<2&&this.el.classList.add("csui-search-result-item-tobe-hide"):(this.el.classList.add("csui-search-hidden-items"),this.el.classList.add("truncated-"+this.options.rowId));var e=this.metadataView.getValueData&&this.metadataView.getValueData();return{"label":this.model.get("name"),"titleAttr":this.model.get("titleAttr")||this.model.get("name"),"value":e&&(e.formattedValue||e.value||e.name),"tooltipText":e&&(e.value||e.name||e.nameAria),"count":e&&e.count}},"onRender":function(){if(this.metadataView.collection){var t=e(this.$el.find(".csui-search-metadata-value")),i=this.metadataView.getValueData&&this.metadataView.getValueData().value;t.attr("tabindex",0),t.attr("aria-label",i),t.attr("role","button")}},"openPopover":function(e){this.metadataView.openPopover(e)},"onKeyInView":function(e){this.metadataView.onKeyInView(e)}});return i.CollectionView.extend({"className":"csui-search-items-metadata","childView":h,"ui":{"fieldsToBeHiddenOnHover":".csui-search-result-item-tobe-hide"},"childViewOptions":function(){return{"rowId":this.options.rowId,"searchItemModel":this.model,"displayCount":this.childDisplayCount,"originatingView":this.options.originatingView}},"constructor":function(e){e||(e={}),this.options=e,i.CollectionView.prototype.constructor.apply(this,arguments);var t=this.model.get("description"),s=this.model.get("summary");this.childDisplayCount=s&&s.length||t&&t.length?3:2},"filter":function(e,t,i){return"size"===e.get("key")||"OTObjectSize"===e.get("key")?this.model.get(e.get("key"))&&""!==this.model.get(e.get("key")+"_formatted"):["OTLocation","OTName","OTMIMEType","reserved","favorite"].indexOf(e.get("key"))>=0?void 0:this.model.get(e.get("key"))&&""!==this.model.get(e.get("key"))},"onRender":function(){this.collection;this.collection.comparator=function(e){return e.get("definitions_order")},this.collection.sort(),this.bindUIElements()}})}),csui.define("csui/widgets/search.results/impl/breadcrumbs/search.breadcrumbs.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette3","csui/utils/base","csui/utils/contexts/factories/next.node","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/utils/commands","csui/utils/commandhelper","csui/controls/breadcrumbs/breadcrumbs.view"],function(e,t,i,s,o,n,a,r,l,c){return c.extend({"behaviors":{"TabableRegion":{"behaviorClass":a}},"constructor":function(t){t||(t={}),c.prototype.constructor.call(this,t),this.listenTo(this,"childview:click:ancestor",e.bind(this.onClickAncestor,this))},"onClickAncestor":function(t,s){var o=this.context=this.options.context;this._nextNode=this.options.node||o.getModel(n);var a=s.get("id"),c={"node":s};if(this.trigger("before:defaultAction",c),!c.cancel)if(this.accLastBreadcrumbElementFocused){var h=r.get("goToLocation");if(!h)throw new Error("Invalid command: goToLocation");this._nextNode.set("id",a,{"silent":!0}),this._nextNode.parent=void 0;var u={"nodes":new i.Collection([this._nextNode]),"context":this.options.context,"model":this._nextNode,"originatingView":this},d={"context":this.options.context,"originatingView":this};l.handleExecutionResults(h.execute(u,d))}else{this._nextNode.get("id")===a&&this._nextNode.unset("id",{"silent":!0});var m=this.context&&this.context.viewStateModel,p=m&&m.get("state");p&&this.context.viewStateModel.set("state",e.omit(p,"filter"),{"silent":!0}),this._nextNode.trigger("before:change:id",s,this),this._nextNode.set("id",a)}this.$el.trigger("setCurrentTabFocus")}})}),csui.define("hbs!csui/widgets/search.results/impl/search.result",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s,o){return' aria-describedby="idOfPromotedLabel" '},"3":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <div class="csui-search-results-version csui-search-item-version-'+e.escapeExpression((n=null!=(n=a(i,"cid")||(null!=t?a(t,"cid"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":20,"column":81},"end":{"line":20,"column":88}}}):n))+'">\r\n                  <a href="javascript:void(0);" class="csui-search-version-label" aria-label="'+e.escapeExpression((n=null!=(n=a(i,"versionAria")||(null!=t?a(t,"versionAria"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"versionAria","hash":{},"loc":{"start":{"line":21,"column":94},"end":{"line":21,"column":109}}}):n))+'">'+e.escapeExpression((n=null!=(n=a(i,"versionText")||(null!=t?a(t,"versionText"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"versionText","hash":{},"loc":{"start":{"line":21,"column":111},"end":{"line":21,"column":126}}}):n))+"\r\n                  </a>\r\n                </div>\r\n"},"5":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <div class="csui-search-item-action-'+e.escapeExpression((n=null!=(n=a(i,"cid")||(null!=t?a(t,"cid"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":29,"column":52},"end":{"line":29,"column":59}}}):n))+"-"+e.escapeExpression((n=null!=(n=a(i,"version_id")||(null!=t?a(t,"version_id"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"version_id","hash":{},"loc":{"start":{"line":29,"column":60},"end":{"line":29,"column":74}}}):n))+' csui-search-item-inline-actions"></div>\r\n'},"7":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                <div class="csui-search-item-action-'+e.escapeExpression((n=null!=(n=a(i,"cid")||(null!=t?a(t,"cid"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":31,"column":52},"end":{"line":31,"column":59}}}):n))+' csui-search-item-inline-actions"></div>\r\n'},"9":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <div class="csui-search-promoted" id="idOfPromotedLabel" aria-label="'+e.escapeExpression((n=null!=(n=a(i,"promoted_label")||(null!=t?a(t,"promoted_label"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"promoted_label","hash":{},"loc":{"start":{"line":40,"column":83},"end":{"line":40,"column":101}}}):n))+'" title="'+e.escapeExpression((n=null!=(n=a(i,"promoted_label")||(null!=t?a(t,"promoted_label"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"promoted_label","hash":{},"loc":{"start":{"line":40,"column":110},"end":{"line":40,"column":128}}}):n))+'">\r\n                <span class="csui-search-promoted-label">'+e.escapeExpression((n=null!=(n=a(i,"promoted_label")||(null!=t?a(t,"promoted_label"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"promoted_label","hash":{},"loc":{"start":{"line":41,"column":57},"end":{"line":41,"column":75}}}):n))+"</span>\r\n              </div>\r\n"},"11":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <div class="csui-search-breadcrumb">\r\n                <div class="csui-search-item-breadcrumb csui-search-item-breadcrumb-'+e.escapeExpression((n=null!=(n=a(i,"cid")||(null!=t?a(t,"cid"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":46,"column":84},"end":{"line":46,"column":91}}}):n))+'"></div>\r\n                <div class="csui-search-row-spacer binf-col-lg-12 binf-col-md-12 binf-col-sm-12\r\n                binf-col-xs-12"></div>\r\n              </div>\r\n'},"13":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <p class="csui-search-item-desc csui-overflow-description binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n            '+e.escapeExpression((n=null!=(n=a(i,"description")||(null!=t?a(t,"description"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"description","hash":{},"loc":{"start":{"line":54,"column":12},"end":{"line":54,"column":27}}}):n))+'\r\n          </p>\r\n          <div class="csui-search-row-spacer binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 csui-search-row-spacer-divider">\r\n          </div>\r\n'},"15":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <p class="csui-search-item-summary csui-overflow-summary binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n'+(null!=(n=a(i,"each").call(null!=t?t:e.nullContext||{},null!=t?a(t,"summary"):t,{"name":"each","hash":{},"fn":e.program(16,o,0),"inverse":e.noop,"loc":{"start":{"line":62,"column":12},"end":{"line":68,"column":21}}}))?n:"")+'          </p>\r\n          <div class="csui-search-row-spacer binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 csui-search-row-spacer-divider">\r\n          </div>\r\n'},"16":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(n=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"type"):t,{"name":"if","hash":{},"fn":e.program(17,o,0),"inverse":e.program(19,o,0),"loc":{"start":{"line":63,"column":12},"end":{"line":67,"column":19}}}))?n:""},"17":function(e,t,i,s,o){var n=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="csui-summary-hh">'+e.escapeExpression(e.lambda(null!=t?n(t,"text"):t,t))+"</span>\r\n"},"19":function(e,t,i,s,o){return"            <span>"+e.escapeExpression(e.lambda(t,t))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,s,o){var n,a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-search-item-row-wrapper csui-search-item-complete-row binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n  <div class="csui-search-item-row binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <h3 class="csui-search-item-hide-h3">'+e.escapeExpression((a=null!=(a=r(i,"name")||(null!=t?r(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":41},"end":{"line":3,"column":49}}}):a))+'</h3>\r\n    <div class="csui-search-item-check"></div>\r\n    <div class="csui-search-item-icon">\r\n      <a href="'+e.escapeExpression((a=null!=(a=r(i,"defaultActionUrl")||(null!=t?r(t,"defaultActionUrl"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"defaultActionUrl","hash":{},"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":35}}}):a))+'"\r\n       '+(null!=(n=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"has_promoted"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":7},"end":{"line":7,"column":72}}}))?n:"")+'\r\n                        aria-label="'+e.escapeExpression((a=null!=(a=r(i,"name")||(null!=t?r(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":36},"end":{"line":8,"column":44}}}):a))+" "+e.escapeExpression((a=null!=(a=r(i,"mimeTypeAria")||(null!=t?r(t,"mimeTypeAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"mimeTypeAria","hash":{},"loc":{"start":{"line":8,"column":45},"end":{"line":8,"column":61}}}):a))+'" title="'+e.escapeExpression((a=null!=(a=r(i,"OTName")||(null!=t?r(t,"OTName"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"OTName","hash":{},"loc":{"start":{"line":8,"column":70},"end":{"line":8,"column":80}}}):a))+'"\r\n                  class="csui-search-item-link '+e.escapeExpression(e.lambda(null!=(n=null!=t?r(t,"messages"):t)?r(n,"inactiveClass"):n,t))+'"><span class="csui-type-icon"></span></a>\r\n      </div>\r\n    <div class="csui-search-col2 binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n      <div class="csui-search-item-left-panel binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n        <div class="csui-search-item">\r\n          <div class="csui-search-item-name-wrapper">\r\n            <div class="csui-search-item-name ">\r\n              <a href="'+e.escapeExpression((a=null!=(a=r(i,"defaultActionUrl")||(null!=t?r(t,"defaultActionUrl"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"defaultActionUrl","hash":{},"loc":{"start":{"line":16,"column":23},"end":{"line":16,"column":43}}}):a))+'"  '+(null!=(n=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"has_promoted"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":16,"column":46},"end":{"line":16,"column":111}}}))?n:"")+'\r\n                  aria-label="'+e.escapeExpression((a=null!=(a=r(i,"name")||(null!=t?r(t,"name"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":17,"column":30},"end":{"line":17,"column":38}}}):a))+" "+e.escapeExpression((a=null!=(a=r(i,"mimeTypeAria")||(null!=t?r(t,"mimeTypeAria"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"mimeTypeAria","hash":{},"loc":{"start":{"line":17,"column":39},"end":{"line":17,"column":55}}}):a))+'" title="'+e.escapeExpression((a=null!=(a=r(i,"OTName")||(null!=t?r(t,"OTName"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"OTName","hash":{},"loc":{"start":{"line":17,"column":64},"end":{"line":17,"column":74}}}):a))+'"\r\n                  class="csui-search-item-link '+e.escapeExpression(e.lambda(null!=(n=null!=t?r(t,"messages"):t)?r(n,"inactiveClass"):n,t))+'">'+e.escapeExpression((a=null!=(a=r(i,"OTName")||(null!=t?r(t,"OTName"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"OTName","hash":{},"loc":{"start":{"line":18,"column":75},"end":{"line":18,"column":85}}}):a))+"</a>\r\n"+(null!=(n=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"has_version"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":19,"column":14},"end":{"line":24,"column":21}}}))?n:"")+'              <div class="csui-icon csui-search-results-nodestateicon csui-search-item-nodestateicon\r\n                  csui-search-item-nodestateicon-'+e.escapeExpression((a=null!=(a=r(i,"cid")||(null!=t?r(t,"cid"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":26,"column":49},"end":{"line":26,"column":56}}}):a))+'"></div>\r\n                <div class="csui-search-toolbar-container binf-hidden ">\r\n'+(null!=(n=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"version_id"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.program(7,o,0),"loc":{"start":{"line":28,"column":14},"end":{"line":32,"column":21}}}))?n:"")+'              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="csui-search-item-content-wrapper binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n          <div class="csui-search-promoted-breadcrumbs-row">\r\n'+(null!=(n=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"has_promoted"):t,{"name":"if","hash":{},"fn":e.program(9,o,0),"inverse":e.noop,"loc":{"start":{"line":39,"column":12},"end":{"line":43,"column":19}}}))?n:"")+(null!=(n=r(i,"if").call(null!=t?t:e.nullContext||{},null!=(n=null!=t?r(t,"messages"):t)?r(n,"showBreadcrumb"):n,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"loc":{"start":{"line":44,"column":12},"end":{"line":50,"column":19}}}))?n:"")+"          </div>\r\n"+(null!=(n=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"description"):t,{"name":"if","hash":{},"fn":e.program(13,o,0),"inverse":e.noop,"loc":{"start":{"line":52,"column":10},"end":{"line":58,"column":17}}}))?n:"")+"          \r\n"+(null!=(n=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"summary"):t,{"name":"if","hash":{},"fn":e.program(15,o,0),"inverse":e.noop,"loc":{"start":{"line":60,"column":10},"end":{"line":72,"column":17}}}))?n:"")+'        </div>\r\n      </div>\r\n      <div class="csui-search-item-center-panel binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n      <div class="csui-search-item-right-panel">\r\n        <div class="csui-search-item-control-'+e.escapeExpression((a=null!=(a=r(i,"cid")||(null!=t?r(t,"cid"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":77,"column":45},"end":{"line":77,"column":52}}}):a))+' binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n          <div class="csui-search-row-spacer binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n          <div role="list" class="csui-search-item-details-wrapper binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="csui-search-item-action-panel csui-search-item-action-panel-'+e.escapeExpression((a=null!=(a=r(i,"cid")||(null!=t?r(t,"cid"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":83,"column":76},"end":{"line":83,"column":83}}}):a))+'">\r\n      <div class="csui-search-item-fav search-fav-'+e.escapeExpression((a=null!=(a=r(i,"cid")||(null!=t?r(t,"cid"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":84,"column":50},"end":{"line":84,"column":57}}}):a))+'"></div>\r\n    </div>\r\n  </div>\r\n</div>'}});return i.registerPartial("csui_widgets_search.results_impl_search.result",s),s}),csui.define("hbs!csui/widgets/search.results/impl/search.empty",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-no-result-message-wrapper">\r\n    <p class="csui-no-result-message" title="'+e.escapeExpression((n=null!=(n=a(i,"message")||(null!=t?a(t,"message"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"message","hash":{},"loc":{"start":{"line":2,"column":45},"end":{"line":2,"column":56}}}):n))+'">'+e.escapeExpression((n=null!=(n=a(i,"message")||(null!=t?a(t,"message"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"message","hash":{},"loc":{"start":{"line":2,"column":58},"end":{"line":2,"column":69}}}):n))+'</p>\r\n    <div class="csui-display-hide">\r\n        <ul class="csui-search-suggestion-list">\r\n            <li>'+e.escapeExpression((n=null!=(n=a(i,"searchSuggestion1")||(null!=t?a(t,"searchSuggestion1"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"searchSuggestion1","hash":{},"loc":{"start":{"line":5,"column":16},"end":{"line":5,"column":37}}}):n))+"</li>\r\n            <li>"+e.escapeExpression((n=null!=(n=a(i,"searchSuggestion2")||(null!=t?a(t,"searchSuggestion2"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"searchSuggestion2","hash":{},"loc":{"start":{"line":6,"column":16},"end":{"line":6,"column":37}}}):n))+"</li>\r\n            <li>"+e.escapeExpression((n=null!=(n=a(i,"searchSuggestion3")||(null!=t?a(t,"searchSuggestion3"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"searchSuggestion3","hash":{},"loc":{"start":{"line":7,"column":16},"end":{"line":7,"column":37}}}):n))+"</li>\r\n            <li>"+e.escapeExpression((n=null!=(n=a(i,"searchSuggestion4")||(null!=t?a(t,"searchSuggestion4"):t))?n:e.hooks.helperMissing,"function"==typeof n?n.call(null!=t?t:e.nullContext||{},{"name":"searchSuggestion4","hash":{},"loc":{"start":{"line":8,"column":16},"end":{"line":8,"column":37}}}):n))+"</li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n"}});return i.registerPartial("csui_widgets_search.results_impl_search.empty",s),s}),csui.define("hbs!csui/widgets/search.results/controls/expandall/impl/expandall",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-search-expandall-wrapper">\r\n  <div class="csui-search-expandall-text" title="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"expandAll"):n,t))+'">'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"expandAll"):n,t))+'</div>\r\n  <button class="csui-search-header-expand-all" aria-label="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"expandAll"):n,t))+'" title="'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"expandAll"):n,t))+'">\r\n    <span class="icon csui-icon icon-expandArrowDown"></span>\r\n  </button>\r\n</div>'}});return i.registerPartial("csui_widgets_search.results_controls_expandall_impl_expandall",s),s}),
csui.define("css!csui/widgets/search.results/controls/expandall/impl/expandall",[],function(){}),csui.define("csui/widgets/search.results/controls/expandall/expandall.view",["csui/lib/jquery","csui/lib/marionette","hbs!csui/widgets/search.results/controls/expandall/impl/expandall","i18n!csui/widgets/search.results/impl/nls/lang","css!csui/widgets/search.results/controls/expandall/impl/expandall"],function(e,t,i,s){return t.ItemView.extend({"template":i,"templateHelpers":function(){return{"messages":{"expandAll":s.expandAll}}},"events":{"click @ui.expandAllSelector":"expandAll"},"ui":{"expandAllSelector":".csui-search-header-expand-all","expandIcon":".icon","expandAllLabelText":".csui-search-expandall-text"},"expandAll":function(t){if(this.collection.length>0){this._isExpanded?(this._isExpanded=!1,this.ui.expandAllLabelText.html(s.expandAll),this.ui.expandAllLabelText.attr("title",s.expandAll),e(".csui-expand-all").addClass("csui-collapse-all"),this.ui.expandIcon.removeClass("icon-expandArrowUp"),this.ui.expandIcon.addClass("icon-expandArrowDown"),this.ui.expandIcon.attr("title",s.expandAll),this.ui.expandAllSelector.attr("title",s.expandAll).attr("aria-label",s.expandAll),this.options.view.$el.find("."+this.options._eleCollapse).trigger("click")):(this._isExpanded=!0,this.ui.expandAllLabelText.html(s.collapseAll),this.ui.expandAllLabelText.attr("title",s.collapseAll),e(".csui-expand-all").removeClass("csui-collapse-all"),this.ui.expandIcon.removeClass("icon-expandArrowDown"),this.ui.expandIcon.addClass("icon-expandArrowUp"),this.ui.expandIcon.attr("title",s.collapseAll),this.ui.expandAllSelector.attr("title",s.collapseAll).attr("aria-label",s.collapseAll),this.options.view.$el.find("."+this.options._eleExpand).trigger("click")),this.options.view.options.layoutView&&this.options.view.options.layoutView.updateScrollbar(),t.preventDefault(),t.stopPropagation()}},"pageChange":function(){this.ui.expandIcon instanceof Object&&this.ui.expandIcon[0].classList.contains(this.options._eleCollapse)&&(this.ui.expandIcon.removeClass(this.options._eleCollapse).addClass(this.options._eleExpand).attr("title",s.expandAll),this.ui.expandAllLabelText.html(s.expandAll),this.ui.expandAllLabelText.attr("title",s.expandAll),this.ui.expandAllSelector.attr("title",s.expandAll).attr("aria-label",s.expandAll))}})}),csui.define("hbs!csui/widgets/search.results/impl/standard/standard.search.results.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,s,o){return'<div\r\n    class="csui-search-header-left-actions binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n  <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <div id="selectAllCheckBox" class="csui-select-all csui-search-item-check"></div>\r\n    <div id="SelectedItemsCounter" class="csui-selected-items-counter-view"></div>\r\n    <div id="toolbar"\r\n         class="csui-search-toolbar binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n  </div>\r\n</div>\r\n<div class="csui-search-header-right-actions">\r\n  <div class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n    <div class="csui-search-header-actions">\r\n      <div class="csui-search-sorting" id="csui-search-sort"></div>\r\n      <div class="csui-expand-all" id="expandAllArrow"></div>\r\n    </div>\r\n  </div>\r\n</div> \r\n'}});return i.registerPartial("csui_widgets_search.results_impl_standard_standard.search.results.header",s),s}),csui.define("csui/widgets/search.results/impl/standard/standard.search.results.header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/tabletoolbar/tabletoolbar.view","csui/widgets/search.results/controls/expandall/expandall.view","csui/controls/checkbox/checkbox.view","csui/widgets/search.results/controls/sorting/sort.menu.view","csui/controls/selected.count/selected.count.view","csui/models/node/node.model","i18n!csui/widgets/search.results/impl/nls/lang","hbs!csui/widgets/search.results/impl/standard/standard.search.results.header","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","css!csui/widgets/search.results/impl/search.results"],function(e,t,i,s,o,n,a,r,l,c,h,u,d){"use strict";var m=s.LayoutView.extend({"template":u,"regions":{"expandAllRegion":"#expandAllArrow","sortRegion":"#csui-search-sort","selectAllRegion":"#selectAllCheckBox","toolbarRegion":"#toolbar","selectedCounterRegion":"#SelectedItemsCounter"},"constructor":function(e){e||(e={}),this.collection=e.collection,this.resultsView=e.view,this.options=e.options,this.localStorage=e.localStorage,s.LayoutView.prototype.constructor.call(this,e),this.listenTo(this.collection,"remove",this._updateToolItems).listenTo(this.collection,"sync",this._updateToolItems),this.setSelectAllView(),this.setSortingView(),this.setExpandAllView(),this._setToolBar(),this._setSelectionCounterView(),this.listenTo(this.collection,"sync",this._removeAllSelections),this.listenTo(this.collection,"reset",function(){this.expandAllView.pageChange()}),this.listenTo(this,"dom:refresh",this._refreshEle),this.listenTo(this.options.originatingView,"query:changed",function(){this.expandAllView&&(this.expandAllView._isExpanded=!1)}),this._commandController=this.options.originatingView.commandController,this.listenTo(this._commandController,"before:execute:command",function(e){this.toolbarView.otherToolbarView.trigger("before:execute:command",e)}),this.listenTo(this._commandController,"after:execute:command",function(e){this.toolbarView.otherToolbarView.trigger("after:execute:command",e)})},"_refreshEle":function(){this.toolbarView&&this.toolbarView.trigger("dom:refresh"),this._selectAllView&&this._selectAllView.triggerMethod("dom:refresh"),this.expandAllView&&this.expandAllView.triggerMethod("dom:refresh")},"onRender":function(){this.sortRegion.show(this.sortingView),this.expandAllRegion.show(this.expandAllView),this.selectedCounterRegion.show(this.selectedCounterView),this.selectAllRegion.show(this._selectAllView),this.toolbarRegion.show(this.toolbarView),this._updateToolItems()},"_setToolBar":function(){var t=this,i=new c({"id":void 0},{"connector":this.collection.connector});this.collection.node=i,this.toolbarView=new o({"toolbarItems":this.options.toolbarItems,"toolbarItemsMasks":this.options.toolbarItemsMasks,"collection":this.collection,"originatingView":this.options.originatingView,"container":this.container,"context":this.options.context,"toolbarCommandController":this.options.originatingView.commandController,"events":function(){return e.extend({},o.prototype.events,{"keydown":t.onKeyInViewInToolbarView})}}),this.listenTo(this.toolbarView,"refresh:tabindexes",function(){this.toolbarView.$el.find(".csui-otherToolbar>ul>li>a:visible").attr("tabindex",0),this.collection.selectedItems.length>=this.collection.length&&this.collection.where({"csuiIsSelected":!0}).length&&this._selectAllView.ui.cb.trigger("focus")})},"_updateToolItems":function(){if(this.toolbarView){var e=this.collection.selectedItems.models;e&&1===e.length?this.toolbarView.options.collection.node=e[0].parent:this.toolbarView.options.collection.node=new c({"id":void 0},{"connector":this.collection.connector}),this.toolbarView.updateForSelectedChildren(e)}},"onKeyInViewInToolbarView":function(e){switch(e.keyCode){case 37:case 39:e.preventDefault(),e.stopPropagation()}},"_setSelectionCounterView":function(){this.selectedCounterView=new l({"collection":this.collection.selectedItems,"scrollableParent":".csui-result-list"}),this.listenTo(this.collection.selectedItems,"remove reset add",this._updateToolItems),this.listenTo(this.selectedCounterView.collection,"remove",this._updateRowsState),this.listenTo(this.selectedCounterView.collection,"reset",e.bind(function(){"StandardView"===this.collection.prevSearchDisplayStyle&&this.resultsView._rowStates.set(m.RowStatesSelectedRows,[])},this))},"_updateRowsState":function(t){var i=[];t instanceof Array?i=t:i.push(t),"StandardView"===this.collection.prevSearchDisplayStyle&&e.each(i,function(t){var i=this.resultsView._rowStates.get(m.RowStatesSelectedRows);i=e.without(i,t.get("id")),this.collection.selectedItems.remove(t),this.resultsView._rowStates.set(m.RowStatesSelectedRows,i)},this)},"setSelectAllView":function(){this._selectAllView=new a({"checked":this._calculateSelectAllCheckedStatus(),"disabled":0===this.collection.length,"ariaLabel":h.selectAllAria,"title":h.selectAll}),this.listenTo(this._selectAllView,"clicked",function(e){switch(e.cancel=!0,this._selectAllView.model.get("checked")){case"true":this.resultsView._rowStates.get(m.RowStatesSelectedRows).forEach(function(e){var t=this.collection.selectedItems.findWhere({"id":e});this.collection.selectedItems.remove(t)},this),this.resultsView._rowStates.set(m.RowStatesSelectedRows,[]);break;default:var t=[],i=this.collection.filter(function(e){return!1!==e.get("selectable")&&(t.push(e.get("id")),!this.collection.selectedItems.findWhere({"id":e.get("id")}))},this);this.collection.selectedItems.add(i),this.resultsView._rowStates.set(m.RowStatesSelectedRows,t)}this._selectAllView.ui.cb.trigger("focus")}),this.listenTo(this.resultsView._rowStates,"change:"+m.RowStatesSelectedRows,function(){this._updateSelectAllCheckbox()}),this.listenTo(this.collection,"reset",function(){this._updateSelectAllCheckbox()})},"_updateSelectAllCheckbox":function(){this._selectAllView&&(this._selectAllView.setChecked(this._calculateSelectAllCheckedStatus()),this._selectAllView.setDisabled(0===this.collection.length))},"_removeAllSelections":function(){var t=[];this.collection.each(e.bind(function(e){this.collection.selectedItems.findWhere({"id":e.get("id")})&&t.push(e.get("id"))},this)),t.length&&this.resultsView._rowStates.set({"selected":[]},{"silent":!0}),this.resultsView._rowStates.set(m.RowStatesSelectedRows,t)},"_calculateSelectAllCheckedStatus":function(){var e=this.resultsView._rowStates.get(m.RowStatesSelectedRows);if(e&&e.length){var t=e.length===this.collection.length;return e.length>0&&!t?"mixed":e.length>0}},"setSortingView":function(){return this.sortingView=new r({"collection":this.collection,"enableSorting":void 0===this.options.enableSorting||this.options.enableSorting}),!0},"setExpandAllView":function(){return this.expandAllView=new n({"collection":this.collection,"view":this.resultsView,"_eleCollapse":"icon-expandArrowUp","_eleExpand":"icon-expandArrowDown"}),this.expandAllView}},{"RowStatesSelectedRows":"selected"});return e.extend(m.prototype,d),m}),csui.define("csui/widgets/search.results/impl/standard/standard.search.results.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/progressblocker/blocker","csui/controls/table/cells/favorite/favorite.view","csui/controls/checkbox/checkbox.view","csui/controls/node.state/node.states.view","csui/controls/node.state/node.state.icons","csui/widgets/search.results/impl/metadata/search.metadata.view","i18n!csui/widgets/search.results/impl/nls/lang","csui/controls/tableactionbar/tableactionbar.view","i18n","csui/models/node/node.model","csui/utils/nodesprites","csui/controls/node-type.icon/node-type.icon.view","csui/widgets/search.results/impl/breadcrumbs/search.breadcrumbs.view","csui/models/nodeancestors","csui/behaviors/default.action/default.action.behavior","csui/utils/contexts/factories/search.metadata.factory","hbs!csui/widgets/search.results/impl/search.result","hbs!csui/widgets/search.results/impl/search.empty","csui/utils/node.links/node.links","csui/utils/accessibility","csui/utils/log","csui/widgets/search.results/impl/standard/standard.search.results.header.view","csui/lib/handlebars.helpers.xif","css!csui/widgets/search.results/impl/search.results","csui/lib/jquery.mousehover","csui/lib/jquery.redraw"],function(e,t,i,s,o,n,a,r,l,c,h,u,d,m,p,g,f,b,w,v,y,S,V,C,x,_,T,k){"use strict";var I=_.isAccessibleTable(),A=t.extend({"enableFacetFilter":!0,"enableBreadcrumb":!0,"enableSearchSettings":!0,"showInlineActionBarOnHover":!I,"forceInlineActionBarOnClick":!1,"inlineActionBarStyle":"csui-table-actionbar-bubble"},e.config()),D={"isAppleMobile":n.isAppleMobile(),"mimeTypes":{},"isRtl":p&&p.settings.rtl},R=o.ItemView.extend({"className":"csui-empty","template":C,"constructor":function(e){o.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(this.model,"change",this.render)}}),F=o.LayoutView.extend({"className":function(){var e="binf-list-group-item binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12 ";return e+=this.hasVersion()?"csui-search-result-version-item":"",e+=this.hasPromoted()?" csui-search-promoted-item":""},"template":V,"regions":{"favRegion":".csui-search-item-fav","selectionRegion":".csui-search-item-check","searchMetadataRegion":".csui-search-item-details-wrapper","breadcrumbRegion":".csui-search-item-breadcrumb","nodeStateRegion":".csui-search-item-nodestateicon"},"ui":{"descriptionField":".csui-overflow-description","summaryField":".csui-overflow-summary","modifiedByField":".csui-search-modified-by","metadataDetails":".csui-search-item-details","inlineToolbarContainer":".csui-search-toolbar-container","inlineToolbar":".csui-search-item-row","arrowIcon":".search-results-item-expand .icon"},"events":{"click .csui-search-item-link":"openSearchItem","click .csui-search-version-label":"openVersionHistory","click .icon-expandArrowUp":"showMetadataInfo","click .icon-expandArrowDown":"hideMetadataInfo"},"templateHelpers":function(){var e=this.options.defaultActionController,i=e.hasAction.bind(e),s=i(this.model)?"":"csui-search-no-default-action",o={"created":d.created,"createdby":d.createdBy,"modified":d.modified,"owner":d.owner,"type":d.type,"items":d.items,"showMore":d.showMore,"showLess":d.showLess,"versionSeparator":d.versionSeparator,"inactiveClass":s,"showBreadcrumb":A.enableBreadcrumb&&this.model.collection.isLocationColumnAvailable},n=this.defaultActionUrl,a=this.promotedText,r=this.model.collection.selectedSettings,l=this.model.get("description"),c=this.model.get("summary");if(r)switch(r){case"SD":break;case"SO":l=void 0;break;case"SP":c&&(l=void 0);break;case"DP":l&&(c=void 0);break;case"DO":c=void 0;break;case"NONE":default:l=c=void 0}var h=this.hasVersion()?this.model.get("versions").version_number_name:"";return{"showOwner":this.model.attributes.hasOwnProperty("owner_user_id"),"messages":o,"defaultActionUrl":n,"has_promoted":this.hasPromoted(),"promoted_label":d.promotedLabel,"promoted_text":a.replace(/,/g,", "),"has_version":this.hasVersion(),"versionText":t.str.sformat(d.versionText,h),"versionAria":t.str.sformat(d.versionAria,h),"cid":this.cid,"itemBreadcrumb":this.itemBreadcrumb,"mimeTypeAria":this.mimeTypeAria,"summary":c,"description":l}},"openSearchItem":function(e){n.isControlClick(e)||(e.preventDefault(),this.trigger("click:item",this.model))},"constructor":function(e){e||(e={}),o.LayoutView.prototype.constructor.call(this,e),this.collection=e.collection,this.model.attributes.mime_type=this.model.attributes.mime_type?this.model.attributes.mime_type:this.model.attributes.versions?this.model.attributes.versions.mime_type:"",this._hiddenMetadataElements=i();var s=this.model.attributes.mime_type;this.mimeTypeSearch=D.mimeTypes[s],this.mimeTypeSearch||(D.mimeTypes[s]=f.findTypeByNode(this.model)),this.mimeTypeSearch=D.mimeTypes[s],t.extend(this.model.attributes,{"collection_id":this.model.cid,"mime_type_search":this.mimeTypeSearch});var n=this.model.attributes.ancestors,a=n?n.length:0,r=a?n[a-1]:void 0,l=r&&r.attributes?r.attributes.name:void 0;this.itemBreadcrumb=t.str.sformat(d.itemBreadcrumbAria,l),this.mimeTypeAria=t.str.sformat(d.mimeTypeAria,this.mimeTypeSearch),this.defaultActionUrl=x.getUrl(this.model,{"connector":this.model.connector}),this.promotedText="",this.hasPromoted()&&(this.promotedText=this.hasBestBet()?this.model.get("bestbet"):this.model.get("nickname"),this.promotedText=this.promotedText.toString()),this._rowStates=e.rowStates,this.addOwnerDisplayName(),this.addCreatedUserDisplayName(),this.listenTo(this._rowStates,"change:"+O.RowStatesSelectedRows,this._selectionChanged),this.listenTo(this.model,"change",function(){1===t.size(this.model.changed)&&t.has(this.model.changed,"csuiDelayedActionsRetrieved")||(this.model.changed.name&&this.model.set({"OTName":this.model.changed.name}),this.render(),this.updateItemdetails())}),this.model.get("name")!==this.model.get("OTName")&&(this.model.set({"OTName":this.model.get("name")}),this.render(),this.updateItemdetails()),this.listenTo(this.options.parentView,"render:metadata",t.bind(function(e){this.searchMetadataView=new u({"rowId":this.cid,"collection":this.options.parentView.metadata,"model":this.model,"originatingView":this.options.originatingView});var t=this.searchMetadataView.options.collection.models;t&&1===t.length&&null===t[0].get("key")&&this.searchMetadataView.options.collection.add(e,{"silent":!0}),this.searchMetadataRegion.show(this.searchMetadataView)},this)),this._canShowInlineActionBar()&&(this.$el.on("mouseenter."+this.cid,".csui-search-item-row",t.bind(this._hoverStart,this)),this.$el.on("mouseleave."+this.cid,".csui-search-item-row",t.bind(this._hoverEnd,this)))},"_canShowInlineActionBar":function(){return!1===D.isAppleMobile&&A.showInlineActionBarOnHover},"_hoverStart":function(){this.showInlineActions()},"_hoverEnd":function(){this.hideInlineActions()},"_selectionChanged":function(e){var i=e.previous(O.RowStatesSelectedRows),s=e.changed[O.RowStatesSelectedRows],o=t.difference(i,s),n=t.difference(s,i),a=this.model.get("id");t.contains(o,a)&&(this.model.set("csuiIsSelected",!1),this._checkboxView.setChecked(!1),this.ui.inlineToolbar.removeClass("selected")),t.contains(n,a)&&(this.model.set("csuiIsSelected",!0),this._checkboxView.setChecked(!0),this.ui.inlineToolbar.addClass("selected"),this.hideInlineActions())},"initActionViews":function(e){this.favView=new r({"tagName":"div","focusable":!0,"model":e.model,"context":e.context,"tableView":e.originatingView});var i=this._rowStates.get(O.RowStatesSelectedRows),s=t.contains(i,this.model.get("id")),o=t.str.sformat(d.selectItem,e.model.get("name")),n=t.str.sformat(d.selectItemAria,e.model.get("name")),a=!1!==e.model.get("selectable");this._checkboxView=new l({"checked":s?"true":"false","disabled":!a,"ariaLabel":n,"title":o}),this.listenTo(this._checkboxView.model,"change:checked",function(e){this._markAsSelected("true"===e.changed.checked)}),e.connector=e.model.connector,A.enableBreadcrumb&&this.model.collection.isLocationColumnAvailable&&this.addBreadcrumbs(e)},"_getEnabledNodeStateIcons":function(){var e;return e=Object.getPrototypeOf(h),new e.constructor(h.filter(function(e){var t=e.get("iconView");try{return t&&(!t.enabled||t.enabled({"context":this.options.context,"node":this.model}))}catch(e){T.warn("Evaluating an icon view failed.\n{0}",e.message)&&console.warn(T.last)}},this))},"_markAsSelected":function(e){var i,s=this.model.get("id"),o=this._rowStates.get(O.RowStatesSelectedRows);if(e)t.contains(o,s)||(this.collection.selectedItems.add(this.model),i=o.concat([s]),this._rowStates.set(O.RowStatesSelectedRows,i));else if(t.contains(o,s)){var n=this.collection.selectedItems.findWhere({"id":this.model.get("id")});this.collection.selectedItems.remove(n),i=t.without(o,s),this._rowStates.set(O.RowStatesSelectedRows,i)}},"addBreadcrumbs":function(e){var i=new v(e.model.attributes.ancestors,{"node":e.model,"autofetch":!1}),s=this.hasPromoted();return!s||s&&this.model.get("ancestors")?(this.breadcrumbsView=new w({"context":e.context,"collection":i,"originatingView":e.originatingView}),this.breadcrumbsView.trigger("sync:collection",!0)):e.model.parent.get("id")>0?this.getAncestors(e).fetch().done(t.bind(function(e){this.breadcrumbsView.completeCollection?(this.breadcrumbsView.completeCollection.length&&this.breadcrumbsView.completeCollection.last().set({"showAsLink":!0},{"silent":!0}),this.model.attributes.ancestors=this.breadcrumbsView.completeCollection.models):(this.breadcrumbsView.collection.length&&this.breadcrumbsView.collection.last().set({"showAsLink":!0},{"silent":!0}),this.model.attributes.ancestors=this.breadcrumbsView.collection.models),this.breadcrumbsView.trigger("sync:collection",!0),this.model.collection&&this.model.collection.fetched&&(this.model.trigger("change:ancestors",this.model),this.breadcrumbsView.trigger("before:synchronized"))},this)):this.breadcrumbsView=void 0,!0},"getAncestors":function(e){var t=e.model,i={"node":t.parent,"autofetch":!1},s=new v(void 0,i);return this.breadcrumbsView=new w({"context":e.context,"collection":s,"startSubCrumbs":0,"hasPromoted":this.hasPromoted(),"isRtl":D.isRtl}),s},"onRender":function(e){this.initActionViews(this.options);var t=this._getEnabledNodeStateIcons();t.length&&(this.nodeStateView=new c({"context":this.options.context,"node":this.options.model,"tableView":this.options.originatingView,"targetView":this.options.originatingView,"collection":t}),this.nodeStateRegion.show(this.nodeStateView));var i=this.model.get("search_result_metadata");if(i&&!1!==i.current_version&&"minor"!==i.version_type&&void 0!==this.model.get("favorite")&&this.favRegion.show(this.favView),A.enableBreadcrumb&&this.breadcrumbsView){this.breadcrumbRegion.show(this.breadcrumbsView),this.$el.find("ol.binf-breadcrumb").attr("aria-label",this.itemBreadcrumb);var s=this.$el.find("ol.binf-breadcrumb > li").length;1===s?this.$el.find(".tail").addClass("one-node"):2===s&&this.$el.find(".tail").addClass("two-nodes")}this.selectionRegion.show(this._checkboxView),this.model.collection&&"true"===this._checkboxView.options.checked&&this.$el.find(".csui-search-item-row").addClass("selected"),this.options.parentView&&this.options.parentView.trigger("render:metadata"),this._nodeIconView=new b({"el":this.$(".csui-type-icon").get(0),"node":this.model}),this._nodeIconView.render(),this.listenTo(this,"adjust:breadcrumb",function(){this.breadcrumbsView&&this.breadcrumbsView.trigger("readjust:breadcrumbs")})},"hasVersion":function(){var e=this.model.get("versions");if(e){var t=this.model.get("search_result_metadata");e=t&&(!1===t.current_version||"minor"===t.version_type)}return e},"hasBestBet":function(){var e=this.model.get("bestbet");return!!e&&!!e.length},"hasNickName":function(){var e=this.model.get("nickname");return!!e&&!!e.length},"hasPromoted":function(){return!!this.hasBestBet()||!!this.hasNickName()},"onBeforeDestroy":function(){this._nodeIconView&&this._nodeIconView.destroy(),this.$el&&this._canShowInlineActionBar()&&(this.$el.off("mouseenter."+this.cid,".csui-search-item-row",this._hoverStart),this.$el.off("mouseleave."+this.cid,".csui-search-item-row",this._hoverEnd))},"onShow":function(e){if(this.updateItemdetails(e),this.nodeStateView){var t=this.nodeStateView.el.getElementsByTagName("li");1===t.length?this.$el.addClass("csui-search-result-nodestate-item"):2===t.length?this.$el.addClass("csui-search-result-nodestate-item2"):t.length>2&&this.$el.addClass("csui-search-result-nodestate-more")}},"_toggleExpand":function(e){this.bindUIElements(),this._isExpanded?(this._isExpanded=!1,i(".truncated-"+this.cid).hide(),e.attr("title",d.showMore).attr("aria-expanded","false").attr("aria-label",d.showMoreAria),this.ui.arrowIcon.removeClass("icon-expandArrowUp"),this.ui.arrowIcon.addClass("icon-expandArrowDown"),this.ui.descriptionField.removeClass("csui-search-item-desc-height"),this.ui.descriptionField.addClass("csui-overflow"),this.ui.summaryField.removeClass("csui-search-item-summary-height"),this.ui.summaryField.addClass("csui-overflow")):(this._isExpanded=!0,i(".truncated-"+this.cid).show(),e.attr("title",d.showLess).attr("aria-expanded","true").attr("aria-label",d.showLessAria),this.ui.arrowIcon.removeClass("icon-expandArrowDown"),this.ui.arrowIcon.addClass("icon-expandArrowUp"),this.ui.descriptionField.addClass("csui-search-item-desc-height"),this.ui.descriptionField.removeClass("csui-overflow"),this.ui.summaryField.addClass("csui-search-item-summary-height"),this.ui.summaryField.removeClass("csui-overflow"))},"updateItemdetails":function(e){var t=this,s=this.hasDescriptionText(this.ui.descriptionField[0]),o=this.hasDescriptionText(this.ui.summaryField[0]);s&&this.ui.descriptionField.addClass("csui-overflow"),this.$el.find(".truncated-"+this.cid).addClass("binf-hidden"),o&&this.ui.summaryField.addClass("csui-overflow"),A.enableBreadcrumb&&this.breadcrumbsView&&this.breadcrumbsView.trigger("readjust:breadcrumbs"),0===this.$el.find(".search-results-item-expand").length&&this.$el.find(".csui-search-item-fav.search-fav-"+this.cid).after('<button class="search-results-item-expand" title="'+d.showMore+'" aria-expanded="false" aria-label="'+d.showMoreAria+'"><span class="icon icon-expandArrowDown"></span></button>').next().on("click",function(){t._toggleExpand.call(t,i(this))}),s||(this.ui.descriptionField.addClass("binf-hidden"),this.ui.modifiedByField.addClass("binf-hidden")),o||this.ui.summaryField.addClass("binf-hidden")},"addOwnerDisplayName":function(){var e="";this.model.attributes.owner_user_id_expand&&(e=this.getDisplayName(this.model.attributes.owner_user_id_expand)),t.extend(this.model.attributes,{"owner_display_name":e})},"addCreatedUserDisplayName":function(){var e="";this.model.attributes.create_user_id_expand&&(e=this.getDisplayName(this.model.attributes.create_user_id_expand)),t.extend(this.model.attributes,{"create_user_display_name":e})},"getDisplayName":function(e){return e.name_formatted||e.name},"hasDescriptionText":function(e){return e&&e.textContent.trim().length>0},"showInlineActions":function(){if(0===this.ui.inlineToolbarContainer.find(".csui-table-actionbar").length){if(this.collection.selectedItems.length>0)return;this.ui.inlineToolbarContainer.removeClass("binf-hidden");var e=this.model.attributes.version_id?"-"+this.model.attributes.version_id:"",t=i(".csui-search-item-action-"+this.cid+e)[0],s={"sender":this,"target":t,"node":this.model};this.trigger("enterSearchRow",s)}},"hideInlineActions":function(){if(this.ui.inlineToolbarContainer.addClass("binf-hidden"),this._hiddenMetadataElements.removeClass("binf-hidden"),this._hiddenMetadataElements=i(),!this._isExpanded){(this.ui.descriptionField.html()&&this.ui.descriptionField.html().trim().length)<=0&&(this.ui.descriptionField.addClass("binf-hidden"),this.ui.modifiedByField.addClass("binf-hidden"));(this.ui.summaryField.html()&&this.ui.summaryField.html().trim().length)<=0&&this.ui.summaryField.addClass("binf-hidden")}var e=this.model.attributes.version_id?"-"+this.model.attributes.version_id:"",t=i(".csui-search-item-action-"+this.cid+e)[0],s={"sender":this,"target":t,"node":[]};this.trigger("leaveSearchRow",s)},"openVersionHistory":function(e){var t=this,s={},o=[],n=this.model.attributes.version_id?"-"+this.model.attributes.version_id:"",a=i(".csui-search-item-action-"+this.cid+n)[0];o=this.model,s={"sender":t,"target":a,"model":o},t.options.originatingView.openVersionHistory(s)},"showMetadataInfo":function(e){this.ui.descriptionField.removeClass("binf-hidden"),this.ui.modifiedByField.removeClass("binf-hidden"),this.ui.summaryField.removeClass("binf-hidden"),e.preventDefault(),e.stopPropagation()},"hideMetadataInfo":function(e){(this.ui.descriptionField.html()&&this.ui.descriptionField.html().trim().length)<=0&&(this.ui.descriptionField.addClass("binf-hidden"),this.ui.modifiedByField.addClass("binf-hidden")),(this.ui.summaryField.html()&&this.ui.summaryField.html().trim().length)<=0&&this.ui.summaryField.addClass("binf-hidden"),e.preventDefault(),e.stopPropagation()}}),O=o.CollectionView.extend({"className":"binf-list-group","childView":F,"childViewOptions":function(){return{"context":this.options.context,"defaultActionController":this.defaultActionController,"metadata":this.metadata,"rowStates":this._rowStates,"originatingView":this.options.originatingView,"headerView":this.options.originatingView.headerView,"parentView":this,"isLocationColumnAvailable":this.isLocationColumnAvailable>-1,"collection":this.collection}},"emptyView":R,"emptyViewOptions":function(){return{"model":this.emptyModel}},"behaviors":{"DefaultAction":{"behaviorClass":y}},"childEvents":{"click:item":"onClickItem"},"constructor":function(e){e||(e={}),this.options=e,this.context=e.context,this.collection=e.collection,this.localStorage=this.options.localStorage,o.CollectionView.prototype.constructor.apply(this,arguments),this.setRowStates(),this.setInlineActionBarEvents(),this.metadata=this.options.metadata||this.context.getCollection(S,this),this.setStandardSearchHeaderView(),this.listenTo(this,"update:tool:items",this._updateToolItems),this.listenTo(this.collection,"sync",function(){this.collection.selectedItems&&this.collection.selectedItems.length&&this.collection.each(t.bind(function(e){var i=this.collection.selectedItems.findIndex({"id":e.get("id")});if(-1!==i&&this.collection.selectedItems.at(i)!==e){this.collection.selectedItems.remove(this.collection.selectedItems.at(i)),this.collection.selectedItems.add(e,{"at":i}),e.set("csuiIsSelected",!0);var s,o=e.get("id"),n=this._rowStates.get(O.RowStatesSelectedRows);t.contains(n,o)||(this.collection.selectedItems.add(this.model),s=n.concat([o]),this._rowStates.set(O.RowStatesSelectedRows,s))}else this._updateToolItems()},this))}),this.listenTo(this.collection,"sync",this._focusOnFirstSearchResultElement),this.listenTo(this.options.originatingView,"render:metadata",this.renderMetadataModels),this.listenTo(this,"dom:refresh",function(){this.standardHeaderView.triggerMethod("dom:refresh")}),a.delegate(this,e.originatingView),this.collection.originatingView=e.originatingView,this.emptyModel=new s.Model({"message":d.noSearchResultMessage,"suggestionKeyword":d.suggestionKeyword,"searchSuggestion1":d.searchSuggestion1,"searchSuggestion2":d.searchSuggestion2,"searchSuggestion3":d.searchSuggestion3,"searchSuggestion4":d.searchSuggestion4}),this.listenTo(this.collection,"sync",function(){var e=this.options.originatingView.facetView&&this.options.originatingView.facetView.$(".csui-facet");e&&e.length&&e.prop("tabindex",0)}),this.listenTo(this.collection,"error",function(){this.emptyModel.set("message",d.failedSearchResultMessage)}),this.listenTo(this,"dom:refresh",this._refreshDom),this.listenTo(this,"facet:opened",function(){var e=this.collection.originatingView.headerView.currentlyFocusedElementInHeader();i(window).width()>1023&&this.children.each(function(e){e.trigger("adjust:breadcrumb")}),e&&e.trigger("focus")}),this.listenTo(this,"destroy:header:view",function(){this.standardHeaderView.destroy(),this.standardHeaderView=void 0})},"_focusOnFirstSearchResultElement":function(){this.options.collection&&this.options.collection.models&&!this.options.collection.models.some(function(e){if(!0===e.isReservedClicked||!0===e.isUnreservedClicked)return!0})&&(this.options.originatingView&&!this.options.originatingView.collection.settings_changed?this.$el.find(".binf-list-group-item:first-child .csui-search-item-name > a").trigger("focus"):this.options.originatingView.collection.settings_changed=!1)},"renderMetadataModels":function(){this.metadata=t.extend({},this.metadata,this.collection.searching&&this.collection.searching.sortedColumns);var e=t.filter(this.metadata.models,function(e){return!e.get("default")});this.trigger("render:metadata",e)},"setRowStates":function(){this._rowStates=new s.Model,this._rowStates.set(O.RowStatesSelectedRows,[])},"setStandardSearchHeaderView":function(){this.standardHeaderView=new k({"collection":this.collection,"view":this,"options":this.options,"selectedItems":this.collection.selectedItems})},"_updateToolItems":function(){this.standardHeaderView&&this.standardHeaderView._updateToolItems()},"_showInlineActionBar":function(e){if(e){this._savedHoverEnterArgs=null;var s=e.node.get("parent_id");s instanceof Object&&(s=e.node.get("parent_id").id);var o=new g({"id":s},{"connector":e.node.connector})
;this.inlineToolbarView=new m(t.extend({"context":this.options.context,"commands":this.defaultActionController.commands,"delayedActions":this.collection.delayedActions,"collection":this.options.toolbarItems.inlineToolbar||[],"toolItemsMask":this.options.toolbarItemsMasks.toolbars.inlineToolbar,"container":o,"containerCollection":this.collection,"model":e.node,"originatingView":this.options.originatingView,"notOccupiedSpace":0,"status":{"originatingView":this.options.originatingView,"connector":e.node.connector}},this.options.toolbarItems.inlineToolbar&&this.options.toolbarItems.inlineToolbar.options)),this.listenTo(this.inlineToolbarView,"after:execute:command",this.options.originatingView._toolbarCommandExecuted),this.inlineToolbarView.render(),this.listenTo(this.inlineToolbarView,"destroy",function(){this.inlineToolbarView=void 0,this._savedHoverEnterArgs&&this._showInlineActionBarWithDelay(this._savedHoverEnterArgs)},this),i(e.target).append(this.inlineToolbarView.$el),this.inlineToolbarView.triggerMethod("show")}},"setInlineActionBarEvents":function(){this.listenTo(this,"childview:enterSearchRow",this._showInlineActionBarWithDelay),this.listenTo(this,"childview:openVersionHistory",this.openVersionHistory),this.listenTo(this,"childview:leaveSearchRow",this._actionBarShouldDestroy),this.listenTo(this.collection,"reset",this._destroyInlineActionBar)},"_showInlineActionBarWithDelay":function(e,t){this._showInlineActionbarTimeout&&clearTimeout(this._showInlineActionbarTimeout);var i=this;this._showInlineActionbarTimeout=setTimeout(function(){i._showInlineActionbarTimeout=void 0,i._showInlineActionBar.call(i,t)},200)},"_actionBarShouldDestroy":function(e,t){this._showInlineActionbarTimeout&&(clearTimeout(this._showInlineActionbarTimeout),this._showInlineActionbarTimeout=void 0),this.inlineToolbarView&&this.inlineToolbarView.destroy()},"_destroyInlineActionBar":function(){this.inlineToolbarView&&(this.inlineToolbarView.destroy(),this.inlineToolbarView=void 0)},"onClickItem":function(e){this.triggerMethod("execute:defaultAction",e.model)},"onScrollTop":function(){i(".binf-list-group").scrollTop(0)},"_refreshDom":function(){this.$el.addClass("list-group-height"),this.onScrollTop()}},{"RowStatesSelectedRows":"selected"});return O}),csui.define("csui/widgets/search.results/impl/tabular/tabular.search.results.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/table/table.view","csui/controls/table/rows/description/search.description.view","csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view","csui/controls/tableactionbar/tableactionbar.view","csui/utils/accessibility","i18n!csui/widgets/search.results/impl/nls/lang","csui/lib/jquery.mousehover","csui/lib/jquery.redraw"],function(e,t,i,s,o,n,a,r,l,c,h,u){"use strict";var d=h.isAccessibleTable();return a.extend({"ui":{"toggleDetails":".csui-table-cell-_toggledetails.sorting_disabled"},"events":{"mouseup @ui.toggleDetails":"onToggleOrChangePageSize","keypress @ui.toggleDetails":"onToggleOrChangePageSize","mouseup .binf-table > thead > tr > th:not(.sorting_disabled)":"onTableSortClick","keypress .binf-table > thead > tr > th:not(.sorting_disabled)":"onTableSortClick","keydown .binf-table":"onKeyInView"},"constructor":function(e){if(this.collection=e.collection,this.options=e,this.columns=this.collection.searching&&this.collection.searching.sortedColumns,e.accessibleTable&&this.getAdditionalColumns(),this.collection.columns=this.columns?this.columns:this.tableColumns,this.settings=this.options.originatingView.getSettings(),this.settings&&this.settings.get("display")){var i=this.settings.get("display").summary_description.selected;this.showSummaryOnly="SO"===i}this.defaultActionController=this.options.defaultActionController;var s=t.extend({"context":this.options.context,"connector":this.collection.options.connector,"collection":this.collection,"columns":this.options.columns,"enableSorting":void 0===this.options.enableSorting||this.options.enableSorting,"tableColumns":this.options.tableColumns,"pageSize":this.options.data.pageSize||this.options.pageSize,"originatingView":this.options.originatingView,"container":this.options.container,"orderBy":this.collection.orderBy,"filterBy":this.options.filterBy,"actionItems":this.defaultActionController.actionItems,"descriptionRowView":r,"descriptionRowViewOptions":{"firstColumnIndex":2,"lastColumnIndex":2,"showDescriptions":!1,"showSummary":!0,"collapsedHeightIsOneLine":!0,"displayInEntireRow":!0,"showSummaryOnly":this.showSummaryOnly,"descriptionColspan":7},"commands":this.defaultActionController.commands,"blockingParentView":this.options.originatingView,"parentView":this.options.originatingView,"focusView":"tableHeader","inlineBar":{"viewClass":c,"options":t.extend({"collection":this.options.toolbarItems.inlineToolbar||[],"toolItemsMask":this.options.toolbarItemsMasks.toolbars.inlineToolbar,"delayedActions":this.collection.delayedActions,"container":this.container,"containerCollection":this.collection},this.options.toolbarItems.inlineToolbar&&this.options.toolbarItems.inlineToolbar.options,{"inlineBarStyle":this.options.config.inlineActionBarStyle,"forceInlineBarOnClick":this.options.config.forceInlineActionBarOnClick,"showInlineBarOnHover":this.options.config.showInlineActionBarOnHover})},"allSelectedNodes":this.collection.selectedItems,"customLabels":this.options.customLabels,"tableAria":u.searchTableAria});e=t.extend(e,s),a.prototype.constructor.call(this,e),this.selectedSettings=this.collection.selectedSettings,this._showEmptyViewText=!this.collection.length,this.listenTo(this.options.originatingView,"update:table",function(){this.options.tableColumns.trigger("update")}),this.listenTo(this.options.originatingView,"toggle:description",function(e){this.showDetailRowDescriptions(e),this.trigger("update:scrollbar")}),this._setTableViewEvents(),this.listenTo(this,"set:tablerow:assets",function(){this.columns=this.options.originatingView.columns,this.setTableRowSelectionToolbar({"toolItemFactory":this.options.toolbarItems.otherToolbar||[],"toolbarItemsMask":this.options.toolbarItemsMasks.toolbars.otherToolbar,"showSelectionCounter":!0}),this._setTableRowSelectionToolbarEventListeners()}),this.listenTo(this.options.originatingView,"properties:view:destroyed",this.onPropertiesViewDestroyed),this.listenTo(this.options.originatingView,"permissions:view:destroyed",this.onPropertiesViewDestroyed),this.listenTo(this.collection,"remove",function(){!this.collection.selectedItems.length&&(0===this.collection.models.length||this.collection.totalCount<this.collection.topCount)&&this.collection.trigger("sync")})},"onRender":function(){this.collection.selectedItems.length&&this.collection.selectedItems.trigger("reset");var e=this.$el.find("td.csui-table-cell-name a")&&i(this.$el.find("td.csui-table-cell-name a")[0]);e&&!this.options.originatingView.headerView.ui.toggleResultsView.hasClass("csui-toggledView")&&(e.tabIndex=0,setTimeout(function(){e.trigger("focus")},0))},"_setTableViewEvents":function(){return this.listenTo(this,"tableRowSelected",function(e){if(this.cancelAnyExistingInlineForm.call(this),this.collection.selectedItems){var i=e.nodes,s=this.collection.selectedItems.models.slice(0);t.each(i,function(e){this.collection.selectedItems.get(e)||s.push(e)},this),this.collection.selectedItems.reset(s)}}),this.container&&this.listenTo(this.container,"change:id",function(){this.options.fixedFilterOnChange?(this.collection.clearFilter(!1),this.collection.setFilter(this.options.fixedFilterOnChange,!1)):this.options.clearFilterOnChange&&this.collection.clearFilter(!1),this.options.resetOrderOnChange&&this.collection.resetOrder(!1),this.options.resetLimitOnChange&&this.collection.resetLimit(!1)}),this.listenTo(this.collection.selectedItems,"reset",function(){this.tableToolbarView&&(this.options.originatingView.headerView.tableRowSelectionToolbarRegion.show(this._tableRowSelectionToolbarView),this._onSelectionUpdateCssClasses(this.collection.selectedItems.length));var e=this.collection.selectedItems;this.collection.each(function(t){var i=e.get(t.get("id"));t.set("csuiIsSelected",void 0!==i)})}),this.listenTo(this,"tableRowUnselected",function(e){if(this.collection.selectedItems){var i=e.nodes;t.each(i,function(e){this.collection.selectedItems.remove(e,{"silent":!0})},this),this.collection.selectedItems.reset(t.clone(this.collection.selectedItems.models))}}),this.listenTo(this,"execute:defaultAction",function(e){var t={"node":e};if(this.trigger("before:defaultAction",t),!t.cancel){var i=this;this.defaultActionController.executeAction(e,{"context":this.options.context,"originatingView":this.options.originatingView}).done(function(){i.trigger("executed:defaultAction",t)})}}),this.enableDragNDrop&&this.listenTo(this,"tableRowRendered",function(e){var t=this.setDragNDrop(e);this._assignDragArea(t,i(e.target)),this._assignDragArea(t,e.expandedRows)}),!0},"setTableRowSelectionToolbar":function(e){this._tableRowSelectionToolbarView=new l({"toolItemFactory":e.toolItemFactory,"toolbarItemsMask":e.toolbarItemsMask,"toolbarCommandController":this.options.originatingView.commandController,"showCondensedHeaderToggle":e.showCondensedHeaderToggle,"showSelectionCounter":!0,"scrollableParent":".csui-nodetable tbody","commands":this.defaultActionController.commands,"selectedChildren":this.collection.selectedItems,"container":this.collection.node,"context":this.context,"originatingView":this.options.originatingView,"collection":this.collection});var t=this._tableRowSelectionToolbarView;this.listenTo(t,"toggle:condensed:header",function(){this.options.originatingView.headerView.$el.find(".csui-search-header").toggleClass("csui-show-header"),this.showingBothToolbars=this.options.originatingView.headerView&&this.options.originatingView.headerView.$el.find(".csui-search-header").hasClass("csui-show-header"),this.showingBothToolbars?(this.options.originatingView.headerView.$el.find(".csui-search-header").removeClass("csui-table-rowselection-toolbar-visible").removeClass("binf-hidden"),this.options.originatingView.headerView.$el.parent("#header").addClass("csui-show-header")):(this.options.originatingView.headerView.$el.find(".csui-search-header").addClass("csui-table-rowselection-toolbar-visible").addClass("binf-hidden"),this.options.originatingView.headerView.$el.parent("#header").removeClass("csui-show-header")),t.trigger("toolbar:activity",!0,this.showingBothToolbars)}),this.listenTo(t,"render",function(){this.listenTo(t._selectedCountView.collection,"remove",function(e){var t=this.collection.findWhere({"id":e.get("id")});t?t.set("csuiIsSelected",!1):e.set("csuiIsSelected",!1),this._onSelectionUpdateCssClasses(this.collection.selectedItems.length)})})},"_setTableRowSelectionToolbarEventListeners":function(){this.listenTo(this.collection.selectedItems,"reset",function(){var e=this.options.originatingView&&this.options.originatingView.headerView;e.tableRowSelectionToolbarRegion&&e.tableRowSelectionToolbarRegion.$el.removeClass("binf-hidden"),this._tableRowSelectionToolbarView._rightToolbarView.options.showCondensedHeaderToggle=!0,e.tableRowSelectionToolbarRegion&&e.tableRowSelectionToolbarRegion.show(this._tableRowSelectionToolbarView),this._onSelectionUpdateCssClasses(this.collection.selectedItems.length)})},"_onSelectionUpdateCssClasses":function(e,t){var i=this.options.originatingView.headerView.tableRowSelectionToolbarRegion.$el,s=this.options.originatingView.headerView&&this.options.originatingView.headerView.$el.find(".csui-search-header").hasClass("csui-show-header");this._tableRowSelectionToolbarVisible=!e,d?e>0?(this._tableRowSelectionToolbarVisible||(this._tableRowSelectionToolbarVisible=!0,s||this.showingBothToolbars||this.options.originatingView.headerView.$el.find(".csui-search-header").addClass("csui-table-rowselection-toolbar-visible").addClass("binf-hidden"),i.removeClass("binf-hidden").addClass("csui-table-rowselection-toolbar-visible")),this._tableRowSelectionToolbarView.trigger("toolbar:activity",this._tableRowSelectionToolbarVisible,s)):(this.showingBothToolbars=!1,this._tableRowSelectionToolbarVisible&&(this._tableRowSelectionToolbarVisible=!1,this.options.originatingView.headerView.$el.find(".csui-search-header").removeClass("csui-show-header"),this.options.originatingView.headerView.$el.find(".csui-search-header").removeClass("binf-hidden"),this.options.originatingView.headerView.$el.find(".csui-search-header").removeClass("csui-table-rowselection-toolbar-visible"),i.removeClass("csui-table-rowselection-toolbar-visible").addClass("binf-hidden"),this.options.originatingView.headerView.$el.parent("#header").removeClass("csui-show-header"))):e>0?(this._tableRowSelectionToolbarVisible||(this._tableRowSelectionToolbarVisible=!0,i.removeClass("binf-hidden").redraw().addClass("csui-table-rowselection-toolbar-visible"),s||this.showingBothToolbars||this.options.originatingView.headerView.$el.find(".csui-search-header").addClass("csui-table-rowselection-toolbar-visible").addClass("binf-hidden")),this._tableRowSelectionToolbarView.trigger("toolbar:activity",this._tableRowSelectionToolbarVisible,s)):(this.showingBothToolbars=!1,this._tableRowSelectionToolbarVisible&&(this._tableRowSelectionToolbarVisible=!1,this.options.originatingView.headerView.$el.find(".csui-search-header").removeClass("csui-show-header"),i.removeClass("csui-table-rowselection-toolbar-visible").addClass("binf-hidden"),this.options.originatingView.headerView.$el.find(".csui-search-header").removeClass("csui-table-rowselection-toolbar-visible").removeClass("binf-hidden"),this.options.originatingView.headerView.$el.parent("#header").removeClass("csui-show-header")))},"onTableSortClick":function(e){("keypress"!==e.type||13!==e.keyCode&&32!==e.keyCode)&&"mouseup"!==e.type||(this.collection.isSortOptionSelected=!1)},"onToggleOrChangePageSize":function(e){("keypress"!==e.type||13!==e.keyCode&&32!==e.keyCode)&&"mouseup"!==e.type||(this.collection.isSortOptionSelected=!0)},"onPropertiesViewDestroyed":function(){this.onMetadataNavigationViewDestroyed(),this.options.originatingView.headerView.updateToggleDescription(),this.render()},"onMetadataNavigationViewDestroyed":function(){this.collection.inMetadataNavigationView&&this.isTabularView&&(this.collection.inMetadataNavigationView=!1)}})}),csui.define("csui/models/widget/search.results/search.metadata/search.columns",["csui/lib/underscore","csui/lib/backbone","i18n!csui/models/impl/nls/lang"],function(e,t,i){var s=t.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),o=t.Collection.extend({"model":s,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new o(this.map(function(e){return e.attributes}))}});return new o([{"key":"OTMIMEType","sequence":0,"titleIconInHeader":"mime_type","permanentColumn":!0},{"key":"OTName","sequence":1,"permanentColumn":!0,"isNaming":!0},{"key":"version_id","column_key":"version_id","title":i.version,"noTitleInHeader":!0,"permanentColumn":!0,"sequence":2},{"key":"reserved","column_key":"reserved","sequence":3,"title":i.state,"noTitleInHeader":!0,"permanentColumn":!0},{"key":"favorite","column_key":"favorite","sequence":910,"title":i.favorite,"noTitleInHeader":!0,"permanentColumn":!0}])}),csui.define("csui/widgets/search.results/impl/toolbaritems",["csui/lib/underscore","module","csui-ext!csui/widgets/search.results/impl/toolbaritems"],function(e,t,i){return i&&e.each(i,function(e){}),i}),csui.define("csui/widgets/search.results/toolbaritems",["csui/lib/underscore","i18n!csui/widgets/search.results/nls/lang","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","csui-ext!csui/widgets/search.results/toolbaritems","csui/widgets/search.results/impl/toolbaritems"],function(e,t,i,s,o,n,a){"use strict";function r(t){e.each(t,function(t){e.each(t,function(t,i){var s=l[i];if(!s)throw new Error("Invalid target toolbar: "+i);e.each(t,function(e){e=new o(e),s.addItem(e)})})})}var l={"filterToolbar":new s({"filter":[{"signature":"Filter","name":i.ToolbarItemFilter,"iconName":"csui_action_filter32"}]},{"addTrailingDivider":!1}),"tableHeaderToolbar":new s({"info":[{"signature":"Properties","name":i.ToolbarItemInfo,"iconName":"csui_action_properties32"},{"signature":"CopyLink","name":i.ToolbarItemCopyLink}],"edit":[{"signature":"Edit","name":i.ToolbarItemEdit,"flyout":"edit","promoted":!0},{"signature":"EditActiveX","name":"EditActiveX","flyout":"edit"},{"signature":"EditOfficeOnline","name":"EditOfficeOnline","flyout":"edit"},{"signature":"EditWebDAV","name":"EditWebDAV","flyout":"edit"}],"share":[{"signature":"SendTo","name":i.ToolbarItemSendTo,"flyout":"sendto","group":"share"},{"signature":"Share","name":i.ToolbarItemShare,"flyout":"share","promoted":!0,"group":"share"},{"signature":"EmailLink","name":i.ToolbarItemEmailLink,"flyout":"sendto","promoted":!0,"group":"share"}],"main":[{"signature":"InlineEdit","name":i.ToolbarItemRename},{"signature":"permissions","name":i.ToolbarItemPermissions},{"signature":"Download","name":i.ToolbarItemDownload},{"signature":"ReserveDoc","name":t.ToolbarItemReserve},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve},{"signature":"Lock","name":i.ToolbarItemLock},{"signature":"Unlock","name":i.ToolbarItemUnlock},{"signature":"Copy","name":i.ToolbarItemCopy},{"signature":"Move","name":i.ToolbarItemMove},{"signature":"AddVersion","name":i.ToolbarItemAddVersion},{"signature":"Collect","name":i.ToolbarCollect},{"signature":"Delete","name":i.ToolbarItemDelete},{"signature":"RemoveCollectedItems","name":i.ToolbarItemRemoveCollectionItems},{"signature":"ZipAndDownload","name":i.MenuItemZipAndDownload},{"signature":"CompoundDocument","name":i.compoundDocument,"flyout":"CompoundDocument"},{"signature":"CreateRelease","name":i.CreateRelease,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"CreateRevision","name":i.CreateRevision,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"Reorganize","name":i.Reorganize,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"ViewReleases","name":i.ToolbarItemViewReleases,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"}],"shortcut":[{"signature":"OriginalCopyLink","name":i.ToolbarItemOriginalCopyLink},{"signature":"OriginalEdit","name":i.ToolbarItemOriginalEdit},{"signature":"OriginalEmailLink","name":i.ToolbarItemOriginalShare},{"signature":"OriginalReserveDoc","name":t.ToolbarItemOriginalReserve},{"signature":"OriginalUnreserveDoc","name":t.ToolbarItemOriginalUnreserve},{"signature":"OriginalCopy","name":i.ToolbarItemOriginalCopy},{"signature":"OriginalMove","name":i.ToolbarItemOriginalMove},{"signature":"OriginalAddVersion","name":i.ToolbarItemAddVersion},{"signature":"OriginalDownload","name":i.ToolbarItemOriginalDownload},{"signature":"OriginalDelete","name":i.ToolbarItemOriginalDelete}]},{"maxItemsShown":15,"dropDownIconName":"csui_action_more32","dropDownText":i.ToolbarItemMore,"addGroupSeparators":!1,"lazyActions":!0}),"otherToolbar":new s({"info":[{"signature":"Properties","name":i.ToolbarItemInfo,"iconName":"csui_action_properties32"},{"signature":"DocPreview","name":i.ToolbarItemDocPreview,"commandData":{"ifNotOpenDelegate":!0}},{"signature":"CopyLink","name":i.ToolbarItemCopyLink}],"edit":[{"signature":"Edit","name":i.ToolbarItemEdit,"flyout":"edit","promoted":!0},{"signature":"EditActiveX","name":"EditActiveX","flyout":"edit"},{"signature":"EditOfficeOnline","name":"EditOfficeOnline","flyout":"edit"},{"signature":"EditWebDAV","name":"EditWebDAV","flyout":"edit"}],"share":[{"signature":"SendTo","name":i.ToolbarItemSendTo,"flyout":"sendto","group":"share"},{"signature":"Share","name":i.ToolbarItemShare,"flyout":"share","promoted":!0,"group":"share"},{"signature":"EmailLink","name":i.ToolbarItemEmailLink,"flyout":"sendto","promoted":!0,"group":"share"}],"main":[{"signature":"permissions","name":i.ToolbarItemPermissions},{"signature":"Download","name":i.ToolbarItemDownload},{"signature":"ReserveDoc","name":t.ToolbarItemReserve},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve},{"signature":"Copy","name":i.ToolbarItemCopy},{"signature":"Move","name":i.ToolbarItemMove},{"signature":"AddVersion","name":i.ToolbarItemAddVersion},{"signature":"Collect","name":i.ToolbarCollect},{"signature":"Delete","name":i.ToolbarItemDelete},{"signature":"ZipAndDownload","name":i.MenuItemZipAndDownload},{"signature":"Lock","name":i.ToolbarItemLock},{"signature":"Unlock","name":i.ToolbarItemUnlock},{"signature":"CompoundDocument","name":i.compoundDocument,"flyout":"CompoundDocument"},{"signature":"CreateRelease","name":i.CreateRelease,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"CreateRevision","name":i.CreateRevision,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"Reorganize","name":i.Reorganize,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"ViewReleases","name":i.ToolbarItemViewReleases,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"}]},{"maxItemsShown":5,"dropDownText":i.ToolbarItemMore,"dropDownIconName":"csui_action_more32","addGroupSeparators":!1,"lazyActions":!0}),"inlineToolbar":new s({"info":[{"signature":"Properties","name":i.ToolbarItemInfo,"iconName":"csui_action_properties32"},{"signature":"DocPreview","name":i.ToolbarItemDocPreview,"iconName":"csui_action_preview32","commandData":{"ifNotOpenDelegate":!0}},{"signature":"CopyLink","name":i.ToolbarItemCopyLink,"iconName":"csui_action_copy_link32"}],"edit":[{"signature":"Edit","name":i.ToolbarItemEdit,"flyout":"edit","promoted":!0,"iconName":"csui_action_edit32"},{"signature":"EditActiveX","name":"EditActiveX","flyout":"edit"},{"signature":"EditOfficeOnline","name":"EditOfficeOnline","flyout":"edit"},{"signature":"EditWebDAV","name":"EditWebDAV","flyout":"edit"}],"share":[{"signature":"Share","name":i.MenuItemShare,"iconName":"csui_action_share32","flyout":"share"},{"signature":"SendTo","name":i.ToolbarItemSendTo,"iconName":"csui_action_send_to32","flyout":"sendto"},{"signature":"EmailLink","name":i.ToolbarItemEmailLink,"flyout":"sendto"}],"other":[{"signature":"permissions","name":i.ToolbarItemPermissions,"iconName":"csui_action_view_perms32"},{"signature":"Download","name":i.ToolbarItemDownload,"iconName":"csui_action_download32"},{"signature":"ReserveDoc","name":t.ToolbarItemReserve,"iconName":"csui_action_reserve32"},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve,"iconName":"csui_action_reserve32"},{"signature":"Lock","name":i.ToolbarItemLock,"iconName":"csui_action_reserve32"},{"signature":"Unlock","name":i.ToolbarItemUnlock,"iconName":"csui_action_unreserve32"},{"signature":"Copy","name":i.ToolbarItemCopy,"iconName":"csui_action_copy32"},{"signature":"Move","name":i.ToolbarItemMove,"iconName":"csui_action_move32"},{"signature":"AddVersion","name":i.ToolbarItemAddVersion,"iconName":"csui_action_add_version32"},{"signature":"Collect","name":i.ToolbarCollect,"iconName":"csui_action_collect32"},{"signature":"Delete","name":i.ToolbarItemDelete,"iconName":"csui_action_delete32"},{"signature":"ZipAndDownload","name":i.MenuItemZipAndDownload,"iconName":"csui_action_download32"},{"signature":"CompoundDocument","name":i.compoundDocument,"flyout":"CompoundDocument","iconName":"csui_action_compound_document32"},{"signature":"CreateRelease","name":i.CreateRelease,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"CreateRevision","name":i.CreateRevision,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"Reorganize","name":i.Reorganize,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"ViewReleases","name":i.ToolbarItemViewReleases,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"}]},{"maxItemsShown":5,"dropDownText":i.ToolbarItemMore,"dropDownIconName":"csui_action_more32","addGroupSeparators":!1}),"tabularInlineToolbar":new s({"info":[{"signature":"Properties","name":i.ToolbarItemInfo,"iconName":"csui_action_properties32"},{"signature":"CopyLink","name":i.ToolbarItemCopyLink,"iconName":"csui_action_copy_link32"}],"edit":[{"signature":"Edit","name":i.ToolbarItemEdit,"flyout":"edit","promoted":!0,"iconName":"csui_action_edit32"},{"signature":"EditActiveX","name":"EditActiveX","flyout":"edit"},{"signature":"EditOfficeOnline","name":"EditOfficeOnline","flyout":"edit"},{"signature":"EditWebDAV","name":"EditWebDAV","flyout":"edit"}],"share":[{"signature":"Share","name":i.MenuItemShare,"iconName":"csui_action_share32","flyout":"share"}],"other":[{"signature":"permissions","name":i.ToolbarItemPermissions,"iconName":"csui_action_view_perms32"},{"signature":"Download","name":i.ToolbarItemDownload,"iconName":"csui_action_download32"},{"signature":"ReserveDoc","name":t.ToolbarItemReserve,"iconName":"csui_action_reserve32"},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve,"iconName":"csui_action_reserve32"},{"signature":"Copy","name":i.ToolbarItemCopy,"iconName":"csui_action_copy32"},{"signature":"Move","name":i.ToolbarItemMove,"iconName":"csui_action_move32"},{"signature":"AddVersion","name":i.ToolbarItemAddVersion,"iconName":"csui_action_add_version32"},{"signature":"Collect","name":i.ToolbarCollect,"iconName":"csui_action_collect32"},{"signature":"Delete","name":i.ToolbarItemDelete,"iconName":"csui_action_delete32"},{"signature":"ZipAndDownload","name":i.MenuItemZipAndDownload,"iconName":"csui_action_download32"}]},{"maxItemsShown":5,"dropDownText":i.ToolbarItemMore,"dropDownIconName":"csui_action_more32","addGroupSeparators":!1}),"versionToolItems":["properties","open","download","delete"]};return a&&r(a),n&&r(n),l}),csui.define("csui/widgets/search.results/toolbaritems.masks",["module","csui/lib/underscore","csui/controls/toolbar/toolitems.mask","csui/utils/toolitem.masks/global.toolitems.mask"],function(e,t,i,s){"use strict";function o(){var o=e.config(),a=new s;this.toolbars=t.reduce(n,function(e,s){var n=new i(a,{"normalize":!1});return t.each(o,function(e,t){(e=e[s])&&n.extendMask(e)}),n.storeMask(),e[s]=n,e},{})}var n=["otherToolbar","inlineToolbar"];return o.toolbars=n,o}),csui.define("hbs!csui/widgets/search.results/impl/search.results",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s,o){var n,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="csui-sidepanel-header binf-hidden">\r\n          <h1 class="csui-sidepanel-heading" title="search">'+e.escapeExpression(e.lambda(null!=(n=null!=t?a(t,"messages"):t)?a(n,"sidePanelHeader"):n,t))+"</h1>\r\n        </div>\r\n"},"3":function(e,t,i,s,o){return'            <div class="csui-search-results-custom">\r\n              <div id="csui-search-custom-container"></div>\r\n            </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,s,o){var n,a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\x3c!-- TODO: need to apply localization --\x3e\r\n<div id="header"></div>\r\n<div class="binf-container-fluid">\r\n  <div class="csui-facet-table-container">\r\n    <div class="csui-search-left-panel csui-popover-panel csui-is-hidden">\r\n      <div class="csui-popover-panel-container">\r\n'+(null!=(n=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"enableCustomSearch"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":8},"end":{"line":11,"column":15}}}))?n:"")+'        <div class="csui-search-left-panel-content"  role="tabpanel">\r\n'+(null!=(n=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"enableCustomSearch"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":10},"end":{"line":17,"column":17}}}))?n:"")+'          <div id="facetview" class="csui-facetview"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="csui-search-results-body binf-col-lg-12 binf-col-md-12 binf-col-xs-12">\r\n      <div id="csui-search-custom-results">\r\n        <div class="csui-search-results-content binf-col-lg-12 binf-col-md-12">\r\n          <div id="facetbarview"></div>\r\n          <div\r\n              class="csui-search-tool-container binf-hidden binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12">\r\n            <div class=\'csui-standard-header-view\' id="csui-standard-header-view"></div>\r\n          </div>\r\n          <div id="results" tabindex="-1" class="csui-result-list binf-col-lg-12 binf-col-md-12\r\n          binf-col-sm-12 binf-col-xs-12"></div>\r\n          <div class=\'csui-search-loading-wrapper csui-search-blocking binf-hidden\'>\r\n            <div class=\'csui-search-loading\'>'+e.escapeExpression((a=null!=(a=r(i,"loadingMessage")||(null!=t?r(t,"loadingMessage"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"loadingMessage","hash":{},"loc":{"start":{"line":33,"column":45},"end":{"line":33,"column":63}}}):a))+"</div>\r\n          </div>\r\n          <div class='csui-search-loading-wrapper csui-search-init-loading-wrapper csui-serch-reults-initial-load'>\r\n            <div class='csui-search-initial-loading'>"+e.escapeExpression((a=null!=(a=r(i,"initialLoadMessage")||(null!=t?r(t,"initialLoadMessage"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"initialLoadMessage","hash":{},"loc":{"start":{"line":36,"column":53},"end":{"line":36,"column":75}}}):a))+'</div>\r\n          </div>\r\n          <div\r\n              class="csui-search-row-divider binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n        </div>\r\n\r\n        <div id="pagination"\r\n             class="binf-col-lg-12 binf-col-md-12 binf-col-sm-12 binf-col-xs-12"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_widgets_search.results_impl_search.results",s),s}),
csui.define("csui/widgets/search.results/search.results.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","nuc/utils/log","csui/utils/base","csui/utils/url","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/search.formquery.factory","csui/utils/contexts/factories/search.results.factory","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/mixins/view.state/node.view.state.mixin","csui/controls/mixins/view.state/node.selection.restore.mixin","csui/controls/mixins/view.state/multi.node.fetch.mixin","csui/widgets/search.results/impl/search.results.header.view","csui/widgets/search.results/impl/standard/standard.search.results.view","csui/widgets/search.results/impl/tabular/tabular.search.results.view","csui/controls/table/table.view","csui/controls/table/rows/description/search.description.view","csui/models/widget/search.results/search.metadata/search.columns","csui/models/nodechildrencolumn","csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view","csui/controls/pagination/nodespagination.view","csui/controls/progressblocker/blocker","csui/widgets/search.results/toolbaritems","csui/widgets/search.results/toolbaritems.masks","csui/widgets/search.custom/impl/search.object.view","csui/widgets/search.forms/search.form.view","csui/utils/contexts/factories/search.settings.factory","csui/controls/globalmessage/globalmessage","i18n!csui/widgets/search.results/impl/nls/lang","csui/controls/tableactionbar/tableactionbar.view","csui/utils/contexts/factories/search.results.facets.factory","csui/models/node/node.model","csui/models/nodes","csui/utils/commands/properties","csui/utils/contexts/factories/user","csui/behaviors/default.action/default.action.behavior","csui/utils/contexts/factories/search.metadata.factory","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/toolbar/toolbar.command.controller","hbs!csui/widgets/search.results/impl/search.results","csui/utils/defaultactionitems","csui/utils/commands","csui/utils/namedlocalstorage","csui/dialogs/modal.alert/modal.alert","csui/controls/facet.panel/facet.panel.view","csui/controls/facet.bar/facet.bar.view","csui/utils/accessibility","csui/utils/contexts/factories/largefilesettings.factory","csui/utils/contexts/factories/usernodepermission","csui/lib/handlebars.helpers.xif","css!csui/widgets/search.results/impl/search.results","csui/lib/jquery.mousehover","csui/lib/jquery.redraw"],function(e,t,i,s,o,n,a,r,l,c,h,u,d,m,p,g,f,b,w,v,y,S,V,C,x,_,T,k,I,A,D,R,F,O,P,E,M,B,N,$,q,L,j,H,Q,U,z,W,K,X,Z,G){"use strict";var Y=X.isAccessibleTable(),J=t.extend({"enableFacetFilter":!0,"enableBreadcrumb":!0,"enableSearchSettings":!0,"showInlineActionBarOnHover":!Y,"forceInlineActionBarOnClick":!1,"inlineActionBarStyle":"csui-table-actionbar-bubble","csui":{"fetchFacets":!0},"enableSaveSearchTools":!0},e.config()),ee={"showFacetPanel":!0,"urlParamsList":["order_by","page"]},te=o.LayoutView.extend({"className":"csui-search-results binf-panel binf-panel-default initialLoading","template":j,"templateHelpers":function(){return{"messages":{"enableCustomSearch":this.enableCustomSearch,"sidePanelHeader":R.searchHeader},"enableCustomSearch":this.enableCustomSearch,"loadingMessage":this.loadingMessage,"initialLoadMessage":this.initialLoadMessage,"showFacetPanel":!1!==this.options.showFacetPanel}},"ui":{"toolBarContainer":".csui-search-tool-container","customSearchContainer":".csui-search-results-custom","facetView":"#facetview","searchResultsContent":".csui-search-results-content","searchResultsBody":".csui-search-results-body","searchSidePanelHeader":".csui-sidepanel-header","searchSidePanelHeading":".csui-sidepanel-heading","searchSidePanel":".csui-search-left-panel","loadingEle":".csui-search-blocking","initialLoadingEle":".csui-serch-reults-initial-load"},"events":{"mouseup @ui.toggleDetails":"onToggleOrChangePageSize","keypress @ui.toggleDetails":"onToggleOrChangePageSize","mouseup .csui-paging-navbar > ul > li:not(.csui-overflow) > a":"onChangePage","keypress .csui-paging-navbar > ul > li:not(.csui-overflow) > a":"onChangePage","mouseup .csui-pagesize-menu ul.csui-dropdown-list a":"onToggleOrChangePageSize","keypress .csui-pagesize-menu ul.csui-dropdown-list a":"onToggleOrChangePageSize"},"regions":{"headerRegion":"#header","resultsRegion":"#results","paginationRegion":"#pagination","standardHeaderRegion":"#csui-standard-header-view","customSearchRegion":"#csui-search-custom-container","facetBarRegion":"#facetbarview","facetRegion":"#facetview","tableRowSelectionToolbarRegion":".csui-table-rowselection-toolbar"},"behaviors":{"PerfectScrolling":{"behaviorClass":q,"contentParent":".csui-result-list","suppressScrollX":!0,"scrollYMarginOffset":15},"DefaultAction":{"behaviorClass":N}},"namedLocalStorage":new U("PrevSearchDisplayStyle"),"getPageSize":function(){return this.namedLocalStorage.get(this._createSearchDisplayStyleKey()+"_PrevSRPageSize")||10},"constructor":function(e){e||(e={}),this.options=t.omit(t.defaults(e,e.basicSearchResultsView?{"enableSaveSearchTools":!1,"enableSearchSettings":!1,"enableBackButton":!1,"showFacetPanel":!1,"urlParamsList":["order_by","page"]}:ee),"basicSearchResultsView"),this.context=e.context,e.pageSize=this.getPageSize(),e.data||(e.data={}),this._addUrlParametersSupport(e.context),e.toolbarItems||(e.toolbarItems=_),e.toolbarItemsMasks||(e.toolbarItemsMasks=new T),this.context=e.context,this.showFacet=!1,e.query||(this.context._factories&&this.context._factories.searchTemplate&&"string"==typeof this.context._factories.searchTemplate.property.get("enableSearchForm")?e.query=this.context.getModel(c):e.query=this.context.getModel(l)),this.largeFileSettingsFactory=this.options.context.getFactory(Z),this.largeFileSettingsModel=this.largeFileSettingsFactory.property;var n=new U("search_bar_settings"),r=n.get("full_text");!r||e.query.get("modifier")&&e.query.get("lookfor")||(e.query.set("modifier",r.modifier,{"silent":!0}),e.query.set("lookfor",r.lookfor,{"silent":!0})),e.collection?e.collection.fetched||(this._originalScope=e.collection.getResourceScope()):e.collection=this.context.getModel(h,e),e.collection.fetched||(e.collection.setResourceScope(h.getDefaultResourceScope()),e.collection.setDefaultActionCommands(H.getAllCommandSignatures(Q)),e.collection.setEnabledDelayRestCommands(!0),e.collection.delayedActions&&this.listenTo(e.collection.delayedActions,"error",function(e,t,i){var s=new a.Error(t);D.showMessage("error",s.message)})),e.collection.isSortOptionSelected=!0,o.LayoutView.prototype.constructor.call(this,e);var u=void 0!==this.options.enableSearchSettings?this.options.enableSearchSettings:J.enableSearchSettings;if(u){var d=this.options.query?this.options.query.get("query_id"):void 0;this.loadSearchSettings(d)}this.collection.selectedItems=new s.Collection,this.initSelectionMixin(e),this.metadata=e.metadata||this.context.getCollection($,e),this.query=e.query;var m=this.enableViewState?this._restoreCollectionOptionsFromViewState():{};this.enableViewState&&m?(this.collection.setLimit(m.top||0,m.skip||10,!1),m.orderBy&&this.collection.setOrder(m.orderBy,!1)):this.collection.setLimit(0,e.pageSize,!1),this._toggleCustomSearch(),this.commandController=new L({"commands":Q}),this.listenTo(this.commandController,"before:execute:command",this._beforeExecuteCommand),this.listenTo(this.commandController,"after:execute:command",this._toolbarCommandExecuted);var p=this.namedLocalStorage.get(this._createSearchDisplayStyleKey());this.collection.prevSearchDisplayStyle=p||"StandardView",this.setSearchHeader();var g=this;this.listenTo(this.headerView,"go:back",function(){g.trigger("go:back")}),this.tableColumns=e.tableColumns?e.tableColumns:y.deepClone(),this.listenTo(this.headerView,"toggle:filter",this._completeCommand),this.listenTo(this.headerView,"toggle:search",this._completeCommand),this.listenTo(this.headerView,"focus:filter",this._focusFilter),this.listenTo(this.headerView,"focus:search",this._focusSearchForm),this.listenTo(this.headerView,"open:facet:view",this.openFacetView),this.listenTo(this.headerView,"open:custom:view",this.openCustomView),this.listenTo(this.headerView,"correct:filter:aria",this.correctFilterAria),this.listenTo(this.headerView,"correct:search:aria",this.correctSearchFormAria),this.listenTo(this.headerView,"reload:searchForm",this._resetTargetView),this.listenTo(this.headerView,"readonly:filters",this._updateReadOnlyFilters),this.listenTo(this.headerView,"render:table",t.bind(function(){this.columns=this.collection.searching&&this.collection.searching.sortedColumns,this.getAdditionalColumns(),this.trigger("update:table")},this)),this.listenTo(this.headerView,"toggle:description",function(e){this.trigger("toggle:description",e.showDescriptions)}),e.collection.searchFacets||(e.collection.searchFacets=this.context.getModel(O,{"options":{"query":this.options.query,"topCount":1},"detached":!0})),this.facetFilters=e.collection.searchFacets,this.enableCustomSearch&&(this.setCustomSearchView(),this.listenTo(this.customSearchView,"change:title",this.updateHeaderTitle),this.listenTo(this.customSearchView,"model:updated",this.showHeaderSaveSearchTools)),this.loadingText=R.loadingSearchResultMessage,this.options.blockingParentView?x.delegate(this,this.options.blockingParentView):x.imbue(this);var f=this.context?this.context.perspective:this.options&&this.options.context?this.options.context.perspective:void 0;f&&t.isEmpty(f.get("options").left)&&t.isEmpty(f.get("options").right)&&(this.blockingView.showloadingWheel=!0),this.loadingMessage=this.blockingView.showloadingWheel?R.loadingSearchResultMessage:"",this.listenTo(this.settings,"sync",t.bind(function(){var e=!1,i=!1;this.settings&&this.settings.get("display")&&(this.settings.get("display").display_regions&&this.settings.get("display").display_regions.selected&&(e=t.findIndex(this.settings.get("display").display_regions.selected.models,function(e,t){return"OTLocation"===e.get("key")})),i=this.settings.get("display").summary_description&&this.settings.get("display").summary_description.selected),this.collection.isLocationColumnAvailable=e>-1,this.collection.selectedSettings=i},this)),this.listenTo(this.collection,"sync",function(){this.ui.loadingEle.addClass("binf-hidden"),this.enableCustomSearch||this.$el.parents(".search-results-container").addClass("csui-global-search")}),this.listenToOnce(this.collection,"request",t.bind(function(){this.ui.initialLoadingEle.addClass("binf-hidden")},this)),this.listenTo(this.query,"change",function(){var i=this.$el.find(".csui-search-right-header-container > .csui-search-header-action.csui-tabular-view");if(i&&i.hasClass("csui-toggledView")&&i.removeClass("csui-toggledView"),this.previousSavedQuery=null,!this.query.get("forcePerspectiveChange")){if(this.collection.isSortOptionSelected=!0,this._updatePanels(),u){var s=this.query?this.query.get("query_id"):void 0;this.loadSearchSettings(s)}if(this.collection.isFetchable()){var o=J.csui&&J.csui.fetchFacets,n=t.filter(this.facetFilters.filters,function(e){return void 0===e.readOnlyFilter});this.facetFilters.removeFilter?(this.facetFilters.removeFilter(n,o),this.facetFilters.fetched=!1):this.facetFilters.clearFilter(o),this.collection.fetch({"error":t.bind(this.onSearchResultsFailed,this,e)}),this.trigger("query:changed"),this.trigger("queryTools:update"),this.resetScrollToTop()}this.collection.selectedItems.reset([])}}),this.listenTo(this.options.context,"request",this.blockActions).listenTo(this.options.context,"sync",this._persistState).listenTo(this.options.context,"error",this.unblockActions).listenTo(this.collection,"request",this.executePreProcess).listenTo(this.collection,"error",this.unblockActions).listenTo(this.collection,"destroy",this.unblockActions).listenTo(this.collection,"new:page",this.resetScrollToTop).listenTo(this.context.viewStateModel,"change:state",this.onViewStateChanged).listenTo(this.collection,"paging:change",this._pagingChanged).listenTo(this.collection,"limits:change",this._pagingChanged).listenTo(this.collection,"orderBy:change",this._orderByChanged).listenTo(this.collection,"orderBy:clear",this._orderByChanged);var b=this.namedLocalStorage&&this.namedLocalStorage.get(this._createSearchDisplayStyleKey()+"_PrevSRPageSize");this.options.pageSize=b||10,this.setPagination(),this.listenTo(this.collection,"sync",this.executeEndProcess),this.listenTo(this,"target:view:changed",this.executeEndProcess),this.listenTo(this,"properties:view:destroyed",this.onPropertiesViewDestroyed),this.listenTo(this,"permissions:view:destroyed",this.onPropertiesViewDestroyed),!a.isMozilla()&&this.propagateEventsToRegions(),this.onWinRefresh=t.bind(this.windowRefresh,this),i(window).on("resize.app",this.onWinRefresh),this.enableCustomSearch&&(this.showSearch=!0,this.showFacet=!1,this.listenToOnce(this,"dom:refresh",t.bind(function(){this.$el.width()>1023?(this.ui.searchSidePanel.addClass("csui-is-visible"),this.ui.searchResultsBody.addClass("csui-search-results-body-right")):(this.ui.searchSidePanel.addClass("search-side-panel-overlay"),this.ui.searchSidePanel.addClass("search-side-panel-auto"))},this))),this.listenTo(this,"doc:preview:generic:actions",this._highlightRow),this.listenToOnce(this.collection,"sync",function(){this.$el.removeClass("initialLoading")}),this.initialLoadMessage=e.initialLoadMessage||R.initialLoadMessage},"_highlightRow":function(e,s){i("."+s).removeClass(s);var o=t.findIndex(this.collection.models,function(t){return t.get("id")===e.get("id")});if(-1!==o){var n=this.tableView||this.targetView,a=n&&n.table?n.table:void 0,r=void 0===a?a:i(a.row(o).node());r&&r.addClass(s)}},"executePreProcess":function(){if(this.$el.is(":visible")){var e=this.el;e.getElementsByClassName("csui-result-list")[0].getBoundingClientRect().left!==e.getBoundingClientRect().left&&this.ui.loadingEle.addClass("csui-side-panel-exists")}this.blockActions()},"executeEndProcess":function(){if(!this.targetView){if(this.setTargetView(),this.paginationRegion.show(this.paginationView),this.targetView.trigger("set:inline:actionbar:events"),this._setFacetBarView(),this.collection.searching.facets&&this.collection.searching.facets.selected&&this.facetBarView.collection.filters&&0===this.facetBarView.collection.filters.length){for(var e=this.collection.searching.facets.selected,i=0;i<e.length;i++){var s=e[i],o=[];t.each(s.facet_items,function(e){e&&o.push({"id":e.value})});var n={"id":s.name,"values":o,"readOnlyFilter":!0};this.facetFilters.addFilter(n,!1)}this.facetFilters.ensureFetched()}this.facetBarView&&!1!==this.options.showFacetPanel&&this.facetBarRegion.show(this.facetBarView),this.correctSearchFormAria(this)}this.collection.length&&(this.trigger("render:metadata"),this.columns=this.collection.searching&&this.collection.searching.sortedColumns,this.getAdditionalColumns(),this.targetView.trigger("set:tablerow:assets"),!this.collection.settings_changed&&this.collection.columns.length===this.collection.searching.sortedColumns.length||"TabularView"!==this.collection.prevSearchDisplayStyle||(this.collection.columns=this.collection.searching.sortedColumns,this.trigger("update:table"),this.collection.settings_changed=!1)),this.updateActionToolBar(),this.updateScrollbar(),this.unblockSearchResultsActions()},"unblockSearchResultsActions":function(){this.ui.loadingEle.removeClass("csui-side-panel-exists"),this.ui.loadingEle.addClass("binf-hidden"),this.unblockActions()},"collectionEvents":{"reset":"updateLayoutView"},"updateLayoutView":function(){var e=this.namedLocalStorage&&this.namedLocalStorage.get(this._createSearchDisplayStyleKey()+"_PrevSRPageSize");e=e||10,this.paginationView.options.pageSize=e,this.paginationView.selectedPageSize=e},"setPagination":function(){return this.paginationView=new C({"collection":this.collection,"pageSize":this.options.pageSize,"pageNumber":this.options.pageNumber,"defaultDDList":[10,25,50,100]}),this.listenTo(this.paginationView,"pagesize:updated",function(e){this.paginationView.pageSize=e.pageSize,this.namedLocalStorage.set(this._createSearchDisplayStyleKey()+"_PrevSRPageSize",this.paginationView.pageSize)}),!0},"onToggleOrChangePageSize":function(e){("keypress"!==e.type||13!==e.keyCode&&32!==e.keyCode)&&"mouseup"!==e.type||(this.collection.isSortOptionSelected=!0)},"onChangePage":function(e){var t=i(e.currentTarget);parseInt(t.attr("data-pageid"),10)+1!==this.paginationView.currentPageNum&&this.onToggleOrChangePageSize(e)},"_persistState":function(){this.unblockActions()},"loadSearchSettings":function(e){this.options.templateId=e,this.settings&&this.settings.options&&(this.settings.options.templateId=e),this.settings=this.options.settings||this.context.getCollection(A,this.options),this.settings.fetch()},"_createSearchDisplayStyleKey":function(){var e=this.context||this.options&&this.options.context,t=(new r).getAbsolute(),i=e&&e.getModel(B).get("id");return"undefined"==t||"null"==t?t&&i?t+i:"defaultSearchDisplayStyle":t&&t.split("//")[1]&&t.split("//")[1].split("/")[0].split(":")[0]+i},"setTargetView":function(){if(this.columns=this.collection.searching&&this.collection.searching.sortedColumns,Y&&this.getAdditionalColumns(),this.collection.columns=this.columns?this.columns:this.tableColumns,this.settings&&this.settings.get("display")){var e=this.settings.get("display").summary_description.selected;this.showSummaryOnly="SO"===e}var t=this.collection.prevSearchDisplayStyle;"TabularView"===t?(this.ui.toolBarContainer.addClass("binf-hidden"),this.targetView=this.setTabularSearchView(),this.targetView.trigger("set:tablerow:assets"),this.tableView=this.targetView,this.previewInFullMode=!1):(this.ui.toolBarContainer.removeClass("binf-hidden"),this.targetView=this.setStandardSearchView(),this.tableView=void 0,this.previewInFullMode=!0),this.resultsRegion.show(this.targetView,this),"StandardView"===t?(this.standardHeaderRegion.show(this.targetView.standardHeaderView),this.targetView.standardHeaderView._removeAllSelections()):this.trigger("toggle:description",this.headerView.showDescription)},"_updateReadOnlyFilters":function(){t.each(this.facetFilters.filters,function(e){e.readOnlyFilter=!0}),this.facetFilters.trigger("set:readonly")},"_resetTargetView":function(){this.targetView.trigger("destroy:header:view"),this.targetView.destroy(),this.targetView=void 0,this.resultsRegion.empty(),this.setTargetView(),this.executeEndProcess(),this.resetScrollToTop()},"setStandardSearchView":function(){var e=t.extend(this.options,{"collection":this.collection,"originatingView":this,"headerEle":this.ui.toolBarContainer,"context":this.context,"metadata":this.metadata});return new f(e)},"setTabularSearchView":function(){var e=t.extend(this.options,{"collection":this.collection,"columns":this.columns,"tableColumns":this.tableColumns,"originatingView":this,"container":this.container,"defaultActionController":this.defaultActionController,"config":J,"customLabels":{"emptyTableText":R.noSearchResultMessage}});return new b(e)},"_focusFilter":function(e){!!e&&e.headerView.ui.filter.trigger("focus"),this.correctFilterAria(e);var t=this.facetView&&this.facetView.$(".csui-facet");t&&t.length>0&&t.prop("tabindex",0),e.headerView.ui.filter.attr({"tabindex":0})},"_focusSearchForm":function(e){!!e&&e.headerView.ui.search.trigger("focus"),this.correctSearchFormAria(e);var t=this.customSearchView&&this.customSearchView.$(".csui-saved-search-form");t&&t.length>0&&t.prop("tabindex",0),e.headerView.ui.search.attr({"tabindex":0})},"correctFilterAria":function(e){e&&e.headerView&&(this.ui.searchSidePanel.hasClass("csui-is-visible")&&!this.showSearch?e.headerView.ui.filter.attr({"title":R.filterCollapseTooltip,"aria-label":R.filterCollapseAria,"aria-expanded":this.showFacet,"tabindex":0}):e.headerView.ui.filter.attr({"title":R.filterExpandTooltip,"aria-label":R.filterExpandAria,"aria-expanded":this.showFacet}))},"correctSearchFormAria":function(e){e&&e.headerView&&(this.ui.searchSidePanel.hasClass("csui-is-visible")&&!this.showFacet?e.headerView.ui.search.attr({"title":R.searchFormCollapseTooltip,"aria-label":R.searchFormCollapseAria,"aria-expanded":this.showSearch,"tabindex":0}):e.headerView.ui.search.attr({"title":R.searchFormExpandTooltip,"aria-label":R.searchFormExpandAria,"aria-expanded":this.showSearch}))},"onSearchResultsFailed":function(e,t,i){var s=new a.RequestErrorMessage(i);z.showError(s.toString())},"updateScrollbar":function(){this.triggerMethod("update:scrollbar",this)},"resetScrollToTop":function(){this.$("#results").scrollTop(0)},"updateActionToolBar":function(){0===this.collection.length?(this.ui.toolBarContainer.addClass("binf-hidden"),this.enableCustomSearch||this.ui.customSearchContainer.addClass("binf-hidden")):"StandardView"===this.collection.prevSearchDisplayStyle&&(this.ui.toolBarContainer.removeClass("binf-hidden"),this.ui.customSearchContainer&&this.ui.customSearchContainer.hasClass("binf-active")&&this.ui.customSearchContainer.removeClass("binf-hidden"))},"openVersionHistory":function(e){var i=new E;i.push(e.model);var o={"nodes":i,"container":e.model.collection.node,"collection":e.model.collection,"selectedTab":new s.Model({"title":"Versions"})};o=t.extend(o,{"originatingView":this}),(new M).execute(o,this.options).always(function(e){})},"onPropertiesViewDestroyed":function(){this.onMetadataNavigationViewDestroyed(),this.headerView.updateHeader();this.namedLocalStorage.get(this._createSearchDisplayStyleKey()+"_showDescription");"TabularView"===this.collection.prevSearchDisplayStyle&&(this.headerView.updateToggleDescription(),this.tableView&&this.tableView.render()),this.paginationView&&this.paginationView.collectionChange()},"onPermissionViewDestroyed":function(){this.onPropertiesViewDestroyed()},"onMetadataNavigationViewDestroyed":function(){this.collection.inMetadataNavigationView&&this.isTabularView&&(this.collection.inMetadataNavigationView=!1)},"_toggleCustomSearch":function(){if(this.enableCustomSearch=!!this.options.customSearchViewModel||!!this.options.customSearchView||this.query.get("query_id")&&Object.keys(this.query.attributes).length>1,this.enableCustomSearch){this.$el.find("#csui-search-custom-container").addClass("csui-search-custom-container"),this.$el.find("#csui-search-custom-results").addClass("csui-search-custom-results"),this.$el.find(".csui-search-custom-tab").addClass("binf-active"),this.$el.find(".csui-search-custom-tab > a").attr("aria-selected","true");var e=this.customSearchView&&this.customSearchView.$(".csui-saved-search-form");e&&e.length>0&&e.prop("tabindex",-1),this.headerView&&this.headerView.ui.search.attr({"tabindex":0})}else this.customSearchView&&this.query.get("where")&&(this.customSearchRegion.empty(),this.$el.find("#csui-search-custom-container").removeClass("csui-search-custom-container"),this.$el.find("#csui-search-custom-results").removeClass("csui-search-custom-results"))},"_updatePanels":function(){if(this._toggleCustomSearch(),this.enableCustomSearch)this.headerView._filterStateIsOn=!1,this.headerView._searchStateIsOn=!0,this.$el.find(".csui-search-results-custom").removeClass("binf-hidden"),this.$el.find(".csui-search-left-panel-tabs").removeClass("binf-hidden"),this.ui.searchResultsBody.addClass("csui-search-results-body-right");else if(this.headerView._filterStateIsOn=!1,this.ui.searchSidePanel.hasClass("csui-is-visible")){var e=this;this.ui.searchSidePanel.one(this._transitionEnd(),function(){e.$el.find(".csui-search-results-custom").addClass("binf-hidden"),e.$el.find(".csui-search-left-panel-tabs").addClass("binf-hidden"),e.ui.searchSidePanel.hasClass("csui-is-visible")||(e.ui.loadingEle.removeClass("csui-side-panel-exists"),e.ui.searchSidePanel.addClass("csui-is-hidden")),e.ui.facetView.removeClass("binf-hidden")}),this.ui.searchResultsBody.removeClass("csui-search-results-body-right"),this.ui.searchSidePanel.removeClass("csui-is-visible")}else this.$el.find(".csui-search-results-custom").addClass("binf-hidden"),this.$el.find(".csui-search-left-panel-tabs").addClass("binf-hidden"),this.ui.facetView.removeClass("binf-hidden");this.headerView&&(this.headerView.options.useCustomTitle=this.enableCustomSearch),this.facetView&&(this.facetView.options.data.showTitle=!this.enableCustomSearch,this.facetView.render())},"openCustomView":function(e){this.enableCustomSearch&&(this.ui.facetView.addClass("binf-hidden"),this.$el.find(".csui-search-results-custom").removeClass("binf-hidden"),this.$el.find(".csui-search-facet-tab").removeClass("binf-active"),this.$el.find(".csui-search-facet-tab > a").removeAttr("aria-selected"),this.$el.find(".csui-search-custom-tab").addClass("binf-active"),this.$el.find(".csui-search-custom-tab > a").attr("aria-selected","true"))},"openFacetView":function(e){this.enableCustomSearch&&(this.facetFilters.ensureFetched(),this._ensureFacetPanelViewDisplayed(),this.$el.find(".csui-search-results-custom").addClass("binf-hidden"),this.ui.facetView.removeClass("binf-hidden"),this.$el.find(".csui-search-custom-tab").removeClass("binf-active"),this.$el.find(".csui-search-custom-tab > a").removeAttr("aria-selected"),this.$el.find(".csui-search-facet-tab").addClass("binf-active"),this.$el.find(".csui-search-facet-tab > a").attr("aria-selected","true"),this.facetView.triggerMethod("dom:refresh"))},"onDestroy":function(){i(window).off("resize.app",this.onWinRefresh),this._originalScope&&this.options.collection.setResourceScope(this._originalScope),this.tableView&&this.tableView.destroy()},"windowRefresh":function(){this.facetView&&this.facetView.triggerMethod("dom:refresh"),this.targetView&&this.targetView.triggerMethod("dom:refresh"),"absolute"!=this.ui.searchSidePanel.css("position")?this.$el.width()>1023&&this.ui.searchSidePanel.hasClass("search-side-panel-overlay")&&(this.ui.searchSidePanel.removeClass("search-side-panel-overlay"),this.ui.searchSidePanel.hasClass("search-side-panel-auto")&&(this.ui.searchSidePanel.removeClass("search-side-panel-auto"),this._completeCommand(this,!0))):this.ui.searchSidePanel.hasClass("search-side-panel-auto")||this.ui.searchSidePanel.hasClass("search-side-panel-overlay")||(this.ui.searchSidePanel.addClass("search-side-panel-overlay"),this.ui.searchSidePanel.hasClass("csui-is-visible")&&(this.ui.searchSidePanel.addClass("search-side-panel-auto"),this._completeCommand(this,!0)))},"setSearchHeader":function(){var e=void 0!==this.options.enableSearchSettings?this.options.enableSearchSettings:J.enableSearchSettings,t=void 0!==this.options.enableSaveSearchTools?this.options.enableSaveSearchTools:J.enableSaveSearchTools;return this.headerView=new g({"collection":this.collection,"filter":this.options.searchString,"context":this.options.context,"enableBackButton":this.options.enableBackButton,"backButtonToolTip":this.options.backButtonToolTip,"enableFacetFilter":J.enableFacetFilter&&this.options.showFacetPanel,"useCustomTitle":this.enableCustomSearch,"commands":Q,"originatingView":this,"titleView":this.options.titleView,"localStorage":this.namedLocalStorage,"enableSearchSettings":e,"settings":!!this.settings&&this.settings,"saveSearchTools":t}),!0},"getSettings":function(){return this.settings},"setCustomSearchView":function(){return this.query.get("enableSearchForm")?this.customSearchView=this.options.customSearchView||new I({"context":this.options.context,"searchFormId":this.query.get("query_id"),"customValues":this.query,"parentView":this,"query":this.query,"model":this.options.customSearchViewModel}):this.customSearchView=this.options.customSearchView||new k({"context":this.options.context,"savedSearchQueryId":this.query.get("query_id"),"customValues":this.query,"parentView":this,"query":this.query,"model":this.options.customSearchViewModel}),!0},"getAdditionalColumns":function(){if(Y){var e=this.headerView&&this.headerView.selectedSettings;switch(e=e||this.settings&&this.settings.get("display").summary_description.selected){case"SD":case"SP":case"DP":(this.tableView&&!this.tableView.columns.findWhere({"column_key":"description"})||!this.columns.findWhere({"column_key":"description"}))&&this.getDescriptionColumn(),(this.tableView&&!this.tableView.columns.findWhere({"column_key":"summary"})||!this.columns.findWhere({"column_key":"summary"}))&&this.getSummaryColumn();break;case"SO":this.removeDescriptionColumn(),(this.tableView&&!this.tableView.columns.findWhere({"column_key":"summary"})||!this.columns.findWhere({"column_key":"summary"}))&&this.getSummaryColumn();break;case"DO":this.removeSummaryColumn(),(this.tableView&&!this.tableView.columns.findWhere({"column_key":"description"})||!this.columns.findWhere({"column_key":"description"}))&&this.getDescriptionColumn();break;case"NONE":this.removeSummaryColumn(),this.removeDescriptionColumn()}}},"getDescriptionColumn":function(){this.columns.push(new S({"column_key":"description","name":R.descriptionColumnTitle,"sortable":!1,"permanentColumn":!0,"type":-1,"definitions_order":505}))},"getSummaryColumn":function(){this.columns.push(new S({"column_key":"summary","name":R.summaryColumnTitle,"sortable":!1,"permanentColumn":!0,"type":-1,"definitions_order":506}))},"removeDescriptionColumn":function(){this.tableView&&this.tableView.columns.findWhere({"column_key":"description"})&&this.tableView.columns.findWhere({"column_key":"description"}).destroy()},"removeSummaryColumn":function(){this.tableView&&this.tableView.columns.findWhere({"column_key":"summary"})&&this.tableView.columns.findWhere({"column_key":"summary"}).destroy()},"_beforeExecuteCommand":function(e){!!this.collection.selectedItems&&this.collection.selectedItems.each(function(t){t.collection=e.status.collection}),"Properties"!==e.commandSignature&&"permissions"!==e.commandSignature||e.status.originatingView.blockActions()},"_toolbarCommandExecuted":function(e){if(e&&e.commandSignature)switch(this.targetView&&this.targetView.trigger("update:tool:items"),e.command&&e.command.allowCollectionRefetch&&this.collection.totalCount>this.collection.topCount&&this.collection.fetch(),e.commandSignature){case"Move":case"RemoveCollectedItems":case"Delete":this.collection.selectedItems.remove(this.collection.selectedItems.models);var t=this.collection;0!==t.skipCount&&t.totalCount===t.skipCount?(this.collection.setLimit(t.skipCount-t.topCount,this.collection.topCount,!1),this.collection.fetch()):t.totalCount<t.topCount&&this.collection.sync()}},"_updateToolbarActions":function(){this.targetView&&this.targetView.trigger("set:tablerow:assets")},"_showInlineActionBar":function(e){if(e){this._savedHoverEnterArgs=null;var s=e.node.get("parent_id");s instanceof Object&&(s=e.node.get("parent_id").id);var o=new P({"id":s},{"connector":e.node.connector});this.inlineToolbarView=new F(t.extend({"context":this.options.context,"commands":Q,"delayedActions":this.collection.delayedActions,"collection":this.options.toolbarItems.inlineToolbar||[],"toolItemsMask":this.options.toolbarItemsMasks.toolbars.inlineToolbar,"container":o,"containerCollection":this.collection,"model":e.node,"originatingView":this,"notOccupiedSpace":0},this.options.toolbarItems.inlineToolbar&&this.options.toolbarItems.inlineToolbar.options)),this.listenTo(this.inlineToolbarView,"after:execute:command",this._toolbarCommandExecuted),this.inlineToolbarView.render(),this.listenTo(this.inlineToolbarView,"destroy",function(){this.inlineToolbarView=void 0,this._savedHoverEnterArgs&&this._showInlineActionBarWithDelay(this._savedHoverEnterArgs)},this),i(e.target).append(this.inlineToolbarView.$el),this.inlineToolbarView.triggerMethod("show")}},"_showInlineActionBarWithDelay":function(e,t){this._showInlineActionbarTimeout&&clearTimeout(this._showInlineActionbarTimeout);var i=this;this._showInlineActionbarTimeout=setTimeout(function(){i._showInlineActionbarTimeout=void 0,i._showInlineActionBar.call(i,t)},200)},"_actionBarShouldDestroy":function(e,t){this._showInlineActionbarTimeout&&(clearTimeout(this._showInlineActionbarTimeout),this._showInlineActionbarTimeout=void 0),
this.inlineToolbarView&&this.inlineToolbarView.destroy()},"_destroyInlineActionBar":function(){this.inlineToolbarView&&(this.inlineToolbarView.destroy(),this.inlineToolbarView=void 0)},"_getQueryPermissions":function(e){var s=i.Deferred(),o=this,n=new P({"id":e});this.context.getObject(G,{"node":n}).fetch().done(function(e){var i=e.results.data.permissions.permissions;o.hasEditPermsForSearchQuery=i&&t.isArray(i)&&t.contains(i,"reserve")}).fail(function(e){s.reject(e)})},"onRender":function(){var e=this;if(this.headerRegion.show(this.headerView),this.options.query.get("query_id")&&this._getQueryPermissions(this.options.query.get("query_id")),this.enableCustomSearch)this.headerView._filterStateIsOn=!1,this.headerView._searchStateIsOn=!0,this.customSearchRegion.show(this.customSearchView),this.ui.facetView.addClass("binf-hidden"),this.ui.searchSidePanel.removeClass("csui-is-hidden"),this.ui.searchSidePanelHeader.removeClass("binf-hidden"),this.ui.searchSidePanel.addClass("csui-is-visible"),this.correctSearchFormAria(this);else{this.headerView._filterStateIsOn=!1,this.ui.searchSidePanel.removeClass("csui-is-visible"),this.ui.searchSidePanelHeader.addClass("binf-hidden");var t=this;this.ui.searchSidePanel.one(this._transitionEnd(),function(){t.ui.searchSidePanel.hasClass("csui-is-visible")||t.ui.searchSidePanel.addClass("csui-is-hidden")})}this._toggleCustomSearch(),this.$(".csui-result-list").on("scroll",function(){e.trigger("scroll")})},"_ensureFacetPanelViewDisplayed":function(){void 0===this.facetView&&!1!==this.options.showFacetPanel&&(this._setFacetPanelView(),this.facetRegion.show(this.facetView))},"_setFacetPanelView":function(){this.facetView=new W({"collection":this.facetFilters,"blockingLocal":!0,"showTitle":!this.enableCustomSearch,"context":this.options.context}),this.listenTo(this.facetView,"remove:filter",this._removeFacetFilter).listenTo(this.facetView,"remove:all",this._removeAll).listenTo(this.facetView,"apply:filter",this._checkSelectionAndApplyFilter)},"_removeFacetPanelView":function(){this.facetRegion.empty(),this.facetView=void 0},"_setFacetBarView":function(){this.facetBarView=new K({"collection":this.facetFilters,"showSaveFilter":!1}),this.listenTo(this.facetBarView,"remove:filter",this._removeFacetFilter).listenTo(this.facetBarView,"remove:all",this._removeAll).listenTo(this.facetBarView,"facet:bar:visible",this._handleFacetBarVisible).listenTo(this.facetBarView,"facet:bar:hidden",this._handleFacetBarHidden)},"_checkSelectionAndApplyFilter":function(e){this.collection.selectedItems.length?z.confirmQuestion(t.str.sformat(R.dialogTemplate,R.dialogTitle),R.dialogTitle,{}).done(t.bind(function(){this.collection.selectedItems.reset([]),this._addToFacetFilter(e)},this)):this._addToFacetFilter(e)},"_addToFacetFilter":function(e){this.facetFilters.addFilter(e,!1),this.collection.setDefaultPageNum(),this._fetchCollectionAfterFilterUpdate(),this.resetScrollToTop()},"_removeFacetFilter":function(e){this.facetFilters.removeFilter(e,!1),this.collection.setDefaultPageNum(),this._fetchCollectionAfterFilterUpdate(),this.resetScrollToTop()},"_removeAll":function(){this.facetFilters.clearFilter(!1),this.collection.setDefaultPageNum(),this._fetchCollectionAfterFilterUpdate(),this.resetScrollToTop()},"_fetchCollectionAfterFilterUpdate":function(){this.collection.fetch({"fetchFacets":!0,"success":t.bind(function(){this.trigger("queryTools:update")},this)})},"_completeCommand":function(e,t){var i=e.ui.searchSidePanel.css("position"),s=this;"absolute"===i&&void 0===t&&(e.ui.searchSidePanel.removeClass("search-side-panel-auto"),e.ui.searchSidePanel.addClass("search-side-panel-overlay")),e.showSidePanel=!e.ui.searchSidePanel.hasClass("csui-is-visible"),this.showSearch=this.headerView.searchinit&&!this.showSearch,this.showFacet=this.headerView.filterinit&&!this.showFacet,this.showSearch||this.showFacet||e.showSidePanel?(e.facetFilters.ensureFetched(),e._ensureFacetPanelViewDisplayed(),e.ui.searchSidePanel.removeClass("csui-is-hidden"),this.ui.searchSidePanelHeading.text(this.showSearch?R.searchHeader:R.filterHeader),e.ui.searchSidePanel.one(e._transitionEnd(),function(){a.isMSBrowser()&&e.ui.searchSidePanel.hasClass("csui-is-visible")&&e.ui.searchResultsBody.addClass("csui-search-results-body-right"),e.triggerMethod("dom:refresh"),e.paginationView&&e.paginationView.triggerMethod("dom:refresh"),s.targetView&&s.targetView.triggerMethod("dom:refresh"),e.facetView&&e.facetView.triggerMethod("dom:refresh"),s.targetView&&s.targetView.trigger("facet:opened",!0)}).addClass("csui-is-visible"),a.isMSBrowser()||e.ui.searchSidePanel.hasClass("csui-is-visible")&&e.ui.searchResultsBody.addClass("csui-search-results-body-right"),s.headerView.setFacetOpened(this.showFacet),s.headerView.setSearchOpened(this.showSearch)):(this.showFacet=!1,this.showSearch=!1,e.ui.searchSidePanel.one(e._transitionEnd(),function(){e.ui.searchSidePanel.hasClass("csui-is-visible")||e.ui.searchSidePanel.addClass("csui-is-hidden"),e.triggerMethod("dom:refresh"),e._removeFacetPanelView(),e.paginationView&&e.paginationView.triggerMethod("dom:refresh"),s.targetView&&s.targetView.triggerMethod("dom:refresh"),s.headerView.currentlyFocusedElement(),s.headerView.setFacetOpened(this.showFacet),s.headerView.setSearchOpened(this.showSearch),s.headerView.trigger(s.headerView.searchinit?"focus:search":"focus:filter",s),s.targetView&&s.targetView.trigger("facet:opened",!1)}).removeClass("csui-is-visible"),e.ui.searchResultsBody.removeClass("csui-search-results-body-right")),this.ui.searchSidePanelHeader[this.enableCustomSearch?"removeClass":"addClass"]("binf-hidden"),this.facetView&&this.facetView.triggerMethod("dom:refresh"),this.listenTo(this.facetView,"dom:refresh",function(){this.headerView.currentlyFocusedElement(),this.headerView.trigger(this.headerView.searchinit?"focus:search":"focus:filter",this)}),this.facetView&&this.facetView.facets&&this.listenTo(this.facetView.facets,"sync",function(){this.headerView.trigger(this.headerView.searchinit?"focus:search":"focus:filter",this)})},"_transitionEnd":t.once(function(){var e,t={"transition":"transitionend","WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend"},i=document.createElement("div");for(e in t)if(void 0!==i.style[e])return t[e]}),"updateHeaderTitle":function(){this.headerView.setCustomSearchTitle(this.options.title)},"showHeaderSaveSearchTools":function(){this.headerView.toggleSaveSearchTools(!0)},"_handleFacetBarVisible":function(){this.ui.searchResultsContent.addClass("csui-facetbarviewOpened"),this.ui.searchResultsContent.find(".csui-facet-list-bar .csui-facet-item:last a").trigger("focus"),this.$el.find(".csui-table-rowselection-toolbar-visible").length>0&&this.$(".csui-selected-counter-region").attr("tabindex",0)},"_handleFacetBarHidden":function(){this.ui.searchResultsContent.removeClass("csui-facetbarviewOpened"),this.headerView.trigger("refresh:tabindexes"),this.$el.find(".csui-table-rowselection-toolbar-visible").length>0&&this.$(".csui-selected-counter-region").attr("tabindex",0)},"onViewStateChanged":function(){if(this.enableViewState){if("Search"===this.context.viewStateModel.getCurrentRouterName()){var e=this.getViewStatePage()||this.getDefaultViewStatePage();e?void 0===e.top||void 0===e.skip||e.top===this.collection.topCount&&e.skip===this.collection.skipCount||this.collection.setLimit(e.skip,e.top):this.collection.setLimit(0,this.getPageSize())}}},"_pagingChanged":function(){if(this.enableViewState&&void 0!==this.collection.topCount&&void 0!==this.collection.skipCount)return this.setViewStatePage(this.collection.topCount,this.collection.skipCount,{"default":0===this.collection.skipCount})},"_orderByChanged":function(){this.enableViewState&&this.setViewStateOrderBy([this.collection.orderBy])},"_addUrlParametersSupport":function(e){var t=e&&e.viewStateModel,i=this.getUrlParameters();this.enableViewState=t&&i&&t.addUrlParameters(i,e)},"getDefaultUrlParameters":function(){return this.options.urlParamsList},"getUrlParameters":function(){return this.getDefaultUrlParameters()}},{"RowStatesSelectedRows":"selected"});return t.extend(te.prototype,u),t.extend(te.prototype,p),t.extend(te.prototype,d),t.extend(te.prototype,m),te}),csui.define("json!csui/widgets/search.custom/search.custom.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"tile","schema":{"type":"object","properties":{"savedSearchQueryId":{"title":"{{savedSearchQueryTitle}}","description":"{{savedSearchQueryDescription}}","type":"string"}},"required":["savedSearchQueryId"]},"options":{"fields":{"savedSearchQueryId":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[258]}}}}}}),csui.define("json!csui/widgets/search.results/search.results.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"fullpage","schema":{},"options":{},"actions":[{"toolItems":"csui/widgets/search.results/toolbaritems","toolItemMasks":"csui/widgets/search.results/toolbaritems.masks","toolbars":[{"id":"otherToolbar","title":"{{otherToolbarTitle}}","description":"{{otherToolbarDescription}}"},{"id":"inlineToolbar","title":"{{inlineToolbarTitle}}","description":"{{inlineToolbarDescription}}"}]}]}),csui.define("json!csui/widgets/search.results.tile/search.results.tile.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"tile","schema":{"type":"object","properties":{"savedSearchQueryId":{"title":"{{savedSearchQueryTitle}}","description":"{{savedSearchQueryDescription}}","type":"string"},"displayName":{"title":"{{displayNameTitle}}","type":"string"}},"required":["savedSearchQueryId"]},"options":{"fields":{"savedSearchQueryId":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[258]}}}}}}),csui.define("csui/widgets/search.custom/impl/nls/search.custom.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.custom/impl/nls/root/search.custom.manifest",{"widgetTitle":"Custom View Search","widgetDescription":"Shows custom view search form for the given saved search query.","savedSearchQueryTitle":"Search query","savedSearchQueryDescription":"An existing saved search query object"}),csui.define("csui/widgets/search.results/impl/nls/search.results.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.results/impl/nls/root/search.results.manifest",{"widgetTitle":"Search Results","widgetDescription":"Shows objects found by a full-text search query and offers the most important actions for them.","otherToolbarTitle":"List Header Toolbar","otherToolbarDescription":"Toolbar, which is activated in the list header, once a list item is selected.","inlineToolbarTitle":"Inline Toolbar","inlineToolbarDescription":"Toolbar, which is displayed on the right side of a list item, when the mouse cursor is moving above it."}),csui.define("csui/widgets/search.results.tile/impl/nls/search.results.tile.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.results.tile/impl/nls/root/search.results.tile.manifest",{"widgetTitle":"Search Query Results","widgetDescription":"Shows search results for the given saved search query.","savedSearchQueryTitle":"Search query","savedSearchQueryDescription":"An existing saved search query object","displayNameTitle":"Display name","title":"Search Query Results","description":"Shows search results for the given saved search query.","tableHeaderToolbarTitle":"Table Header Toolbar","tableHeaderToolbarDescription":"Toolbar, which is activated in the table header, once a table row is selected.","inlineActionbarTitle":"Inline Action Bar","inlineActionbarDescription":"Toolbar, which is displayed inside a table row, when the mouse cursor is moving above it."}),csui.define("bundles/csui-search",["csui/models/widget/search.results/facet.server.adaptor.mixin","csui/models/widget/search.results/search.facets","csui/utils/contexts/factories/search.results.facets.factory","csui/models/widget/search.results/object.to.model","csui/widgets/search.custom/search.custom.view","csui/widgets/search.custom/impl/search.object.view","csui/widgets/search.custom/impl/search.customquery.factory","csui/widgets/search.forms/search.form.view","csui/widgets/search.forms/search.form.model","csui/widgets/search.forms/search.form.factory","csui/widgets/search.results/search.results.view","json!csui/widgets/search.custom/search.custom.manifest.json","json!csui/widgets/search.results/search.results.manifest.json","json!csui/widgets/search.results.tile/search.results.tile.manifest.json","i18n!csui/widgets/search.custom/impl/nls/search.custom.manifest","i18n!csui/widgets/search.results/impl/nls/search.results.manifest","i18n!csui/widgets/search.results.tile/impl/nls/search.results.tile.manifest","csui/widgets/search.results/impl/toolbaritems","csui/widgets/search.results/toolbaritems","csui/widgets/search.results/toolbaritems.masks"],{}),csui.require(["require","css"],function(e,t){t.styleLoad(e,"csui/bundles/csui-search",!0)});
//# sourceMappingURL=csui-search.js.map