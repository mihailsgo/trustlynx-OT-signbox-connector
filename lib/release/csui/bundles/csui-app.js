csui.define("csui/behaviors/expanding/expanding.behavior",["require","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette"],function(e,t,i,n){function o(e,i,n){if(null!=e){var o=e[i];return t.isFunction(o)?e[i].call(n):o}}function s(e,t,i){var n=o(e,t,i);return n?n+=" csui-expanded":n="csui-expanded",n}return n.Behavior.extend({"constructor":function(e,i){n.Behavior.prototype.constructor.apply(this,arguments);var o=t.bind(this._destroyExpandedView,this,!1),s=(t.bind(this._destroyExpandedView,this,!0),i.options&&i.options.context);this.listenTo(this,"before:destroy",o),s&&this.listenTo(s,"request",o).listenTo(s,"request:perspective",o)},"onExpand":function(){if(!this.expanded){this.expanded=!0;var n=this,r=this.view.completeCollection?this.view.completeCollection.clone():this.view.collection.clone();void 0!==this.view.currentFilter&&r.setFilter(this.view.currentFilter,{"fetch":!1}),this.view.isSearchOpen()&&this.view.searchClicked();var l=n.getOption("expandedView"),a=l;!0!==t.isString(l)&&(a=l.prototype instanceof i.View?l:l.call(n.view));var c=["csui/controls/dialog/dialog.view"];t.isString(a)&&c.push(a),e(c,function(e){t.isString(a)&&(a=arguments[1]);var i=o(n.options,"expandedViewOptions",n.view);n.expandedView=new a(t.extend({"context":n.view.options.context,"collection":r,"orderBy":o(n.options,"orderBy",n.view),"filterBy":n.view.currentFilter,"limited":!1,"isExpandedView":!0},i)),n.dialog=new e({"iconLeft":o(n.options,"titleBarIcon",n.view)||o(n.view.options,"titleBarIcon",n.view),"iconNameLeft":o(n.options,"titleBarIconName",n.view)||o(n.view.options,"titleBarIconName",n.view),"actionIconLeft":o(n.options,"actionTitleBarIcon",n.view)||o(n.view.options,"actionTitleBarIcon",n.view),"actionIconNameLeft":o(n.options,"actionTitleBarIconName",n.view)||o(n.view.options,"actionTitleBarIconName",n.view),"imageLeftUrl":o(n.options,"titleBarImageUrl",n.view),"imageLeftClass":o(n.options,"titleBarImageClass",n.view),"title":o(n.options,"dialogTitle",n.view),"iconRight":o(n.options,"dialogTitleIconRight",n.view),"iconNameRight":o(n.options,"dialogTitleIconNameRight",n.view),"className":s(n.options,"dialogClassName",n.view),"largeSize":!0,"view":n.expandedView,"headerView":o(n.options,"headerView",n.view)}),n.listenTo(n.dialog,"before:hide",n._expandOtherView).listenTo(n.dialog,"destroy",n._enableExpandingAgain),n._expandOtherView(!1),n.dialog.show()},function(e){n.expanded=!1})}},"_destroyExpandedView":function(e){if(this.dialog){var t=e?"kill":"destroy";this.dialog[t](),this.dialog=void 0}},"_expandOtherView":function(e){this.options.collapsedView&&this.options.collapsedView.triggerMethod(!1===e?"go:away":"go:back")},"_enableExpandingAgain":function(){if(this.expanded=!1,this.view.tabableRegionBehavior){var e=this.view.tabableRegionBehavior,t=this.view.ui.tileExpand;e.currentlyFocusedElement&&e.currentlyFocusedElement.prop("tabindex",-1),t&&t.prop("tabindex",0),t.trigger("focus"),e.setInitialTabIndex(),this.view.currentTabPosition=2}}})}),csui.define("csui/behaviors/item.error/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/behaviors/item.error/impl/nls/root/lang",{"itemCannotBeAccessed":"Item cannot be accessed."}),csui.define("csui/behaviors/item.error/item.error.behavior",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/error/error.view","i18n!csui/behaviors/item.error/impl/nls/lang","csui/lib/binf/js/binf"],function(e,t,i,n,o){"use strict";function s(t){var i=this.getOption(t);return e.isFunction(i)?i.call(this.view):i}return i.Behavior.extend({"constructor":function(r,l){i.Behavior.prototype.constructor.apply(this,arguments),this.view=l;var a=s.call(this,"model")||l.model||l.options.model;this._setupErrorHandling(a);var c=this.getOption("errorView");!e.isFunction(c)||c.prototype instanceof t.View||(c=c.call(l)),c||(c=n);var u=l.getTemplate,d=this;l.getTemplate=function(){if(this.model&&this.model.error){if("string"!=typeof s.call(d,"el")&&!s.call(d,"region"))return!1}return u.apply(l,arguments)};var h;this.listenTo(l,"render",function(){var n=this.model&&this.model.error;if(n){if(h&&h.empty(),!(h=s.call(this,"region"))){var r=s.call(this,"el")||l.el;"string"==typeof r&&(r=l.$(r)),h=new i.Region({"el":r})}h.show(new c(e.extend({"model":new t.Model({"message":o.itemCannotBeAccessed,"title":n.message})},s.call(this,"errorViewOptions"))))}}).listenTo(l,"before:destroy",function(){h&&h.empty()}).listenTo(l,"update:model",this._setupErrorHandling)},"_setupErrorHandling":function(e){this.model&&this.stopListening(this.model),this.model=e,this.listenTo(this.model,"error",function(){this.view.render()})}})}),csui.define("hbs!csui/behaviors/item.state/impl/item.state",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s=null!=(s=r(i,"message")||(null!=t?r(t,"message"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"message","hash":{},"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":11}}}):s))+"\r\n"}});return i.registerPartial("csui_behaviors_item.state_impl_item.state",n),n}),csui.define("csui/behaviors/item.state/item.state.view",["csui/lib/underscore","csui/lib/marionette","hbs!csui/behaviors/item.state/impl/item.state"],function(e,t,i){"use strict";return t.ItemView.extend({"className":"csui-item-state","template":i,"constructor":function(){t.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(this.model,"change:state",this.render).listenTo(this,"render",this._updateClasses)},"serializeData":function(){return e.extend(this.model.toJSON(),{"message":this.options.stateMessages[this.model.get("state")]})},"_updateClasses":function(){this.$el.removeClass("csui-state-loading csui-state-failed").addClass("csui-state-"+this.model.get("state"))}})}),csui.define("csui/behaviors/item.state/item.state.behavior",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/behaviors/item.state/item.state.view"],function(e,t,i,n){"use strict";function o(t){var i=this.getOption(t);return e.isFunction(i)?i.call(this.view):i}return i.Behavior.extend({"constructor":function(s,r){i.Behavior.prototype.constructor.apply(this,arguments),this.view=r;var l=o.call(this,"model")||r.model||r.options.model;this.listenTo(l,"request",this._fetchingCollectionStarted).listenTo(l,"sync",this._fetchingCollectionSucceeded).listenTo(l,"error",this._fetchingCollectionFailed),this.itemState=new t.Model({"state":l.fetching?"loading":l.error?"failed":"loaded"});var a=this.getOption("stateView");!e.isFunction(a)||a.prototype instanceof t.View||(a=a.call(r)),this.stateView=a||n;var c=r.getTemplate,u=this;r.getTemplate=function(){if(!l.fetched){if("string"!=typeof o.call(u,"el")&&!o.call(u,"region"))return!1}return c.apply(r,arguments)};var d;this.listenTo(r,"render",function(){if(!l.fetched){if(d&&d.empty(),!(d=o.call(this,"region"))){var t=o.call(this,"el")||r.el;"string"==typeof t&&(t=r.$(t)),d=new i.Region({"el":t})}d.show(new this.stateView(e.extend({"model":this.itemState,"stateMessages":o.call(this,"stateMessages")||{}},o.call(this,"stateViewOptions"))))}}).listenTo(r,"before:destroy",function(){d&&d.empty()})},"_fetchingCollectionStarted":function(){this.itemState.set("state","loading"),this.view.render(),this.view.blockWithoutIndicator&&this.view.blockWithoutIndicator()},"_fetchingCollectionSucceeded":function(e){this.itemState.set("state","loaded"),this.view.unblockActions&&this.view.unblockActions()},"_fetchingCollectionFailed":function(){this.itemState.set("state","failed"),this.view.unblockActions&&this.view.unblockActions()}})}),csui.define("csui/behaviors/limiting/limiting.behavior",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette"],function(e,t,i){"use strict";function n(t,i,n){if(null!=t){var o=t[i];return e.isFunction(o)?t[i].call(n):o}}return i.Behavior.extend({"defaults":{"limit":6,"filterByProperty":"name"},"collectionEvents":{"reset":"enableMoreLink"},"events":{"click .cs-more":"onMoreLinkClick","click .tile-expand":"onMoreLinkClick"},"ui":{"moreLink":".cs-more"},"constructor":function(e,t){i.Behavior.prototype.constructor.apply(this,arguments)},"initialize":function(e,i){if(!1!==i.options.limited){var n,o=i.collection;o||(o=this.getOption("completeCollection"))instanceof t.Collection||(n=this.getOption("completeCollectionOptions"),o.prototype instanceof t.Collection?o=new o(void 0,n):(o=o.call(i))instanceof t.Collection||(o=new o(void 0,n))),i.options.orderBy&&o.setOrder(i.options.orderBy,!1),this.listenTo(o,"add",this._addItem).listenTo(o,"remove",this._removeItem).listenTo(o,"reset",this.enableMoreLink).listenTo(o,"sync",function(e){e instanceof t.Collection&&this.synchronizeCollections()}),i.completeCollection=o;var s=t.Collection.extend(o?{"model":o.model}:{});i.collection=new s,this.synchronizeCollections(),this.listenTo(i,"change:filterValue",this.synchronizeCollections)}},"synchronizeCollections":function(){if(this.view.collection!==this.view.completeCollection){var t;if(this.view.options.filterValue&&this.view.options.filterValue.length>0){var i=this.view.options.filterValue.toLowerCase().split(" "),o=n(this.options,"filterByProperty",this.view);this.view.currentFilter={},this.view.currentFilter[o]=this.view.options.filterValue.toLowerCase(),t=this.view.completeCollection.filter(function(t){var n,s=t.get(o);return s&&(s=s.trim().toLowerCase(),n=e.reduce(i,function(e,t){return e&&s.indexOf(t)>=0},!0)),n})}else this.view.currentFilter=void 0,t=this.view.completeCollection.models;this.view.collection.reset(t)}},"enableMoreLink":function(){var e=n(this.options,"limit",this.view),t=this.view.completeCollection&&this.view.completeCollection.length>e;this.ui.moreLink instanceof Object&&this.ui.moreLink[t?"removeClass":"addClass"]("binf-hidden")},"onMoreLinkClick":function(e){e.preventDefault(),e.stopPropagation(),this.view.triggerMethod("expand")},"_addItem":function(e){var t=this.view.completeCollection.indexOf(e);this.view.collection.add(e,{"at":t})},"_removeItem":function(e){this.view.collection.remove(e)}})}),csui.define("hbs!csui/controls/tile/behaviors/impl/expanding.behavior",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-more tile-expand" title="'+e.escapeExpression((r=null!=(r=l(i,"expandIconTitle")||(null!=t?l(t,"expandIconTitle"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"expandIconTitle","hash":{},"loc":{"start":{"line":1,"column":40},"end":{"line":1,"column":59}}}):r))+'" aria-label="'+e.escapeExpression((r=null!=(r=l(i,"expandIconAria")||(null!=t?l(t,"expandIconAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"expandIconAria","hash":{},"loc":{"start":{"line":1,"column":73},"end":{"line":1,"column":91}}}):r))+'"\r\n     role="button">\r\n  '+(null!=(s=(l(i,"icon-v2")||t&&l(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"iconName":"csui_action_expand32"},"loc":{"start":{"line":3,"column":2},"end":{"line":3,"column":48}}}))?s:"")+"\r\n</div>\r\n"}});return i.registerPartial("csui_controls_tile_behaviors_impl_expanding.behavior",n),n}),csui.define("csui/controls/tile/behaviors/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/tile/behaviors/impl/nls/root/lang",{"expandIconTooltip":"Expand","expandIconAria":"Expand {0} widget"}),csui.define("csui/controls/tile/behaviors/expanding.behavior",["require","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","hbs!csui/controls/tile/behaviors/impl/expanding.behavior","i18n!csui/controls/tile/behaviors/impl/nls/lang","csui/controls/icons.v2"],function(e,t,i,n,o,s,r){"use strict";function l(e){var i=this.options||{},n=i[e];return t.isFunction(n)?i[e].call(this.view):n}return n.Behavior.extend({"defaults":{"expandButton":".tile-footer"},"triggers":{"click .cs-more":"expand","click .tile-header":"expand"},"constructor":function(e,i){n.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(i,"render",this._renderExpandButton),this.listenTo(i,"expand",this._expand);var o=t.bind(this._destroyExpandedView,this,!1),s=(t.bind(this._destroyExpandedView,this,!0),i.options&&i.options.context);this.listenTo(this,"before:destroy",o),s&&this.listenTo(s,"request",o).listenTo(s,"request:perspective",o)},"_renderExpandButton":function(){var e=l.call(this,"expandButton"),i=this.view.$(e),n=l.call(this,"expandIconTitle"),r=n||s.expandIconTooltip,a=l.call(this,"dialogTitle"),c=l.call(this,"expandIconAria"),u=c||t.str.sformat(s.expandIconAria,a),d={"expandIconTitle":r,"expandIconAria":u};i.html(o(d))},"_expand":function(){if(!(this.expanded||this.view&&this.view.errorExists)){this.expanded=!0;var n=this.getOption("expandedView"),o=n.prototype instanceof i.View?n:n.call(this.view),s=["csui/controls/dialog/dialog.view"],r=this;t.isString(o)&&s.push(o),e(s,function(e){t.isString(o)&&(o=arguments[1]);var i=l.call(r,"expandedViewOptions"),n=new o(i);r._dialog=new e({"iconLeft":l.call(r,"titleBarIcon"),"imageLeftUrl":l.call(r,"titleBarImageUrl"),"imageLeftClass":l.call(r,"titleBarImageClass"),"title":l.call(r,"dialogTitle"),"iconRight":l.call(r,"dialogTitleIconRight"),"className":"cs-expanded "+(l.call(r,"dialogClassName")||""),"largeSize":!0,"view":n}),r.listenTo(r._dialog,"hide",function(){r.triggerMethod("collapse")}).listenTo(r._dialog,"destroy",r._enableExpandingAgain),r._dialog.show()})}},"_enableExpandingAgain":function(){this.expanded=!1},"_destroyExpandedView":function(){this._dialog&&(this._dialog.destroy(),this._dialog=void 0)}})}),csui.define("hbs!csui/controls/tile/impl/tile",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="tile-type-icon">\r\n      <span class="icon title-icon '+e.escapeExpression((s=null!=(s=r(i,"icon")||(null!=t?r(t,"icon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":5,"column":35},"end":{"line":5,"column":43}}}):s))+'" aria-hidden="true"></span>\r\n    </div>\r\n'},"3":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"imageUrl"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":4},"end":{"line":12,"column":11}}}))?s:""},"4":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="tile-type-image '+e.escapeExpression((s=null!=(s=r(i,"imageClass")||(null!=t?r(t,"imageClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"imageClass","hash":{},"loc":{"start":{"line":9,"column":34},"end":{"line":9,"column":48}}}):s))+'">\r\n        <span class="tile-type-icon tile-type-icon-img"><img src="'+e.escapeExpression((s=null!=(s=r(i,"imageUrl")||(null!=t?r(t,"imageUrl"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"imageUrl","hash":{},"loc":{"start":{"line":10,"column":66},"end":{"line":10,"column":78}}}):s))+'" alt="" aria-hidden="true"></span>\r\n      </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tile-header">\r\n\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"icon"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":3,"column":2},"end":{"line":13,"column":9}}}))?s:"")+'\r\n  <div class="tile-title" >\r\n    <h2 class="csui-heading">'+e.escapeExpression((r=null!=(r=l(i,"title")||(null!=t?l(t,"title"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":16,"column":29},"end":{"line":16,"column":38}}}):r))+'</h2>\r\n  </div>\r\n\r\n  <div class="tile-controls" title="'+e.escapeExpression((r=null!=(r=l(i,"title")||(null!=t?l(t,"title"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":19,"column":36},"end":{"line":19,"column":45}}}):r))+'"></div>\r\n\r\n</div>\r\n\r\n<div class="tile-content"></div>\r\n\r\n<div class="tile-footer"></div>\r\n'}});return i.registerPartial("csui_controls_tile_impl_tile",n),n}),csui.define("css!csui/controls/tile/impl/tile",[],function(){}),csui.define("csui/controls/tile/tile.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","hbs!csui/controls/tile/impl/tile","css!csui/controls/list/impl/list","css!csui/controls/tile/impl/tile"],function(e,t,i,n,o,s){function r(t,n){var o;return n?o=n[t]:void 0===(o=r.call(this,t,this.options||{}))&&(o=this[t]),!e.isFunction(o)||o.prototype instanceof i.View?o:o.call(this)}var l=n.LayoutView.extend({"className":"cs-tile cs-list tile content-tile initialLoading","template":s,"regions":{"headerControls":".tile-controls","content":".tile-content","footer":".tile-footer"},"ui":{"footer":".tile-footer","headerControls":".tile-controls"},"constructor":function(){n.LayoutView.prototype.constructor.apply(this,arguments),this.listenTo(this,"render",this._renderContentView),this.listenToOnce(this.collection,"sync",function(){this.$el.removeClass("initialLoading")}),this.listenToOnce(this.collection,"error",e.bind(this.handleError,this)),this.listenToOnce(this.model,"error",e.bind(this.handleError,this))},"handleError":function(){this.errorExists=!0,this.ui.headerControls.addClass("binf-hidden"),this.ui.footer.addClass("binf-hidden")},"serializeData":function(){return e.reduce(["icon","imageUrl","imageClass","title"],function(e,t){return e[t]=r.call(this,t),e},{},this)},"_renderContentView":function(){var e=r.call(this,"contentView");if(!e)throw new n.Error({"name":"NoContentViewError","message":'A "contentView" must be specified'});var t=r.call(this,"contentViewOptions");this.contentView=new e(t),this.propagateEventsToViews(this.contentView),this.content.show(this.contentView)}});return e.extend(l.prototype,o),l}),csui.define("csui/controls/iconpreload/icon.preload.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/non-emptying.region/non-emptying.region","csui/lib/binf/js/binf"],function(e,t,i,n,o){"use strict";var s=e.config().iconClasses||{};s=Array.prototype.concat.apply([],t.values(s));var r=n.ItemView.extend({"id":"csui-icon-preload","template":!1,"onRender":function(){this._preloadIcons()},"constructor":function(e){n.ItemView.prototype.constructor.apply(this,arguments)},"_preloadIcons":function(){t.each(s,function(e){this.$el.append('<span class="csui-icon '+e+'" style="position:fixed;top:-100px;left:-100px;"></span>')},this)}});return r.ensureOnThePage=function(){if(!i("#csui-icon-preload").length){var e=new r,t=i.fn.binf_modal.getDefaultContainer();new o({"el":t}).show(e)}},r}),csui.define("csui/widgets/html.editor/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/html.editor/impl/nls/root/lang",{"ConfirmQuestionMessage":"Are you sure to leave this page?","ConfirmQuestionTitle":"Cancel edits?","CancelConfirmMessage":"Are you sure you want to cancel?","cancelTitle":"Cancel","cancelAria":"Cancel edit","saveTitle":"Save","saveAria":"Save contents","moreActionsAria":"{0} actions menu","PageDefaultContent":"your content goes here","noWikiPageFound":"Item cannot be accessed.","RestoreDialogMessage":"You have unsaved changes. Do you want to restore changes and continue editing?","RestoreDiaglogTitle":"Restore changes","reservedBy":"Reserved by {0}\n{1}","more":"more","properties":"Properties","permissions":"View permissions","Edit":"Edit","unreserve":"Unreserve","Continue":"Continue","Discard":"Discard","insertContentServerLink":"Insert Content Server Link","contentServerLink":"Content Server Link","versionDifferenceConfirmMessage":"Another user has saved an alternate version of this page. Do you still want to add a new version?","versionDifferenceConfirmTitle":"Intermediate version added","brokenLinkMessage":"Sorry, the item you requested could not be accessed. Either it does not exist, or you do not have permission to access it. If you were sent a link to this item, please contact the sender for assistance.","goToTooltip":"go to {0}","previewUnavailable":"Preview Unavailable","cannotFindObject":"Cannot find object"}),csui.define("csui/controls/rich.text.editor/impl/rich.text.util",["csui/lib/underscore","csui/lib/jquery","csui/utils/url","csui/models/node/node.model","csui/utils/base","csui/utils/commands","i18n!csui/widgets/html.editor/impl/nls/lang","csui/utils/log"],function(e,t,i,n,o,s,r,l){return{"isEmptyContentElement":function(e){return t.trim(t(e).text())},"checkDomain":function(e,t){var i=e.connector.connection.url,n=t.target.href;return e.options.isSameDomain=-1!==n.search(new RegExp(i.split("/api")[0],"i")),e.options.isSameDomain},"getUrl":function(e,n){var o=t.Deferred();if(n.target.href){var s,r=n.target.href.match(/^.*\/app\/(.+)$/i),l=new i(n.target.href).isAbsolute(),a=!l||this.checkDomain(e,n),c=n.target.href.match(/^.*\/wiki\/(.+)$/i),u=n.target.href.match(/^.*\/open\/(.+)$/i)||n.target.href.match(/^.*\/nodes\/(.+)$/i),d=n.target.href.match(/^.*objId\=(.+)$/i),h=this;!r&&a?c||d?h.renderLinks({"event":n,"connector":e.connector,"callingViewInstance":e}).done(function(){o.resolve()}):u?(s=u[1],this.updateLink(n,s),o.resolve()):o.resolve():o.resolve()}return o.promise()},"renderLinks":function(e){var i,n=t.Deferred(),o=e.event.target.href?t(e.event.target):t(e.event.target).parents("a"),s=(e.callingViewInstance,this);if(e.event.target=o[0],e.event.target.href.match(/^.*\/wiki\/[0-9]+\/(.+)$/i)||e.event.target.href.match(/^.*\/wiki\/[0-9]+$/i))e.event.stopPropagation(),e.event.preventDefault(),e.event.target.href.match(/^.*\/wiki\/[0-9]+\/(.+)$/i)?(i=e.event.target.href.match(/^.*\/wiki\/(.+)\/(.+)$/i),i=parseInt(i[1]),s._getWikiPageId(e,i,e.event.target.href).done(function(t,i){s.id=t,i?s.updateLink(e.event,i.id):l.info(r.brokenLinkMessage),n.resolve()})):e.event.target.href.match(/^.*\/wiki\/[0-9]+$/i)&&(i=e.event.target.href.match(/^.*\/wiki\/(.+)$/i),i=parseInt(i[1]),s.updateLink(e.event,i),n.resolve());else if(e.event.target.href.match(/^.*objId\=(.+)$/)){e.event.stopPropagation(),e.event.preventDefault();var a=e.event.target.href.match(/^.*objId\=(.+)$/)[1];-1!==a&&(i=this.getNewNodeModel({"attributes":{"id":parseInt(a)},"connector":e.connector}),s.updateLink(e.event,i.attributes.id)),n.resolve()}return n.promise()},"getNewNodeModel":function(e){return new n(e.attributes,{"connector":e.connector,"commands":s.getAllSignatures(),"fields":e.fields||{},"expand":e.expand||{}})},"updateLink":function(e,t){var i=/^.*\/(cs\.\w{3}|livelink\.\w{3}|llisapi\.\w{3}|llisapi|cs|livelink).*$/,n=!!t&&t,o=e.target.href.match(i),s=!!o&&o.length&&e.target.href.substring(0,e.target.href.indexOf("/".concat(o[1]))+"/".concat(o[1]).length);e.target.href=s&&s.length?s.concat("/app/nodes/",n):e.target.href},"_getWikiPageId":function(e,i,n){var o=decodeURIComponent(n.substring(n.lastIndexOf("/")+1,n.length)),s=t.Deferred(),r=e.connector,l={"url":this._getWikiContainerUrl(e,i),"type":"GET"};return r.makeAjaxCall(l).done(function(e){e.targetWikiPageNode=e.results.find(function(e){if(e.name===o)return e}),e.targetWikiPageNode&&e.targetWikiPageNode.id?s.resolve(e.targetWikiPageNode.id,e.targetWikiPageNode):s.resolve(-1)}).fail(function(e){s.reject(e)}),s.promise()},"_getWikiContainerUrl":function(e,t){return i.combine(e.connector.getConnectionUrl().getApiBase("v2"),"/wiki/"+t+"/wikipages")},"_getNicknameId":function(e,n){var o=t.Deferred(),s={"url":i.combine(e.connector.getConnectionUrl().getApiBase("v2"),"/wiki/nickname/"+n+"?actions=open"),"requestType":"nickname","view":this,"type":"GET"};return n&&e.connector.makeAjaxCall(s).done(function(e){o.resolve(e)}).fail(function(){o.reject()}),o.promise()}}}),csui.define("css!csui/widgets/html.editor/impl/html.editor",[],function(){}),csui.define("css!csui/lib/ckeditor/plugins/cssyntaxhighlight/styles/shCoreDefault",[],function(){}),csui.define("csui/controls/rich.text.editor/rich.text.editor",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/ckeditor/ckeditor","csui/controls/rich.text.editor/impl/rich.text.util","css!csui/widgets/html.editor/impl/html.editor","css!csui/lib/ckeditor/plugins/cssyntaxhighlight/styles/shCoreDefault"],function(e,t,i,n,o){"use strict";return{"getRichTextEditor":function(e){e=e||{},t.each(n.instances,function(e){e.destroy()});var i={"custcsuiimage_imageExtensions":"gif|jpeg|jpg|png","skin":"otskin","format_tags":"p;h1;h2;h3;h4;h5","allowedContent":!0,"disableAutoInline":!0,"autoHideToolbar":!1,"title":!1,"cs_syntaxhighlight_hideGutter":!0,"enterMode":n.ENTER_P,"extraPlugins":"filebrowser,find,panelbutton,colorbutton,font,selectall,smiley,dialog,sourcedialog,print,preview,justify,otsave,cancel,cssyntaxhighlight,cslink","toolbar":[["Undo","Redo","-","Font","FontSize","-","Styles","Format","TextColor"],"/",["Bold","Italic","Blockquote","-","Replace","-","NumberedList","BulletedList","-","Outdent","Indent","-","JustifyLeft","JustifyCenter","JustifyRight","-","Link","cslink","-","Image","Table","Sourcedialog"]]};if(e.externalPlugins){if(!t.isArray(e.externalPlugins))throw TypeError("externalPlugins must be array type");if(!e.externalPluginsBasePath||"string"!=typeof e.externalPluginsBasePath)throw Error("externalPluginsBasePath option missing or is not a string");"/"!==e.externalPluginsBasePath.charAt(e.externalPluginsBasePath.length-1)&&(e.externalPluginsBasePath+="/");var o=[];e.externalPlugins.map(function(t){n.plugins.addExternal(t,e.externalPluginsBasePath+t+"/","plugin.js"),o.push(t)}),delete e.externalPlugins,delete e.externalPluginsBasePath,o=o.join(),e.extraPlugins?(e.extraPlugins.length&&(o=e.externalPlugins+","+o),e.extraPlugins=o):i.extraPlugins+=","+o}return e=t.defaults(e,i,n.config),n.config=e,n.on("dialogDefinition",function(t){var i=t.data.name,n=t.data.definition;if(t.data.definition.dialog.getElement().addClass("csui-ckeditor-control-dialog"),t.data.definition.dialog.getElement().addClass("csui-ckeditor-dialog-"+i),"link"==i&&!e.linkShowUploadTab){n.getContents("upload").hidden=!0}}),n},"getRichTextEditorUtils":function(){return o},"isEmptyContent":function(e){return!!e&&e.getData().replace(/<\/div>|<div>|<\/p>|<p>|&nbsp;|<br \/>|\s/g,"")}}}),csui.define("hbs!csui/controls/selected.count/impl/selected.count",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-selected-counter-region">\r\n  <button type="button" class="binf-btn binf-btn-primary"\r\n          aria-label="'+e.escapeExpression((s=null!=(s=r(i,"selectedButtonAria")||(null!=t?r(t,"selectedButtonAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"selectedButtonAria","hash":{},"loc":{"start":{"line":3,"column":22},"end":{"line":3,"column":44}}}):s))+'" aria-haspopup="true"\r\n          title="'+e.escapeExpression((s=null!=(s=r(i,"selectedButtonTitle")||(null!=t?r(t,"selectedButtonTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"selectedButtonTitle","hash":{},"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":40}}}):s))+'"><span\r\n      class="csui-selected-counter-label">'+e.escapeExpression((s=null!=(s=r(i,"selectedLabel")||(null!=t?r(t,"selectedLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"selectedLabel","hash":{},"loc":{"start":{"line":5,"column":42},"end":{"line":5,"column":59}}}):s))+'</span><span\r\n      class="binf-badge binf-badge-light csui-selected-counter-value">'+e.escapeExpression((s=null!=(s=r(i,"selectedCount")||(null!=t?r(t,"selectedCount"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"selectedCount","hash":{},"loc":{"start":{"line":6,"column":70},"end":{"line":6,"column":87}}}):s))+'</span>\r\n  </button>\r\n</div>\r\n<div class="csui-dropmenu-container binf-hidden">\r\n  <span class="csui-selected-count-clearall binf-hidden"><span\r\n      class="csui-selected-count-clearall-label"\r\n      role="button" tabindex="0" aria-label="'+e.escapeExpression((s=null!=(s=r(i,"clearAllAria")||(null!=t?r(t,"clearAllAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"clearAllAria","hash":{},"loc":{"start":{"line":12,"column":45},"end":{"line":12,"column":61}}}):s))+'">'+e.escapeExpression((s=null!=(s=r(i,"clearAll")||(null!=t?r(t,"clearAll"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"clearAll","hash":{},"loc":{"start":{"line":12,"column":63},"end":{"line":12,"column":75}}}):s))+'</span></span>\r\n\r\n  <ul class="csui-selected-items-dropdown" role="menu"></ul>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_selected.count_impl_selected.count",n),n}),csui.define("hbs!csui/controls/selected.count/impl/selected.list.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="csui-selected-list-item-icon csui-type-icon"></span>\r\n<div class="csui-selected-list-item-name-wrapper">\r\n    <span class="csui-selected-list-item-name">'+e.escapeExpression((s=null!=(s=r(i,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":47},"end":{"line":3,"column":55}}}):s))+'</span>\r\n  <span class="csui-icon formfield_clear csui-deselected-icon" aria-label="'+e.escapeExpression((s=null!=(s=r(i,"clearItem")||(null!=t?r(t,"clearItem"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"clearItem","hash":{},"loc":{"start":{"line":4,"column":75},"end":{"line":4,"column":88}}}):s))+'"\r\n        title="'+e.escapeExpression((s=null!=(s=r(i,"clearItem")||(null!=t?r(t,"clearItem"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"clearItem","hash":{},"loc":{"start":{"line":5,"column":15},"end":{"line":5,"column":28}}}):s))+'">\r\n  </span>\r\n</div>'}});return i.registerPartial("csui_controls_selected.count_impl_selected.list.item",n),n}),csui.define("csui/controls/selected.count/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/selected.count/impl/nls/root/lang",{"clearAll":"Clear all","clearAllAria":"Clear all selections","selectedLabel":"Selected","selectedButtonTitle":"Selected {0}","selectedButtonAria":"{0} selected items","unselectAria":"Unselect {0} {1}","clearItem":"Clear item","dialogTitle":"Clear all","dialogTemplate":"Do you want to clear your selection?","parentName":"/{0}"}),csui.define("css!csui/controls/selected.count/impl/selected.count",[],function(){}),
csui.define("csui/controls/selected.count/selected.count.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/node-type.icon/node-type.icon.view","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/dialogs/modal.alert/modal.alert","csui/utils/base","hbs!csui/controls/selected.count/impl/selected.count","hbs!csui/controls/selected.count/impl/selected.list.item","i18n!csui/controls/selected.count/impl/nls/lang","css!csui/controls/selected.count/impl/selected.count"],function(e,t,i,n,o,s,r,l,a,c,u,d){"use strict";var h=n.ItemView.extend({"className":"csui-selected-item","template":u,"tagName":"li","events":{"keydown":"onKeyInView"},"modelEvents":{"change":"onModelChange"},"triggers":{"click .csui-deselected-icon":"remove:selected:item"},"templateHelpers":function(){return{"name":this.options.model.get("name"),"clearItem":d.clearItem}},"constructor":function(e){this.model=e.model,n.ItemView.prototype.constructor.apply(this,arguments)},"onRender":function(){this._nodeIconView=new o({"el":this.$(".csui-type-icon").get(0),"node":this.model,"size":"contain"}),this._nodeIconView.render(),this.$el.attr("tabindex","-1"),this.$el.attr("role","menuitem"),this.$el.attr("aria-label",e.str.sformat(d.unselectAria,this.model.get("name"),this._nodeIconView.$el.attr("aria-label")))},"onModelChange":function(){this.render()},"onKeyInView":function(e){this.trigger("keydown:item",e)}});return n.CompositeView.extend({"className":"csui-selected-count","template":c,"templateHelpers":function(){var t=this.collection&&this.collection.length;return{"selectedCount":t,"clearAll":d.clearAll,"clearAllAria":d.clearAllAria,"selectedLabel":d.selectedLabel,"selectedButtonTitle":e.str.sformat(d.selectedButtonTitle,t),"selectedButtonAria":e.str.sformat(d.selectedButtonAria,t)}},"childViewContainer":".csui-selected-items-dropdown","childView":h,"childEvents":{"remove:selected:item":"onRemoveSelectedItem","keydown:item":"onKeydownItem"},"ui":{"selectedCountButton":".csui-selected-counter-region button","selectedCountValue":".csui-selected-counter-region .csui-selected-counter-value","dropdownContainer":".csui-dropmenu-container","clearAll":".csui-selected-count-clearall","ClearAllButton":".csui-selected-count-clearall > span"},"events":{"click @ui.selectedCountButton":"onClickSelectedCount","click @ui.ClearAllButton":"onClickClearAll","mouseenter @ui.selectedCountButton":"onMouseEnterSelectedCounterView","mouseleave @ui.selectedCountButton":"onMouseLeaveSelectedCounterView","mouseenter @ui.dropdownContainer":"onMouseEnterSelectedCounterView","mouseleave @ui.dropdownContainer":"onMouseLeaveSelectedCounterView","mouseup @ui.clearAll":"onMouseUpClearAll","blur  @ui.selectedCountButton":"onBlurSelectedCountButton","blur @ui.dropdownContainer":"onBlurSelectedCounterView","keydown":"onKeydownSelectedCount","keyup":"onKeyupItem"},"behaviors":{"TabableRegion":{"behaviorClass":r},"PerfectScrolling":{"behaviorClass":s,"contentParent":".csui-selected-items-dropdown","suppressScrollX":!0,"scrollYMarginOffset":5}},"currentlyFocusedElement":function(){return this.ui.selectedCountButton},"constructor":function i(n){n=e.defaults(n,{"showOnlyOnSelection":!0}),this.collection=n.collection,i.__super__.constructor.apply(this,arguments),this.currentlyFocusedIndex=0,this.showClearAll=!1,this.selectedItemInFocus=!1,this.scrollableParent=n.scrollableParent,this.listenTo(this.collection,"reset remove add",function(){!this.isDestroyed&&this.onCollectionUpdate()}),this.selectedCount=this.collection.length,this.scrollableParent&&(this.windowResizeHandler=e.bind(this.setDropdownCss,this),t(window).on("resize",this.windowResizeHandler))},"onRender":function(){this.selectedCount?(this.ui.dropdownContainer.addClass("binf-hidden"),t(document).off("mouseup.csui.select.count")):this.options.showOnlyOnSelection&&this.$el.addClass("binf-hidden")},"onDestroy":function(){this.stopListening(this.collection,"reset remove add"),this.windowResizeHandler&&t(window).off("resize",this.windowResizeHandler)},"onClickClearAll":function(t){this.selectedItemInFocus=!0,l.confirmQuestion(e.str.sformat(d.dialogTemplate,d.dialogTitle),d.dialogTitle,{}).always(e.bind(function(e){e?this.collection.reset([]):(this.ui.ClearAllButton.trigger("focus"),this._moveTabindexToFocusedElement()),this.selectedItemInFocus=!1},this)),this.currentlyFocusedIndex=0},"onMouseUpClearAll":function(e){e.preventDefault(),e.stopPropagation(),this.ui.ClearAllButton.trigger("focus")},"isDDOpen":function(){return!this.ui.dropdownContainer[0].classList.contains("binf-hidden")&&!this.el.classList.contains("binf-hidden")},"_focusOnSelectedCountButton":function(){this.ui.selectedCountButton.trigger("focus"),this.selectedCountViewInFocus=!0},"onMouseEnterSelectedCounterView":function(){this.selectedCountViewInFocus=!0},"onMouseLeaveSelectedCounterView":function(){!1===this.selectedItemInFocus&&(this.selectedCountViewInFocus=!1)},"onClickSelectedCount":function(e){e.preventDefault(),e.stopPropagation();var t=this.$el.find(".binf-open>.binf-dropdown-toggle");t.length>0&&t.binf_dropdown("toggle"),this.ui.dropdownContainer.hasClass("binf-hidden")?this._showItemView():this._hideItemView()},"resetState":function(){var e=this.$el.find(".binf-open>.binf-dropdown-toggle");e.length>0&&e.binf_dropdown("toggle"),this._hideItemView()},"_showItemView":function(){this.selectedCountViewInFocus=!0,this.ui.dropdownContainer.removeClass("binf-hidden"),this.ui.selectedCountButton.addClass("binf-open"),this.ui.selectedCountButton.attr("aria-expanded","true"),this.selectedCount>4&&(this.showClearAll=!0,this.ui.clearAll.removeClass("binf-hidden")),this.scrollableParent&&this.setDropdownCss(),this.perfectScrollingEnabled||(this.triggerMethod("ensure:scrollbar"),this.perfectScrollingEnabled=!0),this.ui.clearAll.hasClass("binf-hidden")?this.ui.dropdownContainer.find(".csui-selected-item:first").trigger("focus"):this.ui.clearAll.find(".csui-selected-count-clearall-label").trigger("focus"),t(document).on("mouseup.csui.select.count",e.bind(this.onDocumentClick,this))},"onDocumentClick":function(e){this.$el[0]===e.target||this.$el.has(e.target).length||this.selectedItemInFocus||this._hideItemView()},"setDropdownCss":function(){var e,i,n,o=this.ui.dropdownContainer.find(".csui-selected-items-dropdown"),s=t(this.scrollableParent);if(s&&s.length>0){i=s.height(),n=parseInt(s.css("margin-top"))+parseInt(s.css("margin-bottom")),e=o.offset().top-s.offset().top;var r=Math.abs(i-n);o.css({"max-height":r-(24+e)+"px"}),this.trigger("dom:refresh")}},"_hideItemView":function(i){this.selectedCountViewInFocus=!1,e.isFunction(this.ui.dropdownContainer.addClass)&&this.ui.dropdownContainer.addClass("binf-hidden"),this.ui.selectedCountButton.removeClass("binf-open"),this.ui.selectedCountButton.attr("aria-expanded","false"),t(document).off("mouseup.csui.select.count")},"onRemoveSelectedItem":function(t){var i,n=t._index;this.selectedCountViewInFocus=!0,this.collection.remove(t.model),i=e.sortBy(this.children.toArray(),"cid"),n===this.selectedCount?i[n-1]&&i[n-1].$el.trigger("focus"):i[n]&&i[n].$el.trigger("focus")},"onCollectionUpdate":function(){this.selectedCount=this.collection.length,this.selectedCount&&!this.isDDOpen()?(this.options.showOnlyOnSelection&&this.$el.removeClass("binf-hidden"),e.isFunction(this.ui.dropdownContainer.addClass)&&this.ui.dropdownContainer.addClass("binf-hidden"),this.trigger("show:counter",!0)):this.selectedCount||(this.ui.selectedCountButton.removeClass("binf-open"),this.options.showOnlyOnSelection&&this.$el.addClass("binf-hidden"),t(document).off("mouseup.csui.select.count"),this.trigger("show:counter",!1)),this.ui.selectedCountValue.text(this.selectedCount),this.ui.selectedCountButton.attr("aria-label",e.str.sformat(d.selectedButtonAria,this.selectedCount)),this.ui.selectedCountButton.attr("title",e.str.sformat(d.selectedButtonTitle,this.selectedCount)),!this.showClearAll&&this.selectedCount>4?(this.showClearAll=!0,this.ui.clearAll.removeClass("binf-hidden")):this.selectedCount<=4&&this.showClearAll&&(this.showClearAll=!1,this.ui.clearAll.addClass("binf-hidden")),this.selectedCount>0&&this._moveTabindexToFocusedElement()},"_moveTabindexToFocusedElement":function(){this._focusableElements=a.findFocusables(this.el);for(var e=0;e<this._focusableElements.length;e++)this._focusableElements[e].setAttribute("tabindex","0")},"onBlurSelectedCountButton":function(e){this.selectedCountViewInFocus||this._hideItemView()},"onBlurSelectedCounterView":function(e){this.selectedCountViewInFocus||this._hideItemView()},"onKeydownSelectedCount":function(t){switch(t.keyCode){case 9:if(t.shiftKey&&!this.ui.dropdownContainer.hasClass("binf-hidden"))t.preventDefault(),t.stopPropagation(),this.ui.ClearAllButton.trigger("focus");else{var i=e.sortBy(this.children.toArray(),"cid");this.selectedCountViewInFocus=!0,this.ui.ClearAllButton.is(":focus")&&(i[this.currentlyFocusedIndex].$el.trigger("focus"),t.stopPropagation(),t.preventDefault())}break;case 13:this.ui.ClearAllButton.is(":focus")&&this.onClickClearAll(t);break;case 32:this.ui.selectedCountButton.is(":focus")&&(this.selectedCountViewInFocus=!0,this.onClickSelectedCount(t));break;case 46:this.ui.ClearAllButton.is(":focus")&&(this.selectedCountViewInFocus=!0,this.onClickClearAll(t));break;case 37:case 39:t.stopPropagation()}},"onKeydownItem":function(t,i){var n=e.sortBy(this.children.toArray(),"cid");switch(i.preventDefault(),i.keyCode){case 46:case 13:case 32:this.onRemoveSelectedItem(t),i.stopPropagation();break;case 40:this.selectedCountViewInFocus=!0,t._index!==this.selectedCount-1&&(n[t._index+1].$el.trigger("focus"),this.currentlyFocusedIndex=t._index+1),i.stopPropagation();break;case 38:this.selectedCountViewInFocus=!0,t._index>0&&(n[t._index-1].$el.trigger("focus"),this.currentlyFocusedIndex=t._index-1),i.stopPropagation();break;case 37:case 39:i.stopPropagation()}},"onKeyupItem":function(e){27===e.keyCode&&this.isDDOpen()&&(this.currentlyFocusedIndex=0,e.preventDefault(),e.stopPropagation(),this._hideItemView(),this._focusOnSelectedCountButton())}})}),csui.define("csui/lib/jquery.simulate",["module","csui/lib/jquery"],function(e,t){!function(e,t){"use strict";function i(e){return a.test(Object.prototype.toString.call(e))}function n(e){for(var t=0;t<window.frames.length;t+=1)if(window.frames[t]&&window.frames[t].document===e)return window.frames[t];return window}function o(t){var n,o,s=e(t);return i(s[0])?(o=s,n={"left":0,"top":0}):(o=e(s[0].ownerDocument||document),n=s.offset()),{"x":n.left+s.outerWidth()/2-o.scrollLeft(),"y":n.top+s.outerHeight()/2-o.scrollTop()}}function s(t){var n,o=e(t);return i(o[0])?(o,n={"left":0,"top":0}):(e(o[0].ownerDocument||document),n=o.offset()),{"x":n.left-document.scrollLeft(),"y":n.top-document.scrollTop()}}var r=/^key/,l=/^(?:mouse|contextmenu)|click/,a=/\[object (?:HTML)?Document\]/;e.fn.simulate=function(t,i){return this.each(function(){new e.simulate(this,t,i)})},e.simulate=function(t,i,n){var o=e.camelCase("simulate-"+i);this.target=t,this.options=n||{},this[o]?this[o]():this.simulateEvent(t,i,this.options)},e.extend(e.simulate,{"keyCode":{"BACKSPACE":8,"COMMA":188,"DELETE":46,"DOWN":40,"END":35,"ENTER":13,"ESCAPE":27,"HOME":36,"LEFT":37,"NUMPAD_ADD":107,"NUMPAD_DECIMAL":110,"NUMPAD_DIVIDE":111,"NUMPAD_ENTER":108,"NUMPAD_MULTIPLY":106,"NUMPAD_SUBTRACT":109,"PAGE_DOWN":34,"PAGE_UP":33,"PERIOD":190,"RIGHT":39,"SPACE":32,"TAB":9,"UP":38},"buttonCode":{"LEFT":0,"MIDDLE":1,"RIGHT":2}}),e.extend(e.simulate.prototype,{"simulateEvent":function(e,t,i){var n=this.createEvent(t,i);this.dispatchEvent(e,t,n,i)},"createEvent":function(e,t){return r.test(e)?this.keyEvent(e,t):l.test(e)?this.mouseEvent(e,t):void 0},"mouseEvent":function(t,o){var s,r,l,a,c=i(this.target)?this.target:this.target.ownerDocument||document;return o=e.extend({"bubbles":!0,"cancelable":"mousemove"!==t,"view":n(c),"detail":0,"screenX":0,"screenY":0,"clientX":1,"clientY":1,"ctrlKey":!1,"altKey":!1,"shiftKey":!1,"metaKey":!1,"button":0,"relatedTarget":void 0},o),c.createEvent?(s=c.createEvent("MouseEvents"),s.initMouseEvent(t,o.bubbles,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget||c.body.parentNode),0===s.pageX&&0===s.pageY&&Object.defineProperty&&(r=i(s.relatedTarget)?s.relatedTarget:s.relatedTarget.ownerDocument||document,l=r.documentElement,a=r.body,Object.defineProperty(s,"pageX",{"get":function(){return o.clientX+(l&&l.scrollLeft||a&&a.scrollLeft||0)-(l&&l.clientLeft||a&&a.clientLeft||0)}}),Object.defineProperty(s,"pageY",{"get":function(){return o.clientY+(l&&l.scrollTop||a&&a.scrollTop||0)-(l&&l.clientTop||a&&a.clientTop||0)}}))):c.createEventObject&&(s=c.createEventObject(),e.extend(s,o),s.button={"0":1,"1":4,"2":2}[s.button]||s.button),s},"keyEvent":function(t,o){var s,r;if(o=e.extend({"bubbles":!0,"cancelable":!0,"view":n(r),"ctrlKey":!1,"altKey":!1,"shiftKey":!1,"metaKey":!1,"keyCode":0,"charCode":void 0},o),r=i(this.target)?this.target:this.target.ownerDocument||document,r.createEvent)try{s=r.createEvent("KeyEvents"),s.initKeyEvent(t,o.bubbles,o.cancelable,o.view,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode)}catch(i){s=r.createEvent("Events"),s.initEvent(t,o.bubbles,o.cancelable),e.extend(s,{"view":o.view,"ctrlKey":o.ctrlKey,"altKey":o.altKey,"shiftKey":o.shiftKey,"metaKey":o.metaKey,"keyCode":o.keyCode,"charCode":o.charCode})}else r.createEventObject&&(s=r.createEventObject(),e.extend(s,o));return(/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())||"[object Opera]"==={}.toString.call(window.opera))&&(s.keyCode=o.charCode>0?o.charCode:o.keyCode,s.charCode=void 0),s},"dispatchEvent":function(t,i,n,o){!0===o.jQueryTrigger?e(t).trigger(e.extend({},n,o,{"type":i})):t.dispatchEvent?t.dispatchEvent(n):t.fireEvent&&t.fireEvent("on"+i,n)},"simulateFocus":function(){function t(){n=!0}var i,n=!1,o=e(this.target);o.on("focus",t),o.first().trigger("focus"),n||(i=e.Event("focusin"),i.preventDefault(),o.trigger(i),o.triggerHandler("focus")),o.unbind("focus",t)},"simulateBlur":function(){function t(){n=!0}var i,n=!1,o=e(this.target);o.on("blur",t),o.first().trigger("blur"),setTimeout(function(){o[0].ownerDocument.activeElement===o[0]&&e(o[0].ownerDocument.body).trigger("focus"),n||(i=e.Event("focusout"),i.preventDefault(),o.trigger(i),o.triggerHandler("blur")),o.off("blur",t)},1)}}),e.extend(e.simulate.prototype,{"simulateDrag":function(){var t=0,i=this.target,n=this.options,r="corner"===n.handle?s(i):o(i),l=Math.floor(r.x),a=Math.floor(r.y),c={"clientX":l,"clientY":a},u=n.dx||(void 0!==n.x?n.x-l:0),d=n.dy||(void 0!==n.y?n.y-a:0),h=n.moves||3;for(this.simulateEvent(i,"mousedown",c);t<h;t++)l+=u/h,a+=d/h,c={"clientX":Math.round(l),"clientY":Math.round(a)},this.simulateEvent(i.ownerDocument,"mousemove",c);e.contains(document,i)?(this.simulateEvent(i,"mouseup",c),this.simulateEvent(i,"click",c)):this.simulateEvent(document,"mouseup",c)}})}(t)}),csui.define("csui/lib/othelp",[],function(){var e=e||function(e,t){var i={},n=i.lib={},o=function(){},s=n.Base={"extend":function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},"create":function(){var e=this.extend();return e.init.apply(e,arguments),e},"init":function(){},"mixIn":function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},"clone":function(){return this.init.prototype.extend(this)}},r=n.WordArray=s.extend({"init":function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},"toString":function(e){return(e||a).stringify(this)},"concat":function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var o=0;o<e;o++)t[n+o>>>2]|=(i[o>>>2]>>>24-o%4*8&255)<<24-(n+o)%4*8;else if(65535<i.length)for(o=0;o<e;o+=4)t[n+o>>>2]=i[o>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},"clamp":function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},"clone":function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},"random":function(t){for(var i=[],n=0;n<t;n+=4)i.push(4294967296*e.random()|0);return new r.init(i,t)}}),l=i.enc={},a=l.Hex={"stringify":function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},"parse":function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new r.init(i,t/2)}},c=l.Latin1={"stringify":function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},"parse":function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new r.init(i,t)}},u=l.Utf8={"stringify":function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},"parse":function(e){return c.parse(unescape(encodeURIComponent(e)))}},d=n.BufferedBlockAlgorithm=s.extend({"reset":function(){this._data=new r.init,this._nDataBytes=0},"_append":function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},"_process":function(t){var i=this._data,n=i.words,o=i.sigBytes,s=this.blockSize,l=o/(4*s),l=t?e.ceil(l):e.max((0|l)-this._minBufferSize,0);if(t=l*s,o=e.min(4*t,o),t){for(var a=0;a<t;a+=s)this._doProcessBlock(n,a);a=n.splice(0,t),i.sigBytes-=o}return new r.init(a,o)},"clone":function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},"_minBufferSize":0});n.Hasher=d.extend({"cfg":s.extend(),"init":function(e){this.cfg=this.cfg.extend(e),this.reset()},"reset":function(){d.reset.call(this),this._doReset()},"update":function(e){return this._append(e),this._process(),this},"finalize":function(e){return e&&this._append(e),this._doFinalize()},"blockSize":16,"_createHelper":function(e){return function(t,i){return new e.init(i).finalize(t)}},"_createHmacHelper":function(e){return function(t,i){return new h.HMAC.init(e,i).finalize(t)}}});var h=i.algo={};return i}(Math);return function(){var t=e,i=t.lib.WordArray;t.enc.Base64={"stringify":function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp(),e=[];for(var o=0;o<i;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,r=0;4>r&&o+.75*r<i;r++)e.push(n.charAt(s>>>6*(3-r)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},"parse":function(e){var t=e.length,n=this._map,o=n.charAt(64);o&&-1!=(o=e.indexOf(o))&&(t=o);for(var o=[],s=0,r=0;r<t;r++)if(r%4){var l=n.indexOf(e.charAt(r-1))<<r%4*2,a=n.indexOf(e.charAt(r))>>>6-r%4*2;o[s>>>2]|=(l|a)<<24-s%4*8,s++}return i.create(o,s)},"_map":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function i(e,t,i,n,o,s,r){return((e=e+(t&i|~t&n)+o+r)<<s|e>>>32-s)+t}function n(e,t,i,n,o,s,r){return((e=e+(t&n|i&~n)+o+r)<<s|e>>>32-s)+t}function o(e,t,i,n,o,s,r){return((e=e+(t^i^n)+o+r)<<s|e>>>32-s)+t}function s(e,t,i,n,o,s,r){return((e=e+(i^(t|~n))+o+r)<<s|e>>>32-s)+t}for(var r=e,l=r.lib,a=l.WordArray,c=l.Hasher,l=r.algo,u=[],d=0;64>d;d++)u[d]=4294967296*t.abs(t.sin(d+1))|0;l=l.MD5=c.extend({"_doReset":function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},"_doProcessBlock":function(e,t){for(var r=0;16>r;r++){var l=t+r,a=e[l];e[l]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var r=this._hash.words,l=e[t+0],a=e[t+1],c=e[t+2],d=e[t+3],h=e[t+4],p=e[t+5],m=e[t+6],f=e[t+7],g=e[t+8],v=e[t+9],b=e[t+10],w=e[t+11],y=e[t+12],x=e[t+13],C=e[t+14],_=e[t+15],k=r[0],T=r[1],I=r[2],S=r[3],k=i(k,T,I,S,l,7,u[0]),S=i(S,k,T,I,a,12,u[1]),I=i(I,S,k,T,c,17,u[2]),T=i(T,I,S,k,d,22,u[3]),k=i(k,T,I,S,h,7,u[4]),S=i(S,k,T,I,p,12,u[5]),I=i(I,S,k,T,m,17,u[6]),T=i(T,I,S,k,f,22,u[7]),k=i(k,T,I,S,g,7,u[8]),S=i(S,k,T,I,v,12,u[9]),I=i(I,S,k,T,b,17,u[10]),T=i(T,I,S,k,w,22,u[11]),k=i(k,T,I,S,y,7,u[12]),S=i(S,k,T,I,x,12,u[13]),I=i(I,S,k,T,C,17,u[14]),T=i(T,I,S,k,_,22,u[15]),k=n(k,T,I,S,a,5,u[16]),S=n(S,k,T,I,m,9,u[17]),I=n(I,S,k,T,w,14,u[18]),T=n(T,I,S,k,l,20,u[19]),k=n(k,T,I,S,p,5,u[20]),S=n(S,k,T,I,b,9,u[21]),I=n(I,S,k,T,_,14,u[22]),T=n(T,I,S,k,h,20,u[23]),k=n(k,T,I,S,v,5,u[24]),S=n(S,k,T,I,C,9,u[25]),I=n(I,S,k,T,d,14,u[26]),T=n(T,I,S,k,g,20,u[27]),k=n(k,T,I,S,x,5,u[28]),S=n(S,k,T,I,c,9,u[29]),I=n(I,S,k,T,f,14,u[30]),T=n(T,I,S,k,y,20,u[31]),k=o(k,T,I,S,p,4,u[32]),S=o(S,k,T,I,g,11,u[33]),I=o(I,S,k,T,w,16,u[34]),T=o(T,I,S,k,C,23,u[35]),k=o(k,T,I,S,a,4,u[36]),S=o(S,k,T,I,h,11,u[37]),I=o(I,S,k,T,f,16,u[38]),T=o(T,I,S,k,b,23,u[39]),k=o(k,T,I,S,x,4,u[40]),S=o(S,k,T,I,l,11,u[41]),I=o(I,S,k,T,d,16,u[42]),T=o(T,I,S,k,m,23,u[43]),k=o(k,T,I,S,v,4,u[44]),S=o(S,k,T,I,y,11,u[45]),I=o(I,S,k,T,_,16,u[46]),T=o(T,I,S,k,c,23,u[47]),k=s(k,T,I,S,l,6,u[48]),S=s(S,k,T,I,f,10,u[49]),I=s(I,S,k,T,C,15,u[50]),T=s(T,I,S,k,p,21,u[51]),k=s(k,T,I,S,y,6,u[52]),S=s(S,k,T,I,d,10,u[53]),I=s(I,S,k,T,b,15,u[54]),T=s(T,I,S,k,a,21,u[55]),k=s(k,T,I,S,g,6,u[56]),S=s(S,k,T,I,_,10,u[57]),I=s(I,S,k,T,m,15,u[58]),T=s(T,I,S,k,x,21,u[59]),k=s(k,T,I,S,h,6,u[60]),S=s(S,k,T,I,w,10,u[61]),I=s(I,S,k,T,c,15,u[62]),T=s(T,I,S,k,v,21,u[63]);r[0]=r[0]+k|0,r[1]=r[1]+T|0,r[2]=r[2]+I|0,r[3]=r[3]+S|0},"_doFinalize":function(){var e=this._data,i=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;i[o>>>5]|=128<<24-o%32;var s=t.floor(n/4294967296);for(i[15+(o+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),i[14+(o+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(i.length+1),this._process(),e=this._hash,i=e.words,n=0;4>n;n++)o=i[n],i[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return e},"clone":function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),r.MD5=c._createHelper(l),r.HmacMD5=c._createHmacHelper(l)}(Math),function(){var t=e,i=t.lib,n=i.Base,o=i.WordArray,i=t.algo,s=i.EvpKDF=n.extend({"cfg":n.extend({"keySize":4,"hasher":i.MD5,"iterations":1}),"init":function(e){this.cfg=this.cfg.extend(e)},"compute":function(e,t){for(var i=this.cfg,n=i.hasher.create(),s=o.create(),r=s.words,l=i.keySize,i=i.iterations;r.length<l;){a&&n.update(a);var a=n.update(e).finalize(t);n.reset();for(var c=1;c<i;c++)a=n.finalize(a),n.reset();s.concat(a)}return s.sigBytes=4*l,s}});t.EvpKDF=function(e,t,i){return s.create(i).compute(e,t)}}(),e.lib.Cipher||function(t){var i=e,n=i.lib,o=n.Base,s=n.WordArray,r=n.BufferedBlockAlgorithm,l=i.enc.Base64,a=i.algo.EvpKDF,c=n.Cipher=r.extend({"cfg":o.extend(),"createEncryptor":function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},"createDecryptor":function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},"init":function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},"reset":function(){r.reset.call(this),this._doReset()},"process":function(e){return this._append(e),this._process()},"finalize":function(e){return e&&this._append(e),this._doFinalize()},"keySize":4,"ivSize":4,"_ENC_XFORM_MODE":1,"_DEC_XFORM_MODE":2,"_createHelper":function(e){return{"encrypt":function(t,i,n){return("string"==typeof i?f:m).encrypt(e,t,i,n)},"decrypt":function(t,i,n){return("string"==typeof i?f:m).decrypt(e,t,i,n)}}}});n.StreamCipher=c.extend({"_doFinalize":function(){return this._process(!0)},"blockSize":1});var u=i.mode={},d=function(e,t,i){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var o=0;o<i;o++)e[t+o]^=n[o]},h=(n.BlockCipherMode=o.extend({"createEncryptor":function(e,t){return this.Encryptor.create(e,t)},"createDecryptor":function(e,t){return this.Decryptor.create(e,t)},"init":function(e,t){this._cipher=e,this._iv=t}})).extend();h.Encryptor=h.extend({"processBlock":function(e,t){var i=this._cipher,n=i.blockSize;d.call(this,e,t,n),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),h.Decryptor=h.extend({"processBlock":function(e,t){var i=this._cipher,n=i.blockSize,o=e.slice(t,t+n);i.decryptBlock(e,t),d.call(this,e,t,n),this._prevBlock=o}}),u=u.CBC=h,h=(i.pad={}).Pkcs7={"pad":function(e,t){for(var i=4*t,i=i-e.sigBytes%i,n=i<<24|i<<16|i<<8|i,o=[],r=0;r<i;r+=4)o.push(n);i=s.create(o,i),e.concat(i)},"unpad":function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.BlockCipher=c.extend({"cfg":c.cfg.extend({"mode":u,"padding":h}),"reset":function(){c.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=e.createEncryptor;else i=e.createDecryptor,this._minBufferSize=1;this._mode=i.call(e,this,t&&t.words)},"_doProcessBlock":function(e,t){this._mode.processBlock(e,t)},"_doFinalize":function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},"blockSize":4});var p=n.CipherParams=o.extend({"init":function(e){this.mixIn(e)},"toString":function(e){return(e||this.formatter).stringify(this)}}),u=(i.format={}).OpenSSL={"stringify":function(e){var t=e.ciphertext;return e=e.salt,(e?s.create([1398893684,1701076831]).concat(e).concat(t):t).toString(l)},"parse":function(e){e=l.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var i=s.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return p.create({"ciphertext":e,"salt":i})}},m=n.SerializableCipher=o.extend({"cfg":o.extend({"format":u}),"encrypt":function(e,t,i,n){n=this.cfg.extend(n);var o=e.createEncryptor(i,n);return t=o.finalize(t),o=o.cfg,p.create({"ciphertext":t,"key":i,"iv":o.iv,"algorithm":e,"mode":o.mode,"padding":o.padding,"blockSize":e.blockSize,"formatter":n.format})},"decrypt":function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},"_parse":function(e,t){return"string"==typeof e?t.parse(e,this):e}}),i=(i.kdf={}).OpenSSL={"execute":function(e,t,i,n){return n||(n=s.random(8)),e=a.create({"keySize":t+i}).compute(e,n),i=s.create(e.words.slice(t),4*i),e.sigBytes=4*t,p.create({"key":e,"iv":i,"salt":n})}},f=n.PasswordBasedCipher=m.extend({"cfg":m.cfg.extend({"kdf":i}),"encrypt":function(e,t,i,n){return n=this.cfg.extend(n),i=n.kdf.execute(i,e.keySize,e.ivSize),n.iv=i.iv,e=m.encrypt.call(this,e,t,i.key,n),e.mixIn(i),e},"decrypt":function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),i=n.kdf.execute(i,e.keySize,e.ivSize,t.salt),n.iv=i.iv,m.decrypt.call(this,e,t,i.key,n)}})}(),function(){function t(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function i(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}var n=e,o=n.lib,s=o.WordArray,o=o.BlockCipher,r=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{"0":8421888,"268435456":32768,"536870912":8421378,"805306368":2,"1073741824":512,"1342177280":8421890,"1610612736":8389122,"1879048192":8388608,"2147483648":514,"2415919104":8389120,"2684354560":33280,"2952790016":8421376,"3221225472":32770,"3489660928":8388610,"3758096384":0,"4026531840":33282,"134217728":0,"402653184":8421890,"671088640":33282,"939524096":32768,"1207959552":8421888,"1476395008":512,"1744830464":8421378,"2013265920":2,"2281701376":8389120,"2550136832":33280,"2818572288":8421376,"3087007744":8389122,"3355443200":8388610,"3623878656":32770,"3892314112":514,"4160749568":8388608,"1":32768,"268435457":2,"536870913":8421888,"805306369":8388608,"1073741825":8421378,"1342177281":33280,"1610612737":512,"1879048193":8389122,"2147483649":8421890,"2415919105":8421376,"2684354561":8388610,"2952790017":33282,"3221225473":514,"3489660929":8389120,"3758096385":32770,"4026531841":0,"134217729":8421890,"402653185":8421376,"671088641":8388608,"939524097":512,"1207959553":32768,"1476395009":8388610,"1744830465":2,"2013265921":33282,"2281701377":32770,"2550136833":8389122,"2818572289":514,"3087007745":8421888,"3355443201":8389120,"3623878657":0,"3892314113":33280,"4160749569":8421378},{"0":1074282512,"16777216":16384,"33554432":524288,"50331648":1074266128,"67108864":1073741840,"83886080":1074282496,"100663296":1073758208,"117440512":16,"134217728":540672,"150994944":1073758224,"167772160":1073741824,"184549376":540688,"201326592":524304,"218103808":0,"234881024":16400,"251658240":1074266112,"8388608":1073758208,"25165824":540688,"41943040":16,"58720256":1073758224,"75497472":1074282512,"92274688":1073741824,"109051904":524288,"125829120":1074266128,"142606336":524304,"159383552":0,"176160768":16384,"192937984":1074266112,"209715200":1073741840,"226492416":540672,"243269632":1074282496,"260046848":16400,"268435456":0,"285212672":1074266128,"301989888":1073758224,"318767104":1074282496,"335544320":1074266112,"352321536":16,"369098752":540688,"385875968":16384,"402653184":16400,"419430400":524288,"436207616":524304,"452984832":1073741840,"469762048":540672,"486539264":1073758208,"503316480":1073741824,"520093696":1074282512,"276824064":540688,"293601280":524288,"310378496":1074266112,"327155712":16384,"343932928":1073758208,"360710144":1074282512,"377487360":16,"394264576":1073741824,"411041792":1074282496,"427819008":1073741840,"444596224":1073758224,"461373440":524304,"478150656":0,"494927872":16400,"511705088":1074266128,"528482304":540672},{"0":260,"1048576":0,"2097152":67109120,"3145728":65796,"4194304":65540,"5242880":67108868,"6291456":67174660,"7340032":67174400,"8388608":67108864,"9437184":67174656,"10485760":65792,"11534336":67174404,"12582912":67109124,"13631488":65536,"14680064":4,"15728640":256,"524288":67174656,"1572864":67174404,"2621440":0,"3670016":67109120,"4718592":67108868,"5767168":65536,"6815744":65540,"7864320":260,"8912896":4,"9961472":256,"11010048":67174400,"12058624":65796,"13107200":65792,"14155776":67109124,"15204352":67174660,"16252928":67108864,"16777216":67174656,"17825792":65540,"18874368":65536,"19922944":67109120,"20971520":256,"22020096":67174660,"23068672":67108868,"24117248":0,"25165824":67109124,"26214400":67108864,"27262976":4,"28311552":65792,"29360128":67174400,"30408704":260,"31457280":65796,"32505856":67174404,"17301504":67108864,"18350080":260,"19398656":67174656,"20447232":0,"21495808":65540,"22544384":67109120,"23592960":256,"24641536":67174404,"25690112":65536,"26738688":67174660,"27787264":65796,"28835840":67108868,"29884416":67109124,"30932992":67174400,"31981568":4,"33030144":65792},{"0":2151682048,"65536":2147487808,"131072":4198464,"196608":2151677952,"262144":0,"327680":4198400,"393216":2147483712,"458752":4194368,"524288":2147483648,"589824":4194304,"655360":64,"720896":2147487744,"786432":2151678016,"851968":4160,"917504":4096,"983040":2151682112,"32768":2147487808,"98304":64,"163840":2151678016,"229376":2147487744,"294912":4198400,"360448":2151682112,"425984":0,"491520":2151677952,"557056":4096,"622592":2151682048,"688128":4194304,"753664":4160,"819200":2147483648,"884736":4194368,"950272":4198464,"1015808":2147483712,"1048576":4194368,"1114112":4198400,"1179648":2147483712,"1245184":0,"1310720":4160,"1376256":2151678016,"1441792":2151682048,"1507328":2147487808,"1572864":2151682112,"1638400":2147483648,"1703936":2151677952,"1769472":4198464,"1835008":2147487744,"1900544":4194304,"1966080":64,"2031616":4096,"1081344":2151677952,"1146880":2151682112,"1212416":0,"1277952":4198400,"1343488":4194368,"1409024":2147483648,"1474560":2147487808,"1540096":64,"1605632":2147483712,"1671168":4096,"1736704":2147487744,"1802240":2151678016,"1867776":4160,"1933312":2151682048,"1998848":4194304,"2064384":4198464},{"0":128,"4096":17039360,"8192":262144,"12288":536870912,"16384":537133184,"20480":16777344,"24576":553648256,"28672":262272,"32768":16777216,"36864":537133056,"40960":536871040,"45056":553910400,"49152":553910272,"53248":0,
"57344":17039488,"61440":553648128,"2048":17039488,"6144":553648256,"10240":128,"14336":17039360,"18432":262144,"22528":537133184,"26624":553910272,"30720":536870912,"34816":537133056,"38912":0,"43008":553910400,"47104":16777344,"51200":536871040,"55296":553648128,"59392":16777216,"63488":262272,"65536":262144,"69632":128,"73728":536870912,"77824":553648256,"81920":16777344,"86016":553910272,"90112":537133184,"94208":16777216,"98304":553910400,"102400":553648128,"106496":17039360,"110592":537133056,"114688":262272,"118784":536871040,"122880":0,"126976":17039488,"67584":553648256,"71680":16777216,"75776":17039360,"79872":537133184,"83968":536870912,"88064":17039488,"92160":128,"96256":553910272,"100352":262272,"104448":553910400,"108544":0,"112640":553648128,"116736":16777344,"120832":262144,"124928":537133056,"129024":536871040},{"0":268435464,"256":8192,"512":270532608,"768":270540808,"1024":268443648,"1280":2097152,"1536":2097160,"1792":268435456,"2048":0,"2304":268443656,"2560":2105344,"2816":8,"3072":270532616,"3328":2105352,"3584":8200,"3840":270540800,"128":270532608,"384":270540808,"640":8,"896":2097152,"1152":2105352,"1408":268435464,"1664":268443648,"1920":8200,"2176":2097160,"2432":8192,"2688":268443656,"2944":270532616,"3200":0,"3456":270540800,"3712":2105344,"3968":268435456,"4096":268443648,"4352":270532616,"4608":270540808,"4864":8200,"5120":2097152,"5376":268435456,"5632":268435464,"5888":2105344,"6144":2105352,"6400":0,"6656":8,"6912":270532608,"7168":8192,"7424":268443656,"7680":270540800,"7936":2097160,"4224":8,"4480":2105344,"4736":2097152,"4992":268435464,"5248":268443648,"5504":8200,"5760":270540808,"6016":270532608,"6272":270540800,"6528":270532616,"6784":8192,"7040":2105352,"7296":2097160,"7552":0,"7808":268435456,"8064":268443656},{"0":1048576,"16":33555457,"32":1024,"48":1049601,"64":34604033,"80":0,"96":1,"112":34603009,"128":33555456,"144":1048577,"160":33554433,"176":34604032,"192":34603008,"208":1025,"224":1049600,"240":33554432,"8":34603009,"24":0,"40":33555457,"56":34604032,"72":1048576,"88":33554433,"104":33554432,"120":1025,"136":1049601,"152":33555456,"168":34603008,"184":1048577,"200":1024,"216":34604033,"232":1,"248":1049600,"256":33554432,"272":1048576,"288":33555457,"304":34603009,"320":1048577,"336":33555456,"352":34604032,"368":1049601,"384":1025,"400":34604033,"416":1049600,"432":1,"448":0,"464":34603008,"480":33554433,"496":1024,"264":1049600,"280":33555457,"296":34603009,"312":1,"328":33554432,"344":1048576,"360":1025,"376":34604032,"392":33554433,"408":34603008,"424":0,"440":34604033,"456":1049601,"472":1024,"488":33555456,"504":1048577},{"0":134219808,"1":131072,"2":134217728,"3":32,"4":131104,"5":134350880,"6":134350848,"7":2048,"8":134348800,"9":134219776,"10":133120,"11":134348832,"12":2080,"13":0,"14":134217760,"15":133152,"2147483648":2048,"2147483649":134350880,"2147483650":134219808,"2147483651":134217728,"2147483652":134348800,"2147483653":133120,"2147483654":133152,"2147483655":32,"2147483656":134217760,"2147483657":2080,"2147483658":131104,"2147483659":134350848,"2147483660":0,"2147483661":134348832,"2147483662":134219776,"2147483663":131072,"16":133152,"17":134350848,"18":32,"19":2048,"20":134219776,"21":134217760,"22":134348832,"23":131072,"24":0,"25":131104,"26":134348800,"27":134219808,"28":134350880,"29":133120,"30":2080,"31":134217728,"2147483664":131072,"2147483665":2048,"2147483666":134348832,"2147483667":133152,"2147483668":32,"2147483669":134348800,"2147483670":134217728,"2147483671":134219808,"2147483672":134350880,"2147483673":134217760,"2147483674":134219776,"2147483675":0,"2147483676":133120,"2147483677":2080,"2147483678":131104,"2147483679":134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=r.DES=o.extend({"_doReset":function(){for(var e=this._key.words,t=[],i=0;56>i;i++){var n=l[i]-1;t[i]=e[n>>>5]>>>31-n%32&1}for(e=this._subKeys=[],n=0;16>n;n++){for(var o=e[n]=[],s=c[n],i=0;24>i;i++)o[i/6|0]|=t[(a[i]-1+s)%28]<<31-i%6,o[4+(i/6|0)]|=t[28+(a[i+24]-1+s)%28]<<31-i%6;for(o[0]=o[0]<<1|o[0]>>>31,i=1;7>i;i++)o[i]>>>=4*(i-1)+3;o[7]=o[7]<<5|o[7]>>>27}for(t=this._invSubKeys=[],i=0;16>i;i++)t[i]=e[15-i]},"encryptBlock":function(e,t){this._doCryptBlock(e,t,this._subKeys)},"decryptBlock":function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},"_doCryptBlock":function(e,n,o){this._lBlock=e[n],this._rBlock=e[n+1],t.call(this,4,252645135),t.call(this,16,65535),i.call(this,2,858993459),i.call(this,8,16711935),t.call(this,1,1431655765);for(var s=0;16>s;s++){for(var r=o[s],l=this._lBlock,a=this._rBlock,c=0,h=0;8>h;h++)c|=u[h][((a^r[h])&d[h])>>>0];this._lBlock=a,this._rBlock=l^c}o=this._lBlock,this._lBlock=this._rBlock,this._rBlock=o,t.call(this,1,1431655765),i.call(this,8,16711935),i.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),e[n]=this._lBlock,e[n+1]=this._rBlock},"keySize":2,"ivSize":2,"blockSize":2});n.DES=o._createHelper(h),r=r.TripleDES=o.extend({"_doReset":function(){var e=this._key.words;this._des1=h.createEncryptor(s.create(e.slice(0,2))),this._des2=h.createEncryptor(s.create(e.slice(2,4))),this._des3=h.createEncryptor(s.create(e.slice(4,6)))},"encryptBlock":function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},"decryptBlock":function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},"keySize":6,"ivSize":2,"blockSize":2}),n.TripleDES=o._createHelper(r)}(),function(t){var i="product",n="version",o="http://docsapi.opentext.com/mapperpi",s={"tboolean":"touch bookmarks toc bookmarkEntries sectionNumbers caseSensitive highContrast".split(" "),"nameValuePair":{"find":["anyWord","allWords","exactWord"],"search":["allModules","document","section","page"],"sort":["match","divisions"]},"tstring":"query"};Array.isArray||(Array.isArray=function(e){return e instanceof Array}),void 0===String.prototype.endsWith&&(String.prototype.endsWith=function(e){return this.lastIndexOf(e)==this.length-e.length}),"undefined"==typeof debug&&(debug=!1),"undefined"==typeof trace&&(trace=!1),t&&(i=t.product||i,n=t.version||n,o=t.urlRoot||o);try{console||(console={"error":function(){},"log":function(){},"warn":function(){}})}catch(e){console={"error":function(){},"log":function(){},"warn":function(){}}}return{"buildHelpUrl":function(e,t,i){if(!e||!t)return console.error("Please specify 'locale' and 'context'"),"";if("string"==typeof e&&0>e.indexOf(",")&&"string"==typeof t)return this._.generateSixParam(e,t,i);var n=null,n="string"==typeof e&&-1<e.indexOf(",")?e.split(","):"string"==typeof e?[e]:e;return this._.generateComplexParam(n,t,i)},"optionConstants":s,"_":{"generateComplexParam":function(e,t,i){var n,r,l,a,c,u,d,h,p,m,f,g,v=[],b=[],w=null,w=!1,y=[],x=[];if(!e||!t)return console.error("Missing parameter!, Please specify 'locale', and 'context', not:",e,t,i),"";if("object"!=typeof e||"object"!=typeof t||i&&"object"!=typeof i)return console.error("Invalid parameter!:",e,t,i,"are not objects. Parameter order should be ([],{},{})"),"";c=i?i.tenant:null,u=i?i.type||"ofh1":"ofh1",d=function(e,t){if(e){p=!1;for(m in t)p|=t[m]==e;p||t.push(e)}},n="";for(a in t.documents)h=t.documents[a],h.active&&!0===h.active&&(w&&delete h.active,w=!0),!0===h.exclude&&v.push(h),this.fixApp(h),d(h.version,x),h.err||y.push(h);if("object"==typeof i&&i.options){debug&&console.log("Complex params options: ",i.options),w={"find":1,"search":10,"sort":100},h=0,f=1;for(a in s.tboolean)m=s.tboolean[a],m=i.options[m],"boolean"==typeof m&&(h+=m?f:0),f*=2;h=h.toString(16),"0"!=h&&(n+=2>h.length?"0"+h:h),h=0;for(a in i.options)if(m=s.nameValuePair[a])for(f=i.options[a],g=0;g<m.length;g++)if(m[g]==f){h+=(g+1)*w[a];break}if(0<h&&121!=h&&(h=h.toString(16),n+=(0===n.length?"00":"")+(2>h.length?"0"+h:h)),"string"==typeof i.options.query&&(n+="S"+encodeURI(i.options.query)),i.options.flags&&(r=(""+i.options.flags).replace(/[^a-zA-Z0-9]/g,"")),i.options.custom)for(h in l="",i.options.custom)0<=",ml,t,o,f,key,type,".indexOf(","+h+",")||(m=h.replace(/[^a-zA-Z0-9]/g,"")+"="+encodeURIComponent(i.options.custom[h]),l+="&"+m)}for(debug&&console.log("Complex params: ",c,u,JSON.stringify(y),n),i=o+"?ml=",i+=this.altArray(e),1==x.length&&(i=i+","+x[0]),a=0;a<y.length;a++)w=y[a].module,y[a].version&&(w+=y[a].version),y[a].release&&(w+="-"+y[a].release),y[a].help&&(w+="-"+y[a].help),y[a].docType&&(w+="-"+y[a].docType),y[a].locale&&(w+="-"+y[a].locale),y[a].PageID&&(w+="."+y[a].PageID),y[a].exclude&&(w+="_"),y[a].active&&(w+="~"),d(w,b);return debug&&(console.log("Complex params: ",x,i,JSON.stringify(v)),console.log("Compressable: ",JSON.stringify(b))),w=this.compress({"docs":b,"preserve":t.preserve,"locale":e},e[0]),debug&&console.log("Compressed:",w),c&&(w+="&t="+encodeURIComponent(c)),n&&(0<parseInt(n,16)||0<=n.indexOf("S"))&&(w+="&o="+n),r&&(w+="&f="+r),l&&(w+=l),e=this.generateKey(),o+"?type="+u+"&ml="+w+"&key="+e},"compress":function(e,t){var i,n,o=e.locale;i=null;var s,r,l=[],a="NotAPossibleValue",c=a,u=!0,d=a,h=!0;o||(o=t),o&&null!==o||(o="en"),i=e.docs,!0!==e.preserve&&(i=i.sort()),n=this.altArray(o),l=[],s=null,c=a="NotAPossibleValue",u=!0,d=a,h=!0;for(r in i)s=this.parseRevnum(i[r]),l.push(s),u&&c!=s.help&&(c==a?c=s.help:c!=s.help&&(u=!1)),h&&d!=s.release&&(d==a?d=s.release:d!=s.release&&(h=!1));2>i.length&&(h=u=!1),h&&null!==d&&(n=n+"-"+d.toUpperCase()),u&&null!==c&&(n+="-",n+=c),c=a=r=null;for(s in l)i=l[s],null===r||r!=i.product?(n+="$",r=i.product,a=c=null,n+=r):n+=",",d=i.version,h||null===i.release||i.release&&(d+="-"+i.release.toUpperCase()),null!==a&&a==d||(n+=d,a=d,c=null),d="",i.docType&&(d+=i.docType),null!==i.locale&&o!=i.locale&&(d+="-",d+=i.locale),null!==i.PageID&&0<i.PageID.length&&(d+=".",d+=window.encodeURIComponent(i.PageID)),null!==c&&c==d||(null!==c&&","!=n.substring(n.length-1)&&(n+=","),c=d,u||null===i.help||(n+=i.help,n+="-"),n+=c),null!==i.flag&&(n+=i.flag);return n},"fixApp":function(e){var t,i=null;if(e){if(e.version||(i=this.parseRevnum(e.module),e.module=i.product,e.version=i.version&&0<i.version.length?i.version:"0",e.release=i.release&&0<i.release.length?i.release:null,e.docType=i.docType,e.help=i.help,e.err=i.err),"v"==e.version[0]&&(e.version=e.version.substring(1)),-1<e.module.indexOf("-")){for(i=e.module.split(/(?=-)/),i[0]=i[0].split(/\d+$/)[0],e.module=i[0]+e.version,t=1;t<i.length;t++)e.module+=i[t];i=this.parseRevnum(e.module),e.module=i.product,e.version=i.version,e.release=i.release,e.docType=i.docType,e.help=i.help,e.err=i.err}i||(i=this.parseRevnum(e.module)),e.locale=i.locale&&0<i.locale.length&&!e.locale?i.locale:e.locale,e.PageID=i.PageID&&0<i.PageID.length&&!e.topic?i.PageID:e.topic,e.module=e.module.split(/\d+$/)[0]}},"generateSixParam":function(e,t,s){var r,l=null,a=null,c=null,u=null;if(s&&(l=s.product,a=s.version,c=s.module,u=s.type),"string"==typeof u&&0===u.length&&(u=null),s=this.generateKey(),l=l||i,a=a||n,r=o,"string"!=typeof c&&"string"!=typeof u&&0<r.indexOf("mapperpi")&&(r=r.substring(0,r.length-2)),r=r+"?product="+encodeURIComponent(l),r+="&version="+encodeURIComponent(a),r+="&locale="+encodeURIComponent(e),r+="&context="+encodeURIComponent(t),"string"==typeof c&&"string"==typeof u)r+="&module="+encodeURIComponent(c),r+="&type="+encodeURIComponent(u);else if(!c&&u||!u&&c)return console.error("'module' and 'type' need to be either BOTH or NEITHER defined"),"";return r+="&key="+s,debug&&console.log(r),r},"generateKey":function(){var e=this.generatePassPhrase();return this.encryptByDES("Vignette",e)},"parseRevnum":function(e){var t,i=null;if(i=e.match(/^([a-zA-Z]+)(\d+(-\d+\w*)?)((-[a-z])?)(-[a-z]+)?(-[_a-z]+)?(-\d+)?(\.([a-zA-Z0-9#.\_\-]+))?([\_\~])?$/i)){e=i[2],i[3]&&"-"==i[3][0]&&(e=e.substring(0,e.length-i[3].length)),i={"product":i[1],"version":e,"release":i[3],"help":i[4],"docType":i[6],"locale":i[7],"revision":i[8],"PageID":i[10],"flag":i[11]};for(t in i)i[t]&&"-"==i[t][0]?i[t]=i[t].substring(1):i[t]||(i[t]=null);null!==i.PageID&&null===i.flag&&i.PageID.endsWith("_")&&(i.flag="_",i.PageID=i.PageID.substring(0,i.PageID.length-1))}else i={"product":e,"version":null,"release":null,"help":null,"docType":null,"locale":null,"revision":null,"PageID":null,"flag":null,"err":!0};return i},"generatePassPhrase":function(){var e=new Date,t=e.getFullYear(),i=e.getMonth(),e=e.getDate(),n=""+i,o=""+e;return 10>i&&(n="0"+n),10>e&&(o="0"+o),t+n+o},"encryptByDES":function(t,i){var n;n=e.enc.Utf8.parse(i);var o=e.enc.Hex.parse(e.enc.Utf8.parse("ruhulio!").toString(e.enc.Hex));return trace&&(console.log(e.enc.Utf8.stringify(n),e.enc.Hex.stringify(n)),console.log(e.enc.Hex.parse(e.enc.Utf8.parse(i).toString(e.enc.Hex)))),n=e.DES.encrypt(t,n,{"iv":o,"mode":e.mode.CBC,"padding":e.pad.Pkcs7}),trace&&(console.log("encrypted.toString()  -> base64(ciphertext)  :",n.toString()),console.log("base64(ciphertext)    <- encrypted.toString():",n.ciphertext.toString(e.enc.Base64)),console.log("ciphertext.toString() -> ciphertext hex      :",n.ciphertext.toString())),n.ciphertext.toString()},"altArray":function(e){var t,i,n="";if(Array.isArray(e)){for(t=0;t<e.length;t++)i=e[t],n=0==t%2?n+i.toLowerCase():n+i.toUpperCase();return n}return e}}}}}),csui.define("css!csui/widgets/navigation.header/impl/navigation.header.controls",[],function(){}),csui.define("csui/widgets/navigation.header/navigation.header.controls",["module","csui/lib/underscore","csui/lib/backbone","csui-ext!csui/widgets/navigation.header/navigation.header.controls","css!csui/widgets/navigation.header/impl/navigation.header.controls"],function(e,t,i,n){"use strict";function o(e){return!t.contains(c.blacklist,e.id)&&(!c.whitelist.length||t.contains(c.whitelist,e.id))}var s=e.config(),r=new i.Model(t.extend({"location":"center"},s.logo)),l=new i.Collection([{"id":"csui/widgets/navigation.header/controls/help/help.view","sequence":100,"parentClassName":"csui-help csui-icons"},{"id":"csui/widgets/navigation.header/controls/home/home.view","sequence":200,"parentClassName":"csui-home-item csui-icons"},{"id":"csui/widgets/navigation.header/controls/breadcrumbs/breadcrumbs.view","sequence":300,"parentClassName":"tile-breadcrumb"}],{"comparator":"sequence"}),a=new i.Collection([{"id":"csui/widgets/navigation.header/controls/progressbar.maximize/progressbar.maximize.view","sequence":100,"parentClassName":"csui-progressbar-maximize binf-hidden csui-icons"},{"id":"csui/widgets/navigation.header/controls/search/search.view","sequence":100,"parentClassName":"csui-search csui-icons"},{"id":"csui/widgets/navigation.header/controls/favorites/favorites.view","sequence":200,"parentClassName":"csui-favorites csui-icons"},{"id":"csui/widgets/navigation.header/controls/user.profile/user.profile.view","sequence":300,"parentClassName":"csui-profile csui-icons"}],{"comparator":"sequence"});n&&t.filter(n,function(e){return(0===e.id.indexOf("iwatch/")||0===e.id.indexOf("conws/"))&&a.add(e)});var c=t.reduce(t.values(s.masks||{}),function(e,t){return{"blacklist":e.blacklist.concat(t.blacklist||[]),"whitelist":e.whitelist.concat(t.whitelist||[])}},{"blacklist":[],"whitelist":[]});return c={"blacklist":t.unique(c.blacklist),"whitelist":t.unique(c.whitelist)},l.remove(l.reject(o)),a.remove(a.reject(o)),{"logo":r,"leftSide":l,"rightSide":a}}),csui.define("hbs!csui/pages/start/impl/navigationheader/impl/navigationheader",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-global-message"></div>\r\n<nav class="csui-navbar binf-navbar binf-navbar-default zero-gutter" aria-label="'+e.escapeExpression((s=null!=(s=r(i,"mainNavigationAria")||(null!=t?r(t,"mainNavigationAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"mainNavigationAria","hash":{},"loc":{"start":{"line":2,"column":81},"end":{"line":2,"column":103}}}):s))+'">\r\n  <div class="binf-container-fluid">\r\n    <span class="binf-navbar-brand binf-collapse binf-navbar-collapse">\r\n      <span class="csui-logo">\r\n        <span class="csui-logo-image"></span>\r\n      </span>\r\n    </span>\r\n    <div class="binf-nav binf-navbar-nav binf-navbar-left"></div>\r\n    <div class="binf-nav binf-navbar-nav binf-navbar-right" ></div>\r\n    <div class="binf-nav binf-navbar-nav csui-navbar-message"></div>\r\n  </div>\r\n</nav>\r\n'}});return i.registerPartial("csui_pages_start_impl_navigationheader_impl_navigationheader",n),n}),csui.define("css!csui/pages/start/impl/navigationheader/impl/navigationheader",[],function(){}),csui.define("csui/pages/start/impl/navigationheader/navigationheader.view",["require","module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/globalmessage/globalmessage","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/widgets/navigation.header/navigation.header.controls","hbs!csui/pages/start/impl/navigationheader/impl/navigationheader","i18n!csui/pages/start/impl/nls/lang","css!csui/pages/start/impl/navigationheader/impl/navigationheader","csui/lib/jquery.when.all"],function(e,t,i,n,o,s,r,l,a,c,u){"use strict";var d=t.config();i.defaults(d,{"enableMinimiseButtonOnProgressPanel":!0});var h=s.LayoutView.extend({"template":c,"regions":{"messageRegion":".csui-navbar-message"},"ui":{"branding":".binf-navbar-brand","logo":".csui-logo","left":".binf-navbar-left","right":".binf-navbar-right"},"templateHelpers":function(){return{"mainNavigationAria":u.mainNavigationAria}},"constructor":function(e){s.LayoutView.call(this,e),this.propagateEventsToRegions(),this.listenTo(this,"render:controls",this._adjustControls.bind(this)),this.listenTo(this,"processbar:minimize processbar:maximize",this._adjustControlsWithAnimation.bind(this)),this.listenTo(this,"before:destroy",i.bind(function(){n(window).off("resize."+this.cid,this._adjustControls.bind(this))},this)),n(window).on("resize."+this.cid,this._adjustControls.bind(this))},"_adjustControls":function(){for(var e=this.el.offsetWidth,t=this.el.getElementsByClassName("binf-navbar-left")[0],n=0,o=this.el.getElementsByClassName("binf-navbar-right")[0],s=0,r=this.el.getElementsByClassName("csui-logo")[0],l=a.logo.get("location"),c=this.el.getElementsByClassName("csui-logo-"+l)[0],u=c&&"absolute"===window.getComputedStyle(c).position,d=r.offsetWidth+40,h=0;h<o.childElementCount;h++)s+=o.children[h].offsetWidth||0;for(h=0;h<t.childElementCount;h++)n+=t.children[h].offsetWidth||0;(u?n+d/2<e/2&&s+d/2<e/2:e>n+s+d)?d>40&&r.classList.remove("binf-logo-hide"):r.classList.add("binf-logo-hide"),this.listenTo(this,"header:control:clicked",i.bind(function(){this.trigger("control:clicked")},this))},"_adjustControlsWithAnimation":function(){setTimeout(i.bind(function(){this._adjustControls()},this),301)},"onRender":function(){function e(e,s){var r=s.get("view");if(r){var l=n("<div>").addClass(s.get("parentClassName")).appendTo(e),a=o.addRegion(i.uniqueId("csui:navigation.header.control"),{"selector":l}),c=new r({"context":t,"parentView":o});a.show(c)}}var t=this.options.context,o=this;r.setMessageRegionView(this,{"classes":"csui-global-message","enableMinimiseButtonOnProgressPanel":d.enableMinimiseButtonOnProgressPanel});var s=a.logo.get("location");"none"===s?this.ui.logo.addClass("binf-hidden"):this.ui.branding.addClass("csui-logo-"+s),this._resolveComponents().done(function(){o.trigger("before:render:controls",o),a.leftSide.each(e.bind(o,o.ui.left)),a.rightSide.each(e.bind(o,o.ui.right)),o.trigger("render:controls",o)})},"_resolveComponents":function(){function t(t){var i=n.Deferred();return e([t],i.resolve,i.reject),i.promise()}if(this._controlsResolved)return this._controlsResolved;var i=a.leftSide.models.concat(a.rightSide.models),o=i.map(function(e){return t(e.id)}),s=n.Deferred();return n.whenAll.apply(n,o).always(function(e){e.forEach(function(e,t){i[t].set("view",e)}),s.resolve()}),this._controlsResolved=s.promise(),this._controlsResolved}});return i.extend(h.prototype,l),h}),csui.define("hbs!csui/widgets/error.global/impl/error.global",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-describedby="'+e.escapeExpression((s=null!=(s=r(i,"msgId")||(null!=t?r(t,"msgId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"msgId","hash":{},"loc":{"start":{"line":5,"column":92},"end":{"line":5,"column":101}}}):s))+'" '},"3":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <div class='server-error-message-wrapper'>\r\n          <div class='server-error-message horizontal-center-align'>\r\n            <span id=\""+e.escapeExpression((s=null!=(s=r(i,"msgId")||(null!=t?r(t,"msgId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"msgId","hash":{},"loc":{"start":{"line":12,"column":22},"end":{"line":12,"column":31}}}):s))+"\" class='csui-acc-focusable'>"+e.escapeExpression((s=null!=(s=r(i,"message")||(null!=t?r(t,"message"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"message","hash":{},"loc":{"start":{"line":12,"column":60},"end":{"line":12,"column":71}}}):s))+"</span>\r\n          </div>\r\n        </div>\r\n"},"5":function(e,t,i,n,o){var s,r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <div class='navigation-control-container' "+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"noHistory"):t,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":20,"column":50},"end":{"line":20,"column":97}}}))?s:"")+">\r\n          <a class='go-back-button circle-border horizontal-center-align' href=\"#\"\r\n            title='"+e.escapeExpression((r=null!=(r=l(i,"backTooltip")||(null!=t?l(t,"backTooltip"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"backTooltip","hash":{},"loc":{"start":{"line":22,"column":19},"end":{"line":22,"column":34}}}):r))+"' aria-label='"+e.escapeExpression((r=null!=(r=l(i,"backTooltip")||(null!=t?l(t,"backTooltip"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"backTooltip","hash":{},"loc":{"start":{"line":22,"column":48},"end":{"line":22,"column":63}}}):r))+"' class='csui-acc-focusable'>\r\n              <span class='icon icon-back'></span>\r\n          </a>\r\n          <div class='go-back-text button-text horizontal-center-align' title='"+e.escapeExpression((r=null!=(r=l(i,"backTooltip")||(null!=t?l(t,"backTooltip"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"backTooltip","hash":{},"loc":{"start":{"line":25,"column":79},"end":{"line":25,"column":94}}}):r))+"'>\r\n              <span>"+e.escapeExpression((r=null!=(r=l(i,"backText")||(null!=t?l(t,"backText"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"backText","hash":{},"loc":{"start":{"line":26,"column":20},"end":{"line":26,"column":32}}}):r))+"</span>\r\n          </div>\r\n        </div>\r\n        <div class='navigation-control-container'>\r\n          <a class='go-home-button circle-border horizontal-center-align' href=\"#\"\r\n            title='"+e.escapeExpression((r=null!=(r=l(i,"homeTooltip")||(null!=t?l(t,"homeTooltip"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"homeTooltip","hash":{},"loc":{"start":{"line":31,"column":19},"end":{"line":31,"column":34}}}):r))+"' aria-label='"+e.escapeExpression((r=null!=(r=l(i,"homeTooltip")||(null!=t?l(t,"homeTooltip"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"homeTooltip","hash":{},"loc":{"start":{"line":31,"column":48},"end":{"line":31,"column":63}}}):r))+"' class='csui-acc-focusable'>\r\n              <span class='icon icon-home'></span>\r\n          </a>\r\n          <div class='go-home-text button-text horizontal-center-align' title='"+e.escapeExpression((r=null!=(r=l(i,"homeTooltip")||(null!=t?l(t,"homeTooltip"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"homeTooltip","hash":{},"loc":{"start":{"line":34,"column":79},"end":{"line":34,"column":94}}}):r))+"'>\r\n              <span>"+e.escapeExpression((r=null!=(r=l(i,"homeText")||(null!=t?l(t,"homeText"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"homeText","hash":{},"loc":{"start":{"line":35,"column":20},"end":{"line":35,"column":32}}}):r))+"</span>\r\n          </div>\r\n        </div>\r\n"},"6":function(e,t,i,n,o){return" style='display:none;' "},"8":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"showCloseButton"):t,{"name":"if","hash":{},"fn":e.program(9,o,0),"inverse":e.noop,"loc":{"start":{"line":39,"column":8},"end":{"line":43,"column":15}}}))?s:""},"9":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class=\'navigation-control-container\'>\r\n            <button type="submit" class="close-button highlighted-btn">'+e.escapeExpression((s=null!=(s=r(i,"closeText")||(null!=t?r(t,"closeText"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"closeText","hash":{},"loc":{"start":{"line":41,"column":71},"end":{"line":41,"column":84}}}):s))+"</button>\r\n          </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div class='main-area-container' role='region' aria-label='"+e.escapeExpression((r=null!=(r=l(i,"regionAria")||(null!=t?l(t,"regionAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"regionAria","hash":{},"loc":{"start":{"line":1,"column":59},"end":{"line":1,"column":73}}}):r))+"'>\r\n  <div class='main-area-group'>\r\n    <div class='error-message-area'>\r\n      <div class='error-message-wrapper'>\r\n        <h2 class='error-message horizontal-center-align' "+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"message"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":58},"end":{"line":5,"column":110}}}))?s:"")+" >\r\n          <span class='csui-acc-focusable'>"+e.escapeExpression((r=null!=(r=l(i,"errorMessage")||(null!=t?l(t,"errorMessage"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"errorMessage","hash":{},"loc":{"start":{"line":6,"column":43},"end":{"line":6,"column":59}}}):r))+"</span>\r\n        </h2>\r\n      </div>\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"message"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":9,"column":6},"end":{"line":15,"column":13}}}))?s:"")+"    </div>\r\n\r\n    <div class='navigation-area horizontal-center-align'>\r\n"+(null!=(s=l(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?l(t,"hideNavigationButtons"):t,{"name":"unless","hash":{},"fn":e.program(5,o,0),"inverse":e.program(8,o,0),"loc":{"start":{"line":19,"column":6},"end":{"line":44,"column":17}}}))?s:"")+"    </div>\r\n  </div>\r\n</div>\r\n"}});return i.registerPartial("csui_widgets_error.global_impl_error.global",n),n}),csui.define("csui/widgets/error.global/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/error.global/impl/nls/root/lang",{"errorMessage":"There was a problem serving the requested page.","backText":"Go back","backTooltip":"Navigate back to previous URL","homeText":"Home","homeTooltip":"Navigate to landing page","closeText":"Close","closeTooltip":"Close the error page","globalErrorRegionAria":"Global error"}),csui.define("css!csui/widgets/error.global/impl/error.global",[],function(){}),csui.define("csui/widgets/error.global/error.global.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/utils/contexts/factories/global.error","csui/utils/contexts/factories/application.scope.factory","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/widgets/error.global/impl/error.global","i18n!csui/widgets/error.global/impl/nls/lang","csui/utils/log","module","css!csui/widgets/error.global/impl/error.global"],function(e,t,i,n,o,s,r,l,a,c,u){"use strict";return c=c(u.id),i.ItemView.extend({"className":"csui-global-error","template":l,"templateHelpers":function(){return{"errorMessage":a.errorMessage,"backText":a.backText,"backTooltip":a.backTooltip,"homeText":a.homeText,"homeTooltip":a.homeTooltip,"closeText":a.closeText,"closeTooltip":a.closeTooltip,"msgId":e.uniqueId("msg"),"regionAria":a.globalErrorRegionAria,"noHistory":this.noHistory}},"TabableRegion":{"behaviorClass":r,"initialActivationWeight":100},"ui":{"errorMessage":".error-message > span","closebutton":".close-button"},"events":{"keydown":"onKeyInView","click .go-home-button":"onClickHome","click .go-home-text":"onClickHome","click .go-back-button":"onClickBack","click .go-back-text":"onClickBack","click @ui.closebutton":"onClickClose"},"constructor":function(e){if(i.ItemView.prototype.constructor.apply(this,arguments),this.model||(this.model=e.context.getModel(o,e)),this.noHistory=e.context&&e.context.viewStateModel&&e.context.viewStateModel.getHistory().length<1,n.isIE11()){var s=this,r=function(){s.render()};t(window).on("resize",r),this.once("before:destroy",function(){t(window).off("resize",r)})}},"currentlyFocusedElement":function(e){return this.ui.errorMessage},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),t(e.target).trigger("click"))},"onClickHome":function(e){e.preventDefault(),e.stopPropagation();var t=this.options.context,i=t&&t.viewStateModel,n=i&&i.get(i.CONSTANTS.START_ID);if(n){t.getModel("nextNode").set("id",n)}else{t.getModel(s).set("id","")}},"onClickBack":function(e){e.preventDefault(),e.stopPropagation(),window.history.back()},"onClickClose":function(e){e.preventDefault(),e.stopPropagation(),this.destroy()}})}),csui.define("css!csui/pages/error.page/impl/error.page",[],function(){}),csui.define("csui/pages/error.page/error.page.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/contexts/page/page.context","csui/utils/contexts/factories/application.scope.factory","csui/widgets/error.global/error.global.view","csui/utils/url","csui/utils/non-attaching.region/non-attaching.region","css!csui/pages/error.page/impl/error.page"],function(e,t,i,n,o,s,r,l){return i.ItemView.extend({"template":!1,"constructor":function(e){e||(e={}),e.el=document.body,i.ItemView.prototype.constructor.call(this,e),this.$el.addClass("binf-widgets csui-error-page-container"),this.context=new n,this.applicationScope=this.context.getModel(o),this.listenTo(this.applicationScope,"change:id",this._onChangeId),this.globalErrorView=new s({"model":e.model,"context":this.context})},"onRender":function(){this.globalErrorView.render(),this.$el.empty().append(this.globalErrorView.el),setTimeout(e.bind(function(){new l({"el":this.el}).show(this,{"render":!1})},this))},"_onChangeId":function(){location.href=r.combine(new r(new r(location.pathname).getCgiScript()),"app")}})}),csui.define("css!csui/pages/start/impl/start.page",[],function(){}),
csui.define("csui/pages/start/start.page.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/routing","csui/utils/contexts/perspective/perspective.context","csui/utils/contexts/factories/connector","csui/pages/start/perspective.routing","csui/utils/base","csui/pages/start/impl/navigationheader/navigationheader.view","csui/controls/perspective.panel/perspective.panel.view","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/behaviors/keyboard.navigation/tabables.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/utils/non-emptying.region/non-emptying.region","csui/utils/non-attaching.region/non-attaching.region","csui/utils/page.leaving.blocker","csui/controls/iconpreload/icon.preload.view","csui/pages/error.page/error.page.view","css!csui/pages/start/impl/start.page"],function(e,t,i,n,o,s,r,l,a,c,u,d,h,p,m,f,g,v,b,w){"use strict";var y=t.extend({"signInPageUrl":"signin.html","redirectToSignInPage":!s.routesWithSlashes()},e.config()),x=o.ItemView.extend({"template":!1,"behaviors":{"TabablesBehavior":{"behaviorClass":p}},"constructor":function(e){e||(e={}),e.el=document.body,o.View.prototype.constructor.call(this,e);var t=e.context||new r,n=t.getObject(l);if(this.context=t,!(n.connection.credentials||n.authenticator.isAuthenticated()||n.authenticator.syncStorage().isAuthenticated()||n.authenticator.interactive&&n.authenticator.interactive()))return void(y.redirectToSignInPage?this._navigateToSignIn():this._showMissingCredentialsError());n.authenticator.on("loggedOut",function(e){"failed"===e.reason&&this._navigateToSignIn(),t.viewStateModel&&t.viewStateModel.clean()},this),this.navigationHeader=new u({"context":t,"signInPageUrl":this.options.signInPageUrl}),this.context=t,this.perspectivePanel=new d({"context":t}),this.listenTo(this.perspectivePanel,"before:start:perspective:loading",function(){this.el.classList.add("mouse-blocked")}).listenTo(this.perspectivePanel,"after:finish:perspective:loading",function(){this.el.classList.remove("mouse-blocked")}),this.options.applyFastTheme&&this.perspectivePanel&&(document.body.classList.add("csui-pre-loading"),this.listenToOnce(this.perspectivePanel,"before:start:perspective:loading",function(){}),this.listenToOnce(this.perspectivePanel,"after:finish:perspective:loading",function(){var e=this.options.preLoaderEle||"#csui-pre-loader";i("body > "+e).remove(),document.body.classList.remove("csui-pre-loading")})),this.propagateEventsToViews(this.navigationHeader,this.perspectivePanel),a.getInstance({"context":t}).start(),this.$el.addClass("binf-widgets"),c.isAppleMobile()&&this.$el.addClass("csui-on-ipad"),c.isIOSBrowser()&&this.$el.addClass("csui-on-macintosh"),csui.require(["csui/utils/accessibility"],function(e){e.isAccessibleMode()&&this.$el.addClass("accessibility")}.bind(this)),i(window).on("unload",function(){})},"onRender":function(){if(this._redirecting)return this;b.ensureOnThePage(),this._appendView(this.navigationHeader),this._appendView(this.perspectivePanel),this.$el.children(".cs-perspective-panel").attr("role","main"),setTimeout(t.bind(function(){new g({"el":this.el}).show(this,{"render":!1})},this)),this.$el.on("globalmessage.shown",function(e,t){new m(t.options,t)})},"onBeforeDestroy":function(){this.navigationHeader&&this.navigationHeader.destroy(),this.perspectivePanel&&this.perspectivePanel.destroy()},"_appendView":function(e){new f({"el":this.el}).show(e)},"_navigateToSignIn":function(){if(y.redirectToSignInPage){var e=this.options.signInPageUrl||y.signInPageUrl,t=location.search;t+=t?"&":"?",t+="nextUrl="+encodeURIComponent(location.pathname),location.href=e+t+location.hash}else v.forceDisable(),location.reload();this._redirecting=!0},"_showMissingCredentialsError":function(){var e=new n.Model({"message":"The StartPageView was created without providing valid authentication data.","hideNavigationButtons":!0,"errorCode":401,"showLogout":!1});new w({"model":e}).render()}});return t.extend(x.prototype,h),x}),csui.define("csui/widgets/navigation.header/controls/help/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/navigation.header/controls/help/impl/nls/root/localized.strings",{"HelpIconTitle":"Help","HelpIconAria":"Help pages, opens in new window"}),csui.define("csui/utils/context.help/context.help.ids",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/rules.matching/rules.matching.mixin","csui-ext!csui/utils/context.help/context.help.ids"],function(e,t,i,n){var o=t.Model.extend({"defaults":{"sequence":100,"important":!1,"module":null},"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments),this.makeRulesMatching(i)}});i.mixin(o.prototype);var s=t.Collection.extend({"model":o,"comparator":"sequence","constructor":function(e,i){t.Collection.prototype.constructor.apply(this,arguments)},"findByApplicationScope":function(e){return this.find(function(t){return t.matchRules(e,t.attributes)})}}),r=new s([{"sequence":50,"decides":function(e){return"properties"===e.context.getModel("applicationScope").id&&e.context.viewStateModel&&"versions"===e.context.viewStateModel.get("state").dropdown},"contextHelpId":"qs-versionpg-bg"},{"sequence":50,"decides":function(e){return"properties"===e.context.getModel("applicationScope").id&&e.context.viewStateModel&&"audit"===e.context.viewStateModel.get("state").dropdown},"contextHelpId":"qs-audithistory-bg"},{"sequence":50,"decides":function(e){return"node"===e.context.getModel("applicationScope").id&&298===e.context.getModel("node").get("type")},"contextHelpId":"qs-addtocollection-bg"},{"sequence":50,"decides":function(e){return"node"===e.context.getModel("applicationScope").id&&136===e.context.getModel("node").get("type")},"contextHelpId":"compound-documents-so"},{"sequence":50,"decides":function(e){return"node"===e.context.getModel("applicationScope").id&&751===e.context.getModel("node").get("type")},"contextHelpId":"qs-itemtypes-bg"},{"sequence":50,"decides":function(e){return e.context.viewStateModel.get("session_state")&&e.context.viewStateModel.get("session_state").permissions},"contextHelpId":"qs-permissions-bg"}]);return n&&r.add(e.flatten(n,!0)),r}),csui.define("hbs!csui/widgets/navigation.header/controls/help/impl/help",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="icon-help" title="'+e.escapeExpression((s=null!=(s=r(i,"title")||(null!=t?r(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":1,"column":30},"end":{"line":1,"column":39}}}):s))+'"></div>'}});return i.registerPartial("csui_widgets_navigation.header_controls_help_impl_help",n),n}),csui.define("csui/widgets/navigation.header/controls/help/help.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","i18n!csui/widgets/navigation.header/controls/help/impl/nls/localized.strings","i18n","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/utils/context.help/context.help.ids","csui/models/server.module/server.module.collection","csui/lib/othelp","hbs!csui/widgets/navigation.header/controls/help/impl/help"],function(e,t,i,n,o,s,r,l,a,c,u,d){"use strict";var h=window.csui.requirejs.s.contexts._.config.config["csui/pages/start/impl/navigationheader/navigationheader.view"]||{};return t.extend(h,e.config()),h.help||(h.help={}),t.defaults(h.help,{"language":r.settings.locale.replace(/[-_]\w+$/,""),"preserve":!0}),""===h.help.urlRoot&&(h.help.urlRoot=void 0),""===h.help.tenant&&(h.help.tenant=void 0),""===h.help.type&&(h.help.type=void 0),n.ItemView.extend({"tagName":"a","attributes":{"href":"#","title":s.HelpIconTitle,"aria-label":s.HelpIconAria},"template":d,"templateHelpers":function(){return{"title":s.HelpIconTitle}},"behaviors":{"TabableRegion":{"behaviorClass":l,"initialActivationWeight":50}},"currentlyFocusedElement":function(){return this.$el},"constructor":function(e){n.ItemView.call(this,e),this.listenTo(this,"click:help",this._onClick)},"onRender":function(){var e=this;this.$el.on("click",function(t){o.isControlClick(t)||e.triggerMethod("click:help")}),this.$el.on("keydown",function(t){32===t.keyCode&&(t.preventDefault(),e.triggerMethod("click:help"))})},"_onClick":function(){var e=new c,i=this.options.context._applicationScope.attributes.id,n=this.options.context,o=a.findByApplicationScope({"context":n});if(o){var s=o.get("contextHelpId");s="function"==typeof s?s({"context":n}):s}e.fetch().then(function(){var n,o,r,l,a,c=[];n=e.filter(function(e){return!!e.get("helpDocId")}),o=new u({"urlRoot":h.help.urlRoot}),r={"preserve":h.help.preserve,"documents":[]},t.each(n,function(e){var t=e.get("helpDocId");c[t.match(/[^\d]+|\d+/g)[0]]?c[t.match(/[^\d]+|\d+/g)[0]].push(e):(c[t.match(/[^\d]+|\d+/g)[0]]=[],c[t.match(/[^\d]+|\d+/g)[0]][0]=e)}),Object.keys(c).forEach(function(e){var n,o=[],l=[];t.each(c[e],function(e){e.get("contextualHelp")&&(n=e.get("contextualHelp"));var t=s;!t&&n&&i&&(t=n[i]);var o=e.get("helpDocId"),r=e.get("helpDocId").lastIndexOf("-"),a=e.get("helpDocId").substring(r+1);l[a]?l[a].push({"helpDocId":o,"topicId":t}):(l[a]=[],l[a][0]={"helpDocId":o,"topicId":t})});var a=0,u=0;Object.keys(l).forEach(function(e){o[e]=t.sortBy(l[e],function(e){return parseInt(e.helpDocId.match(/[^\d]+|\d+/g)[1])}).reverse()}),Object.keys(o).forEach(function(e){if(2===o[e].length)a=o[e][0].topicId?0:o[e][1].topicId?1:0;else if(o[e].length>2){for(var t=1;t<o[e].length;t++)o[e][0].helpDocId===o[e][t].helpDocId&&u++;u==o[e].length-1&&o[e].filter(function(e,t){if(e.topicId)return a=t,!0})}r.documents.push({"module":o[e][a].helpDocId,"topic":o[e][a].topicId?o[e][a].topicId:0===o[e][0].helpDocId.indexOf("cssui")?"sui-overview-bg":void 0}),r.documents[r.documents.length-1].topic&&(r.documents[r.documents.length-1].active=!0)})}),l=o.buildHelpUrl(h.help.language,r,{"tenant":h.help.tenant,"type":h.help.type,"options":{"search":"allModules"}}),a=window.open(l,"_blank"),a.focus()})}})}),csui.define("csui/widgets/navigation.header/controls/home/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/navigation.header/controls/home/impl/nls/root/localized.strings",{"HomeIconTitle":"Home","HomeIconAria":"Home page"}),csui.define("hbs!csui/widgets/navigation.header/controls/home/impl/home",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-icon-home" title="'+e.escapeExpression((s=null!=(s=r(i,"title")||(null!=t?r(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":1,"column":35},"end":{"line":1,"column":44}}}):s))+'"></div>'}});return i.registerPartial("csui_widgets_navigation.header_controls_home_impl_home",n),n}),csui.define("csui/widgets/navigation.header/controls/home/home.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/url","csui/utils/base","i18n!csui/widgets/navigation.header/controls/home/impl/nls/localized.strings","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/utils/contexts/factories/application.scope.factory","csui/utils/node.links/node.links","hbs!csui/widgets/navigation.header/controls/home/impl/home"],function(e,t,i,n,o,s,r,l,a,c){"use strict";return i.ItemView.extend({"tagName":"a","className":"csui-home binf-hidden","attributes":{"href":"","title":s.HomeIconTitle,"aria-label":s.HomeIconAria},"events":{"click":"onClickHomeIcon","keydown":"onKeydownHomeIcon"},"template":c,"templateHelpers":function(){return{"title":s.HomeIconTitle}},"behaviors":{"TabableRegion":{"behaviorClass":r}},"currentlyFocusedElement":function(){return this.$el},"constructor":function(e){i.ItemView.call(this,e),this.listenTo(e.context,"sync error",this._toggleVisibility),this.applicationScope=e.context.getModel(l)},"onRender":function(){var e=this.options&&this.options.context&&this.options.context._user&&this.options.context._user.connector,t=new n(e&&e.connection.url||location.href),i=a.getHomeUrl(t);this.$el.attr("href",i)},"onClickHomeIcon":function(e){o.isControlClick(e)||(e.preventDefault(),this.applicationScope.set("id",""))},"onKeydownHomeIcon":function(e){32===e.keyCode&&this.onClickHomeIcon(e)},"_toggleVisibility":function(){this._isRendered&&(this.applicationScope.id?this.$el.removeClass("binf-hidden"):this.$el.addClass("binf-hidden"))}})}),csui.define("csui/widgets/navigation.header/controls/breadcrumbs/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/navigation.header/controls/breadcrumbs/impl/nls/root/localized.strings",{"ShowBreadcrumbs":"Show Breadcrumbs","HideBreadcrumbs":"Hide Breadcrumbs"}),csui.define("hbs!csui/widgets/navigation.header/controls/breadcrumbs/impl/breadcrumbs",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="csui-button-icon csui-breadcrumb-caret-type '+e.escapeExpression((s=null!=(s=r(i,"breadcrumbsCaretName")||(null!=t?r(t,"breadcrumbsCaretName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"breadcrumbsCaretName","hash":{},"loc":{"start":{"line":1,"column":57},"end":{"line":1,"column":81}}}):s))+'"></span>\r\n<span class="csui-breadcrumb-btn-innertext">'+e.escapeExpression((s=null!=(s=r(i,"breadcrumbsText")||(null!=t?r(t,"breadcrumbsText"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"breadcrumbsText","hash":{},"loc":{"start":{"line":2,"column":44},"end":{"line":2,"column":63}}}):s))+"</span>"}});return i.registerPartial("csui_widgets_navigation.header_controls_breadcrumbs_impl_breadcrumbs",n),n}),csui.define("css!csui/widgets/navigation.header/controls/breadcrumbs/impl/breadcrumbs",[],function(){}),csui.define("csui/widgets/navigation.header/controls/breadcrumbs/breadcrumbs.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","i18n!csui/widgets/navigation.header/controls/breadcrumbs/impl/nls/localized.strings","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/utils/contexts/factories/ancestors","csui/utils/contexts/factories/application.scope.factory","hbs!csui/widgets/navigation.header/controls/breadcrumbs/impl/breadcrumbs","css!csui/widgets/navigation.header/controls/breadcrumbs/impl/breadcrumbs"],function(e,t,i,n,o,s,r,l){"use strict";return i.ItemView.extend({"tagName":"button","attributes":{"type":"button"},"className":"breadcrumbs-handle binf-btn","ui":{"breadcrumbsTextContainer":".csui-breadcrumb-btn-innertext","breadcrumbsCaretContainer":".csui-breadcrumb-caret-type"},"serializeData":function(){var e=!!this.applicationScope.get("breadcrumbsVisible"),t={"breadcrumbsText":n.ShowBreadcrumbs,"breadcrumbsCaretName":"icon-expandArrowDownWhite"};return e&&(t={"breadcrumbsText":n.HideBreadcrumbs,"breadcrumbsCaretName":"icon-expandArrowUpWhite"}),t},"template":l,"events":{"keydown":"onKeyInView","click":"_toggleBreadCrumbs"},"behaviors":{"TabableRegion":{"behaviorClass":o}},"currentlyFocusedElement":function(){return this.$el},"onRender":function(){matchMedia&&(this._mq=window.matchMedia("(max-width: 1124px)"),this._mq.addListener(e.bind(this._windowsWidthChange,this)),this._windowsWidthChange(this._mq))},"constructor":function(e){i.ItemView.call(this,e),this.applicationScope=e.context.getModel(r),this.stopListening(this.applicationScope,"change:breadcrumbsVisible").listenTo(this.applicationScope,"change:breadcrumbsVisible",this._breadcrumbVisibilityChanged).listenTo(this.applicationScope,"change:breadcrumbsVisible",this._breadcrumbUpdateText),this.stopListening(this.applicationScope,"change:breadcrumbsAvailable").listenTo(this.applicationScope,"change:breadcrumbsAvailable",this._breadcrumbAvailabilityChanged),this.stopListening(this.applicationScope,"change:hideToggleButton").listenTo(this.applicationScope,"change:hideToggleButton",this._hideToggleButton),this._breadcrumbVisibilityChanged(),this._breadcrumbAvailabilityChanged()},"_breadcrumbVisibilityChanged":function(){this._breadcrumbsVisible=this.applicationScope.get("breadcrumbsVisible"),this._breadcrumbsVisible?(this.$el.removeClass("csui-breadcrumbs-hidden"),this.triggerMethod("refresh:tabindexes")):this.$el.addClass("csui-breadcrumbs-hidden")},"_hideToggleButton":function(e){var t=!!e.get("hideToggleButton"),i=this.$el.closest(".tile-breadcrumb");i.length&&i[t?"addClass":"removeClass"]("binf-hidden")},"_breadcrumbAvailabilityChanged":function(){this._breadcrumbsAvailable=this.applicationScope.get("breadcrumbsAvailable"),this._breadcrumbsAvailable?(this.$el.removeClass("csui-breadcrumbs-not-available"),this.triggerMethod("refresh:tabindexes")):this.$el.addClass("csui-breadcrumbs-not-available")},"_breadcrumbUpdateText":function(){this.applicationScope.get("breadcrumbsVisible")?(this.$el.attr("aria-label",n.HideBreadcrumbs),this.ui.breadcrumbsCaretContainer.removeClass("icon-expandArrowDownWhite").addClass("icon-expandArrowUpWhite"),this.ui.breadcrumbsTextContainer.text(n.HideBreadcrumbs)):(this.$el.attr("aria-label",n.ShowBreadcrumbs),this.ui.breadcrumbsCaretContainer.removeClass("icon-expandArrowUpWhite").addClass("icon-expandArrowDownWhite"),this.ui.breadcrumbsTextContainer.text(n.ShowBreadcrumbs))},"_showBreadcrumbs":function(){this.applicationScope.set("breadcrumbsVisible",!0)},"_hideBreadcrumbs":function(){this.applicationScope.set("breadcrumbsVisible",!1)},"_toggleBreadCrumbs":function(){this.applicationScope.set("breadcrumbsVisible",!this._breadcrumbsVisible)},"_windowsWidthChange":function(e){e.matches?(this._previousBreadcrumbState=this.applicationScope.get("breadcrumbsVisible"),this.applicationScope.set("breadcrumbsVisible",!0)):this.applicationScope.set("breadcrumbsVisible",this._previousBreadcrumbState)},"onKeyInView":function(e){switch(e.keyCode){case 9:this.ignoreFocusBlur=!1;break;case 13:case 32:this.ignoreFocusBlur=!1,e.preventDefault(),this.applicationScope.set("breadcrumbsVisible",!this._breadcrumbsVisible)}}})}),csui.define("hbs!csui/widgets/search.slices/impl/search.slices",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<label class="csui-search-popover-row-body" data-sliceid="'+e.escapeExpression((s=null!=(s=r(i,"sliceId")||(null!=t?r(t,"sliceId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"sliceId","hash":{},"loc":{"start":{"line":1,"column":58},"end":{"line":1,"column":69}}}):s))+'">\r\n    <input type="radio" class="csui-slice-option" data-sliceid="'+e.escapeExpression((s=null!=(s=r(i,"sliceId")||(null!=t?r(t,"sliceId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"sliceId","hash":{},"loc":{"start":{"line":2,"column":64},"end":{"line":2,"column":75}}}):s))+'" name="slice" value="'+e.escapeExpression((s=null!=(s=r(i,"sliceDisplayName")||(null!=t?r(t,"sliceDisplayName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"sliceDisplayName","hash":{},"loc":{"start":{"line":2,"column":97},"end":{"line":2,"column":119}}}):s))+'">\r\n        <span class="csui-search-popover-checked" data-sliceid="'+e.escapeExpression((s=null!=(s=r(i,"sliceId")||(null!=t?r(t,"sliceId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"sliceId","hash":{},"loc":{"start":{"line":3,"column":64},"end":{"line":3,"column":75}}}):s))+'"></span>\r\n        <span class="csui-search-popover-label" data-sliceid="'+e.escapeExpression((s=null!=(s=r(i,"sliceId")||(null!=t?r(t,"sliceId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"sliceId","hash":{},"loc":{"start":{"line":4,"column":62},"end":{"line":4,"column":73}}}):s))+'">'+e.escapeExpression((s=null!=(s=r(i,"sliceDisplayName")||(null!=t?r(t,"sliceDisplayName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"sliceDisplayName","hash":{},"loc":{"start":{"line":4,"column":75},"end":{"line":4,"column":97}}}):s))+"</span>\r\n</label>"}});return i.registerPartial("csui_widgets_search.slices_impl_search.slices",n),n}),csui.define("csui/widgets/search.slices/search.slices.item.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette3","hbs!csui/widgets/search.slices/impl/search.slices"],function(e,t,i,n){"use strict";return i.View.extend({"className":"csui-search-popover-row","template":n,"attributes":function(){return{"id":this.model.get("sliceId"),"title":this.model.get("sliceTooltip"),"aria-label":this.model.get("sliceDisplayName"),"tabindex":"-1"}},"templateContext":function(){return{"sliceDisplayName":this.model&&this.model.get("sliceDisplayName"),"sliceId":this.model&&this.model.get("sliceId")}},"events":{"click .csui-search-popover-row-body":"setSlices","keydown .csui-search-popover-row-body":"accessibility","keyup .csui-search-popover-row-body":"keyUpHandler"},"constructor":function(e){e||(e={}),this.options=e,i.View.prototype.constructor.call(this,e)},"setSlices":function(e){e.preventDefault(),e.stopPropagation();var t=this.model.get("sliceId"),i=this.$el.find(".icon-listview-checkmark").length;this.options.originatingView.options.sliceString="",this.options.parentView.removePreviousSelection(),i?this.$el.find(".csui-slice-option").prop("checked",!1):(this.$el.find(".csui-search-popover-checked").addClass("icon-listview-checkmark"),this.options.originatingView.options.sliceString="{"+t+"}",this.$el.find(".csui-slice-option").prop("checked",!0)),this.options.originatingView.namedLocalStorage.set("selectedSlice",this.options.originatingView.options.sliceString),this.options.originatingView.options.model.attributes.slice=this.options.originatingView.options.sliceString},"accessibility":function(e){switch(e.keyCode){case 9:e.shiftKey?this.options.originatingView.$el.find(".csui-selected-checkbox").length?(this.options.originatingView.$el.find(".csui-selected-checkbox").addClass("active"),this.options.originatingView.$el.find('.csui-selected-checkbox input[type="checkbox"]')[0].focus()):this.options.originatingView.ui.input[0].focus():this.options.originatingView.$el.find(".csui-slices-more").hasClass("binf-hidden")||!this.options.originatingView.$el.find(".csui-slices-more").length?this.options.originatingView.searchFormsContainerView.$el.find(".csui-searchforms-popover-row").length?this.options.originatingView.searchFormsContainerView.$el.find(".csui-searchforms-popover-row")[0].focus():t(this.options.originatingView.searchFormsContainerView.$el.find(".csui-searchforms-show-more")[0]).focus():this.options.originatingView.$el.find(".csui-slices-more")[0].focus(),this.$el.find(".csui-search-popover-row-body").removeClass("active");break;case 38:if(this.$el.find(".csui-search-popover-row-body").removeClass("active"),this.$el.prev().length)this.$el.prev().find(".csui-search-popover-row-body").addClass("active"),this.$el.prev().find('.csui-search-popover-row-body input[type="radio"]')[0].focus();else{var i=this.options.parentView.$el.find(".csui-search-popover-row-body");t(i[i.length-1]).addClass("active"),t(i[i.length-1]).find('input[type="radio"]')[0].focus()}break;case 40:this.$el.find(".csui-search-popover-row-body").removeClass("active"),this.$el.next().length?(this.$el.next().find(".csui-search-popover-row-body").addClass("active"),this.$el.next().find('.csui-search-popover-row-body input[type="radio"]')[0].focus()):(t(this.options.parentView.$el.find(".csui-search-popover-row-body")[0]).addClass("active"),t(this.options.parentView.$el.find('.csui-search-popover-row-body input[type="radio"]')[0])[0].focus());break;case 32:this.setSlices(e),this.$el.find(".csui-search-popover-row-body").addClass("active"),this.$el.find('.csui-search-popover-row-body input[type="radio"]')[0].focus();break;case 27:this.$el.removeClass("active"),this.options.originatingView.options.data.showOptionsDropDown&&this.options.originatingView.hideSearchOptionsDropDown();break;case 13:this.setSlices(e),this.$el.find(".csui-search-popover-row-body").addClass("active"),this.$el.find('.csui-search-popover-row-body input[type="radio"]')[0].focus()}e.preventDefault()},"keyUpHandler":function(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;32==e.keyCode&&t&&(e.stopPropagation(),e.preventDefault())}})}),csui.define("csui/widgets/search.slices/search.slices.list.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette3","csui/widgets/search.slices/search.slices.item.view"],function(e,t,i,n){"use strict";return i.CollectionView.extend({"className":"csui-search-slice-container","childView":n,"childViewOptions":function(){return{"collection":this.options.collection,"originatingView":this.options.originatingView,"parentView":this}},"constructor":function(e){e||(e={}),this.options=e,this.collection=e.collection,this.originatingView=e.originatingView,i.CollectionView.prototype.constructor.apply(this,arguments)},"removePreviousSelection":function(){var e=this.$el.find(".csui-search-popover-checked");t(e).removeClass("icon-listview-checkmark"),this.$el.find(".active").removeClass("active")},"getSelectedSlice":function(){!this.options.originatingView.options.sliceString&&this.options.originatingView.options.model&&this.options.originatingView.options.model.get("slice")&&(this.options.originatingView.options.sliceString=this.options.originatingView.options.model.get("slice")),this.$el.find(".csui-search-popover-checked").removeClass("icon-listview-checkmark"),this._setSliceValue(this.options.originatingView.options.sliceString)},"_setSliceValue":function(e){(e=e||this.options.originatingView.namedLocalStorage.get("selectedSlice"))&&"{}"!==e&&(this.$el.find("#"+e.substring(1,e.length-1)).find(".csui-search-popover-checked").addClass("icon-listview-checkmark"),this.$el.find("#"+e.substring(1,e.length-1)).find(".csui-slice-option").prop("checked",!0))}})}),csui.define("csui/widgets/search.forms/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.forms/impl/nls/root/lang",{"personalSearchFormsLabel":"My search forms","systemSearchFormsLabel":"Shared search forms","recentSearchFormsLabel":"Recent search forms","searchFormLabel":"Search forms","search":"Search","loading":"Loading...","showMore":"More search forms","openSearchFormsAria":"Open search forms dialog","showMoreSearchFormsAria":"Open more search forms dialog","searchFormTooltip":"Open: {0}","btnBack":"Back","btnBackAriaLabel":"Back to search forms","btnSearch":"Search"}),csui.define("css!csui/widgets/search.forms/impl/search.forms",[],function(){}),csui.define("csui/widgets/search.forms/search.forms",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/utils/non-emptying.region/non-emptying.region","i18n!csui/widgets/search.forms/impl/nls/lang","css!csui/widgets/search.forms/impl/search.forms"],function(e,t,i,n,o,s){"use strict";return i.View.extend({"className":"csui-search-form-container","constructor":function(e){e||(e={}),this.models=new n.Collection,i.View.prototype.constructor.call(this,e)},"findButton":function(t,i,n){var o=e.find(t,function(e){return e.get("btnType")===i});o&&o.set("hidden",n)},"openFormInSidepanel":function(i,n){var r=t.Deferred(),l=this;return csui.require(["csui/controls/side.panel/side.panel.view","csui/widgets/search.forms/search.form.view","csui/widgets/search.forms/search.forms.container.view"],function(a,c,u){var d;if(n){var h=i.get("schema");d=h.title?h.title:i.get("name"),l.customSearchForm=new c({"model":i,"searchFormId":n,"hideSearchButton":!0,"showInSearchResultsNewPerspective":!0,"context":l.options.options.context}),l.sidePanel&&(l.sidePanel.options.slides[0].content=l.customSearchForm)}else l.searchFormsContainerView||(l.searchFormsContainerView=new u({"searchFormsList":i,"originatingView":l})),d=s.searchFormLabel,l.sidePanel&&(l.sidePanel.options.slides[0].content=l.searchFormsContainerView),l.searchFormsContainerView.$el.removeClass("binf-hidden");if(!l.sidePanel||l.sidePanel&&l.sidePanel.isDestroyed){var p=new a({"slides":[{"title":d,"content":n?l.customSearchForm:l.searchFormsContainerView,"footer":{"leftButtons":[{"type":"action","v2Icon":{"iconName":"csui_action_back32","states":!0},"btnType":"back","className":"cs-go-back arrow_back csui-has-v2icon","attributes":{"title":s.btnBack,"aria-label":s.btnBackAriaLabel},"disabled":!!l.options.originatingView.hideBackButton}],"rightButtons":[{"label":s.search,"type":"action","id":"search-btn","btnType":"search","attributes":{"title":s.btnSearch,"aria-label":s.btnSearch},"className":"binf-btn binf-btn-primary csui-custom-search-form-submit cs-search","disabled":!1}]}}],"sidePanelClassName":"cvs-in-sidepanel"});l.sidePanel=p,p.show()}else if(l.sidePanel.$el.is(":visible")){var m=new o({"el":l.sidePanel.ui.body});l.sidePanel.slides[0].title=d,n?(m.$el.find(".csui-search-forms-list").addClass("binf-hidden"),m.$el.find(".csui-search-form-collection").addClass("binf-hidden"),m.$el.find(".csui-custom-view-search").removeClass("binf-hidden")):(m.$el.find(".csui-search-forms-list").removeClass("binf-hidden"),m.$el.find(".csui-search-form-collection").removeClass("binf-hidden"),m.$el.find(".csui-custom-view-search").remove(),l.sidePanel.trigger("after:show")),l.sidePanel.headerView.update(l.sidePanel.options.slides[0]),n&&m.show(l.sidePanel.options.slides[0].content)}var f=e.filter(e.flatten(e.map(l.customSearchForm&&l.customSearchForm.model.get("data"),e.values)),function(e){return e});!f||0!==f.length?(t(".cs-search").removeClass("binf-disabled").removeClass("csui-search-form-submit-disabled"),l.trigger("enable:search",!0)):(t(".cs-search").addClass("binf-disabled").addClass("csui-search-form-submit-disabled"),l.trigger("enable:search",!1)),n?(l.options.originatingView.hideBackButton?l.findButton(l.sidePanel.footerView.leftCollection.models,"back",!0):l.findButton(l.sidePanel.footerView.leftCollection.models,"back",!1),l.customSearchForm.listenTo(l.customSearchForm,"render:form",function(){l.sidePanel.triggerMethod("set:focus"),l.sidePanel.trigger("ensure:scrollbar")}),l.findButton(l.sidePanel.footerView.rightCollection.models,"search",!1)):(l.findButton(l.sidePanel.footerView.leftCollection.models,"back",!0),l.findButton(l.sidePanel.footerView.rightCollection.models,"search",!0)),l.sidePanel&&l.sidePanel.footerView.trigger("update:footer"),l.options.originatingView.$el.find(".csui-searchforms-popover-row").removeClass("binf-disabled"),l.sidePanel&&l.sidePanel.$el.find(".csui-searchforms-popover-row").removeClass("binf-disabled"),l.sidePanel.listenTo(l.customSearchForm,"button:click",function(e){if("search"===e.btnType)l.customSearchForm.options.query=l.options.options.model,l.customSearchForm.loadCustomSearch();else if("back"===e.btnType)return void l.openFormInSidepanel(l.options.originatingView.searchboxModel.get("search_forms"));l.sidePanel.hide()}),l.sidePanel.listenTo(l.sidePanel,"after:show",function(){l.isNewForm&&(l.customSearchForm.customFormView.formView.isFormChanged=void 0),l.sidePanel.trigger("update:scrollbar"),this.$el.find(".csui-searchforms-popover-row").length&&l.isKeyPress&&(this.$el.find(".csui-searchforms-popover-row")[0].focus(),l.isKeyPress=!1);var e=l.options.originatingView.cid;t(document).off("click."+e+" keydown."+e)}),
l.sidePanel.listenTo(l.sidePanel,"before:hide",function(){var e=l.options.originatingView;t(document).on("click."+e.cid+" keydown."+e.cid,e,e._hideSearchBar),l.options.originatingView.ui.input.attr("tabindex",0)}),l.sidePanel.listenTo(l.customSearchForm,"enable:search",function(e){l.customSearchForm.trigger("update:button","search-btn",{"disabled":!e})}),l.sidePanel.listenTo(l.sidePanel,"keydown",function(e){if(9===e.keyCode&&e.shiftKey&&"csui-side-panel-cancel"===t(e.target)[0].id){var i=l;i.searchFormsContainerView&&setTimeout(function(){i.searchFormsContainerView.systemSearchForms.$el.find(".csui-searchforms-popover-row")[0].focus()},0)}}),l.sidePanel.listenTo(l.customSearchForm,"click:search",function(){l.sidePanel.hide()}),r.resolve()},r.reject),r.promise()},"isModelFetched":function(e){if(this.isNewForm=!0,this.models&&this.models.length&&this.models.get(e)){var t=JSON.parse(JSON.stringify(this.models.get(e).originalAttributesData));this.models.get(e).set("data",t),this.openFormInSidepanel(this.models.get(e),e)}else{var i=this;csui.require(["csui/widgets/search.forms/search.form.model"],function(t){var n=new t({"id":e},{"connector":i.options.connector,"options":i.options});n.fetch().then(function(t){var o=JSON.parse(JSON.stringify(n.attributes.data));n.originalAttributesData=o,i.models.push(n),i.openFormInSidepanel(n,e)})})}}})}),csui.define("hbs!csui/widgets/search.forms/impl/search.forms",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'    <span class="csui-icon-standard-search"></span>\r\n'},"3":function(e,t,i,n,o){return'    <span class="csui-icon-query-form-search"></span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="javascript:void(0)" class="csui-searchforms-popover-row"\r\n   data-searchformid="'+e.escapeExpression((r=null!=(r=l(i,"searchFormId")||(null!=t?l(t,"searchFormId"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"searchFormId","hash":{},"loc":{"start":{"line":2,"column":22},"end":{"line":2,"column":39}}}):r))+'" id="'+e.escapeExpression((r=null!=(r=l(i,"searchFormId")||(null!=t?l(t,"searchFormId"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"searchFormId","hash":{},"loc":{"start":{"line":2,"column":45},"end":{"line":2,"column":62}}}):r))+"\" title='"+e.escapeExpression((r=null!=(r=l(i,"searchFormTooltip")||(null!=t?l(t,"searchFormTooltip"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"searchFormTooltip","hash":{},"loc":{"start":{"line":2,"column":71},"end":{"line":2,"column":94}}}):r))+"'\r\n   aria-label='"+e.escapeExpression((r=null!=(r=l(i,"searchFormName")||(null!=t?l(t,"searchFormName"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"searchFormName","hash":{},"loc":{"start":{"line":3,"column":15},"end":{"line":3,"column":35}}}):r))+"'>\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"quickLink"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":4,"column":2},"end":{"line":8,"column":9}}}))?s:"")+'  <span class="cs-label">'+e.escapeExpression((r=null!=(r=l(i,"searchFormName")||(null!=t?l(t,"searchFormName"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"searchFormName","hash":{},"loc":{"start":{"line":9,"column":25},"end":{"line":9,"column":45}}}):r))+"</span>\r\n</a>"}});return i.registerPartial("csui_widgets_search.forms_impl_search.forms",n),n}),csui.define("csui/widgets/search.forms/search.forms.item.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette3","hbs!csui/widgets/search.forms/impl/search.forms","i18n!csui/widgets/search.forms/impl/nls/lang","css!csui/widgets/search.forms/impl/search.forms"],function(e,t,i,n,o){"use strict";return i.View.extend({"className":"csui-search-form-item","template":n,"templateContext":function(){var t=this.model&&this.model.has("name")&&this.model.get("name"),i=this.model&&this.model.has("id")&&this.model.get("id");return t=t&&t.toLowerCase(),t=t&&t.charAt(0).toUpperCase()+t.slice(1),{"quickLink":"quick"===this.model.get("type"),"searchFormName":t,"searchFormId":i,"searchFormTooltip":e.str.sformat(o.searchFormTooltip,t)}},"events":{"click .csui-searchforms-popover-row":"openFormView","keydown .csui-searchforms-popover-row":"openFormView"},"constructor":function(e){e||(e={}),this.options=e,i.View.prototype.constructor.call(this,e)},"openFormView":function(t){t.preventDefault(),t.stopPropagation();var i=this.model,n=i.get("params")||{};if(13===t.keyCode||32===t.keyCode||"click"===t.type){if("quick"===i.get("type")){n.location_id1="";var o=this.options.originatingView;return o.options&&o.options.data&&o.options.data.searchFromHere&&o.searchOptions&&o.searchOptions.nodeId&&(n.location_id1=o.searchOptions.nodeId),n.where=n.where||"*",void this.options.originatingView.trigger("refine:search",t,n)}if("direct"===this.model.get("type")&&this.options.parentView&&this.options.parentView.options&&this.options.parentView.options.options&&this.options.parentView.options.options.fromSearchBox)return e.extend(n,{"forcePerspectiveChange":!0,"enableSearchForm":!0}),void this.options.originatingView.trigger("refine:search",t,n);if(this.$el.find(".csui-searchforms-popover-row").hasClass("binf-disabled"))return;this.$el.find(".csui-searchforms-popover-row").addClass("binf-disabled");var s=this.model.get("params")&&this.model.get("params").query_id?this.model.get("params").query_id:this.model.get("id");this.options.originatingView.isModelFetched?this.options.originatingView.isModelFetched(s):(this.options.originatingView.hideSearchOptionsDropDown(t),this.options.originatingView.searchForms.isModelFetched(s)),this.options.originatingView.searchFormsContainerView.$el.addClass("binf-hidden")}else"keydown"===t.type&&this._handleKeyEvents(t)},"_handleKeyEvents":function(e){switch(e.preventDefault(),e.keyCode){case 9:var i=this.options.parentView.options.parentView,n=this.options.parentView;if(e.shiftKey)e.shiftKey&&(i.personalSearchForms&&"personal_search_forms"!==n.options.listName?i.personalSearchForms.$el.find(".csui-searchforms-popover-row")[0].focus():i.recentSearchForms&&"recent_search_forms"!==n.options.listName?i.recentSearchForms.$el.find(".csui-searchforms-popover-row")[0].focus():i.recentSearchForms&&"recent_search_forms"===n.options.listName||i.personalSearchForms&&"personal_search_forms"===n.options.listName||i.systemSearchForms&&"system_search_forms"===n.options.listName?this.options.originatingView.sidePanel?this.options.originatingView.sidePanel.$el.find(".csui-sidepanel-close").trigger("focus"):this.options.originatingView.$el.find(".csui-slices-more").length>0&&!this.options.originatingView.$el.find(".csui-slices-more").hasClass("binf-hidden")?this.options.originatingView.$el.find(".csui-slices-more")[0].focus():(t(this.options.originatingView.$el.find(".csui-search-popover-row-body")[0]).addClass("active"),t(this.options.originatingView.$el.find('.csui-search-popover-row-body input[type="radio"]')[0])[0].focus()):this.options.originatingView.$el.find(".csui-selected-checkbox").length?(this.options.originatingView.$el.find(".csui-selected-checkbox").addClass("active"),this.options.originatingView.$el.find('.csui-selected-checkbox input[type="checkbox"]').trigger("focus")):(t(this.options.originatingView.$el.find(".csui-search-popover-row-body")[0]).addClass("active"),t(this.options.originatingView.$el.find('.csui-search-popover-row-body input[type="radio"]')[0])[0].focus()));else if(this.options.originatingView.$el.find(".csui-searchforms-show-more").length)this.options.originatingView.$el.find(".csui-searchforms-show-more").focus();else if(i.personalSearchForms&&"system_search_forms"!==n.options.listName&&"personal_search_forms"!==n.options.listName)i.personalSearchForms.$el.find(".csui-searchforms-popover-row")[0].focus();else if(i.systemSearchForms&&"system_search_forms"!==n.options.listName)i.systemSearchForms.$el.find(".csui-searchforms-popover-row")[0].focus();else{var o=i.options.originatingView.sidePanel.$el.find('[id = "csui-side-panel-cancel"]');o.addClass("active"),setTimeout(function(){o.trigger("focus")},0)}break;case 38:if(this.$el.prev().length)this.$el.removeClass("active"),this.$el.prev().addClass("active").find(".csui-searchforms-popover-row")[0].focus();else{var s=this.options.parentView.$el.find(".csui-searchforms-popover-row");s[s.length-1].focus()}break;case 40:this.$el.next().length?(this.$el.removeClass("active"),this.$el.next().addClass("active").find(".csui-searchforms-popover-row")[0].focus()):this.options.parentView.$el.find(".csui-searchforms-popover-row")[0].focus();break;case 27:var r=this.options.originatingView&&this.options.originatingView.options,l=r&&r.originatingView;this.$el.removeClass("active"),l&&r.options&&r.options.data&&r.options.data.showOptionsDropDown&&l.hideSearchOptionsDropDown(e)}}})}),csui.define("csui/widgets/search.forms/search.forms.list.view",["csui/lib/underscore","csui/lib/marionette3","csui/widgets/search.forms/search.forms.item.view","css!csui/widgets/search.forms/impl/search.forms"],function(e,t,i){"use strict";return t.CollectionView.extend({"className":"csui-search-form-list","childView":i,"childViewOptions":function(){return{"collection":this.options.collection,"originatingView":this.options.originatingView,"parentView":this}},"constructor":function(e){e||(e={}),this.options=e,this.collection=e.collection,this.originatingView=e.originatingView,t.CollectionView.prototype.constructor.apply(this,arguments)}})}),csui.define("hbs!csui/widgets/search.forms/impl/search.forms.container",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <nav aria-labelledby='recent_search_forms_header'>\r\n    <h2 id='recent_search_forms_header'\r\n        class='csui-search-label "+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"skipHeading"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":33},"end":{"line":4,"column":72}}}))?s:"")+"'>\r\n      "+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"labels"):t)?r(s,"recentSearchFormsLabel"):s,t))+"\r\n    </h2>\r\n    <div id='recent_search_forms' class=\"csui-recent-search-form-container\"></div>\r\n  </nav>\r\n"},"2":function(e,t,i,n,o){return" binf-hidden "},"4":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-more-forms">\r\n    <a href="javascript:void(0)" role="button" class="csui-searchforms-show-more"\r\n       data-searchformid="loadAllForms" aria-label="'+e.escapeExpression((s=null!=(s=r(i,"showMoreAria")||(null!=t?r(t,"showMoreAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"showMoreAria","hash":{},"loc":{"start":{"line":14,"column":52},"end":{"line":14,"column":68}}}):s))+'">\r\n      '+e.escapeExpression((s=null!=(s=r(i,"showMorelabel")||(null!=t?r(t,"showMorelabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"showMorelabel","hash":{},"loc":{"start":{"line":15,"column":6},"end":{"line":15,"column":23}}}):s))+"</a>\r\n  </div>\r\n"},"6":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <nav aria-labelledby='personal_search_forms_header'>\r\n    <h2 id='personal_search_forms_header'\r\n        class='csui-search-label'>"+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"labels"):t)?r(s,"personalSearchFormsLabel"):s,t))+"</h2>\r\n    <div id='personal_search_forms' class=\"csui-personal-search-form-container\"></div>\r\n  </nav>\r\n"},"8":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <nav aria-labelledby='system_search_forms_header'>\r\n    <h2 id='system_search_forms_header'\r\n        class='csui-search-label'>"+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"labels"):t)?r(s,"systemSearchFormsLabel"):s,t))+"</h2>\r\n    <div id='system_search_forms' class=\"csui-system-search-form-container\"></div>\r\n  </nav>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?r(t,"searchForms"):t)?r(s,"recent_search_forms"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":9,"column":7}}}))?s:"")+"\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"showMore"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":11,"column":0},"end":{"line":17,"column":7}}}))?s:"")+"\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?r(t,"searchForms"):t)?r(s,"personal_search_forms"):s,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":19,"column":0},"end":{"line":25,"column":7}}}))?s:"")+"\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?r(t,"searchForms"):t)?r(s,"system_search_forms"):s,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":27,"column":0},"end":{"line":33,"column":7}}}))?s:"")}});return i.registerPartial("csui_widgets_search.forms_impl_search.forms.container",n),n}),csui.define("csui/widgets/search.forms/search.forms.container.view",["csui/lib/backbone","csui/lib/underscore","csui/lib/marionette3","csui/widgets/search.forms/search.forms.list.view","hbs!csui/widgets/search.forms/impl/search.forms.container","i18n!csui/widgets/search.forms/impl/nls/lang","css!csui/widgets/search.forms/impl/search.forms"],function(e,t,i,n,o,s){"use strict";return i.View.extend({"className":"csui-search-form-collection","template":o,"templateContext":function(){return{"searchForms":this.options.searchFormsList,"labels":s,"showMore":!!this.options.showMore,"skipHeading":!!this.options.hasQuickSearches&&!!this.options.fromSearchBox,"showMorelabel":this.options.searchFormsList.recent_search_forms.length?s.showMore:s.searchFormLabel,"showMoreAria":this.options.searchFormsList.recent_search_forms.length?s.showMoreSearchFormsAria:s.openSearchFormsAria}},"regions":function(){var e={};return t.each(this.options.searchFormsList,function(t,i){e[i]="#"+i}),e},"constructor":function(e){e||(e={}),this.options=e,i.View.prototype.constructor.apply(this,arguments)},"onRender":function(){t.each(this.options.searchFormsList,t.bind(function(t,i){var n=this._createCollection(t);n.length&&("recent_search_forms"===i?(n=this.options.hasQuickSearches?n:new e.Collection(n.filter(function(e){return"quick"!==e.get("type")})),this.recentSearchForms=this._createListView(n,i),this.showChildView(i,this.recentSearchForms)):"system_search_forms"===i?(this.systemSearchForms=this._createListView(n,i),this.showChildView(i,this.systemSearchForms)):"personal_search_forms"===i&&(this.personalSearchForms=this._createListView(n,i),this.showChildView(i,this.personalSearchForms)))},this))},"_createListView":function(e,t){return new n({"options":this.options,"originatingView":this.options.originatingView,"collection":e,"listName":t,"parentView":this})},"_createCollection":function(i){var n,o=new e.Collection;return t.each(i,function(t){n=new e.Model(t),o.add(n)}),o}})}),csui.define("csui/widgets/search.box/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.box/impl/nls/root/lang",{"placeholder":"Search","clearerTitle":"Clear keywords","searchBoxTitle":"Enter your search term","searchOptionsTitle":"Show search options","searchOptionsHideTitle":"Hide search options","searchFromHere":"Search from here","searchIconTitle":"Search","searchIconAria":"Search in Content Server","searchOptionTooltip":"Select: {0}","startSearch":"Start search","searchLandmarkAria":"Global content search","searchWithinLabel":"Search within","showMore":"Show more","showMoreAria":"Show more slices","closeSearch":"Close search"}),csui.define("hbs!csui/widgets/search.box/impl/search.box",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'        <div class="csui-search-options-dropdown binf-hidden" >\r\n        <div class="csui-search-options-wrapper"></div>\r\n        </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="search-bar" role="dialog" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"messages"):t)?r(s,"searchLandmarkAria"):s,t))+'" aria-expanded="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"messages"):t)?r(s,"showOptionsDropDown"):s,t))+'">\r\n  <div class="search-bar-content">\r\n    <div class="csui-search-input-container">\r\n      <input type="search" class="csui-input" placeholder="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"messages"):t)?r(s,"placeholder"):s,t))+'"\r\n             title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"messages"):t)?r(s,"searchBoxTitle"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"messages"):t)?r(s,"searchBoxTitle"):s,t))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?r(t,"messages"):t)?r(s,"showOptionsDropDown"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":6},"end":{"line":10,"column":13}}}))?s:"")+'    </div>\r\n    <span class="csui-clearer formfield_clear" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"messages"):t)?r(s,"clearerTitle"):s,t))+'"\r\n          aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"messages"):t)?r(s,"clearerTitle"):s,t))+'" role="button"></span>\r\n    <span class="csui-separator"></span>\r\n    <span class="csui-formfield-search formfield_search" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"messages"):t)?r(s,"startSearchTitle"):s,t))+'"\r\n          aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"messages"):t)?r(s,"startSearchTitle"):s,t))+'" role="button"></span>\r\n  </div>\r\n</div>\r\n<div role="search" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"messages"):t)?r(s,"searchLandmarkAria"):s,t))+'" class="search-icon">\r\n  <a href="javascript:void(0);"\r\n     class="icon icon-global-search icon-header-search csui-header-search-icon csui-acc-focusable"\r\n     title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"messages"):t)?r(s,"searchIconTitle"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"messages"):t)?r(s,"searchIconAria"):s,t))+'"\r\n     aria-expanded="false"></a>\r\n</div>'}});return i.registerPartial("csui_widgets_search.box_impl_search.box",n),n}),csui.define("hbs!csui/widgets/search.box/impl/search.slices.popover",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-search-popover-row" data-sliceid="'+e.escapeExpression(e.lambda(null!=t?s(t,"sliceId"):t,t))+'"\r\n         title="'+e.escapeExpression(e.lambda(null!=t?s(t,"sliceTooltip"):t,t))+'" role="radio" aria-checked="false" tabindex="-1">\r\n      <div class="csui-search-popover-row-body" data-sliceid="'+e.escapeExpression(e.lambda(null!=t?s(t,"sliceId"):t,t))+'">\r\n        <div class="csui-search-popover-checked" data-sliceid="'+e.escapeExpression(e.lambda(null!=t?s(t,"sliceId"):t,t))+'" id="'+e.escapeExpression(e.lambda(null!=t?s(t,"sliceId"):t,t))+'"></div>\r\n        <div class="csui-search-popover-label" data-sliceid="'+e.escapeExpression(e.lambda(null!=t?s(t,"sliceId"):t,t))+'">'+e.escapeExpression(e.lambda(null!=t?s(t,"sliceDisplayName"):t,t))+"</div>\r\n      </div>\r\n    </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-search-slice-container" role="radiogroup">\r\n  <div class="csui-search-slice-container-first" role="presentation"></div>\r\n'+(null!=(s=r(i,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"slices"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":2},"end":{"line":11,"column":11}}}))?s:"")+'  <div class="csui-search-slice-container-last" role="presentation"></div>\r\n</div>\r\n'}});return i.registerPartial("csui_widgets_search.box_impl_search.slices.popover",n),n}),csui.define("hbs!csui/widgets/search.box/impl/search.slice.dropdown",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-selected-checkbox csui-slice-checkbox csui-checkbox-primary csui-searchbox-dd-panel" >\r\n  <label class="csui-search-slice-name csui-selectlabel" for="'+e.escapeExpression(e.lambda(null!=t?r(t,"nodeIdSO"):t,t))+'"\r\n          title="'+e.escapeExpression(e.lambda(null!=t?r(t,"fromHere"):t,t))+" "+e.escapeExpression(e.lambda(null!=t?r(t,"nodeName"):t,t))+'">\r\n    <input type="checkbox" '+e.escapeExpression((s=null!=(s=r(i,"checked")||(null!=t?r(t,"checked"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"checked","hash":{},"loc":{"start":{"line":5,"column":27},"end":{"line":5,"column":38}}}):s))+' aria-checked="true"  class="csui-searchbox-option" name="'+e.escapeExpression(e.lambda(null!=t?r(t,"nodeId"):t,t))+'" id="'+e.escapeExpression(e.lambda(null!=t?r(t,"nodeIdSO"):t,t))+'"\r\n           tabindex="-1" value="'+e.escapeExpression(e.lambda(null!=t?r(t,"nodeId"):t,t))+'">\r\n      <span class="csui-icon"></span>\r\n      <span class="csui-ellipsis" aria-hidden="true" >'+e.escapeExpression(e.lambda(null!=t?r(t,"fromHere"):t,t))+" "+e.escapeExpression(e.lambda(null!=t?r(t,"nodeName"):t,t))+"</span>\r\n  </label>\r\n  </div>\r\n"},"3":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-searchbox-slices-wrapper csui-searchbox-dd-panel">\r\n    <fieldset>\r\n      <legend class="csui-search-label">'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"slices"):t)?r(s,"searchWithinLabel"):s,t))+'</legend>\r\n      <div class="csui-search-slice-region" ></div>\r\n    </fieldset>\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?r(t,"slices"):t)?r(s,"more"):s,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":19,"column":4},"end":{"line":24,"column":11}}}))?s:"")+"  </div>\r\n"},"4":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <button class="csui-slices-more" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"slices"):t)?r(s,"showMoreAria"):s,t))+'" tabindex="-1" >\r\n        <span  class="csui-more-text">'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"slices"):t)?r(s,"showMore"):s,t))+'</span>\r\n       <span class="csui-button-icon icon-caret-down"></span>\r\n    </button>\r\n'},"6":function(e,t,i,n,o){return'  <div class="csui-searchbox-searchform-wrapper csui-searchbox-dd-panel">\r\n    <div class="csui-recent-searchforms-container" >\r\n    </div>\r\n  </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"nodeId"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":11,"column":7}}}))?s:"")+"\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"slices"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":0},"end":{"line":26,"column":7}}}))?s:"")+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"search_forms"):t,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":27,"column":0},"end":{"line":32,"column":7}}}))?s:"")+"\r\n"}});return i.registerPartial("csui_widgets_search.box_impl_search.slice.dropdown",n),n}),csui.define("css!csui/widgets/search.box/impl/search.box",[],function(){}),csui.define("csui/widgets/search.box/search.box.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/models/node/node.model","csui/utils/contexts/factories/search.box.factory","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/application.scope.factory","csui/utils/namedlocalstorage","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/widgets/search.slices/search.slices.list.view","csui/widgets/search.forms/search.forms","csui/widgets/search.forms/search.forms.container.view","csui/utils/contexts/factories/next.node","i18n!csui/widgets/search.box/impl/nls/lang","csui/utils/namedsessionstorage","hbs!csui/widgets/search.box/impl/search.box","hbs!csui/widgets/search.box/impl/search.slices.popover","hbs!csui/widgets/search.box/impl/search.slice.dropdown","i18n","csui/utils/base","csui/controls/tile/behaviors/perfect.scrolling.behavior","css!csui/widgets/search.box/impl/search.box","csui/lib/jquery.ui/js/jquery-ui","csui/lib/binf/js/binf"],function(e,t,i,n,o,s,r,l,a,c,u,d,h,p,m,f,g,v,b,w,y,x,C){"use strict";var _=t.defaults({},e.config(),{"showOptionsDropDown":!0,"showSearchInput":!1,"showInput":!1,"inputValue":"","slice":"","nodeId":"","nodeName":"","searchFromHere":!0,"enableSearchBarSettings":!0,"customSearchIconClass":"icon-header-search","customSearchIconNoHoverClass":"icon-header-search-nohover","customSearchIconCloseClass":"icon-header-search_close"});return n.ItemView.extend({"className":"csui-search-box","template":v,"templateHelpers":function(){return{"messages":{"showOptionsDropDown":this.options.data.showOptionsDropDown,"placeholder":this.options.data.placeholder||f.placeholder,"clearerTitle":f.clearerTitle,"startSearchTitle":f.startSearch,"searchIconTitle":f.searchIconTitle,"searchIconAria":f.searchIconAria,"searchBoxTitle":f.searchBoxTitle,"searchOptionsTitle":f.searchOptionsTitle,"startSearch":f.startSearch,"searchLandmarkAria":f.searchLandmarkAria}}},"slicePopOverTemplate":b,"sliceDropDownTemplate":w,"namedSessionStorage":new g,"ui":{"input":".csui-input","clearer":".csui-clearer","formfieldSearch":".csui-formfield-search","innerSeparator":".csui-separator","searchIcon":".csui-header-search-icon","dropDown":".csui-search-options-dropdown","dropDownWrapperClass":".csui-search-options-wrapper"},"events":{"click @ui.searchIcon":"searchHeaderIconClicked","keydown .csui-header-search-icon":"searchIconKeyPressed","click @ui.input":"inputClicked","keydown @ui.input":"inputTyped","keyup @ui.input":"inputChanged","paste @ui.input":"inputChanged","change @ui.input":"inputChanged","click @ui.clearer":"clearerClicked","click @ui.formfieldSearch":"formfieldSearchClicked","click .csui-searchbox-option":"selectSearchOption","keydown @ui.clearer":"keyDownOnClear","keydown @ui.formfieldSearch":"keyDownOnFormfieldSearch","keydown .csui-selected-checkbox":"accessibility","keyup .csui-selected-checkbox":"keyUpHandler","keyup .csui-slices-more":"keyUpHandler","keydown .csui-slices-more":"_handleSlicesShowMore","click .csui-slices-more":"showMore","click .csui-searchforms-show-more":"openSearchForm","keydown .csui-searchforms-show-more":"openSearchForm","focus @ui.input":"focusedOnSearchInput"},"currentlyFocusedElement":function(e){if(this.$el){var t=this.$el.find("*[data-cstabindex=-1]");t.length&&t.prop("tabindex",0);!(!!e&&e.shiftKey)&&this.$el.find(".search-bar").length&&this.$el.find(".search-bar").is(":visible")?(this.focusElement=this.$el.find(".csui-input"),this.skipShowingDropdown=!0):this.$el.find("a.csui-acc-focusable").length&&(this.focusElement=this.$el.find("a.csui-acc-focusable"))}return this.focusElement},"behaviors":{"PerfectScrolling":{"behaviorClass":C,"contentParent":".csui-search-options-wrapper","suppressScrollX":!0},"TabableRegion":{"behaviorClass":u}},"namedLocalStorage":new c("search_bar_settings"),"constructor":function(e){e||(e={}),e.data=t.defaults({},e.data,_),this.direction=y.settings.rtl?"left":"right";var o=e.context;e.model||(e.model=o.getModel(l)),this.applicationScope=o.getModel(a),n.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(this.model,"change:where",this._updateInput),this.searchBoxFactory=o.getFactory(r),this.searchboxModel=this.searchBoxFactory.property,this.options.data.showOptionsDropDown&&(this.listenTo(o,"sync:perspective",this._perspectiveSynced),this.listenTo(o,"change:current:node",this._currentNodeChanged),this.listenTo(this.searchboxModel,"change",this.prepareOptionsdropdown),this.listenTo(this.searchboxModel,"change",this.prepareSlicePopover),this.listenTo(this.searchboxModel,"change",this.prepareSearchFormsPopover),this.listenTo(this,"refine:search",this._refineSearch)),this.options.data.enableSearchBarSettings&&this.listenTo(this.searchboxModel,"change",this.updateSearchBarSettings),(this.model.get("where")||this.options.data.showSearchInput)&&i(document).on("click."+this.cid+" keydown."+this.cid,this,this._hideSearchBar),i(document).on("keydown."+this.cid,this,this._shortcutToQuery),this.searchForms=new h({"options":this.options,"connector":this.searchboxModel&&this.searchboxModel.connector,"originatingView":this})},"_refineSearch":function(e,t){this.model.clear({"silent":!0}),this.model.set(t),this.hideSearchOptionsDropDown(e)},"updateSearchBarSettings":function(){if(this.search_bar_settings=this.searchboxModel.get("search_bar_settings"),this.search_bar_settings&&this.search_bar_settings.full_text&&(this.namedLocalStorage.set("full_text",this.search_bar_settings.full_text),this.model)){var e=this.search_bar_settings&&this.search_bar_settings.full_text;this.model.set("modifier",e.modifier,{"silent":!0}),this.model.set("lookfor",e.lookfor,{"silent":!0})}},"_shortcutToQuery":function(e){if(e.ctrlKey&&114==e.keyCode){var t=e.data;t.isSearchInputVisible()?t.ui.input.trigger("focus"):t.searchIconClicked(e)}},"onBeforeDestroy":function(){i(document).off("click."+this.cid).off("keydown."+this.cid)},"isSearchbarVisible":function(){return this.$(".search-bar").is(":visible")},"isSearchInputVisible":function(){return this.$(".csui-input").is(":visible")},"handleKeydownNavbar":function(e){var t=i(".csui-navbar.binf-navbar .binf-container-fluid").find("*[tabindex]:visible").toArray(),n=t.unshift(this.$el);document.activeElement===t[n-1]&&i(document).find(".csui-help .csui-acc-tab-region").trigger("focus")},"_perspectiveSynced":function(e,t){this._currentNodeChanged(t)},"_currentNodeChanged":function(e){e instanceof s&&e.get("container")?(this.searchboxModel.nodeId=e.get("id"),this.searchboxModel.nodeName=e.get("name"),this.namedSessionStorage.set(this.searchboxModel.nodeId,this.searchboxModel.nodeName),this.searchboxModel.trigger("change")):(this.searchboxModel.nodeId=void 0,this.searchboxModel.nodeName=void 0,this.searchboxModel.trigger("change"))},"_dataSynced":function(e,t){this.searchboxModel&&(this.options.data&&this.options.data.alwaysFetchDropdown||!this.searchboxModel||!this.searchboxModel.fetched)&&this.searchBoxFactory.fetch()},"onRender":function(e){
this.options.data.showSearchInput&&(this.$el.find(".search-bar").show(),this.searchIconToClose());var t=this.options.data.inputValue||this.model.get("where");this.slice=this.options.data.slice||this.model.get("slice"),t&&(this._setInputValue(t),this.$el.find(".search-bar").show()),(this.options.data.showInput||t)&&(this.triggerMethod("before:show:input",this),this.ui.input.show(),this.triggerMethod("show:input",this)),e&&e.data&&this.$el.find(".csui-search-box .csui-header-search-icon").removeClass(e.data.options.data.customSearchIconCloseClass).addClass(e.data.options.data.customSearchIconClass)},"_createSliceCollection":function(e){var i,n=new o.Collection;return t.each(e,function(e){i=new o.Model({"sliceId":e.sliceId,"sliceDisplayName":e.sliceDisplayName,"sliceTooltip":e.sliceTooltip}),n.add(i)}),n},"prepareSlicePopover":function(e){var n=this.searchboxModel.get("slices"),o=n&&n.length>3?this._createSliceCollection(n.slice(0,3)):this._createSliceCollection(n);this.options.data.showOptionsDropDown&&(n&&(t.each(n,function(e){var i=e.sliceDisplayName;e.sliceTooltip=t.str.sformat(f.searchOptionTooltip,i)}),this.searchSlicesListView||(this.searchSlicesListView=new d({"originatingView":this,"collection":o}))),i(".search-bar").is(":visible")&&i(".binf-navbar-brand").removeClass("binf-navbar-collapse"))},"showSlices":function(){this.searchSlicesListView&&(this.searchSlicesRegion=new n.Region({"el":".csui-search-slice-region"}),this.searchSlicesRegion.$el.length&&this.searchSlicesRegion.show(this.searchSlicesListView),this.searchSlicesListView.getSelectedSlice())},"prepareSearchFormsPopover":function(){var e=this.searchboxModel.get("search_forms"),i=e&&e.recent_search_forms||[],n=-1!==t.findIndex(i,{"type":"quick"});this.searchFormsContainerView=new p({"searchFormsList":{"recent_search_forms":i.slice(0,5)},"originatingView":this,"showMore":!0,"hasQuickSearches":n,"fromSearchBox":!0})},"showSearchForms":function(){this.$el.hasClass("csui-search-expanded")&&this.searchFormsContainerView&&!this.searchFormsContainerView._isRendered&&(this.searchFormsRegion=new n.Region({"el":".csui-recent-searchforms-container"}),this.searchFormsRegion.$el.length&&this.searchFormsRegion.show(this.searchFormsContainerView))},"accessibility":function(e){switch(this.$el.find(".csui-selected-checkbox").attr("tabindex","0").removeClass("active"),e.keyCode){case 13:case 32:this.selectSearchOption(e),e.preventDefault();break;case 27:this.$el.find(".csui-selected-checkbox").attr("tabindex","-1"),this.$el.find(".active").removeClass("active"),this.options.data.showOptionsDropDown&&this.hideSearchOptionsDropDown(e);break;case 9:if(e.shiftKey)this.ui.input[0].focus();else{var t=this.$el.find(".csui-search-popover-row-body");i(t[0]).addClass("active"),i(t[0]).find('input[type="radio"]')[0].focus()}e.preventDefault()}},"keyUpHandler":function(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;32==e.keyCode&&t&&(e.stopPropagation(),e.preventDefault())},"hidePopover":function(e){this.options.data.showOptionsDropDown&&(this.$el.find(".csui-selected-checkbox").attr("tabindex","-1"),this.$el.find(".active").removeClass("active"),this.showOptionsDropdown(e))},"resetPageDefaults":function(e){this.model.resetDefaults=!0},"searchIconKeyPressed":function(e){32===e.keyCode&&(e.preventDefault(),this.searchIconClicked(e))},"searchHeaderIconClicked":function(e){i(".search-bar").is(":visible")?(this._hideSearchBar(e),this._hideSearchPanel(e)):(this.searchIconToClose(),this.searchIconClicked(e));var n=this.options&&this.options.parentView;n&&n.listenToOnce(n,"control:clicked",t.bind(function(){i(".search-bar").is(":visible")&&(this._hideSearchBar(e),this._hideSearchPanel(e))},this))},"focusedOnSearchInput":function(e){if(this.skipShowingDropdown||this._isDropdownVisible())return void(this.skipShowingDropdown=!1);e.preventDefault(),this._dataSynced(),this.$el.addClass("csui-search-expanded"),this.ui.input.prop("tabindex",0),this.$el.addClass("csui-searchbox-ready"),this.searchboxModel&&this.searchboxModel.fetched?(this.showSearchForms(),this.showSlices(),this.closeDropdown=!1,i(document.activeElement)[0]===this.ui.input[0]&&this.options.data.showOptionsDropDown&&this.showOptionsDropdown(e)):(this.listenTo(this.searchboxModel,"change",function(){this.showSearchForms(),this.showSlices(),document.querySelector(".csui-search.search-input-open")&&"search"!==this.applicationScope.get("id")&&i(document.activeElement)[0]===this.ui.input[0]&&this.options.data.showOptionsDropDown&&this.showOptionsDropdown(e)}),this._updateInput(),this.options.data.showOptionsDropDown&&(this.searchboxModel.get("slices")||this.prepareSlicePopover(),this.searchboxModel.get("search_forms_slice")||this.prepareSearchFormsPopover()))},"searchIconClicked":function(e){this._dataSynced(),this.$el.parent().addClass("search-input-open"),this.ui.searchIcon.attr("aria-expanded","true");var t=this.$el.find(".csui-searchbox-option")[0];if(i(document).on("click."+this.cid+" keydown."+this.cid,this,this._hideSearchBar),this.resetPageDefaults(e),this.options.data.showOptionsDropDown&&t&&void 0!==this.searchboxModel.nodeId&&(this.$el.find(".csui-searchbox-option")[0].checked=this.options.data.searchFromHere),i(".search-bar").is(":visible")){var n=this.ui.input.val().trim();n&&(this._setInputValue(n),i(e.currentTarget).attr("title",f.startSearch),i(e.currentTarget).attr("aria-label",f.startSearch),this.trigger("hide:breadcrumbspanel"));var o="",s=this.$el.find(".csui-searchbox-option.selected");this.options.data.showOptionsDropDown?s&&(o=s.val()):o=this.options.data.nodeId,history.state&&history.state.search&&(this.previousState=history.state.search),n&&(this._setSearchQuery(n,this.options.sliceString,o,e),this._updateInput(),this.options.data.searchFromHere||i(this.ui.dropDown).addClass("csui-selected-checkbox-hidden"),this.options.data.showOptionsDropDown&&this.hideSearchOptionsDropDown(e),this.options.data.searchFromHere=!0),this.previousState&&(this.model.prevSearchState=this.previousState)}else this.$el.addClass("csui-search-expanded"),x.onTransitionEnd(this.$el.parent(),function(){this.isDestroyed||(this.skipShowingDropdown=!0,this.ui.input.trigger("focus"),this.ui.input.prop("tabindex",0),this.$el.addClass("csui-searchbox-ready"),this.searchboxModel&&this.searchboxModel.fetched?(this.showSearchForms(),this.showSlices(),this.closeDropdown=!1,i(document.activeElement)[0]===this.ui.input[0]&&this.options.data.showOptionsDropDown&&this.showOptionsDropdown(e)):this.listenTo(this.searchboxModel,"change",function(){this.showSearchForms(),this.showSlices(),document.querySelector(".csui-search.search-input-open")&&"search"!==this.applicationScope.get("id")&&i(document.activeElement)[0]===this.ui.input[0]&&this.options.data.showOptionsDropDown&&this.showOptionsDropdown(e)}))},this),this._updateInput(),i(".binf-navbar-brand").removeClass("binf-navbar-collapse"),this.options.data.showOptionsDropDown&&(this.searchboxModel.get("slices")||this.prepareSlicePopover(),this.searchboxModel.get("search_forms_slice")||this.prepareSearchFormsPopover()),""===this.model.attributes.where&&(e.currentTarget.title="",i(e.currentTarget).addClass(this.options.data.customSearchIconNoHoverClass))},"inputTyped":function(e){var t=this.ui.input.val().trim();if(13===e.which)e.preventDefault(),e.stopPropagation(),this._setInputValue(t),t?(this.closeDropdown=!0,this.searchIconClicked(e)):this.closeDropdown=!1,this.previousValue!=t&&(this.previousValue=t);else if(27===e.which)e.preventDefault(),e.stopPropagation(),this._hideSearchPanel(e);else if(this.closeDropdown=!1,9===e.which&&this._isDropdownVisible()&&!e.shiftKey){if(this.$el.find(".csui-selected-checkbox").is(":visible"))this.$el.find(".csui-selected-checkbox").attr("tabindex","0").addClass("active"),this.$el.find('.csui-selected-checkbox input[type="checkbox"]')[0].focus();else{var n=this.$el.find(".csui-search-popover-row-body");i(n[0]).addClass("active"),i(n[0]).find('input[type="radio"]').trigger("focus")}e.preventDefault()}else e.shiftKey&&"Tab"===e.key?(this.$el.find(".active").removeClass("active"),this.options.data.showOptionsDropDown&&this.hideSearchOptionsDropDown(e)):this.inputChanged(e)},"inputChanged":function(e){var t=this.ui.input.val();this.ui.clearer.prop("tabindex",""!==t?0:-1),this.ui.formfieldSearch.prop("tabindex",""!==t?0:-1),this.ui.clearer.toggle(!!t.length),this.ui.innerSeparator.toggle(!!t.length),this.ui.formfieldSearch.toggle(!!t.length),13===e.keyCode&&t&&(this.closeDropdown=!!t),this.options.data.showOptionsDropDown&&this.showOptionsDropdown(e)},"inputClicked":function(e){this.closeDropdown&&(this.closeDropdown=!1),this.hidePopover(e)},"showOptionsDropdown":function(e){if(this.hideBackButton=!0,!this._isDropdownVisible()&&this.options.data.showOptionsDropDown){var t=e||window.event,n=this.getSlices(),o=n&&n.length>3?this._createSliceCollection(n.slice(0,3)):this._createSliceCollection(n);if(!this.searchboxModel.nodeId||"search"===this.applicationScope.get("id")&&i(this.ui.dropDown).hasClass("csui-selected-checkbox-hidden")?(this.$el.find(".csui-selected-checkbox").addClass("binf-hidden"),i(this.ui.dropDown).addClass("csui-selected-checkbox-hidden")):i(this.ui.dropDown).removeClass("csui-selected-checkbox-hidden"),27!==t.keyCode&&!this.closeDropdown&&(i(this.ui.dropDown).removeClass("binf-hidden"),this.$el.find(".csui-selected-checkbox").is(":visible")&&(this.$el.find(".csui-searchbox-option")[0].checked=this.options.data.searchFromHere),!i(document.body).hasClass("binf-modal-open"))){if(i(document.body).addClass("binf-search-box-open"),i(document).find(".csui-navbar.binf-navbar").addClass("masked"),!i(document).find(".search-box-widget-mask").length){var s=document.createElement("div");s.className="search-box-widget-mask",i(document.body).find(".binf-widgets").append(s)}i(document).find(".csui-navbar.binf-navbar").on(" keydown.",this.handleKeydownNavbar)}this.options.data.searchFromHere&&(this.$el.find(".csui-searchbox-option").addClass("selected"),this.$el.find(".csui-icon").addClass("icon-listview-checkmark"),this.$el.find(".csui-icon").addClass("icon-checkbox-selected")),n&&(this.searchboxModel.get("slices").more&&this.$el.find(".csui-slices-more").removeClass("binf-hidden"),this.searchSlicesListView=new d({"originatingView":this,"collection":o})),this.$el.find(".csui-search-form-collection").length&&this.$el.find(".csui-search-form-collection").removeClass("binf-hidden"),this.showSearchForms(),this.showSlices()}this.ui.dropDownWrapperClass.scrollTop(this.ui.dropDownWrapperClass.position().top),this.trigger("ensure:scrollbar")},"prepareOptionsdropdown":function(e){if(this.options.data.showOptionsDropDown){if(!this.searchboxModel.nodeId){var i=t.has(this.options,"context")&&this.options.context.getModel(m);i&&i instanceof s&&i.get("container")&&(this.searchboxModel.nodeId=i.get("id"),this.searchboxModel.nodeName=i.get("name"),this.namedSessionStorage.set(this.searchboxModel.nodeId,this.searchboxModel.nodeName))}!this.searchboxModel.nodeId&&this.model.get("location_id1")&&(this.searchboxModel.nodeId=this.model.get("location_id1"),this.namedSessionStorage.get(this.searchboxModel.nodeId)&&(this.searchboxModel.nodeName=this.namedSessionStorage.get(this.searchboxModel.nodeId))),this.searchOptions={},this.searchboxModel.nodeId&&(this.searchOptions.nodeId=this.searchboxModel.nodeId,this.searchOptions.nodeIdSO=t.uniqueId("csui-so-"+this.searchboxModel.nodeId),!this.searchboxModel.nodeName&&this.options.data.nodeName&&(this.searchboxModel.nodeName=this.options.data.nodeName),this.searchboxModel.nodeName&&(this.searchOptions.nodeName=" ("+this.searchboxModel.nodeName+")"),this.searchOptions.select=f.searchOptionsSelect,this.searchOptions.fromHere=f.searchFromHere,this.searchOptions.checked=this.options.data.searchFromHere?"checked":""),this.searchboxModel.get("slices")&&(this.searchOptions=t.extend(this.searchOptions,this.searchboxModel.attributes),this.searchOptions.slices.searchWithinLabel=f.searchWithinLabel,this.searchOptions.slices.showMore=f.showMore,this.searchOptions.slices.showMoreAria=f.showMoreAria,this.searchOptions.slices.more=this.searchOptions.slices.length>3);var n=this.sliceDropDownTemplate(this.searchOptions);this.ui.dropDownWrapperClass.html(n),this.searchOptions.fromHere&&(this.$el.find(".csui-searchbox-option").addClass("selected"),this.$el.find(".csui-icon").addClass("icon-listview-checkmark icon-checkbox-selected"),this.$el.find('.csui-selected-checkbox input[type="checkbox"]').attr("aria-checked",!0))}},"destroyOptionspopover":function(e){this.ui.dropDown.html(""),this.ui.dropDown.addClass("binf-hidden")},"selectSearchOption":function(e){"keydown"!==e.type||13!==e.keyCode&&32!==event.keyCode?"click"===e.type&&(this.$el.find(".active").removeClass("active"),this.$el.find(".csui-selected-checkbox").attr("tabindex","0").removeClass("active").trigger("focus")):(this.$el.find(".csui-selected-checkbox").attr("tabindex","0").addClass("active"),this.$el.find('.csui-selected-checkbox input[type="checkbox"]').trigger("focus")),this.options.data.searchFromHere?(this.options.data.searchFromHere=!1,this.$el.find(".csui-searchbox-option").removeClass("selected"),this.$el.find(".csui-icon").removeClass("icon-listview-checkmark"),this.$el.find(".csui-icon").removeClass("icon-checkbox-selected"),this.$el.find('.csui-selected-checkbox input[type="checkbox"]').attr("aria-checked",!1)):(this.options.data.searchFromHere=!0,this.$el.find(".csui-searchbox-option").addClass("selected"),this.$el.find(".csui-icon").addClass("icon-listview-checkmark"),this.$el.find(".csui-icon").addClass("icon-checkbox-selected"),this.$el.find('.csui-selected-checkbox input[type="checkbox"]').attr("aria-checked",!0))},"handleSelectCheckbox":function(e){if(40===e.keyCode){var t=this.$el.find(".csui-search-popover-row-body"),n=t.index(t.filter(".active"));n=n>=0?n:0,i(t[n]).attr("tabindex",0),i(t[n]).addClass("active"),i(t[n]).find('input[type="radio"]')[0].focus()}},"hideSearchOptionsDropDown":function(e){var t=this;if(t.$el.find(".csui-searchbox-option")[0]===document.activeElement)return!1;if(t.options.data.showOptionsDropDown){return t.showSearchOptionDropDown(e),!0}},"showSearchOptionDropDown":function(e){this.options.data.showOptionsDropDown&&(this.ui.dropDown.is(":hover")&&"click"!==e.type?this.popoverTimer&&clearTimeout(this.popoverTimer):(this.ui.dropDown&&this.ui.dropDown.addClass("binf-hidden"),i(document.body).hasClass("binf-search-box-open")&&(i(document.body).removeClass("binf-search-box-open"),i(document).find(".csui-navbar.binf-navbar").removeClass("masked"),i(document.body).find(".search-box-widget-mask").remove(),i(document).find(".csui-navbar.binf-navbar").off(" keydown.",this.handleKeydownNavbar))))},"keyDownOnClear":function(e){13!==e.keyCode&&32!==e.keyCode||this.clearerClicked(e)},"clearerClicked":function(e){e.preventDefault(),e.stopPropagation(),this._setInputValue(""),this.hidePopover(e),this.ui.input.trigger("focus")},"keyDownOnFormfieldSearch":function(e){13!==e.keyCode&&32!==e.keyCode||this.formfieldSearchClicked(e)},"formfieldSearchClicked":function(e){this.searchIconClicked(e)},"_setSearchQuery":function(e,t,i,n){this.model.clear({"silent":!0});var o={};t&&(o.slice=t),i&&(o.location_id1=i),e&&(o.where=e);var s=this.search_bar_settings&&this.search_bar_settings.full_text;s&&(s.modifier||s.lookfor)&&(o.modifier=s.modifier,o.lookfor=s.lookfor),this.model.set(o)},"getSlices":function(){var e,i,n=this.options.model&&this.options.model.get("slice")?this.options.model.get("slice"):this.namedLocalStorage.get("selectedSlice");return this.options.sliceString=n,i=n?t.filter(this.searchboxModel.get("slices"),function(t){if(t.sliceId!=n.substring(1,n.length-1))return!0;e=t}):this.searchboxModel.get("slices"),e&&i.unshift(e),i},"showMore":function(){var e=this._createSliceCollection(this.getSlices());this.searchSlicesListView=new d({"originatingView":this,"collection":e}),this.$el.find(".csui-slices-more").addClass("binf-hidden"),this.showSlices(),i(this.searchSlicesListView.$el.find('.csui-search-popover-row-body input[type="radio"]')[3])[0].focus(),this.trigger("ensure:scrollbar")},"_handleSlicesShowMore":function(e){switch(e.keyCode){case 27:this.options.data.showOptionsDropDown&&this.hideSearchOptionsDropDown();break;case 32:case 13:this.showMore(),i(this.searchSlicesListView.$el.find(".csui-search-popover-row-body")[3]).addClass("active");break;case 9:e.shiftKey?(i(this.searchSlicesListView.$el.find(".csui-search-popover-row-body")[0]).addClass("active"),i(this.searchSlicesListView.$el.find('.csui-search-popover-row-body input[type="radio"]')[0])[0].focus()):this.searchFormsContainerView.$el.find(".csui-searchforms-popover-row").length?this.searchFormsContainerView.$el.find(".csui-searchforms-popover-row")[0].focus():this.searchFormsContainerView.$el.find(".csui-searchforms-show-more")[0].focus()}e.preventDefault()},"openSearchForm":function(e){if(13===e.keyCode||32===e.keyCode||"click"===e.type){if(this.$el.find(".csui-searchforms-popover-row").hasClass("binf-disabled"))return;this.$el.find(".csui-searchforms-popover-row").addClass("binf-disabled"),this.hideSearchOptionsDropDown(e);"loadAllForms"===i(e.currentTarget).data("searchformid")&&(this.hideBackButton=!1,this.searchForms.isKeyPress=13===e.keyCode||32===e.keyCode,this.searchForms.openFormInSidepanel(this.searchboxModel.get("search_forms")))}else if(9===e.keyCode)if(e.preventDefault(),e.shiftKey)if(this.$el.find(".csui-searchforms-popover-row").length){var t=this;setTimeout(function(){t.$el.find(".csui-searchforms-popover-row")[0].focus()},0)}else this.$el.find(".csui-slices-more").hasClass("binf-hidden")?this.$el.find(".csui-search-popover-row-body").length?(i(this.$el.find(".csui-search-popover-row-body")[0]).addClass("active"),i(this.$el.find('.csui-search-popover-row-body input[type="radio"]')[0]).focus()):this.ui.input&&this.ui.input.trigger("focus"):this.$el.find(".csui-slices-more").focus();else this.hideSearchOptionsDropDown(),this.$el.find(".csui-clearer").is(":visible")?this.$el.find(".csui-clearer").focus():this.$el.find(".csui-header-search-icon").focus();else 27===e.keyCode&&this.options.data.showOptionsDropDown&&this.hideSearchOptionsDropDown()},"_hideSearchPanel":function(e){e.data=e.data||this;var n=(e||window.event,i(".search-bar"),e.data),o=n.$el.parent();i(document).find("."+e.data.options.data.customSearchIconNoHoverClass).removeClass(e.data.options.data.customSearchIconNoHoverClass),i(document).find(".csui-input").val(""),o.removeClass("search-input-open"),x.onTransitionEnd(o,function(){n.options.parentView&&n.options.parentView.trigger("render:controls"),this.isDestroyed||(i(".binf-navbar-brand").addClass("binf-navbar-collapse"),n.$el.removeClass("csui-searchbox-ready").removeClass("csui-search-expanded"))},this),i(document).find(".csui-search-box .csui-header-search-icon")[0].title=f.searchIconTitle,i(i(document).find(".csui-search-box .csui-header-search-icon")[0]).attr("aria-label",f.searchIconTitle),i(i(document).find(".csui-search-box .csui-header-search-icon")[0]).attr("aria-expanded","false"),e.data.slice=e.data.model.get("slice"),e.data.ui.dropDown.addClass("binf-hidden"),i(document.body).hasClass("binf-search-box-open")&&(i(document.body).removeClass("binf-search-box-open"),i(document).find(".csui-navbar.binf-navbar").removeClass("masked"),i(document.body).find(".search-box-widget-mask").remove(),i(document).find(".csui-navbar.binf-navbar").off(" keydown.",this.handleKeydownNavbar)),i(document).find(".csui-search-box .csui-header-search-icon").removeClass(e.data.options.data.customSearchIconCloseClass).addClass(e.data.options.data.customSearchIconClass),i(document).off("click."+this.cid+" keydown."+this.cid),e.data.trigger("hide:searchbar"),i(".csui-input").prop("tabindex",-1),n.$el.find(".active").removeClass("active"),t.isObject(n.ui.searchIcon)&&n.ui.searchIcon.trigger("focus")},"_isDropdownVisible":function(){return this.ui.dropDown.is(":visible")},"_hideSearchBar":function(e){e.data=e.data||this;var t=e||window.event,n=i(".search-bar"),o=e.data,s=o.$el.parent(),r=o.ui.input.val().trim(),l=n.find(".csui-search-options-dropdown");s.hasClass("search-input-open")&&r&&!i(e.target).is(".csui-input")&&o._isDropdownVisible()&&0===l.find(e.target).length?(l.addClass("binf-hidden"),i(document).find(".csui-navbar.binf-navbar").removeClass("masked"),i(document.body).find(".search-box-widget-mask").remove()):("search"!==o.applicationScope.get("id")&&n.is(":visible")||i(e.target).find(".search-input-open").length||i(e.target).siblings().find(".search-input-open").length||i(e.target).hasClass("search-input-open"))&&(("keydown"!==t.type||27!==t.keyCode&&27!==t.which||i(".search-bar-content .binf-popover").is(":visible"))&&(i(t.target).closest(n).length||"click"!==t.type||i(t.target).closest(".csui-header-search-icon").length||i(t.target).closest(".esoc-activityfeed-invisiblebutton").length)||o._hideSearchPanel(e))},"_updateInput":function(){if(this._isRendered){var e=this.model.get("where")||"";this._setInputValue(e)}},"_setInputValue":function(e){this.ui.input.val(e),this.ui.clearer.toggle(!!e.length),this.ui.innerSeparator.toggle(!!e.length),this.ui.formfieldSearch.toggle(!!e.length),this.options.data.showOptionsDropDown&&(this.options.data.nodeName=this.searchboxModel.nodeName)},"searchIconToClose":function(){t.isObject(this.ui.searchIcon)&&this.ui.searchIcon.hasClass(this.options.data.customSearchIconClass)&&this.ui.searchIcon.removeClass(this.options.data.customSearchIconClass).addClass(this.options.data.customSearchIconCloseClass),this.ui.input.addClass("csui-input-focus"),i(this.ui.searchIcon).attr("title",f.closeSearch),i(this.ui.searchIcon).attr("aria-label",f.closeSearch),i(this.ui.searchIcon).removeClass(this.options.data.customSearchIconNoHoverClass)}})}),csui.define("csui/widgets/navigation.header/controls/search/search.view",["csui/widgets/search.box/search.box.view","csui/utils/contexts/factories/search.query.factory","csui/controls/globalmessage/globalmessage"],function(e,t,i){"use strict";return e.extend({"constructor":function(i){e.call(this,i),this.searchQuery=i.context.getModel(t)},"onRender":function(){var e=function(){i.trigger("resize")};this.listenTo(this,"hide:input",e),this.listenTo(this,"show:input",e)}})}),csui.define("csui/widgets/navigation.header/controls/favorites/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/navigation.header/controls/favorites/impl/nls/root/localized.strings",{"FavoritesIconTitle":"Favorites","FavoritesTitleAria":"Content Server Favorites"}),csui.define("hbs!csui/widgets/navigation.header/controls/favorites/impl/favorites",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-favorites-icon-container" title="'+e.escapeExpression((s=null!=(s=r(i,"title")||(null!=t?r(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":1,"column":50},"end":{"line":1,"column":59}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=r(i,"favoritesTitleAria")||(null!=t?r(t,"favoritesTitleAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"favoritesTitleAria","hash":{},"loc":{"start":{"line":1,"column":73},"end":{"line":1,"column":95}}}):s))+'" role="button" aria-haspopup="true" aria-expanded="false">\r\n  <span class="csui-icon-favorites favorite_header_icon"></span>\r\n</div>\r\n<div class="csui-favorites-view-container"></div>\r\n'}});return i.registerPartial("csui_widgets_navigation.header_controls_favorites_impl_favorites",n),n}),csui.define("csui/controls/tabletoolbar/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/tabletoolbar/impl/nls/root/localized.strings",{"ToolbarAria":"Table toolbar","ToolbarItemFilter":"Show filters","ToolbarItemFilterAria":"Show filter panel","ToolbarItemOpen":"Open","ToolbarItemDownload":"Download","ToolbarItemBrowse":"Browse","ToolbarItemCopy":"Copy","ToolbarItemEmailLink":"Mail as link","ToolbarItemEmailLinkShort":"Mail as link","ToolbarItemPaste":"Paste","ToolbarItemMove":"Move","ToolbarItemShare":"Share","ToolbarItemSendTo":"Send to","ToolbarItemNavigate":"Visit","ToolbarItemViewProperties":"Properties","ToolbarItemVersionHistory":"Version history","ToolbarItemDelete":"Delete","ToolbarItemReserve":"Reserve","ToolbarItemUnreserve":"Unreserve","ToolbarItemLock":"Lock","ToolbarItemUnlock":"Unlock","ToolbarItemEdit":"Edit","ToolbarItemRename":"Rename","ToolbarItemRenameFavorite":"Rename favorite","ToolbarItemOpenSavedQuery":"Open","ToolbarItemExecuteSavedQuery":"Execute","ToolbarItemInfo":"Properties","ToolbarItemTimeline":"Timeline","ToolbarItemToggleTableLayout":"Toggle layout","ToolbarItemSettings":"Settings","ToolbarItemAddFolder":"Folder","ToolbarItemAddDocument":"Document","ToolbarItemAdd":"Add","ToolbarItemAddItem":"Add item","ToolbarItemAddVersion":"Add version","ToolbarItemAddCategories":"Add categories","ToolbarItemMore":"More actions","ToolbarItemPrint":"Print","ToolbarItemOriginalEdit":"Edit original","ToolbarItemOriginalShare":"Share original","ToolbarItemOriginalReserve":"Reserve original","ToolbarItemOriginalUnreserve":"Unreserve original","ToolbarItemOriginalCopy":"Copy original","ToolbarItemOriginalMove":"Move original","ToolbarItemOriginalDownload":"Download original","ToolbarItemOriginalDelete":"Delete original","ToolbarItemCopyLink":"Copy link","ToolbarItemOriginalCopyLink":"Copy link original","ToolbarItemPermissions":"View permissions","ToolbarItemDeletePermission":"Remove from list","ToolbarItemEditPermission":"Edit permissions","ToolbarItemApplyPermission":"Apply permissions to sub-items","ToolbarItemChangeOwnerPermission":"Change owner","ToolbarItemRemoveCollectionItems":"Remove from collection","ToolbarItemInformation":"Properties","ToolbarGoToLocation":"Go to location","ToolbarCollect":"Collect","ToolbarItemZipAndDownload":"Download","ToolbarItemGoBack":"Go back","ToolbarItemTreeBrowse":"Show navigation tree","ToolbarItemRestructure":"Restructure","MenuItemUploadFile":"Upload file","MenuItemAddNewFolder":"Add new Folder","MenuItemZipAndDownload":"Download","MenuItemCopy":"Copy","MenuItemMove":"Move","MenuItemEmailLink":"Email link","MenuItemShare":"Share","MenuItemReserve":"Reserve","MenuItemUnreserve":"Unreserve","MenuItemDelete":"Delete","MenuItemSendToDevice":"Send to device","MenuItemRename":"Rename","MenuItemTimeline":"Timeline","MenuItemInformation":"Properties","MenuItemCopyLink":"Copy link","MenuItemRestructure":"Restructure","ToolbarItemComment":"Comment","ToolbarItemShowDescription":"Show description","ToolbarItemConfiguration":"Configuration","ToolbarItemMaximizeWidgetView":"Maximize widget view","ToolbarItemRestoreWidgetViewSize":"Restore widget view size","AddUserOrGroups":"Add user or groups","AddOwnerOrGroup":"Add owner or owner group","RestorePublicAccess":"Restore public access","AddToolbarItemsTitle":"Add {0}","ToolbarItemThumbnail":"Grid view","ToolbarItemListView":"List view","ThumbnailTitle":"Grid view","ListViewTitle":"List view","ToolbarItemDocPreview":"View","CreateRelease":"Create release","CreateRevision":"Create revision","ToolbarItemViewReleases":"View releases","compoundDocument":"Compound document","Reorganize":"Reorganize"}),csui.define("csui/widgets/favorites/tileview.toolbaritems",["csui/lib/underscore","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","csui-ext!csui/widgets/recentlyaccessed/tileview.toolbaritems"],function(e,t,i,n,o){"use strict";var s={"inlineActionbar":new i({"info":[{"signature":"Properties","name":t.ToolbarItemInfo,"commandData":{"dialogView":!0},"iconName":"csui_action_properties32"},{"signature":"DocPreview","name":t.ToolbarItemDocPreview,"iconName":"csui_action_preview32","commandData":{"ifNotOpenDelegate":!0,"fullView":!1,"includeContainers":!1}}],"share":[{"signature":"CopyLink","name":t.ToolbarItemCopyLink,"iconName":"csui_action_copy_link32"}],"edit":[{"signature":"Edit","name":t.ToolbarItemEdit,"iconName":"csui_action_edit32"}],"other":[{"signature":"Download","name":t.ToolbarItemDownload,"iconName":"csui_action_download32"},{"signature":"goToLocation","name":t.ToolbarGoToLocation}]},{"maxItemsShown":1,"dropDownText":t.ToolbarItemMore,"dropDownIconName":"csui_action_more32","addGroupSeparators":!1})};return o&&function(t){e.each(t,function(t){e.each(t,function(t,i){var o=s[i];if(!o)throw new Error("Invalid target toolbar: "+i);e.each(t,function(e){e=new n(e),o.addItem(e)})})})}(o),s}),csui.define("csui/widgets/favorites/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/favorites/impl/nls/root/lang",{"dialogTitle":"Favorites","searchTitle":"Search Favorites","searchPlaceholder":"Favorites","searchAria":"Search for favorites","expandAria":"Expand the Favorites widget","emptyGroupDefaultText":"This group is empty.","emptyListText":"There are no items to display.","loadingListText":"Loading results...","failedListText":"Loading results failed.","loadingText":"Loading favorites","favoritesGroupAria":"{0}, Favorites Group","favoritesEmptyGroupAria":"{0}, Empty Favorites Group","addFav":"Add Favorite","removeFav":"Remove Favorite","addFavoriteNameLabel":"Favorite name","addFavoriteNamePlaceHolder":"Enter name","addFavoriteGroupLabel":"Group","addFavoriteAddButtonLabel":"Add","addFavoriteCancelButtonLabel":"Cancel","nameErrorMaxLengthExceed":"Name cannot be longer than 248 characters.","nameErrorContainSemiColon":"Name cannot contain a colon.","updateFavoriteFailMessage":'Failed to update Favorite for node "{0}". \n\n{1}',"openFavoritesView":"Open favorites view"}),csui.define("css!csui/widgets/favorites/impl/favorites.view",[],function(){}),csui.define("csui/widgets/favorites/favorites.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/contexts/factories/favorites2","csui/controls/list/list.view","csui/controls/listitem/listitemstandard.view","csui/controls/listitem/simpletreelistitem.view","csui/behaviors/expanding/expanding.behavior","csui/behaviors/default.action/default.action.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/list/behaviors/list.view.keyboard.behavior","csui/behaviors/collection.state/collection.state.behavior","csui/controls/list/list.state.view","csui/utils/contexts/factories/favorite2groups","csui/utils/contexts/factories/application.scope.factory","csui/models/favorites2","csui/controls/node-type.icon/node-type.icon.view","csui/controls/progressblocker/blocker","csui/widgets/favorites/tileview.toolbaritems","csui/utils/commands","i18n!csui/widgets/favorites/impl/nls/lang","i18n!csui/controls/listitem/impl/nls/lang","css!csui/widgets/favorites/impl/favorites.view"],function(e,t,i,n,o,s,r,l,a,c,u,d,h,p,m,f,g,v,b,w,y,x,C,_){"use strict";var k=i.defaults({},e.config(),{"openInPerspective":!0});return r.extend({"templateHelpers":function(){return{"title":this.options.data.title||C.dialogTitle,"icon":this.options.data.titleBarIcon,"searchPlaceholder":C.searchPlaceholder,"searchTitle":C.searchTitle,"searchAria":C.searchAria,"expandAria":C.expandAria,"openPerspectiveAria":C.openFavoritesView,"openPerspectiveTooltip":C.openFavoritesView,"enableOpenPerspective":this._enableOpenPerspective}},"events":{"click .tile-expand":"onMoreLinkClick"},"behaviors":{"ExpandableList":{"behaviorClass":c,"expandedView":"csui/widgets/favorites2.table/favorites2.table.view","orderBy":function(){return this.options.orderBy},"titleBarIcon":function(){return this.options.data.titleBarIcon},"dialogTitle":C.dialogTitle,"dialogTitleIconNameRight":"csui_action_minimize32","dialogClassName":"favorites"},
"DefaultAction":{"behaviorClass":u},"TabableRegion":{"behaviorClass":d},"ListViewKeyboardBehavior":{"behaviorClass":h},"CollectionState":{"behaviorClass":p,"collection":function(){return this.completeCollection},"stateView":m,"stateMessages":{"empty":C.emptyListText,"loading":C.loadingListText,"failed":C.failedListText}}},"getChildView":function(e){return this.showFlatList?l:a},"childViewOptions":function(){return{"templateHelpers":function(){if(this instanceof l)return{"name":this.model.get("favorite_name"),"enableIcon":!0,"showInlineActionBar":this.showInlineActionBar,"itemLabel":i.str.sformat(_.itemTitleLabel,this.model.get("favorite_name"))};var e,t=this.model.get("name");return e=this.model.childrenCollection&&0===this.model.childrenCollection.length?i.str.sformat(C.favoritesEmptyGroupAria,t):i.str.sformat(C.favoritesGroupAria,t),{"icon":"mime_fav_group32","name":t,"ariaName":e,"expand":this.model.searchMode}},"childViewTemplateHelpers":function(){return{"icon":this.model.get("icon"),"name":this.model.get("favorite_name"),"text":C.emptyGroupDefaultText,"showInlineActionBar":this.showInlineActionBar,"itemLabel":i.str.sformat(_.itemTitleLabel,this.model.get("favorite_name"))}},"checkDefaultAction":!0,"context":this.context,"iconSize":this.options.iconSize,"toolbarData":this.toolbarData,"refetchNodeActions":!0}},"childEvents":{"click:item":"_onClickItem","click:tree:item":"_onClickTreeItem","click:tree:header":"_onClickTreeHeader","render":"onRenderItem","before:destroy":"onBeforeDestroyItem","changed:focus":"onChangedfocus"},"constructor":function(e){e||(e={}),i.defaults(e,{"orderBy":"favorite_name asc","iconSize":"contain"}),e.data||(e.data={}),e.data.titleBarIcon=!1===e.data.showTitleIcon?void 0:"title-icon title-favourites";var t=x.getSignatures(y);this.completeCollection=e.collection||e.context.getCollection(f,{"detached":!0,"permanent":!0,"favorites":{"options":{"promotedActionCommands":[],"nonPromotedActionCommands":t}}});var o=s.getLimitedResourceScope();this.completeCollection.favorites.setResourceScope(o);var l=n.Collection.extend({"model":this.completeCollection.model});e.collection=new l,this.showInlineActionBar=!1!==e.showInlineActionBar||e.showInlineActionBar;var a=e.context,c=a&&a.viewStateModel;this._enableOpenPerspective=k.openInPerspective&&c&&c.get("history"),r.prototype.constructor.apply(this,arguments),this.loadingText=C.loadingText,w.imbue(this),this.listenTo(this.completeCollection,"update sync",i.bind(this._synchronizeCollections,this)),this._synchronizeCollections(),this.listenTo(this,"render",this._onRender),this.listenTo(this,"change:filterValue",this._synchronizeCollections),this.showInlineActionBar&&(e.tileViewToolbarItems=y,this.context=a,this.toolbarData={"toolbaritems":y,"collection":this.completeCollection.favorites}),this.applicationScope=e.context.getModel(g),this.listenTo(this,"doc:preview:generic:actions",this._highlightRow)},"_highlightRow":function(e,n){t("."+n).removeClass(n);var o,s;if(o=i.findIndex(this.collection.models,function(t){return-1!=(s=i.findIndex(t.get("favorites"),function(t){return t.id===e.get("id")}))}),-1!==s){var r=this.$childViewContainer.find(i.str.sformat("div:nth-child({0})",o+1)),l=r&&r.find(".cs-list-group a"),a=l&&l.eq(s);a&&a.addClass(n)}},"_onRender":function(){this.$el.addClass("cs-favorites"),this.completeCollection.ensureFetched(),this.$el.on("keydown",i.bind(this.onKeyDown,this)),this._updateAccAttributes()},"_updateAccAttributes":function(){var e=this.$el.find(".tile-content"),t=e.attr("aria-labelledby");e.removeAttr("role aria-expanded aria-labelledby"),this.showFlatList?this.$el.find(".tile-content > .binf-list-group").attr({"role":"listbox","aria-labelledby":t}):this.$el.find(".tile-content > .binf-list-group").attr({"role":"tree","aria-labelledby":t})},"onRenderCollection":function(){this._updateAccAttributes()},"onRenderItem":function(e){this.showFlatList&&(e._nodeIconView=new b({"el":e.$(".csui-type-icon").get(0),"node":e.model,"size":this.options.iconSize}),e._nodeIconView.render(),e.$el.attr("role","option"),e.$el.attr("aria-label",i.str.sformat(_.typeAndNameAria,e._nodeIconView.model.get("title"),e.model.get("favorite_name"))))},"onBeforeDestroyItem":function(e){this.showFlatList&&e._nodeIconView&&e._nodeIconView.destroy()},"onChangedfocus":function(){this.trigger("changed:focus")},"_onClickItem":function(e){this.triggerMethod("execute:defaultAction",e.model)},"_onClickTreeItem":function(e,t){this.triggerMethod("execute:defaultAction",t.model)},"_onClickTreeHeader":function(e){this.trigger("update:scrollbar")},"onClickHeader":function(e){this.options.avoidOpenPerspectiveOnHeader||this.onClickOpenPerspective(e)},"onClickOpenPerspective":function(e){this.applicationScope.set("id","favorites"),this.trigger("open:favorites:perspective")},"onMoreLinkClick":function(e){e.preventDefault(),e.stopPropagation(),this.triggerMethod("expand")},"_synchronizeCollections":function(){var e,o=this,s=this.completeCollection.at(0),r={"connector":this.completeCollection.connector},l={"favorite_name":this.options.filterValue};if(1===this.completeCollection.length&&-1===s.get("tab_id"))this.showFlatList=!0,e=new v(void 0,r),e.reset(s.favorites&&s.favorites.models||[]),e.setFilter(l),o.options.filterValue&&0!==o.options.filterValue.length?o.listenTo(e,"sync",function(){o.collection.reset(e.models)}):o.collection.reset(e.models);else{o.showFlatList=!1;var a=this.isSearchOpen(),c=new n.Collection,u=[];i.each(this.completeCollection.models,function(i){e=new v(void 0,r),e.reset(i.favorites.models),e.setFilter(l);var s=new n.Model(i.attributes);if(s.childrenCollection=e,s.searchMode=a,-1===s.get("tab_id")&&s.set("flatten",!0),c.add(s),o.options.filterValue&&o.options.filterValue.length>0){var d=t.Deferred();u.push(d.promise()),o.listenTo(e,"sync",function(){0===s.childrenCollection.length&&c.remove(s),d.resolve()})}}),o.options.filterValue&&o.options.filterValue.length>0?t.when.apply(t,u).then(function(){o.collection.reset(c.models)}):o.collection.reset(c.models)}},"getElementByIndex":function(e,t){if(this.showFlatList)return r.prototype.getElementByIndex.call(this,e);if(isNaN(e)||e<0)return null;var i=this.children.findByIndex(e);return i&&i.currentlyFocusedElement?i.currentlyFocusedElement(t):null}})}),csui.define("css!csui/widgets/navigation.header/controls/favorites/impl/favorites",[],function(){}),csui.define("csui/widgets/navigation.header/controls/favorites/favorites.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","i18n!csui/widgets/navigation.header/controls/favorites/impl/nls/localized.strings","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/widgets/navigation.header/controls/favorites/impl/favorites","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/widgets/favorites/favorites.view","csui/utils/contexts/factories/favorites2","css!csui/widgets/navigation.header/controls/favorites/impl/favorites"],function(e,t,i,n,o,s,r,l){"use strict";var a=i.LayoutView.extend({"className":"csui-favorites-view initialLoading","template":s,"templateHelpers":function(){return{"title":n.FavoritesIconTitle,"favoritesTitleAria":n.FavoritesTitleAria}},"regions":{"favoritesViewContainerRegion":".csui-favorites-view-container"},"ui":{"favoritesButtonContainer":".csui-favorites-icon-container","favoritesViewContainer":".csui-favorites-view-container"},"events":{"dragenter":"_hideFavoritesView","keydown":"onKeyInView","mouseenter .csui-favorites-view-container":"onMouseEnterFavoritesView","mouseenter .csui-favorites-icon-container":"onMouseEnterFavoritesView","mouseleave .csui-favorites-view-container":"onMouseLeaveFavoritesView","mouseleave .csui-favorites-icon-container":"onMouseLeaveFavoritesView","mouseenter .clicked-no-hover":"onMouseEnterClickedNoHoverItem","focus .csui-favorites-icon-container":"onFocusButton","blur .csui-favorites-icon-container":"onBlurButton","blur .csui-favorites-view-container":"onBlurFavoritesViewContainer","click .csui-favorites-icon-container":"onClickFavoritesIcon"},"behaviors":{"TabableRegionBehavior":{"behaviorClass":o}},"currentlyFocusedElement":function(e){var t=this.ui.favoritesViewContainer.find(".content-tile .cs-search-button");return e.shiftKey&&t.length>0?this.favoritesView._focusSearchButton():this.ui.favoritesButtonContainer},"constructor":function(e){i.LayoutView.call(this,e),this.propagateEventsToRegions(),this.listenTo(e.context,"change:perspective",this._hideFavoritesView)},"onBeforeDestroy":function(){this.favoritesView&&this.favoritesView.destroy()},"onRender":function(){this.ui.favoritesViewContainer.addClass("binf-hidden")},"onFocusButton":function(){this.$el.find(".csui-icon-favorites").addClass("fav_header42_mo")},"onBlurButton":function(){this.$el.find(".csui-icon-favorites").removeClass("fav_header42_mo"),!0!==this.favoritesViewInFocus&&document.activeElement!==this.ui.favoritesButtonContainer[0]&&this._hideFavoritesView()},"onBlurFavoritesViewContainer":function(e){!0!==this.favoritesViewInFocus&&!0!==this.keyboardAction&&this._hideFavoritesView()},"onMouseEnterFavoritesView":function(){this.favoritesViewInFocus=!0},"onMouseLeaveFavoritesView":function(){this.favoritesViewInFocus=!1},"onMouseEnterClickedNoHoverItem":function(e){e&&e.target&&t(e.target).removeClass("clicked-no-hover")},"onKeyInView":function(e){switch(e.keyCode){case 9:var i=this.ui.favoritesButtonContainer.is(":focus");i&&!0!==e.shiftKey&&!this.ui.favoritesViewContainer.hasClass("binf-hidden")?this._focusOnFavoriteSearch(e):!i&&e.shiftKey?(e.preventDefault(),e.stopPropagation(),this._focusOnFavoriteButton()):t(e.target).closest(".tile-header").length||this._hideFavoritesView();break;case 13:case 32:t(e.target).closest(".tile-header").length||(this.triggerMethod("click:favorites:icon",e),this.ui.favoritesViewContainer.hasClass("binf-hidden")||this._focusOnFavoriteSearch(e));break;case 40:!this.favoritesView||this.ui.favoritesViewContainer.hasClass("binf-hidden")?(this.triggerMethod("click:favorites:icon",e),this._focusOnFavoriteSearch(e)):!0!==this.favoritesViewInFocus&&this._focusOnFavoriteSearch(e);break;case 27:this._focusOnFavoriteButton(),this._hideFavoritesView()}},"_focusOnFavoriteButton":function(){this.ui.favoritesButtonContainer.trigger("focus"),this.favoritesViewInFocus=!1},"_focusOnFavoriteSearch":function(e){this.ui.favoritesViewContainer.find(".content-tile .cs-search-button").length>0&&(e.preventDefault(),e.stopPropagation(),this.favoritesViewInFocus=!0,this.favoritesView._moveTo(e,this.favoritesView._focusSearchButton()))},"_focusOnFavoriteList":function(e){var t=this.ui.favoritesViewContainer.find("> .content-tile > .tile-content > .binf-list-group");(this.favoritesView.showFlatList?t.find("> .binf-list-group-item"):t.find("> .cs-simpletreelistitem")).length>0&&(e.preventDefault(),e.stopPropagation(),this.favoritesViewInFocus=!0,this.favoritesView._moveTo(e,this.favoritesView._focusList()))},"_handleClickEvent":function(e){t(e.target).parents(".csui-favorites-view-container").length||t(e.target).parents(".csui-favorites-icon-container").length||this._hideFavoritesView()},"_toggleFavoritesView":function(){this.ui.favoritesViewContainer.hasClass("binf-hidden")?this._showFavoritesView():this._hideFavoritesView()},"_showFavoritesView":function(){this.ui.favoritesViewContainer.removeClass("binf-hidden"),this.ui.favoritesViewContainer.find(".csui-perfect-scrolling").perfectScrollbar("update"),this.ui.favoritesButtonContainer.attr("aria-expanded","true"),this.$el.addClass("showing-favorites-view"),this.favoritesViewContainerRegion.show(this.favoritesView),t(document).off("click."+this.cid).on("click."+this.cid,e.bind(this._handleClickEvent,this))},"_hideFavoritesView":function(){t(document).off("click."+this.cid),this.favoritesView&&this.favoritesView.isSearchOpen()&&this.favoritesView.searchClicked(event),this.favoritesViewInFocus=!1,this.ui.favoritesViewContainer.addClass("binf-hidden"),this.ui.favoritesButtonContainer.attr("aria-expanded","false"),this.$el.removeClass("showing-favorites-view")},"onClickFavoritesIcon":function(e){e.preventDefault(),e.stopPropagation(),this.options&&this.options.parentView&&this.options.parentView.trigger("header:control:clicked");var i=t(".binf-open>.binf-dropdown-toggle");i.length>0&&i.binf_dropdown("toggle"),this._ensureFavoritesView(),this._toggleFavoritesView(),this._focusOnFavoriteSearch(e)},"_ensureFavoritesView":function(){if(!this.favoritesView){var t=this,i=e.extend(this.options,{"showInlineActionBar":!0,"avoidOpenPerspectiveOnHeader":!0});this.favoritesView=new l(i),this.favoritesView.listenToOnce(this.favoritesView.completeCollection,"request",this.favoritesView.blockActions),this.favoritesView.listenToOnce(this.favoritesView.completeCollection,"sync error",this.favoritesView.unblockActions),this.listenToOnce(this.favoritesView.completeCollection,"sync",function(){this.$el.removeClass("initialLoading")}),this.favoritesView.blockingView.showloadingWheel=!1,this.listenTo(this.favoritesView,"childview:click:tree:item",function(e,i){i.$el&&i.$el.addClass("clicked-no-hover"),t._hideFavoritesView(),t._focusOnFavoriteButton()}),this.listenTo(this.favoritesView,"childview:click:item",function(e){e.$el&&e.$el.addClass("clicked-no-hover"),t._hideFavoritesView(),t._focusOnFavoriteButton()}),this.listenTo(this.favoritesView,"childview:before:execute:command",function(e){t._hideFavoritesView(),t._focusOnFavoriteButton()}),this.listenTo(this.favoritesView,"before:keyboard:change:focus childview:before:keyboard:change:focus",function(){t.keyboardAction=!0}),this.listenTo(this.favoritesView,"after:keyboard:change:focus childview:after:keyboard:change:focus",function(){t.keyboardAction=!1}),this.listenTo(this.favoritesView,"open:favorites:perspective",function(){this._hideFavoritesView()})}}});return e.extend(a.prototype,r),a}),csui.define("csui/widgets/navigation.header/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/navigation.header/impl/nls/root/lang",{"profileMenuItemLabel":"Profile","switchToClassicMenuItemLabel":"Classic view","signOutMenuItemLabel":"Sign out","EditPerspective":"Edit page","CreatePerspective":"Edit page","personalizePage":"Personalize page","ContentServerAdministrationMenuItemLabel":"Administration","AboutBox":"About"}),csui.define("csui/widgets/navigation.header/profile.menuitems",["csui/lib/underscore","i18n!csui/widgets/navigation.header/impl/nls/lang","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","csui-ext!csui/widgets/navigation.header/profile.menuitems"],function(e,t,i,n,o){"use strict";var s={"profileMenu":new i({"profile":[{"signature":"UserProfile","name":t.profileMenuItemLabel}],"others":[{"signature":"SwitchToClassic","name":t.switchToClassicMenuItemLabel},{"signature":"EditPerspective","name":t.EditPerspective},{"signature":"ContentServerAdministration","name":t.ContentServerAdministrationMenuItemLabel},{"signature":"AboutBox","name":t.AboutBox}],"signout":[{"signature":"SignOut","name":t.signOutMenuItemLabel}]},{"maxItemsShown":0,"dropDownIconName":"csui_action_caret_down32"})};return o&&e.each(o,function(t){e.each(t,function(t,i){var o=s[i];if(!o)throw new Error("Invalid target toolbar: "+i);e.each(t,function(e){e=new n(e),o.addItem(e)})})}),s}),csui.define("csui/widgets/navigation.header/profile.menuitems.mask",["module","csui/lib/underscore","csui/controls/toolbar/toolitems.mask","csui/utils/toolitem.masks/global.toolitems.mask"],function(e,t,i,n){"use strict";return i.extend({"constructor":function(){var o=e.config(),s=new n;i.prototype.constructor.call(this,s,{"normalize":!1}),t.each(o,function(e,t){this.extendMask(e)},this),this.storeMask()}})}),csui.define("hbs!csui/widgets/navigation.header/controls/user.profile/impl/user.profile",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" data-binf-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true"\r\n   class="binf-dropdown-toggle nav-profile csui-navbar-icons csui-acc-focusable" title="'+e.escapeExpression((s=null!=(s=r(i,"profileMenuTitle")||(null!=t?r(t,"profileMenuTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"profileMenuTitle","hash":{},"loc":{"start":{"line":2,"column":88},"end":{"line":2,"column":108}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=r(i,"profileMenuAria")||(null!=t?r(t,"profileMenuAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"profileMenuAria","hash":{},"loc":{"start":{"line":2,"column":122},"end":{"line":2,"column":141}}}):s))+'">\r\n  <span class="csui-profile-default-image image_user_placeholder">'+e.escapeExpression((s=null!=(s=r(i,"initials")||(null!=t?r(t,"initials"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"initials","hash":{},"loc":{"start":{"line":3,"column":66},"end":{"line":3,"column":78}}}):s))+'</span>\r\n  <img class="csui-profile-image binf-img-circle binf-hidden" alt="'+e.escapeExpression((s=null!=(s=r(i,"profileImageAlt")||(null!=t?r(t,"profileImageAlt"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"profileImageAlt","hash":{},"loc":{"start":{"line":4,"column":67},"end":{"line":4,"column":86}}}):s))+'" src="'+e.escapeExpression((s=null!=(s=r(i,"imgSrc")||(null!=t?r(t,"imgSrc"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"imgSrc","hash":{},"loc":{"start":{"line":4,"column":93},"end":{"line":4,"column":103}}}):s))+'">\r\n</a>\r\n<ul class="binf-dropdown-menu csui-profile-dropdown" role="menu"></ul>'}});return i.registerPartial("csui_widgets_navigation.header_controls_user.profile_impl_user.profile",n),n}),csui.define("css!csui/widgets/navigation.header/controls/user.profile/impl/user.profile",[],function(){}),csui.define("csui/widgets/navigation.header/controls/user.profile/user.profile.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/url","csui/utils/log","csui/utils/base","csui/utils/commands","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/user","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/toolbar/toolitems.filtered.model","csui/controls/toolbar/toolitem.view","csui/widgets/navigation.header/profile.menuitems","csui/widgets/navigation.header/profile.menuitems.mask","csui/utils/user.avatar.color","csui/controls/globalmessage/globalmessage","hbs!csui/widgets/navigation.header/controls/user.profile/impl/user.profile","csui-ext!csui/widgets/navigation.header/controls/user.profile/user.profile.view","i18n!csui/pages/start/impl/nls/lang","css!csui/widgets/navigation.header/controls/user.profile/impl/user.profile","csui/lib/jquery.binary.ajax"],function(e,t,i,n,o,s,r,l,a,c,u,d,h,p,m,f,g,v,b,w,y){"use strict";return r=r(e.id),o.CompositeView.extend({"classname":"binf-dropdown","template":b,"templateHelpers":function(){var e=l.formatMemberName(this.model);return{"profileMenuTitle":y.profileMenuTitle,"profileMenuAria":t.str.sformat(y.profileMenuAria,e),"profileImageAlt":t.str.sformat(y.profileImageAlt,e),"imgSrc":"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=","initials":this.options.model.attributes.initials}},"serializeData":function(){return{"items":this.collection.toJSON()}},"childView":p,"childViewContainer":"> .csui-profile-dropdown","ui":{"userProfileMenu":"> .csui-profile-dropdown","userProfileMenuHandle":"> a","personalizedImage":".csui-profile-image","defaultImage":".csui-profile-default-image","profileDropdownToggler":"> .nav-profile"},"events":{"keydown @ui.profileDropdownToggler":"_showDropdown","keydown @ui.userProfileMenu":"_showDropdown","focusout @ui.profileDropdownToggler":"_toggleDropdown","focusout @ui.userProfileMenu":"_toggleDropdown"},"behaviors":{"TabableRegion":{"behaviorClass":d}},"currentlyFocusedElement":"> .csui-acc-focusable","constructor":function(e){e||(e={}),this._ensureModels(e),o.CompositeView.prototype.constructor.call(this,e),this.connector=this.options.context.getModel(c),this.listenTo(this.model,"change",this._refreshUser).listenTo(e.context,"sync error",this._refreshActions).listenTo(this,"render",this._displayUser).listenTo(this,"destroy",this._releasePhotoUrl).listenTo(this,"childview:toolitem:action",this._triggerMenuItemAction).listenTo(n,"closeToggleAction",this._closeToggle)},"_ensureModels":function(e){var t=e.context,i=t.getModel(u);this.username="ensured",this.staticMenuItems=m.profileMenu.collection.toJSON(),e.model=i,e.collection=new h(m.profileMenu,{"status":{"context":t},"commands":a,"mask":new f})},"_refreshUser":function(){this._isRendered&&!this.isDestroyed&&this.render()},"_refreshActions":function(){if(this._isRendered&&!this.isDestroyed)if(w){var e={"context":this.options.context},n=t.chain(w).flatten(!0).map(function(t){return t(e)}).value(),o=this;i.whenAll.apply(i,n).always(function(e){var i=new f;e=t.chain(e).flatten().pluck("profileMenu").flatten().value(),e=o.staticMenuItems.concat(e),e=i.maskItems(e),m.profileMenu.reset(e)})}else this.collection.refilter()},"_triggerMenuItemAction":function(e,t){this.ui.profileDropdownToggler.binf_dropdown("toggle"),this._executeAction(t.toolItem)},"_executeAction":function(e){var t=e.get("signature"),i=a.findWhere({"signature":t}),n=this.options.context,o={"context":n,"toolItem":e,"data":e.get("commandData")},s=this;try{if(!i)throw new Error('Command "'+t+'" not found.');this.$el.addClass("binf-disabled"),i.execute(o).done(function(e){}).fail(function(e){e&&(e=new l.Error(e),v.showMessage("error",e.message,e.errorDetails))}).always(function(){s.$el.removeClass("binf-disabled")})}catch(e){r.warn('Executing the command "{0}" failed.\n{1}',i.get("signature"),e.message)&&console.warn(r.last)}},"_displayUser":function(){this.model.get("id")&&(this._displayProfileImage(),this._assignUserColor())},"_displayProfileImage":function(){var e=this._getUserPhotoUrl();if(e){var i={"url":e,"dataType":"binary"};this.connector.makeAjaxCall(i).always(t.bind(function(e,t,i){200===i.status?this._showPersonalizedImage(e):this._showDefaultImage()},this))}else this._showDefaultImage()},"_getUserPhotoUrl":function(){var e=this.connector.connection,t=new s(e.url).getCgiScript(),i=this.model.get("photo_url");if(i&&i.indexOf("?")>0)return s.combine(t,i)},"_showPersonalizedImage":function(e){this._releasePhotoUrl(),this._photoUrl=URL.createObjectURL(e),this.ui.defaultImage.addClass("binf-hidden"),this.ui.personalizedImage.attr("src",this._photoUrl).removeClass("binf-hidden"),this.$el.parents().find(".esoc-userprofile-pic-actions img").length&&this.$el.parents().find(".esoc-userprofile-pic-actions img").trigger("focus")},"_showDefaultImage":function(e){this._releasePhotoUrl(),this.ui.personalizedImage.addClass("binf-hidden"),this.ui.defaultImage[0].innerText=this.options.model.attributes.initials,this.ui.defaultImage.removeClass("binf-hidden"),this.$el.parents().find(" span.esoc-full-profile-avatar-cursor").length&&this.$el.parents().find(" span.esoc-full-profile-avatar-cursor").trigger("focus")},"_releasePhotoUrl":function(){this._photoUrl&&(URL.revokeObjectURL(this._photoUrl),this._photoUrl=void 0)},"_closeToggle":function(){this.$el.hasClass("binf-open")&&this.ui.userProfileMenuHandle.trigger("click")},"_showDropdown":function(e){var t=this.ui.userProfileMenu.find("> li > a"),n=0,o=this.$el.find(document.activeElement);o.length>0&&(n=t.index(o[0]),38===e.keyCode||40===e.keyCode?(e.preventDefault(),38===e.keyCode&&(n=-1===n?t.length-1:n-1),40===e.keyCode&&(n=n===t.length-1?-1:n+1),-1===n?this.ui.profileDropdownToggler.trigger("focus"):i(t[n]).trigger("focus")):27===e.keyCode&&i(o).closest("ul").is(".csui-profile-dropdown")?(e.stopPropagation(),this.ui.profileDropdownToggler.trigger("click").trigger("focus")):32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),i(o).trigger("click")))},"_toggleDropdown":function(e){var t=this;setTimeout(function(){document.activeElement.offsetParent&&!document.activeElement.offsetParent.classList.contains("csui-profile-dropdown")&&document.activeElement!==t.ui.profileDropdownToggler[0]&&t.ui.userProfileMenu.is(":visible")&&i(t.ui.profileDropdownToggler).trigger("click")},100)},"_assignUserColor":function(){var e=g.getUserAvatarColor(this.model.attributes);this.ui.defaultImage.css("background",e)}})}),csui.define("csui/widgets/navigation.header/controls/progressbar.maximize/impl/nls/progressbar-maximize.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/navigation.header/controls/progressbar.maximize/impl/nls/root/progressbar-maximize.lang",{"maximize":"Show message banner","maximizeAria":"Show message banner"}),csui.define("hbs!csui/widgets/navigation.header/controls/progressbar.maximize/impl/progressbar.maximize",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-maximize">\r\n<div class="icon-progresspanel-pending csui-button-icon binf-btn-default"\r\n    aria-label="'+e.escapeExpression((s=null!=(s=r(i,"maximizeAria")||(null!=t?r(t,"maximizeAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"maximizeAria","hash":{},"loc":{"start":{"line":3,"column":16},"end":{"line":3,"column":32}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=r(i,"maximize")||(null!=t?r(t,"maximize"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"maximize","hash":{},"loc":{"start":{"line":3,"column":41},"end":{"line":3,"column":53}}}):s))+'" tabindex="0">\r\n    <div class="csui-progressbar-animation">\r\n    \x3c!--<span class="icon-progresspanel-maximize-arrow binf-glyphicon binf-glyphicon-open"></span>--\x3e\r\n      <div class="csui-progressbar-pie-wrapper progress progressbar">\r\n        <div class="csui-progressbar-pie">\r\n          <div class="csui-progressbar-left-side csui-progressbar-half-circle"></div>\r\n          <div class="csui-progressbar-right-side csui-progressbar-half-circle"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'}});return i.registerPartial("csui_widgets_navigation.header_controls_progressbar.maximize_impl_progressbar.maximize",n),n}),csui.define("css!csui/widgets/navigation.header/controls/progressbar.maximize/impl/progressbar-maximize",[],function(){}),csui.define("csui/widgets/navigation.header/controls/progressbar.maximize/progressbar.maximize.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/globalmessage/globalmessage","i18n!csui/widgets/navigation.header/controls/progressbar.maximize/impl/nls/progressbar-maximize.lang","hbs!csui/widgets/navigation.header/controls/progressbar.maximize/impl/progressbar.maximize","css!csui/widgets/navigation.header/controls/progressbar.maximize/impl/progressbar-maximize"],function(e,t,i,n,o,s){"use strict";return i.ItemView.extend({"className":"csui-progressbar-maximize-view","template":s,"templateHelpers":function(){return{"maximize":o.maximize,"maximizeAria":o.maximizeAria}},"ui":{"favoritesButtonContainer":".csui-favorites-icon-container","favoritesViewContainer":".csui-favorites-view-container","progresspanelMaximize":".csui-maximize .csui-button-icon","progressRight":".csui-progressbar-pie .csui-progressbar-right-side","progressLeft":".csui-progressbar-pie .csui-progressbar-left-side","wrapper":".csui-progressbar-pie-wrapper.progress .csui-progressbar-pie"},"events":{"click":"_onClick","keydown @ui.progresspanelMaximize":"onKeyInView"},"constructor":function(e){i.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(e.parentView,"processbar:minimize",this._doProcessbarMaximize),this.listenTo(e.parentView,"processbar:update",this._doProgressbarAnimation),this.listenTo(e.parentView,"processbar:finished",this._doFinishedProgressbar),this.listenTo(e.parentView,"processing:completed",this._onClick),this.listenTo(e.parentView,"processing:error",this._doFailedProgressbar)},"_doProcessbarMaximize":function(){this.options.parentView.$el.find(".csui-progressbar-maximize").removeClass("binf-hidden"),this.$el.find(".csui-progressbar-animation").removeClass("binf-hidden"),this.ui.progresspanelMaximize.removeClass("icon-progresspanel-success"),this.ui.progresspanelMaximize.removeClass("icon-progresspanel-error"),this.ui.progresspanelMaximize.trigger("focus")},"onKeyInView":function(e){if(13===e.keyCode||32===e.keyCode)return this._onClick(),!1},"_doFailedProgressbar":function(){this.ui.progresspanelMaximize.addClass("icon-progresspanel-error"),this.ui.progresspanelMaximize.removeClass("icon-progresspanel-success")},"_doFinishedProgressbar":function(){this.ui.wrapper.css("clip","rect(0, 1em, 1em, 0.5em)"),this.ui.progressLeft.css("transform","rotate(360deg)"),this.ui.progressRight.css("transform","rotate(0deg)"),this.options.parentView.$el.find(".csui-progressbar-maximize").addClass("binf-hidden")},"_doProgressbarAnimation":function(e){var t=Math.round(3.6*e);e<=50&&(this.ui.wrapper.css("clip","rect(0, 1em, 1em, 0.5em)"),this.ui.progressLeft.css("transform","rotate(360deg)"),this.ui.progressRight.css("transform","rotate("+t+"deg)")),e>=50&&e<=100&&(this.ui.wrapper.css("clip","rect(auto, auto, auto, auto)"),this.ui.progressRight.css("transform","rotate(180deg)"),this.ui.progressLeft.css("transform","rotate("+t+"deg)"))},"_onClick":function(){this.options.parentView.$el.find(".csui-progressbar-maximize").addClass("binf-hidden"),this.options.parentView.trigger("processbar:maximize")},"onRender":function(){}})}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/error.global.json",{"type":"grid","options":{"rows":[{"columns":[{"sizes":{"md":12},"heights":{"xs":"full"},"widget":{"type":"csui/widgets/error.global","options":{}}}]}]}}),csui.define("csui/widgets/myassignments/myassignments.columns",["csui/lib/backbone"],function(e){var t=e.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),i=e.Collection.extend({"model":t,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new i(this.map(function(e){return e.attributes}))}});return new i([{"key":"type","titleIconInHeader":"mime_type","sequence":10},{"key":"name","sequence":20},{"key":"location_name","sequence":30},{"key":"date_due","sequence":40},{"key":"priority","sequence":50},{"key":"status","sequence":60},{"key":"from_user_name","sequence":70}])}),csui.define("csui/widgets/myassignments/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/myassignments/impl/nls/root/lang",{"dialogTitle":"My Assignments","searchTitle":"Search My Assignments","searchPlaceholder":"My Assignments","searchAria":"Search for assignments","expandAria":"Expand the My Assignments widget","emptyListText":"No item to display.","loadingListText":"Loading results...","loadingText":"Loading my assignments","failedListText":"Loading results failed.","openMyAssignmentsView":"Open my assignments view"}),csui.define("css!csui/widgets/myassignments/impl/myassignments",[],function(){}),
csui.define("csui/widgets/myassignments/myassignments.view",["module","csui/lib/underscore","csui/utils/base","csui/lib/marionette","csui/controls/list/list.view","csui/controls/listitem/listitemstateful.view","csui/behaviors/limiting/limiting.behavior","csui/behaviors/expanding/expanding.behavior","csui/behaviors/default.action/default.action.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/list/behaviors/list.view.keyboard.behavior","csui/behaviors/collection.state/collection.state.behavior","csui/controls/list/list.state.view","csui/utils/contexts/factories/myassignments","csui/utils/contexts/factories/application.scope.factory","csui/controls/node-type.icon/node-type.icon.view","csui/controls/progressblocker/blocker","i18n!csui/widgets/myassignments/impl/nls/lang","css!csui/widgets/myassignments/impl/myassignments"],function(e,t,i,n,o,s,r,l,a,c,u,d,h,p,m,f,g,v){"use strict";var b=t.defaults({},e.config(),{"openInPerspective":!0});return o.extend({"constructor":function(e){e||(e={}),t.defaults(e,{"orderBy":"date_due asc"}),e.data||(e.data={}),e.data.titleBarIcon=!1===e.data.showTitleIcon?void 0:"title-icon title-assignments";var i=e.context,n=i&&i.viewStateModel;this._enableOpenPerspective=b.openInPerspective&&n&&n.get("history"),o.prototype.constructor.apply(this,arguments),this.loadingText=v.loadingText,g.imbue(this),this.context=i,this.applicationScope=this.context.getModel(m)},"childEvents":{"click:item":"onClickItem","render":"onRenderItem","before:destroy":"onBeforeDestroyItem"},"templateHelpers":function(){return{"title":this.options.data.title||v.dialogTitle,"icon":this.options.data.titleBarIcon,"searchPlaceholder":v.searchPlaceholder,"searchTitle":v.searchTitle,"searchAria":v.searchAria,"expandAria":v.expandAria,"openPerspectiveAria":v.openMyAssignmentsView,"openPerspectiveTooltip":v.openMyAssignmentsView,"enableOpenPerspective":this._enableOpenPerspective}},"childView":s,"childViewOptions":{"templateHelpers":function(){var e=this.model.get("date_due"),t=new Date(e),n=new Date,o=t<n?"Warning":"Success",s=i.formatFriendlyDate(e),r=this.model.get("description"),l=this.model.get("location_name")||this.model.get("type_name");return l||(l="Workflow"),r||(r=l),{"name":this.model.get("short_name"),"enableIcon":!0,"description":r,"info":s,"infoState":o,"type":l}},"checkDefaultAction":!0},"behaviors":{"LimitedList":{"behaviorClass":r,"completeCollection":function(){var e=this.options.collection||this.options.context.getCollection(p);return e.excludeResources(),e.resetFields(),e.setFields({"assignments":[]}),e.resetExpand(),e},"limit":0},"ExpandableList":{"behaviorClass":l,"expandedView":"csui/widgets/myassignmentstable/myassignmentstable.view","orderBy":function(){return this.options.orderBy},"titleBarIcon":function(){return this.options.data.titleBarIcon},"dialogTitle":v.dialogTitle,"dialogTitleIconNameRight":"csui_action_minimize32","dialogClassName":"assignments"},"DefaultAction":{"behaviorClass":a},"TabableRegion":{"behaviorClass":c},"ListViewKeyboardBehavior":{"behaviorClass":u},"CollectionState":{"behaviorClass":d,"collection":function(){return this.completeCollection},"stateView":h,"stateMessages":{"empty":v.emptyListText,"loading":v.loadingListText,"failed":v.failedListText}}},"onRender":function(){o.prototype.onRender.apply(this,arguments),this.$el.addClass("cs-assignments")},"onRenderItem":function(e){e._nodeIconView=new f({"el":e.$(".csui-type-icon").get(0),"node":e.model}),e._nodeIconView.render(),e.$el.attr("role","option")},"onBeforeDestroyItem":function(e){e._nodeIconView&&e._nodeIconView.destroy()},"onClickItem":function(e){this.triggerMethod("execute:defaultAction",e.model)},"onClickHeader":function(e){this.onClickOpenPerspective(e)},"onClickOpenPerspective":function(e){this.applicationScope.set("id","myassignments"),this.trigger("open:myassignments:perspective")}})}),csui.define("hbs!csui/widgets/placeholder/impl/placeholder",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s=null!=(s=r(i,"label")||(null!=t?r(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":9}}}):s))+"\r\n"}});return i.registerPartial("csui_widgets_placeholder_impl_placeholder",n),n}),csui.define("css!csui/widgets/placeholder/impl/placeholder",[],function(){}),csui.define("csui/widgets/placeholder/placeholder.view",["csui/lib/backbone","csui/lib/marionette","hbs!./impl/placeholder","css!./impl/placeholder"],function(e,t,i){return t.ItemView.extend({"className":"cs-placeholder tile","template":i,"constructor":function(i){i||(i={}),i.data||(i.data={}),i.model||(i.model=new e.Model({"label":i.data.label,"bgcolor":i.data.bgcolor,"color":i.data.color})),t.ItemView.prototype.constructor.call(this,i)},"onRender":function(){this.$el.css({"color":this.model.get("color"),"backgroundColor":this.model.get("bgcolor")})}})}),csui.define("csui/widgets/recentlyaccessed/recentlyaccessed.columns",["csui/lib/backbone"],function(e){var t=e.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),i=e.Collection.extend({"model":t,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new i(this.map(function(e){return e.attributes}))}});return new i([{"key":"type","titleIconInHeader":"mime_type","sequence":10},{"key":"name","sequence":20},{"key":"reserved","title":"State","sequence":30,"noTitleInHeader":!0},{"key":"parent_id","sequence":40},{"key":"access_date_last","sequence":50},{"key":"size","sequence":60},{"key":"modify_date","sequence":70},{"key":"favorite","sequence":910,"noTitleInHeader":!0,"permanentColumn":!0}])}),csui.define("csui/widgets/recentlyaccessed/tileview.toolbaritems",["csui/lib/underscore","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","csui-ext!csui/widgets/recentlyaccessed/tileview.toolbaritems"],function(e,t,i,n,o){"use strict";var s={"inlineActionbar":new i({"info":[{"signature":"Properties","name":t.ToolbarItemInfo,"commandData":{"dialogView":!0},"iconName":"csui_action_properties32"},{"signature":"DocPreview","name":t.ToolbarItemDocPreview,"iconName":"csui_action_preview32","commandData":{"ifNotOpenDelegate":!0,"fullView":!1,"includeContainers":!1}}],"share":[{"signature":"CopyLink","name":t.ToolbarItemCopyLink,"iconName":"csui_action_copy_link32"}],"edit":[{"signature":"Edit","name":t.ToolbarItemEdit,"iconName":"csui_action_edit32"}],"other":[{"signature":"Download","name":t.ToolbarItemDownload,"iconName":"csui_action_download32"},{"signature":"goToLocation","name":t.ToolbarGoToLocation}]},{"maxItemsShown":1,"dropDownText":t.ToolbarItemMore,"dropDownIconName":"csui_action_more32","addGroupSeparators":!1})};return o&&function(t){e.each(t,function(t){e.each(t,function(t,i){var o=s[i];if(!o)throw new Error("Invalid target toolbar: "+i);e.each(t,function(e){e=new n(e),o.addItem(e)})})})}(o),s}),csui.define("csui/widgets/recentlyaccessed/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/recentlyaccessed/impl/nls/root/lang",{"dialogTitle":"Recently Accessed","searchTitle":"Search Recently Accessed","searchPlaceholder":"Recently Accessed","searchAria":"Search for recently accessed objects","expandAria":"Expand the Recently Accessed widget","emptyListText":"There are no items to display.","loadingListText":"Loading results...","loadingText":"Loading recently accessed","failedListText":"Loading results failed.","access_date_last":"Last Accessed","parent_id":"Location","openRecentlyAccessedView":"Open recently accessed view"}),csui.define("css!csui/widgets/recentlyaccessed/impl/recentlyaccessed",[],function(){}),csui.define("csui/widgets/recentlyaccessed/recentlyaccessed.view",["module","csui/lib/underscore","csui/lib/marionette","csui/controls/list/list.view","csui/controls/listitem/listitemstandard.view","csui/behaviors/limiting/limiting.behavior","csui/behaviors/expanding/expanding.behavior","csui/behaviors/default.action/default.action.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/list/behaviors/list.view.keyboard.behavior","csui/behaviors/collection.state/collection.state.behavior","csui/controls/list/list.state.view","csui/utils/contexts/factories/recentlyaccessed","csui/controls/node-type.icon/node-type.icon.view","csui/controls/progressblocker/blocker","csui/utils/contexts/factories/application.scope.factory","csui/utils/commands","csui/widgets/recentlyaccessed/tileview.toolbaritems","csui/controls/globalmessage/globalmessage","csui/utils/base","i18n!csui/widgets/recentlyaccessed/impl/nls/lang","i18n!csui/controls/listitem/impl/nls/lang","css!csui/widgets/recentlyaccessed/impl/recentlyaccessed"],function(e,t,i,n,o,s,r,l,a,c,u,d,h,p,m,f,g,v,b,w,y,x){"use strict";var C=t.defaults({},e.config(),{"openInPerspective":!0});return n.extend({"constructor":function(e){e||(e={}),t.defaults(e,{"orderBy":"access_date_last desc"}),e.data||(e.data={}),e.data.titleBarIcon=!1===e.data.showTitleIcon?void 0:"title-icon title-recentlyaccessed",e.tileViewToolbarItems=v,this.context=e.context,this.showInlineActionBar=!1!==e.showInlineActionBar||e.showInlineActionBar;var i=e.context,o=i&&i.viewStateModel;this._enableOpenPerspective=C.openInPerspective&&o&&o.get("history"),n.prototype.constructor.call(this,e),this.loadingText=y.loadingText,m.imbue(this),this.applicationScope=e.context.getModel(f)},"childEvents":{"click:item":"onClickItem","render":"onRenderItem","before:destroy":"onBeforeDestroyItem"},"templateHelpers":function(){return{"title":this.options.data.title||y.dialogTitle,"icon":this.options.data.titleBarIcon,"searchPlaceholder":y.searchPlaceholder,"searchTitle":y.searchTitle,"searchAria":y.searchAria,"expandAria":y.expandAria,"openPerspectiveAria":y.openRecentlyAccessedView,"openPerspectiveTooltip":y.openRecentlyAccessedView,"enableOpenPerspective":this._enableOpenPerspective}},"childView":o,"childViewOptions":function(){var e=this.showInlineActionBar?{"toolbaritems":this.options.tileViewToolbarItems,"collection":this.completeCollection}:void 0;return{"templateHelpers":function(){return{"name":this.model.get("short_name"),"enableIcon":!0,"showInlineActionBar":this.showInlineActionBar,"itemLabel":t.str.sformat(x.itemTitleLabel,this.model.get("short_name"))}},"context":this.context,"checkDefaultAction":!0,"toolbarData":e,"refetchNodeActions":!0}},"behaviors":{"LimitedList":{"behaviorClass":s,"completeCollection":function(){var e=g.getSignatures(v),t=this.options.collection||this.options.context.getCollection(h,{"options":{"promotedActionCommands":[],"nonPromotedActionCommands":e}}),i=h.getLimitedResourceScope();return i&&i.commands&&i.commands.push("editpermissions"),t.setResourceScope(i),t.setEnabledDelayRestCommands(!1),t.setEnabledLazyActionCommands(!1),t},"limit":0},"ExpandableList":{"behaviorClass":r,"expandedView":"csui/widgets/recentlyaccessedtable/recentlyaccessedtable.view","orderBy":function(){return this.options.orderBy},"titleBarIcon":function(){return this.options.data.titleBarIcon},"dialogTitle":y.dialogTitle,"dialogTitleIconNameRight":"csui_action_minimize32","dialogClassName":"recentlyaccessed"},"DefaultAction":{"behaviorClass":l},"TabableRegion":{"behaviorClass":a},"ListViewKeyboardBehavior":{"behaviorClass":c},"CollectionState":{"behaviorClass":u,"collection":function(){return this.completeCollection},"stateView":d,"stateMessages":{"empty":y.emptyListText,"loading":y.loadingListText,"failed":y.failedListText}}},"onRender":function(){n.prototype.onRender.apply(this,arguments),this.$el.addClass("cs-recentlyaccessed"),this.completeCollection.delayedActions&&this.listenTo(this.completeCollection.delayedActions,"error",function(e,t,i){var n=new w.Error(t);b.showMessage("error",n.message)})},"onRenderItem":function(e){e._nodeIconView=new p({"el":e.$(".csui-type-icon").get(0),"node":e.model}),e._nodeIconView.render(),e.$el.attr("role","option"),e.$el.attr("aria-label",t.str.sformat(x.typeAndNameAria,e._nodeIconView.model.get("title"),e.model.get("short_name")))},"onBeforeDestroyItem":function(e){e._nodeIconView&&e._nodeIconView.destroy()},"onClickItem":function(e){this.triggerMethod("execute:defaultAction",e.model)},"onClickHeader":function(e){this.onClickOpenPerspective(e)},"onClickOpenPerspective":function(e){this.applicationScope.set("id","recentlyaccessed"),this.trigger("open:recentlyaccessed:perspective")}})}),csui.define("csui/widgets/generic.tile/tileview.toolbaritems",["csui/lib/underscore","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/toolbar/toolitems.factory"],function(e,t,i){"use strict";return{"inlineActionbar":new i({"info":[{"signature":"Properties","name":t.ToolbarItemInfo,"commandData":{"dialogView":!0},"iconName":"csui_action_properties32"},{"signature":"DocPreview","name":t.ToolbarItemDocPreview,"iconName":"csui_action_preview32","commandData":{"ifNotOpenDelegate":!0,"fullView":!1,"includeContainers":!1}}],"share":[{"signature":"CopyLink","name":t.ToolbarItemCopyLink,"iconName":"csui_action_copy_link32"}],"edit":[{"signature":"Edit","name":t.ToolbarItemEdit,"iconName":"csui_action_edit32"}],"other":[{"signature":"Download","name":t.ToolbarItemDownload,"iconName":"csui_action_download32"},{"signature":"goToLocation","name":t.ToolbarGoToLocation}]},{"maxItemsShown":1,"dropDownText":t.ToolbarItemMore,"dropDownIconName":"csui_action_more32","addGroupSeparators":!1})}}),csui.define("csui/widgets/generic.tile/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/generic.tile/nls/root/lang",{"searchButtonMessage":"Search","title":"Search Query Results","dialogTitle":"Search Query Results","searchTitle":"Search","searchPlaceholder":"Search","searchAria":"Search in Search Results","expandAria":"Expand the Search Query Results","emptyListText":"There are no items to display.","loadingListText":"Loading results...","loadingText":"Loading tile","failedListText":"Loading results failed.","openSearchCustomResultsView":"Open Search Query Results view"}),csui.define("csui/widgets/generic.tile/generic.tile.view",["module","csui/lib/underscore","csui/controls/list/list.view","csui/controls/listitem/listitemstandard.view","csui/behaviors/limiting/limiting.behavior","csui/behaviors/default.action/default.action.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/list/behaviors/list.view.keyboard.behavior","csui/behaviors/collection.state/collection.state.behavior","csui/controls/list/list.state.view","csui/controls/node-type.icon/node-type.icon.view","csui/controls/progressblocker/blocker","csui/utils/contexts/factories/application.scope.factory","csui/utils/commands","csui/widgets/generic.tile/tileview.toolbaritems","csui/controls/globalmessage/globalmessage","csui/utils/base","i18n!csui/widgets/generic.tile/nls/lang","i18n!csui/controls/listitem/impl/nls/lang"],function(e,t,i,n,o,s,r,l,a,c,u,d,h,p,m,f,g,v,b){"use strict";var w=t.defaults({},e.config(),{"openInPerspective":!0,"filterByProperty":"name"});return i.extend({"constructor":function(e){e||(e={}),e.data||(e.data={}),t.defaults(e,{"titleBarIconName":"title-icon title-customviewsearch","loadingText":v.loadingText}),e.data.titleBarIcon=!1===e.data.showTitleIcon?void 0:e.titleBarIconName,e.tileViewToolbarItems=m,this.context=e.context,this.showInlineActionBar=!1!==e.showInlineActionBar||e.showInlineActionBar;var n=this.context&&this.context.viewStateModel;this._enableOpenPerspective=w.openInPerspective&&n&&n.get("history"),this.options=e;var o=p.getSignatures(m),s=this.options.data.savedSearchQueryId+Math.floor(100*Math.random());this.collection=this.options.collection||this.options.context.getCollection(this.options.collectionFactory,{"options":{"promotedActionCommands":[],"nonPromotedActionCommands":o,"factoryUID":s,"query_id":this.options.data.savedSearchQueryId,"limit":this.options.limit,"isTileView":this.options.isTileView}});var r=this.options.collectionFactory.getLimitedResourceScope();r&&r.commands&&r.commands.push("editpermissions"),this.collection.setEnabledDelayRestCommands(!1),this.collection.setEnabledLazyActionCommands(!1),i.prototype.constructor.call(this,e),this.loadingText=e.loadingText,d.imbue(this),this.applicationScope=e.context.getModel(h)},"childEvents":{"click:item":"onClickItem","render":"onRenderItem","before:destroy":"onBeforeDestroyItem"},"templateHelpers":function(){return{"title":this.options.displayName||this.options.data.title||v.dialogTitle,"icon":this.options.titleBarIconName,"searchPlaceholder":this.options.searchPlaceholder||v.searchPlaceholder,"searchTitle":v.searchTitle,"searchAria":v.searchAria,"expandAria":v.expandAria,"openPerspectiveAria":v.openSearchCustomResultsView,"openPerspectiveTooltip":v.openSearchCustomResultsView,"enableOpenPerspective":this._enableOpenPerspective}},"childView":n,"childViewOptions":function(){var e=this.showInlineActionBar?{"toolbaritems":this.options.tileViewToolbarItems,"collection":this.collection}:void 0;return{"templateHelpers":function(){return{"name":this.model.get("short_name")||this.model.get("name"),"enableIcon":!0,"showInlineActionBar":this.showInlineActionBar,"itemLabel":t.str.sformat(b.itemTitleLabel,this.model.get("short_name")||this.model.get("name"))}},"context":this.context,"checkDefaultAction":!0,"toolbarData":e,"refetchNodeActions":!0}},"behaviors":{"DefaultAction":{"behaviorClass":s},"TabableRegion":{"behaviorClass":r},"ListViewKeyboardBehavior":{"behaviorClass":l},"CollectionState":{"behaviorClass":a,"collection":function(){return this.completeCollection},"stateView":c,"stateMessages":function(){return{"empty":this.options.emptyListText||v.emptyListText,"loading":this.options.loadingListText||v.loadingListText,"failed":this.options.failedListText||v.failedListText}}}},"onRender":function(){i.prototype.onRender.apply(this,arguments),this.collection.delayedActions&&this.listenTo(this.collection.delayedActions,"error",function(e,t,i){var n=new g.Error(t);f.showMessage("error",n.message)}),this.listenTo(this,"change:filterValue",this.filterCollection),this.listenTo(this.collection,"sync",function(){this.completeCollection=this.collection.clone()})},"filterCollection":function(){var e;if(this.options.filterValue&&this.options.filterValue.length>0){var i=this.options.filterValue.toLowerCase().split(" "),n=w.filterByProperty;this.currentFilter={},this.currentFilter[n]=this.options.filterValue.toLowerCase(),e=this.completeCollection.filter(function(e){var o,s=e.get(n);return s&&(s=s.trim().toLowerCase(),o=t.reduce(i,function(e,t){return e&&s.indexOf(t)>=0},!0)),o})}else this.currentFilter=void 0,e=this.completeCollection.models;this.collection.reset(e)},"onRenderItem":function(e){e._nodeIconView=new u({"el":e.$(".csui-type-icon").get(0),"node":e.model}),e._nodeIconView.render(),e.$el.attr("role","option"),e.$el.attr("aria-label",t.str.sformat(b.typeAndNameAria,e._nodeIconView.model.get("title"),e.model.get("short_name")?e.model.get("short_name"):e.model.get("name")))},"onBeforeDestroyItem":function(e){e._nodeIconView&&e._nodeIconView.destroy()},"onClickItem":function(e){this.triggerMethod("execute:defaultAction",e.model)}})}),csui.define("csui/widgets/search.results.tile/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.results.tile/impl/nls/root/lang",{"searchButtonMessage":"Search","title":"Search Query Results","dialogTitle":"Search Query Results","searchTitle":"Search","searchPlaceholder":"Search","searchAria":"Search in Search Results","expandAria":"Expand the Search Query Results","emptyListText":"There are no items to display.","loadingListText":"Loading results...","loadingText":"Loading search results","failedListText":"Loading results failed.","openSearchCustomResultsView":"Open Search Query Results view"}),csui.define("csui/widgets/search.results.tile/search.results.tile.view",["module","csui/lib/underscore","csui/widgets/generic.tile/generic.tile.view","csui/utils/namedlocalstorage","csui/utils/contexts/factories/search.results.table.factory","csui/controls/tile/behaviors/infinite.scrolling.behavior","csui/behaviors/collection.error/collection.error.behavior","i18n!csui/widgets/search.results.tile/impl/nls/lang"],function(e,t,i,n,o,s,r,l){"use strict";var a=t.extend({"limit":20},e.config());return i.extend({"namedLocalStorage":new n("widgetOptions"),"constructor":function(e){e||(e={}),e.titleBarIcon=!1===e.data.showTitleIcon?void 0:"title-icon title-customviewsearch",e.isTileView=!0,e.loadingText=l.loadingText,e.displayName=e.data.displayName,e.limit=a.limit,e.collectionFactory=o,this.behaviors=t.extend({"InfiniteScrolling":{"behaviorClass":s,"contentParent":".tile-content"},"CollectionError":{"behaviorClass":r}},this.behaviors),i.prototype.constructor.call(this,e),this.bindEventListeners()},"bindEventListeners":function(){this.listenTo(this,"before:collection:scroll:fetch",t.bind(function(){this.blockActions()},this)),this.listenTo(this,"collection:scroll:fetch",function(){this.scrollTop=this.$el.find(".tile-content").scrollTop(),this.render()}),this.listenTo(this,"render",t.bind(function(){this.scrollTop&&this.$el.find(".tile-content").scrollTop(this.scrollTop)},this))},"handleError":function(){this.errorExists=!0,this.$el.addClass("csui-list-view-error"),this.$el.find(".csui-message").html(this.collection.error.message)},"onClickOpenPerspective":function(e){var i=this.options.data.savedSearchQueryId||this.options.savedSearchQueryId,n=this.options.data.displayName||l.dialogTitle,o=this.namedLocalStorage.get(i)||{};if(n){var s=t.extend(o,{"name":n});this.namedLocalStorage.set(i,s)}this.applicationScope.set("query_id",i),this.applicationScope.set("id","searchresults"),this.trigger("open:searchresults:perspective")}})}),csui.define("hbs!csui/widgets/shortcut/impl/shortcut",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tile-header">\r\n  <div class="tile-title">\r\n    <h2 class="csui-heading">'+e.escapeExpression((s=null!=(s=r(i,"short_name")||(null!=t?r(t,"short_name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"short_name","hash":{},"loc":{"start":{"line":3,"column":29},"end":{"line":3,"column":43}}}):s))+'</h2>\r\n  </div>\r\n</div>\r\n\r\n<div class="tile-icon">\r\n  <div class="icon '+e.escapeExpression((s=null!=(s=r(i,"icon")||(null!=t?r(t,"icon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":8,"column":19},"end":{"line":8,"column":27}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=r(i,"title")||(null!=t?r(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":8,"column":36},"end":{"line":8,"column":45}}}):s))+'"></div>\r\n</div>\r\n'}});return i.registerPartial("csui_widgets_shortcut_impl_shortcut",n),n}),csui.define("csui/widgets/shortcut/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/shortcut/impl/nls/root/lang",{"loadingText":"Loading..."}),csui.define("css!csui/widgets/shortcut/impl/shortcut",[],function(){}),csui.define("csui/widgets/shortcut/shortcut.view",["csui/lib/backbone","csui/lib/marionette","csui/behaviors/default.action/default.action.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/behaviors/item.error/item.error.behavior","csui/utils/contexts/factories/node","csui/utils/node.links/node.links","csui/utils/defaultactionitems","csui/utils/commands","hbs!csui/widgets/shortcut/impl/shortcut","i18n!csui/widgets/shortcut/impl/nls/lang","css!csui/widgets/shortcut/impl/shortcut"],function(e,t,i,n,o,s,r,l,a,c,u){"use strict";return t.ItemView.extend({"tagName":"a","attributes":{"href":"#"},"className":function(){return"cs-shortcut tile "+(this.options.data.background||"cs-tile-background-default")},"modelEvents":{"change":"render"},"triggers":{"click":"click:link"},"template":c,"templateHelpers":function(){var e,t,i;return this.model.fetched?(e=this.getName(),t=e.length>38?e.substr(0,38)+"...":e,i=t.indexOf(" "),t.length>=20&&(i<0||i>20)&&(t=t.substr(0,18)+"...")):t=u.loadingText,{"short_name":t,"icon":this.options.data.icon||"icon-folder","title":e}},"behaviors":{"DefaultAction":{"behaviorClass":i},"TabableRegion":{"behaviorClass":n},"ItemError":{"behaviorClass":o}},"events":{"keydown":"onKeyInView"},"currentlyFocusedElement":function(){return this.$el},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),this.triggerMethod("click:link"))},"constructor":function(e){e||(e={}),e.data||(e.data={}),e.model||(e.model=e.context.getModel(s,{"attributes":{"id":e.data.id||"volume","type":e.data.type}})),t.ItemView.prototype.constructor.call(this,e),this.model.excludeResources(),this.model.resetFields(),this.model.setFields({"properties":["container","id","name","original_id","type"],"versions.element(0)":["mime_type"]}),this.model.resetExpand(),this.model.setExpand({"properties":["original_id"]}),this.model.resetCommands(),this.model.setCommands(l.getAllCommandSignatures(a))},"onRender":function(){var e=!this.model.fetched||!this.defaultActionController.hasAction(this.model);this.$el[e?"addClass":"removeClass"]("csui-disabled"),this.$el.attr("href",r.getUrl(this.model)||"#")},"getName":function(){return(this.options.data.displayName||"").trim().length>0?this.options.data.displayName:this.model.get("name")||""},"onClickLink":function(){this.triggerMethod("execute:defaultAction",this.model)}})}),csui.define("hbs!csui/widgets/shortcuts/impl/shortcut/impl/small.shortcut",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-details">\r\n    <div class="tile-icon">\r\n        <div class="icon '+e.escapeExpression((s=null!=(s=r(i,"icon")||(null!=t?r(t,"icon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":3,"column":25},"end":{"line":3,"column":33}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=r(i,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":42},"end":{"line":3,"column":50}}}):s))+'" aria-hidden="true"></div>\r\n    </div>\r\n\r\n    <div class="tile-title">\r\n        <span class="csui-heading" aria-label="'+e.escapeExpression((s=null!=(s=r(i,"shortcutAria")||(null!=t?r(t,"shortcutAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"shortcutAria","hash":{},"loc":{"start":{"line":7,"column":47},"end":{"line":7,"column":63}}}):s))+'">'+e.escapeExpression((s=null!=(s=r(i,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":7,"column":65},"end":{"line":7,"column":73}}}):s))+"</span>\r\n    </div>\r\n</div>\r\n"}});return i.registerPartial("csui_widgets_shortcuts_impl_shortcut_impl_small.shortcut",n),n}),csui.define("hbs!csui/widgets/shortcuts/impl/shortcut/impl/medium.shortcut",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-details">\r\n    <div class="tile-icon">\r\n        <div class="icon '+e.escapeExpression((s=null!=(s=r(i,"icon")||(null!=t?r(t,"icon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":3,"column":25},"end":{"line":3,"column":33}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=r(i,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":42},"end":{"line":3,"column":50}}}):s))+'" aria-hidden="true"></div>\r\n    </div>\r\n\r\n    <div class="tile-title">\r\n        <span class="csui-heading" aria-label="'+e.escapeExpression((s=null!=(s=r(i,"shortcutAria")||(null!=t?r(t,"shortcutAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"shortcutAria","hash":{},"loc":{"start":{"line":7,"column":47},"end":{"line":7,"column":63}}}):s))+'">'+e.escapeExpression((s=null!=(s=r(i,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":7,"column":65},"end":{"line":7,"column":73}}}):s))+"</span>\r\n    </div>\r\n</div>\r\n"}});return i.registerPartial("csui_widgets_shortcuts_impl_shortcut_impl_medium.shortcut",n),n}),csui.define("hbs!csui/widgets/shortcuts/impl/shortcut/impl/large.shortcut",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tile-group">\r\n    <div class="tile-icon">\r\n        <div class="icon '+e.escapeExpression((s=null!=(s=r(i,"icon")||(null!=t?r(t,"icon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":3,"column":25},"end":{"line":3,"column":33}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=r(i,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":42},"end":{"line":3,"column":50}}}):s))+'" aria-hidden="true"></div>\r\n    </div>\r\n    <div class="tile-title">\r\n        <span class="csui-heading" aria-label="'+e.escapeExpression((s=null!=(s=r(i,"shortcutAria")||(null!=t?r(t,"shortcutAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"shortcutAria","hash":{},"loc":{"start":{"line":6,"column":47},"end":{"line":6,"column":63}}}):s))+'">'+e.escapeExpression((s=null!=(s=r(i,"name")||(null!=t?r(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":6,"column":65},"end":{"line":6,"column":73}}}):s))+"</span>\r\n    </div>\r\n</div>\r\n"}});return i.registerPartial("csui_widgets_shortcuts_impl_shortcut_impl_large.shortcut",n),n}),csui.define("csui/widgets/shortcuts/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/shortcuts/impl/nls/root/lang",{"loadingText":"Loading shortcuts...","shortcutPrefixAria":"Shortcut to {0}","addShortcut":"Add shortcut","removeShortcut":"Remove shortcut","removeShortcutCnfrmMsg":"Shortcut will be removed from the group.","groupAria":"Shortcut Group","emptyGroup":"Add a shortcut to the group. Max. 4 shortcuts can be added","maxItemsGroup":'Shortcut group, 4 shortcuts added. Press "Enter" to access the list of shortcuts. Press "Ctrl+ Right or Left Arrow" to move the shortcut group to the right or left.',"addShortcutToGroup":"Add shortcut to the group","shortcutSettings":"{0} shortcut settings","accessShortcutActions":"Shortcut {0}, press ENTER to access its actions",
"shortcutGroupWithOneItem":"Shortcut Group. {0} shortcut added. {1} more can be added. Press Enter to access the list of shortcuts. Press Ctrl+ Right or Left Arrow to move the shortcut group to the right or left.","shortcutGroupWithMixedItems":"Shortcut Group. {0} shortcuts added. {1} more can be added. Press Enter to access the list of shortcuts. Press Ctrl+ Right or Left Arrow to move the shortcut group to the right or left.","removeShortcutItem":"Remove {0} Shortcut"}),csui.define("css!csui/widgets/shortcuts/impl/shortcut/impl/shortcut",[],function(){}),csui.define("css!csui/widgets/shortcuts/impl/shortcut/impl/small.shortcut",[],function(){}),csui.define("css!csui/widgets/shortcuts/impl/shortcut/impl/medium.shortcut",[],function(){}),csui.define("css!csui/widgets/shortcuts/impl/shortcut/impl/large.shortcut",[],function(){}),csui.define("csui/widgets/shortcuts/impl/shortcut/shortcut.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/behaviors/default.action/default.action.behavior","csui/behaviors/item.error/item.error.behavior","csui/utils/contexts/factories/node","csui/utils/defaultactionitems","csui/utils/commands","csui/utils/node.links/node.links","hbs!csui/widgets/shortcuts/impl/shortcut/impl/small.shortcut","hbs!csui/widgets/shortcuts/impl/shortcut/impl/medium.shortcut","hbs!csui/widgets/shortcuts/impl/shortcut/impl/large.shortcut","i18n!csui/widgets/shortcuts/impl/nls/lang","css!csui/widgets/shortcuts/impl/shortcut/impl/shortcut","css!csui/widgets/shortcuts/impl/shortcut/impl/small.shortcut","css!csui/widgets/shortcuts/impl/shortcut/impl/medium.shortcut","css!csui/widgets/shortcuts/impl/shortcut/impl/large.shortcut"],function(e,t,i,n,o,s,r,l,a,c,u,d,h,p,m){"use strict";var f=n.ItemView.extend({"constructor":function(o){o||(o={}),o.model=o.model||new i.Model,o.model.set(e.defaults(o.model.attributes,{"icon":f.DEFAULT_ICON,"theme":"csui-shortcut-theme-grey-shade1","layout":"small","id":"","displayName":""})),n.ItemView.prototype.constructor.call(this,o),this.node=this.model.get("node"),this.node||this._ensureNode(),this._ensureNodeFetched(),t(window).on("resize."+this.cid,this._applyEllipsis.bind(this))},"tagName":"a","className":function(){var e=[];return e.push("csui-shortcut-item"),e.push("csui-acc-focusable"),e.push(this.model.get("theme")),e.push("csui-"+this.model.get("layout")),e.join(" ")},"getTemplate":function(){switch(this.model.get("layout")){case"small":return d;case"medium":return h;default:return p}},"templateHelpers":function(){var t=this.getName();return{"icon":this.model.get("icon")||f.DEFAULT_ICON,"name":t,"shortcutAria":e.str.sformat(m.shortcutPrefixAria,t)}},"behaviors":{"DefaultAction":{"behaviorClass":s},"ItemError":{"behaviorClass":r,"model":function(){return this.options.model.get("node")},"errorViewOptions":function(){return{"low":"small"===this.model.get("layout")}}}},"modelEvents":{"change":"render","change:shortcutTheme":"_onThemeChange","change:id":"_ensureNode","change:type":"_ensureNode"},"events":{"click":"onClicked","keydown":"onKeyInView"},"onRender":function(){this._updateElement(),this._updateNodeState()},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||this.trigger("click")},"_updateElement":function(){this.node&&this.$el.attr("href",u.getUrl(this.node)),this.$el.attr("class",e.result(this,"className")).attr("title",this.getName())},"onDomRefresh":function(){this._applyEllipsis()},"_applyEllipsis":function(){var e=this.$el.find(".tile-title");o.applyEllipsis(e,2)},"onDestroy":function(){t(window).off("resize."+this.cid,this._applyEllipsis.bind(this))},"_onThemeChange":function(){this.trigger("change:shortcutTheme")},"onClicked":function(e){o.isControlClick(e)||(e.preventDefault(),this.triggerMethod("execute:defaultAction",this.node))},"getName":function(){return(this.model.get("displayName")||"").trim().length>0?this.model.get("displayName"):this.node.fetched?this.node.get("name"):m.loadingText},"_ensureNode":function(){this.node=this.options.context.getModel(l,{"attributes":{"id":this.options.model.get("id")||"volume","type":this.options.model.get("type")||141}}),f.prepareModelToFetch(this.node),this.model.set("node",this.node,{"silent":!0}),this.trigger("update:model",this.node),this._ensureNodeFetched()},"_ensureNodeFetched":function(){this.listenToOnce(this.node,"change",this.render),this.node.ensureFetched({"suppressError":!0})},"_updateErrorState":function(){this.node.error?(this.$el.addClass("csui-failed"),this.$el.removeAttr("title")):this.$el.removeClass("csui-failed")},"_updateNodeState":function(){this.node.fetched&&this.defaultActionController.hasAction(this.node)?this.$el.removeClass("csui-disabled"):this.$el.addClass("csui-disabled"),this._updateErrorState()},"focus":function(){this.$el.trigger("focus")}},{"prepareModelToFetch":function(e){e.excludeResources(),e.resetFields(),e.setFields({"properties":["container","id","name","original_id","type","custom_view_search"],"versions.element(0)":["mime_type"]}),e.resetExpand(),e.setExpand({"properties":["original_id"]}),e.resetCommands(),e.setCommands(a.getAllCommandSignatures(c))},"DEFAULT_ICON":"icon-folder"});return f}),csui.define("csui/widgets/shortcuts/impl/nls/shortcuts.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/shortcuts/impl/nls/root/shortcuts.manifest",{"widgetTitle":"Shortcut Group","shortcutWidgetTitle":"Shortcut","widgetDescription":"Tile representing a hyperlink to an object; it navigates to its page when clicked","shortcutItemsTitle":"Shortcut Items","shortcutItemsDescription":"Shortcut Items description","idTitle":"Target object","idDescription":"An object to open by this shortcut","typeTitle":"Volume","typeDescription":"Sub-type number of a global volume to open by this shortcut if no object has been selected","displayNameTitle":"Display name","shortcutThemeTitle":"Theme","shortcutThemeDescription":"Styling of the shortcuts","typeEnterpriseVolume":"Enterprise","typePersonalVolume":"Personal","typeCategoryVolume":"Categories","shortcutThemeStone1":"Stone Group 1","shortcutThemeStone2":"Stone Group 2","shortcutThemeTeal1":"Teal Group 1","shortcutThemeTeal2":"Teal Group 2","shortcutThemePink1":"Pink Group 1","shortcutThemePink2":"Pink Group 2","shortcutThemeIndigo1":"Indigo Group 1","shortcutThemeIndigo2":"Indigo Group 2"}),csui.define("json!csui/widgets/shortcuts/impl/shortcut/shortcut.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{shortcutWidgetTitle}}","description":"{{widgetDescription}}","kind":"tile","schema":{"type":"object","properties":{"id":{"title":"{{idTitle}}","description":"{{idDescription}}","type":"integer"},"displayName":{"title":"{{displayNameTitle}}","type":"string"},"type":{"title":"{{typeTitle}}","description":"{{typeDescription}}","type":"integer","enum":[141,142,133]},"shortcutTheme":{"title":"{{shortcutThemeTitle}}","description":"{{shortcutThemeDescription}}","type":"string","enum":["csui-shortcut-theme-stone1","csui-shortcut-theme-stone2","csui-shortcut-theme-teal1","csui-shortcut-theme-teal2","csui-shortcut-theme-pink1","csui-shortcut-theme-pink2","csui-shortcut-theme-indigo1","csui-shortcut-theme-indigo2"]}}},"options":{"fields":{"shortcutTheme":{"type":"select","optionLabels":["{{shortcutThemeStone1}}","{{shortcutThemeStone2}}","{{shortcutThemeTeal1}}","{{shortcutThemeTeal2}}","{{shortcutThemePink1}}","{{shortcutThemePink2}}","{{shortcutThemeIndigo1}}","{{shortcutThemeIndigo2}}"]},"id":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[],"startLocations":["csui/dialogs/node.picker/start.locations/enterprise.volume","csui/dialogs/node.picker/start.locations/personal.volume","csui/dialogs/node.picker/start.locations/favorites","csui/dialogs/node.picker/start.locations/recent.containers"]}}},"type":{"type":"select","optionLabels":["{{typeEnterpriseVolume}}","{{typePersonalVolume}}","{{typeCategoryVolume}}"]}}}}),csui.define("csui/widgets/shortcuts/impl/shortcut/editable.shortcut.view",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/widgets/shortcuts/impl/shortcut/shortcut.view","csui/models/widget/widget.model","csui/utils/base","i18n!csui/widgets/shortcuts/impl/nls/lang","i18n!csui/widgets/shortcuts/impl/nls/shortcuts.manifest","json!csui/widgets/shortcuts/impl/shortcut/shortcut.manifest.json"],function(e,t,i,n,o,s,r,l,a,c){"use strict";return c=s.resolveLocalizedManifest("shortcut.manifest",c,a),o.extend({"constructor":function(e){e||(e={}),e.model=e.model||new n.Model,this._injectConfigurationBehaviour(e),e.container.options.data.___pman_isdropped&&0===e.collection.getShortcuts().length&&e.model.set("___pman_opencallout",!0,{"silent":!0}),o.prototype.constructor.apply(this,arguments),this._registerEventHandlers()},"tagName":"div","modelEvents":t.defaults({"refresh:mask":"onRefreshMask"},t.result(o.prototype,"modelEvents")),"onRefreshMask":function(){var e=this._getDefaultWidgetConfig();this.trigger("refresh:mask",e)},"attachElContent":function(e){return this.$el.find(".csui-configure-perspective-widget .pman-widget-popover").length?(this.$el.children().not(".csui-configure-perspective-widget").remove(),this.$el.prepend(i(e))):this.$el.html(e),!0},"_getDefaultWidgetConfig":function(e){e||(e=this.options);var i=l.groupAria+" ";e.collection.getShortcuts().forEach(function(e,t){t>0&&(i+=", "),i+=e.get("displayName")||e.get("node").get("name")});var n={"allowReplace":!1,"notifyUpdatesImmediatly":!0,"useEnterToConfigure":this._isNewPlaceholder(e),"ItemsInGroupAriaLabel":i};return e.collection.getShortcuts().length>1&&(n=t.extend(n,{"removeConfirmTitle":l.removeShortcut,"removeConfirmMsg":l.removeShortcutCnfrmMsg,"confirmOnRemove":!1})),n},"_injectConfigurationBehaviour":function(i){var n=this._getDefaultWidgetConfig(i);this.behaviors=t.defaults({"PerspectiveWidgetConfig":t.extend({"behaviorClass":e("csui/perspective.manage/behaviours/pman.widget.config.behaviour"),"widgetConfig":function(){return{"options":i.model.attributes}},"manifest":c},n)},this.behaviors)},"isShortcutValid":function(e){var t=!0;return 0===this.collection.getShortcuts().length&&"edit"===this.options.perspectiveMode&&(t=this.isOptionsValid(e)),t},"validateConfiguration":function(e){var t=this.isShortcutValid(e),i=t?"removeClass":"addClass";return this.$el.find(".tile-group")[i]("binf-hidden"),this.$el[i]("csui-pman-shortcut-error"),t},"isOptionsValid":function(e){return!!e.id||!!e.type},"_updateShortcut":function(e){this.isShortcutValid(e.options)&&this.$el.find(".csui-configure-perspective-widget").removeClass("binf-perspective-has-error")},"_registerEventHandlers":function(){this.listenTo(this,"delete:widget",function(){delete this.options.container.options.data.___pman_opencallout}),this.listenTo(this,"update:widget:options",this._updateShortcut)},"_updateElement":function(){this.$el.attr("class",t.result(this,"className"))},"_ensureNode":function(){this._isNewPlaceholder()?this.node=new n.Model:o.prototype._ensureNode.apply(this,arguments)},"_ensureNodeFetched":function(){this._isNewPlaceholder()||(this.isUpdating=!0,o.prototype._ensureNodeFetched.apply(this,arguments),delete this.isUpdating)},"_updateNodeState":function(){this._isNewPlaceholder()||o.prototype._updateErrorState.apply(this,arguments)},"getName":function(){return this._isNewPlaceholder()?l.addShortcut:o.prototype.getName.apply(this,arguments)},"onRender":function(){o.prototype.onRender.apply(this,arguments),this._isNewPlaceholder()&&this.$el.addClass("csui-pman-shortcut-new"),this.$el.addClass("csui-pman-editable-widget"),this.$el.find(".binf-popover").length||r.clearFocusables(this.$el)},"onDomRefresh":function(){var e=this.$el.find(".wrapper-button");if(this.$el.find(".binf-popover").length||r.clearFocusables(this.$el),this._isNewPlaceholder())e.attr("aria-label",l.addShortcutToGroup);else{var i=this.model.get("displayName")||this.model.get("node").get("name");e.attr("aria-label",t.str.sformat(l.accessShortcutActions,i)),this.$el.find(".icon-edit").attr("aria-label",t.str.sformat(l.shortcutSettings,i)),this.$el.find(".clear-icon").attr("aria-label",t.str.sformat(l.removeShortcutItem,i))}},"onClicked":function(e){e.preventDefault(),this.$el.find(".pman-widget-popover").has(e.target).length||e.stopPropagation()},"_isNewPlaceholder":function(e){return(e||this.options).model.isAddShortcut()},"focus":function(){this.$el.find(".csui-configure-perspective-widget .wrapper-button").trigger("focus")}})}),csui.define("css!csui/widgets/shortcuts/impl/shortcuts",[],function(){}),csui.define("csui/widgets/shortcuts/shortcuts.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/widgets/shortcuts/impl/shortcut/shortcut.view","csui/widgets/shortcuts/impl/shortcut/editable.shortcut.view","csui/utils/contexts/factories/node","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/utils/perspective/perspective.util","smart/controls/progressblocker/blocker","i18n!csui/widgets/shortcuts/impl/nls/lang","css!csui/widgets/shortcuts/impl/shortcuts"],function(e,t,i,n,o,s,r,l,a,c,u,d,h){"use strict";var p=["shade1","shade2","shade3","shade4"],m=i.Model.extend({"idAttribute":"shortcutItemId","isAddShortcut":function(){return!0===this.get("isAddNew")}}),f=i.Collection.extend({"constructor":function(t,n){n||(n={}),e.defaults(n,{"model":m,"comparator":function(e,t){return t.get("isAddNew")?-1:0}}),this.options=n,i.Collection.prototype.constructor.call(this,t,n)},"getShortcuts":function(){return this.filter(function(e){return!e.isAddShortcut()})},"evaluateAddNewExistence":function(){var e=this.options[u.KEY_WIDGET_ID];if(this.options.perspectiveMode!==u.MODE_PERSONALIZE||!e||u.isPersonalWidgetId(e)){var t=this.where(function(e){return e.isAddShortcut()});return this.length<4&&0===t.length?(this.add({"id":"","isAddNew":!0,"icon":"icon-new","displayName":""}),!0):this.length>4&&t.length>0&&(this.remove(t),!0)}}}),g=n.CollectionView.extend({"constructor":function(t){t||(t={}),t.data||(t.data={}),t=e.defaults(t,{"reorderOnSort":!0,"widgetContainer":this}),t.data=this._normalizeData(t.data),t.collection=t.collection||new f([],e.pick(t,"perspectiveMode",u.KEY_WIDGET_ID)),n.CollectionView.prototype.constructor.call(this,t)},"tagName":"div","className":"csui-shortcut-container tile initialLoading csui-shortcut-group-container csui-widget-focusable","attributes":function(){var t={};return this._isInlineEditMode()||(t=e.extend({"role":"navigation","aria-label":h.groupAria},t)),t},"regions":{"shortcut0":".shortcut-region-0","shortcut1":".shortcut-region-1","shortcut2":".shortcut-region-2","shortcut3":".shortcut-region-3"},"behaviors":function(){if(!this._isInlineEditMode())return{"TabableRegion":{"behaviorClass":s}}},"events":function(){var t={};return t=this._isInlineEditMode()?e.extend(t,{"drop":"onDrop","dragover":"onDragOver","dragenter":"onDragEnter","keydown":"_onEditKeyDown"}):e.extend(t,{"keydown":"onKeyInView"})},"childView":r,"childEvents":{"change:shortcutTheme":"_onChangeTheme","add:shortcut":"_onAddShortcut","delete:widget":"_onRemoveShortcut","update:widget:options":"_updateShortcutOptions"},"childViewOptions":function(e,t){return{"context":this.options.context,"collection":this.options.collection,"container":this,"perspectiveMode":this.options.perspectiveMode}},"buildChildView":function(e,t,i){return t=this._isInlineEditMode()?l:r,n.CollectionView.prototype.buildChildView.call(this,e,t,i)},"_normalizeData":function(e){return e||(e={"shortcutItems":[]}),e.shortcutTheme||(e.shortcutTheme=""),e},"initialize":function(){this.loadingText=h.loadingText,this.darkBackground=!0,d.imbue(this),this.listenTo(this.collection,"add",this._onCollectionChange).listenTo(this.collection,"remove",this._onCollectionChange).listenTo(this.collection,"reset",this._onCollectionChange),this._isInlineEditMode()&&this.listenTo(this.collection,"add",this._onCollectionInlineAdd).listenTo(this.collection,"remove",this._onCollectionInlineRemove);var t=e.map(e.first(this.options.data.shortcutItems||[],4),e.clone);this._fetchModels(t).always(e.bind(function(){this._setupCollection(t)},this)),this._currentShortcutIndex=0,this.listenTo(this,"add:child",this.propagateEventsToViews)},"_fetchModels":function(i){this.blockActions();var n=this,o=e.map(i,function(e){e.id=e.id||e.launchButtonID;var t=n.options.context.getModel(a,{"attributes":{"id":e.id||e.launchButtonID||"volume","type":e.type}});return r.prepareModelToFetch(t),t}),s=e.map(o,function(e){return e.fetch({"suppressError":!0})}),l=t.whenAll.apply(t,s);return l.always(function(){e.each(i,function(e,t){e.node=o[t]}),n.unblockActions()}),l},"_setupCollection":function(t){if(!this._isInlineEditMode()){var i=e.filter(t,function(e){return!e.node.error});t=i.length>0?i:e.first(t,1)}t=t||[],this.collection.reset(t)},"_isInlineEditMode":function(){return!!this.options.perspectiveMode},"_onCollectionChange":function(){this._isInlineEditMode()&&this.collection.evaluateAddNewExistence(),this._updateShortcutStyles()},"_onCollectionInlineAdd":function(){this.collection.each(function(e){e.trigger("refresh:mask")})},"_onCollectionInlineRemove":function(){this.collection.each(function(e){e.trigger("refresh:mask")})},"_getLayout":function(e){var t="small";return 1===e?t="large":2===e&&(t="medium"),t},"_getShortcutTheme":function(e,t){var i=this.options.data.shortcutTheme?this.options.data.shortcutTheme:"csui-shortcut-theme-grey";return t>1&&(e+=4-t,i+="-"+p[e]),i},"_updateShortcutOptions":function(e,t){var i=e.model,n=t.options;if(i.get("isAddNew")){if(t.softUpdate)return;if(!t.isValid||!e.isOptionsValid(n))return void(this.options.perspectiveMode===u.MODE_EDIT_PERSPECTIVE&&this._notifyOptionsChange(!e.isShortcutValid(n)));i.set({"isAddNew":void 0,"displayName":void 0,"icon":void 0},{"silent":!0,"unset":!0})}e.isUpdating=!0,this._setDefaultOptions(n),i.set(n),this._notifyOptionsChange();var o=this.collection.evaluateAddNewExistence();delete e.isUpdating,o||(this._updateShortcutStyles(),e.model.trigger("refresh:mask")),this.triggerMethod("dom:refresh")},"_setDefaultOptions":function(e){e.type=e.type||141},"_onRemoveShortcut":function(e){var t=this.collection.indexOf(e.model);this.collection.remove(e.model),0===this.collection.getShortcuts().length?this.options.widgetContainer.trigger("remove:widget"):(this._notifyOptionsChange(),this.children.findByIndex(t).focus())},"_notifyOptionsChange":function(e){var t=this.collection.getShortcuts().map(function(e){return{"id":e.get("id"),"type":e.get("type"),"displayName":e.get("displayName"),"icon":e.has("icon")?e.get("icon"):""}});this.options.widgetContainer.trigger("update:widget:options",{"shortcutTheme":this.collection.first().get("shortcutTheme"),"shortcutItems":t,"isValid":!e})},"_onChangeTheme":function(e){this.options.data.shortcutTheme=e.model.get("shortcutTheme"),this._updateShortcutStyles()},"_onAddShortcut":function(e,t){this.collection.add({"id":"","icon":"","displayName":"","type":141,"shortcutTheme":this.options.data.shortcutTheme},{"at":this.collection.length-1}),this.collection.sort(),this._notifyOptionsChange()},"_updateShortcutStyles":function(){var e=this.options.data.shortcutTheme,t=this._getLayout(this.collection.length);this.collection.each(function(i,n){var o=this._isInlineEditMode()?this.collection.getShortcuts().length:this.collection.length,s=this._getShortcutTheme(n,o);i.set({"layout":t,"theme":s,"shortcutTheme":e})},this)},"onDrop":function(e){this.options.widgetContainer.trigger("replace:widget",e)},"onDragOver":function(e){e.preventDefault()},"onDragEnter":function(e){e.preventDefault()},"onRender":function(){this._clearShortcutTabIndexes()},"onDomRefresh":function(){if(this._isInlineEditMode()){var t=!0,i=(h.groupAria,this.collection.getShortcuts().length),n="";switch(this.$el.parent().find(".shortcut-group-wrapper").length>0&&(t=!1),t&&this.$el.before("<div class='shortcut-group-button-wrapper'><button class='shortcut-group-wrapper binf-btn' tabindex='0'></button></div>"),this.$el.parent().off("click",".shortcut-group-wrapper",this._onEditEnterPress).on("click",".shortcut-group-wrapper",this._onEditEnterPress.bind(this)),this.$el.parent().off("keydown",".shortcut-group-wrapper",this._onKeyInEmptyPlaceHolder).on("keydown",".shortcut-group-wrapper",e.bind(this._onKeyInEmptyPlaceHolder,this)),i){case 0:n=h.emptyGroup;break;case 1:n=e.str.sformat(h.shortcutGroupWithOneItem,i,4-i);break;case 4:n=h.maxItemsGroup;break;default:n=e.str.sformat(h.shortcutGroupWithMixedItems,i,4-i)}this.$el.parent().find(".shortcut-group-wrapper").attr("aria-label",n)}},"_clearShortcutTabIndexes":function(){this.$el.find(".binf-popover").length||o.clearFocusables(this.$el)},"currentlyFocusedElement":function(){var e=this._currentlyFocusedShortcut();return e&&e.$el},"_currentlyFocusedShortcut":function(){return this.children.findByIndex(this._currentShortcutIndex)},"_onEditEnterPress":function(e){var i=t(e.target);return 0===this.collection.getShortcuts().length&&0===this.$el.has(i).length?(this.$el.find(".csui-pman-widget-masking").trigger("click"),!1):!i.is(this.$el.parent().find(".shortcut-group-wrapper"))||(this._enterConfiguration(),!1)},"_onEditKeyDown":function(e){var i=!0,n=t(e.target);switch(e.keyCode){case 13:case 32:i=this._onEditEnterPress(e);break;case 27:this.collection.getShortcuts().length>0?(n.is(this.$el.find(".wrapper-button"))?this.$el.parent().find(".shortcut-group-wrapper").trigger("focus"):this.$el.find(".csui-pman-shortcut-new .wrapper-button").trigger("focus"),i=!1):0===this.collection.getShortcuts().length&&(this._exitConfiguration(),i=!1);break;case 38:this._selectPreviousShortcut();break;case 40:this._selectNextShortcut()}return i},"_enterConfiguration":function(){this._currentShortcutIndex=-1,this._selectShortcut(0)},"_exitConfiguration":function(){this.$el.parent().find(".shortcut-group-wrapper").trigger("focus"),this._clearShortcutTabIndexes(this.$el)},"onKeyInView":function(e){switch(e.keyCode){case 13:case 32:this.currentlyFocusedElement().trigger("click");break;case 38:this._selectPreviousShortcut();break;case 40:this._selectNextShortcut()}},"_onKeyInEmptyPlaceHolder":function(e){switch(e.keyCode){case 9:if(e.shiftKey&&t(e.target).is(t(".shortcut-group-wrapper"))){var i=t(document.activeElement).closest(".csui-draggable-item.csui-pman-editable-widget").index(),n=t(".csui-dnd-container>.csui-pman-editable-widget"),o=n.eq(i-1).offset().top;if(!(n.eq(i).offset().top===o)){var s=i<0?0:o-t(".pman-header").height();t("html, body").animate({"scrollTop":s},0)}}}},"_selectNextShortcut":function(){var e=Math.min(this._currentShortcutIndex+1,this.collection.length-1);this._selectShortcut(e)},"_selectPreviousShortcut":function(){var e=Math.max(this._currentShortcutIndex-1,0);this._selectShortcut(e)},"_selectShortcut":function(e){e!==this._currentShortcutIndex&&(this._currentShortcutIndex=e,this.trigger("changed:focus",this),this._currentlyFocusedShortcut().focus())}},{"migrateSingleShortcut":function(e){var t;switch(e.background){case"cs-tile-background1":t="csui-shortcut-theme-stone1";break;case"cs-tile-background2":t="csui-shortcut-theme-teal2";break;case"cs-tile-background3":t="csui-shortcut-theme-pink1"}return{"shortcutItems":[e],"shortcutTheme":t}},"migrateData":function(e,t){switch(e){case"shortcut":case"csui/widgets/shortcut":return g.migrateSingleShortcut(t);default:return t}}});return e.extend(g.prototype,c),g}),csui.define("csui/widgets/welcome.placeholder/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/welcome.placeholder/impl/nls/root/lang",{"greetingWithName":"Hello {0}","greetingWithoutName":"Hello","greetingMorning":"Good morning, {0}!","greetingAfternoon":"Good afternoon, {0}!","greetingEvening":"Good evening, {0}!","greetingMorningNoName":"Good morning!","greetingAfternoonNoName":"Good afternoon!","greetingEveningNoName":"Good evening!","videoLabel":"Smart UI introduction video","videoSrc":"//sunnyside.vidavee.com/opentext/rest/file/GetFileAsset/EBC85A92D0C5DE3A272CC1C165E85A78/introVideo_2020.mp4","videoPoster":"//sunnyside.vidavee.com/opentext/rest/file/GetFileThumbnail/EBC85A92D0C5DE3A272CC1C165E85A78/thumbnail.jpg","message":"As a foundational technology in the Digital Workplace, OpenText Content Suite will pave the way to personal productivity, seamless collaboration, and integration with business processes."}),csui.define("hbs!csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n  <div class="binf-modal-dialog">\r\n    <div class="binf-modal-content csui-video">\r\n      <video  preload="none"\r\n             poster="'+e.escapeExpression((s=null!=(s=r(i,"videoPoster")||(null!=t?r(t,"videoPoster"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"videoPoster","hash":{},"loc":{"start":{"line":5,"column":21},"end":{"line":5,"column":36}}}):s))+'"\r\n             controls="controls">\r\n        <source\r\n          src="'+e.escapeExpression((s=null!=(s=r(i,"videoSrc")||(null!=t?r(t,"videoSrc"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"videoSrc","hash":{},"loc":{"start":{"line":8,"column":15},"end":{"line":8,"column":27}}}):s))+'"\r\n          type="video/mp4">\r\n        </source>\r\n      </video>\r\n\r\n    </div>\r\n  </div>\r\n'}});return i.registerPartial("csui_widgets_welcome.placeholder_impl_welcome.video_welcome.video",n),n}),csui.define("css!csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video",[],function(){}),csui.define("csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/utils/url","csui/utils/contexts/factories/node","i18n!csui/widgets/welcome.placeholder/impl/nls/lang","csui/behaviors/keyboard.navigation/tabables.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video","css!csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video","csui/lib/binf/js/binf"],function(e,t,i,n,o,s,r,l,a,c){return i.ItemView.extend({"_dataDefaults":{"videoSrc":r.videoSrc,"videoPoster":r.videoPoster},"className":"cs-dialog welcome-video binf-modal binf-fade","template":c,"events":{"hide.binf.modal":"onDestroy","hidden.binf.modal":"onDestroy","keydown video":"onKeyDown","shown.binf.modal":"onShown"},"templateHelpers":function(){var e=this.options.data;return{"videoSrc":e.videoSrc,"videoPoster":e.videoPoster}},"behaviors":{"TabablesBehavior":{"behaviorClass":l,"recursiveNavigation":!0,"containTabFocus":!0},"TabableRegion":{"behaviorClass":a}},"currentlyFocusedElement":function(){return this.$el},"constructor":function(t){t||(t={}),t.data||(t.data={}),e.each(this._dataDefaults,function(e,i){t.data[i]||(t.data[i]=e)}),i.ItemView.prototype.constructor.apply(this,arguments),this.connection=t.context.getModel(s).connector.connection},"onKeyDown":function(e){27===e.keyCode&&this.destroy()},"onDestroy":function(){l.popTabableHandler(),this.$el.remove()},"show":function(){this.render(),n.isAppleMobile()&&this.$el.addClass("mobile"),this.$el.binf_modal("show")},"onShown":function(){this.$("video").trigger("focus")}})}),csui.define("hbs!csui/widgets/welcome.placeholder/impl/welcome.placeholder",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <button class="csui-videoButton" aria-label="'+e.escapeExpression((s=null!=(s=r(i,"videoLabel")||(null!=t?r(t,"videoLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"videoLabel","hash":{},"loc":{"start":{"line":9,"column":49},"end":{"line":9,"column":63}}}):s))+'"></button>\r\n'},"3":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-message">\r\n      <p title="'+e.escapeExpression((s=null!=(s=r(i,"message")||(null!=t?r(t,"message"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"message","hash":{},"loc":{"start":{"line":13,"column":16},"end":{"line":13,"column":27}}}):s))+'">'+e.escapeExpression((s=null!=(s=r(i,"message")||(null!=t?r(t,"message"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"message","hash":{},"loc":{"start":{"line":13,"column":29},"end":{"line":13,"column":40}}}):s))+"</p>\r\n    </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n<div class="csui-hero-tile">\r\n  <div class="csui-hero-left">\r\n    <div class="csui-greeting">'+e.escapeExpression((r=null!=(r=l(i,"greeting")||(null!=t?l(t,"greeting"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"greeting","hash":{},"loc":{"start":{"line":4,"column":31},"end":{"line":4,"column":43}}}):r))+'</div>\r\n    <span class="csui-date">'+e.escapeExpression((r=null!=(r=l(i,"date")||(null!=t?l(t,"date"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"date","hash":{},"loc":{"start":{"line":5,"column":28},"end":{"line":5,"column":36}}}):r))+'</span>\r\n  </div>\r\n    <div class="csui-hero-right">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"includeVideo"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":4},"end":{"line":10,"column":11}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"includeMessage"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":11,"column":4},"end":{"line":15,"column":11}}}))?s:"")+"  </div>\r\n\r\n</div>"}});return i.registerPartial("csui_widgets_welcome.placeholder_impl_welcome.placeholder",n),n}),csui.define("css!csui/widgets/welcome.placeholder/impl/welcome.placeholder",[],function(){}),csui.define("csui/widgets/welcome.placeholder/welcome.placeholder.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/base","csui/utils/contexts/factories/user","csui/utils/types/date","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/widgets/welcome.placeholder/impl/welcome.video/welcome.video.view","i18n!csui/widgets/welcome.placeholder/impl/nls/lang","hbs!csui/widgets/welcome.placeholder/impl/welcome.placeholder","css!csui/widgets/welcome.placeholder/impl/welcome.placeholder"],function(e,t,i,n,o,s,r,l,a,c){return i.ItemView.extend({"_dataDefaults":{"includeMessage":!0,"includeVideo":!0,"message":a.message},"className":"tile hero","template":c,"ui":{"welcomeMessageContainer":"> .csui-hero-tile .csui-message","welcomeMessage":"> .csui-hero-tile .csui-message > p","greetingsMessage":"> .csui-hero-tile .csui-hero-left .csui-greeting"},"behaviors":{"TabableRegion":{"behaviorClass":r}},"triggers":{"click .csui-hero-tile":"show:video"},"templateHelpers":function(){var e=this.options.data,t=this.user.get("first_name"),i=new Date,n=i.getHours(),o=this._getGreeting(t,n);return{"videoSrc":e.videoSrc,"videoPoster":e.videoPoster,"includeMessage":e.includeMessage,"includeVideo":e.includeVideo,"greeting":o,"message":e.message,"videoLabel":a.videoLabel,"date":s.formatExactDate(s.deserializeDate(i))}},"events":{"keydown":"onKeyInView"},"currentlyFocusedElement":function(){return this.$el},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),
this.triggerMethod("show:video"))},"constructor":function(n){n||(n={}),n.data||(n.data={}),t.each(this._dataDefaults,function(e,t){var i=n.data[t];null!=i&&""!==i||(n.data[t]=e)}),i.ItemView.call(this,n),this.user=n.context.getModel(o),this.listenTo(this.user,"change",this._updateGreeting),e(window).on("resize.app",this.render),this.listenTo(this,"dom:refresh",this._setTextEllipse)},"onRender":function(){var e=this.templateHelpers();e.includeVideo&&this.$el.attr("aria-label",e.greeting+" "+e.videoLabel)},"onDestroy":function(){e(window).off("resize.app",this.render)},"onShowVideo":function(){new l(this.options).show()},"_setTextEllipse":function(){var e=this.ui.welcomeMessage,t=this.ui.welcomeMessageContainer.height();if(parseInt(e.css("line-height"),10)<=t){for(;e.outerHeight()>t;){var i=e.text(),n=i.replace(/\W*\s(\S)*$/,"...");if(!(n.length<i.length))break;e.text(n)}this.ui.welcomeMessageContainer.removeClass("binf-hidden")}else this.ui.welcomeMessageContainer.addClass("binf-hidden")},"_getGreeting":function(e,t){return this._generateGreetingMessage(e,t)},"_updateGreeting":function(){e(this.ui.greetingsMessage).text(this._generateGreetingMessage(this.user.get("first_name"),(new Date).getHours()))},"_generateGreetingMessage":function(e,i){var n;return e?(n=i<12?a.greetingMorning:i<18?a.greetingAfternoon:a.greetingEvening,n=t.str.sformat(n,e)):n=i<12?a.greetingMorningNoName:i<18?a.greetingAfternoonNoName:a.greetingEveningNoName,n}})}),csui.define("hbs!csui/widgets/html.editor/impl/cslink.preview/cslink.preview",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'      <div id="cs-link-content" class="cs-link-content"></div>\r\n'},"3":function(e,t,i,n,o){var s,r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div id="cs-link-image" class="cs-link-image">'+(null!=(r=null!=(r=l(i,"LinkPreviewImage")||(null!=t?l(t,"LinkPreviewImage"):t))?r:e.hooks.helperMissing,s="function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"LinkPreviewImage","hash":{},"loc":{"start":{"line":11,"column":52},"end":{"line":11,"column":74}}}):r)?s:"")+"</div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="cs-link" class="cs-link">\r\n  <div class="cs-link-popoverhead">\r\n    <div id="cs-link-heading" class="cs-link-heading">'+e.escapeExpression((r=null!=(r=l(i,"LinkHeading")||(null!=t?l(t,"LinkHeading"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"LinkHeading","hash":{},"loc":{"start":{"line":3,"column":54},"end":{"line":3,"column":69}}}):r))+'</div>\r\n    <div id="cs-link-expand" class="cs-link-expand cs-link-expand-icon"></div>\r\n  </div>\r\n  <div class="cs-link-preview-content">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isPreviewContent"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":4},"end":{"line":9,"column":11}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isLinkPreviewImage"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":4},"end":{"line":12,"column":11}}}))?s:"")+"  </div>\r\n</div>"}});return i.registerPartial("csui_widgets_html.editor_impl_cslink.preview_cslink.preview",n),n}),csui.define("css!csui/widgets/html.editor/impl/cslink.preview/cslink.preview",[],function(){}),csui.define("csui/widgets/html.editor/impl/cslink.preview/cslink.preview.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/behaviors/default.action/default.action.behavior","csui/controls/rich.text.editor/impl/rich.text.util","csui/models/node/node.model","csui/utils/commands","csui/utils/url","hbs!csui/widgets/html.editor/impl/cslink.preview/cslink.preview","i18n!csui/widgets/html.editor/impl/nls/lang","css!csui/widgets/html.editor/impl/cslink.preview/cslink.preview"],function(e,t,i,n,o,s,r,l,a,c,u){return n.ItemView.extend({"template":c,"className":"cs-link","behaviors":{"DefaultAction":{"behaviorClass":o}},"subTypeName":"wiki","constructor":function(e){e||(e={}),n.ItemView.prototype.constructor.call(this,e),this.options=e,this.subTypeName=e.subTypeName||this.subTypeName,this.modelFetched=!1,this.linkPreviewContent=null,this.linkPreviewImage=null,this.model=this.options.previewModel;var t=this;this.model||this._obtainId().done(function(){t._executeProcess()})},"_obtainId":function(){this.id=this.options.objId||-1;var t=this.options.targetEle,i=t.href||t.closest("a").href,n=i.match(/^.*\/open\/(.+)$/i)||i.match(/^.*\/nodes\/(.+)$/i),o=e.Deferred(),r=this,l=!0;if(this.options.isSameDomain&&n)if(isNaN(parseInt(n[1]))){l=!1;var a,c=this.options.targetEle.href&&this.options.targetEle.href.substring(this.options.targetEle.href.lastIndexOf("/")+1,this.options.targetEle.href.length);s._getNicknameId(r.options,c).done(function(e){a=s.getNewNodeModel({},{"connector":r.options.connector}),a.attributes=a.parse(e),a=s.getNewNodeModel({"attributes":a.attributes},{"connector":r.options.connector}),r.model=a,r.id=r.model.get("id"),o.resolve()}).fail(function(){e(r.options.targetEle).attr("title",u.cannotFindObject)})}else this.id=n[1];return l&&o.resolve(),o.promise()},"_executeProcess":function(){-1!==this.id?(this.model=new r({"id":this.id},{"connector":this.options.connector,"commands":l.getAllSignatures(),"fields":this.options.fields||{},"expand":this.options.expand||{}}),this.model.fetch().fail(t.bind(function(){e(this.options.targetEle).attr("title",u.cannotFindObject)},this)),this.listenTo(this.model,"sync",function(i){this.trigger("model:fetched",this.model),this.linkHeading=this.model.attributes.name;var n=this;this._getContent().done(function(i){5574===n.model.get("type")?n._callbackExecuteProcess(i):e(n.options.targetEle).attr("title",t.str.sformat(u.goToTooltip,n.model.get("name")))})})):e(this.options.targetEle).attr("title",u.previewUnavailable)},"_getContent":function(){var t=e.Deferred(),i=this.options.connector,n={"url":this._getUrl(),"type":"GET"};return i.makeAjaxCall(n).done(function(e){t.resolve(e)}).fail(function(e){t.reject(e)}),t.promise()},"_getUrl":function(){return a.combine(this.options.connector.getConnectionUrl().getApiBase("v2"),"/"+this.subTypeName+"/"+this.id+"/previewcontent")},"_callbackExecuteProcess":function(i){this.modelFetched=!0,this.linkPreviewImage=i.results.data.firstImage,this.linkPreviewContent=i.results.data.previewContent;var n=e("<div>"+this.linkPreviewContent+"</div>").find("*").text().trim();this.isEmptyContent=""===n||n===u.pageDefaultContent,this.isDestroyed||(e(this.options.targetEle).attr({"title":"","data-binf-original-title":""}),null!==this.linkPreviewContent&&!this.isEmptyContent||null!==this.linkPreviewImage?(this.render(),e(this.options.targetEle).binf_popover("show"),null===this.linkPreviewContent||this.isEmptyContent?e(".cs-link-preview-content").addClass("cs-link-image-only"):e(".cs-link-content").html(this.linkPreviewContent),this.eventHandlers()):e(this.options.targetEle).attr("title",t.str.sformat(u.goToTooltip,this.model.get("name"))))},"onDestroy":function(){this.hidePopover()},"eventHandlers":function(){var t=this;e(".cs-link-popover").on("mouseleave",function(i){e("#"+i.target.id).attr("aria-describedby")!==e(t.options.targetEle).attr("aria-describedby")&&t.hidePopover()}),e(".cs-link-expand").on("click",function(e){t.expandLinkView()})},"hidePopover":function(){e(this.options.targetEle).binf_popover("hide"),e(this.options.targetEle).binf_popover("destroy")},"expandLinkView":function(){this.triggerMethod("execute:defaultAction",this.model)},"onRender":function(){var i=this,n=this.options.targetEle;if(this.modelFetched){var o={"LinkHeading":this.linkHeading,"isLinkPreviewImage":null!==this.linkPreviewImage,"LinkPreviewImage":this.linkPreviewImage,"isPreviewContent":!this.isEmptyContent,"linkPreviewContent":this.linkPreviewContent},s=this.template(o);e(n).binf_popover({"html":!0,"trigger":"manual","content":s,"container":e.fn.binf_modal.getDefaultContainer(),"placement":function(t){e(t).addClass("cs-link-popover");var o=e("<div/>").attr("style","display:none").addClass("cs-link-popover binf-popover cs-link-popover-temp-div").append(c);e(n).append(o),(null===i.linkPreviewImage||null===i.linkPreviewContent||i.isEmptyContent)&&e(t).addClass("cs-link-preview-width");var s=e(".cs-link-popover-temp-div").height()+40,r=e(".cs-link-popover-temp-div").width()+40;o.remove();var l=e(n),a=l.offset(),u=a.left,d=a.top,h=e(window).width()-(u+l.outerWidth());return e(window).height()-(d+l.outerHeight(!0))>s?(i.popoverPosition="bottom","bottom"):d>s?(i.popoverPosition="top","top"):h>r?(i.popoverPosition="right","right"):u>r?(i.popoverPosition="left","left"):(i.popoverPosition="auto","auto")}})}else this.model&&!this.model.fetching&&e(n).attr("title",t.str.sformat(u.goToTooltip,this.model.get("name")));e("*").one("scroll",function(){i.destroy()}),e(this.options.targetEle).one("remove",function(){i.destroy()}),e(this.options.targetEle).off("mouseleave").on("mouseleave",function(t){setTimeout(function(){0===e(".cs-link-popover:hover").length&&i.destroy()},10)})}})}),csui.define("csui/widgets/html.editor/impl/html.editor.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/node/node.model"],function(e,t,i,n,o){"use strict";var s=o.extend({"constructor":function(e){this.options=e||(e={}),i.Model.prototype.constructor.call(this,e),this.makeConnectable(e).makeFetchable(e)}});return e.extend(s.prototype,{"isFetchable":function(){return!!this.options},"url":function(){return n.combine(this.options.connector.connection.url,"nodes/"+this.options.id+"/content")},"parse":function(e){return{"data":e,"oldData":e}}}),s}),csui.define("hbs!csui/widgets/html.editor/impl/html.editor",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div class='csui-richtext-message-wrapper'>\r\n  <div id=\"csui-richtext-content-body-"+e.escapeExpression((r=null!=(r=l(i,"id")||(null!=t?l(t,"id"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":2,"column":38},"end":{"line":2,"column":46}}}):r))+'" class="csui-richtext-message"\r\n       contentEditable="false" data-placeholder = "'+e.escapeExpression((r=null!=(r=l(i,"placeholder")||(null!=t?l(t,"placeholder"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"placeholder","hash":{},"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":66}}}):r))+'">\r\n    '+(null!=(r=null!=(r=l(i,"data")||(null!=t?l(t,"data"):t))?r:e.hooks.helperMissing,s="function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"data","hash":{},"loc":{"start":{"line":4,"column":4},"end":{"line":4,"column":16}}}):r)?s:"")+"\r\n  </div>\r\n</div>\r\n"}});return i.registerPartial("csui_widgets_html.editor_impl_html.editor",n),n}),csui.define("hbs!csui/widgets/html.editor/impl/dropdown.menu/dropdown.menu",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="binf-dropdown">\r\n    <a title="'+e.escapeExpression((r=null!=(r=l(i,"tooltip")||(null!=t?l(t,"tooltip"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"tooltip","hash":{},"loc":{"start":{"line":3,"column":14},"end":{"line":3,"column":25}}}):r))+'" class="binf-dropdown-toggle csui-html-editor-control"\r\n       href="#" data-binf-toggle="dropdown" role="button" aria-label="'+e.escapeExpression((r=null!=(r=l(i,"moreActionsAria")||(null!=t?l(t,"moreActionsAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"moreActionsAria","hash":{},"loc":{"start":{"line":4,"column":70},"end":{"line":4,"column":89}}}):r))+'"\r\n       aria-expanded="false">\r\n      <span class="csui-icon '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"reserved"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":29},"end":{"line":6,"column":84}}}))?s:"")+" "+e.escapeExpression((r=null!=(r=l(i,"iconClass")||(null!=t?l(t,"iconClass"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"iconClass","hash":{},"loc":{"start":{"line":6,"column":85},"end":{"line":6,"column":98}}}):r))+'">\r\n      </span>\r\n    </a>\r\n    <ul class="binf-dropdown-menu" role="menu"></ul>\r\n  </div>\r\n'},"2":function(e,t,i,n,o){return" csui-html-editor-reserved-icon "},"4":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"reserved"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":12,"column":2},"end":{"line":15,"column":9}}}))?s:""},"5":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="csui-icon csui-html-editor-reserved-readonly '+e.escapeExpression((s=null!=(s=r(i,"iconClass")||(null!=t?r(t,"iconClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"iconClass","hash":{},"loc":{"start":{"line":13,"column":62},"end":{"line":13,"column":75}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=r(i,"tooltip")||(null!=t?r(t,"tooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"tooltip","hash":{},"loc":{"start":{"line":13,"column":84},"end":{"line":13,"column":95}}}):s))+'">\r\n    </span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"haveEditPermission"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":16,"column":7}}}))?s:""}});return i.registerPartial("csui_widgets_html.editor_impl_dropdown.menu_dropdown.menu",n),n}),csui.define("hbs!csui/widgets/html.editor/impl/dropdown.menu/dropdown.option",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a tabindex="-1" title="'+e.escapeExpression((s=null!=(s=r(i,"actionName")||(null!=t?r(t,"actionName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"actionName","hash":{},"loc":{"start":{"line":1,"column":24},"end":{"line":1,"column":38}}}):s))+'">\r\n  '+e.escapeExpression((s=null!=(s=r(i,"actionName")||(null!=t?r(t,"actionName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"actionName","hash":{},"loc":{"start":{"line":2,"column":2},"end":{"line":2,"column":16}}}):s))+"\r\n</a>"}});return i.registerPartial("csui_widgets_html.editor_impl_dropdown.menu_dropdown.option",n),n}),csui.define("csui/widgets/html.editor/impl/dropdown.menu/dropdown.menu.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/models/nodes","csui/utils/commands","csui/utils/contexts/factories/member","csui/utils/base","i18n!csui/widgets/html.editor/impl/nls/lang","hbs!csui/widgets/html.editor/impl/dropdown.menu/dropdown.menu","hbs!csui/widgets/html.editor/impl/dropdown.menu/dropdown.option"],function(e,t,i,n,o,s,r,l,a,c,u,d){"use strict";var h=o.ItemView.extend({"tagName":"li","template":d,"events":{"click a":"_executeAction","keyup a":"onKeyUp"},"templateHelpers":function(){return{"actionName":c[this.model.get("signature")||this.model.get("name")]}},"constructor":function(e){o.ItemView.prototype.constructor.apply(this,arguments)},"_executeAction":function(){if(this.options.openForEdit)this.options.openForEdit();else{var e=this.options.command.execute(this.options.status);e.always(t.bind(function(){this.trigger("csui.command.executed",e)},this))}},"onKeyUp":function(e){-1!==[13,32].indexOf(e.keyCode)&&this._executeAction()}});return o.CompositeView.extend({"className":"csui-html-editor-dropdown","template":u,"childView":h,"childViewContainer":"ul.binf-dropdown-menu","childEvents":{"csui.command.executed":"afterCommandExecution"},"ui":{"dropdownMenu":".binf-dropdown-menu"},"childViewOptions":function(e){var t=e.get("openForEdit")?"HTMLEdit":e.get("signature"),i={"status":this.status,"node":this.options.node};return"HTMLEdit"===t?i.openForEdit=this.options.openForEdit:("properties"===t?t="Properties":-1!==["reserve","unreserve"].indexOf(t)&&(t="unreserve"===t?"Unreserve":"Reserve",t+="Doc"),i.command=r.get(t)),i},"templateHelpers":function(){var e={"haveEditPermission":this.haveEditPermissions,"tooltip":c.more,"iconClass":"icon-html-edit-toolbar-more","reserved":this.node.get("reserved"),"moreActionsAria":t.str.sformat(c.moreActionsAria,this.parentView.options.title?this.parentView.options.title:"")};if(e.reserved){var i=this.node.get("reserved_user_id")===this.user.get("id");i||(e.tooltip=t.str.sformat(c.reservedBy,this.node.get("reserved_user_id"),a.formatExactDate(this.node.get("reserved_date")))),e.iconClass=i?"icon-html-editor-reserved-owned":"icon-html-editor-reserved_other"}return e},"constructor":function(e){this.parentView=e.parentView,this.node=e.node,this.user=e.user,this.haveEditPermissions=!(!e.node.actions.get("reserve")&&!e.node.actions.get("unreserve")),e.collection=this.buildCollection(),o.CompositeView.prototype.constructor.apply(this,arguments),this.listenTo(this.options.node,"change",this.updateActionCollection),this.status={"context":this.options.context,"container":this.options.node,"nodes":new s([this.options.node])},this.node.get("reserved")&&this.node.get("reserved_user_id")!==this.user.get("id")&&(this.reservedByUserModel=this.options.context.getModel(l,{"attributes":{"id":this.node.get("reserved_user_id")}}))},"buildCollection":function(){var e=new n.Collection;if(this.haveEditPermissions){this.node.get("reserved")&&this.node.get("reserved_user_id")!==this.user.get("id")||e.add(new n.Model({"openForEdit":!0,"name":"Edit"}));var t=this;["properties","permissions","unreserve"].map(function(i){(i=t.node.actions.get(i))&&e.add(i)})}return e},"updateActionCollection":function(){this.haveEditPermissions=!(!this.options.node.actions.get("reserve")&&!this.options.node.actions.get("unreserve")),this.collection=this.buildCollection(),this.render()},"afterCommandExecution":function(e,i){i.fail(t.bind(function(){"Unreserve"===e.model.get("name")&&this.node.fetch()},this))},"adjustDropdownMenu":function(){if("rtl"===document.dir)return!1;this.ui.dropdownMenu.removeClass("csui-html-editor-floating-dd-menu"),this.ui.dropdownMenu.offset().left+2*this.ui.dropdownMenu.outerWidth()<=document.body.scrollWidth&&this.ui.dropdownMenu.addClass("csui-html-editor-floating-dd-menu")},"onRender":function(){var e=this.$el.find(".binf-dropdown");e.on("binf.dropdown.before.show",t.bind(function(){e.on("binf.dropdown.after.show",this.adjustDropdownMenu.bind(this)),i(window).on("resize.html.editor.dropdown.menu",this.adjustDropdownMenu.bind(this))},this)),e.on("hide.binf.dropdown",t.bind(function(){e.off("binf.dropdown.after.show"),i(window).off("resize.html.editor.dropdown.menu")})),this.reservedByUserModel&&!this.reservedByUserModel.fetched&&this.reservedByUserModel.fetch().done(t.bind(function(e){this.$el.find(".binf-dropdown-toggle.csui-html-editor-control, .csui-html-editor-reserved-readonly").attr("title",t.str.sformat(c.reservedBy,e.data.display_name,a.formatExactDate(this.node.get("reserved_date"))))},this))}})}),csui.define("hbs!csui/widgets/html.editor/impl/edit.icon",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="csui-rich-text-edit-icon-wrapper csui-rich-text-edit-icon-wrapper-'+e.escapeExpression((s=null!=(s=r(i,"id")||(null!=t?r(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":1,"column":79},"end":{"line":1,"column":87}}}):s))+'">\r\n  <span title="'+e.escapeExpression((s=null!=(s=r(i,"editLable")||(null!=t?r(t,"editLable"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"editLable","hash":{},"loc":{"start":{"line":2,"column":15},"end":{"line":2,"column":30}}}):s))+'" class="icon icon-edit icon-edit-'+e.escapeExpression((s=null!=(s=r(i,"id")||(null!=t?r(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":2,"column":64},"end":{"line":2,"column":72}}}):s))+'"></span>\r\n</span>'}});return i.registerPartial("csui_widgets_html.editor_impl_edit.icon",n),n}),csui.define("hbs!csui/widgets/html.editor/impl/html.editor.action.buttons",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-html-editor-action-buttons">\r\n  <button type="button" title="'+e.escapeExpression((s=null!=(s=r(i,"saveLabel")||(null!=t?r(t,"saveLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"saveLabel","hash":{},"loc":{"start":{"line":2,"column":31},"end":{"line":2,"column":44}}}):s))+'" role="button" data-cstabindex="-1" tabindex="-1"\r\n          aria-label="'+e.escapeExpression((s=null!=(s=r(i,"saveAria")||(null!=t?r(t,"saveAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"saveAria","hash":{},"loc":{"start":{"line":3,"column":22},"end":{"line":3,"column":34}}}):s))+'"\r\n          class="icon circular csui-html-edit-icon csui-html-edit-save"></button>\r\n  <button type="button" title="'+e.escapeExpression((s=null!=(s=r(i,"cancelLabel")||(null!=t?r(t,"cancelLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cancelLabel","hash":{},"loc":{"start":{"line":5,"column":31},"end":{"line":5,"column":46}}}):s))+'" role="button" data-cstabindex="-1" tabindex="-1"\r\n          aria-label="'+e.escapeExpression((s=null!=(s=r(i,"cancelAria")||(null!=t?r(t,"cancelAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cancelAria","hash":{},"loc":{"start":{"line":6,"column":22},"end":{"line":6,"column":36}}}):s))+'"\r\n          class="icon circular csui-html-edit-icon csui-html-edit-cancel"></button>\r\n</div>\r\n</div>'}});return i.registerPartial("csui_widgets_html.editor_impl_html.editor.action.buttons",n),n}),csui.define("csui/widgets/html.editor/impl/html.editor.content.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/lib/radio","csui/utils/contexts/factories/connector","csui/utils/url","csui/utils/base","csui/models/node/node.model","csui/utils/contexts/factories/user","csui/widgets/html.editor/impl/html.editor.model","hbs!csui/widgets/html.editor/impl/html.editor","csui/dialogs/modal.alert/modal.alert","csui/controls/progressblocker/blocker","csui/controls/error/error.view","csui/widgets/html.editor/impl/cslink.preview/cslink.preview.view","csui/controls/rich.text.editor/rich.text.editor","csui/widgets/html.editor/impl/dropdown.menu/dropdown.menu.view","csui/controls/globalmessage/globalmessage","csui/utils/node.links/node.links","i18n!csui/widgets/html.editor/impl/nls/lang","hbs!csui/widgets/html.editor/impl/edit.icon","hbs!csui/widgets/html.editor/impl/html.editor.action.buttons","css!csui/widgets/html.editor/impl/html.editor"],function(e,t,i,n,o,s,r,l,a,c,u,d,h,p,m,f,g,v,b,w,y,x,C){"use strict";return n.ItemView.extend({"className":"csui-html-editor-wrapper","modelEvents":{"change":"render","error":"render"},"ui":{"richText":".csui-richtext-message"},"events":{'mouseenter .csui-richtext-message[contenteditable="false"] a':"_showPreview",'focusin .csui-richtext-message[contenteditable="true"]':"_actionButtonsPositionInEdge",'focusin .csui-richtext-message[contenteditable="false"] a':"_updateUrl","keyup":"_validateState"},"getTemplate":function(){return!this.model.error&&d},"templateHelpers":function(){return{"placeholder":y.PageDefaultContent,"id":this.model.get("id"),"data":this.model.get("data")}},"constructor":function(e){if(e||(e={}),e.id=e.wikiPageId,e=t.extend(e,e.data={}),this.parentView=e.parentView,this.ui.richTextEle="#csui-richtext-content-body"+e.id,p.imbue(this),this.context=e.context,this.connector=this.context.getObject(s),this.node=new a({"id":e.id},{"connector":this.connector,"expand":{"properties":["original_id","parent_id"]},"commands":["permissions","properties","reserve","unreserve","addcategory","editpermissions"]}),this.user=this.context.getModel(c),!e.model){e.model=new u({"connector":this.connector,"context":this.context,"id":e.id});var i=r.combine(this.connector.connection.url,"nodes/"+e.id+"/content");e.model.fetch({"url":i,"success":e.model.fetchSuccess,"error":e.model.fetchError,"dataType":"text"}).done(t.bind(function(e){o.channel("quicklink:Tiles").trigger("transparent:background"),this._getLatestVersion().done(t.bind(function(){this.oldVersion=this.model.get("version")},this))},this))}e.richTextElementId="csui-richtext-content-body-"+e.id,n.ItemView.prototype.constructor.call(this,e),this._errorRegion=new n.Region({"el":this.el}),this.listenTo(this.model,"sync",t.bind(function(){this.model.error||this.user.ensureFetched().done(this._renderActionsDropdown.bind(this))},this)),this.mode="read",this.utils=g.getRichTextEditorUtils(),this.enableSaveButton=!1,this.previewLinkViews={}},"onRender":function(){var e=this.model.error;this.$el[e?"addClass":"removeClass"]("csui-disabled"),e?this.$el.parent().addClass("csui-html-editor-error"):this.$el.parent().removeClass("csui-html-editor-error"),e&&this._errorRegion.show(new m({"model":new i.Model({"message":y.noWikiPageFound,"title":e.message})})),this.$el.addClass(this.options.header?"":"csui-html-editor-no-header"),this.$el.parent().addClass(this.options.header||e?"":"tile"),this.filterHtmlContent(),this.refreshTabableElements()},"filterHtmlContent":function(){this.$el.find("table").each(function(t,i){e(i).css({"border":i.getAttribute("border")+"px solid","borderSpacing":i.getAttribute("cellspacing")+"px","text-align":i.getAttribute("align")}).removeAttr("cellpadding cellspacing border align"),e(i).find("th,td").css("padding",i.getAttribute("cellpadding")+"px")}),this.$el.find("big").each(function(t,i){e(i).replaceWith('<span class="csui-big">'+e(i).html()+"</span>")})},"refreshTabableElements":function(){"read"===this.mode?this.tabableElements=this.$el.find("a").toArray():(this.tabableElements=[],this.tabableElements.push(this.editorInstance.element.$),this.tabableElements=this.tabableElements.concat(e("#cke_"+this.options.richTextElementId+" .csui-html-editor-action-buttons > button:not([disabled])").toArray())),this.currentlyFocusedElementIndex=-1},"moveTab":function(i){this.currentlyFocusedElementIndex=this.tabableElements.indexOf(i.target);var n=e(this.tabableElements[this.currentlyFocusedElementIndex]),o=!1;9===i.keyCode&&(i.shiftKey?this.currentlyFocusedElementIndex>0?(this.currentlyFocusedElementIndex-=1,e(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus"),i.stopPropagation(),i.preventDefault()):o=!0:this.currentlyFocusedElementIndex<this.tabableElements.length-1?(this.currentlyFocusedElementIndex+=1,e(this.tabableElements[this.currentlyFocusedElementIndex]).prop("tabindex",0).trigger("focus"),i.stopPropagation(),i.preventDefault()):o=!0,o&&("write"===this.mode?(i.shiftKey?this.currentlyFocusedElementIndex=this.tabableElements.length-1:this.currentlyFocusedElementIndex=0,e(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):n.on("focusout",t.bind(function(){n.off("focusout"),this.currentlyFocusedElementIndex=-1},this))),"write"===this.mode&&(i.stopPropagation(),i.preventDefault()))},"_showPreview":function(e){var i,n;this.utils.getUrl(this,e).done(t.bind(function(){n=t.extend({"targetEle":e.target,"connector":this.connector},this.options),this.previewLinkViews[e.target.href]?(n.previewModel=this.previewLinkViews[e.target.href],i=new f(n)):(i=new f(n),this.listenTo(i,"model:fetched",function(t){this.previewLinkViews[e.target.href]=t})),i.render()},this))},"_updateUrl":function(e){this.utils.getUrl(this,e)},"_renderActionsDropdown":function(){this.node.fetch().done(t.bind(function(e){if(this.dropdownMenu=new v({"openForEdit":this._openForEdit.bind(this),"node":this.node,"user":this.user,"context":this.options.context,"parentView":this}),new n.Region({"el":this.parentView.$el.find(".tile-controls")}).show(this.dropdownMenu),this.grandParentEle=this.$el.closest(".csui-html-editor-grand-parent"),this.listenTo(this.dropdownMenu,"render",t.bind(function(){this.refreshTabableElements(),this.trigger("refresh:tabindexes")},this)),this.editIconEle=this.parentView.$el.find(".tile-controls"),this.options.header){var i=this.options.titlefield||"";this.editIconEle.closest(".tile-header").attr({"title":i,"aria-label":i})}},this))},"editModeAccessibility":function(){e(document).on("keydown.html.editor",t.bind(function(t){e.contains(e("#cke_"+this.options.richTextElementId+".csui-rich-text-editor-toolbar .cke_inner")[0],t.target)||(9===t.keyCode?this.moveTab(t):-1!==[13,32].indexOf(t.keyCode)&&e(t.target).hasClass("csui-html-edit-icon")&&(e(t.target).trigger("click"),t.preventDefault()))},this))},"removeEditModeAccessibility":function(){e(document).off("keydown.html.editor")},"_openForEdit":function(){this.editModeAccessibility(),this.blockActions(),this._getLatestVersion().done(t.bind(function(){this._toggleReserve(!0).done(t.bind(function(){this.oldVersion===this.model.get("version")?this._getLatestContent().done(t.bind(function(){this._editContent()},this)):h.confirmQuestion(t.bind(function(e){e?(this._editContent(),this.enableSaveButton=!0):this._getLatestContent().done(t.bind(function(){this._editContent(),this.oldVersion=this.model.get("version"),this.enableSaveButton=!1},this)),this.alreadyTriggered=!0},this),y.versionDifferenceConfirmMessage,y.versionDifferenceConfirmTitle)},this)).fail(this.unblockActions.bind(this))},this)).fail(this.unblockActions.bind(this)),l.isAppleMobile()&&this.$el.find(".csui-richtext-message").attr("contenteditable",!0).trigger("focus")},"_editContent":function(){var i=this,n=this.connector.connection.url,o={"skin":"otskin,"+this.connector.connection.supportPath+"/csui/lib/ckeditor/skins/otskin/","custcsuiimage_imageExtensions":"gif|jpeg|jpg|png","filebrowserUploadUrl":n.substring(0,n.indexOf("api")),"floatingWrapper":this.grandParentEle,"extraPlugins":"csfloatingspace,filebrowser,custimage,custcsuiimage,find,panelbutton,colorbutton,font,selectall,smiley,dialog,sourcedialog,print,preview,justify,otsave,cancel,cssyntaxhighlight,cslink","removePlugins":"image,floatingspace","cancel":{"label":"Cancel","onCancel":function(n){i.blockActions();var o=i.editorInstance;(n.getData().length?o.checkDirty():i.model.get("data")!==y.PageDefaultContent)?h.confirmQuestion(function(o){o?i._getLatestVersion().done(function(){
i.oldVersion!==i.model.get("version")?i._getLatestContent().done(t.bind(function(){i.oldVersion=this.model.get("version"),n.setData(i.model.get("oldData"))},i)):n.setData(i.model.get("oldData")),i.trigger("updateScrollbar"),r(n),i.autoSaved&&i.deleteAutoSavedContent({"connector":i.connector,"wikiId":i.node.get("parent_id"),"pageId":i.model.get("id")}),i._toggleReserve()}):(e(i.options.richTextElementId).trigger("focus"),i.unblockActions())},y.CancelConfirmMessage,y.cancelTitle):i._getLatestVersion().done(function(){i.oldVersion!==i.model.get("version")?i._getLatestContent().done(t.bind(function(){i.oldVersion=this.model.get("version"),n.setData(i.model.get("oldData"))},i)):n.setData(i.model.get("oldData")),r(n),i._toggleReserve()})}},"otsave":{"label":"Save","url":i.connector.connection.url+"/nodes/"+i.options.id,"type":"PUT","useJSON":!1,"ticket":i.connector.connection.session.ticket,"postData":function(e){return{"TextField":e.getData()}},"onSave":function(t){i.blockActions(),i._getLatestVersion().done(function(){i.alreadyTriggered||i.oldVersion===i.model.get("version")?(i.enableSaveButton=!1,i.alreadyTriggered=!1,i._saveContent(t)):h.confirmQuestion(function(n){n?(i.enableSaveButton=!1,i._saveContent(t)):(e(i.options.richTextElementId).trigger("focus"),i.unblockActions())},y.versionDifferenceConfirmMessage,y.versionDifferenceConfirmTitle)})},"onSuccess":function(e,t){i.model.set({"data":e.getData(),"oldData":e.getData()}),i._getLatestVersion().done(function(){i.oldVersion=i.model.get("version"),r(e)})},"onFailure":function(e,t,n){r(e),i.render(),i.trigger("updateScrollbar")}},"image":{"url":i.connector.connection.url.replace("/api/v1","")},"addimage":{"url":function(){return n+"/nodes"},"imageBrowseEnabled":function(){return i.node.get("parent_id_expand").imagebrowseenabled},"parent_id":i.node.get("parent_id_expand").image_folder_id,"type":"POST","documentType":144,"ticket":i.connector.connection.session.ticket}},s=g.getRichTextEditor(o),r=function(t){e(".csui-rich-text-mask").remove(),e(".csui-html-editor-zindex").removeClass("csui-html-editor-zindex"),e("#csui-richtext-sharedspace").remove(),e(".cui-rich-editor-widget-wrapper").removeAttr("style"),i.editIconEle.removeClass("binf-hidden"),i.$el.find(".csui-richtext-message").attr("contenteditable",!1),t.destroy(),i.unblockActions(),i._unbindEvents(),i.parentView.$el.find(".csui-html-editor-action-buttons").remove(),e(window).off("resize"),i.removeEditModeAccessibility(),i.mode="read",i.refreshTabableElements(),e(".csui-html-editor-zero-zindex").removeClass("csui-html-editor-zero-zindex")},a=i.$("#"+this.options.richTextElementId);a.attr("contenteditable",!0),this.editIconEle.addClass("binf-hidden");var u=document.createElement("div"),d=document.createElement("div"),p=e.fn.binf_modal.getDefaultContainer();u.className="csui-rich-text-mask",d.className="csui-rich-text-mask csui-rich-text-body-mask",i.grandParentEle.before(u),e(p).append(d),l.isMSBrowser()&&!!e("#breadcrumb-wrap")&&e("#breadcrumb-wrap").addClass("csui-html-editor-zero-zindex");var m=e(u),f=e(d),v=this.grandParentEle.find(".csui-html-editor-no-header").length>0?5:80,b=function(){a.closest(".ps-container").scrollTop(0),f.css("height","0px"),m.css("top","0px");var t=a.offset().top-e(u).offset().top-v,i=a.offset().top-v;i=t<0?i+-t:i,t=t<0?0:t,f.css("height",i+"px"),m.css({"height":document.body.scrollHeight-d.offsetHeight,"top":t}),e(u).parent().addClass("csui-html-editor-zindex")};b(),e(window).on("resize",b),e(".csui-richtext-message").on("change",b),window.onbeforeunload=function(e){return!1},csui.require(["csui/dialogs/node.picker/node.picker"],function(e){s.config.csLink={"lang":{"insertContentServerLink":y.insertContentServerLink},"nodeLink":w,"nodePicker":function(){return new e({"connector":i.connector,"dialogTitle":y.contentServerLink,"context":i.options.context,"resolveShortcuts":!0,"resultOriginalNode":!1,"currentUser":i.options.context.getModel(c)})},"enableSaveButton":function(){i._enableSaveButton()}}}),i.editorInstance=s.inline(this.options.richTextElementId,{"toolbar":[["Undo","Redo","-","FontSize","-","Styles","Format","TextColor","-","Bold","Italic"],"/",["Replace","-","NumberedList","BulletedList","-","Outdent","Indent","-","JustifyLeft","JustifyCenter","JustifyRight","-","Link","cslink","-","addImage","Table","Sourcedialog"]]}),s.once("instanceReady",function(n){i.ui.richText.text().trim()===y.PageDefaultContent&&i.ui.richText.empty(),i.mode="write",e("#cke_"+i.options.richTextElementId).addClass("csui-rich-text-editor-toolbar"),i.unblockActions(),i._appendActionButtons(),e(n.editor).trigger("focus"),i.$el.find(".csui-richtext-message").trigger("focus"),i.editorInstance.on("change",t.throttle(function(){i._autoSaveContent(s)},i.options.autosaveInterval,{"leading":!1})),i.editorInstance.on("change",function(){i._validateState()}),i._actionButtonsPosition(),i._actionButtonsPositionInEdge(),i.refreshTabableElements(),i.autoSaved&&i.deleteAutoSavedContent({"connector":i.connector,"wikiId":i.node.get("parent_id"),"pageId":i.model.get("id")})})},"_saveContent":function(e){e.config.otsave.request.send(e.config.otsave.json),this.autoSaved&&this.deleteAutoSavedContent({"connector":this.connector,"wikiId":this.node.get("parent_id"),"pageId":this.model.get("id")}),this._toggleReserve()},"_disableSaveButton":function(){var t=e("#cke_csui-richtext-content-body-"+this.id),i=t.find(".csui-html-edit-save");i.length&&(i[0].disabled=!0)},"_enableSaveButton":function(){var t=e("#cke_csui-richtext-content-body-"+this.id),i=t.find(".csui-html-edit-save");i.length&&(i[0].disabled=!1)},"_toggleReserve":function(t){var i=e.Deferred();if(t&&this.node.get("reserved")&&this.node.get("reserved_user_id")===this.user.get("id"))return i.resolve(),i;var n=this.connector.connection.url+"/nodes/"+this.node.get("id"),o=this,s=new FormData;return t?!this.node.get("reserved")&&s.append("reserved_user_id",this.user.get("id")):this.node.get("reserved")&&s.append("reserved_user_id",null),this.updateAjaxCall({"url":n,"connector":this.connector,"data":s,"type":"PUT"}).done(function(){i.resolve()}).fail(function(e){i.reject()}).always(function(){o.node.fetch()}),i},"_autoSaveContent":function(e){var t=this.editorInstance;if(t&&t.checkDirty()){t.resetDirty();var i=t.getData(),n=new FormData;n.append("wikiId",this.node.get("parent_id")),n.append("pageId",this.model.get("id")),n.append("source",i),this.updateAjaxCall({"connector":this.connector,"url":r.combine(this.connector.getConnectionUrl().getApiBase("v2"),"/wiki/autosave"),"type":"POST","data":n,"view":this}),this.autoSaved=!0}},"_getLatestContent":function(){var e={"url":r.combine(this.connector.getConnectionUrl().getApiBase("v2"),"/wiki/"+this.model.get("id")+"/autosave"),"type":"GET","requestType":"getContent","connector":this.connector,"view":this};return this.updateAjaxCall(e)},"_getLatestVersion":function(){var e={"url":r.combine(this.connector.getConnectionUrl().getApiBase("v2"),"/nodes/"+this.model.get("id")),"type":"GET","requestType":"versions-reserve","connector":this.connector,"view":this};return this.updateAjaxCall(e)},"_validateState":function(){this.utils=this.utils||g.getRichTextEditorUtils();var e=g.isEmptyContent(this.editorInstance);this.editorInstance&&this.editorInstance.checkDirty()&&e!==y.PageDefaultContent&&0!==e.length?(this._enableSaveButton(),this.refreshTabableElements()):(this._disableSaveButton(),this.refreshTabableElements())},"_appendActionButtons":function(){var i=e("#cke_csui-richtext-content-body-"+this.id),n={"saveLabel":y.saveTitle,"cancelLabel":y.cancelTitle,"cancelAria":y.cancelAria,"saveAria":y.saveAria};i.append(C(n)),i.find(".csui-html-edit-save").on("click",t.bind(function(){this.editorInstance.execCommand("otsave")},this)),i.find(".csui-html-edit-cancel").on("click",t.bind(function(){this.editorInstance.execCommand("cancel")},this))},"_actionButtonsPosition":function(){this.enableSaveButton?(this._enableSaveButton(),this.refreshTabableElements()):(this._disableSaveButton(),this.refreshTabableElements())},"_actionButtonsPositionInEdge":function(){var t=e("#cke_csui-richtext-content-body-"+this.id);l.isEdge()&&-1!==t.attr("style").indexOf("right")&&t.find(".cke_inner").css("float","right")},"_unbindEvents":function(){window.onbeforeunload=null},"updateAjaxCall":function(t){var i=e.Deferred(),n=t.url,o=t.data,s=t.type,r=t.connector,l=t.view,a=t.requestType;return r.makeAjaxCall({"url":n,"type":s,"data":o,"contentType":!1,"crossDomain":!0,"processData":!1,"success":function(e,t,n){switch(a){case"getContent":e.results.data.autoSaved?(l.autoSaved=!0,h.confirmQuestion(function(t){var n=e.results.data.content;t?(n=e.results.data.autoSaved,l.enableSaveButton=!0):l.enableSaveButton=!1,l.model.set({"data":n}),i.resolve()},y.RestoreDialogMessage,y.RestoreDiaglogTitle,h.buttonData.Yes={"label":y.Continue,"tooltip":y.Continue,"aria":""},h.buttonData.No={"label":y.Discard,"tooltip":y.Discard,"aria":""})):(l.model.set({"data":e.results.data.content,"oldData":e.results.data.content}),i.resolve());break;case"versions-reserve":l.model.attributes.version=e.results.data.versions.length,l.node.set({"reserved":e.results.data.properties.reserved,"reserved_user_id":e.results.data.properties.reserved_user_id}),i.resolve();break;default:i.resolve(e)}},"error":function(e,t,n){i.reject(e)}}),i.promise()},"deleteAutoSavedContent":function(e){this.autoSaved&&(e.type="DELETE",e.url=r.combine(e.connector.getConnectionUrl().getApiBase("v2"),"/wiki/"+e.wikiId+"/autosave/"+e.pageId),this.updateAjaxCall(e),this.autoSaved=!1),window.clearInterval(this.intervalId)}})}),csui.define("hbs!csui/widgets/html.editor/impl/html.editor.wrapper.template",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-html-editor-tile-controls tile-controls"></div>\r\n<div class="csui-html-editor-wrapper-parent cui-rich-editor-widget-wrapper\r\ncsui-html-editor-wrapper-parent-'+e.escapeExpression((s=null!=(s=r(i,"id")||(null!=t?r(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":3,"column":32},"end":{"line":3,"column":40}}}):s))+'">\r\n</div>'}});return i.registerPartial("csui_widgets_html.editor_impl_html.editor.wrapper.template",n),n}),csui.define("csui/widgets/html.editor/html.editor.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/handlebars","csui/lib/marionette","csui/models/node/node.model","csui/models/node.children2/node.children2","csui/utils/contexts/factories/node","csui/utils/commands","csui/controls/tile/tile.view","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/behaviors/default.action/default.action.behavior","csui/widgets/html.editor/impl/html.editor.content.view","hbs!csui/widgets/html.editor/impl/html.editor.wrapper.template","i18n!csui/widgets/html.editor/impl/nls/lang"],function(e,t,i,n,o,s,r,l,a,c,u,d,h,p,m){var f=a.extend({"constructor":function(t){t||(t={}),t.icon="cs-wiki-icon-wiki",this.context=t.context,t.id="csui-html-tile-wrapper-"+t.wikiPageId,a.prototype.constructor.call(this,t),t=t.data?e.extend(t,t.data):t,this.options=t,this.options.parentView=this,this.contentViewOptions=this.options},"contentView":h,"contentViewOptions":function(){e.extend(this.options,{"parentView":this})},"onShow":function(){this.$el.addClass("cui-rich-editor-widget-wrapper cui-rich-editor-widget-wrapper-"+this.options.wikiPageId)}});return n.CompositeView.extend({"tagName":"div","className":"csui-html-editor-grand-parent","templateHelpers":function(){return{}},"template":p,"ui":{"editIcon":".tile-controls","contentAreaLinks":".csui-html-editor-wrapper a"},"events":{"keydown":"onKeyInView","click @ui.contentAreaLinks":"onClickLink"},"constructor":function(t){t=t||{},t.data||(t.data={}),e.extend(t,t.data),t.wikiPageId=t.wikipageid||t.id,t.id="csui-html-editor-grand-parent-"+t.wikiPageId,t.title=t.titlefield||t.title,t.header=!!t.title,t.scrollableParent=t.header?".tile-content":".csui-html-editor-wrapper-parent",this.context=t.context,n.CompositeView.prototype.constructor.apply(this,arguments)},"behaviors":{"PerfectScrolling":{"behaviorClass":c,"contentParent":function(){return this.options.scrollableParent},"suppressScrollX":!0},"TabableRegionBehavior":{"behaviorClass":u},"DefaultAction":{"behaviorClass":d}},"onClickLink":function(e){var i=t(e.target).attr("href")?t(e.target):t(e.target).parents("a");i[0]&&i.attr("href")&&this._handleClickLink({"event":e,"connector":this.options.model.connector,"callingViewInstance":this})},"_handleClickLink":function(e){var i,n=t(e.event.target).attr("href")?t(e.event.target):t(e.event.target).parents("a"),o=e.callingViewInstance,s=this,r=n.attr("href")?n.attr("href"):"";if(this.htmlEditorContentView&&"read"===this.htmlEditorContentView.mode)if(r.match(/^.*\/open|Open\/(.+)$/)){if(e.event.stopPropagation(),e.event.preventDefault(),-1!==r.indexOf("open/")||-1!==r.indexOf("Open/")){var l=r.substring(r.lastIndexOf("/")+1,r.length);l.match(/^[0-9]+$/)?(i=this.getNewNodeModel({"attributes":{"id":parseInt(r.substring(r.lastIndexOf("/")+1,r.length),10)},"connector":e.connector}),i.fetch().done(function(){o.triggerMethod("execute:defaultAction",i)}).fail(function(e,t,i){window.location.href=r})):this.updateAjaxCall({"url":e.connector.getConnectionUrl().getApiBase("v2")+"/wiki/nickname/"+l+"?actions=open&fields=properties","connector":e.connector,"view":e.callingViewInstance,"type":"GET"}).done(function(t){i=s.getNewNodeModel({},{"connector":e.connector}),i.attributes=i.parse(t),i=s.getNewNodeModel({"attributes":i.attributes},{"connector":e.connector}),o.triggerMethod("execute:defaultAction",i)}).fail(function(){window.location.href=r})}}else if(r.match(/^.*\/wiki\/[0-9]+\/(.+)$/)||r.match(/^.*\/wiki\/[0-9]+$/)){var a;if(e.event.stopPropagation(),e.event.preventDefault(),r.match(/^.*\/wiki\/[0-9]+\/(.+)$/))a=decodeURIComponent(r.substring(r.lastIndexOf("/")+1,r.length));else if(r.match(/^.*\/wiki\/[0-9]+$/)){var c=decodeURIComponent(r.substring(0,r.lastIndexOf("/")-5));a=decodeURIComponent(c.substring(c.lastIndexOf("/")+1,c.length))}this.updateAjaxCall({"url":e.connector.getConnectionUrl().getApiBase("v2")+"/wiki/"+this.options.wikiid+"/wikipages","connector":e.connector,"view":e.callingViewInstance,"type":"GET"}).done(function(t){i=t.results.find(function(e){if(e.name===a)return e}),i?(i=s.getNewNodeModel({"attributes":i,"connector":e.connector}),i.fetch().done(function(){e.callingViewInstance.triggerMethod("execute:defaultAction",i)}).fail(function(e,t,i){window.location.href=r})):window.location.href=r}).fail(function(){window.location.href=r})}else if(r.match(/^.*objId\=(.+)$/)){e.event.stopPropagation(),e.event.preventDefault();var u=r.indexOf("objId=");-1!==u&&(i=this.getNewNodeModel({"attributes":{"id":parseInt(r.substring(u+6,r.substring(u+1,r.length).indexOf("&")+u+1),10)},"connector":e.connector}),i.fetch().done(function(){e.callingViewInstance.triggerMethod("execute:defaultAction",i)}).fail(function(e,t,i){window.location.href=r}))}else r.match(/^.*\/app\/nodes\/(.+)$/)&&(e.event.stopPropagation(),e.event.preventDefault(),-1!==r.indexOf("nodes/")&&(i=this.getNewNodeModel({"attributes":{"id":parseInt(r.substring(r.lastIndexOf("/")+1,r.length),10)},"connector":e.connector}),i.fetch().done(function(){o.triggerMethod("execute:defaultAction",i)}).fail(function(e,t,i){window.location.href=r})))},"updateAjaxCall":function(e){var i=t.Deferred(),n=e.url,o=e.data,s=e.type,r=e.connector;return this.ajaxRequest=t.ajax(r.extendAjaxOptions({"url":n,"type":s,"data":o,"contentType":!1,"crossDomain":!0,"processData":!1,"success":function(e,t,n){i.resolve(e)},"error":function(e,t,n){i.reject()}})),i.promise()},"currentlyFocusedElement":function(){return this.htmlEditorContentView.dropdownMenu&&!this.htmlEditorContentView.dropdownMenu.haveEditPermissions?this.htmlEditorContentView.$el.find("a:first"):this.$el.find(".csui-html-editor-dropdown .csui-html-editor-control")},"getNewNodeModel":function(e){return new o(e.attributes,{"connector":e.connector,"commands":l.getAllSignatures(),"fields":e.fields||{},"expand":e.expand||{}})},"onKeyInView":function(e){"read"===this.htmlEditorContentView.mode&&this.htmlEditorContentView.moveTab(e)},"onRender":function(t){var i=this;this.getWikiDetails().done(function(){var t;i.options.autosaveInterval=6e4,void 0===i.options.header||i.options.header?(t=new f(i.options),i.listenToOnce(t,"show",e.bind(function(){i.htmlEditorContentView=t.getChildView("content")},i))):(i.options.parentView=i,t=new h(i.options),i.htmlEditorContentView=t),new n.Region({"el":i.$el.find(".csui-html-editor-wrapper-parent")}).show(t),i._triggerView=i,i.listenTo(i.htmlEditorContentView,"refresh:tabindexes",e.bind(function(){i.trigger("refresh:tabindexes")},i)).listenTo(i.htmlEditorContentView,"updateScrollbar",e.bind(function(){i.trigger("dom:refresh")},i))})},"getWikiDetails":function(){var e,i,n,s=this.options.context.getModel(r),l=!!s.get("data")&&!!s.get("data").bwsinfo&&!!s.get("data").bwsinfo.id,a=this,c=t.Deferred();if(!l||this.options.data.wikicontainerid||this.options.data.wikitemplateid)c.resolve();else{s=848===s.get("type")?s:new o({"id":s.get("data").bwsinfo.id},{"connector":s.connector});var u=this.getChildren(s,5573,["id","main_page_id"]);u.fetch().done(function(){if(e=u.length>0?u.models[0]:void 0)if(n=e.get("main_page_id"))a.options.wikiid=e.get("id"),a.options.wikiPageid=n,a.options.wikiPageId=n,c.resolve();else{var t=a.getChildren(e,5574,["id"]);t.fetch().done(function(){i=t.length>0?t.models[0]:void 0,i&&(a.options.wikiid=e.get("id"),a.options.wikiPageid=i.get("id"),a.options.wikiPageId=i.get("id")),c.resolve()})}else c.resolve()})}return c.promise()},"getChildren":function(t,i,n){return new s({},e.defaults({"top":1,"autoreset":!0,"fields":{"properties":n},"delayRestCommands":!1,"orderBy":"create_date","filter":{"type":i}},{"node":t}))}})}),csui.define("csui/widgets/document.overview/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/document.overview/impl/nls/root/lang",{"ToolbarItemOpen":"Open","ToolbarItemDownload":"Download","ToolbarItemEdit":"Edit","ToolbarItemProperties":"Properties","location":"Location","docPreviewImgAlt":"Document Preview","name":"Name","description":"Description","created":"Created","createdBy":"Created by","type":"Type","modified":"Modified","ownedBy":"Owned by","size":"Size","reservedBy":"Reserved by","noValue":"No value","reservedByUnreserve":"Reserved by {0}, Press to unreserve","goBackTitle":"Go back","goBackAria":"Go back"}),csui.define("hbs!csui/widgets/document.overview/impl/document.overview",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="overview-page-backbutton icon arrow_back cs-go-back csui-acc-focusable-active"\r\n           aria-label="'+e.escapeExpression((s=null!=(s=r(i,"goBackAria")||(null!=t?r(t,"goBackAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"goBackAria","hash":{},"loc":{"start":{"line":6,"column":23},"end":{"line":6,"column":37}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=r(i,"goBackTitle")||(null!=t?r(t,"goBackTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"goBackTitle","hash":{},"loc":{"start":{"line":6,"column":46},"end":{"line":6,"column":61}}}):s))+'" role="link" tabindex="0"></div>\r\n'},"3":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="description_section doc-overview-general-information">\r\n          <div class="doc-overview-form-group">\r\n            <label class="doc-overview-control-label" for="desc'+e.escapeExpression((s=null!=(s=r(i,"unique")||(null!=t?r(t,"unique"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":99,"column":63},"end":{"line":99,"column":73}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=r(i,"desc_label")||(null!=t?r(t,"desc_label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"desc_label","hash":{},"loc":{"start":{"line":99,"column":82},"end":{"line":99,"column":96}}}):s))+'">\r\n              '+e.escapeExpression((s=null!=(s=r(i,"desc_label")||(null!=t?r(t,"desc_label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"desc_label","hash":{},"loc":{"start":{"line":100,"column":14},"end":{"line":100,"column":28}}}):s))+'\r\n            </label>\r\n            <div class="binf-col-sm-9">\r\n              <button disabled id="desc'+e.escapeExpression((s=null!=(s=r(i,"unique")||(null!=t?r(t,"unique"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":103,"column":39},"end":{"line":103,"column":49}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=r(i,"desc_label")||(null!=t?r(t,"desc_label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"desc_label","hash":{},"loc":{"start":{"line":103,"column":63},"end":{"line":103,"column":77}}}):s))+":\r\n              "+e.escapeExpression((s=null!=(s=r(i,"desc_value")||(null!=t?r(t,"desc_value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"desc_value","hash":{},"loc":{"start":{"line":104,"column":14},"end":{"line":104,"column":28}}}):s))+'"><span class="csui-ellipsis-area no-ellipsis"><span><span\r\n                  class="cs-field-textarea-data">'+e.escapeExpression((s=null!=(s=r(i,"desc_value")||(null!=t?r(t,"desc_value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"desc_value","hash":{},"loc":{"start":{"line":105,"column":49},"end":{"line":105,"column":63}}}):s))+'</span></span>\r\n                </span>\r\n              </button>\r\n            </div>\r\n            <div style="clear:both;"></div>\r\n          </div>\r\n        </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-content-wrapper cs-content-overlay-wrapper">\r\n\r\n  <div class="cs-content-header">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"back_button"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":4},"end":{"line":7,"column":11}}}))?s:"")+'    <div class="title-container"></div>\r\n    <div class="actions-container">\r\n      <div class="commentRegion"></div>\r\n      <div class="favoriteRegion"></div>\r\n    </div>\r\n  </div>\r\n  <div class="cs-content-container">\r\n    <div class="description-container cs-content">\r\n\r\n      <div class="created_by_section doc-overview-general-information">\r\n        <div class="doc-overview-form-group">\r\n          <label class="doc-overview-control-label" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"createdBy"):s,t))+'">\r\n            '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"createdBy"):s,t))+'\r\n          </label>\r\n          <div class="binf-col-sm-9">\r\n            <div class="csui-doc-overview-created-by-pic"></div>\r\n            <div class="csui-doc-overview-created-by-user"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="modified_section doc-overview-general-information">\r\n        <div class="doc-overview-form-group">\r\n          <label class="doc-overview-control-label" for="modi'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":31,"column":61},"end":{"line":31,"column":71}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=l(i,"modify_label")||(null!=t?l(t,"modify_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"modify_label","hash":{},"loc":{"start":{"line":31,"column":80},"end":{"line":31,"column":96}}}):r))+'">\r\n            '+e.escapeExpression((r=null!=(r=l(i,"modify_label")||(null!=t?l(t,"modify_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"modify_label","hash":{},"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":28}}}):r))+'\r\n          </label>\r\n          <div class="binf-col-sm-9">\r\n            <button disabled id="modi'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":35,"column":37},"end":{"line":35,"column":47}}}):r))+'" aria-label="'+e.escapeExpression((r=null!=(r=l(i,"modify_label")||(null!=t?l(t,"modify_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"modify_label","hash":{},"loc":{"start":{"line":35,"column":61},"end":{"line":35,"column":77}}}):r))+": "+e.escapeExpression((r=null!=(r=l(i,"modify_date")||(null!=t?l(t,"modify_date"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"modify_date","hash":{},"loc":{"start":{"line":35,"column":79},"end":{"line":35,"column":94}}}):r))+'">\r\n              <span title="'+e.escapeExpression((r=null!=(r=l(i,"modify_date")||(null!=t?l(t,"modify_date"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"modify_date","hash":{},"loc":{"start":{"line":36,"column":27},"end":{"line":36,"column":42}}}):r))+'">'+e.escapeExpression((r=null!=(r=l(i,"modify_date")||(null!=t?l(t,"modify_date"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"modify_date","hash":{},"loc":{"start":{"line":36,"column":44},"end":{"line":36,"column":59}}}):r))+'</span>\r\n            </button>\r\n          </div>\r\n          <div style="clear:both;"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="type_section doc-overview-general-information">\r\n        <div class="doc-overview-form-group">\r\n          <label class="doc-overview-control-label" for="type'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":45,"column":61},"end":{"line":45,"column":71}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=l(i,"type_label")||(null!=t?l(t,"type_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"type_label","hash":{},"loc":{"start":{"line":45,"column":80},"end":{"line":45,"column":94}}}):r))+'">\r\n            '+e.escapeExpression((r=null!=(r=l(i,"type_label")||(null!=t?l(t,"type_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"type_label","hash":{},"loc":{"start":{"line":46,"column":12},"end":{"line":46,"column":26}}}):r))+'\r\n          </label>\r\n          <div class="binf-col-sm-9">\r\n            <button title="Microsoft Word" id="type'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":49,"column":51},"end":{"line":49,"column":61}}}):r))+'" disabled\r\n                    aria-label="'+e.escapeExpression((r=null!=(r=l(i,"type_label")||(null!=t?l(t,"type_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"type_label","hash":{},"loc":{"start":{"line":50,"column":32},"end":{"line":50,"column":46}}}):r))+": "+e.escapeExpression((r=null!=(r=l(i,"mime_type")||(null!=t?l(t,"mime_type"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"mime_type","hash":{},"loc":{"start":{"line":50,"column":48},"end":{"line":50,"column":61}}}):r))+'">\r\n              <span>'+e.escapeExpression((r=null!=(r=l(i,"mime_type")||(null!=t?l(t,"mime_type"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"mime_type","hash":{},"loc":{"start":{"line":51,"column":20},"end":{"line":51,"column":33}}}):r))+'</span>\r\n            </button>\r\n          </div>\r\n          <div style="clear:both;"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="size_section doc-overview-general-information">\r\n        <div class="doc-overview-form-group">\r\n          <label class="doc-overview-control-label" for="size'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":60,"column":61},"end":{"line":60,"column":71}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=l(i,"size_label")||(null!=t?l(t,"size_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"size_label","hash":{},"loc":{"start":{"line":60,"column":80},"end":{"line":60,"column":94}}}):r))+'">\r\n            '+e.escapeExpression((r=null!=(r=l(i,"size_label")||(null!=t?l(t,"size_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"size_label","hash":{},"loc":{"start":{"line":61,"column":12},"end":{"line":61,"column":26}}}):r))+'\r\n          </label>\r\n          <div class="binf-col-sm-9">\r\n            <button title="'+e.escapeExpression((r=null!=(r=l(i,"size_full_value")||(null!=t?l(t,"size_full_value"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"size_full_value","hash":{},"loc":{"start":{"line":64,"column":27},"end":{"line":64,"column":46}}}):r))+'" id="size'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":64,"column":56},"end":{"line":64,"column":66}}}):r))+'" disabled\r\n                    aria-label="'+e.escapeExpression((r=null!=(r=l(i,"size_label")||(null!=t?l(t,"size_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"size_label","hash":{},"loc":{"start":{"line":65,"column":32},"end":{"line":65,"column":46}}}):r))+": "+e.escapeExpression((r=null!=(r=l(i,"size_value")||(null!=t?l(t,"size_value"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"size_value","hash":{},"loc":{"start":{"line":65,"column":48},"end":{"line":65,"column":62}}}):r))+'">\r\n              <span>'+e.escapeExpression((r=null!=(r=l(i,"size_value")||(null!=t?l(t,"size_value"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"size_value","hash":{},"loc":{"start":{"line":66,"column":20},"end":{"line":66,"column":34}}
}):r))+'</span>\r\n            </button>\r\n          </div>\r\n          <div style="clear:both;"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="reserve_info doc-overview-general-information binf-hidden">\r\n        <div class="doc-overview-form-group">\r\n          <label class="doc-overview-control-label" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"reservedBy"):s,t))+'">\r\n            '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"reservedBy"):s,t))+'\r\n          </label>\r\n          <div class="binf-col-sm-9">\r\n            <div class="doc-overview-reserve">\r\n              <div class="csui-doc-overview-reserve-btn"></div>\r\n              <div class="csui-doc-overview-reserve-user"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="location-container doc-overview-general-information">\r\n        <div class="doc-overview-form-group">\r\n          <label class="doc-overview-control-label" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"location"):s,t))+'">\r\n            '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"location"):s,t))+'\r\n          </label>\r\n          <div class="binf-col-sm-9 location-view"></div>\r\n        </div>\r\n      </div>\r\n\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"has_description"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":96,"column":6},"end":{"line":112,"column":13}}}))?s:"")+'\r\n    </div>\r\n\r\n    <div class="binf-col-md-4 thumbnail-container binf-hidden binf-text-left cs-content">\r\n      <div class="metadata-tab">\r\n        <div class="thumbnail_section metadata-preview preview-section"\r\n             title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"ToolbarItemOpen"):s,t))+'">\r\n          <img role="link" src="'+e.escapeExpression((r=null!=(r=l(i,"imgSrc")||(null!=t?l(t,"imgSrc"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"imgSrc","hash":{},"loc":{"start":{"line":120,"column":32},"end":{"line":120,"column":42}}}):r))+'" class="img-doc-preview binf-hidden" alt="'+e.escapeExpression((r=null!=(r=l(i,"imgAlt")||(null!=t?l(t,"imgAlt"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"imgAlt","hash":{},"loc":{"start":{"line":120,"column":85},"end":{"line":120,"column":95}}}):r))+'" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="cs-fadeout-container"></div>\r\n  <div class="cs-content-footer">\r\n    <button class="binf-btn primary-btn command-btn open-btn" type="button"\r\n            data-signature="Open">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"ToolbarItemOpen"):s,t))+'</button>\r\n    <button class="binf-btn default-btn command-btn csui-doc-overview-download-btn" type="button"\r\n            data-signature="Download">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"ToolbarItemDownload"):s,t))+'</button>\r\n    <button class="binf-btn default-btn command-btn edit-btn" type="button"\r\n            data-signature="Edit">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"ToolbarItemEdit"):s,t))+'</button>\r\n    <button class="binf-btn default-btn command-btn" type="button"\r\n            data-signature="Properties">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"ToolbarItemProperties"):s,t))+"</button>\r\n  </div>\r\n</div>"}});return i.registerPartial("csui_widgets_document.overview_impl_document.overview",n),n}),csui.define("css!csui/widgets/document.overview/impl/document.overview",[],function(){}),csui.define("csui/widgets/document.overview/document.overview.view",["module","csui/lib/underscore","csui/lib/marionette","csui/lib/jquery","csui/utils/log","csui/utils/url","csui/utils/types/date","csui/utils/nodesprites","csui/utils/contexts/factories/node","csui/utils/thumbnail/thumbnail.object","csui/controls/toolbar/toolbar.command.controller","csui/models/nodes","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/utils/commands","csui/utils/commandhelper","csui/controls/progressblocker/blocker","i18n!csui/widgets/document.overview/impl/nls/lang","csui/utils/contexts/factories/largefilesettings.factory","csui/utils/contexts/factories/next.node","hbs!csui/widgets/document.overview/impl/document.overview","css!csui/widgets/document.overview/impl/document.overview"],function(e,t,i,n,o,s,r,l,a,c,u,d,h,p,m,f,g,v,b,w){"use strict";return o=o(e.id),i.ItemView.extend({"className":"cs-form csui-general-form cs-document-overview-wrapper","template":w,"templateHelpers":function(){var e=l.findTypeByNode(this.options.node),i=this.options.node.get("size_formatted"),n=this.options.node.get("size"),o=r.formatExactDateTime(r.deserializeDate(this.options.node.get("modify_date"))),s=this.options.node.get("description"),a=!!s;return{"unique":t.uniqueId("_doc"),"lang":g,"back_button":!0,"mime_type":e,"has_description":a,"size_value":i,"size_full_value":n,"modify_date":o,"desc_value":s,"type_label":g.type,"size_label":g.size,"modify_label":g.modified,"desc_label":g.description,"imgSrc":"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=","imgAlt":g.docPreviewImgAlt,"goBackTitle":g.goBackTitle,"goBackAria":g.goBackAria}},"ui":{"location":".location-view","back":".cs-go-back","titleContainer":".title-container","commentButtonRegion":".commentRegion","favoriteStarRegion":".favoriteRegion","thumbnailContainer":".thumbnail-container","modifySectionBtn":".modified_section button","mimeTypeBtn":".type_section button","sizeSectionBtn":".size_section button","thumbnailImg":".img-doc-preview","reserveInfo":".reserve_info","reserveUser":".csui-doc-overview-reserve-user","reserverBtn":".csui-doc-overview-reserve-btn","createdBy":".created_by_section .binf-col-sm-9","creadyByUser":".csui-doc-overview-created-by-user","createdByPic":".csui-doc-overview-created-by-pic","openBtn":".open-btn","editBtn":".edit-btn","downloadBtn":".csui-doc-overview-download-btn"},"events":{"click .command-btn":"_handleClickButton","click .thumbnail_section":"_handleClickThumbnail","click @ui.back":"onBackButton","keydown":"onKeyInView"},"behaviors":{"PerfectScrolling":{"behaviorClass":h,"contentParent":".cs-content-container","suppressScrollX":!0}},"constructor":function(e){e||(e={}),f.imbue(this),e.data||(e.data={}),e.node||(e.node=e.context.getModel(a,{"attributes":e.data.id&&{"id":e.data.id},"temporary":!0})),this.options=e;var n=e.context&&e.context.viewStateModel;this.back_button=n&&n.hasRouted(),this.largeFileSettingsFactory=this.options.context.getFactory(v),this.largeFileSettingsModel=this.largeFileSettingsFactory&&this.largeFileSettingsFactory.property,i.ItemView.prototype.constructor.apply(this,arguments),this.commandController=new u({"commands":e.commands||p}),this.commands=this.commandController.commands,this.reloadWidget=!1,this.parentNode=void 0,this.supportOriginatingView=!0,this.listenTo(this.options.node,"change",t.bind(this._handleNodeChange,this)),this.listenTo(this,"new:version:added",t.bind(this._handleVersionChange,this)),this.listenTo(this.options.node,"delete",t.bind(this._navigateToParent,this)),n&&this.listenTo(n,"navigate",function(e){e&&!this.back_button&&this.ui.back.show()}),this.blockActions()},"onRender":function(){this._showMetadataItemName(),this._addCommentView(),this._addFavoriteView(),this._showThumbnail(),this._addLocationView(),this._showCreatedByUserName(),this._showReserveRow(),this._checkPermissions(),this.back_button||this.ui.back.hide()},"_unblockActions":function(){this.unblockActions(),this.$el.find(".cs-content-wrapper").removeClass("cs-content-overlay-wrapper")},"onShow":function(){this.$el.addClass("adjust-scroll")},"onDomRefresh":function(){this.metadataItemNameView&&this.metadataItemNameView.triggerMethod("dom:refresh")},"_isReserved":function(){return!0===this.options.node.get("reserved")},"_showMetadataItemName":function(){csui.require(["csui/widgets/metadata/impl/header/item.name/metadata.item.name.view"],t.bind(function(e){this.metadataItemNameView&&this.metadataItemNameView.destroy(),this.metadataItemNameView=new e({"model":this.options.node,"container":this.options.node.parent,"containerCollection":this.options.containerCollection,"collection":this.options.collection,"context":this.options.context,"nameSchema":{},"commands":this.commands,"originatingView":this,"showDropdownMenu":!0,"showPropertiesCommand":!0,"noMetadataNavigation":!0}),this.listenTo(this.metadataItemNameView,"metadata:item:name:save",this._saveItemName);var t=this.metadataItemNameView.render();i.triggerMethodOn(t,"before:show",t,this),this.ui.titleContainer.append(t.el),i.triggerMethodOn(t,"show",t,this)},this))},"_saveItemName":function(e){var i=this,n=e.sender.getValue(),o={"name":n},s=e.sender&&e.sender.model,r=this.options.model||this.options.node;s&&s.changed.name_multilingual&&t.extend(o,{"name_multilingual":s.changed.name_multilingual}),r.setFields("versions.element(0)","owner_id");var l=t.clone(r.attributes);return r.save(l,{"data":o,"wait":!0,"silent":!0}).then(function(){r.fetch({"silent":!0}).done(function(){i._updateModifyDateAndTimeStamp(),e.success(),r.set(o,{"silent":!0})})}).fail(function(t){e.error(t)})},"_addCommentView":function(){csui.require(["csui/controls/tableheader/comment/comment.button.view","esoc/widgets/utils/commentdialog/commentdialog.view"],t.bind(function(e){var t=this.options;t.originatingView=this,t.model=this.options.node||this.options.model;var n=new e(t);new i.Region({"el":this.ui.commentButtonRegion}).show(n),this._unblockActions()},this))},"_addFavoriteView":function(){csui.require(["csui/widgets/favorites/favorite.star.view"],t.bind(function(e){var t=this.options;t.model=this.options.node||this.options.model,t.popoverAtBodyElement=!0;var n=new e(t);new i.Region({"el":this.ui.favoriteStarRegion}).show(n)},this))},"_updateFieldsToRefresh":function(){this._updateModifyDateAndTimeStamp(),this._updateMimeType(),this._updateSize(),this._updateReserveField()},"_handleNodeChange":function(){this.options.node.isReservedClicked||this.options.node.isUnreservedClicked?(this._updateReserveField(),this._updateModifyDateAndTimeStamp(),this.options.node.isReservedClicked=!1,this.options.node.isUnreservedClicked=!1):this.options.node.changed.csuiDelayedActionsRetrieved?(this.isReserved=!1,this._updateReserveField(),this._checkPermissions()):this._updateFieldsToRefresh()},"_handleVersionChange":function(){this.ui.thumbnailContainer.addClass("binf-hidden"),this.$el.removeClass("cs-document-overview-wrapper-with-thumbnail")},"_updateModifyDateAndTimeStamp":function(){var e=this.ui.modifySectionBtn,t=e.find("span"),i=r.formatExactDateTime(r.deserializeDate(this.options.node.get("modify_date")));t.text()!=i&&(e.attr("aria-label",g.modified+":"+i),t.attr("title",i).text(i))},"_updateMimeType":function(){var e=this.ui.mimeTypeBtn,t=e.find("span"),i=l.findTypeByNode(this.options.node);t.text()!=i&&(e.attr({"aria-label":g.type+":"+i,"title":i}),t.text(i))},"_updateSize":function(){var e=this.ui.sizeSectionBtn,t=e.find("span"),i=this.options.node.get("size"),n=this.options.node.get("size_formatted");t.text()!=n&&(e.attr({"aria-label":g.size+":"+n,"title":i}),t.text(n))},"_showThumbnail":function(){if(this.thumbnail=this.options.thumbnail||new c({"node":this.options.node}),this.listenTo(this.thumbnail,"loadUrl",this._showImage),this.listenTo(this.thumbnail,"error",this._showDefaultImage),this.listenTo(this,"destroy",t.bind(this._destroyThumbnail,this)),!this.thumbnailSet){this.thumbnailSet=!0,this.thumbnail.hasOwnProperty("imgUrl")&&this.thumbnail.imgUrl?this._showImage():this.thumbnail.loadUrl()}},"_showImage":function(){this.$el.addClass("cs-document-overview-wrapper-with-thumbnail"),this.ui.thumbnailContainer.removeClass("binf-hidden"),this.trigger("thumbnail:show:image");var e=this,t=this.ui.thumbnailImg;t.attr("src",this.thumbnail.imgUrl),t.prop("tabindex","0"),t.one("load",function(i){i.target.clientHeight>=i.target.clientWidth?t.addClass("cs-form-img-vertical"):t.addClass("cs-form-img-horizontal"),t.addClass("cs-form-img-border"),t.removeClass("binf-hidden");var o=n.Event("tab:content:render");e.$el.trigger(o)})},"_showDefaultImage":function(e,t){o.warn(t.message)},"_destroyThumbnail":function(){this.thumbnail&&(this.thumbnail.destroy(),this.thumbnail=void 0),this.thumbnailSet=!1},"_addLocationView":function(){var e=this,i=function(){csui.require(["csui/controls/table/cells/parent/parent.view"],t.bind(function(t){new t({"model":e.options.node,"context":e.options.context,"nameEdit":!1,"iconSize":"contain","el":e.$el.find(e.ui.location)}).render()},this))};if(this.options.node.get("parent_id_expand"))i();else{var n=this.options.node,o=n.get("parent_id"),r=n.connector,l=s.combine(r.getConnectionUrl().getApiBase("v2"),"/nodes/"+o+"/properties"),a={"type":"GET","url":l};r.makeAjaxCall(a).done(t.bind(function(e){n.set("parent_id_expand",e.results.data.properties,{"silent":!0}),i()},this))}},"_showReserveRow":function(){this._updateReserveField()},"_cleanAndInitReserveRow":function(){this.ui.reserveInfo.addClass("binf-hidden"),this.reserveFieldView.$el.html(),this.ui.reserveUser.html()},"_updateReserveField":function(){var e=this._isReserved();if(e&&!this.isReserved){this.ui.reserveInfo.removeClass("binf-hidden");var t={"context":this.options.context,"tableView":this,"model":this.options.node||this.options.model,"reservedByLabel":g.reservedByUnreserve},n=this;csui.require(["csui/controls/node.state/impl/reservation/reservation.view"],function(e){n.reserveFieldView=new e(t);var o=new i.Region({"el":n.ui.reserverBtn});n.reserveFieldView.tagName="span",o.show(n.reserveFieldView),n.$el.find("li.csui-node-state-reservation").attr("role","none").find("button").removeAttr("tabindex"),n._getUserField({"userid":n.options.node.get("reserved_user_id"),"placeholder":n.ui.reserveUser,"showUserProfileLink":!0}),n.isReserved=!0})}else!e&&this.isReserved&&(this.reserveFieldView&&this.reserveFieldView.destroy(),this._cleanAndInitReserveRow(),this.isReserved=!1)},"_showCreatedByUserName":function(){var e={"baseElement":this.ui.createdBy,"userId":this.options.node.get("create_user_id")};this._showUserName(e)},"_showUserName":function(e){this._getUserField({"userid":e.userId,"placeholder":this.ui.creadyByUser,"showUserProfileLink":!0}),this._getUserField({"userid":e.userId,"placeholder":this.ui.createdByPic,"userWidgetWrapperClass":"","showUserWidgetFor":"profilepic"})},"_getUserField":function(e){csui.require(["esoc/controls/userwidget/userwidget.view"],t.bind(function(o){var s=t.extend({"context":this.options.context,"showMiniProfile":!0,"connector":this.options.node.connector,"imgSrc":"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs="},e),r=new o(s);new i.Region({"el":n(e.placeholder)}).show(r)},this))},"_checkPermissions":function(){var e={"signature":"Edit","actionBtnEle":this.ui.editBtn},t={"signature":"Download","actionBtnEle":this.ui.downloadBtn},i={"signature":"Open","actionBtnEle":this.ui.openBtn};this._checkPermForOpenAction(i),this._checkPermForSpecificAction(e),this._checkPermForSpecificAction(t)},"_checkPermForOpenAction":function(e){this.commands.findWhere({"signature":e.signature}).checkPermission(this.options.node).then(function(t){t?e.actionBtnEle.removeClass("binf-hidden"):e.actionBtnEle.addClass("binf-hidden")})},"_checkPermForSpecificAction":function(e){var t=this.commands.findWhere({"signature":e.signature}),i={"nodes":new d([this.options.node]),"container":this.options.node.parent},n={"context":this.options.context};t&&t.enabled(i,n)?e.actionBtnEle.removeClass("binf-hidden"):e.actionBtnEle.addClass("binf-hidden")},"onKeyInView":function(e){var t=e||window.event,i=t.target||t.srcElement;13!==t.keyCode&&32!==t.keyCode||this.$el.find(".title-input").is(t.target)||(t.preventDefault(),t.stopPropagation(),n(i).trigger("click"))},"onBackButton":function(){if(!this.backButtonClicked){var e=this.options,t=e&&e.context,i=t&&t.viewStateModel;i&&i.restoreLastFragment(),this.backButtonClicked=!0}},"_handleClickThumbnail":function(e){e.stopImmediatePropagation(),this._executeCommand("Open")},"_handleClickButton":function(e){e.stopImmediatePropagation();var t=n(e.target).data("signature");this._executeCommand(t)},"_executeCommand":function(e){var t=this.commands.get(e),i=this;i.collection=new d([this.options.node]);var n={"nodes":new d([this.options.node]),"container":this.options.node,"originatingView":i},s={"context":this.options.context};try{if(!t)throw new Error('Command "'+e+'" not found.');var r=t.execute(n,s);m.handleExecutionResults(r,{"command":t,"suppressSuccessMessage":n.suppressSuccessMessage,"suppressFailMessage":n.suppressFailMessage})}catch(e){o.warn('Executing the command "{0}" failed.\n{1}',t.get("signature"),e.message)&&console.warn(o.last)}},"_navigateToParent":function(){var e=this.options.model.get("parent_id");e&&this._setNextNodeModelFactory(e)},"_setNextNodeModelFactory":function(e){if(this.options.context&&void 0!==e){var t=this.options.context.getModel(b);t&&(t.get("id")===e&&t.unset("id",{"silent":!0}),t.set("id",e))}}})}),csui.define("csui/widgets/version.overview/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/version.overview/impl/nls/root/lang",{"ToolbarItemOpen":"Open","ToolbarItemDownload":"Download","ToolbarItemProperties":"Properties","location":"Location","docPreviewImgAlt":"Version Preview","name":"Name","description":"Description","created":"Created","createdBy":"Created by","type":"Type","modified":"Modified","ownedBy":"Owned by","size":"Size","noValue":"No value","goBackTitle":"Go back","goBackAria":"Go back","versionText":"v {0}","versionAria":"version {0}"}),csui.define("hbs!csui/widgets/version.overview/impl/version.overview",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="overview-page-backbutton icon arrow_back cs-go-back csui-acc-focusable-active"\r\n           aria-label="'+e.escapeExpression((s=null!=(s=r(i,"goBackAria")||(null!=t?r(t,"goBackAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"goBackAria","hash":{},"loc":{"start":{"line":6,"column":23},"end":{"line":6,"column":37}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=r(i,"goBackTitle")||(null!=t?r(t,"goBackTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"goBackTitle","hash":{},"loc":{"start":{"line":6,"column":46},"end":{"line":6,"column":61}}}):s))+'" role="link" tabindex="0"></div>\r\n'},"3":function(e,t,i,n,o){return"binf-hidden"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,r,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-content-wrapper cs-content-overlay-wrapper">\r\n\r\n  <div class="cs-content-header">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"back_button"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":4},"end":{"line":7,"column":11}}}))?s:"")+'    <div class="title-container"></div>\r\n    <div class="overview-page-version-label">\r\n      <span class="csui-overview-version-label" aria-label="'+e.escapeExpression((r=null!=(r=l(i,"versionAria")||(null!=t?l(t,"versionAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"versionAria","hash":{},"loc":{"start":{"line":10,"column":60},"end":{"line":10,"column":75}}}):r))+'">\r\n        '+e.escapeExpression((r=null!=(r=l(i,"versionText")||(null!=t?l(t,"versionText"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"versionText","hash":{},"loc":{"start":{"line":11,"column":8},"end":{"line":11,"column":23}}}):r))+'\r\n      </span>\r\n    </div>\r\n  </div>\r\n  <div class="cs-content-container">\r\n    <div class="description-container cs-content">\r\n\r\n      <div class="created_by_section version-overview-general-information">\r\n        <div class="version-overview-form-group">\r\n          <label class="version-overview-control-label" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"createdBy"):s,t))+'">\r\n            '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"createdBy"):s,t))+'\r\n          </label>\r\n          <div class="binf-col-sm-9">\r\n            <div class="csui-version-overview-created-by-pic"></div>\r\n            <div class="csui-version-overview-created-by-user"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="modified_section version-overview-general-information">\r\n        <div class="version-overview-form-group">\r\n          <label class="version-overview-control-label" for="modi'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":32,"column":65},"end":{"line":32,"column":75}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=l(i,"modify_label")||(null!=t?l(t,"modify_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"modify_label","hash":{},"loc":{"start":{"line":32,"column":84},"end":{"line":32,"column":100}}}):r))+'">\r\n            '+e.escapeExpression((r=null!=(r=l(i,"modify_label")||(null!=t?l(t,"modify_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"modify_label","hash":{},"loc":{"start":{"line":33,"column":12},"end":{"line":33,"column":28}}}):r))+'\r\n          </label>\r\n          <div class="binf-col-sm-9">\r\n            <button disabled id="modi'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":36,"column":37},"end":{"line":36,"column":47}}}):r))+'" aria-label="'+e.escapeExpression((r=null!=(r=l(i,"modify_label")||(null!=t?l(t,"modify_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"modify_label","hash":{},"loc":{"start":{"line":36,"column":61},"end":{"line":36,"column":77}}}):r))+": "+e.escapeExpression((r=null!=(r=l(i,"modify_date")||(null!=t?l(t,"modify_date"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"modify_date","hash":{},"loc":{"start":{"line":36,"column":79},"end":{"line":36,"column":94}}}):r))+'">\r\n              <span title="'+e.escapeExpression((r=null!=(r=l(i,"modify_date")||(null!=t?l(t,"modify_date"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"modify_date","hash":{},"loc":{"start":{"line":37,"column":27},"end":{"line":37,"column":42}}}):r))+'">'+e.escapeExpression((r=null!=(r=l(i,"modify_date")||(null!=t?l(t,"modify_date"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"modify_date","hash":{},"loc":{"start":{"line":37,"column":44},"end":{"line":37,"column":59}}}):r))+'</span>\r\n            </button>\r\n          </div>\r\n          <div style="clear:both;"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="type_section version-overview-general-information">\r\n        <div class="version-overview-form-group">\r\n          <label class="version-overview-control-label" for="type'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":46,"column":65},"end":{"line":46,"column":75}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=l(i,"type_label")||(null!=t?l(t,"type_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"type_label","hash":{},"loc":{"start":{"line":46,"column":84},"end":{"line":46,"column":98}}}):r))+'">\r\n            '+e.escapeExpression((r=null!=(r=l(i,"type_label")||(null!=t?l(t,"type_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"type_label","hash":{},"loc":{"start":{"line":47,"column":12},"end":{"line":47,"column":26}}}):r))+'\r\n          </label>\r\n          <div class="binf-col-sm-9">\r\n            <button title="'+e.escapeExpression((r=null!=(r=l(i,"mime_type")||(null!=t?l(t,"mime_type"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"mime_type","hash":{},"loc":{"start":{"line":50,"column":27},"end":{"line":50,"column":40}}}):r))+'" id="type'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":50,"column":50},"end":{"line":50,"column":60}}}):r))+'" disabled\r\n                    aria-label="'+e.escapeExpression((r=null!=(r=l(i,"type_label")||(null!=t?l(t,"type_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"type_label","hash":{},"loc":{"start":{"line":51,"column":32},"end":{"line":51,"column":46}}}):r))+": "+e.escapeExpression((r=null!=(r=l(i,"mime_type")||(null!=t?l(t,"mime_type"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"mime_type","hash":{},"loc":{"start":{"line":51,"column":48},"end":{"line":51,"column":61}}}):r))+'">\r\n              <span>'+e.escapeExpression((r=null!=(r=l(i,"mime_type")||(null!=t?l(t,"mime_type"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"mime_type","hash":{},"loc":{"start":{"line":52,"column":20},"end":{"line":52,"column":33}}}):r))+'</span>\r\n            </button>\r\n          </div>\r\n          <div style="clear:both;"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="size_section version-overview-general-information">\r\n        <div class="version-overview-form-group">\r\n          <label class="version-overview-control-label" for="size'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":61,"column":65},"end":{"line":61,"column":75}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=l(i,"size_label")||(null!=t?l(t,"size_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"size_label","hash":{},"loc":{"start":{"line":61,"column":84},"end":{"line":61,"column":98}}}):r))+'">\r\n            '+e.escapeExpression((r=null!=(r=l(i,"size_label")||(null!=t?l(t,"size_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"size_label","hash":{},"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":26}}}):r))+'\r\n          </label>\r\n          <div class="binf-col-sm-9">\r\n            <button title="'+e.escapeExpression((r=null!=(r=l(i,"size_full_value")||(null!=t?l(t,"size_full_value"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"size_full_value","hash":{},"loc":{"start":{"line":65,"column":27},"end":{"line":65,"column":46}}}):r))+'" id="size'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":65,"column":56},"end":{"line":65,"column":66}}}):r))+'" disabled\r\n                    aria-label="'+e.escapeExpression((r=null!=(r=l(i,"size_label")||(null!=t?l(t,"size_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"size_label","hash":{},"loc":{"start":{"line":66,"column":32},"end":{"line":66,"column":46}}}):r))+": "+e.escapeExpression((r=null!=(r=l(i,"size_value")||(null!=t?l(t,"size_value"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"size_value","hash":{},"loc":{"start":{"line":66,"column":48},"end":{"line":66,"column":62}}}):r))+'">\r\n              <span>'+e.escapeExpression((r=null!=(r=l(i,"size_value")||(null!=t?l(t,"size_value"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"size_value","hash":{},"loc":{"start":{"line":67,"column":20},"end":{"line":67,"column":34}}}):r))+'</span>\r\n            </button>\r\n          </div>\r\n          <div style="clear:both;"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="location-container version-overview-general-information">\r\n        <div class="version-overview-form-group">\r\n          <label class="version-overview-control-label" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"location"):s,t))+'">\r\n            '+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"location"):s,t))+'\r\n          </label>\r\n          <div class="binf-col-sm-9 location-view"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="description_section version-overview-general-information '+(null!=(s=l(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?l(t,"has_description"):t,{"name":"unless","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":83,"column":75},"end":{"line":83,"column":124}}}))?s:"")+'">\r\n        <div class="version-overview-form-group">\r\n          <label class="version-overview-control-label" for="desc'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":85,"column":65},"end":{"line":85,"column":75}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=l(i,"desc_label")||(null!=t?l(t,"desc_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"desc_label","hash":{},"loc":{"start":{"line":85,"column":84},"end":{"line":85,"column":98}}}):r))+'">\r\n            '+e.escapeExpression((r=null!=(r=l(i,"desc_label")||(null!=t?l(t,"desc_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"desc_label","hash":{},"loc":{"start":{"line":86,"column":12},"end":{"line":86,"column":26}}}):r))+'\r\n          </label>\r\n          <div class="binf-col-sm-9">\r\n            <button disabled id="desc'+e.escapeExpression((r=null!=(r=l(i,"unique")||(null!=t?l(t,"unique"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"unique","hash":{},"loc":{"start":{"line":89,"column":37},"end":{"line":89,"column":47}}}):r))+'" aria-label="'+e.escapeExpression((r=null!=(r=l(i,"desc_label")||(null!=t?l(t,"desc_label"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"desc_label","hash":{},"loc":{"start":{"line":89,"column":61},"end":{"line":89,"column":75}}}):r))+":\r\n            "+e.escapeExpression((r=null!=(r=l(i,"desc_value")||(null!=t?l(t,"desc_value"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"desc_value","hash":{},"loc":{"start":{"line":90,"column":12},"end":{"line":90,"column":26}}}):r))+'"><span class="csui-ellipsis-area no-ellipsis"><span><span\r\n                class="cs-field-textarea-data">'+e.escapeExpression((r=null!=(r=l(i,"desc_value")||(null!=t?l(t,"desc_value"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"desc_value","hash":{},
"loc":{"start":{"line":91,"column":47},"end":{"line":91,"column":61}}}):r))+'</span></span>\r\n              </span>\r\n            </button>\r\n          </div>\r\n          <div style="clear:both;"></div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div class="binf-col-md-4 thumbnail-container binf-hidden binf-text-left cs-content">\r\n      <div class="metadata-tab">\r\n        <div class="thumbnail_section metadata-preview preview-section"\r\n             title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"ToolbarItemOpen"):s,t))+'">\r\n          <img role="link" src="'+e.escapeExpression((r=null!=(r=l(i,"imgSrc")||(null!=t?l(t,"imgSrc"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"imgSrc","hash":{},"loc":{"start":{"line":105,"column":32},"end":{"line":105,"column":42}}}):r))+'" class="img-doc-preview binf-hidden" alt="'+e.escapeExpression((r=null!=(r=l(i,"imgAlt")||(null!=t?l(t,"imgAlt"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"imgAlt","hash":{},"loc":{"start":{"line":105,"column":85},"end":{"line":105,"column":95}}}):r))+'" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="cs-fadeout-container"></div>\r\n  <div class="cs-content-footer">\r\n    <button class="binf-btn primary-btn command-btn open-btn" type="button"\r\n            data-signature="VersionOpen">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"ToolbarItemOpen"):s,t))+'</button>\r\n    <button class="binf-btn default-btn command-btn csui-version-overview-download-btn" type="button"\r\n            data-signature="VersionDownload">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"ToolbarItemDownload"):s,t))+'</button>\r\n    <button class="binf-btn default-btn command-btn" type="button"\r\n            data-signature="VersionProperties">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"lang"):t)?l(s,"ToolbarItemProperties"):s,t))+"</button>\r\n  </div>\r\n</div>"}});return i.registerPartial("csui_widgets_version.overview_impl_version.overview",n),n}),csui.define("css!csui/widgets/version.overview/impl/version.overview",[],function(){}),csui.define("csui/widgets/version.overview/version.overview.view",["module","csui/lib/underscore","csui/lib/marionette","csui/lib/jquery","csui/utils/log","csui/utils/contexts/factories/version","csui/utils/commands/versions","csui/utils/base","csui/utils/thumbnail/thumbnail.object","csui/widgets/document.overview/document.overview.view","csui/controls/progressblocker/blocker","i18n!csui/widgets/version.overview/impl/nls/lang","hbs!csui/widgets/version.overview/impl/version.overview","css!csui/widgets/version.overview/impl/version.overview"],function(e,t,i,n,o,s,r,l,a,c,u,d,h){"use strict";return o=o(e.id),c.extend({"className":"cs-form csui-general-form cs-version-overview-wrapper","template":h,"templateHelpers":function(){var e=this.options.node.get("file_size"),i=this.getFormattedSizeValue(e),n=this.options.node.get("version_number_name"),o=c.prototype.templateHelpers.call(this);return t.extend(o,{"size_value":i,"size_full_value":e,"versionText":t.str.sformat(d.versionText,n),"versionAria":t.str.sformat(d.versionAria,n)}),o},"ui":function(){return t.extend({},c.prototype.ui,{"creadyByUser":".csui-version-overview-created-by-user","createdByPic":".csui-version-overview-created-by-pic","downloadBtn":".csui-version-overview-download-btn","locationContainer":".location-container","descriptionSection":".description_section","descriptionSectionBtn":".description_section button","descriptionField":".description_section span.cs-field-textarea-data"})},"constructor":function(e){e||(e={}),u.imbue(this),e.data||(e.data={}),e.node||(e.node=e.context.getModel(s)),this.options=e;var n=e.context&&e.context.viewStateModel;this.back_button=n&&n.hasRouted(),i.ItemView.prototype.constructor.apply(this,arguments),this.commands=r,this.isReloading=!1,this.parentNode=void 0,this.supportOriginatingView=!0,this.listenTo(this.options.node,"change:id change:version_number",t.bind(this.handleFetch,this)),this.listenTo(this.options.node.actions,"reset",t.bind(this._checkPermissions,this)),this.listenTo(this.options.node,"change:modify_date",t.bind(this._updateModifyDateAndTimeStamp,this)),this.listenTo(this.options.node,"change:description",t.bind(this._updateDescription,this)),this.listenTo(this.options.node,"delete",t.bind(this._navigateToParent,this)),this.blockActions()},"onRender":function(){this.options.node.fetched&&(this._showMetadataItemName(),this._showThumbnail(),this._addLocationView(),this._showCreatedByUserName(),this._checkPermissions())},"handleFetch":function(){this.isReloading||(this.isReloading=!0,this.thumbnailSet=!1,this.backButtonClicked=!1,this.render())},"_showMetadataItemName":function(){csui.require(["csui/widgets/metadata/impl/header/item.name/metadata.item.name.view"],t.bind(function(e){this.metadataItemNameView&&this.metadataItemNameView.destroy(),this.metadataItemNameView=new e({"model":this.options.node,"container":this.options.node.parent,"containerCollection":this.options.containerCollection,"collection":this.options.collection,"context":this.options.context,"nameSchema":{},"commands":this.commands,"originatingView":this,"showDropdownMenu":!0,"showPropertiesCommand":!0,"noMetadataNavigation":!0});var t=this.metadataItemNameView.render();i.triggerMethodOn(t,"before:show",t,this),this.ui.titleContainer.append(t.el),i.triggerMethodOn(t,"show",t,this),this._unblockActions(),this.isReloading&&(this.isReloading=!1)},this))},"_updateDescription":function(){var e=this.options.node.get("description");e?(this.ui.descriptionSectionBtn.attr("aria-label",d.description+":"+e),this.ui.descriptionField.text(e),this.ui.descriptionSection.removeClass("binf-hidden")):(this.ui.descriptionSectionBtn.removeAttr("aria-label"),this.ui.descriptionField.text(null),this.ui.descriptionSection.addClass("binf-hidden"))},"_showThumbnail":function(){if(this.isReloading||(this.thumbnail=this.options.thumbnail||new a({"node":this.options.node}),this.listenTo(this.thumbnail,"loadUrl",this._showImage),this.listenTo(this.thumbnail,"error",this._showDefaultImage),this.listenTo(this,"destroy",t.bind(this._destroyThumbnail,this))),!this.thumbnailSet){this.thumbnailSet=!0,this.thumbnail.hasOwnProperty("imgUrl")&&this.thumbnail.imgUrl?this._showImage():this.thumbnail.loadUrl()}},"_showImage":function(){this.$el.addClass("cs-version-overview-wrapper-with-thumbnail"),this.ui.thumbnailContainer.removeClass("binf-hidden"),this.trigger("thumbnail:show:image");var e=this,t=this.ui.thumbnailImg;t.attr("src",this.thumbnail.imgUrl),t.prop("tabindex","0"),t.one("load",function(i){i.target.clientHeight>=i.target.clientWidth?t.addClass("cs-form-img-vertical"):t.addClass("cs-form-img-horizontal"),t.addClass("cs-form-img-border"),t.removeClass("binf-hidden");var o=n.Event("tab:content:render");e.$el.trigger(o)})},"_addLocationView":function(){var e=this,i=function(){csui.require(["csui/controls/table/cells/parent/parent.view"],t.bind(function(t){if(e.parentContainer=e.ancestors.at(e.ancestors.length-2),e.parentContainer&&e.parentContainer.attributes){new t({"parent":e.parentContainer.attributes,"context":e.options.context,"nameEdit":!1,"iconSize":"contain","el":e.$el.find(e.ui.location),"connector":e.options.node.connector}).render()}},this))};if(this.ancestors=this.options.context.getCollection("ancestors"),!this.ancestors)return void this._hideLocationField();this.listenTo(this.ancestors,"sync",function(){i()}),this.listenTo(this.ancestors,"error",this._hideLocationField),i()},"_hideLocationField":function(){this.ui.locationContainer.addClass("binf-hidden")},"_showCreatedByUserName":function(){var e={"baseElement":this.ui.createdBy,"userId":this.options.node.get("owner_id")};this._showUserName(e)},"_checkPermissions":function(){var e={"signature":"VersionDownload","actionBtnEle":this.ui.downloadBtn},t={"signature":"VersionOpen","actionBtnEle":this.ui.openBtn};this._checkPermForSpecificAction(t),this._checkPermForSpecificAction(e)},"getFormattedSizeValue":function(e){return l.formatFriendlyFileSize(e)},"_handleClickThumbnail":function(e){e.stopImmediatePropagation(),this._executeCommand("VersionOpen")},"_navigateToParent":function(){var e=this.parentContainer.get("id")||this.options.node.get("id_expand")&&this.options.node.get("id_expand").parent_id;e&&this._setNextNodeModelFactory(e)}})}),csui.define("json!csui/widgets/error.global/error.global.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"fullpage","schema":{"type":"object","properties":{"serverError":{"title":"{{serverErrorTitle}}","description":"{{serverErrorDescription}}","type":"string"}}},"options":{}}),csui.define("json!csui/widgets/favorites/favorites.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{title}}","description":"{{description}}","kind":"tile","schema":{"type":"object","properties":{}},"actions":[{"toolItems":"csui/widgets/favorites2.table/toolbaritems","toolItemMasks":"csui/widgets/favorites2.table/toolbaritems.masks","toolbars":[{"id":"tableHeaderToolbar","title":"{{tableHeaderToolbarTitle}}","description":"{{tableHeaderToolbarDescription}}"},{"id":"inlineActionbar","title":"{{inlineActionbarTitle}}","description":"{{inlineActionbarDescription}}"}]}]}),csui.define("json!csui/widgets/myassignments/myassignments.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{title}}","description":"{{description}}","kind":"tile","schema":{"type":"object","properties":{}}}),csui.define("json!csui/widgets/placeholder/placeholder.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"tile","supportedKinds":["tile","header","fullpage"],"schema":{"type":"object","properties":{"label":{"title":"{{labelTitle}}","description":"{{labelDescription}}","type":"string"},"color":{"title":"{{foregroundColorTitle}}","description":"{{foregroundColorDescription}}","type":"string"},"bgcolor":{"title":"{{backgroundColorTitle}}","description":"{{backgroundColorDescription}}","type":"string"}}}}),csui.define("json!csui/widgets/recentlyaccessed/recentlyaccessed.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{title}}","description":"{{description}}","kind":"tile","schema":{"type":"object","properties":{}},"actions":[{"toolItems":"csui/widgets/recentlyaccessedtable/toolbaritems","toolItemMasks":"csui/widgets/recentlyaccessedtable/toolbaritems.masks","toolbars":[{"id":"tableHeaderToolbar","title":"{{tableHeaderToolbarTitle}}","description":"{{tableHeaderToolbarDescription}}"},{"id":"inlineActionbar","title":"{{inlineActionbarTitle}}","description":"{{inlineActionbarDescription}}"}]}]}),csui.define("json!csui/widgets/shortcut/shortcut.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"tile","deprecated":!0,"useInstead":"csui/widgets/shortcuts","schema":{"type":"object","properties":{"id":{"title":"{{idTitle}}","description":"{{idDescription}}","type":"integer"},"type":{"title":"{{typeTitle}}","description":"{{typeDescription}}","type":"integer","enum":[141,142,133],"default":141},"background":{"title":"{{backgroundTitle}}","description":"{{backgroundDescription}}","type":"string","enum":["cs-tile-background1","cs-tile-background2","cs-tile-background3"]},"displayName":{"title":"{{displayNameTitle}}","type":"string"}},"oneOf":[{"required":["id"]},{"required":["type"]}]},"options":{"fields":{"id":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[]}}},"type":{"type":"select","optionLabels":["{{typeEnterpriseVolume}}","{{typePersonalVolume}}","{{typeCategoryVolume}}"]},"background":{"type":"select","optionLabels":["{{backgroundGrey}}","{{backgroundGreen}}","{{backgroundOrange}}"]}}}}),csui.define("json!csui/widgets/shortcuts/shortcuts.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"tile","selfConfigurable":!0,"schema":{"type":"object","properties":{"shortcutTheme":{"title":"{{shortcutThemeTitle}}","description":"{{shortcutThemeDescription}}","type":"string","enum":["csui-shortcut-theme-stone1","csui-shortcut-theme-stone2","csui-shortcut-theme-teal1","csui-shortcut-theme-teal2","csui-shortcut-theme-pink1","csui-shortcut-theme-pink2","csui-shortcut-theme-indigo1","csui-shortcut-theme-indigo2"]},"shortcutItems":{"title":"{{shortcutItemsTitle}}","description":"{{shortcutItemsDescription}}","type":"array","minItems":1,"maxItems":4,"items":{"type":"object","properties":{"id":{"title":"{{idTitle}}","description":"{{idDescription}}","type":"integer"},"type":{"title":"{{typeTitle}}","description":"{{typeDescription}}","type":"integer","enum":[141,142,133]},"displayName":{"title":"{{displayNameTitle}}","type":"string"}},"oneOf":[{"required":["id"]},{"required":["type"]}]}}}},"options":{"fields":{"shortcutItems":{"items":{"fields":{"id":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[]}}},"type":{"type":"select","optionLabels":["{{typeEnterpriseVolume}}","{{typePersonalVolume}}","{{typeCategoryVolume}}"]}}}},"shortcutTheme":{"type":"select","optionLabels":["{{shortcutThemeStone1}}","{{shortcutThemeStone2}}","{{shortcutThemeTeal1}}","{{shortcutThemeTeal2}}","{{shortcutThemePink1}}","{{shortcutThemePink2}}","{{shortcutThemeIndigo1}}","{{shortcutThemeIndigo2}}"]}}}}),csui.define("json!csui/widgets/welcome.placeholder/welcome.placeholder.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"header","schema":{"type":"object","properties":{"message":{"title":"{{messageTitle}}","description":"{{messageDescription}}","type":"string"},"videoPoster":{"title":"{{videoPosterTitle}}","description":"{{videoPosterDescription}}","type":"string"},"videoSrc":{"title":"{{videoSourceTitle}}","description":"{{videoSourceDescription}}","type":"string"}}}}),csui.define("json!csui/widgets/html.editor/html.editor.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{title}}","description":"{{description}}","kind":"tile","supportedKinds":["tile","header","heroTile","fullpage"],"schema":{"type":"object","properties":{"titlefield":{"title":"{{titleLabel}}","description":"{{titleDesc}}","type":"string","default":""},"wikicontainerid":{"title":"{{wikiContainerID}}","description":"{{wikiContainerIDDesc}}","type":"integer"},"wikitemplateid":{"title":"{{wikiTemplateID}}","description":"{{wikiTemplateIDDesc}}","type":"integer"},"wikiid":{"title":"{{wikiContainerID}}","description":"{{wikiContainerIDDesc}}","type":"integer"},"wikipageid":{"title":"{{wikiTemplateID}}","description":"{{wikiTemplateIDDesc}}","type":"integer"}}},"options":{"fields":{"wikicontainerid":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[5573],"startLocations":["csui/dialogs/node.picker/start.locations/enterprise.volume","csui/dialogs/node.picker/start.locations/personal.volume","csui/dialogs/node.picker/start.locations/favorites","csui/dialogs/node.picker/start.locations/recent.containers","csui/dialogs/node.picker/start.locations/perspective.assets.volume"]}}},"wikitemplateid":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[5574],"startLocation":"csui/dialogs/node.picker/start.locations/perspective.assets.volume","startLocations":["csui/dialogs/node.picker/start.locations/enterprise.volume","csui/dialogs/node.picker/start.locations/personal.volume","csui/dialogs/node.picker/start.locations/favorites","csui/dialogs/node.picker/start.locations/recent.containers","csui/dialogs/node.picker/start.locations/perspective.assets.volume"]}}},"wikipageid":{"type":"otcs_node_picker","hidden":!0,"type_control":{"parameters":{"select_types":[5574]}}},"wikiid":{"type":"otcs_node_picker","hidden":!0,"type_control":{"parameters":{"select_types":[5573]}}},"width":{"type":"select","optionLabels":["{{default}}","{{full}}","{{half}}","{{quarter}}"]}}},"callback":"wiki/callbacks/wikiHookCallback"}),csui.define("json!csui/widgets/document.overview/document.overview.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"fullpage","schema":{"type":"object","properties":{"id":{"title":"{{idTitle}}","description":"{{idDescription}}","type":"integer"}},"required":["id"]},"options":{"fields":{"id":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[144]}}}}}}),csui.define("csui/widgets/favorites/impl/nls/favorites.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/favorites/impl/nls/root/favorites.manifest",{"title":"Favorites","description":"Shows favorite objects of the current user.","tableHeaderToolbarTitle":"Table Header Toolbar","tableHeaderToolbarDescription":"Toolbar, which is activated in the table header, once a table row is selected.","inlineActionbarTitle":"Inline Action Bar","inlineActionbarDescription":"Toolbar, which is displayed inside a table row, when the mouse cursor is moving above it."}),csui.define("csui/widgets/myassignments/impl/nls/myassignments.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/myassignments/impl/nls/root/myassignments.manifest",{"title":"My Assignments","description":"Shows personal assignments of the current user."}),csui.define("csui/widgets/placeholder/impl/nls/placeholder.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/placeholder/impl/nls/root/placeholder.manifest",{"widgetTitle":"Placeholder","widgetDescription":"Shows a colorful tile taking the space instead of a real widget.","labelTitle":"Label","labelDescription":"Label of the tile","foregroundColorTitle":"Foreground color","foregroundColorDescription":"Color for the label of the tile","backgroundColorTitle":"Background color","backgroundColorDescription":"Color for the background of the tile"}),csui.define("csui/widgets/recentlyaccessed/impl/nls/recentlyaccessed.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/recentlyaccessed/impl/nls/root/recentlyaccessed.manifest",{"title":"Recently Accessed","description":"Shows documents accessed recently by the current user.","tableHeaderToolbarTitle":"Table Header Toolbar","tableHeaderToolbarDescription":"Toolbar, which is activated in the table header, once a table row is selected.","inlineActionbarTitle":"Inline Action Bar","inlineActionbarDescription":"Toolbar, which is displayed inside a table row, when the mouse cursor is moving above it."}),csui.define("csui/widgets/shortcut/impl/nls/shortcut.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/shortcut/impl/nls/root/shortcut.manifest",{"widgetTitle":"Single Shortcut","widgetDescription":"Tile representing a hyperlink to an object; it navigates to its page when clicked","idTitle":"Target object","idDescription":"An object to open by this shortcut","typeTitle":"Volume","typeDescription":"Sub-type number of a global volume to open by this shortcut if no object has been selected","backgroundTitle":"Background","backgroundDescription":"Styling of the background below the shortcut tile","typeEnterpriseVolume":"Enterprise","typePersonalVolume":"Personal","typeCategoryVolume":"Categories","displayNameTitle":"Display name","backgroundGrey":"Grey","backgroundGreen":"Green","backgroundOrange":"Orange"}),csui.define("csui/widgets/welcome.placeholder/impl/nls/welcome.placeholder.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/welcome.placeholder/impl/nls/root/welcome.placeholder.manifest",{"widgetTitle":"Welcome Header","widgetDescription":"Shows a wide widget with initial information for the user home page.","messageTitle":"Display message","messageDescription":"Message to be displayed at the bottom of the tile","videoPosterTitle":"Video thumbnail","videoPosterDescription":"Web address of the poster to show when the video is not playing","videoSourceTitle":"Video location","videoSourceDescription":"Web address of the video to play"}),csui.define("csui/widgets/html.editor/impl/nls/html.editor.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/html.editor/impl/nls/root/html.editor.manifest",{"title":"HTML Tile","description":"Returns the HTML output of an object and inserts it into a tile.","widthLabel":"Width","widthDesc":"The maximum width on the largest screen-size.","default":"Default","full":"Full","half":"Half","quarter":"Quarter","titleLabel":"Title","titleDesc":"Title for the tile","objIdLabel":"Object ID","objIdDesc":"Object ID for which we have to render and allow users to edit rich text content.","wikiContainerID":"Target wiki for HTML Content (optional)","wikiTemplateID":"Template wiki page (optional)","wikiContainerIDDesc":"If not specified, a target wiki will be created automatically in perspective asset volume","wikiTemplateIDDesc":"If not specified, a target wiki template will be pointed automatically from perspective asset folder"});csui.define("csui/widgets/document.overview/impl/nls/document.overview.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/document.overview/impl/nls/root/document.overview.manifest",{"widgetTitle":"Document Overview","widgetDescription":"Shows basic information about a document and offers the most often actions for it.","idTitle":"Document","idDescription":"A document to show the overview for"}),csui.define("bundles/csui-app",["csui/behaviors/expanding/expanding.behavior","csui/behaviors/item.error/item.error.behavior","csui/behaviors/item.state/item.state.behavior","csui/behaviors/item.state/item.state.view","csui/behaviors/limiting/limiting.behavior","csui/controls/tile/behaviors/expanding.behavior","csui/controls/tile/tile.view","csui/controls/iconpreload/icon.preload.view","csui/controls/rich.text.editor/rich.text.editor","csui/controls/selected.count/selected.count.view","csui/lib/jquery.simulate","csui/lib/othelp","csui/pages/start/start.page.view","csui/widgets/navigation.header/controls/help/help.view","csui/widgets/navigation.header/controls/home/home.view","csui/widgets/navigation.header/controls/breadcrumbs/breadcrumbs.view","csui/widgets/navigation.header/controls/search/search.view","csui/widgets/navigation.header/controls/favorites/favorites.view","csui/widgets/navigation.header/controls/user.profile/user.profile.view","csui/widgets/navigation.header/controls/progressbar.maximize/progressbar.maximize.view","csui/widgets/navigation.header/navigation.header.controls","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/tabletoolbar/impl/nls/localized.strings","json!csui/utils/contexts/perspective/impl/perspectives/error.global.json","csui/widgets/error.global/error.global.view","csui/widgets/favorites/favorites.view","csui/widgets/favorites/tileview.toolbaritems","csui/widgets/myassignments/myassignments.columns","csui/widgets/myassignments/myassignments.view","csui/widgets/navigation.header/profile.menuitems","csui/widgets/navigation.header/profile.menuitems.mask","csui/widgets/placeholder/placeholder.view","csui/widgets/recentlyaccessed/recentlyaccessed.columns","csui/widgets/recentlyaccessed/recentlyaccessed.view","csui/widgets/recentlyaccessed/tileview.toolbaritems","csui/widgets/search.results.tile/search.results.tile.view","csui/widgets/search.box/search.box.view","csui/widgets/shortcut/shortcut.view","csui/widgets/shortcuts/shortcuts.view","csui/widgets/welcome.placeholder/welcome.placeholder.view","csui/widgets/html.editor/impl/cslink.preview/cslink.preview.view","csui/widgets/html.editor/html.editor.view","csui/widgets/document.overview/document.overview.view","csui/widgets/version.overview/version.overview.view","json!csui/widgets/error.global/error.global.manifest.json","json!csui/widgets/favorites/favorites.manifest.json","json!csui/widgets/myassignments/myassignments.manifest.json","json!csui/widgets/placeholder/placeholder.manifest.json","json!csui/widgets/recentlyaccessed/recentlyaccessed.manifest.json","json!csui/widgets/shortcut/shortcut.manifest.json","json!csui/widgets/shortcuts/shortcuts.manifest.json","json!csui/widgets/welcome.placeholder/welcome.placeholder.manifest.json","json!csui/widgets/html.editor/html.editor.manifest.json","json!csui/widgets/document.overview/document.overview.manifest.json","i18n!csui/widgets/favorites/impl/nls/favorites.manifest","i18n!csui/widgets/myassignments/impl/nls/myassignments.manifest","i18n!csui/widgets/placeholder/impl/nls/placeholder.manifest","i18n!csui/widgets/recentlyaccessed/impl/nls/recentlyaccessed.manifest","i18n!csui/widgets/shortcut/impl/nls/shortcut.manifest","i18n!csui/widgets/shortcuts/impl/nls/shortcuts.manifest","i18n!csui/widgets/welcome.placeholder/impl/nls/welcome.placeholder.manifest","i18n!csui/widgets/html.editor/impl/nls/html.editor.manifest","i18n!csui/widgets/document.overview/impl/nls/document.overview.manifest","i18n!csui/widgets/favorites/impl/nls/lang","i18n!csui/widgets/myassignments/impl/nls/lang","i18n!csui/widgets/recentlyaccessed/impl/nls/lang","i18n!csui/widgets/search.forms/impl/nls/lang"],{}),csui.require(["require","css"],function(e,t){t.styleLoad(e,"csui/bundles/csui-app",!0)});
//# sourceMappingURL=csui-app.js.map