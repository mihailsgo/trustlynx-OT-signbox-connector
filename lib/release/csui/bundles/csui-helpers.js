!function(){"use strict";function e(e){["csui/utils/log","csui/utils/base","csui/lib/domReady!"].forEach(function(t){e.indexOf(t)<0&&e.push(t)})}var t=window.csui||(window.csui={});!t.requirejs&&window.requirejs&&(t.requirejs=window.requirejs,t.require=window.require,t.define=window.define),t.setLanguage=function(e,n){n&&(e=e+"-"+n),"string"!=typeof e&&null!==e||(e={"locale":e}),e.locale&&(e.locale=e.locale.toLowerCase().replace("_","-")),void 0===e.rtl&&(e.rtl=t.needsRTL(e.locale)),t.require.config({"config":{"i18n":e}})},t.needsRTL=function(e){return/^(?:ar|fa|he|ur|yi)/.test(e)},t.setLastLanguage=function(){console.warn("The csui.setLanguage method has become obsolete and has no effect. If you need to remember the last chosen csui language, do it your application, please.")},t.setLogging=function(e){t.require.config({"config":{"csui/utils/log":e}})};t.onReady=function(e,n,i){var r=Array.prototype.slice.call(arguments);e instanceof Array?e.indexOf("csui/integration/v1.widgets.wrapper")<0&&e.push("csui/integration/v1.widgets.wrapper"):(e=["csui/integration/v1.widgets.wrapper"],r.unshift(e)),t.onReady2.apply(this,r)},t.onReady2=function(n,i,r){function s(){e(n),t.require(n,function(){t.ready||(t.ready=!0),i&&i.apply(this,arguments)},r)}r||"function"==typeof n&&(r=i,i=n,n=void 0),i||"function"==typeof n&&(i=n,n=void 0),n||(n=[]);var o=t.require.s.contexts._.config.config.i18n,a=o&&o.locale||navigator.languages&&navigator.languages[0]||navigator.language||"";if((a=a.toLowerCase())&&"en"!==a&&"en-us"!==a){var c=o&&o.loadableLocales||[];if(c instanceof Array||(c=Object.keys(c).map(function(e){return e.toLowerCase()})),c.indexOf(a)<0&&(a=a.split("-")[0]),c.indexOf(a)<0){var u=c.filter(function(e){return 0===e.indexOf(a+"-")});u.length&&(a=u[0])}if(c.indexOf(a)>=0)return function(){function e(){--r||s()}function n(n){var i=document.createElement("script");i.src=t.require.toUrl(n),i.setAttribute("data-csui-required","true"),i.addEventListener("load",e),i.addEventListener("error",e),document.head.appendChild(i,document.currentScript)}var i=Object.keys(t.bundleIndexes||{}).map(function(e){return e.replace("/bundles/","/bundles/nls/"+a+"/")+".js"}),r=i.length+1;i.forEach(n),e()}()}s()},t.onReady3=function(n,i,r,s){function o(e){var n,i,r,s=document.head.querySelectorAll("link,style"),o=!1,a=!1,c=/^.+\/csui\/themes\/.+\/(?:theme|theme-rtl)\.css(?:\?.*)?$/;for(n=0;n<s.length;n++)if(s[n].hasAttribute("data-csui-theme-overrides")&&(r||(r=s[n])),s[n].hasAttribute("href"))if(i=s[n].getAttribute("href"),i=i.toLowerCase(),s[n].hasAttribute("data-csui-theme-overrides")){if(window.csuiOverrideCssUrl){var u=window.csuiOverrideCssUrl.toLowerCase();u==i&&(o=!0)}}else c.test(i)&&(a=!0);if(!a){var l=t.require.s.contexts._.config.config.i18n,d="/csui/themes/carbonfiber/"+(!0===l.rtl?"theme-rtl.css":"theme.css"),f=t.require.s.contexts._.config.config["csui/utils/contexts/factories/connector"].connection,g=f.supportPath,p=/^(\w+:\/\/[^\/]+)/.exec(f.url),h=g;p&&(h=p[1]+g);var v=h+d,w=t.require.s.contexts._.config.urlArgs("csui",v);w&&w.indexOf("v=")>=0&&(v+=w);var y=document.createElement("link");y.setAttribute("rel","stylesheet"),y.setAttribute("data-csui-required","true"),y.setAttribute("href",v),!0===o?document.head.insertBefore(y,r):document.head.appendChild(y)}if(window.csuiOverrideCssUrl&&!0!==o){var b=document.createElement("link");b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("data-csui-theme-overrides","true"),b.setAttribute("data-csui-required","true"),b.setAttribute("href",window.csuiOverrideCssUrl),document.head.appendChild(b)}}function a(e){v=-1,e.length>0&&(v=e.indexOf("csui-options"))>=0&&e.splice(v,1)}function c(e){v>=0&&Array.prototype.splice.call(e,v,0,n)}function u(){e(i),a(i);var o=n.onBeforeLoadModules;o&&o(n,i),t.require(i,function(){t.ready||(t.ready=!0),c(arguments),r&&r.apply(this,arguments)},s)}function l(){--w||u()}function d(e,n,i,r){function o(e){e.configurations?e.configurations.forEach(function(e){e.config&&t.require.config({"config":e.config})}):c("Empty initial configuration detected."),e.languageBundles&&t.require.config({"bundles":e.languageBundles})}function a(){var t=u.getResponseHeader("OTCSTicket"),n=u.getResponseHeader("OTCSTicketExpires"),i=u.getResponseHeader("Date");t&&(delete e.credentials,delete e.authenticationHeaders,e.session={"ticket":t,"expires":n,"serverDate":i})}function c(e,t){console.error(e),t&&console.error(t),s&&s(new Error(e))}t.settingsData[e.url].isLoadRunning=!0,w+=2;var u=new XMLHttpRequest,l=e.url;if(!l)throw new Error("Missing connection URL.");"/"!==l[l.length-1]&&(l+="/"),l+="csui/settings?uilocale="+i,u.onreadystatechange=function(){if(this.readyState==XMLHttpRequest.DONE)if(t.settingsData[e.url].isLoadRunning=!1,200==this.status)try{var i=JSON.parse(this.responseText);o(i),a(),t.settingsData[e.url].loaded=!0,r&&r(e),n()}catch(e){c("Parsing initial settings failed.",e)}else c("Fetching initial settings failed.",l+": "+u.status+" "+u.statusText)},u.open("GET",l,!0),function(){var t;if(e.credentials&&e.credentials.username&&e.credentials.password){var n="Basic "+btoa(unescape(encodeURIComponent(e.credentials.username+":"+e.credentials.password)));u.setRequestHeader("Authorization",n),t=!0}else if(e.session&&e.session.ticket)u.setRequestHeader("OTCSTicket",e.session.ticket),t=!0;else if(e.authenticationHeaders){var i=e.authenticationHeaders;for(var r in i)i.hasOwnProperty(r)&&(u.setRequestHeader(r,i[r]),t=!0)}if(!t)throw new Error("Missing authentication data in the connection object.")}(),u.setRequestHeader("Accept","application/json"),u.send(null),n()}function f(e){t.settingsData[e.url].callbacks.forEach(function(e,t){e.callback(e.options)}),t.settingsData[e.url].callbacks=[]}function g(){var e=t.require.s.contexts._.config.config.i18n||{},n=e.locale||navigator.languages&&navigator.languages[0]||navigator.language||"en",i=e.loadableLocales||["en"];if(i instanceof Array||(i=Object.keys(i).filter(function(e){return i[e]})),n=n.toLowerCase(),i=i.map(function(e){return e.toLowerCase()}),i.indexOf(n)>=0)return n;if(n.indexOf("-")>0){if(n=n.split("-")[0],i.indexOf(n)>=0)return n;if(i.some(function(e){if(0===e.indexOf(n))return n=e,!0}))return n}return"en"}function p(e,t,n){d(e,t,g(),n),t()}function h(e){t.settingsData[e.url].loaded?u():p(e,l,function(){o(e),setTimeout(f,0,e)})}if("object"!=typeof n||null===n||Array.isArray(n)||!n.connection)throw new Error("Missing connection options.");s||"function"==typeof i&&(s=r,r=i,i=void 0),r||"function"==typeof i&&(r=i,i=void 0),i||(i=[]);var v,w=1;n.connection||(n.connection={}),function(e){t.settingsData||(t.settingsData={}),t.settingsData[e.url]||(t.settingsData[e.url]={})}(n.connection),function(e){t.settingsData[e.url].callbacks||(t.settingsData[e.url].callbacks=[]),!0===t.settingsData[e.url].isLoadRunning?t.settingsData[e.url].callbacks.push({"options":e,"callback":h}):h(e)}(n.connection)},t.getVersion=function(){return"22.2.0.7280"},t.getExtensionModules=t.printExtensionModules=function(e,n){t.require(["csui/models/server.module/server.module.collection"],function(t){var i=new t;i.fetch().done(function(){i=i.toJSON(),e?e(i):console.log(JSON.stringify(i,void 0,2))}).fail(function(e){n?n(e):console.error("Loading extension modules failed:",e)})})}}(),csui.define("helpers",function(){}),csui.define("bundles/csui-helpers",["helpers"],{});
//# sourceMappingURL=csui-helpers.js.map