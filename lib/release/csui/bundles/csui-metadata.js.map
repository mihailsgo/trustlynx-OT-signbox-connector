{"version":3,"sources":["../../src/controls/tableheader/comment/comment.button.view.js","../../src/widgets/metadata/versions.toolbaritems!csui-ext","../../src/widgets/metadata/versions.toolbaritems.js","../../src/widgets/metadata/impl/metadata.tabcontentcollection.view.js","../../src/widgets/metadata/impl/header/rightbar/toolbaritems!csui-ext","../../src/widgets/metadata/impl/header/rightbar/toolbaritems.js","../../src/widgets/metadata/impl/header/rightbar/toolbaritems.masks.js","../../src/utils/versions.default.action.items!csui-ext","../../src/utils/versions.default.action.items.js","../../src/widgets/metadata/impl/header/item.name/metadata.item.name!hbs","../../src/widgets/metadata/impl/header/dropdown.menu/dropdown.menu!hbs","../../src/widgets/metadata/impl/header/dropdown.menu/lazy.loading.template!hbs","../../src/widgets/metadata/impl/header/dropdown.menu/dropdown.menu!css","../../src/widgets/metadata/impl/header/dropdown.menu/dropdown.menu.view.js","../../src/widgets/metadata/versions.toolbaritems.mask!csui-ext","../../src/widgets/metadata/versions.toolbaritems.mask.js","../../src/widgets/metadata/header.item.name/menuitems!csui-ext","../../src/widgets/metadata/header.dropdown.menu.items.js","../../src/widgets/metadata/header.dropdown.menu.items.mask.js","../../src/widgets/metadata/impl/metadata!css","../../src/widgets/metadata/impl/header/item.name/metadata.item.name!css","../../src/widgets/metadata/impl/header/item.name/metadata.item.name.view.js","../../src/widgets/metadata/impl/header/leftbar/header.leftbar!hbs","../../src/widgets/metadata/impl/header/leftbar/header.leftbar!css","../../src/widgets/metadata/impl/header/leftbar/header.leftbar.view.js","../../src/widgets/metadata/impl/header/rightbar/header.rightbar!hbs","../../src/widgets/metadata/impl/header/rightbar/header.rightbar!css","../../src/widgets/metadata/impl/header/rightbar/header.rightbar.view.js","../../src/widgets/metadata/impl/header/metadata.header!hbs","../../src/widgets/metadata/impl/header/metadata.header!css","../../src/widgets/metadata/impl/header/metadata.header.view.js","../../src/widgets/metadata/property.panels/categories/impl/category.form.view.js","../../src/widgets/metadata/metadata.general.form.fields!csui-ext","../../src/widgets/metadata/metadata.general.form.fields.js","../../src/widgets/metadata/general.form.fields/impl/general.form.fields.view!css","../../src/widgets/metadata/general.form.fields/impl/general.form.fields.view.js","../../src/widgets/metadata/general.form.fields/general.form.field.behavior.js","../../src/widgets/metadata/metadata.general.action.fields!csui-ext","../../src/widgets/metadata/metadata.general.action.fields.js","../../src/widgets/metadata/general.action.fields/impl/general.action.fields.view.js","../../src/widgets/metadata/general.action.fields/general.action.field.behavior.js","../../src/widgets/metadata/general.panels/node/server.adaptor.mixin.js","../../src/widgets/metadata/general.panels/node/node.general.form.model.js","../../src/widgets/metadata/general.panels/document/document.general.form.model.js","../../src/widgets/metadata/general.panels/node/impl/node.general.form!hbs","../../src/widgets/metadata/general.panels/node/impl/node.general.form!css","../../src/widgets/metadata/general.panels/node/node.general.form.view.js","../../src/widgets/metadata/general.panels/document/impl/document.general.form!hbs","../../src/widgets/metadata/general.panels/document/impl/document.general.form!css","../../src/widgets/metadata/general.panels/document/document.general.form.view.js","../../src/widgets/metadata/general.panels/shortcut/shortcut.general.form.model.js","../../src/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form!hbs","../../src/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form!css","../../src/widgets/metadata/general.panels/shortcut/shortcut.general.form.view.js","../../src/widgets/metadata/general.panels/url/url.general.form.model.js","../../src/widgets/metadata/general.panels/url/impl/url.general.form!hbs","../../src/widgets/metadata/general.panels/url/impl/url.general.form!css","../../src/widgets/metadata/general.panels/url/url.general.form.view.js","../../src/widgets/metadata/metadata.general.panels!csui-ext","../../src/widgets/metadata/metadata.general.panels.js","../../src/widgets/metadata/property.panels/general/metadata.general.property.controller.js","../../src/widgets/metadata/metadata.property.panels!csui-ext","../../src/widgets/metadata/metadata.property.panels.js","../../src/widgets/metadata/impl/add.properties/add.properties.dropdown.menu!hbs","../../src/widgets/metadata/impl/add.properties/add.properties.dropdown.menu!css","../../src/widgets/metadata/impl/add.properties/add.properties.dropdown.menu.view.js","../../src/widgets/metadata/add.properties/toolbaritems!csui-ext","../../src/widgets/metadata/add.properties.menuitems.js","../../src/widgets/metadata/add.properties.menuitems.mask.js","../../src/widgets/metadata/impl/tab.contents.header/tab.contents.header!hbs","../../src/widgets/metadata/impl/tab.contents.header/tab.contents.header!css","../../src/widgets/metadata/impl/tab.contents.header/tab.contents.header.view.js","../../src/widgets/metadata/impl/metadata.properties.view.js","../../src/widgets/metadata/metadata.properties.view.js","../../src/widgets/metadata/impl/metadata.properties.content.view.js","../../src/widgets/metadata/impl/versions/metadata.versions.columns.js","../../src/widgets/metadata/impl/versions/metadata.versions!hbs","../../src/widgets/metadata/impl/versions/metadata.versions!css","../../src/widgets/metadata/impl/versions/metadata.versions.view.js","../../src/widgets/metadata/metadata.versions.view.js","../../src/widgets/metadata/impl/audit/metadata.audit.columns.js","../../src/widgets/metadata/impl/audit/metadata.audit!hbs","../../src/widgets/metadata/impl/audit/metadata.audit!css","../../src/widgets/metadata/impl/audit/metadata.audit.view.js","../../src/widgets/metadata/metadata.audit.view.js","../../src/models/compound.document/releases/releases.collection.js","../../src/widgets/metadata/impl/releases/metadata.releases.columns.js","../../src/widgets/metadata/impl/releases/toolbaritems.js","../../src/widgets/metadata/impl/releases/toolbaritems.masks.js","../../src/widgets/metadata/impl/releases/metadata.releases!hbs","../../src/widgets/metadata/impl/releases/metadata.releases!css","../../src/widgets/metadata/impl/releases/metadata.releases.view.js","../../src/widgets/metadata/metadata.releases.view.js","../../src/widgets/metadata/metadata.panels!csui-ext","../../src/widgets/metadata/metadata.panels.js","../../src/widgets/metadata/impl/metadata.dropdowntab.view.js","../../src/widgets/metadata/impl/metadata.controller.js","../../src/widgets/metadata/metadata.view.js","../../src/widgets/metadata/metadata.action.one.item.properties.view.js","../../src/widgets/metadata/impl/common/base.metadata.action.view.js","../../src/widgets/metadata/impl/add.properties/metadata.add.categories.view.js","../../src/widgets/metadata/metadata.add.categories.controller.js","../../src/widgets/metadata/metadata.add.item.controller.js","../../src/widgets/metadata/impl/metadata.navigation.list.keyboard.behavior.js","../../src/widgets/metadata/impl/metadata.navigation.list.view.js","../../src/widgets/metadata/impl/common/metadata.action.multiple.items!hbs","../../src/widgets/metadata/impl/metadata.navigation.list.behavior.js","../../src/widgets/metadata/impl/common/metadata.action.multiple.items!css","../../src/widgets/metadata/impl/common/metadata.action.multiple.items.view.js","../../src/widgets/metadata/impl/add.items/metadata.add.multiple.items.controller.js","../../src/widgets/metadata/impl/add.items/metadata.add.item.controller.js","../../src/widgets/metadata/impl/add.items/metadata.add.multiple.docs.controller.js","../../src/widgets/metadata/metadata.add.document.controller.js","../../src/widgets/metadata/impl/copy.move.items/metadata.copy.move.one.item.controller.js","../../src/widgets/metadata/impl/copy.move.items/metadata.copy.move.multiple.items.controller.js","../../src/widgets/metadata/metadata.copy.move.items.controller.js","../../src/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation!hbs","../../src/widgets/metadata/impl/metadatanavigation/impl/nls/lang.js","../../src/widgets/metadata/impl/metadatanavigation/impl/nls/root/lang.js","../../src/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation!css","../../src/widgets/metadata/impl/metadatanavigation/metadatanavigation.view.js","../../src/widgets/metadata.navigation/impl/nls/lang.js","../../src/widgets/metadata.navigation/impl/nls/root/lang.js","../../src/widgets/metadata.navigation/impl/metadata.navigation!css","../../src/widgets/metadata.navigation/metadata.navigation.view.js","../../src/widgets/metadata/metadata.save.query.controller.js","../../src/widgets/metadata/metadata.manifest.json!json","../../src/widgets/metadata.navigation/metadata.navigation.manifest.json!json","../../src/widgets/metadata/impl/nls/metadata.manifest.js","../../src/widgets/metadata/impl/nls/root/metadata.manifest.js","../../src/widgets/metadata/impl/nls/metadata.manifest!i18n","../../src/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest.js","../../src/widgets/metadata.navigation/impl/nls/root/metadata.navigation.manifest.js","../../src/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest!i18n","csui-metadata.js"],"names":["csui","define","require","_","Marionette","ViewEventsPropagationMixin","TabableRegionBehavior","CommentButtonView","View","extend","className","behaviors","behaviorClass","constructor","options","call","this","listenTo","model","render","actions","self","CommentDialogView","contentRegion","Region","el","window","s","contexts","config","roId","get","commentDialogView","connector","nodeid","CSID","context","originatingView","triggerMethod","propagateEventsToViews","show","prototype","lang","ToolItemsFactory","extraToolItems","TooItemModel","toolbarItems","tableHeaderToolbar","info","signature","name","ToolbarItemVersionInfo","iconName","ToolbarItemDocVersionPreview","commandData","ifNotOpenDelegate","ToolbarItemCopyLink","main","ToolbarItemEmailLink","ToolbarItemVersionDownload","ToolbarItemVersionDelete","ToolbarItemPromoteVersion","maxItemsShown","dropDownIconName","inlineActionbar","dropDownText","ToolbarItemMore","addGroupSeparators","dropdownMenuList","rightToolbar","ToolbarItemVersionPurgeAll","hAlign","each","moduleToolItems","toolItems","key","targetToolbar","Error","toolItem","addItem","TabContentCollectionView","base","attributes","apply","arguments","currentlyFocusedElement","event","reverseDirection","shiftKey","elToFocus","currentlyFocusedElementInternal","totalElements","keyboardBehavior","tabableElements","length","cursor","hasClass","elementCursor","isElementVisibleInParent","$el","scrollTop","offset","top","module","ToolItemMask","GlobalMenuItemsMask","ToolbarItemsMasks","globalMask","toolbars","reduce","toolbar","mask","normalize","source","extendMask","storeMask","ActionItemCollection","extraActions","openVersionContentOnly","defaultActionItems","type","sequence","add","flatten","hbs","Handlebars","t","template","1","container","depth0","helpers","partials","data","3","5","stack1","lookupProperty","parent","propertyName","Object","hasOwnProperty","hooks","helperMissing","nullContext","hash","states","size","loc","start","line","column","end","7","helper","escapeExpression","compiler","fn","program","inverse","noop","registerPartial","$","log","Backbone","commands","CommandHelper","ToolItemView","FlyoutToolItemView","NodeCollection","FilteredToolItemsCollection","DropdownMenuBehavior","PerfectScrollingBehavior","lazyloadingTemplate","GlobalMessage","id","CompositeView","getChildView","item","childViewContainer","childViewOptions","role","command","collection","findWhere","templateHelpers","hasCommands","btnId","uniqueId","showMoreTooltip","showMore","showMoreAria","str","sformat","ui","dropdownToggle","dropdownMenu","loadingIconsDiv","PerfectScrolling","contentParent","suppressScrollX","includePadding","status","nodes","containerCollection","delayedActions","toolItemsMask","reorderOnSort","defaults","addClass","result","_triggerMenuItemAction","_closeToggle","_hide","_show","_updateMenuItems","silentFetch","fetchingNonPromotedActions","refilter","onRender","fetching","binf_dropdown","find","removeClass","adjustDropdown","bind","trigger","dropdownLeftOffset","left","originatingViewLeftOffest","dropdownWidth","outerWidth","originatingViewWidth","width","margin","innerWidth","rightOffset","renderLazyActions","promise","node","lazyActionsRetrieved","isLocallyCreatedNode","isLocallyCreated","nonPromotedActionCommands","append","setEnabledLazyActionCommands","done","newCollection","lazyActions","blockingEle","animate","remove","filter","models","isDestroyed","_isDestroyed","children","undefined","currModel","reset","push","addChild","renderTextOnly","fail","request","error","showMessage","message","on","debounce","delegateEvents","blockingElement","onRenderCollection","onDestroy","undelegateEvents","off","dropdownToggleEl","toolItemView","args","targetView","showPermissionView","noMetadataNavigation","isFunction","execute","handleExecutionResults","suppressSuccessMessage","suppressFailMessage","toLowerCase","warn","console","last","dynamicMasks","_updateMask","modified","restoreMask","silent","forEach","oldExtraToolItems","addExtraToolItems","ToolbarItemInfo","ToolbarItemDocPreview","fullView","includeContainers","edit","ToolbarItemEdit","flyout","promoted","share","MenuItemShare","ToolbarItemSendTo","ToolbarItemEmailLinkShort","ToolbarItemPermissions","ToolbarItemRename","ToolbarItemDownload","ToolbarItemReserve","ToolbarItemUnreserve","ToolbarItemLock","ToolbarItemUnlock","ToolbarItemCopy","ToolbarItemMove","ToolbarItemAddVersion","ToolbarItemDelete","ToolbarCollect","MenuItemZipAndDownload","compoundDocument","CreateRelease","subItemOf","CreateRevision","Reorganize","shortcut","ToolbarItemOriginalCopyLink","ToolbarItemOriginalEdit","ToolbarItemOriginalShare","ToolbarItemOriginalReserve","ToolbarItemOriginalUnreserve","ToolbarItemOriginalCopy","ToolbarItemOriginalMove","ToolbarItemOriginalDownload","ToolbarItemOriginalDelete","NodeTypeIconView","DropdownMenuView","versionCommands","versionToolbarItems","VersionsToolbarItemsMask","dropdownMenuItems","DropdownMenuItemsMask","VersionModel","ItemNameBehavior","i18n","MetadataItemNameView","ItemView","modelHasEmptyName","readonly","placeHolderName","edit_name","edit_name_id","placeholder_text","nameAria","emptyObjectNameAria","cancel_edit_name_tooltip","cancelEditNameTooltip","save_edit_name_tooltip","saveEditNameTooltip","switch_language_tooltip","switchLanguageTooltip","show_dropdown_menu","showDropdownMenu","read_only","goBack","goBackTooltip","sidebarToggleTitle","expand","hideCancelButton","mode","mlDataEnabled","metadataLanguages","enabled","contextMenuDiv","nameEditDiv","nameInput","nameEditCancelIcon","titleError","toggleIcon","toggleWrapper","backEle","titleHeader","saveButtonInEditMode","mlGlobeIcon","modelEvents","change","events","keydown","mouseenter","mouseleave","keydown @ui.nameInput","input @ui.nameInput","click @ui.toggleIcon","click @ui.backEle","keydown @ui.toggleIcon","keydown @ui.backEle","keydown @ui.toggleWrapper","click @ui.mlGlobeIcon","keydown @ui.mlGlobeIcon","paste @ui.nameInput","ItemName","nameSchema","_nameSchema","autoSave","toggleSideBar","keyCode","toggleSideBarEvent","preventDefault","stopPropagation","setToggleIconTabIndex","attr","onChangeName","val","trim","enableAddButton","isSaveEnabled","target","value","prop","updateMLdata","refreshTabableElements","newName","saveMldata","toArray","_moveTab","currentlyFocusedElementIndex","indexOf","leftBar","parentWrapper","closest","sideBarEle","toggleClass","direction","hide","collapse","sideBarHidden","that","Event","ensureTitleLabelIcon","required","_updateName","settings","rtl","addItemPlaceHolderName","_createDropdownMenu","cid","view","_onWindowResize","getMetadataLanguageInfo","obj","set","inputBoxNameChange","disabled","value_multilingual","targetElement","_checkAndEnableOrDisableEditing","nameEle","_isEditingEnabled","title","itemTitleAria","removeAttr","_applyToggle","mdn","is","_removeToggle","_destroyDropdownMenu","focus","_toggleEditMode","validate","dropdownMenuView","cancelEventsToViewsPropagation","destroy","oView","isVersionModel","toolbarItemsMask","dropdownMenuListInProperties","showPropertiesCommand","ddm","metadataScenario","resizeTimer","clearTimeout","setTimeout","_setHideShowToggleButton","isLandscape","matchMedia","matches","isPortrait","navBar","css","display","position","mlIcon","editing","_nodeIconView","displayThumbnailIcon","triggerMethodOn","MultiLingualPopoverMixin","mixin","requiredInfoAvilable","then","multiLingualForm","binf_popover","mlOptions","parentView","validationRequired","multilingualData","_loadMultiLingualPopover","onMouseEnterName","onMouseLeaveName","onKeyDown","parents","setInputBoxValue","_validateAndSave","currentValue","getValue","inputValue","getInputBoxValue","changed","name_multilingual","setValue","sender","success","clone","prevMultilingualVal","showInlineError","clearInlineError","onKeyInView","setFocus","iName","setEditModeFocus","errorTxt","_getErrorMessageFromResponse","err","setReadOnly","setPlaceHolder","updateNameSchema","placeholder","onKeyDownGlobeIcon","keyDownOnGlobeIcon","onClickGlobeIcon","_showLanguagePopover","back_button","showBackIcon","back","click @ui.back","e","srcElement","onClickClose","TableToolbarView","ApplicationScopeModelFactory","BooleanFieldView","MetadataHeaderRightBarView","LayoutView","templateValues","show_close_icon","showCloseIcon","close_metadata_button_tooltip","closeMetadataButtonTooltip","showShortcutSwitch","shortcutNode","right_static_label","viewOriginalMessage","original","viewShortcutMessage","is_shortcut","right_label","regions","extraToolbarRegion","TabableRegion","shortcutSwitchLabel","closeIcon","click @ui.shortcutSwitchLabel","click @ui.closeIcon","toolbarItemsMasks","showExtraRightActionBar","_showExtraRightActionBar","applicationScope","getModel","removeContainer","toolbarView","tabElements","onClickShortcutSwitch","4","9","10","12","14","MetadataHeaderLeftBarView","MetadataHeaderView","show_only_required_fields_switch","showRequiredFieldsSwitch","only_required_fields_label","onlyRequiredFieldsLabel","leftbar","header","rightbar","click .metadata-header","_createMetadataHeaderLeftBarView","_createMetadataItemNameView","_createMetadataHeaderRightBarView","leftbarView","lbv","viewNode","metadataItemNameView","inv","_getNameSchema","action","rightbarView","rbv","onBeforeDestroy","requiredFieldSwitchView","onClickHeader","$elem","getNameInputBoxValue","validateName","getNameValue","setNameEditModeFocus","doRender","generalForm","first","formSchema","properties","Url","FormView","CategoryModel","_saveField","_disableItem","onRequestProcessing","propagatedView","metadataView","values","getValues","_saveChanges","changes","isDataUpdating","keys","_validate","_removeInternalProperties","_blockActions","save","processData","contentType","response","_updateMetadataToken","jqxhr","preValues","form","formField","propertyId","refresh","always","unblockActions","_unblockActions","Deferred","reject","resolve","categoryData","categoryId","stateId","categorySchema","stateSchema","stateData","debug","metadata_token","metadataTokenValue","state","categories","childrenByPropertyId","extraGeneralFormFields","MetadataGeneralFormFieldModel","Model","controller","controllerOptions","MetadataGeneralFormFieldCollection","Collection","comparator","metadataGeneralFormFields","CollectionView","fieldDescriptor","fieldDescriptors","formModel","formView","generalFormView","fetchedModels","displayedModels","layoutMode","formViewOptions","_triggerRenderForms","map","formViewId","once","without","GeneralFormFieldCollectionView","ModalAlert","Behavior","_insertFieldExtensions","_emptyExtensionRegion","getGeneralFormFieldValues","formValues","fieldRegion","currentView","roles","roleName","fieldParent","getOption","fieldViewOptions","fieldModels","pluck","fieldViews","empty","getFieldDescriptors","methodName","parameters","forms","promises","chain","fieldControllerDescriptor","Controller","method","compact","when","generalActionFields","MetadataGeneralActionFieldModel","MetadataGeneralActionFieldCollection","metadataGeneralActionFields","GeneralActionFieldCollectionView","getGeneralActionFieldValues","NodeSpriteCollection","SizeView","FormModel","NodeResourceMixin","prototypeExt","makeServerAdaptor","url","nodeId","combine","connection","parse","schema","general","omit","_addCreatorInfo","_addOwnerInfo","_addCreateDateInfo","_addModifyDateInfo","_addMimeTypeInfo","_addSizeInfo","_addItemidInfo","_ensurePlaceholder","_addReserveInfo","_addMimeTypeClassNameInfo","_addSystemAttributes","ret","sizeView","has","getValueData","formattedValue","fields","hidden","label","formFieldSizeLabel","alpacaPlaceholderNotAvailable","itemId","formFieldItemIdLabel","tooltip","create_date","format","modify_date","ownerField","isOwnerExists","owner","type_control","NoOwner","formatMemberName","create_user_id","creator","mime_type","findTypeByNode","formFieldTypeLabel","mimeTypeClassName","findClassByNode","description","desc","alpacaPlaceholderDescription","reserve_info","formFieldReservedByLabel","formdata","systemattributes","ServerAdaptorMixin","NodeGeneralFormModel","makeNodeResource","column_name","sizeVal","getReadableFileSizeString","DefaultActionBehavior","GeneralFormFieldBehavior","GeneralActionFieldBehavior","SystemAttributesModel","formTemplate","NextNodeModelFactory","defaultAction","generalFormFields","generalFormFieldDescriptors","generalActionFieldDescriptors","fieldToRefresh","union","fetch","_stopListeningToThumbnailClick","updateScrollbar","defaultActionController","getAction","noDefaultActionExist","mlDataAvailable","formTemplateHelpers","type_name","node_name","showThumbnail","showitemId","showSize","size_formatted","reserved","openDoc","showShortcutSection","aria_label","openDocAria","_getLayout","alpaca","isTextareaAutoHeight","keyAttribute","layout","bindings","_getBindings","owner_user_id","version_number_name","owner_id","field","targetField","defaultLocale","defaultLanguage","isObject","fieldView","mlDataChanged","alpacaField","mlData","isThumbnailView","thumbnailViewState","isSystemAttributeFields","_checkSystemAttributeFields","fieldsUpdated","_systemAttributesSave","_nodesave","changefield","updateRenderedForm","updateReserveFieldDisplay","_showDefaultImage","_listenToThumbnailClick","checkAndScrollElemToViewport","currentTarget","listenToOnce","async","nonReadOnlyFields","$form","updateForm","isReservedClicked","isUnreservedClicked","alpacaForm","requiredSwitch","requireSwitched","i","thumbnail","imgUrl","reserveInfoElem","defaultThumbnailEl","_thumbnailClickHandler","_handleThumbnailClick","nextNode","_closeMetadata","systemattributefields","contains","wait","patch","Thumbnail","NodeGeneralFormView","_showImage","doc_name","imgSrc","imgAlt","docPreviewAlt","loadUrl","img","thumbnailNotLoadedEl","one","evt","clientHeight","clientWidth","split","SpecificNodeModel","SyncableMixin","ShortcutGeneralFormModel","makeSyncableFromMultipleSources","_mergeSources","specificNodeModel","nodeGeneralFormModel","specProperties","generalProperties","sync","specNodeModel","nodeGeneralModel","specificModelPromise","generalModelPromise","syncFromMultipleSources","NodeModelFactory","temporary","original_id","UrlGeneralFormModel","DocumentGeneralFormModel","DocumentGeneralFormView","ShortcutGeneralFormView","UrlGeneralFormView","RulesMatchingMixin","extraGeneralPanels","MetadataGeneralPanelModel","contentModel","contentView","contentViewOptions","makeRulesMatching","MetadataGeneralPanelCollection","findByNode","matchRules","generalPanels","equals","getPropertyPanels","generalPanel","content","formOptions","_getGeneralPanel","getPropertyPanelsForCreate","deferred","getPropertyPanelsForMove","_getPropertyPanelsForMoveAndCopy","getPropertyPanelsForCopy","panel","MetadataGeneralPropertyController","extraPropertyPanels","MetadataPropertyPanelModel","MetadataPropertyPanelCollection","metadataPropertyPanels","BlockingView","addTitleTooltip","at","addNewProperties","childView","noMenuRoles","formCollection","originalFormCollection","blockingParentView","delegate","imbue","toolItemFactory","_reRender","_isRendered","_isRendering","_ensureLazyActionsRetrieved","suppressAddProperties","addNewCat","aria-haspopup","aria-label","_onClickAddButton","_executeAction","executeOptions","inheritance","addPropertiesCallback","resp","cancelled","actionsCommands","lazyActionsAreRetrieved","addPropertiesActionsAreRetrieved","isNodeLocallyCreated","nonPromotedCommands","actionsAreRetrieved","lazyActionsDisabled","getSignatures","additionalPropertiesCommands","getAdditionalActionCommands","addPropertiesToolbar","addNewCategory","PubSub","tabContentsHeaderTemplate","tagName","leftTabContentsHeader","rightTabContentsHeader","tabContentsHeaderTitle","requiredSwitchEle","requiredSwitchIcon","click @ui.requiredSwitchIcon","pubsubPostFix","requiredFieldsLabelId","objPubSubId","_changeTabTitle","_showRequiredSwitch","isRequiredCatPresent","_hideRequiredSwitch","html","requiredFieldSwitchModel","labelId","fieldvalue","curVal","onClickRequiredIconDiv","onClickWriteField","flagWriteField","hideRequiredFieldsSwitch","TabPanelView","TabLinkCollectionViewExt","TabLinksScrollMixin","CompoundDocumentsUtil","CategoryFormView","AppliedCategoryCollection","MetadataFormCollection","MetadataUtils","AddPropertiesDropdownMenuView","AddPropertiesMenuItemsMask","TabContentHeaderView","MetadataTabContentCollectionView","AppliedCategoryActionsCollection","MetadataPropertiesViewImpl","classNames","isTouchBrowser","topAlignLabel","rtlEnabled","_propertyPanels","formMode","allForms","_generalFormFieldDescriptors","_generalActionFieldDescriptors","isTabable","notTabableRegion","delete_icon","tabType","extraScrollTopOffset","delete_tooltip","removeCategoryTooltip","getContentView","TabLinkCollectionViewClass","TabContentCollectionViewClass","searchTabContentForTabableElements","tabContentAccSelectors","scrollXMarginOffset","scrollYMarginOffset","enforcedRequiredAttrsForFolders","tempNode","autoreset","newCategories","removedCategories","widths","_updateToTextAreaScrollbar","blockActions","_checkFormFetching","_syncForms","_fetchingForms","_fetchForms","_resetRequiredSwitchView","flag","overlay","onRendered","resolveHasRequiredFields","has_required_fields","tabLinks","tabContentHeader","addPropertiesView","contentHeaderRegion","_updateScrollbar","_getModelFromCollectionByTitle","isString","_getModelIndex","index","_activateTab","modelOrTitle","matchIndex","_activateTabByIndex","activeTab","findByIndex","activate","_activateSelectedPropertyTab","selectedProperty","dataFetched","fetched","singleFormModel","hasRequiredField","_createAddPropertiesView","_initializeOthers","metadataUtils","AlpacaFormOptionsSchemaHaveRequiredFields","_setTablinksAttributes","stopListening","tabContent","_onDeleteCategory","updateTitle","allFormsRendered","formRendered","childViewContent","isRenderFinished","formHtmlRegion","hideStickyHeader","_onRequiredSwitch","before","_hideNotRequiredFormFields","apv","firstVisibleTabLink","firstVisibleTab","tabModel","findByModel","isActive","_computeTablinkWidth","_enableToolbarState","objPubSubTabId","innerText","metadataHeaderView","onShow","tabLinksBar","tabLinksBarWidth","totalTablinksWidth","numTabs","$tabLink","oneTablinkWidth","totalWidthCheck1","totalWidthCheck2","onPanelActivated","validateForms","showOrHideValidationError","validationCounter","formCount","allFormsValid","_hideValidationError","_showValidationError","tab","isCurrentFormValid","getFormsValues","formFieldValues","formFieldRoles","category","catId","toString","isEmpty","removedCatId","generalTab","_addValidationErrorElement","after","validationErrorElem","hideValidationErrorMessageIconTooltip","formValidationErrorMessage","_clearValidationError","_loadPanels","_loadGeneralFormFields","_loadGeneralActionFields","panelModels","where","role_name","panelModelsLength","categoryModels","sortBy","concat","_normalizeModels","_checkCategoriesActions","showError","getPropertyPanelsFailTitle","categoryActions","urlResource","autofetch","isRemoveActionAvailable","cat","serverError","_getRespError","getCategoryActionsFailTitle","getActionsForACategoryFailMessage","gotoPreviousTooltip","gotoPreviousCategoryTooltip","gotoNextTooltip","gotoNextCategoryTooltip","_initializeToolbars","_listenToTabEvent","siblings","newWidth","widForEle","dirForEle","tabLinksEle","tabLinksEleWidth","parseInt","replace","verifyNodeAncestors","addCatAt","respModel","catModel","doAddModelProperties","additionalAddOpts","tabContentRendered","_autoScrollTabTo","animationOff","newTab","_listenToTabIdEvent","formContent","newFormView","renderEvent","tabLink","tabToDelete","categoryName","removeCategoryWarningTitle","removeCategoryWarningMessage","confirmWarning","_removeCategory","isNumber","_removeTab","fullUrl","urlBase","makeAjaxCall","removeCategoryFailMessageTitle","removeCategoryFailMessage","previousIndex","_index","previousTab","hideNotRequired","appliedToWholeForm","_hideTabLinkByRequiredSwitch","_showTabLinkByRequiredSwitch","onReorder","tabLinkViews","_views","keysSortedByIndex","sort","view1","view2","currentTabPosition","responseJSON","MessageHelper","hasMessages","toHtml","text","clear","MetadataPropertiesView","MetadataPropertiesContentView","tabOptions","childTabPanelView","_ensureViewIsIntact","mdv","TableColumnModel","idAttribute","TableColumnCollection","getColumnKeys","deepClone","align","versionColumnVersionNumberTitle","versionColumnSizeTitle","LayoutViewEventsPropagationMixin","ToolbarView","DelayedToolbarView","TableView","PaginationView","Accessibility","TableRowSelectionToolbarView","TableActionBarView","ToolbarCommandController","NodeColumnCollection","NodeVersionCollection","metadataVersionsColumns","Log","metadataLang","accessibleTable","isAccessibleTable","defaultPageSize","defaultPageSizes","showInlineActionBarOnHover","forceInlineActionBarOnClick","inlineActionBarStyle","useV2RestApi","MetadataVersionsTableView","tableRowSelectionToolbarView","tableView","childContainer","paginationView","tableRowSelectionToolbarRegion","tableRegion","paginationRegion","pageSize","ddItemsList","__super__","selectedNodes","getAllSignatures","onlyClientSideDefinedColumns","_ensureNodeAdvanceInfo","versions","commandController","_setTableView","_setTableRowSelectionToolbar","_setTableRowSelectionToolbarEventListeners","_setPagination","_updateCollection","propagateEventsToRegions","_tableRowSelectionToolbarView","errorMessage","res","errorHtml","tableColumns","columns","columnsWithSearch","orderBy","actionItems","inlineBar","viewClass","inlineBarStyle","forceInlineBarOnClick","showInlineBarOnHover","focusView","tableAria","versionTableAria","cmdOption","actionItem","cmd","toolbarCommandController","selectedChildren","defaultDDList","skipPaginationUpdateRequest","versionNode","getConnectionUrl","getApiBase","ajaxOptions","results","advanced_versioning","date","user","ConnectorFactory","AuditCollection","metadataAuditTableColumns","MemberCollection","UserView","MetadataAuditTableView","initialize","getObject","eventsSearchBoxView","searchBoxes","searchBox","eventDropDownOpts","doNotShowDropDown","tableCaptionView","accFocusedColumn","getUserSearchboxOptions","memberFilter","limit","query","displayText","highlighter","lightWeight","pickerListId","pickerListClass","getEventSearchboxOptions","auditEvents","_retrieveDisplayText","_retrieveEvents","filteredModels","focused","showHintOnFocus","dropDownOpts","lookup","afterSelect","clearOnSelect","valueChangedEventName","keywords","userSearchOptions","eventSearchOptions","columnsWithTypeaheadSearchbox","user_id","audit_name","selectColumn","haveDetailsRowExpandCollapseColumn","wfElementID","customLabels","emptyTableText","auditNoResultsPlaceholder","auditTableAria","BrowsableMixin","ConnectableMixin","FetchableMixin","BrowsableV1RequestMixin","BrowsableV2ResponseMixin","AdditionalResourcesV2Mixin","FieldsV2Mixin","ExpandableV2Mixin","StateRequestorMixin","DelayedCommandableV2Mixin","NodeChildrenColumnModel","NodeChildrenColumnCollection","NodeModel","releaseObject","release_value","created","createdBy","favorite","dateType","ReleasesColumnModel","ReleasesColumnCollection","resetColumnsV2","resetCollection","getV2Columns","getColumnModels","columnKeys","definitions","releaseObjectKeys","ReleasesModel","ReleasesCollection","makeConnectable","makeFetchable","makeBrowsableV2Response","makeAdditionalResourcesV2Mixin","makeFieldsV2","makeExpandableV2","makeStateRequestor","makeDelayedCommandableV2","titleIconInHeader","permanentColumn","noTitleInHeader","release","column_key","publicLang","onlyInTouchBrowser","inlineToolbar","other","NodeChildrenCollection","metadataReleaseTableColumns","releasesCommands","MetadataReleasesTableView","DefaultAction","_beforeExecuteCommand","_afterExecuteCommand","defaultActionCommands","getAllCommandSignatures","delayRestCommands","setEnabledDelayRestCommands","getRegion","cancelAnyExistingInlineForm","toolbarActionContext","commandSignature","_selectAllCheckboxRegion","inlineToolbarItemsMasks","releasesNoResultsPlaceholder","inlineActionBar","releasesTableAria","_showEmptyViewText","nextNodeId","childrenCollection","childNode","extraPanels","MetadataPanelModel","MetadataPanelCollection","metadataPanels","audit","releases","counter","TabLinkDropDownCollectionView","implementTabContentsDefaultKeyboardHandling","delayTabContent","tabs","_buildTabs","_nodeChanged","customProperties","executeCommand","prepend","onActivateTab","tabPane","dropdownElement","_updateTabs","_convertCollection","hasChanged","MetadataController","Events","createItem","formsValues","version","MetadataDropdownTabView","MetadataViewStateMixin","PermissionsView","MetadataView","enableViewState","isShowPermissionView","initOptionsFromMetadataInfo","doNodeFetch","viewStateModel","_isViewStateModelEnabled","ensureFetched","isMetadataNavigation","hasRouted","_addUrlParametersSupport","_backToPreviousPerspective","_navigateToParent","navigationView","unset","initialPanel","assignTo","shortcutResourceScope","getResourceScope","setResourceScope","actionsPromise","_ensureCompleteNode","refetchNodeActions","supportOriginatingView","baseOriginatingView","_saveItemName","metadataTabView","selectedTab","getViewStateDropdown","onViewStateChanged","historyEntry","__isRendered","fetchingActions","mhv","metadataRegionAria","_listenToDropdownSelection","selection","getDefaultViewStateDropdown","selected","activateDropdownTab","dropDownName","setViewStateDropdown","default","_onDropDownSelectionChanged","resultsView","itemName","shortcutOriginal","metadataController","originalNodeInCollection","contextualNode","errorMsg","failedToSaveName","_ensureCompleteVersionNode","restoreRouterOfLastApplicationScope","_setNextNodeModelFactory","parentId","origView","addUrlParameters","MetadataActionOneItemPropertiesView","metadataPropertiesView","_updateSchema","setNameFieldFocus","suppressHeaderView","extraViewClass","bNameIsValid","bFormsAreValid","validation","metadataHeaderViewModel","parent_id","description_multilingual","firstFocusCalled","DialogView","BaseMetadataActionView","baseDisplayForm","dialogOptions","okAction","OkButtonClick","_cancelAction","cancelAction","CancelButtonClick","buttons","OkButtonTitle","defaultDialogOkButtonTitle","click","CancelButtonTitle","defaultDialogCancelButtonTitle","close","actionToken","CancelButtonActionToken","dialogTitle","defaultDialogTitle","dialog","largeSize","buttonModel","footerView","button","updateButton","buttonAttributes","FormCollection","MetadataAddCategoriesView","displayForm","catName","catCollection","metadataAddItemPropView","baseUIOptions","callerProcessData","addNewCategoryDialogTitle","okButtonTitle","addNewCategoryDialogAddButtonTitle","_addCategory","error2","catData","category_id","categoryModel","addNewCategoryFailTitle","addNewCategoryFailMessage","AppliedCategoryFormModel","NodePicker","MetadataAddCategoriesController","AddNewCategory","startLocation","selectableTypes","unselectableNodes","selectMultiple","selectCategoryTitle","globalSearch","selectButtonLabel","selectCategoryButtonLabel","_loadNewCategoryForm","_displayAddCategoryForm","resp3","error3","_getCategoryModel","resp2","formType","categoryExistsMessage","allowDeleteCat","pId","inheritanceVal","categoryForm","categoryOptions","allow_delete","removeable","loadNewCategoryFailTitle","loadNewCategoryFailMessage","nodeSpriteCollection","MetadataAddItemController","getAtLeastOneNode","addableTypeName","addItemMetadataDialogTitleGeneric","addItemView","completeFormCollection","addItemMetadataDialogTitle1","addButtonTitle","addItemMetadataDialogButtonAddTitle","_addItem","cancelButtonActionToken","updateButtons","getButtons","buttonView","enable","failedToCreateItem","responseText","TabPosition","none","list","selIndex","selectedIndex","selectedElem","selectedIndexElem","_focusHeader","headerFocusable","headerElement","_focusList","getSelectedIndex","getSelectedItem","_setFocus","_headerIsInFocus","_listIsInFocus","inFocus","_checkFocusAndSetCurrentTabPosition","_setFirstAndLastFocusable","_resetFocusedListElem","_moveTo","$preElem","clickBack","selectAt","which","_selectFirst","_selectLast","_selectPrevious","_selectNext","SimpleListView","MetadataNavigationListKeyboardBehavior","nameAttribute","enableIcon","childRole","initialActivationWeight","onRenderItem","onBeforeDestroyItem","verNum","thumbnailView","image_url","show_required","enforcedRequire","enforcedRequiredAttrs","titleEl","cssClasses","validated","requiredPassedTooltip","requiredTooltip","onBeforeShow","_showChildViews","_showScrollPosition","internal","navigationRegion","initiallySelected","findIndex","setSelectedIndex","firstSelected","MetadataNavigationListView","MetadataNavigationListBehavior","jsonPath","MetadataActionMultipleItemsView","commonCategories","initialFormData","requiredFields","initiallySelectedModel","_getInitiallySelectedModel","applyFlag","_subscribeToMetadataViewEvents","setInitialCategories","onClickItem","onClickBack","_showNode","validateAndSetValuesToNode","cancelClick","JSON","stringify","getRequiredFields","resultType","nonValidateFields","nonValidateFieldsIds","nvField","match","reqFieldId","reqField","n","validateAndSetValuesToAllNode","valid","formsValid","_checkForAlpacaRequiredFields","reqArray","nullCount","arrayElement","checkNull","element","Array","childElement","iValue","iKey","onItemNameChanged","selectedItem","MetadataAddMultipleItemsController","_getCommonCategories","metadataAddItems","addItemsMetadataDialogTitle","addDocumentMetadataDialogAddButtonTitle","_addItems","allValid","extended_data","extendedData","missingRequiredMetadataForObjects","MetadataAddOneItemController","addItemsRequiredMetadata","items","openMetadata","file","tempName","utilOptions","docParentId","addableType","newFiles","grep","ContainerHasEnforcedEmptyRequiredMetadata","hasRequiredMetadata","metadataDeferred","_addOneItemWithRequiredMetadata","_addMultipleItemsWithRequiredMetadata","_makeNodeCollectionFromItems","addDocumentMetadataDialogTitle","addFolderMetadataDialogTitle","addItemMetadataDialogButtonUploadTitle","folderLen","fileLen","nodesLen","cmdStatus","addDocumentsMetadataDialogTitle","addFoldersMetadataDialogTitle","fileObject","itemObject","MetadataAddMultipleDocsController","missingRequiredMetadataForDocuments","MetadataAddDocumentController","fileUploadCollection","fileModels","fileUploadModel","cmdOptions","userAction","MetadataCopyMoveOneItemController","_CopyMoveItem","MetadataCopyMoveMultipleItemsController","_CopyMoveItems","modelValid","multilingual_provided","ActionCollection","MetadataCopyMoveItemsController","CopyMoveItemsWithMetadata","CopyMoveItemsRequiredMetadata","_copyMoveItemsWithMetadata","targetFolder","_copyMoveOneItemWithRequiredMetadata","_copyMoveMultipleItemsWithRequiredMetadata","ContainerHasEnforcedEmptyRequiredMetadataOnNodes","requiredMetadata","enforcedItems","enfItem","copyOneItemMetadataDialogTitle","copyItemsMetadataDialogButtonTitle","moveOneItemMetadataDialogTitle","moveItemsMetadataDialogButtonTitle","restructureOneItemMetadataDialogTitle","restructureItemsMetadataDialogButtonTitle","copyMultipleItemsMetadataDialogTitle","moveMultipleItemsMetadataDialogTitle","restructureMultipleItemsMetadataDialogTitle","root","en-us","en","versionsTitle","listAria","sidebarRegionAria","MetadataModelFactory","MetadataNavigationView","docPreviewRegion","getViewStateSelectedProperty","getThumbnailViewState","inMetadataNavigationView","isTabularView","largeFileSettingsModel","metadataNavigationView","isExpandedView","_getBackButtonTitle","listRole","cascadeDestroy","metadataModel","onMetadataInfoChanged","currentHistoryEntry","_currentHistoryEntry","router","goBacktoFragmentIndex","_navigationHistory","getLastHistoryEntry","getBackToTitle","getViewStateId","setViewStateId","_moveToNextItemAfterDeleteOrMove","nextIndex","currentIndex","_currentIndex","_onItemDeleted","_onItemMoved","removedNode","_modelIdChanged","setSelectedElementByModelId","metadataInfo","getItemByModelId","setSelectedElement","some","onMetadataClose","currentRouter","CONSTANTS","CURRENT_ROUTER","_restoreHistoryEntryByIndex","restoreLastRouter","_getCommonContainerId","FetchNodeFailTitle","FetchNodeFailMessage","MetadataNavWrapperAria","ChildrenCollectionFactory","Children2CollectionFactory","NodesTableView","MetadataNavigationViewImpl","LargeFileSettingsFactory","nodeExtraData","DefaultActionController","largeFileSettingsFactory","getFactory","property","_ensureCompleteData","mnv","contextCollection","deleteData","_loadingDataByMetadata","loadCollectionAfterModel","_loadCollection","ensureModelInCollection","updateMetadataInfo","setCollectionToOptions","getCollection","setFields","getModelFields","setExpand","getModelExpand","response2","_showFetchNodeFailMessage","errorObj","AddItemMetadataCommand","MetadataSaveQueryController","_checkForRequiredMetadata","containderId","deferredObject","addItemStatus","saveButtonLabel","DialogTitleSaveQuery","$schema","kind","select_types","toolItemMasks","widgetTitle","widgetDescription","idTitle","idDescription","initialPanelTitle","initialPanelDescription","dropdownMenuTitle","dropdownMenuDescription","addPropertiesTitle","addPropertiesDescription","styleLoad"],"mappings":"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","file":"csui-metadata.js","sourcesContent":["csui.define('csui/controls/tableheader/comment/comment.button.view',['require',\r\n  'csui/lib/underscore',\r\n  'csui/lib/marionette',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior'\r\n], function (require,\r\n    _,\r\n    Marionette,\r\n    ViewEventsPropagationMixin,\r\n    TabableRegionBehavior) {\r\n\r\n  var CommentButtonView = Marionette.View.extend({\r\n\r\n    className: 'csui-comment-button',\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function CommentButtonView(options) {\r\n      Marionette.View.call(this, options);\r\n      this.listenTo(this.model, 'change', this.render);\r\n      var actions = this.model.actions;\r\n      actions && this.listenTo(actions, 'update', this.render);\r\n    },\r\n\r\n    render: function () {\r\n      var self = this;\r\n      require(['esoc/widgets/utils/commentdialog/commentdialog.view'],\r\n          function (CommentDialogView) {\r\n            var contentRegion = new Marionette.Region({\r\n              el: self.el\r\n            });\r\n\r\n            var globalConfig = (typeof window.require !== \"undefined\") ?\r\n                               window.require.s.contexts._.config :\r\n                               window.csui.require.s.contexts._.config;\r\n            globalConfig.roId = self.model.get('id');\r\n\r\n            var commentDialogView = new CommentDialogView({\r\n              connector: self.model.connector,\r\n              nodeid: self.model.get('id'),\r\n              CSID: self.model.get('id'),\r\n              model: self.model,\r\n              context: self.options.context,\r\n              originatingView: self.options.originatingView\r\n            });\r\n\r\n            commentDialogView.listenTo(commentDialogView, 'before:render', function () {\r\n              self.triggerMethod('before:render', self);\r\n            });\r\n            commentDialogView.listenTo(commentDialogView, 'render', function () {\r\n              self.triggerMethod('render', self);\r\n            });\r\n\r\n            self.propagateEventsToViews(commentDialogView);\r\n            contentRegion.show(commentDialogView);\r\n          }, function () {}\r\n      );\r\n      return this;\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(CommentButtonView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return CommentButtonView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/versions.toolbaritems',['csui/lib/underscore',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/controls/toolbar/toolitem.model'\r\n], function (_, lang, ToolItemsFactory, extraToolItems, TooItemModel) {\r\n\r\n  var toolbarItems = {\r\n\r\n    tableHeaderToolbar: new ToolItemsFactory(\r\n        {\r\n          info: [\r\n            {\r\n              signature: \"VersionProperties\",\r\n              name: lang.ToolbarItemVersionInfo,\r\n              iconName: \"csui_action_properties32\"\r\n            },\r\n            {\r\n              signature: \"DocVersionPreview\",\r\n              name: lang.ToolbarItemDocVersionPreview,\r\n              commandData: {ifNotOpenDelegate: true}\r\n            },\r\n            {signature: \"CopyLink\", name: lang.ToolbarItemCopyLink}\r\n          ],\r\n          main: [\r\n            {\r\n              signature: 'EmailLink',\r\n              name: lang.ToolbarItemEmailLink\r\n            },\r\n            {\r\n              signature: \"VersionDownload\",\r\n              name: lang.ToolbarItemVersionDownload\r\n            },\r\n            {\r\n              signature: \"VersionDelete\",\r\n              name: lang.ToolbarItemVersionDelete\r\n            },\r\n            {\r\n              signature: \"PromoteVersion\",\r\n              name: lang.ToolbarItemPromoteVersion\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 10,\r\n          dropDownIconName: \"csui_action_more32\"\r\n        }),\r\n    inlineActionbar: new ToolItemsFactory(\r\n      {\r\n        info: [\r\n          {\r\n            signature: 'VersionProperties',\r\n            name: lang.ToolbarItemVersionInfo,\r\n            iconName: 'csui_action_properties32'\r\n          },\r\n          {\r\n            signature: \"DocVersionPreview\",\r\n            name: lang.ToolbarItemDocVersionPreview,\r\n            iconName: \"csui_action_preview32\",\r\n            commandData: {ifNotOpenDelegate: true}\r\n          },\r\n          {\r\n            signature: \"CopyLink\",\r\n            name: lang.ToolbarItemCopyLink,\r\n            iconName: \"csui_action_copy_link32\"\r\n          }\r\n        ],\r\n        main: [\r\n          {\r\n            signature: 'EmailLink',\r\n            name: lang.ToolbarItemEmailLink,\r\n            iconName: 'csui_action_email32'\r\n          },\r\n          {\r\n            signature: 'VersionDownload',\r\n            name: lang.ToolbarItemVersionDownload,\r\n            iconName: 'csui_action_download32',\r\n          },\r\n          {\r\n            signature: 'VersionDelete',\r\n            name: lang.ToolbarItemVersionDelete,\r\n            iconName: 'csui_action_delete32',\r\n          },\r\n          {\r\n            signature: 'PromoteVersion',\r\n            name: lang.ToolbarItemPromoteVersion,\r\n            iconName: 'csui_action_promote32',\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        maxItemsShown: 5,\r\n        dropDownText: lang.ToolbarItemMore,\r\n        dropDownIconName: 'csui_action_more32',\r\n        addGroupSeparators: false,\r\n      }\r\n    ),\r\n    dropdownMenuList: new ToolItemsFactory(\r\n      {\r\n        info: [\r\n          {\r\n            signature: \"VersionProperties\",\r\n            name: lang.ToolbarItemVersionInfo\r\n          },\r\n          {signature: \"CopyLink\", name: lang.ToolbarItemCopyLink}\r\n        ],\r\n        main: [\r\n          {\r\n            signature: 'EmailLink',\r\n            name: lang.ToolbarItemEmailLink\r\n          },\r\n          {\r\n            signature: \"VersionDownload\",\r\n            name: lang.ToolbarItemVersionDownload\r\n          },\r\n          {\r\n            signature: \"VersionDelete\",\r\n            name: lang.ToolbarItemVersionDelete\r\n          },\r\n          {\r\n            signature: \"PromoteVersion\",\r\n            name: lang.ToolbarItemPromoteVersion\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        maxItemsShown: 0, // force toolbar to immediately start with a drop-down list\r\n        dropDownIconName: \"csui_action_caret_down32\"\r\n      }\r\n    ),\r\n    rightToolbar: new ToolItemsFactory(\r\n        {\r\n          main: [\r\n            {\r\n              signature: \"PurgeAllVersions\",\r\n              name: lang.ToolbarItemVersionPurgeAll\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          hAlign: \"right\"\r\n        }\r\n    )\r\n  };\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.tabcontentcollection.view',['csui/lib/underscore', 'csui/controls/tab.panel/impl/tab.contents.view',\r\n    'csui/utils/base'\r\n], function(_, TabContentCollectionView, base) {\r\n\r\n    // This view is specific to metadata view which overrides the 'currentlyFocusedElement' function such that \r\n    // only the tab contents elements visible in the current view port of the are focused on TAB and SHIFT+TAB.\r\n\r\n    var MetadataTabContentCollectionView = TabContentCollectionView.extend({\r\n\r\n        constructor: function MetadataTabContentCollectionView(attributes, options) {\r\n            TabContentCollectionView.prototype.constructor.apply(this, arguments);\r\n            _.extend(this, {\r\n                currentlyFocusedElement: function(event) {\r\n                    var reverseDirection = event && event.shiftKey;\r\n                    var elToFocus = this.currentlyFocusedElementInternal(event);\r\n                    var totalElements = this.keyboardBehavior.tabableElements.length;\r\n                    var cursor =  (reverseDirection ? totalElements - 1 : 0);\r\n                     while(elToFocus.hasClass('binf-hidden') &&\r\n                            cursor >= 0 && cursor < totalElements) {\r\n                        event.elementCursor = cursor = cursor  + (reverseDirection ? -1 : 1);\r\n                        elToFocus = this.currentlyFocusedElementInternal(event);\r\n                    }\r\n                    //scroll to the last available element\r\n                    if(!base.isElementVisibleInParent(elToFocus, this.$el, 1, 1)){\r\n                        this.$el.scrollTop(elToFocus.offset().top);\r\n                    }\r\n                    return elToFocus;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return  MetadataTabContentCollectionView;\r\n});\n","\n","csui.define('csui/widgets/metadata/impl/header/rightbar/toolbaritems',['csui/lib/underscore', 'csui/utils/base',\r\n  'i18n!csui/controls/tabletoolbar/impl/nls/localized.strings',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  'csui/controls/toolbar/toolitem.model',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/impl/header/rightbar/toolbaritems'\r\n], function (_, base, lang, ToolItemsFactory, TooItemModel, extraToolItems) {\r\n  'use strict';\r\n  \r\n  var toolbarItems = {\r\n\r\n    rightToolbar: new ToolItemsFactory({\r\n          main: [\r\n          ]\r\n        }\r\n    )\r\n  };\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/header/rightbar/toolbaritems.masks',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask) {\r\n  'use strict';\r\n\r\n  // Keep the keys in sync with csui/widgets/search.results/toolbaritems\r\n  var toolbars = ['rightToolbar'];\r\n\r\n  function ToolbarItemsMasks() {\r\n    var config = module.config(),\r\n        globalMask = new GlobalMenuItemsMask();\r\n    // Create and populate masks for every toolbar\r\n    this.toolbars = _.reduce(toolbars, function (toolbars, toolbar) {\r\n      var mask = new ToolItemMask(globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        source = source[toolbar];\r\n        if (source) {\r\n          mask.extendMask(source);\r\n        }\r\n      });\r\n      // Enable restoring the mask to its initial state\r\n      mask.storeMask();\r\n      toolbars[toolbar] = mask;\r\n      return toolbars;\r\n    }, {});\r\n  }\r\n\r\n  ToolbarItemsMasks.toolbars = toolbars;\r\n\r\n  return ToolbarItemsMasks;\r\n\r\n});\r\n\n","\n","csui.define('csui/utils/versions.default.action.items',[\r\n  'module','csui/lib/underscore', 'csui/models/actionitems',\r\n  // Load and register external default action rules\r\n  'csui-ext!csui/utils/versions.default.action.items'\r\n], function (module, _, ActionItemCollection, extraActions) {\r\n  'use strict';\r\n\r\n  var config = _.extend({\r\n    openVersionContentOnly: false\r\n  }, module.config());\r\n\r\n  var defaultActionItems = new ActionItemCollection([\r\n    {\r\n      type: 144,\r\n      signature: config.openVersionContentOnly ? 'OpenVersionDelegate' : 'VersionOpen',\r\n      sequence: 10\r\n    }\r\n  ]);\r\n\r\n  if (extraActions) {\r\n    defaultActionItems.add(_.flatten(extraActions, true));\r\n  }\r\n\r\n  return defaultActionItems;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/item.name/metadata.item.name',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"  <div class=\\\"title-edit-icon-div\\\"></div>\\r\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"  <div class=\\\"csui-metadata-item-name-dropdown\\\"></div>\\r\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <span class=\\\"csui-multilingual-icon-label\\\">\\r\\n      <button  class=\\\"icon csui-multilingual-icon\\\">\\r\\n        \"\n    + ((stack1 = (lookupProperty(helpers,\"icon-v2\")||(depth0 && lookupProperty(depth0,\"icon-v2\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"icon-v2\",\"hash\":{\"states\":\"true\",\"size\":\"small\",\"iconName\":\"csui_action_language_switcher24\"},\"loc\":{\"start\":{\"line\":31,\"column\":8},\"end\":{\"line\":31,\"column\":91}}})) != null ? stack1 : \"\")\n    + \"\\r\\n      </button>\\r\\n   </span>\\r\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <button type=\\\"button\\\" class=\\\"csui-undo csui-edit-save inline-edit-icon\\\" disabled title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"save_edit_name_tooltip\") || (depth0 != null ? lookupProperty(depth0,\"save_edit_name_tooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"save_edit_name_tooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":36,\"column\":92},\"end\":{\"line\":36,\"column\":118}}}) : helper)))\n    + \"\\\">\\r\\n      \"\n    + ((stack1 = (lookupProperty(helpers,\"icon-v2\")||(depth0 && lookupProperty(depth0,\"icon-v2\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"icon-v2\",\"hash\":{\"states\":\"true\",\"size\":\"normal\",\"iconName\":\"csui_action_confirm32\"},\"loc\":{\"start\":{\"line\":37,\"column\":6},\"end\":{\"line\":37,\"column\":80}}})) != null ? stack1 : \"\")\n    + \"\\r\\n    </button>\\r\\n    <button type=\\\"button\\\" class=\\\"csui-undo csui-edit-cancel inline-edit-icon\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"cancel_edit_name_tooltip\") || (depth0 != null ? lookupProperty(depth0,\"cancel_edit_name_tooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"cancel_edit_name_tooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":39,\"column\":85},\"end\":{\"line\":39,\"column\":113}}}) : helper)))\n    + \"\\\">\\r\\n      \"\n    + ((stack1 = (lookupProperty(helpers,\"icon-v2\")||(depth0 && lookupProperty(depth0,\"icon-v2\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"icon-v2\",\"hash\":{\"states\":\"true\",\"size\":\"normal\",\"iconName\":\"csui_action_cancel32\"},\"loc\":{\"start\":{\"line\":40,\"column\":6},\"end\":{\"line\":40,\"column\":79}}})) != null ? stack1 : \"\")\n    + \"\\r\\n    </button>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"cs-metadata-item-name\\\">\\r\\n<span class=\\\"csui-toggle-wrapper binf-hidden\\\">\\r\\n  <span class=\\\"icon circular1 arrow_back cs-go-back binf-hidden1\\\" style=\\\"display:none;\\\"\\r\\n        aria-label=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"goBack\") || (depth0 != null ? lookupProperty(depth0,\"goBack\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"goBack\",\"hash\":{},\"loc\":{\"start\":{\"line\":4,\"column\":20},\"end\":{\"line\":4,\"column\":30}}}) : helper)))\n    + \"\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"goBack\") || (depth0 != null ? lookupProperty(depth0,\"goBack\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"goBack\",\"hash\":{},\"loc\":{\"start\":{\"line\":4,\"column\":39},\"end\":{\"line\":4,\"column\":49}}}) : helper)))\n    + \"\\\" tabindex=\\\"0\\\"></span>\\r\\n  <span class=\\\"csui-icon csui-metadata-listview csui-metadata-listview-expand-icon\\\" role=\\\"button\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"sidebarToggleTitle\") || (depth0 != null ? lookupProperty(depth0,\"sidebarToggleTitle\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"sidebarToggleTitle\",\"hash\":{},\"loc\":{\"start\":{\"line\":5,\"column\":105},\"end\":{\"line\":5,\"column\":127}}}) : helper)))\n    + \"\\\"\\r\\n        aria-label=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"sidebarToggleTitle\") || (depth0 != null ? lookupProperty(depth0,\"sidebarToggleTitle\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"sidebarToggleTitle\",\"hash\":{},\"loc\":{\"start\":{\"line\":6,\"column\":20},\"end\":{\"line\":6,\"column\":42}}}) : helper)))\n    + \"\\\" tabindex=\\\"0\\\"></span>\\r\\n</span><span class=\\\"csui-type-icon\\\"></span>\\r\\n<div role=\\\"heading\\\" aria-level=\\\"2\\\" class=\\\"title-header\\\">\\r\\n<span class=\\\"title binf-line-clamp\\\" tabindex=\\\"0\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"name\",\"hash\":{},\"loc\":{\"start\":{\"line\":9,\"column\":56},\"end\":{\"line\":9,\"column\":64}}}) : helper)))\n    + \"\\\" aria-label=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"nameAria\") || (depth0 != null ? lookupProperty(depth0,\"nameAria\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"nameAria\",\"hash\":{},\"loc\":{\"start\":{\"line\":9,\"column\":78},\"end\":{\"line\":9,\"column\":90}}}) : helper)))\n    + \"\\\" role=\\\"button\\\"\\r\\n      aria-expanded=\\\"false\\\">\\r\\n    \"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"name\",\"hash\":{},\"loc\":{\"start\":{\"line\":11,\"column\":4},\"end\":{\"line\":11,\"column\":12}}}) : helper)))\n    + \"\\r\\n</span>\\r\\n</div>\\r\\n\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"read_only\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"loc\":{\"start\":{\"line\":15,\"column\":0},\"end\":{\"line\":17,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"show_dropdown_menu\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"loc\":{\"start\":{\"line\":19,\"column\":0},\"end\":{\"line\":21,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\r\\n<div class=\\\"title-edit-div\\\">\\r\\n  <label id=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"edit_name_id\") || (depth0 != null ? lookupProperty(depth0,\"edit_name_id\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"edit_name_id\",\"hash\":{},\"loc\":{\"start\":{\"line\":24,\"column\":13},\"end\":{\"line\":24,\"column\":29}}}) : helper)))\n    + \"\\\" class=\\\"binf-hidden\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"placeholder_text\") || (depth0 != null ? lookupProperty(depth0,\"placeholder_text\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"placeholder_text\",\"hash\":{},\"loc\":{\"start\":{\"line\":24,\"column\":51},\"end\":{\"line\":24,\"column\":71}}}) : helper)))\n    + \"</label>\\r\\n  <span class=\\\"cs-icon-required category_required\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"required_tooltip\") || (depth0 != null ? lookupProperty(depth0,\"required_tooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"required_tooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":25,\"column\":58},\"end\":{\"line\":25,\"column\":78}}}) : helper)))\n    + \"\\\"></span>\\r\\n  <input type=\\\"text\\\" class=\\\"title-input\\\" placeholder=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"placeholder_text\") || (depth0 != null ? lookupProperty(depth0,\"placeholder_text\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"placeholder_text\",\"hash\":{},\"loc\":{\"start\":{\"line\":26,\"column\":54},\"end\":{\"line\":26,\"column\":74}}}) : helper)))\n    + \"\\\"\\r\\n         value=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"edit_name\") || (depth0 != null ? lookupProperty(depth0,\"edit_name\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"edit_name\",\"hash\":{},\"loc\":{\"start\":{\"line\":27,\"column\":16},\"end\":{\"line\":27,\"column\":29}}}) : helper)))\n    + \"\\\" aria-labelledby=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"edit_name_id\") || (depth0 != null ? lookupProperty(depth0,\"edit_name_id\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"edit_name_id\",\"hash\":{},\"loc\":{\"start\":{\"line\":27,\"column\":48},\"end\":{\"line\":27,\"column\":64}}}) : helper)))\n    + \"\\\" aria-required=\\\"true\\\">\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"mlDataEnabled\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"loc\":{\"start\":{\"line\":28,\"column\":2},\"end\":{\"line\":34,\"column\":9}}})) != null ? stack1 : \"\")\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hideCancelButton\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"loc\":{\"start\":{\"line\":35,\"column\":2},\"end\":{\"line\":42,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"</div>\\r\\n</div>\\r\\n<div class=\\\"title-error-div\\\">\\r\\n  <span class=\\\"title-error\\\"></span>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_item.name_metadata.item.name', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <div class=\\\"binf-dropdown\\\">\\r\\n    <button id=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"btnId\") || (depth0 != null ? lookupProperty(depth0,\"btnId\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"btnId\",\"hash\":{},\"loc\":{\"start\":{\"line\":3,\"column\":16},\"end\":{\"line\":3,\"column\":25}}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-dropdown-toggle\\\"\\r\\n            data-binf-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"\\r\\n            aria-label=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"showMoreAria\") || (depth0 != null ? lookupProperty(depth0,\"showMoreAria\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"showMoreAria\",\"hash\":{},\"loc\":{\"start\":{\"line\":5,\"column\":24},\"end\":{\"line\":5,\"column\":40}}}) : helper)))\n    + \"\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"showMoreTooltip\") || (depth0 != null ? lookupProperty(depth0,\"showMoreTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"showMoreTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":5,\"column\":49},\"end\":{\"line\":5,\"column\":68}}}) : helper)))\n    + \"\\\">\\r\\n      <span class=\\\"csui-button-icon icon-expandArrowDown\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"showMoreTooltip\") || (depth0 != null ? lookupProperty(depth0,\"showMoreTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"showMoreTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":6,\"column\":65},\"end\":{\"line\":6,\"column\":84}}}) : helper)))\n    + \"\\\"></span>\\r\\n    </button>\\r\\n    <ul class=\\\"binf-dropdown-menu\\\" role=\\\"menu\\\"></ul>\\r\\n  </div>\\r\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \"  <div class=\\\"csui-loading-parent-wrapper binf-disabled binf-hidden\\\">\\r\\n  <span class=\\\"csui-loading-dots-wrapper\\\">\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n  </span>\\r\\n  </div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hasCommands\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":18,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_dropdown.menu_dropdown.menu', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/dropdown.menu/lazy.loading.template',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<li role=\\\"none\\\" class=\\\"csui-loading-parent-wrapper binf-disabled\\\">\\r\\n  <span class=\\\"csui-loading-dots-wrapper\\\">\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n  </span>\\r\\n</li>\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_dropdown.menu_lazy.loading.template', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu.view',[\r\n  'module', \"csui/lib/jquery\", \"csui/lib/underscore\",\r\n  'csui/utils/log', \"csui/lib/backbone\", \"csui/lib/marionette\",\r\n  'csui/utils/commands', 'csui/utils/commandhelper', 'csui/controls/toolbar/toolitem.view',\r\n  'csui/controls/toolbar/flyout.toolitem.view',\r\n  'csui/models/nodes', 'csui/controls/toolbar/toolitems.filtered.model',\r\n  'hbs!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/behaviors/dropdown.menu/dropdown.menu.behavior',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'hbs!csui/widgets/metadata/impl/header/dropdown.menu/lazy.loading.template',\r\n  'csui/utils/base',\r\n  'csui/controls/globalmessage/globalmessage',\r\n  'css!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',\r\n  'csui/lib/binf/js/binf'\r\n], function (module, $, _, log, Backbone, Marionette, commands, CommandHelper, ToolItemView,\r\n  FlyoutToolItemView, NodeCollection, FilteredToolItemsCollection, template, TabableRegionBehavior,\r\n    DropdownMenuBehavior, PerfectScrollingBehavior, lang, lazyloadingTemplate, base,\r\n    GlobalMessage) {\r\n  'use strict';\r\n\r\n  log = log(module.id);\r\n\r\n  // TODO: Make common dropdown menu control to be used in both the table header and the metadata header\r\n\r\n  var DropdownMenuView = Marionette.CompositeView.extend({\r\n    className: \"cs-dropdown-menu\",\r\n    template: template,\r\n\r\n    getChildView:  function (item) {\r\n      return item.get('flyout') ? FlyoutToolItemView : ToolItemView;\r\n    },\r\n    childViewContainer: \"ul.binf-dropdown-menu\",\r\n    childViewOptions: function (model) {\r\n      return {\r\n        role: 'none',\r\n        command: this.collection.commands &&\r\n                 this.collection.commands.findWhere({signature: model.get('signature')})\r\n      };\r\n    },\r\n\r\n    templateHelpers: function () {\r\n      return {\r\n        hasCommands: !!this.collection.length,\r\n        btnId: _.uniqueId('dropdownMenuButton'),\r\n        showMoreTooltip: lang.showMore,\r\n        showMoreAria: _.str.sformat(lang.showMoreAria, this.model.get('name'))\r\n      };\r\n    },\r\n\r\n    ui: {\r\n      dropdownToggle: '.binf-dropdown-toggle',\r\n      dropdownMenu: '.binf-dropdown-menu',\r\n      loadingIconsDiv: '.csui-loading-parent-wrapper'\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior\r\n      },\r\n      DropdownMenuBehavior: {\r\n        behaviorClass: DropdownMenuBehavior\r\n      },\r\n      PerfectScrolling: {\r\n        behaviorClass: PerfectScrollingBehavior,\r\n        contentParent: '.binf-dropdown-menu',\r\n        suppressScrollX: true,\r\n        includePadding: true\r\n      }\r\n    },\r\n\r\n    constructor: function DropdownMenuView(options) {\r\n      var status = {\r\n        nodes: new NodeCollection([options.model]),\r\n        container: options.container,\r\n        containerCollection: options.containerCollection,\r\n        context: options.context\r\n      };\r\n      options.status = status;\r\n      this.commands = options.commands || commands;\r\n      options.collection = new FilteredToolItemsCollection(\r\n          options.toolItems, {\r\n            status: status,\r\n            commands: this.commands,\r\n            delayedActions: options.containerCollection &&\r\n                            options.containerCollection.delayedActions,\r\n            mask: options.toolItemsMask\r\n          });\r\n\r\n      options.reorderOnSort = true;\r\n      Marionette.CompositeView.prototype.constructor.apply(this, arguments);\r\n      _.defaults(this.options, options.toolItems.options);  // set options from ToolItemFactory\r\n\r\n      this.originatingView = options.originatingView;\r\n\r\n      // Passing the el to the ctor prevents creating an own el, including\r\n      // setting its attributes.  The caller must ensure the right tag.\r\n      if (options.el) {\r\n        $(options.el).addClass(_.result(this, \"className\"));\r\n      }\r\n\r\n      this.listenTo(this, \"childview:toolitem:action\", this._triggerMenuItemAction)\r\n          .listenTo(this.model, \"sync\", this.render)\r\n          .listenTo(Backbone, 'closeToggleAction', this._closeToggle)\r\n          .listenTo(this.model, \"change\", this.render);\r\n      if (this.model.delayedActions) {\r\n        this.listenTo(this.model.delayedActions, 'request', this._hide)\r\n            .listenTo(this.model.delayedActions, 'sync error', this._show);\r\n      }\r\n    },\r\n\r\n    _updateMenuItems: function () {\r\n      this.collection.silentFetch = true;\r\n      this.fetchingNonPromotedActions = false;\r\n      this.collection.refilter();\r\n      this.render();\r\n    },\r\n\r\n    onRender: function () {\r\n      if (this.model.delayedActions && this.model.delayedActions.fetching) {\r\n        this._hide();\r\n      }\r\n      if (!this.collection.length) {\r\n        var node                 = this.options.model ? this.options.model : this.model,\r\n            lazyActionsRetrieved = !!node && !!node.get('csuiLazyActionsRetrieved'),\r\n            isLocallyCreatedNode = !!node && !!node.isLocallyCreated;\r\n        if (!!node && !lazyActionsRetrieved && node.nonPromotedActionCommands &&\r\n            node.nonPromotedActionCommands.length && !isLocallyCreatedNode) {\r\n          this.$el.find('.binf-dropdown').addClass('binf-hidden');\r\n          this.ui.loadingIconsDiv.removeClass('binf-hidden');\r\n          this.fetchingNonPromotedActions = true;\r\n          node.setEnabledLazyActionCommands(\r\n              true).done(_.bind(function () {\r\n            this.fetchingNonPromotedActions = false;\r\n            var blockingElement = this.$el.find('.csui-loading-parent-wrapper');\r\n            blockingElement.animate(\"width: 0\", 300, _.bind(function () {\r\n              blockingElement.addClass('binf-hidden');\r\n              this.$el.find('.binf-dropdown').removeClass('binf-hidden');\r\n              //UpdateToolItems silently and re-render dropdown menu;\r\n              this._updateMenuItems();\r\n            }, this));\r\n          }, this));\r\n        }\r\n      } else {\r\n        //state variable for fetching nonpromoted actions started or not\r\n        this.fetchingNonPromotedActions = false;\r\n        this.ui.dropdownToggle.binf_dropdown();\r\n        this.ui.dropdownMenu.find(\"> li > a.binf-hidden\").removeClass('binf-hidden');\r\n        var adjustDropdown = _.bind(function () {\r\n          this.trigger(\"update:scrollbar\");\r\n          this.ui.dropdownMenu.removeClass('adjust-dropdown-menu');\r\n          var dropdownLeftOffset        = this.ui.dropdownMenu.offset().left,\r\n              originatingViewLeftOffest = this.options.originatingView.$el.offset().left,\r\n              dropdownWidth             = this.ui.dropdownMenu.outerWidth(),\r\n              originatingViewWidth      = this.options.originatingView.$el.width(),\r\n              margin                    = (window.innerWidth - originatingViewWidth) / 2,\r\n              rightOffset               = originatingViewWidth -\r\n                                          (dropdownLeftOffset + dropdownWidth - margin);\r\n          if (dropdownLeftOffset + dropdownWidth > originatingViewLeftOffest +\r\n              originatingViewWidth ||\r\n              (rightOffset + dropdownWidth > originatingViewWidth)) {\r\n            this.ui.dropdownMenu.addClass('adjust-dropdown-menu');\r\n          }\r\n        }, this);\r\n        var renderLazyActions = _.bind(function () {\r\n          var self = this;\r\n          var node                 = this.options.model ? this.options.model : this.model,\r\n              lazyActionsRetrieved = !!node && !!node.get('csuiLazyActionsRetrieved'),\r\n              isLocallyCreatedNode = !!node && !!node.isLocallyCreated,\r\n              promise;\r\n          if (!!node && !lazyActionsRetrieved && node.nonPromotedActionCommands &&\r\n              node.nonPromotedActionCommands.length && !isLocallyCreatedNode) {\r\n            this.fetchingNonPromotedActions = true;\r\n            this.ui.dropdownMenu.append(lazyloadingTemplate);\r\n\r\n            if (node.delayedActions.fetching) {\r\n              promise = node.delayedActions.fetching;\r\n            } else {\r\n              promise = node.setEnabledLazyActionCommands(true);\r\n            }\r\n            promise.done(function (node) {\r\n              self.fetchingNonPromotedActions = false;\r\n              var newCollection = new FilteredToolItemsCollection(\r\n                  self.options.toolItems, {\r\n                    status: self.options.status,\r\n                    commands: self.commands,\r\n                    delayedActions: self.options.containerCollection &&\r\n                                    self.options.containerCollection.lazyActions,\r\n                    lazyActions: self.options.containerCollection &&\r\n                                 self.options.containerCollection.lazyActions,\r\n                    mask: self.options.toolItemsMask\r\n                  });\r\n\r\n              var blockingEle = self.ui.dropdownMenu.find('.csui-loading-parent-wrapper');\r\n              //As per UX review comments, 300 ms given before rendering lazy actions\r\n              blockingEle.animate(\"width: 0\", 300, function () {\r\n                blockingEle.remove();\r\n                _.filter(newCollection.models, function (model) {\r\n                  if (self.isDestroyed === true || self._isDestroyed) {\r\n                    self.children = undefined;\r\n                  } else {\r\n                    var signature = model.get(\"signature\");\r\n                    if (!self.collection.find({signature: signature})) {\r\n                      self.collection.models.push(model);\r\n                      var lazyToolItemView = self.addChild(model, ToolItemView);\r\n                      lazyToolItemView.renderTextOnly();\r\n                    } else {  //re-render flyout toolitem view, if existing model's flyout toolitems count is different\r\n                      var currModel = self.collection.find({signature : signature});\r\n                      if(model.get('flyout') && currModel.toolItems.length !== model.toolItems.length) {\r\n                        currModel.toolItems.reset(model.toolItems.models);\r\n                      }\r\n                    }\r\n                  }\r\n                });\r\n              });\r\n\r\n            }).fail(function (request) {\r\n              self.fetchingNonPromotedActions = false;\r\n              var blockingEle = self.ui.dropdownMenu.find('.csui-loading-parent-wrapper'),\r\n                  error       = new base.Error(request);\r\n              blockingEle.length && blockingEle.remove();\r\n              GlobalMessage.showMessage('error', error.message);\r\n            });\r\n          }\r\n        }, this);\r\n        this.ui.dropdownToggle.on('binf.dropdown.after.show', adjustDropdown);\r\n        this.ui.dropdownToggle.on('binf.dropdown.before.show', renderLazyActions);\r\n        $(window).on('resize.metadata.header.dropdown.menu', _.debounce(adjustDropdown, 100));\r\n        this.delegateEvents();\r\n      }\r\n    },\r\n\r\n    onRenderCollection: function () {\r\n      if (this.collection.length && this.fetchingNonPromotedActions) {\r\n        //loading icons div appended to dropdown,\r\n        //but before fectching nonpromoted actions collection reset event trigger from dropDownMenu Behavior\r\n        // in this case we are removing loding icons div from drop down and appended again\r\n        var loadingIconsDiv = this.ui.dropdownMenu.find('.csui-loading-parent-wrapper');\r\n        loadingIconsDiv.length && loadingIconsDiv.remove();\r\n        this.ui.dropdownMenu.append(lazyloadingTemplate);\r\n      }\r\n    },\r\n\r\n    onDestroy: function () {\r\n      this.undelegateEvents();\r\n      $(window).off(\"resize.metadata.header.dropdown.menu\");\r\n    },\r\n\r\n    currentlyFocusedElement: function () {\r\n      return $(this.ui.dropdownToggle);\r\n    },\r\n\r\n    _hide: function () {\r\n      this.$el.addClass('binf-invisible');\r\n    },\r\n\r\n    _show: function () {\r\n      this.$el.removeClass('binf-invisible');\r\n    },\r\n\r\n    _closeToggle: function () {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      if (dropdownToggleEl.parent().hasClass('binf-open')) {\r\n        dropdownToggleEl.binf_dropdown('toggle');\r\n      }\r\n    },\r\n\r\n    _triggerMenuItemAction: function (toolItemView, args) {\r\n      this._closeToggle();\r\n\r\n      var toolItem = args.toolItem;\r\n      var signature = toolItem.get(\"signature\");\r\n      var command = this.commands.get(signature);\r\n      var status = {\r\n        context: this.options.context,\r\n        nodes: new NodeCollection([this.model]),\r\n        container: this.options.container,\r\n        collection: this.options.containerCollection,\r\n        originatingView: this.options.targetView ? this.options.targetView : this.originatingView,\r\n        showPermissionView: !!this.options.showPermissionView,\r\n        noMetadataNavigation: this.options.noMetadataNavigation,\r\n        toolItem: toolItem,\r\n        data: toolItem.get('commandData') || {}\r\n      };\r\n      try {\r\n        // If the command was not found and the toolitem is executable, it is a developer's mistake.\r\n        if (!command) {\r\n          throw new Error('Command \"' + signature + '\" not found.');\r\n        }else if(_.isFunction(command.execute)){\r\n          var promise = command.execute(status);\r\n          CommandHelper.handleExecutionResults(\r\n              promise, {\r\n                command: command,\r\n                suppressSuccessMessage: status.suppressSuccessMessage,\r\n                suppressFailMessage: status.suppressFailMessage\r\n              });\r\n        }else{\r\n          this.trigger(signature.toLowerCase(), this);\r\n        }\r\n      } catch (error) {\r\n        log.warn('Executing the command \"{0}\" failed.\\n{1}',\r\n        command.get('signature'), error.message) && console.warn(log.last);\r\n      }\r\n    }\r\n  });\r\n\r\n  return DropdownMenuView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/versions.toolbaritems.mask',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask',\r\n  // Load and external tool item masks\r\n  'csui-ext!csui/widgets/metadata/versions.toolbaritems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask, dynamicMasks) {\r\n  'use strict';\r\n  dynamicMasks || (dynamicMasks = []);\r\n  var VersionsToolbarItemsMask = ToolItemMask.extend({\r\n\r\n    constructor: function VersionsToolbarItemsMask(options) {\r\n      var config     = module.config(),\r\n          globalMask = new GlobalMenuItemsMask();\r\n      ToolItemMask.prototype.constructor.call(this, globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        this.extendMask(source);\r\n      }, this);\r\n      // Enable restoring the mask to its initial state\r\n      this.storeMask();\r\n      this.context = options.context;\r\n      this.node = !!options.node ? options.node : options.model;\r\n      this._updateMask();\r\n      this.listenTo(this.node, 'change:id', this._updateMask);\r\n    },\r\n    _updateMask: function () {\r\n      var modified = this.restoreMask({silent: true});\r\n      dynamicMasks.forEach(function (mask) {\r\n        mask = mask({\r\n          context: this.context,\r\n          node: this.node\r\n        });\r\n        if (mask) {\r\n          modified = this.extendMask(mask, {silent: true}) || modified;\r\n        }\r\n      }, this);\r\n      if (modified) {\r\n        this.trigger('update', this);\r\n      }\r\n    }\r\n  });\r\n\r\n  return VersionsToolbarItemsMask;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/header.dropdown.menu.items',['csui/lib/underscore',\r\n  //'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'i18n!csui/controls/tabletoolbar/impl/nls/localized.strings',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  'csui/controls/toolbar/toolitem.model',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/header.dropdown.menu.items',\r\n  // Load extra tool items from the previous module location\r\n  'csui-ext!csui/widgets/metadata/header.item.name/menuitems'\r\n], function (_, lang, ToolItemsFactory, TooItemModel, extraToolItems,\r\n    oldExtraToolItems) {\r\n  'use strict';\r\n\r\n  var toolbarItems = {\r\n    dropdownMenuList: new ToolItemsFactory({\r\n\r\n      info: [\r\n        {\r\n          signature: \"Properties\",\r\n          name: lang.ToolbarItemInfo\r\n        },\r\n        {\r\n          signature: \"DocPreview\",\r\n          name: lang.ToolbarItemDocPreview,\r\n          commandData: {\r\n            ifNotOpenDelegate: true,\r\n            fullView: true,\r\n            includeContainers: false\r\n          }\r\n        },\r\n        {\r\n          signature: \"CopyLink\",\r\n          name: lang.ToolbarItemCopyLink\r\n        }\r\n      ],\r\n      edit: [\r\n        {signature: \"Edit\", name: lang.ToolbarItemEdit, flyout: \"edit\", promoted: true},\r\n        {signature: \"EditActiveX\", name: \"EditActiveX\", flyout: \"edit\"},\r\n        {signature: \"EditOfficeOnline\", name: \"EditOfficeOnline\", flyout: \"edit\"},\r\n        {signature: \"EditWebDAV\", name: \"EditWebDAV\", flyout: \"edit\"}\r\n      ],\r\n      share: [\r\n        {\r\n          signature: 'Share',\r\n          name: lang.MenuItemShare,\r\n          flyout: 'share'\r\n        }\r\n      ],\r\n          main: [\r\n            {signature: \"SendTo\", name: lang.ToolbarItemSendTo, flyout: 'sendto'},\r\n            {signature: \"EmailLink\", name: lang.ToolbarItemEmailLinkShort, flyout: 'sendto'},\r\n            {signature: \"permissions\", name: lang.ToolbarItemPermissions},\r\n            {signature: \"Rename\", name: lang.ToolbarItemRename},\r\n            {signature: \"Download\", name: lang.ToolbarItemDownload},\r\n            {signature: \"ReserveDoc\", name: lang.ToolbarItemReserve},\r\n            {signature: \"UnreserveDoc\", name: lang.ToolbarItemUnreserve},\r\n            {signature: \"Lock\", name: lang.ToolbarItemLock},\r\n            {signature: \"Unlock\", name: lang.ToolbarItemUnlock},\r\n            {signature: \"Copy\", name: lang.ToolbarItemCopy},\r\n            {signature: \"Move\", name: lang.ToolbarItemMove},\r\n            {signature: \"AddVersion\", name: lang.ToolbarItemAddVersion},\r\n            {signature: \"Delete\", name: lang.ToolbarItemDelete},\r\n            {signature: \"Collect\", name: lang.ToolbarCollect},\r\n            {signature: \"ZipAndDownload\", name: lang.MenuItemZipAndDownload},\r\n            {\r\n              signature: \"CompoundDocument\",\r\n              name: lang.compoundDocument,\r\n              flyout: \"CompoundDocument\"\r\n            },\r\n            {\r\n              signature: \"CreateRelease\",\r\n              name: lang.CreateRelease,\r\n              subItemOf: \"CompoundDocument\",\r\n              flyout: \"CompoundDocument\"\r\n            },\r\n            {\r\n              signature: \"CreateRevision\",\r\n              name: lang.CreateRevision,\r\n              subItemOf: \"CompoundDocument\",\r\n              flyout: \"CompoundDocument\"\r\n            },\r\n            {\r\n              signature: \"Reorganize\",\r\n              name: lang.Reorganize,\r\n              subItemOf: \"CompoundDocument\",\r\n              flyout: \"CompoundDocument\"\r\n            }\r\n          ],\r\n          shortcut: [\r\n            {signature: \"OriginalCopyLink\", name: lang.ToolbarItemOriginalCopyLink},\r\n            {signature: \"OriginalEdit\", name: lang.ToolbarItemOriginalEdit},\r\n            {signature: \"OriginalEmailLink\", name: lang.ToolbarItemOriginalShare},\r\n            {signature: \"OriginalReserveDoc\", name: lang.ToolbarItemOriginalReserve},\r\n            {signature: \"OriginalUnreserveDoc\", name: lang.ToolbarItemOriginalUnreserve},\r\n            {signature: \"OriginalCopy\", name: lang.ToolbarItemOriginalCopy},\r\n            {signature: \"OriginalMove\", name: lang.ToolbarItemOriginalMove},\r\n            {signature: \"OriginalAddVersion\", name: lang.ToolbarItemAddVersion},\r\n            {signature: \"OriginalDownload\", name: lang.ToolbarItemOriginalDownload},\r\n            {signature: \"OriginalDelete\", name: lang.ToolbarItemOriginalDelete}\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 0, // force toolbar to immediately start with a drop-down list\r\n          dropDownIconName: \"csui_action_caret_down32\"\r\n        }\r\n    )\r\n  };\r\n\r\n  if (oldExtraToolItems) {\r\n    // TODO: Issue deprecation warning\r\n    addExtraToolItems(oldExtraToolItems);\r\n  }\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/header.dropdown.menu.items.mask',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask) {\r\n  'use strict';\r\n\r\n  var DropdownMenuItemsMask = ToolItemMask.extend({\r\n\r\n    constructor: function DropdownMenuItemsMask() {\r\n      var config = module.config(),\r\n          globalMask = new GlobalMenuItemsMask();\r\n      ToolItemMask.prototype.constructor.call(this, globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        this.extendMask(source);\r\n      }, this);\r\n      // Enable restoring the mask to its initial state\r\n      this.storeMask();\r\n    }\r\n\r\n  });\r\n\r\n  return DropdownMenuItemsMask;\r\n\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/impl/metadata',[],function(){});\n","\ncsui.define('css!csui/widgets/metadata/impl/header/item.name/metadata.item.name',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/item.name/metadata.item.name.view',['require', 'csui/lib/jquery', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/lib/marionette', 'csui/controls/node-type.icon/node-type.icon.view', 'csui/utils/base',\r\n  'hbs!csui/widgets/metadata/impl/header/item.name/metadata.item.name',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu.view',\r\n  'csui/utils/commands/versions',\r\n  'csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/widgets/metadata/versions.toolbaritems.mask',\r\n  'csui/widgets/metadata/header.dropdown.menu.items',\r\n  'csui/widgets/metadata/header.dropdown.menu.items.mask',\r\n  'csui/models/version', 'csui/behaviors/item.name/item.name.behavior',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'i18n', 'css!csui/widgets/metadata/impl/metadata',\r\n  'css!csui/widgets/metadata/impl/header/item.name/metadata.item.name'\r\n], function (require, $, _, Backbone, Marionette, NodeTypeIconView, base, template, lang,\r\n    DropdownMenuView, versionCommands, versionToolbarItems, VersionsToolbarItemsMask,\r\n    dropdownMenuItems, DropdownMenuItemsMask, VersionModel,\r\n    ItemNameBehavior, TabableRegionBehavior, ViewEventsPropagationMixin, i18n) {\r\n  'use strict';\r\n\r\n  var MetadataItemNameView = Marionette.ItemView.extend({\r\n\r\n        className: 'cs-metadata-item-name-container',\r\n        template: template,\r\n\r\n        templateHelpers: function () {\r\n          return {\r\n            name: this.modelHasEmptyName ? (this.readonly ? this.placeHolderName : '') :\r\n                  this.options.model.get(\"name\"),\r\n            edit_name: this.modelHasEmptyName ? '' : this.options.model.get(\"name\"),\r\n            edit_name_id: _.uniqueId('cs-metadata-edit-name'),\r\n            placeholder_text: this.placeHolderName,\r\n            nameAria: this.options.model.get(\"name\") || lang.emptyObjectNameAria,\r\n            cancel_edit_name_tooltip: lang.cancelEditNameTooltip,\r\n            save_edit_name_tooltip: lang.saveEditNameTooltip,\r\n            switch_language_tooltip: lang.switchLanguageTooltip,\r\n            show_dropdown_menu: this.options.showDropdownMenu ? true : false,\r\n            read_only: this.readonly,\r\n            goBack: lang.goBackTooltip,\r\n            sidebarToggleTitle: lang.expand,\r\n            hideCancelButton: this.options.mode && this.options.mode === 'create',\r\n            mlDataEnabled: this.metadataLanguages.enabled\r\n          };\r\n        },\r\n\r\n        ui: {\r\n          // note: if you change the template or this mapping, be sure not to break the behavior code\r\n          name: '.title',\r\n          contextMenuDiv: '.csui-metadata-item-name-dropdown',\r\n          nameEditDiv: '.title-edit-div',\r\n          nameInput: '.title-input',\r\n          nameEditCancelIcon: '.csui-edit-cancel',\r\n          titleError: '.title-error',\r\n          toggleIcon: '.csui-metadata-listview',\r\n          toggleWrapper: '.csui-toggle-wrapper',\r\n          backEle: '.arrow_back',\r\n          titleHeader: '.title-header',\r\n          saveButtonInEditMode: '.csui-edit-save',\r\n          mlGlobeIcon: '.csui-multilingual-icon'\r\n        },\r\n\r\n        modelEvents: {\r\n          'change': 'render'\r\n        },\r\n\r\n        events: {\r\n          'keydown': 'onKeyInView',\r\n          'mouseenter': 'onMouseEnterName',\r\n          'mouseleave': 'onMouseLeaveName',\r\n          'keydown @ui.nameInput': 'onKeyDown',\r\n          'input @ui.nameInput': 'onChangeName',\r\n          'click @ui.toggleIcon': 'toggleSideBar',\r\n          'click @ui.backEle': 'goBack',\r\n          'keydown @ui.toggleIcon': 'toggleSideBar',\r\n          'keydown @ui.backEle': 'goBack',\r\n          'keydown @ui.toggleWrapper': '_onKeyInView',\r\n          'click @ui.mlGlobeIcon': 'onClickGlobeIcon',\r\n          'keydown @ui.mlGlobeIcon': 'onKeyDownGlobeIcon',\r\n          'paste @ui.nameInput': 'onKeyDown'\r\n        },\r\n\r\n        behaviors: function () {\r\n          return {\r\n            ItemName: {\r\n              behaviorClass: ItemNameBehavior,\r\n              nameSchema: this._nameSchema,\r\n              mode: this.options.mode,\r\n              autoSave: this.options.autoSave\r\n            }\r\n          };\r\n        },\r\n\r\n        toggleSideBar: function (event) {\r\n          if (!!event && (event.keyCode === 13 || event.keyCode === 32 || event.type === 'click')) {\r\n            this.toggleSideBarEvent();\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n          }\r\n        },\r\n        //Calling this method from MetadataPropertiesView to set tabindex\r\n        setToggleIconTabIndex: function () {\r\n          this.ui.toggleIcon.attr('tabindex', 0);\r\n        },\r\n\r\n        onChangeName: function (event) {\r\n          if (this.ui.saveButtonInEditMode.length) {\r\n            var currentInputElementVal = this.ui.nameInput.val().trim();\r\n            this.enableAddButton = false;\r\n            // check the name field.\r\n            this.enableAddButton = this.isSaveEnabled(event.target.value);\r\n            this.ui.saveButtonInEditMode.prop('disabled', !this.enableAddButton);\r\n            _.isFunction(this.updateMLdata) && this.updateMLdata(event);\r\n          }\r\n          this.refreshTabableElements();\r\n        },\r\n\r\n        isSaveEnabled: function (newName) {\r\n          newName = newName.trim();\r\n          if (!newName.length || (newName === this.model.get('name') && !this.saveMldata)) {\r\n            return false;\r\n          } else {\r\n            return true;\r\n          }\r\n        },\r\n\r\n        refreshTabableElements: function () {\r\n          this.tabableElements = this.$el.find('input:not([disabled]),  button:not([disabled])').filter(\r\n              ':visible').toArray();\r\n        },\r\n\r\n        _moveTab: function (event) {\r\n          this.currentlyFocusedElementIndex = this.tabableElements.indexOf(event.target);\r\n          if (event.shiftKey) {\r\n            if (this.currentlyFocusedElementIndex > 0) {\r\n              this.currentlyFocusedElementIndex -= 1;\r\n              $(this.tabableElements[this.currentlyFocusedElementIndex]).trigger('focus');\r\n            } else {\r\n              this.currentlyFocusedElementIndex = this.tabableElements.length - 1;\r\n              $(this.tabableElements[this.currentlyFocusedElementIndex]).trigger('focus');\r\n            }\r\n          } else {\r\n            if (this.currentlyFocusedElementIndex < this.tabableElements.length - 1) {\r\n              this.currentlyFocusedElementIndex += 1;\r\n              $(this.tabableElements[this.currentlyFocusedElementIndex]).trigger('focus');\r\n            } else {\r\n              this.currentlyFocusedElementIndex = 0;\r\n              $(this.tabableElements[this.currentlyFocusedElementIndex]).trigger('focus');\r\n            }\r\n          }\r\n          event.stopPropagation();\r\n          event.preventDefault();\r\n        },\r\n\r\n        toggleSideBarEvent: function () {\r\n          if (this.leftBar && this.leftBar.length > 0) {\r\n            var parentWrapper = this.leftBar.closest(\".metadata-navigation\");\r\n            if (!!parentWrapper) {\r\n              if (parentWrapper.length > 0) {\r\n                var sideBarEle = this.leftBar;\r\n                if (sideBarEle.length > 0) {\r\n                  if (parentWrapper.hasClass('csui-hide-side-bar')) {\r\n                    parentWrapper.toggleClass(\"csui-hide-side-bar\");\r\n                    $(sideBarEle).show('blind', {direction: this.direction}, '200', function () {\r\n                      $(window).trigger(\"resize.tableview\");\r\n                    });\r\n                    $(this.ui.backEle).hide();\r\n                    $(this.ui.toggleIcon).attr('title', lang.collapse).attr('aria-label',\r\n                        lang.collapse);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-collapse-icon').removeClass(\r\n                        'csui-metadata-listview-expand-icon');\r\n                    this.sideBarHidden = false;\r\n                  } else {\r\n                    var that = this;\r\n                    $(sideBarEle).hide('blind', {direction: this.direction}, '200', function () {\r\n                      parentWrapper.toggleClass(\"csui-hide-side-bar\");\r\n                      $(window).trigger(\"resize.tableview\");\r\n                    });\r\n                    $(that.ui.backEle).show().trigger('focus');\r\n                    this.sideBarHidden = true;\r\n                    $(this.ui.toggleIcon).attr('title', lang.expand).attr('aria-label',\r\n                        lang.expand);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-expand-icon').removeClass(\r\n                        'csui-metadata-listview-collapse-icon');\r\n                  }\r\n                  $(sideBarEle).promise().done(function () {\r\n                    var event = $.Event('toggled:navigationbar');\r\n                    this.closest('.metadata-navigation').find('.cs-metadata').trigger(event);\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        // adapt the sidebar toggle button\r\n        ensureTitleLabelIcon: function () {\r\n          if (this.leftBar && this.leftBar.length > 0) {\r\n            var parentWrapper = this.leftBar.closest(\".metadata-navigation\");\r\n            if (!!parentWrapper) {\r\n              if (parentWrapper.length > 0) {\r\n                var sideBarEle = this.leftBar;\r\n                if (sideBarEle.length > 0) {\r\n                  if (parentWrapper.hasClass('csui-hide-side-bar')) {\r\n                    $(this.ui.toggleIcon).attr('title', lang.expand).attr('aria-label',\r\n                        lang.expand);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-expand-icon').removeClass(\r\n                        'csui-metadata-listview-collapse-icon');\r\n                  } else {\r\n                    $(this.ui.toggleIcon).attr('title', lang.collapse).attr('aria-label',\r\n                        lang.collapse);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-collapse-icon').removeClass(\r\n                        'csui-metadata-listview-expand-icon');\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        constructor: function MetadataItemNameView(options) {\r\n          options || (options = {});\r\n          this._nameSchema = _.extend({\r\n            required: true,\r\n            readonly: false\r\n          }, options.nameSchema);\r\n          var autoSave = false;\r\n          if (options.mode === 'create') {\r\n            autoSave = true;\r\n          }\r\n          options.autoSave = autoSave;\r\n\r\n          // be the first listener, before the ones of the behavior, so behavior listeners already\r\n          // see updated ui elements\r\n          this.listenTo(options.model, \"change:name\", this._updateName);\r\n\r\n          this.direction = !!i18n.settings.rtl ? 'right' : 'left';\r\n\r\n          Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n          this.readonly = this._nameSchema.readonly;\r\n          this.placeHolderName = lang.addItemPlaceHolderName;\r\n          var name = this.model.get(\"name\");\r\n          this.modelHasEmptyName = name ? false : true;\r\n          // create dropdown menu\r\n          this.options.showDropdownMenu && this._createDropdownMenu();\r\n\r\n          $(window).on('resize.' + this.cid, {view: this}, this._onWindowResize);\r\n\r\n          var self = this;\r\n          this.metadataLanguages = base.getMetadataLanguageInfo();\r\n          this.saveMldata = '';\r\n          this.listenTo(this, \"ml:value:updated\", function (obj) {\r\n            // to enable save button if any value updated in popup\r\n            self.saveMldata = obj;\r\n            self.enableAddButton = true;\r\n            self.ui.saveButtonInEditMode.prop('disabled', !self.enableAddButton);\r\n            if (self.model.get(\"id\") === undefined) {\r\n              self.model.set(\"name\", obj.value, {\r\n                silent: true,\r\n              });\r\n              this.inputBoxNameChange = true;\r\n              this.ui.nameInput.removeClass('csui-empty-with-placeholder');\r\n              this.trigger(\"update:button\", {disabled: false});\r\n            }\r\n            self.model.set(\"name_multilingual\", obj.value_multilingual, {\r\n              silent: true,\r\n            });\r\n            self.targetElement.val(obj.value);\r\n            self.refreshTabableElements();\r\n          });\r\n\r\n          // make a check for editing when there's a change in the actions.\r\n          this.listenTo(this.model.actions, 'reset update', function () {\r\n            this._checkAndEnableOrDisableEditing();\r\n          });\r\n        },\r\n\r\n        goBack: function (event) {\r\n          if (event.keyCode === 13 || event.keyCode === 32 || event.type === 'click') {\r\n            this.options.originatingView.triggerMethod('metadata:close');\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n          }\r\n        },\r\n\r\n        _checkAndEnableOrDisableEditing: function () {\r\n          var nameEle = $(this.ui.name);\r\n          if(nameEle.length && this.ItemNameBehavior._isEditingEnabled()) {\r\n            var title = _.str.sformat(lang.itemTitleAria, this.model.get('name'));\r\n            nameEle.attr('aria-label', title);\r\n            nameEle.attr('title', title);\r\n            nameEle.attr('tabindex', 0);\r\n            nameEle.removeClass('csui-disabled');\r\n          } else {\r\n            nameEle.removeAttr('aria-label');\r\n            nameEle.removeAttr('title');\r\n            nameEle.removeAttr('tabindex');\r\n            nameEle.addClass('csui-disabled');\r\n          }\r\n        },\r\n\r\n        _applyToggle: function () {\r\n          if (!!this.sideBarHidden) {} else {\r\n            this.ui.toggleWrapper instanceof Object &&\r\n            this.ui.toggleWrapper.removeClass('binf-hidden');\r\n            this.$el.addClass(\"csui-metadata-header-with-toggle\");\r\n            if (this.options.originatingView && !!this.options.originatingView.mdn &&\r\n                !!this.options.originatingView.mdn.$el.is(\":visible\")) {\r\n              if (this.ui.backEle instanceof Object) {\r\n                this.ui.backEle.hide();\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        _removeToggle: function () {\r\n          if (this.ui.toggleWrapper instanceof Object) {\r\n            this.ui.toggleWrapper.addClass('binf-hidden');\r\n            this.$el.removeClass(\"csui-metadata-header-with-toggle\");\r\n          }\r\n          if (!!this.sideBarHidden) {\r\n            this.toggleSideBarEvent();\r\n          }\r\n        },\r\n\r\n        onDestroy: function () {\r\n          this._destroyDropdownMenu();\r\n          $(window).off('resize.' + this.cid).off('resize.tableview.' + this.cid);\r\n        },\r\n\r\n        _updateName: function () {\r\n          var name = this.model.get(\"name\");\r\n          this.modelHasEmptyName = name ? false : true;\r\n          this.render();\r\n          var focus = $(this.ui.nameInput).is(\":focus\");\r\n          this._toggleEditMode(focus || this.modelHasEmptyName || false, false);\r\n          this.validate();\r\n        },\r\n\r\n        _destroyDropdownMenu: function () {\r\n          if (this.dropdownMenuView) {\r\n            this.cancelEventsToViewsPropagation(this.dropdownMenuView);\r\n            this.dropdownMenuView.destroy();\r\n          }\r\n        },\r\n\r\n        _createDropdownMenu: function () {\r\n          var oView = this.options.originatingView;\r\n          var isVersionModel = this.options.model instanceof VersionModel;\r\n          // TODO: Pass toolItems to the constructor of this component instead\r\n          // of sniffing some other ones.\r\n          var toolItems,\r\n              toolItemsMask = this.options.toolbarItemsMask;\r\n          if (oView && oView.options && oView.options.toolbarItems &&\r\n              oView.options.toolbarItems.dropdownMenuListInProperties) {\r\n            toolItems = oView.options.toolbarItems.dropdownMenuListInProperties;\r\n          } else {\r\n            if (isVersionModel) {\r\n              toolItems = versionToolbarItems.dropdownMenuList;\r\n            } else {\r\n              toolItems = dropdownMenuItems.dropdownMenuList;\r\n            }\r\n          }\r\n          if (!toolItemsMask) {\r\n            if (isVersionModel) {\r\n              toolItemsMask = new VersionsToolbarItemsMask(this.options);\r\n            } else {\r\n              toolItemsMask = new DropdownMenuItemsMask();\r\n            }\r\n          }\r\n          if (this.options.showPermissionView) {\r\n            toolItems = toolItems.collection.filter(\r\n                function (command) {\r\n                  return (command.get(\"signature\") != \"permissions\");\r\n                });\r\n          } else if (this.options.showPropertiesCommand !== true) {\r\n            toolItems = toolItems.collection.filter(\r\n                function (command) {\r\n                  return (command.get(\"signature\") != \"Properties\" && command.get(\"signature\") !=\r\n                          \"VersionProperties\");\r\n                });\r\n          }\r\n          this._destroyDropdownMenu();\r\n          var ddm = this.dropdownMenuView = new DropdownMenuView({\r\n            model: this.options.model,\r\n            container: this.options.container,\r\n            containerCollection: this.options.collection || this.options.containerCollection,\r\n            toolItems: toolItems,\r\n            toolItemsMask: toolItemsMask,\r\n            originatingView: this.options.originatingView,\r\n            targetView: this.options.targetView,\r\n            context: this.options.context,\r\n            commands: isVersionModel ? versionCommands : this.options.commands,\r\n            metadataScenario: this.options.metadataScenario,\r\n            showPermissionView: this.options.showPermissionView,\r\n            noMetadataNavigation: this.options.noMetadataNavigation\r\n          });\r\n          this.listenTo(ddm, 'rename', _.bind(this._toggleEditMode, this, true));\r\n\r\n          ddm.$el.on('keydown', _.bind(function (event) {\r\n            if (event.keyCode === 9 && event.shiftKey) {\r\n              if (this.ui.backEle.is(':visible') || this.ui.toggleIcon.is(':visible')) {\r\n                this.ui.name.prop('tabindex', 0);\r\n                event.stopPropagation();\r\n              }\r\n            }\r\n          }, this));\r\n          this.propagateEventsToViews(this.dropdownMenuView);\r\n        },\r\n\r\n        _onWindowResize: function (event) {\r\n          if (event && event.data && event.data.view) {\r\n            var self = event.data.view;\r\n            // optimization for rapid mouse movement and redraw when mouse movement slows down or stop\r\n            if (self.resizeTimer) {\r\n              clearTimeout(self.resizeTimer);\r\n            }\r\n\r\n            self.resizeTimer = setTimeout(function () {\r\n              self._setHideShowToggleButton();\r\n            }, 200);\r\n          }\r\n        },\r\n\r\n        _setHideShowToggleButton: function (event) {\r\n\r\n          var isLandscape = window.matchMedia(\"(orientation: landscape)\").matches,\r\n              isPortrait  = window.matchMedia(\"(orientation: portrait)\").matches,\r\n              self        = !!event && !!event.data && !!event.data.view ? event.data.view : this;\r\n\r\n          self.leftBar = self.options.originatingView &&\r\n                         self.options.originatingView.$el.find(\".metadata-sidebar\");\r\n\r\n          if (self.leftBar && self.leftBar.length > 0) {\r\n            var navBar = self.leftBar.closest(\".metadata-navigation\");\r\n            if (isLandscape) {\r\n              if (window.innerWidth <= 1280) {\r\n                if (!!self.sideBarHidden) {\r\n                  self.ui.toggleWrapper instanceof Object &&\r\n                  self.ui.toggleWrapper.removeClass('binf-hidden');\r\n                  if (self.ui.backEle instanceof Object) {\r\n                    self.ui.backEle.css({display: \"inline-block\", position: \"relative\"});\r\n                    self.ui.backEle.attr(\"tabindex\", 0);\r\n                  }\r\n                  this.ensureTitleLabelIcon();\r\n                } else {\r\n                  self._applyToggle(event);\r\n                  self.leftBar.removeClass('binf-hidden');\r\n                  if (navBar.hasClass('csui-hide-side-bar')) {\r\n                    self.leftBar.show();\r\n                    navBar.toggleClass(\"csui-hide-side-bar\");\r\n                    if (self.ui.backEle instanceof Object) {\r\n                      self.ui.backEle.hide();\r\n                    }\r\n                    $(window).trigger(\"resize.tableview\");\r\n                  }\r\n                  this.ensureTitleLabelIcon();\r\n                }\r\n              } else {\r\n                this.sideBarHidden = false;\r\n                self._removeToggle(event);\r\n                if (navBar.hasClass('csui-hide-side-bar')) {\r\n                  self.leftBar.show();\r\n                  navBar.toggleClass(\"csui-hide-side-bar\");\r\n                  if (self.ui.backEle instanceof Object) {\r\n                    self.ui.backEle.hide();\r\n                  }\r\n                }\r\n                $(window).trigger(\"resize.tableview\");\r\n                this.ensureTitleLabelIcon();\r\n              }\r\n            } else if (isPortrait) {\r\n              self._applyToggle(event);\r\n              if (self.leftBar.length > 0) {\r\n                if (!navBar.hasClass('csui-hide-side-bar')) {\r\n                  self.leftBar.hide();\r\n                  navBar.toggleClass(\"csui-hide-side-bar\");\r\n                  $(window).trigger(\"resize.tableview\");\r\n                }\r\n                if (self.ui.backEle instanceof Object) {\r\n                  self.ui.backEle.css({display: \"inline-block\", position: \"relative\"});\r\n                  self.ui.backEle.attr(\"tabindex\", 0);\r\n                }\r\n              }\r\n              this.ensureTitleLabelIcon();\r\n            }\r\n          }\r\n        },\r\n\r\n        currentlyFocusedElement: function (options) {\r\n          if (!!this.ui.backEle && $(this.ui.backEle).is(':visible')) {\r\n            return this.ui.backEle;\r\n          } else if (!!this.ui.toggleIcon && $(this.ui.toggleIcon).is(':visible')) {\r\n            return this.ui.toggleIcon;\r\n          } else if (!!this.options.mode && this.options.mode === 'create') {\r\n            var mlIcon = $(this.ui.mlGlobeIcon);\r\n            return options && options.shiftKey && mlIcon.is(':visible') ? mlIcon : $(this.ui.nameInput);\r\n          } else {\r\n            return $(this.ui.name);\r\n          }\r\n        },\r\n\r\n        onRender: function () {\r\n          this.editing = false;\r\n          this.ui.nameEditDiv.addClass('binf-hidden');\r\n\r\n          if (this._nodeIconView) {\r\n            this._nodeIconView.destroy();\r\n          }\r\n          this._nodeIconView = new NodeTypeIconView({\r\n            el: this.$('.csui-type-icon').get(0),\r\n            node: this.options.model,\r\n            displayThumbnailIcon: false\r\n          });\r\n          // for shortcut objects add one more wrapper to apply special styling to overlay element.\r\n          if (this.model.get('type') === 1) {\r\n            this._nodeIconView.$el.addClass('csui-metadata-shortcut-overlay');\r\n          }\r\n          this._nodeIconView.render();\r\n\r\n          if (this.dropdownMenuView) {\r\n            this.dropdownMenuView.render();\r\n            Marionette.triggerMethodOn(this.dropdownMenuView, 'before:show', this.dropdownMenuView,\r\n                this);\r\n            this.ui.contextMenuDiv.append(this.dropdownMenuView.el);\r\n            Marionette.triggerMethodOn(this.dropdownMenuView, 'show', this.dropdownMenuView, this);\r\n          }\r\n\r\n          if (this.modelHasEmptyName) {\r\n            this.ui.nameInput.addClass('csui-empty-with-placeholder');\r\n            this.ui.nameInput.attr('placeholder', this.placeHolderName);\r\n            if (this.readonly) {\r\n              this.ui.name.addClass('csui-empty-with-placeholder');\r\n            }\r\n          }\r\n\r\n          this._setHideShowToggleButton();\r\n          this._checkAndEnableOrDisableEditing();\r\n          var self = this, targetElement = self.ui.nameInput, mlGlobeIcon = self.ui.mlGlobeIcon;\r\n          if (this.metadataLanguages.enabled && !(this.model.get('version_id'))) {\r\n            this.ui.nameInput.addClass('csui-multilingual-input');\r\n            self.$el.addClass('binf-hidden');\r\n            require([\"csui/controls/multilingual.text.picker/multilingual.popover.mixin\"], function (\r\n                MultiLingualPopoverMixin\r\n            ) {\r\n              MultiLingualPopoverMixin.mixin(MetadataItemNameView.prototype);\r\n              self.targetElement = targetElement;\r\n              self.requiredInfoAvilable('name_multilingual').then(function () {\r\n                self.multiLingualForm &&\r\n                self.targetElement.binf_popover(\"destroy\");\r\n                var mlOptions = {\r\n                  parentView: self,\r\n                  targetElement: targetElement,\r\n                  mlGlobeIcon: mlGlobeIcon,\r\n                  validationRequired: true,\r\n                  multilingualData: self.model.get(\"name_multilingual\")\r\n                };\r\n                self._loadMultiLingualPopover(mlOptions);\r\n                self.$el.removeClass('binf-hidden');\r\n              });\r\n            });\r\n          }\r\n        },\r\n        onMouseEnterName: function (event) {\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n        },\r\n\r\n        onMouseLeaveName: function (event) {\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n        },\r\n\r\n        onKeyDown: function (event) {\r\n          if (this.$el.parents(\".cs-item-action-metadata\").find(\r\n              \"div[class='load-container']\").length >\r\n              0) {\r\n            return false;\r\n          }\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          if (this.modelHasEmptyName && this.inputBoxNameChange !== true) {\r\n            this.setInputBoxValue('');\r\n            this.inputBoxNameChange = true;\r\n            this.ui.nameInput.removeClass('csui-empty-with-placeholder');\r\n          }\r\n        },\r\n\r\n        _validateAndSave: function () {\r\n          var currentValue = this.getValue().trim();\r\n          var inputValue = this.getInputBoxValue();\r\n          inputValue = inputValue.trim();\r\n\r\n          if (inputValue.length === 0 || currentValue !== inputValue ||\r\n              this.model.changed.name_multilingual) {\r\n            var success = this.validate(inputValue);\r\n            if (success === true) {\r\n              var self = this;\r\n              this.setInputBoxValue(inputValue);\r\n              this.setValue(inputValue);\r\n              this.modelHasEmptyName = false;\r\n              this.trigger(\"metadata:item:name:save\", {\r\n                sender: this,\r\n                success: function () {\r\n                  self._toggleEditMode(false, false);\r\n                },\r\n                error: function (error) {\r\n                  var name_multilingual = _.clone(self.prevMultilingualVal);\r\n                  self.setValue(currentValue);\r\n                  self._toggleEditMode(true);\r\n                  self.showInlineError(error);\r\n                  self.saveMldata && self.model.set({name_multilingual: self.prevMultilingualVal});\r\n                  name_multilingual && (self.prevMultilingualVal = _.clone(name_multilingual));\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            this.clearInlineError();\r\n            this._toggleEditMode(false, false);\r\n          }\r\n          this.saveMldata = '';\r\n        },\r\n\r\n        // call proxies\r\n        onKeyInView: function (event) {\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          if (!!this.options.mode && this.options.mode === 'create') {\r\n            var target = $(event.target);\r\n            if (event.keyCode === 9 && this.$el.find('.csui-multilingual-icon').length) {\r\n              ((event.shiftKey && target.is(this.ui.mlGlobeIcon)) || (target.is(this.ui.nameInput) && !event.shiftKey)) &&\r\n              this.ItemNameBehavior.onKeyInView(event);\r\n            }\r\n            return true;\r\n          }\r\n          //prevent propagation to dialog box tabable behavior (e.g. Recently Access)\r\n          if (event.keyCode === 9 && event.shiftKey) {\r\n            event.stopPropagation();\r\n          }\r\n          return this.ItemNameBehavior.onKeyInView(event);\r\n        },\r\n\r\n        _toggleEditMode: function (edit, setFocus) {\r\n          //prevent toggle for item name on create dialog\r\n          if (this.options.mode != 'create') {\r\n            return this.ItemNameBehavior._toggleEditMode(edit, setFocus);\r\n          }\r\n        },\r\n\r\n        getValue: function () {\r\n          return this.ItemNameBehavior.getValue();\r\n        },\r\n\r\n        setValue: function (value) {\r\n          return this.ItemNameBehavior.setValue(value);\r\n        },\r\n\r\n        getInputBoxValue: function () {\r\n          return this.ItemNameBehavior.getInputBoxValue();\r\n        },\r\n\r\n        setInputBoxValue: function (value) {\r\n          return this.ItemNameBehavior.setInputBoxValue(value);\r\n        },\r\n\r\n        validate: function (iName) {\r\n          return this.ItemNameBehavior.validate(iName);\r\n        },\r\n\r\n        setEditModeFocus: function () {\r\n          return this.ItemNameBehavior.setEditModeFocus();\r\n        },\r\n\r\n        showInlineError: function (error) {\r\n          var errorTxt = error;\r\n          if (error instanceof Object) {\r\n            errorTxt = this._getErrorMessageFromResponse(error);\r\n          }\r\n          return this.ItemNameBehavior.showInlineError(errorTxt);\r\n        },\r\n\r\n        clearInlineError: function () {\r\n          return this.ItemNameBehavior.clearInlineError();\r\n        },\r\n\r\n        _getErrorMessageFromResponse: function (err) {\r\n          return this.ItemNameBehavior._getErrorMessageFromResponse(err);\r\n        },\r\n        // end of: proxies\r\n\r\n        // TODO: Deprecate this method and prefer using name field schema\r\n        // for flags like readonly and required\r\n        setReadOnly: function (mode) {\r\n          mode = mode ? true : false;\r\n          var focus;\r\n          if ((this.readonly ? true : false) !== mode) {\r\n            this.readonly = mode;\r\n            this.render();\r\n            focus = $(this.ui.nameInput).is(\":focus\");\r\n            this._toggleEditMode(focus || this.modelHasEmptyName || false, false);\r\n            this.validate();\r\n          } else {\r\n            focus = $(this.ui.nameInput).is(\":focus\");\r\n            if (!focus) {\r\n              this.validate();\r\n            }\r\n          }\r\n        },\r\n\r\n        setPlaceHolder: function (placeHolderName) {\r\n          placeHolderName || (placeHolderName = lang.addItemPlaceHolderName);\r\n          if (this.placeHolderName !== placeHolderName) {\r\n            this.placeHolderName = placeHolderName;\r\n            this.render();\r\n          }\r\n        },\r\n\r\n        updateNameSchema: function (nameSchema) {\r\n          if (this.modelHasEmptyName && this.ui.nameInput.val() === \"\" && !nameSchema.readonly) {\r\n            nameSchema.required = true;\r\n          }\r\n          this._nameSchema = _.extend({\r\n            required: true,\r\n            readonly: false\r\n          }, nameSchema);\r\n          this.readonly = this._nameSchema.readonly;\r\n          this.render();\r\n          this.ui.nameInput[0].placeholder = this.placeHolderName;\r\n          var focus = $(this.ui.nameInput).is(\":focus\");\r\n          this._toggleEditMode(focus || this.modelHasEmptyName || false, false);\r\n          return this.ItemNameBehavior.updateNameSchema(nameSchema);\r\n        },\r\n\r\n    onKeyDownGlobeIcon: function (event) {\r\n      if (event.keyCode === 13 || event.keyCode === 32) {\r\n      this.multiLingualForm && this.keyDownOnGlobeIcon(event);\r\n      }\r\n    },\r\n\r\n   onClickGlobeIcon: function () {\r\n     this._showLanguagePopover();\r\n    }\r\n\r\n      }\r\n  );\r\n\r\n  _.extend(MetadataItemNameView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataItemNameView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/leftbar/header.leftbar',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <span class=\\\"icon arrow_back cs-go-back\\\" aria-label=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"goBackTooltip\") || (depth0 != null ? lookupProperty(depth0,\"goBackTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"goBackTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":2,\"column\":55},\"end\":{\"line\":2,\"column\":72}}}) : helper)))\n    + \"\\\"\\r\\n        title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"goBackTooltip\") || (depth0 != null ? lookupProperty(depth0,\"goBackTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"goBackTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":3,\"column\":15},\"end\":{\"line\":3,\"column\":32}}}) : helper)))\n    + \"\\\"\\r\\n        role=\\\"link\\\"></span>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"back_button\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":5,\"column\":7}}})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_leftbar_header.leftbar', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/leftbar/header.leftbar',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/leftbar/header.leftbar.view',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'hbs!csui/widgets/metadata/impl/header/leftbar/header.leftbar',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'css!csui/widgets/metadata/impl/header/leftbar/header.leftbar'\r\n], function (_, $, Marionette, template, lang, TabableRegionBehavior) {\r\n  'use strict';\r\n\r\n  var MetadataHeaderLeftBarView = Marionette.ItemView.extend({\r\n    className: 'metadata-header-left-bar',\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var templateValues = {\r\n        back_button: this.options.showBackIcon,\r\n        goBackTooltip: lang.goBackTooltip\r\n      };\r\n      return templateValues;\r\n    },\r\n\r\n    behaviors: function () {\r\n      if (this.options.showBackIcon) {\r\n        return {\r\n          TabableRegionBehavior: {\r\n            behaviorClass: TabableRegionBehavior\r\n          }\r\n        };\r\n      } else {\r\n        return {};\r\n      }\r\n    },\r\n\r\n    ui: {\r\n      back: '.cs-go-back'\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyInView',\r\n      'click @ui.back': 'onClickClose'\r\n    },\r\n\r\n    onKeyInView: function (e) {\r\n      var event = e || window.event;\r\n      var target = event.target || event.srcElement;\r\n      if (event.keyCode === 13 || event.keyCode === 32) {\r\n        // enter key(13) or space(32)\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        $(target).trigger('click');\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataHeaderLeftBarView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.node = this.options.model;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    currentlyFocusedElement: function () {\r\n      if (this.options.showBackIcon) {\r\n        return $(this.ui.back);\r\n      }\r\n      return undefined;\r\n    },\r\n\r\n    onClickClose: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      this.trigger('metadata:close');\r\n    }\r\n  });\r\n\r\n  return MetadataHeaderLeftBarView;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/rightbar/header.rightbar',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <div class=\\\"binf-row shortcut-div\\\">\\r\\n    <a href=\\\"#\\\" class=\\\"shortcut-switch\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"right_label\") || (depth0 != null ? lookupProperty(depth0,\"right_label\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"right_label\",\"hash\":{},\"loc\":{\"start\":{\"line\":3,\"column\":47},\"end\":{\"line\":3,\"column\":62}}}) : helper)))\n    + \"\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"right_label\") || (depth0 != null ? lookupProperty(depth0,\"right_label\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"right_label\",\"hash\":{},\"loc\":{\"start\":{\"line\":3,\"column\":64},\"end\":{\"line\":3,\"column\":79}}}) : helper)))\n    + \"</a>\\r\\n  </div>\\r\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"  <div class=\\\"metadata-header-floating-rightbar\\\">\\r\\n    <span class=\\\"icon close cs-metadata-close\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"close_metadata_button_tooltip\") || (depth0 != null ? lookupProperty(depth0,\"close_metadata_button_tooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"close_metadata_button_tooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":9,\"column\":54},\"end\":{\"line\":9,\"column\":87}}}) : helper)))\n    + \"\\\"></span>\\r\\n  </div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"is_shortcut\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":5,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"<div class=\\\"csui-extra-header-wrapper\\\"></div>\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"show_close_icon\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"loc\":{\"start\":{\"line\":7,\"column\":0},\"end\":{\"line\":11,\"column\":7}}})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_rightbar_header.rightbar', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/rightbar/header.rightbar',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/rightbar/header.rightbar.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/utils/commands', 'csui/controls/tabletoolbar/tabletoolbar.view',\r\n  'csui/widgets/metadata/impl/header/rightbar/toolbaritems',\r\n  'csui/widgets/metadata/impl/header/rightbar/toolbaritems.masks',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'hbs!csui/widgets/metadata/impl/header/rightbar/header.rightbar',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/utils/contexts/factories/application.scope.factory',\r\n  'csui/controls/form/fields/booleanfield.view',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'css!csui/widgets/metadata/impl/header/rightbar/header.rightbar'\r\n], function (_, $, Backbone, Marionette, commands, TableToolbarView,\r\n    toolbarItems, ToolbarItemsMasks, ViewEventsPropagationMixin, template, lang,\r\n    ApplicationScopeModelFactory, BooleanFieldView, TabableRegionBehavior) {\r\n\r\n  var MetadataHeaderRightBarView = Marionette.LayoutView.extend({\r\n\r\n    className: 'metadata-header-right-bar',\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var templateValues = {\r\n        show_close_icon: this.options.showCloseIcon,\r\n        close_metadata_button_tooltip: lang.closeMetadataButtonTooltip\r\n      };\r\n      // showing properties of the original model of a shortcut\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        var right_static_label = lang.viewOriginalMessage;\r\n        if (this.options.shortcutNode.original === this.node) {\r\n          right_static_label = lang.viewShortcutMessage;\r\n        }\r\n        return _.extend(templateValues, {\r\n          is_shortcut: true,\r\n          right_label: right_static_label\r\n        });\r\n      } else {\r\n        return templateValues;\r\n      }\r\n    },\r\n\r\n    regions: {\r\n      extraToolbarRegion: '.csui-extra-header-wrapper'\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegion: {\r\n        behaviorClass: TabableRegionBehavior\r\n      }\r\n    },\r\n\r\n    ui: {\r\n      shortcutSwitchLabel: 'a.shortcut-switch',\r\n      closeIcon: '.cs-metadata-close'\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyInView',\r\n      'click @ui.shortcutSwitchLabel': 'onClickShortcutSwitch',\r\n      'click @ui.closeIcon': 'onClickClose'\r\n    },\r\n\r\n    constructor: function MetadataHeaderRightBarView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.node = this.options.model;\r\n      if (!options.toolbarItemsMasks) {\r\n        options.toolbarItemsMasks = new ToolbarItemsMasks();\r\n      }\r\n\r\n      if (!options.toolbarItems) {\r\n        options.toolbarItems = toolbarItems;\r\n      }\r\n      Marionette.LayoutView.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    onRender: function () {\r\n      if (this.options.showExtraRightActionBar) {\r\n        this.options.parent.$el.addClass(\"extended-headers\");\r\n        this._showExtraRightActionBar();\r\n      }\r\n    },\r\n\r\n    _showExtraRightActionBar: function (args) {\r\n      var collection       = this.collection || this.options.model.collection,\r\n          container        = this.options.container || collection ?\r\n                             (collection.node ? collection.node :\r\n                              this.options.model) : this.options.model,\r\n          applicationScope = this.options.context &&\r\n                             this.options.context.getModel(ApplicationScopeModelFactory),\r\n          removeContainer  = false;\r\n      if (applicationScope && applicationScope.get(\"id\") === \"search\") {\r\n        removeContainer = true;\r\n      }\r\n      this.toolbarView = new TableToolbarView({\r\n        toolbarItems: this.options.toolbarItems,\r\n        toolbarItemsMasks: this.options.toolbarItemsMasks,\r\n        collection: collection,\r\n        model: this.options.model,\r\n        originatingView: this.options.originatingView,\r\n        context: this.options.context,\r\n        container: container,\r\n        removeContainer: removeContainer\r\n      });\r\n      this.extraToolbarRegion.show(this.toolbarView);\r\n    },\r\n\r\n    onKeyInView: function (e) {\r\n      var event = e || window.event;\r\n      var target = event.target || event.srcElement;\r\n      if (event.keyCode === 13 || event.keyCode === 32) {\r\n        // enter key(13) or space(32)\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        // need timeout to overcome FireFox space press\r\n        setTimeout(function () {\r\n          $(target).trigger('click');\r\n        }, 200);\r\n      }\r\n    },\r\n\r\n    currentlyFocusedElement: function (event) {\r\n      var tabElements = this.$('*[tabindex]');\r\n      if (tabElements.length) {\r\n        tabElements.prop('tabindex', 0);\r\n      }\r\n      if (!!event && event.shiftKey) {\r\n        return $(tabElements[tabElements.length - 1]);\r\n      } else {\r\n        return $(tabElements[0]);\r\n      }\r\n    },\r\n\r\n    onClickShortcutSwitch: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      this.trigger('shortcut:switch');\r\n    },\r\n\r\n    onClickClose: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      this.trigger(\"metadata:close\");\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataHeaderRightBarView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataHeaderRightBarView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/metadata.header',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"\\r\\n  <div class=\\\"metadata-header-left-bar-container\\\"></div>\\r\\n  <div class=\\\"metadata-header with-right-bar\\\"></div>\\r\\n\\r\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"back_button\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.program(9, data, 0),\"loc\":{\"start\":{\"line\":8,\"column\":2},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\r\\n    <div class=\\\"metadata-header-left-bar-container\\\"></div>\\r\\n\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"show_only_required_fields_switch\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.program(7, data, 0),\"loc\":{\"start\":{\"line\":12,\"column\":4},\"end\":{\"line\":16,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header with-back-button with-right-bar\\\"></div>\\r\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header with-back-button\\\"></div>\\r\\n\";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"show_only_required_fields_switch\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(10, data, 0),\"inverse\":container.program(12, data, 0),\"loc\":{\"start\":{\"line\":20,\"column\":4},\"end\":{\"line\":24,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n},\"10\":function(container,depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header with-right-bar\\\"></div>\\r\\n\";\n},\"12\":function(container,depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header\\\"></div>\\r\\n\";\n},\"14\":function(container,depth0,helpers,partials,data) {\n    return \"  <div class=\\\"metadata-header-right-bar-container\\\"></div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"is_shortcut\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":28,\"column\":7}}})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = (lookupProperty(helpers,\"xif\")||(depth0 && lookupProperty(depth0,\"xif\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"this.show_close_icon || this.show_only_required_fields_switch || this.is_shortcut\",{\"name\":\"xif\",\"hash\":{},\"fn\":container.program(14, data, 0),\"inverse\":container.noop,\"loc\":{\"start\":{\"line\":30,\"column\":0},\"end\":{\"line\":32,\"column\":8}}})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_metadata.header', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/metadata.header',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/metadata.header.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/widgets/metadata/impl/header/item.name/metadata.item.name.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/header/leftbar/header.leftbar.view',\r\n  'csui/widgets/metadata/impl/header/rightbar/header.rightbar.view',\r\n  'hbs!csui/widgets/metadata/impl/header/metadata.header',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang', 'csui/utils/log',\r\n  'csui/controls/form/fields/booleanfield.view',\r\n  'css!csui/widgets/metadata/impl/header/metadata.header',\r\n  'csui/lib/handlebars.helpers.xif'\r\n], function (_, $, Backbone, Marionette, MetadataItemNameView, ViewEventsPropagationMixin,\r\n    MetadataHeaderLeftBarView, MetadataHeaderRightBarView, template, lang, log,\r\n    BooleanFieldView) {\r\n\r\n  var MetadataHeaderView = Marionette.ItemView.extend({\r\n\r\n    className: 'metadata-content-header',\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var templateValues = {\r\n        back_button: this.options.showBackIcon,\r\n        show_close_icon: this.options.showCloseIcon,\r\n        close_metadata_button_tooltip: lang.closeMetadataButtonTooltip,\r\n        show_only_required_fields_switch: this.options.showRequiredFieldsSwitch,\r\n        only_required_fields_label: lang.onlyRequiredFieldsLabel\r\n      };\r\n      // showing properties of the original model of a shortcut\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        var right_static_label = lang.viewOriginalMessage;\r\n        if (this.options.shortcutNode.original === this.node) {\r\n          right_static_label = lang.viewShortcutMessage;\r\n        }\r\n        return _.extend(templateValues, {\r\n          is_shortcut: true,\r\n          right_label: right_static_label\r\n        });\r\n      } else {\r\n        return templateValues;\r\n      }\r\n    },\r\n\r\n    ui: {\r\n      leftbar: '.metadata-header-left-bar-container',\r\n      header: '.metadata-header',\r\n      rightbar: '.metadata-header-right-bar-container'\r\n    },\r\n\r\n    events: {\r\n      'click .metadata-header': 'onClickHeader'\r\n    },\r\n\r\n    constructor: function MetadataHeaderView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.node = this.options.model;\r\n      this.originatingView = options.originatingView;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n      this._createMetadataHeaderLeftBarView();\r\n      this._createMetadataItemNameView();\r\n      this._createMetadataHeaderRightBarView();\r\n    },\r\n\r\n    _createMetadataHeaderLeftBarView: function () {\r\n      if (this.leftbarView) {\r\n        this.cancelEventsToViewsPropagation(this.leftbarView);\r\n        this.leftbarView.destroy();\r\n      }\r\n\r\n      var lbv = this.leftbarView = new MetadataHeaderLeftBarView(this.options);\r\n      this.listenTo(lbv, 'metadata:close', function (args) {\r\n        this.trigger('metadata:close', args);\r\n      });\r\n\r\n      this.propagateEventsToViews(this.leftbarView);\r\n    },\r\n\r\n    _createMetadataItemNameView: function (viewNode) {\r\n      if (this.metadataItemNameView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataItemNameView);\r\n        this.metadataItemNameView.destroy();\r\n      }\r\n\r\n      var node = viewNode || this.node;\r\n      var inv = this.metadataItemNameView = new MetadataItemNameView({\r\n        model: node,\r\n        container: this.options.container,\r\n        containerCollection: this.options.containerCollection,\r\n        collection: this.options.collection,\r\n        context: this.options.context,\r\n        nameSchema: this._getNameSchema(),\r\n        commands: this.options.commands,\r\n        originatingView: this.options.originatingView,\r\n        showDropdownMenu: this.options.showDropdownMenu,\r\n        metadataScenario: this.options.metadataScenario,\r\n        showPermissionView: this.options.showPermissionView,\r\n        mode: this.options.action,\r\n        targetView: this.options.targetView\r\n      });\r\n      this.listenTo(inv, 'metadata:item:name:save', function (args) {\r\n        this.trigger('metadata:item:name:save', args);\r\n      });\r\n      this.listenTo(inv, 'update:button', _.bind(function (args) {\r\n        this.trigger('update:button', args);\r\n      }, this));\r\n\r\n      this.propagateEventsToViews(this.metadataItemNameView);\r\n    },\r\n\r\n    _createMetadataHeaderRightBarView: function (viewNode) {\r\n      if (this.rightbarView) {\r\n        this.cancelEventsToViewsPropagation(this.rightbarView);\r\n        this.rightbarView.destroy();\r\n      }\r\n\r\n      var node = viewNode || this.node;\r\n      var rbv = this.rightbarView = new MetadataHeaderRightBarView(\r\n          _.extend({}, this.options,\r\n              {model: node, parent: this, showExtraRightActionBar: this.options.showExtraRightActionBar})\r\n      );\r\n      this.listenTo(rbv, 'shortcut:switch', this.onClickShortcutSwitch);\r\n      this.listenTo(rbv, 'metadata:close', function (args) {\r\n        this.trigger('metadata:close', args);\r\n      });\r\n\r\n      this.propagateEventsToViews(this.rightbarView);\r\n    },\r\n\r\n    onRender: function () {\r\n      var lbv = this.leftbarView.render();\r\n      Marionette.triggerMethodOn(lbv, 'before:show', lbv, this);\r\n      this.ui.leftbar.append(lbv.el);\r\n\r\n      var inv = this.metadataItemNameView.render();\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      this.ui.header.append(inv.el);\r\n\r\n      var rbv = this.rightbarView.render();\r\n      Marionette.triggerMethodOn(rbv, 'before:show', rbv, this);\r\n      this.ui.rightbar.append(rbv.el);\r\n\r\n      if (this.options.showCloseIcon) {\r\n        this.$el.addClass('with-close-icon');\r\n      }\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        this.$el.addClass('shortcut-object');\r\n      }\r\n\r\n      Marionette.triggerMethodOn(lbv, 'show', lbv, this);\r\n      Marionette.triggerMethodOn(inv, 'show', inv, this);\r\n      Marionette.triggerMethodOn(rbv, 'show', rbv, this);\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      if (this.leftbarView) {\r\n        this.cancelEventsToViewsPropagation(this.leftbarView);\r\n        this.leftbarView.destroy();\r\n      }\r\n      if (this.metadataItemNameView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataItemNameView);\r\n        this.metadataItemNameView.destroy();\r\n      }\r\n      if (this.requiredFieldSwitchView) {\r\n        this.requiredFieldSwitchView.destroy();\r\n      }\r\n    },\r\n\r\n    onClickHeader: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      // UX changed their mind\r\n      //this.trigger(\"metadata:close\", {sender: this});\r\n    },\r\n\r\n    onClickShortcutSwitch: function () {\r\n      var viewNode = this.model;\r\n      if (this.options.shortcutNode && this.options.shortcutNode.original === this.node) {\r\n        // content shall show now shortcut\r\n        // label shall be 'show original'\r\n        viewNode = this.node = this.options.shortcutNode;\r\n      } else {\r\n        // content shall show now original\r\n        // label shall be 'show shortcut'\r\n        viewNode = this.node = this.node.original;\r\n      }\r\n\r\n      this._createMetadataItemNameView(viewNode);\r\n      var inv = this.metadataItemNameView.render();\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      this.ui.header.append(inv.el);\r\n      Marionette.triggerMethodOn(inv, 'show', inv, this);\r\n\r\n      this._createMetadataHeaderRightBarView(viewNode);\r\n      var rbv = this.rightbarView.render();\r\n      Marionette.triggerMethodOn(rbv, 'before:show', rbv, this);\r\n      this.ui.rightbar.append(rbv.el);\r\n      Marionette.triggerMethodOn(rbv, 'show', rbv, this);\r\n      // set focus back on the new view for keyboard navigation\r\n      var $elem = rbv.currentlyFocusedElement();\r\n      $elem && $elem.trigger('focus');\r\n\r\n      this.trigger('shortcut:switch', {node: viewNode});\r\n    },\r\n\r\n    getNameInputBoxValue: function () {\r\n      return this.metadataItemNameView.getInputBoxValue();\r\n    },\r\n\r\n    validateName: function () {\r\n      var inputValue = this.metadataItemNameView.getInputBoxValue();\r\n      return this.metadataItemNameView.validate(inputValue);\r\n    },\r\n\r\n    getNameValue: function () {\r\n      return this.metadataItemNameView.getValue();\r\n    },\r\n\r\n    setNameEditModeFocus: function () {\r\n      this.metadataItemNameView.setEditModeFocus();\r\n    },\r\n\r\n    showBackIcon: function(show, doRender) {\r\n      this.options.showBackIcon = show;\r\n      this.leftbarView.options.showBackIcon = show;\r\n      if (!this.isDestroyed && doRender) {\r\n          this.render();\r\n      }\r\n    },\r\n\r\n    _getNameSchema: function () {\r\n      var generalForm = this.options.collection && this.options.collection.first(),\r\n          formSchema  = generalForm && generalForm.get('schema'),\r\n          nameSchema  = formSchema && formSchema.properties && formSchema.properties.name;\r\n      // Warn only if the form collection was used to populate the view;\r\n      // it is the case only for the creation mode, where the name should\r\n      // be always present and flagged by required/readonly correctly\r\n      if (this.options.collection && formSchema && !nameSchema) {\r\n        log.warn('Form collection lacks name field in the first form.');\r\n      }\r\n      return nameSchema || {};\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataHeaderView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataHeaderView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/property.panels/categories/impl/category.form.view',[\r\n  'module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/base',\r\n  'csui/utils/url', 'csui/utils/log', 'csui/controls/form/form.view',\r\n  'csui/controls/globalmessage/globalmessage', 'csui/models/appliedcategories/category'\r\n], function (module, _, $, base, Url, log, FormView, GlobalMessage, CategoryModel) {\r\n  'use strict';\r\n\r\n  log = log(module.id);\r\n\r\n  var CategoryFormView = FormView.extend({\r\n    constructor: function CategoryFormView(options) {\r\n      FormView.prototype.constructor.call(this, options);\r\n\r\n      this.node = this.options.node;\r\n      this.listenTo(this, 'change:field', this._saveField);\r\n      this.listenTo(this, 'disable:active:item', this._disableItem);\r\n    },\r\n\r\n    onRequestProcessing: function (view) {\r\n      this.propagatedView = view;\r\n    },\r\n\r\n    _disableItem: function (args) {\r\n      this.options.metadataView && this.options.metadataView.trigger('disable:active:item');\r\n    },\r\n\r\n    _saveField: function (args) {\r\n      // This view is shared for both creation and editing scenarios.\r\n      // Do not save immediately in the creation mode.  The creation dialog\r\n      // has a button to get all field values and perform the action.\r\n      if (this.mode === 'create') {\r\n        return;\r\n      }\r\n\r\n      // Optimizing the payload to send a part of the category, which has to\r\n      // be complete, is complicated.  The classic UI sends all data anyway.\r\n      // Until we have PATCH behaviour in the REST API, it doesn't pay off.\r\n      var values = this.getValues();\r\n      this._saveChanges(values);\r\n    },\r\n\r\n    _saveChanges: function (changes) {\r\n      if (!this.node) {\r\n        throw new Error('Missing node to save the categories to.');\r\n      }\r\n      this.isDataUpdating = true;\r\n      if (_.keys(changes).length) {\r\n        if (this._validate(changes)) {\r\n          this._removeInternalProperties(changes);\r\n          this._blockActions();\r\n          var categoryModel = new CategoryModel({}, {connector: this.node.connector, node: this.node, id: this.model.get('id')});\r\n          return categoryModel.save(changes, {\r\n                type: 'PUT',\r\n                processData: false,\r\n                contentType: false\r\n              })\r\n              .done(_.bind(function (response) {\r\n                this._updateMetadataToken(response, changes);\r\n                this.model.set('data', changes, {silent: true});\r\n                this.trigger('forms:sync');\r\n                // event for keyboard navigation\r\n                var event = $.Event('tab:content:field:changed');\r\n                this.options.metadataView &&\r\n                this.options.metadataView.trigger('enable:active:item');\r\n                this.$el.trigger(event);\r\n              }, this))\r\n              .fail(_.bind(function (jqxhr) {\r\n                var preValues = this.model.get('data');\r\n                this.form.children.forEach(function (formField) {\r\n                  formField.setValue(preValues[formField.propertyId]);\r\n                  formField.refresh();\r\n                });\r\n                var error = new base.Error(jqxhr);\r\n                GlobalMessage.showMessage('error', error.message);\r\n                this.trigger('forms:error');\r\n              }, this))\r\n              .always(_.bind(function () {\r\n                this.isDataUpdating = false;\r\n                //Unblocking the metadataView\r\n                this.options.metadataView && this.options.metadataView.unblockActions\r\n                  && this.options.metadataView.unblockActions();\r\n                //Trigerring the event to proceed further actions if there is any\r\n                this.trigger(\"request:completed\", this.propagatedView);\r\n                this._unblockActions();\r\n              }, this));\r\n        }\r\n        return $.Deferred().reject().promise();\r\n      }\r\n      return $.Deferred().resolve().promise();\r\n    },\r\n\r\n    // Alpaca returns all field values including read-only ones. The server\r\n    // rejects the request, if the read-only internal fields are posted.\r\n    _removeInternalProperties: function (categoryData) {\r\n      var categoryId = this.model.get('id');\r\n      var stateId = categoryId + '_1';\r\n      var categorySchema = this.model.get('schema') || {};\r\n      var stateSchema = categorySchema.properties && categorySchema.properties[stateId];\r\n      if (stateSchema) {\r\n        stateSchema = stateSchema.properties || (stateSchema.properties = {});\r\n        var stateData = categoryData[stateId] || {};\r\n        Object\r\n          .keys(stateSchema)\r\n          .forEach(function (propertyName) {\r\n            if (propertyName === 'metadata_token') {\r\n              log.debug('Metadata token \"{1}\" detected in the category \"{0}\".',\r\n                  categoryId, stateData[propertyName]) && console.log(log.last);\r\n            }\r\n            // Let only writable properties sent back to the server.\r\n            if (stateSchema[propertyName].readonly) {\r\n              delete stateData[propertyName];\r\n            }\r\n          });\r\n      }\r\n    },\r\n\r\n    // Set the metadata token using Alpaca API, because setting values in\r\n    // the model does not work and values are retrieved by Alpaca API.\r\n    _updateMetadataToken: function (response, data) {\r\n      var categoryId = this.model.get('id');\r\n      var stateId = categoryId + '_1';\r\n      var categorySchema = this.model.get('schema') || {};\r\n      var stateSchema = categorySchema.properties && categorySchema.properties[stateId];\r\n      if (stateSchema) {\r\n        stateSchema = stateSchema.properties || (stateSchema.properties = {});\r\n        if (stateSchema.metadata_token) {\r\n          try {\r\n            var metadataTokenValue = response.state.categories[0][categoryId].metadata_token;\r\n            var metadataTokenField = this.form.childrenByPropertyId[stateId].childrenByPropertyId.metadata_token;\r\n            metadataTokenField.setValue(metadataTokenValue);\r\n            data && (data[stateId] = metadataTokenValue);\r\n            log.debug('Metadata token in the category \"{0}\" updated to \"{1}\".',\r\n                categoryId, metadataTokenValue) && console.log(log.last);\r\n          } catch (error) {\r\n            log.warn('Updating metadata token the category \"{0}\" failed.',\r\n                categoryId) && console.log(log.last);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return CategoryFormView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.general.form.fields',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  // Load extra property panels to be added to the built-in tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.general.form.fields'\r\n], function (_, Backbone, extraGeneralFormFields) {\r\n\r\n  var MetadataGeneralFormFieldModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      controller: null,\r\n      controllerOptions: null\r\n    },\r\n\r\n    constructor: function MetadataGeneralFormFieldModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataGeneralFormFieldCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataGeneralFormFieldModel,\r\n    comparator: 'sequence',\r\n\r\n    constructor: function MetadataGeneralFormFieldCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataGeneralFormFields = new MetadataGeneralFormFieldCollection();\r\n\r\n  if (extraGeneralFormFields) {\r\n    extraGeneralFormFields = _.flatten(extraGeneralFormFields, true);\r\n    _.each(extraGeneralFormFields, function () {\r\n      var sequence = extraGeneralFormFields.sequence;\r\n      if (sequence < 10 || sequence > 100) {\r\n        throw new Error('Sequence must be greater or equal to 10 and less or equal to 100.');\r\n      }\r\n    });\r\n    metadataGeneralFormFields.add(extraGeneralFormFields);\r\n  }\r\n\r\n  return metadataGeneralFormFields;\r\n\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/general.form.fields/impl/general.form.fields.view',[],function(){});\n","csui.define('csui/widgets/metadata/general.form.fields/impl/general.form.fields.view',['csui/lib/underscore', 'csui/lib/marionette',\r\n  'csui/controls/form/form.view',\r\n  'css!csui/widgets/metadata/general.form.fields/impl/general.form.fields.view'\r\n], function (_, Marionette, FormView) {\r\n  'use strict';\r\n\r\n  var GeneralFormFieldCollectionView = Marionette.CollectionView.extend({\r\n\r\n    className: 'csui-general-form-fields',\r\n\r\n    getChildView: function (model) {\r\n      var fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n          {formModel: model});\r\n      return fieldDescriptor && fieldDescriptor.formView || FormView;\r\n    },\r\n\r\n    childViewOptions: function (model) {\r\n      var options = {\r\n            context: this.options.context,\r\n            node: this.options.node,\r\n            mode: this.options.mode,\r\n            generalFormView: this.view,\r\n            fetchedModels: this.options.fetchedModels,\r\n            displayedModels: this.options.displayedModels,\r\n            originatingView: this.options.originatingView,\r\n            metadataView: this.options.metadataView,\r\n            layoutMode: 'singleCol'\r\n          },\r\n          fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n              {formModel: model});\r\n      if (fieldDescriptor) {\r\n        _.extend(options, fieldDescriptor.formViewOptions);\r\n      }\r\n      return options;\r\n    },\r\n\r\n    constructor: function GeneralFormFieldCollectionView(options) {\r\n      Marionette.CollectionView.prototype.constructor.call(this, options);\r\n      this.listenTo(this, 'render', this._triggerRenderForms);\r\n    },\r\n\r\n    // Trigger render:forms once every form has triggered render:form\r\n    _triggerRenderForms: function () {\r\n      var children = this.children.map(function (formView) {\r\n        var formViewId = formView.cid;\r\n        formView.once('render:form', function () {\r\n          children = _.without(children, formViewId);\r\n          if (!children.length) {\r\n            this.triggerMethod('render:forms', this);\r\n          }\r\n        }, this);\r\n        return formView.cid;\r\n      }, this);\r\n    }\r\n\r\n  });\r\n\r\n  return GeneralFormFieldCollectionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.form.fields/general.form.field.behavior',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n  'csui/lib/marionette', 'csui/widgets/metadata/metadata.general.form.fields',\r\n  'csui/widgets/metadata/general.form.fields/impl/general.form.fields.view',\r\n  'csui/dialogs/modal.alert/modal.alert'\r\n], function (_, $, Backbone, Marionette, metadataGeneralFormFields,\r\n    GeneralFormFieldCollectionView, ModalAlert) {\r\n  'use strict';\r\n\r\n  var GeneralFormFieldBehavior = Marionette.Behavior.extend({\r\n    constructor: function GeneralFormFieldBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n      this.view = view;\r\n      this\r\n          .listenTo(this.view, 'render', this._insertFieldExtensions)\r\n          .listenTo(this.view, 'destroy', this._emptyExtensionRegion);\r\n\r\n      var self = this;\r\n      view.getGeneralFormFieldValues = function () {\r\n        var formValues = {};\r\n        // Forms with extra fields are rendered only if there\r\n        // were any field descriptors specified; there are no\r\n        // data without forms\r\n        if (self.fieldRegion) {\r\n          self.fieldRegion.currentView.children.each(function (formView) {\r\n            var values = formView.getValues(),\r\n                roleName = formView.model.get(\"role_name\"),\r\n                roles, role;\r\n            if (values) {\r\n              if (roleName) {\r\n                roles = formValues.roles || (formValues.roles = {});\r\n                role = roles[roleName] || (roles[roleName] = {});\r\n                // With a role defined, merge the properties to the\r\n                // roles.<role_name> object\r\n                _.extend(role, values);\r\n              } else {\r\n                // With no role defined, merge the properties to the root\r\n                // object literal with the general properties\r\n                _.extend(formValues, values);\r\n              }\r\n            }\r\n          });\r\n        }\r\n        return formValues;\r\n      };\r\n    },\r\n\r\n    _insertFieldExtensions: function () {\r\n      var fieldParent = this.getOption('fieldParent');\r\n      if (_.isFunction(fieldParent)) {\r\n        fieldParent = fieldParent.call(this.view);\r\n      }\r\n      if (fieldParent) {\r\n        fieldParent = this.view.$(fieldParent)[0];\r\n      }\r\n      if (!fieldParent) {\r\n        return;\r\n      }\r\n\r\n      var fieldDescriptors = this.getOption('fieldDescriptors');\r\n      if (_.isFunction(fieldDescriptors)) {\r\n        fieldDescriptors = fieldDescriptors.call(this.view);\r\n      }\r\n      if (!fieldDescriptors || !fieldDescriptors.length) {\r\n        return;\r\n      }\r\n\r\n      this.fieldRegion = new Marionette.Region({el: fieldParent});\r\n\r\n      var fieldViewOptions = this.getOption('fieldViewOptions');\r\n      if (_.isFunction(fieldViewOptions)) {\r\n        fieldViewOptions = fieldViewOptions.call(this.view);\r\n      }\r\n      var fieldModels = new Backbone.Collection(_.pluck(fieldDescriptors, 'formModel')),\r\n          fieldViews = new GeneralFormFieldCollectionView(_.extend({\r\n            context: this.view.options.context,\r\n            fieldDescriptors: fieldDescriptors,\r\n            collection: fieldModels,\r\n            node: this.view.options.node,\r\n            mode: this.view.options.mode,\r\n            generalFormView: this.view,\r\n            fetchedModels: this.view.options.fetchedModels,\r\n            displayedModels: this.view.options.displayedModels,\r\n            originatingView: this.view.options.originatingView,\r\n            metadataView: this.view.options.metadataView\r\n          }, fieldViewOptions));\r\n      this.listenTo(fieldViews, 'render:forms', function () {\r\n        this.view.triggerMethod('render:general:form:fields', fieldViews);\r\n      });\r\n      this.fieldRegion.show(fieldViews);\r\n    },\r\n\r\n    _emptyExtensionRegion: function () {\r\n      if (this.fieldRegion) {\r\n        this.fieldRegion.empty();\r\n      }\r\n    }\r\n\r\n  }, {\r\n\r\n    getFieldDescriptors: function (options) {\r\n      var methodName, parameters;\r\n      if (options.action === 'create') {\r\n        methodName = 'getGeneralFormFieldsForCreate';\r\n        parameters = [{forms: options.forms}];\r\n      } else if (options.action === 'copy') {\r\n        methodName = 'getGeneralFormFieldsForCopy';\r\n        parameters = [{forms: options.forms}];\r\n      } else if (options.action === 'move') {\r\n        methodName = 'getGeneralFormFieldsForMove';\r\n        parameters = [{forms: options.forms}];\r\n      }else if (options.action === 'restructure') {\r\n        // restructure functionality is similar to move, so we can reuse this method\r\n        methodName = 'getGeneralFormFieldsForMove';\r\n        parameters = [{forms: options.forms}]; \r\n      }else {\r\n        methodName = 'getGeneralFormFields';\r\n      }\r\n      var promises = metadataGeneralFormFields.chain()\r\n          .map(function (fieldControllerDescriptor) {\r\n            var Controller = fieldControllerDescriptor.get('controller'),\r\n                controllerOptions = fieldControllerDescriptor.get('controllerOptions'),\r\n                controller = new Controller(_.extend({\r\n                  context: options.context,\r\n                  model: options.node,\r\n                  fetchedModels: options.forms\r\n                }, controllerOptions)),\r\n                method = controller[methodName];\r\n            return method && method.apply(controller, parameters);\r\n          })\r\n          .compact()\r\n          .value();\r\n      return $.when\r\n          .apply($, promises)\r\n          .then(function () {\r\n            return _.flatten(arguments);\r\n          });\r\n    }\r\n\r\n  });\r\n\r\n  return GeneralFormFieldBehavior;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.general.action.fields',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  // Load extra property panels to be added to the built-in tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.general.action.fields'\r\n], function (_, Backbone, generalActionFields) {\r\n\r\n  var MetadataGeneralActionFieldModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      controller: null,\r\n      controllerOptions: null\r\n    },\r\n\r\n    constructor: function MetadataGeneralActionFieldModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataGeneralActionFieldCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataGeneralActionFieldModel,\r\n    comparator: 'sequence',\r\n\r\n    constructor: function MetadataGeneralActionFieldCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataGeneralActionFields = new MetadataGeneralActionFieldCollection();\r\n\r\n  // Adding Action Fields to General Panels\r\n\r\n    if (generalActionFields) {\r\n        generalActionFields = _.flatten(generalActionFields, true);\r\n        _.each(generalActionFields, function () {\r\n            var sequence = generalActionFields.sequence;\r\n            if (sequence < 10 || sequence > 100) {\r\n                throw new Error('Sequence must be greater or equal to 10 and less or equal to 100.');\r\n            }\r\n        });\r\n        metadataGeneralActionFields.add(generalActionFields);\r\n    }\r\n\r\n\r\n  return metadataGeneralActionFields;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.action.fields/impl/general.action.fields.view',['csui/lib/underscore', 'csui/lib/marionette',\r\n    'csui/controls/form/form.view',\r\n    'css!csui/widgets/metadata/general.form.fields/impl/general.form.fields.view'\r\n], function (_, Marionette, FormView) {\r\n    'use strict';\r\n\r\n    var GeneralActionFieldCollectionView = Marionette.CollectionView.extend({\r\n\r\n        className: 'csui-general-action-fields',\r\n\r\n        getChildView: function (model) {\r\n            var fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n                {formModel: model});\r\n            return fieldDescriptor && fieldDescriptor.formView || FormView;\r\n        },\r\n\r\n        childViewOptions: function (model) {\r\n            var options = {\r\n                    context: this.options.context,\r\n                    node: this.options.node,\r\n                    mode: this.options.mode,\r\n                    generalFormView: this.view,\r\n                    fetchedModels: this.options.fetchedModels,\r\n                    displayedModels: this.options.displayedModels,\r\n                    originatingView: this.options.originatingView,\r\n                    metadataView: this.options.metadataView,\r\n                    layoutMode: 'singleCol'\r\n                },\r\n                fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n                    {formModel: model});\r\n            if (fieldDescriptor) {\r\n                _.extend(options, fieldDescriptor.formViewOptions);\r\n            }\r\n            return options;\r\n        },\r\n\r\n        constructor: function GeneralActionFieldCollectionView(options) {\r\n            Marionette.CollectionView.prototype.constructor.call(this, options);\r\n            this.listenTo(this, 'render', this._triggerRenderForms);\r\n        },\r\n\r\n        // Trigger render:forms once every form has triggered render:form\r\n        _triggerRenderForms: function () {\r\n            var children = this.children.map(function (formView) {\r\n                var formViewId = formView.cid;\r\n                formView.once('render:form', function () {\r\n                    children = _.without(children, formViewId);\r\n                    if (!children.length) {\r\n                        this.triggerMethod('render:forms', this);\r\n                    }\r\n                }, this);\r\n                return formView.cid;\r\n            }, this);\r\n        }\r\n\r\n    });\r\n\r\n    return GeneralActionFieldCollectionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.action.fields/general.action.field.behavior',[\r\n    'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n    'csui/lib/marionette', 'csui/widgets/metadata/metadata.general.action.fields',\r\n    'csui/widgets/metadata/general.action.fields/impl/general.action.fields.view',\r\n    'csui/dialogs/modal.alert/modal.alert'\r\n], function (_, $, Backbone, Marionette, metadataGeneralActionFields,\r\n        GeneralActionFieldCollectionView, ModalAlert) {\r\n    'use strict';\r\n\r\n    var GeneralActionFieldBehavior = Marionette.Behavior.extend({\r\n        constructor: function GeneralActionFieldBehavior(options, view) {\r\n            Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n            this.view = view;\r\n            this\r\n                .listenTo(this.view, 'render', this._insertFieldExtensions)\r\n                .listenTo(this.view, 'destroy', this._emptyExtensionRegion);\r\n\r\n            var self = this;\r\n            view.getGeneralActionFieldValues = function () {\r\n                var formValues = {};\r\n                // Forms with extra fields are rendered only if there\r\n                // were any field descriptors specified; there are no\r\n                // data without forms\r\n                if (self.fieldRegion) {\r\n                    self.fieldRegion.currentView.children.each(function (formView) {\r\n                        var values = formView.getValues(),\r\n                            roleName = formView.model.get(\"role_name\"),\r\n                            roles, role;\r\n                        if (values) {\r\n                            if (roleName) {\r\n                                roles = formValues.roles || (formValues.roles = {});\r\n                                role = roles[roleName] || (roles[roleName] = {});\r\n                                // With a role defined, merge the properties to the\r\n                                // roles.<role_name> object\r\n                                _.extend(role, values);\r\n                            } else {\r\n                                // With no role defined, merge the properties to the root\r\n                                // object literal with the general properties\r\n                                _.extend(formValues, values);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                return formValues;\r\n            };\r\n        },\r\n\r\n        _insertFieldExtensions: function () {\r\n            var fieldParent = this.getOption('fieldParent');\r\n            if (_.isFunction(fieldParent)) {\r\n                fieldParent = fieldParent.call(this.view);\r\n            }\r\n            if (fieldParent) {\r\n                fieldParent = this.view.$(fieldParent)[0];\r\n            }\r\n            if (!fieldParent) {\r\n                return;\r\n            }\r\n\r\n            var fieldDescriptors = this.getOption('fieldDescriptors');\r\n            if (_.isFunction(fieldDescriptors)) {\r\n                fieldDescriptors = fieldDescriptors.call(this.view);\r\n            }\r\n            if (!fieldDescriptors || !fieldDescriptors.length) {\r\n                return;\r\n            }\r\n\r\n            this.fieldRegion = new Marionette.Region({el: fieldParent});\r\n\r\n            var fieldViewOptions = this.getOption('fieldViewOptions');\r\n            if (_.isFunction(fieldViewOptions)) {\r\n                fieldViewOptions = fieldViewOptions.call(this.view);\r\n            }\r\n            var fieldModels = new Backbone.Collection(_.pluck(fieldDescriptors, 'formModel')),\r\n                fieldViews = new GeneralActionFieldCollectionView(_.extend({\r\n                    context: this.view.options.context,\r\n                    fieldDescriptors: fieldDescriptors,\r\n                    collection: fieldModels,\r\n                    node: this.view.options.node,\r\n                    mode: this.view.options.mode,\r\n                    generalFormView: this.view,\r\n                    fetchedModels: this.view.options.fetchedModels,\r\n                    displayedModels: this.view.options.displayedModels,\r\n                    originatingView: this.view.options.originatingView,\r\n                    metadataView: this.view.options.metadataView\r\n                }, fieldViewOptions));\r\n            this.listenTo(fieldViews, 'render:actions', function () {\r\n                this.view.triggerMethod('render:general:action:fields', fieldViews);\r\n            });\r\n            this.fieldRegion.show(fieldViews);\r\n        },\r\n\r\n        _emptyExtensionRegion: function () {\r\n            if (this.fieldRegion) {\r\n                this.fieldRegion.empty();\r\n            }\r\n        }\r\n\r\n    }, {\r\n\r\n        getFieldDescriptors: function (options) {\r\n            var methodName, parameters;\r\n            if (options.action === 'create') {\r\n                methodName = 'getGeneralActionFieldsForCreate';\r\n                parameters = [{forms: options.forms}];\r\n            } else if (options.action === 'copy') {\r\n                methodName = 'getGeneralActionFieldsForCopy';\r\n                parameters = [{forms: options.forms}];\r\n            } else if (options.action === 'move') {\r\n                methodName = 'getGeneralActionFieldsForMove';\r\n                parameters = [{forms: options.forms}];\r\n            }else if (options.action === 'restructure') {\r\n                // restructure functionality is similar to move, so we can reuse this method\r\n                methodName = 'getGeneralActionFieldsForMove';\r\n                parameters = [{forms: options.forms}];\r\n            }else {\r\n                methodName = 'getGeneralActionFields';\r\n            }\r\n            var promises = metadataGeneralActionFields.chain()\r\n                .map(function (fieldControllerDescriptor) {\r\n                    var Controller = fieldControllerDescriptor.get('controller'),\r\n                        controllerOptions = fieldControllerDescriptor.get('controllerOptions'),\r\n                        controller = new Controller(_.extend({\r\n                            context: options.context,\r\n                            model: options.node,\r\n                            fetchedModels: options.forms\r\n                        }, controllerOptions)),\r\n                        method = controller[methodName];\r\n                    return method && method.apply(controller, parameters);\r\n                })\r\n                .compact()\r\n                .value();\r\n            return $.when\r\n                .apply($, promises)\r\n                .then(function () {\r\n                    return _.flatten(arguments);\r\n                });\r\n        }\r\n\r\n    });\r\n\r\n    return GeneralActionFieldBehavior;\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/node/server.adaptor.mixin',[\r\n  'csui/lib/underscore', 'csui/lib/backbone', 'csui/utils/nodesprites',\r\n  'csui/controls/table/cells/size/size.view', 'csui/utils/base',\r\n  'csui/utils/url', 'csui/models/form', 'csui/models/version',\r\n  'csui/models/mixins/node.resource/node.resource.mixin',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (_, Backbone, NodeSpriteCollection, SizeView, base, Url,\r\n    FormModel, VersionModel, NodeResourceMixin, lang) {\r\n  'use strict';\r\n\r\n  var prototypeExt = {\r\n    makeServerAdaptor: function (options) {\r\n      return this;\r\n    },\r\n\r\n    url: function () {\r\n      var node   = this.options.node,\r\n          nodeId = node.get('id'),\r\n          url;\r\n      if (nodeId === undefined) {\r\n        // creation form\r\n        url = _.str.sformat('forms/nodes/create?type={0}&parent_id={1}',\r\n            node.get('type'), node.get('parent_id'));\r\n      } else {\r\n        if (node instanceof VersionModel) {\r\n          url = _.str.sformat('forms/nodes/versions/properties/general?id={0}&version_number={1}',\r\n              nodeId, node.get('version_number'));\r\n        } else {\r\n          // update form\r\n          url = _.str.sformat('forms/nodes/properties/general?id={0}', nodeId);\r\n        }\r\n      }\r\n      return Url.combine(this.connector.connection.url, url);\r\n    },\r\n\r\n    parse: function (response, options) {\r\n      if(!this.node) {\r\n        this.node = options.node;\r\n      }\r\n      // Some views may fail if one of the three properties was missing\r\n      var form  = _.extend({\r\n            data: {},\r\n            schema: {},\r\n            options: {}\r\n            // The server returns an array pf forms, although only one category\r\n            // was requested.  Normalize the response to be just a single form.\r\n          }, options.response || response.form || response.forms && response.forms[0] || response),\r\n          // Title usually does not come from the server\r\n          title = form.title || this.get('title') || lang.general;\r\n\r\n      form.options = _.omit(form.options, 'form');\r\n      if (!form.schema.title) {\r\n        form.schema.title = title;\r\n      }\r\n      if (!form.title) {\r\n        form.title = title;\r\n      }\r\n\r\n      this._addCreatorInfo(form, options);\r\n      this._addOwnerInfo(form, options);\r\n      this._addCreateDateInfo(form, options);\r\n      this._addModifyDateInfo(form, options);\r\n      this._addMimeTypeInfo(form, options);\r\n      this._addSizeInfo(form, options);\r\n      this._addItemidInfo(form, options);\r\n      this._ensurePlaceholder(form, options);\r\n      this._addReserveInfo(form, options);\r\n      this._addMimeTypeClassNameInfo(form, options);\r\n      this._addSystemAttributes(form,options);\r\n      return form;\r\n    },\r\n\r\n    _addSizeInfo: function (ret, options) {\r\n      var type = this.options.node.get('type');\r\n\r\n      this.sizeView = new SizeView({\r\n        model: this.options.node,\r\n        column: {name: this.options.node.has('size') ? \"size\" : \"file_size\"}\r\n      });\r\n\r\n      var refNode =\r\n              _.extend(ret.data, {\r\n                // TODO: Create a custom field showing the friendly size\r\n                // in the visible HTML element and the full size in bytes\r\n                // in a tooltip\r\n                size: this.sizeView.getValueData().formattedValue || this.options.node.get('size_formatted')\r\n              });\r\n\r\n      _.extend(ret.options.fields, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldSizeLabel,\r\n          placeholder: lang.alpacaPlaceholderNotAvailable,\r\n          type: \"text\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          title: lang.formFieldSizeLabel,\r\n          type: \"string\"\r\n        }\r\n      });\r\n    },\r\n\r\n    _addItemidInfo: function (ret, options) {\r\n      if (!!this.node) {\r\n        var type = this.options.node.get('type');\r\n        var refNode =\r\n                _.extend(ret.data, {\r\n                  itemId: this.node.get('id')\r\n                });\r\n\r\n        _.extend(ret.options.fields, {\r\n          itemId: {\r\n            hidden: false,\r\n            readonly: true,\r\n            label: lang.formFieldItemIdLabel,\r\n            placeholder: lang.alpacaPlaceholderNotAvailable,\r\n            type: \"text\"\r\n          }\r\n        });\r\n        _.extend(ret.schema.properties, {\r\n          itemId: {\r\n            hidden: false,\r\n            readonly: true,\r\n            label: lang.formFieldItemIdLabel,\r\n            placeholder: lang.alpacaPlaceholderNotAvailable,\r\n            type: \"text\",\r\n            tooltip: this.node.get('id')\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    _addCreateDateInfo: function (ret, options) {\r\n      if (!ret.options.fields.create_date) {\r\n        return;\r\n      }\r\n      ret.options.fields.create_date.type = 'datetime';\r\n      ret.options.fields.create_date.placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      ret.schema.properties.create_date.format = 'datetime';\r\n    },\r\n\r\n    _addModifyDateInfo: function (ret, options) {\r\n      if (!ret.options.fields.modify_date) {\r\n        return;\r\n      }\r\n      ret.options.fields.modify_date.type = 'datetime';\r\n      ret.options.fields.modify_date.placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      ret.schema.properties.modify_date.format = 'datetime';\r\n    },\r\n\r\n    _addOwnerInfo: function (ret, options) {\r\n      var ownerField = 'owner_user_id';\r\n      // for version, we are still using v1 call for now until switch to v2\r\n      if (this.node instanceof VersionModel) {\r\n        ownerField = 'owner_id';  // v1 has a slightly different field name\r\n      }\r\n      if (!ret.options.fields[ownerField]) {\r\n        return;\r\n      }\r\n      var isOwnerExists = this.node.get('owner_user_id') === -3,\r\n          owner         = isOwnerExists ? {\r\n            'id': -3\r\n          } : (this.node.get('owner_user_id_expand') ||\r\n               this.node.get('owner_user_id') ||\r\n               this.node.get('owner_id'));\r\n\r\n      if (owner && owner instanceof Object) {\r\n        ret.data[ownerField] = owner.id;\r\n        ret.options.fields[ownerField].type = 'otcs_user';\r\n        ret.options.fields[ownerField].type_control = {\r\n          name: isOwnerExists ? lang.NoOwner : base.formatMemberName(owner)\r\n        };\r\n        ret.options.fields[ownerField].placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      }\r\n    },\r\n\r\n    _addCreatorInfo: function (ret, options) {\r\n      if (!ret.options.fields.create_user_id) {\r\n        return;\r\n      }\r\n      var creator = this.node.get('create_user_id_expand') ||\r\n                    this.node.get('create_user_id');\r\n      if (creator && creator instanceof Object) {\r\n        ret.data.create_user_id = creator.id;\r\n        ret.options.fields.create_user_id.type = 'otcs_user';\r\n        ret.options.fields.create_user_id.type_control = {\r\n          name: base.formatMemberName(creator)\r\n        };\r\n        ret.options.fields.create_user_id.placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      }\r\n    },\r\n\r\n    _addMimeTypeInfo: function (ret, options) {\r\n      var type = this.options.node.get('type');\r\n      var node = this.options.node;\r\n\r\n      _.extend(ret.data, {\r\n        mime_type: NodeSpriteCollection.findTypeByNode(node)\r\n      });\r\n\r\n      _.extend(ret.options.fields, {\r\n        mime_type: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldTypeLabel,\r\n          placeholder: lang.alpacaPlaceholderNotAvailable,\r\n          type: \"text\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        mime_type: {\r\n          hidden: false,\r\n          readonly: true,\r\n          title: lang.formFieldTypeLabel,\r\n          type: \"string\"\r\n        }\r\n      });\r\n    },\r\n\r\n    // will retrieve corr. className of MimeType\r\n    _addMimeTypeClassNameInfo: function (ret, options) {\r\n      var type = this.options.node.get('type');\r\n      var node = this.options.node;\r\n      _.extend(ret.data, {\r\n        mimeTypeClassName: NodeSpriteCollection.findClassByNode(node)\r\n      });\r\n    },\r\n\r\n    _ensurePlaceholder: function (ret, options) {\r\n      // ensure Description placeholder\r\n      if (ret.options.fields.description) {\r\n        var desc = ret.options.fields.description;\r\n        if (desc.placeholder === undefined || desc.placeholder.length === 0) {\r\n          desc.placeholder = lang.alpacaPlaceholderDescription;\r\n        }\r\n      }\r\n    },\r\n\r\n    _addReserveInfo: function (ret, options) {\r\n      var refNode =\r\n              _.extend(ret.data, {\r\n                reserve_info: ((!!this.options.node.get('reserved')) ? this : undefined)\r\n              });\r\n\r\n      _.extend(ret.options.fields, {\r\n        reserve_info: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldReservedByLabel,\r\n          type: \"otcs_reserve_button\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        reserve_info: {\r\n          hidden: false,\r\n          readonly: true,\r\n          type: \"otcs_reserve_button\"\r\n        }\r\n      });\r\n    },\r\n\r\n    _addSystemAttributes: function (ret, options) {\r\n      var formdata = this.options.node.systemattributes,\r\n          self = this;\r\n      if (formdata !== undefined) {\r\n        Object\r\n            .keys(formdata.data)\r\n            .forEach(function (data) {\r\n              ret.data[data] = formdata.data[data];\r\n              ret.options.fields[data] = formdata.options.fields[data];\r\n              ret.schema.properties[data] = formdata.schema.properties[data];\r\n            });\r\n        if ( ret.data.metadata_token !== undefined && ret.data.metadata_token.length > 0) {\r\n          self.options.node.state.set('metadata_token', ret.data.metadata_token);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, prototypeExt);\r\n    }\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/node/node.general.form.model',[\r\n  'csui/lib/jquery', 'csui/lib/underscore', 'csui/models/form',\r\n  'csui/models/mixins/node.resource/node.resource.mixin',\r\n  'csui/widgets/metadata/general.panels/node/server.adaptor.mixin',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function ($, _, FormModel, NodeResourceMixin, ServerAdaptorMixin,\r\n    lang) {\r\n  'use strict';\r\n\r\n  var NodeGeneralFormModel = FormModel.extend({\r\n    defaults: {\r\n      id: 'general'\r\n    },\r\n\r\n    constructor: function NodeGeneralFormModel(attributes, options) {\r\n      FormModel.prototype.constructor.apply(this, arguments);\r\n\r\n      this.makeNodeResource(options)\r\n          .makeServerAdaptor(options);\r\n    }\r\n  });\r\n\r\n  NodeResourceMixin.mixin(NodeGeneralFormModel.prototype);\r\n  ServerAdaptorMixin.mixin(NodeGeneralFormModel.prototype);\r\n\r\n  return NodeGeneralFormModel;\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/document/document.general.form.model',['csui/lib/underscore', 'csui/utils/base',\r\n  'csui/controls/table/cells/size/size.view',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (_, base, SizeView, NodeGeneralFormModel, lang) {\r\n  'use strict';\r\n\r\n  var DocumentGeneralFormModel = NodeGeneralFormModel.extend({\r\n\r\n    constructor: function DocumentGeneralFormModel(attributes, options) {\r\n      NodeGeneralFormModel.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    parse: function (response, options) {\r\n      var form = NodeGeneralFormModel.prototype.parse.apply(this, arguments);\r\n\r\n      this._addSizeInfo(form, options);\r\n\r\n      return form;\r\n    },\r\n\r\n    _addSizeInfo: function (ret, options) {\r\n      var type        = this.options.node.get('type'),\r\n          val         = this.options.node.has('size'),\r\n          column_name = (val ? '' : 'file_') + 'size';\r\n      this.sizeView = new SizeView({\r\n        model: this.options.node,\r\n        column: {name: column_name}\r\n      });\r\n\r\n      var sizeVal = this.sizeView.getValueData().formattedValue,\r\n          refNode =\r\n              _.extend(ret.data, {\r\n                size: !!sizeVal ? sizeVal :\r\n                      base.getReadableFileSizeString(this.options.node.get('size'))\r\n\r\n              });\r\n\r\n\r\n      _.extend(ret.options.fields, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldSizeLabel,\r\n          placeholder: lang.alpacaPlaceholderNotAvailable,\r\n          type: \"text\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          title: lang.formFieldSizeLabel,\r\n          type: \"string\",\r\n          tooltip: this.sizeView.getValueData().value\r\n        }\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return DocumentGeneralFormModel;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/node/impl/node.general.form',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn cs-form-leftcolumn\\\">\\r\\n      {{#if options.showitemId}}\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      {{/if}}\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      {{#if options.showSize}}\\r\\n      <div class=\\\"size_section general-information\\\"></div>\\r\\n      {{/if}}\\r\\n      <div class=\\\"systemattributes_section general-information\\\"></div>\\r\\n      <div class=\\\"reserve_info general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n      <div class=\\\"csui-action-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"default_thumbnail thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.aria_label}}\\\"></span>\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_node_impl_node.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/node/impl/node.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/node/node.general.form.view',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n  'csui/controls/form/form.view',\r\n  'csui/behaviors/default.action/default.action.behavior',\r\n  'csui/widgets/metadata/general.form.fields/general.form.field.behavior',\r\n  'csui/widgets/metadata/general.action.fields/general.action.field.behavior',\r\n  'csui/models/version',\r\n  'csui/controls/globalmessage/globalmessage',\r\n  'csui/models/appliedcategories/systemattributes.model',\r\n  'hbs!csui/widgets/metadata/general.panels/node/impl/node.general.form',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/utils/base',\r\n  'i18n',\r\n  'csui/utils/contexts/factories/next.node',\r\n  'csui/utils/commands', 'csui/utils/commands/versions', 'csui/utils/url',\r\n  'css!csui/widgets/metadata/general.panels/node/impl/node.general.form'\r\n], function (_, $, Backbone, FormView, DefaultActionBehavior,\r\n    GeneralFormFieldBehavior, GeneralActionFieldBehavior, VersionModel,\r\n    GlobalMessage, SystemAttributesModel, formTemplate, lang, base, i18n, NextNodeModelFactory, commands,\r\n    versionCommands, Url) {\r\n  'use strict';\r\n\r\n  var NodeGeneralFormView = FormView.extend({\r\n    behaviors: {\r\n      defaultAction: {\r\n        behaviorClass: DefaultActionBehavior\r\n      },\r\n      generalFormFields: {\r\n        behaviorClass: GeneralFormFieldBehavior,\r\n        fieldParent: '.csui-extra-general-fields',\r\n        fieldDescriptors: function () {\r\n          return this.options.generalFormFieldDescriptors;\r\n        },\r\n        fieldViewOptions: function () {\r\n          return {\r\n            context: this.options.context,\r\n            node: this.node,\r\n            mode: this.options.mode,\r\n            originatingView: this,\r\n            metadataView: this.options.metadataView\r\n          };\r\n        }\r\n      },\r\n      generalActionFields: {\r\n        behaviorClass: GeneralActionFieldBehavior,\r\n        fieldParent: '.csui-action-fields',\r\n        fieldDescriptors: function () {\r\n          return this.options.generalActionFieldDescriptors;\r\n        },\r\n        fieldViewOptions: function () {\r\n          return {\r\n            context: this.options.context,\r\n            node: this.node,\r\n            mode: this.options.mode,\r\n            originatingView: this,\r\n            metadataView: this.options.metadataView\r\n          };\r\n        }\r\n      }\r\n    },\r\n\r\n    className: 'cs-form csui-general-form',\r\n\r\n    // Default field set that needs to be refreshed while modifying any field in general form.\r\n    // it can be extended if a particular module need to update more field.\r\n    fieldToRefresh: ['modify_date', 'reserve_info'],\r\n\r\n    constructor: function NodeGeneralFormView(options) {\r\n      FormView.prototype.constructor.call(this, options);\r\n      this.node = this.options.node;\r\n      // extend fieldToRefresh from options.\r\n      this.fieldToRefresh = _.union(this.fieldToRefresh, (options.fieldToRefresh || []));\r\n      this.listenTo(this, 'change:field', this._saveField);\r\n      this.listenTo(this.node, 'change', _.bind(function () {\r\n        if (this.mode !== \"create\") {\r\n          this.model.fetch();\r\n        }\r\n\r\n        // The model event is no longer triggered. If a single form field\r\n        // is re-rendered, needs to let metadata keyboard navigation know\r\n        // to refresh the list of tabable elements.\r\n        var event = $.Event('tab:content:field:changed');\r\n        this.$el.trigger(event);\r\n      }, this));\r\n      this.listenTo(this, 'before:destroy', this._stopListeningToThumbnailClick);\r\n      this.listenTo(this, 'update:scrollbar', this.updateScrollbar);\r\n      var action = this.defaultActionController.getAction(this.options.node);\r\n      if (!action) {\r\n        this.noDefaultActionExist = true;\r\n      }\r\n      this.mlDataAvailable = base.getMetadataLanguageInfo().enabled;\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n\r\n    onRequestProcessing: function (view) {\r\n      this.propagatedView = view;\r\n    },\r\n\r\n    updateScrollbar: function () {\r\n      this.$el.closest('.binf-tab-content').scrollTop(0);\r\n    },\r\n\r\n    formTemplateHelpers: function () {\r\n      var type_name = this.node.get('type_name'),\r\n          node_name = this.node.get('name');\r\n      return {\r\n        showThumbnail: this.mode !== 'create',\r\n        showitemId: this.model.get('data').itemId !== null && this.model.get('data').itemId !== undefined\r\n                      && this.model.get('data').itemId !== \"\",\r\n        showSize: (this.model.get('data').size && this.model.get('data').size !== \"\") ||\r\n          (this.model.get('data').size_formatted && this.model.get('data').size_formatted !== \"\"),\r\n        reserved: this.node.get('reserved'),\r\n        title: this.noDefaultActionExist ? \"\" : _.str.sformat(lang.openDoc, type_name),\r\n\r\n        showShortcutSection: !(this.options.metadataView.options.model.original && (this.options.metadataView.options.model.original.get('type') === undefined || this.options.metadataView.options.model.original.get('type') < 0) || !this.options.metadataView.options.model.get('original_id')),\r\n        aria_label: this.noDefaultActionExist ? \"\" :\r\n          _.str.sformat(lang.openDocAria, type_name, node_name)\r\n      };\r\n    },\r\n\r\n    _getLayout: function () {\r\n      if (this.alpaca.options.fields.description) {\r\n        this.alpaca.options.fields.description.isTextareaAutoHeight = true;\r\n        if (this.mlDataAvailable) {\r\n          this.alpaca.options.fields.description.type = 'otcs_multilingual_textarea';\r\n          this.alpaca.options.fields.description.keyAttribute = 'description_multilingual';\r\n        }\r\n      }\r\n      var template = this.getOption('formTemplate'),\r\n          html = template.call(this, {\r\n            data: this.alpaca.data,\r\n            mode: this.mode\r\n          }),\r\n          bindings = this._getBindings(),\r\n          view = {\r\n            parent: 'bootstrap-csui',\r\n            layout: {\r\n              template: html,\r\n              bindings: bindings\r\n            }\r\n          };\r\n      return view;\r\n    },\r\n\r\n    _getBindings: function () {\r\n      var bindings = {\r\n        name: 'name_section',\r\n        create_date: '.owner_section',\r\n        create_user_id: '.owner_section',\r\n        modify_date: '.owner_section',\r\n        owner_user_id: '.owner_section',\r\n        mime_type: '.typename_section',\r\n        description: '.description_section',\r\n        itemId: '.owner_section',\r\n        size: '.size_section'\r\n      };\r\n      // adding 'reserve_info' only for supported object types.\r\n      if (this.node.get(\"reserved\")) {\r\n        bindings = _.extend(bindings, {\r\n          reserve_info: \".reserve_info\"\r\n        });\r\n      }\r\n      // adding 'systemattributes' only for supported object types.\r\n      if (this.node.systemattributes) {\r\n        var formdata = this.node.systemattributes;\r\n        Object\r\n            .keys(formdata.data)\r\n            .forEach(function (data) {\r\n              bindings[data] = \".systemattributes_section\";\r\n            });\r\n      }\r\n      // for version, extend the bindings because the v1 and v2 keys are slightly different\r\n      // To support wiki and document Versions\r\n      if (this.node instanceof VersionModel) {\r\n        bindings = _.extend(bindings, {\r\n          version_number_name: \".owner_section\",\r\n          owner_id: \".owner_section\"\r\n        });\r\n      }\r\n      return bindings;\r\n    },\r\n\r\n    _saveField: function (args) {\r\n      // This view is shared for both creation and editing scenarios.\r\n      // Do not save immediately in the creation mode.  The creation dialog\r\n      // has a button to get all field values and perform the action.\r\n      if (this.mode === 'create') {\r\n        return;\r\n      }\r\n\r\n      var field = args.targetField,\r\n          changes = {},\r\n\r\n          defaultLocale = base.getMetadataLanguageInfo().defaultLanguage;\r\n      changes[field.name] = this.mlDataAvailable && _.isObject(field.value) ?\r\n                            field.value[defaultLocale] : field.value;\r\n      if (args && args.fieldView && args.fieldView.mlDataChanged && args.fieldView.alpacaField\r\n          && args.fieldView.alpacaField.type === 'otcs_multilingual_textarea') {\r\n        var key = args.fieldView.keyAttribute,\r\n            mlData = args.model && args.model.node &&\r\n                     args.model.node.get(key);\r\n        key && (changes[key] = mlData);\r\n      }\r\n      this._saveChanges(changes);\r\n    },\r\n\r\n    _saveChanges: function (changes) {\r\n      var MN = '{0}:_saveGeneralChanges {1} {2}';\r\n      var node = this.model.options.node,\r\n          self = this,\r\n          isThumbnailView = self.options.metadataView &&\r\n                            self.options.metadataView.thumbnailViewState,\r\n          isSystemAttributeFields = this._checkSystemAttributeFields(changes),\r\n          fieldsUpdated = isSystemAttributeFields ?\r\n                          this._systemAttributesSave(changes, node) :\r\n                          this._nodesave(changes, node, isThumbnailView);\r\n      this.isDataUpdating = true;\r\n      fieldsUpdated.then(function () {\r\n        if (isSystemAttributeFields) {\r\n          var attr = node.systemattributes,\r\n              changefield = _.toArray(Object.keys(changes));\r\n          attr.data[changefield[0]] = self.changes[changefield[0]];\r\n        }\r\n        return node.fetch();\r\n      }).fail(function (jqxhr) {\r\n        var preValues = self.model.get('data');\r\n        // Reset form data and refresh fields\r\n        self.form.children.forEach(function (formField) {\r\n          formField.setValue(preValues[formField.propertyId]);\r\n          formField.refresh();\r\n        });\r\n        var error = new base.Error(jqxhr);\r\n        GlobalMessage.showMessage('error', error.message);\r\n        self.trigger('forms:error');\r\n        if (self.alpaca.options.fields.description &&\r\n            self.alpaca.options.fields.description.isTextareaAutoHeight) {\r\n          self.trigger('update:scrollbar');\r\n        }\r\n      })\r\n          .always(_.bind(function () {\r\n            this.isDataUpdating = false;\r\n            //Unblocking the metadataView\r\n            this.options.metadataView && this.options.metadataView.unblockActions && \r\n              this.options.metadataView.unblockActions();\r\n            //Trigerring the event to proceed further actions if there is any\r\n            this.trigger(\"request:completed\", this.propagatedView);\r\n            this._unblockActions();\r\n          }, this));\r\n    },\r\n\r\n    updateRenderedForm: function (options) {\r\n      this.updateReserveFieldDisplay();\r\n      FormView.prototype.updateRenderedForm.apply(this, arguments);\r\n\r\n      this._showDefaultImage();\r\n      this._listenToThumbnailClick();\r\n      // default action\r\n      this.$('.thumbnail_section')\r\n          .on(\"focusin\", function (event) {\r\n            base.checkAndScrollElemToViewport(event.currentTarget);\r\n          });\r\n\r\n      // Let render:form triggered once all extra fields were rendered\r\n      var generalFormFieldDescriptors = this.options.generalFormFieldDescriptors;\r\n      if (generalFormFieldDescriptors && generalFormFieldDescriptors.length) {\r\n        this.listenToOnce(this, 'render:general:form:fields', options.async());\r\n      }\r\n    },\r\n\r\n    setFocus: function () {\r\n      //this.form.trigger('focus');\r\n      var nonReadOnlyFields = this.$form.find('.alpaca-field:not(.alpaca-readonly) button');\r\n      if (nonReadOnlyFields.length > 0) {\r\n        nonReadOnlyFields.first().trigger('focus');\r\n      }\r\n    },\r\n\r\n    updateForm: function () {\r\n      if (!!this.node.isReservedClicked || !!this.node.isUnreservedClicked) {\r\n        // only render when reserve or unreserve action is preformed.\r\n        this.render();\r\n        this.node.isReservedClicked = false;\r\n        this.node.isUnreservedClicked = false;\r\n      }\r\n      var alpacaForm = this.$el.alpaca('get'),\r\n          requiredSwitch = !!this.node.collection && !!this.node.collection.requireSwitched;\r\n      if (!!alpacaForm) {\r\n        var data = this.model.get('data');\r\n        for (var i = 0; i < this.fieldToRefresh.length; i++) {\r\n          var field = alpacaForm.childrenByPropertyId[this.fieldToRefresh[i]],\r\n              value = data[this.fieldToRefresh[i]];\r\n          if (!!field && field.getValue() !== value && !requiredSwitch) {\r\n            field.setValue(value);\r\n            field.refresh();\r\n          }\r\n        }\r\n      }\r\n      if (!this.thumbnail || (!this.thumbnail.imgUrl && (!this.thumbnail.node || !this.thumbnail.node.get('csuiThumbnailImageUrl')))) {\r\n        this._showDefaultImage();\r\n      }\r\n      this.updateReserveFieldDisplay();\r\n      return this;\r\n    },\r\n\r\n    updateReserveFieldDisplay: function () {\r\n      var reserveInfoElem = this.$el.find(\".reserve_info\");\r\n      if (!!this.node.get('reserved')) {\r\n        if (reserveInfoElem.hasClass(\"binf-hidden\")) {\r\n          reserveInfoElem.removeClass(\"binf-hidden\");\r\n        }\r\n      } else {\r\n        if (!reserveInfoElem.hasClass(\"binf-hidden\")) {\r\n          reserveInfoElem.addClass(\"binf-hidden\");\r\n        }\r\n      }\r\n    },\r\n\r\n    _showDefaultImage: function () {\r\n      // show thumbnail missing svg and hide img tag\r\n      var defaultThumbnailEl = this.$el.find('.default_thumbnail'),\r\n          className = 'thumbnail_missing';\r\n      //checking model is available or not\r\n      if (!!this.options && !!(this.options.model.get('data'))) {\r\n        className = this.options.model.get('data').mimeTypeClassName;\r\n      }\r\n      defaultThumbnailEl.addClass(className);\r\n      defaultThumbnailEl.removeClass('thumbnail_empty');\r\n      // event for keyboard navigation\r\n      var event = $.Event('tab:content:render');\r\n      this.$el.trigger(event);\r\n      if (!!this.noDefaultActionExist) {\r\n        this.$el.find('.default_thumbnail').addClass('thumbnail_disabled');\r\n      }\r\n    },\r\n\r\n    _listenToThumbnailClick: function () {\r\n      this._stopListeningToThumbnailClick();\r\n      this._thumbnailClickHandler = _.bind(this._handleThumbnailClick, this);\r\n      this.$('.thumbnail_section')\r\n          .on('click', this._thumbnailClickHandler);\r\n    },\r\n\r\n    _stopListeningToThumbnailClick: function () {\r\n      if (this._thumbnailClickHandler) {\r\n        this.$('.thumbnail_section')\r\n            .off('click', this._thumbnailClickHandler);\r\n        this._thumbnailClickHandler = undefined;\r\n      }\r\n    },\r\n\r\n    _handleThumbnailClick: function () {\r\n      var context = this.options.context;\r\n      var node = this.options.node;\r\n      var status = {nodes: new Backbone.Collection([node])};\r\n      var options = {\r\n        context: context,\r\n        originatingView: this\r\n      };\r\n      var command;\r\n\r\n      // TODO: Move this to the version-specific view.\r\n      if (node instanceof VersionModel) {\r\n        command = versionCommands.get('VersionOpen');\r\n        return command.execute(status, options);\r\n      }\r\n\r\n      // TODO: Move this to the document-specific view.\r\n      command = commands.get('Open');\r\n      if (command.enabled(status, options)) {\r\n        return command.execute(status, options);\r\n      }\r\n\r\n      // TODO: Remove this code. It breaks encapsulation of this component. It\r\n      // accesses a private method. Metadata should listen to events instead.\r\n      var nextNode = this.options.context.getModel(NextNodeModelFactory);\r\n      if (node.get(\"container\") && node.get('id') ===\r\n          nextNode.get(\"id\")) {\r\n        if (this.options.metadataView) {\r\n          this.options.metadataView._closeMetadata();\r\n        }\r\n        return;\r\n      }\r\n\r\n      this.triggerMethod('execute:DefaultAction', node);\r\n    },\r\n\r\n    _checkSystemAttributeFields: function (changes) {\r\n      var formdata = this.node && this.node.systemattributes,\r\n          fields = formdata && formdata.options && formdata.options.fields,\r\n          systemattributefields = fields && _.toArray(Object.keys(fields)),\r\n          changefield = _.toArray(Object.keys(changes));\r\n      return _.contains(systemattributefields, changefield[0]);\r\n    },\r\n\r\n    _nodesave: function (changes, node, isThumbnailView) {\r\n      return node.save(changes, {\r\n        wait: true,\r\n        silent: isThumbnailView,\r\n        patch: true\r\n      });\r\n    },\r\n\r\n    _systemAttributesSave: function (changes, node) {\r\n      var deferred = $.Deferred(),\r\n          connector = node.connector,\r\n          self = this;\r\n      self.changes = changes;\r\n      var systemAttributesModel = new SystemAttributesModel({}, {\r\n        connector: this.node.connector,\r\n        node: this.node,\r\n        id: node.get('id')\r\n      });\r\n      return systemAttributesModel.save(changes, {\r\n        type: 'PUT',\r\n        processData: false,\r\n        contentType: false\r\n      });\r\n    }\r\n  });\r\n\r\n  return NodeGeneralFormView;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/document/impl/document.general.form',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn cs-form-leftcolumn\\\">\\r\\n      {{#if options.showitemId}}\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      {{/if}}\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      {{#if options.showSize}}\\r\\n      <div class=\\\"size_section general-information\\\"></div>\\r\\n      {{/if}}\\r\\n      <div class=\\\"systemattributes_section general-information\\\"></div>\\r\\n      <div class=\\\"reserve_info general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"thumbnail_not_loaded thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.aria_label}}\\\"></span>\\r\\n          <img src=\\\"{{options.imgSrc}}\\\" class=\\\"img-doc-preview binf-hidden\\\"\\r\\n               alt=\\\"{{options.imgAlt}}\\\">\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_document_impl_document.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/document/impl/document.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/document/document.general.form.view',['csui/lib/underscore', 'csui/lib/jquery',\r\n  'csui/utils/thumbnail/thumbnail.object',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'hbs!csui/widgets/metadata/general.panels/document/impl/document.general.form',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/general.panels/document/impl/document.general.form'\r\n], function (_, $, Thumbnail, NodeGeneralFormView, formTemplate, lang) {\r\n  'use strict';\r\n\r\n  var DocumentGeneralFormView = NodeGeneralFormView.extend({\r\n\r\n    constructor: function DocumentGeneralFormView(options) {\r\n      NodeGeneralFormView.prototype.constructor.call(this, options);\r\n\r\n      this.thumbnail = this.options.thumbnail || new Thumbnail({\r\n            node: this.options.node\r\n          });\r\n      this.listenTo(this.thumbnail, 'loadUrl', this._showImage)\r\n          .listenTo(this.thumbnail, 'error', this._showDefaultImage)\r\n          .listenTo(this, 'destroy', function () {\r\n            this.thumbnail.destroy();\r\n          });\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n    fieldToRefresh: ['modify_date', 'reserve_info', 'mime_type', 'size'],\r\n    formTemplateHelpers: function () {\r\n      var type_name = this.node.get('type_name'),\r\n          doc_name  = this.node.get('name');\r\n      return {\r\n        showThumbnail: this.mode !== 'create',\r\n        title: _.str.sformat(lang.openDoc, type_name),\r\n        showitemId: this.model.get('data').itemId !== null && this.model.get('data').itemId !== undefined\r\n                      && this.model.get('data').itemId !== \"\",\r\n        showSize: (this.model.get('data').size && this.model.get('data').size !== \"\") ||\r\n          (this.model.get('data').size_formatted && this.model.get('data').size_formatted !== \"\"),\r\n        aria_label: _.str.sformat(lang.openDocAria, type_name, doc_name),\r\n        reserved: this.node.get('reserved'),\r\n        // a 1x1 transparent gif, to avoid an empty src tag\r\n        imgSrc: \"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=\",\r\n        imgAlt: lang.docPreviewAlt\r\n      };\r\n    },\r\n\r\n    _getBindings: function () {\r\n      var bindings = NodeGeneralFormView.prototype._getBindings.apply(this, arguments);\r\n      return _.extend(bindings, {\r\n        size: \".size_section\"\r\n      });\r\n    },\r\n\r\n    updateRenderedForm: function (options) {\r\n      NodeGeneralFormView.prototype.updateRenderedForm.apply(this, arguments);\r\n      if (this.mode !== 'create') {\r\n        var self = this;\r\n        //Just show image if url is available,otherwise load thumbnail\r\n        if (this.thumbnail.imgUrl || this.thumbnail.node.get('csuiThumbnailImageUrl')) {\r\n          this._showImage();\r\n        } else {\r\n          this.thumbnail.loadUrl();\r\n        }\r\n      }\r\n    },\r\n\r\n    _showImage: function () {\r\n      var self                 = this,\r\n          img                  = this.$el.find('.img-doc-preview'),\r\n          thumbnailNotLoadedEl = this.$el.find('.thumbnail_not_loaded');\r\n      img.attr(\"src\", this.thumbnail.imgUrl || this.thumbnail.node.get('csuiThumbnailImageUrl'));\r\n      img.prop('tabindex', '0');\r\n      img.one('load', function (evt) {\r\n\r\n        if (evt.target.clientHeight >= evt.target.clientWidth) {\r\n          img.addClass('cs-form-img-vertical');\r\n        } else {\r\n          img.addClass('cs-form-img-horizontal');\r\n        }\r\n        img.addClass('cs-form-img-border');\r\n        //hide the thumbnail background span and show the real img\r\n        thumbnailNotLoadedEl.addClass('binf-hidden');\r\n        img.removeClass('binf-hidden');\r\n\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n      });\r\n    },\r\n\r\n    _showDefaultImage: function () {\r\n      // show thumbnail missing svg and hide img tag\r\n      var img                  = this.$el.find('.img-doc-preview'),\r\n          thumbnailNotLoadedEl = this.$el.find('.thumbnail_not_loaded'),\r\n          className            = 'thumbnail_missing';\r\n      //checking model is available or not\r\n      if (!!this.options && !!(this.options.model.get('data'))) {\r\n        className = this.options.model.get('data').mimeTypeClassName;\r\n      }\r\n      // remove the old mime-type class , then update with new one.\r\n      !!thumbnailNotLoadedEl.prop(\"className\") &&\r\n      thumbnailNotLoadedEl.prop(\"className\").split(' ').forEach(_.bind(function (str) {\r\n        if (str.indexOf('mime') === 0) {\r\n          thumbnailNotLoadedEl.removeClass(str);\r\n        }\r\n      }, thumbnailNotLoadedEl));\r\n\r\n      thumbnailNotLoadedEl.addClass(className);\r\n      thumbnailNotLoadedEl.removeClass('thumbnail_empty');\r\n      thumbnailNotLoadedEl.removeClass('csui-icon-notification-error');\r\n      thumbnailNotLoadedEl.removeClass('binf-hidden');\r\n      img.addClass('binf-hidden');\r\n\r\n      // event for keyboard navigation\r\n      var event = $.Event('tab:content:render');\r\n      this.$el.trigger(event);\r\n    }\r\n  });\r\n\r\n  return DocumentGeneralFormView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.model',[\r\n  'csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'csui/models/specificnodemodel',\r\n  'csui/models/mixins/syncable.from.multiple.sources/syncable.from.multiple.sources.mixin'\r\n], function (_, NodeGeneralFormModel, SpecificNodeModel, SyncableMixin) {\r\n  'use strict';\r\n\r\n  var ShortcutGeneralFormModel = NodeGeneralFormModel.extend({\r\n\r\n    constructor: function ShortcutGeneralFormModel(attributes, options) {\r\n      NodeGeneralFormModel.prototype.constructor.apply(this, arguments);\r\n      this.makeSyncableFromMultipleSources(options);\r\n    },\r\n\r\n    _mergeSources: function (specificNodeModel, nodeGeneralFormModel) {\r\n      var specProperties    = specificNodeModel[0].forms[0], // for specific node propertie\r\n          generalProperties = nodeGeneralFormModel[0].forms[0]; // for general node properties\r\n\r\n      _.extend(generalProperties.data, specProperties.data);\r\n      _.extend(generalProperties.options.fields, specProperties.options.fields);\r\n      _.extend(generalProperties.schema.properties, specProperties.schema.properties);\r\n\r\n      generalProperties.options = _.omit(generalProperties.options, 'form');\r\n\r\n      this.set(generalProperties);  // fused properties\r\n    },\r\n\r\n    sync: function () {\r\n      var specNodeModel        = new SpecificNodeModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.node,\r\n            context: this.options.context\r\n          }),\r\n          nodeGeneralModel     = new NodeGeneralFormModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.options.node,\r\n            context: this.options.context\r\n          }),\r\n          specificModelPromise = specNodeModel.fetch(),\r\n          generalModelPromise  = nodeGeneralModel.fetch(),\r\n          options              = {parse: false};\r\n      return this.syncFromMultipleSources(\r\n          [specificModelPromise, generalModelPromise], this._mergeSources, options);\r\n    }\r\n  });\r\n  SyncableMixin.mixin(ShortcutGeneralFormModel.prototype);\r\n  return ShortcutGeneralFormModel;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn\\r\\n    cs-form-leftcolumn\\\">\\r\\n      {{#if options.showitemId}}\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      {{/if}}\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      <div class=\\\"systemattributes_section general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"default_thumbnail thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.title}}\\\"></span>\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        {{#if options.showShortcutSection}}\\r\\n        <div class=\\\"shortcut_section general-information\\\"></div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_shortcut_impl_shortcut.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.view',['csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'csui/utils/contexts/factories/node',\r\n  'hbs!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form',\r\n  'css!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form'\r\n], function (_, NodeGeneralFormView, NodeModelFactory, formTemplate) {\r\n  'use strict';\r\n\r\n  var ShortcutGeneralFormView = NodeGeneralFormView.extend({\r\n\r\n    constructor: function ShortcutGeneralFormView(options) {\r\n      NodeGeneralFormView.prototype.constructor.call(this, options);\r\n\r\n      // share the original node for deeper form fields code\r\n      if (options.context && options.node && options.node.original &&\r\n          options.node.original.get('id') > 0) {\r\n        // Create the node model or do nothing if it exists\r\n        options.context.getModel(NodeModelFactory, {\r\n          // Add unique id to the propertyPrefix for this object\r\n          attributes: {id: options.node.original.get('id')},\r\n          // Pass the property value using the propertyPrefix of the factory\r\n          node: options.node.original,\r\n          // Discard the model during context change to prevent its re-fetch \r\n          temporary: true\r\n        });\r\n      }\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n\r\n    _getBindings: function () {\r\n      var bindings = NodeGeneralFormView.prototype._getBindings.apply(this, arguments);\r\n      return _.extend(bindings, {\r\n        original_id: '.shortcut_section'\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return ShortcutGeneralFormView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/url/url.general.form.model',['csui/lib/jquery', 'csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'csui/models/specificnodemodel',\r\n  'csui/models/mixins/syncable.from.multiple.sources/syncable.from.multiple.sources.mixin',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function ($, _, NodeGeneralFormModel, SpecificNodeModel, SyncableMixin, lang) {\r\n  'use strict';\r\n\r\n  var UrlGeneralFormModel = NodeGeneralFormModel.extend({\r\n\r\n    constructor: function UrlGeneralFormModel(attributes, options) {\r\n      NodeGeneralFormModel.prototype.constructor.apply(this, arguments);\r\n      this.makeSyncableFromMultipleSources(options);\r\n    },\r\n\r\n    _mergeSources: function (specificNodeModel, nodeGeneralFormModel) {\r\n      var specProperties    = specificNodeModel[0].forms[0], // for specific node propertie\r\n          generalProperties = nodeGeneralFormModel[0].forms[0]; // for general node properties\r\n\r\n      _.extend(generalProperties.data, specProperties.data);\r\n      _.extend(generalProperties.options.fields, specProperties.options.fields);\r\n      _.extend(generalProperties.schema.properties, specProperties.schema.properties);\r\n\r\n      generalProperties.options = _.omit(generalProperties.options, 'form');\r\n\r\n      this.set(generalProperties);  // fused properties\r\n    },\r\n\r\n    sync: function () {\r\n      var specNodeModel        = new SpecificNodeModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.node,\r\n            context: this.options.context\r\n          }),\r\n          nodeGeneralModel     = new NodeGeneralFormModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.options.node,\r\n            context: this.options.context\r\n          }),\r\n          specificModelPromise = specNodeModel.fetch(),\r\n          generalModelPromise  = nodeGeneralModel.fetch(),\r\n          options              = {parse: false};\r\n      return this.syncFromMultipleSources(\r\n          [specificModelPromise, generalModelPromise], this._mergeSources, options);\r\n    }\r\n  });\r\n\r\n  SyncableMixin.mixin(UrlGeneralFormModel.prototype);\r\n  return UrlGeneralFormModel;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/url/impl/url.general.form',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn\\r\\n    cs-form-leftcolumn\\\">\\r\\n      {{#if options.showitemId}}\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      {{/if}}\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      <div class=\\\"systemattributes_section general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"default_thumbnail thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.title}}\\\"></span>\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"url_section general-information\\\"></div>\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_url_impl_url.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/url/impl/url.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/url/url.general.form.view',['csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'hbs!csui/widgets/metadata/general.panels/url/impl/url.general.form',\r\n  'css!csui/widgets/metadata/general.panels/url/impl/url.general.form'\r\n], function (_, NodeGeneralFormView, formTemplate) {\r\n  'use strict';\r\n\r\n  var UrlGeneralFormView = NodeGeneralFormView.extend({\r\n\r\n    constructor: function UrlGeneralFormView(options) {\r\n      NodeGeneralFormView.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n\r\n    _getBindings: function () {\r\n      var bindings = NodeGeneralFormView.prototype._getBindings.apply(this, arguments);\r\n      return _.extend(bindings, {\r\n        url: \".url_section\"\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return UrlGeneralFormView;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.general.panels',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/widgets/metadata/general.panels/document/document.general.form.model',\r\n  'csui/widgets/metadata/general.panels/document/document.general.form.view',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.model',\r\n  'csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.view',\r\n  'csui/widgets/metadata/general.panels/url/url.general.form.model',\r\n  'csui/widgets/metadata/general.panels/url/url.general.form.view',\r\n  'csui/models/mixins/rules.matching/rules.matching.mixin',\r\n  // Load extra general property panel rules to be added to the built-in ones\r\n  'csui-ext!csui/widgets/metadata/metadata.general.panels'\r\n], function (_, Backbone,\r\n    DocumentGeneralFormModel, DocumentGeneralFormView,\r\n    NodeGeneralFormModel, NodeGeneralFormView,\r\n    ShortcutGeneralFormModel, ShortcutGeneralFormView,\r\n    UrlGeneralFormModel, UrlGeneralFormView,\r\n    RulesMatchingMixin, extraGeneralPanels) {\r\n  'use strict';\r\n\r\n  var MetadataGeneralPanelModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      contentModel: null,\r\n      contentView: null,\r\n      contentViewOptions: null\r\n    },\r\n\r\n    constructor: function MetadataGeneralPanelModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n      this.makeRulesMatching(options);\r\n    }\r\n\r\n  });\r\n\r\n  RulesMatchingMixin.mixin(MetadataGeneralPanelModel.prototype);\r\n\r\n  var MetadataGeneralPanelCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataGeneralPanelModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function MetadataGeneralPanelCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    findByNode: function (node) {\r\n      return this.find(function (item) {\r\n        return item.matchRules(node, item.attributes);\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  var generalPanels = new MetadataGeneralPanelCollection([\r\n    {\r\n      // document and Email\r\n      equals: {type: [144, 749]},\r\n      contentModel: DocumentGeneralFormModel,\r\n      contentView: DocumentGeneralFormView,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // shortcut and generation\r\n      equals: {type: [1, 2]},\r\n      contentModel: ShortcutGeneralFormModel,\r\n      contentView: ShortcutGeneralFormView,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // url\r\n      equals: {type: 140},\r\n      contentModel: UrlGeneralFormModel,\r\n      contentView: UrlGeneralFormView,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // default node\r\n      contentModel: NodeGeneralFormModel,\r\n      contentView: NodeGeneralFormView,\r\n      sequence: 10000\r\n    }\r\n  ]);\r\n\r\n  if (extraGeneralPanels) {\r\n    generalPanels.add(_.flatten(extraGeneralPanels, true));\r\n  }\r\n\r\n  return generalPanels;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/property.panels/general/metadata.general.property.controller',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'csui/models/form', 'csui/controls/form/form.view',\r\n  'csui/widgets/metadata/metadata.general.panels'\r\n], function (_, $, Marionette, FormModel, FormView, generalPanels) {\r\n  'use strict';\r\n\r\n  var MetadataGeneralPropertyController = Marionette.Controller.extend({\r\n\r\n    constructor: function MetadataExternalPropertyController(options) {\r\n      Marionette.Controller.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    getPropertyPanels: function (options) {\r\n      var generalForm, generalPanel, formModel, content, \r\n      formOptions = {\r\n        connector: this.connector,\r\n        node: this.options.model,\r\n        context: this.options.context\r\n      };\r\n\r\n      if (options.forms && options.forms.models) {\r\n        generalForm = _.find(options.forms.models, function (model) {\r\n          return model.get(\"role_name\") === undefined; // role_name is undefined for general category\r\n        });\r\n        if(generalForm) {\r\n          formOptions.response = options.forms.models[0].attributes;\r\n          formOptions.parse = true;\r\n        }\r\n      }\r\n\r\n      generalPanel = this._getGeneralPanel();\r\n      formModel = new generalPanel.model(generalForm, formOptions);\r\n      content = [{\r\n        model: formModel,\r\n        contentView: generalPanel.contentView,\r\n        contentViewOptions: generalPanel.contentViewOptions\r\n      }];\r\n\r\n      if (generalForm) {\r\n        return $.Deferred().resolve(content).promise();\r\n      } else {\r\n        return formModel.fetch().then(function () {\r\n            return content;\r\n          });\r\n      }\r\n    },\r\n\r\n    getPropertyPanelsForCreate: function (options) {\r\n      var generalPanel = this._getGeneralPanel(),\r\n          deferred = $.Deferred(),\r\n          formModel = options.forms.findWhere({id: 'general'});\r\n      // The 'v1/forms/nodes/create' always returns the general form.\r\n      // If other collection is used to fetch the pre-filled forms, it\r\n      // has to include some form with the 'general' id too\r\n      if (!formModel) {\r\n        throw new Error('General form missing.');\r\n      }\r\n      formModel = new generalPanel.model(formModel.attributes, {\r\n        connector: this.connector,\r\n        node: this.options.model,\r\n        parse: true\r\n      });\r\n      return deferred\r\n          .resolve([{\r\n            model: formModel,\r\n            contentView: generalPanel.contentView,\r\n            contentViewOptions: generalPanel.contentViewOptions\r\n          }])\r\n          .promise();\r\n    },\r\n\r\n    getPropertyPanelsForMove: function (options) {\r\n      return this._getPropertyPanelsForMoveAndCopy(options);\r\n    },\r\n\r\n    getPropertyPanelsForCopy: function (options) {\r\n      return this._getPropertyPanelsForMoveAndCopy(options);\r\n    },\r\n\r\n    // Add read-only general tab fro move and copy scenarios;\r\n    // useless for the operation, but the user may like to see\r\n    // more information about the copied items and is ready to\r\n    // pay the price for the fetching server call.\r\n    _getPropertyPanelsForMoveAndCopy: function (options) {\r\n      var generalPanel = this._getGeneralPanel(),\r\n          formModel = new generalPanel.model(undefined, {\r\n            connector: this.connector,\r\n            node: this.options.model\r\n          }),\r\n          self = this;\r\n      return formModel\r\n          .fetch()\r\n          .then(function () {\r\n            return [{\r\n              model: formModel,\r\n              contentView: generalPanel.contentView,\r\n              contentViewOptions: generalPanel.contentViewOptions\r\n            }];\r\n          });\r\n    },\r\n\r\n    _getGeneralPanel: function () {\r\n      var panel = generalPanels.findByNode(this.options.model);\r\n      return {\r\n        model: panel.get('contentModel') || FormModel,\r\n        contentView: panel.get('contentView') || FormView,\r\n        contentViewOptions: panel.get('contentViewOptions')\r\n      };\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataGeneralPropertyController;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.property.panels',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/widgets/metadata/property.panels/general/metadata.general.property.controller',\r\n  // Load extra property panels to be added to the built-in tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.property.panels'\r\n], function (_, Backbone, MetadataGeneralPropertyController, extraPropertyPanels) {\r\n\r\n  var MetadataPropertyPanelModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      controller: null,\r\n      controllerOptions: null\r\n    },\r\n\r\n    constructor: function MetadataPropertyPanelModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataPropertyPanelCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataPropertyPanelModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function MetadataPropertyPanelCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataPropertyPanels = new MetadataPropertyPanelCollection([\r\n    {\r\n      sequence: 10,\r\n      controller: MetadataGeneralPropertyController\r\n    }\r\n  ]);\r\n\r\n  if (extraPropertyPanels) {\r\n    extraPropertyPanels = _.flatten(extraPropertyPanels, true);\r\n    _.each(extraPropertyPanels, function () {\r\n      var sequence = extraPropertyPanels.sequence;\r\n      if (sequence < 10 || sequence > 100) {\r\n        throw new Error('Sequence must be greater or equal to 10 and less or equal to 100.');\r\n      }\r\n    });\r\n    metadataPropertyPanels.add(extraPropertyPanels);\r\n  }\r\n\r\n  return metadataPropertyPanels;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"binf-dropdown\\\">\\r\\n  <button id=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"btnId\") || (depth0 != null ? lookupProperty(depth0,\"btnId\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"btnId\",\"hash\":{},\"loc\":{\"start\":{\"line\":2,\"column\":14},\"end\":{\"line\":2,\"column\":23}}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-dropdown-toggle\\\"\\r\\n          data-binf-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"\\r\\n          aria-label=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"addTitleTooltip\") || (depth0 != null ? lookupProperty(depth0,\"addTitleTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"addTitleTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":4,\"column\":22},\"end\":{\"line\":4,\"column\":41}}}) : helper)))\n    + \"\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"addTitleTooltip\") || (depth0 != null ? lookupProperty(depth0,\"addTitleTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"addTitleTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":4,\"column\":50},\"end\":{\"line\":4,\"column\":69}}}) : helper)))\n    + \"\\\">\\r\\n    <span class=\\\"csui-button-icon icon-toolbarAdd\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"addTitleTooltip\") || (depth0 != null ? lookupProperty(depth0,\"addTitleTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"addTitleTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":5,\"column\":58},\"end\":{\"line\":5,\"column\":77}}}) : helper)))\n    + \"\\\"></span>\\r\\n  </button>\\r\\n  <ul class=\\\"binf-dropdown-menu\\\" role=\\\"menu\\\"></ul>\\r\\n</div>\\r\\n<div class=\\\"csui-loading-parent-wrapper binf-disabled binf-hidden\\\">\\r\\n  <span class=\\\"csui-loading-dots-wrapper\\\">\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n  </span>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_add.properties_add.properties.dropdown.menu', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',[],function(){});\n","csui.define('csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu.view',[\r\n  'module', \"csui/lib/jquery\", \"csui/lib/underscore\", \"csui/lib/backbone\", \"csui/lib/marionette\",\r\n  'csui/utils/log', 'csui/controls/toolbar/toolitem.view', 'csui/controls/progressblocker/blocker',\r\n  'csui/models/nodes', 'csui/controls/toolbar/toolitems.filtered.model', 'csui/utils/commands',\r\n  'csui/behaviors/dropdown.menu/dropdown.menu.behavior',\r\n  'hbs!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',\r\n  'csui/lib/binf/js/binf'\r\n], function (module, $, _, Backbone, Marionette, log, ToolItemView, BlockingView,\r\n    NodeCollection, FilteredToolItemsCollection, commands, DropdownMenuBehavior,\r\n    template, lang) {\r\n  'use strict';\r\n\r\n  log = log(module.id);\r\n\r\n  //\r\n  // This view shows the '+' icon for add properties commands such as 'add categories',\r\n  // 'add classifications', etc.\r\n  // - When there is only one command (for example: just 'add categories'), the '+' is just a\r\n  // command icon that would launch the only only command when the user clicks on it.\r\n  // - When there are two or more commands, the '+' icon is a dropdown menu that shows all the\r\n  // available commands.\r\n  //\r\n  // Params:\r\n  // - suppressAddProperties <boolean> : true to suppress the '+' icon\r\n  //\r\n  var AddPropertiesDropdownMenuView = Marionette.CompositeView.extend({\r\n\r\n    className: \"metadata-add-properties\",\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      return {\r\n        btnId: _.uniqueId('addPropertiesButton'),\r\n        addTitleTooltip: (this.collection.length === 1 ?\r\n                          this.collection.at(0).get('name') : lang.addNewProperties)\r\n      };\r\n    },\r\n\r\n    childView: ToolItemView,\r\n    childViewContainer: \"ul.binf-dropdown-menu\",\r\n    childViewOptions: function (model) {\r\n      return {\r\n        noMenuRoles: undefined\r\n      };\r\n    },\r\n\r\n    behaviors: {\r\n      DropdownMenuBehavior: {\r\n        behaviorClass: DropdownMenuBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function AddPropertiesDropdownMenuView(options) {\r\n      options || (options = {});\r\n      this.context = options.context;\r\n      this.commands = options.commands || commands;\r\n      this.node = options.node;\r\n      this.container = options.container;\r\n      this.formCollection = options.collection;\r\n      this.originalFormCollection = options.formCollection;\r\n      this.listenTo(this.formCollection, \"reset\", this._updateMenuItems);\r\n\r\n      this.originatingView = options.originatingView;\r\n      if (options.blockingParentView) {\r\n        BlockingView.delegate(this, options.blockingParentView);\r\n      } else {\r\n        BlockingView.imbue(this);\r\n      }\r\n\r\n      var status = {\r\n        nodes: new NodeCollection([options.node]),\r\n        container: options.container,\r\n        formCollection: this.formCollection,\r\n        originalFormCollection: this.originalFormCollection,\r\n        context: options.context\r\n      };\r\n\r\n      var toolbarName = 'addPropertiesToolbar';\r\n      var toolItemFactory = options.toolbarItems[toolbarName];\r\n      options.collection = new FilteredToolItemsCollection(\r\n          toolItemFactory, {\r\n            status: status,\r\n            commands: this.commands,\r\n            delayedActions: options.containerCollection &&\r\n                            options.containerCollection.delayedActions,\r\n            mask: options.toolbarItemsMask\r\n          });\r\n\r\n      Marionette.CompositeView.prototype.constructor.apply(this, arguments);\r\n\r\n      // Passing the el to the ctor prevents creating an own el, including\r\n      // setting its attributes.  The caller must ensure the right tag.\r\n      if (options.el) {\r\n        $(options.el).addClass(_.result(this, \"className\"));\r\n      }\r\n\r\n      this.listenTo(this, \"childview:toolitem:action\", this._triggerMenuItemAction)\r\n          .listenTo(this.node.actions, 'sync update', this._reRender)\r\n          .listenTo(Backbone, 'closeToggleAction', this._closeToggle);\r\n\r\n      if (options.containerCollection && options.containerCollection.delayedActions) {\r\n        this.listenTo(options.containerCollection.delayedActions, 'sync', this._reRender);\r\n      }\r\n\r\n      this.listenTo(this.node, 'sync change', function () {\r\n        this.node.set('csuiAddPropertiesActionsRetrieved', false, {silent: true});\r\n      });\r\n    },\r\n\r\n    _updateMenuItems: function () {\r\n      this.collection.refilter();\r\n    },\r\n\r\n    _reRender: function () {\r\n      // Properties is being destroyed on changing the context node. Both destroyer\r\n      // and a sub-view refreshed are listening on node changes. Although listening\r\n      // is stopped during the destruction, already registered handlers will be\r\n      // triggered nevertheless.\r\n      if (this._isRendered && !this._isRendering && !this.isDestroyed) {\r\n        this._updateMenuItems();\r\n        this.render();\r\n      }\r\n    },\r\n\r\n    onRender: function () {\r\n      if (this._isRendering) {\r\n        return;\r\n      }\r\n      this._isRendering = true;\r\n      this._ensureLazyActionsRetrieved().always(_.bind(function () {\r\n        this._isRendering = false;\r\n      }, this)).done(_.bind(function () {\r\n        var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n        if (this.collection.length < 1 || this.options.suppressAddProperties === true) {\r\n          // hide the + button if there is no action\r\n          this.$el.addClass('binf-hidden');\r\n          dropdownToggleEl.attr('data-cstabindex', '-1');\r\n        } else {\r\n          // show the view because with the latest code the view now can be hidden by the PUT call\r\n          // event that the node does not have any actions yet until it is re-fetched\r\n          this.$el.find('.binf-dropdown').removeClass('binf-hidden');\r\n          this.$el.removeClass('binf-hidden');\r\n          dropdownToggleEl.attr('data-cstabindex', '0');\r\n          // when there is only one command, set aria-haspopup=false\r\n          if (this.collection.length === 1) {\r\n            var addNewCat = this.collection.at(0).get('name');\r\n            dropdownToggleEl.attr({\r\n              'aria-haspopup': false,\r\n              'aria-label': addNewCat,\r\n              'title': addNewCat\r\n            });\r\n            dropdownToggleEl.find('.icon-toolbarAdd').attr('title', addNewCat);\r\n          }\r\n        }\r\n\r\n        if (this.collection.length > 1) {\r\n          // make the dropdown menu when there are more than 1 menu item\r\n          dropdownToggleEl.binf_dropdown();\r\n        }\r\n\r\n        this.$el.find('.binf-dropdown').off('click.' + this.cid).on('click.' + this.cid,\r\n            _.bind(this._onClickAddButton, this));\r\n        dropdownToggleEl.off('click.' + this.cid).on('click.' + this.cid,\r\n            _.bind(this._onClickAddButton, this));\r\n\r\n        var self = this;\r\n        setTimeout(function () {\r\n          // event for keyboard navigation\r\n          var event = $.Event('tab:content:render');\r\n          self.$el.trigger(event);\r\n        }, 200);\r\n\r\n      }, this)).fail(_.bind(function () {\r\n        this.$el.addClass('binf-hidden');\r\n        this.$el.find('.binf-dropdown-toggle').attr('data-cstabindex', '-1');\r\n      }, this));\r\n\r\n    },\r\n\r\n    _closeToggle: function () {\r\n      if (this.options.suppressAddProperties !== true) {\r\n        var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n        if (dropdownToggleEl.parent().hasClass('binf-open')) {\r\n          dropdownToggleEl.binf_dropdown('toggle', false);\r\n        }\r\n      }\r\n    },\r\n\r\n    _onClickAddButton: function (event) {\r\n      if (this.collection.length === 1) {\r\n        Backbone.trigger('closeToggleAction');\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        // when there is just one command\r\n        this._executeAction(this.collection.at(0));\r\n      }\r\n    },\r\n\r\n    _triggerMenuItemAction: function (toolItemView, args) {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      dropdownToggleEl.binf_dropdown('toggle');  // close the dropdown menu before triggering the event\r\n\r\n      this._executeAction(args.toolItem);\r\n    },\r\n\r\n    _executeAction: function (toolItem) {\r\n      var signature = toolItem.get('signature');\r\n      var command = this.commands.get(signature);\r\n\r\n      var executeOptions = {\r\n        action: this.options.action,\r\n        node: this.options.node,\r\n        collection: this.formCollection,\r\n        container: this.options.container,\r\n        inheritance: this.options.inheritance,\r\n        context: this.options.context,\r\n        parentView: this.options.parentView,  // use for blocking view and callback\r\n        addPropertiesCallback: this.options.addPropertiesCallback\r\n      };\r\n\r\n      var status = {\r\n        context: this.options.context,\r\n        nodes: new NodeCollection([this.node]),\r\n        container: this.options.container,\r\n        formCollection: this.formCollection,\r\n        originalFormCollection: this.originalFormCollection,\r\n        originatingView: this.originatingView\r\n      };\r\n\r\n      try {\r\n        // If the command was not found and the toolitem is executable, it is\r\n        // a developer's mistake.\r\n        if (!command) {\r\n          throw new Error('Command \"' + signature + '\" not found.');\r\n        }\r\n\r\n        var el = this.$el.find('.binf-dropdown');\r\n        el.addClass(\"binf-disabled\");\r\n        command.execute(status, executeOptions)\r\n            .done(_.bind(function (resp) {\r\n              el.removeClass(\"binf-disabled\");\r\n              //focus on tab link for added property\r\n              el.closest('.tab-links').find('.tab-links-bar ul li.binf-active a').trigger('focus');\r\n            }, this))\r\n            .fail(function (error) {\r\n              el.removeClass(\"binf-disabled\");\r\n              if (error && error.cancelled) {\r\n                //focus on dropdown toggle icon\r\n                el.find(\".binf-btn.binf-dropdown-toggle\").trigger('focus');\r\n              }\r\n            });\r\n      } catch (error) {\r\n        log.warn('Executing the command \"{0}\" failed.\\n{1}',\r\n            command.get('signature'), error.message) && console.warn(log.last);\r\n      }\r\n    },\r\n\r\n    _ensureLazyActionsRetrieved: function () {\r\n      var deferred                         = $.Deferred(),\r\n          node                             = this.options.node,\r\n          lazyActionsAreRetrieved          = !!node.get('csuiLazyActionsRetrieved'),\r\n          addPropertiesActionsAreRetrieved = !!node.get('csuiAddPropertiesActionsRetrieved'),\r\n          isNodeLocallyCreated             = !node.get('id'),\r\n          nonPromotedCommands              = node.nonPromotedActionCommands;\r\n      var actionsCommands,\r\n          actionsAreRetrieved = lazyActionsAreRetrieved && addPropertiesActionsAreRetrieved;\r\n\r\n      // Add Properties toolbarItems\r\n      // Optimization: AddProperties commands are no longer fetched upfront in NodesTable.\r\n      if (this.options.toolbarItems && nonPromotedCommands && !node.lazyActionsDisabled) {\r\n        // if lazyActionsAreRetrieved = false, merge Add Properties toolbarItems to it for retrieval\r\n        if (!lazyActionsAreRetrieved) {\r\n          // Fetch the AddProperties commands as part of nonPromotedCommands in Properties page.\r\n          var additionalPropertiesCommands = commands.getSignatures(this.options.toolbarItems);\r\n          if (additionalPropertiesCommands.length) {\r\n            actionsCommands = nonPromotedCommands = node.nonPromotedActionCommands =\r\n                _.union(additionalPropertiesCommands, node.nonPromotedActionCommands);\r\n          }\r\n        } else if (!addPropertiesActionsAreRetrieved) {\r\n          // if not yet retrieved, retrieve the additional Add Properties toolbarItems only\r\n          actionsCommands = commands.getSignatures(this.options.toolbarItems);\r\n        }\r\n      }\r\n\r\n      function fetchActionsCommands() {\r\n        if (!lazyActionsAreRetrieved) {\r\n          return node.setEnabledLazyActionCommands(true);\r\n        } else if (!addPropertiesActionsAreRetrieved) {\r\n          return node.getAdditionalActionCommands(\r\n              actionsCommands, 'csuiAddPropertiesActionsRetrieved');\r\n        } else {\r\n          return $.Deferred().reject().promise();\r\n        }\r\n      }\r\n\r\n      if (!!node && !isNodeLocallyCreated && !actionsAreRetrieved && actionsCommands &&\r\n          actionsCommands.length) {\r\n        var self = this;\r\n        this.$el.find('.binf-dropdown').addClass('binf-hidden');\r\n        this.$el.find('.csui-loading-parent-wrapper').removeClass('binf-hidden');\r\n        fetchActionsCommands()\r\n            .done(function () {\r\n              // As per UX req: need to show loading dots at least for 300ms after fetch as like in\r\n              // inline actionbar\r\n              setTimeout(function () {\r\n                self.$el.find('.csui-loading-parent-wrapper').addClass('binf-hidden');\r\n                self._updateMenuItems();\r\n                deferred.resolve();\r\n              }, 300);\r\n            })\r\n            .fail(function () {\r\n              self.$el.find('.binf-dropdown').removeClass('binf-hidden');\r\n              deferred.reject();\r\n            });\r\n      } else {\r\n        deferred.resolve();\r\n      }\r\n      return deferred.promise();\r\n    }\r\n\r\n  });\r\n\r\n  return AddPropertiesDropdownMenuView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/add.properties.menuitems',['csui/lib/underscore', 'csui/utils/base',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  'csui/controls/toolbar/toolitem.model',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/add.properties.menuitems',\r\n  // Load extra tool items from the previous module location\r\n  'csui-ext!csui/widgets/metadata/add.properties/toolbaritems'\r\n], function (_, base, lang, ToolItemsFactory, TooItemModel,\r\n    extraToolItems, oldExtraToolItems) {\r\n  'use strict';\r\n\r\n  var toolbarItems = {\r\n\r\n    addPropertiesToolbar: new ToolItemsFactory(\r\n        {\r\n          add: [\r\n            {\r\n              signature: \"AddCategory\",\r\n              name: lang.addNewCategory\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 0 // force toolbar to immediately start with a drop-down list\r\n        }\r\n    )\r\n\r\n  };\r\n\r\n  if (oldExtraToolItems) {\r\n    // TODO: Issue deprecation warning\r\n    addExtraToolItems(oldExtraToolItems);\r\n  }\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/add.properties.menuitems.mask',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask) {\r\n  'use strict';\r\n\r\n  var AddPropertiesMenuItemsMask = ToolItemMask.extend({\r\n\r\n    constructor: function AddPropertiesMenuItemsMask() {\r\n      var config = module.config(),\r\n          globalMask = new GlobalMenuItemsMask();\r\n      ToolItemMask.prototype.constructor.call(this, globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        this.extendMask(source);\r\n      }, this);\r\n      // Enable restoring the mask to its initial state\r\n      this.storeMask();\r\n    }\r\n\r\n  });\r\n\r\n  return AddPropertiesMenuItemsMask;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"csui-tab-contents-header-content\\\">\\r\\n  <div class=\\\"csui-tab-contents-header-right\\\">\\r\\n    <div class=\\\"required-field-switch binf-hidden\\\">\\r\\n        <span id=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"requiredFieldsLabelId\") || (depth0 != null ? lookupProperty(depth0,\"requiredFieldsLabelId\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"requiredFieldsLabelId\",\"hash\":{},\"loc\":{\"start\":{\"line\":4,\"column\":18},\"end\":{\"line\":4,\"column\":43}}}) : helper)))\n    + \"\\\" class=\\\"only-required-fields-label\\\"\\r\\n              title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"onlyRequiredFieldsLabel\") || (depth0 != null ? lookupProperty(depth0,\"onlyRequiredFieldsLabel\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"onlyRequiredFieldsLabel\",\"hash\":{},\"loc\":{\"start\":{\"line\":5,\"column\":21},\"end\":{\"line\":5,\"column\":48}}}) : helper)))\n    + \"\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"onlyRequiredFieldsLabel\") || (depth0 != null ? lookupProperty(depth0,\"onlyRequiredFieldsLabel\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"onlyRequiredFieldsLabel\",\"hash\":{},\"loc\":{\"start\":{\"line\":5,\"column\":50},\"end\":{\"line\":5,\"column\":77}}}) : helper)))\n    + \"</span>\\r\\n      <div class=\\\"required-fields-switch\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <h4>General</h4>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_tab.contents.header_tab.contents.header', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header',[],function(){});\n","csui.define('csui/widgets/metadata/impl/tab.contents.header/tab.contents.header.view',['require', 'csui/lib/jquery', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/lib/marionette', 'csui/controls/form/pub.sub',\r\n  'csui/models/version',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'hbs!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header',\r\n  'css!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header', 'csui/lib/binf/js/binf'\r\n], function (require, $, _, Backbone, Marionette, PubSub, VersionModel, lang,\r\n    tabContentsHeaderTemplate) {\r\n  'use strict';\r\n\r\n  var TabContentsHeaderView = Marionette.ItemView.extend({\r\n\r\n    tagName: 'div',\r\n\r\n    className: 'csui-tab-contents-header',\r\n\r\n    template: tabContentsHeaderTemplate,\r\n\r\n    ui: {\r\n      leftTabContentsHeader: '.csui-tab-contents-header-content',\r\n      rightTabContentsHeader: '.csui-tab-contents-header-right',\r\n      tabContentsHeaderTitle: '.csui-tab-contents-header-content h4',\r\n      requiredSwitchEle: '.required-field-switch', //container of required field switch\r\n      requiredSwitchIcon: '.required-field-switch > div.required-fields-switch'\r\n    },\r\n\r\n    events: {\r\n      'click @ui.requiredSwitchIcon': 'onClickRequiredIconDiv',\r\n      'keydown': 'onKeyInView'\r\n    },\r\n\r\n    constructor: function TabContentsHeaderView() {\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.pubsubPostFix = (this.options.node instanceof VersionModel ? 'v' : 'p') +\r\n                           this.options.node.get('id');\r\n\r\n      this.requiredFieldsLabelId = _.uniqueId(\"requiredFields\");\r\n\r\n      var objPubSubId = 'pubsub:tab:contents:header:view:change:tab:title:' + this.pubsubPostFix;\r\n      PubSub.off(objPubSubId);\r\n\r\n      this.listenTo(PubSub, objPubSubId, this._changeTabTitle);\r\n\r\n      this.listenTo(this.collection, 'add', function (model) {\r\n        !!model.get('required') && this._showRequiredSwitch();\r\n      });\r\n      this.listenTo(this.collection, 'remove', function (model) {\r\n        if (!this.isRequiredCatPresent()) {\r\n          this._hideRequiredSwitch();\r\n        }\r\n      });\r\n\r\n      this.listenTo(this, 'metadata:schema:updated', function (model) {\r\n        if (!this.isRequiredCatPresent()) {\r\n          this._hideRequiredSwitch();\r\n        } else {\r\n          this._showRequiredSwitch();\r\n        }\r\n      }, this);\r\n    },\r\n\r\n    templateHelpers: function () {\r\n      return {\r\n        onlyRequiredFieldsLabel: lang.onlyRequiredFieldsLabel,\r\n        requiredFieldsLabelId: this.requiredFieldsLabelId\r\n      };\r\n    },\r\n\r\n    _changeTabTitle: function (args) {\r\n      this.$(this.ui.tabContentsHeaderTitle).html(args).attr('title',args);\r\n      \r\n    },\r\n\r\n    onRender: function () {\r\n      this.requiredFieldSwitchModel = new Backbone.Model(\r\n          {data: !!this.options.node.collection.requireSwitched});\r\n      var self = this;\r\n\r\n      //fix for grunt out-release\r\n      require(['csui/controls/form/fields/booleanfield.view'], function (BooleanFieldView) {\r\n        self.requiredFieldSwitchView = new BooleanFieldView({\r\n          mode: 'writeonly',\r\n          model: self.requiredFieldSwitchModel,\r\n          labelId: self.requiredFieldsLabelId\r\n        });\r\n        self.requiredFieldSwitchView.render();\r\n        self.listenTo(self.requiredFieldSwitchView, 'field:changed', function (event) {  //toggle\r\n          // required fields\r\n          var objPubSubId = 'pubsub:tab:contents:header:view:switch:' + self.pubsubPostFix;\r\n\r\n          PubSub.trigger(objPubSubId, {on: event.fieldvalue});\r\n          if (!!self.options.node.collection) {\r\n            self.options.node.collection.requireSwitched = event.fieldvalue;\r\n          }\r\n        });\r\n        self.$('.required-fields-switch').append(self.requiredFieldSwitchView.$el);\r\n        if (self.isRequiredCatPresent()) {\r\n          self._showRequiredSwitch();\r\n        }\r\n\r\n        PubSub.off('pubsub:header:rightbar:view:change:switch:status');\r\n        self.listenTo(PubSub, 'pubsub:header:rightbar:view:change:switch:status', function (reset) {\r\n          if (!!reset) {\r\n            if (!!self.requiredFieldSwitchView.curVal) {\r\n              self.requiredFieldSwitchView.$el.trigger('click');\r\n            }\r\n          } else if (!!self.requiredFieldSwitchModel &&\r\n                     (self.requiredFieldSwitchModel.get('data') !== undefined &&\r\n                     !self.requiredFieldSwitchModel.get('data')) && !!self.options.node &&\r\n                     !!self.options.node.collection &&\r\n                     !!self.options.node.collection.requireSwitched) {\r\n            self.requiredFieldSwitchView.$el.trigger('click');\r\n          }\r\n        });\r\n\r\n      });\r\n    },\r\n\r\n    currentlyFocusedElement: function (event) {\r\n      if (!this.ui.requiredSwitchEle.hasClass('binf-hidden') && this.requiredFieldSwitchView) {\r\n        return $(this.ui.requiredSwitchIcon.find(\":input\"));\r\n      } else {\r\n        return undefined;\r\n      }\r\n    },\r\n\r\n    onKeyInView: function (e) {\r\n      var event = e || window.event;\r\n      var target = event.target || event.srcElement;\r\n      if (event.keyCode === 32 || event.keyCode === 13) {\r\n        // space key(32) or enter key(13)\r\n        if (!this.ui.requiredSwitchEle.hasClass('binf-hidden') && this.requiredFieldSwitchView) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          // need timeout to overcome FireFox space press\r\n          setTimeout(_.bind(function () {\r\n            $(target).trigger('click');\r\n          }, this), 200);\r\n        }\r\n      }\r\n      return undefined;\r\n    },\r\n\r\n    // this method is triggered by keyboard\r\n    onClickRequiredIconDiv: function (event) {\r\n      this.requiredFieldSwitchView.onClickWriteField(event);\r\n    },\r\n\r\n    _hideRequiredSwitch: function () {\r\n      this.ui.tabContentsHeaderTitle.addClass('csui-tab-contents-header-title-full-width');\r\n      this.ui.requiredSwitchEle.addClass('binf-hidden');\r\n      //turn off if no required cat is present\r\n      !!this.requiredFieldSwitchView && !!this.requiredFieldSwitchView.getValue() &&\r\n      this.requiredFieldSwitchView.ui.flagWriteField.trigger('click');\r\n    },\r\n\r\n    _showRequiredSwitch: function () {\r\n      this.ui.tabContentsHeaderTitle.removeClass('csui-tab-contents-header-title-full-width');\r\n      this.ui.requiredSwitchEle.removeClass('binf-hidden');\r\n    },\r\n\r\n    isRequiredCatPresent: function () {\r\n      if (!!this.options.hideRequiredFieldsSwitch) {\r\n        // Permanently hide \"required\" switch\r\n        return false;\r\n      }\r\n      var isRequiredCatPresent = false,\r\n          i                    = 0;\r\n      for (; !isRequiredCatPresent && i < this.collection.models.length; i++) {\r\n        isRequiredCatPresent = this.collection.models[i].get('required') === true;\r\n      }\r\n      return isRequiredCatPresent;\r\n    }\r\n  });\r\n\r\n  return TabContentsHeaderView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.properties.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/utils/url', 'csui/utils/base', 'csui/controls/tab.panel/tab.panel.view',\r\n  'csui/controls/tab.panel/tab.links.ext.view',\r\n  'csui/controls/tab.panel/tab.links.ext.scroll.mixin',\r\n  'csui/models/form', 'csui/controls/form/form.view',\r\n  \"csui/utils/commands/compound.document/compound.document.util\",\r\n  'csui/widgets/metadata/property.panels/categories/impl/category.form.view',\r\n  'csui/models/appliedcategories', 'csui/widgets/metadata/impl/metadata.forms',\r\n  'csui/dialogs/modal.alert/modal.alert', 'csui/controls/progressblocker/blocker',\r\n  'csui/models/version', 'csui/widgets/metadata/impl/metadata.utils', 'i18n',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'csui/widgets/metadata/general.form.fields/general.form.field.behavior',\r\n  'csui/widgets/metadata/general.action.fields/general.action.field.behavior',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang', 'csui/widgets/metadata/metadata.property.panels',\r\n  'csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu.view',\r\n  'csui/widgets/metadata/add.properties.menuitems',\r\n  'csui/widgets/metadata/add.properties.menuitems.mask',\r\n  'csui/widgets/metadata/impl/tab.contents.header/tab.contents.header.view',\r\n  'csui/controls/form/pub.sub',\r\n  'csui/widgets/metadata/impl/metadata.tabcontentcollection.view',\r\n  'csui/models/appliedcategories/appliedcategoriesaction',\r\n  'csui/utils/deepClone/deepClone'\r\n\r\n], function (_, $, Backbone, Marionette, Url, base, TabPanelView, TabLinkCollectionViewExt,\r\n    TabLinksScrollMixin, FormModel, FormView, CompoundDocumentsUtil, CategoryFormView, AppliedCategoryCollection,\r\n    MetadataFormCollection, ModalAlert, BlockingView, VersionModel, MetadataUtils, i18n,\r\n    PerfectScrollingBehavior, GeneralFormFieldBehavior, GeneralActionFieldBehavior, lang,\r\n    metadataPropertyPanels,\r\n    AddPropertiesDropdownMenuView, toolbarItems, AddPropertiesMenuItemsMask,\r\n    TabContentHeaderView, PubSub, MetadataTabContentCollectionView, AppliedCategoryActionsCollection) {\r\n\r\n  //\r\n  // Public: Metadata Properties View Class\r\n  // Description: provides the view of general and other metadata properties (such as categories,\r\n  // etc.) of a node.  It allows for navigation, editing and getting form values of different types\r\n  // of metadata.\r\n  //\r\n  var MetadataPropertiesViewImpl = TabPanelView.extend({\r\n\r\n    className: function() {\r\n      var classNames = (base.isTouchBrowser() ? 'cs-touch-browser ' : '') + 'cs-metadata-properties' +\r\n                       ' binf-panel binf-panel-default';\r\n      classNames += !!this.options && !!this.options.topAlignLabel ? ' csui-top-align-label' : '';\r\n      return classNames;\r\n    },\r\n\r\n    rtlEnabled: i18n.settings.rtl,\r\n\r\n    contentView: function (model) {\r\n      var panel = _.findWhere(this._propertyPanels, {model: model});\r\n      if (panel) {\r\n        return panel.contentView || FormView;\r\n      }\r\n      if (model.get('role_name') === 'categories') {\r\n        return CategoryFormView;\r\n      }\r\n      return FormView;\r\n    },\r\n\r\n    contentViewOptions: function (model) {\r\n      var options = {\r\n            context: this.options.context,\r\n            node: this.options.node,\r\n            mode: this.options.formMode,\r\n            fetchedModels: this.allForms,\r\n            displayedModels: this.collection,\r\n            originatingView: this,\r\n            layoutMode: 'doubleCol',\r\n            metadataView: this.options.metadataView,\r\n            generalFormFieldDescriptors: this._generalFormFieldDescriptors,\r\n            generalActionFieldDescriptors: this._generalActionFieldDescriptors\r\n          },\r\n          panel   = _.findWhere(this._propertyPanels, {model: model});\r\n      if (panel) {\r\n        _.extend(options, panel.contentViewOptions);\r\n      }\r\n      return options;\r\n    },\r\n\r\n    // specific implementation for TabableRegionBehavior\r\n    isTabable: function () {\r\n      if (this.options.notTabableRegion === true) {\r\n        return false;\r\n      }\r\n      return true;  // this view can be reached by tab\r\n    },\r\n\r\n    constructor: function MetadataPropertiesViewImpl(options) {\r\n      //debugger;\r\n      options || (options = {});\r\n      var delete_icon;\r\n\r\n      if (base.isTouchBrowser()) {\r\n        delete_icon = 'category_delete-touch-browser';\r\n      } else {\r\n        delete_icon = 'category_delete';\r\n      }\r\n\r\n      _.defaults(options, {\r\n        tabType: 'binf-nav-pills',\r\n        mode: 'spy',\r\n        extraScrollTopOffset: 3,\r\n        formMode: 'update',\r\n        toolbar: true,\r\n        toolbarItems: toolbarItems,\r\n        delete_icon: delete_icon,\r\n        delete_tooltip: lang.removeCategoryTooltip,\r\n        contentView: this.getContentView,\r\n        TabLinkCollectionViewClass: TabLinkCollectionViewExt,\r\n        TabContentCollectionViewClass: MetadataTabContentCollectionView,\r\n        searchTabContentForTabableElements: true,\r\n        tabContentAccSelectors: 'a[href], area[href], input:not([disabled]),' +\r\n                                ' select:not([disabled]), textarea:not([disabled]),' +\r\n                                ' button:not([disabled]), iframe, object, embed,' +\r\n                                ' *[tabindex], *[data-cstabindex], *[contenteditable]'\r\n      });\r\n\r\n      this.context = options.context;\r\n\r\n      if (!options.toolbarItemsMask) {\r\n        options.toolbarItemsMask = new AddPropertiesMenuItemsMask();\r\n      }\r\n\r\n      this.behaviors = _.extend({\r\n        PerfectScrolling: {\r\n          behaviorClass: PerfectScrollingBehavior,\r\n          contentParent: '> .binf-tab-content',\r\n          scrollXMarginOffset: 30,\r\n          // like bottom padding of container, otherwise scrollbar is shown always\r\n          scrollYMarginOffset: 15\r\n        }\r\n      }, this.behaviors);\r\n\r\n      if (options.collection) {\r\n        this.allForms = options.collection;\r\n      } else {\r\n         // in case of folder tweak the type while drag and drop folders, else sublevel files failed to upload\r\n         var node = options.node,\r\n         enforcedRequiredAttrsForFolders = node.get('enforcedRequiredAttrsForFolders'),\r\n        tempNode = node;\r\n        if(enforcedRequiredAttrsForFolders) {\r\n          tempNode = node.clone();\r\n          tempNode.set('type',144);\r\n        }\r\n        this.allForms = new MetadataFormCollection(undefined, {\r\n          node: tempNode,\r\n          connector: options.node.connector,\r\n          container: options.container,\r\n          action: options.action,\r\n          inheritance: options.inheritance,\r\n          autoreset: true,\r\n          formCollection: options.formCollection\r\n        });\r\n        // Prepare an empty collection to be populated by tabs/forms later\r\n        options.collection = new Backbone.Collection();\r\n      }\r\n\r\n      // have collection to keep track of newly added categories\r\n      if (options.node.newCategories === undefined) {\r\n        options.node.newCategories = new Backbone.Collection();\r\n      }\r\n      if (options.node.removedCategories === undefined) {\r\n        options.node.removedCategories = [];\r\n      }\r\n\r\n      TabPanelView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.widths = [];\r\n\r\n      if (this.options.blockingParentView) {\r\n        BlockingView.delegate(this, this.options.blockingParentView);\r\n      } else {\r\n        BlockingView.imbue(this);\r\n      }\r\n\r\n      PubSub.off('pubsub:tab:contents:panel:textarea:scrollupdate');\r\n      this.listenTo(PubSub, 'pubsub:tab:contents:panel:textarea:scrollupdate',\r\n          this._updateToTextAreaScrollbar);\r\n\r\n      this.listenTo(this.allForms, \"request\", this.blockActions)\r\n          .listenTo(this.allForms, \"request\", this._checkFormFetching)\r\n          .listenTo(this.allForms, \"sync\", this._syncForms)\r\n          .listenTo(this.allForms, \"sync\", this.unblockActions)\r\n          .listenTo(this.allForms, \"destroy\", this.unblockActions)\r\n          .listenTo(this.allForms, \"error\", this.unblockActions)\r\n          // If tab panel re-renders itself whe the tab collection changes, it\r\n          // has to prevent tab links and tab content from doing the same,\r\n          // because these two views are destroyed during tab panel re-rendering\r\n          .listenTo(this.collection, \"reset\", this.render)\r\n          .listenTo(options.node, 'change:id', function () {\r\n            if (this.options.formMode !== 'create' && !this._fetchingForms && !this.isDestroyed) {\r\n              this._fetchForms();\r\n            }\r\n          }).listenTo(this, 'reset:switch', this._resetRequiredSwitchView)\r\n          .listenTo(this, \"update:button\", _.bind(function (flag) {\r\n            this.options.metadataView && this.options.metadataView.trigger(\"update:button\", {overlay: flag});\r\n          }, this));\r\n\r\n      // If the collection has been fetched before passing it to the view\r\n      // and the operation is still ongoing, turn on the blocking view right\r\n      // away and wait for the finishing event to turn it off\r\n      if (this.allForms.fetching) {\r\n        this.blockActions();\r\n      }\r\n\r\n      $(window).on('resize', {view: this}, this._onWindowResize);\r\n      $(window).on('resize.tableview', {view: this}, this._onWindowResize);\r\n\r\n      // Perform after-rendering steps after blocking view renders inside\r\n      // into this view; it registers for the render event earlier\r\n      this.listenTo(this, 'render', this.onRendered);\r\n      this.listenTo(Backbone, 'metadata:schema:updated', function (model) {\r\n        this.resolveHasRequiredFields(model);\r\n        this.has_required_fields = this.collection\r\n            .filter(\r\n                function (model) {\r\n                  return model.get('required') === true;\r\n                });\r\n        this.tabLinks.trigger('metadata:schema:updated', model);\r\n        this.tabContentHeader.trigger('metadata:schema:updated', model);\r\n      }, this);\r\n\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      $(window).off('resize', this._onWindowResize);\r\n      $(window).off('resize.tableview', this._onWindowResize);\r\n\r\n      if (this.addPropertiesView) {\r\n        this.cancelEventsToViewsPropagation(this.addPropertiesView);\r\n        this.addPropertiesView.destroy();\r\n      }\r\n\r\n      if (this.contentHeaderRegion) {\r\n        this.contentHeaderRegion.empty();\r\n      }\r\n    },\r\n\r\n    _updateScrollbar: function () {\r\n      this.trigger('update:scrollbar');\r\n      this.$(this.behaviors.PerfectScrolling.contentParent).animate({scrollTop: 0}, \"fast\");\r\n    },\r\n\r\n    _updateToTextAreaScrollbar: function (data) {\r\n      this.trigger('update:scrollbar');\r\n      var scrollTop = data.$el.offset().top -\r\n                      this.$(this.behaviors.PerfectScrolling.contentParent).offset().top;\r\n      if (this.$(this.behaviors.PerfectScrolling.contentParent).scrollTop() > 0) {\r\n        this.$(this.behaviors.PerfectScrolling.contentParent).animate({scrollTop: scrollTop},\r\n            \"fast\");\r\n      }\r\n    },\r\n\r\n    _getModelFromCollectionByTitle: function (title) {\r\n      if (title && _.isString(title) && this.collection) {\r\n        return this.collection.find({title: title});\r\n      }\r\n    },\r\n\r\n    _getModelIndex: function (id, title) {\r\n      var index = -1;\r\n      if (this.collection && this.collection.length > 0) {\r\n        var i, model, matchIndex = -1;\r\n        for (i = 0; i < this.collection.length; i++) {\r\n          model = this.collection.at(i);\r\n          if (id === model.get('id') || title === model.get('title')) {\r\n            index = i;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      return index;\r\n    },\r\n\r\n    _activateTab: function (modelOrTitle) {\r\n      var model = this._getModelFromCollectionByTitle(modelOrTitle) || modelOrTitle;\r\n      if (model && model instanceof Backbone.Model) {\r\n        var matchIndex = this._getModelIndex(model.get('id'), model.get('title'));\r\n        if (matchIndex !== -1) {\r\n          this._activateTabByIndex(matchIndex);\r\n        }\r\n      }\r\n    },\r\n\r\n    _activateTabByIndex: function (index) {\r\n      this.options.activeTab.set(\"tabIndex\", index);\r\n      var tabLink = this.tabLinks.children.findByIndex(index);\r\n      tabLink.activate(true);\r\n    },\r\n\r\n    _activateSelectedPropertyTab: function () {\r\n      var selectedProperty = this._getModelFromCollectionByTitle(this.options.selectedProperty) ||\r\n                             this.options.selectedProperty;\r\n      if (selectedProperty && selectedProperty instanceof Backbone.Model) {\r\n        var matchIndex = this._getModelIndex(selectedProperty.get('id'), selectedProperty.get('title'));\r\n        if (matchIndex !== -1) {\r\n          this.options.activeTab.set(\"tabIndex\", matchIndex);\r\n          this.tabLinks.children.findByIndex(matchIndex).activate();\r\n        }\r\n      }\r\n\r\n    },\r\n\r\n    // public\r\n    render: function () {\r\n      // fetch forms if not done or not failed already\r\n      var dataFetched = true;\r\n      if (!this.allForms.fetched && !this.allForms.error) {\r\n        dataFetched = false;\r\n        if (!this._fetchingForms) {\r\n          this._fetchForms();\r\n        }\r\n      }\r\n      if (dataFetched === false || this._fetchingForms) {\r\n        // wait until data is there\r\n        return this;\r\n      }\r\n\r\n      if (this.collection.length === 1) {\r\n        // only one form given -> remove title\r\n        var singleFormModel = this.collection.first(),\r\n            schema          = _.clone(singleFormModel.get('schema'));\r\n        schema.title = '';\r\n        singleFormModel.set('schema', schema);\r\n      }\r\n\r\n      var self = this;\r\n      this.collection.each(function (model, index) {\r\n        var has_required_fields = self.resolveHasRequiredFields.call(self, model);\r\n        if (has_required_fields) {\r\n          self.hasRequiredField = true;\r\n        }\r\n      });\r\n      _.extend(this, {\r\n        _: _\r\n      });\r\n      // data available -> render\r\n      TabPanelView.prototype.render.apply(this);\r\n      // create add properties + dropdown toolbar\r\n      this._createAddPropertiesView();\r\n      this._initializeOthers();\r\n      return this;\r\n    },\r\n\r\n    resolveHasRequiredFields: function (model) {\r\n      var metadataUtils = new MetadataUtils();\r\n      var has_required_fields = metadataUtils.AlpacaFormOptionsSchemaHaveRequiredFields(\r\n          model.get('options'), model.get('schema'), model.get('id')\r\n      );\r\n      model.set('required', has_required_fields);\r\n      return has_required_fields;\r\n    },\r\n\r\n    onDestroy: function () {\r\n      if (this._fetchingForms) {\r\n        this.unblockActions();\r\n      }\r\n    },\r\n\r\n    onRendered: function () {\r\n      this._setTablinksAttributes();\r\n      // work around for the dialog fade-in delay\r\n      // delay this call a bit since the initial dialog fade in makes the tab to be hidden\r\n      // calling _setTabLinksAttributes() the second time here fixes the dialog fade-in delay\r\n      // but does not have any effect if the first call already works\r\n      setTimeout(_.bind(this._setTablinksAttributes, this), 300);\r\n\r\n      // If tab panel re-renders itself whe the tab collection changes, it\r\n      // has to prevent tab links and tab content from doing the same,\r\n      // because these two views are destroyed during tab panel re-rendering\r\n      this.tabLinks.stopListening(this.collection, 'reset');\r\n      this.tabContent.stopListening(this.collection, 'reset');\r\n      if (this.tabContentHeader) { // clean-up completely tab content's header if it not yet.\r\n        this.tabContentHeader.destroy();\r\n        this.$el.find(\".csui-tab-contents-header-wrapper\").remove();\r\n      }\r\n\r\n      this.listenTo(this.tabLinks, 'childview:delete:tab', _.bind(this._onDeleteCategory, this));\r\n\r\n      // Alpaca slow rendering work-around: hide all views then block and\r\n      // wait until all forms are rendered then show view and unblock\r\n      this.tabLinks.$el.addClass('binf-hidden');\r\n      this.tabContent.$el.addClass('binf-hidden');\r\n      this.blockActions();\r\n      this.updateTitle = true;\r\n      var allFormsRendered = [],\r\n          self             = this;\r\n      this.tabContent.children.each(_.bind(function (childView) {\r\n        var formRendered = $.Deferred();\r\n        allFormsRendered.push(formRendered.promise());\r\n        var childViewContent = childView.content;\r\n        if (childViewContent instanceof FormView && !childViewContent.isRenderFinished()) {\r\n          this.listenTo(childViewContent, 'render:form', function (childViewContent) {\r\n            var formHtmlRegion = !!childViewContent.$el.find(\".cs-form-singlecolumn\") ?\r\n                                 childViewContent.$el.find(\".cs-form-singlecolumn\") :\r\n                                 childViewContent.$el.find(\".cs-form-doublecolumn\");\r\n            if (!!formHtmlRegion && formHtmlRegion.length > 0) {\r\n              if (!!formHtmlRegion.html()) {\r\n                formRendered.resolve();\r\n              }\r\n            } else {\r\n              formRendered.resolve();\r\n            }\r\n          });\r\n        } else {\r\n          formRendered.resolve();\r\n        }\r\n      }, this));\r\n      $.when.apply($, allFormsRendered).done(function () {\r\n        //debugger;\r\n        self.unblockActions();\r\n        self.tabLinks.$el.removeClass('binf-hidden');\r\n\r\n        // Begin: tab contents header which contains tab title and required field view.\r\n        var showStickyHeader = !(!!self.options.hideStickyHeader);\r\n        if (showStickyHeader) {\r\n          var objPubSubId = (self.options.node instanceof VersionModel ? 'v' : 'p');\r\n          objPubSubId = 'pubsub:tab:contents:header:view:switch:' + objPubSubId +\r\n                        self.options.node.get('id');\r\n          PubSub.off(objPubSubId);\r\n          self.listenTo(PubSub, objPubSubId, self._onRequiredSwitch);\r\n\r\n          self.tabContent.$el.before(\"<div class='csui-tab-contents-header-wrapper'></div>\");\r\n          self.contentHeaderRegion = new Marionette.Region({\r\n            el: self.$el.find('.csui-tab-contents-header-wrapper')\r\n          });\r\n          self.tabContentHeader = new TabContentHeaderView(self.options);\r\n          self.contentHeaderRegion.show(self.tabContentHeader);\r\n        }\r\n        // End: tab contents header which contains tab title and required field view.\r\n\r\n        if (!!self.tabContentHeader && !!self.options.node.collection.requireSwitched &&\r\n            !!self.hasRequiredField) {\r\n          self._hideNotRequiredFormFields(true);\r\n        }\r\n        self.tabContent.$el.removeClass('binf-hidden');\r\n\r\n        // TODO: Find out, how the rightToolbar is added from outside;\r\n        // it does not happen if the form collection is empty\r\n        if (self.addPropertiesView && self.rightToolbar) {\r\n          var apv = self.addPropertiesView.render();\r\n          Marionette.triggerMethodOn(apv, 'before:show', apv, self);\r\n          self.rightToolbar.append(apv.el);\r\n          Marionette.triggerMethodOn(apv, 'show', apv, self);\r\n          self.allFormsRendered = true;\r\n        }\r\n\r\n        // find out the first visible tab and make it active.\r\n        // Iterate over tab colleciton instead of childer where order is not guaranteed.\r\n        var firstVisibleTabLink,\r\n            firstVisibleTab = self.tabLinks.collection.find(function (tabModel) {\r\n              var tabLink = self.tabLinks.children.findByModel(tabModel);\r\n              return !tabLink.$el.hasClass('binf-hidden');\r\n            });\r\n        if (firstVisibleTab &&\r\n            !(firstVisibleTabLink = self.tabLinks.children.findByModel(\r\n                firstVisibleTab)).isActive()) {\r\n          firstVisibleTabLink.activate();\r\n        }\r\n\r\n        self._initializeOthers();\r\n        self.triggerMethod('render:forms', this);\r\n\r\n        // iPad needs a little timeOut\r\n        setTimeout(function () {\r\n          self._computeTablinkWidth();\r\n          self._enableToolbarState();\r\n        }, 300);\r\n\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n\r\n        if (self.options.formMode !== \"create\") {\r\n          self.setFocus();\r\n        }\r\n        self.trigger('update:scrollbar');\r\n        if (self.updateTitle) {\r\n          var objPubSubTabId = (self.options.node instanceof VersionModel ? 'v' : 'p') +\r\n                               self.options.node.get('id');\r\n          objPubSubTabId = 'pubsub:tab:contents:header:view:change:tab:title:' +\r\n                           objPubSubTabId;\r\n          PubSub.trigger(objPubSubTabId, firstVisibleTabLink.el.innerText);\r\n        }\r\n\r\n      }).then(function () {\r\n        // after rendered the metadata view,check options.selectedProperty and activate the tab if needed\r\n        self._activateSelectedPropertyTab();\r\n      });\r\n\r\n      if (this.$el && !this.$el.is(\":visible\")) {\r\n        this.updateTitle = false;\r\n      }\r\n      //Getting metadataItemNameView from metadataHeaderView presented in options.metadataView\r\n      //to set tabindex for Toggle Icon\r\n      this.options.metadataView && this.options.metadataView.metadataHeaderView &&\r\n      this.options.metadataView.metadataHeaderView.metadataItemNameView.setToggleIconTabIndex();\r\n    },\r\n\r\n    onShow: function () {\r\n    },\r\n\r\n    setFocus: function () {\r\n      // TODO: check if we want to have this\r\n      // set focus to first form\r\n      //var firstTabContentView = this.tabContent.children[0];\r\n      //if( firstFormView) {\r\n      //  firstTabContentView.content.setFocus();\r\n      //}\r\n    },\r\n\r\n    _computeTablinkWidth: function () {\r\n      var tabLinksBar = this.$el.find('.tab-links-bar');\r\n      var tabLinks = tabLinksBar && tabLinksBar.find('ul > li');\r\n      tabLinksBar && tabLinksBar.removeClass('wide-tablink very-wide-tablink');\r\n\r\n      // compute only when there is more than one tab (e.g. General + cats/rms/etc.)\r\n      if (tabLinksBar && tabLinksBar.length > 0 && tabLinks && tabLinks.length > 1) {\r\n        var tabLinksBarWidth = $(tabLinksBar[0]).width();\r\n        var totalTablinksWidth = 0;\r\n        var i, numTabs = 0;\r\n        for (i = 0; i < tabLinks.length; i++) {\r\n          var $tabLink = $(tabLinks[i]);\r\n          if (!($tabLink.hasClass('hidden-by-switch'))) {\r\n            totalTablinksWidth += $tabLink.width();\r\n            numTabs++;\r\n          }\r\n        }\r\n        var oneTablinkWidth = numTabs > 0 ? (totalTablinksWidth / numTabs) : $(tabLinks[0]).width();\r\n\r\n        // if this total width check values are still smaller than the tabLinks bar width,\r\n        // then increase the tabLink width\r\n        var totalWidthCheck1 = totalTablinksWidth * 2;  // twice smaller\r\n        var totalWidthCheck2 = totalTablinksWidth + (1.3 * oneTablinkWidth);  // a little smaller\r\n        if (tabLinksBarWidth > totalWidthCheck1) {\r\n          tabLinksBar.addClass('very-wide-tablink');\r\n        } else if (tabLinksBarWidth > totalWidthCheck2) {\r\n          tabLinksBar.addClass('wide-tablink');\r\n        } else {\r\n          tabLinksBar.removeClass('wide-tablink very-wide-tablink');\r\n        }\r\n      }\r\n    },\r\n\r\n    onPanelActivated: function () {\r\n      // delay this a bit since the fade-in may make the tabs to be hidden\r\n      setTimeout(_.bind(function () {\r\n        this._setTablinksAttributes();\r\n        this._enableToolbarState();\r\n      }, this), 300);\r\n    },\r\n\r\n    // public: validate all Alpaca forms\r\n    validateForms: function () {\r\n      function showOrHideValidationError() {\r\n        if (++validationCounter === formCount) {\r\n          // show/hide validation error after all forms are validated\r\n          allFormsValid ? self._hideValidationError() : self._showValidationError();\r\n        }\r\n      }\r\n      if (!!this.allFormsRendered) {\r\n        var allFormsValid = true,\r\n          formCount = this.tabContent.children.length,\r\n          validationCounter = 0,\r\n          self = this;\r\n        this.tabContent.children.each(function (tab) {\r\n          var isCurrentFormValid = tab.content.validate(showOrHideValidationError);\r\n          allFormsValid = allFormsValid && isCurrentFormValid;\r\n        });\r\n        return allFormsValid;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n\r\n    // public: get values from all Alpaca forms\r\n    getFormsValues: function () {\r\n      var formValues = {},\r\n          formFieldValues, formFieldRoles, roles, role;\r\n\r\n      this.tabContent.children.each(function (tab) {\r\n        var values   = tab.content.getValues(),\r\n            roleName = tab.content.model.get(\"role_name\"),\r\n            category, catId;\r\n\r\n        if (values) {\r\n          if (roleName) {\r\n            roles = formValues.roles || (formValues.roles = {});\r\n            role = roles[roleName] || (roles[roleName] = {});\r\n            if (roleName === 'categories') {\r\n              // For categories, merge the properties to the\r\n              // roles.categories.<category_id> object\r\n              catId = tab.model.get(\"id\").toString();\r\n              category = role[catId] || (role[catId] = {});\r\n              // when attributes are not set, the server deletes\r\n              // the category unless it is set to null\r\n              if (_.isEmpty(values)) {\r\n                category = null;\r\n              } else {\r\n                _.extend(category, values);\r\n              }\r\n            } else {\r\n              // With a role defined, merge the properties to the\r\n              // roles.<role_name> object\r\n              _.extend(role, values);\r\n            }\r\n          } else {\r\n            // With no role defined, merge the properties to the root\r\n            // object literal with the general properties\r\n            _.extend(formValues, values);\r\n          }\r\n        }\r\n      });\r\n\r\n      // add the deleted categories\r\n      if (this.options.node.removedCategories.length > 0) {\r\n        roles = formValues.roles || (formValues.roles = {});\r\n        role = roles['categories'] || (roles['categories'] = {});\r\n        _.each(this.options.node.removedCategories, function (removedCatId) {\r\n          role[removedCatId] || (role[removedCatId] = {});\r\n        });\r\n      }\r\n\r\n      var generalTab = this.tabContent.children.find(function (tab) {\r\n        return !!tab.content.getGeneralFormFieldValues;\r\n      });\r\n      if (generalTab) {\r\n        formFieldValues = generalTab.content.getGeneralFormFieldValues();\r\n        // Do not make a full deep merge, but ensure, that we merge not\r\n        // only properties on the root (general) level, but if there are\r\n        // roles available, also on every role level\r\n        formFieldRoles = formFieldValues.roles || {};\r\n        delete formFieldValues.roles;\r\n        _.extend(formValues, formFieldValues);\r\n        _.each(_.keys(formFieldRoles), function (roleName) {\r\n          roles = formValues.roles || (formValues.roles = {});\r\n          role = roles[roleName] || (roles[roleName] = {});\r\n          _.extend(role, formFieldRoles[roleName]);\r\n        });\r\n      }\r\n\r\n      return formValues;\r\n    },\r\n\r\n    _addValidationErrorElement: function () {\r\n      if (this.$el.find('.metadata-validation-error').length === 0) {\r\n        this.tabLinks.$el.after('<div class=\"metadata-validation-error\"></div>');\r\n        this.validationErrorElem = $(this.$el.find('.metadata-validation-error')[0]);\r\n        this.validationErrorElem.append(\r\n            '<span class=\"icon notification_error cs-close-error-icon\" alt=\"' +\r\n            lang.hideValidationErrorMessageIconTooltip + '\" title=\"' +\r\n            lang.hideValidationErrorMessageIconTooltip + '\"></span>');\r\n        this.validationErrorElem.append('<span class=\"validation-error-message\">' +\r\n                                        lang.formValidationErrorMessage + '</span>');\r\n        this.validationErrorElem.hide();\r\n\r\n        var closeIcon = $(this.$el.find('.metadata-validation-error .cs-close-error-icon')[0]);\r\n        closeIcon && closeIcon.on('click', _.bind(function (event) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          this._hideValidationError();\r\n        }, this));\r\n      }\r\n    },\r\n\r\n    _showValidationError: function () {\r\n      if (this.validationErrorElem === undefined) {\r\n        this._addValidationErrorElement();\r\n      }\r\n      if (this.tabContent.$el.find('.alpaca-message-notOptional').length > 0) {\r\n        this.tabContent && this.tabContent.$el.addClass('show-validation-error');\r\n        this.contentHeaderRegion && this.contentHeaderRegion.$el.addClass('show-validation-error');\r\n        this.validationErrorElem && this.validationErrorElem.show();\r\n      } else {\r\n        this._hideValidationError();\r\n      }\r\n    },\r\n\r\n    _hideValidationError: function () {\r\n      this.tabContent && this.tabContent.$el.removeClass('show-validation-error');\r\n      this.contentHeaderRegion && this.contentHeaderRegion.$el.removeClass('show-validation-error');\r\n      this.validationErrorElem && this.validationErrorElem.hide();\r\n    },\r\n\r\n    _clearValidationError: function () {\r\n      this.tabContent && this.tabContent.$el.removeClass('show-validation-error');\r\n      this.contentHeaderRegion && this.contentHeaderRegion.$el.removeClass('show-validation-error');\r\n      if (this.validationErrorElem) {\r\n        this.validationErrorElem.remove();\r\n        delete this.validationErrorElem;\r\n      }\r\n    },\r\n\r\n    _checkFormFetching: function () {\r\n      this._fetchingForms = true;\r\n    },\r\n\r\n    _fetchForms: function () {\r\n      return this.allForms.fetch();\r\n    },\r\n\r\n    _syncForms: function () {\r\n      var self = this;\r\n      this.blockActions();\r\n      this._clearValidationError();\r\n      return this._loadPanels()\r\n          .then(_.bind(this._loadGeneralFormFields, this)).then(\r\n              _.bind(this._loadGeneralActionFields, this))\r\n          .always(function () {\r\n            self.unblockActions();\r\n            self._fetchingForms = false;\r\n          })\r\n          .then(function () {\r\n            var panelModels = _.pluck(self._propertyPanels, 'model'),\r\n                models      = self.allForms.where({role_name: 'categories'});\r\n            self.panelModelsLength = panelModels.length;\r\n            // add back the newly added categories  that have not been saved to server\r\n            if (self.options.node.newCategories.models.length > 0) {\r\n              if (self.options.node.get('override_source')) {\r\n                models = _.union(self.options.node.newCategories.models, models);\r\n              } else {\r\n                models = _.union(models, self.options.node.newCategories.models);\r\n              }\r\n            }\r\n            var categoryModels = _.sortBy(models,\r\n                function (model) {return model.attributes.title.toLowerCase()});\r\n            models = panelModels.concat(categoryModels);\r\n            self._normalizeModels(models);\r\n            self.collection.reset(models);\r\n            // check categories actions\r\n            self._checkCategoriesActions();\r\n          })\r\n          .fail(function (request) {\r\n            var error = new base.Error(request);\r\n            ModalAlert.showError(error.message, lang.getPropertyPanelsFailTitle);\r\n          });\r\n    },\r\n\r\n    _loadPanels: function () {\r\n      var self = this,\r\n          methodName, parameters;\r\n      if (this.options.action === 'create') {\r\n        methodName = 'getPropertyPanelsForCreate';\r\n        parameters = [{forms: this.allForms}];\r\n      } else if (this.options.action === 'copy') {\r\n        methodName = 'getPropertyPanelsForCopy';\r\n        parameters = [{forms: this.allForms}];\r\n      } else if (this.options.action === 'move') {\r\n        methodName = 'getPropertyPanelsForMove';\r\n        parameters = [{forms: this.allForms}];\r\n      } else if (this.options.action === 'restructure') {\r\n        // restructure functionality is similar to move, so we can reuse this method\r\n        methodName = 'getPropertyPanelsForMove';\r\n        parameters = [{forms: this.allForms}];\r\n      }  \r\n      else { // update\r\n        methodName = 'getPropertyPanels';\r\n        //while updating process when generating panels.\r\n        parameters = [{forms: this.allForms}];\r\n        // There are no pre-fetched forms for the update action;\r\n        // the 'v1/forms/info' has been abandoned, unfortunately,\r\n        // thus every panel has to fetch its own model\r\n      }\r\n      var promises = metadataPropertyPanels.chain()\r\n          .map(function (panel) {\r\n            var Controller        = panel.get('controller'),\r\n                controllerOptions = panel.get('controllerOptions'),\r\n                controller        = new Controller(_.extend({\r\n                  context: self.options.context,\r\n                  model: self.options.node\r\n                }, controllerOptions)),\r\n                method            = controller[methodName];\r\n            return method && method.apply(controller, parameters);\r\n          })\r\n          .compact()\r\n          .value();\r\n      return $.when\r\n          .apply($, promises)\r\n          .then(function () {\r\n            self._propertyPanels = _.flatten(arguments);\r\n          });\r\n    },\r\n\r\n    _loadGeneralFormFields: function () {\r\n      var self = this;\r\n      return GeneralFormFieldBehavior.getFieldDescriptors({\r\n        context: this.options.context,\r\n        action: this.options.action,\r\n        node: this.options.node,\r\n        forms: this.allForms\r\n      }).then(function (fieldDescriptors) {\r\n        self._generalFormFieldDescriptors = fieldDescriptors;\r\n      });\r\n    },\r\n\r\n    _loadGeneralActionFields: function () {\r\n      var self = this;\r\n      return GeneralActionFieldBehavior.getFieldDescriptors({\r\n        context: this.options.context,\r\n        action: this.options.action,\r\n        node: this.options.node,\r\n        forms: this.allForms\r\n      }).then(function (fieldDescriptors) {\r\n        self._generalActionFieldDescriptors = fieldDescriptors;\r\n      });\r\n    },\r\n\r\n    _normalizeModels: function (models) {\r\n      _.each(models, function (model) {\r\n        // If the view shows a form and the form has a title, which is\r\n        // not empty, this title should be used for the tab too\r\n        if (model instanceof FormModel) {\r\n          var schema = model.get('schema');\r\n          if (schema && schema.title) {\r\n            model.set('title', schema.title);\r\n          }\r\n        }\r\n        // Make sure, that the model has always an ID.  The scroll-spy\r\n        // used within the tab control puts these IDs to the a@href on\r\n        // the  tab links.  It could not recognize the particular link\r\n        // to navigate to otherwise.\r\n        if (model.get('id') == null) {\r\n          model.set('id', model.cid);\r\n        }\r\n        // When models are added to a collection, their model.collection\r\n        // property will not be updated, if it was already set - if they\r\n        // were already added to some other collection earlier.  Here,\r\n        // we're creating a new collection of property panel models, which\r\n        // should own them - they have to be removed from their previous\r\n        // collections, which fetched them.\r\n        if (model.collection) {\r\n          model.collection.remove(model);\r\n        }\r\n      });\r\n    },\r\n\r\n    // private\r\n    _checkCategoriesActions: function () {\r\n      // get category actions\r\n      // talking to the server developer, only need to check available actions of one category\r\n      var categoryModels = this.options.collection.where({role_name: 'categories'});\r\n      if (categoryModels.length > 0) {\r\n        var catId           = categoryModels[0].get('categoryId'),\r\n            categoryActions = new AppliedCategoryActionsCollection(undefined, {\r\n              node: this.options.node,\r\n              action: this.options.action,\r\n              urlResource: 'categories/' + catId + '/actions',\r\n              autofetch: true,\r\n              autoreset: true\r\n            });\r\n        this.blockActions();\r\n        categoryActions.fetch()\r\n            .done(_.bind(function () {\r\n              /*\r\n              For the below conditions, i.e. if the user opens the metadata of a version or\r\n              if the node is newly created or if the metadata page is being opened as part of any action (like copy, move..), we do not fetch the category actions. (look at appliedcategoriesaction.js to know more) So we don't need to update anything for these cases.\r\n              */\r\n              var actionsUpdated = !(this.options.node instanceof VersionModel ||\r\n                                     this.options.node.get('id') === undefined ||\r\n                                     this.options.action);\r\n\r\n              if(actionsUpdated) {\r\n                /*\r\n                When fecthing the forms for the metadata page,\r\n                If the 'removable' option for a category form is not explicitly received as false, we set it to be true and render the respective category delete-icons initially.\r\n                When the categoryActions are fecthed eventually, we need to updated the 'removable' property.\r\n\r\n                if the 'category_remove' action is not present in the response, it means that the user cannot remove a category and so we set 'removable' to false, else we set it to true. We trigger 'action:updated' event to notify the view.\r\n                */\r\n                var isRemoveActionAvailable;\r\n                if (categoryActions.length > 0 &&\r\n                    categoryActions.at(0).get('categories_remove') &&\r\n                    categoryActions.at(0).get('categories_remove').length > 0) {\r\n                  isRemoveActionAvailable = true;\r\n                } else {\r\n                  isRemoveActionAvailable = false;\r\n                }\r\n\r\n                _.each(categoryModels, function (cat) {\r\n                  cat.attributes['removeable'] = isRemoveActionAvailable;\r\n                  cat.trigger('action:updated');\r\n                });\r\n              }\r\n\r\n              this.unblockActions();\r\n              setTimeout(_.bind(function () {\r\n                // event for keyboard navigation\r\n                var event = $.Event('tab:content:render');\r\n                this.$el.trigger(event);\r\n              }, this), 300);\r\n            }, this))\r\n            .fail(_.bind(function (resp) {\r\n              var serverError = this._getRespError(resp);\r\n              var title = lang.getCategoryActionsFailTitle;\r\n              var message = _.str.sformat(lang.getActionsForACategoryFailMessage,\r\n                  catId, this.options.node.get(\"id\"), serverError);\r\n              ModalAlert.showError(message, title);\r\n              this.unblockActions();\r\n            }, this));\r\n      }\r\n    },\r\n\r\n    // private\r\n    _initializeOthers: function () {\r\n      var options = {\r\n        gotoPreviousTooltip: lang.gotoPreviousCategoryTooltip,\r\n        gotoNextTooltip: lang.gotoNextCategoryTooltip\r\n      };\r\n      this._initializeToolbars(options);\r\n      this._listenToTabEvent();\r\n\r\n      // delay this a bit since the initial dialog fade in makes the tab to be hidden\r\n      setTimeout(_.bind(this._enableToolbarState, this), 300);\r\n    },\r\n\r\n    _onWindowResize: function (event) {\r\n      if (event && event.data && event.data.view) {\r\n        var self = event.data.view;\r\n        // optimization for rapid mouse movement and redraw when mouse movement slows down or stop\r\n        if (self.resizeTimer) {\r\n          clearTimeout(self.resizeTimer);\r\n        }\r\n\r\n        var requireSwitched = self.options.node.collection && self.options.node.collection.requireSwitched;\r\n\r\n        self.resizeTimer = setTimeout(function () {\r\n          self._setTablinksAttributes();\r\n          self._computeTablinkWidth();\r\n          self._enableToolbarState();\r\n          self._updateScrollbar();\r\n          self.tabContent && self._hideNotRequiredFormFields(requireSwitched);\r\n        }, 200);\r\n      }\r\n    },\r\n\r\n    _setTablinksAttributes: function () {\r\n      var i, limit = 5;\r\n      var siblings, parent = this.$el.parent();\r\n      for (i = 0; i < limit; i++) {\r\n        siblings = parent.siblings('.cs-tab-links.binf-dropdown');\r\n        if (siblings.length > 0) {\r\n          var width = $(siblings[0]).width();\r\n          if (width > 15) {\r\n            var newWidth    = width - 12,\r\n                widForEle   = newWidth + \"px\",\r\n                dirForEle   = this.rtlEnabled ? \"margin-right\" : \"margin-left\",\r\n                tabLinksEle = this.$el.find('.tab-links');\r\n\r\n            tabLinksEle.css({\r\n              \"width\": function () {\r\n                return \"calc(100% - \" + widForEle + \")\";\r\n              }\r\n            });\r\n\r\n            if (tabLinksEle.length) {\r\n              tabLinksEle.css(dirForEle, widForEle);\r\n              var tabLinksEleWidth = parseInt(tabLinksEle.css('width').replace('px', ''), 10);\r\n              if (tabLinksEleWidth > 20 && tabLinksEleWidth < 250) {\r\n                tabLinksEle.addClass('csui-mini-tablinks');\r\n              } else {\r\n                tabLinksEle.removeClass('csui-mini-tablinks');\r\n              }\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        parent = parent.parent();\r\n      }\r\n    },\r\n\r\n    _createAddPropertiesView: function () {\r\n      var suppressAddProperties;\r\n      if (this.addPropertiesView) {\r\n        this.cancelEventsToViewsPropagation(this.addPropertiesView);\r\n        this.addPropertiesView.destroy();\r\n      }\r\n      if (this.options.node && this.options.node.get('type') === 136) {\r\n        suppressAddProperties = !CompoundDocumentsUtil.verifyNodeAncestors(this.context);\r\n      }\r\n      var options = _.extend({\r\n        toolbarItems: this.options.toolbarItems,\r\n        toolbarItemsMask: this.options.toolbarItemsMask,\r\n        parentView: this,\r\n        blockingParentView: this.options.blockingParentView,\r\n        addPropertiesCallback: this.addPropertiesCallback,\r\n        suppressAddProperties: suppressAddProperties ? suppressAddProperties : this.options.suppressAddProperties\r\n      }, this.options);\r\n      this.addPropertiesView = new AddPropertiesDropdownMenuView(options);\r\n      this.propagateEventsToViews(this.addPropertiesView);\r\n    },\r\n\r\n    addCatAt: function (models, respModel) {\r\n      var index = this.panelModelsLength;\r\n      for (var i = index; i < models.length; i++) {\r\n        if (models[i].get('title').toLowerCase() > respModel.get('title').toLowerCase()) {\r\n          index = i;\r\n          break;\r\n        }\r\n        index += 1;\r\n      }\r\n      return index;\r\n    },\r\n\r\n    addPropertiesCallback: function (catModel) {\r\n      // keep a list of newly added categories\r\n      if (this.options.action) {\r\n        this.options.node.newCategories.add(catModel);\r\n      }\r\n      var index = this.options.collection.models.length === 1 ? 1 :\r\n                  this.addCatAt(this.options.collection.models, catModel);\r\n\r\n      this.doAddModelProperties(catModel, index);\r\n      return false;\r\n    },\r\n\r\n    /**\r\n     * Adds provided model's form and handles and fires respective adjustments and events.\r\n     */\r\n    doAddModelProperties: function doAddModelProperties(model, index, additionalAddOpts) {\r\n      var self = this;\r\n      this.tabLinks.$el.find(\".binf-active\").removeClass(\"binf-active\")\r\n          .removeAttr('aria-selected');\r\n\r\n      function tabContentRendered() {\r\n        // Refresh tab indexes\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n        // Scroll and activate Tab\r\n        self._autoScrollTabTo(index, {animationOff: true})\r\n            .done(function () {\r\n              var newTab = self.tabLinks.children.findByModel(\r\n                  self.options.collection.findWhere({id: model.get('id')}));\r\n              //Adding this code in order to fix LPAD-104006 issue\r\n              newTab.$el.removeClass(\"binf-active\");\r\n              var $a = newTab.$el.find(\">a\");\r\n              $a.removeAttr('aria-selected');\r\n              newTab.activate();\r\n              newTab.$el.find(\"a.cs-tablink\").trigger('focus');\r\n            });\r\n      }\r\n\r\n      // Add model to collection to render form\r\n      this.options.collection.add(model, _.extend(additionalAddOpts || {}, {at: index}));\r\n      model.collection = this.options.collection;\r\n\r\n      this._listenToTabIdEvent(index);\r\n\r\n      var formContent = this.tabContent.children.findByModel(\r\n          this.options.collection.findWhere({id: model.get('id')})),\r\n          newFormView = formContent && formContent.content;\r\n      if (newFormView !== undefined) {\r\n        var isRendered = (newFormView instanceof FormView) ? newFormView.isRenderFinished() :\r\n                         newFormView._isRendered;\r\n        if (isRendered) {\r\n          // Content rendred by now.\r\n          tabContentRendered();\r\n        } else {\r\n          var renderEvent = (newFormView instanceof FormView) ? 'render:form' : 'dom:refresh';\r\n          this.listenToOnce(newFormView, renderEvent, _.bind(function () {\r\n            this.trigger(\"update:button\", false);\r\n            tabContentRendered();\r\n          }, this));\r\n        }\r\n        // Scroll to current rendered Tab.\r\n        // This is to make necessary adjustment to TabLinks scroll (Previous, Next)\r\n        this._autoScrollTabTo(index, {animationOff: true});\r\n      } else {\r\n        tabContentRendered();\r\n      }\r\n\r\n      this._computeTablinkWidth();\r\n      this._enableToolbarState();\r\n      this.trigger('reset:switch');\r\n    },\r\n\r\n    _resetRequiredSwitchView: function () {\r\n      PubSub.trigger('pubsub:header:rightbar:view:change:switch:status', 'reset');\r\n    },\r\n\r\n    // private\r\n    _onDeleteCategory: function (tabLink) {\r\n      this.tabToDelete = tabLink;\r\n      var categoryName = tabLink.model.get(\"title\");\r\n      var title = lang.removeCategoryWarningTitle;\r\n      var message = categoryName ? _.str.sformat(lang.removeCategoryWarningMessage, categoryName) :\r\n                    lang.removeCategoryWarningMessage;\r\n      ModalAlert\r\n          .confirmWarning(message, title)\r\n          .done(_.bind(this._removeCategory, this))\r\n          .fail(_.bind(function (err) {\r\n            if (!err) {\r\n              this.tabToDelete.$el.find('a').trigger('focus');\r\n            }\r\n          }, this));\r\n    },\r\n\r\n    // private\r\n    _removeCategory: function () {\r\n      if (this.tabToDelete) {\r\n        var id = this.tabToDelete.model.get('id');\r\n        id = _.isNumber(id) ? id.toString() : id;\r\n\r\n        // with add item metadata, the new node has not been created on the server yet\r\n        if (this.options.node.get(\"id\") === undefined || this.options.action) {\r\n          this._removeTab();\r\n          if (this.options.node.newCategories.remove(id) === undefined) {\r\n            this.options.node.removedCategories.push(id);\r\n          }\r\n          return;\r\n        }\r\n\r\n        var fullUrl = Url.combine(this.options.node.urlBase(), 'categories/' + id);\r\n        var options = {\r\n          type: 'DELETE',\r\n          url: fullUrl\r\n        };\r\n\r\n        this.blockActions();\r\n        this.options.node.connector.makeAjaxCall(options)\r\n            .done(_.bind(function () {\r\n              this.unblockActions();\r\n              this._removeTab();\r\n            }, this))\r\n            .fail(_.bind(function (resp) {\r\n              this.unblockActions();\r\n              var serverError = this._getRespError(resp);\r\n              var categoryName = this.tabToDelete.model.get(\"title\");\r\n              var title = lang.removeCategoryFailMessageTitle;\r\n              var message = _.str.sformat(lang.removeCategoryFailMessage, categoryName,\r\n                  serverError);\r\n              ModalAlert.showError(message, title);\r\n            }, this));\r\n      }\r\n    },\r\n\r\n    // private\r\n    _removeTab: function () {\r\n      if (this.tabToDelete.$el.hasClass('binf-active')) {\r\n        var previousIndex = this.tabToDelete._index - 1;\r\n        var previousTab = this.tabLinks.children.findByIndex(previousIndex);\r\n        this._autoScrollTabTo(previousIndex, {animationOff: true})\r\n            .done(function () {\r\n              previousTab && previousTab.activate();\r\n            });\r\n      }\r\n      this.options.collection.remove(this.tabToDelete.model);\r\n      this.trigger('reset:switch');\r\n\r\n      setTimeout(_.bind(function () {\r\n        this._computeTablinkWidth();\r\n        this._enableToolbarState();\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        this.$el.trigger(event);\r\n      }, this), 300);\r\n    },\r\n\r\n    // private\r\n    _onRequiredSwitch: function (args) {\r\n      Backbone.trigger('closeToggleAction');\r\n      this._updateScrollbar();\r\n      this._hideNotRequiredFormFields(args.on, args);\r\n      return false;\r\n    },\r\n\r\n    _hideNotRequiredFormFields: function (hide, args) {\r\n      this.tabContent.children.each(function (tabContent) {\r\n        // Not every tab panel has to be a form, or implemented by FormView\r\n        if (tabContent.content.hideNotRequired) {\r\n          var appliedToWholeForm = tabContent.content.hideNotRequired(hide);\r\n          var tabLink = this.tabLinks.children.findByModel(tabContent.model);\r\n          // If the whole form has been hidden, hide the tab content with\r\n          // optional border lines and the tab link at the top too\r\n          if (appliedToWholeForm) {\r\n            var method = hide ? 'addClass' : 'removeClass';\r\n            tabContent.$el[method]('binf-hidden hidden-by-switch');\r\n            if (hide) {\r\n              this._hideTabLinkByRequiredSwitch(tabLink.$el);\r\n            } else {\r\n              this._showTabLinkByRequiredSwitch(tabLink.$el, tabContent.model.get('removeable'));\r\n            }\r\n          } else {\r\n            // The form has some required fields, make sure the tabLink is visible\r\n            this._showTabLinkByRequiredSwitch(tabLink.$el, tabContent.model.get('removeable'));\r\n          }\r\n        }\r\n      }, this);\r\n      this.tabLinks.$el.find(\".tab-links-first-visible\").removeClass(\"tab-links-first-visible\");\r\n      this.tabContent.onReorder();\r\n      // Ensure, that another tab gets activated, if the currently active\r\n      // one was hidden, and scroll to the top to see it.\r\n      /* var firstVisibleTabLink = this.tabLinks.children.find(function (tabLink) {\r\n         return !tabLink.$el.hasClass('binf-hidden');\r\n       });*/\r\n      var firstVisibleTabLink,\r\n          tabLinkViews      = this.tabLinks.children._views,\r\n          keysSortedByIndex = Object.keys(tabLinkViews).sort(\r\n              function (view1, view2) {\r\n                return tabLinkViews[view1]._index - tabLinkViews[view2]._index;\r\n              });\r\n      for (var index = 0; index < keysSortedByIndex.length; index++) {\r\n        if (!this.tabLinks.children._views[keysSortedByIndex[index]].$el.hasClass('binf-hidden')) {\r\n          firstVisibleTabLink = this.tabLinks.children._views[keysSortedByIndex[index]];\r\n          break;\r\n        }\r\n      }\r\n      if (!!firstVisibleTabLink) {\r\n        firstVisibleTabLink.$el.addClass(\"tab-links-first-visible\");\r\n      }\r\n      // FIXME: If the very first tab (General) is hidden, this scrolls right\r\n      // to the second one.  The scrollbar thumb stays a little above the top.\r\n      // If it is moved really the the top, no tab link will be emphasized as\r\n      // active one.  Hiding the tab links may need some cooperation from the\r\n      // scroll-spy to skip the hidden tab links.\r\n      if (firstVisibleTabLink && !firstVisibleTabLink.isActive()) {\r\n        firstVisibleTabLink.activate();\r\n      }\r\n\r\n      setTimeout(_.bind(function () {\r\n        this._computeTablinkWidth();\r\n        this._enableToolbarState();\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        this.$el.trigger(event);\r\n        if (!!args) { // executes only when coming thr' event driven\r\n          this.currentTabPosition = 1;\r\n        }\r\n\r\n      }, this), 300);\r\n    },\r\n\r\n    // private\r\n    _getRespError: function (resp) {\r\n      var error = '';\r\n      if (resp && resp.responseJSON && resp.responseJSON.error) {\r\n        error = resp.responseJSON.error;\r\n      } else if (base.MessageHelper.hasMessages()) {\r\n        error = $(base.MessageHelper.toHtml()).text();\r\n        base.MessageHelper.clear();\r\n      }\r\n      return error;\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataPropertiesViewImpl.prototype, TabLinksScrollMixin);\r\n\r\n  return MetadataPropertiesViewImpl;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.properties.view',['module', 'csui/lib/underscore', 'csui/widgets/metadata/impl/metadata.properties.view',\r\n  'css!csui/widgets/metadata/impl/metadata'\r\n], function (module, _, MetadataPropertiesViewImpl) {\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    topAlignLabel: false\r\n  });\r\n\r\n  //\r\n  // Public: Metadata Properties View Class\r\n  // Description: provides the view of general and other metadata properties (such as categories,\r\n  // etc.) of a node.  It allows for navigation, editing and getting form values of different types\r\n  // of metadata.\r\n  //\r\n  // This class is a clean and easy-to-read wrapper to expose as a public interface.\r\n  // See the implementation impl/metadata.properties.view.js for more available public methods.\r\n  //\r\n  var MetadataPropertiesView = MetadataPropertiesViewImpl.extend({\r\n\r\n    constructor: function MetadataPropertiesView(options) {\r\n      options.topAlignLabel = config.topAlignLabel;\r\n      MetadataPropertiesViewImpl.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    validateForms: function () {\r\n      return MetadataPropertiesViewImpl.prototype.validateForms.apply(this, arguments);\r\n    },\r\n\r\n    getFormsValues: function () {\r\n      return MetadataPropertiesViewImpl.prototype.getFormsValues.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataPropertiesView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.properties.content.view',['csui/lib/underscore', 'csui/lib/marionette', 'csui/utils/nodesprites',\r\n  'csui/widgets/metadata/metadata.properties.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin'\r\n], function (_, Marionette, NodeSpriteCollection, MetadataPropertiesView,\r\n    ViewEventsPropagationMixin) {\r\n\r\n  var MetadataPropertiesContentView = Marionette.ItemView.extend({\r\n\r\n    className: 'metadata-inner-wrapper',\r\n\r\n    constructor: function MetadataPropertiesContentView(options) {\r\n      this.options = options;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      var tabOptions = {\r\n        context: this.options.context,\r\n        node: this.options.model,\r\n        containerCollection: this.options.containerCollection,\r\n        metadataView: this.options.metadataView,\r\n        blockingParentView: this.options.blockingParentView,\r\n        selectedProperty: this.options.selectedProperty,\r\n        notTabableRegion: true\r\n      };\r\n      this.childTabPanelView = new MetadataPropertiesView(tabOptions);\r\n\r\n      this.propagateEventsToViews(this.childTabPanelView);\r\n    },\r\n\r\n    render: function () {\r\n      this._ensureViewIsIntact();\r\n      this.triggerMethod('before:render', this);\r\n\r\n      var mdv = this.childTabPanelView.render();\r\n\r\n      Marionette.triggerMethodOn(mdv, 'before:show', mdv, this);\r\n      this.$el.append(mdv.el);\r\n      Marionette.triggerMethodOn(mdv, 'show', mdv, this);\r\n\r\n      this.triggerMethod('render', this);\r\n      return this;\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      this.childTabPanelView.destroy();\r\n    },\r\n\r\n    onPanelActivated: function () {\r\n      this.childTabPanelView && this.childTabPanelView.triggerMethod('panel:activated');\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataPropertiesContentView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataPropertiesContentView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/versions/metadata.versions.columns',[\"csui/lib/backbone\", 'i18n!csui/widgets/metadata/impl/nls/lang'],\r\n    function (Backbone, lang) {\r\n\r\n      var TableColumnModel = Backbone.Model.extend({\r\n\r\n        idAttribute: \"key\",\r\n\r\n        defaults: {\r\n          key: null,  // key from the resource definitions\r\n          sequence: 0 // smaller number moves the column to the front\r\n        }\r\n\r\n      });\r\n\r\n      var TableColumnCollection = Backbone.Collection.extend({\r\n\r\n        model: TableColumnModel,\r\n        comparator: \"sequence\",\r\n\r\n        getColumnKeys: function () {\r\n          return this.pluck('key');\r\n        },\r\n\r\n        deepClone: function () {\r\n          return new TableColumnCollection(\r\n              this.map(function (column) {\r\n                return column.attributes;\r\n              }));\r\n        }\r\n      });\r\n\r\n      // Fixed (system) columns have sequence number < 100, dynamic columns\r\n      // have sequence number > 1000\r\n\r\n      var tableColumns = new TableColumnCollection([\r\n        {\r\n          key: 'version_number_name',\r\n          align: 'center',\r\n          title: lang.versionColumnVersionNumberTitle,\r\n          sequence: 10\r\n        },\r\n        {\r\n          key: 'name',\r\n          sequence: 20\r\n        },\r\n        {\r\n          key: 'create_date',\r\n          sequence: 30\r\n        },\r\n        {\r\n          key: 'owner_id',\r\n          sequence: 40\r\n        },\r\n        {\r\n          key: 'file_size',\r\n          align: 'right',\r\n          title: lang.versionColumnSizeTitle,\r\n          sequence: 50\r\n        }\r\n      ]);\r\n\r\n      return tableColumns;\r\n\r\n    });\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/versions/metadata.versions',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"csui-metadata-versions\\\">\\r\\n  <div class=\\\"csui-metadata-versions-rowselection-toolbar-view\\\"></div>\\r\\n  <div class=\\\"csui-table-view\\\"></div>\\r\\n  <div class=\\\"csui-pagination-view\\\"></div>\\r\\n</div>\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_versions_metadata.versions', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/versions/metadata.versions',[],function(){});\n","csui.define('csui/widgets/metadata/impl/versions/metadata.versions.view',[\"module\", \"csui/lib/jquery\", \"csui/lib/underscore\",\r\n  'csui/lib/backbone',\r\n  'csui/lib/marionette',\r\n  'csui/utils/base',\r\n  'csui/controls/globalmessage/globalmessage',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/controls/toolbar/toolitems.filtered.model',\r\n  'csui/controls/toolbar/toolbar.view',\r\n  'csui/controls/toolbar/delayed.toolbar.view',\r\n  'csui/controls/table/table.view',\r\n  'csui/controls/pagination/nodespagination.view',\r\n  'csui/utils/versions.default.action.items',\r\n  'csui/utils/commands/versions',\r\n  'csui/utils/commandhelper',\r\n  'csui/utils/accessibility',\r\n  'csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view',\r\n  'csui/controls/tableactionbar/tableactionbar.view',\r\n  'csui/controls/toolbar/toolbar.command.controller',\r\n  'csui/models/nodes',\r\n  'csui/models/columns',\r\n  'csui/models/nodeversions',\r\n  'csui/models/version',\r\n  'csui/widgets/metadata/impl/versions/metadata.versions.columns',\r\n  'csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/widgets/metadata/versions.toolbaritems.mask',\r\n  'csui/utils/log',\r\n  'csui/utils/url',\r\n  'hbs!csui/widgets/metadata/impl/versions/metadata.versions',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/versions/metadata.versions'\r\n], function (module, $, _, Backbone, Marionette, base,\r\n GlobalMessage,\r\n LayoutViewEventsPropagationMixin,\r\n FilteredToolItemsCollection,\r\n ToolbarView,\r\n DelayedToolbarView,\r\n TableView,\r\n PaginationView,\r\n defaultActionItems,\r\n commands,\r\n CommandHelper,\r\n Accessibility,\r\n TableRowSelectionToolbarView,\r\n TableActionBarView,\r\n ToolbarCommandController,\r\n NodeCollection,\r\n NodeColumnCollection,\r\n NodeVersionCollection,\r\n VersionModel,\r\n metadataVersionsColumns,\r\n toolbarItems,\r\n VersionsToolbarItemsMask,\r\n Log,\r\n Url,\r\n template, metadataLang) {\r\n  'use strict';\r\n\r\n  var accessibleTable = Accessibility.isAccessibleTable();\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    defaultPageSize: 30,\r\n    defaultPageSizes: [30, 50, 100],\r\n    showInlineActionBarOnHover: !accessibleTable,\r\n    forceInlineActionBarOnClick: false,\r\n    inlineActionBarStyle: 'csui-table-actionbar-bubble',\r\n    enabled: true,\r\n    useV2RestApi: false\r\n  });\r\n\r\n  var MetadataVersionsTableView = Marionette.LayoutView.extend({\r\n    className: function () {\r\n      var className = 'metadata-inner-wrapper';\r\n      if (accessibleTable) {\r\n        className += ' csui-no-animation';\r\n      }\r\n      return className;\r\n    },\r\n    template: template,\r\n\r\n    ui: {\r\n      tableRowSelectionToolbarView: '.csui-metadata-versions-rowselection-toolbar-view',\r\n      tableView: '.csui-table-view',\r\n      childContainer: '.csui-table-view',\r\n      paginationView: '.csui-pagination-view'\r\n    },\r\n\r\n    regions: {\r\n      tableRowSelectionToolbarRegion: '@ui.tableRowSelectionToolbarView',\r\n      tableRegion: '@ui.tableView',\r\n      paginationRegion: '@ui.paginationView'\r\n    },\r\n\r\n    constructor: function MetadataVersionsTableView(options) {\r\n      this.commands = commands;\r\n      _.defaults(options, {\r\n        pageSize: config.defaultPageSize,\r\n        ddItemsList: config.defaultPageSizes,\r\n        showInlineActionBarOnHover: config.showInlineActionBarOnHover,\r\n        forceInlineActionBarOnClick: config.forceInlineActionBarOnClick,\r\n        inlineActionBarStyle: config.inlineActionBarStyle,\r\n        toolbarItems: toolbarItems,\r\n        originatingView: options.originatingView || options.metadataView\r\n      });\r\n\r\n      MetadataVersionsTableView.__super__.constructor.call(this, options);\r\n\r\n      this.selectedNodes = new NodeCollection();\r\n\r\n      this.collection = new NodeVersionCollection(undefined, {\r\n        node: this.options.model,\r\n        autoreset: true,\r\n        expand: \"user\",\r\n        commands: commands.getAllSignatures(),\r\n        useV2RestApi: config.useV2RestApi,\r\n        onlyClientSideDefinedColumns: true  // ignore columns sent by server\r\n      });\r\n\r\n      //TODO: we can get rid of this additional call, once advanced info is available in node call.\r\n      this._ensureNodeAdvanceInfo();\r\n\r\n      this.options.model.versions = this.collection;  // connect version collection with node\r\n\r\n      this.commandController = new ToolbarCommandController({commands: this.commands});\r\n\r\n      if (this.collection.delayedActions) {\r\n        this.listenTo(this.collection.delayedActions, 'error',\r\n            function (collection, request, options) {\r\n              var error = new base.Error(request);\r\n              GlobalMessage.showMessage('error', error.message);\r\n            });\r\n      }\r\n      this.defaultActionItems = defaultActionItems;\r\n\r\n      if (!this.options.toolbarItemsMasks) {\r\n        this.options.toolbarItemsMasks = new VersionsToolbarItemsMask(this.options);\r\n      }\r\n\r\n      this._setTableView();\r\n\r\n      // must be after setTableView\r\n      this._setTableRowSelectionToolbar({\r\n        toolItemFactory: this.options.toolbarItems.tableHeaderToolbar,\r\n        toolbarItemsMask: this.options.toolbarItemsMasks,\r\n        commands: this.options.commands || commands,\r\n      });\r\n\r\n      this._setTableRowSelectionToolbarEventListeners();\r\n\r\n      this._setPagination();\r\n\r\n      this._updateCollection();\r\n\r\n      // Cause the show events triggered on the parent view re-triggered\r\n      // on the views placed in the inner regions\r\n      this.propagateEventsToRegions();\r\n      this.listenTo(this.collection, \"add\", this._updateCollection)\r\n      .listenTo(this.collection, \"remove\", this._updateCollection);\r\n    },\r\n\r\n    onRender: function () {\r\n      this.tableRowSelectionToolbarRegion.show(this._tableRowSelectionToolbarView);\r\n      this.tableRegion.show(this.tableView);\r\n      this.paginationRegion.show(this.paginationView);\r\n    },\r\n\r\n    _updateCollection: function () {\r\n      var deferred = $.Deferred();\r\n      var errorMessage;\r\n      this.collection.fetch().then(function(res){\r\n        deferred.resolve();\r\n      },function(err){\r\n       \r\n        if (err && err.responseJSON && err.responseJSON.error) {\r\n          errorMessage = err.responseJSON.error;\r\n        } else {\r\n          var errorHtml = base.MessageHelper.toHtml();\r\n          base.MessageHelper.reset();\r\n          errorMessage = $(errorHtml).text();\r\n        }\r\n        GlobalMessage.showMessage('error', errorMessage);\r\n        deferred.reject();\r\n      });\r\n    },\r\n\r\n    _setTableView: function () {\r\n      this.options || (this.options = {});\r\n\r\n      var args = _.extend({\r\n        tableColumns: metadataVersionsColumns,\r\n        connector: this.model.connector,\r\n        collection: this.collection,\r\n        columns: this.collection.columns,\r\n        columnsWithSearch: [],\r\n        orderBy: \"version_number_name desc\",\r\n        actionItems: defaultActionItems,\r\n        commands: commands,\r\n\tinlineBar: {\r\n\t    viewClass: TableActionBarView,\r\n\t    options: _.extend(\r\n\t      {\r\n\t        collection: this.options.toolbarItems.inlineActionbar,\r\n\t        toolItemsMask: this.options.toolbarItemsMasks,\r\n\t        container: this.collection.node,\r\n\t        containerCollection: this.collection,\r\n\t      },\r\n\t      this.options.toolbarItems.inlineActionbar.options,\r\n\t      {\r\n\t        inlineBarStyle: this.options.inlineActionBarStyle,\r\n\t        forceInlineBarOnClick: this.options.forceInlineActionBarOnClick,\r\n\t        showInlineBarOnHover: this.options.showInlineActionBarOnHover,\r\n\t      }\r\n\t    ),\r\n\t},\r\n        originatingView: this.options.originatingView,\r\n        focusView: 'tableHeader',\r\n        tableAria: _.str.sformat(metadataLang.versionTableAria, this.collection.node.get('name'))\r\n      }, this.options);\r\n\r\n      /*\r\n      LPAD-60042\r\n      deleting blockingParentView option to fix expand/collapse icon.\r\n      table.view.js checks the condition this.$el[0].children.length > 0 in\r\n      function calculateMaxColumnsDisplayed()\r\n      */\r\n      delete args.blockingParentView;\r\n\r\n      if (!_.contains(this.options.ddItemsList, this.options.pageSize)) {\r\n        this.options.ddItemsList.push(this.options.pageSize);\r\n        this.options.ddItemsList.sort();\r\n      }\r\n\r\n      this.tableView = new TableView(args);\r\n\r\n      // Events\r\n      var cmdOption = {context: this.options.context, originatingView: this};\r\n\r\n      this.listenTo(this.tableView, 'execute:defaultAction', function (node) {\r\n        var action = this.defaultActionItems.find(function (actionItem) {\r\n          if (actionItem.get('type') === node.get('type')) {\r\n            return true;\r\n          }\r\n        }, this);\r\n        var cmd = commands.get(action.get('signature'));\r\n        var status = {nodes: new NodeVersionCollection([node])};\r\n        var promise = cmd.execute(status, cmdOption);\r\n        CommandHelper.handleExecutionResults(\r\n            promise, {\r\n              command: cmd,\r\n              suppressSuccessMessage: status.suppressSuccessMessage,\r\n              suppressFailMessage: status.suppressFailMessage\r\n            });\r\n      });\r\n    },\r\n\r\n    _setTableRowSelectionToolbar: function (options) {\r\n      this._tableRowSelectionToolbarView = new TableRowSelectionToolbarView({\r\n        toolItemFactory: options.toolItemFactory,\r\n        toolbarItemsMask: options.toolbarItemsMask,\r\n        toolbarCommandController: this.commandController,\r\n\r\n        // if toolbarCommandController is not defined, a new ToolbarCommandController\r\n        // with the following commands is created\r\n        commands: commands,\r\n        selectedChildren: this.tableView.selectedChildren,\r\n        container: this.collection.node,\r\n        context: this.options.context,\r\n        originatingView: this.options.originatingView,\r\n        collection: this.collection\r\n      });\r\n    },\r\n\r\n    _setTableRowSelectionToolbarEventListeners: function () {\r\n      // listen for change of the selected rows in the table.view and if at least one row is\r\n      // selected, display the table-row-selected-toolbar\r\n      this.listenTo(this.tableView.selectedChildren, 'reset', function () {\r\n        // TODO: Re-use TableRowSelectionToolbarBehavior.\r\n        if (this.tableView.selectedChildren.length > 0) {\r\n          this.tableRowSelectionToolbarRegion.$el.addClass(\r\n              'csui-metadata-versions-rowselection-toolbar-visible');\r\n        } else {\r\n          this.tableRowSelectionToolbarRegion.$el.removeClass(\r\n              'csui-metadata-versions-rowselection-toolbar-visible');\r\n        }\r\n      });\r\n    },\r\n\r\n    _setPagination: function () {\r\n      this.paginationView = new PaginationView({\r\n        collection: this.collection,\r\n        pageSize: this.options.pageSize,\r\n        defaultDDList: this.options.ddItemsList,\r\n        skipPaginationUpdateRequest: true\r\n      });\r\n    },\r\n    \r\n    _ensureNodeAdvanceInfo: function () {\r\n      var versionNode = this.options.model;\r\n      if (versionNode.get('advanced_versioning') === undefined) {\r\n        var id = versionNode.get(\"id\"),\r\n            connector = versionNode.connector ? versionNode.connector : this.options.connector,\r\n            fullUrl = Url.combine(\r\n                connector.getConnectionUrl().getApiBase(\"v2\"),\r\n                \"/nodes/\" + id +\r\n                \"/properties\"\r\n            ),\r\n            ajaxOptions = {\r\n              type: \"GET\",\r\n              url: fullUrl\r\n            };\r\n\r\n        connector.makeAjaxCall(ajaxOptions).done(\r\n            _.bind(function (resp) {\r\n              var response =  resp.results.data && resp.results.data.properties;\r\n              response && versionNode.set(\r\n                  {\r\n                    advanced_versioning: response.advanced_versioning\r\n                  },\r\n                  {silent: true}\r\n              );\r\n            }, this)\r\n        ).fail(function (request) {\r\n          var error = new base.Error(request);\r\n          Log.warn('fetching node properties failed.\\n{0}', error.message) &&\r\n          console.warn(Log.last);\r\n        });\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  // Add the mixin functionality to the target view\r\n  _.extend(MetadataVersionsTableView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return MetadataVersionsTableView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.versions.view',[\"module\", \"csui/lib/jquery\", \"csui/lib/underscore\",\r\n  'csui/lib/backbone',\r\n  'csui/lib/marionette',\r\n  'csui/widgets/metadata/impl/versions/metadata.versions.view',\r\n  'csui/models/version'\r\n], function (module, $, _, Backbone, Marionette, MetadataVersionsTableView, VersionModel) {\r\n  'use strict';\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    enabled: true\r\n  });\r\n\r\n  var MetadataVersionsView = MetadataVersionsTableView.extend({\r\n\r\n    constructor: function MetadataVersionsView(options) {\r\n      MetadataVersionsTableView.prototype.constructor.apply(this, arguments);\r\n    }\r\n  },\r\n  {\r\n    enabled: function (options) {\r\n      if (config.enabled === false || options.enabled === false) {\r\n        return false;\r\n      }\r\n      // don't enable if we are viewing properties of a VersionModel\r\n      if (options.node instanceof VersionModel) {\r\n        return false;\r\n      }\r\n      // TODO: Recognize versionable objects in a common way. For example,\r\n      // available_roles in v1 REST API was a viable way. It could be also\r\n      // done by extensibility on the client side.\r\n      return _.contains([144, 736, 749, 5574], options.node.get('type'));\r\n    }\r\n  }\r\n  );\r\n  return MetadataVersionsView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/audit/metadata.audit.columns',['csui/lib/backbone',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (Backbone, lang) {\r\n\r\n  var TableColumnModel = Backbone.Model.extend({\r\n\r\n    idAttribute: 'key',\r\n\r\n    defaults: {\r\n      key: null,  // key from the resource definitions\r\n      sequence: 0 // smaller number moves the column to the front\r\n    }\r\n\r\n  });\r\n\r\n  var TableColumnCollection = Backbone.Collection.extend({\r\n\r\n    model: TableColumnModel,\r\n    comparator: 'sequence',\r\n\r\n    getColumnKeys: function () {\r\n      return this.pluck('key');\r\n    },\r\n\r\n    deepClone: function () {\r\n      return new TableColumnCollection(\r\n          this.map(function (column) {\r\n            return column.attributes;\r\n          }));\r\n    }\r\n  });\r\n\r\n  var tableColumns = new TableColumnCollection([\r\n    {\r\n      key: 'audit_name',\r\n      align: 'left',\r\n      title: lang.action,\r\n      sequence: 10\r\n    },\r\n    {\r\n      key: 'audit_date',\r\n      align: 'left',\r\n      title: lang.date,\r\n      sequence: 20\r\n    },\r\n    {\r\n      key: 'user_id',\r\n      align: 'left',\r\n      title: lang.user,\r\n      sequence: 30\r\n    }\r\n  ]);\r\n\r\n  return tableColumns;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/audit/metadata.audit',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"csui-audit-table\\\"></div>\\r\\n<div class=\\\"csui-audit-pagination\\\"></div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_audit_metadata.audit', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/audit/metadata.audit',[],function(){});\n","csui.define('csui/widgets/metadata/impl/audit/metadata.audit.view',['module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'csui/utils/contexts/factories/connector',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/controls/table/table.view', 'csui/controls/pagination/nodespagination.view',\r\n  'csui/models/audit/audit.collection',\r\n  'csui/widgets/metadata/impl/audit/metadata.audit.columns',\r\n  'csui/models/members',\r\n  'csui/controls/userpicker/roles/user.view',\r\n  'csui/utils/base',\r\n  'hbs!csui/widgets/metadata/impl/audit/metadata.audit',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/audit/metadata.audit'\r\n], function (module, _, $, Marionette, ConnectorFactory, LayoutViewEventsPropagationMixin, TableView,\r\n  PaginationView, AuditCollection, metadataAuditTableColumns, MemberCollection, UserView, base,\r\n  template, lang) {\r\n  'use strict';\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    defaultPageSize: 30,\r\n    defaultPageSizes: [30, 50, 100]\r\n  });\r\n\r\n  var MetadataAuditTableView = Marionette.LayoutView.extend({\r\n\r\n    className: 'csui-audit',\r\n\r\n    template: template,\r\n\r\n    ui: {\r\n      tableView: '.csui-audit-table',\r\n      paginationView: '.csui-audit-pagination'\r\n    },\r\n\r\n    regions: {\r\n      tableRegion: '@ui.tableView',\r\n      paginationRegion: '@ui.paginationView'\r\n    },\r\n\r\n    constructor: function MetadataAuditTableView (options) {\r\n      options || (options = {});\r\n      Marionette.LayoutView.prototype.constructor.apply(this, arguments);\r\n      this.collection.fetch();\r\n      // events triggered on the parent view re-triggered\r\n      // on the views placed in the inner regions\r\n      this.propagateEventsToRegions();\r\n    },\r\n\r\n    initialize: function () {\r\n      _.defaults(this.options, {\r\n        pageSize: config.defaultPageSize,\r\n        ddItemsList: config.defaultPageSizes\r\n      });\r\n      this.collection = new AuditCollection(undefined, {\r\n        connector: this.options.context.getObject(ConnectorFactory),\r\n        node: this.options.model,\r\n        autoreset: true\r\n      });\r\n\r\n      this._setTableView();\r\n      this._setPagination();\r\n\r\n      // to handle the case where focus comes to event search box on dom:refresh event and dropdown is shown after tableview is rendered.\r\n      this.listenTo(this.tableView, 'before:render', function (event) {\r\n        var eventsSearchBoxView = this.tableView.searchBoxes.length && this.tableView.searchBoxes[0];\r\n        if (eventsSearchBoxView && !eventsSearchBoxView.ui.searchBox.hasClass('binf-hidden') &&\r\n            !this.eventDropDownOpts.doNotShowDropDown && this.tableView.tableCaptionView.accFocusedColumn === 0) {\r\n          this.eventDropDownOpts.doNotShowDropDown = true;\r\n        }\r\n      });\r\n\r\n    },\r\n\r\n    onRender: function () {\r\n      this.tableRegion.show(this.tableView);\r\n      this.paginationRegion.show(this.paginationView);\r\n    },\r\n\r\n    getUserSearchboxOptions: function () {\r\n\r\n      var collection = new MemberCollection(undefined, {\r\n          connector: this.options.context.getObject(ConnectorFactory),\r\n          memberFilter: {\r\n            type: [0]\r\n          }, // filters only users\r\n          limit: 10,\r\n          comparator: function (item) {\r\n            return item.get('name_formatted').toLowerCase();\r\n          }\r\n        }),\r\n\r\n        _retrieveMembers = function (query) {\r\n          var self = this;\r\n          this.collection.query = query;\r\n          // fetch and resolve\r\n          return this.collection\r\n            .fetch()\r\n            .then(function () {\r\n              // resolve\r\n              return self.collection.models;\r\n            });\r\n        },\r\n\r\n        _retrieveDisplayText = function (item) {\r\n          return item.get('name');\r\n        },\r\n\r\n        _renderHighlighter = function (item) {\r\n          var model = this.collection.findWhere({\r\n              name: item\r\n            }),\r\n            view = new UserView({\r\n              model: model,\r\n              connector: this.collection.connector,\r\n              lightWeight: false\r\n            });\r\n          // ... and render\r\n          return view.render().el;\r\n        };\r\n\r\n      return {\r\n        collection: collection,\r\n        source: _retrieveMembers,\r\n        displayText: _retrieveDisplayText,\r\n        highlighter: _renderHighlighter,\r\n        filter: 'user_id',\r\n        pickerListId: _.uniqueId('userList'),\r\n        pickerListClass: 'userpickerul'\r\n      };\r\n    },\r\n\r\n    getEventSearchboxOptions: function () {\r\n\r\n      this.eventDropDownOpts = {doNotShowDropDown: false};\r\n\r\n      var collection = this.collection.auditEvents,\r\n        _retrieveDisplayText = function (item) {\r\n          return item.get('name');\r\n        },\r\n\r\n        _retrieveEvents      = function (query) {\r\n          var self = this;\r\n          var filteredModels = _.filter(self.collection.models, function (model) {\r\n            return model.get('name').toLowerCase().indexOf(query.toLowerCase()) !== -1;\r\n          });\r\n          return _.sortBy(filteredModels, function (action) { return action.get('name'); });\r\n        },\r\n\r\n        focus = function (e) {\r\n          if (!this.focused) {\r\n            this.focused = true;\r\n            if (this.options.showHintOnFocus && !this.options.dropDownOpts.doNotShowDropDown) {\r\n                this.lookup();\r\n            }\r\n          }\r\n          if (this.options.dropDownOpts.doNotShowDropDown) {\r\n            this.options.dropDownOpts.doNotShowDropDown = false;\r\n          }\r\n        },\r\n\r\n        highlighter = function (item) {\r\n          return $('<div></div>').text(item).html();\r\n        },\r\n\r\n        afterSelect = function (item) {\r\n          // don't show dropdown due to focus after selecting an item.\r\n          if(this.options.dropDownOpts && !this.options.dropDownOpts.doNotShowDropDown) {\r\n            this.options.dropDownOpts.doNotShowDropDown = true;\r\n          }\r\n          var val = this.options.clearOnSelect ? '' : base.formatMemberName(item);\r\n          this.ui.searchBox.val(val);\r\n          this.trigger(this.valueChangedEventName, {\r\n            column: this.options.filter,\r\n            keywords: item.get('id')\r\n          });\r\n        };\r\n\r\n      return {\r\n        collection: collection,\r\n        source: _retrieveEvents,\r\n        displayText: _retrieveDisplayText,\r\n        filter: 'type',\r\n        pickerListId: _.uniqueId('typeList'),\r\n        showHintOnFocus: true,\r\n        dropDownOpts: this.eventDropDownOpts,\r\n        focus: focus,\r\n        afterSelect: afterSelect,\r\n        highlighter: highlighter\r\n      };\r\n    },\r\n\r\n    _setTableView: function () {\r\n\r\n      var userSearchOptions = this.getUserSearchboxOptions(),\r\n        eventSearchOptions = this.getEventSearchboxOptions(),\r\n        options = _.extend({\r\n          connector: this.model.connector,\r\n          collection: this.collection,\r\n          tableColumns: metadataAuditTableColumns,\r\n          orderBy: 'audit_date desc',\r\n          columnsWithTypeaheadSearchbox: {\r\n            \"user_id\": userSearchOptions,\r\n            \"audit_name\": eventSearchOptions\r\n          },\r\n          selectColumn: false,\r\n          haveDetailsRowExpandCollapseColumn: true,\r\n          actionItems: this.defaultActionItems,\r\n          commands: this.commands,\r\n          wfElementID: '',\r\n          customLabels: {\r\n            emptyTableText: lang.auditNoResultsPlaceholder\r\n          },\r\n          focusView: 'tableHeader',\r\n          tableAria: _.str.sformat(lang.auditTableAria, this.options.model.get('name'))\r\n        }, this.options);\r\n\r\n      this.tableView = new TableView(options);\r\n    },\r\n\r\n    _setPagination: function () {\r\n      var options = {\r\n        collection: this.collection,\r\n        pageSize: this.options.pageSize,\r\n        defaultDDList: this.options.ddItemsList\r\n      };\r\n      this.paginationView = new PaginationView(options);\r\n    }\r\n  });\r\n  _.extend(MetadataAuditTableView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return MetadataAuditTableView;\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.audit.view',[\"module\", \"csui/lib/jquery\", \"csui/lib/underscore\",\r\n  'csui/lib/backbone',\r\n  'csui/lib/marionette',\r\n  'csui/widgets/metadata/impl/audit/metadata.audit.view'\r\n], function (module, $, _, Backbone, Marionette, MetadataAuditTableView) {\r\n  'use strict';\r\n\r\n  var MetadataAuditView = MetadataAuditTableView.extend({\r\n\r\n    constructor: function MetadataAuditView(options) {\r\n      MetadataAuditTableView.prototype.constructor.apply(this, arguments);\r\n    }\r\n  },\r\n  {\r\n    enabled: function (options) {\r\n      var config = module.config();\r\n      _.defaults(config, {\r\n        enabled: true\r\n      });\r\n      if (config.enabled === false) {\r\n        return false;\r\n      }\r\n      return !!options.node.get('id');\r\n    }\r\n  }\r\n  );\r\n  return MetadataAuditView;\r\n\r\n});\r\n\n","csui.define('csui/models/compound.document/releases/releases.collection',['csui/lib/underscore',\r\n  'csui/lib/backbone',\r\n  'nuc/models/browsable/browsable.mixin',\r\n  'csui/models/mixins/connectable/connectable.mixin',\r\n  'csui/models/mixins/fetchable/fetchable.mixin',\r\n  'nuc/models/browsable/v1.request.mixin',\r\n  'csui/models/browsable/v2.response.mixin',\r\n  'csui/models/compound.document/releases/server.adaptor.mixin',\r\n  'csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin',\r\n  'csui/models/mixins/v2.fields/v2.fields.mixin',\r\n  'csui/models/mixins/v2.expandable/v2.expandable.mixin',\r\n  'csui/models/mixins/state.requestor/state.requestor.mixin',\r\n  'csui/models/mixins/v2.delayed.commandable/v2.delayed.commandable.mixin',\r\n  'csui/models/nodechildrencolumn',\r\n  'csui/models/nodechildrencolumns',\r\n  'csui/models/node/node.model'\r\n], function (_, Backbone, BrowsableMixin, ConnectableMixin, FetchableMixin, BrowsableV1RequestMixin,\r\n  BrowsableV2ResponseMixin, ServerAdaptorMixin, AdditionalResourcesV2Mixin, FieldsV2Mixin,\r\n  ExpandableV2Mixin, StateRequestorMixin, DelayedCommandableV2Mixin, NodeChildrenColumnModel,\r\n  NodeChildrenColumnCollection, NodeModel) {\r\n\r\n  var releaseObject = {\r\n    type: 'release_type',\r\n    type_name:'type_name',\r\n    name: 'name',\r\n    reserved:'reserved',\r\n    release_value: 'release_value',\r\n    created: 'release_date',\r\n    createdBy: 'create_user_name',\r\n    favorite: 'favorite',\r\n    dateType: '-7',\r\n  };\r\n\r\n  var ReleasesColumnModel = NodeChildrenColumnModel.extend({\r\n    constructor: function ReleasesColumnModel(attributes, options) {\r\n      NodeChildrenColumnModel.prototype.constructor.call(this, attributes, options);\r\n    }\r\n  });\r\n\r\n  var ReleasesColumnCollection = NodeChildrenColumnCollection.extend({\r\n    model: ReleasesColumnModel,\r\n\r\n    resetColumnsV2: function (response, options) {\r\n      if (!this.models.length) {// Stopping reset as event data is static and doesn't change after first fetch\r\n        this.resetCollection(this.getV2Columns(response), options);\r\n      }\r\n    },\r\n\r\n    getColumnModels: function (columnKeys, definitions) {\r\n      var columns = NodeChildrenColumnCollection.prototype.getColumnModels.call(\r\n        this, columnKeys, definitions);\r\n      return columns;\r\n    },\r\n\r\n    getV2Columns: function () {\r\n      var definitions = {},\r\n        releaseObjectKeys = Object.keys(releaseObject);\r\n      _.each(releaseObjectKeys, function (column) {\r\n        definitions[column] = {};\r\n        definitions[column].key = releaseObject[column];\r\n      });\r\n      definitions.created.type = releaseObject.dateType;\r\n      definitions.type.type_name = releaseObject.type_name;\r\n      var columnKeys = _.keys(definitions);\r\n      return this.getColumnModels(columnKeys, definitions);\r\n    }\r\n  });\r\n\r\n  var ReleasesModel = NodeModel.extend({});\r\n\r\n  var ReleasesCollection = Backbone.Collection.extend({\r\n    model: ReleasesModel,\r\n    constructor: function ReleasesCollection(models, options) {\r\n      this.options = options || {};\r\n      Backbone.Collection.prototype.constructor.call(this, models, options);\r\n      this.makeConnectable(options)\r\n        .makeFetchable(options)\r\n        .makeBrowsableV2Response(options)\r\n        .makeAdditionalResourcesV2Mixin(options)\r\n        .makeFieldsV2(options)\r\n        .makeExpandableV2(options)\r\n        .makeStateRequestor(options)\r\n        .makeDelayedCommandableV2(options)\r\n        .makeServerAdaptor(options);\r\n      this.columns = new ReleasesColumnCollection();\r\n    }\r\n  });\r\n\r\n  BrowsableMixin.mixin(ReleasesCollection.prototype);\r\n  BrowsableV1RequestMixin.mixin(ReleasesCollection.prototype);\r\n  BrowsableV2ResponseMixin.mixin(ReleasesCollection.prototype);\r\n  ConnectableMixin.mixin(ReleasesCollection.prototype);\r\n  FetchableMixin.mixin(ReleasesCollection.prototype);\r\n  ServerAdaptorMixin.mixin(ReleasesCollection.prototype);\r\n  AdditionalResourcesV2Mixin.mixin(ReleasesCollection.prototype);\r\n  FieldsV2Mixin.mixin(ReleasesCollection.prototype);\r\n  ExpandableV2Mixin.mixin(ReleasesCollection.prototype);\r\n  StateRequestorMixin.mixin(ReleasesCollection.prototype);\r\n  DelayedCommandableV2Mixin.mixin(ReleasesCollection.prototype);\r\n\r\n  return ReleasesCollection;\r\n});\n","csui.define('csui/widgets/metadata/impl/releases/metadata.releases.columns',[\"csui/lib/backbone\", 'i18n!csui/widgets/metadata/impl/nls/lang'],\r\n  function (Backbone, lang) {\r\n\r\n    var TableColumnModel = Backbone.Model.extend({\r\n\r\n      idAttribute: \"key\",\r\n\r\n      defaults: {\r\n        key: null,  // key from the resource definitions\r\n        sequence: 0 // smaller number moves the column to the front\r\n      }\r\n    });\r\n\r\n    var TableColumnCollection = Backbone.Collection.extend({\r\n\r\n      model: TableColumnModel,\r\n      comparator: \"sequence\",\r\n\r\n      getColumnKeys: function () {\r\n        return this.pluck('key');\r\n      },\r\n\r\n      deepClone: function () {\r\n        return new TableColumnCollection(\r\n          this.map(function (column) {\r\n            return column.attributes;\r\n          }));\r\n      }\r\n    });\r\n\r\n    // Fixed (system) columns have sequence number < 100, dynamic columns\r\n    // have sequence number > 1000\r\n\r\n    var tableColumns = new TableColumnCollection([\r\n      {\r\n        key: 'type',\r\n        titleIconInHeader: 'mime_type',\r\n        permanentColumn: true,\r\n        sequence: 10\r\n      },\r\n      {\r\n        key: 'name',\r\n        sequence: 20\r\n      },\r\n      {\r\n        key: 'reserved',\r\n        title: 'State',\r\n        sequence: 30,\r\n        noTitleInHeader: true // don't display a column header\r\n      },\r\n      {\r\n        key: 'release_value',\r\n        title: lang.release,\r\n        sequence: 40\r\n      },\r\n      {\r\n        key: 'created',\r\n        title: lang.created,\r\n        sequence: 50\r\n      },\r\n      {\r\n        key: 'createdBy',\r\n        title: lang.createdBy,\r\n        sequence: 60\r\n      },\r\n      {\r\n        key: 'favorite',\r\n        column_key: 'favorite',\r\n        sequence: 70,\r\n        title: lang.favorite,\r\n        noTitleInHeader: true,\r\n        permanentColumn: true\r\n      }\r\n    ]);\r\n\r\n    return tableColumns;\r\n\r\n  });\r\n\n","csui.define('csui/widgets/metadata/impl/releases/toolbaritems',[\r\n  'csui/lib/underscore',\r\n  'i18n!csui/controls/tabletoolbar/nls/localized.strings',\r\n  'i18n!csui/controls/tabletoolbar/impl/nls/localized.strings',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  'csui/controls/toolbar/toolitem.model',\r\n  // Load extra tool items to be added to this collection\r\n  // Load extra tool items from the previous module location\r\n], function (_, publicLang, lang, ToolItemsFactory, TooItemModel) {\r\n  'use strict';\r\n\r\n  var toolbarItems = {\r\n    tableHeaderToolbar: new ToolItemsFactory({\r\n          info: [\r\n            {\r\n              signature: \"ReleasesProperties\",\r\n              name: lang.ToolbarItemInfo,\r\n              iconName: \"csui_action_properties32\"\r\n            },\r\n            {signature: \"CopyLink\", name: lang.ToolbarItemCopyLink}\r\n          ],\r\n\r\n          main: [\r\n            {\r\n              signature: \"FavoriteRename\",\r\n              name: lang.ToolbarItemRename,\r\n              onlyInTouchBrowser: true\r\n            },\r\n            {signature: \"InlineEdit\", name: lang.ToolbarItemRename},\r\n            {signature: \"Lock\", name: lang.ToolbarItemLock},\r\n            {signature: \"Unlock\", name: lang.ToolbarItemUnlock},\r\n            {signature: \"Delete\", name: lang.ToolbarItemDelete},\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 15,\r\n          dropDownText: lang.ToolbarItemMore,\r\n          dropDownIconName: \"csui_action_more32\",\r\n          addGroupSeparators: false,\r\n          lazyActions: true\r\n        }),\r\n\r\n        inlineToolbar: new ToolItemsFactory({\r\n          info: [\r\n            {\r\n              signature: \"ReleasesProperties\",\r\n              name: lang.ToolbarItemInfo,\r\n              iconName: \"csui_action_properties32\"\r\n            },\r\n            {\r\n              signature: \"CopyLink\",\r\n              name: lang.ToolbarItemCopyLink,\r\n              iconName: \"csui_action_copy_link32\"\r\n            }\r\n          ],\r\n          other: [\r\n            {\r\n              signature: \"InlineEdit\",\r\n              name: lang.ToolbarItemRename,\r\n              iconName: \"csui_action_rename32\"\r\n            },\r\n            {\r\n              signature: \"Lock\",\r\n              name: lang.ToolbarItemLock,\r\n              iconName: \"csui_action_reserve32\"\r\n            },\r\n            {\r\n              signature: \"Unlock\",\r\n              name: lang.ToolbarItemUnlock,\r\n              iconName: \"csui_action_unreserve32\"\r\n            },\r\n            {\r\n              signature: \"Delete\",\r\n              name: lang.ToolbarItemDelete,\r\n              iconName: \"csui_action_delete32\"\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 5,\r\n          dropDownText: lang.ToolbarItemMore,\r\n          dropDownIconName: \"csui_action_more32\",\r\n          addGroupSeparators: false\r\n        })\r\n  };\r\n  \r\n  return toolbarItems;\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/releases/toolbaritems.masks',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask) {\r\n  'use strict';\r\n\r\n  var toolbars = ['tableHeaderToolbar', 'otherToolbar', 'inlineActionbar'];\r\n\r\n  function ToolbarItemsMasks() {\r\n    var config = module.config(),\r\n        globalMask = new GlobalMenuItemsMask();\r\n    // Create and populate masks for every toolbar\r\n    this.toolbars = _.reduce(toolbars, function (toolbars, toolbar) {\r\n      var mask = new ToolItemMask(globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        source = source[toolbar];\r\n        if (source) {\r\n          mask.extendMask(source);\r\n        }\r\n      });\r\n      // Enable restoring the mask to its initial state\r\n      mask.storeMask();\r\n      toolbars[toolbar] = mask;\r\n      return toolbars;\r\n    }, {});\r\n  }\r\n\r\n  ToolbarItemsMasks.toolbars = toolbars;\r\n\r\n  return ToolbarItemsMasks;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/releases/metadata.releases',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"csui-metadata-releases-rowselection-toolbar-view\\\"></div>\\r\\n<div class=\\\"csui-releases-table\\\"></div>\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_releases_metadata.releases', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/releases/metadata.releases',[],function(){});\n","csui.define('csui/widgets/metadata/impl/releases/metadata.releases.view',['module', 'csui/lib/underscore', 'csui/lib/marionette3',\r\n  'csui/utils/contexts/factories/connector',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/controls/table/table.view',\r\n  'csui/utils/accessibility',\r\n  'csui/models/nodechildren',\r\n  'csui/models/compound.document/releases/releases.collection',\r\n  'csui/widgets/metadata/impl/releases/metadata.releases.columns',\r\n  'csui/widgets/metadata/impl/releases/toolbaritems',\r\n  'csui/widgets/metadata/impl/releases/toolbaritems.masks',\r\n  'csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view',\r\n  'csui/controls/toolbar/toolbar.command.controller',\r\n  'csui/behaviors/default.action/default.action.behavior',\r\n  'csui/utils/commands',\r\n  'csui/utils/commands/compound.document/releases.commands',\r\n  'csui/controls/tableactionbar/tableactionbar.view',\r\n  'hbs!csui/widgets/metadata/impl/releases/metadata.releases',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/releases/metadata.releases'\r\n], function (module, _, Marionette, ConnectorFactory, LayoutViewEventsPropagationMixin, TableView, Accessibility, NodeChildrenCollection,\r\n  ReleasesCollection, metadataReleaseTableColumns, toolbarItems, ToolbarItemsMasks, TableRowSelectionToolbarView,\r\n  ToolbarCommandController, DefaultActionBehavior,\r\n  commands, releasesCommands, TableActionBarView, template, lang) {\r\n  'use strict';\r\n\r\n  var accessibleTable = Accessibility.isAccessibleTable();\r\n  \r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    toolbarItems: toolbarItems,\r\n    showInlineActionBarOnHover: !accessibleTable,\r\n  });\r\n\r\n  var MetadataReleasesTableView = Marionette.View.extend({\r\n    className: 'csui-compound-document-releases',\r\n    template: template,\r\n\r\n    ui: {\r\n      tableView: '.csui-releases-table',\r\n      tableRowSelectionToolbarView: '.csui-metadata-releases-rowselection-toolbar-view'\r\n    },\r\n\r\n    regions: {\r\n      tableRegion: '@ui.tableView',\r\n      tableRowSelectionToolbarRegion: '@ui.tableRowSelectionToolbarView'\r\n    },\r\n\r\n    behaviors: {\r\n      DefaultAction: {\r\n        behaviorClass: DefaultActionBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataReleasesTableView(options) {\r\n      options || (options = {});\r\n      Marionette.View.prototype.constructor.apply(this, arguments);\r\n      options.toolbarItems || (options.toolbarItems = toolbarItems);\r\n      options.toolbarItemsMasks || (options.toolbarItemsMasks = new ToolbarItemsMasks());\r\n      _.defaults(this.options, {\r\n        showInlineActionBarOnHover: config.showInlineActionBarOnHover\r\n      }, {\r\n        forceInlineActionBarOnClick: false,\r\n        inlineActionBarStyle: \"csui-table-actionbar-bubble\",\r\n        toolbarItems: toolbarItems\r\n      });\r\n      this.collection.commands = this.collection.options.commands;\r\n      this.collection.fetch();\r\n      this.context = options.context;\r\n      this.connector = this.context.getObject(ConnectorFactory);\r\n      this.commands = options.commands || commands;\r\n      if (releasesCommands) {\r\n        this.commands.push(releasesCommands.models);\r\n      }\r\n      this.commandController = new ToolbarCommandController({\r\n        commands: this.commands\r\n      });\r\n      this.listenTo(this.commandController, 'before:execute:command', this._beforeExecuteCommand);\r\n      this.listenTo(this.commandController, 'after:execute:command', this._afterExecuteCommand);\r\n      this._setTableView();\r\n      this._setTableRowSelectionToolbar({\r\n        toolItemFactory: this.options.toolbarItems.tableHeaderToolbar,\r\n        toolbarItemsMask: this.options.toolbarItemsMasks,\r\n        commands: this.options.commands || commands,\r\n      });\r\n      this._setTableRowSelectionToolbarEventListeners();\r\n      // events triggered on the parent view re-triggered\r\n      // on the views placed in the inner regions\r\n      this.propagateEventsToRegions();\r\n    },\r\n\r\n    initialize: function () {\r\n      var defaultActionItems = this.defaultActionController.actionItems;\r\n      this.collection = new ReleasesCollection(undefined, {\r\n        connector: this.options.context.getObject(ConnectorFactory),\r\n        node: this.options.model,\r\n        orderBy: 'create_date desc',\r\n        autoreset: true,\r\n        commands: commands.getAllSignatures(),\r\n        defaultActionCommands: defaultActionItems.getAllCommandSignatures(commands),\r\n        delayRestCommands: true\r\n      });\r\n      this.collection.setEnabledDelayRestCommands(true);\r\n    },\r\n\r\n    onRender: function () {\r\n      var tableRegion = this.getRegion('tableRegion');\r\n      this.tableRowSelectionToolbarRegion = this.getRegion('tableRowSelectionToolbarRegion');\r\n      this.tableRowSelectionToolbarRegion.show(this._tableRowSelectionToolbarView);\r\n      tableRegion.show(this.tableView);\r\n      this.listenTo(this.tableView, 'tableRowSelected', function () {\r\n        this.tableView.cancelAnyExistingInlineForm.call(this.tableView);\r\n      });\r\n    },\r\n\r\n    // controller for the toolbar actions\r\n    _beforeExecuteCommand: function () {\r\n      this.tableView.cancelAnyExistingInlineForm.call(this.tableView);\r\n    },\r\n\r\n    _afterExecuteCommand: function (toolbarActionContext) {\r\n      switch (toolbarActionContext.commandSignature) {\r\n        case 'Delete':\r\n          if (!toolbarActionContext || toolbarActionContext.cancelled) {\r\n            // command was cancelled\r\n            return;\r\n          }\r\n          //uncheck select all checkbox after deleting nodes.\r\n          var checkboxView = this.tableView._selectAllCheckboxRegion.currentView;\r\n          checkboxView.model.set('checked', false);\r\n          break;\r\n      }\r\n    },\r\n\r\n    _setTableView: function () {\r\n      if (!this.inlineToolbarItemsMasks) {\r\n        this.inlineToolbarItemsMasks = new ToolbarItemsMasks(this.options);\r\n      }\r\n      var args = _.extend({\r\n        connector: this.model.connector,\r\n        collection: this.collection,\r\n        context: this.context,\r\n        originatingView: this,\r\n        tableColumns: metadataReleaseTableColumns,\r\n        selectColumn: true,\r\n        haveDetailsRowExpandCollapseColumn: true,\r\n        actionItems: this.defaultActionController.actionItems,\r\n        commands: this.commands,\r\n        customLabels: {\r\n          emptyTableText: lang.releasesNoResultsPlaceholder\r\n        },\r\n        focusView: 'tableHeader',\r\n        inlineBar: {\r\n          viewClass: TableActionBarView,\r\n          options: _.extend({\r\n            collection: this.options.toolbarItems.inlineToolbar,\r\n            toolItemsMask: this.inlineToolbarItemsMasks.toolbars.inlineActionBar,\r\n            delayedActions: this.collection.delayedActions,\r\n            container: this.container,\r\n            containerCollection: this.collection\r\n          }, this.options.toolbarItems.inlineToolbar &&\r\n          this.options.toolbarItems.inlineToolbar.options, {\r\n            inlineBarStyle: this.options.inlineActionBarStyle,\r\n            forceInlineBarOnClick: this.options.forceInlineActionBarOnClick,\r\n            showInlineBarOnHover: this.options.showInlineActionBarOnHover\r\n          })\r\n        },\r\n        tableAria: _.str.sformat(lang.releasesTableAria, this.options.model.get('name'))\r\n      }, this.options);\r\n\r\n      this.tableView = new TableView(args);\r\n      if (this.tableView.collection && this.tableView.collection.length === 0 && this.collection.fetched) {\r\n        this.tableView._showEmptyViewText = true;\r\n      }\r\n      this.listenTo(this.tableView, 'execute:defaultAction', function (node) {\r\n        var nextNode, nextNodeId, childrenCollection, childNode;\r\n        nextNode = this.options.context.getModel('nextNode');\r\n        childrenCollection = new NodeChildrenCollection(undefined, { node: node, autoreset: true });\r\n        childrenCollection.fetch().done(function (resp) {\r\n          childNode = _.has(resp.data[0], 'id') && resp.data[0].id;\r\n          nextNodeId = !!childNode ? childNode : node;\r\n          nextNode.set('id', nextNodeId);\r\n        });\r\n      });\r\n    },\r\n\r\n    _setTableRowSelectionToolbar: function (options) {\r\n      this._tableRowSelectionToolbarView = new TableRowSelectionToolbarView({\r\n        toolItemFactory: options.toolItemFactory,\r\n        toolbarItemsMask: options.toolbarItemsMask,\r\n        toolbarCommandController: this.commandController,\r\n        // if toolbarCommandController is not defined, a new ToolbarCommandController\r\n        // with the following commands is created\r\n        commands: commands,\r\n        selectedChildren: this.tableView.selectedChildren,\r\n        container: this.collection.node,\r\n        context: this.options.context,\r\n        originatingView: this.options.originatingView,\r\n        collection: this.collection\r\n      });\r\n    },\r\n\r\n    _setTableRowSelectionToolbarEventListeners: function () {\r\n      // listen for change of the selected rows in the table.view and if at least one row is\r\n      // selected, display the table-row-selected-toolbar\r\n      this.listenTo(this.tableView.selectedChildren, 'reset', function () {\r\n        // TODO: Re-use TableRowSelectionToolbarBehavior.\r\n        if (this.tableView.selectedChildren.length > 0) {\r\n          this.tableRowSelectionToolbarRegion.$el.addClass(\r\n            'csui-metadata-releases-rowselection-toolbar-visible');\r\n        } else {\r\n          this.tableRowSelectionToolbarRegion.$el.removeClass(\r\n            'csui-metadata-releases-rowselection-toolbar-visible');\r\n        }\r\n      });\r\n    }\r\n\r\n  });\r\n  _.extend(MetadataReleasesTableView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return MetadataReleasesTableView;\r\n});\n","csui.define('csui/widgets/metadata/metadata.releases.view',[\"module\", \"csui/lib/underscore\",\r\n  'csui/widgets/metadata/impl/releases/metadata.releases.view',\r\n  'csui/utils/commands/compound.document/compound.document.util'\r\n], function (module, _, MetadataReleasesTableView, CompoundDocumentsUtil) {\r\n  'use strict';\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    enabled: true\r\n  });\r\n\r\n  var MetadataReleasesView = MetadataReleasesTableView.extend({\r\n\r\n    constructor: function MetadataReleasesView() {\r\n      MetadataReleasesTableView.prototype.constructor.apply(this, arguments);\r\n    }\r\n  },\r\n    {\r\n      enabled: function (options) {\r\n        if (config.enabled === false) {\r\n          return false;\r\n        }\r\n        if (options.node.get('type') === 136) {\r\n          return CompoundDocumentsUtil.verifyNodeAncestors(options.context);\r\n        }\r\n        else {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n  );\r\n  return MetadataReleasesView;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.panels',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/widgets/metadata/impl/metadata.properties.content.view',\r\n  'csui/widgets/metadata/metadata.versions.view',\r\n  'csui/widgets/metadata/metadata.audit.view',\r\n  'csui/widgets/metadata/metadata.releases.view',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  // Load extra panels to be added to the built-in dropdown tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.panels'\r\n], function (_, Backbone, MetadataPropertiesContentView,\r\n    MetadataVersionsTableView, MetadataAuditTableView,MetadataReleasesTableView, lang, extraPanels) {\r\n\r\n  var MetadataPanelModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      title: null,\r\n      name: '',\r\n      contentView: null,\r\n      contentViewOptions: null\r\n    },\r\n\r\n    constructor: function MetadataPanelModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataPanelCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataPanelModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function MetadataPanelCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataPanels = new MetadataPanelCollection([\r\n    {\r\n      title: lang.properties,\r\n      name: 'properties',\r\n      sequence: 10,\r\n      contentView: MetadataPropertiesContentView\r\n    }, {\r\n      title: lang.versions,\r\n      name: 'versions',\r\n      sequence: 20,\r\n      contentView: MetadataVersionsTableView\r\n    }, {\r\n      title: lang.audit,\r\n      name: 'audit',\r\n      sequence: 20,\r\n      contentView: MetadataAuditTableView\r\n    }, {\r\n      title: lang.releases,\r\n      name: 'releases',\r\n      sequence: 20,\r\n      contentView: MetadataReleasesTableView\r\n    }\r\n  ]);\r\n\r\n  if (extraPanels) {\r\n    metadataPanels.add(_.flatten(extraPanels, true));\r\n    // assign default name to panels that are not having the 'name' field yet\r\n    var counter = 1;\r\n    metadataPanels.forEach(function (model) {\r\n      // name can't be empty to be able to save the metadata view state in the url.\r\n      if (!model.get('name')) {\r\n        model.set('name', 'unnamed_panel' + counter, {silent: true});\r\n        counter++;\r\n      }\r\n    });\r\n  }\r\n\r\n  return metadataPanels;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.dropdowntab.view',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n  'csui/controls/tab.panel/tab.panel.view',\r\n  'csui/widgets/metadata/metadata.panels',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'csui/controls/tab.panel/tab.links.dropdown.view',\r\n  'csui/lib/binf/js/binf'\r\n], function (_, $, Backbone, TabPanelView, metadataPanels,\r\n  PerfectScrollingBehavior, TabLinkDropDownCollectionView) {\r\n  'use strict';\r\n\r\n  var MetadataDropdownTabView = TabPanelView.extend({\r\n    // FIXME: This removes the tab classes from the paren object\r\n    className: 'metadata-content-wrapper binf-panel binf-panel-default',\r\n\r\n    ui: {\r\n      dropdownToggle: '.binf-dropdown-toggle'\r\n    },\r\n\r\n    contentView: function () {\r\n      return this.options.contentView;\r\n    },\r\n\r\n    contentViewOptions: function () {\r\n      return {\r\n        context: this.options.context,\r\n        model: this.options.node,\r\n        originatingView: this.options.originatingView,\r\n        metadataView: this.options.metadataView,\r\n        blockingParentView: this.options.blockingParentView,\r\n        selectedProperty: this.options.selectedProperty\r\n      };\r\n    },\r\n\r\n    constructor: function MetadataDropdownTabView(options) {\r\n      // Assign the options to this before the parent constructor\r\n      // would do it, so that the _buildTabs below can access it\r\n      this.options = options || (options = {});\r\n      _.defaults(options, {\r\n        TabLinkCollectionViewClass: TabLinkDropDownCollectionView,\r\n        implementTabContentsDefaultKeyboardHandling: false,\r\n        delayTabContent: options.delayTabContent !== false\r\n      });\r\n\r\n      this.behaviors = _.extend({\r\n        PerfectScrolling: {\r\n          behaviorClass: PerfectScrollingBehavior,\r\n          contentParent: '.binf-dropdown-menu',\r\n          suppressScrollX: true,\r\n          includePadding: true\r\n        }\r\n      }, this.behaviors);\r\n\r\n      options.tabs = this._buildTabs();\r\n\r\n      TabPanelView.prototype.constructor.call(this, options);\r\n\r\n      this.listenTo(this.options.node, \"change\", this._nodeChanged)\r\n          .listenTo(Backbone, 'closeToggleAction', this._closeToggle);\r\n    },\r\n\r\n    _buildTabs: function () {\r\n      return metadataPanels\r\n          .chain()\r\n          .filter(function (panel) {\r\n            // If there is a static method enabled, call it, otherwise\r\n            // consider the panel always enabled\r\n            var contentView = panel.get('contentView'),\r\n                enabled     = contentView.enabled;\r\n            // providing way to render custom properties view for node types that has separate\r\n            // view to show in metadata. Based on key 'customproperties' provided in response.\r\n            if (this.options.node.attributes.customProperties) {\r\n              // filter extra commands based on the key 'executeCommand' for respective node.\r\n              if (panel.attributes.executeCommand) {\r\n                return !enabled || enabled({\r\n                      context: this.options.context,\r\n                      node: this.options.node\r\n                    });\r\n              } else {\r\n                return false;\r\n              }\r\n            } else {\r\n              return !enabled || enabled({\r\n                    context: this.options.context,\r\n                    node: this.options.node\r\n                  });\r\n            }\r\n          }, this)\r\n          .map(function (panel) {\r\n            return panel.attributes;\r\n          })\r\n          .value();\r\n    },\r\n\r\n    onRender: function () {\r\n      this.$el.prepend(\"<div class='csui-metadata-tab-bar'></div>\");\r\n      var that = this;\r\n      this.$el.find('.binf-dropdown-toggle').on('binf.dropdown.after.show', function () {\r\n        that.trigger(\"update:scrollbar\");  \r\n      });\r\n    },\r\n\r\n    onActivateTab: function (tabContent, tabPane, tabLink) {\r\n      // Warning: this onActivateTab is currently being triggered twice by the 'activate:tab' event.\r\n      // The code in the base 'controls/tab.panel' needs to be revisited later when time permits.\r\n      // Any code being called from here should handle two calls gracefully by itself !!!\r\n      tabContent && tabContent.triggerMethod('panel:activated');\r\n    },\r\n\r\n    _closeToggle: function () {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      if (dropdownToggleEl.parent().hasClass('binf-open')) {\r\n        if (dropdownToggleEl.length && dropdownToggleEl.length > 1) {\r\n          dropdownToggleEl.each(function (index, dropdownElement) {\r\n            if ($(dropdownElement).parent().hasClass('binf-open')) {\r\n              !$(dropdownElement).is(\":hidden\") && $(dropdownElement).binf_dropdown('toggle');\r\n            }\r\n          });\r\n        } else {\r\n          !dropdownToggleEl.is(\":hidden\") && dropdownToggleEl.binf_dropdown('toggle');\r\n        }\r\n      }\r\n    },\r\n\r\n    _updateTabs: function () {\r\n      var tabs = this._buildTabs();\r\n      // FIXME: _convertCollection should return an array of object\r\n      // literals or models; the models below do not change their\r\n      // parent collection without removing them\r\n      this.collection.reset(this._convertCollection({tabs: tabs}).models);\r\n    },\r\n\r\n    _nodeChanged: function () {\r\n      // We switched to other node or fetched the node info\r\n      if (this.options.node.hasChanged('id') || this.options.node.hasChanged('type')) {\r\n        this._updateTabs();\r\n      }\r\n    }\r\n  });\r\n\r\n  return MetadataDropdownTabView;\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\", \"csui/utils/url\",\r\n  \"csui/utils/base\"\r\n], function (_, $, Backbone, Url, base) {\r\n\r\n  // handling server calls for metadata\r\n  function MetadataController(status, options, attributes) {\r\n    this.status = status || {};\r\n    this.options = options || {};\r\n    this.attributes = attributes || {};\r\n  }\r\n\r\n  _.extend(MetadataController.prototype, Backbone.Events, {\r\n\r\n    save: function (model, data) {\r\n      // Pass data via the first attrs param to get them set to model\r\n      // attributes\r\n      return model.save(data, {\r\n        wait: true,\r\n        patch: true\r\n      });\r\n    },\r\n\r\n    createItem: function (model, formsValues) {\r\n      return model.save(undefined, {\r\n        // If data does not contain common attributes, which should be just set\r\n        // to model attributes, it should be passed via options.data instead of\r\n        // using the first attrs paremeter\r\n        data: formsValues,\r\n        wait: true\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  MetadataController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataController, {version: \"1.0\"});\r\n\r\n  return MetadataController;\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.view',['module',\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'csui/utils/base', 'csui/widgets/metadata/impl/header/metadata.header.view',\r\n  'csui/widgets/metadata/impl/metadata.dropdowntab.view',\r\n  'csui/utils/contexts/factories/node',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/controls/mixins/view.state/metadata.view.state.mixin',\r\n  'csui/widgets/metadata/impl/metadata.controller',\r\n  'csui/controls/progressblocker/blocker', 'csui/utils/commandhelper',\r\n  'csui/widgets/permissions/permissions.view',\r\n  'csui/dialogs/modal.alert/modal.alert',\r\n  'csui/utils/contexts/factories/next.node',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/metadata'\r\n], function (module, _, $, Marionette, base, MetadataHeaderView, MetadataDropdownTabView,\r\n    NodeModelFactory, ViewEventsPropagationMixin, MetadataViewStateMixin, MetadataController,\r\n    BlockingView, CommandHelper, PermissionsView, ModalAlert, NextNodeModelFactory, lang) {\r\n  'use strict';\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    showExtraRightActionBar: false\r\n  });\r\n\r\n  var MetadataView = Marionette.ItemView.extend({\r\n    className: 'cs-metadata',\r\n\r\n    template: false,\r\n\r\n    constructor: function MetadataView(options) {\r\n      var self = this;\r\n      options || (options = {});\r\n      options.data || (options.data = {});\r\n      this.options = options;\r\n      this.context = options.context;\r\n      \r\n      this.enableViewState = options.enableViewState === undefined ? true : options.enableViewState;\r\n      if (this.enableViewState && this.isShowPermissionView() && !options.model) {\r\n        this.initOptionsFromMetadataInfo(options);\r\n      }\r\n\r\n      this.options.showExtraRightActionBar = this.options.showPermissionView ||\r\n                                             config.showExtraRightActionBar;\r\n      this.targetView = options.targetView;\r\n      \r\n      this.thumbnailViewState = options.originatingView &&\r\n                                options.originatingView.thumbnailViewState;\r\n\r\n      var doNodeFetch = false;\r\n\r\n      if (!options.model) {\r\n        options.model = options.context.getModel(NodeModelFactory);\r\n        // The node in the context is usually never fetched and\r\n        // the nextNode info is filled in and is only marked as fetched.\r\n        // When there is a perspective change to metadata , the context is cleared but the nextNode is\r\n        // not fetched.And also, the node in the context is created anew with only id but with fetched = true.\r\n        // If this is the case, we need to change the flag for the info to be fecthed again by 'ensureFetched'.\r\n        // the node in the context is to be used because it contains info like 'fields' and 'expands' which\r\n        // are necessary in computing the urlto fetch specific info (eg: extra modules).\r\n        var keys = _.keys(options.model.attributes);\r\n        if(!options.model.fetching && keys.length === 1 && keys[0] === 'id') {\r\n          options.model.fetched = false;\r\n        }\r\n        doNodeFetch = true;\r\n      }\r\n\r\n      var viewStateModel = this.context && this.context.viewStateModel;\r\n      if (this._isViewStateModelEnabled()) {\r\n        if (doNodeFetch && options.model && options.model.ensureFetched) {\r\n          if (this.isShowPermissionView() && !options.model.fetched) {\r\n            // The permissions view needs the permissions action before it starts rendering.\r\n            options.model.delayRestCommands = false;\r\n          }\r\n          options.model.ensureFetched();\r\n        }\r\n        if (!this.isMetadataNavigation()) {\r\n          this.options.showBackIcon = true;\r\n          if (viewStateModel && !viewStateModel.hasRouted()) {\r\n            this.options.showBackIcon = false;\r\n          }\r\n          this._isViewStateModelEnabled() && this._addUrlParametersSupport(options.context);\r\n          this.listenTo(this, 'metadata:close', this._backToPreviousPerspective);\r\n          this.listenTo(options.model, 'delete', this._navigateToParent);\r\n        } else {\r\n          this.options.showBackIcon = false;\r\n        }\r\n      } else if (this.options.navigationView === false) {\r\n        this.listenTo(options.model, 'delete', function () {\r\n          self.trigger('metadata:close');\r\n        });\r\n      }\r\n\r\n      // setting initialPanel if it was passed in from data or overriden by URL\r\n      options.model.unset('initialPanel', {silent: true});\r\n      if (options.data.initialPanel) {\r\n        options.model.set('initialPanel', options.data.initialPanel, {silent: true});\r\n      }\r\n      this.options.showShortcutSwitch = true;\r\n      this.options.showRequiredFieldsSwitch = true;\r\n      if (this.options.model.get('type') === 1 || !!this.options.model.get('shortcutNode')) {  // shortcut\r\n        if (!doNodeFetch && (!!this.options.model.get('shortcutNode') && this.options.model.get('type') !== 1 ||\r\n          (this.options.model.original &&\r\n            (this.options.model.original.get('type') === undefined ||\r\n              this.options.model.original.get('type') < 0) ||\r\n            !this.options.model.get('original_id')))) {\r\n          this.options.shortcutNode = this.options.model.get('shortcutNode');\r\n        } else if (!!this.options.model.get('shortcutNode') && this.options.model.get('type') !== 1) {\r\n          this.options.shortcutNode = this.options.model.get('shortcutNode');\r\n        }\r\n        else {\r\n          this.options.model.connector.assignTo(this.options.model.original); //TODO: have to do this?\r\n          this.options.shortcutNode = this.options.model;\r\n          var shortcutResourceScope = this.options.shortcutNode.getResourceScope();\r\n          this.options.model.original.setResourceScope(shortcutResourceScope);\r\n          this.options.model = this.options.model.original;\r\n          this.options.model.set('shortcutNode', this.options.shortcutNode, { silent: true });\r\n        }\r\n        //Load permissions page after getting actions from REST API\r\n        this.options.actionsPromise = this._ensureCompleteNode();\r\n      } else if (this.options.model.refetchNodeActions) {\r\n        this.options.actionsPromise = this._ensureCompleteNode();\r\n      } else {\r\n        this.options.actionsPromise = $.Deferred().resolve().promise();\r\n      }\r\n\r\n      // Once PropertiesView is opened , 'OrginatingView' becomes metadataView or\r\n      // MetadataNavigationview.\r\n      // If  properties view page does not have navigationlist (eg for folders and wikipage) then\r\n      // originating view becomes 'MetadataView' based on supportOriginatingView\r\n      if (!!this.options.originatingView && !!this.options.originatingView.supportOriginatingView) {\r\n        this.options.baseOriginatingView = this.options.originatingView;\r\n        this.options.originatingView = this;\r\n      }\r\n\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      // When this view is used alone on a perspective, if should offer\r\n      // spinning sun to commands executed with it as originating view\r\n      BlockingView.imbue(this);\r\n\r\n      this.options.showDropdownMenu = true;\r\n      this.options.originatingView = this.options.originatingView || this;\r\n      this.metadataHeaderView = new MetadataHeaderView(_.extend({\r\n        // Since ItemNameView (which includes DropdownMenuView, etc.) is now being used elsewhere,\r\n        // this boolean flag is to indicate metadata scenario for ItemNameView to know.\r\n        metadataScenario: true,\r\n        // If this widget is placed on a perspective, it becomes the originating view itself\r\n        originatingView: this\r\n      }, this.options));\r\n      this.listenTo(this.metadataHeaderView, \"metadata:item:name:save\", this._saveItemName)\r\n      .listenTo(this.metadataHeaderView, \"shortcut:switch\", function (view) {\r\n        self.options.model = view.node;\r\n        self.options.model.set('shortcutNode', self.model.get('shortcutNode'), {silent: true});\r\n        this._ensureCompleteNode()\r\n        .always(function () {\r\n          !!self.metadataTabView && self.metadataTabView.destroy();\r\n          if (!!self.options.showPermissionView) {\r\n            self.metadataTabView = new PermissionsView({\r\n              model: self.options.model,\r\n              originatingView: self.options.originatingView,\r\n              context: self.options.context,\r\n              showCloseIcon: self.options.originatingView ? false : true,\r\n              showBackIcon: self.options.originatingView ? true : false,\r\n              selectedTab: status.selectedTab,\r\n              selectedProperty: self.options.selectedProperty\r\n            });\r\n\r\n          } else {\r\n            self.metadataTabView = new MetadataDropdownTabView({\r\n              context: self.options.context,\r\n              node: self.options.model,\r\n              containerCollection: self.options.containerCollection,\r\n              originatingView: self.options.originatingView,\r\n              metadataView: self,\r\n              activeTab: self.options.activeTab,\r\n              delayTabContent: self.options.delayTabContent\r\n            });\r\n          }\r\n\r\n          self.$el.append(self.metadataTabView.render().$el);\r\n          self.propagateEventsToViews(self.metadataTabView);\r\n        });\r\n      })\r\n      .listenTo(this.metadataHeaderView, \"metadata:close\", function () {\r\n        self.trigger(\"metadata:close\");\r\n      })\r\n      .listenTo(this.options.context, 'retain:perspective', function () {\r\n        // new data was fetched by context, but perspective stays same (if perspective changes\r\n        // it is not necessary to close the metadata dialog, because it gets destroyed\r\n        // anyways when new perspective slides in)\r\n        self._closeMetadata();\r\n      });\r\n\r\n      var tabOptions = {\r\n        context: this.options.context,\r\n        node: this.options.model,\r\n        containerCollection: this.options.containerCollection,\r\n        originatingView: this.options.originatingView,\r\n        metadataView: this,\r\n        blockingParentView: this,\r\n        activeTab: this.options.activeTab,\r\n        selectedTab: this.options.selectedTab || this.getViewStateDropdown(),\r\n        selectedProperty: this.options.selectedProperty,\r\n        delayTabContent: self.options.delayTabContent\r\n      };\r\n\r\n      if (this.options.showPermissionView) {\r\n        this.options.actionsPromise.always(function () {\r\n           self.metadataTabView = new PermissionsView({\r\n            model: self.options.model,\r\n            originatingView: self.options.originatingView,\r\n            context: self.options.context,\r\n            showCloseIcon: self.options.originatingView ? false : true,\r\n            showBackIcon: self.options.originatingView ? true : false,\r\n            selectedTab: status.selectedTab,\r\n            selectedProperty: self.options.selectedProperty\r\n          });\r\n          self.propagateEventsToViews(self.metadataTabView, self.metadataHeaderView);\r\n          if (self._isViewStateModelEnabled()) {\r\n            self.listenTo(self.context.viewStateModel, 'change:state', self.onViewStateChanged);\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        this.options.actionsPromise.always(function () {\r\n          self.metadataTabView = new MetadataDropdownTabView(tabOptions);\r\n          self.propagateEventsToViews(self.metadataTabView, self.metadataHeaderView);\r\n          if (self._isViewStateModelEnabled()) {\r\n            self.listenTo(self.context.viewStateModel, 'change:state', self.onViewStateChanged);\r\n          }\r\n        });\r\n      }\r\n\r\n      if (this.enableViewState) {\r\n        viewStateModel && !this.isMetadataNavigation() &&\r\n        this.listenTo(viewStateModel, \"navigate\", function (historyEntry) {\r\n          if (historyEntry && self.options.showBackIcon !== true) {\r\n            self.options.showBackIcon = true;\r\n            self.metadataHeaderView.showBackIcon(true, self.__isRendered);\r\n          }\r\n        });\r\n      }\r\n\r\n    },\r\n\r\n    onRender: function () {\r\n      // don't render until the shortcut's original node has been fetched\r\n      var fetching = this.options.model.fetchingActions || this.options.model.fetching;\r\n      if (fetching) {\r\n        // Note: render always so that the link to Shortcut Properties is available for the\r\n        // user to click on to go into the Properties page and update the Original Location field.\r\n        // This is due to the backward UX design that Original Properties is rendered first.\r\n        // TODO: Find out, why the link \"View shortcut\" is dead after re-rendering\r\n        return fetching.always(_.bind(this.render, this));\r\n      }\r\n\r\n      this.__isRendered = true;\r\n      var mhv = this.metadataHeaderView.render();\r\n      var mdv = this.metadataTabView.render();\r\n\r\n      Marionette.triggerMethodOn(mhv, 'before:show', mhv, this);\r\n      Marionette.triggerMethodOn(mdv, 'before:show', mdv, this);\r\n\r\n      this.$el.append(mhv.el);\r\n      this.$el.append(mdv.el);\r\n\r\n      this.$el.attr({'role': 'region', 'aria-label': lang.metadataRegionAria});\r\n\r\n      Marionette.triggerMethodOn(mhv, 'show', mhv, this);\r\n      Marionette.triggerMethodOn(mdv, 'show', mdv, this);\r\n\r\n      if (this._isViewStateModelEnabled() && !this.showPermissionView) {\r\n        this._listenToDropdownSelection();\r\n      }\r\n    },\r\n\r\n    _isViewStateModelEnabled: function () {\r\n      var viewStateModel = this.context && this.context.viewStateModel;\r\n      return this.enableViewState && viewStateModel && viewStateModel.get('enabled');\r\n    },\r\n\r\n    onViewStateChanged: function () {\r\n      var selection = this.getViewStateDropdown() || this.getDefaultViewStateDropdown(),\r\n          tabLinks = this.metadataTabView.tabLinks;\r\n      if (tabLinks && tabLinks.selected) {\r\n        if (selection && tabLinks.selected.get('name') !== selection) {\r\n          tabLinks.activateDropdownTab(selection, true);\r\n        }\r\n      }\r\n    },\r\n\r\n    _listenToDropdownSelection: function () {\r\n      var tabLinks = this.metadataTabView.tabLinks;\r\n      if (tabLinks && tabLinks.selected) {\r\n        var dropDownName = this.getViewStateDropdown();\r\n        if (dropDownName !== tabLinks.selected.get('name')) {\r\n          this.setViewStateDropdown(tabLinks.selected.get('name'),\r\n              {default: !dropDownName, title: tabLinks.selected.get('title').toLowerCase()});\r\n        }\r\n        this.listenTo(tabLinks.selected, 'change', this._onDropDownSelectionChanged);\r\n      }\r\n    },\r\n\r\n    _onDropDownSelectionChanged: function (model) {\r\n      this.setViewStateDropdown(model.get('name'), {title: model.get('title').toLowerCase()});\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      if (this.metadataTabView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataTabView);\r\n        this.metadataTabView.destroy();\r\n      }\r\n      if (this.metadataHeaderView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataHeaderView);\r\n        this.metadataHeaderView.destroy();\r\n      }\r\n      if (this.targetView && this.thumbnailViewState) {\r\n        this.targetView.thumbnail.resultsView.triggerMethod(\"metadata:close\");\r\n      }\r\n    },\r\n\r\n    _saveItemName: function (args) {\r\n      var self = this;\r\n      var itemName = args.sender.getValue();\r\n      var data = {'name': itemName};\r\n      if (this.model.changed && this.model.changed.name_multilingual) {\r\n        _.extend(data, {\r\n          name_multilingual: this.model.changed.name_multilingual\r\n        });\r\n      }\r\n      var metadataController = new MetadataController();\r\n      var node = this.options.model;\r\n      var collection = this.options.collection;\r\n      var shortcutOriginal;\r\n      // workarounds to handle the refresh of the shortcut node or original node\r\n      if (this.options.shortcutNode && this.options.shortcutNode.original === node) {\r\n        var originalNodeInCollection = this.options.collection.findWhere(\r\n            {id: node.get('id')});\r\n        if (originalNodeInCollection) {\r\n          shortcutOriginal = node;\r\n          node = originalNodeInCollection;\r\n        } else {\r\n          collection = undefined;\r\n        }\r\n      }\r\n\r\n      var contextualNode = self.context.getModel(NodeModelFactory);\r\n      if (contextualNode) {\r\n        contextualNode.set('name', itemName);\r\n      }\r\n\r\n      self._blockActions();\r\n      metadataController.save(node, data)\r\n      .done(function () {\r\n        return node.fetch()\r\n        .then(function () {\r\n          if (shortcutOriginal) {\r\n            shortcutOriginal.set(node.attributes);\r\n          }\r\n          // Following command causing failure in breadcrumb collection update,\r\n          // While renaming the item in metadata view, and clicking directly on breadcrumb\r\n          // ancestor. After commenting out nodes table parent item renaming functionality\r\n          // is working fine.\r\n          //self.options.context && self.options.context.trigger('current:folder:changed');\r\n          args.success && args.success();\r\n          self._unblockActions();\r\n          if (self.options.originatingView &&\r\n              _.isFunction(self.options.originatingView.unblockActions)) {\r\n            self.options.originatingView.unblockActions();\r\n          }\r\n        });\r\n      })\r\n      .fail(function (error) {\r\n        self._unblockActions();\r\n        var errorMsg = CommandHelper._getErrorMessageFromResponse(error);\r\n        errorMsg === undefined && (errorMsg = lang.failedToSaveName);\r\n        args.error && args.error(errorMsg);\r\n      });\r\n    },\r\n\r\n    _ensureCompleteVersionNode: function () {\r\n      this._blockActions();\r\n      return this.options.model.fetch()\r\n      .always(_.bind(this._unblockActions, this))\r\n      .fail(function (request) {\r\n        var error = new base.Error(request);\r\n        ModalAlert.showError(error.message);\r\n      });\r\n    },\r\n\r\n    _ensureCompleteNode: function () {\r\n      var node = this.options.model;\r\n      if (node && node.refetchNodeActions) {\r\n        if (!node.fetchingActions) {\r\n          node.fetchingActions = node.setEnabledLazyActionCommands(true);\r\n        }\r\n        node.fetchingActions\r\n          .done(_.bind(function () {\r\n            node.refetchNodeActions = false;\r\n            node.fetchingActions = false;\r\n          }, this))\r\n          .fail(_.bind(function (request) {\r\n            var error = new base.Error(request);\r\n            ModalAlert.showError(error.message);\r\n          }, this));\r\n        return node.fetchingActions;\r\n      } else if (this.options.showShortcutSwitch) {\r\n        return node.fetch();\r\n      }\r\n      return $.Deferred().resolve().promise();\r\n    },\r\n\r\n    _backToPreviousPerspective: function () {\r\n      if (this._isViewStateModelEnabled()) {\r\n        this.context.viewStateModel.restoreRouterOfLastApplicationScope();\r\n      } else {\r\n        this._setNextNodeModelFactory(this.options.model.get('id'));\r\n      }\r\n    },\r\n\r\n    _navigateToParent: function () {\r\n      var parentId = this.options.model.get('parent_id');\r\n      if (parentId) {\r\n        this._setNextNodeModelFactory(parentId);\r\n      } else {\r\n        // Going back to previous page when parentId is undefined for scenarios like in ContentSharing, etc.\r\n        this._backToPreviousPerspective();\r\n      }\r\n    },\r\n\r\n    _setNextNodeModelFactory: function (id) {\r\n      if (this.context && id !== undefined) {\r\n        var nextNode = this.context.getModel(NextNodeModelFactory);\r\n        if (nextNode) {\r\n          if (nextNode.get('id') === id) {\r\n            // when id is same as nextNode's id, nextNode.set(id) event is not triggered\r\n            nextNode.unset('id', {silent: true});\r\n          }\r\n          nextNode.set('id', id);\r\n        }\r\n      }\r\n    },\r\n\r\n    _closeMetadata: function () {\r\n      var node = this.options.model;\r\n      if (node.get('type') === 1 && node.original && node.original.get('type') === 0) {\r\n        this.trigger(\"metadata:close\");\r\n      } else {\r\n        this.trigger('metadata:close:without:animation');\r\n      }\r\n    },\r\n\r\n    _blockActions: function () {\r\n      var origView = this.options.originatingView;\r\n      origView && origView.blockActions && origView.blockActions();\r\n    },\r\n\r\n    _unblockActions: function () {\r\n      var origView = this.options.originatingView;\r\n      origView && origView.unblockActions && origView.unblockActions();\r\n    },\r\n\r\n    _addUrlParametersSupport: function (context) {\r\n      var viewStateModel = context && context.viewStateModel;\r\n      viewStateModel && viewStateModel.addUrlParameters(['dropdown'], context);\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataView.prototype, ViewEventsPropagationMixin);\r\n  _.extend(MetadataView.prototype, MetadataViewStateMixin);\r\n\r\n  return MetadataView;\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.action.one.item.properties.view',[\"module\", \"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/marionette\",\r\n  \"csui/utils/base\",\r\n  \"csui/widgets/metadata/impl/header/metadata.header.view\",\r\n  \"csui/widgets/metadata/metadata.properties.view\", 'csui/utils/log',\r\n  \"csui/controls/mixins/view.events.propagation/view.events.propagation.mixin\",\r\n  \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (module, _, $, Marionette, base, MetadataHeaderView, MetadataPropertiesView,\r\n    log, ViewEventsPropagationMixin) {\r\n\r\n  var MetadataActionOneItemPropertiesView = Marionette.ItemView.extend({\r\n\r\n    className: 'cs-add-item-metadata-form',\r\n    template: false,\r\n\r\n    // public\r\n    constructor: function MetadataActionOneItemPropertiesView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n\r\n      options.showRequiredFieldsSwitch = true;\r\n      this.metadataHeaderView = new MetadataHeaderView(options);\r\n      this.listenTo(this.metadataHeaderView, \"metadata:item:name:save\", this._saveItemName);\r\n      this.listenTo(this.metadataHeaderView, \"update:button\", _.bind(function (args) {\r\n        this.trigger(\"update:button\", args);\r\n      }, this));\r\n\r\n      this.metadataPropertiesView = new MetadataPropertiesView({\r\n        node: options.model,\r\n        collection: options.collection,\r\n        container: options.container,\r\n        context: options.context,\r\n        hideStickyHeader: !!options.hideStickyHeader,\r\n        formMode: 'create',\r\n        action: options.action,\r\n        inheritance: options.inheritance,\r\n        metadataView: this,\r\n        formCollection: options.formCollection,\r\n        suppressAddProperties: options.suppressAddProperties\r\n      });\r\n      if (!options.collection) {\r\n        this.listenTo(this.metadataPropertiesView.allForms, 'sync', this._updateSchema);\r\n      }\r\n      this.listenTo(this.metadataPropertiesView, 'render:forms', this.setNameFieldFocus);\r\n      this.propagateEventsToViews(this.metadataHeaderView, this.metadataPropertiesView);\r\n    },\r\n\r\n    // private\r\n    _updateSchema: function() {\r\n      // just update name schema in name field of header\r\n      var generalForm = this.metadataPropertiesView.allForms.first(),\r\n          formSchema = generalForm && generalForm.get('schema'),\r\n          nameSchema = formSchema && formSchema.properties && formSchema.properties.name;\r\n      if (nameSchema) {\r\n        this.metadataHeaderView.metadataItemNameView.updateNameSchema(nameSchema);\r\n      } else {\r\n        log.warn('Form collection lacks name field in the first form.') && console.warn(log.last);\r\n      }\r\n    },\r\n\r\n    // private\r\n    onRender: function () {\r\n      var inv = this.metadataHeaderView.render();\r\n      var mdv = this.metadataPropertiesView.render();\r\n\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      Marionette.triggerMethodOn(mdv, 'before:show', mdv, this);\r\n\r\n      if (this.options.suppressHeaderView !== true) {\r\n        this.$el.append(inv.el);\r\n      }\r\n      this.$el.append(mdv.el);\r\n\r\n      if (this.options.suppressHeaderView) {\r\n        this.$el.addClass('without-header-bar');\r\n      }\r\n\r\n      if (this.options.extraViewClass) {\r\n        this.$el.addClass(this.options.extraViewClass);\r\n      }\r\n\r\n      Marionette.triggerMethodOn(inv, 'show', inv, this);\r\n      Marionette.triggerMethodOn(mdv, 'show', mdv, this);\r\n    },\r\n\r\n    // private\r\n    onBeforeDestroy: function () {\r\n      this.cancelEventsToViewsPropagation(this.metadataHeaderView, this.metadataPropertiesView);\r\n      this.metadataHeaderView.destroy();\r\n      this.metadataPropertiesView.destroy();\r\n    },\r\n\r\n    // public\r\n    validate: function () {\r\n      var bNameIsValid = this.metadataHeaderView.validateName();\r\n      var bFormsAreValid = this.metadataPropertiesView.validateForms();\r\n\r\n      return bNameIsValid && bFormsAreValid;\r\n    },\r\n\r\n    // public\r\n    getValues: function () {\r\n      var data = {};\r\n      var validation = this.validate();      \r\n      var mlDataEnabled = base.getMetadataLanguageInfo().enabled,\r\n      defaultLocale = base.getMetadataLanguageInfo().defaultLanguage;\r\n      if (validation) {\r\n        var itemName = this.metadataHeaderView.getNameValue(),\r\n            metadataHeaderViewModel = this.metadataHeaderView && this.metadataHeaderView.model;\r\n        data = {\r\n          \"name\": itemName,\r\n          \"type\": this.options.model.get('type'),\r\n          \"parent_id\": this.options.model.get('parent_id')\r\n        };\r\n        if (metadataHeaderViewModel) {\r\n          if (mlDataEnabled) {\r\n            var mlData = {};\r\n            !!metadataHeaderViewModel.has('name_multilingual') &&\r\n            (mlData.name_multilingual = metadataHeaderViewModel.get('name_multilingual'));\r\n            !!metadataHeaderViewModel.has('description_multilingual') &&\r\n            (mlData.description_multilingual = metadataHeaderViewModel.get(\r\n                'description_multilingual'));\r\n            _.extend(data, mlData);\r\n          }\r\n        }\r\n\r\n        var formsValues = this.metadataPropertiesView.getFormsValues();\r\n        if(formsValues.description) {\r\n         formsValues.description =  mlDataEnabled && _.isObject(formsValues.description) ?\r\n                            formsValues.description[defaultLocale] : formsValues.description;\r\n        }\r\n        _.extend(data, formsValues);\r\n      }\r\n\r\n      return data;\r\n    },\r\n\r\n    // public\r\n    setNameFieldFocus: function () {\r\n      if (this.firstFocusCalled !== true && this.options.suppressHeaderView !== true) {\r\n        this.metadataHeaderView.setNameEditModeFocus();\r\n      }\r\n      this.firstFocusCalled = true;\r\n    },\r\n\r\n    _saveItemName: function (args) {\r\n      var itemName = args.sender.getValue();\r\n      this.model.set('name', itemName, {silent: true});\r\n      args.success && args.success();\r\n    }\r\n\r\n  });\r\n\r\n  MetadataActionOneItemPropertiesView.version = \"1.0\";\r\n\r\n  _.extend(MetadataActionOneItemPropertiesView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataActionOneItemPropertiesView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/common/base.metadata.action.view',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\",\r\n  \"csui/controls/dialog/dialog.view\", \"csui/controls/progressblocker/blocker\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (_, $, Backbone, DialogView, BlockingView, lang) {\r\n\r\n  function BaseMetadataActionView() {\r\n  }\r\n\r\n  _.extend(BaseMetadataActionView.prototype, Backbone.Events, {\r\n\r\n    // public: display metadata view in either originatingView with animation or modal dialog\r\n    // @parameter:\r\n    // - options: {\r\n    //    - originatingView: animate and show the form in the originating view\r\n    //    - view: the view to show\r\n    //    - dialogOptions: {\r\n    //      - dialogTitle: dialog title\r\n    //      - OkButtonTitle: the OK button title\r\n    //      - OkButtonClick: method to handle the OkClick\r\n    //      - CancelButtonTitle: (optional) the Cancel button title\r\n    //      - CancelButtonClick: (optional) method to handle the CancelClick\r\n    //    }\r\n    // }\r\n    baseDisplayForm: function (options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.deferred = $.Deferred();\r\n\r\n      if (options.view) {\r\n        BlockingView.imbue(options.view);\r\n      }\r\n\r\n      // replace the originatingView with sliding left/right animation\r\n      if (options.originatingView) {\r\n\r\n        // TODO: UX and Josef will ask for this in the future, add this support when time permits\r\n\r\n      } else {  // show Metadata View in a modal dialog\r\n\r\n        var dialogOptions = options.dialogOptions || {};\r\n        var okAction = dialogOptions.OkButtonClick || this._cancelAction;\r\n        var cancelAction = dialogOptions.CancelButtonClick || this._cancelAction;\r\n        var buttons = [\r\n          {\r\n            id: 'okButton',\r\n            default: true,\r\n            label: dialogOptions.OkButtonTitle ? dialogOptions.OkButtonTitle :\r\n                   lang.defaultDialogOkButtonTitle,\r\n            click: _.bind(okAction, this, options)\r\n          },\r\n          {\r\n            id: 'cancel',\r\n            label: dialogOptions.CancelButtonTitle ? dialogOptions.CancelButtonTitle :\r\n              lang.defaultDialogCancelButtonTitle,\r\n            close: true,\r\n            click: _.bind(cancelAction, this),\r\n            actionToken: dialogOptions.CancelButtonActionToken\r\n          }\r\n        ];\r\n        if (this.options.view.model) {\r\n          if (!(this.options.view.model.get('name'))) {\r\n            buttons[0].disabled = true;\r\n          }\r\n        }\r\n        var title = dialogOptions.dialogTitle ? dialogOptions.dialogTitle :\r\n                    lang.defaultDialogTitle;\r\n        var dialog = new DialogView({\r\n          className: 'cs-item-action-metadata',\r\n          title: title,\r\n          buttons: buttons,\r\n          largeSize: true,\r\n          view: options.view\r\n        });\r\n        this.dialog = dialog;\r\n        this.listenTo(this.dialog, \"hide\", this._cancelAction)\r\n            .listenTo(this.dialog, \"update:button\", _.bind(function (args) {\r\n              // Apply overlay[pointer-events:none] for button to prevent user interaction\r\n              // until the respective action is performed instead of disabling the button\r\n              // which may cause ambiguity\r\n              if (args.overlay !== undefined) {\r\n                var buttonModel = this.dialog.footerView.collection.get('okButton'),\r\n                    button      = this.dialog.footerView.children.findByModel(buttonModel),\r\n                    method      = button && !button.$el.is(\":disabled\") && args.overlay ?\r\n                                  'addClass' : 'removeClass';\r\n                button.$el[method](\"cs-button-overlay\");\r\n              } else {\r\n                this.dialog.footerView.updateButton('okButton', args);\r\n              }\r\n            }, this));\r\n\r\n        dialog.show();\r\n\r\n      }\r\n\r\n      return this.deferred.promise();\r\n    },\r\n\r\n    // private\r\n    _cancelAction: function (args) {\r\n      var resetRequiredSwitch = !!this.node && !!this.node.collection &&\r\n                                !!this.node.collection.requireSwitched &&\r\n                                (!!this.node.get('action') ||\r\n                                 (!!this.options.view && this.options.view.options.action));\r\n      if (resetRequiredSwitch) {\r\n        this.node.collection.requireSwitched = false;\r\n      }\r\n      if (this.options.view) {\r\n        this.options.view.unblockActions();\r\n      }\r\n      this.dialog.destroy();\r\n\r\n      // assume that the close button was clicked if args is undefined\r\n      if (args === undefined) {\r\n        args = {\r\n          buttonAttributes: {\r\n            actionToken: \"closeMetadataActionView\"\r\n          }\r\n        };\r\n      }\r\n\r\n      this.deferred.reject(args);\r\n    }\r\n\r\n  });\r\n\r\n  BaseMetadataActionView.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(BaseMetadataActionView, {version: \"1.0\"});\r\n\r\n  return BaseMetadataActionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/add.properties/metadata.add.categories.view',['require', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/url',\r\n  'csui/utils/log', 'csui/widgets/metadata/impl/common/base.metadata.action.view',\r\n  'csui/models/forms', 'csui/models/appliedcategories/category', 'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/dialogs/modal.alert/modal.alert', 'css!csui/widgets/metadata/impl/metadata'\r\n], function (require, _, $, Url, log, BaseMetadataActionView, FormCollection,\r\n    CategoryModel, lang, ModalAlert) {\r\n  'use strict';\r\n\r\n  //\r\n  // Metadata add categories view displays the category form for the user to fill out\r\n  // categories values, validates the form and adds the category to the object when the user clicks\r\n  // on the Add button.\r\n  //\r\n  function MetadataAddCategoriesView() {\r\n  }\r\n\r\n  _.extend(MetadataAddCategoriesView.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    displayForm: function (options) {\r\n      var deferred = $.Deferred();\r\n      var self = this;\r\n\r\n      options || (options = {});\r\n      this.node = options.model;\r\n      this.catId = options.catId;\r\n      this.catName = options.catName;\r\n\r\n      var catCollection = new FormCollection([options.catModel]);\r\n      catCollection.fetching = false;\r\n      catCollection.fetched = true;\r\n\r\n      require([\"csui/widgets/metadata/metadata.action.one.item.properties.view\"\r\n      ], function (MetadataActionOneItemPropertiesView) {\r\n\r\n        self.metadataAddItemPropView = new MetadataActionOneItemPropertiesView({\r\n          model: options.model,\r\n          collection: catCollection,\r\n          context: options.context,\r\n          commands: options.commands,\r\n          suppressAddProperties: true,\r\n          suppressHeaderView: true,\r\n          // send this flag to MetadataActionOneItemPropertiesView to hide sticky header.\r\n          hideStickyHeader: true,\r\n          extraViewClass: 'add-category'\r\n        });\r\n\r\n        var baseUIOptions = {};\r\n        baseUIOptions.callerProcessData = options.callerProcessData;\r\n        baseUIOptions.originatingView = options.originatingView;\r\n        baseUIOptions.view = self.metadataAddItemPropView;\r\n        var dialogOptions = {};\r\n        dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                    lang.addNewCategoryDialogTitle;\r\n        dialogOptions.OkButtonTitle = options.okButtonTitle ? options.okButtonTitle :\r\n                                      lang.addNewCategoryDialogAddButtonTitle;\r\n        dialogOptions.OkButtonClick = self._addCategory;\r\n        baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n        self.baseDisplayForm(baseUIOptions)\r\n            .done(function (resp) {\r\n              deferred.resolve(resp);\r\n            })\r\n            .fail(function (error2) {\r\n              deferred.reject(error2);\r\n            });\r\n\r\n      }, function (error) {\r\n        log.warn('Failed to load MetadataActionOneItemPropertiesView. {0}', error)\r\n        && console.log(log.last);\r\n        deferred.reject(error);\r\n      });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // private\r\n    _addCategory: function (args) {\r\n      var valid = this.metadataAddItemPropView.validate();\r\n      if (valid) {\r\n        //generic error handling for all modules\r\n        this.options.view.$el.find(\".cs-formfield-invalid\").removeClass('cs-formfield-invalid');\r\n        var nodeId = this.node.get('id');\r\n        var catData = this.metadataAddItemPropView.getValues();\r\n        var data = {id: nodeId, category_id: this.catId};\r\n        if (catData.roles && catData.roles.categories) {\r\n          _.each(catData.roles.categories, function (cat, key) {\r\n            data = _.extend(data, cat);\r\n          });\r\n        }\r\n\r\n        var categoryModel = new CategoryModel({}, {connector: this.node.connector, node: this.node});\r\n\r\n        this.metadataAddItemPropView.blockActions();\r\n        categoryModel.save(data, {\r\n          type: 'POST',\r\n          processData: false,\r\n          contentType: false\r\n        }).done(_.bind(function (resp) {\r\n              this.metadataAddItemPropView.unblockActions();\r\n              this.dialog.destroy();\r\n              this.deferred.resolve(resp);\r\n            }, this))\r\n            .fail(_.bind(function (error) {\r\n              this.metadataAddItemPropView.unblockActions();\r\n              var serverError = '';\r\n              if (error && error.responseJSON && error.responseJSON.error) {\r\n                serverError = error.responseJSON.error;\r\n              }\r\n              var title = lang.addNewCategoryFailTitle;\r\n              var message = _.str.sformat(lang.addNewCategoryFailMessage,\r\n                  this.catName, this.node.get('name'), nodeId, serverError);\r\n              ModalAlert.showError(message, title);\r\n            }, this));\r\n\r\n      } else {\r\n        //generic error handling for all modules\r\n        this.options.view.$el.find(\".binf-has-error .cs-formfield\").addClass(\r\n            'cs-formfield-invalid');\r\n\r\n      }\r\n\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddCategoriesView, {version: \"1.0\"});\r\n\r\n  return MetadataAddCategoriesView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.add.categories.controller',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/utils/url',\r\n  'csui/utils/base', 'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/dialogs/modal.alert/modal.alert', 'csui/widgets/metadata/impl/metadata.utils',\r\n  'csui/widgets/metadata/impl/add.properties/metadata.add.categories.view',\r\n  'csui/models/appliedcategoryform', 'csui/dialogs/node.picker/node.picker',\r\n  'csui/utils/commands', 'css!csui/widgets/metadata/impl/metadata'\r\n], function (_, $, Backbone, Url, base, lang, ModalAlert,\r\n    MetadataUtils, MetadataAddCategoriesView, AppliedCategoryFormModel,\r\n    NodePicker, commands) {\r\n  'use strict';\r\n\r\n  //\r\n  // Metadata add categories controller handles adding category to an existing item, a new item\r\n  // being created or copied or moved.\r\n  //\r\n\r\n  function MetadataAddCategoriesController() {\r\n  }\r\n\r\n  _.extend(MetadataAddCategoriesController.prototype, Backbone.Events, {\r\n\r\n    // Public: add category to an existing item, new item being created or copied or moved\r\n    //\r\n    // Parameters:\r\n    // - <object> options containing:\r\n    //   - action: the action 'create', 'copy', 'move', or undefined for an existing item\r\n    //   - node: an existing or a temporary NodeModel for a new item being created with undefined id\r\n    //   - collection: the existing category collection\r\n    //   - container: the container where the item is/will be in\r\n    //   - inheritance: the category inheritance 'original', 'destination' or 'merged'\r\n    //   - context: the application context\r\n    //   - parentView: the view to have blockingView on\r\n    //\r\n    // Return:\r\n    // - <object> jQuery deferred object containing the new 'catModel' if succeeds\r\n    //\r\n    AddNewCategory: function (options) {\r\n      var deferred = $.Deferred();\r\n      var nodePicker = new NodePicker({\r\n        startLocation: 'category.volume',\r\n        context: options.context,\r\n        selectableTypes: [131],\r\n        unselectableNodes: !options.collection ? [] :\r\n                           options.collection.where({role_name: \"categories\"}),\r\n        selectMultiple: false,\r\n        dialogTitle: lang.selectCategoryTitle,\r\n        globalSearch: true,\r\n        selectButtonLabel: lang.selectCategoryButtonLabel\r\n      });\r\n      nodePicker.show()\r\n          .done(_.bind(function (args) {\r\n            _.reduce(args.nodes, function (promise, node) {\r\n                  return promise.then(_.bind(function () {\r\n                    var catId = node.get('id');\r\n                    var catName = node.get('name');\r\n\r\n                    // with adding a new item, the object does not exist yet.  Just load the form.\r\n                    if (options.node.get('id') === undefined || options.action) {\r\n                      // load the category create form for the user to fill out values\r\n                      return this._loadNewCategoryForm(options, catId, catName);\r\n                    } else {\r\n                      // code path new: display the form in a modal dialog with the Add button\r\n                      return this._displayAddCategoryForm(options, catId, catName);\r\n                    }\r\n                  }, this));\r\n                }, $.Deferred().resolve(), this)\r\n                .done(function (resp3) {\r\n                  deferred.resolve(resp3);\r\n                })\r\n                .fail(function (error3) {\r\n                  deferred.reject(error3);\r\n                });\r\n          }, this))\r\n          .fail(function (error2) {\r\n            deferred.reject(error2);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // private: display the form in a modal dialog with the Add button\r\n    _displayAddCategoryForm: function (options, catId, catName) {\r\n      var deferred = $.Deferred();\r\n      var self = this;\r\n      this._getCategoryModel(options, catId, catName)\r\n          .done(function (resp) {\r\n            var formOptions = {\r\n              model: options.node,\r\n              context: options.context,\r\n              commands: commands,\r\n              catId: catId,\r\n              catName: catName, catModel: resp.catModel\r\n            };\r\n            var metadataAddCatView = new MetadataAddCategoriesView();\r\n            metadataAddCatView.displayForm(formOptions)\r\n                .done(function (resp2) {\r\n                  self._loadNewCategoryForm(options, catId, catName, \"update\")\r\n                      .done(function (resp3) {\r\n                        deferred.resolve(resp3);\r\n                      })\r\n                      .fail(function (error3) {\r\n                        deferred.reject(error3);\r\n                      });\r\n                })\r\n                .fail(function (error2) {\r\n                  deferred.reject(error2);\r\n                });\r\n          })\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: load the category create form first for the user to fill out values\r\n    _loadNewCategoryForm: function (options, catId, catName, formType) {\r\n      if (catId && options.collection.get(catId)) {\r\n        var title = lang.addNewCategoryFailTitle;\r\n        var message = _.str.sformat(lang.categoryExistsMessage, catName);\r\n        ModalAlert.showError(message, title);\r\n        return $.Deferred().reject({});\r\n      }\r\n\r\n      var deferred = $.Deferred();\r\n      this._getCategoryModel(options, catId, catName, formType)\r\n          .done(_.bind(function (resp) {\r\n            deferred.resolve(resp);\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: get the category model\r\n    _getCategoryModel: function (options, catId, catName, formType) {\r\n\r\n      var allowDeleteCat = true;\r\n      // default: formType = 'create'\r\n      if (!formType) {\r\n        formType = 'create';\r\n        if (options.action === undefined) {\r\n          allowDeleteCat = false;\r\n        }\r\n      }\r\n\r\n      var deferred = $.Deferred();\r\n      var fullUrl;\r\n      var connector = (options.node && options.node.connector) ||\r\n                      (options.container && options.container.connector);\r\n      var nodeId = options.node.get('id');\r\n      //TO:DO pId is passed to made it availabe in TKLFieldView need to fix as this temp fix\r\n      if (options.container) {\r\n        options.node.pId = options.container.get('id');\r\n      }\r\n      if (options.node.get('id') === undefined && options.action === 'create') {\r\n        fullUrl = Url.combine(connector.connection.url,\r\n            'forms/nodes/create?parent_id=' + options.container.get('id') +\r\n            '&type=' + options.node.get('type') + '&category_id=' + catId);\r\n      } else if (options.action === 'copy' || options.action === 'move' || options.action === 'restructure') {\r\n        var inheritanceVal = 0;\r\n        if (options.inheritance === 'destination') {\r\n          inheritanceVal = 1;\r\n        } else if (options.inheritance === 'merged') {\r\n          inheritanceVal = 2;\r\n        }\r\n        fullUrl = Url.combine(connector.connection.url,\r\n            'forms/nodes/' + options.action + '?id=' + nodeId +\r\n            '&parent_id=' + options.container.get('id') +\r\n            '&inheritance=' + inheritanceVal + '&category_id=' + catId);\r\n      } else {\r\n        fullUrl = Url.combine(connector.connection.url,\r\n            'forms/nodes/categories/' + formType + '?id=' + nodeId +\r\n            '&category_id=' + catId);\r\n      }\r\n\r\n      var ajaxOptions = {\r\n        type: 'GET',\r\n        url: fullUrl\r\n      };\r\n      if (options.parentView) {\r\n        options.parentView.blockActions();\r\n        //prevent pointer events on add button untill new category form is rendered\r\n        options.parentView.trigger(\"update:button\", true);\r\n      }\r\n      connector\r\n          .makeAjaxCall(ajaxOptions)\r\n          .done(_.bind(function (resp) {\r\n            options.parentView && (options.parentView.unblockActions());\r\n\r\n            // different calls have different data structure\r\n            var categoryForm, categoryData, categoryOptions, categorySchema;\r\n            if (options.action === 'create' ||\r\n                options.action === 'copy' || options.action === 'move' || options.action === 'restructure') {\r\n              if (resp.forms.length > 1) {\r\n                categoryForm = _.find(resp.forms, function (form) {\r\n                  return form.role_name === \"categories\";\r\n                });\r\n                if (categoryForm) {\r\n                  categoryData = (categoryForm.data[catId]) || {};\r\n                  categoryOptions = (categoryForm.options.fields[catId]) || {};\r\n                  categorySchema = (categoryForm.schema.properties[catId]) || {};\r\n                }\r\n              }\r\n            } else {\r\n              categoryForm = resp && resp.forms && resp.forms[0];\r\n              categoryData = (categoryForm && categoryForm.data) || {};\r\n              categoryOptions = (categoryForm.options) || {};\r\n              categorySchema = (categoryForm.schema) || {};\r\n            }\r\n\r\n            if (categoryForm) {\r\n              if (categoryOptions.form) {\r\n                categoryOptions = _.omit(categoryOptions, 'form');\r\n              }\r\n              if (categorySchema.title === undefined && catName) {\r\n                categorySchema.title = catName;\r\n              }\r\n\r\n              var metadataUtils = new MetadataUtils();\r\n              var required = metadataUtils.AlpacaFormOptionsSchemaHaveRequiredFields(categoryOptions,\r\n                  categorySchema);\r\n\r\n              var categoryModel = new AppliedCategoryFormModel({\r\n                id: catId,\r\n                title: catName || (categoryOptions && categoryOptions.fields && categoryOptions.fields.category_id &&\r\n                                   categoryOptions.fields.category_id.label),\r\n                allow_delete: allowDeleteCat,\r\n                removeable: allowDeleteCat,\r\n                required: required,\r\n                data: categoryData,\r\n                schema: _.omit(categorySchema, 'description'),\r\n                options: categoryOptions,\r\n                role_name: \"categories\"\r\n              }, {\r\n                node: options.node,\r\n                categoryId: catId,\r\n                action: 'none',\r\n                parse: true\r\n              });\r\n\r\n              deferred.resolve({catModel: categoryModel});\r\n            } else {\r\n              deferred.reject({});\r\n            }\r\n          }, this))\r\n          .fail(_.bind(function (error) {\r\n            if (options.parentView) {\r\n              options.parentView.unblockActions();\r\n              options.parentView.trigger(\"update:button\", false);\r\n            }\r\n            var serverError = this._getRespError(error);\r\n            var title = lang.loadNewCategoryFailTitle;\r\n            var message = _.str.sformat(lang.loadNewCategoryFailMessage,\r\n                catName, options.node.get('name'), nodeId, serverError);\r\n            ModalAlert.showError(message, title);\r\n            deferred.reject(error);\r\n          }, this));\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // private\r\n    _getRespError: function (resp) {\r\n      var error = '';\r\n      if (resp && resp.responseJSON && resp.responseJSON.error) {\r\n        error = resp.responseJSON.error;\r\n      } else if (base.MessageHelper.hasMessages()) {\r\n        error = $(base.MessageHelper.toHtml()).text();\r\n        base.MessageHelper.clear();\r\n      }\r\n      return error;\r\n    }\r\n  });\r\n\r\n  _.extend(MetadataAddCategoriesController, {version: \"1.0\"});\r\n\r\n  return MetadataAddCategoriesController;\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.add.item.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/widgets/metadata/impl/metadata.controller\",\r\n  \"csui/widgets/metadata/metadata.action.one.item.properties.view\",\r\n  \"csui/utils/commandhelper\", \"i18n!csui/widgets/metadata/impl/nls/lang\",\r\n  \"csui/dialogs/modal.alert/modal.alert\", 'csui/utils/nodesprites',\r\n  'csui/utils/commands', \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (_, BaseMetadataActionView, MetadataController,\r\n    MetadataActionOneItemPropertiesView, CommandHelper, lang, ModalAlert,\r\n    nodeSpriteCollection, commands) {\r\n\r\n  //\r\n  // Metadata Add Item Controller allows the adding of item with complete metadata\r\n  // that the user can edit and change values of general metadata, categories and other roles.\r\n  //\r\n\r\n  function MetadataAddItemController() {\r\n  }\r\n\r\n  _.extend(MetadataAddItemController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public (usually called from the 'command' class that has 'status' and 'options' parameters)\r\n    displayForm: function (status, options) {\r\n      var nodes = CommandHelper.getAtLeastOneNode(status);\r\n      var node = nodes.length > 0 ? nodes.models[0] : null;\r\n      // Compute the type name only if the new node includes the type name\r\n      // sent by the server, to be able to fall back to it\r\n      var addableTypeName = node.get('type_name') ?\r\n                            nodeSpriteCollection.findTypeByNode(node) :\r\n                            lang.addItemMetadataDialogTitleGeneric;\r\n\r\n      this.node = node;\r\n      this.metadataController = options.metadataController;\r\n\r\n      var addItemView = this.metadataAddItemPropView = new MetadataActionOneItemPropertiesView({\r\n        model: node,\r\n        container: status.container,\r\n        id: options.id,\r\n        context: status.context || options && options.context,\r\n        commands: commands,\r\n        action: 'create',\r\n        inheritance: options.inheritance,\r\n        // Performs the complete fetch and preparation of the creation forms\r\n        collection: options.completeFormCollection,\r\n        // Performs just fetch; the preparation is performed by the csui forms collection\r\n        formCollection: options.formCollection,\r\n        //supress Add Category for custom node, adding ability to create Hold Groups in the new Hold Management perspective tile\r\n        suppressAddProperties: options.suppressAddProperties\r\n      });\r\n      var baseUIOptions = {};\r\n      baseUIOptions.callerProcessData = options.callerProcessData;\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = addItemView;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  _.str.sformat(lang.addItemMetadataDialogTitle1, addableTypeName);\r\n      dialogOptions.OkButtonTitle = options.addButtonTitle ? options.addButtonTitle :\r\n                                    lang.addItemMetadataDialogButtonAddTitle;\r\n      dialogOptions.OkButtonClick = this._addItem;\r\n      dialogOptions.CancelButtonActionToken = options.cancelButtonActionToken;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      var deferred = this.baseDisplayForm(baseUIOptions);\r\n      this.listenTo(this.metadataAddItemPropView, \"update:button\", _.bind(function (args) {\r\n        this.dialog && this.dialog.trigger(\"update:button\", args);\r\n      }, this));\r\n\r\n      return deferred;\r\n    },\r\n\r\n    // private\r\n    _addItem: function (args) {\r\n      function updateButtons(dialog, attributes) {\r\n        if (dialog && dialog.footerView) {\r\n          dialog.footerView.getButtons().forEach(function (buttonView) {\r\n            buttonView.updateButton(attributes);\r\n          });\r\n        }\r\n      }\r\n\r\n      if (!!args.view.metadataPropertiesView.allFormsRendered) {\r\n        var enable = false;\r\n        if (args.callerProcessData !== true) {\r\n          updateButtons(this.dialog, {disabled: true});\r\n          enable = true;\r\n        }\r\n        var valid = this.metadataAddItemPropView.validate();\r\n        if (valid) {\r\n          var data = this.metadataAddItemPropView.getValues();\r\n\r\n          if (args.callerProcessData === true) {\r\n            this.dialog.destroy();\r\n            this.deferred.resolve({data: data});\r\n          } else {\r\n            var metadataController = this.metadataController ||\r\n                                     new MetadataController();\r\n\r\n            this.metadataAddItemPropView.blockActions();\r\n            enable = false;\r\n            metadataController.createItem(this.node, data)\r\n                .done(_.bind(function (resp) {\r\n                  this.listenToOnce(this.dialog, \"hide\", function () {\r\n                    this.metadataAddItemPropView.unblockActions();\r\n                    updateButtons(this.dialog, {disabled: false});\r\n                  });\r\n                  this.dialog.destroy();\r\n                  this.deferred.resolve({name: data.name});\r\n                }, this))\r\n                .fail(_.bind(function (resp) {\r\n                  this.metadataAddItemPropView.unblockActions();\r\n                  var error = lang.failedToCreateItem;\r\n                  if (resp) {\r\n                    if (resp.responseJSON && resp.responseJSON.error) {\r\n                      error = resp.responseJSON.error;\r\n                    } else if (resp.responseText) {\r\n                      error = resp.responseText;\r\n                    }\r\n                    ModalAlert.showError(error);\r\n                  }\r\n                  updateButtons(this.dialog, {disabled: false});\r\n                }, this));\r\n          }\r\n        }\r\n        if (enable) {\r\n          updateButtons(this.dialog, {disabled: false});\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddItemController, {version: \"1.0\"});\r\n\r\n  return MetadataAddItemController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.navigation.list.keyboard.behavior',['module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/log', 'csui/lib/marionette'\r\n], function (module, _, $, log, Marionette) {\r\n  'use strict';\r\n\r\n  // This behavior implements a default keyboard navigation for the metadata navigation list.\r\n\r\n  var TabPosition = {\r\n    none: -1,\r\n    header: 0,\r\n    list: 1\r\n  };\r\n\r\n  var MetadataNavigationListKeyboardBehavior = Marionette.Behavior.extend({\r\n\r\n    constructor: function MetadataNavigationListKeyboardBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n\r\n      view.keyboardBehavior = this;\r\n      this.tabableElements = [];\r\n\r\n      var self = this;\r\n      this.listenTo(view, 'show', function () {\r\n        self.refreshTabableElements(view);\r\n      });\r\n      this.listenTo(view, 'click:item', function (item) {\r\n        // clear the currently focused element\r\n        var selIndex = view.selectedIndex;\r\n        var selectedElem = view.selectedIndexElem(selIndex);\r\n        selectedElem && selectedElem.prop('tabindex', '-1');\r\n        // set the new element tabindex\r\n        view.currentTabPosition = TabPosition.list;\r\n        view.selectedIndex = view.collection.indexOf(item.model);\r\n      });\r\n\r\n      _.extend(view, {\r\n\r\n        _focusHeader: function () {\r\n          if (this.headerFocusable === true && this.headerElement) {\r\n            this.currentTabPosition = TabPosition.header;\r\n            return $(this.ui.header);\r\n          }\r\n          return undefined;\r\n        },\r\n\r\n        _focusList: function () {\r\n          if (this.selectedIndex < 0 || this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.getSelectedIndex();\r\n          }\r\n          this.currentTabPosition = TabPosition.list;\r\n          return this.getSelectedItem() && this.getSelectedItem().$el;\r\n        },\r\n\r\n        _setFocus: function () {\r\n          if (this.headerFocusable === true && this.headerElement) {\r\n            return this._focusHeader();\r\n          } else {\r\n            return this._focusList();\r\n          }\r\n        },\r\n\r\n        _headerIsInFocus: function () {\r\n          return this.$(this.ui.header).is(\":focus\");\r\n        },\r\n\r\n        _listIsInFocus: function () {\r\n          var inFocus = false;\r\n          var i;\r\n          for (i = 0; i < this.collection.length; i++) {\r\n            var $elem = this.selectedIndexElem(i);\r\n            if ($elem && $elem.is(\":focus\")) {\r\n              inFocus = true;\r\n              break;\r\n            }\r\n          }\r\n\r\n          return inFocus;\r\n        },\r\n\r\n        _checkFocusAndSetCurrentTabPosition: function () {\r\n          if (this._headerIsInFocus()) {\r\n            this.currentTabPosition = TabPosition.header;\r\n          } else if (this._listIsInFocus()) {\r\n            this.currentTabPosition = TabPosition.list;\r\n          } else {\r\n            this.currentTabPosition = TabPosition.none;\r\n          }\r\n        },\r\n\r\n        // handle scenario that currentlyFocusedElement does not have event param for shiftTab\r\n        _setFirstAndLastFocusable: function () {\r\n          if (this.headerFocusable === true) {\r\n            $(this.ui.header).prop('tabindex', '0');\r\n          }\r\n          this.getSelectedItem() && this.getSelectedItem().$el.prop('tabindex', '0');\r\n        },\r\n\r\n        currentlyFocusedElement: function (event) {\r\n          this._checkFocusAndSetCurrentTabPosition();\r\n          this._setFirstAndLastFocusable();\r\n          if (event && event.shiftKey) {\r\n            return this._focusList();\r\n          }\r\n          // maintain old position\r\n          if (this.currentTabPosition === TabPosition.header) {\r\n            return this._focusHeader();\r\n          } else if (this.currentTabPosition === TabPosition.list) {\r\n            return this._focusList();\r\n          } else {\r\n            return this._setFocus();\r\n          }\r\n        },\r\n\r\n        _resetFocusedListElem: function () {\r\n          // workaround the general behaviors that it keeps the old focus\r\n          // reset focus back to the active list item before moving out of the region\r\n          var selIndex, selectedElem;\r\n\r\n          // clear the currently focused element\r\n          selIndex = this.selectedIndex;\r\n          selectedElem = this.selectedIndexElem(selIndex);\r\n          selectedElem && selectedElem.prop('tabindex', '-1');\r\n\r\n          // set to the active element\r\n          selIndex = this.getSelectedIndex();\r\n          selectedElem = this.selectedIndexElem(selIndex);\r\n          if (selectedElem) {\r\n            selectedElem.prop('tabindex', '0');\r\n            this.selectedIndex = selIndex;\r\n          }\r\n\r\n          // always have the header focusable\r\n          $(this.ui.header).prop('tabindex', '0');\r\n        },\r\n\r\n        _moveTo: function (event, $elem, $preElem) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          // this.trigger('changed:focus', this);\r\n          setTimeout(_.bind(function () {\r\n            $preElem && $preElem.prop('tabindex', '-1');\r\n            $elem.prop('tabindex', '0');\r\n            $elem[0].focus();\r\n          }, this), 50);\r\n        },\r\n\r\n        onKeyInView: function (event) {\r\n          this._checkFocusAndSetCurrentTabPosition();\r\n          if (event.keyCode === 9) {\r\n            // tab\r\n            if (event.shiftKey) {  // shift tab -> activate previous region\r\n              if (this.currentTabPosition === TabPosition.list &&\r\n                  this.headerFocusable === true && this.headerElement) {\r\n                if ($(this.ui.header).is(\":visible\")) {\r\n                  this._moveTo(event, this._focusHeader());\r\n                  this._resetFocusedListElem();\r\n                }\r\n              }\r\n            } else {\r\n              if (this.currentTabPosition === TabPosition.header) {\r\n                if (this.$el.find(\">.cs-content\").is(\":visible\")) {\r\n                  this._moveTo(event, this._focusList());\r\n                }\r\n              } else {\r\n                setTimeout(_.bind(function () {\r\n                  this._resetFocusedListElem();\r\n                }, this), 50);\r\n              }\r\n            }\r\n          } else if (event.keyCode === 32 || event.keyCode === 13) {\r\n            // space(32) or enter(13)\r\n            if (this.currentTabPosition === TabPosition.header) {\r\n              event.preventDefault();\r\n              event.stopPropagation();\r\n              this.clickBack();\r\n            } else if (this.currentTabPosition === TabPosition.list) {\r\n              event.preventDefault();\r\n              event.stopPropagation();\r\n              this.selectAt(this.selectedIndex);\r\n            }\r\n          }\r\n        },\r\n\r\n        onKeyDown: function (event) {\r\n          this._checkFocusAndSetCurrentTabPosition();\r\n          if (this.currentTabPosition !== TabPosition.list) {\r\n            this.onKeyInView(event);\r\n            return;\r\n          }\r\n\r\n          var selIndex = this.selectedIndex;\r\n          if (selIndex < 0 || selIndex === undefined) {\r\n            selIndex = this.getSelectedIndex();\r\n          }\r\n          var $preElem = this.selectedIndexElem(selIndex);\r\n\r\n          switch (event.which) {\r\n          case 33: // page up\r\n            this._moveTo(event, this._selectFirst(), $preElem);\r\n            break;\r\n          case 34: // page down\r\n            this._moveTo(event, this._selectLast(), $preElem);\r\n            break;\r\n          case 38: // up\r\n            this._moveTo(event, this._selectPrevious(), $preElem);\r\n            break;\r\n          case 40: // down\r\n            this._moveTo(event, this._selectNext(), $preElem);\r\n            break;\r\n          default:\r\n            this.onKeyInView(event);\r\n            return; // exit this handler for other keys\r\n          }\r\n        },\r\n\r\n        _selectFirst: function () {\r\n          this.selectedIndex = 0;\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        _selectLast: function () {\r\n          this.selectedIndex = this.collection.length - 1;\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        _selectNext: function () {\r\n          if (this.selectedIndex < 0 || this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.getSelectedIndex();\r\n          }\r\n          if (this.selectedIndex < this.collection.length - 1) {\r\n            this.selectedIndex++;\r\n          }\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        _selectPrevious: function () {\r\n          if (this.selectedIndex < 0 || this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.getSelectedIndex();\r\n          }\r\n          if (this.selectedIndex > 0) {\r\n            this.selectedIndex--;\r\n          }\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        selectAt: function (index) {\r\n          if (index >= this.collection.length || index < 0) {\r\n            return;\r\n          }\r\n          var $elem = this.selectedIndexElem(index);\r\n          $elem && $elem.trigger('click');\r\n        }\r\n\r\n      });\r\n\r\n    }, // constructor\r\n\r\n    refreshTabableElements: function (view) {\r\n      log.debug('MetadataNavigationListKeyboardBehavior::refreshTabableElements ' +\r\n                view.constructor.name) &&\r\n      console.log(log.last);\r\n      if (view.options.data.back_button) {\r\n        this.view.headerFocusable = true;\r\n        this.view.headerElement = view.ui.header;\r\n      }\r\n      this.view.currentTabPosition = TabPosition.none;\r\n      this.view.selectedIndex = -1;\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataNavigationListKeyboardBehavior;\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.navigation.list.view',['csui/lib/underscore', 'csui/lib/jquery',\r\n  'csui/controls/list/simplelist.view',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.keyboard.behavior',\r\n  'csui/controls/node-type.icon/node-type.icon.view',\r\n  'csui/models/version',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (_, $,\r\n    SimpleListView,\r\n    TabableRegionBehavior,\r\n    MetadataNavigationListKeyboardBehavior,\r\n    NodeTypeIconView,\r\n    VersionModel,\r\n    lang) {\r\n\r\n  var MetadataNavigationListView = SimpleListView.extend({\r\n\r\n    childViewOptions: function (model) {\r\n      return {\r\n        templateHelpers: function () {\r\n          var nameAttribute = this.options.nameAttribute || 'name';\r\n          return {enableIcon: true, name: this.model.get(nameAttribute)};\r\n        },\r\n        nameAttribute: this.options.data.nameAttribute,\r\n        childRole: this.options.data.childRole\r\n      };\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyDown'\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior,\r\n        initialActivationWeight: 100\r\n      },\r\n      MetadataNavigationListKeyboardBehavior: {\r\n        behaviorClass: MetadataNavigationListKeyboardBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataNavigationListView(options) {\r\n      this.options = options || {};\r\n      this.events = _.extend({}, SimpleListView.prototype.events, this.events);\r\n      SimpleListView.apply(this, arguments);\r\n\r\n      // Do not use childEvents, because SimpleListView does it and our property\r\n      // would overwrite their value and disable their event handlers\r\n      this.listenTo(this, 'childview:render', this.onRenderItem);\r\n      this.listenTo(this, 'childview:before:destroy', this.onBeforeDestroyItem);\r\n    },\r\n\r\n    onRenderItem: function (childView) {\r\n      // for version metadata, show the version number in place of the icon\r\n      if (childView.model instanceof VersionModel) {\r\n        var verNum = childView.model.get('version_number_name');\r\n        $(childView.$('.csui-type-icon').get(0)).append(\r\n            \"<span title='\" + verNum + \"' class='list-item-version'>\" + verNum + \"</span>\"\r\n        );\r\n      } else {\r\n        // Checking for ThumbnailView\r\n        if ((this.options && this.options.isThumbnailView) ||\r\n            (this.options.originatingView && this.options.originatingView.thumbnailView)) {\r\n          this.$el.addClass(\"csui-metadata-navigation-thumbnail\");\r\n          childView.model.attributes.image_url = childView.model.get('csuiThumbnailImageUrl');\r\n        } else {\r\n          this.$el.find(\".csui-metadata-navigation-thumbnail\").removeClass(\r\n              \"csui-metadata-navigation-thumbnail\");\r\n        }\r\n        childView._nodeIconView = new NodeTypeIconView({\r\n          el: childView.$('.csui-type-icon').get(0),\r\n          node: childView.model\r\n        });\r\n        childView._nodeIconView.render();\r\n      }\r\n\r\n      // show a red star if the model has enforced required attribute\r\n      var show_required = this.options.data && this.options.data.show_required === true;\r\n      var enforcedRequire = childView.model && childView.model.options &&\r\n                            childView.model.options.enforcedRequiredAttrs === true;\r\n      if (show_required && enforcedRequire) {\r\n        var titleEl = childView.$('.list-item-title').get(0);\r\n        if (titleEl) {\r\n          var cssClasses, tooltip;\r\n          if (childView.model.validated === true) {\r\n            // change the star to green checkmark if the model passed validation\r\n            cssClasses = 'cs-icon-required category_required_done';\r\n            tooltip = lang.requiredPassedTooltip;\r\n          } else {\r\n            //show red star icon for required attributes to be filled\r\n            cssClasses = 'cs-icon-required category_required';\r\n            tooltip = lang.requiredTooltip;\r\n          }\r\n          $(titleEl).before(\"<span class='\" + cssClasses + \"' aria-label='\" + tooltip +\r\n                            \"' title='\" + tooltip + \"'></span>\");\r\n        }\r\n      }\r\n    },\r\n\r\n    onBeforeDestroyItem: function (childView) {\r\n      if (childView._nodeIconView) {\r\n        childView._nodeIconView.destroy();\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataNavigationListView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/common/metadata.action.multiple.items',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"metadata-wrapper binf-col-md-12\\\">\\r\\n  <div class=\\\"metadata-navigation\\\">\\r\\n    <div class=\\\"metadata-sidebar\\\"></div>\\r\\n    <div class=\\\"metadata-content\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_common_metadata.action.multiple.items', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/metadata/impl/metadata.navigation.list.behavior',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette'\r\n], function (_, $, Backbone, Marionette) {\r\n  'use strict';\r\n\r\n  // This behavior provides shared functionality for the metadata navigation list.\r\n\r\n  var MetadataNavigationListBehavior = Marionette.Behavior.extend({\r\n\r\n    constructor: function MetadataNavigationListBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n\r\n      _.extend(view, {\r\n\r\n        onBeforeShow: function () {\r\n          this._showChildViews();\r\n        },\r\n        onShow: function () {\r\n          this._showScrollPosition();\r\n        },\r\n        onBeforeDestroy: function () {\r\n          if (this.mdv && this.mdv.internal) {\r\n            this.mdv.destroy();\r\n          }\r\n          if (this.mdn) {\r\n            this.mdn.destroy();\r\n          }\r\n        },\r\n\r\n        _showChildViews: function () {\r\n          this.navigationRegion.show(this.mdn);\r\n          this.contentRegion.show(this.mdv);\r\n        },\r\n\r\n        _showScrollPosition: function () {\r\n          if (this.initiallySelected instanceof Backbone.Model) {\r\n            var index = this.mdn.collection.findIndex({id: this.initiallySelected.get('id')});\r\n            (index < 0 || index > this.mdn.collection.length - 1) && (index = 0);\r\n            return this.mdn.setSelectedIndex(index);\r\n          } else if (this.initiallySelected && this.initiallySelected.length > 0) {\r\n            var firstSelected = this.initiallySelected.models[0];\r\n            var selIndex = this.mdn.collection.indexOf(firstSelected);\r\n            if (selIndex === -1) {\r\n              selIndex = this.mdn.collection.findIndex({id: firstSelected.get('id')});\r\n            }\r\n            this.mdn.setSelectedIndex(selIndex);\r\n          } else {\r\n            if (this.mdn.collection.models.length > 0) {\r\n              this.mdn.setSelectedIndex(0);\r\n            }\r\n          }\r\n\r\n        }\r\n      });\r\n\r\n    } // constructor\r\n\r\n  });\r\n\r\n  return MetadataNavigationListBehavior;\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/impl/common/metadata.action.multiple.items',[],function(){});\n","csui.define('csui/widgets/metadata/impl/common/metadata.action.multiple.items.view',['csui/lib/underscore', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.view',\r\n  'csui/widgets/metadata/metadata.action.one.item.properties.view',\r\n  'hbs!csui/widgets/metadata/impl/common/metadata.action.multiple.items',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.behavior', \"csui/lib/jsonpath\",\r\n  'css!csui/widgets/metadata/impl/common/metadata.action.multiple.items'\r\n], function (_, Backbone, Marionette, MetadataNavigationListView,\r\n    MetadataActionOneItemPropertiesView, template, LayoutViewEventsPropagationMixin,\r\n    MetadataNavigationListBehavior, jsonPath) {\r\n\r\n  var MetadataActionMultipleItemsView = Marionette.LayoutView.extend({\r\n\r\n    className: 'cs-metadata-add-items',\r\n    template: template,\r\n\r\n    regions: {\r\n      navigationRegion: \".metadata-sidebar\",\r\n      contentRegion: \".metadata-content\"\r\n    },\r\n\r\n    behaviors: {\r\n      MetadataNavigationListBehavior: {\r\n        behaviorClass: MetadataNavigationListBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataActionMultipleItemsView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      Marionette.LayoutView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.collection = options.collection;\r\n      this.container = options.container;\r\n      this.context = options.context;\r\n      this.originatingView = options.originatingView;\r\n      this.initiallySelected = this.options.selected;\r\n      this.commonCategories = options.commonCategories;\r\n      this.initialFormData = options.initialFormData;\r\n      this.requiredFields = [];\r\n\r\n      var initiallySelectedModel = this._getInitiallySelectedModel();\r\n      if (options.applyFlag) {\r\n        initiallySelectedModel.set(\"applyFlag\", options.applyFlag);\r\n      }\r\n\r\n      this.mdv = new MetadataActionOneItemPropertiesView({\r\n        model: initiallySelectedModel,\r\n        container: this.container,\r\n        context: this.context,\r\n        commands: options.commands,\r\n        originatingView: this.originatingView,\r\n        action: options.action,\r\n        inheritance: options.inheritance\r\n      });\r\n      this.mdv.internal = true;\r\n      this._subscribeToMetadataViewEvents();\r\n\r\n      this.mdn = new MetadataNavigationListView({\r\n        collection: options.collection,\r\n        data: {\r\n          back_button: false,\r\n          title: '',\r\n          show_required: true\r\n        }\r\n      });\r\n      //Set the Initial categories to all uploadable files\r\n      if (options.applyFlag) {\r\n        this.setInitialCategories();\r\n      }\r\n      this.listenTo(this.mdn, 'click:item', this.onClickItem);\r\n      this.listenTo(this.mdn, 'click:back', this.onClickBack);\r\n      this.listenTo(this.mdn, 'show:node', function (args) {\r\n        this._showNode(args.model);\r\n      });\r\n      this.propagateEventsToRegions();\r\n    },\r\n\r\n    _getInitiallySelectedModel: function () {\r\n      if (this.initiallySelected && this.initiallySelected.length > 0) {\r\n        return this.initiallySelected.models[0];\r\n      } else if (this.collection && this.collection.length > 0) {\r\n        return this.collection.models[0];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n\r\n    onClickItem: function (item) {\r\n      var valid = this.validateAndSetValuesToNode();\r\n      if (valid) {\r\n        this._showNode(item.model);\r\n      } else {\r\n        item.cancelClick = true;\r\n      }\r\n    },\r\n\r\n    // set initial category values to all Alpaca forms\r\n    setInitialCategories: function () {\r\n      var that = this;\r\n      _.each(this.mdn.collection.models, function (model) {\r\n        var attr = {};\r\n        if(model.get(\"data\") === undefined){\r\n          if(model.get(\"type\") === 0 || model.get('container')){\r\n            attr.type = model.get(\"type\") || 0;\r\n            attr.container = model.get(\"container\") || true;\r\n          }else {\r\n            attr.advanced_versioning = false;\r\n            attr.mime_type = model.get(\"mime_type\");\r\n            attr.type = model.get(\"type\") || 144;\r\n          }\r\n          attr.name = model.get(\"newName\") || model.get(\"name\");\r\n          attr.parent_id = this.mdv.options.container.get(\"id\");\r\n          _.extend(attr, JSON.parse(JSON.stringify(that.commonCategories)));\r\n        }\r\n        model.set('data', attr);\r\n      }, this);\r\n\r\n    },\r\n\r\n    getRequiredFields: function () {\r\n      var formValues = {},\r\n          that       = this;\r\n      that.requiredFields = [];\r\n      if (this.initialFormData && this.initialFormData.models) {\r\n        _.each(this.initialFormData.models, function (tab, key) {\r\n          var values   = tab.get(\"data\"),\r\n              roleName = tab.get(\"role_name\"),\r\n              options  = tab.get('options'),\r\n              schema   = tab.get('schema'),\r\n              roles, role, category;\r\n\r\n          if (values) {\r\n            if (roleName) {\r\n              roles = formValues.roles || (formValues.roles = {});\r\n              role = roles[roleName] || (roles[roleName] = {});\r\n              if (roleName === 'categories') {\r\n                var requiredFields = jsonPath(schema, \"$..[?(@.required===true)]\",\r\n                    {resultType: \"PATH\"});\r\n                var nonValidateFields = jsonPath(options, \"$..[?(@.validate===false)]\",\r\n                    {resultType: \"PATH\"});\r\n\r\n                // getting field id for non validate fields\r\n                var nonValidateFieldsIds = [];\r\n                _.each(nonValidateFields, function (nvField) {\r\n                  var matches = nvField.toString().match(/(\\'[\\w]*\\')/g);\r\n                  if (!!matches) {\r\n                    nonValidateFieldsIds.push(matches[matches.length - 1].replace(/'/g, \"\"));\r\n                  }\r\n                });\r\n\r\n                // getting field id for Required Fields\r\n                var reqFieldId = [];\r\n                _.each(requiredFields, function (reqField) {\r\n                  var matches = reqField.toString().match(/(\\'[\\w]*\\')/g);\r\n                  if (!!matches) {\r\n                    reqFieldId.push(matches[matches.length - 1].replace(/'/g, \"\"));\r\n                  }\r\n                });\r\n\r\n                // eliminating non validating fields from required field ids.\r\n                reqFieldId = reqFieldId.filter(function (n) {\r\n                  // Eliminate if validation not required.\r\n                  return nonValidateFieldsIds.indexOf(n) === -1;\r\n                });\r\n                if (reqFieldId.length > 0) {\r\n                  that.requiredFields.push(reqFieldId);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    validateAndSetValuesToAllNode: function () {\r\n      var that           = this,\r\n          requiredFields = {},\r\n          valid          = true;\r\n      var formsValid = true;\r\n      this.getRequiredFields();\r\n      _.each(this.mdn.collection.models, _.bind(function (form) {\r\n        var data = form.get('data');\r\n        _.each(data.roles.categories, function (category) {\r\n          valid = valid && that._checkForAlpacaRequiredFields(form, category);\r\n        });\r\n        form.validated = valid;\r\n        formsValid = formsValid && valid;\r\n      }, this));\r\n      return formsValid;\r\n    },\r\n\r\n    // private\r\n    _checkForAlpacaRequiredFields: function (form, category) {\r\n      var valid    = true,\r\n          reqArray = [];\r\n      if (!!this.requiredFields) {\r\n        var nullCount = false;\r\n        _.each(this.requiredFields, function (arrayElement) {\r\n          reqArray = jsonPath(category, \"$..\" + arrayElement.toString(),\r\n              {resultType: \"PATH\"}.toArray);\r\n          _.each(reqArray, function (arrayElement) {\r\n            var checkNull = function (element) {\r\n              if (element instanceof Array && (element !== null || element !== \"\")) {\r\n                _.each(element, function (childElement) {\r\n                  checkNull(childElement);\r\n                });\r\n              } else if (element === null || element === \"\") {\r\n                nullCount = true;\r\n                return;\r\n              }\r\n            };\r\n            if (!nullCount) {\r\n              checkNull(arrayElement);\r\n            } else {\r\n              valid = false;\r\n              return;\r\n            }\r\n          });\r\n          if (nullCount) {\r\n            valid = false;\r\n            return;\r\n          }\r\n        });\r\n      }\r\n      return valid;\r\n    },\r\n\r\n    // public: validate the current form and set values to node if valid.\r\n    //         returns true if form is valid; otherwise, false.\r\n    validateAndSetValuesToNode: function () {\r\n      var item = this.mdn.getSelectedItem();\r\n      var valid = this.mdv.validate();\r\n      if (valid) {\r\n        var data = this.mdv.getValues();\r\n        // store the newly added categories data\r\n        if (item.model.newCategories.models.length > 0) {\r\n          _.each(item.model.newCategories.models, function (catModel) {\r\n            var catId = catModel.get('id');\r\n            var roleName = catModel.get('role_name');\r\n            var catData = {};\r\n            if (data && data.roles && data.roles[roleName]) {\r\n              catData = data.roles[roleName];\r\n            }\r\n            if (_.isEmpty(catData[catId]) === false) {\r\n              _.each(catModel.attributes.data, function (iValue, iKey) {\r\n                if (_.has(catData[catId], iKey)) {\r\n                  catModel.attributes.data[iKey] = catData[catId][iKey];\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n        item.model.validated = true;\r\n        item.model.set('data', data);  // intentionally trigger the set to redraw list item\r\n        return true;\r\n      }\r\n      if (!!this.mdv.metadataPropertiesView.allFormsRendered) {\r\n        item.model.validated = false;\r\n        item.model.trigger('change', item.model); // intentionally trigger the set to redraw list item\r\n      }\r\n      return false;\r\n    },\r\n\r\n    onClickBack: function () {\r\n      this.trigger(\"metadata:close\", {sender: this});\r\n    },\r\n\r\n    onItemNameChanged: function (newName) {\r\n      var selectedItem  = this.mdn.getSelectedItem(),\r\n          selectedIndex = this.mdn.getSelectedIndex();\r\n\r\n      selectedItem.render(); // name has been set silently\r\n      this.mdn.setSelectedIndex(selectedIndex);\r\n    },\r\n\r\n    _showNode: function (model) {\r\n      if (this.mdv && this.mdv.internal) {\r\n        this.mdv.destroy();\r\n      }\r\n      model.set(\"applyFlag\", this.options.applyFlag);\r\n      this.mdv = new MetadataActionOneItemPropertiesView({\r\n        model: model,\r\n        container: this.container,\r\n        context: this.context,\r\n        originatingView: this.originatingView,\r\n        action: this.options.action,\r\n        inheritance: this.options.inheritance\r\n      });\r\n      this.mdv.internal = true;\r\n      this._subscribeToMetadataViewEvents();\r\n      this.contentRegion.show(this.mdv);\r\n    },\r\n\r\n    _subscribeToMetadataViewEvents: function () {\r\n      this.listenTo(this.mdv, 'metadata:close',\r\n          _.bind(function () {\r\n            this.trigger(\"metadata:close\", {sender: this});\r\n          }, this));\r\n      this.listenTo(this.mdv, 'item:name:changed', _.bind(this.onItemNameChanged, this));\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataActionMultipleItemsView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return MetadataActionMultipleItemsView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/add.items/metadata.add.multiple.items.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/models/node/node.model\", \"csui/controls/dialog/dialog.view\",\r\n  \"csui/widgets/metadata/impl/common/metadata.action.multiple.items.view\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/dialogs/modal.alert/modal.alert\",\r\n  'csui/utils/commands',\r\n  \"css!csui/widgets/metadata/impl/metadata\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, BaseMetadataActionView, NodeModel, DialogView,\r\n    MetadataActionMultipleItemsView, lang, ModalAlert, commands) {\r\n\r\n  function MetadataAddMultipleItemsController() {\r\n  }\r\n\r\n  _.extend(MetadataAddMultipleItemsController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public\r\n    displayForm: function (status, options) {\r\n\r\n      var applyFlag        = false,\r\n          commonCategories = this._getCommonCategories(options);\r\n      if (options.initialFormData && options.initialFormData.models &&\r\n          options.initialFormData.models.length > 1) {\r\n        applyFlag = true;\r\n      }\r\n      this.metadataAddItems = new MetadataActionMultipleItemsView({\r\n        container: options.container,\r\n        collection: status.nodes,\r\n        selected: status.nodes,\r\n        action: 'create',\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        commands: commands,\r\n        commonCategories: commonCategories,\r\n        applyFlag: applyFlag,\r\n        initialFormData: options.initialFormData\r\n      });\r\n\r\n      this.listenTo(this.metadataAddItems, \"metadata:add\", _.bind(function () {\r\n        this.deferred.resolve();\r\n      }, this));\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = this.metadataAddItems;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.addItemsMetadataDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.addButtonTitle ? options.addButtonTitle :\r\n                                    lang.addDocumentMetadataDialogAddButtonTitle;\r\n      dialogOptions.OkButtonClick = this._addItems;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      return this.baseDisplayForm(baseUIOptions);\r\n\r\n    },\r\n\r\n    _getCommonCategories: function (options) {\r\n      var formValues = {},\r\n          that       = this;\r\n      if (options.initialFormData && options.initialFormData.models) {\r\n        _.each(options.initialFormData.models, function (tab, key) {\r\n          var values   = tab.get(\"data\"),\r\n              roleName = tab.get(\"role_name\"),\r\n              options  = tab.get('options'),\r\n              schema   = tab.get('schema'),\r\n              roles, role, category;\r\n\r\n          if (values) {\r\n            if (roleName) {\r\n              roles = formValues.roles || (formValues.roles = {});\r\n              role = roles[roleName] || (roles[roleName] = {});\r\n              if (roleName === 'categories') {\r\n                // For categories, merge the properties to the\r\n                // roles.categories.<category_id> object\r\n                var catId = tab.get(\"id\").toString();\r\n                category = role[catId] || (role[catId] = {});\r\n                // when attributes are not set, the server deletes\r\n                // the category unless it is set to null\r\n                if (_.isEmpty(values)) {\r\n                  category = null;\r\n                } else {\r\n                  //Replace null values with empty string\r\n                  values = JSON.parse(JSON.stringify(values).replace(/null/g, \"\\\"\\\"\"));\r\n                  _.extend(category, values);\r\n                }\r\n              } else {\r\n                // With a role defined, merge the properties to the\r\n                // roles.<role_name> object\r\n                //TODO: uncomment this once classifications are displayed on upload dialog\r\n                //_.extend(role, values);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n      return formValues;\r\n    },\r\n\r\n    // private\r\n    _addItems: function (args) {\r\n      if (args.view.mdv && args.view.mdv.metadataPropertiesView &&\r\n          args.view.mdv.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItems.validateAndSetValuesToNode();\r\n        if (valid) {\r\n          //generic error handling for all modules\r\n          this.options.view.$el.find(\".cs-formfield-invalid\").removeClass('cs-formfield-invalid');\r\n          var allValid = true;\r\n          this.metadataAddItems.validateAndSetValuesToAllNode();\r\n          this.metadataAddItems.collection.forEach(function (model) {\r\n            allValid = allValid && (model.validated ? true : false);\r\n          });\r\n          if (allValid) {\r\n            this.metadataAddItems.collection.forEach(function (model) {\r\n              var data = model.get('data');\r\n              var item = model.get('itemObject') || model.get('fileObject');\r\n              var extended_data = model.get('extended_data');\r\n\r\n              if (data && item) {\r\n                var extendedData = {};\r\n                item.set('newName', data.name);\r\n                if (!!data.name_multilingual) {\r\n                  item.set('name_multilingual', data.name_multilingual);\r\n                  item.set('multilingual_provided', true);\r\n                }\r\n                if (data.description !== undefined) {\r\n                  extendedData.description = data.description;\r\n                  !!data.description_multilingual &&\r\n                  (extendedData.description_multilingual = data.description_multilingual);\r\n                }\r\n                if (data.advanced_versioning !== undefined) {\r\n                  extendedData.advanced_versioning = data.advanced_versioning;\r\n                }\r\n                if (data.roles) {\r\n                  extendedData.roles = _.deepClone(data.roles);\r\n                }\r\n                if (_.isEmpty(extendedData) === false) {\r\n                  _.extend(extended_data, extendedData);\r\n                }\r\n              }\r\n            });\r\n            this.dialog.destroy();\r\n            this.deferred.resolve();\r\n          } else {\r\n            var title = lang.defaultDialogTitle;\r\n            var message = lang.missingRequiredMetadataForObjects;\r\n            ModalAlert.showError(message, title);\r\n          }\r\n        } else {\r\n          //generic error handling for all modules\r\n          this.options.view.$el.find(\".binf-has-error .cs-formfield\").addClass(\r\n              'cs-formfield-invalid');\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddMultipleItemsController, {version: \"1.0\"});\r\n\r\n  return MetadataAddMultipleItemsController;\r\n\r\n});\r\n\n","/**\r\n * this is exclusively for documents and folders\r\n */\r\ncsui.define('csui/widgets/metadata/impl/add.items/metadata.add.item.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\",\r\n  \"csui/models/nodes\", \"csui/models/node/node.model\",\r\n  \"csui/widgets/metadata/metadata.add.item.controller\",\r\n  \"csui/widgets/metadata/impl/metadata.utils\",\r\n  \"csui/widgets/metadata/impl/add.items/metadata.add.multiple.items.controller\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, $, Backbone, NodeCollection, NodeModel, MetadataAddOneItemController, MetadataUtils,\r\n    MetadataAddMultipleItemsController, lang) {\r\n  'use strict';\r\n\r\n  function MetadataAddItemController() {\r\n  }\r\n\r\n  _.extend(MetadataAddItemController.prototype, Backbone.Events, {\r\n\r\n    addItemsRequiredMetadata: function (items, options) {\r\n\r\n      // 'original' does not need checking\r\n      if (options.openMetadata !== true && options.inheritance === 'original') {\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      var deferred      = $.Deferred(),\r\n          file          = _.find(items, function (item) {\r\n                return item.get('newVersion') === undefined;\r\n              }) || items[0],\r\n          tempName      = items.length > 0 ? items[0].get('name') : 'temp_name',\r\n\r\n          utilOptions   = {\r\n            action: 'create',\r\n            name: tempName,\r\n            items: items,\r\n            container: options.container,\r\n            context: options.container.context,\r\n            collection: options.collection,\r\n            docParentId: items.length > 0 ? file.get('id') : null,\r\n            addableType: options.addableType != undefined ? options.addableType : 144\r\n            // this is tweak to get validate required attrs for folders also,\r\n            // since by default container won't ask to fill all req attrs,\r\n            // while drag and drop folders we have to fill else uploading sub level files fails\r\n          },\r\n          metadataUtils = new MetadataUtils(),\r\n          newFiles      = $.grep(items, function (item) {\r\n            return item.get('newVersion') === undefined;\r\n          }); //Collection might contain new versions of existing items, remove such items\r\n\r\n      metadataUtils.ContainerHasEnforcedEmptyRequiredMetadata(utilOptions)\r\n          .done(_.bind(function (resp) {\r\n            if (resp.hasRequiredMetadata === true) {\r\n              // if the container has empty required metadata.\r\n              var metadataDeferred = $.Deferred();\r\n              if (newFiles && newFiles.length === 1) {\r\n                // add one item with required metadata\r\n                metadataDeferred = this._addOneItemWithRequiredMetadata(newFiles,\r\n                    options);\r\n              } else if (newFiles && newFiles.length > 1) {\r\n                // add multiple items with required metadata\r\n                if (resp.initialFormData) {\r\n                  options.initialFormData = resp.initialFormData;\r\n                }\r\n                metadataDeferred = this._addMultipleItemsWithRequiredMetadata(newFiles,\r\n                    options);\r\n              } else if (items.length) {\r\n                //if items has no new files but has versions to files.\r\n                deferred.resolve();\r\n              }\r\n              else {\r\n                deferred.reject();\r\n              }\r\n\r\n              metadataDeferred.done(function (resp) {\r\n                deferred.resolve(resp);\r\n              }).fail(function (error) {\r\n                deferred.reject(error);\r\n              });\r\n\r\n            } else {\r\n              // no required metadata: resolve and let the caller code proceed with add item as normal\r\n              deferred.resolve({});\r\n            }\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    _addOneItemWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred(),\r\n          nodes    = this._makeNodeCollectionFromItems(items, options),\r\n          status   = {\r\n            nodes: nodes,\r\n            container: options.container,\r\n            context: options.context\r\n          };\r\n      options = options || {};\r\n      _.extend(options, {\r\n        callerProcessData: true,\r\n        cancelButtonActionToken: \"cancelAddOneItemWithRequiredMetadata\",\r\n        dialogTitle: nodes.models[0].get('fileObject') ? lang.addDocumentMetadataDialogTitle :\r\n                     lang.addFolderMetadataDialogTitle,\r\n        addButtonTitle: lang.addItemMetadataDialogButtonUploadTitle\r\n      });\r\n      this.displayForm(status, options)\r\n          .done(function (resp) {\r\n            if (options.callerProcessData) {\r\n              var model = nodes.models[0];\r\n              var item = model.get('itemObject') || model.get('fileObject');\r\n              item.set('newName', resp.data.name);\r\n\r\n              if (item) {\r\n                var extendedData = {};\r\n                item.set('newName', resp.data.name);\r\n                if (!!resp.data.name_multilingual) {\r\n                  item.set('name_multilingual', resp.data.name_multilingual);\r\n                  item.set('multilingual_provided', true);\r\n                }\r\n                if (resp.data.description !== undefined) {\r\n                  extendedData.description = resp.data.description;\r\n                  !!resp.data.description_multilingual &&\r\n                  (extendedData.description_multilingual = resp.data.description_multilingual);\r\n                }\r\n                if (resp.data.advanced_versioning !== undefined) {\r\n                  extendedData.advanced_versioning = resp.data.advanced_versioning;\r\n                }\r\n                if (resp.data.roles) {\r\n                  extendedData.roles = _.deepClone(resp.data.roles);\r\n                }\r\n                if (_.isEmpty(extendedData) === false) {\r\n                  item.set('extended_data', extendedData);\r\n                }\r\n              }\r\n              deferred.resolve(items);\r\n            } else {\r\n              deferred.resolve.apply(deferred, arguments);\r\n            }\r\n          })\r\n          .fail(function () {\r\n            deferred.reject.apply(deferred, arguments);\r\n          });\r\n      return deferred.promise();\r\n    },\r\n    // Private: add multiple items with required metadata\r\n    _addMultipleItemsWithRequiredMetadata: function (nodes, options) {\r\n      nodes = this._makeNodeCollectionFromItems(nodes, options);\r\n      var folderLen = 0, fileLen = 0, nodesLen = nodes.length, cmdStatus = {nodes: nodes},\r\n          deferred                                                       = $.Deferred();\r\n      for (var i = 0; i < nodesLen; i++) {\r\n        nodes.models[i].get('fileObject') ? fileLen++ : folderLen++;\r\n      }\r\n      _.extend(options, {\r\n        dialogTitle: fileLen === nodesLen ? lang.addDocumentsMetadataDialogTitle :\r\n                     folderLen === nodesLen ? lang.addFoldersMetadataDialogTitle :\r\n                     lang.addItemsMetadataDialogTitle,\r\n        addButtonTitle: lang.addItemMetadataDialogButtonUploadTitle\r\n      });\r\n      var metadataAddMultipleDocsController = new MetadataAddMultipleItemsController();\r\n      metadataAddMultipleDocsController\r\n          .displayForm(cmdStatus, options)\r\n          .done(function (resp) {\r\n            deferred.resolve(nodes);\r\n          })\r\n          .fail(function () {\r\n            deferred.reject();\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: create a node collection from the items array\r\n    _makeNodeCollectionFromItems: function (items, options) {\r\n      var nodes = new NodeCollection();\r\n      var node;\r\n      if (items && items.length > 0) {\r\n        _.each(items, function (item) {\r\n          var file = item.get('file');\r\n          if (file) {\r\n            node = new NodeModel({\r\n              name: item.get('newName') || file.name,\r\n              type: item.get('type') || 144,\r\n              size: file.size,\r\n              mime_type: file.type,\r\n              fileObject: item,\r\n              parent_id: options.container.get('id'),\r\n              extended_data: item.get('extended_data')\r\n            }, {\r\n              connector: options.container.connector\r\n            });\r\n          } else {\r\n            node = new NodeModel({\r\n              container: true,\r\n              name: item.get('newName') || item.get('name'),\r\n              type: item.get('type') || item.get('subType' || 0),\r\n              type_name: item.get('type_name') || 'Folder',\r\n              itemObject: item,\r\n              parent_id: options.container.get('id'),\r\n              extended_data: item.get('extended_data'),\r\n              enforcedRequiredAttrsForFolders: item.get('enforcedRequiredAttrsForFolders')\r\n            }, {\r\n              connector: options.container.connector\r\n            });\r\n          }\r\n\r\n          _.extend(node.options, {\r\n            enforcedRequiredAttrs: true\r\n          });\r\n          nodes.add(node, {silent: true});\r\n        }, this);\r\n      }\r\n      return nodes;\r\n    },\r\n    //to support previous implemenation\r\n    displayForm: function (status, options) {\r\n      var metadataAddOneItemController = new MetadataAddOneItemController();\r\n      return metadataAddOneItemController\r\n          .displayForm(status, options);\r\n    }\r\n\r\n  });\r\n\r\n  MetadataAddItemController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataAddItemController, {version: \"1.0\"});\r\n\r\n  return MetadataAddItemController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/add.items/metadata.add.multiple.docs.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/models/node/node.model\", \"csui/controls/dialog/dialog.view\",\r\n  \"csui/widgets/metadata/impl/common/metadata.action.multiple.items.view\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/dialogs/modal.alert/modal.alert\",\r\n  'csui/utils/commands',\r\n  \"css!csui/widgets/metadata/impl/metadata\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, BaseMetadataActionView, NodeModel, DialogView,\r\n    MetadataActionMultipleItemsView, lang, ModalAlert, commands) {\r\n\r\n  function MetadataAddMultipleDocsController() {\r\n  }\r\n\r\n  _.extend(MetadataAddMultipleDocsController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public\r\n    displayForm: function (status, options) {\r\n\r\n      var applyFlag        = false,\r\n          commonCategories = this._getCommonCategories(options);\r\n      if (options.initialFormData && options.initialFormData.models &&\r\n          options.initialFormData.models.length > 1) {\r\n        applyFlag = true;\r\n      }\r\n      this.metadataAddItems = new MetadataActionMultipleItemsView({\r\n        container: options.container,\r\n        collection: status.nodes,\r\n        selected: status.nodes,\r\n        action: 'create',\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        commands: commands,\r\n        commonCategories: commonCategories,\r\n        applyFlag: applyFlag,\r\n        initialFormData: options.initialFormData\r\n      });\r\n\r\n      this.listenTo(this.metadataAddItems, \"metadata:add\", _.bind(function () {\r\n        this.deferred.resolve();\r\n      }, this));\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = this.metadataAddItems;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.addDocumentMetadataDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.addButtonTitle ? options.addButtonTitle :\r\n                                    lang.addDocumentMetadataDialogAddButtonTitle;\r\n      dialogOptions.OkButtonClick = this._addItems;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      return this.baseDisplayForm(baseUIOptions);\r\n\r\n    },\r\n\r\n    _getCommonCategories: function (options) {\r\n      var formValues = {},\r\n          that       = this;\r\n      if (options.initialFormData && options.initialFormData.models) {\r\n        _.each(options.initialFormData.models, function (tab, key) {\r\n          var values   = tab.get(\"data\"),\r\n              roleName = tab.get(\"role_name\"),\r\n              options  = tab.get('options'),\r\n              schema   = tab.get('schema'),\r\n              roles, role, category;\r\n\r\n          if (values) {\r\n            if (roleName) {\r\n              roles = formValues.roles || (formValues.roles = {});\r\n              role = roles[roleName] || (roles[roleName] = {});\r\n              if (roleName === 'categories') {\r\n                // For categories, merge the properties to the\r\n                // roles.categories.<category_id> object\r\n                var catId = tab.get(\"id\").toString();\r\n                category = role[catId] || (role[catId] = {});\r\n                // when attributes are not set, the server deletes\r\n                // the category unless it is set to null\r\n                if (_.isEmpty(values)) {\r\n                  category = null;\r\n                } else {\r\n                  //Replace null values with empty string\r\n                  values = JSON.parse(JSON.stringify(values).replace(/null/g, \"\\\"\\\"\"));\r\n                  _.extend(category, values);\r\n                }\r\n              } else {\r\n                // With a role defined, merge the properties to the\r\n                // roles.<role_name> object\r\n                //TODO: uncomment this once classifications are displayed on upload dialog\r\n                //_.extend(role, values);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n      return formValues;\r\n    },\r\n\r\n    // private\r\n    _addItems: function (args) {\r\n      if (args.view.mdv && args.view.mdv.metadataPropertiesView &&\r\n          args.view.mdv.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItems.validateAndSetValuesToNode();\r\n        if (valid) {\r\n          //generic error handling for all modules\r\n          this.options.view.$el.find(\".cs-formfield-invalid\").removeClass('cs-formfield-invalid');\r\n          var allValid = true;\r\n          this.metadataAddItems.validateAndSetValuesToAllNode();\r\n          this.metadataAddItems.collection.forEach(function (model) {\r\n            allValid = allValid && (model.validated ? true : false);\r\n          });\r\n          if (allValid) {\r\n            this.metadataAddItems.collection.forEach(function (model) {\r\n              var data = model.get('data');\r\n              var item = model.get('fileObject');\r\n              var extended_data = model.get('extended_data');\r\n              if (data && item) {\r\n                item.set('newName', data.name);\r\n                if (!!data.name_multilingual) {\r\n                  item.set('name_multilingual', data.name_multilingual);\r\n                  item.set('multilingual_provided', true);\r\n                }\r\n                var extendedData = {};\r\n                if (data.description !== undefined) {\r\n                  extendedData.description = data.description;\r\n                  !!data.description_multilingual &&\r\n                  (extendedData.description_multilingual = data.description_multilingual);\r\n                }\r\n                if (data.advanced_versioning !== undefined) {\r\n                  extendedData.advanced_versioning = data.advanced_versioning;\r\n                }\r\n                if (data.roles) {\r\n                  extendedData.roles = _.deepClone(data.roles);\r\n                }\r\n                if (_.isEmpty(extendedData) === false) {\r\n                  _.extend(extended_data, extendedData);\r\n                }\r\n              }\r\n            });\r\n            this.dialog.destroy();\r\n            this.deferred.resolve();\r\n          } else {\r\n            var title = lang.addDocumentMetadataDialogTitle;\r\n            var message = lang.missingRequiredMetadataForDocuments;\r\n            ModalAlert.showError(message, title);\r\n          }\r\n        } else {\r\n          //generic error handling for all modules\r\n          this.options.view.$el.find(\".binf-has-error .cs-formfield\").addClass(\r\n              'cs-formfield-invalid');\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddMultipleDocsController, {version: \"1.0\"});\r\n\r\n  return MetadataAddMultipleDocsController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.add.document.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\",\r\n  \"csui/models/nodes\", \"csui/models/node/node.model\",\r\n  \"csui/widgets/metadata/impl/add.items/metadata.add.item.controller\",\r\n  \"csui/widgets/metadata/impl/metadata.utils\",\r\n  \"csui/widgets/metadata/impl/add.items/metadata.add.multiple.docs.controller\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, $, Backbone, NodeCollection, NodeModel, MetadataAddItemController, MetadataUtils,\r\n    MetadataAddMultipleDocsController, lang) {\r\n  'use strict';\r\n\r\n  function MetadataAddDocumentController() {\r\n  }\r\n\r\n  _.extend(MetadataAddDocumentController.prototype, Backbone.Events, {\r\n\r\n    //\r\n    // Public: check for enforced required metadata and show the metadata view if true\r\n    //\r\n    addItemsRequiredMetadata: function (fileUploadCollection, options) {\r\n       // 'original' does not need checking\r\n       if (options.openMetadata !== true && options.inheritance === 'original') {\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      var deferred      = $.Deferred(),\r\n          fileModels    = fileUploadCollection.models,\r\n          file          = _.find(fileUploadCollection.models, function (fileUploadModel) {\r\n                return fileUploadModel.get('newVersion') === undefined;\r\n              }) || fileModels[0],\r\n          tempName      = fileModels.length > 0 ? file.get('file').name : 'temp_name',\r\n          utilOptions   = {\r\n            action: 'create',\r\n            addableType: options.addableType,\r\n            name: tempName,\r\n            container: options.container,\r\n            docParentId: fileModels.length > 0 ? file.get('id') : null\r\n          },\r\n          metadataUtils = new MetadataUtils(),\r\n          newFiles      = $.grep(fileUploadCollection.models, function (fileUploadModel) {\r\n            return fileUploadModel.get('newVersion') === undefined;\r\n          }); //Collection might contain new versions of existing items, remove such items\r\n\r\n      metadataUtils.ContainerHasEnforcedEmptyRequiredMetadata(utilOptions)\r\n          .done(_.bind(function (resp) {\r\n            if (resp.hasRequiredMetadata === true) {\r\n              // if the container has empty required metadata.\r\n              var metadataDeferred = $.Deferred();\r\n\r\n              if (newFiles && newFiles.length === 1) {\r\n                // add one item with required metadata\r\n                metadataDeferred = this._addOneItemWithRequiredMetadata(newFiles,\r\n                    options);\r\n              } else if (newFiles && newFiles.length > 1) {\r\n                // add multiple items with required metadata\r\n                if (resp.initialFormData) {\r\n                  options.initialFormData = resp.initialFormData;\r\n                }\r\n                metadataDeferred = this._addMultipleItemsWithRequiredMetadata(newFiles,\r\n                    options);\r\n              } else if (fileUploadCollection.length) {\r\n                //if fileUploadCollection has no new files but has versions to files.\r\n                deferred.resolve();\r\n              }\r\n              else {\r\n                deferred.reject();\r\n              }\r\n\r\n              metadataDeferred.done(function (resp) {\r\n                deferred.resolve(resp);\r\n              }).fail(function (error) {\r\n                deferred.reject(error);\r\n              });\r\n\r\n            } else {\r\n              // no required metadata: resolve and let the caller code proceed with add item as normal\r\n              deferred.resolve({});\r\n            }\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: create a node collection from the items array\r\n    _makeNodeCollectionFromItems: function (items, options) {\r\n      var nodes = new NodeCollection();\r\n      if (items && items.length > 0) {\r\n        _.each(items, function (item) {\r\n          var file = item.get('file');\r\n          var node = new NodeModel({\r\n            name: item.get('newName') || file.name,\r\n            type: item.get('type') || 144,\r\n            size: file.size,\r\n            mime_type: file.type,\r\n            fileObject: item,\r\n            parent_id: options.container.get('id'),\r\n            extended_data: item.get('extended_data')\r\n          }, {\r\n            connector: options.container.connector\r\n          });\r\n          _.extend(node.options, {\r\n            enforcedRequiredAttrs: true\r\n          });\r\n          nodes.add(node, {silent: true});\r\n        }, this);\r\n      }\r\n      return nodes;\r\n    },\r\n\r\n    // Private: add one item with required metadata\r\n    _addOneItemWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var status = {\r\n        nodes: nodes,\r\n        container: options.container,\r\n        context: options.context\r\n      };\r\n      var cmdOptions = {\r\n        callerProcessData: true,\r\n        dialogTitle: lang.addDocumentMetadataDialogTitle,\r\n        addButtonTitle: lang.addDocumentMetadataDialogAddButtonTitle,\r\n        cancelButtonActionToken: \"cancelAddOneItemWithRequiredMetadata\"\r\n      };\r\n\r\n      // show add item metadata view\r\n      var metadataAddItemController = new MetadataAddItemController();\r\n      metadataAddItemController\r\n          .displayForm(status, cmdOptions)\r\n          .done(function (resp) {\r\n            var item = items[0];\r\n            item.set('newName', resp.data.name);\r\n            if (!!resp.data.name_multilingual) {\r\n              item.set('name_multilingual', resp.data.name_multilingual);\r\n              item.set('multilingual_provided', true);\r\n            }\r\n            var extendedData = {};\r\n            if (resp.data.description !== undefined) {\r\n              extendedData.description = resp.data.description;\r\n              !!resp.data.description_multilingual &&\r\n              (extendedData.description_multilingual = resp.data.description_multilingual);\r\n            }\r\n            if (resp.data.advanced_versioning !== undefined) {\r\n              extendedData.advanced_versioning = resp.data.advanced_versioning;\r\n            }\r\n            if (resp.data.roles) {\r\n              extendedData.roles = _.deepClone(resp.data.roles);\r\n            }\r\n            if (_.isEmpty(extendedData) === false) {\r\n              item.set('extended_data', extendedData);\r\n            }\r\n\r\n            deferred.resolve();\r\n          })\r\n          .fail(function (args) {\r\n            var error = (args && args.error) ? args.error : undefined;\r\n            var userAction;\r\n\r\n            if (args && args.buttonAttributes) {\r\n              if (args.buttonAttributes.actionToken === \"cancelAddOneItemWithRequiredMetadata\") {\r\n                userAction = \"cancelAddOneItemWithRequiredMetadata\";\r\n              }\r\n              else if (args.buttonAttributes.actionToken === \"closeMetadataActionView\") {\r\n                userAction = \"closeMetadataActionView\";\r\n              }\r\n            }\r\n            deferred.reject({error: error, userAction: userAction});\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: add multiple items with required metadata\r\n    _addMultipleItemsWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var cmdStatus = {nodes: nodes};\r\n\r\n      var metadataAddMultipleDocsController = new MetadataAddMultipleDocsController();\r\n      metadataAddMultipleDocsController\r\n          .displayForm(cmdStatus, options)\r\n          .done(function (resp) {\r\n            deferred.resolve();\r\n          })\r\n          .fail(function () {\r\n            deferred.reject();\r\n          });\r\n\r\n      return deferred.promise();\r\n    }\r\n\r\n  });\r\n\r\n  MetadataAddDocumentController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataAddDocumentController, {version: \"1.0\"});\r\n\r\n  return MetadataAddDocumentController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.one.item.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/widgets/metadata/impl/metadata.controller\",\r\n  \"csui/widgets/metadata/metadata.action.one.item.properties.view\",\r\n  \"csui/utils/commandhelper\", \"i18n!csui/widgets/metadata/impl/nls/lang\",\r\n  \"csui/dialogs/modal.alert/modal.alert\", 'csui/utils/commands',\r\n  \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (_, BaseMetadataActionView, MetadataController,\r\n    MetadataActionOneItemPropertiesView, CommandHelper, lang, ModalAlert, commands) {\r\n\r\n  //\r\n  // Metadata Copy/Move One Item Controller allows copying/moving of ONE item with complete metadata\r\n  // that the user can edit and change values of general metadata, categories and other roles.\r\n  //\r\n\r\n  function MetadataCopyMoveOneItemController() {\r\n  }\r\n\r\n  _.extend(MetadataCopyMoveOneItemController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public (usually called from the 'command' class that has 'status' and 'options' parameters)\r\n    displayForm: function (status, options) {\r\n      var nodes = CommandHelper.getAtLeastOneNode(status);\r\n      var node = nodes.length > 0 ? nodes.models[0] : null;\r\n\r\n      this.node = node;\r\n\r\n      var addItemView = this.metadataAddItemPropView = new MetadataActionOneItemPropertiesView({\r\n        model: node,\r\n        container: status.container,\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        commands: commands,\r\n        action: options.action,\r\n        inheritance: options.inheritance\r\n      });\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.callerProcessData = options.callerProcessData;\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = addItemView;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.defaultDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.okButtonTitle ? options.okButtonTitle :\r\n                                    lang.defaultDialogOkButtonTitle;\r\n      dialogOptions.OkButtonClick = this._CopyMoveItem;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      var deferred = this.baseDisplayForm(baseUIOptions);\r\n\r\n      return deferred;\r\n    },\r\n\r\n    // private\r\n    _CopyMoveItem: function (args) {\r\n      if (args.view.metadataPropertiesView && args.view.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItemPropView.validate();\r\n        if (valid) {\r\n          var data = this.metadataAddItemPropView.getValues();\r\n\r\n          if (args.callerProcessData === true) {\r\n            this.dialog.destroy();\r\n            this.deferred.resolve({data: data});\r\n          } else {\r\n            var metadataController = new MetadataController();\r\n            metadataController.createItem(this.node, data)\r\n                .done(_.bind(function (resp) {\r\n                  this.dialog.destroy();\r\n                  this.deferred.resolve({name: data.name});\r\n                }, this))\r\n                .fail(function (resp) {\r\n                  var error = lang.failedToCreateItem;\r\n                  if (resp) {\r\n                    if (resp.responseJSON && resp.responseJSON.error) {\r\n                      error = resp.responseJSON.error;\r\n                    } else if (resp.responseText) {\r\n                      error = resp.responseText;\r\n                    }\r\n                    ModalAlert.showError(error);\r\n                  }\r\n                });\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataCopyMoveOneItemController, {version: \"1.0\"});\r\n\r\n  return MetadataCopyMoveOneItemController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.multiple.items.controller',[\"csui/lib/underscore\", \r\n  \"csui/utils/base\",\"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/models/node/node.model\", \"csui/controls/dialog/dialog.view\",\r\n  \"csui/widgets/metadata/impl/common/metadata.action.multiple.items.view\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/dialogs/modal.alert/modal.alert\",\r\n  \"css!csui/widgets/metadata/impl/metadata\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, base, BaseMetadataActionView, NodeModel, DialogView,\r\n    MetadataActionMultipleItemsView, lang, ModalAlert) {\r\n\r\n  function MetadataCopyMoveMultipleItemsController() {\r\n  }\r\n\r\n  _.extend(MetadataCopyMoveMultipleItemsController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public\r\n    displayForm: function (status, options) {\r\n\r\n      this.metadataAddItems = new MetadataActionMultipleItemsView({\r\n        container: options.container,\r\n        collection: status.nodes,\r\n        selected: status.nodes,\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        action: options.action,\r\n        inheritance: options.inheritance\r\n      });\r\n\r\n      this.listenTo(this.metadataAddItems, \"metadata:add\", _.bind(function () {\r\n        this.deferred.resolve();\r\n      }, this));\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = this.metadataAddItems;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.defaultDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.okButtonTitle ? options.okButtonTitle :\r\n                                    lang.defaultDialogOkButtonTitle;\r\n      dialogOptions.OkButtonClick = this._CopyMoveItems;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      return this.baseDisplayForm(baseUIOptions);\r\n\r\n    },\r\n\r\n    // private\r\n    _CopyMoveItems: function (args) {\r\n      if (args.view.mdv && args.view.mdv.metadataPropertiesView &&\r\n          args.view.mdv.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItems.validateAndSetValuesToNode();\r\n        if (valid) {\r\n          var allValid = true;\r\n          this.metadataAddItems.collection.forEach(function (model) {\r\n            var modelValid = model.options.enforcedRequiredAttrs === true ?\r\n                             (model.validated ? true : false ) : true;\r\n            allValid = allValid && modelValid;\r\n          });\r\n          if (allValid) {\r\n            this.metadataAddItems.collection.forEach(function (model) {\r\n              var data = model.get('data');\r\n              var item = model.get('itemObject');\r\n              if (data && item) {\r\n                var mlDataEnabled = base.getMetadataLanguageInfo().enabled;\r\n                if (mlDataEnabled) {\r\n                  var mlData = {\r\n                        multilingual_provided: true,\r\n                      },\r\n                      name_multilingual = data.name_multilingual,\r\n                      description_multilingual = data.description_multilingual;\r\n                  !!name_multilingual && (mlData.name_multilingual = name_multilingual);\r\n                  !!description_multilingual &&\r\n                  (mlData.description_multilingual = description_multilingual);\r\n                  _.extend(item, mlData);\r\n                }\r\n                item.newName = data.name;\r\n\r\n                var extendedData = {};\r\n                if (data.description !== undefined) {\r\n                  extendedData.description = data.description;\r\n                }\r\n                if (data.advanced_versioning !== undefined) {\r\n                  extendedData.advanced_versioning = data.advanced_versioning;\r\n                }\r\n                if (data.roles) {\r\n                  extendedData.roles = _.deepClone(data.roles);\r\n                }\r\n                if (_.isEmpty(extendedData) === false) {\r\n                  item.extended_data = extendedData;\r\n                }\r\n              }\r\n            });\r\n            this.dialog.destroy();\r\n            this.deferred.resolve();\r\n          } else {\r\n            var title = lang.defaultDialogTitle;\r\n            var message = lang.missingRequiredMetadataForObjects;\r\n            ModalAlert.showError(message, title);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataCopyMoveMultipleItemsController, {version: \"1.0\"});\r\n\r\n  return MetadataCopyMoveMultipleItemsController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.copy.move.items.controller',[\"csui/lib/underscore\", \r\n  \"csui/utils/base\", \"csui/lib/jquery\", \"csui/lib/backbone\", \"csui/models/nodes\",\r\n  \"csui/models/node/node.model\", \"csui/widgets/metadata/impl/metadata.utils\", \"csui/models/actions\",\r\n  \"csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.one.item.controller\",\r\n  \"csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.multiple.items.controller\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, base, $, Backbone, NodeCollection, NodeModel, MetadataUtils, ActionCollection,\r\n    MetadataCopyMoveOneItemController, MetadataCopyMoveMultipleItemsController, lang) {\r\n\r\n  function MetadataCopyMoveItemsController() {\r\n  }\r\n\r\n  _.extend(MetadataCopyMoveItemsController.prototype, Backbone.Events, {\r\n\r\n    //\r\n    // Public: copy/move one or multiple items with open metadata option\r\n    //\r\n    CopyMoveItemsWithMetadata: function (items, options) {\r\n      return this.CopyMoveItemsRequiredMetadata(items, _.extend(options, {openMetadata: true}));\r\n    },\r\n\r\n    // private\r\n    _copyMoveItemsWithMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n      var metadataDeferred = $.Deferred();\r\n\r\n      if (items && items.length > 0) {\r\n        options.id || (options.id = items[0].id);\r\n        options.container || (options.container = options.targetFolder);\r\n      }\r\n\r\n      if (items && items.length === 1) {\r\n        // copy/move one item with metadata\r\n        metadataDeferred = this._copyMoveOneItemWithRequiredMetadata(items, options);\r\n      } else if (items && items.length > 1) {\r\n        // copy/move multiple items with metadata\r\n        metadataDeferred = this._copyMoveMultipleItemsWithRequiredMetadata(items, options);\r\n      } else {\r\n        deferred.reject();\r\n      }\r\n\r\n      metadataDeferred.done(function (resp) {\r\n        deferred.resolve();\r\n      }).fail(function (error) {\r\n        deferred.reject(error);\r\n      });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    //\r\n    // Public: check for enforced required metadata and show the metadata view if true\r\n    //\r\n    CopyMoveItemsRequiredMetadata: function (items, options) {\r\n      if (!items || items.length < 1) {\r\n        return $.Deferred().reject();\r\n      }\r\n\r\n      // 'original' does not need checking\r\n      if (options.openMetadata !== true && options.inheritance === 'original') {\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      // latest PM decision is to deal only with 'destination'.  Option 'merged' is only for 1 item.\r\n      if (options.openMetadata !== true && items.length > 1 && options.inheritance === 'merged') {\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      var deferred = $.Deferred();\r\n      // talking the server developers, only need to check with one object\r\n      var utilOptions = {\r\n        action: options.action,\r\n        inheritance: options.inheritance,\r\n        items: items,\r\n        container: options.targetFolder,\r\n        context: options.context\r\n      };\r\n      var metadataUtils = new MetadataUtils();\r\n      metadataUtils.ContainerHasEnforcedEmptyRequiredMetadataOnNodes(utilOptions)\r\n          .done(_.bind(function (resp) {\r\n            if ((resp.requiredMetadata && resp.enforcedItems && resp.enforcedItems.length > 0) ||\r\n                options.openMetadata === true) {\r\n              if (resp.requiredMetadata) {\r\n                utilOptions = _.extend(utilOptions, {enforcedItems: resp.enforcedItems});\r\n              }\r\n              this._copyMoveItemsWithMetadata(items, utilOptions)\r\n                  .done(function (resp) {\r\n                    deferred.resolve(resp);\r\n                  }).fail(function (error) {\r\n                deferred.reject(error);\r\n              });\r\n            } else {\r\n              // no required metadata: resolve and let the caller code proceed normally\r\n              deferred.resolve();\r\n            }\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: create a node collection from the items array\r\n    _makeNodeCollectionFromItems: function (items, options) {\r\n      var nodes = new NodeCollection();\r\n      if (items && items.length > 0) {\r\n        _.each(items, function (item) {\r\n          var enforcedRequiredAttrs = _.find(options.enforcedItems,\r\n              function (enfItem) { return enfItem.id === item.id; }) === undefined ? false : true;\r\n          var node = new NodeModel({\r\n            id: item.id,\r\n            name: item.newName || item.name,\r\n            container: item.container,\r\n            mime_type: item.mime_type,\r\n            original_id: item.original_id,\r\n            type: item.type,\r\n            type_name: item.type_name,\r\n            action: options.action,\r\n            inheritance: options.inheritance,\r\n            itemObject: item,\r\n            size: item.size,\r\n            size_formatted: (item.type === 144 || item.type === 749 || item.type === 736 ||\r\n                             item.type === 30309) ? item.size_formatted : undefined\r\n          }, {\r\n            connector: options.container.connector\r\n          });\r\n          if (item.type === 140) { // for url object\r\n            node.attributes.url = item.url;\r\n          }\r\n          _.extend(node.options, {\r\n            original: item.original,\r\n            enforcedRequiredAttrs: enforcedRequiredAttrs\r\n          });\r\n          node.original = item.original || node.original;\r\n          node.actions = item.actions || new ActionCollection();\r\n          nodes.add(node, {silent: true});\r\n        }, this);\r\n      }\r\n      return nodes;\r\n    },\r\n\r\n    // Private: copy/move one item with required metadata\r\n    _copyMoveOneItemWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var status = {\r\n        nodes: nodes,\r\n        container: options.container\r\n      };\r\n      var dialogTitle, okButtonTitle;\r\n      if (options.action === 'copy') {\r\n        dialogTitle = _.str.sformat(lang.copyOneItemMetadataDialogTitle, items.length);\r\n        okButtonTitle = lang.copyItemsMetadataDialogButtonTitle;\r\n      } else if (options.action === 'move') {\r\n        dialogTitle = _.str.sformat(lang.moveOneItemMetadataDialogTitle, items.length);\r\n        okButtonTitle = lang.moveItemsMetadataDialogButtonTitle;\r\n      } else if(options.action === 'restructure') {\r\n        dialogTitle = _.str.sformat(lang.restructureOneItemMetadataDialogTitle, items.length);\r\n        okButtonTitle = lang.restructureItemsMetadataDialogButtonTitle;\r\n      }\r\n    \r\n      var cmdOptions = {\r\n        callerProcessData: true,\r\n        action: options.action,\r\n        context: options.context,\r\n        inheritance: options.inheritance,\r\n        originatingView: options.originatingView,\r\n        dialogTitle: dialogTitle,\r\n        okButtonTitle: okButtonTitle\r\n      };\r\n\r\n      // show copy/move one item metadata view\r\n      var metadataCopyMoveOneItemController = new MetadataCopyMoveOneItemController();\r\n      metadataCopyMoveOneItemController\r\n          .displayForm(status, cmdOptions)\r\n          .done(function (resp) {\r\n            items[0].newName = resp.data.name;\r\n            var mlDataEnabled = base.getMetadataLanguageInfo().enabled;\r\n            if (mlDataEnabled) {\r\n              var mlData = {\r\n                    multilingual_provided: true,\r\n                  },\r\n                  name_multilingual = resp.data.name_multilingual,\r\n                  description_multilingual = resp.data.description_multilingual;\r\n              !!name_multilingual &&\r\n              (mlData.name_multilingual = name_multilingual);\r\n              !!description_multilingual &&\r\n              (mlData.description_multilingual = description_multilingual);\r\n              _.extend(items[0], mlData);\r\n            }\r\n            var extendedData = {};\r\n            if (resp.data.description !== undefined) {\r\n              extendedData.description = resp.data.description;\r\n            }\r\n            if (resp.data.advanced_versioning !== undefined) {\r\n              extendedData.advanced_versioning = resp.data.advanced_versioning;\r\n            }\r\n            if (resp.data.roles) {\r\n              extendedData.roles = _.deepClone(resp.data.roles);\r\n            }\r\n            if (_.isEmpty(extendedData) === false) {\r\n              items[0].extended_data = extendedData;\r\n            }\r\n\r\n            deferred.resolve();\r\n          })\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: copy/move multiple items with metadata\r\n    _copyMoveMultipleItemsWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n\r\n      var dialogTitle, okButtonTitle;\r\n      if (options.action === 'copy') {\r\n        dialogTitle = _.str.sformat(lang.copyMultipleItemsMetadataDialogTitle, items.length);\r\n        okButtonTitle = lang.copyItemsMetadataDialogButtonTitle;\r\n      } else if (options.action === 'move') {\r\n        dialogTitle = _.str.sformat(lang.moveMultipleItemsMetadataDialogTitle, items.length);\r\n        okButtonTitle = lang.moveItemsMetadataDialogButtonTitle;\r\n      } else if(options.action == 'restructure') {\r\n        dialogTitle = _.str.sformat(lang.restructureMultipleItemsMetadataDialogTitle, items.length);\r\n        okButtonTitle = lang.restructureItemsMetadataDialogButtonTitle;\r\n      }\r\n\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var cmdStatus = {nodes: nodes};\r\n      var cmdOptions = {\r\n        action: options.action,\r\n        inheritance: options.inheritance,\r\n        container: options.container,\r\n        context: options.context,\r\n        originatingView: options.originatingView,\r\n        dialogTitle: dialogTitle,\r\n        okButtonTitle: okButtonTitle\r\n      };\r\n      var metadataCopyMoveMultipleItemsController = new MetadataCopyMoveMultipleItemsController();\r\n      metadataCopyMoveMultipleItemsController\r\n          .displayForm(cmdStatus, cmdOptions)\r\n          .done(function (resp) {\r\n            deferred.resolve();\r\n          })\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n  });\r\n\r\n  MetadataCopyMoveItemsController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataCopyMoveItemsController, {version: \"1.0\"});\r\n\r\n  return MetadataCopyMoveItemsController;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"metadata-wrapper binf-col-md-12\\\">\\r\\n  <div class=\\\"metadata-navigation\\\">\\r\\n    <div class=\\\"metadata-sidebar\\\" role=\\\"navigation\\\" aria-label=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"sidebarRegionAria\") || (depth0 != null ? lookupProperty(depth0,\"sidebarRegionAria\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"sidebarRegionAria\",\"hash\":{},\"loc\":{\"start\":{\"line\":3,\"column\":64},\"end\":{\"line\":3,\"column\":85}}}) : helper)))\n    + \"\\\"></div>\\r\\n    <div class=\\\"metadata-content\\\"></div>\\r\\n    <div class=\\\"metadata-doc-preview binf-hidden\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_metadatanavigation_impl_metadatanavigation', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/metadata/impl/metadatanavigation/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadatanavigation/impl/nls/root/lang',{\r\n  versionsTitle: 'Versions',\r\n  listAria: 'Browse items',\r\n  sidebarRegionAria: 'Metadata item selection',\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation',[],function(){});\n","// Shows a list of links to favorite nodes\r\ncsui.define('csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view',[\r\n  'csui/lib/underscore', 'csui/lib/backbone', 'csui/lib/marionette', 'csui/lib/jquery',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.behavior',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.view',\r\n  'csui/widgets/metadata/metadata.view',\r\n  'csui/controls/progressblocker/blocker',\r\n  'hbs!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/utils/contexts/factories/metadata.factory',\r\n  'csui/controls/mixins/view.state/metadata.view.state.mixin',\r\n  'csui/utils/contexts/factories/next.node',\r\n  'csui/models/nodeversions',\r\n  'i18n!csui/widgets/metadata/impl/metadatanavigation/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation'\r\n], function (_, Backbone, Marionette, $, TabableRegionBehavior, MetadataNavigationListBehavior,\r\n    MetadataNavigationListView, MetadataView, BlockingView, template,\r\n    LayoutViewEventsPropagationMixin,\r\n    MetadataModelFactory, MetadataViewStateMixin, NextNodeModelFactory, NodeVersionCollection,\r\n    lang) {\r\n  'use strict';\r\n\r\n  //\r\n  // Constructor options:\r\n  // - showTitleIcon: boolean to show or hide the icon in the title bar\r\n  //\r\n  var MetadataNavigationView = Marionette.LayoutView.extend({\r\n    className: 'cs-metadata',\r\n    template: template,\r\n\r\n    regions: {\r\n      navigationRegion: \".metadata-sidebar\",\r\n      contentRegion: \".metadata-content\",\r\n      docPreviewRegion: \".metadata-doc-preview\"\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior,\r\n        initialActivationWeight: 100\r\n      },\r\n      MetadataNavigationListBehavior: {\r\n        behaviorClass: MetadataNavigationListBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataNavigationView(options) {\r\n      options || (options = {});\r\n      BlockingView.imbue(this);\r\n      Marionette.LayoutView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.enableViewState = true;\r\n\r\n      if (options.enableViewState === false) {\r\n        this.enableViewState = false;\r\n      }\r\n\r\n      this.context = options.context;\r\n      this._isViewStateModelEnabled() && this._addUrlParametersSupport(options.context);\r\n\r\n      this.collection = options.collection;\r\n      this.container = options.container;\r\n      this.containerCollection = options.containerCollection;\r\n      this.originatingView = options.originatingView;\r\n      this.showCloseIcon = options.showCloseIcon;\r\n      this.initiallySelected = this.options.selected;\r\n      this.selectedTab = options.selectedTab || this.getViewStateDropdown();\r\n      this.selectedProperty = options.selectedProperty || this.getViewStateSelectedProperty();\r\n      this.isThumbnailView = options.isThumbnailView || this.getThumbnailViewState();\r\n      this.showPermissionView = options.showPermissionView || this.isShowPermissionView();\r\n      this.thumbnailViewState = options.originatingView &&\r\n                                options.originatingView.thumbnailViewState;\r\n      this.collection.inMetadataNavigationView = options.originatingView &&\r\n                                                 options.originatingView.isTabularView;\r\n      this.largeFileSettingsModel =  options.largeFileSettingsModel;\r\n\r\n      // Set toolbarItems from originating view to this.options, because when creating\r\n      // MetadataView, this is used as originatingView and we want to use the toolbar or menu\r\n      // items that are specified at the initial originatingView\r\n      if (!this.options.toolbarItems && this.originatingView && this.originatingView.options &&\r\n          this.originatingView.options.toolbarItems) {\r\n        this.options.toolbarItems = this.originatingView.options.toolbarItems;\r\n      }\r\n\r\n      var initiallySelectedModel = this._getInitiallySelectedModel();\r\n\r\n      this.mdv = (this.options.data && this.options.data.contentView) ?\r\n                 this.options.data.contentView :\r\n                 new MetadataView({\r\n                   model: initiallySelectedModel,\r\n                   container: this.container,\r\n                   containerCollection: this.containerCollection,\r\n                   collection: this.collection,\r\n                   context: this.context,\r\n                   originatingView: this,\r\n                   metadataNavigationView: this,\r\n                   isExpandedView: !!this.options.isExpandedView,\r\n                   showCloseIcon: this.showCloseIcon === undefined ? false : this.showCloseIcon,\r\n                   selectedTab: this.selectedTab,\r\n                   selectedProperty: this.selectedProperty,\r\n                   showPermissionView: this.showPermissionView,\r\n                   enableViewState: this.enableViewState\r\n                 });\r\n      if (!this.options.data || !this.options.data.contentView) {\r\n        this.mdv.internal = true;\r\n      }\r\n\r\n      this._subscribeToMetadataViewEvents(initiallySelectedModel);\r\n\r\n      var back_button,\r\n          viewStateModel = this.context && this.context.viewStateModel;\r\n      if (this._isViewStateModelEnabled()) {\r\n        back_button = viewStateModel.hasRouted() || viewStateModel.get('lastRouter');\r\n      } else {\r\n        back_button = (this.originatingView || this.containerCollection) ? true : false;\r\n      }\r\n\r\n      this.mdn = new MetadataNavigationListView({\r\n        collection: options.collection,\r\n        containerCollection: this.containerCollection,\r\n        data: {\r\n          back_button: back_button,\r\n          title: this._getBackButtonTitle(options),\r\n          nameAttribute: options.nameAttribute,\r\n          listAria: lang.listAria,\r\n          listRole: 'menu',\r\n          childRole: 'menuitem'\r\n        },\r\n        originatingView: options.originatingView,\r\n        isThumbnailView: this.isThumbnailView\r\n      });\r\n      this.listenTo(this.mdn, 'click:item', this.onClickItem);\r\n      this.listenTo(this.mdn, 'click:back', this.onClickBack);\r\n      this.listenTo(this.mdn, 'show:node', function (args) {\r\n        this._showNode(args.model);\r\n      });\r\n      this.listenTo(this.mdv, 'disable:active:item', function (args) {\r\n        this.mdn.$el.find('.binf-active').addClass('active-item-disable');\r\n      }).listenTo(this.mdv, 'enable:active:item', function () {\r\n        this.mdn.$el.find('.active-item-disable').removeClass('active-item-disable');\r\n      });\r\n\r\n      if (this.options.originatingView &&\r\n          (!_.isFunction(this.options.originatingView.cascadeDestroy) ||\r\n           this.options.originatingView.cascadeDestroy())) {\r\n        this.listenTo(this.options.originatingView, 'before:destroy', function () {\r\n          this._closeMetadata();\r\n        });\r\n      }\r\n\r\n      this.propagateEventsToRegions();\r\n\r\n      if (this._isViewStateModelEnabled()) {\r\n        var metadataModel = this.context.getModel(MetadataModelFactory);\r\n        this.listenTo(metadataModel, 'change:metadata_info', function () {\r\n          this.onMetadataInfoChanged();\r\n        });\r\n\r\n        // check if the previous fragment was for the metadata router. We need to go back\r\n        // to that fragment when the user hits the back button.\r\n        var currentHistoryEntry = viewStateModel && viewStateModel._currentHistoryEntry;\r\n        if (currentHistoryEntry) {\r\n          if (currentHistoryEntry && currentHistoryEntry.router == 'Metadata') {\r\n              this.goBacktoFragmentIndex = viewStateModel._navigationHistory.length;\r\n          }\r\n        } else {\r\n          currentHistoryEntry = viewStateModel.getLastHistoryEntry();\r\n          if (currentHistoryEntry && currentHistoryEntry.router == 'Metadata') {\r\n              this.goBacktoFragmentIndex = viewStateModel._navigationHistory.length - 1;\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    templateHelpers: function() {\r\n      return {\r\n        sidebarRegionAria: lang.sidebarRegionAria\r\n      };\r\n    },\r\n\r\n    _getBackButtonTitle: function (options) {\r\n      // TODO: Put the title on the interface (to options). New scenarios\r\n      // should not be hardcoded here one after another. They should\r\n      // specify what they need on the interface.\r\n      var title = options.container ? options.container.get('name') : '';\r\n      if (!title && options.collection.length > 0 &&\r\n          !!options.collection.models[0].collection.title) {\r\n        title = options.collection.models[0].collection.title;\r\n      }\r\n      // for versions, use a static title\r\n      if (options.collection && options.collection instanceof NodeVersionCollection) {\r\n        title = lang.versionsTitle;\r\n      }\r\n      if (!title) {\r\n        var viewStateModel = options.context && options.context.viewStateModel;\r\n        title = viewStateModel && viewStateModel.getBackToTitle();\r\n      }\r\n      return title;\r\n    },\r\n\r\n    _isViewStateModelEnabled: function () {\r\n      var viewStateModel = this.context && this.context.viewStateModel;\r\n      return this.enableViewState && viewStateModel && viewStateModel.get('enabled');\r\n    },\r\n\r\n    _getInitiallySelectedModel: function () {\r\n      if (this.initiallySelected instanceof Backbone.Model) {\r\n        if (this.showPermissionView && this.initiallySelected.actions &&\r\n            this.initiallySelected.actions.get('permissions')) {\r\n          return this.initiallySelected;\r\n        }\r\n        var index = this.collection.findIndex({id: this.initiallySelected.get('id')});\r\n        if (index < 0 || index > this.collection.length - 1) { return null; }\r\n        return this.collection.at(index);\r\n      } else if (this.initiallySelected && this.initiallySelected.length > 0) {\r\n        return this.initiallySelected.models[0];\r\n      } else if (this.collection && this.collection.length > 0) {\r\n        return this.collection.models[0];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n\r\n    onRender: function () {\r\n      if (!this.showPermissionView) {\r\n        var node;\r\n        if (this.mdv && this.mdv.model) {\r\n          node = this.mdv.model;\r\n        } else {\r\n          node = this._getInitiallySelectedModel();\r\n        }\r\n        node && this._showNode(node);\r\n      }\r\n    },\r\n\r\n    onClickItem: function (item) {\r\n      if (this._isViewStateModelEnabled() &&\r\n          this.getViewStateId() !== item.model.get('id')) {\r\n        this.setViewStateId(item.model.get('id'), {model: item.model});\r\n      } else {\r\n        this._showNode(item.model);\r\n      }\r\n    },\r\n\r\n    onClickBack: function () {\r\n      this._closeMetadata();\r\n    },\r\n\r\n    onItemNameChanged: function (newName) {\r\n      var selectedItem = this.mdn.getSelectedItem(),\r\n          selectedIndex = this.mdn.getSelectedIndex();\r\n\r\n      selectedItem.render(); // name has been set silently\r\n      this.mdn.setSelectedIndex(selectedIndex);\r\n    },\r\n\r\n    _moveToNextItemAfterDeleteOrMove: function () {\r\n      if (this.mdn.collection.length === 0) {\r\n        this._closeMetadata();\r\n      } else {\r\n        var nextIndex = this.currentIndex;\r\n        nextIndex === this.mdn.collection.length && (nextIndex--);\r\n        this.currentIndex = -1;\r\n        this.mdn.selectAt(nextIndex);\r\n      }\r\n    },\r\n\r\n    _currentIndex: function () {\r\n      this.currentIndex = this.mdn.getSelectedIndex();\r\n    },\r\n\r\n    _onItemDeleted: function () {\r\n      this._moveToNextItemAfterDeleteOrMove();\r\n    },\r\n\r\n    _onItemMoved: function (removedNode) {\r\n      this.mdn.collection.remove(removedNode);\r\n      this._moveToNextItemAfterDeleteOrMove();\r\n    },\r\n\r\n    _showNode: function (model) {\r\n      var selectedTab = (this._isViewStateModelEnabled() && this.getViewStateDropdown()) || (\r\n              this.mdv.metadataTabView && this.mdv.metadataTabView.tabLinks ?\r\n              this.mdv.metadataTabView.tabLinks.selected :\r\n              this.mdv && this.mdv.options && this.mdv.options.selectedTab ?\r\n              this.mdv.options.selectedTab : \"\"),\r\n          activeTab = this.mdv.metadataTabView && this.mdv.metadataTabView.options.activeTab ?\r\n                      this.mdv.metadataTabView && this.mdv.metadataTabView.options.activeTab :\r\n                      this.mdv.options && this.mdv.options.activeTab ? this.mdv.options.activeTab :\r\n                      \"\";\r\n      if (this.mdv && this.mdv.internal) {\r\n        this.mdv.destroy();\r\n      }\r\n\r\n      this.mdv = new MetadataView({\r\n        model: model,\r\n        container: this.container,\r\n        containerCollection: this.containerCollection,\r\n        collection: this.collection,\r\n        context: this.context,\r\n        originatingView: this,\r\n        metadataNavigationView: this,\r\n        showCloseIcon: this.showCloseIcon === undefined ? false : this.showCloseIcon,\r\n        showBackIcon: false,\r\n        activeTab: activeTab,\r\n        selectedTab: selectedTab,\r\n        showPermissionView: this.showPermissionView,\r\n        enableViewState: this.enableViewState,\r\n        selectedProperty: this.selectedProperty\r\n      });\r\n      this.mdv.internal = true;\r\n      // after the first time we show the node, do not pass in the selectedProperty\r\n      this.selectedProperty = undefined;\r\n      this._subscribeToMetadataViewEvents(model);\r\n      this.contentRegion.show(this.mdv);\r\n    },\r\n\r\n    _modelIdChanged: function () {\r\n      var id = this.model.get('id');\r\n      if (id) {\r\n        this.setSelectedElementByModelId(id);\r\n      }\r\n    },\r\n\r\n    onMetadataInfoChanged: function() {\r\n      var metadataModel = this.context.getModel(MetadataModelFactory),\r\n          metadataInfo = metadataModel.get('metadata_info');\r\n      if (!metadataInfo) {\r\n        return;\r\n      }\r\n      this.showPermissionView = metadataInfo.showPermissionView;    \r\n      this.setSelectedElementByModelId(metadataInfo.id);\r\n    },\r\n\r\n    setSelectedElementByModelId: function (id) {\r\n      var element = this.getItemByModelId(id);\r\n      if (element) {\r\n        this.mdn.setSelectedElement(element);\r\n        this._showNode(element.model);\r\n      }\r\n    },\r\n\r\n    getItemByModelId: function (id) {\r\n      var view;\r\n      this.mdn.children.some(function (element) {\r\n        if (element.model.get('id') === id) {\r\n          view = element;\r\n          return true;\r\n        }\r\n      });\r\n      return view;\r\n    },\r\n\r\n    onMetadataClose: function () {\r\n      this._closeMetadata();\r\n    },\r\n\r\n    onDestroy: function () {\r\n      if (this.thumbnailViewState) {\r\n        this.originatingView.thumbnail &&\r\n        this.originatingView.thumbnail.resultsView.triggerMethod('metadata:close');\r\n      }\r\n    },\r\n\r\n    _closeMetadata: function () {\r\n      this.trigger('metadata:close', {sender: this});\r\n\r\n      var viewStateModel = this.context.viewStateModel,\r\n          currentRouter = viewStateModel && viewStateModel.get(viewStateModel.CONSTANTS.CURRENT_ROUTER);\r\n\r\n      if (!this.originatingView) {\r\n        if ((currentRouter && currentRouter === 'Metadata') ||\r\n            (this._isViewStateModelEnabled() && !this.showPermissionView)) {\r\n          if (this.goBacktoFragmentIndex !== undefined) {\r\n            this.context.viewStateModel._restoreHistoryEntryByIndex(this.goBacktoFragmentIndex);\r\n          } else {\r\n            this.context.viewStateModel.restoreLastRouter();\r\n          }\r\n        } else {\r\n          var id = this._getCommonContainerId();\r\n          if (id) {\r\n            // there is no originatingView to go back; thus, go to the container\r\n            this._setNextNodeModelFactory(id);\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    _getCommonContainerId: function () {\r\n      var id;\r\n      if (this.containerCollection) {\r\n        if (this.containerCollection.node) {\r\n          // there is no originatingView to go back; thus, go to the container\r\n          id = this.containerCollection.node.get('id');\r\n        } else if (this.containerCollection.models.length > 0) {\r\n          // if you have a list of models and they have the same parent id then select the\r\n          // parent id that is common to all.\r\n          id = this.containerCollection.models[0].get('parent_id');\r\n          this.containerCollection.models.some(function (model) {\r\n            if (model.get('parent_id') !== id) {\r\n              id = undefined;\r\n              return true;\r\n            }\r\n          });\r\n        }\r\n      }\r\n      return id;\r\n    },\r\n\r\n    _setNextNodeModelFactory: function (id) {\r\n      if (this.context && id !== undefined) {\r\n        var nextNode = this.context.getModel(NextNodeModelFactory);\r\n        if (nextNode) {\r\n          if (nextNode.get('id') === id) {\r\n            // when id is same as nextNode's id, nextNode.set(id) event is not triggered\r\n            nextNode.unset('id', {silent: true});\r\n          }\r\n          nextNode.set('id', id);\r\n        }\r\n      }\r\n    },\r\n\r\n    _subscribeToMetadataViewEvents: function (model) {\r\n      this.listenTo(this.mdv, 'metadata:close', _.bind(function () {\r\n        this._closeMetadata();\r\n      }, this));\r\n      this.listenTo(this.mdv, 'metadata:close:without:animation', _.bind(function () {\r\n        this.trigger('metadata:close:without:animation', {sender: this});\r\n      }, this));\r\n      this.listenTo(this.mdv, 'item:name:changed', _.bind(this.onItemNameChanged, this));\r\n      this.listenTo(model, 'before:delete before:move', this._currentIndex);\r\n      this.listenTo(model, 'delete', this._onItemDeleted);\r\n      this.listenTo(model, 'move', this._onItemMoved);\r\n    },\r\n\r\n    _addUrlParametersSupport: function (context) {\r\n      var viewStateModel = context && context.viewStateModel;\r\n      viewStateModel && viewStateModel.addUrlParameters(['dropdown'], context);\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataNavigationView.prototype, LayoutViewEventsPropagationMixin);\r\n  _.extend(MetadataNavigationView.prototype, MetadataViewStateMixin);\r\n\r\n  return MetadataNavigationView;\r\n});\r\n\n","csui.define('csui/widgets/metadata.navigation/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata.navigation/impl/nls/root/lang',{\r\n\r\n  FetchNodeFailTitle: 'Error',\r\n  FetchNodeFailMessage: 'Failed to fetch node \"{0}\". \\n\\n{1}',\r\n  MetadataNavWrapperAria: 'Metadata with navigation'\r\n\r\n\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata.navigation/impl/metadata.navigation',[],function(){});\n","csui.define('csui/widgets/metadata.navigation/metadata.navigation.view',['module','csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/utils/base', 'csui/controls/progressblocker/blocker', 'csui/utils/contexts/factories/node',\r\n  'csui/utils/contexts/factories/children', 'csui/utils/contexts/factories/children2',\r\n  'csui/widgets/nodestable/nodestable.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view',\r\n  'csui/utils/contexts/factories/largefilesettings.factory',\r\n  'csui/dialogs/modal.alert/modal.alert',\r\n  'csui/utils/contexts/factories/metadata.factory',\r\n  'csui/utils/contexts/perspective/plugins/node/node.extra.data',\r\n  'csui/behaviors/default.action/impl/defaultaction',\r\n  'i18n!csui/widgets/metadata.navigation/impl/nls/lang',\r\n  'css!csui/widgets/metadata.navigation/impl/metadata.navigation'\r\n], function (module, _, $, Backbone, Marionette, base, BlockingView, NodeModelFactory,\r\n    ChildrenCollectionFactory, Children2CollectionFactory, NodesTableView,\r\n    ViewEventsPropagationMixin, MetadataNavigationViewImpl, LargeFileSettingsFactory,\r\n    ModalAlert, MetadataModelFactory, nodeExtraData, DefaultActionController, lang) {\r\n  'use strict';\r\n\r\n  var config = module.config();\r\n  // TODO: remove this code when v1 and v2 browse call is finalized\r\n  if (NodesTableView.useV2RestApi) {\r\n    ChildrenCollectionFactory = Children2CollectionFactory;\r\n  }\r\n\r\n  //\r\n  // Public: Metadata Navigation View\r\n  // Description: view consists of the navigation list panel on the left and metadata view panel.\r\n  //\r\n  var MetadataNavigationView = Marionette.ItemView.extend({\r\n\r\n    className: 'cs-metadata-navigation-wrapper',\r\n\r\n    template: false,\r\n\r\n    constructor: function MetadataNavigationView(options) {\r\n      options = _.defaults(options, config);\r\n      options.data || (options.data = {});\r\n      options.showCloseIcon = false;\r\n      this.options = options;\r\n\r\n      // Once PropertiesView is opened, 'originatingView' becomes metadataView or\r\n      // MetadataNavigationView.\r\n      // If  properties view page does not have navigationlist (eg for folders and wikipage) then\r\n      // originating view becomes 'MetadataView' based on supportOriginatingView\r\n      if (!!this.options.originatingView && !!this.options.originatingView.supportOriginatingView) {\r\n        this.options.baseOriginatingView = this.options.originatingView;\r\n        this.options.originatingView = this;\r\n      }\r\n      this.context = this.options.context;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n      this.largeFileSettingsFactory = this.context.getFactory(LargeFileSettingsFactory);\r\n      this.options.largeFileSettingsModel = this.largeFileSettingsFactory && this.largeFileSettingsFactory.property;\r\n      // When this view is used alone on a perspective, if should offer\r\n      // spinning sun to commands executed with it as originating view\r\n      BlockingView.imbue(this);\r\n    },\r\n\r\n    onRender: function () {\r\n      // don't render until the complete data have been fetched\r\n      var fetching = this._ensureCompleteData();\r\n      if (fetching) {\r\n        return fetching.done(_.bind(this.render, this));\r\n      }\r\n      this.metadataNavigationView && this.metadataNavigationView.destroy();\r\n      var mnv = this.metadataNavigationView = new MetadataNavigationViewImpl(this.options);\r\n      this.propagateEventsToViews(this.metadataNavigationView);\r\n\r\n      this.metadataNavigationView.render();\r\n      Marionette.triggerMethodOn(mnv, 'before:show', mnv, this);\r\n      this.$el.append(mnv.el);\r\n      this.$el.attr({'role': 'region', 'aria-label': lang.MetadataNavWrapperAria});\r\n      Marionette.triggerMethodOn(mnv, 'show', mnv, this);\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      if (this.metadataNavigationView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataNavigationView);\r\n        this.metadataNavigationView.destroy();\r\n      }\r\n    },\r\n\r\n    _modelIdChanged: function () {\r\n      //if the model on which properties are selected is from the different collection\r\n      //displayed in metadataNavigationView then rerender view with other collection.\r\n      var metadataModel = this.options.context.getModel(MetadataModelFactory),\r\n          metadataInfo  = metadataModel.get('metadata_info');\r\n      if(metadataInfo && (this.contextCollection !==  metadataInfo.collection)){\r\n        this.deleteData();\r\n        this.render();\r\n      }\r\n    },\r\n\r\n    deleteData: function (){\r\n      delete this.options.selected;\r\n      delete this.options.collection;\r\n      delete this.options.containerCollection;\r\n    },\r\n\r\n    _ensureCompleteData: function () {\r\n      var options = this.options;\r\n      if (options.model && options.collection && options.containerCollection) {\r\n        return;  // return nothing (undefined) for synchronous code flow in onRender\r\n      }\r\n\r\n      // Data is not yet available, load the data and return a fetching promise..\r\n      return this._loadingDataByMetadata();\r\n    },\r\n\r\n    _loadingDataByMetadata: function () {\r\n      var self = this;\r\n      var deferred;\r\n      var options = this.options;\r\n      if (!options.model || (!options.collection && !options.containerCollection)) {\r\n        deferred = $.Deferred();\r\n      }\r\n\r\n      function loadCollectionAfterModel() {\r\n        self._loadCollection()\r\n            .always(function () {\r\n              self.unblockActions();\r\n            })\r\n            .done(function (response) {\r\n              deferred && deferred.resolve(response);\r\n            })\r\n            .fail(function (error) {\r\n              deferred && deferred.reject(error);\r\n            });\r\n      }\r\n\r\n      // Load the model if it is not passed in via the options\r\n      if (!options.model) {\r\n        var nodeId = options.data.id && {id: options.data.id};\r\n        if (!nodeId) {\r\n          var metadataModel = options.context.getModel(MetadataModelFactory);\r\n          if (metadataModel) {\r\n            nodeId = metadataModel.get('metadata_info').id;\r\n          }\r\n        }\r\n        var defaultActionController = new DefaultActionController();\r\n        options.model = options.context.getModel(NodeModelFactory, {\r\n          attributes: nodeId && {id: nodeId},\r\n          temporary: true,\r\n          options: {\r\n            defaultActionCommands: defaultActionController.actionItems.getAllCommandSignatures(\r\n              defaultActionController.commands),\r\n            delayRestCommands: false\r\n          }\r\n        });\r\n        //options.model.commands = ['properties'];\r\n        options.selected = options.model;\r\n        self.blockActions();\r\n        loadCollectionAfterModel();\r\n      } else if (!options.collection || !options.containerCollection) {\r\n        options.selected = options.model;\r\n        self.blockActions();\r\n        loadCollectionAfterModel();\r\n      }\r\n\r\n      return deferred && deferred.promise();\r\n    },\r\n\r\n    _loadCollection: function () {\r\n      var self = this;\r\n      var deferred = $.Deferred();\r\n      var options = this.options;\r\n      var collection = options.collection || options.containerCollection;\r\n\r\n      function ensureModelInCollection() {\r\n        // if the model is not in the collection, insert it at the beginning\r\n        if (!collection.findWhere({id: options.model.get('id')})) {\r\n          collection.add(options.model, {at: 0, silent: true});\r\n        }\r\n      }\r\n\r\n      function updateMetadataInfo(collection) {\r\n        var metadataModel = options.context.getModel(MetadataModelFactory);\r\n        if (metadataModel) {\r\n          var metadataInfo = metadataModel.get('metadata_info');\r\n          metadataInfo.collection = collection;\r\n        }\r\n      }\r\n\r\n      function setCollectionToOptions() {\r\n        options.collection || (options.collection = collection);\r\n        options.containerCollection || (options.containerCollection = collection);\r\n      }\r\n\r\n      if (!collection) {\r\n        // Check to see if the collection is already available on Context MetadataInfo\r\n        var metadataModel = options.context.getModel(MetadataModelFactory);\r\n        if (metadataModel) {\r\n          var metadataInfo = metadataModel.get('metadata_info');\r\n          this.contextCollection = metadataInfo && metadataInfo.collection;\r\n          if (this.contextCollection && this.contextCollection.length > 0) {\r\n            collection = this.contextCollection.clone();\r\n            ensureModelInCollection();\r\n            updateMetadataInfo(collection);\r\n            setCollectionToOptions();\r\n            delete options.context.viewStateModel.get('state').collection;\r\n            return deferred.resolve().promise();\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!collection) {\r\n        options.model.ensureFetched()\r\n            .done(function (response) {\r\n              // If the parent_id is -1 then the metadata navigation is displaying the favorites collection\r\n              // or some thing like that. When the page gets refreshed with (i.e. hitting f5) we don't know\r\n              // what type of collection existed before.\r\n              if (options.model.get('parent_id') === -1) {\r\n                collection = new Backbone.Collection();\r\n                ensureModelInCollection();\r\n                updateMetadataInfo(collection);\r\n                setCollectionToOptions();\r\n                deferred.resolve();\r\n                return;\r\n              }\r\n              var defaultActionController = new DefaultActionController();\r\n\r\n              options.container = options.context.getModel(NodeModelFactory,\r\n                {attributes: {id:options.model.get('parent_id')},\r\n                temporary: true,\r\n                options: {\r\n                  defaultActionCommands: defaultActionController.actionItems.getAllCommandSignatures(\r\n                      defaultActionController.commands),\r\n                  delayRestCommands: true\r\n                }\r\n              });\r\n\r\n              options.container.ensureFetched()\r\n                  .done(function (response) {\r\n                    collection = options.context.getCollection(\r\n                        ChildrenCollectionFactory, {\r\n                          options: {\r\n                            node: options.container,\r\n                            defaultActionCommands: defaultActionController.actionItems.getAllCommandSignatures(\r\n                              defaultActionController.commands),\r\n                            delayRestCommands:true\r\n                          }\r\n                        });\r\n                    collection.setFields && collection.setFields(nodeExtraData.getModelFields());\r\n                    collection.setExpand && collection.setExpand(nodeExtraData.getModelExpand());\r\n                    collection.ensureFetched()\r\n                        .done(function (response2) {\r\n                          ensureModelInCollection();\r\n                          updateMetadataInfo(collection);\r\n                          setCollectionToOptions();\r\n                          deferred.resolve(response2);\r\n                        })\r\n                        .fail(function (error2) {\r\n                          self._showFetchNodeFailMessage(error2, options.container.get(\"id\"));\r\n                          deferred.reject(error2);\r\n                        });\r\n                  })\r\n                  .fail(function (error) {\r\n                    self._showFetchNodeFailMessage(error, options.container.get(\"id\"));\r\n                    deferred.reject(error);\r\n                  });\r\n            })\r\n            .fail(function (error) {\r\n              self.unblockActions();\r\n              self._showFetchNodeFailMessage(error, options.model.get(\"id\"));\r\n              deferred && deferred.reject(error);\r\n            });\r\n\r\n        return deferred.promise();\r\n      }\r\n\r\n      return deferred.resolve().promise();\r\n    },\r\n\r\n    _showFetchNodeFailMessage: function (error, nodeId) {\r\n      var errorObj = new base.Error(error);\r\n      var title = lang.FetchNodeFailTitle;\r\n      var message = _.str.sformat(lang.FetchNodeFailMessage, nodeId, errorObj.message);\r\n      ModalAlert.showError(message, title);\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataNavigationView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataNavigationView;\r\n\r\n});\r\n\n","/**\r\n * Controller for saving a search query\r\n */\r\ncsui.define('csui/widgets/metadata/metadata.save.query.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\",\r\n\t\"csui/models/nodes\", \"csui/models/node/node.model\",\r\n\t\"csui/widgets/metadata/impl/metadata.utils\", 'csui/utils/commands/add.item.metadata', 'i18n!csui/utils/commands/nls/localized.strings'\r\n], function (_, $, Backbone, NodeCollection, NodeModel, MetadataUtils, AddItemMetadataCommand, lang) {\r\n\t'use strict';\r\n\r\n\tfunction MetadataSaveQueryController() {\r\n\t}\r\n\r\n\t_.extend(MetadataSaveQueryController.prototype, Backbone.Events, {\r\n\r\n\t\t_checkForRequiredMetadata: function (model, status) {\r\n\t\t\tvar context = status.context,\r\n\t\t\t\tcontainderId = model.get('parent_id'),\r\n\t\t\t\tdeferredObject = $.Deferred(),\r\n\t\t\t\tutilOptions = {\r\n\t\t\t\t\tname: model.get('name'),\r\n\t\t\t\t\tdocParentId: model.get('parent_id'),\r\n\t\t\t\t\taddableType: model.get('type'),\r\n\t\t\t\t\taction: 'create',\r\n\t\t\t\t\tcontainer: new NodeModel({ id: containderId },\r\n\t\t\t\t\t\t{ connector: status.connector })\r\n\t\t\t\t};\r\n\r\n\t\t\tvar metadataUtils = new MetadataUtils();\r\n\t\t\tmetadataUtils.ContainerHasEnforcedEmptyRequiredMetadata(utilOptions)\r\n\t\t\t\t.done(_.bind(function (resp) {\r\n\t\t\t\t\tif (resp.hasRequiredMetadata === true) {\r\n\t\t\t\t\t\tvar nodes = new NodeCollection();\r\n\t\t\t\t\t\tnodes.push(model);\r\n\r\n\t\t\t\t\t\tvar addItemStatus = {\r\n\t\t\t\t\t\t\tnodes: nodes,\r\n\t\t\t\t\t\t\tcontainer: new NodeModel({ id: containderId },\r\n\t\t\t\t\t\t\t\t{ connector: status.connector })\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\toptions = {\r\n\t\t\t\t\t\t\t\tcontext: context,\r\n\t\t\t\t\t\t\t\taddableType: model.get('type'),\r\n\t\t\t\t\t\t\t\tcallerProcessData: true,\r\n\t\t\t\t\t\t\t\taddButtonTitle: lang.saveButtonLabel,\r\n\t\t\t\t\t\t\t\tdialogTitle: lang.DialogTitleSaveQuery\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tvar addItemMetadataCmd = new AddItemMetadataCommand();\r\n\t\t\t\t\t\taddItemMetadataCmd.execute(addItemStatus, options)\r\n\t\t\t\t\t\t\t.then(function (resp) {\r\n\t\t\t\t\t\t\t\tdeferredObject.resolve(resp);\r\n\t\t\t\t\t\t\t}).fail(function (err) {\r\n\t\t\t\t\t\t\t\tdeferredObject.reject();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdeferredObject.resolve();\r\n\t\t\t\t\t}\r\n\t\t\t\t})).fail(function () {\r\n\t\t\t\t\tdeferredObject.reject();\r\n\t\t\t\t});\r\n\t\t\treturn deferredObject.promise();\r\n\t\t},\r\n\r\n\t});\r\n\r\n\tMetadataSaveQueryController.prototype.get = Backbone.Model.prototype.get;\r\n\t_.extend(MetadataSaveQueryController, { version: \"1.0\" });\r\n\r\n\treturn MetadataSaveQueryController;\r\n\r\n});\r\n\n","\ncsui.define('json!csui/widgets/metadata/metadata.manifest.json',{\r\n  \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n  \"title\": \"{{widgetTitle}}\",\r\n  \"description\": \"{{widgetDescription}}\",\r\n  \"kind\": \"fullpage\",\r\n  \"schema\": {\r\n    \"type\": \"object\",\r\n    \"properties\": {\r\n      \"id\": {\r\n        \"title\": \"{{idTitle}}\",\r\n        \"description\": \"{{idDescription}}\",\r\n        \"type\": \"integer\"\r\n      },\r\n      \"initialPanel\": {\r\n        \"title\": \"{{initialPanelTitle}}\",\r\n        \"description\": \"{{initialPanelDescription}}\",\r\n        \"type\": \"string\"\r\n      }\r\n    },\r\n    \"required\": [\"id\"]\r\n  },\r\n  \"options\": {\r\n    \"fields\": {\r\n      \"id\": {\r\n        \"type\": \"otcs_node_picker\",\r\n        \"type_control\": {\r\n          \"parameters\": {\r\n            \"select_types\": []\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"actions\": [\r\n    {\r\n      \"toolItems\": \"csui/widgets/metadata/header.dropdown.menu.items\",\r\n      \"toolItemMasks\": \"csui/widgets/metadata/header.dropdown.menu.items.mask\",\r\n      \"toolbars\": [\r\n        {\r\n          \"id\": \"dropdownMenuList\",\r\n          \"title\": \"{{dropdownMenuTitle}}\",\r\n          \"description\": \"{{dropdownMenuDescription}}\"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      \"toolItems\": \"csui/widgets/metadata/add.properties.menuitems\",\r\n      \"toolItemMasks\": \"csui/widgets/metadata/add.properties.menuitems.mask\",\r\n      \"toolbars\": [\r\n        {\r\n          \"id\": \"addPropertiesToolbar\",\r\n          \"title\": \"{{addPropertiesTitle}}\",\r\n          \"description\": \"{{addPropertiesDescription}}\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n);\n\n","\ncsui.define('json!csui/widgets/metadata.navigation/metadata.navigation.manifest.json',{\r\n  \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n  \"title\": \"{{widgetTitle}}\",\r\n  \"description\": \"{{widgetDescription}}\",\r\n  \"kind\": \"fullpage\",\r\n  \"schema\": {\r\n    \"type\": \"object\",\r\n    \"properties\": {\r\n      \"id\": {\r\n        \"title\": \"{{idTitle}}\",\r\n        \"description\": \"{{idDescription}}\",\r\n        \"type\": \"integer\"\r\n      },\r\n      \"initialPanel\": {\r\n        \"title\": \"{{initialPanelTitle}}\",\r\n        \"description\": \"{{initialPanelDescription}}\",\r\n        \"type\": \"string\"\r\n      }\r\n    },\r\n    \"required\": [\"id\"]\r\n  },\r\n  \"options\": {\r\n    \"fields\": {\r\n      \"id\": {\r\n        \"type\": \"otcs_node_picker\",\r\n        \"type_control\": {\r\n          \"parameters\": {\r\n            \"select_types\": []\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n);\n\n","csui.define('csui/widgets/metadata/impl/nls/metadata.manifest',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/nls/root/metadata.manifest',{\r\n  \"widgetTitle\": \"Object Information\",\r\n  \"widgetDescription\": \"Shows information about an object and offers the most important actions for it.\",\r\n  \"idTitle\": \"Object\",\r\n  \"idDescription\": \"An object to show the information for\",\r\n  \"initialPanelTitle\": \"Object information\",\r\n  \"initialPanelDescription\": \"An object to show the information for\",\r\n  \"dropdownMenuTitle\": \"Object Context Menu\",\r\n  \"dropdownMenuDescription\": \"Context menu, which is displayed when clicking on the arrow on the right side of the name of the opened object.\",\r\n  \"addPropertiesTitle\": \"Add Feature Menu\",\r\n  \"addPropertiesDescription\": \"Drop-down menu, which is displayed when clicking on the plus on the right side of the property tabs.\"\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata.navigation/impl/nls/root/metadata.navigation.manifest',{\r\n  \"widgetTitle\": \"Object Information\",\r\n  \"widgetDescription\": \"Shows information about an object and offers the most important actions for it.\",\r\n  \"idTitle\": \"Object\",\r\n  \"idDescription\": \"An object to show the information for\",\r\n  \"initialPanelTitle\": \"Object information\",\r\n  \"initialPanelDescription\": \"An object to show the information for\"\r\n});\r\n\n","\n","csui.define('bundles/csui-metadata',[\r\n  // Controls\r\n  'csui/controls/tableheader/comment/comment.button.view',\r\n  'csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/widgets/metadata/impl/metadata.tabcontentcollection.view',\r\n  'csui/widgets/metadata/impl/header/rightbar/toolbaritems',\r\n  'csui/widgets/metadata/impl/header/rightbar/toolbaritems.masks',  \r\n  'csui/utils/versions.default.action.items',\r\n\r\n  // Application widgets\r\n  'csui/widgets/metadata/metadata.view',\r\n  'csui/widgets/metadata/metadata.properties.view',\r\n  'csui/widgets/metadata/metadata.action.one.item.properties.view',\r\n  'csui/widgets/metadata/metadata.add.categories.controller',\r\n  'csui/widgets/metadata/metadata.add.document.controller',\r\n  'csui/widgets/metadata/impl/add.items/metadata.add.item.controller',\r\n  'csui/widgets/metadata/metadata.add.item.controller',\r\n  'csui/widgets/metadata/metadata.copy.move.items.controller',\r\n  'csui/widgets/metadata/property.panels/general/metadata.general.property.controller',\r\n  'csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view',\r\n  'csui/widgets/metadata.navigation/metadata.navigation.view',\r\n  'csui/widgets/metadata/impl/add.items/metadata.add.multiple.items.controller',\r\n  'csui/widgets/metadata/impl/header/item.name/metadata.item.name.view',\r\n  'csui/widgets/metadata/metadata.save.query.controller',\r\n\r\n  // Application widgets manifests\r\n  'json!csui/widgets/metadata/metadata.manifest.json',\r\n  'json!csui/widgets/metadata.navigation/metadata.navigation.manifest.json',\r\n  'i18n!csui/widgets/metadata/impl/nls/metadata.manifest',\r\n  'i18n!csui/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest',\r\n\r\n  // Tool items and tool item masks\r\n  'csui/widgets/metadata/add.properties.menuitems',\r\n  'csui/widgets/metadata/add.properties.menuitems.mask',\r\n  'csui/widgets/metadata/header.dropdown.menu.items',\r\n  'csui/widgets/metadata/header.dropdown.menu.items.mask',\r\n  'csui/widgets/metadata/versions.toolbaritems.mask',\r\n\r\n  // Metadata general action fields\r\n  'csui/widgets/metadata/metadata.general.action.fields',\r\n  'csui/widgets/metadata/metadata.versions.view',\r\n  'csui/widgets/metadata/metadata.audit.view'\r\n\r\n], {});\r\n\r\ncsui.require(['require', 'css'], function (require, css) {\r\n\r\n  css.styleLoad(require, 'csui/bundles/csui-metadata', true);\r\n\r\n});\r\n\n"]}