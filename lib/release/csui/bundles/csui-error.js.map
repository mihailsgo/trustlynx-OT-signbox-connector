{"version":3,"sources":["../../src/utils/contexts/factories/application.scope.factory.js","../../src/utils/contexts/factories/global.error.js","../../src/behaviors/keyboard.navigation/tabables.behavior.js","../../src/behaviors/keyboard.navigation/tabable.region.behavior.js","../../src/widgets/error.global/impl/error.global!hbs","../../src/widgets/error.global/impl/nls/lang.js","../../src/widgets/error.global/impl/nls/root/lang.js","../../src/widgets/error.global/impl/error.global!css","../../src/widgets/error.global/error.global.view.js","../../src/utils/non-attaching.region/non-attaching.region.js","../../src/pages/error.page/impl/error.page!css","../../src/pages/error.page/error.page.view.js","csui-error.js"],"names":["csui","define","module","_","Backbone","ModelFactory","ApplicationScopeModel","Model","extend","propertyPrefix","constructor","context","options","prototype","apply","this","arguments","applicationScope","config","models","property","GlobalError","defaults","message","details","globalError","attributes","permanent","$","Marionette","log","base","getOption","source","value","isFunction","call","view","id","TabablesBehavior","Behavior","self","_pushTabableHandler","tabableRegions","mustSortTabableRegions","listenTo","_registerEventHandlers","_popTabableHandler","setFocusInActiveTabableRegion","setTimeout","$el","on","event","keyCode","_maintainTabFocus","_setFocusToNextRegion","switchViewDialog","registerTabableRegion","tabableRegion","contains","el","unregisterTabableRegionBehavior","push","debug","name","console","last","reject","trb","tabablesHandlers","length","topTabablesHandler","each","_unregisterEventHandlers","_clearTabIndexes","tabableHandlerToPop","off","stopListening","pop","topTabableHandler","setInitialTabIndex","_setFocusInActiveTabableRegion","_sortTabableRegions","sortedTabableRegions","find","index","_getNextActiveRegion","shiftTab","recursiveNavigate","i","regions","filter","region","hasClass","lastIndex","activeIndex","_getActiveIndex","elToFocus","getCurrentlyFocusedElementFromView","isTabable","isVisibleInWindowViewport","currentlyActiveTabableRegion","currentlyActive","cid","_deactivateCurrentActiveTabableRegion","activeIdx","undefined","activeView","removeClass","accDeactivateTabableRegion","ignoreFocusEvents","_setTabableRegionActive","addClass","accActivateTabableRegion","document","body","setFocus","preferredRegion","tabableRegionsByWeight","sortBy","initialActivationWeight","reverse","some","notSetFocus","activeElement","tagName","focusables","focusablesSelector","addBack","prop","shiftKey","activeRegion","onLastTabElement","nextActiveRegion","clearTabIndexes","tabablesBehavior","setTabableRegionActive","unregisterTabableRegion","popTabableHandler","tabablesBehaviorRemove","TabableRegionBehavior","tabableRegionBehavior","_eventsRegistered","_applyClasses","isRegistered","moveTabIndex","currentlyFocusedElement","focusEl","isString","focus","accessibilityActiveElementClass","e","warn","newlyFocusedElement","accessibilityRegionClass","accessibilityActiveRegionClass","accessibilityFocusableClass","hbs","Handlebars","t","template","1","container","depth0","helpers","partials","data","helper","lookupProperty","parent","propertyName","Object","hasOwnProperty","escapeExpression","hooks","helperMissing","nullContext","hash","loc","start","line","column","end","3","5","stack1","fn","program","inverse","noop","6","8","9","compiler","main","registerPartial","root","en-us","en","errorMessage","backText","backTooltip","homeText","homeTooltip","closeText","closeTooltip","globalErrorRegionAria","GlobalErrorModelFactory","ApplicationScopeModelFactory","lang","ItemView","className","templateHelpers","msgId","uniqueId","regionAria","noHistory","TabableRegion","behaviorClass","ui","closebutton","events","keydown","click .go-home-button","click .go-home-text","click .go-back-button","click .go-back-text","click @ui.closebutton","model","getModel","viewStateModel","getHistory","isIE11","resizeHandler","render","window","once","onKeyInView","preventDefault","stopPropagation","target","trigger","onClickHome","start_id","get","CONSTANTS","START_ID","set","onClickBack","history","back","onClickClose","destroy","Region","attachHtml","PageContext","GlobalErrorView","Url","NonAttachingRegion","_onChangeId","globalErrorView","onRender","empty","append","bind","show","location","href","combine","pathname","getCgiScript","require","css","styleLoad"],"mappings":"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","file":"csui-error.js","sourcesContent":["csui.define('csui/utils/contexts/factories/application.scope.factory',['module', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/utils/contexts/factories/factory'\r\n], function (module, _, Backbone, ModelFactory) {\r\n\r\n  var ApplicationScopeModel = Backbone.Model.extend({});\r\n\r\n  var ApplicationScopeModelFactory = ModelFactory.extend({\r\n\r\n    propertyPrefix: 'applicationScope',\r\n\r\n    constructor: function ApplicationScopeModelFactory(context, options) {\r\n      ModelFactory.prototype.constructor.apply(this, arguments);\r\n\r\n      var applicationScope = this.options.applicationScope || {};\r\n      if (!(applicationScope instanceof Backbone.Model)) {\r\n        var config = module.config();\r\n        applicationScope = new ApplicationScopeModel(applicationScope.models, _.extend({},\r\n            applicationScope.options, config.options));\r\n      }\r\n      this.property = applicationScope;\r\n    }\r\n\r\n  });\r\n\r\n  return ApplicationScopeModelFactory;\r\n\r\n});\r\n\n","csui.define('csui/utils/contexts/factories/global.error',[\r\n  'module', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/utils/contexts/factories/factory'\r\n], function (module, _, Backbone, ModelFactory) {\r\n  'use strict';\r\n\r\n  var GlobalError = Backbone.Model.extend({\r\n    defaults: {\r\n      message: null,\r\n      details: null\r\n    }\r\n  });\r\n\r\n  var GlobalErrorFactory = ModelFactory.extend({\r\n    propertyPrefix: 'globalError',\r\n\r\n    constructor: function GlobalErrorModelFactory(context, options) {\r\n      ModelFactory.prototype.constructor.apply(this, arguments);\r\n\r\n      var globalError = this.options.globalError || {};\r\n      if (!(globalError instanceof Backbone.Model)) {\r\n        var config = module.config();\r\n        globalError = new GlobalError(globalError.attributes, _.extend({},\r\n            globalError.options, config.options));\r\n        // The default global error model should be permanent to\r\n        // survive a perspective switch to the error perspective.\r\n        this.options.permanent = true;\r\n      }\r\n      this.property = globalError;\r\n    }\r\n  });\r\n\r\n  return GlobalErrorFactory;\r\n});\r\n\n","csui.define('csui/behaviors/keyboard.navigation/tabables.behavior',['module', 'csui/lib/underscore', 'csui/lib/jquery',\r\n  'csui/lib/marionette', 'csui/utils/log', 'csui/utils/base'\r\n], function (module, _, $, Marionette, log, base) {\r\n  'use strict';\r\n\r\n  log = log(module.id);\r\n\r\n  // Default static options for the behaviour object\r\n  var config = module.config();\r\n\r\n  var accessibilityRegionClass = 'csui-acc-tab-region';\r\n  var accessibilityActiveRegionClass = 'csui-acc-tab-region-active';\r\n\r\n  // FIXME: deprecated - Remove this behavior class.\r\n  // FIXME: deprecated - Remove this behavior class.\r\n  // FIXME: deprecated - Remove this behavior class.\r\n\r\n  // This behavior implements a controller for one or more views with the tabable.region.behavior\r\n  // applied.\r\n  var TabablesBehavior = Marionette.Behavior.extend({\r\n\r\n        constructor: function TabablesBehavior(options, view) {\r\n          Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n\r\n          var self = this;\r\n\r\n          this.view = view;\r\n          this._pushTabableHandler();\r\n\r\n          this.tabableRegions = [];\r\n          this.mustSortTabableRegions = false;\r\n\r\n          // Backbone/Marionette events (are removed in destroy)\r\n          this.listenTo(view, 'render', this._registerEventHandlers);\r\n          this.listenTo(view, 'destroy', this._popTabableHandler);\r\n          this.listenTo(view, 'dom:refresh', this.setFocusInActiveTabableRegion);\r\n\r\n          //In order to prevent tab from going outside a contained area (i.e. dialog),\r\n          //keydown is monitored on the behavioral view. The event listener will only prevent\r\n          //tab outside the behavior view if parameter \"containTabFocus' is set to true.\r\n          // LPAD-54770, Make sure that keydown event is registered only once after view creation\r\n          setTimeout(function () {\r\n            view.$el.on('keydown.csui-tabables', function (event) {\r\n              if (event.keyCode === 9 && getOption.call(self, 'containTabFocus')) {\r\n                return self._maintainTabFocus(event);\r\n              }\r\n            });\r\n          });\r\n\r\n          //Used for cases where focus should be removed from the active behavior region\r\n          //and placed in the text focusable region. For example when 'escape' is used to\r\n          //to move focus outside of a textbox area to the next tabable region.\r\n          this.listenTo(view, 'changed:focus', this._setFocusToNextRegion);\r\n          this.listenTo(view, 'switch:view', function () {\r\n            TabablesBehavior.switchViewDialog();\r\n          });\r\n        }, // constructor\r\n\r\n        registerTabableRegion: function (tabableRegion) {\r\n          if ($.contains(this.view.el, tabableRegion.view.el)) {\r\n            this.unregisterTabableRegionBehavior(tabableRegion);\r\n            this.tabableRegions.push(tabableRegion);\r\n            this.mustSortTabableRegions = true;\r\n            return true;\r\n          } else {\r\n            log.debug('registerTabableRegion: not registering non descendant view ' +\r\n                      tabableRegion.view.constructor.name) &&\r\n            console.log(log.last);\r\n            return false;\r\n          }\r\n        },\r\n\r\n        unregisterTabableRegionBehavior: function (tabableRegion) {\r\n          if (tabableRegion) {\r\n            if (_.contains(this.tabableRegions, tabableRegion)) {\r\n              // remove that tabableRegionBehavior from the tabableRegions array\r\n              log.debug('unregisterTabableRegion for view' + tabableRegion.view.constructor.name) &&\r\n              console.log(log.last);\r\n\r\n              this.tabableRegions = _.reject(this.tabableRegions,\r\n                  function (trb) { return trb === tabableRegion; });\r\n\r\n              // log.debug(\"Unsorted tabable regions:\") && console.log(log.last);\r\n              // _.each(this.tabableRegions, function (tabableRegionBehavior) {\r\n              //   log.debug(\" \" + tabableRegionBehavior.view.constructor.name) &&\r\n              //   console.log(log.last);\r\n              // });\r\n\r\n            }\r\n          }\r\n        },\r\n\r\n        _pushTabableHandler: function () {\r\n          log.debug('_pushTabableHandler in view ' + this.view.constructor.name) &&\r\n          console.log(log.last);\r\n          if (TabablesBehavior.tabablesHandlers.length > 0) {\r\n            var topTabablesHandler = _.last(TabablesBehavior.tabablesHandlers);\r\n\r\n            /*\r\n                        var activeIdx = this._getActiveIndex();\r\n                        if (activeIdx !== undefined) {\r\n                          this.activeTabableRegionIndexBeforePush = activeIdx;\r\n                          var activeTabableRegion = this.tabableRegions[activeIdx];\r\n                          this.focusedElementBeforePush = activeTabableRegion.getCurrentlyFocusedElementFromView();\r\n                        } else {\r\n                          delete this.focusedElementBeforePush;\r\n                          delete this.activeTabableRegionIndexBeforePush;\r\n                        }\r\n            */\r\n\r\n            // invalidate all tabindexes in the current tabable regions before adding the new\r\n            // \"layer\" of tabable regions at the top of the stack.\r\n            // This prevents navigating by tab to any of this tabable regions.\r\n            _.each(topTabablesHandler.tabableRegions, function (tabableRegion) {\r\n              tabableRegion._unregisterEventHandlers.call(tabableRegion);\r\n              topTabablesHandler._clearTabIndexes.call(topTabablesHandler, tabableRegion.view);\r\n            }, this);\r\n\r\n          }\r\n          TabablesBehavior.tabablesHandlers.push(this);\r\n\r\n          // log.debug(\"Tabables after Push:\");\r\n          // _.each(TabablesBehavior.tabablesHandlers, function (tabableHandler) {\r\n          //   log.debug(\"    TabablesBehavior of view \" + tabableHandler.view.constructor.name);\r\n          // });\r\n        },\r\n\r\n        _popTabableHandler: function () {\r\n          if (TabablesBehavior.tabablesHandlers.length > 0) {\r\n\r\n            var tabableHandlerToPop = _.last(TabablesBehavior.tabablesHandlers);\r\n\r\n            log.debug('_popTabableHandler in view ' + tabableHandlerToPop.view.constructor.name) &&\r\n            console.log(log.last);\r\n\r\n            _.each(tabableHandlerToPop.tabableRegions, function (tabableRegion) {\r\n              tabableRegion._unregisterEventHandlers.call(tabableRegion);\r\n            });\r\n\r\n            // LPAD-54770. Remove keydown listener\r\n            tabableHandlerToPop.view.$el.off('keydown.csui-tabables');\r\n\r\n            tabableHandlerToPop.stopListening(tabableHandlerToPop.view);\r\n            TabablesBehavior.tabablesHandlers.pop();\r\n\r\n            // after removing the tabables handler from the stack let the tabable regions, that\r\n            // are now on top of the stack re-set its tabindex values to make it keyboard\r\n            // navigable again\r\n            if (TabablesBehavior.tabablesHandlers.length > 0) {\r\n              var topTabableHandler = _.last(TabablesBehavior.tabablesHandlers);\r\n              _.each(topTabableHandler.tabableRegions, function (tabableRegion) {\r\n                tabableRegion.setInitialTabIndex.call(tabableRegion);\r\n                tabableRegion._registerEventHandlers.call(tabableRegion);\r\n              });\r\n\r\n              topTabableHandler._setFocusInActiveTabableRegion();\r\n            }\r\n          }\r\n          // log.debug(\"Tabables after Pop:\") && console.log(log.last);\r\n          // _.each(TabablesBehavior.tabablesHandlers, function (tabableHandler) {\r\n          //   log.debug(\"    TabablesBehavior of view \" + tabableHandler.view.constructor.name) &&\r\n          //   console.log(log.last);\r\n          // });\r\n        },\r\n\r\n        _sortTabableRegions: function () {\r\n          var tabableRegions = this.tabableRegions;\r\n          var sortedTabableRegions = [];\r\n          var tabableRegionElements = this.view.$el.find('.' + accessibilityRegionClass);\r\n          tabableRegionElements.each(function (index, el) {\r\n            var trb = _.find(tabableRegions, function (tabableRegion) {\r\n              return tabableRegion.view.el === el;\r\n            });\r\n            if (trb) {\r\n              sortedTabableRegions.push(trb);\r\n            }\r\n          });\r\n          this.tabableRegions = sortedTabableRegions;\r\n          this.mustSortTabableRegions = false;\r\n\r\n          // log.debug(\"Sorted tabable regions:\") && console.log(log.last);\r\n          // _.each(this.tabableRegions, function (tabableRegion) {\r\n          //   log.debug(\"    \" + tabableRegion.view.constructor.name) && console.log(log.last);\r\n          // });\r\n        },\r\n\r\n        //Get the next tabable region with an accessible focusable element.\r\n        _getNextActiveRegion: function (shiftTab, recursiveNavigate) {\r\n          var regions = this.tabableRegions, i, tabableRegion;\r\n\r\n          // don't select regions for tabable which are hidden.\r\n          regions = _.filter(regions, function (region) {\r\n            return !region.$el.hasClass('binf-hidden');\r\n          });\r\n\r\n          var lastIndex   = regions.length - 1,\r\n              activeIndex = this._getActiveIndex(regions);\r\n\r\n          if (recursiveNavigate) {\r\n            i = shiftTab ? (activeIndex === 0 ? lastIndex : activeIndex - 1) :\r\n                (activeIndex === lastIndex ? 0 : activeIndex + 1);\r\n          } else {\r\n            i = shiftTab ? (activeIndex === 0 ? 0 : activeIndex - 1) :\r\n                (activeIndex === lastIndex ? lastIndex : activeIndex + 1);\r\n          }\r\n\r\n          // return tabableRegion if it has only one tabable element.\r\n          if (regions.length === 1) {\r\n            tabableRegion = regions[0];\r\n            return tabableRegion;\r\n          }\r\n\r\n          while (i != activeIndex) {\r\n            tabableRegion = regions[i];\r\n            var elToFocus = tabableRegion.getCurrentlyFocusedElementFromView(shiftTab);\r\n            if (tabableRegion.view.isTabable() && elToFocus &&\r\n                base.isVisibleInWindowViewport(elToFocus)) {\r\n              // Do not focus elements out of the visible viewport rectangle;\r\n              // it brings them to the visible screen, ignoring the absolute\r\n              // positioning or transforms, if they were applied earlier\r\n              return tabableRegion;\r\n            }\r\n\r\n            if (shiftTab) {\r\n              if (i === 0) {\r\n                i = recursiveNavigate ? lastIndex : activeIndex;\r\n              }\r\n              else if (i > 0) {\r\n                --i;\r\n              }\r\n            }\r\n            else {\r\n              if (i === lastIndex) {\r\n                i = recursiveNavigate ? 0 : activeIndex;\r\n              }\r\n              else if (i < lastIndex) {\r\n                ++i;\r\n              }\r\n            }\r\n          }\r\n        },\r\n        //Due to cases (like the target browser where regions are added and removed throughout a dialog\r\n        //display) where regions may be placed out of order due to views being dynamically added and removed\r\n        //throughout the life cycle of the parent container, sort order is reset on every index request.\r\n        _getActiveIndex: function (regions) {\r\n          if (this.currentlyActiveTabableRegion) {\r\n            this._sortTabableRegions();\r\n            var currentlyActive = this.currentlyActiveTabableRegion,\r\n              tabableRegions  = this.tabableRegions;\r\n            if (!!regions) {\r\n              tabableRegions = regions;\r\n            }\r\n            for (var i = 0; i < tabableRegions.length; i++) {\r\n              if (currentlyActive.view.cid === tabableRegions[i].view.cid) {\r\n                return i;\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        _deactivateCurrentActiveTabableRegion: function () {\r\n          var activeIdx = this._getActiveIndex();\r\n\r\n          if (activeIdx !== undefined && !!this.tabableRegions[activeIdx]) {\r\n            var activeView = this.tabableRegions[activeIdx].view;\r\n            var tabRegionEl = activeView.$el;\r\n\r\n            tabRegionEl.removeClass(accessibilityActiveRegionClass);\r\n            delete this.currentlyActiveTabableRegion;\r\n            if (activeView.accDeactivateTabableRegion) {\r\n              log.debug('deactivating tabable region ' + activeView.constructor.name) &&\r\n              console.log(log.last);\r\n\r\n              this.tabableRegions[activeIdx].ignoreFocusEvents = true;\r\n              activeView.accDeactivateTabableRegion.call(activeView);\r\n              this.tabableRegions[activeIdx].ignoreFocusEvents = false;\r\n            }\r\n          }\r\n          return activeIdx;\r\n        },\r\n\r\n        _setTabableRegionActive: function (tabableRegion, shiftTab) {\r\n          log.debug('activating ' + tabableRegion.view.constructor.name + ' as active tabable' +\r\n                    ' region') && console.log(log.last);\r\n\r\n          this._deactivateCurrentActiveTabableRegion();\r\n          tabableRegion.view.$el.addClass(accessibilityActiveRegionClass);\r\n          this.currentlyActiveTabableRegion = tabableRegion;\r\n          if (tabableRegion.view.accActivateTabableRegion) {\r\n            tabableRegion.ignoreFocusEvents = true;\r\n            tabableRegion.view.accActivateTabableRegion.call(tabableRegion.view, shiftTab);\r\n            tabableRegion.ignoreFocusEvents = false;\r\n          }\r\n        },\r\n\r\n        _setFocusInActiveTabableRegion: function (shiftTab) {\r\n          if (this.currentlyActiveTabableRegion && \r\n                document.body.contains(this.currentlyActiveTabableRegion.el)) {\r\n            // this._setTabableRegionActive(this.currentlyActiveTabableRegion);\r\n            this.currentlyActiveTabableRegion.setFocus(shiftTab);\r\n          } else {\r\n            // try to focus on a preferred region if no one is known as the active region, but\r\n            // don't store it as the currently active one. This must be actively done by a\r\n            // tabable region.\r\n            var tabableRegionsByWeight = _.sortBy(this.tabableRegions, function (tabableRegion) {\r\n              return tabableRegion.view.options.initialActivationWeight;\r\n            });\r\n            //var preferredRegion = _.last(tabableRegionsByWeight);\r\n\r\n            var preferredRegion;\r\n            tabableRegionsByWeight.reverse().some(function(region) {\r\n              if (!region.options.notSetFocus) {\r\n                preferredRegion = region;\r\n                return true;\r\n              }\r\n            });\r\n\r\n            if (preferredRegion && preferredRegion.view.options.initialActivationWeight > 0) {\r\n              log.debug(\"setFocus: \" + preferredRegion.view.constructor.name) && console.log(log.last);\r\n              var didFocus = preferredRegion.setFocus(shiftTab);\r\n\r\n              if (didFocus && document.activeElement) {\r\n                if (document.activeElement.tagName === 'BODY') {\r\n                  log.debug(\"setFocus Failed: \" + preferredRegion.view.constructor.name) && console.log(log.last);\r\n                }\r\n                log.debug(\"document.activeElement: \" + document.activeElement.tagName) && console.log(log.last);\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        _clearTabIndexes: function (view) {\r\n          // log.debug('_clearTabIndexes in view ' + view.constructor.name) && console.log(log.last);\r\n          // find tabable/focusable elements including the view.$el element\r\n          var focusables = view.$el.find(TabablesBehavior.focusablesSelector).addBack(\r\n              TabablesBehavior.focusablesSelector);\r\n          if (focusables.length) {\r\n            // log.debug('set tabindex=-1 on ' + focusables.length + ' elements') && console.log(log.last);\r\n            focusables.prop('tabindex', -1);\r\n          } else {\r\n            log.debug('_clearTabIndexes: no focusables found in ' + view.constructor.name) &&\r\n            console.log(log.last);\r\n          }\r\n        },\r\n\r\n        _maintainTabFocus: function (event) {\r\n          var shiftTab    = event.shiftKey,\r\n              activeIndex = this._getActiveIndex();\r\n          //If an activeIndex is not available it is because regional focus has not\r\n          //been set yet and this is the first tab request.\r\n          if (activeIndex !== undefined) {\r\n            var activeRegion = this.tabableRegions[activeIndex];\r\n            var recursiveNavigate = getOption.call(this, 'recursiveNavigation');\r\n            if (!!activeRegion && activeRegion.onLastTabElement(shiftTab, event)) {\r\n              var nextActiveRegion = this._getNextActiveRegion(shiftTab, false);\r\n              if (!nextActiveRegion) {\r\n                nextActiveRegion = this._getNextActiveRegion(shiftTab, recursiveNavigate);\r\n\r\n              }\r\n              if (nextActiveRegion) {\r\n                this._setTabableRegionActive(nextActiveRegion, shiftTab);\r\n                this._setFocusInActiveTabableRegion(shiftTab);\r\n              }\r\n              return false;\r\n            }\r\n          }\r\n          return true;\r\n        },\r\n\r\n        _setFocusToNextRegion: function setFocusToNextRegion(shiftTab) {\r\n          var recursiveNavigate = getOption.call(this, 'recursiveNavigation');\r\n          var nextActiveRegion = this._getNextActiveRegion(shiftTab, recursiveNavigate);\r\n          if (nextActiveRegion) {\r\n            this._setTabableRegionActive(nextActiveRegion);\r\n            this._setFocusInActiveTabableRegion();\r\n          }\r\n        }\r\n      },\r\n      {\r\n        // array with all TabablesBehavior instances\r\n        tabablesHandlers: [],\r\n\r\n        focusablesSelector: 'a[href], area[href], input, select, textarea, button,' +\r\n                            ' iframe, object, embed, *[tabindex], *[contenteditable]',\r\n\r\n        clearTabIndexes: function (view) {\r\n          var tabablesBehavior = _.last(TabablesBehavior.tabablesHandlers);\r\n          if (tabablesBehavior && $.contains(tabablesBehavior.view.el, view.el)) {\r\n            tabablesBehavior._clearTabIndexes.call(tabablesBehavior, view);\r\n          }\r\n        },\r\n\r\n        setTabableRegionActive: function (tabableRegion) {\r\n          var tabablesBehavior = _.last(TabablesBehavior.tabablesHandlers);\r\n          if (tabablesBehavior && $.contains(tabablesBehavior.view.el, tabableRegion.view.el)) {\r\n            tabablesBehavior._setTabableRegionActive.call(tabablesBehavior, tabableRegion);\r\n          }\r\n        },\r\n\r\n        registerTabableRegion: function (tabableRegion) {\r\n          log.debug('registerTabableRegion for view ' + tabableRegion.view.constructor.name) &&\r\n          console.log(log.last);\r\n\r\n          var tabablesBehavior = _.last(TabablesBehavior.tabablesHandlers);\r\n          if (tabablesBehavior) {\r\n            return tabablesBehavior.registerTabableRegion.call(tabablesBehavior, tabableRegion);\r\n          }\r\n        },\r\n\r\n        unregisterTabableRegion: function (tabableRegion) {\r\n          if (tabableRegion) {\r\n            // make it simple: don't search for the tabables behavior instance. Just remove it\r\n            // from everyone.\r\n            _.each(TabablesBehavior.tabablesHandlers, function (tabablesBehavior) {\r\n              tabablesBehavior.unregisterTabableRegionBehavior.call(tabablesBehavior,\r\n                  tabableRegion);\r\n            });\r\n          }\r\n        },\r\n\r\n        // Activate (set focus) of the region that has the highest weight value in the tabable\r\n        // region behavior options.\r\n        //  This should be called when regions are actually shown in the dom.\r\n        //  If a region is already active, skip initial activation.\r\n\r\n        setFocusInActiveTabableRegion: function activateInitialTabableRegion() {\r\n          var tabablesBehavior = _.last(TabablesBehavior.tabablesHandlers);\r\n          if (tabablesBehavior) {\r\n            tabablesBehavior._setFocusInActiveTabableRegion.call(tabablesBehavior);\r\n          }\r\n        },\r\n\r\n        popTabableHandler: function () {\r\n          var tabablesBehavior = _.last(TabablesBehavior.tabablesHandlers);\r\n          if (tabablesBehavior) {\r\n            tabablesBehavior._popTabableHandler();\r\n          }\r\n        },\r\n        switchViewDialog: function(){\r\n        \r\n\r\n        var self = this;\r\n        var tabablesBehaviorRemove = \r\n        self.tabablesHandlers[TabablesBehavior.tabablesHandlers.length-1];\r\n       \r\n        \r\n        tabablesBehaviorRemove.view.$el.off('keydown.csui-tabables');\r\n\r\n        tabablesBehaviorRemove.stopListening(tabablesBehaviorRemove.view);\r\n\r\n        if(TabablesBehavior.tabablesHandlers.length>1){ // to avoid the removal of parent of dialog\r\n          TabablesBehavior.tabablesHandlers.pop();\r\n        }\r\n\r\n\r\n\r\n          // re-register\r\n          var tabablesBehavior = \r\n          this.tabablesHandlers[this.tabablesHandlers.length-1];\r\n\r\n         tabablesBehavior._setFocusInActiveTabableRegion.call(tabablesBehavior);\r\n          _.each(tabablesBehavior.tabableRegions, function (tabableRegion) {\r\n           \r\n            tabableRegion.setInitialTabIndex.call(tabableRegion);\r\n            tabableRegion._registerEventHandlers.call(tabableRegion);\r\n            setTimeout(function () {\r\n              tabableRegion.view.$el.on('keydown.csui-tabables', function (event) {\r\n                if (event.keyCode === 9 && getOption.call(tabablesBehavior, 'containTabFocus')) {\r\n                  return tabablesBehavior._maintainTabFocus(event);\r\n                }\r\n              });\r\n            });\r\n          });\r\n         \r\n        }\r\n\r\n      });\r\n\r\n  // TODO: Expose this functionality and make it generic for other behaviors\r\n  function getOption(property, source) {\r\n    var options = source || this.options || {};\r\n    var value = options[property];\r\n    return _.isFunction(value) ? options[property].call(this.view) : value;\r\n  }\r\n\r\n  return TabablesBehavior;\r\n});\r\n\n","csui.define('csui/behaviors/keyboard.navigation/tabable.region.behavior',['module', 'csui/lib/underscore', 'csui/lib/jquery',\r\n  'csui/lib/marionette', 'csui/utils/log', 'csui/utils/base',\r\n  'csui/behaviors/keyboard.navigation/tabables.behavior'\r\n], function (module, _, $, Marionette, log, base, TabablesBehavior) {\r\n  'use strict';\r\n\r\n\r\n  // FIXME: deprecated - Remove this behavior class.\r\n  // FIXME: deprecated - Remove this behavior class.\r\n  // FIXME: deprecated - Remove this behavior class.\r\n\r\n  var TabableRegionBehavior = Marionette.Behavior.extend({\r\n\r\n      defaults: {\r\n        initialActivationWeight: 0\r\n      },\r\n\r\n      constructor: function TabableRegionBehavior(options, view) {\r\n        Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n\r\n        this.view = view;\r\n        view.tabableRegionBehavior = this;\r\n\r\n        // merge behavior defaults into view\r\n        _.extend(view, this.defaults);\r\n\r\n        // add default implementation to view if it does not have one\r\n        _.defaults(view, {\r\n            // TODO remove use of isTabable because there is no code that gets called when the user\r\n            // presses the tab key\r\n            isTabable: function () {\r\n              return true;  // default: this view can be reached by tab\r\n            },\r\n            onLastTabElement: function () {\r\n              return true;  //most regions will only have one tab, with further navigation handled through arrow keys\r\n            }\r\n          }\r\n        );\r\n\r\n        if (view.options && !view.options.initialActivationWeight) {\r\n          view.options.initialActivationWeight = this.options.initialActivationWeight;\r\n        }\r\n\r\n        this._registerEventHandlers();\r\n\r\n      },\r\n\r\n      _registerEventHandlers: function () {\r\n        if (!this._eventsRegistered) {\r\n          var view = this.view;\r\n          var self = this;\r\n\r\n          // log.debug('_registerEventHandlers ' + view.constructor.name) && console.log(log.last);\r\n\r\n          this.listenTo(view, 'render', this._applyClasses);\r\n          this.listenTo(view, 'dom:refresh', function () {\r\n            TabablesBehavior.clearTabIndexes(view);\r\n            if (TabablesBehavior.registerTabableRegion(this)) {\r\n              self.isRegistered = true;\r\n              this.setInitialTabIndex();\r\n              TabablesBehavior.setFocusInActiveTabableRegion();\r\n            }\r\n          });\r\n          this.listenTo(view, 'refresh:tabindexes', function () {\r\n            TabablesBehavior.clearTabIndexes(view);\r\n            if (self.isRegistered) {\r\n              this.setInitialTabIndex();\r\n              TabablesBehavior.setFocusInActiveTabableRegion();\r\n            }\r\n          });\r\n\r\n          this.listenTo(view, 'destroy', function () {\r\n            TabablesBehavior.unregisterTabableRegion(this);\r\n            TabablesBehavior.clearTabIndexes(view);\r\n            self.isRegistered = false;\r\n          });\r\n          this.listenTo(view, 'tabable', function () {\r\n            TabablesBehavior.clearTabIndexes(view);\r\n            if (TabablesBehavior.registerTabableRegion(this)) {\r\n              this.setInitialTabIndex();\r\n              TabablesBehavior.setFocusInActiveTabableRegion();\r\n            }\r\n          });\r\n          this.listenTo(view, 'tabable:not', function () {\r\n            TabablesBehavior.unregisterTabableRegion(this);\r\n            TabablesBehavior.clearTabIndexes(view);\r\n            this.isRegistered = false;\r\n          });\r\n\r\n          this.listenTo(view, 'changed:focus', function () {\r\n            if (self.isRegistered) {\r\n              this.moveTabIndex();\r\n            }\r\n          });\r\n\r\n          this.listenTo(view, 'escaped:focus', function () {\r\n            TabablesBehavior.setFocusInActiveTabableRegion();\r\n          });\r\n          this._eventsRegistered = true;\r\n        }\r\n      },\r\n\r\n      _unregisterEventHandlers: function () {\r\n        var view = this.view;\r\n        // log.debug('_unregisterEventHandlers ' + view.constructor.name) && console.log(log.last);\r\n\r\n        this.stopListening(view);\r\n        this._eventsRegistered = false;\r\n      },\r\n\r\n      getCurrentlyFocusedElementFromView: function (shiftTab) {\r\n        if (_.isFunction(this.view.currentlyFocusedElement)) {\r\n          var focusEl = this.view.currentlyFocusedElement({shiftKey: shiftTab});\r\n          return (focusEl instanceof $ ? focusEl : $(focusEl));\r\n        } else {\r\n          if (_.isString(this.view.currentlyFocusedElement)) {\r\n            return this.view.$(this.view.currentlyFocusedElement);\r\n          } else {\r\n            log.debug('setInitialTabIndex: ' + this.view.constructor.name + ' does not have' +\r\n              ' currentlyFocusedElement -> not setting tabindex in that view ') &&\r\n            console.log(log.last);\r\n            return $();\r\n          }\r\n        }\r\n      },\r\n\r\n      onLastTabElement: function (shiftTab, event) {\r\n        return this.view.onLastTabElement(shiftTab, event);\r\n      },\r\n\r\n      setFocus: function (shiftTab) {\r\n        // Not set focus if the view is requested so that the behavior is not stealing the focus.\r\n        // After rendering, the view is setting focus on element at same location by itself.\r\n        if (this.options.notSetFocus) {\r\n          return;\r\n        }\r\n\r\n        var elToFocus = this.getCurrentlyFocusedElementFromView(shiftTab);\r\n        // Do not focus elements out of the visible viewport rectangle;\r\n        // it brings them to the visible screen, ignoring the absolute\r\n        // positioning or transforms, if they were applied earlier\r\n        if (elToFocus && base.isVisibleInWindowViewport(elToFocus)) {\r\n          this.ignoreFocusEvents = true;\r\n          elToFocus[0].focus();\r\n          this.ignoreFocusEvents = false;\r\n          return true;\r\n        }\r\n      },\r\n\r\n      setInitialTabIndex: function () {\r\n        // TabablesBehavior.clearTabIndexes(this.view);\r\n        if (this.currentlyFocusedElement) {\r\n          this.currentlyFocusedElement.off('focus.' + this.view.cid);\r\n        }\r\n        if (this.view.isTabable()) {\r\n          try {\r\n            this.currentlyFocusedElement = this.getCurrentlyFocusedElementFromView();\r\n            if (this.currentlyFocusedElement && this.currentlyFocusedElement.length > 0) {\r\n              var self = this;\r\n              this.currentlyFocusedElement.prop('tabindex', 0);\r\n              this.currentlyFocusedElement.addClass(\r\n                TabableRegionBehavior.accessibilityActiveElementClass);\r\n              this.currentlyFocusedElement.on('focus.' + this.view.cid, function () {\r\n                if (!self.ignoreFocusEvents) {\r\n                  TabablesBehavior.setTabableRegionActive(self);\r\n                }\r\n              });\r\n            }\r\n          } catch (e) {\r\n            console.warn('Could not set as active element: ', this.view.cid, e.message);\r\n          }\r\n\r\n        } else {\r\n          this.currentlyFocusedElement = $();\r\n        }\r\n      },\r\n\r\n      moveTabIndex: function () {\r\n        var self = this;\r\n        if (this.currentlyFocusedElement) {\r\n          this.currentlyFocusedElement.off('focus.' + this.view.cid);\r\n          this.currentlyFocusedElement.prop('tabindex', -1);\r\n          this.currentlyFocusedElement.removeClass(\r\n            TabableRegionBehavior.accessibilityActiveElementClass);\r\n          this.currentlyFocusedElement = $();\r\n\r\n        }\r\n        var newlyFocusedElement = this.getCurrentlyFocusedElementFromView();\r\n        newlyFocusedElement.prop('tabindex', 0);\r\n        this.currentlyFocusedElement = newlyFocusedElement;\r\n        this.currentlyFocusedElement.addClass(TabableRegionBehavior.accessibilityActiveElementClass);\r\n        this.currentlyFocusedElement.on('focus.' + this.view.cid, function () {\r\n          if (!self.ignoreFocusEvents) {\r\n            TabablesBehavior.setTabableRegionActive(self);\r\n          }\r\n        });\r\n      },\r\n\r\n      _applyClasses: function () {\r\n        this.$el.addClass(TabableRegionBehavior.accessibilityRegionClass);\r\n      }\r\n    },\r\n    {\r\n      accessibilityRegionClass: 'csui-acc-tab-region',\r\n      accessibilityActiveRegionClass: 'csui-acc-tab-region-active',\r\n      accessibilityFocusableClass: 'csui-acc-focusable',\r\n      accessibilityActiveElementClass: 'csui-acc-focusable-active'\r\n    }\r\n  );\r\n\r\n  return TabableRegionBehavior;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/error.global/impl/error.global',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \" aria-describedby=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"msgId\") || (depth0 != null ? lookupProperty(depth0,\"msgId\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"msgId\",\"hash\":{},\"loc\":{\"start\":{\"line\":5,\"column\":92},\"end\":{\"line\":5,\"column\":101}}}) : helper)))\n    + \"\\\" \";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <div class='server-error-message-wrapper'>\\r\\n          <div class='server-error-message horizontal-center-align'>\\r\\n            <span id=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"msgId\") || (depth0 != null ? lookupProperty(depth0,\"msgId\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"msgId\",\"hash\":{},\"loc\":{\"start\":{\"line\":12,\"column\":22},\"end\":{\"line\":12,\"column\":31}}}) : helper)))\n    + \"\\\" class='csui-acc-focusable'>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"message\") || (depth0 != null ? lookupProperty(depth0,\"message\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"message\",\"hash\":{},\"loc\":{\"start\":{\"line\":12,\"column\":60},\"end\":{\"line\":12,\"column\":71}}}) : helper)))\n    + \"</span>\\r\\n          </div>\\r\\n        </div>\\r\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <div class='navigation-control-container' \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"noHistory\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(6, data, 0),\"inverse\":container.noop,\"loc\":{\"start\":{\"line\":20,\"column\":50},\"end\":{\"line\":20,\"column\":97}}})) != null ? stack1 : \"\")\n    + \">\\r\\n          <a class='go-back-button circle-border horizontal-center-align' href=\\\"#\\\"\\r\\n            title='\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"backTooltip\") || (depth0 != null ? lookupProperty(depth0,\"backTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"backTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":22,\"column\":19},\"end\":{\"line\":22,\"column\":34}}}) : helper)))\n    + \"' aria-label='\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"backTooltip\") || (depth0 != null ? lookupProperty(depth0,\"backTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"backTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":22,\"column\":48},\"end\":{\"line\":22,\"column\":63}}}) : helper)))\n    + \"' class='csui-acc-focusable'>\\r\\n              <span class='icon icon-back'></span>\\r\\n          </a>\\r\\n          <div class='go-back-text button-text horizontal-center-align' title='\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"backTooltip\") || (depth0 != null ? lookupProperty(depth0,\"backTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"backTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":25,\"column\":79},\"end\":{\"line\":25,\"column\":94}}}) : helper)))\n    + \"'>\\r\\n              <span>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"backText\") || (depth0 != null ? lookupProperty(depth0,\"backText\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"backText\",\"hash\":{},\"loc\":{\"start\":{\"line\":26,\"column\":20},\"end\":{\"line\":26,\"column\":32}}}) : helper)))\n    + \"</span>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div class='navigation-control-container'>\\r\\n          <a class='go-home-button circle-border horizontal-center-align' href=\\\"#\\\"\\r\\n            title='\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"homeTooltip\") || (depth0 != null ? lookupProperty(depth0,\"homeTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"homeTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":31,\"column\":19},\"end\":{\"line\":31,\"column\":34}}}) : helper)))\n    + \"' aria-label='\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"homeTooltip\") || (depth0 != null ? lookupProperty(depth0,\"homeTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"homeTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":31,\"column\":48},\"end\":{\"line\":31,\"column\":63}}}) : helper)))\n    + \"' class='csui-acc-focusable'>\\r\\n              <span class='icon icon-home'></span>\\r\\n          </a>\\r\\n          <div class='go-home-text button-text horizontal-center-align' title='\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"homeTooltip\") || (depth0 != null ? lookupProperty(depth0,\"homeTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"homeTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":34,\"column\":79},\"end\":{\"line\":34,\"column\":94}}}) : helper)))\n    + \"'>\\r\\n              <span>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"homeText\") || (depth0 != null ? lookupProperty(depth0,\"homeText\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"homeText\",\"hash\":{},\"loc\":{\"start\":{\"line\":35,\"column\":20},\"end\":{\"line\":35,\"column\":32}}}) : helper)))\n    + \"</span>\\r\\n          </div>\\r\\n        </div>\\r\\n\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    return \" style='display:none;' \";\n},\"8\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"showCloseButton\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"loc\":{\"start\":{\"line\":39,\"column\":8},\"end\":{\"line\":43,\"column\":15}}})) != null ? stack1 : \"\");\n},\"9\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"          <div class='navigation-control-container'>\\r\\n            <button type=\\\"submit\\\" class=\\\"close-button highlighted-btn\\\">\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"closeText\") || (depth0 != null ? lookupProperty(depth0,\"closeText\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"closeText\",\"hash\":{},\"loc\":{\"start\":{\"line\":41,\"column\":71},\"end\":{\"line\":41,\"column\":84}}}) : helper)))\n    + \"</button>\\r\\n          </div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class='main-area-container' role='region' aria-label='\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"regionAria\") || (depth0 != null ? lookupProperty(depth0,\"regionAria\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"regionAria\",\"hash\":{},\"loc\":{\"start\":{\"line\":1,\"column\":59},\"end\":{\"line\":1,\"column\":73}}}) : helper)))\n    + \"'>\\r\\n  <div class='main-area-group'>\\r\\n    <div class='error-message-area'>\\r\\n      <div class='error-message-wrapper'>\\r\\n        <h2 class='error-message horizontal-center-align' \"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"message\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"loc\":{\"start\":{\"line\":5,\"column\":58},\"end\":{\"line\":5,\"column\":110}}})) != null ? stack1 : \"\")\n    + \" >\\r\\n          <span class='csui-acc-focusable'>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"errorMessage\") || (depth0 != null ? lookupProperty(depth0,\"errorMessage\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"errorMessage\",\"hash\":{},\"loc\":{\"start\":{\"line\":6,\"column\":43},\"end\":{\"line\":6,\"column\":59}}}) : helper)))\n    + \"</span>\\r\\n        </h2>\\r\\n      </div>\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"message\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"loc\":{\"start\":{\"line\":9,\"column\":6},\"end\":{\"line\":15,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"    </div>\\r\\n\\r\\n    <div class='navigation-area horizontal-center-align'>\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"unless\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hideNavigationButtons\") : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.program(8, data, 0),\"loc\":{\"start\":{\"line\":19,\"column\":6},\"end\":{\"line\":44,\"column\":17}}})) != null ? stack1 : \"\")\n    + \"    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_error.global_impl_error.global', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/error.global/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/error.global/impl/nls/root/lang',{\r\n\r\n  errorMessage: 'There was a problem serving the requested page.',\r\n  backText: 'Go back',\r\n  backTooltip: 'Navigate back to previous URL',\r\n  homeText: 'Home',\r\n  homeTooltip: 'Navigate to landing page',\r\n  closeText: 'Close',\r\n  closeTooltip: 'Close the error page',\r\n  globalErrorRegionAria: 'Global error'\r\n\r\n});\r\n\n","\ncsui.define('css!csui/widgets/error.global/impl/error.global',[],function(){});\n","csui.define('csui/widgets/error.global/error.global.view',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette', 'csui/utils/base',\r\n  'csui/utils/contexts/factories/global.error', 'csui/utils/contexts/factories/application.scope.factory',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'hbs!csui/widgets/error.global/impl/error.global',\r\n  'i18n!csui/widgets/error.global/impl/nls/lang',\r\n  'csui/utils/log',\r\n  'module',\r\n  'css!csui/widgets/error.global/impl/error.global'\r\n], function (_, $, Marionette, base, GlobalErrorModelFactory,\r\n    ApplicationScopeModelFactory, TabableRegionBehavior, template, lang, log, module) {\r\n  'use strict';\r\n  log = log(module.id);\r\n\r\n  var GlobalErrorView = Marionette.ItemView.extend({\r\n    className: 'csui-global-error',\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      return {\r\n        errorMessage: lang.errorMessage,\r\n        backText: lang.backText,\r\n        backTooltip: lang.backTooltip,\r\n        homeText: lang.homeText,\r\n        homeTooltip: lang.homeTooltip,\r\n        closeText: lang.closeText,\r\n        closeTooltip: lang.closeTooltip,\r\n        msgId: _.uniqueId('msg'),\r\n        regionAria: lang.globalErrorRegionAria,\r\n        noHistory: this.noHistory\r\n      };\r\n    },\r\n\r\n    TabableRegion: {\r\n      behaviorClass: TabableRegionBehavior,\r\n      initialActivationWeight: 100\r\n    },\r\n\r\n    ui: {\r\n      errorMessage: '.error-message > span',\r\n      closebutton: '.close-button'\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyInView',\r\n      'click .go-home-button': 'onClickHome',\r\n      'click .go-home-text': 'onClickHome',\r\n      'click .go-back-button': 'onClickBack',\r\n      'click .go-back-text': 'onClickBack',\r\n      'click @ui.closebutton': 'onClickClose'\r\n    },\r\n\r\n    constructor: function GlobalErrorView(options) {\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n\r\n      if (!this.model) {\r\n        this.model = options.context.getModel(GlobalErrorModelFactory, options);\r\n      }\r\n\r\n      this.noHistory = options.context &&\r\n                       options.context.viewStateModel &&\r\n                       options.context.viewStateModel.getHistory().length < 1;\r\n\r\n      // IE11 fails to update CSS center styling correctly on window resize\r\n      if (base.isIE11()) {\r\n        var self = this;\r\n        var resizeHandler = function () {\r\n          self.render();\r\n        };\r\n        $(window).on('resize', resizeHandler);\r\n        this.once('before:destroy', function () {\r\n          $(window).off('resize', resizeHandler);\r\n        });\r\n      }\r\n    },\r\n\r\n    currentlyFocusedElement: function (event) {\r\n      return this.ui.errorMessage;\r\n    },\r\n\r\n    onKeyInView: function (event) {\r\n      if (event.keyCode === 32 || event.keyCode === 13) {\r\n        // space(32) or enter(13)\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        $(event.target).trigger('click');\r\n      }\r\n    },\r\n\r\n    onClickHome: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      var context = this.options.context,\r\n          viewStateModel = context && context.viewStateModel,\r\n          start_id = viewStateModel && viewStateModel.get(viewStateModel.CONSTANTS.START_ID);\r\n      if (start_id) {\r\n        var nextNode = context.getModel('nextNode');\r\n        nextNode.set('id', start_id);\r\n      } else {\r\n        var applicationScope = context.getModel(ApplicationScopeModelFactory);\r\n        applicationScope.set('id', '');\r\n      }\r\n    },\r\n\r\n    onClickBack: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      window.history.back();\r\n    },\r\n\r\n    onClickClose: function(event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      // destroy view, the caller should listen to 'destroy' and 'childview:destroy'\r\n      // to get informed about closing this view\r\n      this.destroy();\r\n    }\r\n\r\n  });\r\n\r\n  return GlobalErrorView;\r\n});\r\n\n","csui.define('csui/utils/non-attaching.region/non-attaching.region',['csui/lib/marionette'], function (Marionette) {\r\n  'use strict';\r\n\r\n  var NonAttachingRegion = Marionette.Region.extend({\r\n\r\n    constructor: function NonAttachingRegion(options) {\r\n      Marionette.Region.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    attachHtml: function (view) {}\r\n\r\n  });\r\n\r\n  return NonAttachingRegion;\r\n\r\n});\r\n\n","\ncsui.define('css!csui/pages/error.page/impl/error.page',[],function(){});\n","// Places the error page view to the page body\r\ncsui.define('csui/pages/error.page/error.page.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'csui/utils/contexts/page/page.context',\r\n  'csui/utils/contexts/factories/application.scope.factory',\r\n  'csui/widgets/error.global/error.global.view',\r\n  'csui/utils/url',\r\n  'csui/utils/non-attaching.region/non-attaching.region',\r\n  'css!csui/pages/error.page/impl/error.page'\r\n], function (_, $, Marionette, PageContext, ApplicationScopeModelFactory,\r\n    GlobalErrorView, Url, NonAttachingRegion) {\r\n\r\n  var ErrorPageView = Marionette.ItemView.extend({\r\n\r\n    template: false,\r\n\r\n    constructor: function ErrorPageView(options) {\r\n      options || (options = {});\r\n      options.el = document.body;\r\n\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      // Namespace for binf widgets\r\n      this.$el.addClass('binf-widgets csui-error-page-container');\r\n\r\n      this.context = new PageContext();\r\n      this.applicationScope = this.context.getModel(ApplicationScopeModelFactory);\r\n      this.listenTo(this.applicationScope, 'change:id', this._onChangeId);\r\n      this.globalErrorView = new GlobalErrorView({\r\n        model: options.model,\r\n        context: this.context\r\n      });\r\n    },\r\n\r\n    onRender: function () {\r\n      this.globalErrorView.render();\r\n      this.$el.empty().append(this.globalErrorView.el);\r\n\r\n      // Do not send showing events before triggering the first render event\r\n      setTimeout(_.bind(function () {\r\n        var bodyRegion = new NonAttachingRegion({el: this.el});\r\n        bodyRegion.show(this, {render: false});\r\n      }, this));\r\n    },\r\n\r\n    _onChangeId: function () {\r\n\t    location.href = Url.combine(new Url(new Url(location.pathname).getCgiScript()), 'app');\r\n    }\r\n\r\n  });\r\n\r\n  return ErrorPageView;\r\n});\r\n\n","csui.define('bundles/csui-error',[\r\n  // Pages\r\n  'csui/pages/error.page/error.page.view',\r\n], {});\r\n\r\ncsui.require(['require', 'css'], function (require, css) {\r\n  css.styleLoad(require, 'csui/bundles/csui-error', true);\r\n});\r\n\n"]}