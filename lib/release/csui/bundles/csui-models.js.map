{"version":3,"sources":["../../src/models/audit/server.adaptor.mixin.js","../../src/models/audit/audit.collection.js","../../src/models/authenticated.user.node.permission.js","../../src/models/server.adaptors/favorite2.mixin.js","../../src/models/favorite2.js","../../src/models/impl/nls/lang.js","../../src/models/impl/nls/root/lang.js","../../src/models/impl/nls/lang!i18n","../../src/models/favorite2column.js","../../src/models/favorite2columns.js","../../src/models/server.adaptors/favorites2.mixin.js","../../src/models/favorites2.js","../../src/models/favorite2group.js","../../src/models/server.adaptors/favorite2groups.mixin.js","../../src/models/favorite2groups.js","../../src/models/server.adaptors/favorite.model.mixin.js","../../src/models/favorite.model.js","../../src/models/permission/permission.action.server.adaptor.mixin.js","../../src/models/permission/nodepermission.model.js","../../src/models/permission/permission.response.mixin.js","../../src/models/permission/server.adaptor.mixin.js","../../src/models/permission/nodeuserpermissions.js","../../src/models/server.module/server.module.collection.js","../../src/models/specificnodemodel.js","../../src/models/mixins/versions/v2.versions.response.mixin.js","../../src/models/server.adaptors/version.mixin.js","../../src/models/version.js","../../src/models/view.state.model.js","../../src/models/perspective/personalization.server.adaptor.mixin.js","../../src/models/perspective/localstorage.server.adaptor.mixin.js","../../src/utils/perspective/perspective.util.js","../../src/models/perspective/personalize/delta.generator.js","../../src/models/perspective/personalize/delta.resolver.js","../../src/models/perspective/personalize/personalize.guide.js","../../src/models/perspective/personalization.model.js","../../src/models/compound.document/reorganize/server.adaptor.mixin.js","../../src/models/compound.document/reorganize/reorganize.collection.js","../../src/models/widget/widget.model.js","../../src/models/widget/widget.collection.js","../../src/models/zipanddownload/zipanddownload.preflight.js","../../src/models/zipanddownload/zipanddownload.stages.js","../../src/utils/mime.types.js","../../src/utils/classic.nodes/classic.nodes!csui-ext","../../src/utils/classic.nodes/classic.nodes.js","../../src/utils/defaultactionitems!csui-ext","../../src/utils/defaultactionitems.js","../../src/utils/impl/nls/lang.js","../../src/utils/impl/nls/root/lang.js","../../src/utils/nodesprites!csui-ext","../../src/utils/nodesprites.js","../../src/utils/node.info.sprites!csui-ext","../../src/utils/node.info.sprites.js","../../src/utils/smart.nodes/smart.nodes!csui-ext","../../src/utils/smart.nodes/smart.nodes.js","../../src/utils/user.session/impl/nls/lang.js","../../src/utils/user.session/impl/nls/root/lang.js","../../src/utils/user.session/impl/nls/lang!i18n","../../src/utils/user.session/user.session.js","../../src/utils/authenticators/interactive.credentials.authenticator.js","../../src/utils/authenticators/impl/redirecting.form.authenticator!hbs","../../src/utils/authenticators/impl/nls/lang.js","../../src/utils/authenticators/impl/nls/root/lang.js","../../src/utils/authenticators/impl/redirecting.form.authenticator!css","../../src/utils/authenticators/redirecting.form.authenticator.js","../../src/utils/authenticators/core.authenticators.js","../../src/models/compound.document/releases/server.adaptor.mixin.js","../../src/models/node.createform/server.adaptor.mixin.js","../../src/models/server.info/server.adaptor.mixin.js","../../src/models/permission/permission.precheck.server.adaptor.js","../../src/models/appliedcategories/category.server.adaptor.mixin.js","../../src/models/appliedcategories/category.js","../../src/models/appliedcategories/systemattributes.server.adaptor.mixin.js","../../src/models/appliedcategories/systemattributes.model.js","../../src/models/appliedcategories/category.validation.server.adaptor.mixin.js","../../src/models/appliedcategories/category.validation.model.js","../../src/models/navigation.history.js","csui-models.js"],"names":["csui","define","_","Url","mixin","prototype","extend","makeServerAdaptor","options","this","url","apiUrl","connector","connection","getApiBase","query","combineQueryString","getBrowsableUrlQuery","expand","combine","node","get","parse","response","parseBrowsedState","columns","resetColumnsV2","auditEvents","add","results","data","audit_event_types","audit","isFetchable","$","Backbone","ConnectableMixin","FetchableMixin","BrowsableMixin","BrowsableV2ResponseMixin","BrowsableV1RequestMixin","ServerAdaptorMixin","NodeChildrenColumnModel","NodeChildrenColumnCollection","NodeModel","auditObject","auditName","auditDate","userIdKey","dateType","AuditColumnModel","constructor","attributes","call","AuditColumnCollection","model","models","length","resetCollection","getV2Columns","getColumnModels","columnKeys","definitions","each","column","sort","metadata","properties","audit_name","filter","audit_date","user_id","key","type","keys","AuditEventModel","Model","AuditEventCollection","Collection","AuditModel","AuditCollection","makeConnectable","makeFetchable","makeBrowsable","makeBrowsableV2Response","makeBrowsableV1Request","ExpandableMixin","ResourceMixin","IncludingAdditionalResourcesMixin","AuthenticatedUserNodePermissionModel","makeResource","makeIncludingAdditionalResources","makeExpandable","clone","selectedNodeId","userId","user","apiBase","permissions","indexOf","splice","hasEditPermissionRights","permissons","isArray","contains","superParseMethod","superSyncMethod","sync","isEmpty","attrs","updatedAttributes","attr","favorites","favorite_name","name","favorite_tab_id","tab_id","m","actions","reject","action","signature","push","method","useFavoritesUrl","attributesToUpdate","k","newKey","substr","getConnectionUrl","id","Favorite2Model","mustRefreshAfterPut","idAttribute","apply","arguments","root","en-us","en","serverCallPrecheckFailedMissingConnector","serverCallPrecheckFailedModelIsNew","fav_parent_id","fav_favorite_name","fav_size","fav_ungrouped","version","state","favorite","toggleDetails","parentID","lang","title","columnKey","column_key","Favorite2ColumnModel","modelLang","default_action","forEach","index","definitions_order","getAdditionalResourcesUrlQuery","getResourceFieldsUrlQuery","getExpandableResourcesUrlQuery","getStateEnablingUrlQuery","getRequestedCommandsUrlQuery","getSortByOrderUrlQuery","parseBrowsedItems","AdditionalResourcesV2Mixin","FieldsV2Mixin","ExpandableV2Mixin","StateRequestorMixin","CommandableV2Mixin","ClientSideBrowsableMixin","DelayedCommandableV2Mixin","Favorite2ColumnCollection","Favorite2Collection","callCounter","pick","makeAdditionalResourcesV2Mixin","makeFieldsV2","makeExpandableV2","makeStateRequestor","makeCommandableV2","makeClientSideBrowsable","makeDelayedCommandableV2","_prepareModel","promotedActionCommands","nonPromotedActionCommands","fields","deepClone","includeResources","_additionalResources","skip","skipCount","top","topCount","filters","orderBy","commands","defaultActionCommands","delayRestCommands","reset","toJSON","actualSkipCount","totalCount","filteredCount","getResourceScope","setResourceScope","scope","excludeResources","resetFields","setFields","resetExpand","setExpand","resetCommands","setCommands","resetDefaultActionCommands","setDefaultActionCommands","UploadableMixin","Favorite2GroupModel","makeUploadable","autoreset","favorite_columns","stateEnabled","urlRoot","v2Url","resp","Error","groups","makeAjaxCall","then","favoritesCollection","favoritesFetchOptions","omit","fetch","syncFromMultipleSources","_createMergedResponse","order","map","group","tabId","base","SyncableFromMultipleSources","Favorite2GroupsCollection","undefined","on","_setupEventPropagation","_propagateFavorite2CollectionOptions","self","_fetch","originalSilent","silent","originalFetch","listenTo","trigger","collection","setFilter","setOrder","fetched","saveAll","tabs","groupName","groupId","putUrl","beforeSend","request","settings","counter","deferred","Deferred","jqxhr","tabsResp","Array","elem","at","remove","set","i","resolve","jqxhrTabs","statusText","errorTabs","RequestErrorMessage","error","promise","_serverCallPreCheck","isNew","_serverCallUpdateFavorite","ajaxMethod","selected","done","bind","window","mobile","force","fail","err","FavoriteModel","addToFavorites","removeFromFavorites","urlBase","right_id","nodeId","apply_to","include_sub_types","queryString","isNumber","subtype","addMajorVersionOptionIndex","addItemsOptionIndex","isContainer","getPermissionLevel","versionControlAdvanced","permissionModel","value","permissionsCount","PERMISSION_LEVEL_FULL_CONTROL","PERMISSION_LEVEL_WRITE","PERMISSION_LEVEL_READ","PERMISSION_LEVEL_CUSTOM","PERMISSION_LEVEL_NONE","getReadPermissions","getWritePermissions","advancedVersioningEnabled","getFullControlPermissions","getPermissionsByLevelExceptCustom","level","module","config","NodePermissionModel","defaults","addEmptyAttribute","has","makePermissionResponse","parsePermissionResponse","clearEmptyPermissionModel","permissionsList","child","ownerData","find","item","groupData","isObject","memberId","nodeName","container","PermissionResponseMixin","defaultPageSize","NodeUserPermissionCollection","includeActions","skipSort","processForEmptyOwner","findWhere","addPublicAccess","publicAccessModel","addOwnerOrGroup","nodePermissionModel","flag","owner","currentModel","sourceModules","modules","serverModules","ServerModuleModel","__super__","ServerModuleCollection","_resolveServerModules","success","missing","serverModule","sourceModule","ignoreErrors","NodeResourceMixin","SpecificNodeModel","makeNodeResource","str","sformat","_parseActions","makeVersionableV2Response","parseVersionsResponse","versions","id_expand","version_number_name","version_number_name_formatted","chain","commands_map","commands_order","log","ActionCollection","VersionsableV2ResponseMixin","VersionModel","lazyActionsDisabled","val","NamedSessionStorage","PublicLang","require","publicLang","constants","Object","freeze","LAST_ROUTER","CURRENT_ROUTER","CURRENT_ROUTER_FRAGMENT","CURRENT_ROUTER_NAVIGATE_OPTIONS","CURRENT_ROUTER_SCOPE_ID","BACK_TO_TITLE","METADATA_CONTAINER","STATE","DEFAULT_STATE","SESSION_STATE","NAVIGATION_HISTORY_ARRAY","URL_PARAMS","ALLOW_WIDGET_URL_PARAMS","START_ID","BREADCRUMB","QUERY_STRING_PARAMS","storage","destroy","enabled","_navigationHistory","values","property","isString","JSON","_syncWithStorage","CONSTANTS","_setViewStateAttribute","attributeName","_getViewStateAttribute","object","_syncWithStorageIfSilentUpdate","decode","setViewState","getViewState","setDefaultViewState","getDefaultViewState","setSessionViewState","getSessionViewState","sessionState","stringify","getCurrentRouterName","onNavigationStarted","newRouterInfo","canRestore","restore","isSameRoutingInfo","getLastHistoryEntry","_currentHistoryEntry","_restoreStatesFromHistoryEntry","pop","unset","_savePotentialHistoryEntry","routerName","router","getRouter","back_to_title","urlParam","urlParams","fragment","scopeId","navigateOptions","defaultState","getPotentialHistoryEntry","onContextFetch","_addRouterInfoToHistory","historyInfo","restoreStates","isFromHistory","default_state","session_state","historyEntry","shift","_copyAttributes","viewStateModel","saveHistory","savedViewStateModel","_resetAttributes","restoreHistory","clean","hasRouted","router1Info","router2Info","clear","getBackToTitle","back","getLastRouterIndex","lastRouterInfo","clearHistory","clearCurrentHistoryEntry","navigationHistory","getIndexOfOfLastApplicationScope","getHistory","restoreRouterOfLastApplicationScope","_restoreHistoryEntryByIndex","restoreLastRouter","restoreLastFragment","restoreHistoryEntryByIndex","historyEntryInfo","restoreRouter","history","addUrlParameters","urlParameters","context","replace","perspectiveRouting","activeRouter","hasNotNavigatedAndNotJustStarted","perspectiveId","NamedLocalStorage","getStorage","that","UserModelFactory","getModel","currentUserId","userFactory","getFactory","initialResponse","namedLocalStorage","savePerspective","getNodeId","fetchPerspective","personalization","hasRequiredFields","manifest","schema","required","isEligibleForLiveWidget","callback","getExtraWidgetKeys","EXTRA_WIDGET_CONFIG_KEYS","getEmptyPlaceholderWidgetType","perspectiveMode","MODE_PERSONALIZE","WIDGET_SHORTCUTS","WIDGET_PERSPECTIVE_PLACEHOLDER","isEmptyPlaceholder","widget","__isPlacehoder","generateWidgetId","prefix","WIDGET_ID_PERSPECTIVE_PREFIX","WIDGET_ID_PESONALIZATION_PREFIX","Date","isPersonalWidget","widgetId","KEY_WIDGET_ID","isPersonalWidgetId","hasWidgetId","isErrorWidget","isHiddenWidget","originalWidget","KEY_HIDDEN","setWidgetHidden","hide","MODE_EDIT_PERSPECTIVE","PerspectiveUtil","DeltaGenerator","perspective","getDeltaOfCurrentPerspective","allPerspectiveWidgets","allPersonalWidgets","perspectiveWidgetIds","pluck","personalWidgets","personalParts","partition","perspectiveWidgets","hidden","getDelta","result","perspective_id","override","perspective_version","delta","widgets","banner","content","sidebar","DeltaResolver","resolveContent","zone","personalWidgetsById","perspectiveWidgetsById","newPerspectiveWidgets","allActiveWidgets","hiddenWidgets","widgetOrder","hiddenWidgetIds","indexBy","union","canMergeDelta","getPersonalization","personalizations","LocalStorageServerAdaptorMixin","PersonalizeGuide","persistOnLocalStorage","PersonalizationModel","resolvePersonalization","getPerspectiveId","getPerspective","setPerspective","update","changes","prepareFormData","sourceModel","loadPersonalization","loadPersonalizationFromLocalStorage","ReorganizeCollection","ToolItemConfigCollection","ToolItemMaskCollection","WidgetModel","view","includeView","includeManifest","includeServerModule","includeToolItems","getDefaultData","_getDefaultPropertyValue","reduce","propertySchema","propertyName","_getDefaultPrimitiveValue","serverModulesPromise","toolItemsPromise","_resolveToolItems","toolItemMasksPromise","_resolveToolItemMasks","when","_resolveWidget","viewPromise","_resolveView","manifestPromise","_resolveManifest","_updateServerModule","_updateActions","widgetData","getModuleData","viewPath","getViewModulePath","View","manifestPath","getManifestModulePath","_needsLocalization","manifestLocalizedPath","getLocalizedManifestModulePath","manifestLocalized","resolveLocalizedManifest","ignoreManifestErrors","toolItems","toolItemMasks","_getModulePrefix","firstSlash","substring","path","lastSlash","lastIndexOf","moduleData","modulePrefix","toolbars","isLocalizableString","hasOwnProperty","localizedManifest","traverseManifest","localizedManifestParent","getLocalizationKey","localizationKey","arrayItem","localizationArrayItem","warn","console","last","concat","WidgetCollection","_resolveWidgets","resolvableModels","promises","invoke","PreFlightModel","nodes","preflight","URL","StagesModel","updateLocation","jobs","complete","unprocessed_items_list","locations","split","parentLocation","getMimeType","fileName","mimeType","RulesMatchingMixin","rules","ClassicNodeModel","sequence","urlQuery","makeRulesMatching","ClassicNodeCollection","comparator","findByNode","matchRules","_getUrl","forced","isForced","some","isSupported","getUrl","_replaceParameters","getCgiScript","appendQuery","expression","match","names","parameter","exec","encodeURIComponent","classicNodes","flatten","ActionItemCollection","defaultActionItems","NodeTypeSearchQuery","NodeTypeSearchForm","NodeTypeURL","NodeTypeAudio","NodeTypeCompressed","NodeTypeImage","NodeTypeText","NodeTypeHtml","NodeTypeUnknown","NodeTypeVideo","NodeTypeDOC","NodeTypePDF","NodeTypePPT","NodeTypePresentation","NodeTypeXLS","NodeTypeSpreadsheet","NodeTypeFormula","NodeTypePublisher","NodeTypeVisio","NodeTypeMPP","NodeTypeONE","NodeTypeSDD","NodeTypeDWG","Loading","NotAvailable","extraIcons","NodeSpriteModel","className","NodeSpriteCollection","findClass","compareType","nodeSprite","keyValues","findTypeByNode","typeName","spriteName","findClassByNode","nodeSprites","equalsNoCase","mime_type","iconName","startsWithNoCase","equals","withColorSchemaIconName","extraNodeInfoSprites","SmartNodeModel","SmartNodeCollection","smartNodes","errorTerminateSession","errorContinueSession","errorHttpPrefix","getSessionReactionTime","sessionReactionTime","getSessionInactivity","sessionInactivity","isSessionExpirationEnabled","redirectEnabled","getCookieExpirationMode","cookieExpirationMode","currentDateUTC","toUTCString","_getOverallExpirationTime","_ensureExpiresTime","session","expires","serverDate","getTime","dat2","dat","_calcExpirationStartTime","authenticator","diffTime","expireDate","isNaN","info","expireTime","kindnessPeriod","currentDate","currentTime","_shouldDisplayExpirationWarning","isCookieExpirationEnabled","updateSessionTicket","isAuthenticated","getAbsolute","toLowerCase","debug","clearExpirationTimer","_createExpirationTimer","startExpirationTimer","timerId","clearInterval","timer","reactionTimeSecs","doOnce","executed","curTimer","displayExpirationWarning","startWithWarningContent","startTime","setInterval","sendAuthenticatorEvent","performSessionExpired","stopExpirationWarningViewTimer","dialog","triggerMethod","_showExpirationWarningDialog","ExpirationWarningDialog","dlgOptions","userSession","expWarnDialog","createExpirationWarningDialog","showExpirationWarningDialog","always","redirectToTargetPage","cgiUrl","targetUrl","location","href","doRedirect","logoutInitiated","signOut","onErrorRedirect","isSessionExpired","timerRedirectId","setTimeout","clearTimeout","continueSession","authUrl","headers","OTCSTicket","ticket","textStatus","parseResponse","updateAuthenticatedSession","req","errMsg","errDetails","errResponse","statusCode","message","ModalAlert","showError","reasonStr","sender","cmdData","routing","openAuthenticatedPage","routesWithSlashes","tokenUrl","queryStr","token","logoutFct","openInNewTab","unauthenticate","unauthenticateReason","reason","signInPageUrl","search","pathname","logoutUrl","hash","enableExpirationHandling","usedConfig","RequestAuthenticator","interactive","authenticate","succeeded","failed","openSignInDialog","reauthenticating","SignInDialog","BlockingView","suppressAll","show","args","resumeAll","hbs","Handlebars","t","template","1","depth0","helpers","partials","stack1","lookupProperty","parent","hooks","helperMissing","nullContext","states","loc","start","line","end","3","helper","escapeExpression","compiler","main","fn","program","inverse","registerPartial","dialogCloseButtonTooltip","dialogCloseButtonAria","UserSession","CloseButton","authenticationIFrameTimeout","showCloseButtonOnError","initiateLoginSequence","reportFailedTicketRefresh","skipFailedEvent","removeIFrame","resumeBlockingView","suppressBlockingView","receiveMessage","event","origin","urlOrigin","source","postMessage","removeEventListener","waitForLogin","enableInteactiveLogin","$el","removeClass","n","getUserId","DialogView","ErrorGlobalView","handleDestroy","edialog","off","errorModel","hideNavigationButtons","showCloseButton","errorCode","showLogout","errorGlobalView","standardHeader","fullSize","addEventListener","Marionette","src","getOrigin","el","width","height","ControlView","ItemView","ui","closeButton","templateHelpers","dialogCloseAria","events","click @ui.closeButton","onButtonClick","onClickClose","footerView","render","css","z-index","addClass","TicketAuthenticator","InteractiveCredentialsAuthenticator","RedirectingFormAuthenticator","requirejs","s","contexts","enableInteractiveAuthenticator","originalConfig","enableRedirectingFormAuthenticator","releaseCollection","nodeProperties","type_name","release_value","release","revision","created","create_date","createdBy","create_user_id_expand","locked","locked_user_id_expand","reserved_user_id_expand","locked_date","openable","locked_user_id","params","parent_id","docParentId","resource","param","forms","form","_changing","sortInitially","sortBy","ele","CategoryModel","SystemAttributesModel","CategoryValidationModel","NavigationHistory","History","urlCanChange","is","checkUrl","e","_updateHash","matchRoot"],"mappings":"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","file":"csui-models.js","sourcesContent":["csui.define('csui/models/audit/server.adaptor.mixin',[\r\n  'csui/lib/underscore', 'csui/utils/url'\r\n], function (_, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n        url: function () {\r\n          var apiUrl = new Url(this.connector.connection.url).getApiBase(2);\r\n          var query = Url.combineQueryString(\r\n              this.getBrowsableUrlQuery(),\r\n              {\r\n                expand: 'audit{id, user_id, agent_id}'\r\n              }\r\n          );\r\n          return Url.combine(apiUrl, 'nodes', this.options.node.get('id'), 'audit?' + query) ;\r\n        },\r\n\r\n        parse: function (response, options) {\r\n          this.parseBrowsedState(response, options);\r\n          this.columns && this.columns.resetColumnsV2(response, this.options);\r\n          this.auditEvents.add(response.results.data.audit_event_types);\r\n          return response.results.data.audit;\r\n        },\r\n\r\n        isFetchable: function () {\r\n          return !!this.options;\r\n        },\r\n\r\n      });\r\n    }\r\n\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\n","csui.define('csui/models/audit/audit.collection',['csui/lib/underscore',\r\n  'csui/lib/jquery',\r\n  'csui/lib/backbone',\r\n  'csui/models/mixins/connectable/connectable.mixin',\r\n  'csui/models/mixins/fetchable/fetchable.mixin',\r\n  'csui/models/browsable/browsable.mixin',\r\n  'csui/models/browsable/v2.response.mixin',\r\n  'csui/models/browsable/v1.request.mixin',\r\n  'csui/models/audit/server.adaptor.mixin',\r\n  'csui/models/nodechildrencolumn',\r\n  'csui/models/nodechildrencolumns',\r\n  'csui/models/node/node.model'\r\n], function (_, $, Backbone, ConnectableMixin, FetchableMixin, BrowsableMixin,\r\n    BrowsableV2ResponseMixin, BrowsableV1RequestMixin, ServerAdaptorMixin, NodeChildrenColumnModel,\r\n    NodeChildrenColumnCollection, NodeModel) {\r\n\r\n  var auditObject = {\r\n    auditName: 'audit_name',\r\n    auditDate: 'audit_date',\r\n    userIdKey: 'user_id',\r\n    dateType: '-7'\r\n  };\r\n\r\n  var AuditColumnModel = NodeChildrenColumnModel.extend({\r\n\r\n    constructor: function AuditColumnModel(attributes, options) {\r\n      NodeChildrenColumnModel.prototype.constructor.call(this, attributes, options);\r\n    }\r\n  });\r\n\r\n  var AuditColumnCollection = NodeChildrenColumnCollection.extend({\r\n\r\n    model: AuditColumnModel,\r\n\r\n    resetColumnsV2: function (response, options) {\r\n      if(!this.models.length) {// Stopping reset as event data is static and doesn't change after first fetch\r\n      this.resetCollection(this.getV2Columns(response), options);\r\n    }\r\n    },\r\n\r\n    getColumnModels: function (columnKeys, definitions) {\r\n      var columns = NodeChildrenColumnCollection.prototype.getColumnModels.call(\r\n          this, columnKeys, definitions);\r\n      _.each(columns, function (column) {\r\n        var columnKey = column['column_key'];\r\n        if (columnKey === auditObject.auditDate) {\r\n          column.sort = true;\r\n        }\r\n      });\r\n      return columns;\r\n    },\r\n\r\n    getV2Columns: function (response) {\r\n      var definitions = (response.results &&\r\n                         response.results[0] &&\r\n                         response.results[0].metadata &&\r\n                         response.results[0].metadata.properties) || {};\r\n\r\n        definitions.audit_name = {filter: true};\r\n        definitions.audit_date = {};\r\n        definitions.user_id = {filter: true};\r\n\r\n        definitions.audit_name.key = auditObject.auditName;\r\n        definitions.audit_date.key = auditObject.auditDate;\r\n        definitions.user_id.key = auditObject.userIdKey;\r\n        definitions.audit_date.type = auditObject.dateType;\r\n\r\n      var columnKeys = _.keys(definitions);\r\n      return this.getColumnModels(columnKeys, definitions);\r\n    }\r\n\r\n  });\r\n\r\n  var AuditEventModel = Backbone.Model.extend({});\r\n\r\n  var AuditEventCollection = Backbone.Collection.extend({\r\n\r\n    model: AuditEventModel,\r\n    constructor: function AuditEventCollection(models, options) {\r\n      this.options = options || {};\r\n      Backbone.Collection.prototype.constructor.call(this, models, options);\r\n    },\r\n  });\r\n\r\n  var AuditModel = NodeModel.extend({});\r\n\r\n  var AuditCollection = Backbone.Collection.extend({\r\n\r\n    model: AuditModel,\r\n\r\n    constructor: function AuditCollection(models, options) {\r\n      this.options = options || {};\r\n      Backbone.Collection.prototype.constructor.call(this, models, options);\r\n\r\n      this.makeConnectable(options)\r\n          .makeFetchable(options)\r\n          .makeBrowsable(options)\r\n          .makeBrowsableV2Response(options)\r\n          .makeBrowsableV1Request(options)\r\n          .makeServerAdaptor(options);\r\n\r\n      this.columns = new AuditColumnCollection();\r\n      this.auditEvents = new AuditEventCollection();\r\n    }\r\n\r\n  });\r\n\r\n  ConnectableMixin.mixin(AuditCollection.prototype);\r\n  FetchableMixin.mixin(AuditCollection.prototype);\r\n  BrowsableMixin.mixin(AuditCollection.prototype);\r\n  BrowsableV2ResponseMixin.mixin(AuditCollection.prototype);\r\n  BrowsableV1RequestMixin.mixin(AuditCollection.prototype);\r\n  ServerAdaptorMixin.mixin(AuditCollection.prototype);\r\n\r\n  return AuditCollection;\r\n\r\n});\n","csui.define('csui/models/authenticated.user.node.permission',[\r\n  'csui/lib/underscore', 'csui/lib/backbone', 'csui/utils/url',\r\n  'csui/models/mixins/expandable/expandable.mixin',\r\n  'csui/models/mixins/resource/resource.mixin',\r\n  'csui/models/mixins/including.additional.resources/including.additional.resources.mixin'\r\n], function (_, Backbone, Url, ExpandableMixin, ResourceMixin,\r\n    IncludingAdditionalResourcesMixin) {\r\n  'use strict';\r\n\r\n  var AuthenticatedUserNodePermissionModel = Backbone.Model.extend({\r\n    constructor: function AuthenticatedUserNodePermissionModel(attributes, options) {\r\n      options || (options = {});\r\n\r\n      Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n\r\n      this.makeResource(options)\r\n          .makeIncludingAdditionalResources(options)\r\n          .makeExpandable(options);\r\n      this.options= options;\r\n    },\r\n\r\n    clone: function () {\r\n      return new this.constructor(this.attributes, {\r\n        connector: this.connector\r\n      });\r\n    },\r\n\r\n    url: function () {\r\n      var selectedNodeId = this.node ? this.node.get('id') : this.options.node.get('id'),\r\n          userId         = this.options.user.get('id');\r\n      var apiBase = new Url(this.connector.connection.url).getApiBase('v2'),\r\n          url     = Url.combine(apiBase, '/nodes/', selectedNodeId, '/permissions/effective/',\r\n              userId);\r\n\r\n      return url;\r\n    },\r\n\r\n    parse: function (response) {\r\n      var permissions = response.results && response.results.data && response.results.data.permissions;\r\n      if (permissions) {\r\n        if (this.node && !this.node.get('container') && permissions.permissions.indexOf('add_items') !== -1) {\r\n          permissions.permissions.splice(permissions.permissions.indexOf('add_items'), 1);\r\n        }\r\n      } else {\r\n        permissions = {};\r\n      }\r\n      return permissions;\r\n    },\r\n\r\n    hasEditPermissionRights:function () {\r\n      //Added check to provide edit rights to wiki pages(i.e. HTML widgets) only\r\n      /*var nodeType = this.node ? this.node.get('type') : this.options.node.get('type');\r\n      if(nodeType !== 5574) { //Wiki page type- 5574\r\n        return false;\r\n      }*/\r\n      if (this.node && this.node.get(\"permissions_model\") === \"simple\") {\r\n        return false;\r\n      }\r\n      var permissons=this.get(\"permissions\");\r\n      return permissons && _.isArray(permissons) && _.contains(permissons,'edit_permissions');\r\n    }\r\n  });\r\n\r\n  IncludingAdditionalResourcesMixin.mixin(AuthenticatedUserNodePermissionModel.prototype);\r\n  ExpandableMixin.mixin(AuthenticatedUserNodePermissionModel.prototype);\r\n  ResourceMixin.mixin(AuthenticatedUserNodePermissionModel.prototype);\r\n\r\n  return AuthenticatedUserNodePermissionModel;\r\n});\r\n\n","csui.define('csui/models/server.adaptors/favorite2.mixin',[\r\n  'csui/lib/underscore', 'csui/utils/url'\r\n], function (_, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      var superParseMethod = prototype.parse;\r\n      var superSyncMethod = prototype.sync;\r\n\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n\r\n        parse: function (response, options) {\r\n          if (response.results) {\r\n            response = response.results;\r\n          }\r\n          if (_.isEmpty(response)) {\r\n            return {};\r\n          } else {\r\n            if (options.attrs) {\r\n              var updatedAttributes = {};\r\n              _.each(_.keys(options.attrs), function (attr) {\r\n                updatedAttributes['favorite_' + attr] = options.attrs[attr];\r\n              }, this);\r\n              return updatedAttributes;\r\n            } else {\r\n              if (response.data && response.data.properties && response.data.favorites) {\r\n                response.data.properties.favorite_name = response.data.favorites.name;\r\n                response.data.properties.favorite_tab_id = response.data.favorites.tab_id;\r\n              }\r\n\r\n              var m = superParseMethod.call(this, response);\r\n\r\n              if (m.actions) {\r\n                m.actions = _.reject(m.actions,\r\n                  function (action) {\r\n                    return action.signature == 'rename' || action.signature == 'delete';\r\n                  });\r\n                m.actions.push({signature: 'favorite_rename'});\r\n\r\n                // console.log(\"NODE ACTIONS\");\r\n                // _.each(m.actions, function(a) {\r\n                //   console.log(a.signature);\r\n                // });\r\n              }\r\n              return m;\r\n            }\r\n          }\r\n        },\r\n\r\n        sync: function (method, model, options) {\r\n          var useFavoritesUrl = false;\r\n          if (method === 'update' || method === 'patch') {\r\n\r\n            // if attr key starts with 'favorite_' do the update on the /members/favorites url but\r\n            // remove the prefix to have the original attribute-name from the favorite model\r\n            // otherwise, just pass the attribute-to-update as it is and use the url from he\r\n            // original node model\r\n            var prefix = 'favorite_';\r\n            var attributesToUpdate = {};\r\n            _.each(_.keys(options.attrs), function (k) {\r\n              var newKey = k;\r\n              if (k.indexOf(prefix) === 0) {\r\n                useFavoritesUrl = true;\r\n                newKey = k.substr(prefix.length);\r\n              }\r\n              attributesToUpdate[newKey] = options.attrs[k];\r\n            });\r\n            options.attrs = attributesToUpdate;\r\n            if (useFavoritesUrl) {\r\n              var url = this.connector.getConnectionUrl().getApiBase('v2');\r\n              url = Url.combine(url, '/members/favorites');\r\n              url = Url.combine(url, model.id);\r\n\r\n              options.url = url;\r\n            }\r\n          }\r\n          return superSyncMethod.call(this, method, model, options);\r\n        }\r\n\r\n      });\r\n    }\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/models/favorite2',['csui/lib/underscore', 'csui/lib/backbone', 'csui/utils/url', 'csui/models/node/node.model',\r\n  'csui/models/server.adaptors/favorite2.mixin', 'csui/utils/deepClone/deepClone'\r\n], function (_, Backbone, Url, NodeModel, ServerAdaptorMixin) {\r\n  'use strict';\r\n\r\n  var Favorite2Model = NodeModel.extend({\r\n\r\n    mustRefreshAfterPut: false,\r\n\r\n    idAttribute: 'id',\r\n\r\n    constructor: function Favorite2Model(attributes, options) {\r\n      NodeModel.prototype.constructor.apply(this, arguments);\r\n      this.makeServerAdaptor(options);\r\n    }\r\n  });\r\n\r\n  ServerAdaptorMixin.mixin(Favorite2Model.prototype);\r\n\r\n  return Favorite2Model;\r\n});\r\n\n","csui.define('csui/models/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/models/impl/nls/root/lang',{\r\n  serverCallPrecheckFailedMissingConnector: 'Missing connector data for server call.',\r\n  serverCallPrecheckFailedModelIsNew: 'Model is new.',\r\n\r\n  fav_parent_id: 'Location',\r\n  fav_favorite_name: 'Name',\r\n  fav_size: 'Size',\r\n  fav_ungrouped: 'Ungrouped',\r\n\r\n  name: \"Name\",\r\n  type: \"Type\",\r\n  version: \"Version\",\r\n  state: \"State\",\r\n  favorite: \"Favorite\",\r\n  toggleDetails: \"Toggle Details\",\r\n  parentID: \"Parent ID\"\r\n});\r\n\n","\n","csui.define('csui/models/favorite2column',['csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/utils/url',\r\n  'i18n!csui/models/impl/nls/lang'\r\n], function (_, Backbone,\r\n    Url,\r\n    lang) {\r\n  'use strict';\r\n\r\n  var Favorite2ColumnModel = Backbone.Model.extend({\r\n\r\n    idAttribute: null,\r\n\r\n    constructor: function Favorite2ColumnModel(attributes, options) {\r\n      if (attributes && !attributes.title) {\r\n        var columnKey = 'fav_' + attributes.column_key;\r\n        attributes.title = lang[columnKey];\r\n      }\r\n      Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n    }\r\n\r\n  });\r\n\r\n  return Favorite2ColumnModel;\r\n});\r\n\n","csui.define('csui/models/favorite2columns',['csui/lib/underscore', 'csui/lib/backbone', 'csui/models/favorite2column', 'i18n!csui/models/impl/nls/lang'\r\n], function (_, Backbone, Favorite2ColumnModel, modelLang) {\r\n  'use strict';\r\n\r\n  var Favorite2ColumnCollection = Backbone.Collection.extend({\r\n\r\n    model: Favorite2ColumnModel,\r\n\r\n    constructor: function Favorite2ColumnCollection(models, options) {\r\n      if (!models) {\r\n        models = [\r\n          {\r\n            default_action: true,\r\n            key: \"type\",\r\n            name: modelLang.type,\r\n            type: 2\r\n          },\r\n          {\r\n            default_action: true,\r\n            key: \"favorite_name\",\r\n            name: modelLang.name,\r\n            type: -1\r\n          },\r\n          {\r\n            key: \"reserved\", // the column can hold different icons representing state-information, not just the reserved-state.\r\n            name: modelLang.state,\r\n            type: 5\r\n          },\r\n          {\r\n            key: \"parent_id\",\r\n            name: modelLang.parentID,\r\n            type: 2\r\n          },\r\n          {\r\n            key: \"favorite\",\r\n            name: modelLang.favorite,\r\n            type: 5\r\n          }\r\n        ];\r\n        models.forEach(function (column, index) {\r\n          column.definitions_order = index + 100;\r\n          column.column_key = column.key;\r\n        });\r\n      }\r\n      Backbone.Collection.prototype.constructor.call(this, models, options);\r\n    }\r\n\r\n  });\r\n\r\n  return Favorite2ColumnCollection;\r\n});\r\n\n","csui.define('csui/models/server.adaptors/favorites2.mixin',[\r\n  'csui/lib/underscore', 'csui/utils/url'\r\n], function (_, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n\r\n        url: function () {\r\n          // this.setExpand('favorites', 'tab_id');\r\n          var url   = this.connector.getConnectionUrl().getApiBase('v2'),\r\n              query = Url.combineQueryString(\r\n                  this.getAdditionalResourcesUrlQuery(),\r\n                  this.getResourceFieldsUrlQuery(),\r\n                  this.getExpandableResourcesUrlQuery(),\r\n                  this.getStateEnablingUrlQuery(),\r\n                  this.getRequestedCommandsUrlQuery(),\r\n                  this.getSortByOrderUrlQuery()\r\n              );\r\n          url = Url.combine(url, '/members/favorites');\r\n          return query ? url + '?' + query : url;\r\n        },\r\n\r\n        getSortByOrderUrlQuery: function () {\r\n          return {sort: 'order'};\r\n        },\r\n\r\n        parse: function (response, options) {\r\n          this.parseBrowsedState({results: response}, options);\r\n          // don't parse columns here, because they are hardcoded in the constructor of Favorite2ColumnCollection\r\n          return this.parseBrowsedItems(response, options);\r\n        }\r\n\r\n      });\r\n    }\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/models/favorites2',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/models/mixins/connectable/connectable.mixin',\r\n  'csui/models/mixins/fetchable/fetchable.mixin',\r\n  'csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin',\r\n  'csui/models/mixins/v2.fields/v2.fields.mixin',\r\n  'csui/models/mixins/v2.expandable/v2.expandable.mixin',\r\n  'csui/models/mixins/state.requestor/state.requestor.mixin',\r\n  'csui/models/mixins/v2.commandable/v2.commandable.mixin',\r\n  'csui/models/browsable/client-side.mixin',\r\n  'csui/models/browsable/v2.response.mixin',\r\n  'csui/models/mixins/v2.delayed.commandable/v2.delayed.commandable.mixin',\r\n  'csui/models/favorite2',\r\n  'csui/models/favorite2columns',\r\n  'csui/models/server.adaptors/favorites2.mixin',\r\n  'csui/utils/deepClone/deepClone'\r\n], function (_, Backbone,\r\n    ConnectableMixin,\r\n    FetchableMixin,\r\n    AdditionalResourcesV2Mixin,\r\n    FieldsV2Mixin,\r\n    ExpandableV2Mixin,\r\n    StateRequestorMixin,\r\n    CommandableV2Mixin,\r\n    ClientSideBrowsableMixin,\r\n    BrowsableV2ResponseMixin,\r\n    DelayedCommandableV2Mixin,\r\n    Favorite2Model,\r\n    Favorite2ColumnCollection,\r\n    ServerAdaptorMixin) {\r\n  'use strict';\r\n\r\n  var Favorite2Collection = Backbone.Collection.extend({\r\n\r\n    model: Favorite2Model,\r\n\r\n    constructor: function Favorite2Collection(attributes, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n\r\n      this.callCounter = 0;\r\n\r\n      // Support collection cloning\r\n      if (options) {\r\n        this.options = _.pick(options, ['connector', 'autoreset',\r\n          'includeResources', 'fields', 'expand', 'commands']);\r\n      }\r\n\r\n      this.makeConnectable(options)\r\n          .makeFetchable(options)\r\n          .makeAdditionalResourcesV2Mixin(options)\r\n          .makeFieldsV2(options)\r\n          .makeExpandableV2(options)\r\n          .makeStateRequestor(options)\r\n          .makeCommandableV2(options)\r\n          .makeClientSideBrowsable(options)\r\n          .makeBrowsableV2Response(options)\r\n          .makeDelayedCommandableV2(options)\r\n          .makeServerAdaptor(options);\r\n\r\n      this.columns = new Favorite2ColumnCollection(options.columns);\r\n    },\r\n\r\n    _prepareModel: function (attrs, options) {\r\n      options || (options = {});\r\n      options.promotedActionCommands = this.promotedActionCommands;\r\n      options.nonPromotedActionCommands = this.nonPromotedActionCommands;\r\n      return Backbone.Collection.prototype._prepareModel.call(this, attrs, options);\r\n    },\r\n\r\n    clone: function () {\r\n      // Provide the options; they may include connector and other parameters\r\n      var clone = new this.constructor(this.models, {\r\n        connector: this.connector,\r\n        fields: _.deepClone(this.fields),\r\n        expand: _.deepClone(this.expand),\r\n        includeResources: _.clone(this._additionalResources),\r\n        skip: this.skipCount,\r\n        top: this.topCount,\r\n        filter: _.deepClone(this.filters),\r\n        orderBy: this.orderBy,\r\n        commands: _.clone(this.commands),\r\n        defaultActionCommands: _.clone(this.defaultActionCommands),\r\n        delayRestCommands: this.delayRestCommands\r\n      });\r\n\r\n      // Clone sub-models not covered by Backbone\r\n      if (this.columns) {\r\n        clone.columns.reset(this.columns.toJSON());\r\n      }\r\n      // Clone properties about the full (not-yet fetched) collection\r\n      clone.actualSkipCount = this.actualSkipCount;\r\n      clone.totalCount = this.totalCount;\r\n      clone.filteredCount = this.filteredCount;\r\n      return clone;\r\n    },\r\n\r\n    getResourceScope: function () {\r\n      return _.deepClone({\r\n        fields: this.fields,\r\n        expand: this.expand,\r\n        includeResources: this._additionalResources,\r\n        commands: this.commands,\r\n        defaultActionCommands: this.defaultActionCommands\r\n      });\r\n    },\r\n\r\n    setResourceScope: function (scope) {\r\n      this.excludeResources();\r\n      scope.includeResources && this.includeResources(scope.includeResources);\r\n      this.resetFields();\r\n      scope.fields && this.setFields(scope.fields);\r\n      this.resetExpand();\r\n      scope.expand && this.setExpand(scope.expand);\r\n      this.resetCommands();\r\n      scope.commands && this.setCommands(scope.commands);\r\n      this.resetDefaultActionCommands();\r\n      scope.defaultActionCommands && this.setDefaultActionCommands(scope.defaultActionCommands);\r\n    }\r\n\r\n  });\r\n\r\n  ClientSideBrowsableMixin.mixin(Favorite2Collection.prototype);\r\n  BrowsableV2ResponseMixin.mixin(Favorite2Collection.prototype);\r\n  ConnectableMixin.mixin(Favorite2Collection.prototype);\r\n  FetchableMixin.mixin(Favorite2Collection.prototype);\r\n  AdditionalResourcesV2Mixin.mixin(Favorite2Collection.prototype);\r\n  FieldsV2Mixin.mixin(Favorite2Collection.prototype);\r\n  ExpandableV2Mixin.mixin(Favorite2Collection.prototype);\r\n  StateRequestorMixin.mixin(Favorite2Collection.prototype);\r\n  CommandableV2Mixin.mixin(Favorite2Collection.prototype);\r\n  DelayedCommandableV2Mixin.mixin(Favorite2Collection.prototype);\r\n  ServerAdaptorMixin.mixin(Favorite2Collection.prototype);\r\n\r\n  return Favorite2Collection;\r\n\r\n});\r\n\n","csui.define('csui/models/favorite2group',[\r\n  'csui/lib/underscore', 'csui/lib/backbone', 'csui/utils/url',\r\n  'csui/models/mixins/resource/resource.mixin',\r\n  'csui/models/mixins/uploadable/uploadable.mixin',\r\n  'csui/models/favorites2', 'csui/utils/deepClone/deepClone'\r\n], function (_, Backbone, Url, ResourceMixin, UploadableMixin,\r\n   Favorite2Collection) {\r\n  'use strict';\r\n\r\n  var Favorite2GroupModel = Backbone.Model.extend({\r\n    mustRefreshAfterPut: false,\r\n\r\n    idAttribute: 'tab_id',\r\n\r\n    constructor: function Favorite2GroupModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n\r\n      this.makeResource(options);\r\n      this.makeUploadable(options);\r\n\r\n      // initialize favorites of this group with provided favorites and columns\r\n      attributes || (attributes = {});\r\n\r\n      this.favorites = new Favorite2Collection(attributes.favorites, {\r\n        connector: options.connector,\r\n        autoreset: true,\r\n        tab_id: this.get('tab_id'),\r\n        columns: attributes.favorite_columns,\r\n        commands: options && options.commands,\r\n        stateEnabled: options.stateEnabled,\r\n      });\r\n    },\r\n\r\n    urlRoot: function () {\r\n      var v2Url = this.connector.getConnectionUrl().getApiBase('v2');\r\n      var url = Url.combine(v2Url, \"/members/favorites/tabs/\");\r\n      return url;\r\n    },\r\n\r\n    parse: function (resp, options) {\r\n      if (resp.results && resp.results.data) {\r\n        return {tab_id: resp.results.data.tab_id};\r\n      } else {\r\n        return resp;\r\n      }\r\n    }\r\n  });\r\n\r\n  ResourceMixin.mixin(Favorite2GroupModel.prototype);\r\n  UploadableMixin.mixin(Favorite2GroupModel.prototype);\r\n\r\n  return Favorite2GroupModel;\r\n});\r\n\n","csui.define('csui/models/server.adaptors/favorite2groups.mixin',[\r\n  'csui/lib/jquery', 'csui/lib/underscore', 'csui/utils/url', 'i18n!csui/models/impl/nls/lang'\r\n], function ($, _, Url, lang) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n\r\n        sync: function (method, model, options) {\r\n          if (method !== 'read') {\r\n            throw new Error('Only fetching groups with favorites is supported.');\r\n          }\r\n          var groups = this.connector.makeAjaxCall({url: this.url()})\r\n            .then(function (response) {\r\n              return response;\r\n            });\r\n\r\n          var favoritesCollection = this.favorites;\r\n          var favoritesFetchOptions = _.omit(options, ['success', 'error']);\r\n          var favorites = favoritesCollection.fetch(favoritesFetchOptions)\r\n            .then(function (response) {\r\n              return favoritesCollection; // need full object, including columns when merging\r\n            });\r\n\r\n          // Groups will be parsed by _createMergedResponse,\r\n          // favorites were parsed by Favorite2Collection.\r\n          options.parse = false;\r\n\r\n          return this.syncFromMultipleSources([groups, favorites], this._createMergedResponse, options);\r\n        },\r\n\r\n        _createMergedResponse: function (groups, favoritesCollection, options) {\r\n          var favorites = favoritesCollection.toJSON();\r\n          var columns = favoritesCollection.columns;\r\n          // add \"Unspecified group\"\r\n          groups.results.push({data: {name: lang.fav_ungrouped, order: -1, tab_id: -1}});\r\n          var merged = groups.results.map(function (group) {\r\n            group = group.data;\r\n\r\n            var tabId = group.tab_id;\r\n            group.favorites = favorites.filter(function (favorite) {\r\n              return favorite.favorite_tab_id === tabId || tabId === -1 && favorite.favorite_tab_id ===\r\n                null;\r\n            });\r\n            group.favorite_columns = columns.toJSON(); //\r\n            return group;\r\n          });\r\n\r\n          return merged;\r\n        },\r\n\r\n        parse: function (response, options) {\r\n          return response;\r\n        },\r\n\r\n        url: function () {\r\n          // this.setExpand('favorites', 'tab_id');\r\n          var url = this.connector.getConnectionUrl().getApiBase('v2'),\r\n            query = Url.combineQueryString(\r\n              this.getAdditionalResourcesUrlQuery(),\r\n              this.getResourceFieldsUrlQuery(),\r\n              this.getExpandableResourcesUrlQuery(),\r\n              this.getSortByOrderUrlQuery()\r\n              // this.getRequestedCommandsUrlQuery()\r\n            );\r\n          url = Url.combine(url, '/members/favorites/tabs');\r\n          return query ? url + '?' + query : url;\r\n        }\r\n\r\n      });\r\n    }\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/models/favorite2groups',['csui/lib/jquery',\r\n  'csui/lib/underscore', 'csui/lib/backbone', 'csui/utils/url',\r\n  'csui/utils/base',\r\n  'csui/models/mixins/syncable.from.multiple.sources/syncable.from.multiple.sources.mixin',\r\n  'csui/models/mixins/connectable/connectable.mixin',\r\n  'csui/models/mixins/fetchable/fetchable.mixin',\r\n  'csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin',\r\n  'csui/models/mixins/v2.fields/v2.fields.mixin',\r\n  'csui/models/mixins/v2.expandable/v2.expandable.mixin',\r\n  'csui/models/mixins/state.requestor/state.requestor.mixin',\r\n  'csui/models/favorite2group', 'csui/models/favorites2',\r\n  'csui/models/server.adaptors/favorite2groups.mixin',\r\n  'i18n!csui/models/impl/nls/lang'\r\n], function ($, _, Backbone, Url, base, ConnectableMixin, FetchableMixin,\r\n    AdditionalResourcesV2Mixin, FieldsV2Mixin, ExpandableV2Mixin,\r\n    StateRequestorMixin, SyncableFromMultipleSources,\r\n    Favorite2GroupModel, Favorite2Collection, ServerAdaptorMixin, lang) {\r\n  'use strict';\r\n\r\n  var Favorite2GroupsCollection = Backbone.Collection.extend({\r\n    model: Favorite2GroupModel,\r\n\r\n    constructor: function Favorite2GroupsCollection(attributes, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n\r\n      // Support collection cloning\r\n      if (options) {\r\n        this.options = _.pick(options, ['connector', 'autoreset',\r\n          'includeResources', 'fields', 'expand' /*, 'commands'*/]);\r\n      }\r\n\r\n      this.makeConnectable(options)\r\n          .makeFetchable(options)\r\n          .makeAdditionalResourcesV2Mixin(options)\r\n          .makeFieldsV2(options)\r\n          .makeExpandableV2(options)\r\n          .makeServerAdaptor(options)\r\n          .makeStateRequestor(options);\r\n\r\n      if (options) {\r\n        this.favorites = options.favorites;\r\n        this.commands = options.commands;\r\n      }\r\n      if (!this.favorites) {\r\n        this.favorites = new Favorite2Collection(undefined, {\r\n          connector: this.connector,\r\n          autoreset: true,\r\n          commands: this.commands\r\n        });\r\n      }\r\n      this.on('sync', this._setupEventPropagation, this);\r\n      this.on('add', this._propagateFavorite2CollectionOptions, this);\r\n      this.on('reset', function (groups, options) {\r\n        var self = this;\r\n        groups.each(function (group) {\r\n          self._propagateFavorite2CollectionOptions(group, groups, options);\r\n        });\r\n      }, this);\r\n    },\r\n\r\n    _fetch: function (options) {\r\n      options || (options = {});\r\n      options.originalSilent = options.silent;\r\n      // make this fetch silent, because another fetch is done at then reset\r\n      //  event is triggered\r\n      options.silent = true;\r\n\r\n      return this.originalFetch.call(this, options);\r\n    },\r\n\r\n    _prepareModel: function (attrs, options) {\r\n      options || (options = {});\r\n      options.commands = this.commands;\r\n      // this should not be needed, but Favorite2Model uses its own server adaptor mixin, which\r\n      // overwrites some of the URL handling...\r\n      options.stateEnabled = this.stateEnabled;\r\n      return Backbone.Collection.prototype._prepareModel.call(this, attrs, options);\r\n    },\r\n\r\n    _setupEventPropagation: function () {\r\n      var self = this;\r\n      this.each(function (group) {\r\n        group.favorites.listenTo(group.favorites, \"reset update\",\r\n            function (favoritesCollection, options) {\r\n              self.trigger('update', self, options);\r\n            });\r\n\r\n      }, this);\r\n    },\r\n\r\n    // Note: this.favorites is the collection that was used to set the resource scope and when group\r\n    // plus the favorites are being merged, reset is triggered for all groups, which then\r\n    // already have the favorites. Then the options get copied or cloned from the original\r\n    // collection to each favorite collection of each group.\r\n    // This is necessary, because if a model of those favorite collections is saved and fetched\r\n    // again, the options from the collection are used if not set at the single model. Otherwise\r\n    // a single favorite model would be fetched without commands, expands, etc.\r\n    _propagateFavorite2CollectionOptions: function (group, collection, options) {\r\n      group.favorites.setFilter(_.deepClone(this.favorites.filters), false);\r\n      group.favorites.setOrder(this.favorites.orderBy, false);\r\n      group.favorites.setFields(_.deepClone(this.favorites.fields));\r\n      group.favorites.setExpand(_.deepClone(this.favorites.expand));\r\n      if (this.favorites.commands) {\r\n        group.favorites.setCommands(this.favorites.commands);\r\n      }\r\n      group.favorites.promotedActionCommands = this.favorites.promotedActionCommands;\r\n      group.favorites.nonPromotedActionCommands = this.favorites.nonPromotedActionCommands;\r\n      group.favorites.each(function (favorite) {\r\n        favorite.promotedActionCommands = group.favorites.promotedActionCommands;\r\n        favorite.nonPromotedActionCommands = group.favorites.nonPromotedActionCommands;\r\n      });\r\n    },\r\n\r\n    clone: function () {\r\n      var clone = new this.constructor(this.models, {\r\n        // node: this.node,\r\n        // skip: this.skipCount,\r\n        // top: this.topCount,\r\n        connector: this.connector,\r\n        filter: _.deepClone(this.filters),\r\n        orderBy: this.orderBy,\r\n        fields: _.clone(this.fields),\r\n        expand: _.clone(this.expand),\r\n        commands: _.clone(this.commands),\r\n        favorites: this.favorites.clone()\r\n      });\r\n\r\n      return clone;\r\n    },\r\n\r\n    getSortByOrderUrlQuery: function () {\r\n      return {sort: 'order'};\r\n    },\r\n\r\n    // private: reset the collection\r\n    resetCollection: function (models, options) {\r\n      this.reset(models, options);\r\n      this.fetched = true;\r\n    },\r\n\r\n    // todo: this should be a PUT to /members/favorites/tabs with the following hierarchical\r\n    // structure (and it should be moved to the favorites2groups model):\r\n\r\n    // var tabs = [\r\n    //   {\r\n    //     name: \"first group\",\r\n    //     favorites: [\r\n    //       {\r\n    //         name: \"Document for review\",\r\n    //         size: 20099790,\r\n    //         favorite_name: \"Favorite of Document for review\"\r\n    //         // more attributes follow ...\r\n    //       },\r\n    //       {\r\n    //         name: \"Specification\",\r\n    //         size: 98898690,\r\n    //         favorite_name: \"Pump Specification\"\r\n    //         // more attributes follow ...\r\n    //       }\r\n    //     ]\r\n    //   },\r\n    //   {\r\n    //     name: \"second group\",\r\n    //     favorites: [\r\n    //       {\r\n    //         name: \"My Presentation\",\r\n    //         size: 987078,\r\n    //         favorite_name: \"The Presentation for all Managers\"\r\n    //         // more attributes follow ...\r\n    //       }\r\n    //     ]\r\n    //   }\r\n    // ];\r\n\r\n    saveAll: function () {\r\n      var self = this;\r\n      var tabs = this.map(function (group) {\r\n        var groupName;\r\n        var groupId = group.get('tab_id');\r\n        if (groupId == -1) {\r\n          groupName = null; // the ungrouped group has no name\r\n        } else {\r\n          groupName = group.get('name');\r\n        }\r\n        return {\r\n          name: groupName, tab_id: groupId, favorites: group.favorites.map(function (favorite) {\r\n            return {\r\n              id: favorite.get('id'),\r\n              name: favorite.get('favorite_name')\r\n            };\r\n          })\r\n        };\r\n      });\r\n\r\n      // this makes a formdata request\r\n      var putUrl = this.connector.getConnectionUrl().getApiBase('v2');\r\n      putUrl = Url.combine(putUrl, '/csui/favorites');\r\n\r\n      // callCounter is for detecting parallel REST calls and to use only response from latest\r\n      this.callCounter++;\r\n\r\n      var options = {\r\n        type: 'PUT',\r\n        url: putUrl,\r\n        data: tabs,\r\n        beforeSend: function (request, settings) {\r\n          request.counter = self.callCounter;\r\n        }\r\n      };\r\n\r\n      var deferred = $.Deferred();\r\n      var jqxhr = this.connector.makeAjaxCall(options);\r\n      jqxhr.then(function (response) {\r\n        if (jqxhr.counter < self.callCounter) {\r\n          // let the caller ignore the results, because a new save operation was already started\r\n          deferred.reject();\r\n        } else {\r\n          // get new tab_ids because with bulk update call, the server invalidates all tab_ids\r\n          options = {\r\n            type: 'GET',\r\n            url: self.url()\r\n          };\r\n          var jqxhrTabs = self.connector.makeAjaxCall(options)\r\n              .then(function (tabsResp) {\r\n                if (tabsResp.results && tabsResp.results instanceof Array) {\r\n                  // merge the retrieved tab_id and order attributes with the existing models: the\r\n                  // order of the returned list is the same as the order in this collection.\r\n                  // Associate the models one by one, because the sequence is the same (if\r\n                  // nothing changed them again in the meanwhile at the server)\r\n                  // Note, this collection has at the end an additional group with tab_id = -1,\r\n                  // which is the Ungrouped favorite group. This never changes. It's always at\r\n                  // the end.\r\n\r\n                  tabsResp.results.forEach(function (elem, index) {\r\n                    if (elem.data) {\r\n                      var group = self.at(index);\r\n                      // must remove the group from the collection and add it again before\r\n                      // changing the id (in this case tab_id) to let backbone update the byId\r\n                      // structure correctly. this is a hack!\r\n                      self.remove(group, {silent: true});\r\n                      group.set('tab_id', elem.data.tab_id, {silent: true});\r\n                      self.add(group, {at: index, silent: true});\r\n\r\n                      group.set('order', elem.data.order, {silent: true});\r\n                      // also update the tab_id stored in each favorite too, just in case\r\n                      // anybody is using this...\r\n                      for (var i = 0; i < group.favorites.length; i++) {\r\n                        var favorite = group.favorites.at(i);\r\n                        // do the hack also here to let backbone update the byId structure\r\n                        group.favorites.remove(favorite, {silent: true});\r\n                        favorite.set('favorite_tab_id', elem.data.tab_id, {silent: true});\r\n                        group.favorites.add(favorite, {at: i, silent: true});\r\n                      }\r\n                    }\r\n                  });\r\n\r\n                }\r\n                deferred.resolve(response);\r\n                self.trigger('bulk:update:succeed');\r\n              }, function (jqxhrTabs, statusText) {\r\n                var errorTabs = new base.RequestErrorMessage(jqxhrTabs);\r\n                deferred.reject(errorTabs);\r\n                self.trigger('bulk:update:fail');\r\n              });\r\n        }\r\n      }, function (jqxhr, statusText) {\r\n        // if self.callCounter is already higher than the stored value of this request, then\r\n        // a newer request was already started -> ignore the error in that case.\r\n        if (jqxhr.counter < self.callCounter) {\r\n          deferred.reject();\r\n        } else {\r\n          var error = new base.RequestErrorMessage(jqxhr);\r\n          deferred.reject(error);\r\n        }\r\n        self.trigger('bulk:update:fail');\r\n      });\r\n      return deferred.promise();\r\n    }\r\n  });\r\n\r\n  ConnectableMixin.mixin(Favorite2GroupsCollection.prototype);\r\n  FetchableMixin.mixin(Favorite2GroupsCollection.prototype);\r\n  AdditionalResourcesV2Mixin.mixin(Favorite2GroupsCollection.prototype);\r\n  FieldsV2Mixin.mixin(Favorite2GroupsCollection.prototype);\r\n  ExpandableV2Mixin.mixin(Favorite2GroupsCollection.prototype);\r\n  SyncableFromMultipleSources.mixin(Favorite2GroupsCollection.prototype);\r\n  ServerAdaptorMixin.mixin(Favorite2GroupsCollection.prototype);\r\n  StateRequestorMixin.mixin(Favorite2GroupsCollection.prototype);\r\n\r\n  return Favorite2GroupsCollection;\r\n});\r\n\n","csui.define('csui/models/server.adaptors/favorite.model.mixin',[\r\n  'csui/lib/jquery', 'csui/lib/underscore', 'csui/utils/url', 'i18n!csui/models/impl/nls/lang'\r\n], function ($, _, Url, lang) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n\r\n        url: function () {\r\n          return Url.combine(this.options.connector.getConnectionUrl().getApiBase('v2'),\r\n            'members/favorites', this.get('id'));\r\n        },\r\n\r\n        _serverCallPreCheck: function () {\r\n          if (this.isNew()) {\r\n            return {error: lang.serverCallPrecheckFailedModelIsNew};\r\n          }\r\n          if (!this.options || !this.options.connector) {\r\n            return {error: lang.serverCallPrecheckFailedMissingConnector};\r\n          }\r\n          return undefined;\r\n        },\r\n\r\n        _serverCallUpdateFavorite: function (ajaxMethod, deferred, selected) {\r\n          var error = this._serverCallPreCheck();\r\n          if (error !== undefined) {\r\n            deferred.reject(error);\r\n            return;\r\n          }\r\n\r\n          var options = {\r\n            type: ajaxMethod,\r\n            url: this.url()\r\n          };\r\n\r\n          if (ajaxMethod === 'POST') {\r\n            var tabId = this.get('tab_id');\r\n            var name = this.get('name');\r\n            // do this check for code backward compatibility\r\n            if (tabId !== undefined || name !== undefined) {\r\n              var data = {};\r\n              name !== undefined && _.extend(data, {name: name});\r\n              (tabId !== undefined && tabId !== -1) && _.extend(data, {tab_id: tabId});\r\n              _.extend(options, {data: data});\r\n            }\r\n          }\r\n\r\n          this.options.connector.makeAjaxCall(options)\r\n            .done(_.bind(function (resp) {\r\n              this.set('selected', selected);\r\n              if (window.csui && window.csui.mobile) {\r\n                // LPAD-59888: update the favorites list properly by fetching the update node model\r\n                // change does not affect Smart UI\r\n                var selectedNode = this.get('node');\r\n                selectedNode.fetch({\r\n                  force: true\r\n                });\r\n              }\r\n              deferred.resolve(resp);\r\n            }, this))\r\n            .fail(function (err) {\r\n              deferred.reject(err);\r\n            });\r\n        }\r\n\r\n      });\r\n    }\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/models/favorite.model',['csui/lib/jquery', 'csui/lib/underscore', 'csui/lib/backbone', 'csui/utils/base',\r\n  'csui/utils/url', 'csui/models/server.adaptors/favorite.model.mixin', 'i18n!csui/models/impl/nls/lang'\r\n], function ($, _, Backbone, base, Url, ServerAdaptorMixin, lang) {\r\n  \"use strict\";\r\n\r\n  var FavoriteModel = Backbone.Model.extend({\r\n\r\n    constructor: function FavoriteModel(attributes, options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n      this.makeServerAdaptor(options);\r\n    },\r\n\r\n    isNew: function () {\r\n      return this.get('id') === undefined;\r\n    },\r\n\r\n    addToFavorites: function () {\r\n      var deferred = $.Deferred();\r\n      this._serverCallUpdateFavorite('POST', deferred, true);\r\n      return deferred.promise();\r\n    },\r\n\r\n    removeFromFavorites: function () {\r\n      var deferred = $.Deferred();\r\n      this._serverCallUpdateFavorite('DELETE', deferred, false);\r\n      return deferred.promise();\r\n    }\r\n\r\n  });\r\n\r\n  ServerAdaptorMixin.mixin(FavoriteModel.prototype);\r\n  return FavoriteModel;\r\n\r\n});\r\n\n","csui.define('csui/models/permission/permission.action.server.adaptor.mixin',[\r\n  'csui/lib/underscore', 'csui/utils/url'\r\n], function (_, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n\r\n        urlBase: function () {\r\n          var type              = this.get('type'),\r\n              right_id          = this.get('right_id'),\r\n              nodeId            = this.nodeId,\r\n              apply_to          = this.apply_to,\r\n              include_sub_types = this.include_sub_types,\r\n              queryString       = \"\",\r\n              url               = this.options.connector.getConnectionUrl().getApiBase('v2');\r\n          if (!_.isNumber(nodeId) || nodeId > 0) {\r\n            // Add an existing node by VERB /nodes/:id\r\n            url = Url.combine(url, 'nodes', nodeId, 'permissions');\r\n            if (apply_to) {\r\n              queryString = Url.combineQueryString(queryString, {apply_to: apply_to});\r\n            }\r\n            if (include_sub_types) {\r\n              _.each(include_sub_types, function (subtype) {\r\n                queryString = Url.combineQueryString(queryString, {include_sub_types: subtype});\r\n              });\r\n            }\r\n\r\n            queryString = queryString.length > 0 ? \"?\" + queryString : queryString;\r\n            if (!type) {\r\n              // Create a new permission model by POST\r\n              url = Url.combine(url, 'custom' + queryString);\r\n            } else if (type !== 'custom') {\r\n              //Access an existing permission model by VERB /:type where type is public/owner/group\r\n              url = Url.combine(url, type + queryString);\r\n            } else if (!_.isNumber(right_id) || right_id > 0) {\r\n              //Access an existing permission model by VERB /custom/:right_id\r\n              url = Url.combine(url, type, right_id + queryString);\r\n            } else {\r\n              throw new Error('Unsupported permission type or user id');\r\n            }\r\n          } else {\r\n            throw new Error('Unsupported id value');\r\n          }\r\n          return url;\r\n        },\r\n\r\n        url: function () {\r\n          var url   = this.urlBase(),\r\n              query = null;\r\n          return query ? url + '?' + query : url;\r\n        },\r\n\r\n        parse: function (response, options) {\r\n          if (this.collection) {\r\n            var addItemsOptionIndex = response.permissions ?\r\n                                      response.permissions.indexOf('add_items') : -1,\r\n                addMajorVersionOptionIndex;\r\n            if (!this.collection.isContainer) {\r\n              if (addItemsOptionIndex !== -1) {\r\n                response.permissions.splice(addItemsOptionIndex, 1);\r\n              }\r\n              addMajorVersionOptionIndex = response.permissions ?\r\n                                           response.permissions.indexOf(\"add_major_version\") : -1;\r\n              if (!(this.collection.options.node &&\r\n                  this.collection.options.node.get('advanced_versioning')) &&\r\n                  addMajorVersionOptionIndex !== -1) {\r\n                response.permissions.splice(addMajorVersionOptionIndex, 1);\r\n              }\r\n            } else {\r\n              addMajorVersionOptionIndex = response.permissions ?\r\n                                           response.permissions.indexOf(\"add_major_version\") : -1;\r\n              if (!(this.collection.options.node &&\r\n                  this.collection.options.node.get('advancedVersioningEnabled')) &&\r\n                  addMajorVersionOptionIndex !== -1) {\r\n                response.permissions.splice(addMajorVersionOptionIndex, 1);\r\n              }\r\n            }\r\n          }\r\n          return response;\r\n        }\r\n      });\r\n    },\r\n\r\n    getPermissionLevel: function (permissions, isContainer, versionControlAdvanced, node, permissionModel) {\r\n      var value,\r\n          permissionsCount = 9;\r\n      if (isContainer) {\r\n        permissionsCount++;\r\n        if (!node.get('advancedVersioningEnabled')) {\r\n          permissionsCount--;\r\n        }\r\n      } else if (!versionControlAdvanced) {\r\n        permissionsCount--;\r\n      }\r\n      if (permissions && permissions.length > 0 && (node.get('permissions_model') !== 'simple')) {\r\n        if (permissions.indexOf(\"edit_permissions\") >= 0 &&\r\n            permissions.length === permissionsCount) {\r\n          value = ServerAdaptorMixin.PERMISSION_LEVEL_FULL_CONTROL;\r\n        } else if (permissions.indexOf(\"edit_permissions\") < 0 &&\r\n                   permissions.indexOf(\"delete\") >= 0 &&\r\n                   permissions.length === (permissionsCount - 1)) {\r\n          value = ServerAdaptorMixin.PERMISSION_LEVEL_WRITE;\r\n        } else if (permissions.indexOf(\"see_contents\") >= 0 &&\r\n                   permissions.length === 2) {\r\n          value = ServerAdaptorMixin.PERMISSION_LEVEL_READ;\r\n        } else {\r\n          value = ServerAdaptorMixin.PERMISSION_LEVEL_CUSTOM;\r\n        }\r\n      } else if (permissions && permissions.length > 0 &&\r\n                 (node.get('permissions_model') === 'simple')) {\r\n        if (permissions.indexOf(\"edit_permissions\") >= 0) {\r\n          value = ServerAdaptorMixin.PERMISSION_LEVEL_FULL_CONTROL;\r\n        } else if (permissions.indexOf(\"edit_permissions\") < 0 &&\r\n                   permissions.indexOf(\"delete\") >= 0) {\r\n          value = ServerAdaptorMixin.PERMISSION_LEVEL_WRITE;\r\n        } else if (permissions.indexOf(\"see_contents\") >= 0 &&\r\n                   permissions.length === 2) {\r\n          value = ServerAdaptorMixin.PERMISSION_LEVEL_READ;\r\n        }\r\n      } else if (permissionModel.get(\"type\") === \"public\" || !!permissionModel.get(\"right_id\")) {\r\n          value = ServerAdaptorMixin.PERMISSION_LEVEL_NONE;\r\n      }\r\n      return value;\r\n    },\r\n\r\n    getReadPermissions: function () {\r\n      return [\"see\", \"see_contents\"];\r\n    },\r\n\r\n    getWritePermissions: function (isContainer, versionControlAdvanced, advancedVersioningEnabled) {\r\n      var permissions = [\"see\", \"see_contents\", \"modify\", \"edit_attributes\", \"add_items\", \"reserve\",\r\n        \"add_major_version\", \"delete_versions\", \"delete\"];\r\n      if (!isContainer) {\r\n        permissions.splice(permissions.indexOf('add_items'), 1);\r\n        if (!versionControlAdvanced) {\r\n          permissions.splice(permissions.indexOf('add_major_version'), 1);\r\n        }\r\n      } else {\r\n        if (!advancedVersioningEnabled) {\r\n          permissions.splice(permissions.indexOf('add_major_version'), 1);\r\n        }\r\n      }\r\n      return permissions;\r\n    },\r\n\r\n    getFullControlPermissions: function (isContainer, versionControlAdvanced,\r\n        advancedVersioningEnabled) {\r\n      var permissions = [\"see\", \"see_contents\", \"modify\", \"edit_attributes\", \"add_items\", \"reserve\",\r\n        \"add_major_version\", \"delete_versions\", \"delete\", \"edit_permissions\"];\r\n      if (!isContainer) {\r\n        permissions.splice(permissions.indexOf('add_items'), 1);\r\n        if (!versionControlAdvanced) {\r\n          permissions.splice(permissions.indexOf('add_major_version'), 1);\r\n        }\r\n      } else {\r\n        if (!advancedVersioningEnabled) {\r\n          permissions.splice(permissions.indexOf('add_major_version'), 1);\r\n        }\r\n      }\r\n      return permissions;\r\n    },\r\n\r\n    getPermissionsByLevelExceptCustom: function (level, isContainer, versionControlAdvanced,\r\n        advancedVersioningEnabled) {\r\n      var permissions = null;\r\n      switch (level) {\r\n      case ServerAdaptorMixin.PERMISSION_LEVEL_NONE:\r\n        permissions = [];\r\n        break;\r\n      case ServerAdaptorMixin.PERMISSION_LEVEL_READ:\r\n        permissions = ServerAdaptorMixin.getReadPermissions();\r\n        break;\r\n      case ServerAdaptorMixin.PERMISSION_LEVEL_WRITE:\r\n        permissions = ServerAdaptorMixin.getWritePermissions(isContainer, versionControlAdvanced,\r\n            advancedVersioningEnabled);\r\n        break;\r\n      case ServerAdaptorMixin.PERMISSION_LEVEL_FULL_CONTROL:\r\n        permissions = ServerAdaptorMixin.getFullControlPermissions(isContainer,\r\n            versionControlAdvanced,\r\n            advancedVersioningEnabled);\r\n        break;\r\n      }\r\n      return permissions;\r\n    }\r\n\r\n  };\r\n\r\n  ServerAdaptorMixin.PERMISSION_LEVEL_NONE = 0;\r\n  ServerAdaptorMixin.PERMISSION_LEVEL_READ = 1;\r\n  ServerAdaptorMixin.PERMISSION_LEVEL_WRITE = 2;\r\n  ServerAdaptorMixin.PERMISSION_LEVEL_FULL_CONTROL = 3;\r\n  ServerAdaptorMixin.PERMISSION_LEVEL_CUSTOM = 4;\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/models/permission/nodepermission.model',[\r\n  'module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/utils/url',\r\n  'csui/models/mixins/connectable/connectable.mixin',\r\n  'csui/models/mixins/uploadable/uploadable.mixin',\r\n  'csui/models/permission/permission.action.server.adaptor.mixin'\r\n], function (module, _, $, Backbone, Url, ConnectableMixin, UploadableMixin, ServerAdaptorMixin) {\r\n  'use strict';\r\n\r\n  var config = _.extend({\r\n    idAttribute: null\r\n  }, module.config());\r\n\r\n  var NodePermissionModel = Backbone.Model.extend({\r\n    idAttribute: config.idAttribute,\r\n\r\n    defaults: {\r\n      \"addEmptyAttribute\": true\r\n    },\r\n\r\n    constructor: function NodePermissionModel(attributes, options) {\r\n      attributes || (attributes = {});\r\n      options || (options = {});\r\n\r\n      Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n\r\n      this.options = _.pick(options, ['connector']);\r\n      this.makeConnectable(options)\r\n          .makeUploadable(options);\r\n    },\r\n\r\n    isNew: function () {\r\n      return !this.get('type') || !(this.has('right_id') || this.get('type') === 'public');\r\n    }\r\n\r\n  }, {\r\n    getPermissionLevel: getPermissionLevel,\r\n    getReadPermissions: ServerAdaptorMixin.getReadPermissions,\r\n    getWritePermissions: ServerAdaptorMixin.getWritePermissions,\r\n    getFullControlPermissions: ServerAdaptorMixin.getFullControlPermissions,\r\n    getPermissionsByLevelExceptCustom: ServerAdaptorMixin.getPermissionsByLevelExceptCustom\r\n  });\r\n\r\n  function getPermissionLevel () {\r\n    return ServerAdaptorMixin.getPermissionLevel(this.get(\"permissions\"),\r\n        this.collection.isContainer, this.collection.options.node &&\r\n                                     this.collection.options.node.get('advanced_versioning'),\r\n        this.collection.options.node, this);\r\n  }\r\n\r\n  NodePermissionModel.prototype.PERMISSION_LEVEL_NONE = NodePermissionModel.PERMISSION_LEVEL_NONE = ServerAdaptorMixin.PERMISSION_LEVEL_NONE;\r\n  NodePermissionModel.prototype.PERMISSION_LEVEL_READ = NodePermissionModel.PERMISSION_LEVEL_READ = ServerAdaptorMixin.PERMISSION_LEVEL_READ;\r\n  NodePermissionModel.prototype.PERMISSION_LEVEL_WRITE = NodePermissionModel.PERMISSION_LEVEL_WRITE = ServerAdaptorMixin.PERMISSION_LEVEL_WRITE;\r\n  NodePermissionModel.prototype.PERMISSION_LEVEL_FULL_CONTROL = NodePermissionModel.PERMISSION_LEVEL_FULL_CONTROL = ServerAdaptorMixin.PERMISSION_LEVEL_FULL_CONTROL;\r\n  NodePermissionModel.prototype.PERMISSION_LEVEL_CUSTOM = NodePermissionModel.PERMISSION_LEVEL_CUSTOM = ServerAdaptorMixin.PERMISSION_LEVEL_CUSTOM;\r\n\r\n  NodePermissionModel.prototype.getPermissionLevel = NodePermissionModel.getPermissionLevel;\r\n  NodePermissionModel.prototype.getReadPermissions = NodePermissionModel.getReadPermissions;\r\n  NodePermissionModel.prototype.getWritePermissions = NodePermissionModel.getWritePermissions;\r\n  NodePermissionModel.prototype.getFullControlPermissions = NodePermissionModel.getFullControlPermissions;\r\n  NodePermissionModel.prototype.getPermissionsByLevelExceptCustom = NodePermissionModel.getPermissionsByLevelExceptCustom;\r\n\r\n  ConnectableMixin.mixin(NodePermissionModel.prototype);\r\n  UploadableMixin.mixin(NodePermissionModel.prototype);\r\n  ServerAdaptorMixin.mixin(NodePermissionModel.prototype);\r\n\r\n  return NodePermissionModel;\r\n});\r\n\n","csui.define('csui/models/permission/permission.response.mixin',[\r\n  'csui/lib/underscore', 'csui/utils/base'\r\n], function (_, base) {\r\n  'use strict';\r\n\r\n  var PermissionResponseMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makePermissionResponse: function (options) {\r\n          return this;\r\n        },\r\n\r\n        /**\r\n         * This method update the response data for the following fields....\r\n         * removes public access record if no permission data exists,\r\n         * @param resp\r\n         * @param options\r\n         */\r\n        parsePermissionResponse: function (resp, options, clearEmptyPermissionModel) {\r\n          if (!!resp.results && !!resp.results.data && !!resp.results.data.permissions &&\r\n              !_.isEmpty(resp.results.data.permissions)) {\r\n            var permissionsList = resp.results.data.permissions;\r\n            if (_.isArray(permissionsList)) {\r\n              //Removing public access entry from response if there is no permissions available\r\n              permissionsList = _.reject(permissionsList,\r\n                  function (child) { return (child.type === 'public' && !child.permissions); });\r\n              var ownerData = _.find(permissionsList, function (item) {\r\n                    return item.type === 'owner';\r\n                  }),\r\n                  groupData = _.find(permissionsList, function (item) {\r\n                    return item.type === 'group';\r\n                  });\r\n              //Removing group entry from response if owner is available and group is not available\r\n              if ((ownerData && ownerData.permissions) && (groupData && !groupData.permissions)) {\r\n                permissionsList = _.reject(permissionsList,\r\n                    function (child) { return (child.type === 'group' && !child.permissions); });\r\n              }\r\n              //Removing owner entry from response if group is available and owner is not available\r\n              if ((ownerData && !ownerData.permissions) && (groupData && groupData.permissions)) {\r\n                permissionsList = _.reject(permissionsList,\r\n                    function (child) { return (child.type === 'owner' && !child.permissions); });\r\n              }\r\n              //Removing group entry from response if there is no permissions available for owner\r\n              // and owner group\r\n              if ((ownerData && !ownerData.permissions) && (groupData && !groupData.permissions)) {\r\n                permissionsList = _.reject(permissionsList,\r\n                    function (child) { return (child.type === 'group' && !child.permissions); });\r\n              }\r\n            } else if (_.isObject(permissionsList)) {\r\n              permissionsList = [];\r\n              if (resp.results.data.permissions &&\r\n                  resp.results.data.permissions.permissions.length > 0) {\r\n                permissionsList.push(resp.results.data.permissions);\r\n              }\r\n            }\r\n            resp.results.data.permissions = permissionsList;\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  return PermissionResponseMixin;\r\n});\r\n\n","csui.define('csui/models/permission/server.adaptor.mixin',[\r\n  'csui/lib/underscore', 'csui/utils/url'\r\n], function (_, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n\r\n        url: function () {\r\n          var url = Url.combine(this.connector.getConnectionUrl().getApiBase('v2'), 'nodes',\r\n              this.options.node.get('id')), query;\r\n          if (!!this.options.memberId) {\r\n            url += '/permissions/effective/' + this.options.memberId;\r\n            query = Url.combineQueryString(\r\n                {\r\n                  expand: 'permissions{right_id}'\r\n                }, query);\r\n          } else {\r\n            query = Url.combineQueryString(\r\n                {\r\n                  fields: ['properties{container, name, type, versions_control_advanced,' +\r\n                           ' permissions_model}',\r\n                    'permissions{right_id, permissions, type}', 'versions{version_id}'],\r\n                  expand: ['permissions{right_id}']\r\n                }, query);\r\n          }\r\n          if (query) {\r\n            url += '?' + query;\r\n          }\r\n\r\n          return url;\r\n        },\r\n\r\n        parse: function (response, options) {\r\n          if (!!response.results && !!response.results.data) {\r\n            this.parsePermissionResponse(response, options, this.options.clearEmptyPermissionModel);\r\n            //Add name in the permission collection\r\n            if (!this.options.node.get(\"isNotFound\")) {\r\n              this.nodeName = response.results.data.properties ? response.results.data.properties.name :\r\n                              \"\";\r\n              if (this.isContainer === undefined || response.results.data.properties) {\r\n                this.isContainer = response.results.data.properties ?\r\n                                   response.results.data.properties.container : true;\r\n              }\r\n              return response.results.data.permissions;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/models/permission/nodeuserpermissions',['module',\r\n  'csui/lib/jquery',\r\n  'csui/lib/underscore',\r\n  'csui/lib/backbone',\r\n  'csui/utils/url',\r\n  'csui/models/permission/nodepermission.model',\r\n  'csui/models/mixins/connectable/connectable.mixin',\r\n  'csui/models/mixins/fetchable/fetchable.mixin',\r\n  'csui/models/browsable/browsable.mixin',\r\n  'csui/models/browsable/v2.response.mixin',\r\n  'csui/models/mixins/v2.expandable/v2.expandable.mixin',\r\n  'csui/models/permission/permission.response.mixin',\r\n  'csui/models/permission/server.adaptor.mixin'\r\n], function (module, $, _, Backbone, Url, NodePermissionModel,\r\n    ConnectableMixin, FetchableMixin, BrowsableMixin,\r\n    BrowsableV2ResponseMixin, ExpandableV2Mixin, PermissionResponseMixin,\r\n    ServerAdaptorMixin) {\r\n  'use strict';\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    defaultPageSize: 30\r\n  });\r\n\r\n  var NodeUserPermissionCollection = Backbone.Collection.extend({\r\n\r\n    model: NodePermissionModel,\r\n\r\n    constructor: function NodeUserPermissionCollection(models, options) {\r\n      options = _.defaults({}, options, {\r\n        top: config.defaultPageSize\r\n      }, options);\r\n\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n\r\n      this.makeFetchable(options);\r\n\r\n      this.options = options;\r\n      this.includeActions = options.includeActions;\r\n      this.query = this.options.query;\r\n\r\n      this.makeConnectable(options)\r\n          .makeFetchable(options)\r\n          .makeBrowsable(options)\r\n          .makeBrowsableV2Response(options)\r\n          .makePermissionResponse(options);\r\n    },\r\n\r\n    isFetchable: function () {\r\n      return true;\r\n    },\r\n\r\n    setOrder: function (attributes, fetch) {\r\n      if (this.orderBy != attributes) {\r\n        this.orderBy = attributes;\r\n        if (fetch !== false) {\r\n          this.fetch({skipSort: false});\r\n        }\r\n        return true;\r\n      }\r\n    },\r\n\r\n    processForEmptyOwner: function () {\r\n      if (!this.findWhere({type: 'owner'}) && !this.findWhere({type: 'group'})) {\r\n        //Add dummy model at index 0, for no owner assigned row\r\n        this.add({permissions: null, right_id: null, type: 'owner'}, {at: 0});\r\n      }\r\n    },\r\n\r\n    addPublicAccess: function (publicAccessModel) {\r\n      if (this.findWhere({type: 'owner'}) && this.findWhere({type: 'group'})) {\r\n        //Add dummy model at index 0, for no owner assigned row\r\n        this.add(publicAccessModel, {at: 2});\r\n      } else {\r\n        //Add public access at index 1, if anyone is present from owner or group\r\n        this.add(publicAccessModel, {at: 1});\r\n      }\r\n    },\r\n\r\n    addOwnerOrGroup: function (nodePermissionModel, flag) {\r\n      var owner = this.findWhere({type: 'owner'});\r\n      if (owner && owner.get('permissions') === null) { //No owner or group\r\n        var currentModel = this.at(0);\r\n        this.remove(currentModel, {silent: flag});\r\n        this.add(nodePermissionModel, {at: 0});\r\n      }\r\n      else {\r\n        this.add(nodePermissionModel, {at: (nodePermissionModel.get('type') === 'owner') ? 0 : 1});\r\n      }\r\n    }\r\n  });\r\n\r\n  FetchableMixin.mixin(NodeUserPermissionCollection.prototype);\r\n  BrowsableMixin.mixin(NodeUserPermissionCollection.prototype);\r\n  BrowsableV2ResponseMixin.mixin(NodeUserPermissionCollection.prototype);\r\n  ConnectableMixin.mixin(NodeUserPermissionCollection.prototype);\r\n  ExpandableV2Mixin.mixin(NodeUserPermissionCollection.prototype);\r\n  PermissionResponseMixin.mixin(NodeUserPermissionCollection.prototype);\r\n  ServerAdaptorMixin.mixin(NodeUserPermissionCollection.prototype);\r\n\r\n  return NodeUserPermissionCollection;\r\n\r\n});\r\n\r\n\n","csui.define('csui/models/server.module/server.module.collection',['module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone'\r\n], function (module, _, $, Backbone) {\r\n  'use strict';\r\n\r\n  // Map with ids as keys and attributes as values\r\n  var sourceModules = module.config().modules || {},\r\n  // Convert the configuration map to an array of model attributes\r\n      serverModules = _.map(sourceModules, function (attributes, id) {\r\n        attributes.id = id;\r\n        return attributes;\r\n      });\r\n\r\n  var ServerModuleModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      id: null,   // Require.js module prefix used by the server module\r\n      title: null // Displayable title of the server module\r\n    },\r\n\r\n    constructor: function ServerModuleModel(attributes, options) {\r\n      ServerModuleModel.__super__.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var ServerModuleCollection = Backbone.Collection.extend({\r\n\r\n    model: ServerModuleModel,\r\n\r\n    constructor: function ServerModuleCollection(models, options) {\r\n      models || (models = serverModules);\r\n      ServerModuleCollection.__super__.constructor.call(this, models, options);\r\n    },\r\n\r\n    sync: function (method, collection, options) {\r\n      if (method !== 'read') {\r\n        throw new Error('Only fetching the server modules is supported.');\r\n      }\r\n      var self = this;\r\n      options || (options = {});\r\n      return this._resolveServerModules()\r\n          .then(function () {\r\n            var response = self.toJSON();\r\n            options.success && options.success(response, options);\r\n            self.trigger('sync', self, response, options);\r\n          });\r\n    },\r\n\r\n    _resolveServerModules: function (options) {\r\n      options = _.extend({}, this.options, options);\r\n      var deferred = $.Deferred(),\r\n          missing = this.find(function (serverModule) {\r\n            var sourceModule = sourceModules[serverModule.id];\r\n            if (sourceModule) {\r\n              serverModule.set(sourceModule.attributes);\r\n            } else {\r\n              if (!options.ignoreErrors) {\r\n                return true;\r\n              }\r\n            }\r\n          });\r\n      if (missing) {\r\n        var error = new Error('Invalid module prefix: ' + missing.id);\r\n        return deferred.reject(error);\r\n      }\r\n      return deferred.resolve().promise();\r\n    }\r\n\r\n  });\r\n\r\n  return ServerModuleCollection;\r\n\r\n});\r\n\n","csui.define('csui/models/specificnodemodel',['csui/lib/underscore', 'csui/lib/backbone', 'csui/utils/url',\r\n  'csui/models/mixins/node.resource/node.resource.mixin'\r\n], function (_, Backbone, Url, NodeResourceMixin) {\r\n  'use strict';\r\n\r\n  var SpecificNodeModel = Backbone.Model.extend({\r\n\r\n    constructor: function SpecificNodeModel(attributes, options) {\r\n      this.options = options || (options = {});\r\n      Backbone.Model.prototype.constructor.call(this, arguments);\r\n      this.makeNodeResource(options);\r\n    },\r\n\r\n    parse: function (response) {\r\n      return response;\r\n    },\r\n\r\n    url: function () {\r\n\r\n      var node   = this.options.node,\r\n          nodeId = node.get('id'),\r\n          url;\r\n      url = _.str.sformat('forms/nodes/properties/specific?id={0}',\r\n          nodeId);\r\n\r\n      return Url.combine(this.options.connector.connection.url, url);\r\n\r\n    }\r\n\r\n  });\r\n\r\n  NodeResourceMixin.mixin(SpecificNodeModel.prototype);\r\n\r\n  return SpecificNodeModel;\r\n\r\n});\r\n\n","csui.define('csui/models/mixins/versions/v2.versions.response.mixin',['csui/lib/underscore'\r\n], function (_) {\r\n  'use strict';\r\n\r\n  var VersionsV2ResponseMixin = {\r\n\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n\r\n        makeVersionableV2Response: function (options) {\r\n          return this;\r\n        },\r\n\r\n        parseVersionsResponse: function (response) {\r\n          if (!!response.results && !!response.results.data) {\r\n            if(!!response.results.actions) {\r\n              _parseActions.call(this, response.results.actions, response.results.data.versions);\r\n            }\r\n            return response.results.data.versions;\r\n          }\r\n          return response;\r\n        }\r\n\r\n      });\r\n    }\r\n  };\r\n\r\n  // parsing actions and adding singature for existing actions\r\n  function _parseActions(actions, version) {\r\n    version.actions = [];\r\n    _.each(actions.data, function (action) {\r\n      action.signature = action.name;\r\n      version.actions.push(action);\r\n    });\r\n  }\r\n\r\n  return VersionsV2ResponseMixin;\r\n});\r\n\n","csui.define('csui/models/server.adaptors/version.mixin',[\r\n  'csui/lib/underscore', 'csui/utils/url'\r\n], function (_, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n\r\n    mixin: function (prototype) {\r\n\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n\r\n        url: function () {\r\n          var url = Url.combine(this.connector.getConnectionUrl().getApiBase('v2'), 'nodes',\r\n            this.get('id'), 'versions');\r\n          if (!this.isNew()) {\r\n            url = Url.combine(url, this.get('version_number'));\r\n            var query = Url.combineQueryString(\r\n              this.getExpandableResourcesUrlQuery(),\r\n              this.getRequestedCommandsUrlQuery()\r\n            );\r\n            if (query) {\r\n              url += '?' + query;\r\n            }\r\n          }\r\n\r\n          return url;\r\n        },\r\n\r\n        parse: function (response) {\r\n          // Handle both version objects when parsed from the single\r\n          // /versions/:id and the collection /versions responses.\r\n          var version = response.data || this.parseVersionsResponse(response);\r\n\r\n          // TODO: Remove this.  Version properties should have its own general\r\n          // property panel instead of using the node and breaking each other\r\n          // when one of them gets changed\r\n          /*if (version.type === undefined) {\r\n            version.type = 144;\r\n          }*/\r\n\r\n          // get node type info from NodeVersionCollection for Version Collection, if it is single\r\n          // fetch then collect it from rest api response id_expand object\r\n          if (version.id_expand && version.id_expand.type) {\r\n            version.type = version.id_expand.type;\r\n          }\r\n\r\n          if (!!version.version_number_name) {\r\n            version.version_number_name_formatted = version.version_number_name;\r\n          }\r\n\r\n          if (version.commands) {\r\n            var commands = version.commands;\r\n            version.actions = _\r\n              .chain(commands)\r\n              .keys()\r\n              .map(function (key) {\r\n                var attributes = commands[key];\r\n                attributes.signature = key;\r\n                return attributes;\r\n              })\r\n              .value();\r\n            delete version.commands;\r\n            delete version.commands_map;\r\n            delete version.commands_order;\r\n          }\r\n\r\n          return version;\r\n        }\r\n\r\n      });\r\n    }\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/models/version',[\r\n  'module', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/utils/log', 'csui/utils/url', 'csui/models/actions',\r\n  'csui/models/mixins/v2.delayed.commandable/v2.delayed.commandable.mixin',\r\n  'csui/models/mixins/expandable/expandable.mixin',\r\n  'csui/models/mixins/resource/resource.mixin',\r\n  'csui/models/mixins/uploadable/uploadable.mixin',\r\n  'csui/models/mixins/versions/v2.versions.response.mixin',\r\n  'csui/models/server.adaptors/version.mixin',\r\n  'csui/utils/deepClone/deepClone'\r\n], function (module, _, Backbone, log, Url, ActionCollection, DelayedCommandableV2Mixin,\r\n    ExpandableMixin, ResourceMixin, UploadableMixin, VersionsableV2ResponseMixin, ServerAdaptorMixin) {\r\n  'use strict';\r\n\r\n  var VersionModel = Backbone.Model.extend({\r\n\r\n    idAttribute: 'version_number',\r\n\r\n    constructor: function VersionModel(attributes, options) {\r\n      attributes || (attributes = {});\r\n      options = _.extend({expand: ['user', 'versions{id, owner_id}']}, options);\r\n\r\n      // TODO: Remove this, this is set for version model only because widgets like metadata\r\n      // do not handle models without delayed commands. Find a boolean that every model\r\n      // must use when it has delayed actions so that widgets can behave accordingly.\r\n      this.lazyActionsDisabled = options.lazyActionsDisabled || true;\r\n\r\n      Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n\r\n      this.makeResource(options)\r\n          .makeUploadable(options)\r\n          .makeVersionableV2Response(options)\r\n          .makeDelayedCommandableV2(options)\r\n          .makeExpandable(options)\r\n          .makeServerAdaptor(options);\r\n\r\n      if (!attributes.actions) {\r\n        this.actions = new ActionCollection();\r\n      }\r\n    },\r\n\r\n    clone: function () {\r\n      return new this.constructor(this.attributes, {\r\n        connector: this.connector,\r\n        expand: _.deepClone(this.expand)\r\n      });\r\n    },\r\n\r\n    set: function (key, val, options) {\r\n      var attrs;\r\n      if (key == null) {\r\n        return this;\r\n      }\r\n\r\n      // Handle both `\"key\", value` and `{key: value}` -style arguments.\r\n      if (typeof key === 'object') {\r\n        attrs = key;\r\n        options = val;\r\n      } else {\r\n        (attrs = {})[key] = val;\r\n      }\r\n\r\n      options || (options = {});\r\n\r\n      // TODO: Support sub-models and sub-collections in general\r\n      if (attrs.actions) {\r\n        if (this.actions) {\r\n          this.actions.reset(attrs.actions, options);\r\n        } else {\r\n          this.actions = new ActionCollection(attrs.actions);\r\n        }\r\n      }\r\n\r\n      // do the usual set\r\n      return Backbone.Model.prototype.set.call(this, attrs, options);\r\n    },\r\n\r\n    isNew: function () {\r\n      return !this.has('version_number');\r\n    },\r\n\r\n    isFetchable: function () {\r\n      return !!(this.get('id') && this.get('version_number'));\r\n    }\r\n\r\n  });\r\n\r\n  ExpandableMixin.mixin(VersionModel.prototype);\r\n  UploadableMixin.mixin(VersionModel.prototype);\r\n  ResourceMixin.mixin(VersionModel.prototype);\r\n  DelayedCommandableV2Mixin.mixin(VersionModel.prototype);\r\n  VersionsableV2ResponseMixin.mixin(VersionModel.prototype);\r\n  ServerAdaptorMixin.mixin(VersionModel.prototype);\r\n\r\n  return VersionModel;\r\n\r\n});\r\n\n","csui.define('csui/models/view.state.model',[\r\n  'module', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/utils/log', 'csui/utils/url', 'csui/utils/namedsessionstorage'\r\n\r\n], function (module, _, Backbone, log, Url, NamedSessionStorage) {\r\n  'use strict';\r\n\r\n  var PublicLang;\r\n  require(['i18n!csui/pages/start/nls/lang'\r\n  ], function (publicLang) {\r\n    PublicLang = publicLang;\r\n  }.bind(this));\r\n\r\n  var MAX_ROUTERS_INFO_STACK = 50;\r\n\r\n  var constants = Object.freeze({\r\n    LAST_ROUTER: 'lastRouter',\r\n    CURRENT_ROUTER: 'currentRouter',\r\n    CURRENT_ROUTER_FRAGMENT: 'currentRouterFragment',\r\n    CURRENT_ROUTER_NAVIGATE_OPTIONS: 'currentRouterNavigateOptions',\r\n    CURRENT_ROUTER_SCOPE_ID: 'currentRouterScopeId',\r\n    BACK_TO_TITLE: 'back_to_title',\r\n    METADATA_CONTAINER: 'metadata_container',\r\n    STATE: 'state',\r\n    DEFAULT_STATE: 'default_state',\r\n    SESSION_STATE: 'session_state',\r\n    NAVIGATION_HISTORY_ARRAY: 'navigationHistoryArray',\r\n    URL_PARAMS: 'urlParams',\r\n    ALLOW_WIDGET_URL_PARAMS: 'allowWidgetUrlParams',\r\n    START_ID: 'start_id',\r\n    BREADCRUMB: 'breadcrumb',\r\n    QUERY_STRING_PARAMS: 'query_string_params'\r\n  });\r\n\r\n  var counter = 0;\r\n\r\n  /*var noExpanding = /\\bno_expand\\b(?:=([^&]*)?)?/i.exec(location.search);\r\n  noExpanding = noExpanding && noExpanding[1] !== 'false';*/\r\n    \r\n  // The view state model stores variables in the state attribute. Those variables are used to build\r\n  // the url parameters. In this sense the url is the long term storage.\r\n  // The session session_state contains variables that are stored in the browser session storage.\r\n  var ViewStateModel = Backbone.Model.extend({\r\n\r\n    constructor: function ViewStateModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n\r\n      if (counter === 0) {\r\n        this.storage = new NamedSessionStorage(module.id);\r\n      } else {\r\n        this.storage = new NamedSessionStorage(module.id + '_' + counter);\r\n        this.storage.destroy();\r\n      }\r\n\r\n      counter++;\r\n\r\n      this.set('enabled', attributes ? attributes.enabled : false);\r\n\r\n      this._navigationHistory = [];\r\n\r\n      _.values(constants).forEach(function (property) {\r\n        var value = attributes ? attributes[property] : this.storage.get(property);\r\n        if (value && (property.indexOf(\"Array\") !== -1 || property.indexOf(\"urlParams\") !== -1)) {\r\n          value = _.isString(value) ? JSON.parse(value) : value;\r\n        }\r\n        this.listenTo(this, 'change:' + property, this._syncWithStorage.bind(this, property));\r\n        this.set(property, value);\r\n      }.bind(this));\r\n\r\n      this._navigationHistory = this.get(constants.NAVIGATION_HISTORY_ARRAY) || [];\r\n    },\r\n\r\n    CONSTANTS: constants,\r\n\r\n    _setViewStateAttribute: function (attributeName, key, value, options) {\r\n      options || (options = {});\r\n      if (this._getViewStateAttribute(attributeName, key) === value) {\r\n        return;\r\n      }\r\n\r\n      var object = this.get(attributeName) || {};\r\n      object = _.clone(object);\r\n      if (value === undefined || value === '') {\r\n        delete object[key];\r\n      } else {\r\n        object[key] = value;\r\n      }\r\n      options = _.omit(options, 'encode');\r\n      this.set(attributeName, object, options);\r\n      this._syncWithStorageIfSilentUpdate(attributeName, options);\r\n      return true;\r\n    },\r\n\r\n    _getViewStateAttribute: function(attributeName, key, decode) {\r\n      var state = this.get(attributeName);\r\n      if (state) {\r\n        return state[key];\r\n      }\r\n    },\r\n\r\n    // All the view state elements are added to the url. These variables are stored in the url.\r\n    setViewState: function (key, value, options) {\r\n      if (key === 'state') {\r\n        this.set(constants.STATE, value, options);\r\n        this._syncWithStorageIfSilentUpdate(constants.STATE, options);\r\n      } else {\r\n        return this._setViewStateAttribute(constants.STATE, key, value, options);\r\n      }\r\n    },\r\n\r\n    getViewState: function (key, decode) {\r\n      return this._getViewStateAttribute(constants.STATE, key, decode);\r\n    },\r\n\r\n    // Default states are not serialized in the url even if they exist in the 'state' object.\r\n    setDefaultViewState: function(key, value, options) {\r\n      return this._setViewStateAttribute(constants.DEFAULT_STATE, key, value, options);\r\n    },\r\n\r\n    getDefaultViewState: function(key, decode) {\r\n      return this._getViewStateAttribute(constants.DEFAULT_STATE, key, decode);\r\n    },\r\n\r\n    // All variables in the session view state are stored in the session local storage.\r\n    // They are used to initialize the widgets view\r\n    setSessionViewState: function (key, value, options) {\r\n      options || (options = {});\r\n      if (this.getSessionViewState(key) === value) {\r\n        return;\r\n      }\r\n      var sessionState = this.get(constants.SESSION_STATE) || {};\r\n      sessionState = _.clone(sessionState);\r\n      sessionState[key] = value;\r\n      this.set(constants.SESSION_STATE, sessionState, options);\r\n      this._syncWithStorageIfSilentUpdate(constants.SESSION_STATE, options);\r\n      return true;\r\n    },\r\n\r\n    getSessionViewState: function (key) {\r\n      var state = this.get(constants.SESSION_STATE);\r\n      if (state) {\r\n        return state[key];\r\n      }\r\n    },\r\n\r\n    _syncWithStorageIfSilentUpdate: function(property, options) {\r\n      if (options && options.silent) {\r\n        this._syncWithStorage(property);\r\n      }\r\n    },\r\n\r\n    _syncWithStorage: function (property) {\r\n      var value = this.get(property);\r\n      if (_.isArray(value)) {\r\n        value = JSON.stringify(value);\r\n      }\r\n      this.storage.set(property, value);\r\n    },\r\n\r\n    getCurrentRouterName: function() {\r\n      return this.get(this.CONSTANTS.CURRENT_ROUTER);\r\n    },\r\n\r\n    onNavigationStarted: function (newRouterInfo, canRestore) {\r\n\r\n      this.trigger('before:navigate');\r\n\r\n      this.set('navigated', true);\r\n\r\n      var restore = this.isSameRoutingInfo(newRouterInfo, this.getLastHistoryEntry());\r\n      if (!canRestore) {\r\n        restore = false;\r\n      }\r\n      // we need to do this for backward compatibility. This is for any code that uses this\r\n      // value from previous implementation.\r\n      this.set(this.CONSTANTS.LAST_ROUTER, this.get(this.CONSTANTS.CURRENT_ROUTER));\r\n\r\n      if (restore) {\r\n        this._currentHistoryEntry = undefined;\r\n        this._restoreStatesFromHistoryEntry(this._navigationHistory.pop());\r\n        this.unset(constants.NAVIGATION_HISTORY_ARRAY, {silent: true});\r\n        this.set(constants.NAVIGATION_HISTORY_ARRAY, this._navigationHistory);\r\n      } else {\r\n        this._savePotentialHistoryEntry();\r\n      }\r\n    },\r\n\r\n    _savePotentialHistoryEntry: function () {\r\n      var storage = this.storage;\r\n      var routerName = storage.get(constants.CURRENT_ROUTER);\r\n      if (routerName) {\r\n\r\n        var state = this.get('saved_viewstate');\r\n        if (!state) {\r\n          state = this.storage.get(constants.STATE);\r\n        }\r\n\r\n        // some context plugins could change the urlParams in the viewState\r\n        // make sure we take the urlParams from the router and not the viewStateModel.\r\n        var router = this.get('PerspectiveRouting').getRouter(routerName);\r\n        \r\n        this._currentHistoryEntry = {\r\n          'router': routerName,\r\n          'back_to_title': this.storage.get(constants.BACK_TO_TITLE),\r\n          'urlParam': router && router.urlParams,\r\n          'fragment': this.storage.get(constants.CURRENT_ROUTER_FRAGMENT),\r\n          'scopeId': this.storage.get(constants.CURRENT_ROUTER_SCOPE_ID),\r\n          'navigateOptions': this.storage.get(constants.CURRENT_ROUTER_NAVIGATE_OPTIONS),\r\n          'state': state,\r\n          'sessionState': this.storage.get(constants.SESSION_STATE),\r\n          'defaultState': this.storage.get(constants.DEFAULT_STATE)\r\n        };\r\n      }\r\n    },\r\n\r\n    getPotentialHistoryEntry: function () {\r\n      return this._currentHistoryEntry;\r\n    },\r\n\r\n    onContextFetch: function () {\r\n      this.trigger('navigate', this._currentHistoryEntry);\r\n      this.unset(\"isFromHistory\", {silent: true});\r\n      this._currentHistoryEntry && this._addRouterInfoToHistory(this._currentHistoryEntry);\r\n    },\r\n\r\n    _restoreStatesFromHistoryEntry : function(historyInfo) {\r\n      if (historyInfo) {\r\n        var restoreStates = {\r\n          'isFromHistory': true,\r\n          'state': historyInfo.state,\r\n          'default_state': historyInfo.defaultState,\r\n          'session_state': historyInfo.sessionState\r\n        };\r\n        this.set(restoreStates, {silent: true});\r\n        ['state', 'default_state', 'session_state'].forEach(function (property) {\r\n          this._syncWithStorage(property);\r\n        }.bind(this));\r\n      }\r\n    },\r\n\r\n    _addRouterInfoToHistory: function (historyEntry) {\r\n\r\n      // do not add duplicate entries\r\n      if (this._navigationHistory.length > 0 &&\r\n            JSON.stringify(historyEntry) === JSON.stringify(this._navigationHistory[this._navigationHistory.length - 1])) {\r\n        return;\r\n      }\r\n\r\n      this._navigationHistory.push(historyEntry);\r\n\r\n      if (this._navigationHistory.length > MAX_ROUTERS_INFO_STACK) {\r\n        this._navigationHistory.shift();\r\n      }\r\n\r\n      this.unset(constants.NAVIGATION_HISTORY_ARRAY, {silent: true});\r\n      this.set(constants.NAVIGATION_HISTORY_ARRAY, this._navigationHistory);\r\n    },\r\n\r\n    _copyAttributes: function (viewStateModel) {\r\n      Object.keys(viewStateModel.attributes).forEach(function (attributeName) {\r\n        this.unset(attributeName);\r\n        this.set(attributeName, viewStateModel.get(attributeName));\r\n      }.bind(this));\r\n    },\r\n\r\n    saveHistory: function() {\r\n      this.savedViewStateModel = this.clone();\r\n      this.savedViewStateModel._copyAttributes(this);\r\n      this._resetAttributes();\r\n    },\r\n\r\n    _resetAttributes: function() {\r\n\r\n      this._navigationHistory = [];\r\n\r\n      this.unset(constants.NAVIGATION_HISTORY_ARRAY, {silent: true});\r\n      this.set(constants.NAVIGATION_HISTORY_ARRAY, this._navigationHistory);\r\n\r\n      this.set(constants.LAST_ROUTER, undefined);\r\n      this.set(constants.CURRENT_ROUTER, undefined);\r\n      this.set(constants.CURRENT_ROUTER_FRAGMENT, undefined);\r\n      this.set(constants.CURRENT_ROUTER_NAVIGATE_OPTIONS, undefined);\r\n      this.set(constants.CURRENT_ROUTER_SCOPE_ID, undefined);\r\n      this.set(constants.BACK_TO_TITLE, undefined);\r\n      this.set(constants.METADATA_CONTAINER, undefined);\r\n      this.set(constants.STATE, undefined);\r\n      this.set(constants.DEFAULT_STATE, undefined);\r\n      this.set(constants.SESSION_STATE, undefined);\r\n      this.set(constants.URL_PARAMS, undefined);\r\n      this.set(constants.ALLOW_WIDGET_URL_PARAMS, undefined);\r\n      this.set(constants.SESSION_STATE, undefined);\r\n      this.set(constants.START_ID, undefined);\r\n      this.set(constants.BREADCRUMB, undefined);\r\n    },\r\n\r\n    restoreHistory: function () {\r\n      if (this.savedViewStateModel) {\r\n        this._copyAttributes(this.savedViewStateModel);\r\n        this.savedViewStateModel.clean();\r\n        this.savedViewStateModel = undefined;\r\n\r\n        var value = this.storage.get(constants.NAVIGATION_HISTORY_ARRAY);\r\n        if (value) {\r\n          value = JSON.parse(value);\r\n          this._navigationHistory = value;\r\n        }\r\n      }\r\n    },\r\n\r\n    hasRouted: function () {\r\n      return this._navigationHistory.length > 0;\r\n    },\r\n\r\n    isSameRoutingInfo: function (router1Info, router2Info) {\r\n      return router1Info && router2Info &&\r\n             router1Info.router === router2Info.router &&\r\n             router1Info.fragment === router2Info.fragment;\r\n    },\r\n\r\n    /**\r\n     * Warning: Cleaning of state will eventually clears the internals session storage. \r\n     * Thus, restoring the state (perhaps on page refresh or navigating between pages) will not be possible after this operation.\r\n     */\r\n    clean: function() {\r\n      // Clear model state\r\n      this.clear(); \r\n      // Clear session storage\r\n      this.storage.destroy();\r\n    },\r\n\r\n    getBackToTitle: function () {\r\n\r\n      var title = PublicLang.back;\r\n      if (this._currentHistoryEntry) {\r\n        title = this._currentHistoryEntry.back_to_title || title;\r\n      } else {\r\n        var index = this.getLastRouterIndex();\r\n        if (index !== -1) {\r\n          var lastRouterInfo = this._navigationHistory[index];\r\n          if (lastRouterInfo) {\r\n            title = lastRouterInfo.back_to_title || title;\r\n          }\r\n        }\r\n      }\r\n\r\n      return title;\r\n    },\r\n\r\n    clearHistory: function() {\r\n      this._navigationHistory = [];\r\n      this.unset(constants.NAVIGATION_HISTORY_ARRAY, {silent: true});\r\n      this.set(constants.NAVIGATION_HISTORY_ARRAY, this._navigationHistory);\r\n    },\r\n\r\n    clearCurrentHistoryEntry: function () {\r\n      this._currentHistoryEntry = undefined;\r\n    },\r\n\r\n    getLastRouterIndex: function () {\r\n      var index = -1,\r\n          navigationHistory = this._navigationHistory;\r\n      if (navigationHistory && navigationHistory.length > 0) {\r\n        for (var i = navigationHistory.length - 1; i >= 0; i--) {\r\n          if (navigationHistory[i].router !== this.get(constants.CURRENT_ROUTER)) {\r\n            index = i;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      return index;\r\n    },\r\n\r\n    getIndexOfOfLastApplicationScope: function () {\r\n      var index = -1,\r\n          navigationHistory = this._navigationHistory;\r\n      if (navigationHistory && navigationHistory.length > 0) {\r\n        for (var i = navigationHistory.length - 1; i >= 0; i--) {\r\n          if (navigationHistory[i].scopeId !== this.get(constants.CURRENT_ROUTER_SCOPE_ID)) {\r\n            index = i;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      return index;\r\n    },\r\n\r\n    getLastHistoryEntry: function () {\r\n      return this._navigationHistory && this._navigationHistory.length > 0 &&\r\n             this._navigationHistory[this._navigationHistory.length - 1];\r\n    },\r\n\r\n    getHistory: function () {\r\n      return this._navigationHistory;\r\n    },\r\n\r\n    restoreRouterOfLastApplicationScope: function () {\r\n      this._restoreHistoryEntryByIndex(this.getIndexOfOfLastApplicationScope());\r\n    },\r\n\r\n    restoreLastRouter: function () {\r\n      this._restoreHistoryEntryByIndex(this.getLastRouterIndex());\r\n    },\r\n\r\n    restoreLastFragment: function () {\r\n      this._restoreHistoryEntryByIndex(this._navigationHistory.length - 1);\r\n    },\r\n\r\n    restoreHistoryEntryByIndex: function(index) {\r\n      return this._restoreHistoryEntryByIndex(index);\r\n    },\r\n\r\n    _restoreHistoryEntryByIndex: function (index) {\r\n      if (index !== -1 && index < this._navigationHistory.length) {\r\n        this._navigationHistory.length = index + 1;\r\n        var historyEntryInfo = this.getLastHistoryEntry();\r\n        this._restoreStatesFromHistoryEntry(historyEntryInfo);\r\n        this.get('PerspectiveRouting').restoreRouter(historyEntryInfo);\r\n      } else {\r\n        // Just go back if no history. It should not happen really.\r\n        window.history.back();\r\n      }\r\n    },\r\n\r\n    addUrlParameters: function (urlParameters, context, replace, force) {\r\n      if (!force && !this.get(this.CONSTANTS.ALLOW_WIDGET_URL_PARAMS)) {\r\n        return;\r\n      }\r\n      var perspectiveRouting = this.get('PerspectiveRouting');\r\n      // The activeRouterInstance gets inserted in the viewStateModel\r\n      // once the new router is activated and before the routing happens\r\n      // But the new router from that time on will start listening to the viewState change.\r\n      var activeRouter = this.get(\"activeRouterInstance\");\r\n      var routerName = activeRouter && activeRouter.name;\r\n      routerName = routerName || this.get(constants.CURRENT_ROUTER);\r\n      return perspectiveRouting &&\r\n                   perspectiveRouting.addUrlParameters(routerName, urlParameters, replace);\r\n    },\r\n\r\n    clear: function () {\r\n      this.storage.destroy();\r\n      // init also all variables, just incase someone wants to use this viewStateModel instance again.\r\n      // see SAPSSF-7778\r\n      this._navigationHistory = [];\r\n      this._currentHistoryEntry = undefined;\r\n      Backbone.Model.prototype.clear.call(this, {silent: true});\r\n    },\r\n\r\n    hasNotNavigatedAndNotJustStarted:function() {\r\n    }\r\n\r\n  }, {\r\n    CONSTANTS: constants,\r\n    clean: function() {\r\n      var storage = new NamedSessionStorage(module.id);\r\n      storage.destroy();\r\n    }\r\n  });\r\n\r\n  return ViewStateModel;\r\n});\r\n\n","csui.define('csui/models/perspective/personalization.server.adaptor.mixin',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/url'\r\n], function (_, $, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n        url: function () {\r\n          var perspectiveId = this.get('perspective_id'),\r\n              url           = new Url(this.connector.connection.url).getApiBase('v2');\r\n          if (!!perspectiveId) {\r\n            // Create a new node by POST /perspectives\r\n            url = Url.combine(url, 'perspectives', perspectiveId, 'personalization');\r\n          } else {\r\n            throw new Error('Unsupported perspective_id value');\r\n          }\r\n          return url;\r\n        },\r\n        // TODO Take care of parse, once REST API response finalized.\r\n      });\r\n    }\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n  \n","csui.define('csui/models/perspective/localstorage.server.adaptor.mixin',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/url',\r\n  'csui/utils/namedlocalstorage'\r\n], function (_, $, Url, NamedLocalStorage) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n\r\n        getStorage: function () {\r\n          var deferred = $.Deferred(),\r\n              that     = this;\r\n          require(['csui/utils/contexts/factories/user'], function (UserModelFactory) {\r\n            var user          = that.options.context.getModel(UserModelFactory),\r\n                currentUserId = user.get('id');\r\n            if (!currentUserId) {\r\n              var userFactory = that.options.context.getFactory(UserModelFactory);\r\n              if (userFactory.initialResponse) {\r\n                currentUserId = userFactory.initialResponse.data.id;\r\n              }\r\n            }\r\n            if (!that.namedLocalStorage) {\r\n              that.namedLocalStorage = new NamedLocalStorage('perspective:personalization:' +\r\n                                                             currentUserId);\r\n            }\r\n            that.namedLocalStorage;\r\n            return deferred.resolve(that.namedLocalStorage);\r\n          }, deferred.reject);\r\n          return deferred;\r\n        },\r\n\r\n        savePerspective: function () {\r\n          var that = this;\r\n          return this.getStorage().then(function (storage) {\r\n            return storage.set(that.getNodeId(), that.toJSON());\r\n          });\r\n        },\r\n\r\n        fetchPerspective: function () {\r\n          var that = this;\r\n          return this.getStorage().then(function (storage) {\r\n            return storage.get(that.getNodeId());\r\n          });\r\n        },\r\n        sync: function (method, model, options) {\r\n          var deferred = $.Deferred();\r\n          switch (method) {\r\n          case 'create':\r\n          case 'update':\r\n          case 'patch':\r\n            model.savePerspective().then(function () {\r\n              deferred.resolve(this);\r\n            }, deferred.reject);\r\n\r\n            break;\r\n          case 'read':\r\n            model.fetchPerspective().then(function (personalization) {\r\n              if (!_.isEmpty(personalization)) {\r\n                model.set(personalization);\r\n              }\r\n              deferred.resolve(model);\r\n            }, deferred.reject);\r\n            break;\r\n          default:\r\n            deferred.reject();\r\n            break;\r\n          }\r\n          return deferred.promise();\r\n        }\r\n      });\r\n\r\n    }\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\n","/**\r\n * Utiltiy of Perspective editing and Personalization\r\n */\r\ncsui.define('csui/utils/perspective/perspective.util',['module'], function (module) {\r\n\r\n  var constants = Object.freeze({\r\n    MODE_EDIT_PERSPECTIVE: 'edit',\r\n    MODE_PERSONALIZE: 'personalize',\r\n    WIDGET_PERSPECTIVE_PLACEHOLDER: 'csui/perspective.manage/widgets/perspective.placeholder',\r\n    WIDGET_SHORTCUTS: 'csui/widgets/shortcuts',\r\n    KEY_WIDGET_ID: 'w_id',\r\n    KEY_HIDDEN: 'hidden',\r\n    WIDGET_ID_PERSPECTIVE_PREFIX: 'pman-',\r\n    WIDGET_ID_PESONALIZATION_PREFIX: 'personal-'\r\n  });\r\n\r\n  var EXTRA_WIDGET_CONFIG_KEYS = [constants.KEY_WIDGET_ID, constants.KEY_HIDDEN];\r\n\r\n  //To check required fields in widget options\r\n  function hasRequiredFields(manifest) {\r\n    if (!!manifest && !!manifest.schema && !!manifest.schema.required &&\r\n        manifest.schema.required.length > 0) {\r\n      // Has required fields in the widget options\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  function isEligibleForLiveWidget(manifest) {\r\n    manifest = manifest || {};\r\n    if (!!manifest.callback || hasRequiredFields(manifest)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function getExtraWidgetKeys() {\r\n    return EXTRA_WIDGET_CONFIG_KEYS;\r\n  }\r\n\r\n  /**\r\n   * Returns shortcut group widget for personalization mode, otherwise default pman empty placeholder\r\n   *\r\n   * @param {`edit` or `personalize`} perspectiveMode\r\n   */\r\n  function getEmptyPlaceholderWidgetType(perspectiveMode) {\r\n    switch (perspectiveMode) {\r\n    case constants.MODE_PERSONALIZE:\r\n      return constants.WIDGET_SHORTCUTS;\r\n    default:\r\n      return constants.WIDGET_PERSPECTIVE_PLACEHOLDER;\r\n    }\r\n  }\r\n\r\n  function isEmptyPlaceholder(widget, perspectiveMode) {\r\n    if (widget.type === constants.WIDGET_PERSPECTIVE_PLACEHOLDER) {\r\n      return true;\r\n    }\r\n    var emptyType = getEmptyPlaceholderWidgetType(perspectiveMode);\r\n    return emptyType === widget.type && widget.options && widget.__isPlacehoder;\r\n  }\r\n\r\n  function generateWidgetId(perspectiveMode) {\r\n    var prefix = constants.WIDGET_ID_PERSPECTIVE_PREFIX;\r\n    if (perspectiveMode === constants.MODE_PERSONALIZE) {\r\n      prefix = constants.WIDGET_ID_PESONALIZATION_PREFIX;\r\n    }\r\n    return prefix + (+new Date());\r\n  }\r\n\r\n  function isPersonalWidget(widget) {\r\n    var widgetId = widget && widget[constants.KEY_WIDGET_ID];\r\n    if (!widgetId) {\r\n      // Widet ID not present. Could be legacy perspectives\r\n      return false;\r\n    }\r\n    // Check if IDs starts with personalization prefix\r\n    return isPersonalWidgetId(widgetId);\r\n  }\r\n\r\n  function isPersonalWidgetId(widgetId) {\r\n    return widgetId && widgetId.substr(0, constants.WIDGET_ID_PESONALIZATION_PREFIX.length) ===\r\n           constants.WIDGET_ID_PESONALIZATION_PREFIX;\r\n  }\r\n\r\n  function hasWidgetId(widget) {\r\n    return widget && !!widget[constants.KEY_WIDGET_ID];\r\n  }\r\n\r\n  function isErrorWidget(widget) {\r\n    return widget && widget.type === 'csui/widgets/error';\r\n  }\r\n\r\n  function isHiddenWidget(widget) {\r\n    if (isErrorWidget(widget)) {\r\n      return isHiddenWidget(widget.options.originalWidget);\r\n    }\r\n    return widget && !isPersonalWidget(widget) && (widget[constants.KEY_HIDDEN] === true);\r\n  }\r\n\r\n  function setWidgetHidden(widget, hide) {\r\n    if (isErrorWidget(widget)) {\r\n      setWidgetHidden(widget.options.originalWidget, hide);\r\n    } else {\r\n      widget && (widget[constants.KEY_HIDDEN] = hide);\r\n    }\r\n  }\r\n\r\n  return {\r\n    MODE_EDIT_PERSPECTIVE: constants.MODE_EDIT_PERSPECTIVE,\r\n    MODE_PERSONALIZE: constants.MODE_PERSONALIZE,\r\n    WIDGET_PERSPECTIVE_PLACEHOLDER: constants.WIDGET_PERSPECTIVE_PLACEHOLDER,\r\n    WIDGET_SHORTCUTS: constants.WIDGET_SHORTCUTS,\r\n    KEY_WIDGET_ID: constants.KEY_WIDGET_ID,\r\n    WIDGET_ID_PERSPECTIVE_PREFIX: constants.WIDGET_ID_PERSPECTIVE_PREFIX,\r\n    WIDGET_ID_PESONALIZATION_PREFIX: constants.WIDGET_ID_PESONALIZATION_PREFIX,\r\n\r\n    isEligibleForLiveWidget: isEligibleForLiveWidget,\r\n    hasRequiredFields: hasRequiredFields,\r\n    isEmptyPlaceholder: isEmptyPlaceholder,\r\n    getExtraWidgetKeys: getExtraWidgetKeys,\r\n    getEmptyPlaceholderWidgetType: getEmptyPlaceholderWidgetType,\r\n    generateWidgetId: generateWidgetId,\r\n    isPersonalWidget: isPersonalWidget,\r\n    isPersonalWidgetId: isPersonalWidgetId,\r\n    hasWidgetId: hasWidgetId,\r\n    isHiddenWidget: isHiddenWidget,\r\n    setWidgetHidden: setWidgetHidden\r\n  };\r\n\r\n});\n","/**\r\n * Delta Format:\r\n * {\r\n *    \"perspectiveWidgets\": perspectiveWidgetIds,\r\n *    \"personalWidgets\": personalWidgets,\r\n *    \"perspecitve_id\" : 1235,\r\n *    \"perspective_version\": 1,\r\n *    \"type\" : \"flow\"\r\n *    \"order\": ['perspective-1', 'perspective-0', 'perspective-2', 'personalize-0'],\r\n *    \"hidden\": ['perspective-4', 'perspective-7']\r\n*  }\r\n */\r\ncsui.define('csui/models/perspective/personalize/delta.generator',['module', 'csui/lib/underscore', 'csui/lib/backbone',\r\n      'csui/utils/perspective/perspective.util'],\r\n    function (module, _, Backbone, PerspectiveUtil) {\r\n\r\n      var DeltaGenerator = function (options) {\r\n        this.personalization = options.personalization;\r\n        this.perspective = options.perspective;\r\n        if (this.perspective instanceof Backbone.Model) {\r\n          this.perspective = this.perspective.toJSON();\r\n        }\r\n      };\r\n\r\n      _.extend(DeltaGenerator.prototype, {\r\n        getDeltaOfCurrentPerspective: function (allPerspectiveWidgets,allPersonalWidgets) {\r\n          allPerspectiveWidgets = _.reject(allPerspectiveWidgets, PerspectiveUtil.isPersonalWidget);\r\n           var perspectiveWidgetIds = _.pluck(allPerspectiveWidgets, PerspectiveUtil.KEY_WIDGET_ID),\r\n           personalWidgets = _.filter(allPersonalWidgets, PerspectiveUtil.isPersonalWidget),\r\n           personalParts = _.partition(allPersonalWidgets, PerspectiveUtil.isHiddenWidget),\r\n           personalActiveWidgets = _.pluck(personalParts[1], PerspectiveUtil.KEY_WIDGET_ID),\r\n           personalHiddenWidgets = _.pluck(personalParts[0], PerspectiveUtil.KEY_WIDGET_ID);\r\n          return {\r\n            perspectiveWidgets: perspectiveWidgetIds,\r\n            personalWidgets: personalWidgets,\r\n            order: personalActiveWidgets,\r\n            hidden: personalHiddenWidgets\r\n          };\r\n        },\r\n        getDelta: function () {\r\n          var result = _.pick(this.perspective, 'type', 'perspective_id', 'perspective_version');\r\n          result.perspective_id = result.perspective_id || this.perspective.id;\r\n          if (this.perspective.override) {\r\n            _.extend(result,\r\n                _.pick(this.perspective.override, 'perspective_id', 'perspective_version'));\r\n          } else {\r\n            // Possibly APIs not updated to latest. This case, lets assume the version as 1\r\n            result.perspective_version = result.perspective_version || 1;\r\n          }\r\n          switch (this.perspective.type) {\r\n            case 'flow': // flow layout\r\n              var delta = this.getDeltaOfCurrentPerspective(this.perspective.options.widgets, this.personalization.options.widgets);\r\n              _.extend(result, delta);\r\n              return result;\r\n            case 'sidepanel-right': // Right side panel layout\r\n            case 'sidepanel-left': // Left side panel layout\r\n              _.extend(result, {\r\n                banner: this.getDeltaOfCurrentPerspective(this.perspective.options.banner, this.personalization.options.banner),\r\n                content: this.getDeltaOfCurrentPerspective(this.perspective.options.content, this.personalization.options.content),\r\n                sidebar: this.getDeltaOfCurrentPerspective(this.perspective.options.sidebar, this.personalization.options.sidebar),\r\n              });\r\n              return result;\r\n            default:\r\n              throw new Error('Personalization not supported.');\r\n          }\r\n        }\r\n      });\r\n      return DeltaGenerator;\r\n\r\n    });\n","csui.define('csui/models/perspective/personalize/delta.resolver',['module', 'csui/lib/underscore', 'csui/lib/backbone',\r\n      'csui/utils/perspective/perspective.util'],\r\n    function (module, _, Backbone, PerspectiveUtil) {\r\n\r\n      var DeltaResolver = function (options) {\r\n        this.delta = options.delta;\r\n        this.perspective = options.perspective;\r\n        if (this.perspective instanceof Backbone.Model) {\r\n          this.perspective = this.perspective.toJSON();\r\n        }\r\n      };\r\n\r\n      _.extend(DeltaResolver.prototype, {\r\n\r\n        resolveContent: function (perspectiveWidgets, zone) {\r\n            zone = this.delta[zone];\r\n            var personalWidgets = this.delta.personalWidgets || zone && zone.personalWidgets,\r\n            widgetOrder = this.delta.order || zone && zone.order,\r\n            hiddenWidgetIds = this.delta.hidden || zone && zone.hidden,\r\n            personalWidgetsById, perspectiveWidgetsById, newPerspectiveWidgets,\r\n            allActiveWidgets, hiddenWidgets;\r\n          personalWidgets = this.delta.personalWidgets || zone && zone.personalWidgets,\r\n            personalWidgetsById = _.indexBy(personalWidgets, PerspectiveUtil.KEY_WIDGET_ID);\r\n          perspectiveWidgetsById = _.indexBy(perspectiveWidgets, PerspectiveUtil.KEY_WIDGET_ID);\r\n          widgetOrder = _.filter(widgetOrder, function (widgetId) {\r\n            return _.has(perspectiveWidgetsById, widgetId) || _.has(personalWidgetsById, widgetId);\r\n          });\r\n\r\n          hiddenWidgetIds = _.filter(hiddenWidgetIds, function (widgetId) {\r\n            return _.has(perspectiveWidgetsById, widgetId);\r\n          });\r\n\r\n          newPerspectiveWidgets = _.filter(perspectiveWidgets, function (widget) {\r\n            var widgetId = widget[PerspectiveUtil.KEY_WIDGET_ID];\r\n            return !_.contains(widgetOrder, widgetId) && !_.contains(hiddenWidgetIds, widgetId);\r\n          });\r\n\r\n          allActiveWidgets = _.map(widgetOrder, function (widgetId) {\r\n            if (PerspectiveUtil.isPersonalWidgetId(widgetId)) {\r\n              return personalWidgetsById[widgetId];\r\n            } else {\r\n              return perspectiveWidgetsById[widgetId];\r\n            }\r\n          });\r\n          hiddenWidgets = _.map(hiddenWidgetIds, function (widgetId) {\r\n            // Make copy of original perspective view to avoid changes to it.\r\n            var widget = _.clone(perspectiveWidgetsById[widgetId]);\r\n            PerspectiveUtil.setWidgetHidden(widget, true);\r\n            return widget;\r\n          });\r\n          return _.union(allActiveWidgets, newPerspectiveWidgets, hiddenWidgets);\r\n        },\r\n\r\n        canMergeDelta: function () {\r\n          return (this.perspective.perspectiveId === this.delta.perspectiveId &&\r\n                 this.perspective.type === this.delta.type) ||\r\n                 //when layout is changed from sidepanel-right to sidepanel-left or vice-versa,\r\n                 //personalized changes have to be merged\r\n                 //TODO: remove this code once REST-API issue is fixed\r\n                 ((this.delta.type === 'sidepanel-right' && this.perspective.type ==='sidepanel-left')\r\n                 || (this.delta.type === 'sidepanel-left' && this.perspective.type ==='sidepanel-right'));\r\n        },\r\n\r\n        getPersonalization: function () {\r\n          if (!this.canMergeDelta()) {\r\n            return this.perspective;\r\n          }\r\n          var result = _.clone(this.perspective);\r\n          switch (this.delta.type) {\r\n            case 'flow':\r\n              _.extend(result, {\r\n                options: { widgets: this.resolveContent(this.perspective.options.widgets) },\r\n                personalizations: this.delta\r\n              });\r\n              return result;\r\n            case 'sidepanel-right': // Right side panel layout\r\n            case 'sidepanel-left': // Left side panel layout\r\n              _.extend(result, {\r\n                options: {\r\n                  content: this.resolveContent(this.perspective.options.content, 'content'),\r\n                  sidebar: this.resolveContent(this.perspective.options.sidebar, 'sidebar'),\r\n                  banner: this.resolveContent(this.perspective.options.banner, 'banner')\r\n                },\r\n                personalizations: this.delta,\r\n              });\r\n              return result;\r\n            default:\r\n              return result;\r\n          }\r\n        }\r\n      });\r\n\r\n      return DeltaResolver;\r\n\r\n    });\n","csui.define('csui/models/perspective/personalize/personalize.guide',['module', 'csui/models/perspective/personalize/delta.generator',\r\n  'csui/models/perspective/personalize/delta.resolver'\r\n], function (module, DeltaGenerator, DeltaResolver) {\r\n\r\n  var PersonalizeGuide = {\r\n    getDelta: function (perspective, personalization) {\r\n      var generator = new DeltaGenerator(\r\n          {perspective: perspective, personalization: personalization});\r\n      return generator.getDelta();\r\n    },\r\n\r\n    getPersonalization: function (perspective, delta) {\r\n      var merger = new DeltaResolver({perspective: perspective, delta: delta});\r\n      return merger.getPersonalization();\r\n    }\r\n  };\r\n\r\n  return PersonalizeGuide;\r\n\r\n});\n","csui.define('csui/models/perspective/personalization.model',[\"require\", \"module\", 'csui/lib/jquery', 'csui/lib/underscore', \"csui/lib/backbone\",\r\n  'csui/models/node/node.model',\r\n  'csui/models/mixins/uploadable/uploadable.mixin',\r\n  'csui/models/mixins/connectable/connectable.mixin',\r\n  'csui/models/perspective/personalization.server.adaptor.mixin',\r\n  'csui/models/perspective/localstorage.server.adaptor.mixin',\r\n  'csui/models/perspective/personalize/personalize.guide',\r\n  'csui/utils/perspective/perspective.util'\r\n], function (require, module, $, _, Backbone, NodeModel,\r\n    UploadableMixin, ConnectableMixin, ServerAdaptorMixin, LocalStorageServerAdaptorMixin,\r\n    PersonalizeGuide, PerspectiveUtil) {\r\n  \"use strict\";\r\n\r\n  var config = _.extend({\r\n    persistOnLocalStorage: false\r\n  }, module.config());\r\n\r\n  var PersonalizationModel = Backbone.Model.extend({\r\n\r\n    constructor: function PersonalizationModel(attributes, options) {\r\n      PersonalizationModel.__super__.constructor.apply(this, arguments);\r\n      this.options = options;\r\n      if (config.persistOnLocalStorage) {\r\n        this.makeServerAdaptor(options);\r\n      } else {\r\n        this.makeUploadable(options)\r\n            .makeConnectable(options)\r\n            .makeServerAdaptor(options);\r\n      }\r\n      this.resolvePersonalization = true;\r\n    },\r\n\r\n    getPerspectiveId: function () {\r\n      return this.get('perspective_id');\r\n    },\r\n\r\n    /**\r\n     * Get the perspective config JSON of personalization\r\n     */\r\n    getPerspective: function () {\r\n      if (!this.resolvePersonalization) {\r\n        // No updates to delta after last resolution of personalization\r\n        this.personalization;\r\n      }\r\n      this.personalization = PersonalizeGuide.getPersonalization(this.options.perspective,\r\n          this.toJSON());\r\n      this.resolvePersonalization = false;\r\n      return this.personalization;\r\n    },\r\n\r\n    /**\r\n     * Set the perspective config JSON of personalization\r\n     */\r\n    setPerspective: function (personalization, options) {\r\n      var delta = PersonalizeGuide.getDelta(this.options.perspective, personalization);\r\n      this.set(delta, options);\r\n      // Mark to re-resolve of personalization from delta\r\n      this.resolvePersonalization = true;\r\n    },\r\n\r\n    update: function (changes, options) {\r\n      var personalization = this.getPerspective();\r\n      _.extend(personalization, changes.perspective);\r\n      this.setPerspective(personalization, options);\r\n    },\r\n\r\n    prepareFormData: function (data, options) {\r\n      var payload = {\r\n        personalizations: JSON.stringify(data),\r\n        perspective_id: this.get('perspective_id'),\r\n        perspective_version: this.get('perspective_version'),\r\n        node: this.getNodeId()\r\n      };\r\n      return payload;\r\n    },\r\n\r\n    getNodeId: function () {\r\n      return (!this.options.sourceModel || !(this.options.sourceModel instanceof NodeModel) ||\r\n              !(this.options.sourceModel.has('id'))) ? 'landing-page' :\r\n             this.options.sourceModel.get('id');\r\n    },\r\n\r\n  }, {\r\n    loadPersonalization: function (sourceModel, context) {\r\n      var deferred,\r\n          perspective = sourceModel.get('perspective');\r\n      if (!perspective) {\r\n        // Perspective info not available in source model, hence personalization cannot exist. \r\n        return $.Deferred().resolve().promise();\r\n      }\r\n      if (config.persistOnLocalStorage) {\r\n        deferred = PersonalizationModel.loadPersonalizationFromLocalStorage(sourceModel, context,\r\n            perspective);\r\n      } else if (!!perspective.personalizations) {\r\n        var personalization = new PersonalizationModel(perspective.personalizations,\r\n            {sourceModel: sourceModel, perspective: perspective});\r\n        deferred = $.Deferred().resolve(personalization.getPerspective());\r\n      } else {\r\n        deferred = $.Deferred().resolve();\r\n      }\r\n      deferred.then(function (personalization) {\r\n        if (!personalization || _.isEmpty(personalization)) {\r\n          return undefined;\r\n        }\r\n        return _.defaults(personalization, {perspectiveMode: PerspectiveUtil.MODE_PERSONALIZE});\r\n      });\r\n      return deferred.promise();\r\n    },\r\n\r\n    loadPersonalizationFromLocalStorage: function (sourceModel, context, perspective) {\r\n      var deferred = $.Deferred();\r\n      var personalization = new PersonalizationModel({},\r\n          {sourceModel: sourceModel, context: context, perspective: perspective});\r\n      personalization.fetch().then(function () {\r\n        var result = personalization.getPerspective();\r\n        if (!_.isEmpty(result)) {\r\n          deferred.resolve(result);\r\n        } else {\r\n          deferred.resolve();\r\n        }\r\n      }, function (error) {\r\n        deferred.reject(error);\r\n      });\r\n      return deferred.promise();\r\n    }\r\n  });\r\n\r\n  if (config.persistOnLocalStorage) {\r\n    LocalStorageServerAdaptorMixin.mixin(PersonalizationModel.prototype);\r\n  } else {\r\n    UploadableMixin.mixin(PersonalizationModel.prototype);\r\n    ConnectableMixin.mixin(PersonalizationModel.prototype);\r\n    ServerAdaptorMixin.mixin(PersonalizationModel.prototype);\r\n  }\r\n\r\n  return PersonalizationModel;\r\n\r\n});\r\n\n","csui.define('csui/models/compound.document/reorganize/server.adaptor.mixin',[\r\n    'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/url'\r\n  ], function (_, $, Url) {\r\n    'use strict';\r\n\r\n    var ServerAdaptorMixin = {\r\n\r\n        mixin: function (prototype) {\r\n\r\n        return _.extend(prototype, {\r\n            makeServerAdaptor: function (options) {\r\n            return this;\r\n            },\r\n\r\n            url: function () {\r\n                var url = this.connector.connection.url.replace('/v1', '/v2');\r\n                var query = Url.combineQueryString({\r\n                    expand: 'properties{original_id}'\r\n                });\r\n                return Url.combine(url, 'nodes/' + this.options.nodeId + '/nodes/all?' + query);\r\n            },\r\n\r\n            parse: function (response, options) {\r\n            var res = response.results;\r\n            return res;\r\n            },\r\n        });\r\n        }\r\n    };\r\n    return ServerAdaptorMixin;\r\n});\n","csui.define('csui/models/compound.document/reorganize/reorganize.collection',['csui/lib/underscore',\r\n  'csui/lib/backbone',\r\n  'nuc/models/browsable/browsable.mixin',\r\n  'csui/models/mixins/connectable/connectable.mixin',\r\n  'csui/models/mixins/fetchable/fetchable.mixin',\r\n  'nuc/models/browsable/v1.request.mixin',\r\n  'csui/models/browsable/v2.response.mixin',\r\n  'csui/models/node/node.model',\r\n  'csui/models/compound.document/reorganize/server.adaptor.mixin',\r\n  'csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin',\r\n  'csui/models/mixins/v2.fields/v2.fields.mixin',\r\n  'csui/models/mixins/v2.expandable/v2.expandable.mixin',\r\n  'csui/models/mixins/state.requestor/state.requestor.mixin',\r\n  'csui/models/mixins/v2.delayed.commandable/v2.delayed.commandable.mixin'\r\n], function (_, Backbone, BrowsableMixin, ConnectableMixin, FetchableMixin, BrowsableV1RequestMixin,\r\n  BrowsableV2ResponseMixin, NodeModel, ServerAdaptorMixin, AdditionalResourcesV2Mixin, FieldsV2Mixin,\r\n  ExpandableV2Mixin, StateRequestorMixin, DelayedCommandableV2Mixin) {\r\n\r\nvar ReorganizeCollection = Backbone.Collection.extend({\r\n    model: NodeModel,\r\n    constructor: function ReorganizeCollection(models, options) {\r\n      this.options = options || {};\r\n      Backbone.Collection.prototype.constructor.call(this, models, options);\r\n      this.makeConnectable(options)\r\n        .makeFetchable(options)\r\n        .makeBrowsableV2Response(options)\r\n        .makeAdditionalResourcesV2Mixin(options)\r\n        .makeFieldsV2(options)\r\n        .makeExpandableV2(options)\r\n        .makeStateRequestor(options)\r\n        .makeServerAdaptor(options);\r\n    }\r\n  });\r\n\r\n  BrowsableMixin.mixin(ReorganizeCollection.prototype);\r\n  BrowsableV1RequestMixin.mixin(ReorganizeCollection.prototype);\r\n  BrowsableV2ResponseMixin.mixin(ReorganizeCollection.prototype);\r\n  ConnectableMixin.mixin(ReorganizeCollection.prototype);\r\n  FetchableMixin.mixin(ReorganizeCollection.prototype);\r\n  ServerAdaptorMixin.mixin(ReorganizeCollection.prototype);\r\n  AdditionalResourcesV2Mixin.mixin(ReorganizeCollection.prototype);\r\n  FieldsV2Mixin.mixin(ReorganizeCollection.prototype);\r\n  ExpandableV2Mixin.mixin(ReorganizeCollection.prototype);\r\n  StateRequestorMixin.mixin(ReorganizeCollection.prototype);\r\n  DelayedCommandableV2Mixin.mixin(ReorganizeCollection.prototype);\r\n\r\n  return ReorganizeCollection;\r\n});\n","csui.define('csui/models/widget/widget.model',[\r\n  'require', 'module', 'csui/lib/underscore', 'csui/lib/jquery',\r\n  'csui/lib/backbone', 'csui/utils/log',\r\n  'csui/models/server.module/server.module.collection',\r\n  'csui/models/tool.item.config/tool.item.config.collection',\r\n  'csui/models/tool.item.mask/tool.item.mask.collection'\r\n], function (require, module, _, $, Backbone, log,\r\n    ServerModuleCollection, ToolItemConfigCollection, ToolItemMaskCollection) {\r\n  'use strict';\r\n\r\n  log = log(module.id);\r\n\r\n  var WidgetModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      id: null,       // Require.js module ID\r\n      view: null,     // Resolved function object of the widget's view controller\r\n      manifest: null, // Resolved meta-data describing the widget\r\n      error: null     // Error from the widget's resolution if it failed\r\n    },\r\n\r\n    constructor: function WidgetModel(attributes, options) {\r\n      this.options = _.defaults({}, options, {\r\n        includeView: true,\r\n        includeManifest: true,\r\n        includeServerModule: true,\r\n        includeToolItems: true\r\n      });\r\n      if (this.options.includeToolItems) {\r\n        this.options.includeManifest = true;\r\n      }\r\n      WidgetModel.__super__.constructor.call(this, attributes, this.options);\r\n      this.serverModule = new ServerModuleCollection.prototype.model();\r\n      this.actions = new Backbone.Collection();\r\n    },\r\n\r\n    getDefaultData: function () {\r\n      var manifest = this.get('manifest');\r\n      return manifest ? this._getDefaultPropertyValue(manifest.schema) : {};\r\n    },\r\n\r\n    _getDefaultPropertyValue: function (schema) {\r\n      if (schema) {\r\n        if (schema.type === 'object') {\r\n          return _.reduce(schema.properties,\r\n              function (result, propertySchema, propertyName) {\r\n                result[propertyName] = this._getDefaultPropertyValue(propertySchema);\r\n                return result;\r\n              }, {}, this);\r\n        }\r\n        return schema['default'];\r\n      }\r\n    },\r\n\r\n    _getDefaultPrimitiveValue: function (schema) {\r\n      if (schema) {\r\n        var value = schema['default'];\r\n        if (value !== undefined) {\r\n          return value;\r\n        }\r\n        switch (schema.type) {\r\n        case 'string':\r\n          return '';\r\n        case 'integer':\r\n        case 'number':\r\n          return 0;\r\n        case 'boolean':\r\n          return false;\r\n        case 'array':\r\n          return [];\r\n        case 'null':\r\n          return null;\r\n        }\r\n      }\r\n    },\r\n\r\n    sync: function (method, collection, options) {\r\n      if (method !== 'read') {\r\n        throw new Error('Only fetching the widget is supported.');\r\n      }\r\n      options = _.extend({}, this.options, options);\r\n      _.defaults(options, {\r\n        includeView: this.options.includeView,\r\n        includeManifest: this.options.includeManifest,\r\n        includeServerModule: this.options.includeServerModule,\r\n        includeToolItems: this.options.includeToolItems\r\n      });\r\n      if (options.includeToolItems) {\r\n        options.includeManifest = true;\r\n      }\r\n      var serverModulesPromise = this._resolveServerModules(options),\r\n          toolItemsPromise     = this._resolveToolItems(options),\r\n          toolItemMasksPromise = this._resolveToolItemMasks(options),\r\n          self                 = this;\r\n      return $.when(serverModulesPromise, toolItemsPromise, toolItemMasksPromise)\r\n          .then(_.bind(this._resolveWidget, this, options))\r\n          .then(function () {\r\n            var response = self.toJSON();\r\n            options.success && options.success(response, options);\r\n            self.trigger('sync', self, response, options);\r\n          }, function () {\r\n            var error = self.get('error');\r\n            options.error && options.error(error, options);\r\n            self.trigger('error', self, error, options);\r\n            return $.Deferred().reject(error);\r\n          });\r\n    },\r\n\r\n    _resolveWidget: function (options) {\r\n      var viewPromise     = this._resolveView(options),\r\n          manifestPromise = this._resolveManifest(options),\r\n          self            = this;\r\n      return $.when(viewPromise, manifestPromise)\r\n          .then(function () {\r\n            self._updateServerModule(options);\r\n            self._updateActions(options);\r\n          });\r\n    },\r\n\r\n    _resolveView: function (options) {\r\n      var deferred = $.Deferred();\r\n      if (options.includeView) {\r\n        var self       = this,\r\n            widgetData = this.getModuleData(),\r\n            viewPath   = this.getViewModulePath(widgetData);\r\n        require([viewPath],\r\n            function (View) {\r\n              self.set('view', View);\r\n              deferred.resolve();\r\n            }, function (error) {\r\n              self.set('error', error);\r\n              if (options.ignoreErrors) {\r\n                deferred.resolve();\r\n              } else {\r\n                deferred.reject(error);\r\n              }\r\n            });\r\n      } else {\r\n        deferred.resolve();\r\n      }\r\n      return deferred.promise();\r\n    },\r\n\r\n    _resolveManifest: function (options) {\r\n      var deferred = $.Deferred();\r\n      if (options.includeManifest) {\r\n        var self         = this,\r\n            widgetData   = this.getModuleData(),\r\n            manifestPath = this.getManifestModulePath(widgetData);\r\n        require([manifestPath],\r\n            function (manifest) {\r\n              if (self._needsLocalization(manifest)) {\r\n                var manifestLocalizedPath = self.getLocalizedManifestModulePath(widgetData);\r\n                require([manifestLocalizedPath],\r\n                    function (manifestLocalized) {\r\n                      manifest = WidgetModel.resolveLocalizedManifest(manifestPath,\r\n                          manifest, manifestLocalized);\r\n                      self.set('manifest', manifest);\r\n                      deferred.resolve();\r\n                    }, function (error) {\r\n                      if (!self.has('error')) {\r\n                        self.set('error', error);\r\n                      }\r\n                      if (options.ignoreErrors || options.ignoreManifestErrors) {\r\n                        // If errors are ignored, return not localized manifest;\r\n                        // if it were undefined, non-robust consumers might crash\r\n                        self.set('manifest', manifest);\r\n                        deferred.resolve();\r\n                      } else {\r\n                        deferred.reject(error);\r\n                      }\r\n                    });\r\n              } else {\r\n                self.set('manifest', manifest);\r\n                deferred.resolve();\r\n              }\r\n            }, function (error) {\r\n              if (!self.has('error')) {\r\n                self.set('error', error);\r\n              }\r\n              if (options.ignoreErrors || options.ignoreManifestErrors) {\r\n                // If errors are ignored, return an empty manifest;\r\n                // if it were undefined, non-robust consumers might crash\r\n                self.set('manifest', {});\r\n                deferred.resolve();\r\n              } else {\r\n                deferred.reject(error);\r\n              }\r\n            });\r\n      } else {\r\n        deferred.resolve();\r\n      }\r\n      return deferred.promise();\r\n    },\r\n\r\n    _resolveServerModules: function (options) {\r\n      var serverModules;\r\n      if (options.includeServerModule && !options.serverModules) {\r\n        options.serverModules = serverModules = new ServerModuleCollection();\r\n        return serverModules.fetch({ignoreErrors: options.ignoreErrors});\r\n      }\r\n      return $.Deferred().resolve().promise();\r\n    },\r\n\r\n    _resolveToolItems: function (options) {\r\n      var toolItems;\r\n      if (options.includeToolItems && !options.toolItems) {\r\n        options.toolItems = toolItems = new ToolItemConfigCollection();\r\n        return toolItems.fetch({ignoreErrors: options.ignoreErrors});\r\n      }\r\n      return $.Deferred().resolve().promise();\r\n    },\r\n\r\n    _resolveToolItemMasks: function (options) {\r\n      var toolItemMasks;\r\n      if (options.includeToolItems && !options.toolItemMasks) {\r\n        options.toolItemMasks = toolItemMasks = new ToolItemMaskCollection();\r\n        return toolItemMasks.fetch({ignoreErrors: options.ignoreErrors});\r\n      }\r\n      return $.Deferred().resolve().promise();\r\n    },\r\n\r\n    _getModulePrefix: function () {\r\n      var name       = this.get('id'),\r\n          firstSlash = name.indexOf('/');\r\n      // Enable widget names without the module path for the core widgets;\r\n      // compatibility for early perspectives, which did not use full paths\r\n      return firstSlash < 0 ? 'csui' : name.substring(0, firstSlash);\r\n    },\r\n\r\n    getModuleData: function () {\r\n      var name      = this.get('id'),\r\n          lastSlash = name.lastIndexOf('/'),\r\n          path;\r\n      // Enable widget names without the module path for the core widgets;\r\n      // compatibility for early perspectives, which did not use full paths\r\n      if (lastSlash < 0) {\r\n        path = 'csui/widgets/' + name;\r\n      } else {\r\n        path = name;\r\n        name = name.substring(lastSlash + 1);\r\n      }\r\n      return {\r\n        name: name,\r\n        path: path\r\n      };\r\n    },\r\n\r\n    getViewModulePath: function (moduleData) {\r\n      return moduleData.path + '/' + moduleData.name + '.view';\r\n    },\r\n\r\n    getManifestModulePath: function (moduleData) {\r\n      return 'json!' + moduleData.path + '/' + moduleData.name + '.manifest.json';\r\n    },\r\n\r\n    getLocalizedManifestModulePath: function (moduleData) {\r\n      return 'i18n!' + moduleData.path + '/impl/nls/' + moduleData.name + '.manifest';\r\n    },\r\n\r\n    _updateServerModule: function (options) {\r\n      if (options.includeServerModule) {\r\n        var modulePrefix = this._getModulePrefix(),\r\n            serverModule = options.serverModules.get(modulePrefix),\r\n            attributes   = serverModule && serverModule.toJSON() ||\r\n                {id: modulePrefix};\r\n        this.serverModule.set(attributes);\r\n      }\r\n    },\r\n\r\n    _updateActions: function (options) {\r\n      if (options.includeToolItems) {\r\n        var manifest = this.get('manifest'),\r\n            actions  = manifest && manifest.actions;\r\n        this.actions.reset(actions, {silent: true});\r\n        this.actions.each(function (action) {\r\n          action.toolItems = options.toolItems.get(action.get('toolItems'));\r\n          action.toolItemMasks = options.toolItemMasks.get(action.get('toolItemMasks'));\r\n          action.toolbars = new Backbone.Collection(action.get('toolbars'));\r\n        });\r\n        if (!options.silent) {\r\n          this.actions.trigger('reset', this.actions, options);\r\n        }\r\n      }\r\n    },\r\n\r\n    _needsLocalization: function (object) {\r\n      function isLocalizableString(value) {\r\n        return typeof value === 'string' && value.indexOf('{{') === 0 &&\r\n               value.lastIndexOf('}}') === value.length - 2;\r\n      }\r\n\r\n      var value;\r\n\r\n      for (var key in object) {\r\n        if (object.hasOwnProperty(key)) {\r\n          value = object[key];\r\n          if (isLocalizableString(value)) {\r\n            return true;\r\n          } else if (_.isArray(value)) {\r\n            for (var i = 0; i < value.length; i++) {\r\n              if (isLocalizableString(value[i])) {\r\n                return true;\r\n              }\r\n            }\r\n          } else if (typeof value === 'object') {\r\n            return this._needsLocalization(value);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  }, {\r\n    resolveLocalizedManifest: function (manifestPath, manifest, localizedManifest) {\r\n      function traverseManifest(object, localizedManifestParent) {\r\n        var key, value, localizationKey, arrayItem, localizationArrayItem, i;\r\n\r\n        function getLocalizationKey(value) {\r\n          return _.isString(value) && value.indexOf('{{') === 0 &&\r\n                 value.lastIndexOf('}}') === value.length - 2 &&\r\n                 value.substring(2, value.length - 2);\r\n        }\r\n\r\n        for (key in object) {\r\n          if (object.hasOwnProperty(key)) {\r\n            value = object[key];\r\n            localizationKey = getLocalizationKey(value);\r\n            if (localizationKey) {\r\n              // Support both real and dummy localization keys\r\n              object[key] = localizedManifestParent[localizationKey] ||\r\n                            localizedManifestParent[key] ||\r\n                            // Show the localization string key in case\r\n                            // the value is missing\r\n                            value;\r\n            } else if (_.isArray(value)) {\r\n              localizationArrayItem = localizedManifestParent[key] || [];\r\n              for (i = 0; i < value.length; ++i) {\r\n                arrayItem = value[i];\r\n                localizationKey = getLocalizationKey(arrayItem);\r\n                if (localizationKey) {\r\n                  // Support both array of dummy placeholders and flat\r\n                  // localization by unique property names.\r\n                  value[i] = localizationArrayItem[i] ||\r\n                             // Support both real and dummy localization keys\r\n                             localizedManifestParent[localizationKey] ||\r\n                             localizedManifestParent[key] ||\r\n                             // Show the localization string key in case\r\n                             // the value is missing\r\n                             arrayItem;\r\n                } else if (_.isObject(arrayItem)) {\r\n                  // Support both hierarchical and flat localization modules\r\n                  value[i] = traverseManifest(arrayItem, localizationArrayItem[i] ||\r\n                                                         localizedManifestParent);\r\n                }\r\n              }\r\n            } else if (_.isObject(value)) {\r\n              if (localizedManifestParent[key]) {\r\n                log.warn(\r\n                    'Hierarchical format has been detected in the localization ' +\r\n                    'module \"{0}\". It has been deprecated and the support for it ' +\r\n                    'will be removed. Please, change it to the flat format as soon ' +\r\n                    'as possible. Although JSON format allows using nested objects, ' +\r\n                    'automated translation tools can handle only key-value pairs. ' +\r\n                    'That is why localization modules has to contain only one ' +\r\n                    'object with properties pointing to strings.', manifestPath)\r\n                && console.log(log.last);\r\n              }\r\n              // Support both hierarchical and flat localization modules\r\n              object[key] = traverseManifest(value, localizedManifestParent[key] ||\r\n                                                    localizedManifestParent);\r\n            }\r\n          }\r\n        }\r\n        return object;\r\n      }\r\n\r\n      return traverseManifest(manifest, localizedManifest);\r\n    },\r\n  });\r\n\r\n  return WidgetModel;\r\n\r\n});\r\n\n","csui.define('csui/models/widget/widget.collection',[\r\n  'require', 'module', 'csui/lib/underscore', 'csui/lib/jquery',\r\n  'csui/lib/backbone', 'csui/models/widget/widget.model',\r\n  'csui/models/server.module/server.module.collection',\r\n  'csui/models/tool.item.config/tool.item.config.collection',\r\n  'csui/models/tool.item.mask/tool.item.mask.collection'\r\n], function (require, module, _, $, Backbone, WidgetModel,\r\n    ServerModuleCollection, ToolItemConfigCollection, ToolItemMaskCollection) {\r\n  'use strict';\r\n\r\n  var widgets = module.config().widgets || [];\r\n  // Support either array of module IDs or a map with keys pointing\r\n  // to arrays of module IDs; the latter can be used for decentralized\r\n  // configuration (multiple calls to require.config, which merge maps,\r\n  // but not arrays)\r\n  if (!_.isArray(widgets)) {\r\n    widgets = Array.prototype.concat.apply([], _.values(widgets));\r\n  }\r\n  // Convert the array of widget names to model attributes\r\n  widgets = _.map(widgets, function (name) {\r\n    return {\r\n      id: name\r\n    };\r\n  });\r\n\r\n  var WidgetCollection = Backbone.Collection.extend({\r\n\r\n    model: WidgetModel,\r\n\r\n    constructor: function WidgetCollection(models, options) {\r\n      // Store the options before calling the parent constructor;\r\n      // model processing in _prepareModel may access the options\r\n      this.options = _.defaults({}, options, {\r\n        includeView: true,\r\n        includeManifest: true,\r\n        includeServerModule: true,\r\n        includeToolItems: true\r\n      });\r\n      if (this.options.includeToolItems) {\r\n        this.options.includeManifest = true;\r\n      }\r\n      models || (models = widgets);\r\n      WidgetCollection.__super__.constructor.call(this, models, options);\r\n    },\r\n\r\n    sync: function (method, collection, options) {\r\n      if (method !== 'read') {\r\n        throw new Error('Only fetching the widgets is supported.');\r\n      }\r\n      var self = this;\r\n      options = _.extend({}, this.options, options);\r\n      if (options.includeToolItems) {\r\n        options.includeManifest = true;\r\n      }\r\n      var serverModulesPromise = this._resolveServerModules(options),\r\n          toolItemsPromise     = this._resolveToolItems(options),\r\n          toolItemMasksPromise = this._resolveToolItemMasks(options);\r\n      return $.when(serverModulesPromise, toolItemsPromise, toolItemMasksPromise)\r\n              .then(_.bind(this._resolveWidgets, this, options))\r\n              .then(function () {\r\n                var response = self.toJSON();\r\n                options.success && options.success(response, options);\r\n                self.trigger('sync', self, response, options);\r\n              });\r\n    },\r\n\r\n    _prepareModel: function (attrs, options) {\r\n      options || (options = {});\r\n      _.defaults(options, {\r\n        includeView: this.options.includeView,\r\n        includeManifest: this.options.includeManifest,\r\n        includeServerModule: this.options.includeServerModule,\r\n        includeToolItems: this.options.includeToolItems\r\n      });\r\n      return WidgetCollection.__super__._prepareModel.call(this, attrs, options);\r\n    },\r\n\r\n    _resolveServerModules: function (options) {\r\n      var serverModules = options.serverModules;\r\n      if (serverModules || !options.includeServerModule) {\r\n        return $.Deferred().resolve().promise();\r\n      }\r\n      serverModules = options.serverModules = new ServerModuleCollection();\r\n      return serverModules.fetch({ignoreErrors: options.ignoreErrors !== false});\r\n    },\r\n\r\n    _resolveToolItems: function (options) {\r\n      var toolItems = options.toolItems;\r\n      if (toolItems || !options.includeToolItems) {\r\n        return $.Deferred().resolve().promise();\r\n      }\r\n      toolItems = options.toolItems = new ToolItemConfigCollection();\r\n      return toolItems.fetch({ignoreErrors: options.ignoreErrors !== false});\r\n    },\r\n\r\n    _resolveToolItemMasks: function (options) {\r\n      var toolItemMasks = options.toolItemMasks;\r\n      if (toolItemMasks || !options.includeToolItems) {\r\n        return $.Deferred().resolve().promise();\r\n      }\r\n      toolItemMasks = options.toolItemMasks = new ToolItemMaskCollection();\r\n      return toolItemMasks.fetch({ignoreErrors: options.ignoreErrors !== false});\r\n    },\r\n\r\n    _resolveWidgets: function (options) {\r\n      var resolvableModels = this.filter(function (model) {\r\n            // A resolvable widget must have an ID and it was already resolved\r\n            // neither with a success nor with a failure\r\n            return model.has('id') &&\r\n                   !(model.has('view') || model.has('manifest') || model.has('error'));\r\n          }),\r\n          promises = _.invoke(resolvableModels, 'fetch', {\r\n            ignoreErrors: options.ignoreErrors !== false,\r\n            ignoreManifestErrors: options.ignoreManifestErrors !== false,\r\n            includeView: options.includeView,\r\n            includeManifest: options.includeManifest,\r\n            includeServerModule: options.includeServerModule,\r\n            includeToolItems: options.includeToolItems,\r\n            serverModules: options.serverModules,\r\n            toolItems: options.toolItems,\r\n            toolItemMasks: options.toolItemMasks\r\n          });\r\n      return $.when.apply($, promises);\r\n    }\r\n\r\n  });\r\n\r\n  return WidgetCollection;\r\n\r\n});\r\n\n","csui.define('csui/models/zipanddownload/zipanddownload.preflight',[\r\n  'module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/utils/url',\r\n  'csui/models/mixins/connectable/connectable.mixin',\r\n  'csui/models/mixins/uploadable/uploadable.mixin'\r\n], function (module, _, $, Backbone, Url, ConnectableMixin, UploadableMixin) {\r\n  'use strict';\r\n\r\n  var config = _.extend({\r\n    idAttribute: null\r\n  }, module.config());\r\n\r\n  var PreFlightModel = Backbone.Model.extend({\r\n\r\n    constructor: function PreFlightModel(attributes, options) {\r\n      attributes || (attributes = {});\r\n      options || (options = {});\r\n      this.options = options;\r\n\r\n      Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n\r\n      this.options.connector = options.collection && options.collection.connector ||\r\n                               options.container && options.container.connector ||\r\n                               options.nodes.models && options.nodes.models[0].connector;\r\n      this.makeConnectable(options)\r\n          .makeUploadable(options);\r\n    },\r\n\r\n    urlBase: function () {\r\n      var queryString = \"\",\r\n          url         = this.options.connector.getConnectionUrl().getApiBase('v2');\r\n      url = Url.combine(url, 'zipanddownload');\r\n\r\n      if (this.preflight) {\r\n        // Create a new permission model by POST\r\n        url = Url.combine(url, 'preflight', queryString);\r\n      } else {\r\n        url = Url.combine(url, queryString);\r\n      }\r\n      return url;\r\n    },\r\n\r\n    url: function () {\r\n      var url   = this.urlBase(),\r\n          query = null;\r\n      return query ? url + '?' + query : url;\r\n    },\r\n\r\n    parse: function (response, options) {\r\n      return response;\r\n    }\r\n  });\r\n  ConnectableMixin.mixin(PreFlightModel.prototype);\r\n  UploadableMixin.mixin(PreFlightModel.prototype);\r\n\r\n  return PreFlightModel;\r\n});\r\n\n","csui.define('csui/models/zipanddownload/zipanddownload.stages',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/utils/url',\r\n  'csui/models/mixins/connectable/connectable.mixin'\r\n], function (_, $, Backbone, URL, ConnectableMixin) {\r\n  'use strict';\r\n\r\n  var StagesModel = Backbone.Model.extend({\r\n    constructor: function StageModel(attributes, options) {\r\n      this.options = options || (options = {});\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n      this.makeConnectable(options);\r\n    },\r\n\r\n    url: function () {\r\n      var url = this.options.connector.getConnectionUrl().getApiBase('v2');\r\n      return URL.combine(url, 'zipanddownload', this.get('id'));\r\n    },\r\n\r\n    parse: function (response) {\r\n      this.updateLocation(response.results.data.jobs);\r\n      return response.results.data.jobs;\r\n    },\r\n\r\n    updateLocation: function (jobs) {\r\n      if (jobs.complete && jobs.unprocessed_items_list && jobs.unprocessed_items_list.length > 0) {\r\n        _.each(jobs.unprocessed_items_list, function (model, value) {\r\n          if (model.path) {\r\n            var locations = model.path.split('\\\\');\r\n            if (locations.length > 0 && locations[locations.length - 1] !== \"\") {\r\n              model.parentLocation = locations[locations.length - 1];\r\n            } else if (locations.length > 0) {\r\n              model.parentLocation = locations[locations.length - 2];\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n  });\r\n  ConnectableMixin.mixin(StagesModel.prototype);\r\n  return StagesModel;\r\n});\n","/**\r\n * This utility will send the mime type information needed by SmartUI.\r\n * For example, if we upload any un-recognized file as part of document upload, default browser\r\n * file input returns blank for such files, in this case, let's list out those frequently\r\n * un-recognized file types. For example, drawing files, jar, war files etc.,\r\n */\r\ncsui.define('csui/utils/mime.types',[\r\n  'csui/lib/underscore'\r\n], function (_) {\r\n  'use strict';\r\n\r\n  function getMimeType(fileName) {\r\n    if (!fileName || fileName.indexOf('.') === -1) {\r\n      return '';\r\n    }\r\n\r\n    var mimeType = '',\r\n        name     = fileName.split('.').pop();\r\n\r\n    switch (name) {\r\n    case 'dwg':\r\n    case 'dxf':\r\n    case 'svf':\r\n      mimeType = 'drawing/dwg';\r\n      break;\r\n    case 'jar':\r\n    case 'war':\r\n      mimeType = 'application/x-zip';\r\n      break;\r\n    case 'XLS5':\r\n    case 'xlb':\r\n    case 'xlsx':\r\n      mimeType = 'application/vnd.ms-excel';\r\n      break;\r\n    case 'pptx':  //chrome does not provide the 'type' information for office docs while drand drop from desktop.\r\n    case 'ppt':\r\n      mimeType = 'application/vnd.ms-powerpoint';\r\n      break;\r\n    case 'docx':\r\n    case 'doc':\r\n      mimeType = 'application/msword';\r\n      break;\r\n    case 'vob':\r\n      mimeType = 'video/mpeg';\r\n      break;\r\n    case 'odf':\r\n    case 'xsm':\r\n      mimeType = 'application/vnd.oasis.opendocument.formula';\r\n      break;\r\n    }\r\n\r\n    return mimeType;\r\n  }\r\n\r\n  return {\r\n    getMimeType: getMimeType\r\n  };\r\n\r\n});\n","\n","csui.define('csui/utils/classic.nodes/classic.nodes',[\r\n  'csui/lib/underscore', 'csui/lib/backbone', 'csui/utils/url',\r\n  'csui/models/mixins/rules.matching/rules.matching.mixin',\r\n  // Load and register external Classic UI node rules\r\n  'csui-ext!csui/utils/classic.nodes/classic.nodes'\r\n], function (_, Backbone, Url, RulesMatchingMixin, rules) {\r\n  'use strict';\r\n\r\n  var ClassicNodeModel = Backbone.Model.extend({\r\n    defaults: {\r\n      sequence: 100,\r\n      url: null,\r\n      urlQuery: null,\r\n      force: false\r\n    },\r\n\r\n    constructor: function ClassicNodeModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n      this.makeRulesMatching(options);\r\n    }\r\n  });\r\n\r\n  RulesMatchingMixin.mixin(ClassicNodeModel.prototype);\r\n\r\n  var ClassicNodeCollection = Backbone.Collection.extend({\r\n    model: ClassicNodeModel,\r\n    comparator: 'sequence',\r\n\r\n    constructor: function ClassicNodeCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    findByNode: function (node, options) {\r\n      var model = this.find(function (item) {\r\n        return item.matchRules(node, item.attributes);\r\n      });\r\n      if (model) {\r\n        return {\r\n          url: this._getUrl(model, node, options),\r\n          forced: model.get('forced')\r\n        };\r\n      }\r\n    },\r\n\r\n    isForced: function (node, options) {\r\n      return this.some(function (item) {\r\n        return item.get('forced') &&\r\n               item.matchRules(node, item.attributes);\r\n      });\r\n    },\r\n\r\n    isSupported: function (node, options) {\r\n      return this.some(function (item) {\r\n        return item.matchRules(node, item.attributes);\r\n      });\r\n    },\r\n\r\n    getUrl: function (node, options) {\r\n      var model = this.find(function (item) {\r\n        return item.matchRules(node, item.attributes);\r\n      });\r\n      if (model) {\r\n        return this._getUrl(model, node, options);\r\n      }\r\n    },\r\n\r\n    _getUrl: function (model, node, options) {\r\n      var url = model.get('url');\r\n      if (url) {\r\n        // Receive a complete URL\r\n        if (typeof url === 'string') {\r\n          url = this._replaceParameters(url, node.attributes);\r\n        } else if (typeof url === 'function') {\r\n          url = url(node);\r\n        }\r\n      } else {\r\n        var urlQuery = model.get('urlQuery');\r\n        if (urlQuery) {\r\n          // Receive a URL query to be appended to the CGI URL\r\n          if (typeof urlQuery === 'string') {\r\n            urlQuery = this._replaceParameters(urlQuery, node.attributes);\r\n          } else if (typeof urlQuery === 'function') {\r\n            urlQuery = urlQuery(node);\r\n          }\r\n          var connector = options && options.connector || node.connector;\r\n          if (connector) {\r\n            url = new Url(connector.connection.url).getCgiScript();\r\n          } else {\r\n            url = '';\r\n          }\r\n          urlQuery = Url.combineQueryString(urlQuery);\r\n          url = Url.appendQuery(url, urlQuery);\r\n        }\r\n      }\r\n      return url;\r\n    },\r\n\r\n    _replaceParameters: function (expression, node) {\r\n      var attributes = node.attributes,\r\n          parameter = /{([^}]+)}/g,\r\n          match, names, value, index;\r\n      // Go over every parameter placeholder found\r\n      while ((match = parameter.exec(expression))) {\r\n        names = match[1].split('.');\r\n        value = attributes;\r\n        // Nested object property names are separated by dots\r\n        _.find(names, function (name) {\r\n          value = value[name];\r\n          if (value == null) {\r\n            value = '';\r\n            return true;\r\n          }\r\n        });\r\n        // Replace the placeholder with the value found\r\n        index = match.index;\r\n        expression = expression.substring(0, index) +\r\n                     encodeURIComponent(value) +\r\n                     expression.substring(index + match[0].length);\r\n      }\r\n      return expression;\r\n    }\r\n  });\r\n\r\n  var classicNodes = new ClassicNodeCollection();\r\n\r\n  if (rules) {\r\n    classicNodes.add(_.flatten(rules, true));\r\n  }\r\n\r\n  return classicNodes;\r\n});\r\n\n","\n","csui.define('csui/utils/defaultactionitems',[\r\n  'csui/lib/underscore', 'csui/models/actionitems',\r\n  // Load and register external default action rules\r\n  'csui-ext!csui/utils/defaultactionitems'\r\n], function (_, ActionItemCollection, rules) {\r\n  'use strict';\r\n\r\n  var defaultActionItems = new ActionItemCollection();\r\n\r\n  if (rules) {\r\n    defaultActionItems.add(_.flatten(rules, true));\r\n  }\r\n\r\n  return defaultActionItems;\r\n});\r\n\n","csui.define('csui/utils/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/utils/impl/nls/root/lang',{\r\n\r\n  // nodesprites - node types\r\n  NodeTypeSearchQuery: 'Search',\r\n  NodeTypeSearchForm: 'Search form',\r\n  NodeTypeURL: 'Web address',\r\n  // nodesprites - general formats\r\n  NodeTypeAudio: 'Audio',\r\n  NodeTypeCompressed: 'Compressed File',\r\n  NodeTypeImage: 'Image',\r\n  NodeTypeText: 'Text Document',\r\n  NodeTypeHtml: 'Html Document',\r\n  NodeTypeUnknown: 'Unknown',\r\n  NodeTypeVideo: 'Video',\r\n  // nodesprites - application formats\r\n  NodeTypeDOC: 'Microsoft Word',\r\n  NodeTypePDF: 'Portable Document Format',\r\n  NodeTypePPT: 'Microsoft Powerpoint',\r\n  NodeTypePresentation: 'Presentation',\r\n  NodeTypeXLS: 'Microsoft Excel',\r\n  NodeTypeSpreadsheet: 'Spreadsheet',\r\n  NodeTypeFormula: 'Formula',\r\n  NodeTypePublisher: 'Microsoft Publisher',\r\n  NodeTypeVisio: 'Microsoft Visio',\r\n  NodeTypeMPP: 'Microsoft Project',\r\n  NodeTypeONE: 'Microsoft OneNote',\r\n  NodeTypeSDD: 'Document template',\r\n  NodeTypeDWG: 'Autocad Drawing',\r\n\r\n  //templates - thumbnail\r\n  Loading:\"Loading...\",\r\n  NotAvailable:\"Not available.\"\r\n\r\n});\r\n\n","\n","csui.define('csui/utils/nodesprites',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/models/mixins/rules.matching/rules.matching.mixin',\r\n  'i18n!csui/utils/impl/nls/lang',\r\n  // Load and register external cell views\r\n  'csui-ext!csui/utils/nodesprites'\r\n], function (_, Backbone, RulesMatchingMixin, lang, extraIcons) {\r\n\r\n  var NodeSpriteModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      className: null\r\n    },\r\n\r\n    constructor: function NodeSpriteModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n      this.makeRulesMatching(options);\r\n    }\r\n\r\n  });\r\n\r\n  RulesMatchingMixin.mixin(NodeSpriteModel.prototype);\r\n\r\n  var NodeSpriteCollection = Backbone.Collection.extend({\r\n\r\n    model: NodeSpriteModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function NodeSpriteCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    findClass: function (compareType, key, val) {\r\n      var nodeSprite = this.find(function (item) {\r\n        var values = item.get(compareType);\r\n        if (values === undefined) {\r\n          return undefined;\r\n        }\r\n        if (_.isArray(values[key])) {\r\n          var keyValues = values[key];\r\n          for (var i = 0; i < keyValues.length; i++) {\r\n            if (keyValues[i] === val) {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n\r\n        return (values[key] === val);\r\n      });\r\n      return nodeSprite ? nodeSprite.get('className') : undefined;\r\n    },\r\n\r\n    findTypeByNode: function (node) {\r\n      var typeName = node.get('type_name') || lang.NodeTypeUnknown;\r\n\r\n      var nodeSprite = this.findByNode(node);\r\n      if (nodeSprite) {\r\n        var spriteName = _.result(nodeSprite.attributes, 'mimeType');\r\n        if (spriteName) {\r\n          typeName = spriteName;\r\n        }\r\n      }\r\n\r\n      return typeName;\r\n    },\r\n\r\n    findClassByNode: function (node) {\r\n      var nodeSprite = this.findByNode(node);\r\n      return nodeSprite && _.result(nodeSprite.attributes, 'className') || '';\r\n    },\r\n\r\n    findByNode: function (node) {\r\n      // FIXME: Show the original icon with a shortcut overlay, as soon as agreed\r\n      // If the node is a shortcut and the original_id is expanded to contain\r\n      // the node data, we can show the original icon with a small arrow overlay.\r\n      //if (node.original && node.original.has('type')) {\r\n      //  node = node.original;\r\n      //}\r\n      return this.find(function (item) {\r\n        return item.matchRules(node, item.attributes);\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  // MS Office: http://filext.com/faq/office_mime_types.php\r\n  // OpenOffice: https://www.openoffice.org/framework/documentation/mimetypes/mimetypes.html\r\n\r\n  var nodeSprites = new NodeSpriteCollection([\r\n    {\r\n      // excel\r\n      equalsNoCase: {\r\n        mime_type: [\r\n          'application/vnd.ms-excel',\r\n          'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n          'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\r\n          'application/vnd.ms-excel.sheet.macroEnabled.12',\r\n          'application/vnd.ms-excel.template.macroEnabled.12',\r\n          'application/vnd.ms-excel.addin.macroEnabled.12',\r\n          'application/vnd.ms-excel.sheet.binary.macroEnabled.12'\r\n        ]\r\n      },\r\n      className: 'csui-icon mime_excel',\r\n      iconName: 'csui_mime_excel',\r\n      mimeType: lang.NodeTypeXLS,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // visio\r\n      equalsNoCase: {\r\n        mime_type: [\r\n          'application/visio',\r\n          'application/x-visio',\r\n          'application/vnd.visio',\r\n          'application/visio.drawing',\r\n          'application/vsd',\r\n          'application/x-vsd',\r\n          'image/x-vsd',\r\n          'application/vnd.visio2013',\r\n          'application/vnd.ms-visio.drawing',\r\n          'application/vnd.ms-visio.viewer',\r\n          'application/vnd.ms-visio.stencil',\r\n          'application/vnd.ms-visio.template'\r\n        ]\r\n      },\r\n      className: 'csui-icon mime_visio',\r\n      iconName: 'csui_mime_visio',\r\n      mimeType: lang.NodeTypeVisio,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // spreadsheets\r\n      equalsNoCase: {\r\n        mime_type: [\r\n          'application/vnd.oasis.opendocument.spreadsheet',\r\n          'application/vnd.oasis.opendocument.spreadsheet-template',\r\n          'application/vnd.sun.xml.calc',\r\n          'application/vnd.sun.xml.calc.template',\r\n          'application/vnd.stardivision.calc',\r\n          'application/x-starcalc'\r\n        ]\r\n      },\r\n      className: 'csui-icon mime_spreadsheet',\r\n      iconName: 'csui_mime_spreadsheet',\r\n      mimeType: lang.NodeTypeSpreadsheet,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // powerpoint\r\n      equalsNoCase: {\r\n        mime_type: [\r\n          'application/vnd.ms-powerpoint',\r\n          'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n          'application/vnd.openxmlformats-officedocument.presentationml.template',\r\n          'application/vnd.openxmlformats-officedocument.presentationml.slideshow',\r\n          'application/vnd.ms-powerpoint.addin.macroEnabled.12',\r\n          'application/vnd.ms-powerpoint.presentation.macroEnabled.12',\r\n          'application/vnd.ms-powerpoint.template.macroEnabled.12',\r\n          'application/vnd.ms-powerpoint.slideshow.macroEnabled.12'\r\n        ]\r\n      },\r\n      className: 'csui-icon mime_powerpoint',\r\n      iconName: 'csui_mime_powerpoint',\r\n      mimeType: lang.NodeTypePPT,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // presentations\r\n      equalsNoCase: {\r\n        mime_type: [\r\n          'application/vnd.google-apps.presentation', // GSLIDE - Google Drive Presentation\r\n          'application/x-iwork-keynote-sffkey', // KEY, KEYNOTE — Apple Keynote Presentation\r\n          'application/vnd.wolfram.mathematica', // NB — Mathematica Slideshow\r\n          'application/vnd.wolfram.player', // NBP — Mathematica Player slideshow\r\n          'application/vnd.oasis.opendocument.presentation', // ODP — OpenDocument Presentation\r\n          'application/vnd.oasis.opendocument.presentation-template', // OTP - ODP Template\r\n          'application/vnd.sun.xml.impress',\r\n          'application/vnd.sun.xml.impress.template',\r\n          'application/vnd.stardivision.impress',\r\n          'application/vnd.stardivision.impress-packed',\r\n          'application/x-starimpress',\r\n          'application/vnd.lotus-freelance', // PRZ — Lotus Freelance Graphics\r\n          'application/vnd.stardivision.impress', // SDD - Star Office's StarImpress\r\n          'application/vnd.corel-presentations', // SHW — Corel Presentations slide show creation\r\n          'application/vnd.sun.xml.impress', // SXI — OpenOffice.org XML (obsolete) Presentation\r\n          'application/vnd.ms-officetheme', // THMX — Microsoft PowerPoint theme template\r\n          'application/vnd.sun.xml.impress.template '// STI — OpenOffice Impress template\r\n\r\n          // the following extensions could not mapped to a mime-type\r\n          // todo: intro mapping to file extensions\r\n          // WATCH — Dataton Watchout Presentation\r\n          // PEZ — Prezi Desktop Presentation\r\n          // SHF — ThinkFree Show\r\n          // SHOW — Haansoft(Hancom) Presentation software document\r\n          // SLP — Logix-4D Manager Show Control Project\r\n          // SSPSS — SongShow Plus Slide Show\r\n\r\n        ]\r\n      },\r\n      className: 'csui-icon mime_presentation',\r\n      iconName: 'csui_mime_presentation',\r\n      mimeType: lang.NodeTypePresentation,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // MS Office publisher\r\n      equalsNoCase: {\r\n        mime_type: [\r\n          'application/vnd.ms-publisher',\r\n          'application/x-mspublisher'\r\n        ]\r\n      },\r\n      className: 'csui-icon mime_publisher',\r\n      iconName: 'csui_mime_publisher',\r\n      mimeType: lang.NodeTypePublisher,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // formulas\r\n      equalsNoCase: {\r\n        mime_type: [\r\n          'application/vnd.oasis.opendocument.formula',\r\n          'application/vnd.sun.xml.math',\r\n          'application/vnd.stardivision.math',\r\n          'application/x-starmath'\r\n        ]\r\n      },\r\n      className: 'csui-icon mime_formula',\r\n      iconName: 'csui_mime_formula',\r\n      mimeType: lang.NodeTypeFormula,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // pdf\r\n      equalsNoCase: {\r\n        mime_type: [\r\n          'application/vnd.pdf',\r\n          'application/x-pdf',\r\n          'application/pdf'\r\n        ]\r\n      },\r\n      className: 'csui-icon mime_pdf',\r\n      iconName: 'csui_mime_pdf',\r\n      mimeType: lang.NodeTypePDF,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // word\r\n      equalsNoCase: {\r\n        mime_type: [\r\n          'application/msword',\r\n          'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n          'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\r\n          'application/vnd.ms-word.document.macroEnabled.12',\r\n          'application/vnd.ms-word.template.macroEnabled.12'\r\n        ]\r\n      },\r\n      className: 'csui-icon mime_word',\r\n      iconName: 'csui_mime_word',\r\n      mimeType: lang.NodeTypeDOC,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // dwg\r\n      equalsNoCase: {\r\n        mime_type: [\r\n          'application/dwg',\r\n          'drawing/dwg'\r\n        ]\r\n      },\r\n      className: 'csui-icon mime_dwg',\r\n      iconName: 'csui_mime_dwg',\r\n      mimeType: lang.NodeTypeDWG,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // MS OneNote\r\n      equalsNoCase: {\r\n        mime_type: [\r\n          'application/onenote',\r\n          'application/msonenote'\r\n        ]\r\n      },\r\n      className: 'csui-icon mime_onenote',\r\n      iconName: 'csui_mime_onenote',\r\n      mimeType: lang.NodeTypeONE,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // MS project\r\n      equalsNoCase: {\r\n        mime_type: [\r\n          'application/vnd.ms-project',\r\n          'application/msproj',\r\n          'application/msproject',\r\n          'application/x-msproject',\r\n          'application/x-ms-project',\r\n          'application/mpp'\r\n        ]\r\n      },\r\n      className: 'csui-icon mime_project',\r\n      iconName: 'csui_mime_project',\r\n      mimeType: lang.NodeTypeMPP,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // image\r\n      startsWithNoCase: {mime_type: 'image/'},\r\n      className: 'csui-icon mime_image',\r\n      iconName: 'csui_mime_image',\r\n      mimeType: lang.NodeTypeImage,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // audio\r\n      startsWithNoCase: {mime_type: 'audio/'},\r\n      className: 'csui-icon mime_audio',\r\n      iconName: 'csui_mime_audio',\r\n      mimeType: lang.NodeTypeAudio,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // text\r\n      startsWithNoCase: {mime_type: 'text/'},\r\n      className: 'csui-icon mime_paper',\r\n      iconName: 'csui_mime_paper',\r\n      mimeType: lang.NodeTypeText,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // text\r\n      equalsNoCase: {mime_type: 'text/html'},\r\n      className: 'csui-icon mime_html',\r\n      iconName: 'csui_mime_html',\r\n      mimeType: lang.NodeTypeHtml,\r\n      // startsWith 'text/' operation happens first, which would decide the icon otherwise;\r\n      // it has the sequence number 50 in common\r\n      // do not set sequence to 30 that would take over the 'type' that has this MIME type\r\n      // and do not set to 50 because this object with this MIME type would have a different icon\r\n      sequence: 40\r\n    },\r\n    {\r\n      // video\r\n      startsWithNoCase: {mime_type: 'video/'},\r\n      className: 'csui-icon mime_video',\r\n      iconName: 'csui_mime_video',\r\n      mimeType: lang.NodeTypeVideo,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // zip\r\n      equalsNoCase: {\r\n        mime_type: [\r\n          'application/x-rar-compressed',\r\n          'application/zip',\r\n          'application/x-zip',\r\n          'application/x-zip-compressed'\r\n        ]\r\n      },\r\n      className: 'csui-icon mime_zip',\r\n      iconName: 'csui_mime_zip',\r\n      mimeType: lang.NodeTypeCompressed,\r\n      sequence: 50\r\n    },\r\n    {\r\n      // compound document\r\n      equals: {type: 136},\r\n      className: 'csui-icon compound_document',\r\n      iconName: 'csui_mime_compound_document',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_compound_document',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // compound document release\r\n      equals: {type: 138},\r\n      className: 'csui-icon csui-mime-compound-release',\r\n      iconName: 'csui_mime_compound_release32',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // compound document revision\r\n      equals: {type: 139},\r\n      className: 'csui-icon csui-mime-compound-revision',\r\n      iconName: 'csui_mime_compound_revision32',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // document\r\n      equals: {type: 144},\r\n      className: 'csui-icon mime_document',\r\n      iconName: 'csui_mime_document',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // CAD\r\n      equals: {type: 736},\r\n      className: 'csui-icon mime_drawing',\r\n      iconName: 'csui_mime_drawing',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // saved search query\r\n      equals: {type: 258},\r\n      className: 'csui-icon csui-icon-saved-search-query',\r\n      iconName: 'csui_mime_saved_search',\r\n      mimeType: lang.NodeTypeSearchQuery,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // custom search form\r\n      equals: {type: 292},\r\n      className: 'csui-icon csui-icon-query-form-search',\r\n      iconName: 'csui_mime_query_form_search',\r\n      mimeType: lang.NodeTypeSearchForm,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // URL link\r\n      equals: {type: 140},\r\n      className: 'csui-icon url1',\r\n      iconName: 'csui_mime_url',\r\n      mimeType: lang.NodeTypeURL,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // shortcut\r\n      equals: {type: 1},\r\n      className: 'csui-icon shortcut1',\r\n      iconName: 'csui_mime_shortcut',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_shortcut',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // generation\r\n      // note: since the RestAPI at the moment does not return the document version, showing the\r\n      // latest document mime-type icon with the shortcut overlay is incorrect.  Use the\r\n      // generation icon for now.  When the RestAPI and UI supports Generation, switch this to\r\n      // generation-overlay.\r\n      equals: {type: 2},\r\n      className: 'csui-icon mime_generation',\r\n      iconName: 'csui_mime_generation',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // category\r\n      equals: {type: 131},\r\n      className: 'csui-icon category1',\r\n      iconName: 'csui_mime_category',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // project\r\n      equals: {type: 202},\r\n      className: 'csui-icon csui-icon-project',\r\n      iconName: 'csui_mime_cs_project',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_cs_project',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // collection\r\n      equals: {type: 298},\r\n      className: 'csui-icon collection',\r\n      iconName: 'csui_mime_collection',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_collection',\r\n      sequence: 100\r\n    },\r\n    {\r\n      equals: {type: 141},\r\n      className: 'csui-icon csui-icon-enterprise-volume',\r\n      iconName: 'csui_mime_enterprise',\r\n      sequence: 100\r\n    },\r\n    {\r\n      equals: {type: 142},\r\n      className: 'csui-icon csui-icon-personal-volume',\r\n      iconName: 'csui_mime_enterprise',\r\n      sequence: 100\r\n    },\r\n    {\r\n      equals: {type: 133},\r\n      className: 'csui-icon csui-icon-category-volume',\r\n      iconName: 'csui_mime_category_volume',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Category Folder\r\n      equals: {type: 132},\r\n      className: 'csui-icon csui-icon-node-category-folder',\r\n      iconName: 'csui_mime_category_volume',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // LiveReport\r\n      equals: {type: 299},\r\n      className: 'csui-icon csui-icon-node-livereport',\r\n      iconName: 'csui_mime_livereport',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_livereport',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Milestone\r\n      equals: {type: 212},\r\n      className: 'csui-icon csui-icon-node-milestone',\r\n      iconName: 'csui_mime_milestone',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Poll\r\n      equals: {type: 218},\r\n      className: 'csui-icon csui-icon-node-poll',\r\n      iconName: 'csui_mime_poll',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Prospector\r\n      equals: {type: 384},\r\n      className: 'csui-icon csui-icon-node-prospector',\r\n      iconName: 'csui_mime_prospector',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Task\r\n      equals: {type: 206},\r\n      className: 'csui-icon csui-icon-node-task',\r\n      iconName: 'csui_mime_task',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Task Group\r\n      equals: {type: 205},\r\n      className: 'csui-icon csui-icon-node-task-group',\r\n      iconName: 'csui_mime_task_group',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Task List\r\n      equals: {type: 204},\r\n      className: 'csui-icon csui-icon-node-task-list',\r\n      iconName: 'csui_mime_task_list',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_task_list',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Perspective\r\n      equals: {type: 957 },\r\n      className: 'csui-icon csui-icon-perspective',\r\n      iconName: 'csui_mime_perspective',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Rule\r\n      equals: {type: 958 },\r\n      className: 'csui-icon csui-icon-rule',\r\n      iconName: 'csui_mime_rule',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Perspective Assets Folder\r\n      equals: {type: 955},\r\n      className: 'csui-icon csui-icon-perspective-assets-folder',\r\n      iconName: 'csui_mime_perspective_assets_folder',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Perspective Assets Volume\r\n      equals: {type: 954},\r\n      className: 'csui-icon csui-icon-perspective-assets-volume',\r\n      iconName: 'csui_mime_perspective_assets_volume',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Virtual Folder\r\n      equals: {type: 899},\r\n      className: 'csui-icon csui-icon-node-virtual-folder',\r\n      iconName: 'csui_mime_virtual_folder',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_virtual_folder',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Custom View\r\n      equals: {type: 146},\r\n      className: 'csui-icon mime_custom_view',\r\n      iconName: 'csui_mime_custom_view',\r\n      // Custom View has a MIME type, which would decide the icon otherwise;\r\n      // the MIME type icons have the sequence number 50 in common\r\n      sequence: 30\r\n    },\r\n    {\r\n      // Workflow Step\r\n      equals: {type: 153},\r\n      className: 'csui-icon assignment-workflow',\r\n      iconName: 'csui_mime_assignment_workflow',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Workflow Map\r\n      equals: {type: 128},\r\n      className: 'csui-icon mime_workflow_map',\r\n      iconName: 'csui_mime_workflow_map',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_workflow_map',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Workflow Status\r\n      equals: {type: 190},\r\n      className: 'csui-icon mime_workflow_status',\r\n      iconName: 'csui_mime_workflow_status',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_workflow_status',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Channel\r\n      equals: {type: 207},\r\n      className: 'csui-icon mime_channel',\r\n      iconName: 'csui_mime_channel',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_channel',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // News item\r\n      equals: {type: 208},\r\n      className: 'csui-icon mime_news',\r\n      iconName: 'csui_mime_news_item',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // Discussion\r\n      equals: {type: 215},\r\n      className: 'csui-icon mime_discussion',\r\n      iconName: 'csui_mime_conversation',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // XML DTD\r\n      equals: {type: 335},\r\n      className: 'csui-icon mime_xml_dtd',\r\n      iconName: 'csui_mime_xml',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_xml',\r\n      // XML DTD has a MIME type, which would decide the icon otherwise;\r\n      // the MIME type icons have the sequence number 50 in common\r\n      sequence: 30\r\n    },\r\n    {\r\n      // form\r\n      equals: {type: 223},\r\n      className: 'csui-icon mime_form',\r\n      iconName: 'csui_mime_form',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_form',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // form template\r\n      equals: {type: 230},\r\n      className: 'csui-icon mime_form_template',\r\n      iconName: 'csui_mime_layout_template',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_layout_template',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // pulse comments\r\n      equals: {type: 1281},\r\n      className: 'csui-icon icon-pulse-comment',\r\n      iconName: 'csui_mime_pulse_comment',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // wiki pages\r\n      equals: {type: 5574},\r\n      className: 'csui-icon mime_wiki_page',\r\n      iconName: 'csui_mime_wiki_page',\r\n      sequence: 10\r\n    },\r\n    // wikis\r\n    {\r\n      equals: {type: 5573},\r\n      className: 'csui-icon mime_wiki',\r\n      iconName: 'csui_mime_wiki',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_wiki',\r\n      sequence: 10\r\n    },\r\n\r\n\r\n    {\r\n      // default container\r\n      equals: {container: 'nonselectable'},\r\n      className: 'csui-icon mime_folder_nonselectable',\r\n      iconName: 'csui_mime_folder_nonselectable32',\r\n      sequence: 1000\r\n    },\r\n    {\r\n      // default container; covers folder-like nodes too\r\n      equals: {container: true},\r\n      className: 'csui-icon mime_folder',\r\n      iconName: 'csui_mime_folder',\r\n      withColorSchemaIconName: 'csui_colorschema_mime_folder',\r\n      sequence: 1000\r\n    },\r\n    {\r\n      // facets volume\r\n      equals: {type: 901},\r\n      className: 'csui-icon mime_facets_volume',\r\n      iconName: 'csui_mime_facets_volume',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // custom column\r\n      equals: {type: 902},\r\n      className: 'csui-icon csui-icon-custom-column',\r\n      iconName: 'csui_mime_custom_column',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // facets tree\r\n      equals: {type: 903},\r\n      className: 'csui-icon mime_facets_tree',\r\n      iconName: 'csui_mime_facets_tree',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // facets\r\n      equals: {type: 904},\r\n      className: 'csui-icon mime_facets',\r\n      iconName: 'csui_mime_facets',\r\n      sequence: 100\r\n    },\r\n    {\r\n      // default node\r\n      className: 'csui-icon mime_document',\r\n      iconName: 'csui_mime_document',\r\n      sequence: 10000\r\n    },\r\n    {\r\n      // SDD document\r\n      startsWithNoCase: {mime_type: 'application/sdd'},\r\n      className: 'csui-icon mime_application',\r\n      iconName: 'csui_mime_application',\r\n      mimeType: lang.NodeTypeSDD,\r\n      sequence: 50\r\n    }\r\n  ]);\r\n\r\n  if (extraIcons) {\r\n    nodeSprites.add(_.flatten(extraIcons, true));\r\n  }\r\n\r\n  return nodeSprites;\r\n\r\n});\r\n\n","\n","csui.define('csui/utils/node.info.sprites',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  // Load and register external node information sprites\r\n  'csui-ext!csui/utils/node.info.sprites'\r\n], function (_, Backbone, extraNodeInfoSprites) {\r\n\r\n  var NodeSpriteModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100\r\n    },\r\n\r\n    constructor: function NodeSpriteModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var NodeSpriteCollection = Backbone.Collection.extend({\r\n\r\n    model: NodeSpriteModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function NodeSpriteCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var nodeSprites = new NodeSpriteCollection();\r\n\r\n  if (extraNodeInfoSprites) {\r\n    nodeSprites.add(_.flatten(extraNodeInfoSprites, true));\r\n  }\r\n\r\n  return nodeSprites;\r\n\r\n});\r\n\n","\n","csui.define('csui/utils/smart.nodes/smart.nodes',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/models/mixins/rules.matching/rules.matching.mixin',\r\n  // Load and register external Smart UI node rules\r\n  'csui-ext!csui/utils/smart.nodes/smart.nodes'\r\n], function (_, Backbone, RulesMatchingMixin, rules) {\r\n  'use strict';\r\n\r\n  var SmartNodeModel = Backbone.Model.extend({\r\n    defaults: {\r\n      sequence: 100\r\n    },\r\n\r\n    constructor: function SmartNodeModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n      this.makeRulesMatching(options);\r\n    }\r\n  });\r\n\r\n  RulesMatchingMixin.mixin(SmartNodeModel.prototype);\r\n\r\n  var SmartNodeCollection = Backbone.Collection.extend({\r\n    model: SmartNodeModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function SmartNodeCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    isSupported: function (node, options) {\r\n      return this.some(function (item) {\r\n        return item.matchRules(node, item.attributes);\r\n      });\r\n    }\r\n  });\r\n\r\n  var smartNodes = new SmartNodeCollection();\r\n\r\n  if (rules) {\r\n    smartNodes.add(_.flatten(rules, true));\r\n  }\r\n\r\n  return smartNodes;\r\n});\r\n\n","csui.define('csui/utils/user.session/impl/nls/lang',{\r\n    // Always load the root bundle for the default locale (en-us)\r\n    \"root\": true,\r\n    // Do not load English locale bundle provided by the root bundle\r\n    \"en-us\": false,\r\n    \"en\": false\r\n  });\r\n  \n","csui.define('csui/utils/user.session/impl/nls/root/lang',{\r\n\r\n  errorTerminateSession: 'Terminating the session failed.',    \r\n  errorContinueSession: 'Continuing the session failed.',\r\n\r\n  errorHttpPrefix: 'HTTP'\r\n\r\n});\r\n\n","\n","csui.define('csui/utils/user.session/user.session',[\r\n  'module',\r\n  'require',\r\n  'csui/lib/underscore',\r\n  'csui/lib/jquery',\r\n  'csui/utils/log',\r\n  'csui/utils/url',\r\n  'csui/utils/base',\r\n  'i18n!csui/utils/user.session/impl/nls/lang'\r\n  ], function (module, require, _, $, log, Url, base, lang) {\r\n    'use strict';\r\n    log = log(module.id);\r\n\r\n    var singleton = function() {\r\n      log.info(\"user.session: module.config is: \" + JSON.stringify(module.config())) && console.log(log.last);\r\n      var DEFAULT_KINDNESS_PERIOD = 30 * 1000;                // at least 30 sec kindness time needed for refresh-call with still valid ticket\r\n      var DEFAULT_COOKIE_EXPIRATION_MODE = 1;                 // last request\r\n      var DEFAULT_ENABLE_EXPIRATION_HANDLING = false;         // disabled\r\n      var DEFAULT_SESSION_INACTIVITY_TIME = 30 * 60 * 1000;\r\n      var DEFAULT_SESSION_REACTION_TIME = 3 * 60 * 1000;\r\n\r\n      var config = _.extend({\r\n            signInPageUrl: 'signin.html',       // only for development\r\n            kindnessPeriod: DEFAULT_KINDNESS_PERIOD,\r\n            cookieExpirationMode: DEFAULT_COOKIE_EXPIRATION_MODE,\r\n            enableExpirationHandling: DEFAULT_ENABLE_EXPIRATION_HANDLING    \r\n          }, module.config()),\r\n          redirectEnabled = config.enableExpirationHandling == null ? DEFAULT_ENABLE_EXPIRATION_HANDLING : config.enableExpirationHandling,\r\n          cookieExpirationMode = config.cookieExpirationMode == null ? DEFAULT_COOKIE_EXPIRATION_MODE : config.cookieExpirationMode,\r\n          sessionInactivity = config.sessionInactivity == null ? DEFAULT_SESSION_INACTIVITY_TIME : config.sessionInactivity,\r\n          sessionReactionTime = config.sessionReactionTime == null ? DEFAULT_SESSION_REACTION_TIME : config.sessionReactionTime,\r\n          kindnessPeriod = config.kindnessPeriod == null ? DEFAULT_KINDNESS_PERIOD : config.kindnessPeriod,\r\n\r\n          // CS provides 3 modes: \r\n          //     0 = never expires (no additional params available)\r\n          //     1 = expire after last request\r\n          //     2 = expire after last login\r\n          isCookieExpirationEnabled   = (cookieExpirationMode > 0);\r\n\r\n      // print the finally used config values\r\n      var usedConfig = {\r\n        enableExpirationHandling: redirectEnabled,\r\n        cookieExpirationMode: cookieExpirationMode,          \r\n        sessionInactivity: sessionInactivity,\r\n        sessionReactionTime: sessionReactionTime,\r\n        kindnessPeriod: kindnessPeriod\r\n      };\r\n      log.warn(\"user.session: used config: \" + JSON.stringify(usedConfig)) && console.warn(log.last);\r\n\r\n\r\n      var timerId;\r\n      var expWarnDialog;\r\n      var logoutInitiated = false;\r\n\r\n\r\n      function getSessionReactionTime() {\r\n        return sessionReactionTime;\r\n      }\r\n\r\n      function getSessionInactivity() {\r\n        return sessionInactivity;\r\n      }\r\n\r\n      function isSessionExpirationEnabled() {\r\n        return redirectEnabled;\r\n      }\r\n\r\n      function getCookieExpirationMode() {\r\n        return cookieExpirationMode;\r\n      }\r\n\r\n      function currentDateUTC() {\r\n        return (new Date()).toUTCString();\r\n      }\r\n\r\n      // returns the overall expiration time, used to correct wrong/missing values\r\n      function _getOverallExpirationTime() {\r\n        return getSessionInactivity() + getSessionReactionTime();\r\n      }\r\n\r\n      // Ensures that the 'expires' and 'serverDate' exists\r\n      function _ensureExpiresTime(session) {\r\n        if ( session ) {\r\n          if (!session.expires || !session.serverDate) {\r\n            var dat = new Date();\r\n            session.serverDate = dat.toUTCString();\r\n            session.expires = new Date(dat.getTime() + _getOverallExpirationTime()).toUTCString();          \r\n            log.warn(\"user.session: _ensureExpiresTime: Adding 'serverDate' and 'expires' information to session (expires: \" + session.expires + \").\") && console.warn(log.last);\r\n          } else if( new Date(session.expires).getTime() <= new Date(session.serverDate).getTime() ) {\r\n            var dat2 = new Date();\r\n            session.serverDate = dat2.toUTCString();\r\n            session.expires = new Date(dat2.getTime() + _getOverallExpirationTime()).toUTCString();\r\n            log.warn(\"user.session: _ensureExpiresTime: Provided 'serverDate' is newer or equal than 'expires' value, exceptionally replacing values (expires: \" + session.expires + \").\") && console.warn(log.last);\r\n          }\r\n        } else {\r\n          log.error(\"user.session: _ensureExpiresTime: The provided argument 'session' is undefined!\") && console.error(log.last);\r\n        }\r\n      }\r\n\r\n      // Returns the expiration start time duration for the timer in seconds.\r\n      // After the duration the ExpirationWarningDialog should be shown.\r\n      function _calcExpirationStartTime(authenticator) {\r\n        var session = authenticator.connection.session;\r\n        var diffTime = 0;\r\n\r\n        _ensureExpiresTime(session);\r\n\r\n        if ( session && session.expires !== undefined && \r\n            (typeof session.expires === \"string\") && session.expires.length > 0 ) {\r\n\r\n          var expireDate = new Date(session.expires);\r\n          if (isNaN(expireDate.getTime())) { \r\n            expireDate = new Date(new Date().getTime() + _getOverallExpirationTime());\r\n            log.info(\"user.session: _calcExpirationStartTime: Got unparseable date value for expires '\" + session.expires + \"', using fallback value '\" + expireDate.toUTCString() + \"'.\") && console.log(log.last);\r\n            session.expires = expireDate.toUTCString();\r\n          }\r\n          var expireTime = expireDate.getTime();\r\n          expireTime -= kindnessPeriod;\r\n          if (expireTime < 0) { expireTime = 0; }\r\n\r\n          var currentDate = new Date(session.serverDate);\r\n          if (isNaN(currentDate.getTime())) {\r\n            currentDate = new Date();\r\n            log.warn(\"user.session: _calcExpirationStartTime: Got unparseable date value for serverDate '\" + session.serverDate + \"', using fallback value '\" + currentDate.toUTCString() + \"'.\") && console.warn(log.last);\r\n            session.serverDate = currentDate.toUTCString();\r\n          }\r\n          var currentTime = currentDate.getTime();\r\n          log.info(\"user.session: _calcExpirationStartTime: srvDate: \" \r\n            + session.serverDate + \", expires: \" + session.expires + \" (Date: \" + currentDateUTC() + \").\") \r\n            && console.log(log.last);\r\n\r\n          if ( currentTime >= expireTime ) {\r\n            diffTime = 0;\r\n          } else {\r\n            diffTime = expireTime - currentTime;\r\n          }\r\n          diffTime /= 1000; // secs\r\n        } else {\r\n          log.error(\"user.session: _calcExpirationStartTime: The provided authenticator.connection.session has no expiration information.\") && console.error(log.last);\r\n          // if we want to allow this you can return e.g. 5 secs, within a REST-call with expiration information has to provide the start time\r\n        }\r\n        log.info(\"user.session: _calcExpirationStartTime: secs until expiration: \" + diffTime) && console.log(log.last);\r\n        return diffTime;\r\n      }\r\n\r\n      // helper if countdown of expiration warning dialog should be displayed\r\n      function _shouldDisplayExpirationWarning() {\r\n        if ( this.isSessionExpirationEnabled() === true && isCookieExpirationEnabled ) {\r\n          // == 1 for only 'expire after last request'\r\n          // > 0 for mode 1 and 2\r\n          return ( this.getCookieExpirationMode() == 1 );\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // The authenticator.connection.session contains the 'ticket', 'serverDate' and 'expires' information.\r\n      function updateSessionTicket(authenticator, request) {\r\n        if (authenticator && authenticator.isAuthenticated()) {\r\n          if (request && request.settings && request.settings.url) {\r\n            var url = new Url(request.settings.url).getAbsolute().toLowerCase(),\r\n                match = url.match(/^.*\\/(api\\/[^?]+)/);\r\n            // Only REST API request handlers can supply a fresh ticket and\r\n            // renew the expiration warning timeout. Custom handlers written\r\n            // without the RESTAPIObject are not standardized and will not be\r\n            // able to take part on the expiration warning feature.\r\n            if (match) {\r\n              var call = match[1];\r\n              log.debug(\"user.session: updateSessionTicket: Resetting expiration timer based on call '\" + call + \"'.\") && console.log(log.last);\r\n              this.clearExpirationTimer();\r\n              this._createExpirationTimer(authenticator);\r\n            }\r\n          } else {\r\n            log.debug(\"user.session: updateSessionTicket: Resetting expiration timer based on unspecified call.\") && console.log(log.last);\r\n            this.clearExpirationTimer();\r\n            this._createExpirationTimer(authenticator);\r\n          }\r\n        } else {\r\n          log.warn(\"user.session: updateSessionTicket: Authenticator has to be 'authenticated' before updating session ticket!\") && console.warn(log.last);\r\n        }\r\n      }\r\n      \r\n      function startExpirationTimer(authenticator) {\r\n        if (authenticator && authenticator.isAuthenticated()) {\r\n          log.debug(\"user.session: startExpirationTimer: Creating new expiration timer with provided authenticator...\") && console.log(log.last);\r\n          this.clearExpirationTimer();\r\n          this._createExpirationTimer(authenticator);\r\n        } else {\r\n          console.warn(\"user.session: startExpirationTimer: Unable to start expiration timer, you have to provide an (still) authenticated 'authenticator'! Verify your parameter(s) for startExpirationTimer() function.\");\r\n        }\r\n      }\r\n      \r\n      function clearExpirationTimer() {\r\n        log.debug(\"user.session: clearExpirationTimer: called...\") && console.log(log.last);\r\n        if ( timerId ) {\r\n          clearInterval(timerId);\r\n          timerId = undefined;\r\n        }\r\n      }\r\n\r\n      // doOnce is called inside this function just once, but with each invokation of this function\r\n      // it can get called once.\r\n      function _createExpirationTimer(authenticator) {\r\n        var timer = _calcExpirationStartTime(authenticator);\r\n        var self = this;\r\n        var reactionTimeSecs = this.getSessionReactionTime()/1000;\r\n        var doOnce = (function() {\r\n          var executed = false;\r\n          return function(curTimer) {\r\n              if (!executed) {\r\n                  executed = true;\r\n          log.info(\"user.session: expirationTimer: current time for expiration warning count down: \" + self.currentDateUTC()) && console.log(log.last);\r\n                  self.displayExpirationWarning(authenticator, \r\n                    { startWithWarningContent: true, startTime: curTimer });\r\n              }\r\n          };\r\n        })();\r\n\r\n        timerId = setInterval(function () {\r\n          if (--timer < reactionTimeSecs) {\r\n            log.info(\"user.session: current expiration value: \" + timer) && console.log(log.last);\r\n            if ( timer >= 0 ) {\r\n              // create dialog with separate timer, so upcoming REST-calls do not influence the timer;\r\n              // an automatic logout is initiated as soon as the timer reached 0\r\n              doOnce(timer);\r\n            } else {\r\n              self.clearExpirationTimer();\r\n              log.info(\"user.session: expirationTimer: Switching to LoggedOut dialog content due to expired session...\") && console.log(log.last);\r\n              // trigger logout event on authenticator\r\n              self.sendAuthenticatorEvent(authenticator);\r\n              // show loggedOut content\r\n              self.performSessionExpired(authenticator, false);\r\n            }\r\n          }\r\n        }, 1000);\r\n      }\r\n\r\n      function stopExpirationWarningViewTimer(dialog) {\r\n        if ( dialog ){\r\n          log.debug(\"user.session: Sending event 'clear:timer' to dialog...\") && console.log(log.last);\r\n          dialog.triggerMethod('clear:timer', 'someValue');\r\n        } else {\r\n          log.debug(\"user.session: Skipping sending event 'clear:timer' to dialog, because dialog is already destroyed.\") && console.log(log.last);\r\n        }\r\n      }\r\n\r\n      function _showExpirationWarningDialog(authenticator, options) {\r\n        var self = this;\r\n        // we use here dynamical loading to allow the expiration warning dialog\r\n        // to be in a different bundle than UserSession which gets required in authenticator\r\n        require([ 'csui/utils/expiration.warning/expiration.warning.dialog'\r\n          ], function(ExpirationWarningDialog) {\r\n            \r\n            var dlgOptions = {\r\n              userSession: self,\r\n              authenticator: authenticator,\r\n              startWithWarningContent: options.startWithWarningContent,\r\n              startTime: options.startTime,\r\n              clearExpirationTimer: function() {  // callback function to clear timer\r\n                self.clearExpirationTimer();\r\n              }\r\n            };\r\n            \r\n            expWarnDialog = ExpirationWarningDialog.createExpirationWarningDialog(dlgOptions);\r\n\r\n            ExpirationWarningDialog.showExpirationWarningDialog(expWarnDialog)          \r\n            .always(function(result) {\r\n              log.debug(\"user.session: _showExpirationWarningDialog: Expiration dialog was finished, setting internal dialog to undefined.\") && console.log(log.last);\r\n              expWarnDialog = undefined;\r\n            });        \r\n\r\n        });\r\n      }\r\n\r\n      // In case the remaining time is already lower than the sessionReactionTime when loading\r\n      // the page then this function is called with each REST-call.\r\n      // => there should be only one expiration warning dialog.\r\n      function displayExpirationWarning(authenticator, options) {\r\n        if ( expWarnDialog === undefined && this.isSessionExpirationEnabled() === true) {     // we want just one dialog\r\n          if (options && options.startWithWarningContent === true) {\r\n            if ( this._shouldDisplayExpirationWarning() ) {\r\n              return this._showExpirationWarningDialog(authenticator, options);    \r\n            }\r\n          } else {\r\n            // just loggedOut content for 2 (= after login) without countdown\r\n            if ( isCookieExpirationEnabled ) {\r\n              options = options || {};\r\n              options.startWithWarningContent = false;\r\n              return this._showExpirationWarningDialog(authenticator, options);\r\n            }\r\n          }        \r\n        }\r\n      }\r\n\r\n      function redirectToTargetPage(authenticator) {\r\n        log.debug(\"user.session: redirectToTargetPage: Called ...\") && console.log(log.last);\r\n        // At this point of time the session in authenticator is normally invalid or cleared.\r\n        var cgiUrl = new Url(authenticator.connection.url).getCgiScript();\r\n        var targetUrl = Url.appendQuery(cgiUrl, 'func=csui.redirecttotarget');\r\n\r\n        // redirect to target\r\n        location.href = targetUrl;\r\n      }\r\n\r\n      function performSessionExpired(authenticator, doRedirect) {\r\n        var self = this;\r\n        if (this.isSessionExpirationEnabled() === true) {\r\n          if (!logoutInitiated) {\r\n            logoutInitiated = true;\r\n            log.debug(\"user.session: performSessionExpired: Initiating automatic logout ...\") && console.log(log.last);\r\n            // initiate automatic logout\r\n            this.clearExpirationTimer();\r\n\r\n            if (doRedirect === true) {\r\n              // redirect without logout    \r\n              log.info(\"user.session: performSessionExpired: Session expired, performing requested redirect (Date: \" + this.currentDateUTC() + \").\") && console.log(log.last);\r\n              this.redirectToTargetPage(authenticator);\r\n            } else {\r\n              // perform signOut\r\n              log.info(\"user.session: performSessionExpired: Session expired, performing signOut (Date: \" + this.currentDateUTC() + \").\") && console.log(log.last);\r\n              this.signOut(authenticator, { onErrorRedirect: true, isSessionExpired: true })\r\n              .done(function() {\r\n                logoutInitiated = false;\r\n                log.debug(\"user.session: performSessionExpired: Automatic logout requests successfully sent.\") && console.log(log.last);\r\n              })\r\n              .fail(function() {\r\n                logoutInitiated = false;\r\n                log.info(\"user.session: performSessionExpired: Sending automatic logout requests returned error.\") && console.log(log.last);\r\n              })\r\n              .always(function() {\r\n                log.info(\"user.session: performSessionExpired: Sending automatic logout requests finished, spawning redirect timer.\") && console.log(log.last);\r\n                // the timer based on kindnessPeriod may last longer than the session is valid, \r\n                // but redirectToTargetPage() supports this\r\n                var timerRedirectId = setTimeout(function () {\r\n                  logoutInitiated = false;\r\n                  if ( timerRedirectId ) {\r\n                    clearTimeout(timerRedirectId);\r\n                    timerRedirectId = undefined;\r\n                  }\r\n                  log.info(\"user.session: performSessionExpired: Redirecting to target page...'\") && console.log(log.last);\r\n                  self.redirectToTargetPage(authenticator);\r\n                }, kindnessPeriod);\r\n              });\r\n            }\r\n\r\n            // keep dialog on page to hide content\r\n          } else {\r\n            log.debug(\"user.session: performSessionExpired: A logout is already executed.\") && console.log(log.last);\r\n          }\r\n        } else {\r\n          log.debug(\"user.session: performSessionExpired: Skipping automatic logout due to disabled expiration handling.\") && console.log(log.last);\r\n          this.clearExpirationTimer();\r\n        }\r\n      }\r\n\r\n      function continueSession(authenticator) {\r\n        var self = this;\r\n        var cgiUrl = new Url(authenticator.connection.url).getCgiScript();\r\n\r\n        // performs 'GET auth' call\r\n        var authUrl = Url.combine(cgiUrl, 'api/v1/auth');\r\n        authenticator.makeAjaxCall({\r\n          url: authUrl,\r\n          headers: { \r\n              OTCSTicket: authenticator.connection.session.ticket\r\n            },\r\n          success: function (response, textStatus, request) {\r\n              log.debug('Receiving request response from {0}.', authUrl) && console.log(log.last);\r\n              response = authenticator.parseResponse(response, request);\r\n              // update session and call indirectly updateSessionTicket\r\n              authenticator.updateAuthenticatedSession(response, request);\r\n            }\r\n        })\r\n        .done(function() {\r\n          // the modal alert dialog handles destroy itself when you press a button\r\n          // self._dialogViewDestroy(dialog);\r\n          self.startExpirationTimer(authenticator);\r\n          log.info(\"expiration.warning.dialog: Processed continue session (Date: \" + self.currentDateUTC() + \").\") && console.log(log.last);\r\n        })\r\n        .fail(function(req) {            \r\n          self.sendAuthenticatorEvent(authenticator, 'failedTicketRefresh');          \r\n          // the error parameter is the request and the error-messages are in base.MessageHelper\r\n          var errMsg = lang.errorContinueSession;\r\n          var errDetails = new base.RequestErrorMessage(req);\r\n          var errResponse = lang.errorHttpPrefix + ' ' + errDetails.statusCode + (errDetails.message?': ':'') + errDetails.message;\r\n          log.error(\"expiration.warning.dialog: Processing continue session failed with an error (Date: \" + self.currentDateUTC() + \"). Error: \" + errResponse + \".\") && console.error(log.last);\r\n          require(['csui/dialogs/modal.alert/modal.alert'], function (ModalAlert) {\r\n            ModalAlert\r\n              .showError(errMsg + '\\n' + errResponse)\r\n              .always(function () {\r\n                self.redirectToTargetPage(authenticator);\r\n              });\r\n          });             \r\n        });      \r\n      }\r\n\r\n      function sendAuthenticatorEvent(authenticator, reasonStr) {\r\n        if (authenticator) {\r\n          authenticator.trigger(reasonStr || 'loggedOut', { sender: authenticator });\r\n        }\r\n      }\r\n\r\n      // The cmdData can contain optional flags:\r\n      //   unauthenticateReason - user specified unauthenticateReason reason\r\n      //   onErrorRedirect - if true, on error directly a redirect is performed \r\n      //                     otherwise a modal-error is displayed\r\n      //   isSessionExpired - flag, if signOut-reason is an expired session (e.g. automatic logout)\r\n      function signOut(authenticator, cmdData) {\r\n        var deferred = $.Deferred();\r\n        var self = this;\r\n        cmdData || (cmdData = {});\r\n\r\n        if (authenticator && authenticator.isAuthenticated()) {\r\n          var cgiUrl = new Url(authenticator.connection.url).getCgiScript();\r\n\r\n          require(['csui/utils/routing',\r\n                   'csui/utils/open.authenticated.page'\r\n            ], function (routing, openAuthenticatedPage) {\r\n\r\n            // Development HTML pages do not use the OTDS login page\r\n            if (routing.routesWithSlashes()) {\r\n\r\n              if (self.isSessionExpirationEnabled() === true) {\r\n\r\n                if (authenticator && authenticator.makeAjaxCall && typeof authenticator.makeAjaxCall === 'function') {\r\n                  // Invalidate the authenticated session, get the secure request token\r\n                  // for the classic logout page and perform the logout by navigating there.\r\n                  // Since csui.DoLogout is a ClassicUI call you have to provide a cookie.\r\n\r\n                  // get secure request token\r\n                  var tokenUrl = Url.combine(cgiUrl, 'api/v1/auth/logouttoken');\r\n                  authenticator.makeAjaxCall({\r\n                    url: tokenUrl,\r\n                    headers: {\r\n                      OTCSTicket: authenticator.connection.session.ticket\r\n                    },\r\n                    success: function (response, textStatus, request) {\r\n                      log.debug('Receiving request response from {0}.', tokenUrl) && console.log(log.last);\r\n                      response = authenticator.parseResponse(response, request);\r\n                      // update session and call indirectly updateSessionTicket\r\n                      authenticator.updateAuthenticatedSession(response, request);\r\n                    }\r\n                  }).then(function (response) {\r\n                    // perform csui.DoLogout\r\n                    var queryStr = 'func=csui.dologout&secureRequestToken=' + encodeURIComponent(response.token);\r\n                    if (cmdData.isSessionExpired === true) {\r\n                      // inform OTDS about expired session\r\n                      queryStr += '&authcontext=sessionexpired';\r\n                    }\r\n                    var logoutFct = Url.appendQuery(cgiUrl, queryStr);\r\n                    openAuthenticatedPage(authenticator.connection, logoutFct, {\r\n                      openInNewTab: false\r\n                    }).always(function() {\r\n                      authenticator.unauthenticate(cmdData.unauthenticateReason || {reason: 'logged-out'});\r\n                      log.debug(\"user.session: signOut: The logout request was sent to server (Date: \" + self.currentDateUTC() + \").\") && console.log(log.last);\r\n                      deferred.resolve();\r\n                    });\r\n                  }, function(req) {\r\n                    // the error parameter is the request and the error-messages are in base.MessageHelper\r\n                    var errMsg = lang.errorTerminateSession;\r\n                    var errDetails = new base.RequestErrorMessage(req);\r\n                    var errResponse = lang.errorHttpPrefix + ' ' + errDetails.statusCode + (errDetails.message?': ':'') + errDetails.message;\r\n                    if (cmdData.onErrorRedirect === true) {\r\n                      authenticator.unauthenticate(cmdData.unauthenticateReason || {reason: 'logged-out'});\r\n                      log.info(\"user.session: signOut: Terminate session was not successful, redirecting ... (Date: \" + self.currentDateUTC() + \"). Error: \" + errResponse + \".\") && console.error(log.last);\r\n                      self.redirectToTargetPage(authenticator);\r\n                    } else {\r\n                      log.error(\"user.session: signOut: Terminate session failed with an error (Date: \" + self.currentDateUTC() + \"). Error: \" + errResponse + \".\") && console.error(log.last);\r\n                      require(['csui/dialogs/modal.alert/modal.alert'], function (ModalAlert) {\r\n                        ModalAlert\r\n                          .showError(errMsg + '\\n' + errResponse)\r\n                          .always(function () {\r\n                            authenticator.unauthenticate(cmdData.unauthenticateReason || {reason: 'logged-out'});\r\n                            // redirect without logout    \r\n                            self.redirectToTargetPage(authenticator);\r\n                          });                        \r\n                      });\r\n                    }\r\n                    deferred.reject(req);     \r\n                  });\r\n                } else {\r\n                  // we have no makeAjaxCall, so perform just redirect to target page\r\n                  authenticator.unauthenticate(cmdData.unauthenticateReason || {reason: 'logged-out'});\r\n                  log.debug(\"user.session: signOut: makeAjaxCall is not available, so performing redirect to target page (Date: \" + self.currentDateUTC() + \").\") && console.log(log.last);\r\n                  self.redirectToTargetPage(authenticator);\r\n                  deferred.resolve();\r\n                }\r\n\r\n              } else {\r\n                // no session expiration warning enabled\r\n                // let the authenticators do their work, do not unauthenticate since it clears the session\r\n\r\n                log.debug(\"user.session: signOut: Session expiration handling is disabled, skipping logout (Date: \" + self.currentDateUTC() + \").\") && console.log(log.last);\r\n                deferred.resolve();\r\n              }\r\n\r\n            } else {\r\n              \r\n              // This is used on the development pages.\r\n              // Invalidate the authenticated session and navigate to the login page.\r\n              authenticator.unauthenticate(cmdData.unauthenticateReason || {reason: 'logged-out'});\r\n              var signInPageUrl = config.signInPageUrl,\r\n                  query = location.search;\r\n              query += query ? '&' : '?';\r\n              query += 'nextUrl=' + encodeURIComponent(location.pathname);\r\n              var logoutUrl = signInPageUrl + query + location.hash;\r\n              log.debug(\"user.session: signOut: Performed unauthenticate with redirect to development signIn page.\") && console.log(log.last);\r\n              location.href = logoutUrl;\r\n\r\n              deferred.resolve();\r\n            }\r\n          });   // require\r\n\r\n        } else {\r\n          // not authenticated\r\n          log.info(\"user.session: signOut: Authenticator is not 'authenticated' anymore, just returning success.\") && console.log(log.last);\r\n          deferred.resolve();\r\n        }\r\n\r\n        return deferred.promise();\r\n      }    \r\n\r\n\r\n\r\n      return {\r\n        // this can be used by everyone and specifies the authentication expiration\r\n        // configuration\r\n        getSessionReactionTime: getSessionReactionTime,\r\n        getSessionInactivity: getSessionInactivity,\r\n        isSessionExpirationEnabled: isSessionExpirationEnabled,\r\n        getCookieExpirationMode: getCookieExpirationMode,\r\n        currentDateUTC: currentDateUTC,\r\n\r\n        // these are helpers which can be used\r\n        signOut: signOut,\r\n        continueSession: continueSession,\r\n        redirectToTargetPage: redirectToTargetPage,\r\n\r\n        // these internal functions are needed by the dialog and views,\r\n        // you should avoid to call these functions directly\r\n        updateSessionTicket: updateSessionTicket,\r\n        startExpirationTimer: startExpirationTimer,\r\n        displayExpirationWarning: displayExpirationWarning,\r\n        performSessionExpired: performSessionExpired,      \r\n        clearExpirationTimer: clearExpirationTimer,\r\n        stopExpirationWarningViewTimer: stopExpirationWarningViewTimer,      \r\n        sendAuthenticatorEvent: sendAuthenticatorEvent,    \r\n\r\n        // private functions\r\n        _createExpirationTimer: _createExpirationTimer,\r\n        _shouldDisplayExpirationWarning: _shouldDisplayExpirationWarning,\r\n        _showExpirationWarningDialog: _showExpirationWarningDialog\r\n      };\r\n    };\r\n\r\n    return singleton();\r\n\r\n  });\r\n  \n","csui.define('csui/utils/authenticators/interactive.credentials.authenticator',[\r\n  'require', 'module', 'csui/lib/underscore',\r\n  'csui/utils/authenticators/request.authenticator'\r\n], function (require, module, _, RequestAuthenticator) {\r\n  'use strict';\r\n\r\n  // Warns, that the developer did not specify any authentication ticket\r\n  // or other header.  There is no interactive authentication in CS UI\r\n  // Widgets.  Integrators have to authenticate, preferably by SSO.\r\n  var InteractiveCredentialsAuthenticator = RequestAuthenticator.extend({\r\n    interactive: function() {\r\n      return true;\r\n    },\r\n\r\n    constructor: function InteractiveCredentialsAuthenticator(options) {\r\n      RequestAuthenticator.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    authenticate: function (options, succeeded, failed) {\r\n      // Normalize input parameters, which are all optional.\r\n      if (typeof options === 'function') {\r\n        failed = succeeded;\r\n        succeeded = options;\r\n        options = undefined;\r\n      }\r\n\r\n      RequestAuthenticator.prototype.authenticate.call(this, options,\r\n          succeeded, _.bind(this.openSignInDialog, this, succeeded));\r\n    },\r\n\r\n    openSignInDialog: function (succeeded) {\r\n      if (this.reauthenticating) {\r\n        return;\r\n      }\r\n      var self = this;\r\n      self.reauthenticating = true;\r\n      require([\r\n        'csui/utils/impl/signin.dialog/signin.dialog', 'csui/controls/progressblocker/blocker'\r\n      ], function (SignInDialog, BlockingView) {\r\n        var dialog = new SignInDialog({\r\n          connection: self.connection\r\n        });\r\n        BlockingView.suppressAll();\r\n        dialog.show()\r\n              .done(function (args) {\r\n                self.connection.session = args.session;\r\n                self.reauthenticating = false;\r\n                BlockingView.resumeAll();\r\n                succeeded(self.connection);\r\n              });\r\n      });\r\n    }\r\n  });\r\n\r\n  return InteractiveCredentialsAuthenticator;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/utils/authenticators/impl/redirecting.form.authenticator',['module','hbs','nuc/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        \"\n    + ((stack1 = (lookupProperty(helpers,\"icon-v2\")||(depth0 && lookupProperty(depth0,\"icon-v2\"))||container.hooks.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"icon-v2\",\"hash\":{\"on\":(depth0 != null ? lookupProperty(depth0,\"on\") : depth0),\"states\":\"true\",\"iconName\":(depth0 != null ? lookupProperty(depth0,\"iconName\") : depth0)},\"loc\":{\"start\":{\"line\":4,\"column\":8},\"end\":{\"line\":4,\"column\":59}}})) != null ? stack1 : \"\")\n    + \"        \\r\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"        <div class=\\\"icon circular \"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"iconRight\") || (depth0 != null ? lookupProperty(depth0,\"iconRight\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"iconRight\",\"hash\":{},\"loc\":{\"start\":{\"line\":6,\"column\":34},\"end\":{\"line\":6,\"column\":47}}}) : helper)))\n    + \"\\\"></div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<button class=\\\"csui-signin-close csui-with-iframe\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"dialogCloseButtonTooltip\") || (depth0 != null ? lookupProperty(depth0,\"dialogCloseButtonTooltip\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"dialogCloseButtonTooltip\",\"hash\":{},\"loc\":{\"start\":{\"line\":1,\"column\":58},\"end\":{\"line\":1,\"column\":86}}}) : helper)))\n    + \"\\\"\\r\\n    aria-label=\\\"\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"dialogCloseAria\") || (depth0 != null ? lookupProperty(depth0,\"dialogCloseAria\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"dialogCloseAria\",\"hash\":{},\"loc\":{\"start\":{\"line\":2,\"column\":16},\"end\":{\"line\":2,\"column\":35}}}) : helper)))\n    + \"\\\">    \\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"if\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"iconName\") : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"loc\":{\"start\":{\"line\":3,\"column\":4},\"end\":{\"line\":7,\"column\":11}}})) != null ? stack1 : \"\")\n    + \"</button>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_utils_authenticators_impl_redirecting.form.authenticator', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/utils/authenticators/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/utils/authenticators/impl/nls/root/lang',{\r\n\r\n  dialogCloseButtonTooltip: 'Close',\r\n  dialogCloseButtonAria: 'Close sign in dialog'\r\n\r\n});\r\n\n","\ncsui.define('css!csui/utils/authenticators/impl/redirecting.form.authenticator',[],function(){});\n","csui.define('csui/utils/authenticators/redirecting.form.authenticator',[\r\n  'require', 'module', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/lib/jquery', 'csui/utils/log',\r\n  'csui/utils/authenticators/request.authenticator',\r\n  'csui/utils/user.session/user.session',\r\n  'hbs!csui/utils/authenticators/impl/redirecting.form.authenticator',\r\n  'i18n!csui/utils/authenticators/impl/nls/lang',\r\n  'css!csui/utils/authenticators/impl/redirecting.form.authenticator'\r\n], function (require, module, _, Backbone, $, log, RequestAuthenticator, \r\n             UserSession, CloseButton, lang) {\r\n  'use strict';\r\n  log = log(module.id);\r\n\r\n  var config                      = module.config(),\r\n      authenticationIFrameTimeout = config.authenticationIFrameTimeout || 3000,\r\n      showCloseButtonOnError      = config.showCloseButtonOnError;\r\n\r\n  // Warns, that the developer did not specify any authentication ticket\r\n  // or other header.  There is no interactive authentication in CS UI\r\n  // Widgets.  Integrators have to authenticate, preferably by SSO.\r\n  var RedirectingFormAuthenticator = RequestAuthenticator.extend({\r\n    interactive: function() {      \r\n      return false;      \r\n    },\r\n\r\n    constructor: function RedirectingFormAuthenticator(options) {\r\n      RequestAuthenticator.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    authenticate: function (options, succeeded, failed) {\r\n      // Normalize input parameters, which are all optional.\r\n      if (typeof options === 'function') {\r\n        failed = succeeded;\r\n        succeeded = options;\r\n        options = undefined;\r\n      }\r\n      RequestAuthenticator.prototype.authenticate.call(this, options,\r\n          succeeded, _.bind(this.initiateLoginSequence, this, succeeded, failed));\r\n    },\r\n\r\n    \r\n    updateAuthenticatedSession: function (response, request) {\r\n      // call the parent implementation\r\n      RequestAuthenticator.prototype.updateAuthenticatedSession.call(this, response, request);\r\n\r\n      if (this.connection.session && this.connection.session.ticket) {        \r\n        // inform user session about updated ticket; in rare cases UserSession can be undefined \r\n        // if something went wrong in UserSession\r\n        if ( UserSession ) {\r\n          UserSession.updateSessionTicket(this, (request ? request : response));\r\n        } else {\r\n          log.info(\"redirecting.form.authenticator: updateAuthenticatedSession: UserSession is undefined, unable to updateSessionTicket in UserSession.\") && console.log(log.last);\r\n        }\r\n      } else {\r\n        log.error(\"redirecting.form.authenticator: updateAuthenticatedSession: Cannot get 'ticket' from just updated session, invalid request!\") && console.error(log.last);\r\n      }\r\n\r\n    },\r\n\r\n    unauthenticate: function (options) {\r\n      var authen = this.isAuthenticated();\r\n      if (authen && options && options.reason \r\n        && (options.reason === 'logged-out' || options.reason === 'expired') ) {\r\n          if (UserSession && UserSession.isSessionExpirationEnabled() === true) {\r\n            // Avoid popup of expiration warning dialog e.g. during ticket refresh.\r\n            // Clear expiration timer.\r\n            log.debug(\"redirecting.form.authenticator: unauthenticate: clearing expiration timer based on logged-out or expired.\") && console.log(log.last);\r\n            UserSession.clearExpirationTimer();\r\n          }\r\n      }\r\n      // the parent clears the session and sends 'loggedOut'\r\n      return RequestAuthenticator.prototype.unauthenticate.apply(this, arguments);\r\n    },\r\n\r\n\r\n    initiateLoginSequence: function (succeeded, failed) {\r\n      // this method is trying to reauthenticate with OTDS in the background\r\n      var self = this;\r\n      var timer, dialog, urlOrigin;\r\n      var skipFailedEvent = false;\r\n\r\n      // the initiateLoginSequence is only called if the authenticate failed;\r\n      if ( !isTruthy( self.getUserId() ) ) {\r\n        showErrorMessage();\r\n      } else {\r\n        window.addEventListener('message', receiveMessage, false);\r\n        createIFrame()\r\n          .done(waitForLogin);\r\n      }\r\n\r\n      function showErrorMessage() {\r\n        require([\r\n          'csui/controls/dialog/dialog.view',\r\n          'csui/widgets/error.global/error.global.view'\r\n        ], function (DialogView, ErrorGlobalView) {\r\n          // wrong credentials is a programmer error and we must not translate this message\r\n          var errorModel    = new Backbone.Model({\r\n              message:  'The userId is undefined, the preceding authentication failed. Please initialize CSUI in a correct way.',\r\n              hideNavigationButtons: true,\r\n              showCloseButton: showCloseButtonOnError,\r\n              errorCode: 401,\r\n              showLogout: false\r\n            }),\r\n            errorGlobalView = new ErrorGlobalView({\r\n              model: errorModel\r\n            });\r\n\r\n            var edialog = new DialogView({\r\n              standardHeader: false,\r\n              view: errorGlobalView,\r\n              fullSize: true\r\n            });\r\n  \r\n            edialog\r\n              .on('destroy', handleDestroy)\r\n              .on('childview:destroy', handleDestroy)\r\n              .show();\r\n\r\n            function handleDestroy() {\r\n              reportFailedTicketRefresh();\r\n              edialog.off('destroy', handleDestroy);\r\n              edialog.off('childview:destroy', handleDestroy);\r\n              // destroy the dialog and not just the view (but without receiving events again)\r\n              edialog.destroy();\r\n            }\r\n\r\n          // get rid of rotating wheel\r\n          suppressBlockingView();\r\n        });\r\n      }      \r\n\r\n      function reportFailedTicketRefresh()  {\r\n        if (skipFailedEvent === false && !self.isAuthenticated()) {\r\n          log.warn(\"redirecting.form.authenticator: Sending 'failedTicketRefresh' event...\") && console.log(log.last);\r\n          self.trigger('failedTicketRefresh', { sender: self });\r\n        }        \r\n      }\r\n\r\n      function createIFrame() {\r\n        var deferred = $.Deferred();\r\n        require([\r\n          'csui/lib/marionette', \r\n          'csui/controls/dialog/dialog.view',\r\n          'csui/utils/url'          \r\n        ], function (Marionette, DialogView, Url) {\r\n          var src = Url.appendQuery(new Url(self.connection.url).getCgiScript(), 'func=csui.ticket');\r\n          src = Url.appendQuery(src, 'userid=' + self.getUserId());\r\n          urlOrigin = new Url(self.connection.url).getOrigin();\r\n\r\n          var view = new Marionette.View({\r\n            el: $('<iframe>', {\r\n              width: '100%',\r\n              height: '100%',\r\n              src: src\r\n            })\r\n          });\r\n\r\n          var ControlView = Marionette.ItemView.extend({\r\n\r\n            ui: {\r\n              closeButton: 'button.csui-signin-close'\r\n            },\r\n\r\n            templateHelpers: function () {\r\n              return {\r\n                dialogCloseButtonTooltip: lang.dialogCloseButtonTooltip,\r\n                dialogCloseAria: lang.dialogCloseButtonAria,\r\n                iconName: 'csui_action_close_white32',\r\n                on: 'false'\r\n              };\r\n            },\r\n\r\n            template: CloseButton,\r\n\r\n            events: {\r\n              'click @ui.closeButton': 'onButtonClick'\r\n            },\r\n\r\n            onButtonClick: function(event) {\r\n              // use the matching implementation for destruction of the dialog from the parent\r\n              dialog.onClickClose(event);\r\n            }\r\n\r\n          });\r\n\r\n          dialog = new DialogView({\r\n            className: 'csui-signin-close',\r\n            standardHeader: false,\r\n            view: view,\r\n            fullSize: true,\r\n            footerView: new ControlView()\r\n          });\r\n          view.render();\r\n\r\n          //\r\n          // Comment out code below because on a real server with SSO, it always fails.\r\n          // The iframe load event is triggered 3 times:\r\n          // - The first 2 times have undefined location. Thus, error is triggered.\r\n          // - Only the third time has href pointing to the csui.ticket URL.\r\n          //\r\n          //view.el.addEventListener('load', function () {\r\n          //  try {\r\n          //    // If we cannot access the URL, the iframe was blocked by the content security policy.\r\n          //    var href = !!this.contentWindow.location.href;\r\n          //  } catch (error) {\r\n          //    reportError(error);\r\n          //  }\r\n          //});\r\n          dialog\r\n            .on('destroy', function () {\r\n              reportFailedTicketRefresh();\r\n            })\r\n            .show({render: false});\r\n\r\n          dialog.$el.css({'z-index': '1061'});  // higher than popover\r\n          dialog.$el.addClass('binf-hidden');\r\n          deferred.resolve();\r\n        }, deferred.reject);\r\n        return deferred.promise();\r\n      }\r\n\r\n      function removeIFrame() {\r\n        resumeBlockingView();\r\n        // prevent failedTicketRefresh event from being triggered by destroy\r\n        skipFailedEvent = true;\r\n        dialog && dialog.destroy();\r\n        skipFailedEvent = false;\r\n      }\r\n\r\n      function suppressBlockingView() {\r\n        require(['csui/controls/progressblocker/blocker'],\r\n            function (BlockingView) {\r\n              BlockingView.suppressAll();\r\n            });\r\n      }\r\n\r\n      function resumeBlockingView() {\r\n        require(['csui/controls/progressblocker/blocker'],\r\n            function (BlockingView) {\r\n              BlockingView.resumeAll();\r\n            });\r\n      }\r\n\r\n      function receiveMessage(event) {\r\n        // the IFrame was created with urlOrigin, so check that we communicate only with our IFrame\r\n        if (event.origin !== urlOrigin) {\r\n          log.warn('redirecting.form.authenticator: event.origin and urlOrigin differ, aborting!') && console.warn(log.last);\r\n          return;\r\n        }\r\n        if (event.data === 'csuiTicketLoaded') {\r\n          log.info('redirecting.form.authenticator: Sending getOrigin back to child.') && console.log(log.last);\r\n          event.source.postMessage('getOrigin', '*');\r\n        } else {\r\n          if (event.data.ticket) {\r\n            log.debug('redirecting.form.authenticator: Redirecting Form Authenticator received new ticket.') && console.log(log.last);\r\n            window.removeEventListener('message', receiveMessage, false);\r\n            timer && clearTimeout(timer);\r\n            timer = undefined;\r\n            removeIFrame();\r\n            var session = self.connection.session || (self.connection.session = {});\r\n            session.ticket = event.data.ticket;\r\n            session.expires = event.data.expires;\r\n            session.serverDate = event.data.serverDate;\r\n            succeeded && succeeded(self.connection);\r\n            // if this ticket refresh will be used with expiration warning, inform here UserSession\r\n            if (UserSession) {\r\n              UserSession.updateSessionTicket(self);\r\n            }\r\n            // signal loggedIn (= ticket refreshed), like normal login-page does\r\n            log.info(\"redirecting.form.authenticator: Sending 'loggedIn' event...\") && console.log(log.last);\r\n            self.trigger('loggedIn', {\r\n              sender: self,\r\n              connection: self.connection\r\n            });            \r\n          }\r\n        }\r\n      }\r\n\r\n      function waitForLogin() {\r\n        // If the server doesn't post a message after a few seconds, show the OTDS page.\r\n        timer = setTimeout(enableInteactiveLogin, authenticationIFrameTimeout);\r\n      }\r\n\r\n      function enableInteactiveLogin() {\r\n        // Show modal dialog containing the iFrame that shows the OTDS login page.\r\n        if (dialog) {\r\n          dialog.$el.removeClass('binf-hidden');\r\n          suppressBlockingView();\r\n        }\r\n      }\r\n\r\n      function reportError(error) {\r\n        require(['csui/dialogs/modal.alert/modal.alert'\r\n        ], function (ModalAlert) {\r\n          ModalAlert.showError(error.message);\r\n        });\r\n        failed(error, self.connection);\r\n      }\r\n\r\n      // avoid undefined, null, 0 and ''\r\n      function isTruthy(n) {\r\n        return !!n;\r\n      }\r\n\r\n    }\r\n  });\r\n\r\n  return RedirectingFormAuthenticator;\r\n});\r\n\n","csui.define('csui/utils/authenticators/core.authenticators',[\r\n  'module', 'csui/lib/underscore',\r\n  'csui/utils/authenticators/ticket.authenticator',\r\n  'csui/utils/authenticators/interactive.credentials.authenticator',\r\n  'csui/utils/authenticators/redirecting.form.authenticator'\r\n], function (module, _, TicketAuthenticator,\r\n    InteractiveCredentialsAuthenticator, RedirectingFormAuthenticator) {\r\n  'use strict';\r\n\r\n  var config = window.csui.requirejs.s.contexts._.config\r\n      .config['csui/utils/interactiveauthenticator'] || {},\r\n      enableInteractiveAuthenticator = config.enabled,\r\n      originalConfig = module.config();\r\n  config = _.extend({\r\n    // If there is no ticket, show a modal dialog with a login form and\r\n    // allow the user to enter credentials and get a ticket.\r\n    enableInteractiveAuthenticator: originalConfig.enableRedirectingFormAuthenticator === undefined &&\r\n                                    enableInteractiveAuthenticator !== false,\r\n    // If there is no ticket, try to get it using a request in a hidden\r\n    // iframe. Using response redirection it either posts back a ticket\r\n    // automatically, or it renders a login form and waits. The iframe\r\n    // will be shown to the user, who will log in manually and let the\r\n    // redirection to the pahe posting back tyhe ticket continue.\r\n    enableRedirectingFormAuthenticator: false\r\n  }, originalConfig);\r\n\r\n  // If no custom authentication means are detected, authentication\r\n  // will assume the native ticket. There are two authenticators, which\r\n  // can be enabled to prompt for login, or fetch the ticket\r\n  // automatically, is it is missing.\r\n  var FallbackAuthenticator =\r\n    config.enableInteractiveAuthenticator ?\r\n      InteractiveCredentialsAuthenticator :\r\n      config.enableRedirectingFormAuthenticator ?\r\n        RedirectingFormAuthenticator :\r\n        TicketAuthenticator;\r\n\r\n  return [\r\n    {\r\n      sequence: 500,\r\n      authenticator: FallbackAuthenticator\r\n    }\r\n  ];\r\n});\r\n\n","csui.define('csui/models/compound.document/releases/server.adaptor.mixin',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/url'\r\n], function (_, $, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function () {\r\n          return this;\r\n        },\r\n        url: function () {\r\n          var apiUrl = new Url(this.connector.connection.url).getApiBase(2), url;\r\n          var query = Url.combineQueryString(\r\n            this.getBrowsableUrlQuery(),\r\n            this.getRequestedCommandsUrlQuery(),\r\n            this.getExpandableResourcesUrlQuery(),\r\n            this.getAdditionalResourcesUrlQuery(),\r\n            this.getStateEnablingUrlQuery(),\r\n            this.getResourceFieldsUrlQuery(),\r\n            {\r\n              expand: 'properties{create_user_id,locked_user_id}',\r\n            }\r\n          );\r\n          url = Url.combine(apiUrl, 'nodes', this.options.node.get('id'), 'releases?' + query);\r\n          return url;\r\n        },\r\n\r\n        parse: function (response, options) {\r\n          var releaseCollection = [], collection = response.results;\r\n          this.parseBrowsedState(response, options);\r\n          this.columns && this.columns.resetColumnsV2(response, this.options);\r\n          $.each(collection, function (id) {\r\n            var nodeProperties = collection[id].data.properties;\r\n            releaseCollection.push({\r\n              type: nodeProperties.type,\r\n              type_name:nodeProperties.type_name,\r\n              name: nodeProperties.name,\r\n              release_value: nodeProperties.release + \".\" + nodeProperties.revision,\r\n              created: nodeProperties.create_date,\r\n              createdBy: nodeProperties.create_user_id_expand.name,\r\n              id: nodeProperties.id,\r\n              locked: nodeProperties.locked,\r\n              locked_user_id_expand: nodeProperties.locked && nodeProperties.locked_user_id_expand,\r\n              reserved_user_id_expand: nodeProperties.locked && nodeProperties.reserved_user_id_expand,\r\n              locked_date: nodeProperties.locked_date,\r\n              container: nodeProperties.container,\r\n              openable: true,\r\n              favorite: nodeProperties.favorite,\r\n              actions: collection[id].actions,\r\n              locked_user_id: nodeProperties.locked && nodeProperties.locked_user_id\r\n            });\r\n          });\r\n          return releaseCollection;\r\n        },\r\n\r\n        isFetchable: function () {\r\n          return !!this.options;\r\n        },\r\n      });\r\n    }\r\n  };\r\n  return ServerAdaptorMixin;\r\n});\n","csui.define('csui/models/node.createform/server.adaptor.mixin',[\r\n  'csui/lib/jquery', 'csui/lib/underscore', 'csui/utils/url'\r\n], function ($, _, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n\r\n        url: function () {\r\n          var path = 'forms/nodes/create',\r\n              params = {\r\n                parent_id: this.docParentId ? this.docParentId : this.node.get(\"id\"),\r\n                type: this.type\r\n              },\r\n              resource = path + '?' + $.param(params);\r\n          return Url.combine(this.node.connector.connection.url, resource);\r\n        },\r\n\r\n        parse: function (response) {\r\n          var forms = response.forms;\r\n\r\n          // TODO this should be sent by server, remove when possible\r\n          _.each(forms, function (form) {\r\n            form.id = form.schema.title;\r\n          });\r\n          forms && forms.length && (forms[0].id = \"general\");\r\n\r\n          return forms;\r\n        }\r\n\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/models/server.info/server.adaptor.mixin',[\r\n  'csui/lib/underscore', 'csui/utils/url'\r\n], function (_, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n        url: function () {\r\n          var url = Url.combine(this.connector.getConnectionUrl().getApiBase('v1'), 'serverInfo');\r\n          return url;\r\n        },\r\n        parse: function (response) {\r\n          this._changing = false;\r\n          return response;\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return ServerAdaptorMixin;\r\n});\n","csui.define('csui/models/permission/permission.precheck.server.adaptor',[\r\n  'csui/lib/underscore', 'csui/utils/url'\r\n], function (_, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n\r\n        url: function () {\r\n          var url = Url.combine(this.connector.getConnectionUrl().getApiBase('v2'), 'nodes',\r\n              this.get(\"id\"), '/descendents/subtypes/exists');\r\n          if (this.get(\"subType\") !== undefined) {\r\n            url = Url.appendQuery(url, 'sub_types=' + this.get(\"subType\"));\r\n          }\r\n          if (this.get(\"include_sub_items\")) {\r\n            url = Url.appendQuery(url, 'include_sub_items=' + this.get(\"include_sub_items\"));\r\n          }\r\n         return url;\r\n        },\r\n\r\n        parse: function (response, options) {\r\n          return response;\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return ServerAdaptorMixin;\r\n});\n","csui.define('csui/models/appliedcategories/category.server.adaptor.mixin',[\r\n  'csui/lib/jquery', 'csui/lib/underscore', 'csui/utils/url'\r\n], function ($, _, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n\r\n        url: function () {\r\n          var id = this.id, url;\r\n          if (id) {\r\n            url = Url.combine(this.node.urlBase(), 'categories', id);\r\n          } else {\r\n            url = Url.combine(this.node.urlBase(), 'categories');\r\n          }\r\n          return url;\r\n        },\r\n\r\n        parse: function (response, options) {\r\n          return this.sortInitially(response.data);\r\n        },\r\n\r\n        sortInitially: function (data) {\r\n          //default initial sort (only on arrays) is based on `name`.\r\n          return _.isArray(data) ? _.sortBy(data, function (ele) {return ele.name.toLowerCase()}) :\r\n                 data;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/models/appliedcategories/category',['csui/lib/backbone',\r\n'csui/models/mixins/expandable/expandable.mixin',\r\n'csui/models/mixins/resource/resource.mixin',\r\n'csui/models/mixins/uploadable/uploadable.mixin',\r\n'csui/models/appliedcategories/category.server.adaptor.mixin'\r\n], function (Backbone, ExpandableMixin, ResourceMixin,\r\n  UploadableMixin, ServerAdaptorMixin) {\r\n    'use strict';\r\n\r\n  var CategoryModel = Backbone.Model.extend({\r\n\r\n    idAttribute: null,\r\n    \r\n    constructor: function CategoryModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n      this.node = options.node;\r\n      this.id = options.id;\r\n\r\n      this.makeResource(options)\r\n          .makeUploadable(options)\r\n          .makeExpandable(options)\r\n          .makeServerAdaptor(options);\r\n    },\r\n\r\n    clone: function () {\r\n      return new this.constructor(this.attributes, {\r\n        connector: this.connector\r\n      });\r\n    }\r\n  });\r\n\r\n  ExpandableMixin.mixin(CategoryModel.prototype);\r\n  UploadableMixin.mixin(CategoryModel.prototype);\r\n  ResourceMixin.mixin(CategoryModel.prototype);\r\n  ServerAdaptorMixin.mixin(CategoryModel.prototype);\r\n\r\n  return CategoryModel;\r\n});\r\n\n","csui.define('csui/models/appliedcategories/systemattributes.server.adaptor.mixin',[\r\n  'csui/lib/jquery', 'csui/lib/underscore', 'csui/utils/url'\r\n], function ($, _, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n\r\n        url: function () {\r\n          var id = this.id,\r\n              url = this.connector.getConnectionUrl().getApiBase('v2');\r\n          url = Url.combine(url, \"nodes\", id, 'systemattributes');\r\n          return url;\r\n        },\r\n\r\n        parse: function (response, options) {\r\n          return response;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/models/appliedcategories/systemattributes.model',['csui/lib/backbone',\r\n  'csui/models/mixins/expandable/expandable.mixin',\r\n  'csui/models/mixins/resource/resource.mixin',\r\n  'csui/models/mixins/uploadable/uploadable.mixin',\r\n  'csui/models/appliedcategories/systemattributes.server.adaptor.mixin'\r\n], function (Backbone, ExpandableMixin, ResourceMixin,\r\n    UploadableMixin, ServerAdaptorMixin) {\r\n  'use strict';\r\n\r\n  var SystemAttributesModel = Backbone.Model.extend({\r\n\r\n    idAttribute: null,\r\n\r\n    constructor: function SystemAttributesModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n      this.node = options.node;\r\n      this.id = options.id;\r\n\r\n      this.makeResource(options)\r\n          .makeUploadable(options)\r\n          .makeExpandable(options)\r\n          .makeServerAdaptor(options);\r\n    },\r\n\r\n    clone: function () {\r\n      return new this.constructor(this.attributes, {\r\n        connector: this.connector\r\n      });\r\n    }\r\n  });\r\n\r\n  ExpandableMixin.mixin(SystemAttributesModel.prototype);\r\n  UploadableMixin.mixin(SystemAttributesModel.prototype);\r\n  ResourceMixin.mixin(SystemAttributesModel.prototype);\r\n  ServerAdaptorMixin.mixin(SystemAttributesModel.prototype);\r\n\r\n  return SystemAttributesModel;\r\n});\r\n\n","csui.define('csui/models/appliedcategories/category.validation.server.adaptor.mixin',[\r\n  'csui/lib/jquery', 'csui/lib/underscore', 'csui/utils/url'\r\n], function ($, _, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n\r\n        url: function () {\r\n          var url = this.connector.getConnectionUrl().getApiBase('v1');\r\n          url = Url.combine(url, 'validation/nodes/categories/enforcement');\r\n          return url;\r\n        },\r\n\r\n        parse: function (response, options) {\r\n          return response;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/models/appliedcategories/category.validation.model',['csui/lib/backbone',\r\n  'csui/models/mixins/expandable/expandable.mixin',\r\n  'csui/models/mixins/resource/resource.mixin',\r\n  'csui/models/mixins/uploadable/uploadable.mixin',\r\n  'csui/models/appliedcategories/category.validation.server.adaptor.mixin'\r\n], function (Backbone, ExpandableMixin, ResourceMixin,\r\n    UploadableMixin, ServerAdaptorMixin) {\r\n  'use strict';\r\n\r\n  var CategoryValidationModel = Backbone.Model.extend({\r\n\r\n    idAttribute: null,\r\n\r\n    constructor: function CategoryValidationModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.call(this, attributes, options);\r\n\r\n      this.makeResource(options)\r\n          .makeUploadable(options)\r\n          .makeExpandable(options)\r\n          .makeServerAdaptor(options);\r\n    },\r\n\r\n    clone: function () {\r\n      return new this.constructor(this.attributes, {\r\n        connector: this.connector\r\n      });\r\n    }\r\n  });\r\n\r\n  ExpandableMixin.mixin(CategoryValidationModel.prototype);\r\n  UploadableMixin.mixin(CategoryValidationModel.prototype);\r\n  ResourceMixin.mixin(CategoryValidationModel.prototype);\r\n  ServerAdaptorMixin.mixin(CategoryValidationModel.prototype);\r\n\r\n  return CategoryValidationModel;\r\n});\r\n\n","csui.define('csui/models/navigation.history',[\r\n  'module','csui/lib/underscore', 'csui/lib/backbone', 'csui/models/view.state.model'\r\n], function (module, _, Backbone, viewStateModel) {\r\n  'use strict';\r\n\r\n\r\n  var NavigationHistory = Backbone.History.extend({\r\n    constructor: function NavigationHistory(options) {\r\n      Backbone.History.prototype.constructor.apply(this, arguments);\r\n\r\n      var config = _.extend({\r\n        urlCanChange: true\r\n      }, module.config());\r\n\r\n      this.urlCanChange = config.urlCanChange;\r\n    },\r\n\r\n    is: 'CSUINavigationHistory',\r\n\r\n    checkUrl: function(e) {\r\n      if (this.urlCanChange) {\r\n        Backbone.History.prototype.checkUrl.call(this, e);\r\n      }\r\n    },\r\n\r\n    _updateHash: function (location, fragment, replace) {\r\n      if (this.urlCanChange) {\r\n        Backbone.History.prototype._updateHash.call(this, location, fragment, replace);\r\n      }\r\n    },\r\n\r\n    matchRoot: function () {\r\n      if (this.urlCanChange) {\r\n        return Backbone.History.prototype.matchRoot.call(this);\r\n      }\r\n      return true;\r\n    }\r\n\r\n  });\r\n\r\n  var history = new NavigationHistory();\r\n  Backbone.history = history;\r\n  return history;\r\n});\r\n\n","csui.define('bundles/csui-models',[\r\n  // Models\r\n  'csui/models/audit/audit.collection',\r\n  'csui/models/authenticated.user.node.permission',\r\n  'csui/models/favorite2',\r\n  'csui/models/favorite2group',\r\n  'csui/models/favorite2groups',\r\n  'csui/models/favorites2',\r\n  'csui/models/favorite2column',\r\n  'csui/models/favorite2columns',\r\n  'csui/models/favorite.model',\r\n  'csui/models/permission/nodepermission.model',\r\n  'csui/models/permission/nodeuserpermissions',\r\n  'csui/models/server.module/server.module.collection',\r\n  'csui/models/specificnodemodel',\r\n  'csui/models/version',\r\n  'csui/models/view.state.model',\r\n  'csui/models/perspective/personalization.model',\r\n  'csui/models/perspective/personalize/delta.generator',\r\n  'csui/models/perspective/personalize/delta.resolver',\r\n  'csui/models/compound.document/reorganize/reorganize.collection',\r\n\r\n  // Model mixins\r\n  'csui/models/widget/widget.collection',\r\n  'csui/models/widget/widget.model',\r\n  'csui/models/zipanddownload/zipanddownload.preflight',\r\n  'csui/models/zipanddownload/zipanddownload.stages',\r\n\r\n  // TODO: Remove this private module, once\r\n  // csui/models/widget/search.results/search.metadata/search.columns\r\n  // stops their bad practice.\r\n  'i18n!csui/models/impl/nls/lang',\r\n\r\n  // Utilities\r\n  'csui/utils/mime.types',\r\n  'csui/utils/classic.nodes/classic.nodes',\r\n  'csui/utils/defaultactionitems',\r\n  'csui/utils/nodesprites',\r\n  'csui/utils/node.info.sprites',\r\n  'i18n!csui/utils/impl/nls/lang',\r\n  'csui/utils/smart.nodes/smart.nodes',\r\n  'csui/utils/perspective/perspective.util',\r\n  'csui/utils/user.session/user.session',\r\n\r\n  // Authenticators\r\n  'csui/utils/authenticators/core.authenticators',\r\n  'csui/utils/authenticators/interactive.credentials.authenticator',\r\n  'csui/utils/authenticators/redirecting.form.authenticator',\r\n\r\n  // Server Adaptors\r\n  // TODO: Move them to the csui-server-adaptors bundle.\r\n  'csui/models/compound.document/releases/server.adaptor.mixin',\r\n  'csui/models/audit/server.adaptor.mixin',\r\n  'csui/models/node.createform/server.adaptor.mixin',\r\n  'csui/models/permission/server.adaptor.mixin',\r\n  'csui/models/permission/permission.action.server.adaptor.mixin',\r\n  'csui/models/server.info/server.adaptor.mixin',\r\n  'csui/models/permission/permission.precheck.server.adaptor',\r\n  'csui/models/appliedcategories/category',\r\n  'csui/models/appliedcategories/category.server.adaptor.mixin',\r\n  'csui/models/appliedcategories/systemattributes.model',\r\n  'csui/models/appliedcategories/systemattributes.server.adaptor.mixin',\r\n  'csui/models/appliedcategories/category.validation.server.adaptor.mixin',\r\n  'csui/models/appliedcategories/category.validation.model',\r\n  'csui/models/compound.document/reorganize/server.adaptor.mixin',\r\n\r\n  'csui/models/navigation.history'\r\n], {});\r\n\n"]}