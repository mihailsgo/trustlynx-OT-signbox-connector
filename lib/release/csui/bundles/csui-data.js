csui.define("csui/controls/icons.v2",["nuc/lib/underscore","smart/controls/icons.v2/icons.v2","csui-ext!csui/controls/icons.v2"],function(e,t,i){if(i)if(e.isArray(i))for(var n=0;n<i.length;n++){var s=i[n];t.registerIcons(s)}else t.registerIcons(i);return t}),csui.define("csui/controls/icon/icon.view",["smart/controls/icon/icon.view"],function(e){"use strict";return e}),csui.define("csui/utils/contexts/factories/next.node",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/node/node.model","csui/utils/commands"],function(e,t,i,n,s,o,r,a){"use strict";var l=/\bprefetch(?:=([^&]*)?)/i.exec(location.search);l=!l||"false"!==l[1];var c;return s.extend({"propertyPrefix":"nextNode","constructor":function(c,u){s.prototype.constructor.apply(this,arguments);var d=this.options.nextNode||{},p=e.config();if(l&&(this.initialResponse=d.initialResponse||p.initialResponse),!(d instanceof n.Model)){var h={"properties":[],"versions.element(0)":["owner_id"]},f={"properties":["original_id","locked_user_id"]};d.options&&(t.mapObject(d.options.fields,function(e,i){h[i]=t.union(h[i],e)}),t.mapObject(d.options.expand,function(e,i){f[i]=t.union(f[i],e)}));var m=c.getObject(o,u),g=i.extend(!0,{"connector":m,"fields":h,"expand":f,"stateEnabled":!0,"commands":a.getAllSignatures()},p.options,d.options);d=new r(d.attributes||p.attributes,g)}this.property=d},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){if(this.initialResponse&&!c){var t=this.property.prefetch(this.initialResponse,e);return c=!0,t}return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/search.query.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,n){var s=i.Model.extend({"constructor":function e(t,i){e.__super__.constructor.apply(this,arguments)},"toJSON":function(){return s.__super__.toJSON.apply(this,arguments)}});return n.extend({"propertyPrefix":"searchQuery","constructor":function(o,r){n.prototype.constructor.apply(this,arguments);var a=this.options.searchQuery||{};if(!(a instanceof i.Model)){var l=e.config();a=new s(a.models,t.extend({},a.options,l.options))}this.property=a}})}),csui.define("csui/utils/contexts/factories/search.formquery.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,n){var s=i.Model.extend({"constructor":function e(t,i){e.__super__.constructor.apply(this,arguments)},"toJSON":function(){return s.__super__.toJSON.apply(this,arguments)}});return n.extend({"propertyPrefix":"searchTemplate","constructor":function(o,r){n.prototype.constructor.apply(this,arguments);var a=this.options.searchQuery||{};if(!(a instanceof i.Model)){var l=e.config();a=new s(a.models,t.extend({},a.options,l.options))}this.property=a}})}),csui.define("css!csui/controls/tile/behaviors/impl/perfect.scrolling",[],function(){}),csui.define("csui/controls/tile/behaviors/perfect.scrolling.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/utils/accessibility","csui/lib/perfect-scrollbar","css!csui/controls/tile/behaviors/impl/perfect.scrolling"],function(e,t,i,n,s,o){"use strict";function r(e,i){var n=i||this.options||{},s=n[e];return t.isFunction(s)?n[e].call(this.view):s}var a=e.config();t.defaults(a,{"usePerfectScrollbar":!1}),o.isAccessibleMode()&&(a.usePerfectScrollbar=!1);var l={"minScrollbarLength":32,"stopPropagationOnClick":!1},c=n.Region.extend({"constructor":function(e){n.Region.prototype.constructor.apply(this,arguments),this._swapping=!1,this.listenTo(this,"before:swapOut",function(){this._swapping=!0}).listenTo(this,"swapOut",function(){this._swapping=!1}).listenTo(this,"show",function(){this._requestScrollbarUpdate()}).listenTo(this,"empty",function(){this._swapping||this._requestScrollbarUpdate()})},"_requestScrollbarUpdate":function(){this._parent._parent.trigger("update:scrollbar")}}),u=n.Behavior.extend({"defaults":{"contentParent":null},"constructor":function(e,s){if(n.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(s,"render",this._applyClasses),this._useScrollbar()&&this._usePerfectScrollbar()){var o=r.call(this,"updateOnWindowResize");this._renderState=0,this.listenToOnce(s,"render",function(){this.view.$el.on("csui:update:scrollbar."+s.cid,t.bind(this._updateScrollbarFromPropagation,this)),!1!==o&&i(window).on("resize."+s.cid,t.bind(this._updateScrollbar,this))}).listenToOnce(s,"before:destroy",function(){this.view.$el.off("csui:update:scrollbar."+s.cid),!1!==o&&i(window).off("resize."+s.cid)}).listenTo(s,"before:render",function(){this._renderState=1}).listenTo(s,"render",function(){this._renderState=0}).listenTo(s,"dom:refresh",this._ensureScrollbar).listenTo(s,"ensure:scrollbar",this._ensureScrollbar).listenTo(s,"before:render",this._destroyScrollbar).listenTo(s,"before:destroy",this._destroyScrollbar).listenTo(s,"update:scrollbar",this._refreshScrollbar).listenToOnce(s,"before:render",function(){s instanceof n.CollectionView&&s.collection&&this.listenTo(s.collection,"reset",function(){this._resetTriggered=!0}).listenTo(s,"before:render:collection",function(){++this._renderState}).listenTo(s,"render:collection",function(){this._resetTriggered=!1,--this._renderState||this._updateScrollbar()}).listenTo(s,"render:empty",function(){!this._resetTriggered&&this._renderState||this._updateScrollbar()}).listenTo(s,"add:child",function(){this._renderState||this._updateScrollbar()}).listenTo(s,"remove:child",function(){this._resetTriggered||this._renderState||this._updateScrollbar()})})}},"_applyClasses":function(){var e;if(this._contentParent=this._getContentParent(),this._useScrollbar())if(this._usePerfectScrollbar())e="csui-perfect-scrolling";else{var t=r.call(this,"suppressScrollX"),i=r.call(this,"suppressScrollY");e="csui-normal-scrolling",t&&(e+=" csui-no-scroll-x"),i&&(e+=" csui-no-scroll-y")}else e="csui-no-scrolling";this._contentParent.addClass(e)},"_ensureScrollbar":function(){if(this._contentParent=this._contentParent?this._contentParent:this._getContentParent(),!this._contentParent)throw new Error('The "dom:refresh"" event was triggered earlier than the "render" event in view '+this.view.cid+"("+Object.getPrototypeOf(this.view).constructor.name+")");if(this._perfectScrollbar)this._contentParent.perfectScrollbar("update");else{var e=t.reduce(["suppressScrollX","suppressScrollY","scrollXMarginOffset","scrollYMarginOffset","maxScrollbarLength","minScrollbarLength","includePadding"],function(e,t){var i=r.call(this,t);return i&&(e[t]=i),e},{},this);t.defaults(e,l),this._contentParent.perfectScrollbar(e),this._perfectScrollbar=!0,this._setClickEventFocus()}},"_setClickEventFocus":function(){var e=this._contentParent.find(".ps-scrollbar-y-rail"),t=this._contentParent.find(".ps-scrollbar-x-rail");if(s.isChrome())this._setClickEventRailFocus(e),this._setClickEventRailFocus(t);else{var i=this._contentParent.find(".ps-scrollbar-y"),n=this._contentParent.find(".ps-scrollbar-x");this._setClickEventBarFocus(i,e),this._setClickEventBarFocus(n,t)}},"_setClickEventBarFocus":function(e,t){var i=this;e.on("mousedown",function(e){i.addXYFocus=!0,t.addClass("binf-focus")}),t.on("mouseout",function(e){i.addXYFocus||(t.removeClass("binf-focus"),t.blur()),i.addXYFocus=!1})},"_setClickEventRailFocus":function(e){var t=this;e.length>0&&(e.on("mouseup",function(e){i(this).addClass("binf-focus"),t.addXYFocus=!0}),e.on("mouseleave",function(e){t.addXYFocus||i(this).removeClass("binf-focus"),t.addXYFocus=!1}))},"_refreshScrollbar":function(){this._contentParent&&this._perfectScrollbar&&(this._contentParent.find(".ps-scrollbar-y-rail").length||this._contentParent.find(".ps-scrollbar-x-rail").length?this._updateScrollbar():(this._destroyScrollbar(),this._ensureScrollbar()))},"_updateScrollbar":function(){this._perfectScrollbar&&this._contentParent.perfectScrollbar("update")},"_updateScrollbarFromPropagation":function(e){e.stopPropagation(),this._updateScrollbar()},"_destroyScrollbar":function(){this._perfectScrollbar&&(this._contentParent.perfectScrollbar("destroy"),this._contentParent.find(".ps-scrollbar-y-rail").off(),this._contentParent.find(".ps-scrollbar-x-rail").off(),this._perfectScrollbar=!1)},"_getContentParent":function(){var e=r.call(this,"contentParent");return e?e.insertAfter?e:t.isElement(e)?i(e):this.view.$(e):this.view.$el},"_useScrollbar":function(){return!(r.call(this,"scrollingDisabled")||r.call(this,"scrollingDisabled",this.view.options))},"_usePerfectScrollbar":function(){return u.usePerfectScrollbar()}},{"Region":c,"usePerfectScrollbar":function(){return a.usePerfectScrollbar&&!(s.isTouchBrowser()||s.isIE11())}});return u}),csui.define("csui/behaviors/keyboard.navigation/tabables.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/log","csui/utils/base"],function(e,t,i,n,s,o){"use strict";function r(e,i){var n=i||this.options||{},s=n[e];return t.isFunction(s)?n[e].call(this.view):s}s=s(e.id);var a=(e.config(),n.Behavior.extend({"constructor":function e(t,i){n.Behavior.prototype.constructor.apply(this,arguments);var s=this;this.view=i,this._pushTabableHandler(),this.tabableRegions=[],this.mustSortTabableRegions=!1,this.listenTo(i,"render",this._registerEventHandlers),this.listenTo(i,"destroy",this._popTabableHandler),this.listenTo(i,"dom:refresh",this.setFocusInActiveTabableRegion),setTimeout(function(){i.$el.on("keydown.csui-tabables",function(e){if(9===e.keyCode&&r.call(s,"containTabFocus"))return s._maintainTabFocus(e)})}),this.listenTo(i,"changed:focus",this._setFocusToNextRegion),this.listenTo(i,"switch:view",function(){e.switchViewDialog()})},"registerTabableRegion":function(e){return i.contains(this.view.el,e.view.el)?(this.unregisterTabableRegionBehavior(e),this.tabableRegions.push(e),this.mustSortTabableRegions=!0,!0):(s.debug("registerTabableRegion: not registering non descendant view "+e.view.constructor.name)&&console.log(s.last),!1)},"unregisterTabableRegionBehavior":function(e){e&&t.contains(this.tabableRegions,e)&&(s.debug("unregisterTabableRegion for view"+e.view.constructor.name)&&console.log(s.last),this.tabableRegions=t.reject(this.tabableRegions,function(t){return t===e}))},"_pushTabableHandler":function(){if(s.debug("_pushTabableHandler in view "+this.view.constructor.name)&&console.log(s.last),a.tabablesHandlers.length>0){var e=t.last(a.tabablesHandlers);t.each(e.tabableRegions,function(t){t._unregisterEventHandlers.call(t),e._clearTabIndexes.call(e,t.view)},this)}a.tabablesHandlers.push(this)},"_popTabableHandler":function(){if(a.tabablesHandlers.length>0){var e=t.last(a.tabablesHandlers);if(s.debug("_popTabableHandler in view "+e.view.constructor.name)&&console.log(s.last),t.each(e.tabableRegions,function(e){e._unregisterEventHandlers.call(e)}),e.view.$el.off("keydown.csui-tabables"),e.stopListening(e.view),a.tabablesHandlers.pop(),a.tabablesHandlers.length>0){var i=t.last(a.tabablesHandlers);t.each(i.tabableRegions,function(e){e.setInitialTabIndex.call(e),e._registerEventHandlers.call(e)}),i._setFocusInActiveTabableRegion()}}},"_sortTabableRegions":function(){var e=this.tabableRegions,i=[];this.view.$el.find(".csui-acc-tab-region").each(function(n,s){var o=t.find(e,function(e){return e.view.el===s});o&&i.push(o)}),this.tabableRegions=i,this.mustSortTabableRegions=!1},"_getNextActiveRegion":function(e,i){var n,s,r=this.tabableRegions;r=t.filter(r,function(e){return!e.$el.hasClass("binf-hidden")});var a=r.length-1,l=this._getActiveIndex(r);if(n=i?e?0===l?a:l-1:l===a?0:l+1:e?0===l?0:l-1:l===a?a:l+1,1===r.length)return s=r[0];for(;n!=l;){s=r[n];var c=s.getCurrentlyFocusedElementFromView(e);if(s.view.isTabable()&&c&&o.isVisibleInWindowViewport(c))return s;e?0===n?n=i?a:l:n>0&&--n:n===a?n=i?0:l:n<a&&++n}},"_getActiveIndex":function(e){if(this.currentlyActiveTabableRegion){this._sortTabableRegions();var t=this.currentlyActiveTabableRegion,i=this.tabableRegions;e&&(i=e);for(var n=0;n<i.length;n++)if(t.view.cid===i[n].view.cid)return n}},"_deactivateCurrentActiveTabableRegion":function(){var e=this._getActiveIndex();if(void 0!==e&&this.tabableRegions[e]){var t=this.tabableRegions[e].view;t.$el.removeClass("csui-acc-tab-region-active"),delete this.currentlyActiveTabableRegion,t.accDeactivateTabableRegion&&(s.debug("deactivating tabable region "+t.constructor.name)&&console.log(s.last),this.tabableRegions[e].ignoreFocusEvents=!0,t.accDeactivateTabableRegion.call(t),this.tabableRegions[e].ignoreFocusEvents=!1)}return e},"_setTabableRegionActive":function(e,t){s.debug("activating "+e.view.constructor.name+" as active tabable region")&&console.log(s.last),this._deactivateCurrentActiveTabableRegion(),e.view.$el.addClass("csui-acc-tab-region-active"),this.currentlyActiveTabableRegion=e,e.view.accActivateTabableRegion&&(e.ignoreFocusEvents=!0,e.view.accActivateTabableRegion.call(e.view,t),e.ignoreFocusEvents=!1)},"_setFocusInActiveTabableRegion":function(e){if(this.currentlyActiveTabableRegion&&document.body.contains(this.currentlyActiveTabableRegion.el))this.currentlyActiveTabableRegion.setFocus(e);else{var i,n=t.sortBy(this.tabableRegions,function(e){return e.view.options.initialActivationWeight});if(n.reverse().some(function(e){if(!e.options.notSetFocus)return i=e,!0}),i&&i.view.options.initialActivationWeight>0){s.debug("setFocus: "+i.view.constructor.name)&&console.log(s.last);i.setFocus(e)&&document.activeElement&&("BODY"===document.activeElement.tagName&&s.debug("setFocus Failed: "+i.view.constructor.name)&&console.log(s.last),s.debug("document.activeElement: "+document.activeElement.tagName)&&console.log(s.last))}}},"_clearTabIndexes":function(e){var t=e.$el.find(a.focusablesSelector).addBack(a.focusablesSelector);t.length?t.prop("tabindex",-1):s.debug("_clearTabIndexes: no focusables found in "+e.constructor.name)&&console.log(s.last)},"_maintainTabFocus":function(e){var t=e.shiftKey,i=this._getActiveIndex();if(void 0!==i){var n=this.tabableRegions[i],s=r.call(this,"recursiveNavigation");if(n&&n.onLastTabElement(t,e)){var o=this._getNextActiveRegion(t,!1);return o||(o=this._getNextActiveRegion(t,s)),o&&(this._setTabableRegionActive(o,t),this._setFocusInActiveTabableRegion(t)),!1}}return!0},"_setFocusToNextRegion":function(e){var t=r.call(this,"recursiveNavigation"),i=this._getNextActiveRegion(e,t);i&&(this._setTabableRegionActive(i),this._setFocusInActiveTabableRegion())}},{"tabablesHandlers":[],"focusablesSelector":"a[href], area[href], input, select, textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]","clearTabIndexes":function(e){var n=t.last(a.tabablesHandlers);n&&i.contains(n.view.el,e.el)&&n._clearTabIndexes.call(n,e)},"setTabableRegionActive":function(e){var n=t.last(a.tabablesHandlers);n&&i.contains(n.view.el,e.view.el)&&n._setTabableRegionActive.call(n,e)},"registerTabableRegion":function(e){s.debug("registerTabableRegion for view "+e.view.constructor.name)&&console.log(s.last);var i=t.last(a.tabablesHandlers);if(i)return i.registerTabableRegion.call(i,e)},"unregisterTabableRegion":function(e){e&&t.each(a.tabablesHandlers,function(t){t.unregisterTabableRegionBehavior.call(t,e)})},"setFocusInActiveTabableRegion":function(){var e=t.last(a.tabablesHandlers);e&&e._setFocusInActiveTabableRegion.call(e)},"popTabableHandler":function(){var e=t.last(a.tabablesHandlers);e&&e._popTabableHandler()},"switchViewDialog":function(){var e=this,i=e.tabablesHandlers[a.tabablesHandlers.length-1];i.view.$el.off("keydown.csui-tabables"),i.stopListening(i.view),a.tabablesHandlers.length>1&&a.tabablesHandlers.pop();var n=this.tabablesHandlers[this.tabablesHandlers.length-1];n._setFocusInActiveTabableRegion.call(n),t.each(n.tabableRegions,function(e){e.setInitialTabIndex.call(e),e._registerEventHandlers.call(e),setTimeout(function(){e.view.$el.on("keydown.csui-tabables",function(e){if(9===e.keyCode&&r.call(n,"containTabFocus"))return n._maintainTabFocus(e)})})})}}));return a}),csui.define("csui/behaviors/keyboard.navigation/tabable.region.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/behaviors/keyboard.navigation/tabables.behavior"],function(e,t,i,n,s,o,r){"use strict";var a=n.Behavior.extend({"defaults":{"initialActivationWeight":0},"constructor":function(e,i){n.Behavior.prototype.constructor.apply(this,arguments),this.view=i,i.tabableRegionBehavior=this,t.extend(i,this.defaults),t.defaults(i,{"isTabable":function(){return!0},"onLastTabElement":function(){return!0}}),i.options&&!i.options.initialActivationWeight&&(i.options.initialActivationWeight=this.options.initialActivationWeight),this._registerEventHandlers()},"_registerEventHandlers":function(){if(!this._eventsRegistered){var e=this.view,t=this;this.listenTo(e,"render",this._applyClasses),this.listenTo(e,"dom:refresh",function(){r.clearTabIndexes(e),r.registerTabableRegion(this)&&(t.isRegistered=!0,this.setInitialTabIndex(),r.setFocusInActiveTabableRegion())}),this.listenTo(e,"refresh:tabindexes",function(){r.clearTabIndexes(e),t.isRegistered&&(this.setInitialTabIndex(),r.setFocusInActiveTabableRegion())}),this.listenTo(e,"destroy",function(){r.unregisterTabableRegion(this),r.clearTabIndexes(e),t.isRegistered=!1}),this.listenTo(e,"tabable",function(){r.clearTabIndexes(e),r.registerTabableRegion(this)&&(this.setInitialTabIndex(),r.setFocusInActiveTabableRegion())}),this.listenTo(e,"tabable:not",function(){r.unregisterTabableRegion(this),r.clearTabIndexes(e),this.isRegistered=!1}),this.listenTo(e,"changed:focus",function(){t.isRegistered&&this.moveTabIndex()}),this.listenTo(e,"escaped:focus",function(){r.setFocusInActiveTabableRegion()}),this._eventsRegistered=!0}},"_unregisterEventHandlers":function(){var e=this.view;this.stopListening(e),this._eventsRegistered=!1},"getCurrentlyFocusedElementFromView":function(e){if(t.isFunction(this.view.currentlyFocusedElement)){var n=this.view.currentlyFocusedElement({"shiftKey":e});return n instanceof i?n:i(n)}return t.isString(this.view.currentlyFocusedElement)?this.view.$(this.view.currentlyFocusedElement):(s.debug("setInitialTabIndex: "+this.view.constructor.name+" does not have currentlyFocusedElement -> not setting tabindex in that view ")&&console.log(s.last),i())},"onLastTabElement":function(e,t){return this.view.onLastTabElement(e,t)},"setFocus":function(e){if(!this.options.notSetFocus){var t=this.getCurrentlyFocusedElementFromView(e);return t&&o.isVisibleInWindowViewport(t)?(this.ignoreFocusEvents=!0,t[0].focus(),this.ignoreFocusEvents=!1,!0):void 0}},"setInitialTabIndex":function(){if(this.currentlyFocusedElement&&this.currentlyFocusedElement.off("focus."+this.view.cid),this.view.isTabable())try{if(this.currentlyFocusedElement=this.getCurrentlyFocusedElementFromView(),this.currentlyFocusedElement&&this.currentlyFocusedElement.length>0){var e=this;this.currentlyFocusedElement.prop("tabindex",0),this.currentlyFocusedElement.addClass(a.accessibilityActiveElementClass),this.currentlyFocusedElement.on("focus."+this.view.cid,function(){e.ignoreFocusEvents||r.setTabableRegionActive(e)})}}catch(e){console.warn("Could not set as active element: ",this.view.cid,e.message)}else this.currentlyFocusedElement=i()},"moveTabIndex":function(){var e=this;this.currentlyFocusedElement&&(this.currentlyFocusedElement.off("focus."+this.view.cid),this.currentlyFocusedElement.prop("tabindex",-1),this.currentlyFocusedElement.removeClass(a.accessibilityActiveElementClass),this.currentlyFocusedElement=i());var t=this.getCurrentlyFocusedElementFromView();t.prop("tabindex",0),this.currentlyFocusedElement=t,this.currentlyFocusedElement.addClass(a.accessibilityActiveElementClass),this.currentlyFocusedElement.on("focus."+this.view.cid,function(){e.ignoreFocusEvents||r.setTabableRegionActive(e)})},"_applyClasses":function(){this.$el.addClass(a.accessibilityRegionClass)}},{"accessibilityRegionClass":"csui-acc-tab-region","accessibilityActiveRegionClass":"csui-acc-tab-region-active","accessibilityFocusableClass":"csui-acc-focusable","accessibilityActiveElementClass":"csui-acc-focusable-active"});return a}),csui.define("csui/controls/globalmessage/impl/progresspanel/impl/nls/progresspanel.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/globalmessage/impl/progresspanel/impl/nls/root/progresspanel.lang",{"BytesOfSize":"{0} of {1}","UploadingItems":"Uploading {0} items","UploadingOneItem":"Uploading item","UploadingSomeItems":"Uploading {0} items","UploadOneItemSuccessMessage":'"{0}" uploaded',"UploadManyItemsSuccessMessage":"Uploaded {0} items","UploadOneItemFailMessage":'"{0}" failed to upload',"MultiUploadOneItemFailMessage":"1 item failed to upload","UploadSomeItemsFailMessage":"{0} items failed to upload","UploadManyItemsFailMessage":"{0} items failed to upload","UploadSomeItemsFailMessage2":"{2} items failed to upload","UploadManyItemsFailMessage2":"{2} items failed to upload","UploadingSingleItem":'Uploading "{0}"',"FinalizingSingleItem":'Finalizing "{0}"',"UploadingOneItemStopped":'"{0}" stopped',"UploadingAllItemsStopped":"{0} items stopped","UploadSomeItemsStopped":"Upload completed","State_pending":"Waiting","State_processing":"Processing","State_resolved":"Done","State_rejected":"Failed","State_aborted":"Cancelled","State_stopped":"Stopped","State_stopping":"Stopping","State_finalizing":"Finalizing","StateAction_pending":"Waiting","StateAction_processing":"Stop","StateAction_resolved":"Done","StateAction_rejected":"Done","StateAction_aborted":"Done","Cancel":"Cancel","CancelAria":"Cancel upload of {0} item","StateAction_all_pending":"Waiting for upload of all items","StateAction_all_processing":"Stop upload of all items","StateAction_all_resolved":"All items uploaded","StateAction_all_rejected":"All items rejected to upload","StateAction_all_aborted":"All items aborted to upload","Expand":"Expand details","ExpandAria":"Expand list of details","Collapse":"Collapse details","CollapseAria":"Collapse list of details","Close":"Close","CloseAria":"Close the progress panel","minimize":"Hide message banner ","minimizeAria":"Hide message banner","UploadingLocation":'Uploading to "{0}"',"UploadedLocation":'Uploaded to "{0}"',"Retry":"Retry","RetryAll":"Retry all","GotoLocationLinkLabel":"Go to location","ErrorIconAria":"Error","SuccessIconAria":"Success","DetailsListAria":"List of detailed results"}),csui.define("hbs!csui/controls/globalmessage/impl/progresspanel/impl/progressbar",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,s){var o,r,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-progressbar csui-progressrow" style="height:48px;">\r\n  <div class="csui-name-status" role="listitem" tabindex="-1">\r\n    <div class="csui-names-progress '+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"singleItem"):t,{"name":"if","hash":{},"fn":e.program(2,s,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":36},"end":{"line":5,"column":72}}}))?o:"")+'">\r\n      <div class="csui-names csui-progresscell">\r\n        <div class="csui-name csui-progresscell" title="'+e.escapeExpression((r=null!=(r=a(i,"name")||(null!=t?a(t,"name"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":7,"column":56},"end":{"line":7,"column":64}}}):r))+'">\r\n          '+e.escapeExpression((r=null!=(r=a(i,"name")||(null!=t?a(t,"name"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":10},"end":{"line":8,"column":18}}}):r))+'\r\n        </div>\r\n      </div>\r\n      <div class="csui-states-actions">\r\n        <div class="csui-stateaction csui-progresscell '+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"singleItem"):t,{"name":"if","hash":{},"fn":e.program(2,s,0),"inverse":e.noop,"loc":{"start":{"line":12,"column":55},"end":{"line":12,"column":91}}}))?o:"")+'">\r\n'+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableCancel"):t,{"name":"if","hash":{},"fn":e.program(4,s,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":10},"end":{"line":18,"column":17}}}))?o:"")+'          <div\r\n               class="csui-stateaction-resolved binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-success" aria-label="'+e.escapeExpression((r=null!=(r=a(i,"successIconAria")||(null!=t?a(t,"successIconAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"successIconAria","hash":{},"loc":{"start":{"line":20,"column":138},"end":{"line":20,"column":157}}}):r))+'"></div>\r\n          <div\r\n               class="csui-stateaction-rejected binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-error" aria-label="'+e.escapeExpression((r=null!=(r=a(i,"errorIconAria")||(null!=t?a(t,"errorIconAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"errorIconAria","hash":{},"loc":{"start":{"line":22,"column":136},"end":{"line":22,"column":153}}}):r))+'"></div>\r\n          <div class="csui-stateaction-aborted binf-hidden"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"2":function(e,t,i,n,s){return"binf-hidden"},"4":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <button type="button" class="csui-stateaction-pending binf-btn binf-btn-default icon csui-icon\r\n                                       circle_delete" title="'+e.escapeExpression((o=null!=(o=r(i,"cancel")||(null!=t?r(t,"cancel"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":15,"column":61},"end":{"line":15,"column":71}}}):o))+'"></button>\r\n          <button type="button" class="csui-stateaction-processing binf-hidden binf-btn binf-btn-default icon\r\n                                       csui-icon circle_delete" aria-label="'+e.escapeExpression((o=null!=(o=r(i,"cancelAria")||(null!=t?r(t,"cancelAria"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancelAria","hash":{},"loc":{"start":{"line":17,"column":76},"end":{"line":17,"column":90}}}):o))+'" title="'+e.escapeExpression((o=null!=(o=r(i,"cancel")||(null!=t?r(t,"cancel"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":17,"column":99},"end":{"line":17,"column":109}}}):o))+'"></button>\r\n'},"6":function(e,t,i,n,s){var o,r,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"bundleDivider"):t,{"name":"if","hash":{},"fn":e.program(7,s,0),"inverse":e.noop,"loc":{"start":{"line":30,"column":0},"end":{"line":35,"column":7}}}))?o:"")+'<div class="csui-name-status" role="listitem" tabindex="-1">\r\n  <div class="csui-names-progress '+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"singleItem"):t,{"name":"if","hash":{},"fn":e.program(2,s,0),"inverse":e.noop,"loc":{"start":{"line":37,"column":34},"end":{"line":37,"column":70}}}))?o:"")+'">\r\n    <div class="csui-names csui-progresscell">\r\n      <div class="csui-type '+e.escapeExpression((r=null!=(r=a(i,"type_icon_class")||(null!=t?a(t,"type_icon_class"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"type_icon_class","hash":{},"loc":{"start":{"line":39,"column":28},"end":{"line":39,"column":47}}}):r))+'">\r\n      </div>\r\n      <div class="csui-name" title="'+e.escapeExpression((r=null!=(r=a(i,"name")||(null!=t?a(t,"name"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":41,"column":36},"end":{"line":41,"column":44}}}):r))+'">\r\n        '+e.escapeExpression((r=null!=(r=a(i,"name")||(null!=t?a(t,"name"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":42,"column":8},"end":{"line":42,"column":16}}}):r))+'\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="csui-states-actions">\r\n    <div class="csui-stateaction csui-progresscell '+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"singleItem"):t,{"name":"if","hash":{},"fn":e.program(2,s,0),"inverse":e.noop,"loc":{"start":{"line":47,"column":51},"end":{"line":47,"column":87}}}))?o:"")+'">\r\n      <div class="csui-stateaction-resolved binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-success" aria-label="'+e.escapeExpression((r=null!=(r=a(i,"successIconAria")||(null!=t?a(t,"successIconAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"successIconAria","hash":{},"loc":{"start":{"line":48,"column":134},"end":{"line":48,"column":153}}}):r))+'"></div>\r\n      <div class="csui-stateaction-rejected binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-error" aria-label="'+e.escapeExpression((r=null!=(r=a(i,"errorIconAria")||(null!=t?a(t,"errorIconAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"errorIconAria","hash":{},"loc":{"start":{"line":49,"column":132},"end":{"line":49,"column":149}}}):r))+'"></div>\r\n      <div class="csui-stateaction-aborted binf-hidden" ></div>\r\n    </div>\r\n    <div class="csui-progress csui-progresscell">\r\n      <div class="csui-progress-dynamic binf-hidden" aria-hidden="true">\r\n        <div class="csui-loading-parent-wrapper binf-disabled csui-disabled">\r\n          <span class="csui-loading-dots-wrapper">\r\n            <span class="csui-loading-dot">\r\n            </span>\r\n            <span class="csui-loading-dot">\r\n            </span>\r\n            <span class="csui-loading-dot">\r\n            </span>\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div class="csui-progress-static">\r\n        <div class="csui-progress-textbar">\r\n          <div class="csui-progress-static-pending" aria-hidden="true">'+e.escapeExpression((r=null!=(r=a(i,"state_pending")||(null!=t?a(t,"state_pending"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_pending","hash":{},"loc":{"start":{"line":67,"column":71},"end":{"line":67,"column":88}}}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-processing binf-hidden" aria-hidden="true">'+e.escapeExpression((r=null!=(r=a(i,"state_processing")||(null!=t?a(t,"state_processing"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_processing","hash":{},"loc":{"start":{"line":69,"column":86},"end":{"line":69,"column":106}}}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-resolved binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"state_resolved")||(null!=t?a(t,"state_resolved"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_resolved","hash":{},"loc":{"start":{"line":71,"column":65},"end":{"line":71,"column":83}}}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-rejected binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"errorMessage")||(null!=t?a(t,"errorMessage"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"errorMessage","hash":{},"loc":{"start":{"line":73,"column":65},"end":{"line":73,"column":81}}
}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-aborted binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"state_aborted")||(null!=t?a(t,"state_aborted"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_aborted","hash":{},"loc":{"start":{"line":75,"column":64},"end":{"line":75,"column":81}}}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-stopped binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"state_stopped")||(null!=t?a(t,"state_stopped"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_stopped","hash":{},"loc":{"start":{"line":77,"column":64},"end":{"line":77,"column":81}}}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-stopping binf-hidden" aria-hidden="true">'+e.escapeExpression((r=null!=(r=a(i,"state_stopping")||(null!=t?a(t,"state_stopping"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_stopping","hash":{},"loc":{"start":{"line":79,"column":84},"end":{"line":79,"column":102}}}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-finalizing binf-hidden" aria-hidden="true">'+e.escapeExpression((r=null!=(r=a(i,"state_finalizing")||(null!=t?a(t,"state_finalizing"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_finalizing","hash":{},"loc":{"start":{"line":81,"column":86},"end":{"line":81,"column":106}}}):r))+'\r\n          </div>\r\n        </div>\r\n        <div class="csui-percent">\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="Error-message binf-hidden">\r\n      <div class="csui-error" title="'+e.escapeExpression((r=null!=(r=a(i,"error")||(null!=t?a(t,"error"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"error","hash":{},"loc":{"start":{"line":89,"column":37},"end":{"line":89,"column":46}}}):r))+'">\r\n        '+e.escapeExpression((r=null!=(r=a(i,"error")||(null!=t?a(t,"error"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"error","hash":{},"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":17}}}):r))+'\r\n      </div>\r\n    </div>\r\n    <div class="csui-stateaction csui-progress-cancel">\r\n'+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableCancel"):t,{"name":"if","hash":{},"fn":e.program(12,s,0),"inverse":e.noop,"loc":{"start":{"line":94,"column":6},"end":{"line":100,"column":13}}}))?o:"")+"    </div>\r\n"+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableRetry"):t,{"name":"if","hash":{},"fn":e.program(14,s,0),"inverse":e.noop,"loc":{"start":{"line":102,"column":4},"end":{"line":106,"column":11}}}))?o:"")+"\r\n  </div>\r\n</div>\r\n"},"7":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-progresspanel-divider">\r\n  '+(null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"location"):t,{"name":"if","hash":{},"fn":e.program(8,s,0),"inverse":e.noop,"loc":{"start":{"line":32,"column":2},"end":{"line":32,"column":123}}}))?o:"")+"\r\n  "+(null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"targetLocationUrl"):t,{"name":"if","hash":{},"fn":e.program(10,s,0),"inverse":e.noop,"loc":{"start":{"line":33,"column":2},"end":{"line":33,"column":158}}}))?o:"")+" \r\n</div>\r\n"},"8":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' <span class="csui-progresspanel-location binf-pull-left" title="'+e.escapeExpression((o=null!=(o=r(i,"location")||(null!=t?r(t,"location"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"location","hash":{},"loc":{"start":{"line":32,"column":83},"end":{"line":32,"column":95}}}):o))+'">'+e.escapeExpression((o=null!=(o=r(i,"location")||(null!=t?r(t,"location"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"location","hash":{},"loc":{"start":{"line":32,"column":97},"end":{"line":32,"column":109}}}):o))+"</span>"},"10":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="csui-gotolocation-url binf-hidden binf-pull-right" href="'+e.escapeExpression((o=null!=(o=r(i,"targetLocationUrl")||(null!=t?r(t,"targetLocationUrl"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"targetLocationUrl","hash":{},"loc":{"start":{"line":33,"column":94},"end":{"line":33,"column":115}}}):o))+'" role="button">'+e.escapeExpression((o=null!=(o=r(i,"gotoLocation")||(null!=t?r(t,"gotoLocation"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"gotoLocation","hash":{},"loc":{"start":{"line":33,"column":131},"end":{"line":33,"column":147}}}):o))+"</a>"},"12":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button type="button" class="csui-stateaction-pending binf-btn binf-btn-default icon csui-icon\r\n                                   circle_delete" aria-label="'+e.escapeExpression((o=null!=(o=r(i,"cancelAria")||(null!=t?r(t,"cancelAria"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancelAria","hash":{},"loc":{"start":{"line":96,"column":62},"end":{"line":96,"column":76}}}):o))+'" title="'+e.escapeExpression((o=null!=(o=r(i,"cancel")||(null!=t?r(t,"cancel"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":96,"column":85},"end":{"line":96,"column":95}}}):o))+'" tabindex="-1"></button>\r\n      <button type="button" class="csui-stateaction-processing binf-hidden binf-btn binf-btn-default icon\r\n                                   csui-icon circle_delete" aria-label="'+e.escapeExpression((o=null!=(o=r(i,"cancelAria")||(null!=t?r(t,"cancelAria"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancelAria","hash":{},"loc":{"start":{"line":98,"column":72},"end":{"line":98,"column":86}}}):o))+'" title="'+e.escapeExpression((o=null!=(o=r(i,"cancel")||(null!=t?r(t,"cancel"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":98,"column":95},"end":{"line":98,"column":105}}}):o))+'" tabindex="-1"></button>\r\n      <div class="csui-stateaction-stopped binf-hidden"></div>\r\n'},"14":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-show-retry binf-hidden">\r\n        <button type="button" class="csui-showRetry" title="'+e.escapeExpression((o=null!=(o=r(i,"retry")||(null!=t?r(t,"retry"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"retry","hash":{},"loc":{"start":{"line":104,"column":60},"end":{"line":104,"column":69}}}):o))+"\" tabindex='-1'>"+e.escapeExpression((o=null!=(o=r(i,"retry")||(null!=t?r(t,"retry"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"retry","hash":{},"loc":{"start":{"line":104,"column":85},"end":{"line":104,"column":94}}}):o))+"</button>\r\n      </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\r\n"+(null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"commandName"):t,{"name":"if","hash":{},"fn":e.program(1,s,0),"inverse":e.program(6,s,0),"loc":{"start":{"line":2,"column":0},"end":{"line":110,"column":7}}}))?o:"")}});return i.registerPartial("csui_controls_globalmessage_impl_progresspanel_impl_progressbar",n),n}),csui.define("css!csui/controls/globalmessage/impl/progresspanel/impl/progresspanel",[],function(){}),csui.define("css!csui/controls/globalmessage/globalmessage_icons",[],function(){}),csui.define("csui/controls/globalmessage/impl/progresspanel/progressbar.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/nodesprites","module","i18n!csui/controls/globalmessage/impl/progresspanel/impl/nls/progresspanel.lang","hbs!csui/controls/globalmessage/impl/progresspanel/impl/progressbar","css!csui/controls/globalmessage/impl/progresspanel/impl/progresspanel","css!csui/controls/globalmessage/globalmessage_icons"],function(e,t,i,n,s,o,r){"use strict";var a=e.defaults(s.config().csui,{"panelRefreshThrottle":400}),l=["pending","processing","rejected","resolved","aborted","stopped","stopping","finalizing"];return i.ItemView.extend({"constructor":function(t){i.ItemView.prototype.constructor.call(this,t);var n=this.model;n.node&&void 0===n.node.get("mime_type")&&n.node.set({"container":!1,"type":void 0!==n.node.get("type")?n.node.get("type"):void 0!==n.get("type")?n.get("type"):144,"mime_type":n.get("mime_type")||n.get("type")},{"silent":!0}),this.listenTo(this.model,"change",e.throttle(this._updateItem,a.panelRefreshThrottle)),this.listenTo(this.model,"change:state",this._updateItem)},"_updateItem":function(){var e=this.computeProgress(),t=this.$el;this.options.parentView.updateProgressArea(t,e),"processing"===this.model.get("state")&&(this.$el.find(".csui-stateaction-pending").addClass("binf-hidden"),this.$el.find(".csui-stateaction-processing").addClass("binf-hidden"))},"computeProgress":function(){var t=this.model.get("count"),i=this.model.get("total"),n=this.model.get("state"),s=i>0&&t>=0?Math.floor(t/i*100):0;return 100===s&&"processing"===n&&(n="finalizing",this.model.set({"state":n}),this.$el.find(".csui-name-status button").not(".binf-hidden").is(":focus")&&this.ui.itemRow.trigger("focus"),this.$el.find(".csui-stateaction-processing").addClass("binf-hidden")),{"count":t,"total":i,"percentage":s,"state":this.model.get("errorMessage")?"rejected":n,"errorMessage":this.model.get("errorMessage"),"label":e.str.sformat("{0} {1}",this.options.oneFilePending,this.getItemLabel())}},"className":"csui-progressbar csui-progressrow","template":r,"getItemLabel":function(){return this.model.get("newName")||this.model.get("name")},"templateHelpers":function(){var t=this.computeProgress(),i=this.model,s=1===this.collection.length,r=this.getItemLabel(),c=e.str.sformat(o.CancelAria,r),u=(!!i.get("commandName")||i.get("commandName"),!this.options.hideGotoLocationMultiSet&&i.get("location")?i.get("targetLocation"):void 0);return t.name=r,t.enableCancel=this.options.enableCancel,t.type_icon_class=this.model.node?n.findClassByNode(this.model.node):"",l.forEach(function(e){t["state_"+e]=o["State_"+e]}),t.cancel=o.Cancel,t.cancelAria=c,t.expand=o.Expand,t.collapse=o.Collapse,t.close=o.Close,t.singleItem=s,t.minimize=o.minimize,t.minimizeAria=o.minimizeAria,t.retry=o.Retry,t.gotoLocation=this.options.parentView.options.gotoLocationLinkLabel,t.targetLocationUrl=u?u.url:void 0,t.enableRetry=a.enableRetry,t.errorIconAria=o.ErrorIconAria,t.successIconAria=o.SuccessIconAria,t},"onRender":function(){this._updateItem()},"ui":{"pendingAction":".csui-stateaction-pending","processingAction":".csui-stateaction-processing","error":".csui-error","retryContainer":".csui-show-retry","retryButton":".csui-showRetry","gotoLocationElem":".csui-gotolocation-url","cancelButton":".csui-name-status button","itemRow":".csui-name-status"},"events":{"click @ui.pendingAction":"doCancel","click @ui.processingAction":"doCancel","keydown @ui.pendingAction":"handleKeydownOnCancel","keydown @ui.processingAction":"handleKeydownOnCancel","click @ui.retryButton":"processRetry","keydown @ui.retryButton":"processRetry","click @ui.gotoLocationElem":"hanldleClickGotoLocation","keydown":"handleKeydownEvent"},"setFocus":function(){this.$el.addClass("focused-row");var e=this.$el.find("button").not(".binf-hidden");return 0!==e.length?(e.trigger("focus"),e):(this.ui.itemRow.trigger("focus"),this.ui.itemRow)},"removeFocus":function(){this.$el.removeClass("focused-row")},"doCancel":function(){this.model.abort()},"handleKeydownOnCancel":function(e){32!==e.keyCode&&13!==e.keyCode||!this.ui.cancelButton.not(".binf-hidden").is(":focus")||(this.ui.itemRow.trigger("focus"),this.doCancel())},"processRetry":function(e){("keydown"!==e.type||32!==e.keyCode&&13!==e.keyCode)&&"click"!==e.type||this.model.trigger("try:again")},"showGotoLocationElem":function(){this.ui.gotoLocationElem&&this.ui.gotoLocationElem.removeClass("binf-hidden")},"showRetryElem":function(){a.enableRetry&&this.model.get("serverFailure")&&this.ui.retryContainer.removeClass("binf-hidden")},"handleKeydownEvent":function(e){38!==e.keyCode&&40!==e.keyCode||this.trigger("keydown:item",e)},"hanldleClickGotoLocation":function(e){e.preventDefault(),e.stopPropagation(),this.trigger("click:gotolocation")},"handleProgressComplete":function(){this.showGotoLocationElem(),this.showRetryElem()}})}),csui.define("hbs!csui/controls/globalmessage/impl/progresspanel/impl/progresspanel",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-stateaction csui-progresscell">\r\n        <button type="button" aria-label="'+e.escapeExpression((o=null!=(o=r(i,"stateaction_all_pending")||(null!=t?r(t,"stateaction_all_pending"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"stateaction_all_pending","hash":{},"loc":{"start":{"line":44,"column":42},"end":{"line":44,"column":69}}}):o))+'"\r\n                class="csui-stateaction-pending\r\n        csui-icon-like-btn binf-btn binf-btn-default">'+e.escapeExpression((o=null!=(o=r(i,"stateaction_pending")||(null!=t?r(t,"stateaction_pending"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"stateaction_pending","hash":{},"loc":{"start":{"line":46,"column":54},"end":{"line":46,"column":77}}}):o))+'</button>\r\n        <button type="button" aria-label="'+e.escapeExpression((o=null!=(o=r(i,"stateaction_all_processing")||(null!=t?r(t,"stateaction_all_processing"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"stateaction_all_processing","hash":{},"loc":{"start":{"line":47,"column":42},"end":{"line":47,"column":72}}}):o))+'"\r\n                class="csui-stateaction-processing csui-icon-like-binf-btn binf-hidden binf-btn binf-btn-default">\r\n            '+e.escapeExpression((o=null!=(o=r(i,"stateaction_processing")||(null!=t?r(t,"stateaction_processing"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"stateaction_processing","hash":{},"loc":{"start":{"line":49,"column":12},"end":{"line":49,"column":38}}}):o))+"</button>\r\n      </div>\r\n"},"3":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="csui-show-retryAll binf-hidden">\r\n          <button type="button" class="csui-retry-all" title="'+e.escapeExpression((o=null!=(o=r(i,"retryAll")||(null!=t?r(t,"retryAll"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"retryAll","hash":{},"loc":{"start":{"line":54,"column":62},"end":{"line":54,"column":74}}}):o))+"\" tabindex='0'>"+e.escapeExpression((o=null!=(o=r(i,"retryAll")||(null!=t?r(t,"retryAll"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"retryAll","hash":{},"loc":{"start":{"line":54,"column":89},"end":{"line":54,"column":101}}}):o))+"</button>\r\n        </div>\r\n"},"5":function(e,t,i,n,s){return"binf-hidden"},"7":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-minimize csui-minimizecell">\r\n        <button type="button" class="icon-progresspanel-minimize binf-btn binf-btn-default"\r\n                aria-label="'+e.escapeExpression((o=null!=(o=r(i,"minimizeAria")||(null!=t?r(t,"minimizeAria"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"minimizeAria","hash":{},"loc":{"start":{"line":73,"column":28},"end":{"line":73,"column":44}}}):o))+'" title="'+e.escapeExpression((o=null!=(o=r(i,"minimize")||(null!=t?r(t,"minimize"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"minimize","hash":{},"loc":{"start":{"line":73,"column":53},"end":{"line":73,"column":65}}}):o))+'" tabindex="0"></button>\r\n      </div>\r\n'},"9":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <a class="csui-gotolocation-url binf-hidden" href="'+e.escapeExpression((o=null!=(o=r(i,"targetLocationUrl")||(null!=t?r(t,"targetLocationUrl"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"targetLocationUrl","hash":{},"loc":{"start":{"line":79,"column":53},"end":{"line":79,"column":74}}}):o))+'" role="button">'+e.escapeExpression((o=null!=(o=r(i,"gotoLocation")||(null!=t?r(t,"gotoLocation"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"gotoLocation","hash":{},"loc":{"start":{"line":79,"column":90},"end":{"line":79,"column":106}}}):o))+"</a>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-header">\r\n  <div class="csui-progressrow csui-height-target">\r\n    <div class="csui-names-progress">\r\n      <div class="csui-names csui-progresscell">\r\n        <div class="csui-header-icon csui-icon binf-hidden"></div>\r\n        <div class="csui-title" id="'+e.escapeExpression((r=null!=(r=a(i,"progressTitleId")||(null!=t?a(t,"progressTitleId"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"progressTitleId","hash":{},"loc":{"start":{"line":6,"column":36},"end":{"line":6,"column":55}}}):r))+'">\r\n          '+e.escapeExpression((r=null!=(r=a(i,"title")||(null!=t?a(t,"title"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":7,"column":10},"end":{"line":7,"column":19}}}):r))+'\r\n        </div>\r\n      </div>\r\n      <div class="csui-progress csui-progresscell">\r\n        <div class="csui-progress-dynamic binf-hidden">\r\n          <div class="csui-progress-textbar">\r\n            <div class="binf-progress">\r\n              <div class="binf-progress-bar" role="progressbar" aria-valuenow="'+e.escapeExpression((r=null!=(r=a(i,"percentage")||(null!=t?a(t,"percentage"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"percentage","hash":{},"loc":{"start":{"line":14,"column":79},"end":{"line":14,"column":93}}}):r))+'"\r\n                   aria-valuemin="0" aria-valuemax="100" style="width:'+e.escapeExpression((r=null!=(r=a(i,"percentage")||(null!=t?a(t,"percentage"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"percentage","hash":{},"loc":{"start":{"line":15,"column":70},"end":{"line":15,"column":84}}}):r))+'%">\r\n              </div>\r\n            </div>\r\n            <div class="loading-dots">\r\n                <div class="csui-loading-parent-wrapper binf-disabled csui-disabled">\r\n                    <span class="csui-loading-dots-wrapper">\r\n                        <span class="csui-loading-dot"></span>\r\n                        <span class="csui-loading-dot"></span>\r\n                        <span class="csui-loading-dot"></span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="csui-progress-static">\r\n          <div class="csui-progress-textbar">\r\n            <div class="csui-progress-static-pending" aria-hidden="true">'+e.escapeExpression((r=null!=(r=a(i,"state_pending")||(null!=t?a(t,"state_pending"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_pending","hash":{},"loc":{"start":{"line":31,"column":73},"end":{"line":31,"column":90}}}):r))+'</div>\r\n            <div class="csui-progress-static-processing binf-hidden" aria-hidden="true">'+e.escapeExpression((r=null!=(r=a(i,"state_processing")||(null!=t?a(t,"state_processing"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_processing","hash":{},"loc":{"start":{"line":32,"column":88},"end":{"line":32,"column":108}}}):r))+'</div>\r\n            <div class="csui-progress-static-resolved binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"state_resolved")||(null!=t?a(t,"state_resolved"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_resolved","hash":{},"loc":{"start":{"line":33,"column":67},"end":{"line":33,"column":85}}}):r))+'</div>\r\n            <div class="csui-progress-static-rejected binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"state_rejected")||(null!=t?a(t,"state_rejected"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_rejected","hash":{},"loc":{"start":{"line":34,"column":67},"end":{"line":34,"column":85}}}):r))+'</div>\r\n            <div class="csui-progress-static-aborted binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"state_aborted")||(null!=t?a(t,"state_aborted"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_aborted","hash":{},"loc":{"start":{"line":35,"column":66},"end":{"line":35,"column":83}}}):r))+'</div>\r\n          </div>\r\n          <div class="csui-percent"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="csui-states-actions">\r\n'+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableCancel"):t,{"name":"if","hash":{},"fn":e.program(1,s,0),"inverse":e.noop,"loc":{"start":{"line":42,"column":6},"end":{"line":51,"column":13}}}))?o:"")+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableRetry"):t,{"name":"if","hash":{},"fn":e.program(3,s,0),"inverse":e.noop,"loc":{"start":{"line":52,"column":6},"end":{"line":56,"column":13}}}))?o:"")+'      <div class="csui-expand csui-progresscell '+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"singleItem"):t,{"name":"if","hash":{},"fn":e.program(5,s,0),"inverse":e.noop,"loc":{"start":{"line":57,"column":48},"end":{"line":57,"column":84}}}))?o:"")+'">\r\n        <button type="button" class="csui-expand-down binf-btn binf-btn-default"\r\n                aria-label="'+e.escapeExpression((r=null!=(r=a(i,"expand")||(null!=t?a(t,"expand"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"expand","hash":{},"loc":{"start":{"line":59,"column":28},"end":{"line":59,"column":38}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=a(i,"expand")||(null!=t?a(t,"expand"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"expand","hash":{},"loc":{"start":{"line":59,"column":47},"end":{"line":59,"column":57}}}):r))+'" aria-haspopup="true" aria-expanded="false">\r\n          <span class="icon csui-icon icon-expandArrowDown"></span></button>\r\n          <button type="button" class="csui-expand-up binf-hidden binf-btn binf-btn-default"\r\n                aria-label="'+e.escapeExpression((r=null!=(r=a(i,"collapse")||(null!=t?a(t,"collapse"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"collapse","hash":{},"loc":{"start":{"line":62,"column":28},"end":{"line":62,"column":40}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=a(i,"collapse")||(null!=t?a(t,"collapse"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"collapse","hash":{},"loc":{"start":{"line":62,"column":49},"end":{"line":62,"column":61}}}):r))+'" aria-haspopup="true" aria-expanded="true">\r\n            <span class="icon csui-icon icon-expandArrowUp"></span></button>\r\n      </div>\r\n      <div class="csui-close csui-progresscell binf-hidden">\r\n        <button type="button" class="binf-btn binf-btn-default"\r\n                aria-label="'+e.escapeExpression((r=null!=(r=a(i,"closeAria")||(null!=t?a(t,"closeAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"closeAria","hash":{},"loc":{"start":{"line":67,"column":28},"end":{"line":67,"column":41}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=a(i,"close")||(null!=t?a(t,"close"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"close","hash":{},"loc":{"start":{"line":67,"column":50},"end":{"line":67,"column":59}}}):r))+'" >\r\n          <span class="csui-action-close csui-icon"></span></button>\r\n      </div>\r\n'+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableMinimiseButton"):t,{"name":"if","hash":{},"fn":e.program(7,s,0),"inverse":e.noop,"loc":{"start":{"line":70,"column":6},"end":{"line":75,"column":13}}}))?o:"")+"    </div>\r\n  </div>\r\n"+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"targetLocationUrl"):t,{"name":"if","hash":{},"fn":e.program(9,s,0),"inverse":e.noop,"loc":{"start":{"line":78,"column":2},"end":{"line":80,"column":9}}}))?o:"")+'</div>\r\n<div class="csui-items-wrapper">\r\n  <div class="csui-items" role="list" aria-label="'+e.escapeExpression((r=null!=(r=a(i,"detailsListAria")||(null!=t?a(t,"detailsListAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"detailsListAria","hash":{},"loc":{"start":{"line":83,"column":50},"end":{"line":83,"column":69}}}):r))+'">\r\n  </div>\r\n</div>'}});return i.registerPartial("csui_controls_globalmessage_impl_progresspanel_impl_progresspanel",n),n}),csui.define("csui/controls/globalmessage/impl/progresspanel/progresspanel.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","i18n","module","csui/utils/base","csui/utils/accessibility","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/globalmessage/impl/progresspanel/progressbar.view","i18n!csui/controls/globalmessage/impl/progresspanel/impl/nls/progresspanel.lang","hbs!csui/controls/globalmessage/impl/progresspanel/impl/progresspanel","css!csui/controls/globalmessage/impl/progresspanel/impl/progresspanel","css!csui/controls/globalmessage/globalmessage_icons"],function(e,t,i,n,s,o,r,a,l,c,u,d){"use strict";var p=e.defaults(s.config().csui,{"panelRefreshThrottle":400}),h=["pending","processing","rejected","resolved","aborted","stopped","stopping","finalizing"],f=function(e){var t=e.uploadContainer||e.container;return t&&t.get("name")},m=function(e){return f(e[0])!==f(e.reduce(function(e,t){return f(e)===f(t)?e:!t}))};return i.CompositeView.extend({"constructor":function(t){t||(t={}),this.focusChildIndex=-1,this.currentFocusIndex=0,this.loadingCount=0,e.defaults(t,{"oneFileSuccess":u.UploadOneItemSuccessMessage,"multiFileSuccess":u.UploadManyItemsSuccessMessage,"oneFilePending":u.UploadingSingleItem,"oneFileFinalizing":u.FinalizingSingleItem,"multiFilePending":u.UploadingItems,"multiFileOneFailure":u.MultiUploadOneItemFailMessage,"oneFileFailure":u.UploadOneItemFailMessage,"multiFileFailure":u.UploadManyItemsFailMessage,"someFileSuccess":u.UploadSomeItemsSuccessMessage,"someFilePending":u.UploadingSomeItems,"someFileFailure":u.UploadSomeItemsFailMessage2,"oneItemStopped":u.UploadingOneItemStopped,"allItemsStopped":u.UploadingAllItemsStopped,"someItemsStopped":u.UploadSomeItemsStopped,"locationLabelPending":u.UploadingLocation,"locationLabelCompleted":u.UploadedLocation,"gotoLocationLinkLabel":u.GotoLocationLinkLabel,"enableCancel":!0,"isLoadTimeAvailable":!1,"stoppingLabel":u.State_stopping}),t.enableCancel?this.panelStateValues=["resolved","rejected","aborted","processing"]:this.panelStateValues=["resolved","rejected","aborted"],i.CompositeView.prototype.constructor.call(this,t),t.context&&t.nextNodeModelFactory&&(this._nextNode=t.context.getModel(t.nextNodeModelFactory)),this.listenTo(this.collection,"change",this._updateHeader),this.listenTo(this.collection,"sort",this.setLocationName),this.originatingView=t.originatingView,this.originatingView&&this.originatingView.trigger("global.alert.inprogress"),this.isMultiContainer=m(this.collection.models),this.setLocationName()},"updateProgressArea":function(t,i){var n=t.find(".csui-progress-static-rejected");if(void 0===i.dynamic?"processing"===i.state:i.dynamic){var s=t.find(".binf-progress-bar");this.options.messageHelper.switchField(t,".csui-progress","dynamic",["static","dynamic"]);var r=e.str.sformat(u.BytesOfSize,o.getReadableFileSizeString(i.count),o.getReadableFileSizeString(i.total));t.find(".csui-progress-text").text(r),s.attr("aria-valuenow",i.percentage),s.css("width",e.str.sformat("{0}%",i.percentage)),t.find(".csui-progress-dynamic .csui-percent").text(e.str.sformat("{0}%",i.percentage))}else this.options.messageHelper.switchField(t,".csui-progress","static",["static","dynamic"]),this.options.messageHelper.switchField(t,".csui-progress-static",i.state,h);n.text(i.errorMessage),n.attr("title",i.errorMessage),i.errorMessage&&t.addClass("csui-error"),this.options.messageHelper.switchField(t,".csui-stateaction",i.state,h),this.itemsProcessing&&this.itemsProcessing>0?(this.$el.find(".csui-header .csui-stateaction-processing").removeClass("binf-hidden"),this.$el.find(".csui-header .csui-stateaction-pending").addClass("binf-hidden")):this.$el.find(".csui-header .csui-stateaction-processing").addClass("binf-hidden")},"onDestroy":function(){this.handleProgressComplete(),this.focusChildIndex=-1,this.focusingOnList=!1,this.currentFocusIndex=0,this.trigger("tabable:not")},"handleProgressComplete":function(i){this.originatingView&&this.originatingView.trigger("global.alert.completed"),this.parentView&&this.parentView.trigger("processing:completed"),i||(this.ui.gotoLocationElem&&this.ui.gotoLocationElem.removeClass("binf-hidden"),this.children.invoke("showGotoLocationElem")),this.children.invoke("handleProgressComplete"),setTimeout(e.bind(function(){t(this.$el).trigger("focus")},this),10)},"autoHideSuccessBanner":function(){var t=this,i=e.find(this.collection.models,function(t){return!e.isUndefined(t.get("targetLocation"))});this.options.enablePermanentHeaderMessages||r.isAccessibleMode()||!this.options.hideGotoLocationSingleSet&&!this.options.hideGotoLocationMultiSet&&i||setTimeout(function(){o.isIE11()&&(t.closePanel=!0),t.doClose()},5e3)},"behaviors":{"PerfectScrolling":{"behaviorClass":a,"contentParent":"> .csui-items-wrapper","suppressScrollX":!0},"TabableRegion":{"behaviorClass":l}},"isProgressFailed":function(){return-1!==t.inArray(this.state,["rejected"])},"isProgressCompleted":function(){var e=-1!==t.inArray(this.state,["resolved","rejected","aborted","stopped","stopping"]);return e&&this.originatingView&&this.originatingView.container&&136===this.originatingView.container.get("type")&&this.originatingView.container.unset("fileOrder"),e},"isProgressFinalizing":function(){return-1!==t.inArray(this.state,["stopping"])},"getLocalizedLocation":function(t){var i=this.isProgressCompleted()?this.options.locationLabelCompleted:this.options.locationLabelPending;return e.str.sformat(i,f(t))},"setLocationName":function(){var e,t,i,n=this;this.collection.forEach(function(s){s.get("bundleNumber")===e?(s.unset("location"),s.unset("bundleDivider")):(s.set({
"bundleDivider":!0},{"silent":!0}),e=s.get("bundleNumber"),i=f(s),i===t?s.unset("location"):(n.isMultiContainer&&s.set({"location":n.getLocalizedLocation(s)},{"silent":!0}),t=i))}),this.collection.reset(this.collection.models)},"updateProgressPanel":function(e){var t,i;this.isProgressFailed()?(this.parentView&&this.parentView.trigger("processing:error"),t="csui-global-error",i=e===this.collection.length):(t="csui-global-success",this.autoHideSuccessBanner()),this.ui.processingAction.addClass("binf-hidden"),this.ui.closeAction.parent(".csui-close").removeClass("binf-hidden"),this.ui.header.find(".csui-minimize").addClass("binf-hidden"),this.ui.header.find(".csui-progress").addClass("binf-hidden"),this._isRendered&&this.collection.sort(),this.handleProgressComplete(i),this.showretryAll(),this.currentlyFocusedElement().trigger("focus"),this.options.actionType&&"ADD_VERSION"===this.options.actionType||this.$el.addClass(t)},"showretryAll":function(){p.enableRetry&&this.showretryAllElem&&this.ui.retryAll.removeClass("binf-hidden")},"showProgressBar":function(e){e?(this.ui.progressBar&&this.ui.progressBar.removeClass("binf-hidden"),this.ui.loadingDots&&this.ui.loadingDots.addClass("binf-hidden")):(this.ui.progressBar.addClass("binf-hidden"),this.ui.loadingDots.removeClass("binf-hidden"))},"_updateHeader":function(){var e=this.computeProgress(),t=this.options;switch(this.state=e.state,this.showProgressBar(e.isLoadTimeAvailable),e.state){case"pending":case"processing":e.label=this._getFormatString(t.oneFilePending,t.multiFilePending,this.collection.length);break;case"resolved":if(t.actionType&&"ADD_VERSION"===t.actionType)break;e.label=this._getFormatString(t.oneFileSuccess,t.multiFileSuccess,this.collection.length);break;case"stopping":e.label=t.stoppingLabel;break;case"stopped":e.label=this._getFormatString(t.oneItemStopped,t.someItemsStopped,this.collection.length);break;case"aborted":e.label=this._getFormatString(t.oneItemStopped,t.allItemsStopped,this.collection.length);break;case"finalizing":e.label=this._getFormatString(t.oneFileFinalizing,t.multiFilePending,this.collection.length);break;default:var i=this.collection.length>1&&1===e.failed;e.label=i?t.multiFileOneFailure:this._getFormatString(t.oneFileFailure,t.multiFileFailure,e.failed)}if(this.ui.header.find(".csui-title").text(e.label),!this.isProgressFinalizing()&&this.isProgressCompleted()&&this.updateProgressPanel(e.failed),this.updateProgressArea(this.ui.header,e),this.ui.headerWrapper=this.$el,this.options&&"UPLOAD"===this.options.actionType?this.ui.headerWrapper.addClass("progressBar-active"):this.ui.headerWrapper.removeClass("progressBar-active"),1===this.collection.length&&"rejected"===e.state?this.ui.expandIcon.removeClass("binf-hidden"):this.$el.find(".csui-items-wrapper .csui-names-progress").removeClass("binf-hidden"),this.options.allowMultipleInstances?(this.parentView&&this.parentView.trigger("processbar:update",e.percentage),"processing"===e.state&&this.ui.minimizeButton.parent(".csui-minimize").removeClass("binf-hidden")):this.ui.minimizeButton.parent(".csui-minimize").addClass("binf-hidden"),!this.stateExpandCollapse){var n=this.ui.header.find(".csui-expand").find(":not(.binf-hidden)");n.hasClass("csui-expand-up")?this.doExpand(!1):n.hasClass("csui-expand-down")&&this.doCollapse(!1)}var s=!this.collection||0===this.collection.length;this.$el.hasClass("csui-empty")?s||this.$el.removeClass("csui-empty"):s&&this.$el.addClass("csui-empty")},"_getFormatString":function(t,i,n){var s,o;return 1===n?(o=this.collection.models[0].get("newName")||this.collection.models[0].get("name"),s=e.str.sformat(t,o)):s=e.str.sformat(i,n),s},"computeProgress":function(){var e=!0,t=!1,i=!0,n=!1,s=!1,o=0,r=0,a=0,l=0;this.itemsPending=0,this.itemsProcessing=0;var c=this;this.collection.forEach(function(s){a+=s.get("count"),l+=s.get("total"),c._isRendered&&s.get("errorMessage")&&"pending"===s.get("state")&&s.set("state","rejected",{"silent":!0}),"stopped"===s.get("state")&&(n=!0),"aborted"===s.get("state")&&++r,"processing"===s.get("state")&&(c.loadingCount+=s.get("count"),c.itemsProcessing++),"pending"!==s.get("state")&&"processing"!==s.get("state")&&"finalizing"!==s.get("state")&&"stopping"!==s.get("state")||(e=!1),"pending"!==s.get("state")&&(t=!0),"pending"===s.get("state")&&(0===c.itemsProcessing&&(c.itemsProcessing=1),c.itemsPending++),"rejected"===s.get("state")&&(++o,s.set({"sequence":2},{"silent":!0}),c.showretryAllElem=!!s.get("serverFailure")),"resolved"!==s.get("state")&&"rejected"!==s.get("state")||(i=!1)});var u=l>0?Math.floor(a/l*100):0;100!==u||e||(u=99,s=!0),(e||s)&&(this.itemsProcessing=0);var d=e?o?"rejected":n||r?i?"aborted":"stopped":"resolved":n?"stopping":s?"finalizing":t?"processing":"pending";return{"count":a,"total":l,"failed":o,"percentage":u,"state":d,"dynamic":"pending"!==d,"isLoadTimeAvailable":this.loadingCount>0}},"className":"csui-progresspanel","childView":c,"childViewContainer":".csui-items","childEvents":{"click:gotolocation":"navigateToLocation","keydown:item":"onChildViewKeydown"},"childViewOptions":function(){return e.extend(this.options,{"enableCancel":this.options.enableCancel,"messageHelper":this.options.messageHelper,"reorderOnSort":!0,"parentView":this})},"template":d,"templateHelpers":function(){var t,i,n=this.computeProgress(),s=1===this.collection.length;return this.options.hideGotoLocationSingleSet||this.isMultiContainer||(t=this.collection.models[0].get("targetLocation"),i=t&&t.url),h.forEach(function(e){n["state_"+e]=u["State_"+e]}),this.panelStateValues.forEach(function(e){n["stateaction_"+e]=u["StateAction_"+e],n["stateaction_all_"+e]=u["StateAction_all_"+e]}),n.cancel=u.Cancel,n.enableCancel=this.options.enableCancel,n.expand=u.Expand,n.collapse=u.Collapse,n.close=u.Close,n.closeAria=u.CloseAria,n.detailsListAria=u.DetailsListAria,n.processing="processing"===n.state,n.progressTitleId=e.uniqueId("progressTitle"),this.progressTitleId=n.progressTitleId,n.singleItem=s,n.enableMinimiseButton=this.options.enableMinimiseButton,n.minimize=u.minimize,n.minimizeAria=u.minimizeAria,n.gotoLocation=this.options.gotoLocationLinkLabel,n.retryAll=u.RetryAll,n.enableRetry=p.enableRetry,e.extend(n,{"targetLocationUrl":i})},"onRender":function(){this.$el.attr("tabindex","0"),this.$el.attr("role","dialog"),this.$el.attr("aria-labelledby",this.progressTitleId),this.currentlyFocusedElement(),this._updateHeader(),this.collection.comparator=function(e,t){if(e.get("bundleNumber")===t.get("bundleNumber"))return t.get("sequence")-e.get("sequence")}},"ui":{"header":".csui-header","progressBar":".csui-header .binf-progress","loadingDots":".csui-header .loading-dots","pendingAction":".csui-header .csui-stateaction-pending","processingAction":".csui-header .csui-stateaction-processing","closeAction":".csui-header .csui-close button","collapseAction":".csui-header .csui-expand-up","expandAction":".csui-header .csui-expand-down","minimizeButton":".csui-header .csui-minimize .icon-progresspanel-minimize","expandIcon":".csui-header .csui-expand","gotoLocationElem":".csui-gotolocation-url","retryAll":".csui-show-retryAll","childContainer":".csui-items"},"events":{"click @ui.pendingAction":"doCancel","click @ui.processingAction":"doCancel","click @ui.closeAction":"doClose","keydown @ui.closeAction":"handleKeydownOnClose","click @ui.collapseAction":"doCollapse","click @ui.expandAction":"doExpand","keydown @ui.expandAction":"handleKeydownOnExpand","click @ui.minimizeButton":"_doProcessbarMinimize","keydown @ui.minimizeButton":"onKeyInViewMinimize","click @ui.gotoLocationElem":"handleGotoLocationClick","keydown @ui.gotoLocationElem":"handleGotoLocationClick","click @ui.retryAll":"processRetryAll","keydown @ui.retryAll":"processRetryAll","keydown":"onKeyInParentView"},"doCancel":function(){this.collection.abort("stopped"),this.ui.processingAction.addClass("binf-hidden")},"positionChange":function(e){if(void 0!==e){var t=this.$el.parent().width(),i=(t-e)/2;i>0||(i=0),i=n.settings.rtl?-i:i,i="translateX("+i+"px)",this.$el.css({"transform":i})}},"doCollapse":function(t){this.$el.removeClass("csui-expanded"),t=!1!==t;var i=this.$el.find(".csui-items");i.find(".focused-row").removeClass("focused-row"),this.options.messageHelper.switchField(this.$el.find(".csui-header"),".csui-expand","down",["up","down"]),this.options.messageHelper.collapsePanel(this,i,i,t),this.stateExpandCollapse="collapsed",this.$el.find(".csui-expand-down").trigger("focus"),this.focusChildIndex=-1,this.focusingOnList=!1,setTimeout(e.bind(function(){this.positionChange(this.collapsedWidth),this.$el.removeClass("csui-expanded-panel")},this),280)},"doExpand":function(e){var t=this.$el.find(".csui-items"),i=e,n=this;e=!1!==e,this.$el.width()&&(this.collapsedWidth=this.$el.width()),this.options.messageHelper.switchField(this.$el.find(".csui-header"),".csui-expand","up",["up","down"]),this.options.messageHelper.expandPanel(this,t,t,e),this.$el.width()&&(this.expandedWidth=this.$el.width()),this.positionChange(this.expandedWidth),this.stateExpandCollapse="expanded",this.$el.one(this.options.messageHelper.transitionEnd(),function(){n.trigger("ensure:scrollbar"),n.$el.addClass("csui-expanded"),n.$el.addClass("csui-expanded-panel")}),"keydown"!==i.type||32!==i.keyCode&&13!==i.keyCode?this.ui.collapseAction.trigger("focus"):(t.find(".focused-row").removeClass("focused-row"),setTimeout(function(){n.children.findByIndex(0).setFocus()}),this.focusChildIndex=0,this.focusingOnList=!0)},"handleKeydownOnExpand":function(e){"keydown"!==e.type||13!==e.keyCode&&32!==e.keyCode||this.doExpand(e)},"handleKeydownOnCollapse":function(e){"keydown"!==e.type||13!==e.keyCode&&32!==e.keyCode||this.doCollapse(e)},"onKeyInViewMinimize":function(e){13!==e.keyCode&&32!==e.keyCode||this._doProcessbarMinimize()},"onKeyInParentView":function(e){var i=!1;switch(e.keyCode){case 9:var n=this._getAllFocusableElements();if((this.currentlyFocusedElem.length>0?this.currentlyFocusedElem:document.activeElement)===n[0][0]&&(this.currentFocusIndex=0),this.ui.childContainer.has(e.target).length)e.shiftKey&&(this.currentFocusIndex=n.length-1,this.focusingOnList=!1,i=!0);else{var s=this.currentFocusIndex;e.shiftKey?s--:s++,s>=0&&s<n.length?(this.currentFocusIndex=s,i=!0):s===n.length&&this.focusChildIndex>=0&&(i=!0,this.focusingOnList=!0)}}if(i)return this.trigger("changed:focus",this),this.currentlyFocusedElement(),t(this.currentlyFocusedElem)[0].focus(),this.$el.find(".focused-row")&&this.$el.find(".focused-row").removeClass("focused-row"),!1},"onChildViewKeydown":function(e,t){var i=this.focusChildIndex;switch(t.keyCode){case 40:i<this.children.length-1&&++i;break;case 38:i>0&&--i}if(!(i<0||i>=this.children.length))return this.focusChildIndex>=0&&this.children.findByIndex(this.focusChildIndex).removeFocus(),this.focusChildIndex=i,this.children.findByIndex(this.focusChildIndex).setFocus(),this.trigger("changed:focus",this),!1},"_doProcessbarMinimize":function(){this.$el.addClass("binf-hidden"),this.parentView.trigger("processbar:minimize")},"doShow":function(e,t){this.options.messageHelper.showPanel(this,e,t),this.parentView=t,this.parentView.trigger("processbar:finished"),this.listenTo(this.parentView,"processbar:maximize",function(){this.isDestroyed||(this.$el.removeClass("binf-hidden"),this.ui.minimizeButton.trigger("focus"),this.doResize())}),this.doResize(),this.$el.trigger("globalmessage.shown",this),this.trigger("dom:refresh"),this.$el[0].focus()},"currentlyFocusedElement":function(){if(this.isDestroyed)return t();if(this.focusingOnList&&this.focusChildIndex>=0)this.currentlyFocusedElem=this.children.findByIndex(this.focusChildIndex).setFocus();else{var e=this._getAllFocusableElements();this.currentlyFocusedElem=t(e[this.currentFocusIndex])}return this.currentlyFocusedElem},"_getAllFocusableElements":function(){var e=this.ui.header.find("*[tabindex]:visible").toArray();return e.unshift(this.$el),e},"doClose":function(){var t=this,i=e.extend({"csuiAfterHide":function(){t.destroy(),t.isProgressFailed()&&t.trigger("escaped:focus"),this.parentView.trigger("processbar:finished")}},this);this.options.messageHelper.fadeoutPanel(i),this.closePanel&&(this.closePanel=!1,i.csuiAfterHide())},"handleKeydownOnClose":function(){"keydown"!==event.type||13!==event.keyCode&&32!==event.keyCode||this.doClose(event)},"doResize":function(){if(this.el&&!this.el.classList.contains("binf-hidden")&&this.options.sizeToParentContainer){var e=parseInt(this.$el.css("min-width"),10),t=(this.$el.width(),this.$el.parent().width());this.uncompressedMinWidth||(this.uncompressedMinWidth=e),this.uncompressedMinWidth>t?this.$el.addClass("compressed"):this.$el.removeClass("compressed");var i=this.$el.width(),s=(t-i)/2;s>0||(s=0),s=n.settings.rtl?-s:s,s="translateX("+s+"px)",this.$el.css({"transform":s})}},"handleGotoLocationClick":function(e){("keydown"!==e.type||32!==e.keyCode&&13!==e.keyCode)&&"click"!==e.type||(e.preventDefault(),e.stopPropagation(),this.navigateToLocation())},"navigateToLocation":function(e){var t=e?e.model:this.collection.models[0],i=t.get("targetLocation");i&&this._nextNode&&this._nextNode.set("id",i.id),this.doCollapse()},"processRetryAll":function(e){("keydown"!==e.type||32!==e.keyCode&&13!==e.keyCode)&&"click"!==e.type||this.trigger("retry:all")}})}),csui.define("hbs!csui/controls/globalmessage/impl/progressbar.ext",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,s){var o,r,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-progressbar csui-progressrow">\r\n  <div class="csui-name-status" role="listitem" tabindex="-1">\r\n    <div class="csui-names-progress '+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"singleItem"):t,{"name":"if","hash":{},"fn":e.program(2,s,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":36},"end":{"line":4,"column":72}}}))?o:"")+'">\r\n      <div class="csui-names csui-progresscell">\r\n        <div class="csui-name csui-progresscell" title="'+e.escapeExpression((r=null!=(r=a(i,"name")||(null!=t?a(t,"name"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":6,"column":56},"end":{"line":6,"column":64}}}):r))+'">\r\n          '+e.escapeExpression((r=null!=(r=a(i,"name")||(null!=t?a(t,"name"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":7,"column":10},"end":{"line":7,"column":18}}}):r))+'\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="csui-states-actions">\r\n      <div class="csui-stateaction csui-progresscell '+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"singleItem"):t,{"name":"if","hash":{},"fn":e.program(2,s,0),"inverse":e.noop,"loc":{"start":{"line":12,"column":53},"end":{"line":12,"column":89}}}))?o:"")+'">\r\n'+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableCancel"):t,{"name":"if","hash":{},"fn":e.program(4,s,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":8},"end":{"line":18,"column":15}}}))?o:"")+'        <div\r\n          class="csui-stateaction-resolved binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-success" aria-label="'+e.escapeExpression((r=null!=(r=a(i,"successIconAria")||(null!=t?a(t,"successIconAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"successIconAria","hash":{},"loc":{"start":{"line":20,"column":133},"end":{"line":20,"column":152}}}):r))+'"></div>\r\n        <div\r\n          class="csui-stateaction-rejected binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-error" aria-label="'+e.escapeExpression((r=null!=(r=a(i,"errorIconAria")||(null!=t?a(t,"errorIconAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"errorIconAria","hash":{},"loc":{"start":{"line":22,"column":131},"end":{"line":22,"column":148}}}):r))+'"></div>\r\n        <div class="csui-stateaction-aborted binf-hidden"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"2":function(e,t,i,n,s){return"binf-hidden"},"4":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <button type="button" class="csui-stateaction-pending binf-btn binf-btn-default icon csui-icon\r\n                                      circle_delete" title="'+e.escapeExpression((o=null!=(o=r(i,"cancel")||(null!=t?r(t,"cancel"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":15,"column":60},"end":{"line":15,"column":70}}}):o))+'"></button>\r\n        <button type="button" class="csui-stateaction-processing binf-hidden binf-btn binf-btn-default icon\r\n                                      csui-icon circle_delete" aria-label="'+e.escapeExpression((o=null!=(o=r(i,"cancelAria")||(null!=t?r(t,"cancelAria"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancelAria","hash":{},"loc":{"start":{"line":17,"column":75},"end":{"line":17,"column":89}}}):o))+'" title="'+e.escapeExpression((o=null!=(o=r(i,"cancel")||(null!=t?r(t,"cancel"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":17,"column":98},"end":{"line":17,"column":108}}}):o))+'"></button>\r\n'},"6":function(e,t,i,n,s){var o,r,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"bundleDivider"):t,{"name":"if","hash":{},"fn":e.program(7,s,0),"inverse":e.noop,"loc":{"start":{"line":29,"column":0},"end":{"line":38,"column":7}}}))?o:"")+'<div class="csui-name-status" role="listitem" tabindex="-1">\r\n  <div class="csui-names-progress '+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"singleItem"):t,{"name":"if","hash":{},"fn":e.program(2,s,0),"inverse":e.noop,"loc":{"start":{"line":40,"column":34},"end":{"line":40,"column":70}}}))?o:"")+'">\r\n    <div class="csui-names csui-progresscell">\r\n      <div class="csui-type '+e.escapeExpression((r=null!=(r=a(i,"type_icon_class")||(null!=t?a(t,"type_icon_class"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"type_icon_class","hash":{},"loc":{"start":{"line":42,"column":28},"end":{"line":42,"column":47}}}):r))+'">\r\n      </div>\r\n      <div class="csui-name" title="'+e.escapeExpression((r=null!=(r=a(i,"name")||(null!=t?a(t,"name"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":44,"column":36},"end":{"line":44,"column":44}}}):r))+'">\r\n        '+e.escapeExpression((r=null!=(r=a(i,"name")||(null!=t?a(t,"name"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":45,"column":8},"end":{"line":45,"column":16}}}):r))+'\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="csui-states-actions">\r\n    <div class="csui-stateaction csui-progresscell '+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"singleItem"):t,{"name":"if","hash":{},"fn":e.program(2,s,0),"inverse":e.noop,"loc":{"start":{"line":50,"column":51},"end":{"line":50,"column":87}}}))?o:"")+'">\r\n      <div\r\n        class="csui-stateaction-resolved binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-success" aria-label="'+e.escapeExpression((r=null!=(r=a(i,"successIconAria")||(null!=t?a(t,"successIconAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"successIconAria","hash":{},"loc":{"start":{"line":52,"column":131},"end":{"line":52,"column":150}}}):r))+'"></div>\r\n      <div\r\n        class="csui-stateaction-rejected binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-error" aria-label="'+e.escapeExpression((r=null!=(r=a(i,"errorIconAria")||(null!=t?a(t,"errorIconAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"errorIconAria","hash":{},"loc":{"start":{"line":54,"column":129},"end":{"line":54,"column":146}}}):r))+'"></div>\r\n      <div class="csui-stateaction-aborted binf-hidden" ></div>\r\n    </div>\r\n    <div class="csui-progress csui-progresscell">\r\n      <div class="csui-progress-dynamic binf-hidden" aria-hidden="true">\r\n        <div class="csui-progress-textbar">\r\n          <div class="binf-progress">\r\n            <div class="binf-progress-bar" role="progressbar" aria-valuenow="'+e.escapeExpression((r=null!=(r=a(i,"percentage")||(null!=t?a(t,"percentage"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"percentage","hash":{},"loc":{"start":{"line":61,"column":77},"end":{"line":61,"column":91}}}):r))+'" aria-valuemin="0"\r\n              aria-valuemax="100" style="width:'+e.escapeExpression((r=null!=(r=a(i,"percentage")||(null!=t?a(t,"percentage"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"percentage","hash":{},"loc":{"start":{"line":62,"column":47},"end":{"line":62,"column":61}}}):r))+'%">\r\n            </div>\r\n          </div>\r\n          <div class="loading-dots">\r\n            <div class="csui-loading-parent-wrapper binf-disabled csui-disabled">\r\n              <span class="csui-loading-dots-wrapper">\r\n                <span class="csui-loading-dot">\r\n                </span>\r\n                <span class="csui-loading-dot">\r\n                </span>\r\n                <span class="csui-loading-dot">\r\n                </span>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="csui-progress-static">\r\n        <div class="csui-progress-textbar">\r\n          <div class="csui-progress-static-pending" aria-hidden="true">'+e.escapeExpression((r=null!=(r=a(i,"state_pending")||(null!=t?a(t,"state_pending"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_pending","hash":{},"loc":{"start":{"line":81,"column":71},"end":{"line":81,"column":88}}}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-processing binf-hidden" aria-hidden="true">'+e.escapeExpression((r=null!=(r=a(i,"state_processing")||(null!=t?a(t,"state_processing"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_processing","hash":{},"loc":{"start":{"line":83,"column":86},"end":{"line":83,"column":106}}}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-resolved binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"state_resolved")||(null!=t?a(t,"state_resolved"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_resolved","hash":{},"loc":{"start":{"line":85,"column":65},"end":{"line":85,"column":83}}}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-rejected binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"errorMessage")||(null!=t?a(t,"errorMessage"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"errorMessage","hash":{},"loc":{"start":{"line":87,"column":65},"end":{"line":87,"column":81}}}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-aborted binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"state_aborted")||(null!=t?a(t,"state_aborted"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_aborted","hash":{},"loc":{"start":{"line":89,"column":64},"end":{"line":89,"column":81}}}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-stopped binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"state_stopped")||(null!=t?a(t,"state_stopped"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_stopped","hash":{},"loc":{"start":{"line":91,"column":64},"end":{"line":91,"column":81}}}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-stopping binf-hidden" aria-hidden="true">'+e.escapeExpression((r=null!=(r=a(i,"state_stopping")||(null!=t?a(t,"state_stopping"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_stopping","hash":{},"loc":{"start":{"line":93,"column":84},"end":{"line":93,"column":102}}}):r))+'\r\n          </div>\r\n          <div class="csui-progress-static-finalizing binf-hidden">\r\n            '+e.escapeExpression((r=null!=(r=a(i,"state_finalizing")||(null!=t?a(t,"state_finalizing"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_finalizing","hash":{},"loc":{"start":{"line":96,"column":12},"end":{"line":96,"column":32}}}):r))+'\r\n          </div>\r\n        </div>\r\n        <div class="csui-percent">\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="Error-message binf-hidden">\r\n      <div class="csui-error" title="'+e.escapeExpression((r=null!=(r=a(i,"error")||(null!=t?a(t,"error"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"error","hash":{},"loc":{"start":{"line":104,"column":37},"end":{"line":104,"column":46}}}):r))+'">\r\n        '+e.escapeExpression((r=null!=(r=a(i,"error")||(null!=t?a(t,"error"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"error","hash":{},"loc":{"start":{"line":105,"column":8},"end":{"line":105,"column":17}}}):r))+'\r\n      </div>\r\n    </div>\r\n    <div class="csui-stateaction csui-progress-cancel">\r\n'+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableCancel"):t,{"name":"if","hash":{},"fn":e.program(13,s,0),"inverse":e.noop,"loc":{"start":{"line":109,"column":6},"end":{"line":116,"column":13}}}))?o:"")+"    </div>\r\n"+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableRetry"):t,{"name":"if","hash":{},"fn":e.program(15,s,0),"inverse":e.noop,"loc":{"start":{"line":118,"column":4},"end":{"line":123,"column":11}}}))?o:"")+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"isEnhancedPanel"):t,{"name":"if","hash":{},"fn":e.program(17,s,0),"inverse":e.noop,"loc":{"start":{"line":124,"column":4},"end":{"line":128,"column":11}}}))?o:"")+"\r\n  </div>\r\n</div>\r\n"},"7":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-progresspanel-divider">\r\n  '+(null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"location"):t,{"name":"if","hash":{},"fn":e.program(8,s,0),"inverse":e.noop,"loc":{"start":{"line":31,"column":2},"end":{"line":32,"column":51}}}))?o:"")+"\r\n"+(null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"notEnhancedPanel"):t,{"name":"if","hash":{},"fn":e.program(10,s,0),"inverse":e.noop,"loc":{"start":{"line":33,"column":2},"end":{"line":36,"column":9}}}))?o:"")+"</div>\r\n"},"8":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' <span class="csui-progresspanel-location binf-pull-left"\r\n    title="'+e.escapeExpression((o=null!=(o=r(i,"location")||(null!=t?r(t,"location"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"location","hash":{},"loc":{"start":{"line":32,"column":11},"end":{"line":32,"column":23}}}):o))+'">'+e.escapeExpression((o=null!=(o=r(i,"location")||(null!=t?r(t,"location"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"location","hash":{},"loc":{"start":{"line":32,"column":25},"end":{"line":32,"column":37}}}):o))+"</span>"},"10":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+(null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"targetLocationUrl"):t,{"name":"if","hash":{},"fn":e.program(11,s,0),"inverse":e.noop,"loc":{"start":{"line":34,"column":2},"end":{"line":35,"column":45}}}))?o:"")+"\r\n"},"11":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="csui-gotolocation-url binf-hidden binf-pull-right" href="'+e.escapeExpression((o=null!=(o=r(i,"targetLocationUrl")||(null!=t?r(t,"targetLocationUrl"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"targetLocationUrl","hash":{},"loc":{"start":{"line":34,"column":94},"end":{"line":34,"column":115}}}):o))+'"\r\n    role="button">'+e.escapeExpression((o=null!=(o=r(i,"gotoLocation")||(null!=t?r(t,"gotoLocation"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"gotoLocation","hash":{},"loc":{"start":{"line":35,"column":18},"end":{"line":35,"column":34}}}):o))+"</a>"},"13":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button type="button" class="csui-stateaction-pending binf-btn binf-btn-default icon csui-icon\r\n                                   circle_delete" aria-label="'+e.escapeExpression((o=null!=(o=r(i,"cancelAria")||(null!=t?r(t,"cancelAria"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancelAria","hash":{},"loc":{"start":{"line":111,"column":62},"end":{"line":111,"column":76}}}):o))+'" title="'+e.escapeExpression((o=null!=(o=r(i,"cancel")||(null!=t?r(t,"cancel"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":111,"column":85},"end":{"line":111,"column":95}}}):o))+'" tabindex="-1"></button>\r\n      <button type="button" class="csui-stateaction-processing binf-hidden binf-btn binf-btn-default icon\r\n                                   csui-icon circle_delete" aria-label="'+e.escapeExpression((o=null!=(o=r(i,"cancelAria")||(null!=t?r(t,"cancelAria"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancelAria","hash":{},"loc":{"start":{"line":113,"column":72},"end":{"line":113,"column":86}}}):o))+'" title="'+e.escapeExpression((o=null!=(o=r(i,"cancel")||(null!=t?r(t,"cancel"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":113,"column":95},"end":{"line":113,"column":105}}}):o))+'"\r\n        tabindex="-1"></button>\r\n      <div class="csui-stateaction-stopped binf-hidden"></div>\r\n'},"15":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-show-retry binf-hidden">\r\n      <button type="button" class="csui-showRetry" title="'+e.escapeExpression((o=null!=(o=r(i,"retry")||(null!=t?r(t,"retry"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"retry","hash":{},"loc":{"start":{"line":120,"column":58},"end":{"line":120,"column":67}}}):o))+"\"\r\n        tabindex='-1'>"+e.escapeExpression((o=null!=(o=r(i,"retry")||(null!=t?r(t,"retry"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"retry","hash":{},"loc":{"start":{"line":121,"column":22},"end":{"line":121,"column":31}}}):o))+"</button>\r\n    </div>\r\n"},"17":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"targetLocationUrl"):t,{"name":"if","hash":{},"fn":e.program(18,s,0),"inverse":e.noop,"loc":{"start":{"line":125,"column":4
},"end":{"line":127,"column":11}}}))?o:""},"18":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <a class="csui-gotolocation-url binf-hidden" href="'+e.escapeExpression((o=null!=(o=r(i,"targetLocationUrl")||(null!=t?r(t,"targetLocationUrl"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"targetLocationUrl","hash":{},"loc":{"start":{"line":126,"column":55},"end":{"line":126,"column":76}}}):o))+'" role="button">'+e.escapeExpression((o=null!=(o=r(i,"gotoLocation")||(null!=t?r(t,"gotoLocation"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"gotoLocation","hash":{},"loc":{"start":{"line":126,"column":92},"end":{"line":126,"column":108}}}):o))+"</a>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"commandName"):t,{"name":"if","hash":{},"fn":e.program(1,s,0),"inverse":e.program(6,s,0),"loc":{"start":{"line":1,"column":0},"end":{"line":132,"column":7}}}))?o:""}});return i.registerPartial("csui_controls_globalmessage_impl_progressbar.ext",n),n}),csui.define("csui/controls/globalmessage/progressbar.view.ext",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/nodesprites","csui/controls/globalmessage/impl/progresspanel/progressbar.view","module","i18n!csui/controls/globalmessage/impl/progresspanel/impl/nls/progresspanel.lang","hbs!csui/controls/globalmessage/impl/progressbar.ext"],function(e,t,i,n,s,o,r,a){"use strict";var l=e.defaults(o.config().csui,{"enhancePanel":!1}),c=["pending","processing","rejected","resolved","aborted","stopped","stopping","finalizing"];return s.extend({"constructor":function(t){this.ui=e.extend({},this.ui,s.prototype.ui),s.prototype.constructor.apply(this,arguments)},"template":a,"templateHelpers":function(){var t=this.computeProgress(),i=this.model,s=1===this.collection.length,o=this.getItemLabel(),a=e.str.sformat(r.CancelAria,o),u=(!!i.get("commandName")||i.get("commandName"),i.get("targetLocation")),d=l.enhancePanel,p=d?u:!this.options.hideGotoLocationMultiSet&&u?u:void 0;return"resolved"!==this.model.get("state")&&(p=void 0),d&&(t.loadingCount=t.count?t.count:void 0,t.isLoadTimeAvailable=t.loadingCount>0),t.name=o,t.enableCancel=this.options.enableCancel,t.type_icon_class=this.model.node?n.findClassByNode(this.model.node):"",c.forEach(function(e){t["state_"+e]=r["State_"+e]}),t.cancel=r.Cancel,t.cancelAria=a,t.expand=r.Expand,t.collapse=r.Collapse,t.close=r.Close,t.singleItem=s,t.minimize=r.minimize,t.minimizeAria=r.minimizeAria,t.retry=r.Retry,t.gotoLocation=this.options.parentView.options.gotoLocationLinkLabel,t.targetLocationUrl=p?p.url:void 0,t.enableRetry=l.enableRetry,t.notEnhancedPanel=!d&&!!this.options.parentView.isMultiContainer,t.isEnhancedPanel=d,t.errorIconAria=r.ErrorIconAria,t.successIconAria=r.SuccessIconAria,t},"ui":{"loadingDots":".loading-dots","progressBar":".binf-progress"},"hanldleClickGotoLocation":function(e){return s.prototype.hanldleClickGotoLocation.apply(this,arguments)},"_updateItem":function(){var e=this.computeProgress(),t=this.$el;l.enhancePanel&&(e.loadingCount=e.count?e.count:void 0,e.isLoadTimeAvailable=e.loadingCount>0),this.showProgressBar(e.isLoadTimeAvailable),this.options.parentView.updateProgressArea(t,e),l.enhancePanel&&"processing"===this.model.get("state")&&(t[0]&&t[0].getElementsByClassName("csui-stateaction-pending")[0].classList.add("binf-hidden"),t[0]&&t[0].getElementsByClassName("csui-stateaction-processing")[0].classList.add("binf-hidden"))},"showProgressBar":function(e){this.$el;e?(this.ui.progressBar[0]&&this.ui.progressBar[0].classList&&this.ui.progressBar[0].classList.remove("binf-hidden"),this.ui.loadingDots[0]&&this.ui.loadingDots[0].classList&&this.ui.loadingDots[0].classList.add("binf-hidden")):(this.ui.progressBar[0]&&this.ui.progressBar[0].classList&&this.ui.progressBar[0].classList.add("binf-hidden"),this.ui.loadingDots[0]&&this.ui.loadingDots[0].classList&&this.ui.loadingDots[0].classList.remove("binf-hidden"))},"computeProgress":function(){return s.prototype.computeProgress.apply(this,arguments)}})}),csui.define("hbs!csui/controls/globalmessage/impl/progresspanel.ext",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-stateaction csui-progresscell">\r\n        <button type="button" aria-label="'+e.escapeExpression((o=null!=(o=r(i,"stateaction_all_pending")||(null!=t?r(t,"stateaction_all_pending"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"stateaction_all_pending","hash":{},"loc":{"start":{"line":44,"column":42},"end":{"line":44,"column":69}}}):o))+'"\r\n                class="csui-stateaction-pending\r\n        csui-icon-like-btn binf-btn binf-btn-default">'+e.escapeExpression((o=null!=(o=r(i,"stateaction_pending")||(null!=t?r(t,"stateaction_pending"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"stateaction_pending","hash":{},"loc":{"start":{"line":46,"column":54},"end":{"line":46,"column":77}}}):o))+'</button>\r\n        <button type="button" aria-label="'+e.escapeExpression((o=null!=(o=r(i,"stateaction_all_processing")||(null!=t?r(t,"stateaction_all_processing"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"stateaction_all_processing","hash":{},"loc":{"start":{"line":47,"column":42},"end":{"line":47,"column":72}}}):o))+'"\r\n                class="csui-stateaction-processing csui-icon-like-binf-btn binf-hidden binf-btn binf-btn-default">\r\n            '+e.escapeExpression((o=null!=(o=r(i,"stateaction_processing")||(null!=t?r(t,"stateaction_processing"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"stateaction_processing","hash":{},"loc":{"start":{"line":49,"column":12},"end":{"line":49,"column":38}}}):o))+"</button>\r\n      </div>\r\n"},"3":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="csui-show-retryAll binf-hidden">\r\n          <button type="button" class="csui-retry-all" title="'+e.escapeExpression((o=null!=(o=r(i,"retryAll")||(null!=t?r(t,"retryAll"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"retryAll","hash":{},"loc":{"start":{"line":54,"column":62},"end":{"line":54,"column":74}}}):o))+"\" tabindex='0'>"+e.escapeExpression((o=null!=(o=r(i,"retryAll")||(null!=t?r(t,"retryAll"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"retryAll","hash":{},"loc":{"start":{"line":54,"column":89},"end":{"line":54,"column":101}}}):o))+"</button>\r\n        </div>\r\n"},"5":function(e,t,i,n,s){return"binf-hidden"},"7":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-minimize csui-minimizecell">\r\n        <button type="button" class="icon-progresspanel-minimize binf-btn binf-btn-default"\r\n                aria-label="'+e.escapeExpression((o=null!=(o=r(i,"minimizeAria")||(null!=t?r(t,"minimizeAria"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"minimizeAria","hash":{},"loc":{"start":{"line":73,"column":28},"end":{"line":73,"column":44}}}):o))+'" title="'+e.escapeExpression((o=null!=(o=r(i,"minimize")||(null!=t?r(t,"minimize"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"minimize","hash":{},"loc":{"start":{"line":73,"column":53},"end":{"line":73,"column":65}}}):o))+'" tabindex="0"></button>\r\n      </div>\r\n'},"9":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"targetLocationUrl"):t,{"name":"if","hash":{},"fn":e.program(10,s,0),"inverse":e.noop,"loc":{"start":{"line":79,"column":2},"end":{"line":81,"column":9}}}))?o:""},"10":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <a class="csui-gotolocation-url binf-hidden" href="'+e.escapeExpression((o=null!=(o=r(i,"targetLocationUrl")||(null!=t?r(t,"targetLocationUrl"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"targetLocationUrl","hash":{},"loc":{"start":{"line":80,"column":53},"end":{"line":80,"column":74}}}):o))+'" role="button">'+e.escapeExpression((o=null!=(o=r(i,"gotoLocation")||(null!=t?r(t,"gotoLocation"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"gotoLocation","hash":{},"loc":{"start":{"line":80,"column":90},"end":{"line":80,"column":106}}}):o))+"</a>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-header">\r\n  <div class="csui-progressrow csui-height-target">\r\n    <div class="csui-names-progress">\r\n      <div class="csui-names csui-progresscell">\r\n        <div class="csui-header-icon csui-icon binf-hidden"></div>\r\n        <h2 class="csui-title" id="'+e.escapeExpression((r=null!=(r=a(i,"progressTitleId")||(null!=t?a(t,"progressTitleId"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"progressTitleId","hash":{},"loc":{"start":{"line":6,"column":35},"end":{"line":6,"column":54}}}):r))+'">\r\n          '+e.escapeExpression((r=null!=(r=a(i,"title")||(null!=t?a(t,"title"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":7,"column":10},"end":{"line":7,"column":19}}}):r))+'\r\n        </h2>\r\n      </div>\r\n      <div class="csui-progress csui-progresscell">\r\n        <div class="csui-progress-dynamic binf-hidden">\r\n          <div class="csui-progress-textbar">\r\n            <div class="binf-progress">\r\n              <div class="binf-progress-bar" role="progressbar" aria-valuenow="'+e.escapeExpression((r=null!=(r=a(i,"percentage")||(null!=t?a(t,"percentage"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"percentage","hash":{},"loc":{"start":{"line":14,"column":79},"end":{"line":14,"column":93}}}):r))+'"\r\n                   aria-valuemin="0" aria-valuemax="100" style="width:'+e.escapeExpression((r=null!=(r=a(i,"percentage")||(null!=t?a(t,"percentage"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"percentage","hash":{},"loc":{"start":{"line":15,"column":70},"end":{"line":15,"column":84}}}):r))+'%">\r\n              </div>\r\n            </div>\r\n            <div class="loading-dots">\r\n                <div class="csui-loading-parent-wrapper binf-disabled csui-disabled">\r\n                    <span class="csui-loading-dots-wrapper">\r\n                        <span class="csui-loading-dot"></span>\r\n                        <span class="csui-loading-dot"></span>\r\n                        <span class="csui-loading-dot"></span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="csui-progress-static">\r\n          <div class="csui-progress-textbar">\r\n            <div class="csui-progress-static-pending" aria-hidden="true">'+e.escapeExpression((r=null!=(r=a(i,"state_pending")||(null!=t?a(t,"state_pending"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_pending","hash":{},"loc":{"start":{"line":31,"column":73},"end":{"line":31,"column":90}}}):r))+'</div>\r\n            <div class="csui-progress-static-processing binf-hidden" aria-hidden="true">'+e.escapeExpression((r=null!=(r=a(i,"state_processing")||(null!=t?a(t,"state_processing"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_processing","hash":{},"loc":{"start":{"line":32,"column":88},"end":{"line":32,"column":108}}}):r))+'</div>\r\n            <div class="csui-progress-static-resolved binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"state_resolved")||(null!=t?a(t,"state_resolved"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_resolved","hash":{},"loc":{"start":{"line":33,"column":67},"end":{"line":33,"column":85}}}):r))+'</div>\r\n            <div class="csui-progress-static-rejected binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"state_rejected")||(null!=t?a(t,"state_rejected"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_rejected","hash":{},"loc":{"start":{"line":34,"column":67},"end":{"line":34,"column":85}}}):r))+'</div>\r\n            <div class="csui-progress-static-aborted binf-hidden">'+e.escapeExpression((r=null!=(r=a(i,"state_aborted")||(null!=t?a(t,"state_aborted"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"state_aborted","hash":{},"loc":{"start":{"line":35,"column":66},"end":{"line":35,"column":83}}}):r))+'</div>\r\n          </div>\r\n          <div class="csui-percent"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="csui-states-actions">\r\n'+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableCancel"):t,{"name":"if","hash":{},"fn":e.program(1,s,0),"inverse":e.noop,"loc":{"start":{"line":42,"column":6},"end":{"line":51,"column":13}}}))?o:"")+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableRetry"):t,{"name":"if","hash":{},"fn":e.program(3,s,0),"inverse":e.noop,"loc":{"start":{"line":52,"column":6},"end":{"line":56,"column":13}}}))?o:"")+'      <div class="csui-expand csui-progresscell '+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"singleItem"):t,{"name":"if","hash":{},"fn":e.program(5,s,0),"inverse":e.noop,"loc":{"start":{"line":57,"column":48},"end":{"line":57,"column":84}}}))?o:"")+'">\r\n        <button type="button" class="csui-expand-down binf-btn binf-btn-default"\r\n                aria-label="'+e.escapeExpression((r=null!=(r=a(i,"expandAria")||(null!=t?a(t,"expandAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"expandAria","hash":{},"loc":{"start":{"line":59,"column":28},"end":{"line":59,"column":42}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=a(i,"expand")||(null!=t?a(t,"expand"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"expand","hash":{},"loc":{"start":{"line":59,"column":51},"end":{"line":59,"column":61}}}):r))+'" aria-haspopup="true" aria-expanded="false">\r\n          <span class="icon csui-icon icon-expandArrowDown"></span></button>\r\n          <button type="button" class="csui-expand-up binf-hidden binf-btn binf-btn-default"\r\n                aria-label="'+e.escapeExpression((r=null!=(r=a(i,"collapseAria")||(null!=t?a(t,"collapseAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"collapseAria","hash":{},"loc":{"start":{"line":62,"column":28},"end":{"line":62,"column":44}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=a(i,"collapse")||(null!=t?a(t,"collapse"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"collapse","hash":{},"loc":{"start":{"line":62,"column":53},"end":{"line":62,"column":65}}}):r))+'" aria-haspopup="true" aria-expanded="true">\r\n            <span class="icon csui-icon icon-expandArrowUp"></span></button>\r\n      </div>\r\n      <div class="csui-close csui-progresscell binf-hidden">\r\n        <button type="button" class="binf-btn binf-btn-default"\r\n                aria-label="'+e.escapeExpression((r=null!=(r=a(i,"closeAria")||(null!=t?a(t,"closeAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"closeAria","hash":{},"loc":{"start":{"line":67,"column":28},"end":{"line":67,"column":41}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=a(i,"close")||(null!=t?a(t,"close"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"close","hash":{},"loc":{"start":{"line":67,"column":50},"end":{"line":67,"column":59}}}):r))+'" >\r\n          <span class="csui-action-close csui-icon"></span></button>\r\n      </div>\r\n'+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enableMinimiseButton"):t,{"name":"if","hash":{},"fn":e.program(7,s,0),"inverse":e.noop,"loc":{"start":{"line":70,"column":6},"end":{"line":75,"column":13}}}))?o:"")+"    </div>\r\n  </div>\r\n"+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"enhancePanel"):t,{"name":"if","hash":{},"fn":e.program(9,s,0),"inverse":e.noop,"loc":{"start":{"line":78,"column":2},"end":{"line":82,"column":9}}}))?o:"")+'</div>\r\n<div class="csui-items-wrapper">\r\n  <div class="csui-items" role="list" aria-label="'+e.escapeExpression((r=null!=(r=a(i,"detailsListAria")||(null!=t?a(t,"detailsListAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"detailsListAria","hash":{},"loc":{"start":{"line":85,"column":50},"end":{"line":85,"column":69}}}):r))+'">\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_globalmessage_impl_progresspanel.ext",n),n}),csui.define("csui/controls/globalmessage/progresspanel.view.ext",["module","csui/lib/underscore","csui/lib/marionette","csui/controls/globalmessage/impl/progresspanel/progresspanel.view","csui/controls/globalmessage/progressbar.view.ext","csui/utils/base","i18n!csui/controls/globalmessage/impl/progresspanel/impl/nls/progresspanel.lang","hbs!csui/controls/globalmessage/impl/progresspanel.ext"],function(e,t,i,n,s,o,r,a){var l=t.defaults(e.config().csui,{"enhancePanel":!1}),c=["pending","processing","rejected","resolved","aborted","stopped","stopping","finalizing"];return n.extend({"constructor":function(e){n.prototype.constructor.apply(this,arguments)},"template":a,"childView":s,"childViewOptions":function(){return t.extend(this.options,{"enableCancel":this.options.enableCancel,"messageHelper":this.options.messageHelper,"reorderOnSort":!0,"parentView":this})},"updateProgressArea":function(e,i){var n=e.find(".csui-progress-static-rejected");if(void 0===i.dynamic?"processing"===i.state:i.dynamic){var s=e.find(".binf-progress-bar");this.options.messageHelper.switchField(e,".csui-progress","dynamic",["static","dynamic"]);var a=t.str.sformat(r.BytesOfSize,o.getReadableFileSizeString(i.count),o.getReadableFileSizeString(i.total));e.find(".csui-progress-text").text(a),s.attr("aria-valuenow",i.percentage),s.css("width",t.str.sformat("{0}%",i.percentage)),e.find(".csui-progress-dynamic .csui-percent").text(t.str.sformat("{0}%",i.percentage))}else this.options.messageHelper.switchField(e,".csui-progress","static",["static","dynamic"]),this.options.messageHelper.switchField(e,".csui-progress-static",i.state,c);n.text(i.errorMessage),n.attr("title",i.errorMessage),i.errorMessage&&e.addClass("csui-error"),this.options.messageHelper.switchField(e,".csui-stateaction",i.state,c),(l.enhancePanel?!(this.itemsPending&&this.itemsPending>0):!(this.itemsProcessing&&this.itemsProcessing>0))?this.$el.find(".csui-header .csui-stateaction-processing").addClass("binf-hidden"):(this.$el.find(".csui-header .csui-stateaction-processing").removeClass("binf-hidden"),this.$el.find(".csui-header .csui-stateaction-pending").addClass("binf-hidden"))},"templateHelpers":function(){var e,i,n=this.computeProgress(),s=1===this.collection.length;return this.options.hideGotoLocationSingleSet||this.isMultiContainer||(e=this.collection.models[0].get("targetLocation"),i=e&&e.url),c.forEach(function(e){n["state_"+e]=r["State_"+e]}),this.panelStateValues.forEach(function(e){n["stateaction_"+e]=r["StateAction_"+e],n["stateaction_all_"+e]=r["StateAction_all_"+e]}),n.cancel=r.Cancel,n.detailsListAria=r.DetailsListAria,n.enableCancel=this.options.enableCancel,n.expand=r.Expand,n.expandAria=r.ExpandAria,n.collapse=r.Collapse,n.collapseAria=r.CollapseAria,n.close=r.Close,n.closeAria=r.CloseAria,n.processing="processing"===n.state,n.progressTitleId=t.uniqueId("progressTitle"),this.progressTitleId=n.progressTitleId,n.singleItem=s,n.enableMinimiseButton=this.options.enableMinimiseButton,n.minimize=r.minimize,n.minimizeAria=r.minimizeAria,n.gotoLocation=this.options.gotoLocationLinkLabel,n.retryAll=r.RetryAll,n.enableRetry=l.enableRetry,n.enhancePanel=!l.enhancePanel,t.extend(n,{"targetLocationUrl":i})},"computeProgress":function(){return n.prototype.computeProgress.apply(this,arguments)},"doCancel":function(){this.collection.forEach(function(e){var t=e.get("state");(l.enhancePanel?Boolean("pending"===t):Boolean("pending"===t||"processing"===t))&&e.set("abortState",!0)}),this.collection.abort("stopped"),this.ui.processingAction.addClass("binf-hidden")}})}),csui.define("csui/controls/globalmessage/impl/nls/globalmessage.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/globalmessage/impl/nls/root/globalmessage.lang",{"FewerDetails":"Fewer details","MoreDetails":"More details...","GotoLocationLinkLabel":"Go to location","CloseDialog":"Close","closeDialogAria":"Close message dialog"}),csui.define("hbs!csui/controls/globalmessage/impl/messagedialog",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-gotolocation-label">\r\n    <a class="csui-gotolocation-url" href="'+e.escapeExpression((o=null!=(o=r(i,"targetLocationUrl")||(null!=t?r(t,"targetLocationUrl"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"targetLocationUrl","hash":{},"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":64}}}):o))+'" role="button">'+e.escapeExpression((o=null!=(o=r(i,"gotoLocation")||(null!=t?r(t,"gotoLocation"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"gotoLocation","hash":{},"loc":{"start":{"line":14,"column":80},"end":{"line":14,"column":96}}}):o))+"</a>\r\n  </div>\r\n"},"3":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-message-link-div">\r\n  <a href="'+e.escapeExpression((o=null!=(o=r(i,"link_url")||(null!=t?r(t,"link_url"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"link_url","hash":{},"loc":{"start":{"line":21,"column":11},"end":{"line":21,"column":23}}}):o))+'" class="csui-message-link">'+e.escapeExpression((o=null!=(o=r(i,"link_label")||(null!=t?r(t,"link_label"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"link_label","hash":{},"loc":{"start":{"line":21,"column":51},"end":{"line":21,"column":65}}}):o))+"</a>\r\n</div>\r\n"},"5":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-details-wrapper">\r\n  <div id="csui-message-details" class="csui-details csui-minheight">\r\n    <div class="csui-text binf-hidden" id="'+e.escapeExpression((o=null!=(o=r(i,"detailsId")||(null!=t?r(t,"detailsId"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"detailsId","hash":{},"loc":{"start":{"line":28,"column":43},"end":{"line":28,"column":56}}}):o))+'">'+e.escapeExpression((o=null!=(o=r(i,"details_text")||(null!=t?r(t,"details_text"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"details_text","hash":{},"loc":{"start":{"line":28,"column":58},"end":{"line":28,"column":74}}}):o))+'</div>\r\n    <div class="csui-action csui-message-details-heightsource">\r\n      <a href="javascript:void(0);" class="csui-action-moredetails">'+e.escapeExpression((o=null!=(o=r(i,"action_moredetails")||(null!=t?r(t,"action_moredetails"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"action_moredetails","hash":{},"loc":{"start":{"line":30,"column":68},"end":{"line":30,"column":90}}}):o))+'</a>\r\n      <a href="javascript:void(0);" class="csui-action-fewerdetails binf-hidden">'+e.escapeExpression((o=null!=(o=r(i,"action_fewerdetails")||(null!=t?r(t,"action_fewerdetails"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"action_fewerdetails","hash":{},"loc":{"start":{"line":31,"column":81},"end":{"line":31,"column":104}}}):o))+"</a>\r\n    </div>\r\n  </div>\r\n</div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-header csui-height-target">\r\n  <div class="csui-header-top">\r\n    <div class="csui-state">\r\n      <span class="csui-state-icon csui-icon"></span>\r\n    </div>\r\n    <div class="csui-text" id="'+e.escapeExpression((r=null!=(r=a(i,"headerId")||(null!=t?a(t,"headerId"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"headerId","hash":{},"loc":{"start":{"line":6,"column":31},"end":{"line":6,"column":43}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=a(i,"header_text")||(null!=t?a(t,"header_text"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"header_text","hash":{},"loc":{"start":{"line":6,"column":52},"end":{"line":6,"column":67}}}):r))+'">'+e.escapeExpression((r=null!=(r=a(i,"header_text")||(null!=t?a(t,"header_text"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"header_text","hash":{},"loc":{"start":{"line":6,"column":69},"end":{"line":6,"column":84}}}):r))+'</div>\r\n    <div class="csui-action">\r\n      <button type="button" class="csui-action-close binf-btn binf-btn-default csui-icon" title="'+e.escapeExpression((r=null!=(r=a(i,"closeDialog")||(null!=t?a(t,"closeDialog"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"closeDialog","hash":{},"loc":{"start":{"line":8,"column":97},"end":{"line":8,"column":112}}}):r))+'"\r\n        aria-label="'+e.escapeExpression((r=null!=(r=a(i,"closeDialogAria")||(null!=t?a(t,"closeDialogAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"closeDialogAria","hash":{},"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":39}}}):r))+'"></button>\r\n    </div>\r\n  </div>\r\n'+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"targetLocationUrl"):t,{"name":"if","hash":{},"fn":e.program(1,s,0),"inverse":e.noop,"loc":{"start":{"line":12,"column":2},"end":{"line":16,"column":9}}}))?o:"")+"</div>\r\n\r\n"+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"message_with_link"):t,{"name":"if","hash":{},"fn":e.program(3,s,0),"inverse":e.noop,"loc":{"start":{"line":19,"column":0},"end":{"line":23,"column":7}}}))?o:"")+"\r\n"+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"details_text"):t,{"name":"if","hash":{},"fn":e.program(5,s,0),"inverse":e.noop,"loc":{"start":{"line":25,"column":0},"end":{"line":35,"column":7}}}))?o:"")}});return i.registerPartial("csui_controls_globalmessage_impl_messagedialog",n),n}),csui.define("css!csui/controls/globalmessage/impl/messagedialog",[],function(){}),csui.define("csui/controls/globalmessage/impl/messagedialog.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","i18n","i18n!csui/controls/globalmessage/impl/nls/globalmessage.lang","hbs!csui/controls/globalmessage/impl/messagedialog","css!csui/controls/globalmessage/impl/messagedialog","css!csui/controls/globalmessage/globalmessage_icons"],function(e,t,i,n,s,o,r){"use strict";var a={"info":"csui-info","success":"csui-success","success_with_link":"csui-success-with-link","warning":"csui-warning","error":"csui-error","processing":"csui-processing","none":"csui-none"},l={"info":"csui-icon-notification-information-white","success":"csui-icon-notification-success-white","success_with_link":"csui-icon-notification-success-white","warning":"csui-icon-notification-warning-white","error":"csui-icon-notification-error-white","processing":null,"none":null},c={"info":"csui-icon-dismiss-white","success":"csui-icon-dismiss-white","success_with_link":"csui-icon-dismiss-white","warning":"csui-icon-dismiss-white","error":"csui-icon-dismiss-white","processing":null,"none":"csui-icon-dismiss"};return i.ItemView.extend({"constructor":function(e){this.css=r,e.info||(e.info="info"),this.className="csui-messagepanel "+a[e.info],e.context&&e.nextNodeModelFactory&&(this._nextNode=e.context.getModel(e.nextNodeModelFactory)),i.ItemView.prototype.constructor.call(this,e)},"className":"csui-messagepanel "+a.info,"template":o,"ui":{"closeAction":".csui-header .csui-action-close","collapseAction":".csui-details .csui-action-fewerdetails","expandAction":".csui-details .csui-action-moredetails","stateIcon":".csui-state-icon","closeIcon":".csui-action-close","messageLink":".csui-message-link","gotoLocation":".csui-gotolocation-url"},"events":{"click @ui.closeAction":"doClose","click @ui.collapseAction":"doCollapse","click @ui.expandAction":"doExpand","click @ui.messageLink":"onClickLink","click @ui.gotoLocation":"onClickGotoLocation","focusout @ui.closeIcon":"replaceDummyBackImg"},"doResize":function(){var e=this.$el.find(".csui-header");if(this.$el.find(".csui-details").width(e.width()),this.options.sizeToParentContainer){var t=this.$el.width(),i=this.$el.parent().width(),s=(i-t)/2;s>0||(s=0),s=n.settings.rtl?-s:s,s="translateX("+s+"px)",this.$el.css({"transform":s})}},"doCollapse":function(t){this._clearTimeout(),t=!1!==t;var i=this.$el.find(".csui-details"),n=i.find(".csui-text");this.options.messageHelper.switchField(i,".csui-action","moredetails",["moredetails","fewerdetails"]);var s=e.extend({"csuiAfterHide":function(){i.css("width","")}},this);this.options.messageHelper.collapsePanel(s,i,n,t),this.stateExpandCollapse="collapsed",this.ui.expandAction.focus()},"doExpand":function(e){this._clearTimeout(),e=!1!==e;var t=this.$el.find(".csui-details"),i=t.find(".csui-text");this.options.messageHelper.switchField(t,".csui-action","fewerdetails",["moredetails","fewerdetails"]),t.css("width",this.$el.find(".csui-header").width()),this.options.messageHelper.expandPanel(this,t,i,e),this.stateExpandCollapse="expanded",this.ui.collapseAction.focus()},"doShow":function(t,i){var n=i.$el.find(".csui-global-message.position-show");if(n.length){var s=(n.last().find(".csui-header"),n.length);this.$el.find(".csui-header").css({"top":4*s+"px","margin":"0 "+-8*s+"px"});var o=this.$el.find(".csui-details-wrapper");o.length&&o.css({"margin-right":-8*s-5+"px","margin-left":-8*s-5+"px"})}if("success"===this.options.info){var r=this,a=e.extend({"csuiAfterShow":function(){r.doResize(),r._setTimeout()}},this);this.options.messageHelper.showPanel(a,t,i)}else this.options.messageHelper.showPanel(this,t,i);this.doResize(),this.$el.trigger("globalmessage.shown",this),this.$el.find(".csui-action-close").trigger("focus")},"doClose":function(){this._clearTimeout();var t=this,i=e.extend({"csuiAfterHide":function(){t.destroy(),t.trigger("escaped:focus")}},this);this.options.messageHelper.fadeoutPanel(i)},"_setTimeout":function(){var e=this
;this.options.enablePermanentHeaderMessages||this.options.doAutoClose||(this.options.timeout=window.setTimeout(function(){e.doClose()},5e3))},"_clearTimeout":function(){this.options.timeout&&(window.clearTimeout(this.options.timeout),this.options.timeout=void 0)},"headerId":void 0,"detailsId":void 0,"templateHelpers":function(){var t=s.closeDialogAria;this.headerId||(this.headerId=e.uniqueId("header")),this.detailsId||(this.detailsId=this.options.details?e.uniqueId("details"):void 0);var i={"header_text":this.options.message,"headerId":this.headerId,"details_text":this.options.details,"detailsId":this.detailsId,"action_moredetails":s.MoreDetails,"action_fewerdetails":s.FewerDetails,"closeDialog":s.CloseDialog,"closeDialogAria":t,"gotoLocation":this.options.gotoLocation,"targetLocationUrl":this.options.targetLocationUrl};return this.options.link_url&&this.options.targetFolder&&(i=e.extend(i,{"message_with_link":!0,"link_label":this.options.link_label||s.GotoLocationLinkLabel,"link_url":this.options.link_url})),i},"onClickLink":function(e){e.preventDefault(),e.stopPropagation(),this.doClose(),this.options.targetFolder&&this._nextNode&&this._nextNode.set("id",this.options.targetFolder.get("id"))},"onClickGotoLocation":function(e){e.preventDefault(),e.stopPropagation(),this.doClose();var t=this.options.targetLocation;t&&this._nextNode&&this._nextNode.set("id",t.id)},"onRender":function(){this.$el.attr("role","alertdialog"),this.$el.attr("aria-labelledby",this.headerId),this.detailsId&&this.$el.attr("aria-describedby",this.detailsId);var e=l[this.options.info];e?this.ui.stateIcon.addClass(e):this.$el.addClass("csui-no-icon");var t=c[this.options.info];if(t&&this.ui.closeIcon.addClass(t),!this.stateExpandCollapse){var i=this.$el.find(".csui-details .csui-action").find(":not(.binf-hidden)");i.hasClass("csui-action-fewerdetails")?this.doExpand(!1):i.hasClass("csui-action-moredetails")&&this.doCollapse(!1)}},"replaceDummyBackImg":function(){this.ui.closeIcon.addClass("csui-action-close-replace-dummy")}})}),csui.define("csui/controls/globalmessage/impl/custom.wrapper.view",["csui/lib/backbone","csui/lib/marionette","css!csui/controls/globalmessage/impl/messagedialog"],function(e,t){"use strict";return t.ItemView.extend({"constructor":function(i){t.ItemView.prototype.constructor.call(this,i);var n=this.getOption("contentView");n instanceof e.View||(n=n.call(this)),this.view=n,this.listenTo(n,"destroy",this.destroy),this.region=new t.Region({"el":this.el})},"className":"csui-messagepanel","template":!1,"onRender":function(){this.region.show(this.view)},"onDestroy":function(){this.region.empty()},"doShow":function(e,t){this.options.messageHelper.showPanel(this,e,t)}})}),csui.define("csui/controls/globalmessage/impl/loaderpanel/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/globalmessage/impl/loaderpanel/impl/nls/root/lang",{"cancel":"Cancel"}),csui.define("hbs!csui/controls/globalmessage/impl/loaderpanel/impl/loaderpanel",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-loaderpanel">\r\n  <div class="binf-row">\r\n    <div class="binf-col-sm-6" id="csui-zipanddownload-stage">\r\n      '+e.escapeExpression((o=null!=(o=r(i,"label")||(null!=t?r(t,"label"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":15}}}):o))+'\r\n    </div>\r\n    <div class="binf-col-sm-4">\r\n      <div class="csui-loaderpanel-inner"></div>\r\n    </div>\r\n    <div class="binf-col-sm-2 bin-pull-right">\r\n      <a class="binf-pull-right csui-loader-cancel">'+e.escapeExpression((o=null!=(o=r(i,"cancel")||(null!=t?r(t,"cancel"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":10,"column":52},"end":{"line":10,"column":62}}}):o))+"</a>\r\n    </div>\r\n  </div>\r\n</div>"}});return i.registerPartial("csui_controls_globalmessage_impl_loaderpanel_impl_loaderpanel",n),n}),csui.define("css!csui/controls/globalmessage/impl/loaderpanel/impl/loaderpanel",[],function(){}),csui.define("csui/controls/globalmessage/impl/loaderpanel/loaderpanel.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","i18n","i18n!csui/controls/globalmessage/impl/loaderpanel/impl/nls/lang","hbs!csui/controls/globalmessage/impl/loaderpanel/impl/loaderpanel","css!csui/controls/globalmessage/impl/loaderpanel/impl/loaderpanel"],function(e,t,i,n,s,o,r){return n.ItemView.extend({"template":r,"templateHelpers":function(){return{"label":this.options.label,"cancel":o.cancel}},"ui":{"cancel":".csui-loader-cancel"},"events":{"click @ui.cancel":"cancelAndHide"},"constructor":function(e){n.ItemView.prototype.constructor.call(this,e)},"cancelAndHide":function(e){this.options.xhr&&this.options.xhr.abort&&this.options.xhr.abort(),this.destroy(!1)},"doShow":function(e,t,i){this.options.messageHelper.showPanel(this,e,t),this.doResize(),this.$el.trigger("globalmessage.shown",this),this.ui.cancel.trigger("focus"),this.updateXHRReference(i)},"updateXHRReference":function(e){e&&(this.options.xhr&&this.options.xhr.abort(),this.options.xhr=e)},"doResize":function(){if(this.options.sizeToParentContainer){var e=parseInt(this.$el.css("min-width"),10),t=(this.$el.width(),this.$el.parent().width());this.uncompressedMinWidth||(this.uncompressedMinWidth=e),this.uncompressedMinWidth>t?this.$el.addClass("compressed"):this.$el.removeClass("compressed");var i=this.$el.width(),n=(t-i)/2;n>0||(n=0),n=s.settings.rtl?-n:n,n="translateX("+n+"px)",this.$el.css({"transform":n})}}})}),csui.define("csui/behaviors/keyboard.navigation/tabkey.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette","csui/behaviors/keyboard.navigation/tabables.behavior"],function(e,t,i,n,s,o){"use strict";return o.extend({"constructor":function(e,t){o.prototype.constructor.apply(this,arguments)},"_clearTabIndexes":function(e){n.debug("_clearTabIndexes of TabKeyBehavior for view "+e.constructor.name)&&console.log(n.last)}},{})}),csui.define("csui/dialogs/modal.alert/modal.alert",["nuc/lib/underscore","nuc/lib/jquery","nuc/utils/log","nuc/utils/base","csui/behaviors/keyboard.navigation/tabkey.behavior","smart/dialogs/modal.alert/modal.alert"],function(e,t,i,n,s,o){"use strict";i.warn("Use modal alert from smart controls instead of depending on csui modal alert");var r=o.extend({"behaviors":{"TabKeyBehavior":{"behaviorClass":s,"recursiveNavigation":!0}},"constructor":function(t){o.prototype.constructor.call(this,t),this.listenTo(this,"modalalert:after:shown",e.bind(this.afterModalAlertShown,this))},"afterModalAlertShown":function(e){var i=this.$el.find("*[tabindex=0]"),s=i.length-1,o=this._getStartIndex(s,e,i);if(s>-1){var r=void 0!==this.activeIndex?this.activeIndex:e?0:s;do{var a=t(i[o]);if(n.isVisibleInWindowViewport(a)){this.activeIndex=o,a.trigger("focus");break}o=e?0===o?s:o-1:o===s?0:o+1}while(o!=r)}return!1},"_getStartIndex":function(e,t){var i=0,n=this.activeIndex;return t?(i=e,void 0!==n&&n>0&&(i=this.activeIndex-1)):void 0!==n&&n<e&&(i=n+1),i}},{"_show":function(e){return new r(e).show()}});return r}),csui.define("csui/controls/globalmessage/globalmessage",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/messagehelper","csui/utils/accessibility","csui/controls/globalmessage/progresspanel.view.ext","csui/controls/globalmessage/impl/messagedialog.view","csui/controls/globalmessage/impl/custom.wrapper.view","csui/controls/globalmessage/impl/loaderpanel/loaderpanel.view","csui/dialogs/modal.alert/modal.alert"],function(e,t,i,n,s,o,r,a,l,c,u){"use strict";var d=e.config();t.defaults(d,{"enablePermanentHeaderMessages":!1}),o.isAccessibleMode()&&(d.enablePermanentHeaderMessages=!0);var p,h=new s,f={};return{"setMessageRegionView":function(e,i){this._cleanupPreviousMessageRegion(),i=t.defaults({},i,{"useClass":!0,"sizeToParentContainer":!0}),i.classes&&(f.classNames=i.classes),i.enableMinimiseButtonOnProgressPanel&&(f.enableMinimiseButtonOnProgressPanel=i.enableMinimiseButtonOnProgressPanel),f.relatedView=i.useClass?void 0:e,f.sizeToParentContainer=i.sizeToParentContainer,f.messageRegionView=e,f.messageRegionView&&f.fileUploadCollection&&f.progressPanel&&(f.progressPanel=this._makeProgressPanel())},"setFileUploadCollection":function(e){f.fileUploadCollection=e,f.progressPanel&&(f.fileUploadCollection?f.progressPanel=this._makeProgressPanel():this.hideFileUploadProgress())},"hideFileUploadProgress":function(){f.progressPanel&&(f.progressPanel.doClose(),f.progressPanel.destroy(),f.progressPanel=void 0)},"showFileUploadProgress":function(e,t){console.warn("this method has been deprecated! please use showProgressPanel."),this.showProgressPanel(e,t)},"showProgressPanel":function(e,i){e&&(f.fileUploadCollection||(f.fileUploadCollection=e),f.progressPanel&&f.progressPanel.options.actionType===i.actionType&&!f.progressPanel.isProgressCompleted()?f.fileUploadCollection.add(e.models):(this.hideFileUploadProgress(),f.fileUploadCollection=e),f.progressPanel=this._makeProgressPanel(t.extend(i,{"enableMinimiseButton":f.enableMinimiseButtonOnProgressPanel,"enablePermanentHeaderMessages":d.enablePermanentHeaderMessages})),f.progressPanel.doShow(f.relativeView,f.messageRegionView))},"isActionInProgress":function(e,t,i){var n=!1;return f.progressPanel&&!f.progressPanel.isProgressCompleted()&&f.progressPanel.options.actionType!==e&&(n=!0,u.showError(t,i)),n},"showPermissionApplyingProgress":function(e,t){e&&(f.permissionAppliedCollection=e,f.progressPanel=this.__makePermissionProgressPanel(t)),f.progressPanel&&!e||(f.progressPanel=this._makeProgressPanel(t)),"rejected"===f.progressPanel.state&&"ViewPermission"===f.progressPanel.collection.models[0].attributes.commandName&&f.progressPanel.$el.addClass("csui-no-error-message-panel"),f.progressPanel&&f.progressPanel.doShow(f.relativeView,f.messageRegionView)},"showLoader":function(e,i){this.hideFileUploadProgress(),f.loaderPanel?f.loaderPanel.doShow(f.relativeView,f.messageRegionView,e):f.loaderPanel=this._makeLoaderPanel(t.extend({"xhr":e},i)),f.loaderPanel.listenTo(f.loaderPanel,"destroy",function(e){i.onDestroy&&i.onDestroy(e),f.loaderPanel=void 0}),e&&e.always(function(e){f.loaderPanel&&f.loaderPanel.destroy(),i.onDestroy&&i.onDestroy(e),f.loaderPanel=void 0})},"changeLoaderMessage":function(e,t){f.loaderPanel&&(f.loaderPanel.$el.find("#csui-zipanddownload-stage").text(e),f.loaderPanel.updateXHRReference(t))},"showMessage":function(e,i,n,s){return this._showMessageView(a,t.extend({"info":e,"message":i,"details":n,"messageHelper":h,"sizeToParentContainer":f.sizeToParentContainer,"enablePermanentHeaderMessages":d.enablePermanentHeaderMessages},s))},"showCustomView":function(e){return this._showMessageView(l,{"contentView":e,"messageHelper":h})},"_showMessageView":function(e,t){this._ensureMessageRegion();var i=h.activatePanel(h.createPanel(f,e,t),f.relatedView,f.messageRegionView);return this._addEventHandlers(i),i},"_makeProgressPanel":function(e){e||(e={}),t.defaults(e,{"collection":f.fileUploadCollection,"sizeToParentContainer":f.sizeToParentContainer,"messageHelper":h}),this._ensureMessageRegion();var i=h.activatePanel(h.createPanel(f,r,e,f.progressPanel),f.relatedView,f.messageRegionView,f.progressPanel);return this._addEventHandlers(i),i},"__makePermissionProgressPanel":function(e){e||(e={}),t.defaults(e,{"collection":f.permissionAppliedCollection,"sizeToParentContainer":f.sizeToParentContainer,"messageHelper":h}),this._ensureMessageRegion();var i=h.activatePanel(h.createPanel(f,r,e,f.progressPanel),f.relatedView,f.messageRegionView,f.progressPanel);return this._addEventHandlers(i),i},"_makeLoaderPanel":function(e){e||(e={}),t.defaults(e,{"sizeToParentContainer":f.sizeToParentContainer,"messageHelper":h}),this._ensureMessageRegion();var i=h.activatePanel(h.createPanel(f,c,e,f.progressPanel),f.relatedView,f.messageRegionView,f.progressPanel);return this._addEventHandlers(i),i},"_addEventHandlers":function(e){var t=function(){h.resizePanel(e,f.relatedView)};i(window).on("resize",t),e.listenTo(f.messageRegionView,"resize",t),e.once("before:destroy",function(){i(window).off("resize",t),e.stopListening(f.messageRegionView,"resize",t)})},"_ensureMessageRegion":function(){if(!f.messageRegionView){var e=i.fn.binf_modal.getDefaultContainer(),t=i("<div>",{"class":"csui-message-container"},{"style":"position:absolute; top: 0; left: 0; width: 0; height: 100vh;"}).appendTo(e);f.messageRegionView=new n.View({"el":t}),p=!0}},"_cleanupPreviousMessageRegion":function(){p&&(f.messageRegionView.remove(),p=!1),f.progressPanel&&f.progressPanel.destroy(),f={}}}}),csui.define("csui/behaviors/default.action/impl/command",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/log","csui/utils/commands","csui/controls/globalmessage/globalmessage","csui/utils/commandhelper"],function(e,t,i,n,s,o,r,a){"use strict";function l(e){e||(e={}),this.commands=e.commands||o}return s=s(e.id),t.extend(l.prototype,{"executeAction":function(e,n,o){var l=e.get("signature"),c=this.commands.findWhere({"signature":l});try{if(!c)throw new Error("Invalid command: "+l);var u=c.execute(n,o);return t.isArray(u)||(u=[u]),i.when.apply(i,u).fail(function(e){e&&(a.showOfflineMessage(e)||r.showMessage("error",e.message))})}catch(e){s.warn('Executing the command "{0}" failed.\n{1}',!!c&&c.get("signature"),e.message)&&console.warn(s.last)}}}),l.extend=n.View.extend,l}),csui.define("csui/behaviors/default.action/impl/defaultaction",["module","csui/lib/underscore","csui/behaviors/default.action/impl/command","csui/models/nodes","csui/utils/defaultactionitems","csui/utils/log"],function(e,t,i,n,s,o){"use strict";o=o(e.id);var r=i.extend({"constructor":function(e){i.prototype.constructor.apply(this,arguments),e||(e={}),this.actionItems=e.actionItems||s},"executeAction":function(e,t){var s,o;e.original&&e.original.get("id")>0&&(s=e,o=this._fakeActions(e.original),1===e.get("type")&&(e=e.original));var r=this.getAction(e),a={"nodes":new n([e]),"shortcut":s};return o&&this._resetFakedActions(e),r&&i.prototype.executeAction.call(this,r,a,t)},"getAction":function(e){var t,i,s=e.get("type");1===s&&e.original&&e.original.isFetchable()&&(t=e,e=e.original,i=this._fakeActions(e));var r={"nodes":new n([e]),"shortcut":t},a=!1,l=this.actionItems.find(function(t){if(t.enabled(e)){var i=this.commands.findWhere({"signature":t.get("signature")});try{a=i&&i.enabled(r)}catch(e){o.warn('Evaluating the command "{0}" failed.\n{1}',i.get("signature"),e.message)&&console.warn(o.last)}return!0}},this);return i&&this._resetFakedActions(e),a&&l},"hasAction":function(e){return!!this.getAction(e)},"_fakeActions":function(e){if(!e.actions.length){var i=t.map(this.actionItems.getAllCommandSignatures(this.commands),function(e){return{"signature":e}});return e.actions.reset(i,{"silent":!0}),!0}},"_resetFakedActions":function(e){e.actions.reset([],{"silent":!0})}});return r.version="1.0",r}),csui.define("csui/behaviors/default.action/default.action.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/url","csui/utils/log","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/search.formquery.factory","csui/behaviors/default.action/impl/defaultaction","csui/utils/node.links/node.links"],function(e,t,i,n,s,o,r,a,l,c,u,d){"use strict";return r=r(e.id),s.Behavior.extend({"constructor":function(e,t){s.Behavior.prototype.constructor.apply(this,arguments);var i=t.options.context;this.view=t,this._nextNode=i&&i.getModel(a),this._searchQuery=i&&i.getModel(l),this._searchForm=i&&i.getModel(c),t.defaultActionController=this.options.defaultActionController||new u},"onExecuteDefaultAction":function(e){e instanceof n.View&&(e=e.model),this.view.defaultActionController.getAction(e)?this.view.defaultActionController.executeAction(e,{"context":this.view.options.context,"originatingView":this.view}):r.can("WARN")&&r.warn("No default action was enabled for {0}.",JSON.stringify(t.pick(e.attributes,"name","id","type")))&&console.warn(r.last)}},{"getDefaultActionNodeUrl":function(e){var t=d.getUrl(e),i=t.lastIndexOf("#");return i>=0?t.substr(i):t}})}),csui.define("csui/behaviors/dropdown.menu/dropdown.menu.behavior",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/base"],function(e,t,i,n){"use strict";return i.Behavior.extend({"ui":{"dropdownMenu":".binf-dropdown"},"events":{"show.binf.dropdown":"onShowDropdownRefilterMenuItems","keydown":"onKeyInMenuView","keyup":"onKeyUpMenuView"},"constructor":function(e,n){e=t.defaults(e,{"refilterOnShow":!0}),i.Behavior.prototype.constructor.apply(this,arguments),this.view=n,this.view.dropdownMenuBehavior=this,this.listenTo(this,"refresh:dropdown",this.onDomRefresh)},"onRender":function(){this.onDomRefresh()},"onDomRefresh":function(){this.$dropdown=this.$el,this.options.dropdownSelector&&(this.$dropdown=this.$el.find(this.options.dropdownSelector)),this.$dropdownToggle=this.$dropdown.find(".binf-dropdown-toggle")},"onShowDropdownRefilterMenuItems":function(){this.options.refilterOnShow&&this.view.options.collection.refilter&&this.view.options.collection.refilter()},"onKeyUpMenuView":function(e){n.isFirefox()&&32===e.keyCode&&(e.preventDefault(),e.stopPropagation()),27===e.keyCode&&this._closeMenu(e)},"onKeyInMenuView":function(t){switch(t.keyCode){case 9:this._closeMenu();break;case 13:t.stopPropagation(),n.isFirefox()||(t.preventDefault(),e(t.target).trigger("click"));break;case 32:t.preventDefault(),t.stopPropagation(),e(t.target).trigger("click");break;case 27:(this.$dropdown.hasClass("binf-open")||this.ui.dropdownMenu.hasClass("binf-open"))&&(t.preventDefault(),t.stopPropagation())}},"_closeMenu":function(e){(this.$dropdown.hasClass("binf-open")||this.ui.dropdownMenu.hasClass("binf-open"))&&(e&&e.preventDefault(),e&&e.stopPropagation(),this.$dropdownToggle.binf_dropdown("toggle"),this.$dropdownToggle.trigger("focus"))}})}),csui.define("csui/behaviors/keyboard.navigation/retainfocus.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette"],function(e,t,i,n,s){"use strict";return s.Behavior.extend({"ui":{"control":".csui-control"},"events":{"mousedown @ui.control":"_startActive","focusout @ui.control":"_stopActive","keydown @ui.control":"_stopActive"},"constructor":function(e,t){s.Behavior.prototype.constructor.apply(this,arguments),this._isFocused=!1,this.listenTo(t,"before:render",function(){if(this._isRendering=!0,t.isRendered){var e=this.ui.control[0];this._isFocused=document.activeElement===e}}),this.listenTo(t,"render",function(){this._isRendering=!1}),this.listenTo(t,"dom:refresh",function(){this._reApplyFocus()})},"_reApplyFocus":function(){this._isActive?this.ui.control.addClass("csui-control-active"):this.ui.control.removeClass("csui-control-active"),this._isFocused&&this.ui.control.trigger("focus")},"_startActive":function(){this._isActive=!0,this.ui.control.addClass("csui-control-active")},"_stopActive":function(){this._isRendering||(this.ui.control.removeClass("csui-control-active"),this._isActive=!1)}},{})}),csui.define("csui/controls/error/error.view",["nuc/utils/log","smart/controls/error/error.view"],function(e,t){"use strict";return e.warn("Use error view from smart controls instead of depending on csui error view"),t}),csui.define("csui/widgets/error/error.view",["csui/lib/underscore","csui/lib/backbone","csui/controls/error/error.view"],function(e,t,i){"use strict";return i.extend({"className":function(){var t=i.prototype.className;return e.isFunction(t)&&(t=t.call(this)),"csui-error-widget "+t},"constructor":function(e){e||(e={}),e.data||(e.data={}),e.model||(e.model=new t.Model({"message":e.data.message,"suggestion":e.data.suggestion})),i.prototype.constructor.call(this,e)}})}),csui.define("csui/behaviors/widget.container/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/behaviors/widget.container/impl/nls/root/lang",{"loadingWidgetFailedMessage":'"{0}" failed to load.',"loadingWidgetFailedSuggestion":"Please try again later or contact support."}),csui.define("csui/behaviors/widget.container/widget.container.behavior",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/widgets/error/error.view","csui/utils/log","i18n!csui/behaviors/widget.container/impl/nls/lang","csui/lib/jquery.when.all"],function(e,t,i,n,s,o,r){"use strict";var a=n.Behavior.extend({"constructor":function(e,t){n.Behavior.prototype.constructor.apply(this,arguments),this.view=t,this.view.widgetsResolved=this._resolveWidgets()},"_resolveWidgets":function(){var e=[];if(!this.view.enumerateWidgets)throw new n.Error({"name":"UndefinedEnumerateWidgets","message":"Undefined enumerateWidgets method"});return this.view.enumerateWidgets(t.bind(function(t){e.push(i.when(t).then(a.resolveWidget))},this)),i.whenAll.apply(i,e)}},{"getErrorWidget":function(e,i){return{"type":"csui/widgets/error","options":{"message":t.str.sformat(r.loadingWidgetFailedMessage,e.type),"suggestion":r.loadingWidgetFailedSuggestion,"originalWidget":t.extend({},e)},"view":s,"error":i}},"resolveWidget":function(e){if(!e.view){return a._loadWidget(e.type).then(function(t){return e.view=t,e.class=t,e},function(i){o.warn('Loading widget "{0}" failed. {1}',e.type,i)&&console.warn(o.last),o.warn("Occurred "+o.getStackTrace())&&console.warn(o.last),t.extend(e,a.getErrorWidget(e,i))})}return i.Deferred().resolve().promise()},"_loadWidget":function(t){var n,s=i.Deferred(),o=t.lastIndexOf("/");return o<0?n="csui/widgets/"+t:(n=t,t=t.substring(o+1)),e([n+"/"+t+".view"],function(e){s.resolve(e)},function(e){s.reject(e)}),s.promise()}});return a}),csui.define("csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",["csui/lib/underscore","csui/lib/marionette"],function(e,t){"use strict";return{"propagateEventsToViews":function(){var t=Array.prototype.slice.call(arguments);e.each(this._eventsToPropagateToViews,e.bind(this._propagateEventToViews,this,t))},"cancelEventsToViewsPropagation":function(){var t=Array.prototype.slice.call(arguments);e.each(this._eventsToPropagateToViews,e.bind(this._cancelEventToViewsPropagation,this,t))},"_propagateEventToViews":function(i,n){e.each(i,function(e){var i=e;e.listenTo(this,n,function(){if((i._isShown||i._isAttached)&&i._isRendered&&t.isNodeAttached(i.el)){var e=Array.prototype.slice.call(arguments);e.unshift(i,n),t.triggerMethodOn.apply(t,e)}},this)},this)},"_cancelEventToViewsPropagation":function(t,i){e.each(t,function(e){e.stopListening(this,i,void 0,this)},this)},"_eventsToPropagateToViews":["dom:refresh"]}}),csui.define("csui/controls/grid/grid.view",["require","module","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/utils/log"],function(e,t,i,n,s,o,r){r=r(t.id);var a=s.ItemView.extend({"className":function(){var e=[];return this.model.get("className")&&e.push(this.model.get("className")),this._addSizeClasses(e),this._addOffsetClasses(e),this._addPullClasses(e),this._addPushClasses(e),this._addHeightClasses(e),i.unique(e).join(" ")},"attributes":function(){var e;if(void 0!==this.model.get("widget")){var t=this.model.get("widget").type,i=t.lastIndexOf("/");i>0&&(t=t.substring(i+1)),e={"data-csui-widget_type":t,"data-csui-cell_address":this.model.get("widget").cellAddress}}else e={};return e},"constructor":function(e){e.cellBehaviours&&(this.behaviors=i.extend(e.cellBehaviours,this.behaviors)),this._init(e)},"_init":function(e){s.ItemView.prototype.constructor.call(this,i.extend({"template":!1},e)),this.collection?this._createRows():(this._registerModelEvents(),this._createCell()),this.propagateEventsToViews(this.cell||this.rows)},"_registerModelEvents":function(){this.listenTo(this.model,"change:widget",this._updateWidget),this.listenTo(this.model,"change:sizes",this._updateSizes),this.listenTo(this.model,"change:heights",this._updateSizes)},"_updateSizes":function(){var e=i.result(this,"className");this.$el.attr("class",e)},"_updateWidget":function(e){e.cellAddress=this.model.get("widget").cellAddress,this._createCell();var t=i.result(this,"attributes");this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className")),this.$el.attr(t),this.render()},"onRender":function(){try{this._renderContent()}catch(t){r.warn("Widget render failed.\n{0}",t.message)&&console.warn(r.last);var e=this.options.grid.getOption("cellConstructionFailed");i.isFunction(e)&&e.call(this.options.grid,this.model,t)}},"onBeforeDestroy":function(){this._destroyContent()},"_addSizeClasses":function(e){var t=this.model.get("sizes");t&&(null!=t.xs&&e.push("binf-col-xs-"+t.xs),null!=t.sm&&e.push("binf-col-sm-"+t.sm),null!=t.md&&e.push("binf-col-md-"+t.md),null!=t.lg&&e.push("binf-col-lg-"+t.lg),null!=t.xl&&e.push("binf-col-xl-"+t.xl),null!=t.xxl&&e.push("binf-col-xxl-"+t.xxl))},"_addOffsetClasses":function(e){var t=this.model.get("offsets");t&&(null!=t.xs&&e.push("binf-col-xs-offset-"+t.xs),null!=t.sm&&e.push("binf-col-sm-offset-"+t.sm),null!=t.md&&e.push("binf-col-md-offset-"+t.md),null!=t.lg&&e.push("binf-col-lg-offset-"+t.lg),null!=t.xl&&e.push("binf-col-xl-offset-"+t.xl),null!=t.xxl&&e.push("binf-col-xxl-offset-"+t.xxl))},"_addPullClasses":function(e){var t=this.model.get("pulls");t&&(null!=t.xs&&e.push("binf-col-xs-pull-"+t.xs),null!=t.sm&&e.push("binf-col-sm-pull-"+t.sm),null!=t.md&&e.push("binf-col-md-pull-"+t.md),null!=t.lg&&e.push("binf-col-lg-pull-"+t.lg),null!=t.xl&&e.push("binf-col-xl-pull-"+t.xl),null!=t.xxl&&e.push("binf-col-xxl-pull-"+t.xxl))},"_addPushClasses":function(e){var t=this.model.get("pushes");t&&(null!=t.xs&&e.push("binf-col-xs-push-"+t.xs),null!=t.sm&&e.push("binf-col-sm-push-"+t.sm),null!=t.md&&e.push("binf-col-md-push-"+t.md),null!=t.lg&&e.push("binf-col-lg-push-"+t.lg),null!=t.xl&&e.push("binf-col-xl-push-"+t.xl),null!=t.xxl&&e.push("binf-col-xxl-push-"+t.xxl))},"_addHeightClasses":function(e){var t=this.model.get("heights");t&&(null!=t.xs&&e.push("row-xs-"+t.xs),null!=t.sm&&e.push("row-sm-"+t.sm),null!=t.md&&e.push("row-md-"+t.md),null!=t.lg&&e.push("row-lg-"+t.lg),null!=t.xl&&e.push("row-xl-"+t.xl),null!=t.xxl&&e.push("row-xxl-"+t.xxl))},"_createRows":function(){this.rows=new c({"el":this.el,"grid":this.options.grid,"collection":this.collection})},"_createCell":function(){var e=this._getCellView(),t=this._getCellViewOptions(),n=i.extend({"model":this.model},t);this.cell&&this.cell.destroy();try{this.cell=new e(n)}catch(e){r.warn("Widget initialization failed.\n{0}",e.message)&&console.warn(r.last);var s=this.options.grid.getOption("cellConstructionFailed");i.isFunction(s)&&s.call(this.options.grid,this.model,e)}},"_getCellView":function(){var e=this.options.grid.getOption("cellView");if(!e||e.prototype instanceof n.View||(e=e.call(this.options.grid,this.model)),!e)throw new s.Error({"name":"NoCellViewError","message":'A "cellView" must be specified'});return e},"_getCellViewOptions":function(){var e=this.options.grid.getOption("cellViewOptions");return i.isFunction(e)&&(e=e.call(this.options.grid,this.model,this)),e},"_renderContent":function(){if(this.cell){new s.Region({"el":this.el}).show(this.cell)}else this.options.grid.$el.hasClass("grid-rows")&&this.$el.addClass("grid-rows"),this.rows.render()},"_destroyContent":function(){this.cell&&this.cell.destroy(),this.rows&&this.rows.destroy()}});i.extend(a.prototype,o);var l=s.CollectionView.extend({"className":"binf-row","childView":a,"childViewOptions":function(e){return{"grid":this.options.grid,"collection":e.rows,"cellBehaviours":this.options.cellBehaviours,"rowBehaviours":this.options.rowBehaviours}},"constructor":function(e){e.rowBehaviours&&(this.behaviors=i.extend(e.rowBehaviours,this.behaviors)),s.CollectionView.prototype.constructor.apply(this,arguments),this.listenTo(this,"add:child",this.propagateEventsToViews)}});i.extend(l.prototype,o);var c=s.CollectionView.extend({"childView":l,"childViewOptions":function(e){return{"grid":this.options.grid,"collection":e.columns,"cellBehaviours":this.options.cellBehaviours,"rowBehaviours":this.options.rowBehaviours,"reorderOnSort":this.options.reorderOnSort}},"constructor":function(){s.CollectionView.prototype.constructor.apply(this,arguments),this.listenTo(this,"add:child",this.propagateEventsToViews)}});i.extend(c.prototype,o);var u=l.extend({"childView":a,"childViewOptions":function(e){return{"grid":this.options.grid,"cellBehaviours":this.options.cellBehaviours,"rowBehaviours":this.options.rowBehaviours}},"constructor":function(e){e||(e={}),e.grid=this,e.collection||(e.collection=this._convertCollection(e)),l.prototype.constructor.call(this,e)},"_convertCollection":function(e){return new n.Collection(e.columns)}});return c.extend({"className":"cs-grid binf-container-fluid","constructor":function(e){e||(e={}),e.grid=this,e.collection||(e.collection=this._convertCollection(e)),c.prototype.constructor.call(this,e)},"_convertCollection":function(e){return this._convertRows(e.rows,"grid0")},"_convertRows":function(e,t){return e=new n.Collection(e),e.each(function(e,i){var n=e.get("columns");e.cellAddress=t+":r"+i,e.columns=this._convertColumns(n,e.cellAddress)},this),e},"_convertColumns":function(e,t){return e=new n.Collection(e),e.each(function(e,i){var n=e.get("rows");e.cellAddress=t+":c"+i,void 0!==e.get("widget")&&(e.get("widget").cellAddress=e.cellAddress),n&&(e.rows=this._convertRows(n,e.cellAddress))},this),e}},{"RowView":u,"CellView":a})}),csui.define("csui/controls/doc.preview/active.plugin",["csui/lib/jquery","csui/lib/underscore","require"],function(e,t,i){"use strict";return{"getActivePluginView":function(n){var s,o=e.Deferred(),r=n.model,a=n.context;return r&&a?csui.require(["csui/utils/commands/preview.plugins/preview.plugins"],function(e){var l=e.findByNode(r,{"context":a}),c=l&&l.widgetView?l.widgetView:"";c?("function"==typeof c&&(c=c.call(l,r,{"context":a})),i([c],t.bind(function(e){var i=l.widgetViewOptions;"function"==typeof i&&(i=i.call(l,r,{"context":a})),s=new e(t.extend(n,i)),o.resolve({"viewer":s,"plugin":l,"response":{"status":"SUCCESS"}})},this))):o.reject({"viewer":void 0,"response":{"status":"ERROR","errorCode":"ERR_UN_SUPPORTED","errorMessage":"Neither supported plugin nor supported document exists!"}})}):o.reject({"viewer":void 0,"response":{"status":"ERROR","errorCode":"ERR_MISSING_REQ_DATA","errorMessage":"Either model or context is missing!"}}),o.promise()}}}),csui.define("css!csui/controls/doc.preview/impl/doc.preview",[],function(){}),csui.define("csui/controls/doc.preview/doc.preview.view",["csui/lib/jquery","require","csui/lib/underscore","csui/lib/marionette","csui/lib/backbone","csui/utils/contexts/factories/next.node","csui/controls/doc.preview/active.plugin","nuc/models/node/node.model","css!csui/controls/doc.preview/impl/doc.preview"],function(e,t,i,n,s,o,r,a){"use strict";var l={"status":"","errorCode":"","errorMessage":""};return n.ItemView.extend({"className":"csui-doc-preview-wrapper","template":!1,"constructor":function(e){e||(e={});var t={"skipDestroyUponCollectionRequest":!1};e=i.defaults(e,t),n.ItemView.apply(this,arguments),this.model=this._getNodeModel(this.model),this.listenTo(this,"open:new:doc:preview",i.bind(function(e,t){this.plugin&&this.plugin.constructor.isSupported(e)?(t&&(this.options.originatingView=t),this.options.originatingView&&this._setSelectedNodes(),this.model=this._getNodeModel(e),this.selectedNodes.length<2?this.viewerView.trigger("update:model",this.model):this.viewerView.trigger("update:collection",this.selectedNodes),
this.options.originatingView.trigger("doc:preview:generic:actions",this.model,"csui-doc-preview-state")):this.trigger("error:doc:preview",i.defaults({"status":"ERROR","errorCode":"ERR_UN_SUPPORTED","errorMessage":"Neither supported plugin nor supported document exists!"},l))},this)),this.listenToOnce(this.options.context.getModel(o),"change:id",this._doCleanUp),this.listenToOnce(this.options.context,"change:perspective retain:perspective",this._doCleanUp),this.listenToOnce(this,"before:destroy",this._doCleanUp),this.options.originatingView&&(this._setSelectedNodes(),this.options.originatingView.collection&&this.listenToOnce(this.options.originatingView.collection,"request",i.bind(function(){this.options.skipDestroyUponCollectionRequest||this._doCleanUp()},this)),this.options.originatingView.commandController&&this.listenToOnce(this.options.originatingView.commandController,"before:execute:command",i.bind(function(e){"DocPreview"!==e.commandSignature&&this._doCleanUp()},this))),this._renderViewerView(),this.listenTo(this,"panel:expand",this._expandPanel),this.listenTo(this,"panel:collapse",this._collapsePanel)},"_getNodeModel":function(e){return new a(e.attributes,{"connector":e.connector})},"_setSelectedNodes":function(){this.selectedNodes=i.isFunction(this.options.originatingView.allSelectedNodes)?this.options.originatingView.allSelectedNodes():this.options.originatingView.collection&&this.options.originatingView.collection.selectedItems||new s.Collection},"layoutState":{},"_expandPanel":function(){this.viewerView&&this.viewerView.trigger("expand:view")},"_collapsePanel":function(){this.viewerView&&this.viewerView.trigger("collapse:view")},"_renderViewerView":function(){this.options.originatingView.trigger("doc:preview:generic:actions",this.model,"csui-doc-preview-state");var t={"model":this.model,"context":this.options.context,"selectedNodes":this.selectedNodes};r.getActivePluginView(t).then(i.bind(function(t){if(this.viewerView=t.viewer,this.plugin=t.plugin,new n.Region({"el":this.$el}).show(this.viewerView),e(".binf-widgets.csui-sidepanel-open").addClass("csui-doc-preview"),this.listenTo(this.viewerView,"destroy",i.bind(function(){this.destroy()},this)),this.listenTo(this.viewerView,"highlight:row",i.bind(function(e){e&&this.trigger("highlight:row",e)},this)),this.options.resizableWrapperClass){var s=this.$el.closest(this.options.resizableWrapperClass);this.listenTo(this.viewerView,"expand:click",function(){s[0].style.width="100%"}),this.listenTo(this.viewerView,"collapse:click",function(){this.layoutState.width?s[0].style.width=this.layoutState.width+"px":s.removeAttr("style")})}},this)).fail(i.bind(function(e){this.trigger("error:doc:preview",i.defaults({"status":"ERROR","errorCode":"ERR_UN_SUPPORTED","errorMessage":"Neither supported plugin nor supported document exists!"},l))},this))},"_doCleanUp":function(t){this.viewerView&&this.viewerView.destroy(),e(".binf-widgets").removeClass("csui-doc-preview")}})}),csui.define("csui/utils/commands/open.plugins/impl/brava.plugin",["csui/lib/underscore","csui/lib/jquery","csui/models/version"],function(e,t,i){"use strict";function n(){}var s=window.csui.requirejs.s.contexts._.config.config["csui/utils/commands/open"]||{};return s=e.extend({"isBravaViewerAvailable":!1,"supportedBravaViewerMimeTypes":[],"bravaView":"brava/widgets/bravaviewer/bravaviewer.view","widgetView":"brava/widgets/bravaviewer/bravaviewer.view"},s),s.supportedBravaViewerMimeTypes=e.invoke(s.supportedBravaViewerMimeTypes,"toLowerCase"),n.prototype.widgetView=s.bravaView,n.prototype.getUrlQuery=function(e){var n={"func":"doc.ViewDoc","nodeid":e.get("id")};return e instanceof i&&(n.vernum=e.get("version_number")),t.Deferred().resolve(n).promise()},n.prototype.needsAuthentication=function(e){return!0},n.isSupported=function(e){var t="view:"+(e.get("mime_type")||"");return t&&s.isBravaViewerAvailable&&s.supportedBravaViewerMimeTypes.indexOf(t.toLowerCase())>=0},n}),csui.define("csui/controls/doc.preview/preview.plugins/preview.plugins",["csui/utils/commands/open.plugins/impl/brava.plugin"],function(e){"use strict";return[{"sequence":200,"plugin":e,"decides":e.isSupported}]}),csui.define("csui/controls/node-type.icon/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/node-type.icon/impl/nls/root/lang",{"shortcutTypeLabel":"Shortcut to {0}","nodeTypeUnknown":"Unknown"}),csui.define("hbs!csui/controls/node-type.icon/node-type.icon",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=(r(i,"xif")||t&&r(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.mainIconName||this.mainClassName",{"name":"xif","hash":{},"fn":e.program(2,s,0),"inverse":e.program(4,s,0),"loc":{"start":{"line":2,"column":2},"end":{"line":6,"column":10}}}))?o:""},"2":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <img src="'+e.escapeExpression((o=null!=(o=r(i,"dummySrc")||(null!=t?r(t,"dummySrc"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"dummySrc","hash":{},"loc":{"start":{"line":3,"column":14},"end":{"line":3,"column":26}}}):o))+'" class="csui-icon csui-node-type-image binf-hidden" alt="" aria-hidden="true">\r\n'},"4":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <img src="'+e.escapeExpression((o=null!=(o=r(i,"imageUrl")||(null!=t?r(t,"imageUrl"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"imageUrl","hash":{},"loc":{"start":{"line":5,"column":14},"end":{"line":5,"column":26}}}):o))+'" class="csui-icon csui-node-type-image" alt="" aria-hidden="true">\r\n'},"6":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  "+(null!=(o=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"colorTheme":null!=t?r(t,"colorTheme"):t,"size":null!=t?r(t,"size"):t,"iconName":null!=t?r(t,"mainIconName"):t},"loc":{"start":{"line":9,"column":2},"end":{"line":9,"column":70}}}))?o:"")+"\r\n"},"8":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=(r(i,"xif")||t&&r(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.mainClassName",{"name":"xif","hash":{},"fn":e.program(9,s,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":0},"end":{"line":12,"column":0}}}))?o:""},"9":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="csui-node-type-icon '+e.escapeExpression((o=null!=(o=r(i,"mainClassName")||(null!=t?r(t,"mainClassName"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"mainClassName","hash":{},"loc":{"start":{"line":11,"column":35},"end":{"line":11,"column":52}}}):o))+'"></span>\r\n'},"11":function(e,t,i,n,s,o,r){var a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"overlayIconNames"):t,{"name":"each","hash":{},"fn":e.program(12,s,0,o,r),"inverse":e.noop,"loc":{"start":{"line":14,"column":2},"end":{"line":16,"column":11}}}))?a:""},"12":function(e,t,i,n,s,o,r){var a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+(null!=(a=(l(i,"icon-v2")||t&&l(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"size":null!=r[1]?l(r[1],"size"):r[1],"iconName":t},"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":45}}}))?a:"")+"\r\n"},"14":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=r(i,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"overlayClassNames"):t,{"name":"each","hash":{},"fn":e.program(15,s,0),"inverse":e.noop,"loc":{"start":{"line":18,"column":2},"end":{"line":20,"column":11}}}))?o:""},"15":function(e,t,i,n,s){return'    <span class="'+e.escapeExpression(e.lambda(t,t))+'"></span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s,o,r){var a,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"imageUrl"):t,{"name":"if","hash":{},"fn":e.program(1,s,0,o,r),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":7,"column":7}}}))?a:"")+(null!=(a=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.mainIconName",{"name":"xif","hash":{},"fn":e.program(6,s,0,o,r),"inverse":e.program(8,s,0,o,r),"loc":{"start":{"line":8,"column":0},"end":{"line":12,"column":8}}}))?a:"")+(null!=(a=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"overlayIconNames"):t,{"name":"if","hash":{},"fn":e.program(11,s,0,o,r),"inverse":e.program(14,s,0,o,r),"loc":{"start":{"line":13,"column":0},"end":{"line":21,"column":7}}}))?a:"")},"useDepths":!0});return i.registerPartial("csui_controls_node-type.icon_node-type.icon",n),n}),csui.define("css!csui/controls/node-type.icon/impl/node-type.icon.view",[],function(){}),csui.define("csui/controls/node-type.icon/node-type.icon.view",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/backbone","csui/lib/marionette","csui/utils/nodesprites","csui/utils/url","i18n!csui/controls/node-type.icon/impl/nls/lang","hbs!csui/controls/node-type.icon/node-type.icon","csui/controls/icons.v2","css!csui/controls/node-type.icon/impl/node-type.icon.view","csui/lib/jquery.binary.ajax","csui/lib/handlebars.helpers.xif"],function(e,t,i,n,s,o,r,a,l,c,u){"use strict";function d(e,t,n){function s(t,i){return e.on("load",function(){t.resolve(i)}).on("error",function(){t.reject({"imgUrl":i.imgUrl})}).attr("src",i.objUrl||i.imgUrl),t.promise()}var o=i.Deferred();if(o.fail(function(e){if(e.imgUrl){var t=e.imgUrl.length>200?e.imgUrl.substring(0,200)+"...":e.imgUrl;p.error("error loading image: {0}",t)&&console.log(p.last)}}),t){if(0!==t.lastIndexOf("data:",0)&&n){var r,l=n.getConnectionUrl();if(new a(t).isAbsolute()?r=0===t.lastIndexOf(l.getCgiScript(),0):0===t.lastIndexOf("/",0)?t=a.combine(l.getOrigin(),t):(r=!0,t=a.combine(l.getCgiScript(),t)),r){var c={"url":t,"dataType":"binary","connection":n.connection};return n.makeAjaxCall(c).always(function(e,i,n){200===n.status?s(o,{"imgUrl":t,"objUrl":URL.createObjectURL(e)}):o.reject({"imgUrl":t})}),o.promise()}}return s(o,{"imgUrl":t})}return o.reject({"imgUrl":t}).promise()}var p=new n(e.id),h=e.config()||{},f=h.excludedShortcutTypes||[];t.isArray(f)||(f=Array.prototype.concat.apply([],t.values(f)));var m=s.Model.extend({"constructor":function e(i,n){n||(n={}),this.node=n.node,this.options=n,this._useIconwithColorSchema=!!n.colorTheme,i||(i={}),t.extend(i,this._getAttributes()),e.__super__.constructor.call(this,i,n),this.listenTo(this.node,"change:id",this._updateModelFromNode).listenTo(this.node,"change:type",this._updateModelFromNode).listenTo(this.node,"change:image_url",this._updateModelFromNode)},"_getAttributes":function(){var e,i=this.node,n=i.original,s=this.options.nodeSprite||r.findByNode(i)||{},o=s.get("className"),a=s.get("withColorSchemaIconName"),c=this._useIconwithColorSchema?a||s.get("iconName"):s.get("iconName"),u=o,d=c,p=!1!==this.options.displayThumbnailIcon,h=[],m=[];s.attributes&&(e=s.get("mimeType"));var g=e||i.get("type_name")||i.get("type");if(n&&n.get("id")&&-1===t.indexOf(f,i.get("type"))){var b=r.findByNode(n)||{};u=b.get("className"),a=b.get("withColorSchemaIconName"),d=this._useIconwithColorSchema?a||b.get("iconName"):b.get("iconName"),h.push("csui-icon csui-icon-shortcut-overlay"),this._useIconwithColorSchema?m.push("csui_colorschema_shortcut-overlay"):m.push("csui_shortcut-overlay"),g=t.str.sformat(l.shortcutTypeLabel,b.get("mimeType")||n.get("type_name")||l.nodeTypeUnknown)}var v={"imageUrl":p&&i.get(i.imageAttribute||"image_url"),"title":g};return t.extend(v,t.pick(this.options,"size")),this._useIconwithColorSchema?t.extend(v,t.pick(this.options,"colorTheme")):t.extend(v,t.pick(this.options,"filter")),!1===this.options.selectable&&m.push("csui_nonselectable-overlay"),c?(v.iconName=c,d?v.mainIconName=d:v.mainClassName=u,m.length>0?v.overlayIconNames=m:v.overlayClassNames=h):(v.className=o,v.mainClassName=u,v.overlayClassNames=h),v.dummySrc="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",v},"_updateModelFromNode":function(){this.clear({"silent":!0}),this.set(this._getAttributes())}});return o.ItemView.extend({"tagName":"span","attributes":function(){var e=this.model.get("title"),t="csui-icon-group",i=this.model.get("size");if(i){t+=" "+u.getClassForSize({"size":i})}return{"class":t,"title":e,"aria-label":e}},"template":c,"ui":{"imageElement":".csui-node-type-image","iconElement":".csui-node-type-icon"},"constructor":function e(n){n||(n={}),n.model||(this.ownModel=!0,n.model=new m(void 0,n)),e.__super__.constructor.call(this,n),n.el&&i(n.el).attr(t.result(this,"attributes")),this.listenTo(this.model,"change",this.render)},"attachElContent":function(){var e=o.ItemView.prototype.attachElContent.apply(this,arguments);return this.model.attributes.mainIconName&&this.$(".csui-icon-v2__"+this.model.attributes.mainIconName).addClass("csui-node-type-icon"),e},"onRender":function(){this._updateTitle(),this.ui.imageElement.length>0&&d(this.ui.imageElement,this.model.attributes.imageUrl,this.model.node.connector).done(function(e){this.ui.imageElement.removeClass("binf-hidden"),this.ui.iconElement.remove(),this.ui.iconElement=i(),e.objUrl&&(this.objUrl&&URL.revokeObjectURL(this.objUrl),this.objUrl=e.objUrl)}.bind(this)).fail(function(){this.ui.iconElement.length>0&&(this.ui.imageElement.remove(),this.ui.imageElement=i())}.bind(this))},"onDestroy":function(){this.ownModel&&this.model.stopListening(),this.objUrl&&URL.revokeObjectURL(this.objUrl)},"_updateTitle":function(){var e=this.model.get("title");this.$el.attr("title",e).attr("aria-label",e)}})}),csui.define("csui/controls/progressblocker/blocker",["module","csui/lib/underscore","smart/controls/progressblocker/blocker"],function(e,t,i){"use strict";var n=e.config();return t.defaults(n,{"delay":10,"disableDelay":10,"globalOnly":!1}),i.setModuleConfigs(n),i}),csui.define("csui/controls/perspective.panel/perspective.animator",["module","csui/lib/underscore","csui/lib/jquery"],function(e,t,i){"use strict";function n(e){this.perspectivePanelView=e}var s=t.extend({"effect":"none"},e.config()),o=s;return n.prototype={"startAnimation":function(e){if("slide"===o){this.perspectivePanelView.$el.redraw().addClass("csui-in-transition"),e.$el.addClass("cs-on-stage-right"),e.triggerMethod("before:show"),this.perspectivePanelView.$el.append(e.el)}else"fade"===o&&e.$el.addClass("csui-fading")},"swapPerspective":function(e,t){var n=i.Deferred();return"slide"===o?e.$el.addClass("cs-on-stage-left"):e.remove(),"fade"===o&&this.perspectivePanelView.$el.addClass("csui-in-transition"),this._insertPerspective(t),"slide"===o||"fade"===o?t.$el.one(this._transitionEnd(),n.resolve).redraw().removeClass("slide"===o?"cs-on-stage-right":"csui-faded-out"):n.resolve(),n.promise()},"showPerspective":function(e){var t=i.Deferred();return this._insertPerspective(e),"slide"===o||"fade"===o?e.$el.one(this._transitionEnd(),t.resolve).redraw().removeClass("slide"===o?"cs-on-stage-right":"csui-faded-out"):t.resolve(),t.promise()},"finishAnimation":function(){"slide"!==o&&"fade"!==o||this.perspectivePanelView.$el.removeClass("csui-in-transition")},"_insertPerspective":function(e){"fade"===o&&e.$el.addClass("csui-faded-out"),e.triggerMethod("before:show"),this.perspectivePanelView.$el.append(e.el),e.triggerMethod("show")},"_transitionEnd":t.once(function(){var e,t={"transition":"transitionend","WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend"},i=document.createElement("div");for(e in t)if(void 0!==i.style[e])return t[e]})},n}),csui.define("csui/controls/perspective.panel/perspective.factory",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone"],function(e,t,i,n){function s(e){this.options=e||{}}return t.extend(s.prototype,{"createPerspective":function(e){var i=this;return this._loadPerspective(e.get("type")).then(function(n){return new n(t.extend({"context":i.options.context,"type":e.get("type")},e.get("options")))})},"_loadPerspective":function(t){var n,s=i.Deferred(),o=t.lastIndexOf("/");return o<0?n="csui/perspectives/"+t:(n=t,t=t.substring(o+1)),e([n+"/"+t+".perspective.view"],function(e){s.resolve(e)},function(e){s.reject(e)}),s.promise()}}),s.extend=n.View.extend,s}),csui.define("csui/utils/contexts/factories/user",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/authenticated.user"],function(e,t,i,n,s,o,r){"use strict";var a=/\bprefetch(?:=([^&]*)?)/i.exec(location.search);a=!a||"false"!==a[1];var l;return s.extend({"propertyPrefix":"user","constructor":function(i,l){s.prototype.constructor.apply(this,arguments);var c=this.options.authentication||this.options.user||{},u=e.config();if(a&&(this.initialResponse=c.initialResponse||u.initialResponse),!(c instanceof n.Model)){var d=i.getObject(o,l);c=new r(c.attributes||u.attributes,t.defaults({"connector":d},c.options,u.options))}this.property=c},"fetch":function(e){var i;return this.initialResponse&&!l?(i=this.property.prefetch(this.initialResponse,e),l=!0):i=this.property.fetch(e),i.done(t.bind(function(){this.property.connector.authenticator.setUserId(this.property.get("id"))},this)),i}})}),csui.define("csui/utils/contexts/factories/application.scope.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,n){var s=i.Model.extend({});return n.extend({"propertyPrefix":"applicationScope","constructor":function(o,r){n.prototype.constructor.apply(this,arguments);var a=this.options.applicationScope||{};if(!(a instanceof i.Model)){var l=e.config();a=new s(a.models,t.extend({},a.options,l.options))}this.property=a}})}),csui.define("csui/utils/contexts/factories/node",["module","nuc/lib/jquery","nuc/lib/backbone","csui/utils/contexts/mixins/clone.and.fetch.mixin","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","nuc/models/node/node.model","csui/utils/commands"],function(e,t,i,n,s,o,r,a){"use strict";var l=s.extend({"propertyPrefix":"node","constructor":function(n,l){s.prototype.constructor.apply(this,arguments);var c=this.options.node||{},u=e.config();if(!(c instanceof i.Model)){var d=n.getObject(o,l),p=t.extend(!0,{"connector":d,"fields":{"properties":[],"versions.element(0)":["owner_id"]},"expand":{"properties":["original_id"]},"stateEnabled":!0,"commands":a.getAllSignatures()},u.options,c.options);c=new r(c.attributes||u.attributes,p)}this.property=c,this.makeCloneAndFetch(l)},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}});return n.mixin(l.prototype),l}),csui.define("csui/utils/contexts/factories/ancestors",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/nodeancestors"],function(e,t,i,n,s,o){"use strict";var r=/\bprefetch(?:=([^&]*)?)/i.exec(location.search);r=!r||"false"!==r[1];var a;return n.extend({"propertyPrefix":"ancestors","constructor":function(a,l){n.prototype.constructor.apply(this,arguments);var c=e.config(),u=this.options.ancestors||{};if(r&&(this.initialResponse=u.initialResponse||c.initialResponse),!(u instanceof i.Collection)){var d=a.getModel(s);u=new o(u.models,t.defaults({"autoreset":!0,"node":d},u.options,c.options))}this.property=u,this.listenTo(this.property.node,"change:name",function(){this.property.length>0&&this.property.last().set("name",d.get("name"))})},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){if(this.initialResponse&&!a){var t=this.property.prefetch(this.initialResponse,e);return a=!0,t}return this.property.fetch(e)}})}),csui.define("csui/controls/breadcrumbs/breadcrumbs.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","smart/controls/breadcrumbs/breadcrumbs.view","csui/utils/contexts/factories/next.node","csui/utils/node.links/node.links","csui/behaviors/keyboard.navigation/tabable.region.behavior"],function(e,t,i,n,s,o,r,a){return s.extend({"behaviors":{"TabableRegion":{"behaviorClass":a}},"constructor":function(t){s.prototype.constructor.call(this,t),this.listenTo(this,"before:synchronized",e.bind(this.updateCollection,this)),this.listenTo(this,"childview:click:ancestor",e.bind(this.onClickAncestor,this))},"onClickAncestor":function(t,i){var n=this.context=this.options.context;this._nextNode=this.options.node||n.getModel(o);var s={"node":i};if(this.trigger("before:defaultAction",s),!s.cancel){var r=i.get("id");this._nextNode.get("id")===r&&this._nextNode.unset("id",{"silent":!0});var a=this.context&&this.context.viewStateModel,l=a&&a.get("state");l&&this.context.viewStateModel.set("state",e.omit(l,"filter"),{"silent":!0}),this._nextNode.trigger("before:change:id",i,this),this._nextNode.set("id",r)}this.$el.trigger("setCurrentTabFocus")},"updateCollection":function(){this.completeCollection.forEach(function(e){var t=e.connector||e.collection.connector,i="";i=e.get("id")>0&&t&&r.getUrl(e,{"connector":t})||"#",e.set("hrefSrc",i,{"silent":!0})})}})}),csui.define("hbs!csui/controls/breadcrumbspanel/impl/breadcrumbspanel",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-row">\r\n  <div class="binf-item binf-col-xs-12">\r\n    <div class="breadcrumb-inner breadcrumb-inner-header" role="navigation"\r\n         aria-label="'+e.escapeExpression((o=null!=(o=r(i,"breadcrumbAria")||(null!=t?r(t,"breadcrumbAria"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"breadcrumbAria","hash":{},"loc":{"start":{"line":4,"column":21},"end":{"line":4,"column":39}}}):o))+'"></div>\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_breadcrumbspanel_impl_breadcrumbspanel",n),n}),csui.define("csui/controls/breadcrumbs/impl/breadcrumb/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/breadcrumbs/impl/breadcrumb/impl/nls/root/lang",{"subcrumbTooltip":"Show full path","subcrumbAria":"Show full path","breadcrumbAria":"Breadcrumb"}),csui.define("css!csui/controls/breadcrumbspanel/impl/breadcrumbspanel",[],function(){}),csui.define("csui/controls/breadcrumbspanel/breadcrumbspanel.view",["csui/lib/underscore","csui/lib/marionette","csui/utils/contexts/factories/ancestors","csui/utils/contexts/factories/application.scope.factory","csui/controls/breadcrumbs/breadcrumbs.view","hbs!csui/controls/breadcrumbspanel/impl/breadcrumbspanel","i18n!csui/controls/breadcrumbs/impl/breadcrumb/impl/nls/lang","csui-ext!csui/controls/breadcrumbspanel/breadcrumbspanel.view","css!csui/controls/breadcrumbspanel/impl/breadcrumbspanel"],function(e,t,i,n,s,o,r,a){"use strict";return t.LayoutView.extend({"attributes":{"id":"breadcrumb-wrap"},"className":"binf-container-fluid","template":o,"ui":{"tileBreadcrumb":".tile-breadcrumb","breadcrumbsWrap":"#breadcrumb-wrap"},"regions":{"breadcrumbsInner":".breadcrumb-inner"},"templateHelpers":function(){return{"breadcrumbAria":r.breadcrumbAria}},"constructor":function(e){t.LayoutView.apply(this,arguments),this.applicationScope=e.context.getModel(n),this.listenTo(this.applicationScope,"change:breadcrumbsVisible",this._showOrHideBreadcrumbs),this.ancestors=this.options.context.getCollection(i),this.listenTo(this,"dom:refresh",function(){this.breadcrumbs&&this.breadcrumbs.refresh()});var s=this.options.context.viewStateModel;s&&this.listenTo(s,"change:"+s.CONSTANTS.START_ID,this.updateStopIdFromViewState.bind(this)).listenTo(s,"change:"+s.CONSTANTS.BREADCRUMB,this._showOrHideBreadcrumbs.bind(this))},"onRender":function(){this._showOrHideBreadcrumbs()},"_showOrHideBreadcrumbs":function(){void 0!==this.ancestors.blockId&&this.$el.removeClass("csui-hide-breadcrumbs");var t=this.options.context,i=t&&t.viewStateModel,n=i&&i.get(i.CONSTANTS.BREADCRUMB),o={"context":t,"node":this.ancestors&&this.ancestors.node,"connector":this.ancestors&&this.ancestors.connector},r=this;e.filter(e.flatten(a,!0),function(t){var i=t.hideBreadcrumbs&&e.isFunction(t.hideBreadcrumbs)?t.hideBreadcrumbs(o):!!t.hideBreadcrumbs;if(i&&void 0===r.applicationScope.get("previousBreadcrumbVisibility")){r.$el.addClass("csui-hide-breadcrumbs");var n=r.applicationScope.get("breadcrumbsVisible");r.applicationScope.set("previousBreadcrumbVisibility",n,{"silent":!0})}return i}).length?(this.applicationScope.get("breadcrumbsVisible")&&this.applicationScope.set("breadcrumbsVisible",!1),this.applicationScope.set({"hiddenByExtension":!0,"hideToggleButton":!0})):(this.applicationScope.set({"hideToggleButton":!1,"hiddenByExtension":!1}),void 0!==this.applicationScope.get("previousBreadcrumbVisibility")&&(this.ancestors.blockId=this.ancestors.node.get("id"),this.$el.addClass("csui-hide-breadcrumbs"),this.applicationScope.set("breadcrumbsVisible",this.applicationScope.get("previousBreadcrumbVisibility")),this.applicationScope.set("previousBreadcrumbVisibility",void 0,{"silent":!0}))),this._breadcrumbsVisible=void 0!==n?n:this.applicationScope.get("breadcrumbsVisible"),this._breadcrumbsAvailable=this.ancestors.isFetchable(),this._breadcrumbsVisible&&this._breadcrumbsAvailable?this.breadcrumbs||(this.breadcrumbs=new s({"context":this.options.context,"collection":this.ancestors,"fetchOnCollectionUpdate":!1,"theme":"dark"}),this.$el.removeClass("binf-hidden"),this.breadcrumbsInner.show(this.breadcrumbs),this.breadcrumbs.synchronizeCollections(),this.$el.addClass("breadcrumb-wrap-visible"),this.triggerMethod("tabable",this),this.breadcrumbs.triggerMethod("refresh:tabindexes"),this.updateStopIdFromViewState()):this.breadcrumbs&&(this.$el.removeClass("breadcrumb-wrap-visible").addClass("binf-hidden"),this.breadcrumbsInner.empty(),delete this.breadcrumbs)},"updateStopIdFromViewState":function(){var e=this.options.context.viewStateModel;e&&e.get(e.CONSTANTS.START_ID)&&this.breadcrumbs&&this.breadcrumbs.updateStopId(e.get(e.CONSTANTS.START_ID))},"hideBreadcrumbs":function(){this.breadcrumbs&&this.breadcrumbs.hideSubCrumbs(),this.$el.removeClass("breadcrumb-wrap-visible"),this.triggerMethod("tabable:not",this),this.$el.hide()},"showBreadcrumbs":function(){this.$el.addClass("breadcrumb-wrap-visible"),this.triggerMethod("tabable",this),this.$el.show(),this.breadcrumbs&&this.breadcrumbs.triggerMethod("refresh:tabindexes")},"isTabable":function(){return!!this.breadcrumbs&&this.ancestors.size()>1}})}),csui.define("csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",["smart/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin"],function(e){"use strict";return e}),csui.define("hbs!csui/controls/perspective.panel/impl/perspective.with.breadcrumb",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){return'<div class="csui-perspective-breadcrumb"></div>\r\n<div class="csui-perspective-view"></div>'}});return i.registerPartial("csui_controls_perspective.panel_impl_perspective.with.breadcrumb",n),n}),csui.define("csui/controls/perspective.panel/impl/perspective.with.breadcrumb.view",["csui/lib/underscore","csui/lib/marionette","csui/utils/namedsessionstorage","csui/utils/contexts/factories/user","csui/utils/contexts/factories/application.scope.factory","csui/controls/breadcrumbspanel/breadcrumbspanel.view","csui/utils/contexts/factories/ancestors","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","hbs!csui/controls/perspective.panel/impl/perspective.with.breadcrumb"],function(e,t,i,n,s,o,r,a,l){"use strict";var c=t.LayoutView.extend({"className":"cs-perspective-with-breadcrumb-view","template":l,"regions":{"breadcrumbRegion":".csui-perspective-breadcrumb","perspectiveRegion":".csui-perspective-view"},"constructor":function(i){i||(i={}),this.perspectiveView=i.perspectiveView,t.LayoutView.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions(),this._supportMaximizeWidget=this.perspectiveView._supportMaximizeWidget,this._supportMaximizeWidgetOnDisplay=this.perspectiveView._supportMaximizeWidgetOnDisplay,e.isFunction(this.perspectiveView.serializePerspective)&&(this.serializePerspective=function(e){return this.perspectiveView.serializePerspective.apply(this.perspectiveView,arguments)}),e.isFunction(this.perspectiveView.swapLayout)&&(this.swapLayout=function(e){return this.perspectiveView.swapLayout.apply(this.perspectiveView,arguments)}),this.widgetsResolved=this.perspectiveView.widgetsResolved;var o,r=this.options.context.perspective.get("type");switch(r){case"left-center-right":case"sidepanel-right":case"sidepanel-left":o="cs_perspective_no_left_right_margin";break;default:o="cs_perspective_with_left_right_margin"}this.$el.addClass(o),this.user=this.options.context.getModel(n),this.listenTo(this.user,"change",this.updateUserPreferences),this.applicationScope=this.options.context.getModel(s),this.listenTo(this.applicationScope,"change:breadcrumbsVisible",this._showOrHideBreadcrumbs)},"onRender":function(){var e=this.options.context.getCollection(r),t=e.isFetchable();if(this.applicationScope.set("breadcrumbsAvailable",t),t){var i=new o({"context":this.options.context});this.breadcrumbRegion.show(i)}this.perspectiveRegion.show(this.perspectiveView)},"onDomRefresh":function(){var e=this.options.context,t=e&&e.viewStateModel;t&&void 0!==t.get(t.CONSTANTS.BREADCRUMB)||this.updateUserPreferences()},"updateUserPreferences":function(){var e=this.user.get("id");if(this.userPreferences=e?new i("userPreferences:"+e):void 0,this._isRendered&&this.userPreferences){var t=this.userPreferences.get("breadcrumbs-visible");void 0===t&&(t=!0),this._setBreadcrumbsVisibility(t)}else this._setBreadcrumbsVisibility(!1)},"_showOrHideBreadcrumbs":function(e,t){var i=this.applicationScope.get("breadcrumbsVisible");this._setBreadcrumbsVisibility(i)},"_setBreadcrumbsVisibility":function(e){var t=this.applicationScope.get("breadcrumbsAvailable");e&&t?(this.$el.addClass("csui-breadcrumbs-visible"),this.perspectiveView.$el.addClass("csui-breadcrumbs-visible")):(this.$el.removeClass("csui-breadcrumbs-visible"),this.perspectiveView.$el.removeClass("csui-breadcrumbs-visible")),this.userPreferences&&(this.userPreferences.set("breadcrumbs-visible",e),this.applicationScope.get("hiddenByExtension")&&void 0!==this.applicationScope.get("previousBreadcrumbVisibility")&&this.userPreferences.set("previousBreadcrumbVisibility",this.applicationScope.get("previousBreadcrumbVisibility")),this.applicationScope.get("hiddenByExtension")&&void 0===this.applicationScope.get("previousBreadcrumbVisibility")&&this.applicationScope.set("previousBreadcrumbVisibility",this.userPreferences.get("previousBreadcrumbVisibility"))),this.applicationScope.set("breadcrumbsVisible",e)}});return e.extend(c.prototype,a),c}),
csui.define("csui/controls/perspective.panel/perspective.with.breadcrumb.factory",["require","csui/lib/underscore","csui/lib/jquery","csui/controls/perspective.panel/perspective.factory","csui/controls/perspective.panel/impl/perspective.with.breadcrumb.view"],function(e,t,i,n,s){return n.extend({"constructor":function e(t){e.__super__.constructor.apply(this,arguments),this.options=t||{}},"createPerspective":function(e){var t=this;return n.prototype.createPerspective.call(this,e).then(function(e){return new s({"context":t.options.context,"perspectiveView":e,"supportMaximizeWidget":e._supportMaximizeWidget})})}})}),csui.define("css!csui/controls/perspective.panel/impl/perspective.panel",[],function(){}),csui.define("csui/controls/perspective.panel/perspective.panel.view",["require","module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/controls/perspective.panel/perspective.with.breadcrumb.factory","csui/controls/progressblocker/blocker","csui/utils/commandhelper","csui/controls/perspective.panel/perspective.animator","css!csui/controls/perspective.panel/impl/perspective.panel","csui/lib/jquery.redraw","csui/lib/jquery.scrollbarwidth"],function(e,t,i,n,s,o,r,a,l){"use strict";var c=n.defaults({},t.config(),{"progressWheel":!0,"waitForData":!0,"perspectiveShowDelay":0,"limitTimeToWaitForData":!0,"maximumTimeToWaitForData":1e3,"detachableBlockingView":!0});c.waitForData||(c.perspectiveShowDelay=0);var u=!1;return i(window).on("beforeunload."+t.id,function(e){u=!0}),s.ItemView.extend({"className":"cs-perspective-panel","template":!1,"constructor":function(){s.View.prototype.constructor.apply(this,arguments),n.defaults(this.options,{"progressWheel":c.progressWheel,"waitForData":c.waitForData,"perspectiveShowDelay":c.perspectiveShowDelay,"limitTimeToWaitForData":c.limitTimeToWaitForData,"maximumTimeToWaitForData":c.maximumTimeToWaitForData,"detachableBlockingView":c.detachableBlockingView});var e=this.options.context;if(this.perspectiveFactory=this.options.perspectiveFactory||new o({"context":e}),this.perspectiveAnimator=new l(this),r.imbue(this),this.blockingView.showloadingWheel=!0,this.blockingView.makeGlobal(this.options.detachableBlockingView),this.listenTo(e,"maximize:widget",this._addMaximizedWidget),this.listenTo(e,"restore:widget:size",this._removeMaximizedWidget),this.listenTo(e,"change:perspective",this.onChangePerspective),this.listenTo(e,"enter:edit:perspective",this.onEnterEditPerspective).listenTo(e,"exit:edit:perspective",this.onExitEditPerspective).listenTo(e,"serialize:perspective",this.onSerializePerspective).listenTo(e,"swap:layout",function(e){this.currentPerspectiveView.swapLayout(e)}),this.options.progressWheel){var t;this.listenTo(e,"request:perspective",this._startPerspectiveLoading).listenTo(e,"error:perspective",this._finishPerspectiveLoading).listenTo(e,"request",function(){this.options.waitForData&&this._startPerspectiveLoading(),this.options.limitTimeToWaitForData&&(t=setTimeout(function(){t=void 0,this._finishPerspectiveLoading()}.bind(this),this.options.maximumTimeToWaitForData))}).listenTo(e,"sync error",function(){t&&(clearTimeout(t),t=void 0),this._finishPerspectiveLoading()})}this.listenTo(this,"render",this.onRendered),this._maximizedWidgets={},this._currentPespectiveStack=[],this._currentPerspectiveSignature=void 0},"_startPerspectiveLoading":function(){this.trigger("before:start:perspective:loading"),this.actionsBlocked||(this.actionsBlocked=!0,this.blockActions())},"_finishPerspectiveLoading":function(){this.actionsBlocked&&(this.actionsBlocked=!1,this.unblockActions()),this.trigger("after:finish:perspective:loading")},"onEnterEditPerspective":function(e){this.blockActions(),this.isSwitchingEditMode=!0,this.doChangePerspective(e).always(function(){this.isSwitchingEditMode=!1,this.unblockActions(),this.options.context.trigger("finish:enter:edit:perspective")}.bind(this))},"onSerializePerspective":function(e){if(this.blockActions(),n.isFunction(this.currentPerspectiveView.serializePerspective)){var t=this;this.currentPerspectiveView.serializePerspective(e).done(function(e){t.options.context.trigger("save:perspective",e)}).fail(function(e){t.options.context.trigger("save:perspective",{"error":e}),t._showModalError({"message":e})}).always(function(){t.unblockActions()})}},"onExitEditPerspective":function(e){this.blockActions(),this.isSwitchingEditMode=!0,this.doChangePerspective(this.options.context.perspective).always(function(){this.isSwitchingEditMode=!1,this.unblockActions(),this.options.context.trigger("finish:exit:edit:perspective")}.bind(this))},"onRendered":function(){this.options.context.perspective.get("type")&&this.onChangePerspective()},"onChangePerspective":function(e,t){this.doChangePerspective(e,t)},"doChangePerspective":function(e,t){if(this._isRendered){var n=this.options.context,s=this,o=e||this.options.context.perspective,r=i.Deferred();return u=!1,this.options.progressWheel&&this.blockActions(),this.triggerMethod("before:create:perspective",this,{"perspective":o}),this.perspectiveFactory.createPerspective(o).done(function(e){s.triggerMethod("create:perspective",this,{"perspective":o,"perspectiveView":e}),s._currentPespectiveStack.push(e),e.widgetsResolved.always(function(i){if(s.triggerMethod("resolve:widgets",this,{"perspective":o,"perspectiveView":e}),n.clear(),u)r.resolve(e);else{var a=i.length>1;s._setSupportMaximizeWidget(e,o,a),s._swapPerspective(e,o,t).always(function(){r.resolve(e)})}s._currentPespectiveStack.splice(0,s._currentPespectiveStack.indexOf(e))}),s._currentPespectiveStack.splice(0,s._currentPespectiveStack.indexOf(e))}).fail(function(e){s.options.progressWheel&&s.unblockActions(),u||s._showError(e),r.reject(e)}),r.promise()}return i.Deferred().resolve().promise()},"_isInPerspectiveEditMode":function(e){return"edit"===(e&&e.get("options")?e.get("options"):{}).perspectiveMode},"_setSupportMaximizeWidget":function(e,t,n){this._isInPerspectiveEditMode(t)||!0!==e._supportMaximizeWidget||!n?i("body").removeClass("csui-support-maximize-widget"):i("body").addClass("csui-support-maximize-widget")},"_triggerDomRefreshOnCurrentPerspective":function(){this.currentPerspectiveView&&this.currentPerspectiveView.triggerMethod("dom:refresh")},"_setShowingMaximizedWidget":function(e){e?i("body").addClass("csui-maximized-widget-mode"):i("body").removeClass("csui-maximized-widget-mode")},"_addMaximizedWidget":function(e){if(!this._isInPerspectiveEditMode(this.currentPerspective)){if(void 0===this._maximizedWidgets[this._getCurrentPerspectiveSignature()]){var t={"perspectiveSignature":this._getCurrentPerspectiveSignature(),"cellAddress":this.getCellAddress(e)};this._maximizedWidgets[t.perspectiveSignature]=t,this._maximizeWidgetView(t.cellAddress)}this._triggerDomRefreshOnCurrentPerspective()}},"getCellAddress":function(e){return e.widgetView?e.widgetView.$el.parent().attr("data-csui-cell_address"):e.currentPerspectiveView.$el.find(".binf-row").children().attr("data-csui-cell_address")},"_removeMaximizedWidget":function(e){delete this._maximizedWidgets[this._getCurrentPerspectiveSignature()],this._restoreWidgetViewSize(e.widgetView)},"_getPerspectiveViewEl":function(){return this.currentPerspectiveView.$el.hasClass("csui-perspective-view")?this.currentPerspectiveView.$el:this.currentPerspectiveView.$el.find(".csui-perspective-view")},"_maximizeWidgetView":function(e){this._getPerspectiveViewEl().find(".binf-row > div").each(function(){i(this).attr("data-csui-mwv-old-class",i(this).attr("class")),i(this).attr("data-csui-cell_address")===e?(i(this).parent().addClass("csui-maximized-row"),i(this).attr("class","binf-col-xs-12 csui-maximized-column")):i(this).attr("class","binf-hidden-xs binf-hidden-sm binf-hidden-md binf-hidden-lg")}),this._setShowingMaximizedWidget(!0)},"_restoreWidgetViewSize":function(e){e.$el.parent().parent().removeClass("csui-maximized-row"),this._getPerspectiveViewEl().find(".binf-row > div").each(function(){i(this).attr("class",i(this).attr("data-csui-mwv-old-class"))}),this._setShowingMaximizedWidget(!1),this._triggerDomRefreshOnCurrentPerspective()},"_getCurrentPerspectiveSignature":function(){if(void 0===this._currentPerspectiveSignature){var e=[];!!this.currentPerspectiveView&&this.currentPerspectiveView.$el.find(".binf-row > div").each(function(){var t=i(this).attr("data-csui-cell_address"),n=i(this).attr("data-csui-widget_type"),s=i(this).attr("class");void 0===t&&(t=""),e.push([t,n,s].join(","))}),this._currentPerspectiveSignature=e.join("|")}return this._currentPerspectiveSignature},"_resetWidgetMaximization":function(){this._setShowingMaximizedWidget(!1),this._maximizedWidgets={}},"_swapPerspective":function(e,t,s){function o(){l&&clearTimeout(l),c||(c=!0,n.delay(function(){u||p._showPerspective(e,t,d)},p.options.perspectiveShowDelay))}function r(){p.options.context.fetch().fail(function(t){if(!u)if(window.csui&&window.csui.mobile){if(500===t.statusCode&&(-1===window.location.href.indexOf("#")||-1!==window.location.href.indexOf("#home")))return void o();0===t.statusCode?a.showOfflineMessage(t):(p._showModalError(t),p.options.context.trigger("reject:perspective",t)),e.destroy()}else o()}).done(o)}var l,c,d=i.Deferred(),p=this,h=window.location.href;return h=h.substr(h.indexOf("#")),this._resetWidgetMaximization(),setTimeout(function(){if(e.render(),this.options.progressWheel&&this.unblockActions(),this.options.waitForData)r(),this.options.limitTimeToWaitForData&&(l=setTimeout(o,this.options.maximumTimeToWaitForData));else{var t=this.currentPerspectiveView?"swap:perspective":"show:perspective";this.once(t,r),o()}}.bind(this)),d},"_showPerspectiveForEditMode":function(e,t){this.currentPerspectiveView.destroy(),this.currentPerspectiveView=e,this.currentPerspective=t,this._currentPerspectiveSignature=void 0,e.triggerMethod("before:show"),this.$el.append(e.el),e.triggerMethod("show")},"_showPerspective":function(e,t,n){function s(e){o.scrollTop(0),r.perspectiveAnimator.finishAnimation(),r.currentPerspectiveView=e,r.currentPerspectiveView.triggerMethod("dom:refresh"),r.currentPerspective=t,n.resolve(e)}var o=i(document.body),r=this,a=this._currentPespectiveStack.indexOf(e);if(-1!==a){if(this._currentPespectiveStack.splice(0,a),this.isSwitchingEditMode)return this._showPerspectiveForEditMode(e,t),void n.resolve(e);this.perspectiveAnimator.startAnimation(e),this.currentPerspectiveView?(this.triggerMethod("before:swap:perspective",this,{"oldPerspectiveView":this.currentPerspectiveView,"newPerspectiveView":e}),this.perspectiveAnimator.swapPerspective(this.currentPerspectiveView,e).done(function(){var t=r.currentPerspectiveView;r.currentPerspectiveView.destroy(),s(e),r.triggerMethod("swap:perspective",r,{"oldPerspectiveView":t,"newPerspectiveView":e})})):(this.triggerMethod("before:show:perspective",this,{"newPerspectiveView":e}),this.perspectiveAnimator.showPerspective(e).done(function(){s(e),r.triggerMethod("show:perspective",r,{"newPerspectiveView":e})}))}},"_showError":function(e){csui.require(["csui/controls/globalmessage/globalmessage"],function(t){t.showMessage("error",e.message)})},"_showModalError":function(e,t){csui.require(["csui/dialogs/modal.alert/modal.alert"],function(i){i.showError(e.message,t)})}})}),csui.define("hbs!csui/controls/breadcrumbs/impl/breadcrumb/impl/breadcrumb",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,s){var o,r,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <a href="'+e.escapeExpression((r=null!=(r=a(i,"url")||(null!=t?a(t,"url"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"url","hash":{},"loc":{"start":{"line":2,"column":11},"end":{"line":2,"column":18}}}):r))+'" class="binf-dropdown-toggle csui-subcrumb csui-acc-focusable" role="button"\r\n     data-binf-toggle="dropdown" aria-label="'+e.escapeExpression((r=null!=(r=a(i,"subcrumbAria")||(null!=t?a(t,"subcrumbAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"subcrumbAria","hash":{},"loc":{"start":{"line":3,"column":45},"end":{"line":3,"column":61}}}):r))+'" title="'+e.escapeExpression((r=null!=(r=a(i,"subcrumbTooltip")||(null!=t?a(t,"subcrumbTooltip"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"subcrumbTooltip","hash":{},"loc":{"start":{"line":3,"column":70},"end":{"line":3,"column":89}}}):r))+'">'+e.escapeExpression((r=null!=(r=a(i,"name")||(null!=t?a(t,"name"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":91},"end":{"line":3,"column":99}}}):r))+'</a>\r\n  <ul class="binf-dropdown-menu" role="menu">\r\n'+(null!=(o=a(i,"each").call(null!=t?t:e.nullContext||{},null!=t?a(t,"subcrumbs"):t,{"name":"each","hash":{},"fn":e.program(2,s,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":4},"end":{"line":12,"column":13}}}))?o:"")+"  </ul>\r\n"},"2":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"inactive"):t,{"name":"if","hash":{},"fn":e.program(3,s,0),"inverse":e.program(5,s,0),"loc":{"start":{"line":6,"column":6},"end":{"line":11,"column":13}}}))?o:""},"3":function(e,t,i,n,s){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li role="menuitem"><a data-id="'+e.escapeExpression(e.lambda(null!=t?o(t,"id"):t,t))+'" title="'+e.escapeExpression(e.lambda(null!=t?o(t,"name"):t,t))+'">'+e.escapeExpression(e.lambda(null!=t?o(t,"name"):t,t))+"</a>\r\n"},"5":function(e,t,i,n,s){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <li role="menuitem"><a class=\'csui-breadcrumb csui-acc-focusable\' href="'+e.escapeExpression(e.lambda(null!=t?o(t,"url"):t,t))+'"\r\n               data-id="'+e.escapeExpression(e.lambda(null!=t?o(t,"id"):t,t))+'" title="'+e.escapeExpression(e.lambda(null!=t?o(t,"name"):t,t))+'">'+e.escapeExpression(e.lambda(null!=t?o(t,"name"):t,t))+"</a>\r\n"},"7":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"inactive"):t,{"name":"if","hash":{},"fn":e.program(8,s,0),"inverse":e.program(10,s,0),"loc":{"start":{"line":15,"column":2},"end":{"line":20,"column":9}}}))?o:""},"8":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    "+e.escapeExpression((o=null!=(o=r(i,"name")||(null!=t?r(t,"name"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":12}}}):o))+"\r\n"},"10":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"    <a class='csui-breadcrumb csui-acc-focusable' href=\""+e.escapeExpression((o=null!=(o=r(i,"url")||(null!=t?r(t,"url"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"url","hash":{},"loc":{"start":{"line":18,"column":56},"end":{"line":18,"column":63}}}):o))+'" data-id="'+e.escapeExpression((o=null!=(o=r(i,"id")||(null!=t?r(t,"id"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":18,"column":74},"end":{"line":18,"column":80}}}):o))+'"\r\n       title="'+e.escapeExpression((o=null!=(o=r(i,"name")||(null!=t?r(t,"name"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":19,"column":14},"end":{"line":19,"column":22}}}):o))+'">'+e.escapeExpression((o=null!=(o=r(i,"name")||(null!=t?r(t,"name"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":19,"column":24},"end":{"line":19,"column":32}}}):o))+"</a>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"hasSubCrumbs"):t,{"name":"if","hash":{},"fn":e.program(1,s,0),"inverse":e.program(7,s,0),"loc":{"start":{"line":1,"column":0},"end":{"line":21,"column":7}}}))?o:""}});return i.registerPartial("csui_controls_breadcrumbs_impl_breadcrumb_impl_breadcrumb",n),n}),csui.define("csui/controls/breadcrumbs/breadcrumb.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/node.links/node.links","csui/utils/base","hbs!csui/controls/breadcrumbs/impl/breadcrumb/impl/breadcrumb","i18n!csui/controls/breadcrumbs/impl/breadcrumb/impl/nls/lang"],function(e,t,i,n,s,o,r){"use strict";return i.ItemView.extend({"tagName":"li","template":o,"modelEvents":{"change":"render"},"events":{"click a.csui-breadcrumb":"onClickLink"},"onClickLink":function(e){if(s.isControlClick(e));else{e.preventDefault(),e.stopPropagation();var i=this.model;if(i.get("subcrumbs").length>0){var n=t(e.target).data("id");i=this._getModel(n)}this.triggerMethod("click:ancestor",i)}},"className":function(){var e=this.model.get("subcrumbs");return this.options.isLastChild?"binf-active":e&&e.length>0?"binf-dropdown":"tail"},"getAncestorUrl":function(e){var t=e.connector||e.collection.connector;return e.get("id")>0&&t&&n.getUrl(e,{"connector":t})||"#"},"getDisplayName":function(){return this.model.attributes.displayName||this.model.attributes.name_formatted||this.model.attributes.name},"templateHelpers":function(){var t=this.options,i=e.map(this.model.get("subcrumbs"),e.bind(function(t){return e.extend(t.toJSON(),{"url":this.getAncestorUrl(t)})},this));return{"inactive":this.model.get("inactive")||t.isLastChild,"hasSubCrumbs":i.length>0,"subcrumbs":i,"name":this.getDisplayName(),"url":this.getAncestorUrl(this.model),"subcrumbTooltip":r.subcrumbTooltip,"subcrumbAria":r.subcrumbAria}},"onRender":function(){},"constructor":function(e){e||(e={}),i.ItemView.prototype.constructor.apply(this,arguments),this.model.has("subcrumbs")||this.model.set("subcrumbs",[],{"silent":!0})},"_getModel":function(e){for(var t=this.model.get("subcrumbs"),i=null,n=0;n<t.length;n++)if(t[n].get("id")===e){i=t[n];break}return i}})}),csui.define("csui/controls/breadcrumbs/impl/breadcrumb/breadcrumb.view",["csui/controls/breadcrumbs/breadcrumb.view"],function(e){"use strict";return e}),csui.define("csui/controls/form/pub.sub",["csui/lib/underscore","csui/lib/backbone"],function(e,t){"use strict";return e.extend({},t.Events)}),csui.define("csui/controls/mixins/keyboard.navigation/modal.keyboard.navigation.mixin",["csui/lib/underscore","csui/lib/jquery","csui/utils/base"],function(e,t,i){"use strict";return{"mixin":function(n){return e.extend(n,{"_rebuildFocusableElements":function(){this.focusableElements=i.findFocusables(this._focusHolder)},"refreshFocusEngage":function(){this._rebuildFocusableElements()},"_maintainTabFocus":function(e){this._focusHolder=e,this._rebuildFocusableElements();var t=this;return e.on("keydown",function(e){var i=t.focusableElements.index(e.target),n=t.focusableElements.length,s=!1;-1!==i&&(9===e.keyCode&&(e.shiftKey||i!==n-1?e.shiftKey&&0===i&&(t.focusableElements.last().trigger("focus"),s=!0):(t.focusableElements.first().trigger("focus"),s=!0)),s&&e.preventDefault(),e.stopPropagation())}),this.listenTo(this,"dom:refresh",function(){this.refreshFocusEngage()}),{"disengage":function(){e.off("keydown")}}},"engageModalKeyboardFocusOnOpen":function(e){this._allyHandles||(this._allyHandles=[]),e=t(e||this.el),this._allyHandles.push(this._maintainTabFocus(e))},"disengageModalKeyboardFocusOnClose":function(){if(this._allyHandles)for(;this._allyHandles.length>0;)this._allyHandles.pop().disengage()},"hasEngagedModalKeyboardFocus":function(){return this._allyHandles&&this._allyHandles.length}})}}}),csui.define("hbs!csui/controls/tab.panel/impl/tab.links",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<ul class="binf-nav '+e.escapeExpression((o=null!=(o=r(i,"tab_type")||(null!=t?r(t,"tab_type"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"tab_type","hash":{},"loc":{"start":{"line":1,"column":20},"end":{"line":1,"column":32}}}):o))+'" role="tablist"></ul>\r\n'}});return i.registerPartial("csui_controls_tab.panel_impl_tab.links",n),n}),csui.define("hbs!csui/controls/tab.panel/impl/tab.link",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#'+e.escapeExpression((o=null!=(o=r(i,"uniqueTabId")||(null!=t?r(t,"uniqueTabId"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"uniqueTabId","hash":{},"loc":{"start":{"line":1,"column":10},"end":{"line":1,"column":25}}}):o))+'" id="'+e.escapeExpression((o=null!=(o=r(i,"linkId")||(null!=t?r(t,"linkId"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"linkId","hash":{},"loc":{"start":{"line":1,"column":31},"end":{"line":1,"column":41}}}):o))+'" role="tab" aria-selected="'+e.escapeExpression((o=null!=(o=r(i,"selected")||(null!=t?r(t,"selected"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"selected","hash":{},"loc":{"start":{"line":1,"column":69},"end":{"line":1,"column":81}}}):o))+'" aria-controls="'+e.escapeExpression((o=null!=(o=r(i,"uniqueTabId")||(null!=t?r(t,"uniqueTabId"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"uniqueTabId","hash":{},"loc":{"start":{"line":1,"column":98},"end":{"line":1,"column":113}}}):o))+'" data-binf-toggle="tab">'+e.escapeExpression((r(i,"csui-l10n")||t&&r(t,"csui-l10n")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?r(t,"title"):t,{"name":"csui-l10n","hash":{},"loc":{"start":{"line":1,"column":138},"end":{"line":1,"column":157}}}))+"</a>\r\n"}});return i.registerPartial("csui_controls_tab.panel_impl_tab.link",n),n}),csui.define("csui/utils/handlebars/l10n",["csui/lib/handlebars","csui/utils/base"],function(e,t){return e.registerHelper("csui-l10n",function(e){return t.getClosestLocalizedString(e)}),e.helpers["csui-l10n"]}),csui.define("csui/controls/tab.panel/impl/tab.link.view",["module","csui/lib/underscore","csui/lib/marionette","csui/utils/log","hbs!csui/controls/tab.panel/impl/tab.link","csui/lib/binf/js/binf","csui/utils/handlebars/l10n"],function(e,t,i,n,s){"use strict";return n=n(e.id),i.ItemView.extend({"tagName":"li","className":function(){return this._isOptionActiveTab()?"binf-active":""},"attributes":function(){return{"data-csui-tab":this.model.get("name"),"role":"presentation"}},"template":s,"templateHelpers":function(){return{"linkId":"tablink-"+this.model.get("uniqueTabId"),"selected":this._isOptionActiveTab()}},"events":{"show.binf.tab > a":"onShowingTab","shown.binf.tab > a":"onShownTab"},"ui":{"link":">a"},"constructor":function(){i.ItemView.prototype.constructor.apply(this,arguments),this.clickActivatingSemaphore=this.options.clickActivatingSemaphore},"_isOptionActiveTab":function(){var e=!1,t=0;return this.options.activeTab&&void 0!==this.options.activeTab.get("tabIndex")&&(t=this.options.activeTab.get("tabIndex")),t=Math.max(0,t),this.model===this.model.collection.at(t)&&(e=!0),e},"activate":function(e){this.ui.link.binf_tab("show"),e&&this.ui.link.trigger("focus")},"isActive":function(){return this.$el.hasClass("binf-active")},"onShowingTab":function(e){if(this.clickActivatingSemaphore&&!this.clickActivatingSemaphore.enter())return void(n.debug("Ignoring start of a tab link activation (tab {0}, {1}).",this._index,this.cid)&&console.log(n.last));n.debug("Starting a tab link activation (tab {0}, {1}).",this._index,this.cid)&&console.log(n.last),this.triggerMethod("before:activate:tab",this)},"onShownTab":function(e){var t=this.model.collection.indexOf(this.model);if(this.clickActivatingSemaphore&&!this.clickActivatingSemaphore.exit())return void(n.debug("Ignoring finish of a tab link activation (tab {0}: {1}).",t,this.cid)&&console.log(n.last));var i=this.options.activeTab;n.can("DEBUG")&&n.debug("Finishing a tab link activation (tab {0}: {1}, previous {2}).",t,this.cid,i?i.get("tabIndex"):"unknown")&&console.log(n.last),i&&i.set("tabIndex",t),this.triggerMethod("activate:tab",this)}})}),csui.define("csui/controls/tab.panel/behaviors/common.keyboard.behavior.mixin",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log"],function(e,t,i,n){"use strict";return{"mixin":function(e){return t.extend(e,{"_findNextFocusableElementIndex":function(e,t){var n=e,s=this.keyboardBehavior.tabableElements.length;if(0===s)return-1;if(n<0||n>=s)return n;var o=i(this.keyboardBehavior.tabableElements[n]);for((o.hasClass("ps-scrollbar-y")||o.hasClass("ps-scrollbar-x"))&&(n-=1,o=i(this.keyboardBehavior.tabableElements[n]));!1===this.closestTabable(o);){if((n=!0===t?n-1:n+1)<0||n>=s){n=-1;break}o=i(this.keyboardBehavior.tabableElements[n])}return n},"_findNextValidFocusableElementIndex":function(e,t){return this._findNextFocusableElementIndex(e,t)},"_setFirstAndLastFocusable":function(e){var t,n=this.keyboardBehavior.tabableElements.length;0!==n&&(t=0,t=this._findNextValidFocusableElementIndex(t),t>=0&&t<n&&i(this.keyboardBehavior.tabableElements[t]).prop("tabindex","0"),t=this.keyboardBehavior.tabableElements.length-1,(t=this._findNextValidFocusableElementIndex(t,!0))>=0&&t<n&&i(this.keyboardBehavior.tabableElements[t]).prop("tabindex","0"))},"currentlyFocusedElement":function(e){return this.currentlyFocusedElementInternal(e)},"currentlyFocusedElementInternal":function(e){this._setFirstAndLastFocusable(e);var t=-1,n=this.keyboardBehavior.tabableElements.length;if(n>0){var s=e&&e.shiftKey;if(t=e.elementCursor||(s?n-1:0),this.options.tabPanel&&this.options.tabPanel.activatingTab){var o=this.currentTabPosition;o>=0&&o<n&&(t=o)}t=this._findNextValidFocusableElementIndex(t,s)}if(t>=0&&t<n){this.currentTabPosition=t;var r=i(this.keyboardBehavior.tabableElements[t]);return this._autoScrollUntilElemIsVisible&&this._autoScrollUntilElemIsVisible(r),r}},"_accSetFocusToPreviousOrNextElement":function(e){var t=-1,n=this.keyboardBehavior.tabableElements.length;if(n>0&&(this.currentTabPosition<0?t=0:(e?this.currentTabPosition>0&&(t=this.currentTabPosition-1):this.currentTabPosition<n-1&&(t=this.currentTabPosition+1),t=this._findNextValidFocusableElementIndex(t,e))),t>=0&&t!==this.currentTabPosition)return this.currentTabPosition=t,this.keyboardBehavior.refreshTabableElements(this),i(this.keyboardBehavior.tabableElements[t]);this.currentTabPosition=-1},"containTargetElement":function(e){var t=this.$el.find(e.target).length>0;if(t){var n,s;for(n=0;n<this.keyboardBehavior.tabableElements.length;n++){if(s=this.keyboardBehavior.tabableElements[n],i(s).parents(".alpaca-control").find(e.target).length>0&&(this.currentTabPosition=n),s.isSameNode&&s.isSameNode(e.target)){this.currentTabPosition=n;break}if(s===e.target){this.currentTabPosition=n;break}}}return t},"numberOfTabableElements":function(e){return this.keyboardBehavior.tabableElements.length},"closestTabable":function(e){var t,i=!0,n=e;for(t=0;t<10;t++){if(n&&("-1"===n.attr("data-cstabindex")||n.attr("disabled"))){i=!1;break}n=n.parent()}return i}})}}}),csui.define("csui/controls/tab.panel/behaviors/tab.links.keyboard.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette","csui/utils/base","csui/controls/tab.panel/behaviors/common.keyboard.behavior.mixin"],function(e,t,i,n,s,o,r){"use strict";return s.Behavior.extend({"constructor":function(e,n){s.Behavior.prototype.constructor.apply(this,arguments),n.keyboardBehavior=this,this.tabableElements=[];var o=this;this.listenTo(n,"refresh:tabable:elements",function(e){o.refreshTabableElements(n,e)}),r.mixin(n),t.extend(n,{"_setFirstAndLastFocusable":function(e){if(this.keyboardBehavior.tabableElements.length>0){var t=i(this.keyboardBehavior.tabableElements[0]).prop("tabindex","0"),n=this.keyboardBehavior.tabableElements.length-1;if(t.is("a")){for(t=i(this.keyboardBehavior.tabableElements[n]),t.prop("tabindex","0");!t.is("a")&&n>0;)n--,t=i(this.keyboardBehavior.tabableElements[n]);t.prop("tabindex","0")}}},"_autoScrollUntilElemIsVisible":function(e){var t=e;if(t&&t.hasClass("cs-delete-icon")&&(t=e.parent().parent().find(".cs-tablink")),t&&t.is("a")&&t.hasClass("cs-tablink")){var n=this.options&&this.options.tabPanel,s=t.attr("href");if("#"===s[0]&&(s=s.substr(1)),n&&!1===n._isTablinkVisibleInParents(t)){var o=n._findTabIndexByID?n._findTabIndexByID(s):-1;if(o>=0){var r=i.Deferred();n.skipAutoScroll=!0,t.csuiPromise=r.promise();var a={"animationOff":!0};n._autoScrollTabTo&&n._autoScrollTabTo(o,a).done(function(){n.skipAutoScroll=!1,r.resolve()})}}}},"onKeyInView":function(e){var t;if(0===this.keyboardBehavior.tabableElements.length)return t;this.keyboardBehavior.keyboardActionDeleteTabPosition=void 0;var n=this,s=function(e){var t=n.keyboardBehavior.tabableElements[n.currentTabPosition],s=t&&i(t);if(s&&s.is(":focus")){e.preventDefault(),e.stopPropagation();var o=n.options&&n.options.tabPanel;o&&(o.skipAutoScroll=!0),s.hasClass("cs-delete-icon")&&(n.keyboardBehavior.keyboardActionDeleteTabPosition=n.currentTabPosition-2),s.trigger("click"),void 0===n.keyboardBehavior.keyboardActionDeleteTabPosition&&setTimeout(function(){var e=s.attr("href"),t=i.Event("tab:content:focus",{"tabId":e});n.$el.trigger(t),o&&(o.skipAutoScroll=!1)},100)}};if(9===e.keyCode){var o=e.shiftKey,r=this._accSetFocusToPreviousOrNextElement(o);this._autoScrollUntilElemIsVisible(r),t=r}else if(32===e.keyCode||13===e.keyCode)s.call(this,e);else if(46===e.keyCode){var a=this.keyboardBehavior.tabableElements[this.currentTabPosition];if(a&&i(a).is(":focus")){e.preventDefault(),e.stopPropagation(),this.keyboardBehavior.keyboardActionDeleteTabPosition=this.currentTabPosition-1;var l=i(a).attr("href"),c=i.Event("tab:link:delete",{"tabId":l});this.$el.trigger(c)}}return t}})},"refreshTabableElements":function(e,t){this.tabableElements=e.$el.find("a[href], *[tabindex], *[data-cstabindex]");var n;for(n=this.tabableElements.length-1;n>=0;n--)"-1"===i(this.tabableElements[n]).attr("data-cstabindex")&&this.tabableElements.splice(n,1);if(this.view.currentTabPosition=-1,void 0!==this.keyboardActionDeleteTabPosition){var s=i(this.tabableElements[this.keyboardActionDeleteTabPosition]);s&&s.length>0&&(this.view.currentTabPosition=this.keyboardActionDeleteTabPosition,this.view._autoScrollUntilElemIsVisible(s),s.trigger("focus")),this.keyboardActionDeleteTabPosition=void 0}setTimeout(function(){e._setFirstAndLastFocusable&&e._setFirstAndLastFocusable()},50)}})}),csui.define("csui/controls/tab.panel/impl/tab.links.view",["csui/lib/underscore","csui/lib/marionette","csui/utils/base","hbs!csui/controls/tab.panel/impl/tab.links","csui/controls/tab.panel/impl/tab.link.view","csui/controls/tab.panel/behaviors/tab.links.keyboard.behavior","csui/lib/binf/js/binf"],function(e,t,i,n,s,o){"use strict";function r(e){return{"enter":function(){return 0==e._clickActivatingSemaphore++},"exit":function(){return 0==--e._clickActivatingSemaphore}}}return t.CompositeView.extend({"className":function(){var e="tab-links";return"spy"===this.options.mode&&(e+=" scrollspy"),e},"childViewOptions":function(t,i){return e.extend(this.options,{"index":i,"activeTab":this.options.activeTab,
"clickActivatingSemaphore":!1===this.options.overlappingTabActivation&&r(this)})},"template":n,"templateHelpers":function(){return{"tab_type":this.tabType}},"childView":s,"childViewContainer":function(){return">."+this.tabType},"behaviors":{"TabLinksKeyboardBehavior":{"behaviorClass":o}},"constructor":function(e){this.tabType=e.tabType||"binf-nav-tabs",t.CompositeView.prototype.constructor.apply(this,arguments),this.listenTo(this.options.activeTab,"change:tabIndex",this._updateActiveTab),this._clickActivatingSemaphore=0},"onChildviewActivateTab":function(e){this.children.each(function(e){var t=e.$el.find("a");void 0!==t.attr("aria-selected")&&t.attr("aria-selected","false")}),e.$el.find("a").attr("aria-selected","true")},"_updateActiveTab":function(){var e=this.options.activeTab.get("tabIndex"),t=this.children.findByIndex(e);t?e===t._index&&(t.isActive()||t.activate()):(e=0,this.children.find(function(t,i){if(t.isActive())return e=i,!0}),this.options.activeTab.set("tabIndex",e))},"_isTablinkVisibleInParents":function(e,t){var n=t&&t.levels||3,s=t&&t.percentX||100,o=t&&t.percentY||100;return i.isElementVisibleInParents(e,n,s,o)},"deleteTabById":function(e){}})}),csui.define("csui/controls/tab.panel/impl/tab.content.view",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/lib/binf/js/binf"],function(e,t,i,n,s){"use strict";var o=i.View.extend({"constructor":function(e){i.View.prototype.constructor.apply(this,arguments),this.contentRegion=new i.Region({"el":this.el}),!this.options.delayTabContent||"spy"===this.options.mode||this._isActive()?this._createContent(e):this.listenTo(this.options.tabPanel,"before:activate:tab",this._ensureContent)},"className":function(){var e="";return this.options.mode||(e="binf-tab-pane binf-fade",this._isActive()&&(e+=" binf-in binf-active")),e},"attributes":function(){var e=this.model.get("uniqueTabId");return e||n.warn("Missing unique tab ID in the TabPanel UI component. Please report.")&&console.warn(n.last),{"role":"tabpanel","id":e,"aria-labelledby":"tablink-"+e}},"render":function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderContent(),this.triggerMethod("render",this),this},"onBeforeDestroy":function(){this._destroyContent()},"_isActive":function(){var e=Math.max(0,this.options.activeTab.get("tabIndex"));return this.model===this.model.collection.at(e)},"ensureContent":function(){this.content||(i.triggerMethodOn(this,"before:populate:tab",this),this._createContent(this.options),this._isRendered&&this.render(),i.triggerMethodOn(this,"populate:tab",this))},"_ensureContent":function(e,t,i){t===this&&this.ensureContent()},"_createContent":function(t){var i=this._getContentView(),n=this._getContentViewOptions(),s=e.extend({"model":this.model,"containerCollection":t.containerCollection,"index":t.index},n);this.content=new i(s),this.propagateEventsToViews(this.content)},"_getContentView":function(){var e=this.model.get("contentView")||this.options.tabPanel.getOption("contentView");if(!e||e.prototype instanceof t.View||(e=e.call(this.options.tabPanel,this.model)),!e)throw new i.Error({"name":"NoContentViewError","message":'A "contentView" must be specified'});return e},"_getContentViewOptions":function(){var t=this.options.tabPanel.getOption("contentViewOptions");return e.isFunction(t)&&(t=t.call(this.options.tabPanel,this.model)),t},"_renderContent":function(){this.content&&this.contentRegion.show(this.content)},"_destroyContent":function(){this.content&&(this.cancelEventsToViewsPropagation(this.content),this.contentRegion.reset(),this.content=void 0)}});return e.extend(o.prototype,s),o}),csui.define("csui/controls/tab.panel/behaviors/tab.contents.keyboard.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette","csui/controls/tab.panel/behaviors/common.keyboard.behavior.mixin"],function(e,t,i,n,s,o){"use strict";return s.Behavior.extend({"constructor":function(e,n){s.Behavior.prototype.constructor.apply(this,arguments),n.keyboardBehavior=this,this.tabableElements=[];var r=this;this.listenTo(n,"refresh:tabable:elements",function(e){this.alreadyRefreshedTabableElements=!1,r.refreshTabableElements(n)}),this.listenTo(n,"render",function(){n.children&&n.children.each(function(e){e.content&&r.listenTo(e.content,"render",function(){this.alreadyRefreshedTabableElements=!1,r.refreshTabableElements(n)})}),n.$el.on("tab:content:field:changed",function(){this.alreadyRefreshedTabableElements=!1,this.keyboardAction?r.refreshTabableElementsAndSetFocus(n):r.refreshTabableElements(n),this.keyboardAction=!1})}),o.mixin(n),t.extend(n,{"onKeyInView":function(e){var t;if(!0!==this.keyboardBehavior.alreadyRefreshedTabableElements&&this.keyboardBehavior.refreshTabableElements(this),0===this.keyboardBehavior.tabableElements.length)return t;var n,s,o;if(s=this.keyboardBehavior.tabableElements.length,o=0,9===e.keyCode){for(;o<s&&(!(n=this.keyboardBehavior.tabableElements[o])||!i(n).is(e.target));)o++;o>=0&&o<s&&(this.currentTabPosition=o),t=this._accSetFocusToPreviousOrNextElement(e.shiftKey)}else if(32===e.keyCode||13===e.keyCode){var r=i(this.keyboardBehavior.tabableElements[this.currentTabPosition]);for(r&&r.is(":focus")&&!1===r.hasClass("binf-hidden")&&0===r.closest(".cs-field-write").length&&(e.preventDefault(),e.stopPropagation(),this.keyboardBehavior.keyboardAction=!0,r.trigger("click"));o<s&&(!(n=this.keyboardBehavior.tabableElements[o])||!i(n).is(e.target));)o++;var a=o>=0&&o<s;if(a&&(this.currentTabPosition=o),r=this._accSetFocusToPreviousOrNextElement(e.shiftKey),void 0!==r&&r.prop("tabindex","0"),e.activeTabContent&&e.activeTabContent.alpaca&&140===e.activeTabContent.alpaca.data.type&&a){var l=this.keyboardBehavior.tabableElements[o];l.click()}}return t}})},"onBeforeDestroy":function(){this.view.$el.off("tab:content:field:changed")},"refreshTabableElements":function(e){this.tabableElements=e.options.searchTabContentForTabableElements?e.$el.find(e.options.tabContentAccSelectors).filter(":visible"):[];var t;for(t=this.tabableElements.length-1;t>=0;t--)e.closestTabable&&!1===e.closestTabable(i(this.tabableElements[t]))&&this.tabableElements.splice(t,1);this.view.currentTabPosition=-1,this.alreadyRefreshedTabableElements=!0,setTimeout(function(){e._setFirstAndLastFocusable&&e._setFirstAndLastFocusable()},50)},"refreshTabableElementsAndSetFocus":function(e){var t=this.view.currentTabPosition;this.refreshTabableElements(e),i(this.tabableElements[t]).prop("tabindex","0"),i(this.tabableElements[t]).trigger("focus"),this.view.currentTabPosition=t},"updateCurrentTabPosition":function(){var e;for(e=0;e<this.tabableElements.length;e++)if(i(this.tabableElements[e]).is(":focus")){this.view.currentTabPosition=e;break}}})}),csui.define("csui/controls/tab.panel/behaviors/tab.contents.proxy.keyboard.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette"],function(e,t,i,n,s){"use strict";return s.Behavior.extend({"constructor":function(e,i){s.Behavior.prototype.constructor.apply(this,arguments),i.keyboardBehavior=this;var n=this;this.listenTo(i,"refresh:tabable:elements",function(e){n.refreshTabableElements(i,e)}),t.extend(i,{"_setFirstAndLastFocusable":function(e){e&&e.activeTabContent&&e.activeTabContent.childTabPanelView&&e.activeTabContent.childTabPanelView._setFirstAndLastFocusable&&e.activeTabContent.childTabPanelView._setFirstAndLastFocusable(e)},"currentlyFocusedElement":function(e){if(e&&e.activeTabContent&&e.activeTabContent.childTabPanelView&&e.activeTabContent.childTabPanelView.currentlyFocusedElement)return e.activeTabContent.childTabPanelView.currentlyFocusedElement(e)},"_accSetFocusToPreviousOrNextElement":function(e){if(this.tabPanel&&this.tabPanel.activeTabContent&&this.tabPanel.activeTabContent.childTabPanelView&&this.tabPanel.activeTabContent.childTabPanelView._accSetFocusToPreviousOrNextElement)return this.tabPanel.activeTabContent.childTabPanelView._accSetFocusToPreviousOrNextElement(e)},"containTargetElement":function(e){return!!(e&&e.activeTabContent&&e.activeTabContent.childTabPanelView&&e.activeTabContent.childTabPanelView.containTargetElement)&&e.activeTabContent.childTabPanelView.containTargetElement(e)},"onKeyInView":function(e){if(e.activeTabContent&&e.activeTabContent.childTabPanelView&&e.activeTabContent.childTabPanelView.onKeyInView)return e.activeTabContent.childTabPanelView.onKeyInView(e)},"numberOfTabableElements":function(e){return e&&e.activeTabContent&&e.activeTabContent.childTabPanelView&&e.activeTabContent.childTabPanelView.numberOfTabableElements?e.activeTabContent.childTabPanelView.numberOfTabableElements(e):0}})},"refreshTabableElements":function(e,t){if(e.tabPanel=t,t&&t.activeTabContent&&t.activeTabContent.childTabPanelView){var i=t.activeTabContent.childTabPanelView;i.refreshTabableElements&&i.refreshTabableElements(i);t.activeTabLink,t.activeTabContent;e._setFirstAndLastFocusable&&e._setFirstAndLastFocusable()}}})}),csui.define("csui/controls/tab.panel/impl/tab.contents.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/tab.panel/impl/tab.content.view","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/controls/tab.panel/behaviors/tab.contents.keyboard.behavior","csui/controls/tab.panel/behaviors/tab.contents.proxy.keyboard.behavior","csui/lib/binf/js/binf"],function(e,t,i,n,s,o,r){"use strict";var a=i.CollectionView.extend({"className":"binf-tab-content","childView":n,"childViewOptions":function(t,i){return e.extend(this.options,{"index":i,"activeTab":this.options.activeTab})},"behaviors":{},"defaults":{"implementTabContentsDefaultKeyboardHandling":!0,"tabContentAccSelectors":"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[data-cstabindex], *[contenteditable]"},"constructor":function(t){e.defaults(t,this.defaults),t.implementTabContentsDefaultKeyboardHandling?this.behaviors=e.extend({"TabContentKeyboardBehavior":{"behaviorClass":o}},this.behaviors):!1===t.implementTabContentsDefaultKeyboardHandling&&(this.behaviors=e.extend({"TabContentProxyKeyboardBehavior":{"behaviorClass":r}},this.behaviors)),i.CollectionView.prototype.constructor.apply(this,arguments),this.reactToChildEvent=!1,this.listenTo(this,"add:child",this.propagateEventsToViews)},"onBeforeDestroy":function(){this.reactToChildEvent=!1},"onRender":function(){if(this.reactToChildEvent=!0,this._setLastTabCssClass(),"spy"===this.options.mode){var e=".tab-links.scrollspy";if(this.options&&this.options.tabPanel&&this.options.tabPanel.$el){var t=this.options.tabPanel.$el.attr("id");void 0!==t&&(e="#"+t+" "+e)}this.$el.binf_scrollspy({"target":e})}},"onReorder":function(){this._setLastTabCssClass()},"onAddChild":function(e){this._setLastTabCssClass()},"onRemoveChild":function(e){this._setLastTabCssClass()},"_setLastTabCssClass":function(){if(!0===this.reactToChildEvent){if(this.children.each(function(e){e.$el.hasClass("last-tab-panel")&&e.$el.removeClass("last-tab-panel")}),this.children.length>1){var e=this.getLastVisibleChild(this.collection.length-1);e&&e.$el.addClass("last-tab-panel")}}},"getLastVisibleChild":function(e){var t=this.collection.at(e);if(t){var i=this.children.findByModel(t);return i&&!i.$el.hasClass("binf-hidden")?i:this.getLastVisibleChild(e-1)}},"getTabContentFirstFocusableELement":function(e){var i;if(void 0===e||!0!==this.options.searchTabContentForTabableElements)return i;var n="#"===e.charAt(0)?e.slice(1):e,s=this.collection.findWhere({"uniqueTabId":n});if(s){var o=this.children.findByModel(s),r=o.content,a=0,l=r.$el.find(this.options.tabContentAccSelectors).filter(":visible");if(l.length>0){for(var c=t(l[a]);this.closestTabable&&!1===this.closestTabable(c);){if(++a>=l.length){a=-1;break}c=t(l[a])}a>=0&&a<l.length&&(i=c)}}return i}});return e.extend(a.prototype,s),a}),csui.define("csui/controls/tab.panel/behaviors/tab.panel.keyboard.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/utils/base","csui/lib/marionette"],function(e,t,i,n,s,o){"use strict";return o.Behavior.extend({"constructor":function(e,n){o.Behavior.prototype.constructor.apply(this,arguments),n.keyboardBehavior=this,n.currentTabPosition=e.currentTabPosition||0,this.tabableElements=[];var r=this;this.listenTo(n,"render",function(){r.refreshTabableElements(n),n.$el.on("tab:content:render",function(){r.refreshTabableElements(n)})}),this.listenTo(n,"activate:tab",function(e,n,s){var o=s&&s.$el.find(">a")[0];if(o){var r={"target":o},a=this.tabableElements[this.tabLinksIndex];if(a&&a.containTargetElement&&a.containTargetElement(r)){var l=this.tabableElements[this.tabContentIndex];if(l&&!0!==l.options.searchTabContentForTabableElements){var c=i(a.keyboardBehavior.tabableElements[a.currentTabPosition]);setTimeout(t.bind(function(){this.view._focusOnElement(c)},this),500)}}}}),t.extend(n,{"_checkAndRefreshTabableElements":function(e){if(this.keyboardBehavior.tabableElements.length>0){var t=this.keyboardBehavior.tabableElements[this.keyboardBehavior.tabLinksIndex];t.numberOfTabableElements&&0===t.numberOfTabableElements(e)&&t.keyboardBehavior.refreshTabableElements(t)}},"_setFirstAndLastFocusable":function(e){if(this.keyboardBehavior.tabableElements.length>0){var t=this.keyboardBehavior.tabableElements[0];t&&t._setFirstAndLastFocusable&&t._setFirstAndLastFocusable(e);var i=this.keyboardBehavior.tabableElements.length-1;t=this.keyboardBehavior.tabableElements[i],t&&t._setFirstAndLastFocusable&&t._setFirstAndLastFocusable(e)}},"currentlyFocusedElement":function(e){var i=t.extend({"activeTabLink":this.activeTabLink,"activeTabContent":this.activeTabContent},e);this._checkAndRefreshTabableElements(i),this._setFirstAndLastFocusable(i);var n,s=this.keyboardBehavior.tabableElements.length;if(s>0){var o=this.currentTabPosition;(o<0||o>s-1)&&(o=this.currentTabPosition=i.shiftKey?s-1:0),i.shiftKey&&(o=this.currentTabPosition=s-1);var a=this.keyboardBehavior.tabableElements[o];a.currentlyFocusedElement&&void 0!==(n=a.currentlyFocusedElement(i))&&(n.prop("tabindex","0"),this.currentTabPosition===this.tabContentIndex&&(r.skipAutoScroll=!0,this._focusOnElement(n),r.skipAutoScroll=!1))}return n},"accActivateTabableRegion":function(e){e&&(this.currentTabPosition=-1);var t=this.currentlyFocusedElement({"shiftKey":e});this._focusOnElement(t)},"_focusOnElement":function(e){e&&e instanceof i&&(this.tabableRegionBehavior&&(this.tabableRegionBehavior.ignoreFocusEvents=!0),e.trigger("focus"),this.tabableRegionBehavior&&(this.tabableRegionBehavior.ignoreFocusEvents=!1))},"_moveTo":function(e,t){e.preventDefault(),e.stopPropagation();var i=this;t.csuiPromise?t.csuiPromise.done(function(){t.prop("tabindex","0"),i._focusOnElement(t),setTimeout(function(){i.skipAutoScroll=!1},600)}):(t.prop("tabindex","0"),i._focusOnElement(t),setTimeout(function(){i.skipAutoScroll=!1},600))},"onKeyInView":function(e){if(9===e.keyCode||32===e.keyCode||13===e.keyCode||46===e.keyCode){e.activeTabLink=this.activeTabLink,e.activeTabContent=this.activeTabContent;for(var t,n,o=this.currentTabPosition,r=this.keyboardBehavior.tabableElements.length,a=0;a<r;){if((t=this.keyboardBehavior.tabableElements[a])&&t.containTargetElement&&t.containTargetElement(e)){if(0===t.numberOfTabableElements())return void(this.currentTabPosition=-1);break}a++}if(a>=0&&a<r&&(o=this.currentTabPosition=a),o>=0&&o<r&&(t=this.keyboardBehavior.tabableElements[o],t.onKeyInView&&(0===o&&(this.skipAutoScroll=!0),void 0!==(n=t.onKeyInView(e)))))return void this._moveTo(e,n);if(9===e.keyCode&&o>=0&&o<r){var l=-1;for(e.shiftKey?this.currentTabPosition>0&&(l=this.currentTabPosition-1):this.currentTabPosition<r-1&&(l=this.currentTabPosition+1);l>=0&&l<r&&(t=this.keyboardBehavior.tabableElements[l],!t.currentlyFocusedElement||void 0===(n=t.currentlyFocusedElement(e)));)e.shiftKey?l-=1:l+=1;l>=0&&l<r&&l!==this.currentTabPosition?(l===this.tabLinksIndex&&(this.skipAutoScroll=!0),this.currentTabPosition=l,this._moveTo(e,n)):(s.isMSBrowser()?i(e.srcElement).blur():/^(?:input|select|textarea|button)$/i.test(e.target)&&i(e.target).blur(),this.currentTabPosition=-1)}}}})},"onBeforeDestroy":function(){this.view.$el.off("tab:content:render")},"refreshTabableElements":function(e){e.tabLinks.triggerMethod("refresh:tabable:elements",e),e.tabContent.triggerMethod("refresh:tabable:elements",e),this.tabLinksIndex=0,this.tabableElements[this.tabLinksIndex]=e.tabLinks,this.tabContentHeaderIndex=-1,e.tabContentHeader&&(this.tabContentHeaderIndex=1,this.tabableElements[this.tabContentHeaderIndex]=e.tabContentHeader),this.tabContentIndex=e.tabContentHeader?2:1,this.tabableElements[this.tabContentIndex]=e.tabContent,this.view.currentTabPosition=-1,this.view.triggerMethod("refresh:tabindexes")}})}),csui.define("csui/utils/non-emptying.region/non-emptying.region",["smart/utils/non-emptying.region/non-emptying.region"],function(e){"use strict";return e}),csui.define("csui/controls/tab.panel/tab.panel.view",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/tab.panel/impl/tab.links.view","csui/controls/tab.panel/impl/tab.contents.view","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/models/version","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/tab.panel/behaviors/tab.panel.keyboard.behavior","csui/utils/non-emptying.region/non-emptying.region","csui/controls/form/pub.sub","csui/lib/binf/js/binf"],function(e,t,i,n,s,o,r,a,l,c,u,d){"use strict";var p=i.View.extend({"className":"cs-tabpanel tab-panel","attributes":function(){return{"id":this.id||e.uniqueId("cs-tab")}},"events":{"keydown":"onKeyInView"},"behaviors":{"TabableRegionBehavior":{"behaviorClass":l,"notSetFocus":!0,"initialActivationWeight":100},"TabPanelKeyboardBehavior":{"behaviorClass":c}},"constructor":function(e){if(e||(e={}),e.tabPanel=this,e.collection||(e.collection=this._convertCollection(e)),this._generateUniqueTabId(e),e.node){var n=e.node.get("initialPanel");if(n){var s=e.collection.findIndex({"name":n});if(s>=0&&s<e.collection.length){var o=e.collection.at(s);e.activeTab=new t.Model(o.attributes),e.activeTab.set("tabIndex",s),e.selectedTab=new t.Model(o.attributes)}}}e.activeTab||(e.activeTab=new t.Model({"tabIndex":0})),i.View.prototype.constructor.apply(this,arguments),this.linksRegion=new u({"el":this.el}),this.contentRegion=new u({"el":this.el}),this.activeTab=e.activeTab,this.activeTab.get("tabIndex")>=this.collection.length&&this.activeTab.set("tabIndex",this.collection.length-1),this.listenTo(this.collection,"reset",this._generateUniqueTabId),this.listenTo(this.collection,"add",this._setModelUniqueTabId),this.listenTo(this,"activate:tab",this._scrollToActiveTab),this.listenTo(this,"before:destroy",this._destroyContent)},"_scrollToActiveTab":function(e,t,i){if(this.activeTabLink=i,this.activeTabContent=e,this.options.mode){var n=i.$el.find(">a").attr("href"),s=this.getOption("extraScrollTopOffset")||0;"#"===n[0]&&(n=n.substr(1));var o=this.$el.find("div[id='"+n+"']");if(o.length>0){var r=o[0].offsetTop+s;if("spy"===this.options.mode){var l=this.tabContent.$el.data("binf.scrollspy");l&&l.refresh()}this.tabContent.$el.animate({"scrollTop":r},300);var c=i.$el.find(".cs-tablink-text").html(),u=(this.options.node instanceof a?"v":"p")+this.options.node.get("id"),p="pubsub:tab:contents:header:view:change:tab:title:"+u;d.trigger(p,c)}}},"render":function(){return this._ensureViewIsIntact(),i.triggerMethodOn(this,"before:render",this),this._destroyContent(),this._renderContent(),this._bindingToEvents(),i.triggerMethodOn(this,"render",this),this},"_renderContent":function(){var e=this.options.TabLinkCollectionViewClass||s;this.tabLinks=new e(this.options);var t=this.options.TabContentCollectionViewClass||o;this.tabContent=new t(this.options),this.propagateEventsToViews(this.tabLinks,this.tabContent),this.linksRegion.show(this.tabLinks),this.contentRegion.show(this.tabContent);var n=this;this.listenTo(this.tabLinks,"childview:before:activate:tab",function(e){var t=this.tabContent.children.findByModel(e.model);this.activatingTab=!0,i.triggerMethodOn(this,"before:activate:tab",t.content,t,e)}).listenTo(this.tabLinks,"childview:activate:tab",function(e){var t=this.tabContent.children.findByModel(e.model);t.ensureContent();var s=t.content;setTimeout(function(){n.activatingTab=!1},600),i.triggerMethodOn(this,"activate:tab",s,t,e),i.triggerMethodOn(s,"dom:refresh")}).listenTo(this.tabContent,"childview:before:populate:tab",function(e){i.triggerMethodOn(this,"before:populate:tab",this,e)}).listenTo(this.tabContent,"childview:populate:tab",function(e){i.triggerMethodOn(this,"populate:tab",this,e)});var r=0;this.activeTab&&this.activeTab.get("tabIndex")>=0&&this.activeTab.get("tabIndex")<this.collection.length&&(r=this.activeTab.get("tabIndex")),this.activeTabLink=this.tabLinks.children.findByIndex(r),this.activeTabLink&&(this.activeTabContent=this.tabContent.children.findByIndex(r).content)},"_destroyContent":function(){this.$el.off("tab:content:focus"),this.$el.off("tab:link:delete"),this.tabLinks&&(this.cancelEventsToViewsPropagation(this.tabLinks,this.tabContent),this.stopListening(this.tabLinks).stopListening(this.tabContent),this.linksRegion.empty(),this.contentRegion.empty())},"_bindingToEvents":function(){var e=this;this.$el.on("tab:content:focus",function(t){var i=e.tabContent.getTabContentFirstFocusableELement(t.tabId);i&&(e.currentTabPosition=this.keyboardBehavior?this.keyboardBehavior.tabContentIndex:-1,e._moveTo&&e._moveTo(t,i),e.tabContent.keyboardBehavior&&e.tabContent.keyboardBehavior.updateCurrentTabPosition())}),this.$el.on("tab:link:delete",function(t){t.preventDefault(),t.stopPropagation(),e.tabLinks.deleteTabById(t.tabId)})},"_convertCollection":function(i){var n=new t.Collection(i.tabs);return n.each(function(t){t.set("id",e.uniqueId("cs-tab"))}),n},"_generateUniqueTabId":function(i){var n=i instanceof t.Collection?i:i.collection||this.collection;n&&n.each(e.bind(function(e){this._setModelUniqueTabId(e)},this))},"_setModelUniqueTabId":function(t){t&&t.set("uniqueTabId",e.uniqueId("cstab-uid-"),{"silent":!0})},"_isTablinkVisibleInParents":function(e,t){return this.tabLinks._isTablinkVisibleInParents(e,t)}});return e.extend(p.prototype,r),p}),csui.define("hbs!csui/controls/tab.panel/impl/tab.link.dropdown",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a role="menuitem" href="#'+e.escapeExpression((o=null!=(o=r(i,"uniqueTabId")||(null!=t?r(t,"uniqueTabId"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"uniqueTabId","hash":{},"loc":{"start":{"line":1,"column":26},"end":{"line":1,"column":41}}}):o))+'" data-binf-toggle="tab">\r\n  <span class="cs-label">'+e.escapeExpression((o=null!=(o=r(i,"title")||(null!=t?r(t,"title"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":2,"column":25},"end":{"line":2,"column":34}}}):o))+"</span>\r\n</a>\r\n"}});return i.registerPartial("csui_controls_tab.panel_impl_tab.link.dropdown",n),n}),csui.define("csui/controls/tab.panel/impl/tab.link.dropdown.view",["csui/lib/underscore","csui/controls/tab.panel/impl/tab.link.view","hbs!csui/controls/tab.panel/impl/tab.link.dropdown","csui/lib/binf/js/binf"],function(e,t,i){"use strict";return t.extend({"template":i,"attributes":function(){return{"id":"tablink-"+this.model.get("uniqueTabId"),"data-csui-tab":this.model.get("name"),"role":"none"}},"constructor":function(){t.prototype.constructor.apply(this,arguments),this.listenTo(this.model,"change",this.render),this.$el.on("click",">a",e.bind(this._linkClicked,this))},"onBeforeDestroy":function(){this.$el.off("click",">a")},"activate":function(e){this.$el.hasClass("binf-active")||(this.triggerMethod("clear:active:tab"),this.ui.link.binf_tab("show"));var t=this.model.collection.indexOf(this.model);this._parent.options.activeTab&&this._parent.options.activeTab.set("tabIndex",t),this.triggerMethod("activate:tab",this),e||this.triggerMethod("click:link")},"_linkClicked":function(e){e.preventDefault(),e.stopPropagation(),this.activate()}})}),csui.define("hbs!csui/controls/tab.panel/impl/tab.links.dropdown",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <button id="'+e.escapeExpression((o=null!=(o=r(i,"btnId")||(null!=t?r(t,"btnId"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"btnId","hash":{},"loc":{"start":{"line":3,"column":14},"end":{"line":3,"column":23}}}):o))+'" type="button" class="binf-btn binf-btn-default" disabled>\r\n    <span class="cs-label">'+e.escapeExpression((o=null!=(o=r(i,"title")||(null!=t?r(t,"title"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":4,"column":27},"end":{"line":4,"column":36}}}):o))+"</span>\r\n  </button>\r\n"},"3":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <button id="'+e.escapeExpression((o=null!=(o=r(i,"btnId")||(null!=t?r(t,"btnId"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"btnId","hash":{},"loc":{"start":{"line":7,"column":14},"end":{"line":7,"column":23}}}):o))+'" type="button" class="binf-btn binf-btn-default binf-dropdown-toggle"\r\n          data-binf-toggle="dropdown" aria-haspopup="true" aria-expanded="false"\r\n          aria-label="'+e.escapeExpression((o=null!=(o=r(i,"dropdownButtonAria")||(null!=t?r(t,"dropdownButtonAria"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"dropdownButtonAria","hash":{},"loc":{"start":{"line":9,"column":22},"end":{"line":9,"column":44}}}):o))+'" title="'+e.escapeExpression((o=null!=(o=r(i,"dropdownButtonTitle")||(null!=t?r(t,"dropdownButtonTitle"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"dropdownButtonTitle","hash":{},"loc":{"start":{"line":9,"column":53},"end":{"line":9,"column":76}}}):o))+'">\r\n    <span class="cs-label">'+e.escapeExpression((o=null!=(o=r(i,"title")||(null!=t?r(t,"title"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":10,"column":27},"end":{"line":10,"column":36}}}):o))+'</span>\r\n    <span class="cs-icon icon-caret-down"></span>\r\n  </button>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="dropdown-label">'+e.escapeExpression((r=null!=(r=a(i,"title")||(null!=t?a(t,"title"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":1,"column":29},"end":{"line":1,"column":38}}}):r))+"</span>\r\n"+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"single_item"):t,{"name":"if","hash":{},"fn":e.program(1,s,0),"inverse":e.program(3,s,0),"loc":{"start":{"line":2,"column":0},"end":{"line":13,"column":7}}}))?o:"")+'<ul class="binf-dropdown-menu" role="menu" aria-labelledby="'+e.escapeExpression((r=null!=(r=a(i,"btnId")||(null!=t?a(t,"btnId"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"btnId","hash":{},"loc":{"start":{"line":14,"column":60},"end":{"line":14,"column":69}}}):r))+'">\r\n</ul>\r\n'}});return i.registerPartial("csui_controls_tab.panel_impl_tab.links.dropdown",n),n}),csui.define("csui/controls/tab.panel/behaviors/tab.links.dropdown.keyboard.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette","csui/controls/tab.panel/behaviors/common.keyboard.behavior.mixin"],function(e,t,i,n,s,o){"use strict";return s.Behavior.extend({"constructor":function(e,i){s.Behavior.prototype.constructor.apply(this,arguments),i.keyboardBehavior=this,this.tabableElements=[];var n=this;this.listenTo(i,"refresh:tabable:elements",function(e){n.refreshTabableElements(i,e)}),o.mixin(i),t.extend(i,{"onKeyInView":function(e){var t;return 0===this.keyboardBehavior.tabableElements.length?t:(9===e.keyCode&&(t=this._accSetFocusToPreviousOrNextElement(e.shiftKey)),t)}})},"refreshTabableElements":function(e,t){this.tabableElements=e.$el.find("button:not([disabled])").filter(":visible"),this.view.currentTabPosition=-1,setTimeout(function(){e._setFirstAndLastFocusable&&e._setFirstAndLastFocusable()},50)}})}),csui.define("csui/controls/tab.panel/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/tab.panel/impl/nls/root/lang",{"deleteTooltip":"Delete","deleteTabAria":"Delete {0}","gotoNextTooltip":"Show next tab","gotoPreviousTooltip":"Show previous tab","requiredTooltip":"Required","dropdownButtonTitle":"Show more","dropdownButtonAria":"Select properties page, currently {0}"}),csui.define("css!csui/controls/tab.panel/impl/tab.links.dropdown",[],function(){}),csui.define("csui/controls/tab.panel/tab.links.dropdown.view",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/tab.panel/impl/tab.link.dropdown.view","hbs!csui/controls/tab.panel/impl/tab.links.dropdown","csui/controls/tab.panel/behaviors/tab.links.dropdown.keyboard.behavior","csui/behaviors/dropdown.menu/dropdown.menu.behavior","i18n!csui/controls/tab.panel/impl/nls/lang","css!csui/controls/tab.panel/impl/tab.links.dropdown","csui/lib/binf/js/binf"],function(e,t,i,n,s,o,r,a){"use strict";return i.CompositeView.extend({"className":"cs-tab-links binf-dropdown tile-nav","template":s,"templateHelpers":function(){var t=this.selected&&this.selected.get("title");return{"single_item":this.collection.length<=1,"dropdownButtonTitle":a.dropdownButtonTitle,"dropdownButtonAria":e.str.sformat(a.dropdownButtonAria,t),"btnId":e.uniqueId("cstabBtn")}},"childView":n,"childViewContainer":">ul","ui":{"toggle":">.binf-dropdown-toggle","menuButton":">.binf-btn","selectedLabel":">.binf-btn >.cs-label"},"behaviors":{"TabLinksDropdownKeyboardBehavior":{"behaviorClass":o},"DropdownMenuBehavior":{"behaviorClass":r}},"constructor":function(e){i.CompositeView.prototype.constructor.apply(this,arguments),this.selected=new t.Model;var n=e.activeTab&&e.activeTab.get("tabIndex");if(this.collection&&this.collection.length>0&&void 0!==n&&n<this.collection.length){var s=e.selectedTab&&(e.selectedTab instanceof t.Model&&e.selectedTab.get("title")||e.selectedTab);if(void 0!==s&&s===this.collection.at(n).get("title"))this._setSelection(this.collection.at(n));else{var o=-1;void 0!==s&&-1===(o=this._getModelIndexByPropertyValue(s,this.collection,"title"))&&(o=this._getModelIndexByPropertyValue(s,this.collection,"name")),-1!==o?(this._setSelection(this.collection.at(o)),e.activeTab.set("tabIndex",o)):(this._setSelection(this.collection.at(0)),e.activeTab.set("tabIndex",0))}}this.listenTo(this.collection,"change",this._refreshSelection),this.listenTo(this.selected,"change",this._updateSelectionLabels)},"_getModelIndexByPropertyValue":function(e,t,i){var n=-1;return t.some(function(t,s){if(t.get(i)===e)return n=s,!0}),n},"onRender":function(){this._updateSelectionLabels(),1!==this.collection.length&&this.ui.toggle.binf_dropdown();for(var e=this.selected.get("id"),t=0;t<this.collection.length;t++)if(e===this.collection.at(t).get("id")){var i=this.$el.find("ul li");i.removeClass("binf-active"),this.$(i.get(t)).addClass("binf-active")
;break}},"onChildviewClickLink":function(e){this._setSelection(e.model),this.ui.toggle.binf_dropdown("toggle")},"onChildviewClearActiveTab":function(e){this.children.each(function(e){e.$el.hasClass("binf-active")&&e.$el.removeClass("binf-active")})},"_setSelection":function(e){this.selected.set(e.pick("id","title","name"))},"_updateSelectionLabels":function(){var t=this.selected.get("title");this.ui.selectedLabel.text(t),this.ui.menuButton.attr("aria-label",e.str.sformat(a.dropdownButtonAria,t))},"_refreshSelection":function(e){e.get("id")===this.selected.get("id")&&this._setSelection(e)},"activateDropdownTab":function(e,t){this.children.some(function(i){if(i.model.get("name")===e)return i.activate(t),this._setSelection(i.model),!0}.bind(this))}})}),csui.define("csui/controls/tab.panel/tab.links.ext.scroll.mixin",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/models/version","i18n!csui/controls/tab.panel/impl/nls/lang","csui/controls/form/pub.sub"],function(e,t,i,n,s,o){return{"_initializeToolbars":function(i){i=i||{},this.tabsSelector="> ul li",this.tablinksToolbar=t(this.$el.find(".tab-links .tab-links-bar")[0]);var n;this.leftToolbar=t(this.$el.find(".tab-links .left-toolbar")[0]),this.leftToolbar&&0===this.leftToolbar.find(">div.goto_previous_div").length&&(n=i.gotoPreviousTooltip||s.gotoPreviousTooltip,this.leftToolbar.append("<div class='goto_previous_div' title='"+n+"'><span class='icon goto_previous_page'></span></div>"),this.gotoPreviousPage=t(this.$el.find(".tab-links .goto_previous_div")[0]),this.gotoPreviousPage.on("click",e.bind(this._gotoPreviousTabClick,this))),this._hideLeftToolbar(),this.rightToolbar=t(this.$el.find(".tab-links .right-toolbar")[0]),this.rightToolbar&&0===this.rightToolbar.find(">div.goto_next_div").length?(n=i.gotoNextTooltip||s.gotoNextTooltip,this.rightToolbar.append("<div class='goto_next_div' title='"+n+"'><span class='icon goto_next_page'></span></div>"),this.gotoNextPage=t(this.$el.find(".tab-links div.goto_next_div")[0]),this.gotoNextPage.on("click",e.bind(this._gotoNextTabClick,this))):this.gotoNextPage=t(this.$el.find(".tab-links div.goto_next_div")[0]),this.gotoNextPage&&this.gotoNextPage.hide()},"_listenToTabEvent":function(){var e,t=this.tablinksToolbar.find(this.tabsSelector);for(e=0;e<t.length;e++)this._listenToTabIdEvent(e,t)},"_listenToTabIdEvent":function(e,i){var s=this,r=void 0===i?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):i;t(r[e]).off("activate.binf.scrollspy").on("activate.binf.scrollspy",function(){var e=t(this).find("a").attr("href"),i=0;if(e&&("#"===e[0]&&(e=e.substr(1)),i=s._findTabIndexByID(e),s.tabContentHeader)){var a=t(r).parent().find("li.binf-active .cs-tablink-text").html(),l=(s.options.node instanceof n?"v":"p")+s.options.node.get("id"),c="pubsub:tab:contents:header:view:change:tab:title:"+l;o.trigger(c,a)}!0===s.activatingTab||!0===s.skipAutoScroll||!0===s.scrollspyActivatingTab&&s.scrollspyActivatingTabId===i||e&&i>=0&&!s._isTablinkVisibleInParents(t(r[i]))&&(s.scrollspyActivatingTab=!0,s.scrollspyActivatingTabId=i,s._autoScrollTabTo(i).done(function(){s.scrollspyActivatingTab=!1,s.scrollspyActivatingTabId=-1}))})},"_beginTabHidden":function(e){var i=!1,n=void 0===e?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):e;if(n){var s;for(s=0;s<n.length;s++){var o=this._isTablinkVisibleInParents(t(n[s]));if(o)break;if(!o&&!t(n[s]).hasClass("hidden-by-switch")){i=!0;break}}}return i},"_trailingTabHidden":function(e){var i=!1,n=void 0===e?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):e;if(n){var s;for(s=n.length-1;s>=0;s--){var o=this._isTablinkVisibleInParents(t(n[s]));if(o)break;if(!o&&!t(n[s]).hasClass("hidden-by-switch")){i=!0;break}}}return i},"_findTabIndexByID":function(e){var i=-1,n=this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector);if(n){var s;for(s=0;s<n.length;s++){var o=t(n[s]).find(">a").attr("href");if("#"===o[0]&&(o=o.substr(1)),e===o){i=s;break}}}return i},"_firstVisibleTabIndex":function(e){var i=-1,n=void 0===e?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):e;if(n){var s;for(s=0;s<n.length;s++)if(this._isTablinkVisibleInParents(t(n[s]))){i=s;break}}return i},"_lastVisibleTabIndex":function(e){var i=-1,n=void 0===e?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):e;if(n){var s;for(s=n.length-1;s>=0;s--)if(this._isTablinkVisibleInParents(t(n[s]))){i=s;break}}return i},"_showLeftToolbar":function(){this.leftToolbar&&this.leftToolbar.show(),this.tablinksToolbar&&this.tablinksToolbar.addClass("with-left-toolbar")},"_hideLeftToolbar":function(){this.leftToolbar&&this.leftToolbar.hide(),this.tablinksToolbar&&this.tablinksToolbar.removeClass("with-left-toolbar")},"_hideTabLinkByRequiredSwitch":function(e){if(e&&e instanceof t){e.addClass("binf-hidden hidden-by-switch"),this._hideTab(e),e.find("a").attr("data-cstabindex","-1");var i=e.find(".cs-delete-icon");void 0!==i.attr("data-cstabindex")&&i.attr("data-cstabindex","-1")}},"_showTabLinkByRequiredSwitch":function(e,i){e&&e instanceof t&&(e.removeClass("binf-hidden hidden-by-switch"),this._showTab(e),e.find("a").removeAttr("data-cstabindex"),!0===i&&e.find(".cs-delete-icon").attr("data-cstabindex","0"))},"_hideTab":function(e){e&&e instanceof t&&(e.css("width",""),e.css("text-overflow","clip"),e.hide())},"_showTab":function(e){e&&e instanceof t&&(e.css("width",""),e.css("text-overflow","ellipsis"),e.show())},"_showLastTab":function(e){var i,n=void 0===e?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):e;for(i=n.length-1;i>=0;i--){var s=t(n[i]);if(!this._isTablinkVisibleInParents(s)&&!s.hasClass("hidden-by-switch")){this._showTab(s);break}}},"_enableToolbarState":function(e){var t=void 0===e?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):e;t&&this.$el.is(":visible")&&(this._beginTabHidden(t)?this._showLeftToolbar():this._hideLeftToolbar(),this.gotoNextPage&&this.gotoNextPage.toggle(this._trailingTabHidden(t)))},"_gotoPreviousTabClick":function(e){i.trigger("closeToggleAction"),this._gotoPreviousTab({"event":e})},"_gotoNextTabClick":function(e){i.trigger("closeToggleAction");var n=(t.Deferred(),this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector)),s=this._lastVisibleTabIndex(n);if(s>=0&&s<n.length){var o,r=-1;for(o=s+1;o<n.length;o++){var a=t(n[o]);if(!a.hasClass("hidden-by-switch")&&!this._isTablinkVisibleInParents(a)){r=o;break}}if(r>=0&&r<n.length)return this._gotoNextTab({"tabs":n,"visibleTabIndex":r})}return t.Deferred().resolve()},"_gotoPreviousTab":function(i){i||(i={}),i.event&&i.event.preventDefault(),i.event&&i.event.stopPropagation();var n,s=i.deferred?i.deferred:t.Deferred(),o=void 0===i.tabs?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):i.tabs,r=o.length-1,a=i.visibleTabIndex;if(void 0!==a&&a>=0&&a<=r&&this._isTablinkVisibleInParents(t(o[a])))return s.resolve();var l=!1;for(n=0;n<=r;n++){var c=t(o[n]);if(this._isTablinkVisibleInParents(c)){0===n&&this._hideLeftToolbar();var u;for(u=n-1;u>=0;u--){var d=t(o[u]);if(d&&!this._isTablinkVisibleInParents(d)&&!d.hasClass("hidden-by-switch")){d.css("visibility","binf-hidden"),d.css("width",""),d.show();var p=d.width();d.css("text-overflow","clip"),d.width(0),d.css("visibility",""),l=!0;var h=!0===i.animationOff?0:"fast";d.animate({"width":"+="+p},h,e.bind(function(){d.css("width",""),d.css("text-overflow","ellipsis");var e=!1;if(void 0!==a&&a>=0&&a<=r&&!1===this._isTablinkVisibleInParents(t(o[a]))&&(e=!0),e){var n={"tabs":o,"deferred":s};i.event&&(n.event=i.event),void 0!==a&&(n.visibleTabIndex=a),void 0!==i.animationOff&&(n.animationOff=i.animationOff),this._gotoPreviousTab(n)}else this._enableToolbarState(o),this.autoScrollingLastTab=!1,s.resolve()},this));break}}break}n===r&&(this._showLastTab(o),this._enableToolbarState(o),this.autoScrollingLastTab=!1,s.resolve())}return!1===l?s.resolve():void 0===i.deferred?s.promise():void 0},"_gotoNextTab":function(i){i||(i={}),i.event&&i.event.preventDefault(),i.event&&i.event.stopPropagation();var n,s=i.deferred?i.deferred:t.Deferred(),o=void 0===i.tabs?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):i.tabs,r=o.length-1,a=i.visibleTabIndex;if(void 0!==a&&a>=0&&a<=r&&this._isTablinkVisibleInParents(t(o[a])))return s.resolve();var l=!1;for(n=0;n<=r;n++){var c=t(o[n]);if(this._isTablinkVisibleInParents(c)){if(this.leftToolbar.is(":hidden")&&this._showLeftToolbar(),c){l=!0;var u=!0===i.animationOff?0:"fast";c.animate({"width":"-="+c.width()},u,e.bind(function(){c.hide(),c.css("width","");var e=!1;if(void 0!==a&&a>=0&&a<=r&&!1===this._isTablinkVisibleInParents(t(o[a]))&&(e=!0),e){var n={"tabs":o,"deferred":s};i.event&&(n.event=i.event),void 0!==a&&(n.visibleTabIndex=a),void 0!==i.animationOff&&(n.animationOff=i.animationOff),this._gotoNextTab(n)}else this._enableToolbarState(o),this.autoScrollingLastTab=!1,s.resolve()},this))}break}n===r&&(this._showLastTab(o),this._enableToolbarState(o),this.autoScrollingLastTab=!1,s.resolve())}return!1===l?s.resolve():void 0===i.deferred?s.promise():void 0},"_autoScrollLastTab":function(){this.autoScrollingLastTab=!0;var t=this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector),i=this._gotoNextTab({"tabs":t,"visibleTabIndex":t.length-1});return i.done(e.bind(function(){this.autoScrollingLastTab=!1},this)),i},"_autoScrollFirstTabAsync":function(i,n,s,o){var r=void 0===s?0:s;if(r<0&&r>=n.length)return o?void o.resolve():t.Deferred().resolve();var a=o||t.Deferred();return this._gotoPreviousTab({"tabs":n}).done(e.bind(function(){this._isTablinkVisibleInParents(i)?a.resolve():(r++,this._autoScrollFirstTabAsync(i,n,r,a))},this)),void 0===o?a:void 0},"_autoScrollFirstTab":function(){var i=t.Deferred();this.autoScrollingLastTab=!0;var n=this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector),s=t(n[0]);return!this._isTablinkVisibleInParents(s)&&n.length>0?this._autoScrollFirstTabAsync(s,n).done(e.bind(function(){this._enableToolbarState(n),this.autoScrollingLastTab=!1,i.resolve()},this)):this.autoScrollingLastTab=!1,i.promise()},"_autoScrollTabTo":function(i,n){n||(n={});var s=this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector),o=e.extend({"visibleTabIndex":i},n,{"tabs":s}),r=this._firstVisibleTabIndex(s),a=this._lastVisibleTabIndex(s);if(r>=0&&r<s.length&&a>=0&&a<s.length&&i>=0&&i<s.length){this.autoScrollingLastTab=!0;var l;if(i<r)l=this._gotoPreviousTab(o);else{if(!(i>a))return this.autoScrollingLastTab=!1,t.Deferred().resolve();l=this._gotoNextTab(o)}return l.done(e.bind(function(){this.autoScrollingLastTab=!1},this)),l}return t.Deferred().resolve()},"_autoScrolling":function(){if(this.autoScrollingLastTab||!0===this.activatingTab||!0===this.skipAutoScroll)return t.Deferred().resolve();var e,i=-1,n=this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector),s=!1;for(e=0;e<n.length;e++){var o=t(n[e]);if(-1===i&&o.hasClass("binf-active")){!1===this._isTablinkVisibleInParents(o)&&(s=!0),i=e;break}}return s?this._autoScrollTabTo(i):t.Deferred().resolve()}}}),csui.define("hbs!csui/controls/tab.panel/impl/tab.links.ext",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,s){return'  <div class="left-toolbar"></div>\r\n'},"3":function(e,t,i,n,s){return'  <div class="right-toolbar"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"toolbar"):t,{"name":"if","hash":{},"fn":e.program(1,s,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":3,"column":7}}}))?o:"")+'\r\n<div class="tab-links-bar">\r\n  <span class="fadeout"></span>\r\n  <ul class="binf-nav '+e.escapeExpression((r=null!=(r=a(i,"tab_type")||(null!=t?a(t,"tab_type"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"tab_type","hash":{},"loc":{"start":{"line":7,"column":22},"end":{"line":7,"column":34}}}):r))+'" role="tablist"></ul>\r\n</div>\r\n\r\n'+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"toolbar"):t,{"name":"if","hash":{},"fn":e.program(3,s,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":0},"end":{"line":12,"column":7}}}))?o:"")}});return i.registerPartial("csui_controls_tab.panel_impl_tab.links.ext",n),n}),csui.define("hbs!csui/controls/tab.panel/impl/tab.link.ext",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="cs-icon-required category_required" aria-label="'+e.escapeExpression((o=null!=(o=r(i,"required_tooltip")||(null!=t?r(t,"required_tooltip"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"required_tooltip","hash":{},"loc":{"start":{"line":3,"column":65},"end":{"line":3,"column":85}}}):o))+'"></span>\r\n'},"3":function(e,t,i,n,s){var o,r,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="cs-tablink-delete" title="'+e.escapeExpression((r=null!=(r=a(i,"delete_tooltip")||(null!=t?a(t,"delete_tooltip"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"delete_tooltip","hash":{},"loc":{"start":{"line":8,"column":40},"end":{"line":8,"column":58}}}):r))+'">\r\n    <span class="icon '+e.escapeExpression((r=null!=(r=a(i,"delete_icon")||(null!=t?a(t,"delete_icon"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"delete_icon","hash":{},"loc":{"start":{"line":9,"column":22},"end":{"line":9,"column":37}}}):r))+' cs-delete-icon" role="button"\r\n          '+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"removeable"):t,{"name":"if","hash":{},"fn":e.program(4,s,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":10},"end":{"line":10,"column":54}}}))?o:"")+'\r\n          aria-label="'+e.escapeExpression((r=null!=(r=a(i,"deleteTabAria")||(null!=t?a(t,"deleteTabAria"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"deleteTabAria","hash":{},"loc":{"start":{"line":11,"column":22},"end":{"line":11,"column":39}}}):r))+'"></span>\r\n  </div>\r\n'},"4":function(e,t,i,n,s){return'data-cstabindex="0"'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#'+e.escapeExpression((r=null!=(r=a(i,"uniqueTabId")||(null!=t?a(t,"uniqueTabId"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"uniqueTabId","hash":{},"loc":{"start":{"line":1,"column":10},"end":{"line":1,"column":25}}}):r))+'" id="'+e.escapeExpression((r=null!=(r=a(i,"linkId")||(null!=t?a(t,"linkId"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"linkId","hash":{},"loc":{"start":{"line":1,"column":31},"end":{"line":1,"column":41}}}):r))+'" role="tab" aria-selected="'+e.escapeExpression((r=null!=(r=a(i,"selected")||(null!=t?a(t,"selected"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"selected","hash":{},"loc":{"start":{"line":1,"column":69},"end":{"line":1,"column":81}}}):r))+'" aria-controls="'+e.escapeExpression((r=null!=(r=a(i,"uniqueTabId")||(null!=t?a(t,"uniqueTabId"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"uniqueTabId","hash":{},"loc":{"start":{"line":1,"column":98},"end":{"line":1,"column":113}}}):r))+'" class="cs-tablink" data-binf-toggle="tab" title="'+e.escapeExpression((a(i,"csui-l10n")||t&&a(t,"csui-l10n")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?a(t,"title"):t,{"name":"csui-l10n","hash":{},"loc":{"start":{"line":1,"column":164},"end":{"line":1,"column":183}}}))+'">\r\n'+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"required"):t,{"name":"if","hash":{},"fn":e.program(1,s,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":2},"end":{"line":4,"column":9}}}))?o:"")+'  <span class="cs-tablink-text">'+e.escapeExpression((r=null!=(r=a(i,"tabTitle")||(null!=t?a(t,"tabTitle"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"tabTitle","hash":{},"loc":{"start":{"line":5,"column":32},"end":{"line":5,"column":44}}}):r))+"</span>\r\n</a>\r\n"+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"allow_delete"):t,{"name":"if","hash":{},"fn":e.program(3,s,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":0},"end":{"line":13,"column":7}}}))?o:"")}});return i.registerPartial("csui_controls_tab.panel_impl_tab.link.ext",n),n}),csui.define("csui/controls/tab.panel/impl/tab.link.ext.view",["csui/lib/underscore","csui/controls/tab.panel/impl/tab.link.view","csui/utils/base","hbs!csui/controls/tab.panel/impl/tab.link.ext","i18n!csui/controls/tab.panel/impl/nls/lang","i18n","csui/lib/binf/js/binf"],function(e,t,i,n,s,o){"use strict";return t.extend({"template":n,"templateHelpers":function(){var t=this.model.get("uniqueTabId"),i=this._getTitle();return{"linkId":"tablink-"+t,"selected":this._isOptionActiveTab(),"required_tooltip":s.requiredTooltip,"delete_icon":this.options.delete_icon||"circle_delete","delete_tooltip":this.options.delete_tooltip||s.deleteTooltip,"deleteTabAria":e.str.sformat(s.deleteTabAria,i),"tabTitle":i}},"events":{"show.binf.tab > a":"onShowingTab","shown.binf.tab > a":"onShownTab","focus .cs-delete-icon":"onFocusDeleteIcon","blur .cs-delete-icon":"onBlurDeleteIcon","click .cs-tablink-delete":"onDelete"},"ui":{"link":">a","deleteIcon":".cs-delete-icon","deleteIconParent":".cs-tablink-delete"},"constructor":function(e){this.options=e||{},t.prototype.constructor.apply(this,arguments),this.listenTo(this.model,"action:updated",function(){this._setRemoveable()})},"onRender":function(){this._setRemoveable()},"_getTitle":function(){var t,n=this.model.get("title");if(e.isObject(n)){for(var s="",r=o.settings.loadableLocales,a=0;a<r.length;a++){var l=r[a].toLowerCase();if(n[l]){s=n[l];break}}t=i.getClosestLocalizedString(n,s)}else t=n;return t},"_setRemoveable":function(){this.model.get("removeable")?(this.ui.deleteIcon.addClass("removeable"),this.ui.deleteIcon.attr("data-cstabindex","0"),this.ui.deleteIconParent.removeClass("binf-hidden")):(this.ui.deleteIcon.removeClass("removeable"),this.ui.deleteIcon.removeAttr("data-cstabindex"),this.ui.deleteIconParent.addClass("binf-hidden"))},"onFocusDeleteIcon":function(){this.ui.deleteIconParent.addClass("focused")},"onBlurDeleteIcon":function(){this.ui.deleteIconParent.removeClass("focused")},"onDelete":function(e){e.preventDefault(),this.deleteCurrentTab()},"deleteCurrentTab":function(){!0===this.model.get("allow_delete")&&!0===this.model.get("removeable")&&this.triggerMethod("delete:tab")}})}),csui.define("csui/controls/tab.panel/tab.links.ext.view",["csui/lib/underscore","csui/controls/tab.panel/impl/tab.links.view","hbs!csui/controls/tab.panel/impl/tab.links.ext","csui/controls/tab.panel/impl/tab.link.ext.view","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/lib/binf/js/binf"],function(e,t,i,n,s){"use strict";var o=t.extend({"template":i,"templateHelpers":function(){return{"tab_type":this.options.tabType||"binf-nav-tabs","toolbar":!!this.options.toolbar}},"events":{"click .left-toolbar":"onToolbarClicked","click .right-toolbar":"onToolbarClicked"},"childView":n,"childViewContainer":function(){return".tab-links-bar >."+this.tabType},"constructor":function(e){this.options=e||{},t.prototype.constructor.apply(this,arguments),this.listenTo(this,"metadata:schema:updated",function(e){this.children.findByModel(e).render()},this)},"onToolbarClicked":function(e){e.preventDefault(),e.stopPropagation()},"deleteTabById":function(e){var t=!1;if(void 0===e)return t;var i="#"===e.charAt(0)?e.slice(1):e,n=this.collection.findWhere({"uniqueTabId":i});if(n){var s=this.children.findByModel(n);s&&(s.deleteCurrentTab(),t=!0)}return t}});return e.extend(o.prototype,s),o}),csui.define("hbs!csui/controls/perspective.header/impl/perspective.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-back-button-container" title="'+e.escapeExpression((o=null!=(o=r(i,"backTitle")||(null!=t?r(t,"backTitle"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"backTitle","hash":{},"loc":{"start":{"line":1,"column":45},"end":{"line":1,"column":58}}}):o))+'"\r\n     tabindex="0" aria-label="'+e.escapeExpression((o=null!=(o=r(i,"backTitle")||(null!=t?r(t,"backTitle"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"backTitle","hash":{},"loc":{"start":{"line":2,"column":30},"end":{"line":2,"column":43}}}):o))+'" role="button">\r\n  <span class="arrow_back cs-go-back"></span>\r\n</div>\r\n<div class="cs-title-container">\r\n  <div class="cs-title-inner-container">\r\n    <span class="title-icon '+e.escapeExpression((o=null!=(o=r(i,"icon")||(null!=t?r(t,"icon"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":7,"column":28},"end":{"line":7,"column":36}}}):o))+'"></span>\r\n    <h2 class="title">'+e.escapeExpression((o=null!=(o=r(i,"title")||(null!=t?r(t,"title"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":8,"column":22},"end":{"line":8,"column":31}}}):o))+"</h2>\r\n  </div>\r\n</div>\r\n"}});return i.registerPartial("csui_controls_perspective.header_impl_perspective.header",n),n}),csui.define("csui/controls/perspective.header/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/perspective.header/impl/nls/root/lang",{"backTitle":"Back"}),csui.define("css!csui/controls/perspective.header/impl/perspective.header",[],function(){}),csui.define("csui/controls/perspective.header/perspective.header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","hbs!csui/controls/perspective.header/impl/perspective.header","i18n!csui/controls/perspective.header/impl/nls/lang","css!csui/controls/perspective.header/impl/perspective.header"],function(e,t,i,n,s){return i.ItemView.extend({"className":"csui-perspective-toolbar-container","template":n,"ui":{"headerControl":".cs-header-control"},"events":{"keydown":"onKeyInView","click .cs-back-button-container":"onBackButton"},"templateHelpers":function(){return{"icon":this.options.icon,"title":this.options.title,"backTitle":s.backTitle}},"constructor":function(e){i.View.prototype.constructor.apply(this,arguments)},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||this.onBackButton()},"onBackButton":function(){var e=this.options.context,t=e&&e.viewStateModel;t&&t.restoreLastRouter()}})}),csui.define("csui/controls/mixins/global.alert/global.alert.mixin",[],function(){"use strict";return{"prepareForGlobalAlert":function(){this.listenTo(this,"global.alert.inprogress",this.handleAlertInProgress),this.listenTo(this,"global.alert.completed",this.handleAlertComplete)},"handleAlertInProgress":function(){this.currentlyFocusedElement!==this.disableCurrentFocusElementHandler&&(this.originalCurrentlyFocusedElement=this.currentlyFocusedElement),this.currentlyFocusedElement=this.disableCurrentFocusElementHandler},"disableCurrentFocusElementHandler":function(){},"handleAlertComplete":function(){null!=this.originalCurrentlyFocusedElement&&(this.currentlyFocusedElement=this.originalCurrentlyFocusedElement,this.originalCurrentlyFocusedElement=void 0)}}}),csui.define("csui/utils/contexts/factories/metadata.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,n){var s=i.Model.extend({});return n.extend({"MetadataModelPrefix":"MetadataModel","propertyPrefix":"MetadataModel","constructor":function(o,r){n.prototype.constructor.apply(this,arguments);var a=this.options.MetadataModel||{};if(!(a instanceof i.Model)){var l=e.config();a=new s(a.models,t.extend({},a.options,l.options))}this.property=a}})}),csui.define("csui/controls/mixins/view.state/metadata.view.state.mixin",["module","csui/lib/underscore","csui/lib/marionette","csui/utils/contexts/factories/metadata.factory"],function(e,t,i,n){"use strict";return{"getViewStateDropdown":function(){return this.context&&this.context.viewStateModel.getViewState("dropdown")},"getDefaultViewStateDropdown":function(){return this.context&&this.context.viewStateModel.getDefaultViewState("dropdown")},"setViewStateDropdown":function(e,t){var i=this.context&&this.context.viewStateModel;return t&&(t.default&&i.setDefaultViewState("dropdown",e),t.title&&i.setViewState("dropdown",t.title)),i.setViewState("dropdown",e)},"setViewStateId":function(e,i){var s=this.context&&this.context.getModel(n),o=t.clone(s.get("metadata_info"));o&&(o.id=e,o.model=i.model,s.set("metadata_info",o,i))},"getViewStateId":function(e){var i=this.context&&this.context.getModel(n),s=t.clone(i.get("metadata_info"));if(s)return s.id},"isMetadataNavigation":function(){var e=this.context&&this.context.getModel(n);if(e){var t=e.get("metadata_info");if(t)return t.navigator}return!0},"getThumbnailViewState":function(){var e=this.context&&this.context.getModel(n);if(e){var t=e.get("metadata_info");if(t)return t.isThumbnailView}},"getViewStateSelectedProperty":function(){var e=this.context&&this.context.getModel(n);if(e){var t=e.get("metadata_info");if(t)return t.selectedProperty}},"isShowPermissionView":function(){var e=this.context&&this.context.getModel(n);if(e){var t=e.get("metadata_info");if(t)return t.showPermissionView}},"initOptionsFromMetadataInfo":function(e){var t=this.context&&this.context.getModel(n);if(t){var i=t.get("metadata_info");i&&(e.id=i.id,e.model=i.model,e.navigator=i.navigationView,e.originatingView=i.originatingView,e.targetView=i.targetView,e.commands=i.commands,e.showCloseIcon=i.showCloseIcon,e.showBackIcon=i.showBackIcon,e.selectedTab=i.selectedTab,e.showPermissionView=i.showPermissionView)}}}}),csui.define("csui/controls/mixins/view.state/node.view.state.mixin",["module","csui/lib/underscore","csui/lib/marionette","csui/utils/log"],function(e,t,i,n){"use strict";return n=n(e.id),{"getViewStatePage":function(){return this._parsePageInfo(this.context.viewStateModel.getViewState("page"))},"getDefaultViewStatePage":function(){return this._parsePageInfo(this.context.viewStateModel.getDefaultViewState("page"))},"_parsePageInfo":function(e){if(e&&(e=e.split("_"),e.length>1))try{return{"top":parseInt(e[0]),"skip":parseInt(e[1])}}catch(e){n.error("invalid page info in url.")}},"setViewStatePage":function(e,t,i){var n=this.context.viewStateModel;return e=e>50?100:e,i&&i.default&&n.setDefaultViewState("page",e+"_"+t,i),n.setViewState("page",e+"_"+t,i)},"getViewStateOrderBy":function(e){var t=e?e.order_by:this.context.viewStateModel.getViewState("order_by");return this._formatOrderBy(t)},"_formatOrderBy":function(e){return e&&e.replace(/_desc/g," desc").replace(/_asc/g," asc")},"getDefaultViewStateOrderBy":function(){var e=this.context.viewStateModel.getDefaultViewState("order_by");return this._formatOrderBy(e)},"setViewStateOrderBy":function(e,i){var n=this.context.viewStateModel;if(!e||!e.length)return n.setViewState("order_by",void 0,i);var s=n.getViewState("order_by"),o=e.join();return o!==s?(o=o.replace(/ /g,"_"),i&&i.default&&n.setDefaultViewState("order_by",o,t.omit(i,"default")),n.setViewState("order_by",o,i)):void 0},"getViewStateFilter":function(){return this.context.viewStateModel.getViewState("filter",!0)},"setViewStateFilter":function(e,i){if(this.getViewStateFilter()!==e){e=t.isEmpty(e)?"":JSON.stringify(e);var n=this.context.viewStateModel;return i||(i={}),i.encode=!0,i&&i.default&&n.setDefaultViewState("filter",e,i),n.setViewState("filter",e,i)}},"getViewStateTabIndex":function(){var e=this.context.viewStateModel.getViewState("tab");if(e)try{e=parseInt(e)}catch(e){n.error("invalid tab info in url.")}return e},"setViewStateTabIndex":function(e,t){var i=this.context.viewStateModel;return t&&t.default&&i.setDefaultViewState("tab",e,t),i.setViewState("tab",e,t)},"getDefaultViewStateTabIndex":function(){var e=this.context.viewStateModel.getDefaultViewState("tab");if(e)try{e=parseInt(e)}catch(e){n.error("invalid tab info in url.")}return e},"_restoreCollectionOptionsFromViewState":function(){var e=this.getViewStatePage();if(e&&e.top&&e.skip)try{e.top=parseInt(e.top),e.skip=parseInt(e.skip),this.options.pageSize=this.options.data.pageSize=e.top,this.options.pageNumber=e.skip/e.top}catch(e){n.error("invalid page info in url.")}var t=this.getViewStateOrderBy()||this.getDefaultViewStateOrderBy(),i=this.getViewStateFilter();try{i=JSON.parse(i)}catch(e){i={}}return{"top":e&&e.top,"skip":e&&e.skip,"filter":i,"orderBy":t}}}}),csui.define("csui/controls/mixins/view.state/toolitems.state.mixin",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/utils/log","csui/utils/base"],function(e,t,i,n,s,o,r){"use strict";return o=o(e.id),{"_hasIcon":function(){return this.model.get("iconName")||this._iconName||this._icon},"_calculateIconName":function(){this._stateIsOn=this.model.get("stateIsOn"),this._stateIsOn?(this._iconName=this.model.get("iconNameForOn"),this._iconName?this._stateIsOn=!1:this._iconName=this.model.get("iconName")):(this._iconName=this.model.get("iconName"),this._iconName||(this._icon=this.model.get("icon")))},"renderIconAndText":function(){this.options.renderIconAndText=!0,this.render(),this.options.renderIconAndText=!1},"renderTextOnly":function(e){this.isRenderedTextOnly()||(e&&this.saveRenderState(),this.options.renderTextOnly=!0,this.render(),this.options.renderTextOnly=!1)},"isRenderedTextOnly":function(){return!this._hasIcon()||!0===this.options.renderTextOnly&&!0!==this.options.renderIconAndText},"makeFocusable":function(){this.ui.link.addClass("csui-acc-focusable")},"_handleClick":function(e,t){if(r.isControlClick(e));else{e.preventDefault(),!0===this.model.get("menuWithMoreOptions")?e.stopPropagation():this.closeDropdown(),t&&this.model.set({"isKeyEvent":!!t},{"silent":!0});var i={"toolItem":this.model};this.triggerMethod("before:toolitem:action",i),i.cancel||this.triggerMethod("toolitem:action",i)}},"isSeparator":function(){return this.model.isSeparator()},"closeDropdown":function(){this.$el.closest("li.binf-dropdown.binf-open").find(".binf-dropdown-toggle").binf_dropdown("toggle")}}}),csui.define("csui/controls/mixins/view.state/multi.node.fetch.mixin",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/log"],function(e,t,i,n,s){"use strict";return s=s(e.id),{"_getNodesFromCollection":function(e,t,n){var s=i.Deferred(),o=[],r=[],a=t.map(function(t){var i=e.find({"id":t});return i?r.push(i):(i=new e.model({"id":t},{"connector":n}),o.push(i)),i}.bind(this));return 0===o.length?s.resolve(a,r):(this.blockActions&&this.blockActions(),this._fetchNodes(o,e).done(function(){s.resolve(a,r),this.unblockActions&&this.unblockActions()}.bind(this)),s.promise())},"_fetchNodes":function(e,t){var n=i.Deferred(),s=[];return e.forEach(function(e){s.push(e.fetch({"collection":t}))}),i.whenAll.apply(i,s).always(function(){n.resolve()}),n.promise()}}}),csui.define("csui/controls/mixins/view.state/node.selection.restore.mixin",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/utils/log"],function(e,t,i,n,s,o){"use strict";o=o(e.id);return{"initSelectionMixin":function(e,t,i){t=t||e.collection
;var n=t.selectedItems||this.getCollectionWithSpecificModelId(t);this.getAllSelectedNodes=function(){return n},this.allSelectedNodes=function(){return n},this.getContext=function(){return e.context},this.getCollection=function(){return t},this.getKey=function(){return i||"key"},this.setSelectionKey=function(e){i=e},this.getConnector=function(){return e.connector||t.connector};var s=this.getContext(),o=s&&s.viewStateModel;this.listenTo(n,"remove",this.removeItemToAllSelectedItems).listenTo(n,"add",this.addItemToAllSelectedItems).listenTo(n,"reset",this.resetAllSelectedItems),o&&this.listenTo(o,"change:multiItemOperationRunning",this._multiItemOperationEnded),this.listenTo(n,"reset update",function(){o&&o.get("enabled")&&this._saveSelectedNodesInSessionViewState(this.getAllSelectedNodes(),this.getContext())}.bind(this)),this.listenTo(t,"sync",this._restoreSelectedNodesFromSessionViewSate)},"addTableViewSelectionEvents":function(e){this.listenTo(e,"tableRowSelected",function(e){this.addNodesToSelection(e.nodes)}),this.listenTo(e,"tableRowUnselected",function(e){this.removeNodesFromSelection(e.nodes)})},"getCollectionWithSpecificModelId":function(e){var t=s.Collection.extend({"modelId":function(e){return e.id}}),i=new t;return e&&e.modelId&&(i.modelId=e.modelId),i},"removeItemToAllSelectedItems":function(e){var t=this.getCollection().get(e)||this.getCollection().findWhere({"id":e.get("id")});t?t.set("csuiIsSelected",!1):e.set("csuiIsSelected",!1),this.onRemoveItemFromAllSelectedItems&&this.onRemoveItemFromAllSelectedItems(e)},"addItemToAllSelectedItems":function(e){var t=this.getCollection().get(e)||this.getCollection().findWhere({"id":e.get("id")});t?t.set("csuiIsSelected",!0):e.set("csuiIsSelected",!0),this.onAddItemToAllSelectedItems&&this.onAddItemToAllSelectedItems(e)},"resetAllSelectedItems":function(){var e=this.getAllSelectedNodes();this.getCollection().each(t.bind(function(t){var i=e.get(t);t.set("csuiIsSelected",void 0!==i)},this)),this.onResetAllSelectedItems&&this.onResetAllSelectedItems()},"_saveSelectedNodesInSessionViewState":function(){if(!this.restoringSelection){var e=this.getContext(),i=e&&e.viewStateModel;if(i){var n=i.getSessionViewState("selected_nodes")||{},s=this.getAllSelectedNodes().models.map(function(e){return e.get("id")});s.length>0?(n&&(n=t.clone(n)),n[this.getKey()]=s,i.setSessionViewState("selected_nodes",n)):(n&&delete n[this.getKey()],Object.keys(n)>0?i.setSessionViewState("selected_nodes",t.clone(n)):i.setSessionViewState("selected_nodes",void 0))}}},"_multiItemOperationEnded":function(){var e=this.getContext(),t=e&&e.viewStateModel;t&&!t.get("multiItemOperationRunning")&&this._restoreSelectedNodesPending&&this._restoreSelectedNodesFromSessionViewSate()},"_restoreSelectedNodesFromSessionViewSate":function(){var e=this.getContext(),t=e&&e.viewStateModel;if(t&&t.get("multiItemOperationRunning"))return this._restoreSelectedNodesPending=!0,!0;if(t&&t.get("enabled")){var i=t.getSessionViewState("selected_nodes");if(i){var n=i[this.getKey()]||[],s=this.getCollection(),o=this.getConnector();n=this._removeSelectedFetchedNodesIds(n),n&&n.length&&(this.restoringSelection=!0,this._getNodesFromCollection(s,n,o).done(this._afterFetchingAllSelectedNodes.bind(this)))}}},"_afterFetchingAllSelectedNodes":function(e,t){var i=this.getContext(),n=i&&i.viewStateModel,s=n.get("session_state"),o=n.get("state");e&&s&&(void 0===s.id||o&&o.filter&&o.filter.length||e[0]&&e[0].get("parent_id")===this.getKey()||"key"===this.getKey())&&n&&n.getSessionViewState("selected_nodes")&&this._resetSelectedNodeCollections(e,t),this.restoringSelection=!1},"_resetSelectedNodeCollections":function(e,t){if(this.getAllSelectedNodes().reset(e),this.isTableViewInTheDom())t&&this.tableView.selectedChildren.reset(t);else if(this.thumbnailView){if(t&&this.thumbnail.selectedChildren.reset(t),this.collection.length>0){var i=this.collection.where({"csuiIsSelected":!0}).length;i>0&&this.thumbnail.updateSelectAllCheckbox.call(this)}}else this.getCollection().trigger("sync")},"_removeSelectedFetchedNodesIds":function(e){var t=this.getAllSelectedNodes();return e&&e.length>0&&t.length>0&&(e=e.filter(function(e){var i=t.find({"id":e});return i&&1===i.attributes.length})),e},"isTableViewInTheDom":function(){return this.tableView&&this.el&&this.el.querySelector(".binf-table")},"setupTableSelection":function(e){this.listenTo(e.collection,"sync",t.bind(function(){var e=this.getAllSelectedNodes();e&&e.each(t.bind(function(t){var i=e.get(t),n=e.findIndex(i);-1!==n&&e.at(n)!==t&&(this.getAllSelectedNodes().remove(e.at(n)),this.getAllSelectedNodes().add(t,{"at":n}))},this)),this.onTableViewCollectionSync(),this.enableViewState&&this._saveSelectedNodesInSessionViewState()},this))},"clearAllSelectedNodes":function(){var e=this.getAllSelectedNodes();e&&e.reset([])},"addNodesToSelection":function(e){if(e){var i=this.getAllSelectedNodes(),n=i.models.slice(0);t.each(e,function(e){i.get(e)||void 0===e.get("id")||n.push(e)},this),i.reset(n)}},"removeNodesFromSelection":function(e){if(e){var i=this.getAllSelectedNodes();t.each(e,function(e){i.remove(e,{"silent":!0})},this),i.reset(t.clone(i.models))}}}}),csui.define("csui/controls/tile/behaviors/blocking.behavior",["csui/lib/underscore","csui/lib/marionette","csui/controls/progressblocker/blocker"],function(e,t,i){"use strict";function n(t,i){i=this.options||i||{};var n=i[t];return e.isFunction(n)?i[t].call(this.view):n}return t.Behavior.extend({"constructor":function(e,s){t.Behavior.prototype.constructor.apply(this,arguments);var o=n.call(this,"blockingParentView",e);o?i.delegate(s,o):i.imbue(s),this.collection&&s.listenTo(s.collection,"request",s.blockActions).listenTo(s.collection,"sync",s.unblockActions).listenTo(s.collection,"destroy",s.unblockActions).listenTo(s.collection,"error",s.unblockActions),s.model&&s.listenTo(s.collection,"request",s.blockActions).listenTo(s.collection,"sync",s.unblockActions).listenTo(s.collection,"error",s.unblockActions)}})}),csui.define("csui/controls/tile/behaviors/infinite.scrolling.behavior",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette"],function(e,t,i,n){"use strict";function s(e){var t=this.options||{},n=t[e];return i.isFunction(n)?n.call(this.view):n}return n.Behavior.extend({"defaults":{"content":null,"contentParent":null,"fetchMoreItemsThreshold":95},"constructor":function(e,t){n.Behavior.prototype.constructor.apply(this,arguments);var i=s.call(this,"bindEvent")||"render",o=s.call(this,"unbindEvent")||"before:destroy";this.listenTo(t,i,this._bindScrollingEvents),this.listenTo(t,o,this._unbindScrollingEvents)},"_bindScrollingEvents":function(){var e=this.__contentParent=s.call(this,"contentParent");this._contentParent&&this._contentParent.off("scroll."+this.view.cid),this._contentParent=e?this.view.$(e):this.view.$el,this._contentParent.on("scroll."+this.view.cid,i.bind(this._checkScrollPosition,this))},"_checkScrollPosition":function(){var e=s.call(this,"content");this._content=e?this.view.$(e):this.__contentParent?this._contentParent.children().first():this.view.$el;var n,o=s.call(this,"fetchMoreItemsThreshold")||this.defaults.fetchMoreItemsThreshold;n=1===this._content.length?this._content.outerHeight(!0):i.reduce(this._content,function(e,i){return e+t(i).outerHeight(!0)},0);var r,a=this._contentParent.height(),l=this._contentParent.scrollTop();(r=100*(a-(n-l-a))/a)>=o&&this._checkScrollPositionFetch()},"_checkScrollPositionFetch":function(){var e=this.view.collection;if(e.length<e.totalCount&&!e.fetching&&e.skipCount<e.length){if(this.fetching)return;this.fetching=!0;var t=this;this.view.trigger("before:collection:scroll:fetch"),e.setSkip(e.length,!1),e.fetch({"reset":!1,"remove":!1,"merge":!1,"success":function(){delete t.fetching,t.view.trigger("collection:scroll:fetch")},"error":function(){delete t.fetching,t.view.trigger("collection:scroll:fetch:error")}})}},"_unbindScrollingEvents":function(){this._contentParent&&this._contentParent.off("scroll."+this.view.cid)}})}),csui.define("csui/controls/tile/behaviors/parent.scrollbar.updating.behavior",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/tile/behaviors/perfect.scrolling.behavior"],function(e,t,i,n){"use strict";function s(e){t.event.trigger("csui:update:scrollbar",{"view":e},e.el,!1)}function o(t,i){var n=i||this.options||{},s=n[t];return e.isFunction(s)?n[t].call(this.view):s}var r=i.Region.extend({"constructor":function(e){i.Region.prototype.constructor.apply(this,arguments),this._swapping=!1,this.listenTo(this,"before:swapOut",function(){this._swapping=!0}).listenTo(this,"swapOut",function(){this._swapping=!1}).listenTo(this,"show",function(){this._requestScrollbarUpdate()}).listenTo(this,"empty",function(){this._swapping||this._requestScrollbarUpdate()})},"_requestScrollbarUpdate":function(){s(this._parent._parent)}});return i.Behavior.extend({"constructor":function(s,r){if(i.Behavior.prototype.constructor.apply(this,arguments),n.usePerfectScrollbar()){var a=o.call(this,"updateOnWindowResize");this._renderState=0,this.listenTo(r,"before:render",function(){this._renderState=1}).listenTo(r,"render",function(){this._renderState=0,this._requestScrollbarUpdate()}).listenTo(r,"update:scrollbar",this._requestScrollbarUpdate).listenToOnce(r,"before:render",function(){a&&(t(window).on("resize."+r.cid,e.bind(this._updateScrollbar,this)),this.listenToOnce(r,"before:destroy",function(){t(window).off("resize."+r.cid)})),r instanceof i.CollectionView&&r.collection&&this.listenTo(r.collection,"reset",function(){this._resetTriggered=!0}).listenTo(r,"before:render:collection",function(){++this._renderState}).listenTo(r,"render:collection",function(){this._resetTriggered=!1,--this._renderState||this._requestScrollbarUpdate()}).listenTo(r,"render:empty",function(){!this._resetTriggered&&this._renderState||this._requestScrollbarUpdate()}).listenTo(r,"add:child",function(){this._renderState||this._requestScrollbarUpdate()}).listenTo(r,"remove:child",function(){this._resetTriggered||this._renderState||this._requestScrollbarUpdate()})})}},"_requestScrollbarUpdate":function(){s(this.view)}},{"Region":r})}),csui.define("hbs!csui/controls/tile/behaviors/impl/searching.behavior",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form class="search-box binf-hidden">\r\n  <input class="search" type="search" placeholder="'+e.escapeExpression((o=null!=(o=r(i,"searchPlaceholder")||(null!=t?r(t,"searchPlaceholder"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"searchPlaceholder","hash":{},"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":72}}}):o))+'" style="display: none">\r\n  <span class="clearer csui-icon formfield_clear"></span>\r\n</form><span class="icon icon-search" title="'+e.escapeExpression((o=null!=(o=r(i,"searchIconTitle")||(null!=t?r(t,"searchIconTitle"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"searchIconTitle","hash":{},"loc":{"start":{"line":4,"column":45},"end":{"line":4,"column":64}}}):o))+'" aria-label="'+e.escapeExpression((o=null!=(o=r(i,"searchIconAria")||(null!=t?r(t,"searchIconAria"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"searchIconAria","hash":{},"loc":{"start":{"line":4,"column":78},"end":{"line":4,"column":96}}}):o))+'" role="button"></span>\r\n'}});return i.registerPartial("csui_controls_tile_behaviors_impl_searching.behavior",n),n}),csui.define("csui/controls/tile/behaviors/searching.behavior",["csui/lib/underscore","csui/lib/marionette","hbs!csui/controls/tile/behaviors/impl/searching.behavior","csui/lib/jquery.ui/js/jquery-ui"],function(e,t,i){"use strict";function n(t){var i=this.options||{},n=i[t];return e.isFunction(n)?i[t].call(this.view):n}return t.Behavior.extend({"defaults":{"searchPlaceholder":"Type to filter","headerTitle":".tile-title","searchButton":".tile-controls"},"ui":function(){return{"headerTitle":n.call(this,"headerTitle"),"searchBox":".search-box","searchInput":".search","clearer":".clearer"}},"triggers":{"click .icon-search":"toggle:search"},"constructor":function(e,i){t.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(i,"render",this._renderSearchButton),this.listenTo(i,"toggle:search",this._toggleSearching)},"_renderSearchButton":function(){var e=n.call(this,"searchButton"),t=this.view.$(e),s=n.call(this,"searchPlaceholder"),o=n.call(this,"searchIconTitle"),r=o||"Search",a=n.call(this,"searchIconAria"),l=a||r,c={"searchPlaceholder":s,"searchIconTitle":r,"searchIconAria":l};t.html(i(c)),this.view._bindUIElements.call(this)},"_toggleSearching":function(){var e=this;this.ui.searchInput.val(""),this.ui.clearer.toggle(!1),this.ui.headerTitle.toggle("fade"),this.ui.searchBox.removeClass("binf-hidden"),this.ui.searchInput.toggle("blind",{"direction":"right"},200,function(){e.ui.searchInput.is(":visible")&&e.ui.searchInput.trigger("focus")})}})}),csui.define("csui/behaviors/drag.drop/dnd.item.behaviour",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone"],function(e,t,i,n){var s=i.Behavior.extend({"constructor":function(e,t){this.view=t,i.Behavior.prototype.constructor.apply(this,arguments),this._registerListeners()},"_registerListeners":function(){this.listenTo(this.view,"render",this._initDnD)},"_initDnD":function(){this.$el.addClass(s.DRAGGABLE_CLASSNAME),this.$el.attr(s.DRAGGABLE_DATA_ATTR,this.view.model.cid)}},{"DRAGGABLE_CLASSNAME":"csui-draggable-item","DRAGGABLE_DATA_ATTR":"data-csui-draggable-item"});return s}),csui.define("csui/behaviors/drag.drop/dnd.container.behaviour",["require","i18n","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/behaviors/drag.drop/dnd.item.behaviour","csui/lib/jquery.ui/js/jquery-ui"],function(e,t,i,n,s,o,r){return s.Behavior.extend({"defaults":{"placeholder":void 0,"handle":void 0,"draggableItem":"."+r.DRAGGABLE_CLASSNAME,"disableDraggable":".csui-draggable-item-disable","over":!1,"receive":!1,"helper":"original"},"constructor":function(e,t){this.view=t,s.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(this.view,"render",this._initSorting)},"_getPlaceholder":function(e){var t=this.options.placeholder;if(!t||i.isString(t)){var s=t;t=function(){var t=e[0].nodeName.toLowerCase(),i=n("<"+t+">");return i.addClass("ui-sortable-placeholder").addClass(s||e[0].className).removeClass("ui-sortable-helper"),i}}return t.call(this,e)},"_initSorting":function(){this.view.$el.addClass("csui-dnd-container"),this.$el.sortable({"items":this.options.draggableItem,"cancel":this.options.disableDraggable,"handle":this.options.handle,"placeholder":{"element":this._getPlaceholder.bind(this),"update":function(){}},"helper":this.options.helper,"start":this._onSortStart.bind(this),"stop":this._onSortStop.bind(this),"over":this.options.over,"out":this.options.out,"receive":this.options.receive})},"_onSortStart":function(e,t){this.$el.addClass("csui-drag-start"),this.options.start&&this.options.start(e,t)},"_onSortStop":function(e,t){this.$el.removeClass("csui-drag-start");var i=t.item.attr(r.DRAGGABLE_DATA_ATTR),n=this.view.collection.get(i),s=this.view.collection.indexOf(n),o=this.$el.find("[data-csui-draggable-item="+i+"]").index();s!==o&&(this.view.collection.remove(n,{"silent":!0}),this.view.collection.add(n,{"at":o,"silent":!0}),this.view.collection.trigger("sort"),this.options.stop&&this.options.stop(e,t))}})}),csui.define("csui/perspectives/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspectives/impl/nls/root/lang",{"invalidWidgetOptions":"Some widgets have options that require values before the perspective can be saved. Please click on each of the highlighted widgets and check for any required options that have missing values.","invalidWidget":"Some widgets are not configurable. Please remove these widgets to save.","widgetsMigrated":"Single shortcut widgets were converted to shortcut group widgets.","widgetValidationFailed":"Validation failed for some of the widgets."}),csui.define("csui/perspectives/mixins/perspective.edit.mixin",["require","csui/lib/underscore","csui/lib/jquery","csui/utils/log","i18n!csui/perspectives/impl/nls/lang","csui/models/node/node.model","csui/models/widget/widget.model","csui/utils/contexts/factories/connector","csui/utils/perspective/perspective.util"],function(e,t,i,n,s,o,r,a,l){"use strict";var c=["otcs_node_picker","otconws_workspacetype_id","otcs_user_picker","otconws_metadata"],u={"mixin":function(d){return t.extend(d,{"prepareForEditMode":function(){this.listenTo(this,"update:widget:options",function(e){var t=e.widgetView.model.get("widget");"csui/perspective.manage/widgets/perspective.widget"===t.type&&(t=t.options),t.options=e.options,e.widgetView.model.set("hasValidOptions",e.isValid,{"silent":!0})})},"_notifyAboutWidgetMigrations":function(){csui.require(["csui/controls/globalmessage/globalmessage"],function(e){e.showMessage("info",s.widgetsMigrated)})},"_resolveWidgets":function(e){function n(e,i){if(e.useInstead){var s=e.useInstead.get("view");return t.isFunction(s.migrateData)&&(i.options=s.migrateData(i.type,i.options)),i.type=e.useInstead.id,i.view=s,n(e.useInstead,i)}return e}var s=this,o=i.Deferred(),r=t.chain(e).pluck("type").unique().map(function(e){return{"id":e}}).value(),a=t.map(r,function(e){return s._resolveWidget(e,!0)});return i.whenAll.apply(i,a).always(function(i){var a=!1,l={};t.each(r,function(e,t){l[e.id]=i[t]});var c=t.map(e,function(e){var t=l[e.type],i=n(t,e);return t!==i&&(a=!0),i});a&&s._notifyAboutWidgetMigrations(),o.resolve(c)}),o},"_resolveWidget":function(e,t){var n=this,s=i.Deferred(),o=function(e){t?s.resolve(l):s.reject(e)},a=function(){var t=l.get("manifest");!n._isPersonalizeMode()&&t.deprecated&&t.useInstead?(l.deprecated=t.deprecated,n._resolveWidget({"id":t.useInstead}).then(function(t){e.view=t.view,l.useInstead=t,s.resolve(l)},o)):(e.view=l.get("view"),s.resolve(l))},l=new r({"id":e.id||e.type});return l.fetch().then(a,o),s.promise()},"serializeWidget":function(e,n){var o=i.Deferred(),r=e.get("widget");if("csui/widgets/error"===r.type)return r=r.options.originalWidget,r=t.pick(r,"type","kind","options",l.getExtraWidgetKeys()),o.resolve({"widget":r}),o.promise();if(!1!==e.get("hasValidOptions")){var a=r.type,c=r.options;delete c.___pman_opencallout,"csui/perspective.manage/widgets/perspective.widget"===a&&(a=c.widget.id,r.type=a,c=c.options,"csui/widgets/html.editor"===a&&(r.options=c)),c=u.removeNullsInObject(c),this._resolveWidget(r).done(t.bind(function(e){var i=e?e.get("manifest"):{},s=i&&i.options?i.options:{},a=[];this.collectionConstantData(c,s,a,n+"/options"),r=t.pick(r,"type","kind",l.getExtraWidgetKeys()),r.options=c,o.resolve({"widget":r,"constantsData":a})},this)).fail(function(e){o.reject({"error":s.invalidWidget})})}else o.reject({"error":s.invalidWidgetOptions});return o.promise()},"collectionConstantData":function(e,i,n,s){t.isEmpty(i)||(t.isArray(e)?t.each(e,function(e,t){this.collectionConstantData(e,i.items,n,s+"/"+t)},this):t.isObject(e)?t.each(e,function(e,t){i.fields&&i.fields[t]&&this.collectionConstantData(e,i.fields[t],n,s+"/"+t)},this):-1!==c.indexOf(i.type)&&n.push({"type":i.type,"path":s}))},"_isPersonalizeMode":function(){return this.options.perspectiveMode===l.MODE_PERSONALIZE},"executeCallbacks":function(e,n,s){if(this._isPersonalizeMode())return i.Deferred().resolve().promise();this.perspectiveWidgets=e;var o=i.Deferred();return e=t.filter(e,function(e){return"csui/widgets/error"!==e.widget.type}),this.loadCallbacks(e).then(t.bind(function(e){var r=t.map(e,t.bind(function(e){return this.initializeWidget(e,n,s)},this));i.whenAll.apply(i,r).then(function(){o.resolve()},function(e){o.reject(e)})},this)),o.promise()},"loadCallbacks":function(s){var o=this,r=i.Deferred(),a=t.chain(s).groupBy(function(e){return e.widget.type}).map(function(s){var r=i.Deferred();return o._resolveWidget(t.pick(s[0].widget,"type")).done(function(i){var s=!!i&&i.get("manifest"),o=!!s&&s.callback;o?e([o],function(e){e&&t.isFunction(e)?(i.type=i.id,r.resolve(t.extend(i,new e))):r.reject()},function(e){n.warn("Failed to load callback. {0}",e),r.reject(e)}):r.resolve()}).fail(function(){r.resolve()}),r.promise()}).compact().value();return i.whenAll.apply(i,a).then(function(e){r.resolve(t.compact(e))}),r.promise()},"initializeWidget":function(e,n,s){var o=i.Deferred(),r=t.filter(this.perspectiveWidgets,function(t){return t.widget.type===e.type}),l=n.get("id")?"update":"create",c={"priority":parseInt(n.get("priority"))||void 0,"title":n.get("title")||"","overrideType":n.get("overrideType"),"scope":n.get("scope")||"","containerType":parseInt(n.get("containerType"))||void 0,"perspectiveParentId":parseInt(n.get("override_id"))||parseInt(n.get("perspectivesVolId"))||void 0,"overrideObjId":parseInt(n.get("node"))||void 0,"assetContainerId":n.get("assetContainerId")||void 0},u={"mode":l,"widgets":r,"settings":c,"connector":s.getObject(a)};if("update"==l){var d=this.getPreviousWidgets&&this.getPreviousWidgets(n);u.previousWidgets=t.filter(d,function(t){return t.widget.type===e.type})}var p=this.getHiddenWidgetOptions(e,u,n);return i.when(p).done(t.bind(function(e){o.resolve()},this)).fail(function(e){o.reject(e[0]||e)}),o.promise()},"getHiddenWidgetOptions":function(e,n,s){var o=i.Deferred(),r=i.Deferred(),a=[],l=[],c=r.promise(),u=!1;return e&&t.has(e,"defineWidgetOptionsCommon")&&t.has(e,"defineWidgetOptionsEach")?(t.has(e,"ensureContainer")&&t.isFunction(e.ensureContainer)&&e.ensureContainer(n)?c=this.ensureContainer(n):u=!0,u&&r.resolve(),i.when(c).done(function(r){if(!t.has(n.settings,"assetContainerId")||t.isUndefined(n.settings.assetContainerId)){var c=r?r.id:n.settings.overrideObjId,u={"assetContainerId":c};t.extend(n.settings,u),s.set(u)}var d=e.defineWidgetOptionsCommon(n);if(!d||"object"!=typeof d||!t.has(d,"state"))return o.reject(),o.promise();i.when(d).done(function(s){t.has(n,"widgets")&&t.isArray(n.widgets)&&(t.each(n.widgets,function(o,r){t.has(o,"newOptions")||(o.newOptions={}),t.extend(o.newOptions,s),a.push(e.defineWidgetOptionsEach(o,n)),i.when(a[r]).done(function(e){t.extend(o.newOptions,e)}).fail(function(e){l.push(e)})}),i.when.apply(this,a).done(function(){o.resolve(n)}).fail(function(e){l.push(e),o.reject(l)}))}).fail(function(e){l.push(e),o.reject(l)})}).fail(function(e){r.reject(e),o.reject([e])}),o.promise()):(o.reject(),o.promise())},"ensureContainer":function(e){function n(){return t.now()+Math.random().toString().substring(2)}var s=i.Deferred();return t.has(e.settings,"assetContainerId")&&!isNaN(parseInt(e.settings.assetContainerId))?s.resolve(!1):(this.perspectiveAssetsVolume=new o({"id":"volume","type":954},{"connector":e.connector}),this.perspectiveAssetsVolume.fetch().then(t.bind(function(){var t={"url":e.connector.connection.url+"/nodes","type":"POST","data":{"type":955,"parent_id":this.perspectiveAssetsVolume.get("id"),"name":"assets_"+n()},"success":function(e){s.resolve(e)},"error":function(e){s.reject(e.responseJSON)}};e.connector.makeAjaxCall(t).done(function(e){s.resolve(e)}).fail(function(e){s.reject(e)})},this))),s.promise()},"getEmptyPlaceholderWidget":function(e){return e||(e=this.options),{"type":l.getEmptyPlaceholderWidgetType(e.perspectiveMode),"className":"csui-draggable-item-disable","__isPlacehoder":!0,"options":{}}},"isEmptyPlaceholder":function(e){return l.isEmptyPlaceholder(e,this.options.perspectiveMode)},"validateAndGenerateWidgetId":function(e){t.each(e,function(e,t){l.hasWidgetId(e)||(e[l.KEY_WIDGET_ID]=l.generateWidgetId(this.options.perspectiveMode)+t)},this);var i=t.pluck(e,l.KEY_WIDGET_ID);return i.length!==t.uniq(i).length?(n.warn("Found duplicate widget IDs: {0}",i)&&console.warn(n.last),!1):!!t.every(e,l.hasWidgetId)||(n.warn("Found widgets with No Ids: {0}",e)&&console.warn(n.last),!1)}})},"removeNullsInObject":function(e){function i(i,n){("object"==typeof i||t.isArray(i))&&u.removeNullsInObject(i),(t.isNull(i)||t.isUndefined(i)||0===i.length||t.isObject(i)&&t.isEmpty(i))&&(t.isArray(e)?e.splice(n,1):delete e[n])}if(t.isArray(e))for(var n=e.length-1;n>=0;n--)i(e[n],n);else t.each(e,i);return e}};return u}),csui.define("csui/perspectives/flow/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspectives/flow/impl/nls/root/lang",{"tileLabel":"Single Width","headerLabel":"Double Width","fullpageLabel":"Full Page"}),csui.define("css!csui/perspectives/impl/perspective",[],function(){}),csui.define("css!csui/perspectives/flow/impl/flow.perspective",[],function(){}),csui.define("csui/perspectives/flow/flow.perspective.view",["require","module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/radio","csui/models/widget/widget.collection","csui/utils/base","csui/controls/grid/grid.view","csui/utils/log","csui/utils/contexts/fragment/context.fragment","csui/behaviors/widget.container/widget.container.behavior","csui/behaviors/drag.drop/dnd.item.behaviour","csui/behaviors/drag.drop/dnd.container.behaviour","csui/perspectives/mixins/perspective.edit.mixin","csui/utils/perspective/perspective.util","i18n!csui/perspectives/flow/impl/nls/lang","i18n!csui/perspectives/impl/nls/lang","css!csui/perspectives/impl/perspective","css!csui/perspectives/flow/impl/flow.perspective"],function(e,t,i,n,s,o,r,a,l,c,u,d,p,h,f,m,g,b,v){"use strict";var y=t.config();i.defaults(y,{"defaultWidgetKind":"tile","widgetSizes":{"fullpage":{"widths":{"xs":12},"heights":{"xs":"full"}},"header":{"widths":{"xs":12,"md":8,"xl":6}},"widetile":{"widths":{"xs":12,"lg":6}},"tile":{"widths":{"xs":12,"sm":6,"md":4,"xl":3}}}});var x=c.extend({"className":function(){var e=this.options.className||"cs-perspective cs-flow-perspective grid-rows",t=i.result(c.prototype,"className");return t&&(e=e+" "+t),e},"cellView":function(e){var t=e.get("widget");if(t){if(!t.view)throw new o.Error({"name":"UnresolvedWidgetError","message":'Widget "'+t.type+'" not resolved:'+t.error});return t.view}},"cellViewOptions":function(e,t){var i=e.get("widget"),n={"context":this.options.context,"data":i&&i.options||{},"model":void 0,"perspectiveMode":this.options.perspectiveMode,"widgetContainer":t};return n[g.KEY_WIDGET_ID]=i[g.KEY_WIDGET_ID],n},"cellConstructionFailed":function(e,t){var n=e.get("widget");if(n){var s=p.getErrorWidget(n,t.message);e.set("widget",i.defaults(s,n.attributes))}},"constructor":function(e){e||(e={}),e=n.extend(!0,{},e),this.widgetSizes=i.defaults(e.widgetSizes,y.widgetSizes),e.context.perspective.type=e.type,this._preInitialize(e),c.prototype.constructor.call(this,e),this._postInitialize()},"_preInitialize":function(e){if(e.widgets||(e.widgets=[]),e.perspectiveMode?(this._prepareOptionsForEditMode(e),this.prepareForEditMode()):e.widgets=i.reject(e.widgets,g.isHiddenWidget,this),!e.collection){var t=i.chain(y).pick(function(e,t){return t.indexOf("-widgets")>=0}).values().flatten();t&&t._wrapped&&t._wrapped.length>0&&(e.widgets=i.filter(e.widgets,function(e){return i.contains(t._wrapped,e.type)})),e.widgets=i.filter(e.widgets,function(t){return void 0!=l.filterUnSupportedWidgets(t,y,e.perspectiveMode===g.MODE_EDIT_PERSPECTIVE)}),e.collection=this._createCollection(e),e.context.widgetCollection=e.collection}},"_postInitialize":function(){this.options.perspectiveMode&&this._registerEditEvents()},"_prepareOptionsForEditMode":function(t){function n(e,t){var i=s._prepareGridCell(e,t);s.collection.at(0).columns.add(i,{"at":t}),s.options.context.trigger("update:widget:panel",{"action":"add","widgetModel":i.widget})}var s=this,o=i.findIndex(t.widgets,g.isHiddenWidget,this);-1===o&&(o=t.widgets.length),t.widgets.splice(o,0,this.getEmptyPlaceholderWidget(t)),t.cellBehaviours={"PerspectiveWidgetConfig":{"behaviorClass":e("csui/perspective.manage/behaviours/pman.widget.config.behaviour"),"perspectiveView":this,"perspectiveMode":t.perspectiveMode},"DnDItemBehaviour":{"behaviorClass":h}},t.contextFragment=new d(t.context),this._createDnDPlaceholderWidget(),t.reorderOnSort=!0,t.rowBehaviours={"DnDContainerBehaviour":{"behaviorClass":f,"placeholder":this._getDnDPlaceholder.bind(this),"handle":".csui-pman-widget-masking","helper":"clone","start":function(e,t){var i=s.$el.find(".binf-popover");i.length&&(i.removeClass("pman-ms-popover"),i.hide(),i.binf_popover("destroy"))},"over":i.bind(function(e,t){var i=this._getDnDPlaceholder(t.helper),n=t.placeholder;n.show(),n.attr("class",i.attr("class")),n.html(i.html()),n.css("visibility","visible"),n.css({"width":"","height":""}),n.data("pman.widget",t.helper.data("pman.widget")),n.removeData("isBeyondLayout"),t.helper.data("pman.widget")&&this._resolveWidget({"type":t.helper.data("pman.widget").id}).done(function(e){n.data("pman.widget.view",e)})},this),"out":function(e,t){t.placeholder.hide(),t.placeholder.data("isBeyondLayout",!0)},"receive":i.bind(function(e,t){if(!0===t.placeholder.data("isBeyondLayout")||!t.placeholder.data("pman.widget.view"))return void t.sender.sortable("cancel");if(t.position.top>0){var s,o=t.placeholder.data("pman.widget"),r=t.item.index(),a=o.get("manifest"),l=t.placeholder.data("pman.widget.view");s=g.isEligibleForLiveWidget(a)?{"type":o.id,"kind":a.kind,"view":l.get("view")}:{"type":"csui/perspective.manage/widgets/perspective.widget","kind":a.kind,"options":{"options":{},"widget":o},"view":l=this.pespectiveWidgetView},s.options=i.extend({"___pman_isdropped":!0},s.options),l?n(s,r):this._resolveWidget(s).done(function(e){n(s,r)})}this._ensurePlaceholder(),t.sender.sortable("cancel")},this),"stop":i.bind(function(){this._ensurePlaceholder()},this)}}},"_ensurePlaceholder":function(){var e=this.collection.at(0).columns,t=this,i=e.find(function(e){return this.isEmptyPlaceholder(e.get("widget"))},this);if(i){var n=e.indexOf(i),s=this._getPlaceholderIdealIndex(n);n!==s&&(e.remove(i),e.add(i,{"at":s}))}else{var o=this.getEmptyPlaceholderWidget();this._resolveWidget(o).done(function(i){var n=t._createCell(o,i,e.length),s=t._getPlaceholderIdealIndex();e.add(n,{"at":s+1})})}},"_getPlaceholderIdealIndex":function(e){var t=this.collection.at(0).columns,i=t.length;switch(e=e||-1,this.options.perspectiveMode){case g.MODE_PERSONALIZE:for(;i-- >e&&g.isHiddenWidget(t.at(i).get("widget")););return i;case g.MODE_EDIT_PERSPECTIVE:return i-1;default:return e}},"_createDnDPlaceholderWidget":function(){var e=this,t={"type":"csui/perspective.manage/widgets/perspective.placeholder"};this._resolveWidget(t).done(function(i){var n=e._createCell(t,i,0);n.className="pman-dnd-hover-placeholder",e.dndPlaceholderCell=new c.CellView({"grid":e,"model":new s.Model(n)}),e.dndPlaceholderCell.render()}),this._resolveWidget({"type":"csui/perspective.manage/widgets/perspective.widget"}).done(function(t){e.pespectiveWidgetView=t.get("view")})},"_getDnDPlaceholder":function(e){var t=e.data("pman.widget");if(t){var i=t.attributes.manifest.kind;i||(i=y.defaultWidgetKind);var n=this.widgetSizes[i];this.dndPlaceholderCell.model.set({"sizes":n.widths,"heights":n.heights})}return this.dndPlaceholderCell.$el},"_registerEditEvents":function(){var e=this;this.listenTo(this,"delete:widget",function(t){var i=e.collection.at(0).columns,n=t.model;i.remove(n)}),this.listenTo(this,"update:widget:size",function(e,t){var i=this.widgetSizes[t],n=e.model.get("widget");n.kind=t,e.model.set({"sizes":i.widths,"heights":i.heights,"widget":n}),e.$el.addClass("csui-draggable-item csui-pman-editable-widget");var s={"widgetView":e,"kind":t};r.channel("newlayout:widget:size").trigger("update:widget:size",s)}),this.listenTo(this,"replace:widget",this._replaceWidget),this.options.perspectiveMode===g.MODE_PERSONALIZE&&this.listenTo(this,"update:widget:options",function(e){var t=e.widgetView,i=t.model.get("widget");this.isEmptyPlaceholder(i)&&(delete i.__isPlacehoder,
t.model.unset("className",{"silent":!0}),t.$el.removeClass("csui-draggable-item-disable"),this._ensurePlaceholder())})},"_replaceWidget":function(e,t){if(this.getPManPlaceholderWidget){var i=this,n=this.collection.at(0).columns;this._resolveWidget(t).done(function(){i.isEmptyPlaceholder(e.model.get("widget"))||(t.kind=e.model.get("widget").kind);var s=i._prepareGridCell(t,n.indexOf(e.model));i.options.context.clear(),e.model.set(s),i.options.context.fetch(),i._ensurePlaceholder()})}},"_createCollection":function(e){var t=this,n=new s.Collection;if(e.perspectiveMode)this.widgetsResolved=this._resolveWidgets(e.widgets).always(function(o){var r=n.add({}),a=i.map(e.widgets,function(e,i){return t._createCell(e,o[i],i)});return r.columns=new s.Collection(a),o});else{var o=i.chain(e.widgets).pluck("type").unique().map(function(e){return{"id":e}}).value(),r=new a(o);this.widgetsResolved=r.fetch().then(function(){return n.add({}).columns=t._createColumns(e.widgets,r),r})}return n},"_createColumns":function(e,t){var n=i.map(e,function(e,i){var n=t.get(e.type);return this._createCell(e,n,i)}.bind(this));return new s.Collection(n)},"_prepareGridCell":function(e,t){var n=e.kind;n||(n=y.defaultWidgetKind);var s=this.widgetSizes[n];return{"sizes":s.widths,"heights":s.heights,"className":e.className,"widget":i.defaults({"kind":n,"cellAddress":"grid0:r0:c"+t},e)}},"_createCell":function(e,t,n){var s=t.get("view"),o=t.get("manifest")||{},r=o.supportedKinds,a=e.kind;if(a&&r&&i.contains(r,a)||(a=o.kind),e.kind=a,s)return e.view=s,this._prepareGridCell(e,n);var l=t.get("error");u.warn('Loading widget "{0}" failed. {1}',e.type,l)&&console.warn(u.last);var c=this.widgetSizes[y.defaultWidgetKind];return{"sizes":c.widths,"heights":c.heights,"widget":p.getErrorWidget(e,l)}},"getSupportedWidgetSizes":function(e,t){return i.map(e.supportedKinds,function(e){return{"kind":e,"label":b[e+"Label"],"selected":t.model.get("widget").kind===e}})},"serializePerspective":function(e){var t=this,s=n.Deferred(),o=this.collection.at(0).columns,r=o.filter(function(e){return!this.isEmptyPlaceholder(e.get("widget"))},this),a=r.map(function(e,i){return t.serializeWidget(e,"/options/widgets/"+i)});return n.whenAll.apply(n,a).done(function(n){t.executeCallbacks(n,e,t.options.context).done(function(){var e=i.pluck(n,"widget"),o=i.flatten(i.pluck(n,"constantsData")),r={"perspective":{"type":"flow","options":{"widgets":e}},"constant_data":o,"constant_extraction_mode":1};t.validateAndGenerateWidgetId(e)?s.resolve(r):s.reject(v.widgetValidationFailed)}).fail(function(e){e=i.filter(e,function(e){return!!e.error}),s.reject(e[0].error)})},this).fail(function(e){e=i.filter(e,function(e){return!!e.error}),s.reject(e[0].error)}),s.promise()},"getPreviousWidgets":function(e){var t=e.getPerspective(),n=t&&t.options?t.options.widgets:{};return n=i.map(n,function(e){return{"widget":e}})},"_supportMaximizeWidget":!0,"_supportMaximizeWidgetOnDisplay":!0});return m.mixin(x.prototype),x}),csui.define("csui/perspectives/grid/grid.perspective.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/controls/grid/grid.view","csui/behaviors/widget.container/widget.container.behavior","css!csui/perspectives/impl/perspective"],function(e,t,i,n,s,o,r){var a=e.config();return o.extend({"className":function(){var e="cs-perspective cs-grid-perspective grid-rows",i=t.result(o.prototype,"className");return i&&(e=e+" "+i),e},"cellView":function(e){var t=e.get("widget");if(t){var i=t.view;if(!i)throw new n.Error({"name":"UnresolvedWidgetError","message":'Widget "'+t.type+'" not resolved: '+t.error});return i}},"cellViewOptions":function(e){var t=e.get("widget");return{"context":this.options.context,"data":t&&t.options||{},"model":void 0}},"behaviors":{"WidgetContainer":{"behaviorClass":r}},"constructor":function(e){function n(e){t.each(e,function(e){var t=e.columns;t&&(e.columns=r(t))})}function r(e){return t.filter(e,function(e){var t=e.widget;if(t)return void 0!=s.filterUnSupportedWidgets(t,a);var i=e.rows;return i&&n(i),!0})}e||(e={}),e=i.extend(!0,{},e);var l=e.rows;if(l&&l.length>0&&a.supportedWidgets){var c=l[0].columns;l[0].columns=t.filter(c,function(e){return t.contains(a.supportedWidgets,e.widget.type)}),c.length>1&&a.widgetSizes&&t.each(c,function(e){e.sizes=a.widgetSizes,e.heights={}})}n(l),o.prototype.constructor.call(this,e)},"enumerateWidgets":function(e){this._enumerateWidgetRow(this.options.collection,e)},"_enumerateWidgetRow":function(e,t){e.each(function(e){e.columns.each(function(e){var i=e.get("widget");i&&t(i),e.rows&&this._enumerateWidgetRow(e.rows,t)},this)},this)},"_supportMaximizeWidget":!0,"_supportMaximizeWidgetOnDisplay":!0})}),csui.define("css!csui/perspectives/zone/impl/zone.perspective",[],function(){}),csui.define("csui/perspectives/zone/zone.perspective.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/grid/grid.view","csui/behaviors/widget.container/widget.container.behavior","csui/perspectives/mixins/perspective.edit.mixin","css!csui/perspectives/impl/perspective","css!csui/perspectives/zone/impl/zone.perspective"],function(e,t,i,n,s,o,r,a,l){function c(e,i){var n;return i?n=i[e]:void 0===(n=c.call(this,e,this.options||{}))&&(n=this[e]),t.isFunction(n)?n.call(this):n}var u=e.config(),d=r.extend({"className":function(){var e="cs-perspective cs-zone-perspective grid-rows ",i=t.result(r.prototype,"className");return i&&(e+=i),e},"cellView":function(e){var t=e.get("widget");if(t){var i=t.view;if(!i)throw new s.Error({"name":"UnresolvedWidgetError","message":'Widget "'+t.type+'" not resolved: '+t.error});return i}},"cellViewOptions":function(e,t){var i=e.get("widget");return{"context":this.options.context,"data":i&&i.options||{},"model":void 0,"perspectiveMode":this.options.perspectiveMode,"widgetContainer":t}},"cellConstructionFailed":function(e,i){var n=e.get("widget");if(n){var s=a.getErrorWidget(n,i.message);e.set("widget",t.defaults(s,n.attributes))}},"behaviors":{"WidgetContainer":{"behaviorClass":a}},"constructor":function(e){e||(e={}),e=i.extend(!0,{},e),e.collection||(e.collection=this._createCollection(e)),e.collection.each(function(e,t){e.columns.each(function(e,i){e.get("widget").cellAddress="grid0:r"+t+":c"+i})}),"edit"===e.perspectiveMode&&this.prepareForEditMode(),r.prototype.constructor.call(this,e)},"_createCollection":function(e){var i=new n.Collection,r=c.call(this,"zoneNames");t.extend(u,{"unSupportedWidgets":c.call(this,"unSupportedWidgets")}),t.mapObject(e,function(i,n){t.contains(r,n)&&(o.filterUnSupportedWidgets(i,u)||(e[n]=void 0))});var a=this._getLayoutName(e);if(a){var l=c.call(this,"zoneLayouts"),d=l[a];if(!d)throw new s.Error({"name":"InvalidLayoutContentError","message":"Missing widget in the important perspective zone"});var p=i.add({}),h=t.map(d.zoneOrder,function(i){var n=t.defaults({"widget":e[i]},d.zoneSizes[i]);return e[i].className&&(n.className=(n.className||"")+" "+e[i].className),n});p.columns=new n.Collection(h)}return i},"_getLayoutName":function(e){var i=c.call(this,"zoneNames");return t.reduce(i,function(i,n){return e[n]&&!t.isEmpty(e[n])&&(i&&(i+="-"),i+=n),i},"")},"enumerateWidgets":function(e){var n=c.call(this,"zoneNames"),s=t.compact(t.map(n,function(e){var i=this.options[e];return!t.isEmpty(i)&&i},this));if("edit"===this.options.perspectiveMode){var o=t.map(s,function(){var t=i.Deferred();return e(t),t});this._resolveWidgets(s).then(function(e){t.each(s,function(e,t){o[t].resolve(e)})})}else t.each(s,e,this)},"serializeOptions":function(e){var n=this,s=i.Deferred(),o=this._getLayoutName(this.options),r=c.call(this,"zoneLayouts"),a=r[o],l=this.collection.at(0).columns,u=t.map(a.zoneOrder,function(e,t){return"csui/perspective.manage/widgets/perspective.placeholder"===l.at(t).get("widget").type?i.Deferred().resolve({"zone":e,"config":{"widget":{}}}):n.serializeWidget(l.at(t),"/options/"+e).then(function(t){return{"zone":e,"config":t}})});return i.whenAll.apply(i,u).done(function(i){var o=t.map(t.filter(i,function(e){return e.config&&e.config.widget&&!t.isEmpty(e.config.widget)}),function(e){return e.config});n.executeCallbacks(o,e,n.options.context).done(function(){s.resolve(i)}).fail(function(e){e=t.filter(e,function(e){return!!e.error}),s.reject(e[0].error)})}).fail(function(e){e=t.filter(e,function(e){return!!e.error}),s.reject(e[0].error)}),s.promise()},"getPreviousWidgets":function(e){var i=e.get("perspective"),n=this._getLayoutName(this.options),s=c.call(this,"zoneLayouts"),o=s[n],r={};return o&&o.zoneOrder&&(r=t.map(t.filter(o.zoneOrder,function(e){return i&&i.options&&!t.isEmpty(i.options[e])}),function(e){return{"widget":i.options[e]}})),r}});return l.mixin(d.prototype),d}),csui.define("csui/perspectives/left-center-right/left-center-right.perspective.view",["require","module","csui/lib/jquery","csui/lib/underscore","csui/perspectives/zone/zone.perspective.view","csui/utils/contexts/fragment/context.fragment","csui/behaviors/widget.container/widget.container.behavior","i18n!csui/perspectives/impl/nls/lang"],function(e,t,i,n,s,o,r,a){var l=t.config();return n.defaults(l,{"zoneNames":["left","center","right"],"zoneLayouts":{"center":{"zoneOrder":["center"],"zoneSizes":{"center":{"sizes":{"xs":12},"heights":{"xs":"full"}}}},"left":{"zoneOrder":["left"],"zoneSizes":{"left":{"sizes":{"xs":12},"heights":{"xs":"full"}}}},"right":{"zoneOrder":["right"],"zoneSizes":{"right":{"sizes":{"xs":12},"heights":{"xs":"full"}}}},"left-center":{"zoneOrder":["center","left"],"zoneSizes":{"left":{"sizes":{"md":4,"xl":3},"pulls":{"md":8,"xl":9},"heights":{"xs":"full"}},"center":{"sizes":{"md":8,"xl":9},"pushes":{"md":4,"xl":3},"heights":{"xs":"full"}}}},"center-right":{"zoneOrder":["center","right"],"zoneSizes":{"center":{"sizes":{"md":8,"xl":9},"heights":{"xs":"full"}},"right":{"sizes":{"md":4,"xl":3},"heights":{"xs":"full"}}}},"left-right":{"zoneOrder":["left","right"],"zoneSizes":{"left":{"sizes":{"md":6},"heights":{"xs":"full"}},"right":{"sizes":{"md":6},"heights":{"xs":"full"}}}},"left-center-right":{"zoneOrder":["center","left","right"],"zoneSizes":{"left":{"sizes":{"sm":6,"md":6,"lg":3,"xl":3},"pulls":{"lg":6,"xl":6},"heights":{"xs":"full"}},"center":{"sizes":{"sm":12,"md":12,"lg":6,"xl":6},"pushes":{"lg":3,"xl":3},"heights":{"xs":"full"}},"right":{"sizes":{"sm":6,"md":6,"lg":3,"xl":3},"heights":{"xs":"full"}}}}}}),s.extend({"className":function(){var e="cs-left-center-right-perspective",t=n.result(s.prototype,"className");return t&&(e=e+" "+t),!n.isEmpty(this.options.left)&&!n.isEmpty(this.options.right)&&(e+=" csui-lcr-multiwidget"),e},"zoneNames":l.zoneNames,"zoneLayouts":l.zoneLayouts,"unSupportedWidgets":l.unSupportedWidgets,"constructor":function(e){e&&"edit"===e.perspectiveMode&&this._prepareForEditMode(e),s.prototype.constructor.apply(this,arguments),e&&"edit"===e.perspectiveMode&&this._registerEditEvents()},"_prepareForEditMode":function(t){t.left&&!n.isEmpty(t.left.type)||(t.left={"kind":"tile","type":"csui/perspective.manage/widgets/perspective.placeholder"}),t.center&&!n.isEmpty(t.center.type)||(t.center={"kind":"fullpage","type":"csui/perspective.manage/widgets/perspective.placeholder"}),t.right&&!n.isEmpty(t.right.type)||(t.right={"kind":"tile","type":"csui/perspective.manage/widgets/perspective.placeholder"}),t.cellBehaviours={"PerspectiveWidgetConfig":{"behaviorClass":e("csui/perspective.manage/behaviours/pman.widget.config.behaviour"),"perspectiveView":this}}},"_registerEditEvents":function(){var e=this;e.options.contextFragment=new o(e.options.context),this.listenTo(this,"delete:widget",function(t){if(e.getPManPlaceholderWidget){var i=e.getPManPlaceholderWidget();this._resolveWidget(i).done(function(){t.model.set("widget",i)})}}),this.listenTo(this,"replace:widget",function(e,t){var i=this;this._resolveWidget(t).done(function(){t.options.___pman_isdropped?e.model.set("widget",t):(i.options.context.clear(),e.model.set("widget",t),i.options.context.fetch())})}.bind(this))},"serializePerspective":function(e){var t=this,s=i.Deferred();return this.serializeOptions(e).then(function(e){var i=n.flatten(e.map(function(e){return e.config.constantsData||[]})),o=n.reduce(e,function(e,t){return e[t.zone]=t.config.widget,e},{}),r={"perspective":{"type":"left-center-right","options":o},"constant_data":i,"constant_extraction_mode":1},l=n.reject(n.values(o),n.isEmpty);t.validateAndGenerateWidgetId(l)?s.resolve(r):s.reject(a.widgetValidationFailed)},s.reject),s.promise()},"_supportMaximizeWidget":!0,"_supportMaximizeWidgetOnDisplay":!0})}),csui.define("csui/perspective.manage/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspective.manage/impl/nls/root/lang",{"layoutTabTitle":"Change page layout","widgetTabTitle":"Add widget","expandTab":"Expand tab","collapseTab":"Collapse tab","noTitle":"Title not available","goBackTooltip":"Go back","templateMessage":"Drag and Drop tile in position","changePageLayoutConfirmatonText":"All your previously added and configured widgets will be lost!","proceedButton":"Proceed","changeLayoutCancelButton":"Cancel","FlowLayoutTitle":"Flow layout","LcrLayoutTitle":"Left center right layout","perspectiveSaveSuccess":"Perspective has been updated successfully.","personalizationSaveSuccess":"Changes saved successfully.","saveConfirmMsg":"Please be aware this action will update all perspective overrides using this layout configuration. If you do not want this to happen, you should create a new perspective.","saveConfirmTitle":"Save perspective","addWidget":"Add widget","save":"Save","saveAriaLabel":"Save current layout","close":"Close","cancelAriaLabel":"Cancel the changes and exit edit mode","cancel":"Cancel","reset":"Reset","resetAriaLabel":"Reset to default layout","resetConfirmMsg":"Page will be reset to default page configured by the administrator.","configNotSupported":"This widget cannot be configured with edit page.","disableTitle":"This widget can be added only once to the page","resetSuccessful":"Reset to original page was successful.","tileLabel":"Single Width","headerLabel":"Double Width","fullpageLabel":"Full Page","heroTileLabel":"Full Width","RSPLayoutTitle":"Right side panel layout","LSPLayoutTitle":"Left side panel layout"}),csui.define("css!csui/perspectives/banner-content-sidebar/impl/banner-content-sidebar",[],function(){}),csui.define("csui/perspectives/banner-content-sidebar/banner-content-sidebar.perspective.view",["module","csui/lib/underscore","csui/lib/backbone","csui/lib/jquery","csui/lib/marionette","csui/lib/radio","csui/perspectives/mixins/perspective.edit.mixin","csui/utils/perspective/perspective.util","csui/behaviors/drag.drop/dnd.container.behaviour","csui/perspectives/flow/flow.perspective.view","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/tile/behaviors/perfect.scrolling.behavior","i18n!csui/perspective.manage/impl/nls/lang","i18n!csui/perspectives/impl/nls/lang","css!csui/perspectives/banner-content-sidebar/impl/banner-content-sidebar"],function(e,t,i,n,s,o,r,a,l,c,u,d,p,h){var f=c.extend({"getSupportedWidgetSizes":function(e,i){var n=[];return this.$el.hasClass("cs-bcs-perspective-content")?(n=t.filter(e.supportedKinds,function(e){return"fullpage"!==e}),t.map(n,function(e){return{"kind":e,"label":p[e+"Label"],"selected":i.model.get("widget").kind===e}})):this.$el.hasClass("cs-bcs-perspective-banner")||this.$el.hasClass("cs-bcs-perspective-sidebar")?n:(n=t.filter(e.supportedKinds,function(e){return"heroTile"!==e}),t.map(n,function(e){return{"kind":e,"label":p[e+"Label"],"selected":i.model.get("widget").kind===e}}))}}),m=s.LayoutView.extend({"className":"banner-content-sidebar-perspective cs-perspective binf-container-fluid","behaviors":{"PerfectScrolling":{"behaviorClass":d,"contentParent":function(){return this.options.scrollableParent},"suppressScrollX":!0}},"regions":{"bannerRegion":"#banner-region","contentRegion":"#content-region","sidebarRegion":"#sidebar-region"},"constructor":function(e){e||(e={}),e=n.extend(!0,{},e),this.context=e.context,(e.banner&&e.banner.length||"edit"==e.perspectiveMode)&&(this.headerView=new f({"widgets":e.banner&&e.banner.length>0?e.banner:void 0,"context":e.context,"type":e.type,"perspectiveMode":e.perspectiveMode,"className":"cs-bcs-perspective-banner","widgetSizes":{"tile":{"widths":{"xs":12,"sm":12,"md":12,"xl":12}}},"model":this.model}),this.headerView.allowHTMLTilesOnly=!0,this.headerView.options.rowBehaviours&&this.addRowBehaviours(this.headerView),this.headerView.listenTo(this.headerView,"delete:widget",function(e){var t=this,i=t.collection.at(0).columns,n=e.model;i.remove(n),t.$el.find(".csui-draggable-item-disable").removeClass("binf-hidden")})),this.contentView=new f({"widgets":e.content,"context":e.context,"type":e.type,"perspectiveMode":e.perspectiveMode,"className":"cs-bcs-perspective cs-bcs-perspective-content grid-rows","widgetSizes":{"tile":{"widths":{"xs":12,"sm":12,"md":6,"xl":4}},"header":{"widths":{"xs":12,"sm":12,"md":6,"xl":8}},"heroTile":{"widths":{"xs":12,"sm":12,"md":12,"xl":12}}},"model":this.model}),this.sidebarView=new f({"widgets":e.sidebar,"context":e.context,"type":e.type,"perspectiveMode":e.perspectiveMode,"className":"cs-bcs-perspective cs-bcs-perspective-sidebar grid-rows","widgetSizes":{"heroTile":{"widths":{"xs":12,"sm":12,"md":12,"xl":12}},"header":{"widths":{"xs":12,"sm":12,"md":12,"xl":12}},"half":{"widths":{"xs":12,"sm":12,"md":12,"xl":12}},"quarter":{"widths":{"xs":12,"sm":12,"md":12,"xl":12},"heights":{"xs":"quarter","sm":"quarter","md":"quarter","xl":"quarter"}},"tile":{"widths":{"xs":12,"sm":12,"md":12,"xl":12}}},"model":this.model});var i=[this.contentView.widgetsResolved,this.sidebarView.widgetsResolved];this.headerView&&i.push(this.headerView.widgetsResolved);var r=n.Deferred();this.widgetsResolved=r.promise(),n.whenAll.apply(n,i).done(function(){r.resolve(t.flatten(arguments))}).fail(r.fail),o.channel("quicklink:Tiles").on("transparent:background",t.bind(function(){n(this.contentView.$el[0]).find(".quicklinkTiles").parents(".csui-widget").addClass("csui-transparent-background"),n(this.sidebarView.$el[0]).find(".actionButton").parents(".csui-widget").addClass("csui-action-button")},this)),o.channel("newlayout:widget:size").on("update:widget:size",t.bind(function(e){e.widgetView.$el.hasClass("csui-heroTile")&&e.widgetView.$el.removeClass("csui-heroTile").addClass("csui-"+e.kind),o.channel("quicklink:Tiles").trigger("transparent:background")},this)),s.LayoutView.prototype.constructor.call(this,e),this.propagateEventsToRegions()},"addRowBehaviours":function(e){function i(t,i){var n=e._prepareGridCell(t,i);e.collection.at(0).columns.add(n,{"at":i}),e.options.context.trigger("update:widget:panel",{"action":"add","widgetModel":n.widget})}e.options.rowBehaviours={"DnDContainerBehaviour":{"behaviorClass":l,"placeholder":e._getDnDPlaceholder.bind(e),"handle":".csui-pman-widget-masking","helper":"clone","start":function(t,i){if(!(e.$el.find(".csui-draggable-item").length>=1)){var n=e.$el.find(".binf-popover");n.length&&(n.removeClass("pman-ms-popover"),n.hide(),n.binf_popover("destroy"))}},"over":t.bind(function(t,i){i.placeholder.addClass("binf-hidden"),n(i.helper).css("cursor","no-drop");var s=e.$el.find(".csui-draggable-item");if(0===s.length&&(i.placeholder.data("pman.widget.view")&&"csui/widgets/html.editor"==i.placeholder.data("pman.widget.view").get("id")||i.placeholder.data("pman.widget")&&"csui/widgets/html.editor"==i.placeholder.data("pman.widget").get("id"))&&i.helper.css("cursor","grabbing"),!(s.length>=1||i.placeholder.data("pman.widget.view")&&"csui/widgets/html.editor"!=i.placeholder.data("pman.widget.view").get("id")||i.placeholder.data("pman.widget")&&"csui/widgets/html.editor"!=i.placeholder.data("pman.widget").get("id"))){var o=e._getDnDPlaceholder(i.helper),r=e.$el.find(".csui-pman-placeholder-container");r.attr("class",o.attr("class")),r.html(o.html()),r.css("visibility","visible"),r.data("pman.widget",i.helper.data("pman.widget")),r.removeData("isBeyondLayout"),i.helper.data("pman.widget")&&e._resolveWidget({"type":i.helper.data("pman.widget").id}).done(function(e){r.data("pman.widget.view",e)})}},e),"out":function(t,i){n(i.helper).css("cursor","grabbing"),e.$el.find(".csui-draggable-item").length>=1||!i.placeholder.data("pman.widget.view")||i.placeholder.data("pman.widget.view")&&"csui/widgets/html.editor"!=i.placeholder.data("pman.widget.view").get("id")||(i.placeholder.hide(),i.placeholder.data("isBeyondLayout",!0))},"receive":t.bind(function(n,s){if(e.$el.find(".csui-draggable-item").length>=1||!s.placeholder.data("pman.widget.view")||s.placeholder.data("pman.widget.view")&&"csui/widgets/html.editor"!=s.placeholder.data("pman.widget.view").get("id"))return e.$el.find(".csui-widget-item").remove(),void s.sender.sortable("cancel");if(s.position.top>0){var o,r=s.placeholder.data("pman.widget"),l=s.item.index(),c=r.get("manifest"),u=s.placeholder.data("pman.widget.view");o=a.isEligibleForLiveWidget(c)?{"type":r.id,"kind":"fullpage","view":u.get("view")}:{"type":"csui/perspective.manage/widgets/perspective.widget","kind":"fullpage","options":{"options":{},"widget":r},"view":u=e.pespectiveWidgetView},o.options=t.extend({"___pman_isdropped":!0},o.options),u?i(o,l):e._resolveWidget(o).done(function(e){i(o,l)})}e._ensurePlaceholder(),e.$el.find(".csui-draggable-item-disable").addClass("binf-hidden"),s.sender.sortable("cancel")},e),"stop":t.bind(function(){e._ensurePlaceholder()},e)}}},"onRender":function(){var e=this,i="csui-"+this.perspectiveType+"-layout";e.$el.addClass(i),(e.options.banner&&e.options.banner.length&&!0!==this.options.banner[0].hidden||"edit"==e.options.perspectiveMode||"personalize"===this.options.perspectiveMode&&e.options.banner.length)&&(e.bannerRegion.show(e.headerView),e.headerView.options.widgets.length>1&&e.headerView.$el.find(".csui-draggable-item-disable").addClass("binf-hidden"));var n=e.contentView.collection.models[0].columns.models;t.each(n,function(e){e.set("className","csui-"+e.get("widget").kind+" csui-widget")});var s=e.sidebarView.collection.models[0].columns.models;t.each(s,function(e){e.set("className","csui-"+e.get("widget").kind+" csui-widget")}),e.contentRegion.show(e.contentView),e.sidebarRegion.show(e.sidebarView)},"serializePerspective":function(e){this.setZoneName();var s=this,o=n.Deferred(),r=new i.Collection;r.push(this.contentView.collection.at(0).columns.models),r.push(this.sidebarView.collection.at(0).columns.models),this.headerView&&r.push(this.headerView.collection.at(0).columns.models);var a=r.filter(function(e){return!this.isEmptyPlaceholder(e.get("widget"))},this);a.sort(function(e,t){return parseInt(e.cid.replace(/\D/g,""))-parseInt(t.cid.replace(/\D/g,""))});var l=a.map(function(e,t){return s.serializeWidget(e,"/options/widgets/"+t)});return n.whenAll.apply(n,l).done(function(i){s.executeCallbacks(i,e,s.options.context).done(function(){i=i.sort(function(e,t){return e.widget.options.index-t.widget.options.index});var e=t.pluck(i,"widget"),n=t.flatten(t.pluck(i,"constantsData")),r=e.filter(function(e){if(e.options)return"banner"==e.options.zone},this),a=e.filter(function(e){if(e.options)return"content"==e.options.zone},this),l=e.filter(function(e){if(e.options)return"sidebar"==e.options.zone},this);s.unsetZoneName(e);var c={"perspective":{"type":s.perspectiveType,"options":{"banner":r,"content":a,"sidebar":l}},"constant_data":n,"constant_extraction_mode":1};s.validateAndGenerateWidgetId(e)?o.resolve(c):o.reject(h.widgetValidationFailed)}).fail(function(e){e=t.filter(e,function(e){return!!e.error}),o.reject(e[0].error)})},this).fail(function(e){e=t.filter(e,function(e){return!!e.error}),o.reject(e[0].error)}),o.promise()},"swapLayout":function(e){this.perspectiveType=e.attributes.perspective.type;var t="csui-"+this.perspectiveType+"-layout";this.$el.removeClass("csui-sidepanel-right-layout").removeClass("csui-sidepanel-left-layout").addClass(t)},"setZoneName":function(){this.headerView&&t.each(this.headerView.collection.at(0).columns.models,function(e){"csui/perspective.manage/widgets/perspective.widget"==e.get("widget").type?e.get("widget").options.options.zone="banner":e.get("widget").options.zone="banner"}),t.each(this.contentView.collection.at(0).columns.models,function(e,t){"csui/perspective.manage/widgets/perspective.widget"==e.get("widget").type?(e.get("widget").options.options.index=t,e.get("widget").options.options.zone="content"):(e.get("widget").options.index=t,e.get("widget").options.zone="content")}),t.each(this.sidebarView.collection.at(0).columns.models,function(e,t){"csui/perspective.manage/widgets/perspective.widget"==e.get("widget").type?(e.get("widget").options.options.index=t,e.get("widget").options.options.zone="sidebar"):(e.get("widget").options.index=t,e.get("widget").options.zone="sidebar")})},"unsetZoneName":function(e){t.each(e,function(e){delete e.options.zone})},"enumerateWidgets":function(e){this.options.banner&&this.options.banner.length&&t.each(this.options.banner,function(t){t&&e(t)}),t.each(this.options.content,function(t){t&&e(t)}),t.each(this.options.sidebar||[],function(t){t&&e(t)})},"getPreviousWidgets":function(e){var i=e.getPerspective(),n=i&&i.options?i.options.banner:{};return t.each(this.options.sidebar,function(e){n.push(e)}),t.each(this.options.content,function(e){n.push(e)}),n=t.map(n,function(e){return{"widget":e}})}});return t.extend(m.prototype,u),r.mixin(m.prototype),m}),csui.define("hbs!csui/perspectives/sidepanel-left/impl/sidepanel-left",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,s){return'<div id="banner-region" class="binf-row"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"showBanner"):t,{"name":"if","hash":{},"fn":e.program(1,s,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":3,"column":7}}}))?o:"")+'<div id="main" class="binf-row">\r\n    <div id="sidebar-region" class="binf-col-xs-6 binf-col-sm-6 binf-col-md-4 binf-col-lg-3 binf-col-xl-3"></div>\r\n    <div id="content-region" class="binf-col-xs-6 binf-col-sm-6 binf-col-md-8 binf-col-lg-9 binf-col-xl-9"></div>\r\n</div>'}});return i.registerPartial("csui_perspectives_sidepanel-left_impl_sidepanel-left",n),n}),csui.define("csui/perspectives/sidepanel-left/sidepanel-left.perspective.view",["module","csui/lib/underscore","csui/lib/backbone","csui/lib/jquery","csui/lib/marionette","csui/perspectives/mixins/perspective.edit.mixin","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/perspectives/banner-content-sidebar/banner-content-sidebar.perspective.view","hbs!csui/perspectives/sidepanel-left/impl/sidepanel-left","css!csui/perspectives/banner-content-sidebar/impl/banner-content-sidebar"],function(e,t,i,n,s,o,r,a,l){var c=a.extend({"template":l,"templateHelpers":function(){var e;return e=!!("edit"===this.options.perspectiveMode||"personalize"===this.options.perspectiveMode&&this.options.banner.length)||!(!this.options.banner.length||1==this.options.banner[0].hidden),{"showBanner":e,"sidebarLeft":!0,"sidebarRight":!1}},"constructor":function(e){e||(e={}),e=n.extend(!0,{},e),this.perspectiveType="sidepanel-left",e.context.perspective.type=this.perspectiveType,a.prototype.constructor.call(this,e)}});return t.extend(c.prototype,r),o.mixin(c.prototype),c}),csui.define("hbs!csui/perspectives/sidepanel-right/impl/sidepanel-right",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,s){return'<div id="banner-region" class="binf-row"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(o=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"showBanner"):t,{"name":"if","hash":{},"fn":e.program(1,s,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":3,"column":7}}}))?o:"")+'<div id="main" class="binf-row">\r\n    <div id="content-region" class="binf-col-xs-6 binf-col-sm-6 binf-col-md-8 binf-col-lg-9 binf-col-xl-9"></div>\r\n    <div id="sidebar-region" class="binf-col-xs-6 binf-col-sm-6 binf-col-md-4 binf-col-lg-3 binf-col-xl-3"></div>\r\n</div>'}});return i.registerPartial("csui_perspectives_sidepanel-right_impl_sidepanel-right",n),n}),csui.define("csui/perspectives/sidepanel-right/sidepanel-right.perspective.view",["module","csui/lib/underscore","csui/lib/backbone","csui/lib/jquery","csui/lib/marionette","csui/perspectives/mixins/perspective.edit.mixin","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/perspectives/banner-content-sidebar/banner-content-sidebar.perspective.view","hbs!csui/perspectives/sidepanel-right/impl/sidepanel-right","css!csui/perspectives/banner-content-sidebar/impl/banner-content-sidebar"],function(e,t,i,n,s,o,r,a,l){var c=a.extend({"template":l,"templateHelpers":function(){var e;return e=!!("edit"===this.options.perspectiveMode||"personalize"===this.options.perspectiveMode&&this.options.banner.length)||!(!this.options.banner.length||!0===this.options.banner[0].hidden),{"showBanner":e,"sidebarRight":!0,"sidebarLeft":!1}},"constructor":function(e){e||(e={}),e=n.extend(!0,{},e),this.perspectiveType="sidepanel-right",e.context.perspective.type=this.perspectiveType,a.prototype.constructor.call(this,e)}});return t.extend(c.prototype,r),o.mixin(c.prototype),c}),csui.define("csui/perspectives/single/single.perspective.view",["module","csui/lib/underscore","csui/perspectives/zone/zone.perspective.view"],function(e,t,i){var n=e.config();return t.defaults(n,{"zoneNames":["widget"],"zoneLayouts":{"widget":{"zoneOrder":["widget"],"zoneSizes":{"widget":{"sizes":{"xs":12},"heights":{"xs":"full"}}}}}}),i.extend({"className":function(){var e="cs-single-perspective",n=t.result(i.prototype,"className");return n&&(e=e+" "+n),e},"zoneNames":n.zoneNames,"zoneLayouts":n.zoneLayouts,"unSupportedWidgets":n.unSupportedWidgets,"constructor":function(e){i.prototype.constructor.apply(this,arguments)}})}),csui.define("csui/utils/contexts/factories/active.tab.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,n){var s=i.Model.extend({"defaults":{"tabIndex":0}});return n.extend({"propertyPrefix":"activeTab","constructor":function(o,r){n.prototype.constructor.apply(this,arguments);var a=this.options.activeTab||{};if(!(a instanceof i.Model)){var l=e.config();a=new s(a.attributes,t.extend({},a.options,l.options))}this.property=a}})}),csui.define("csui/perspectives/tabbed/behaviors/tab.extensions.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/non-emptying.region/non-emptying.region"],function(e,t,i,n,s){"use strict";return n.Behavior.extend({"constructor":function(e,t){n.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(t,"render",this.renderExtension),this.listenTo(t,"before:destroy",this.destroyExtension),this.listenTo(t,"dom:refresh",this.refreshTab)},"renderExtension":function(){var e,t=this.view.options,i=t.tabBarLeftExtensionViewClass,n=t.tabBarLeftExtensionViewOptions,s=t.tabBarRightExtensionViewClass,o=t.tabBarRightExtensionViewOptions;this.tabBarLeftExtensionsRegion=this.showExtension(i,n,0),e=this.tabBarLeftExtensionsRegion?2:1,this.tabBarRightExtensionsRegion=this.showExtension(s,o,e),this.view._initializeToolbars()},"showExtension":function(e,t,i){var n;return e&&"function"==typeof e&&(this.tabBarExtensionView=new e(t),this.tabBarExtensionView.$el.addClass("tab-extension"),t.customClass&&this.tabBarExtensionView.$el.addClass(t.customClass),n=new s({"el":this.view.el,"index":i}),n.show(this.tabBarExtensionView)),n},"refreshTab":function(){
this.view._enableToolbarState(),this.tabBarExtensionView&&this.tabBarExtensionView.triggerMethod("dom:refresh")},"destroyExtension":function(){this.tabBarLeftExtensionsRegion&&this.tabBarLeftExtensionsRegion.empty(),this.tabBarRightExtensionsRegion&&this.tabBarRightExtensionsRegion.empty()}})}),csui.define("csui/perspectives/tabbed/tab.index/tab.index.preferences",["csui/lib/underscore","csui/lib/backbone","csui-ext!csui/perspectives/tabbed/tab.index/tab.index.preferences"],function(e,t,i){"use strict";var n=t.Model.extend({"defaults":{"sequence":100,"getPreferredTabIndex":null},"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments)}}),s=t.Collection.extend({"model":n,"comparator":"sequence","constructor":function(e,i){t.Collection.prototype.constructor.call(this,e,i)},"getPreferredTabIndex":function(e){var t;return this.some(function(i){return void 0!==(t=i.get("getPreferredTabIndex")(e))}),t}}),o=new s;return i&&o.add(e.chain(i).flatten().value()),o}),csui.define("hbs!csui/perspectives/tabbed/impl/tabbed.perspective",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){return'<div class="cs-header"></div>\r\n<div class="cs-content"></div>\r\n'}});return i.registerPartial("csui_perspectives_tabbed_impl_tabbed.perspective",n),n}),csui.define("css!csui/perspectives/tabbed/impl/tabbed.perspective",[],function(){}),csui.define("csui/perspectives/tabbed/tabbed.perspective.view",["module","csui/lib/underscore","csui/lib/backbone","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/controls/tab.panel/tab.panel.view","csui/controls/grid/grid.view","csui/behaviors/widget.container/widget.container.behavior","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/utils/contexts/factories/active.tab.factory","csui/controls/tab.panel/tab.links.ext.scroll.mixin","csui/controls/tab.panel/tab.links.ext.view","csui/perspectives/tabbed/behaviors/tab.extensions.behavior","csui/controls/mixins/view.state/node.view.state.mixin","csui/utils/contexts/factories/next.node","csui/utils/contexts/fragment/context.fragment","csui/perspectives/tabbed/tab.index/tab.index.preferences","hbs!csui/perspectives/tabbed/impl/tabbed.perspective","css!csui/perspectives/impl/perspective","css!csui/perspectives/tabbed/impl/tabbed.perspective"],function(e,t,i,n,s,o,r,a,l,c,u,d,p,h,f,m,g,b,v){"use strict";function y(){if(this.context&&this.context.viewStateModel){var e=this.context.viewStateModel.get("isFirstRoute"),t=this.context.viewStateModel.get("routeFromUrl"),i=this.context.viewStateModel.get("isFromHistory");if(e||!t&&!i)return!0}}var x=e.config(),w=/\bdelayTabContent\b(?:=([^&]*)?)?/i.exec(location.search);void 0===(w=!w||"false"!==w[1])&&(w=x.delayTabContent);var _=a.RowView.extend({"cellView":function(e){var t=e.get("widget");if(t){var i=t.view;if(!i)throw new s.Error({"name":"UnresolvedWidgetError","message":'Widget "'+t.type+'" not resolved: '+t.error});return i}},"cellViewOptions":function(e){var t=e.get("widget");return{"context":this.options.context,"data":t&&t.options||{},"model":void 0}},"constructor":function(){a.RowView.prototype.constructor.apply(this,arguments)}}),C=r.extend({"contentView":_,"contentViewOptions":function(e){return{"context":this.options.context,"columns":e.get("columns")}},"constructor":function(e){e||(e={}),t.defaults(e,{"delayTabContent":w,"overlappingTabActivation":!1,"toolbar":!0,"TabLinkCollectionViewClass":p,"tabBarLeftExtensionViewClass":e.tabBarLeftExtensionViewClass,"tabBarLeftExtensionViewOptions":e.tabBarLeftExtensionViewOptions,"tabBarRightExtensionViewClass":e.tabBarRightExtensionViewClass,"tabBarRightExtensionViewOptions":e.tabBarRightExtensionViewOptions}),e.tabs&&t.each(e.tabs,function(e,i){t.each(e.columns,function(e,t){e.widget.cellAddress="tab"+i+":r0:c"+t})}),this.behaviors=t.extend({"TabExtensionsBehavior":{"behaviorClass":h}},this.behaviors),n(window).on("resize",{"view":this},this._onWindowResize),r.prototype.constructor.call(this,e)},"_onWindowResize":function(e){e&&e.data&&e.data.view&&e.data.view._enableToolbarState()}});t.extend(C.prototype,d);var T=s.LayoutView.extend({"className":"cs-tabbed-perspective cs-perspective binf-container-fluid","template":v,"behaviors":{"WidgetContainer":{"behaviorClass":l}},"regions":{"headerRegion":"> .cs-header","contentRegion":"> .cs-content"},"constructor":function(e){e||(e={}),e=n.extend(!0,{},e),this.context=e.context;var i=this.context&&this.context.viewStateModel;i.setDefaultViewState("tab",0),i.addUrlParameters(["tab"]),this.activeTab=this._initActiveTabFromViewState(),this.associatedRouter=i.get("activeRouterInstance"),i&&i.set(i.CONSTANTS.ALLOW_WIDGET_URL_PARAMS,!1);var r=e&&e.header&&e.header.widget;r&&(e.header.widget=o.filterUnSupportedWidgets(r,x)),e.tabs&&(e.tabs=t.each(e.tabs,function(e,i){e.columns=t.filter(e.columns,function(e,t){return void 0!=o.filterUnSupportedWidgets(e.widget,x)})})),s.LayoutView.prototype.constructor.call(this,e),this.listenTo(this.context.viewStateModel,"change:state",this.onViewStateChanged),this.listenTo(this.context,"before:change:perspective",function(){y.call(this)&&this.context.viewStateModel.setViewState("tab",void 0,{"silent":!0})}.bind(this)),this.listenTo(this.context,"retain:perspective",function(){if(this.tabPanel&&this.tabPanel.activeTab){var e=this.tabPanel.activeTab.get("tabIndex");this.context.viewStateModel.setViewState("tab",e,{"silent":!0})}}.bind(this)),this.nextNode=this.context.getModel(m),this.propagateEventsToRegions()},"onRender":function(){this.navigationHeader=this.options.header.widget?this._createWidget(this.options.header.widget):{},this.tabPanel=new C(t.extend({"activeTab":this.activeTab,"delayTabContent":this.options.delayTabContent,"tabBarLeftExtensionViewClass":this.navigationHeader.tabBarLeftExtensionView,"tabBarLeftExtensionViewOptions":this.navigationHeader.tabBarLeftExtensionViewOptions,"tabBarRightExtensionViewClass":this.navigationHeader.tabBarRightExtensionView,"tabBarRightExtensionViewOptions":this.navigationHeader.tabBarRightExtensionViewOptions,"disableExtensionOnFirstTab":this.navigationHeader.disableExtensionOnFirstTab,"disableExtensionOnOtherTabs":this.navigationHeader.disableExtensionOnOtherTabs},this.options)),this._updateToggleHeaderState(),this.listenTo(this.tabPanel,"before:populate:tab",this._onBeforePopulateTab).listenTo(this.tabPanel,"populate:tab",this._onPopulateTab).listenTo(this.tabPanel,"activate:tab",this._onActivateTab),t.isEmpty(this.navigationHeader)?this.$el.addClass("csui-no-header"):(this.$el.removeClass("csui-no-header"),this.headerRegion.show(this.navigationHeader)),this.contentRegion.show(this.tabPanel),this.headerRegion.$el.on(this._transitionEnd(),t.bind(function(e){e.target===this.headerRegion.el&&(this.$el.removeClass("cs-toggling"),this.triggerMethod("dom:refresh"))},this))},"_onBeforePopulateTab":function(e,t){w&&!t.contextFragment&&(t.contextFragment=new g(this.context))},"_onPopulateTab":function(e,t){t.contextFragment&&(t.contextFragment.fetch(),t.contextFragment.destroy(),t.contextFragment=void 0)},"_onActivateTab":function(e,t,i){this._updateToggleHeaderState(e,t,i),this._notifyHeader()},"_notifyHeader":function(e,t,i){var n=this.tabPanel.activeTab.get("tabIndex"),s=this.tabPanel.activeTab.get("isCollapsed");this.navigationHeader.triggerMethod("active:tab",{"tabIndex":n,"isCollapsed":s})},"onBeforeRender":function(){this.headerRegion&&this.headerRegion.$el&&this.headerRegion.$el.off(this._transitionEnd())},"onBeforeDestroy":function(){this.headerRegion&&this.headerRegion.$el&&this.headerRegion.$el.off(this._transitionEnd())},"enumerateWidgets":function(e){var i=this.options&&this.options.header&&this.options.header.widget;i&&e(i),t.each(this.options.tabs,function(i){t.each(i.columns||[],function(t){t.widget&&e(t.widget)})})},"_createWidget":function(e){var t=e.view;if(!t)throw new s.Error({"name":"UnresolvedWidgetError","message":'Widget not resolved: "'+e.type+'"'});return new t({"context":this.options.context,"data":e.options||{}})},"_updateToggleHeaderState":function(e,t,i){var n=i?i.model.collection.indexOf(i.model):this.activeTab&&this.activeTab.get("tabIndex")||0,s=0===n?"removeClass":"addClass",o=this.$el.hasClass("cs-collapse");("removeClass"===s&&o||"addClass"===s&&!o)&&(this.$el.addClass("cs-toggling"),this.$el[s]("cs-collapse")),this.tabPanel.activeTab.set("isCollapsed",n>0),this.tabPanel&&this.tabPanel.tabLinks&&this.setViewStateTabIndex(n)},"onDomRefresh":function(){this.onViewStateChanged()},"_initActiveTabFromViewState":function(){var e=this.getViewStateTabIndex(),t=this.context,n=e;if(void 0!==e&&null!==e||!y.call(this)||(n=b.getPreferredTabIndex({"context":t})),void 0!==n&&n!==e&&(e=n,this.context.viewStateModel.set("replaceURL",!0),this.setViewStateTabIndex(e)),e)return new i.Model({"tabIndex":e})},"onViewStateChanged":function(e){function t(e){var t=r.el.querySelectorAll("[role=tabpanel]");return!!l.context.viewStateModel.get("routeFromUrl")||(t&&t.length>e?n(t[e]).height()>0:void 0)}function i(e,n){t(n)?e.activate():setTimeout(i.bind(l,e,n),50)}if(!this.context.viewStateModel.get("disable_tab_switching")){if(this.context.viewStateModel.get("activeRouterInstance")===this.associatedRouter){var s=this.getViewStateTabIndex(),o=this.getDefaultViewStateTabIndex(),r=this.tabPanel,a=r&&this.tabPanel.tabLinks,l=this;if(void 0===s&&(s=o||0),a&&void 0!==s){var c=a.children.findByIndex(s);c&&!c.isActive()&&i(c,s)}}}},"_setFirstTabPanelVisibility":function(e){var t=this.tabPanel.el.querySelector("[role=tabpanel]");t&&(t.style.visibility=e?"visible":"hidden")},"_transitionEnd":t.once(function(){var e,t={"transition":"transitionend","WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend"},i=document.createElement("div");for(e in t)if(void 0!==i.style[e])return t[e]}),"_supportMaximizeWidget":!0});return t.extend(T.prototype,c),t.extend(T.prototype,f),T}),csui.define("hbs!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.links",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,s){return'  <div class="left-toolbar"></div>\r\n'},"3":function(e,t,i,n,s){return'  <div class="right-toolbar"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r,a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"toolbar"):t,{"name":"if","hash":{},"fn":e.program(1,s,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":3,"column":7}}}))?o:"")+'\r\n<div class="tab-links-bar">\r\n  <span class="fadeout"></span>\r\n  <ul class="binf-nav '+e.escapeExpression((r=null!=(r=a(i,"tab_type")||(null!=t?a(t,"tab_type"):t))?r:e.hooks.helperMissing,"function"==typeof r?r.call(null!=t?t:e.nullContext||{},{"name":"tab_type","hash":{},"loc":{"start":{"line":7,"column":22},"end":{"line":7,"column":34}}}):r))+'" role="tablist"></ul>\r\n</div>\r\n\r\n'+(null!=(o=a(i,"if").call(null!=t?t:e.nullContext||{},null!=t?a(t,"toolbar"):t,{"name":"if","hash":{},"fn":e.program(3,s,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":0},"end":{"line":12,"column":7}}}))?o:"")+'\r\n<div class="csui-pman-add-newtab">\r\n  <button class="icon icon-action-add" title="Add tab"></button>\r\n</div>\r\n'}});return i.registerPartial("csui_perspectives_tabbed-flow_impl_edit.perspective_tab.links",n),n}),csui.define("hbs!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.link",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,s){var o,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#'+e.escapeExpression((o=null!=(o=r(i,"uniqueTabId")||(null!=t?r(t,"uniqueTabId"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"uniqueTabId","hash":{},"loc":{"start":{"line":1,"column":10},"end":{"line":1,"column":25}}}):o))+'" class="cs-tablink" data-binf-toggle="tab" title="'+e.escapeExpression((r(i,"csui-l10n")||t&&r(t,"csui-l10n")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?r(t,"title"):t,{"name":"csui-l10n","hash":{},"loc":{"start":{"line":1,"column":76},"end":{"line":1,"column":95}}}))+'">\r\n  <span class="cs-tablink-text">'+e.escapeExpression((r(i,"csui-l10n")||t&&r(t,"csui-l10n")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?r(t,"title"):t,{"name":"csui-l10n","hash":{},"loc":{"start":{"line":2,"column":32},"end":{"line":2,"column":51}}}))+'</span>\r\n  <input class="csui-pman-editinput binf-hidden" tabindex="-1">\r\n</a>\r\n<div class="cs-tablink-delete" title="'+e.escapeExpression((o=null!=(o=r(i,"removeTab")||(null!=t?r(t,"removeTab"):t))?o:e.hooks.helperMissing,"function"==typeof o?o.call(null!=t?t:e.nullContext||{},{"name":"removeTab","hash":{},"loc":{"start":{"line":5,"column":38},"end":{"line":5,"column":51}}}):o))+'">\r\n  <span class="icon clear-icon-white cs-delete-icon" role="button" data-cstabindex="0"></span>\r\n</div>\r\n'}});return i.registerPartial("csui_perspectives_tabbed-flow_impl_edit.perspective_tab.link",n),n}),csui.define("csui/perspectives/tabbed-flow/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspectives/tabbed-flow/impl/nls/root/lang",{"deleteConfirmTitle":"Remove Tab","deleteConfirmMsg":"Are you sure, you want to remove Tab?","removeTab":"Remove Tab","newTabTitle":"Tab","newTabInput":"Add tab label"}),csui.define("css!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.link",[],function(){}),csui.define("csui/perspectives/tabbed-flow/impl/edit.perspective/tab.link.view",["csui/lib/underscore","csui/controls/tab.panel/impl/tab.link.view","hbs!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.link","i18n!csui/perspectives/tabbed-flow/impl/nls/lang","csui/lib/binf/js/binf","css!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.link"],function(e,t,i,n){return t.extend({"template":i,"templateHelpers":function(){return{"removeTab":n.removeTab}},"className":function(){return this._isOptionActiveTab()?"pman-edit-tab binf-active":"pman-edit-tab"},"events":function(){return e.extend(t.prototype.events,{"click @ui.link":"_onShowTab","dblclick @ui.tabLink":"_onTabClick","keydown @ui.editInput":"_onInputKeydown","keyup @ui.editInput":"_onInputKeyup","focusout @ui.editInput":"_onInputFocusOut","click @ui.tabRemove":"_onTabRemove"})},"ui":function(){return e.extend(t.prototype.ui,{"editInput":".csui-pman-editinput","tabLink":".cs-tablink-text","tabRemove":".cs-delete-icon"})},"_onShowTab":function(e){this.model.get("title")||(e.preventDefault(),e.stopPropagation())},"_onTabRemove":function(){var e=this;csui.require(["csui/dialogs/modal.alert/modal.alert"],function(t){t.confirmQuestion(n.deleteConfirmMsg,n.deleteConfirmTitle).done(function(t){t&&e._doRemoveTab()})})},"_doRemoveTab":function(){this.model.get("title")||this.trigger("enable:addTab"),this.trigger("remove:tab",this.model)},"_onTabClick":function(e){e.preventDefault(),e.stopPropagation(),this._editTab()},"_editTab":function(){var e;this.ui.tabLink.text()?(e=this.ui.tabLink.text(),this.ui.editInput.val(e)):this.ui.editInput.attr("placeholder",n.newTabInput),this._setEdit(!0)},"_setEdit":function(e){if(e){if(this.options&&this.options.tabPanel&&this.options.tabPanel.activatingTab)return;this.trigger("disable:addTab"),this.ui.tabRemove.addClass("binf-hidden"),this.ui.editInput.removeClass("binf-hidden"),this.ui.tabLink.addClass("binf-hidden"),this.trigger("before:edit",this)}else this.ui.tabLink.removeClass("binf-hidden"),this.ui.editInput.addClass("binf-hidden"),this.activate(),this.ui.link.trigger("focus")},"_onInputFocusOut":function(){if(!this.ui.tabLink.text())return void this._doRemoveTab();this._setEdit(!1),this.ui.tabRemove.removeClass("binf-hidden"),this.trigger("enable:addTab")},"_onInputKeydown":function(e){var t=e.target.value;32==e.which&&(!t&&e.preventDefault(),e.stopPropagation())},"_onInputKeyup":function(e){var t=e.target.value;if(!(t&&0!==t.length||13!=e.which&&27!=e.which))return void this._doRemoveTab();switch(e.which){case 13:this._setTabTitle(t);break;case 27:this._setEdit(!1)}},"_setTabTitle":function(e){this.ui.tabLink.text(e),this._setEdit(!1),this.model.set("title",e)},"onShow":function(){this.model.get("title")||this._editTab()},"constructor":function(){t.prototype.constructor.apply(this,arguments)}})}),csui.define("css!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.links",[],function(){}),csui.define("csui/perspectives/tabbed-flow/impl/edit.perspective/tab.links.view",["csui/lib/underscore","csui/controls/tab.panel/tab.links.ext.view","hbs!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.links","csui/perspectives/tabbed-flow/impl/edit.perspective/tab.link.view","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","i18n!csui/perspectives/tabbed-flow/impl/nls/lang","csui/lib/binf/js/binf","css!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.links"],function(e,t,i,n,s,o){return t.extend({"template":i,"childView":n,"childViewContainer":function(){return"."+this.tabType},"ui":{"addNewTab":".csui-pman-add-newtab"},"triggers":{"before:edit":"before:edit"},"events":{"click @ui.addNewTab":"_onAddNewTab"},"childViewOptions":function(t,i){return e.extend(this.options,{})},"childEvents":{"remove:tab":"_onRemoveTab","enable:addTab":"enableAddTab","disable:addTab":"disableAddTab","before:edit":"onBeforeEditTab"},"constructor":function(){t.prototype.constructor.apply(this,arguments)},"_onRemoveTab":function(e){var t=e.isActive(),i=this.collection.indexOf(e.model);if(this.collection.remove(e.model),t&&(i>=this.collection.length&&(i=this.collection.length-1),!(i<0))){var n=this.collection.at(i);this.children.findByModel(n).activate()}},"_onAddNewTab":function(){if(!this.ui.addNewTab.hasClass("csui-pman-disable-newtab")){var e={"title":""};this.options.tabPanel.collection.add(e)}},"enableAddTab":function(){this.ui.addNewTab.removeClass("csui-pman-disable-newtab"),this.keyboardBehavior.refreshTabableElements(this)},"disableAddTab":function(){this.ui.addNewTab.addClass("csui-pman-disable-newtab")},"onBeforeEditTab":function(e){this.trigger("before:edit",e)}})}),csui.define("csui/perspectives/tabbed-flow/tabbed-flow.perspective.view",["require","module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/models/widget/widget.collection","csui/models/widget/widget.model","csui/controls/tab.panel/tab.panel.view","csui/controls/grid/grid.view","csui/behaviors/widget.container/widget.container.behavior","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/utils/contexts/factories/active.tab.factory","csui/controls/tab.panel/tab.links.ext.scroll.mixin","csui/controls/tab.panel/tab.links.ext.view","csui/perspectives/tabbed/behaviors/tab.extensions.behavior","csui/utils/log","csui/perspectives/tabbed-flow/impl/edit.perspective/tab.links.view","csui/utils/contexts/fragment/context.fragment","hbs!csui/perspectives/tabbed/impl/tabbed.perspective","css!csui/perspectives/impl/perspective","css!csui/perspectives/tabbed/impl/tabbed.perspective"],function(e,t,i,n,s,o,r,a,l,c,u,d,p,h,f,m,g,b,v,y,x){"use strict";var w=t.config();i.defaults(w,{"defaultWidgetKind":"tile","widgetSizes":{"fullpage":{"widths":{"xs":12}},"tile":{"widths":{"md":6,"xl":4}},"header":{"widths":{"xs":12,"md":8,"xl":6}}}});var _=/\bdelayTabContent\b(?:=([^&]*)?)?/i.exec(location.search);void 0===(_=!_||"false"!==_[1])&&(_=w.delayTabContent);var C=u.RowView.extend({"cellView":function(e){var t=e.get("widget");if(t){if(!t.view)throw new o.Error({"name":"UnresolvedWidgetError","message":'Widget "'+t.type+'" not resolved:'+t.error});return t.view}},"cellViewOptions":function(e){var t=e.get("widget");return{"context":this.options.context,"data":t&&t.options||{},"model":void 0}},"constructor":function(e){e&&"edit"===e.perspectiveMode&&this._prepareForEditMode(e),u.RowView.prototype.constructor.apply(this,arguments),"edit"===this.options.perspectiveMode&&(this._initEditMode(),this._registerEditEvents())},"_prepareForEditMode":function(t){t.cellBehaviours={"PerspectiveWidgetConfig":{"behaviorClass":e("csui/perspective.manage/behaviours/pman.widget.config.behaviour"),"perspectiveView":this,"perspectiveSelector":".perspective-editing .cs-perspective #"+t.tabId}}},"_initEditMode":function(){var e=this,t={"type":"csui/perspective.manage/widgets/perspective.placeholder"};S._resolveWidget(t).done(function(i){var n=S._createCell(t,i);e.options.collection.add(n)})},"_registerEditEvents":function(){var e=this;this.listenTo(this,"delete:widget",function(t){var i=t.model;e.collection.remove(i)}),this.listenTo(this,"replace:widget",this._replaceWidget)},"_replaceWidget":function(e,t){if(this.getPManPlaceholderWidget){var i=this;S._resolveWidget(t).done(function(){e.model.get("widget").type!==i.getPManPlaceholderWidget().type&&(t.kind=e.model.get("widget").kind);var n=S._prepareCell(t);e.model.set(n);var s=i.getPManPlaceholderWidget(),o=i.collection;o.filter(function(e){return e.get("widget").type===s.type}).length>0||S._resolveWidget(s).done(function(e){var t=S._createCell(s,e,o.length);o.add(t)})})}}}),T=c.extend({"contentView":C,"contentViewOptions":function(e){return{"context":this.options.context,"columns":e.get("columns"),"perspectiveMode":this.options.perspectiveMode,"tabId":e.get("uniqueTabId")}},"constructor":function(e){e||(e={}),i.defaults(e,{"delayTabContent":_,"overlappingTabActivation":!1,"toolbar":!0,"TabLinkCollectionViewClass":m,"tabBarExtensionViewClass":e.tabBarExtensionViewClass,"tabBarExtensionViewOptions":e.tabBarExtensionViewOptions,"enableExtensionOnFirstTab":e.enableExtensionOnFirstTab}),"edit"===e.perspectiveMode&&i.extend(e,{"TabLinkCollectionViewClass":v}),this.behaviors=i.extend({"TabExtensionsBehavior":{"behaviorClass":g}},this.behaviors),n(window).on("resize",{"view":this},this._onWindowResize),c.prototype.constructor.call(this,e)},"render":function(){return c.prototype.render.apply(this),this.listenTo(this.collection,"change reset remove",i.bind(function(e){this._enableToolbarState(),this.activatingTab=!1,this.skipAutoScroll=!1,this._autoScrolling()},this)),this.listenTo(this.tabLinks,"before:edit",function(e){this.skipAutoScroll=!1,this.tabsSelector=n(this.$el.find(".tab-links .tab-links-bar")[0]).find("> ul li"),this.tablinksToolbar=n(this.$el.find(".tab-links .tab-links-bar")[0]),this[e&&e.model.get("title")?"_autoScrolling":"_autoScrollLastTab"]().done(i.bind(function(){this._enableToolbarState(),e&&e.ui&&e.ui.editInput.trigger("focus")},this))}),this},"onDomRefresh":function(){this._enableToolbarState()},"_onWindowResize":function(e){e&&e.data&&e.data.view&&e.data.view._enableToolbarState()}});i.extend(T.prototype,f);var k=o.ItemView.extend({"className":"cs-tabbed-perspective-header","constructor":function(t){if(t||(t={}),t.header||(t.header={}),"edit"===t.perspectiveMode){var n=e("csui/perspective.manage/behaviours/pman.widget.config.behaviour");this.behaviors=i.extend({"PerspectiveWidgetConfig":{"behaviorClass":n,"perspectiveView":this}},this.behaviors)}o.ItemView.call(this,i.extend({"template":!1},t)),"edit"===this.options.perspectiveMode&&(this._initEditMode(t),this._registerEditEvents())},"_initEditMode":function(e){!this.options.header.widget&&this.getPManPlaceholderWidget&&this._handleReplaceWidget(this,this.getPManPlaceholderWidget())},"_ensureRegion":function(){return this.headerContainer||(this.headerContainer=new o.Region({"el":this.el})),this.headerContainer},"onRender":function(){if(this.options.header.widget){this.navigationHeader=this._createWidget(this.options.header.widget);this._ensureRegion().show(this.navigationHeader)}},"_createWidget":function(e){var t=e.view;if(!t)throw new o.Error({"name":"UnresolvedWidgetError","message":'Widget not resolved: "'+e.type+'"'});return new t({"context":this.options.context,"data":e.options||{}})},"_registerEditEvents":function(){var e=this;this.listenTo(this,"delete:widget",function(t){if(e.getPManPlaceholderWidget){var i=e.getPManPlaceholderWidget();S._resolveWidget(i).done(function(){e._replaceWidget(i)})}}),this.listenTo(this,"replace:widget",this._handleReplaceWidget)},"_replaceWidget":function(e){this.options.header.widget=e,this.render()},"_handleReplaceWidget":function(e,t){var i=this;S._resolveWidget(t).done(function(){i._replaceWidget(t)})},"getPManWidgetConfig":function(){return this.options.header.widget}}),S=o.LayoutView.extend({"className":"cs-tabbed-perspective cs-perspective binf-container-fluid cs-tabbed-flow-perspective","template":x,"regions":{"headerRegion":"> .cs-header","contentRegion":"> .cs-content"},"constructor":function(e){e||(e={}),e=n.extend(!0,{},e),this.context=e.context,e.collection||(e.collection=this._createCollection(e)),o.LayoutView.prototype.constructor.call(this,e),this.propagateEventsToRegions()},"onRender":function(){this.headerView=new k(this.options),this.options.header.widget?this.$el.removeClass("csui-no-header"):this.$el.addClass("csui-no-header"),this.headerRegion.show(this.headerView),this.tabPanel=new T(i.extend({"activeTab":this.activeTab,"delayTabContent":this.options.delayTabContent,"tabBarExtensionViewClass":this.headerView.navigationHeader&&this.headerView.navigationHeader.tabBarExtensionView,"tabBarExtensionViewOptions":this.headerView.navigationHeader&&this.headerView.navigationHeader.tabBarExtensionViewOptions,"enableExtensionOnFirstTab":this.headerView.navigationHeader&&this.headerView.navigationHeader.enableExtensionOnFirstTab},this.options)),this._updateToggleHeaderState(),this.listenTo(this.tabPanel,"before:activate:tab",this._onBeforeActivateTab).listenTo(this.tabPanel,"activate:tab",this._onActivateTab),this.contentRegion.show(this.tabPanel),this.headerRegion.$el.on(this._transitionEnd(),i.bind(function(e){e.target===this.headerRegion.el&&(this.$el.removeClass("cs-toggling"),this.triggerMethod("dom:refresh"))},this))},"onBeforeRender":function(){this.headerRegion&&this.headerRegion.$el&&this.headerRegion.$el.off(this._transitionEnd())},"onBeforeDestroy":function(){this.headerRegion&&this.headerRegion.$el&&this.headerRegion.$el.off(this._transitionEnd())},"_onBeforeActivateTab":function(e,t,i){_&&!t.contextFragment&&(this.contextFragment=new y(this.context))},"_onActivateTab":function(e,t,i){t.contextFragment&&(t.contextFragment.fetch(),t.contextFragment.destroy(),t.contextFragment=void 0),this._updateToggleHeaderState(e,t,i)},"_updateToggleHeaderState":function(e,t,i){if("edit"!==this.options.perspectiveMode){var n=i?i.model.collection.indexOf(i.model):this.activeTab&&this.activeTab.get("tabIndex")||0,s=0===n?"removeClass":"addClass",o=this.$el.hasClass("cs-collapse");("removeClass"===s&&o||"addClass"===s&&!o)&&(this.$el.addClass("cs-toggling"),this.$el[s]("cs-collapse"))}},"_transitionEnd":i.once(function(){var e,t={"transition":"transitionend","WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend"},i=document.createElement("div");for(e in t)if(void 0!==i.style[e])return t[e]}),"_createCollection":function(e){e.tabs&&(e.tabs=i.each(e.tabs,function(e){e.widgets=i.filter(e.widgets,function(e){return void 0!=r.filterUnSupportedWidgets(e,w)})}));var t=new s.Collection(e.tabs),n=i.chain(e.tabs).map(function(e){return e.widgets}).flatten().pluck("type").unique().map(function(e){return{"id":e}}).value(),o=e.header&&e.header.widget&&r.filterUnSupportedWidgets(e.header.widget,w),l=new a(n),c=this;return o&&l.add({"id":o.type}),t.each(function(e){e.set("id",i.uniqueId("cs-tab"))}),this.widgetsResolved=l.fetch().then(function(){if(o){var e=l.get(o.type),n=e.get("view");if(n)i.extend(o,{"view":n});else{var s=e.get("error");b.warn('Loading widget "{0}" failed. {1}',o.type,s)&&console.warn(b.last),i.extend(o,d.getErrorWidget(o,s))}}return t.each(function(e){e.set("columns",c._createColumns(e.get("widgets"),l))}),l}),t},"_createColumns":function(e,t){return i.map(e,function(e){var i=t.get(e.type);return S._createCell(e,i)}.bind(this))}},{"_prepareCell":function(e){return e.kind||(e.kind=w.defaultWidgetKind),{"sizes":(w.widgetSizes[e.kind]||{}).widths,"widget":{"type":e.type,"options":e.options,"view":e.view}}},"_createCell":function(e,t){var n=t.get("view"),s=t.get("manifest")||{},o=s.supportedKinds,r=e.kind;r&&o&&i.contains(o,r)||(r=s.kind),e.kind=r,r||(r=w.defaultWidgetKind);w.widgetSizes[r];if(n)return e.view=n,S._prepareCell(e);var a=t.get("error");return b.warn('Loading widget "{0}" failed. {1}',e.type,a)&&console.warn(b.last),{"sizes":w.widgetSizes[w.defaultWidgetKind].widths,"widget":d.getErrorWidget(e,a)}},"_resolveWidget":function(e){var t=n.Deferred(),i=new l({"id":e.type});return i.fetch().then(function(){e.view=i.get("view"),t.resolve(i)},function(e){t.reject(e)}),t.promise()}});return i.extend(S.prototype,p),S}),csui.define("csui/pages/start/impl/location",[],function(){return{get"search"(){return location.search},get"href"(){return location.href},get"hash"(){return location.hash}}}),csui.define("csui/pages/start/perspective.router",["csui/lib/backbone","csui/lib/jquery","csui/lib/underscore","csui/utils/contexts/factories/application.scope.factory","csui/pages/start/impl/location","csui/utils/url"],function(e,t,i,n,s,o){"use strict";var r,a,l=!0;return e.Router.extend({"constructor":function(t){e.Router.prototype.constructor.apply(this,arguments),this.context=t.context,this._routeWithSlashes=t.routeWithSlashes,this.applicationScope=this.context.getModel(n),this.listenTo(this,"other:route",this.onOtherRoute),this.listenTo(this.context,"sync error",function(){l=!1})},"execute":function(t,i){return this._session=this.context.viewStateModel.get("session_state")||!1,this.trigger("before:route",this),this._restoreUrlParamsFromViewState(),e.Router.prototype.execute.apply(this,arguments)},"_restoreUrlParamsFromViewState":function(){if(!this.urlParams||0===this.urlParams.length){var e=this.context.viewStateModel,t=e.get(e.CONSTANTS.URL_PARAMS);t&&i.isString(t)&&(t=JSON.parse(t))&&(this.urlParams=t.slice())}},"getUrlParametersList":function(){return this.urlParams},"addUrlParameters":function(e,t){var n=this.getUrlParametersList()||[];t&&(n=[]),this.urlParams=i.unique(n.concat(e));var s=this.context.viewStateModel;return s.set(s.CONSTANTS.URL_PARAMS,this.urlParams),this._clearViewStateModelKeys(this.urlParams),!0},"_clearViewStateModelKeys":function(e){var t,n=this.context.viewStateModel,s=n.get("state");i.keys(s).forEach(function(i){-1===e.indexOf(i)&&(delete s[i],t=!0)}),t&&(n.unset("state",{"silent":!0}),n.set("state",s))},"_resetViewStateModel":function(e){if(!l){var t=this.context.viewStateModel,i=t.CONSTANTS;t.unset(i.STATE,{"silent":!0}),t.unset(i.DEFAULT_STATE,{"silent":!0}),t.unset(i.SESSION_STATE,{"silent":!0}),t.unset(i.QUERY_STRING_PARAMS,{"silent":!0}),t.set(i.STATE,{}),t.set(i.DEFAULT_STATE,{}),t.set(i.SESSION_STATE,{}),t.set(i.QUERY_STRING_PARAMS,"")}},"getActiveRouter":function(){return r},"getPreviousRouter":function(){return a},"onViewStateChanged":function(){},"getInitialViewState":function(){return{}},"activate":function(e){if(this.context.viewStateModel.set("isFirstRoute",!1===this._session,{"silent":!0}),this.context.viewStateModel.set("routeFromUrl",void 0!==this._session,{"silent":!0}),delete this._session,r!==this){a=r,r=this;var t=this.getUrlParametersList();a&&!this.restoring&&t&&t.length>0&&(t.length=0),this._activeRouterChanged()}this.context.viewStateModel.set("enabled",this.isViewStateModelSupported()),e&&(this._saveViewState(),this._initializeViewState())},"_saveViewState":function(){var e=this.context.viewStateModel,t={},n=e.get("state");n&&i.extend(t,n),e.set("saved_viewstate",t)},"_initializeViewState":function(){
var e=this.context.viewStateModel,t=e.get("state");t&&0===i.keys(t).length&&e.unset("state",{"silent":!0});var n=this.getInitialViewState();e.setViewState("state",n,{"silent":!0}),this._syncDefaultStateToViewState(n)},"_syncDefaultStateToViewState":function(e){var t,i=this.context.viewStateModel,n=i.get("default_state");if(n){var s=Object.keys(e);Object.keys(n).forEach(function(e){-1===s.indexOf(e)&&(delete n[e],t=!0)}),t&&(i.unset("default_state"),i.set("default_state",JSON.parse(JSON.stringify(n))))}},"_activeRouterChanged":function(){var e=this.context.viewStateModel;r===this&&(e.set("activeRouterInstance",this),this.listenTo(e,"change:state",this.onViewStateChanged),a&&a.stopListening(e,"change:state",a.onViewStateChanged))},"buildUrlParams":function(){var e=this.urlParams,n=this.context,s=n&&n.viewStateModel,o=s&&s.get("state"),r=s.get("default_state"),a=[],l=s&&s.get("initialUrlParams");if(l&&l.length&&(a=a.concat(l),a.forEach(function(t){o[t.name]=t.value,e=e||[],e.push(t.name)})),e&&o&&e.forEach(function(e){var t=o[e],i=r&&r[e];void 0!==t&&void 0!==i&&t.toString().toUpperCase()!==i.toString().toUpperCase()&&this._addToParamsArray(a,{"name":e,"value":t})}.bind(this)),a=a||[],i.keys(o).forEach(function(e){if(r&&void 0!==r[e]&&void 0!==o[e]&&r[e].toString().toUpperCase()===o[e].toString().toUpperCase())return!0;void 0!==o[e]&&this._addToParamsArray(a,{"name":e,"value":o[e]})}.bind(this)),!s.get(s.CONSTANTS.CURRENT_ROUTER)){var c=s.get(s.CONSTANTS.QUERY_STRING_PARAMS);i.keys(c).forEach(function(e){this._addToParamsArray(a,{"name":e,"value":c[e]})}.bind(this))}return t.param(a)},"_addToParamsArray":function(e,t){if(t&&t.name){var i=!1;if(e.some(function(e){if(e.name===t.name)return i=!0,!0}),!i)return e.push(t),!0}},"restore":function(t){var i=this.context.viewStateModel,n=t.fragment;i?(this.restoring=!0,i.set(i.CONSTANTS.URL_PARAMS,t.urlParam),i.set("replaceURL",!0),n&&e.Router.prototype.navigate.call(this,n,{"trigger":!0})):window.history.back()},"initSessionViewState":function(){var e=this.context&&this.context.viewStateModel;e&&e.set(e.CONSTANTS.SESSION_STATE,{})},"initDefaultViewState":function(){if(!this.restoring){var e=this.context&&this.context.viewStateModel;e&&e.set(e.CONSTANTS.DEFAULT_STATE,i.pick(e.get(e.CONSTANTS.DEFAULT_STATE)||{},e.get(e.CONSTANTS.URL_PARAMS)||[]))}},"getUrlParamsNotInFragment":function(e){var t=[],n=i.keys(o.urlParams(e)),s=this.getUrlParametersList();return s&&s.forEach(function(e){-1===n.indexOf(e)&&t.push(e)}),t},"initViewStateFromUrlParams":function(e,n){var s={},o=this.context&&this.context.viewStateModel;if(this._saveViewState(),i.isString(e)){var r=t.parseParams(e);o.set(o.CONSTANTS.QUERY_STRING_PARAMS,t.parseParams(e));var a=this.getUrlParametersList();a&&a.length>0?s=i.pick(r,this.getUrlParametersList()):(i.extend(s,r),this.addUrlParameters(i.keys(s)));var l=this.context.viewStateModel.get("default_state");if(l){var c={};i.extend(c,s),i.extend(s,l),i.extend(s,c)}}else s=e;o&&o.unset("state",{"silent":!0})&&o.setViewState("state",s,{"silent":n})},"isViewStateModelSupported":function(){return!1},"navigate":function(t,i){var n=this.buildUrlParams(),l=t;if(n&&(t+="?"+n),this!==r&&this.activate(!0),this.trigger("before:route",this),this._routeWithSlashes){var c=a?a.getUrlParametersList():[];c=c||[];var u=this.getUrlParamsNotInFragment(t);u&&(c=c.concat(u)),t=o.appendQuery(t,o.mergeUrlParams(t,s.search,c)),t+=s.hash}var d=this.context.viewStateModel,p=d.CONSTANTS;d.get("replaceURL")&&(d.set("replaceURL",!1),i=i||{},i.replace=!0),l!==d.get(p.CURRENT_ROUTER_FRAGMENT)&&d.onNavigationStarted({"router":this.name,"back_to_title":this.getBackToTitle(),"fragment":l,"scopeId":this.applicationScope,"navigateOptions":i,"state":d.get(p.STATE),"sessionState":d.get(p.SESSION_STATE),"defaultState":d.get(p.DEFAULT_STATE)},this.restoring),d.set("initialUrlParams",void 0);var h=e.Router.prototype.navigate.call(this,t,i);return this.initSessionViewState(),d.get(p.CURRENT_ROUTER)!==this.name&&(d.set(p.CURRENT_ROUTER,this.name),d.set(p.BACK_TO_TITLE,this.getBackToTitle()),this.initDefaultViewState()),d.set(p.CURRENT_ROUTER_FRAGMENT,l),d.set(p.CURRENT_ROUTER_NAVIGATE_OPTIONS,i),this.applicationScope?d.set(p.CURRENT_ROUTER_SCOPE_ID,this.applicationScope.get("id")):d.unset(p.CURRENT_ROUTER_SCOPE_ID),this.restoring=!1,this.trigger("after:route",this),h},"getBackToTitle":function(){return document.title}})}),csui.define("csui/pages/start/multi.perspective.routing",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/utils/routing","csui-ext!csui/pages/start/perspective.routing"],function(e,t,i,n,s,o){"use strict";function r(e){this.options=t.extend({},a,e);var i=[],n=t.chain(o).flatten(!0).filter(function(e){if(!e.isDefault)return!0;i.push(e)}).concat(i).unique().reverse().value(),r=s.routesWithSlashes();this._routers=t.map(n,function(e,i){var n=new e(t.extend({"routeWithSlashes":r},this.options));return n.name||(n.name=i),n.on("before:route",t.bind(this._informOthers,this)),n},this),this._context=this.options.context,this._context.viewStateModel.set("PerspectiveRouting",this),this._originalHistoryLength=history.length,this.started=!1}var a=t.extend({"handlerUrlPathSuffix":"/app","rootUrlPath":null},e.config()),l=!1;return t.extend(r.prototype,i.Events,{"start":function(e){var o;if(s.routesWithSlashes())o={"pushState":!0,"root":null!=this.options.rootUrlPath&&this.options.rootUrlPath||n.combine(new n(new n(location.pathname).getCgiScript()).getPath(),this.options.handlerUrlPathSuffix)};else{o={"root":i.history.decodeFragment(location.pathname)}}t.extend(o,e),l||i.history.start(o),l=!0,this.started=!0,this._context&&this._context.viewStateModel.set("history",!0)},"ensureStart":function(e){this.started||this.start(e)},"hasRouted":function(){return history.length>this._originalHistoryLength},"addUrlParameters":function(e,t,i){var n=!0;return this._routers.some(function(s){if(s.name===e)return s.addUrlParameters(t,i)&&(n=!0),!0}),!0},"restoreRouter":function(e){this._routers.some(function(t){if(t.name===e.router)return t.restoring=!0,t.restore(e),!0})},"getRouter":function(e){var t;return this._routers.some(function(i){if(i.name===e)return t=i,!0}),t},"_informOthers":function(e){t.each(this._routers,function(t){t!==e&&t.trigger("other:route",t,e)})}}),r.extend=i.History.extend,r}),csui.define("csui/pages/start/perspective.routing",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/utils/routing","csui/pages/start/multi.perspective.routing","csui-ext!csui/pages/start/perspective.routing"],function(e,t,i,n,s,o,r){"use strict";var a,l=t.extend({"handlerUrlPathSuffix":"/app","rootUrlPath":null},e.config()),c=o.extend({"constructor":function(e){e=t.extend({},l,e),o.prototype.constructor.call(this,e)}});return c.routesWithSlashes=s.routesWithSlashes,{"getInstance":function(e){if(!a){if(e.context&&e.context.viewStateModel){var t=e.context.viewStateModel.get("PerspectiveRouting");if(t)return t}a=new c(e)}return a},"routesWithSlashes":s.routesWithSlashes}}),csui.define("csui/pages/start/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/pages/start/nls/root/lang",{"ProductName":"Content Suite Platform CE 22.2","LandingPageBackTo":"Home","UserTitle":"Home - {1}","NodeTitle":"{0} - {2}","VersionTitle":"{0} v{1} - {2}","MetadataTitle":"{1}, {0} - {2}","MetadataBackTo":"Properties","PermissionsTitle":"{0}, Permissions - {1}","PermissionsBackTo":"Permissions","SearchTitle":'Searching for "{0}" - {1}',"SearchBackTo":"Search","FavoritesTitle":"Favorites - {0}","FavoritesBackTo":"Favorites","MyAssignmentsTitle":"My Assignments - {0}","MyAssignmentsBackTo":"My Assignments","RecentlyAccessedTitle":"Recently Accessed - {0}","RecentlyAccessedBackTo":"Recently Accessed","SearchResultsTitle":"Search Results - {0}","SearchResultsBackTo":"Search Results","back":"back"}),csui.define("csui/pages/start/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/pages/start/impl/nls/root/lang",{"UserLoadingTitle":"Loading current user...","NodeLoadingTitle":"Loading {0}...","Home":"Home","invalidObjectName":"Unrecognized object name was detected in the web address.","mainNavigationAria":"Main navigation","profileMenuTitle":"Profile Menu","profileMenuAria":"Profile Menu of {0}","profileImageAlt":"Profile Menu of {0}"}),csui.define("csui/pages/start/impl/landing.perspective.router",["csui/lib/underscore","csui/utils/base","csui/pages/start/perspective.router","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/factories/user","i18n!csui/pages/start/nls/lang","i18n!csui/pages/start/impl/nls/lang"],function(e,t,i,n,s,o,r){"use strict";return i.extend({"routes":{"*other":"openLandingPerspective"},"name":"Landing","constructor":function(e){i.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(n),this.listenTo(this.applicationScope,"change:id",this._updateHomeUrl),this.user=this.context.getModel(s),this.listenTo(this.user,"change:id",this._updatePageTitle)},"openLandingPerspective":function(){this.activate(!0),this._updatePageTitle(),this.applicationScope.set("id","")},"onViewStateChanged":function(){this._updateHomeUrl()},"restore":function(e){this.openLandingPerspective(e)},"_updateHomeUrl":function(){this.applicationScope.id||(this!==this.getActiveRouter()&&this.activate(!0),this._updatePageTitle(),this.navigate(""))},"_updatePageTitle":function(){""===this.applicationScope.id&&(document.title=this.user.has("name")?e.str.sformat(o.UserTitle,t.formatMemberName(this.user),o.ProductName):r.UserLoadingTitle)},"getBackToTitle":function(){return o.LandingPageBackTo},"isViewStateModelSupported":function(){return!0}},{"isDefault":!0})}),csui.define("csui/pages/start/impl/node.perspective.router",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/pages/start/perspective.router","csui/utils/contexts/factories/next.node","csui/models/node/node.model","i18n!csui/pages/start/nls/lang","i18n!csui/pages/start/impl/nls/lang"],function(e,t,i,n,s,o,r,a,l){"use strict";return s.extend({"routes":{"nodes/:id":"openNodePerspective","nodes/:id(?*query_string)":"openNodePerspective"},"name":"Node","constructor":function(e){s.prototype.constructor.apply(this,arguments),this.nextNode=this.context.getModel(o),this.listenTo(this.nextNode,"change:id",this._updateNodeUrl),this.listenTo(this.nextNode,"before:change:id",function(){this.lastNodeId=this.nextNode.get("id"),this.activate(!0)}.bind(this)),this.lastNodeId=this.nextNode.get("id")},"openNodePerspective":function(e,t){if(this.navigateFromUrl=!0,r.usesIntegerId&&(e=parseInt(e),isNaN(e)))return this.nextNode.unset("id",{"silent":!0}),this.context.rejectPerspective(new n.Model,new Error(l.invalidObjectName));var i=e&&e!==this.nextNode.get("id");this.activate(!1),this.restoring||this.initViewStateFromUrlParams(t,i);var s=this.context,o=s.viewStateModel;i&&this.nextNode.set("id",e),setTimeout(function(){i&&o&&o.get("state")&&o.get("state").filter&&o.trigger("change:state")},1e3)},"onOtherRoute":function(){this.nextNode.clear({"silent":!0})},"isViewStateModelSupported":function(){return!0},"onViewStateChanged":function(){this.nextNode.get("id")&&this._updateNodeUrlImmediately()},"restore":function(e){this.openNodePerspective(e.sessionState.id,e.state)},"resetQueryStringParams":function(){var e=this.context.viewStateModel,t=e.CONSTANTS;e.unset(t.QUERY_STRING_PARAMS)},"waitForPerspectiveChange":function(e){this.listenToOnce(this.context,"retain:perspective change:perspective error:perspective",e)},"_updateNodeUrl":function(){this!==this.getActiveRouter()&&this.activate(!0);var e=function(){this.stopListening(this.context,"retain:perspective change:perspective error:perspective",e),this._updateNodeUrlImmediately(),this._updatePageTitle()}.bind(this);this.waitForPerspectiveChange(e)},"_updateNodeUrlImmediately":function(){if(this.navigateFromUrl?this.navigateFromUrl=!1:this.resetQueryStringParams(),this.nextNode.isFetchable()){var e=this.nextNode,t=e.get("id"),i="nodes/"+encodeURIComponent(t);this!==this.getActiveRouter()&&this.activate(!0),this.navigate(i)}},"initSessionViewState":function(){this._updateSessionState()},"_updateSessionState":function(){var e=this.nextNode,t=e&&e.get("id"),n=this.context&&this.context.viewStateModel,s=n.getSessionViewState("id");if((!s||s!==t)&&n&&t){var o={};(this.restoring||void 0===this.lastNodeId||this.lastNodeId===this.nextNode.get("id"))&&i.extend(o,n.get(n.CONSTANTS.SESSION_STATE)),i.extend(o,{"id":t}),n.unset(n.CONSTANTS.SESSION_STATE,{"silent":!0}),n.set(n.CONSTANTS.SESSION_STATE,o)}},"_updatePageTitle":function(){document.title=i.str.sformat(a.NodeTitle,this.nextNode.get("name"),this.nextNode.get("type_name"),a.ProductName),this._updateBackToTitle()},"_updateBackToTitle":function(){var e=this.context&&this.context.viewStateModel;e&&e.set(e.CONSTANTS.BACK_TO_TITLE,this.nextNode.get("name"))}})}),csui.define("csui/models/server.adaptors/objecttypes.mixin",["csui/lib/underscore","csui/utils/url"],function(e,t){"use strict";return{"mixin":function(i){return e.extend(i,{"makeServerAdaptor":function(){return this},"url":function(){return t.combine(this.options.connector.getConnectionUrl().getApiBase("v2"),"members/objecttypes")},"parse":function(e){return{"objecttypes":e.results.data&&e.results.data.objects}}})}}}),csui.define("csui/models/objecttypesmodel",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/server.adaptors/objecttypes.mixin"],function(e,t,i,n,s){"use strict";var o=t.Model.extend({"constructor":function(e,i){this.options=i||(i={}),t.Model.prototype.constructor.call(this,e,i),this.makeConnectable(i).makeFetchable(i).makeServerAdaptor(i)}});return i.mixin(o.prototype),n.mixin(o.prototype),s.mixin(o.prototype),e.extend(o.prototype,{"isFetchable":function(){return!this.get("objecttypes")}}),o}),csui.define("csui/utils/contexts/factories/objecttypes.factory",["csui/lib/underscore","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/objecttypesmodel"],function(e,t,i,n){"use strict";return t.extend({"propertyPrefix":"objecttypes","constructor":function(s,o){t.prototype.constructor.apply(this,arguments);var r=this.options.objectTypes||{},a=s.getObject(i,o);r=new n(r.attributes,e.defaults({"connector":a},r.options,{"autofetch":!0})),this.property=r},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/pages/start/impl/search.perspective.router",["module","csui/lib/underscore","csui/pages/start/perspective.router","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/search.formquery.factory","csui/utils/contexts/factories/user","csui/utils/contexts/factories/objecttypes.factory","i18n!csui/pages/start/nls/lang","i18n!csui/pages/start/impl/nls/lang"],function(e,t,i,n,s,o,r,a,l){"use strict";var c=e.config();return t.defaults(c,{"showTitle":!0,"enableObjectTypes":!1}),i.extend({"routes":{"search/*path":"openSearchPerspective","search/*path(?*query_string)":"openSearchPerspective"},"name":"Search","constructor":function(e){i.prototype.constructor.apply(this,arguments),this.searchQuery=this.context.getModel(n),this.listenTo(this.searchQuery,"change",this._updateSearchUrl),this.searchForm=this.context.getModel(s),this.listenTo(this.searchForm,"change",this._updateSearchFormUrl),c.enableObjectTypes&&(this.objectTypesModel=this.context.getModel(r,{"permanent":!0}),this.objectTypesModel.ensureFetched())},"openSearchPerspective":function(e,i){var n,s=t.reduce(e.split("/"),function(e,t){return n?(e[n]=null!=t?decodeURIComponent(t).trim():"",n=void 0):n=decodeURIComponent(t),e},{});this.activate(!1),this.restoring||this.initViewStateFromUrlParams(i,!0),this._updateSearchQueryPageTitle(),this._updateSearchFormQueryPageTitle(),this.context.getModel(o).ensureFetched().then(t.bind(function(){this.searchQuery.set(s,{"silent":!!this.searchQuery.get("query_id")}),this.searchForm.get("query_id")&&this.searchForm.set(s,{"silent":!!this.searchForm.get("query_id")})},this))},"onOtherRoute":function(){this.searchQuery.clear({"silent":!0}),this.searchForm.clear({"silent":!0})},"routerURL":function(e){return t.reduce(e.attributes,function(e,t,i){return e+=t?"/"+encodeURIComponent(i)+"/"+encodeURIComponent(t):"/"+encodeURIComponent(i)+"/%20"},"search")},"_updateSearchUrl":function(){this!==this.getActiveRouter()&&this.activate(!0);var e=this.routerURL(this.searchQuery);this._updateSearchQueryPageTitle(),this.navigate(e)},"_updateSearchQueryPageTitle":function(){c.showTitle&&(document.title=t.str.sformat(a.SearchTitle,this.searchQuery.get("where"),a.ProductName))},"isViewStateModelSupported":function(){return!0},"onViewStateChanged":function(){this.viewStateChanged=!0,this._updateSearchUrl(),this.viewStateChanged=!1},"_updateSearchFormUrl":function(){this!==this.getActiveRouter()&&this.activate(!0);var e=this.routerURL(this.searchForm);this._updateSearchQueryPageTitle(),this.navigate(e)},"_updateSearchFormQueryPageTitle":function(){c.showTitle&&(document.title=t.str.sformat(a.SearchTitle,this.searchForm.get("where"),a.ProductName))},"initSessionViewState":function(){var e=this.context&&this.context.viewStateModel,t=e&&e.get(e.CONSTANTS.LAST_ROUTER);!this.restoring&&!this.viewStateChanged&&e&&e.get("navigated")&&void 0!==t&&t!==this.name&&e&&e.set(e.CONSTANTS.SESSION_STATE,{})},"_extractParameters":function(e,i){var n=e.exec(i).slice(1);return t.map(n,function(e,t){return e||null})},"getBackToTitle":function(){return a.SearchBackTo}})}),csui.define("csui/pages/start/impl/metadata.perspective.router",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/pages/start/perspective.router","csui/utils/contexts/factories/metadata.factory","csui/models/node/node.model","i18n!csui/pages/start/nls/lang","i18n!csui/pages/start/impl/nls/lang"],function(e,t,i,n,s,o,r,a,l){"use strict";return s.extend({"routes":{"nodes/:node_id/metadata":"openMetadata","nodes/:node_id/metadata(?*query_string)":"openMetadata","nodes/:node_id/metadata/navigator":"openMetadataNavigator","nodes/:node_id/metadata/navigator(?*query_string)":"openMetadataNavigator","nodes/:node_id/permissions":"openPermissions","nodes/:node_id/permissions(?*query_string)":"openPermissions","nodes/:node_id/permissions/navigator":"openPermissionsNavigator","nodes/:node_id/permissions/navigator(?*query_string)":"openPermissionsNavigator"},"name":"Metadata","constructor":function(e){s.prototype.constructor.apply(this,arguments),this.metadataModel=this.context.getModel(o),this.listenTo(this.metadataModel,"change:metadata_info",this._updateUrl),this.listenTo(this.metadataModel,"change:metadata_info",this._updatePageTitle)},"openPermissions":function(e,t){this._updateMetadataInfo({"showPermissionView":!0},!0),this._open(e,t,!1)},"openPermissionsNavigator":function(e,t){this._updateMetadataInfo({"showPermissionView":!0},!0),this._open(e,t,!0)},"openMetadata":function(e,t){this._updateMetadataInfo({"showPermissionView":!1},!0),this._open(e,t,!1)},"openMetadataNavigator":function(e,t){this._updateMetadataInfo({"showPermissionView":!1},!0),this._open(e,t,!0)},"isViewStateModelSupported":function(){return!0},"getInitialViewState":function(){var e=this.metadataModel&&this.metadataModel.get("metadata_info");if(e&&e.selectedTab){var t=e.selectedTab;if(i.isString(t))return{"dropdown":t};if(t instanceof n.Model){var s=t.get("name"),o=t.get("title");return{"dropdown":s||o}}}return{}},"_updateMetadataInfo":function(e,t){var n=this.metadataModel.get("metadata_info")||{},s={};i.extend(s,n),i.extend(s,e),t||this.metadataModel.unset("metadata_info",s,{"silent":!0}),this.metadataModel.set("metadata_info",s,{"silent":t})},"_open":function(e,t,i){r.usesIntegerId&&(e=parseInt(e));var n=this.metadataModel.get("metadata_info"),s=!n||e&&e!==n.id;this!==this.getActiveRouter()&&this.activate(!1),this.restoring||this.initViewStateFromUrlParams(t,s),this._updateMetadataInfo({"id":e,"navigator":i},!1)},"onOtherRoute":function(){this.metadataModel.clear({"silent":!0}),this.context.viewStateModel.unset("displayBreadcrumbUpToParentOnly")},"onViewStateChanged":function(){var e=this.metadataModel.get("metadata_info");e&&e.id&&this._updateUrl();var t=this.context.viewStateModel.getViewState("dropdown");e&&e.model&&t&&this._updatePageTitle()},"_updateUrl":function(){this!==this.getActiveRouter()&&this.activate(!0);var e=this.metadataModel.get("metadata_info");if(e){var t=e.id,i="nodes/"+encodeURIComponent(t)+(e.showPermissionView?"/permissions":"/metadata");e.navigator&&(i+="/navigator",this.context.viewStateModel.set("displayBreadcrumbUpToParentOnly",!0)),this.navigate(i)}},"_updatePageTitle":function(){var e=this.metadataModel.get("metadata_info");if(e&&e.model){var t;this.context.viewStateModel&&(t=this.getBackToTitle()),document.title=e.model.has("name")&&t?i.str.sformat(a.MetadataTitle,t,e.model.get("name"),a.ProductName):i.str.sformat(l.NodeLoadingTitle,e.model.get("id"))}},"getBackToTitle":function(){return this.metadataModel.get("metadata_info").showPermissionView?a.PermissionsBackTo:a.MetadataBackTo}})}),csui.define("csui/pages/start/impl/root.perspective.router",["csui/lib/underscore","csui/pages/start/perspective.router","i18n!csui/pages/start/nls/lang","csui/utils/contexts/factories/next.node"],function(e,t,i,n){"use strict";var s={"myassignments":e.str.sformat(i.MyAssignmentsTitle,i.ProductName),"recentlyaccessed":e.str.sformat(i.RecentlyAccessedTitle,i.ProductName),"favorites":e.str.sformat(i.FavoritesTitle,i.ProductName),"searchresults":e.str.sformat(i.SearchResultsTitle,i.ProductName)},o={"myassignments":i.MyAssignmentsBackTo,"recentlyaccessed":i.RecentlyAccessedBackTo,"favorites":i.FavoritesBackTo,"searchresults":i.SearchResultsBackTo};return t.extend({"name":"Root","routes":{"myassignments":"openMyAssignmentsPerspective","myassignments(?*query_string)":"openMyAssignmentsPerspective","recentlyaccessed":"openRecentlyAccessedPerspective","recentlyaccessed(?*query_string)":"openRecentlyAccessedPerspective","favorites":"openFavoritesPerspective","favorites(?*query_string)":"openFavoritesPerspective","searchresults/:id":"openSearchResultsPerspective","searchresults/:id(?*query_string)":"openSearchResultsPerspective"},"constructor":function(e){t.prototype.constructor.apply(this,arguments),this.listenTo(this.applicationScope,"change:id",this._updateUrl)},"openRecentlyAccessedPerspective":function(e){this.openApplicationScope("recentlyaccessed",e)},"openMyAssignmentsPerspective":function(e){this.openApplicationScope("myassignments",e)},"openFavoritesPerspective":function(e){this.openApplicationScope("favorites",e)},"openSearchResultsPerspective":function(e,t){e=parseInt(e),this.activate(!1),this.restoring||this.initViewStateFromUrlParams(t,e),this._updatePageTitle(),this.applicationScope.set("query_id",e),this.applicationScope.set("id","searchresults")},"openApplicationScope":function(e,t){this.activate(!1),this.initViewStateFromUrlParams(t),this._updatePageTitle(),this.applicationScope.set("id",e)},"isViewStateModelSupported":function(){return!0},"initSessionViewState":function(){this._updateSessionState()},"_updateSessionState":function(){var t=this.context&&this.context.viewStateModel;if(t){var i={};e.extend(i,t.get(t.CONSTANTS.SESSION_STATE)),t.unset(t.CONSTANTS.SESSION_STATE,{"silent":!0}),t.set(t.CONSTANTS.SESSION_STATE,i)}},"onViewStateChanged":function(){this._updateUrl()},"restore":function(e){this.applicationScope.set("id",e.scopeId)},"_updateUrl":function(){var e=this.applicationScope.id;if(s[e]){this!==this.getActiveRouter()&&this.activate(!1);var t=this.applicationScope.get("query_id");t&&(e+="/"+t),this._updatePageTitle(),this.navigate(e)}},"_updatePageTitle":function(){document.title=s[this.applicationScope.id]},"getBackToTitle":function(){return o[this.applicationScope.id]}})}),csui.define("csui/utils/contexts/factories/next.version",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/version","csui/utils/commands/versions"],function(e,t,i,n,s,o,r){"use strict";return n.extend({"propertyPrefix":"nextVersion","constructor":function(i,a){n.prototype.constructor.call(this,i,a);var l=this.options.nextVersion||{};if(!(l instanceof o)){var c=i.getObject(s,a),u=e.config();l=new o(void 0,t.extend({"connector":c,"commands":r.getAllSignatures()},l.options,u.options))}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/pages/start/impl/version.perspective.router",["csui/lib/underscore","csui/pages/start/perspective.router","csui/utils/contexts/factories/next.version","csui/models/node/node.model","i18n!csui/pages/start/nls/lang","csui/lib/underscore.string"],function(e,t,i,n,s){"use strict";return t.extend({"routes":{"nodes/:node_id/versions/:version_number":"openVersionPerspective"},"name":"Vesion","constructor":function(e){t.prototype.constructor.call(this,e),this.nextVersion=this.context.getModel(i),this.listenTo(this.nextVersion,"change:id change:version_number",this._updateVersionUrl),this.listenTo(this.nextVersion,"change:name change:version_number_name",this._updateVersionPageTitle)},"openVersionPerspective":function(e,t){n.usesIntegerId&&(e=parseInt(e)),t=parseInt(t),this.nextVersion.set({"id":e,"version_number":t})},"_updateVersionUrl":function(){this.navigate("nodes/"+this.nextVersion.get("id")+"/versions/"+this.nextVersion.get("version_number"))},"_updateVersionPageTitle":function(){document.title=e.str.sformat(s.VersionTitle,this.nextVersion.get("name"),this.nextVersion.get("version_number_name"),s.ProductName)}})}),csui.define("csui/utils/classic.nodes/impl/core.classic.nodes",[],function(){"use strict";return[{"equals":{"type":215},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"view","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":[130,134]},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"view","objId":e.get("id"),"show":1,"nexturl":location.href}}},{"equals":{"type":206},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"BrowseTask","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":204},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"BrowseTaskList","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":205},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"BrowseTaskGroup","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":212},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"BrowseMilestone","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":207},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"ViewChannel","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":208},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"ViewNews","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":218},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"OpenPoll","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":299},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"RunReport","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":384},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"ProspectorBrowse","objId":e.get("id"),"order":"-SCORE","summaries":1,"nexturl":location.href}}},{"equals":{"type":31214},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"addresubmission","RS_FUNCTION":"Edit","RSID":e.get("followup_id"),"objId":e.get("location_id"),"nexturl":location.href}}}]}),csui.define("csui/utils/content.helper",["csui/lib/underscore","csui/utils/url","csui/models/version"],function(e,t,i){"use strict";function n(n,s){s||(s={});var o=new t(n.connector.connection.url).getCgiScript(),r={"func":"doc.fetchcsui","nodeid":n.get("id")};return s.download&&(r=e.extend(r,{"action":"download"})),(n instanceof i||n.get("version_number"))&&(r.vernum=n.get("version_number")),t.appendQuery(o,t.combineQueryString(r))}return{"getContentPageUrl":n}}),csui.define("csui/utils/impl/core.defaultactionitems",["csui/utils/classic.nodes/classic.nodes","csui/utils/smart.nodes/smart.nodes"],function(e,t){"use strict";return[{"equals":{"type":[144,736,801]},"signature":"OpenDocument","sequence":10},{"equals":{"type":[2]},"signature":"Open","sequence":10},{"type":140,"signature":"Navigate","sequence":30},{"type":258,"signature":"ExecuteSavedQuery","sequence":30},{"type":292,"signature":"ExecuteSearchForm","sequence":30},{"signature":"OpenSpecificClassicPage","sequence":600,"decides":function(t){return e.isForced(t)}},{"equals":{"container":!0},"signature":"Browse","sequence":700},{"signature":"OpenSpecificNodePerspective","sequence":800,"decides":function(e){return t.isSupported(e)}}]}),csui.define("csui/utils/non-attaching.region/non-attaching.region",["csui/lib/marionette"],function(e){"use strict";return e.Region.extend({"constructor":function(t){e.Region.prototype.constructor.apply(this,arguments)},"attachHtml":function(e){}})}),csui.define("csui/utils/script-executing.region/script-executing.region",["csui/lib/marionette"],function(e){"use strict";return e.Region.extend({"constructor":function(t){e.Region.prototype.constructor.apply(this,arguments)},"attachHtml":function(e){this.$el.html("").append(e.el)}})}),csui.define("csui/utils/node.links/impl/core.node.links",["csui/utils/url","csui/models/version"],function(e,t){"use strict";return[{"equals":{"type":140},"getUrl":function(e){return e.get("url")}},{"equals":{"type":258},"getUrl":function(t){return e.combine("search/query_id/",t.get("id"))}},{"sequence":1e3,"getUrl":function(t){return e.combine("nodes/",t.get("id"))}},{"equals":{"type":144},"getUrl":function(i){var n=e.combine("nodes/",i.get("id"));if(i instanceof t){var s=i.get("version_number");n=e.combine(n,"versions/"+s)}return n}},{"equals":{"type":292},"getUrl":function(t){return e.combine("searchtemplates/",t.get("id"))}}]}),csui.define("csui/utils/open.authenticated.page",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/connector","csui/utils/url","csui/utils/log"],function(e,t,i,n,s,o){"use strict";function r(e,t,r){function a(){return 0!==t.indexOf("http:")&&0!==t.indexOf("https:")&&(t=0===t.indexOf("?")?u.getCgiScript()+t:u.getOrigin()+t),t}function l(){var e=void 0!==r.apiUrl&&r.apiUrl||c.apiUrl;return u.getCgiScript()+e}var u,d=function(){r||(r={});var e=void 0!==r.openInNewTab?r.openInNewTab:c.openInNewTab,t=r.window||(!1===e?window:window.open("","_blank"));return t&&t.location?t:parent.window}(),p=i.Deferred();return e instanceof n?(u=e.getConnectionUrl(),function(){e.makeAjaxCall({"url":l(),"xhrFields":{"withCredentials":!0}}).then(p.resolve,p.reject)}()):(u=new s(e.url),function(){var t=l(),i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(200===i.status?p.resolve():(o.warn("GET request to {0} failed:",t)&&console.warn(o.last),p.reject(new Error(i.status+" "+i.statusText))))},i.open("GET",t,!0),i.setRequestHeader("OTCSTicket",e.session.ticket),i.withCredentials=!0,i.send(null)}()),p.then(function(){d.location=a()},function(e){throw d!==window&&d!==r.window&&d.close(),e})}function a(e,t,n){function o(e,t){var i=l.createElement("input");i.setAttribute("name",e),i.setAttribute("value",t),i.setAttribute("type","hidden"),c.appendChild(i)}e.connection&&(e=e.connection);var r=new s(e.url).getCgiScript(),a=e.session.ticket,l=function(){n||(n={});var e=n.window||(!1===n.openInNewTab?window:window.open("","_blank"));return e&&e.location||(e=parent.window),e.document}(),c=function(){var e=l.createElement("form");return e.setAttribute("method","post"),e.setAttribute("action",r),l.body.appendChild(e),
e}();return o("func","csui.authenticate"),o("otcsticket",a),o("nexturl",t),c.submit(),i.Deferred().resolve().promise()}var l=/\bnewClassicAuth\b(?:=([^&]*)?)?/i.exec(location.search);l=l&&"false"!==l[1];var c=t.extend({"openInNewTab":void 0,"apiUrl":"/xecmauth"},e.config());return o=o(e.id),l?r:a}),csui.define("csui/utils/smart.nodes/impl/core.smart.nodes",[],function(){"use strict";return[{"equals":{"type":[144,736,2,801]}},{"equals":{"container":!0},"sequence":1e3}]}),csui.define("csui/utils/taskqueue",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log"],function(e,t,i,n,s){"use strict";function o(e){this.parallelism=e&&e.parallelism||1/0,this.pending=new a(void 0,{"model":r}),this.pending.on("add",this.dequeue,this),this.active=new a(void 0,{"model":r})}s=s(e.id);var r=n.Model.extend({"constructor":function(e,i){n.Model.prototype.constructor.apply(this,arguments),this.deferred=t.Deferred()},"promise":function(){return this.deferred.promise()}}),a=n.Collection.extend({"model":r});return i.extend(o.prototype,{"dequeue":function(){var e;s.debug("Pending queue {0} contains {1} tasks, active queue {0} contains {1} tasks.",this.pending.cid,this.pending.length,this.active.cid,this.active.length)&&console.log(s.last),this.active.length<this.parallelism&&(e=this.pending.shift())&&(this.execute(e),this.dequeue())},"execute":function(e){s.debug("Executing task {0}...",e.cid)&&console.log(s.last),this.active.add(e),e.get("worker")().done(e.deferred.done).fail(e.deferred.fail).always(i.bind(function(){this.active.remove(e),this.dequeue()},this))}}),o.Task=r,o.TaskCollection=a,o.version="1.0",o}),csui.define("csui/models/node/node.addable.type.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/node/node.addable.type.collection"],function(e,t,i,n,s,o){return n.extend({"propertyPrefix":"addableTypes","constructor":function(r,a){n.prototype.constructor.apply(this,arguments);var l=this.options.addableTypes||{};if(!(l instanceof i.Collection)){var c=r.getModel(s,a),u=e.config();l=new o(l.models,t.defaults({"autoreset":!0},l.options,u.options,{"node":c}))}this.property=l},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/perspective/plugins/node/utils/merge.extra.data",[],function(){"use strict";function e(e,t){if(!t)return e||[];if(!e)return t||[];for(var i=0,n=t.length;i<n;++i){var s=t[i];e.indexOf(s)<0&&e.push(s)}return e}function t(t){Array.isArray(t)||(t=Array.prototype.slice.call(arguments));for(var n={},s=0,o=t.length;s<o;++s){var r=t[s];if(r)for(var a in r)i.call(r,a)&&(n[a]=e(r[a],n[a]))}return n}var i=Object.prototype.hasOwnProperty;return t}),csui.define("csui/utils/contexts/perspective/plugins/node/utils/implement.extra.data",["csui/utils/contexts/perspective/plugins/node/utils/merge.extra.data"],function(e){"use strict";return function(t){return{"getModelFields":function(i){if(!t)return{};var n=t.map(function(e){return e.getModelFields&&e.getModelFields(i)});return e(n)},"getModelExpand":function(i){if(!t)return{};var n=t.map(function(e){return e.getModelExpand&&e.getModelExpand(i)});return e(n)}}}}),csui.define("csui/utils/contexts/perspective/plugins/node/main.node.extra.data",["csui/utils/contexts/perspective/plugins/node/utils/implement.extra.data","csui-ext!csui/utils/contexts/perspective/plugins/node/main.node.extra.data"],function(e,t){"use strict";return e(t)}),csui.define("csui/utils/contexts/perspective/plugins/node/node.extra.data",["csui/utils/contexts/perspective/plugins/node/utils/implement.extra.data","csui-ext!csui/utils/contexts/perspective/plugins/node/node.extra.data"],function(e,t){"use strict";return e(t)}),csui.define("csui/utils/contexts/impl/node.opening.context",["csui/lib/underscore","csui/utils/contexts/context","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/next.node","csui/utils/node.links/node.links","csui/utils/contexts/factories/user","csui/behaviors/default.action/impl/defaultaction","csui/utils/contexts/perspective/plugins/node/main.node.extra.data","csui/utils/contexts/perspective/plugins/node/node.extra.data","csui/utils/contexts/perspective/plugins/node/utils/merge.extra.data"],function(e,t,i,n,s,o,r,a,l,c){"use strict";var u={"fields":c(a.getModelFields(),l.getModelFields()),"expand":c(a.getModelExpand(),l.getModelExpand()),"includeResources":["metadata","perspective"]};return u.fields["versions.element(0)"]=["mime_type"],t.extend({"constructor":function(s){t.prototype.constructor.apply(this,arguments);var a=new r;this.connector=this.getObject(i,{"permanent":!0,"detached":!0}),this.user=this.getModel(o,{"permanent":!0});var l=e.extend({"delayRestCommands":!0,"defaultActionCommands":a.actionItems.getAllCommandSignatures(a.commands)},this._getNodeOptions());this.nextNode=this.getModel(n,{"options":l,"permanent":!0,"detached":!0}).on("change:id",this.onNextNodeChanged,this)},"_isFetchable":function(e){return t.prototype._isFetchable.apply(this,arguments)&&(e.property!==this.user||!this.user.get("id"))},"openNodePage":function(e){this.triggerMethod("before:open:page",this,this.nextNode),window.open(s.getUrl(e))},"_getNodeOptions":function(){return u}})}),csui.define("csui/utils/contexts/factories/previous.node",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/node/node.model"],function(e,t,i,n,s,o){"use strict";return n.extend({"propertyPrefix":"previousNode","constructor":function(i,r){n.prototype.constructor.apply(this,arguments);var a=i.getObject(s,r),l=e.config();this.property=new o(void 0,t.defaults({"connector":a},l.options))}})}),csui.define("csui/utils/contexts/impl/delayed.actions.for.node",["csui/utils/commands","csui/utils/defaultactionitems"],function(e,t){"use strict";function i(i){i.resetCommands(),i.resetDefaultActionCommands(),i.setCommands(e.getAllSignatures()),i.setDefaultActionCommands(t.getAllCommandSignatures(e)),i.setEnabledDelayRestCommands(!0,!1)}function n(e){e.nextNode.delayRestCommands&&(e.nextNode.delayedActions.on("request",s,e).on("sync",o,e).on("error",r,e),e.nextNode.actions.on("reset update",a,e),e.nextNode.on("change:csuiDelayedActionsRetrieved",l,e),u(e))}function s(){if(this.relayingActionEvents){var e=this.node.delayedActions;e._fetchStarted(),e.trigger("request",e,{},{}),e.fetching=this.nextNode.delayedActions.fetching}}function o(){if(this.relayingActionEvents){var e=this.node.delayedActions;e._fetchSucceeded(),e.trigger("sync",e,{},{})}}function r(){if(this.relayingActionEvents){var e=this.node.delayedActions;e._fetchFailed(),e.trigger("error",e,{},{})}}function a(){this.relayingActionEvents&&d(this)}function l(){this.relayingActionEvents&&this.node.set("csuiDelayedActionsRetrieved",this.nextNode.get("csuiDelayedActionsRetrieved"))}function c(e){e.nextNode.delayRestCommands&&(e.relayingActionEvents=!1)}function u(e){e.nextNode.delayRestCommands&&(e.relayingActionEvents=!0)}function d(e){e.nextNode.delayRestCommands&&e.node.actions.reset(e.nextNode.actions.models)}return{"delayCommands":i,"relayActionEvents":n,"suppressRelayingActionEvents":c,"resumeRelayingActionEvents":u,"updateNodeActions":d}}),csui.define("csui/utils/contexts/browsing/browsing.context",["require","csui/lib/underscore","csui/utils/contexts/impl/node.opening.context","csui/utils/contexts/factories/node","csui/utils/contexts/factories/previous.node","csui/utils/contexts/impl/delayed.actions.for.node","csui-ext!csui/utils/contexts/browsing/browsing.context","csui/behaviors/default.action/impl/defaultaction"],function(e,t,i,n,s,o,r,a){"use strict";return i.extend({"constructor":function(e){i.prototype.constructor.apply(this,arguments);var l=new a;this.on("request",this._changeNode,this),this.previousNode=this.getModel(s,{"permanent":!0,"detached":!0}),o.relayActionEvents(this);var c=t.extend({"delayRestCommands":!0,"defaultActionCommands":l.actionItems.getAllCommandSignatures(l.commands)},this._getNodeOptions());this.node=this.getModel(n,{"options":c,"permanent":!0,"detached":!0});var u=t.chain(e&&e.plugins||r).flatten(!0).unique().reverse().value();this._plugins=t.map(u,function(e){return new e({"context":this})},this),t.invoke(this._plugins,"onCreate")},"_isFetchable":function(e){return i.prototype._isFetchable.apply(this,arguments)&&t.all(this._plugins,function(t){return!1!==t.isFetchable(e)})},"onNextNodeChanged":function(){!1!==this.nextNode.get("container")?this.enterContainer():this.openNewNodePage()},"openNewNodePage":function(){this.openNodePage(this.nextNode),this.nextNode.clear({"silent":!0})},"enterContainer":function(){this.triggerMethod("before:enter:container",this,this.nextNode),this.nextNode.fetch().then(function(){return this._enteringContainer=!0,this.fetch()}.bind(this)).fail(function(e){csui.require(["csui/dialogs/modal.alert/modal.alert"],function(t){t.showError(e.toString())})})},"_changeNode":function(){this._enteringContainer&&(this.previousNode.clear({"silent":!0}),this.previousNode.set(this.node.attributes),this.node.clear({"silent":!0}),this.node.set("id",this.nextNode.get("id"),{"silent":!0}),setTimeout(function(){this.node.unset("id",{"silent":!0}),this.node.set(this.nextNode.attributes),o.updateNodeActions(this),this.nextNode.clear({"silent":!0})}.bind(this)),this._enteringContainer=!1)},"fetch":function(){function e(){i.prototype.fetch.apply(n,t)}var t=Array.prototype.slice.apply(arguments),n=this;return!this._enteringContainer&&this.node.isFetchable()?(this.triggerMethod("before:enter:container",this,this.node),this.node.fetch().then(e)):e()}})}),csui.define("csui/utils/contexts/impl/csui.context.plugin",["csui/utils/contexts/context.plugin","csui/models/view.state.model"],function(e,t){"use strict";function i(){this.context.viewStateModel.onContextFetch()}function n(){this.context.viewStateModel.clear()}return e.extend({"constructor":function(s){e.call(this,s);var o=this.context;o.viewStateModel=new t,o.listenTo(o,"request",i.bind(this)).listenTo(o,"destroy",n.bind(this))}})});csui.define("csui/utils/contexts/portal/portal.context",["csui/lib/underscore","csui/utils/contexts/impl/node.opening.context","csui-ext!csui/utils/contexts/portal/portal.context"],function(e,t,i){"use strict";return t.extend({"constructor":function(n){t.prototype.constructor.apply(this,arguments);var s=e.chain(n&&n.plugins||i).flatten(!0).unique().reverse().value();this._plugins=e.map(s,function(e){return new e({"context":this})},this),e.invoke(this._plugins,"onCreate")},"_isFetchable":function(i){return t.prototype._isFetchable.apply(this,arguments)&&e.all(this._plugins,function(e){return!1!==e.isFetchable(i)})},"onNextNodeChanged":function(){this.openNewNodePage()},"openNewNodePage":function(){this.openNodePage(this.nextNode),this.nextNode.clear({"silent":!0})}})}),csui.define("csui/utils/contexts/perspective/perspective.context.plugin",["csui/utils/contexts/context.plugin"],function(e){"use strict";return e.extend({"onCreate":function(){},"onApply":function(){},"onClear":function(){},"onRefresh":function(){}})}),csui.define("csui/utils/contexts/perspective/landing.perspectives",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/rules.matching/rules.matching.mixin","csui-ext!csui/utils/contexts/perspective/landing.perspectives"],function(e,t,i,n){var s=t.Model.extend({"defaults":{"sequence":100,"important":!1,"module":null},"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments),this.makeRulesMatching(i)}});i.mixin(s.prototype);var o=t.Collection.extend({"model":s,"comparator":"sequence","constructor":function(e,i){t.Collection.prototype.constructor.apply(this,arguments)},"findByUser":function(e){return this.find(function(t){return t.matchRules(e,t.attributes)})}}),r=new o([{"module":"json!csui/utils/contexts/perspective/impl/perspectives/user.json","sequence":1e4}]);return n&&r.add(e.flatten(n,!0)),r}),csui.define("csui/utils/contexts/perspective/impl/landing.perspective.context.plugin",["module","csui/lib/underscore","csui/utils/log","csui/utils/contexts/factories/user","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/perspective/landing.perspectives","csui/models/perspective/personalization.model"],function(e,t,i,n,s,o,r,a){"use strict";function l(e){var t=this.fetching;if(this.fetching=null,e===t)return!1;i.debug("Suppressing the user perspective delivery in {0}.",this.cid)&&console.log(i.last);var n=new Error("Earlier user navigation suppressed.");return this.context.triggerMethod("error:perspective",this,n),!0}return i=i(e.id),o.extend({"constructor":function(e){o.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(s).on("change:id",this.onApplicationScopeChanged,this),this.userFactory=this.context.getFactory(n),this.user=this.userFactory.property},"onApplicationScopeChanged":function(){if(!this.applicationScope.id&&!this.fetching){this.context.triggerMethod("request:perspective",this);var e=this,t=this.fetching=this.userFactory.fetch({"success":function(){e.onUserFetchSuccess(t)},"error":function(i){e.onUserFetchFailure(t,i)}})}},"onUserFetchSuccess":function(e){l.call(this,e)||a.loadPersonalization(this.user,this.context).then(this._changePerspective.bind(this,this.user),this.context.rejectPerspective.bind(this.context))},"onUserFetchFailure":function(e,t){l.call(this,e)||this.context.rejectPerspective(t)},"_changePerspective":function(e,i){var n,s=r.findByUser(e);if((t.isEmpty(e.get("perspective"))&&t.isEmpty(i)||s.get("important"))&&(n=s.get("module")),n)return this.context.overridePerspective(e,n);this.context.applyPerspective(e,!1,i)}})}),csui.define("csui/utils/contexts/perspective/node.perspectives",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/rules.matching/rules.matching.mixin","csui-ext!csui/utils/contexts/perspective/node.perspectives"],function(e,t,i,n){var s=t.Model.extend({"defaults":{"sequence":100,"important":!1,"module":null},"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments),this.makeRulesMatching(i)}});i.mixin(s.prototype);var o=t.Collection.extend({"model":s,"comparator":"sequence","constructor":function(e,i){t.Collection.prototype.constructor.apply(this,arguments)},"findByNode":function(e){return this.find(function(t){return t.matchRules(e,t.attributes)})}}),r=new o([{"equals":{"type":258},"module":"json!csui/utils/contexts/perspective/impl/perspectives/saved.query.json","sequence":100},{"equals":{"type":[144,801]},"important":!0,"module":"json!csui/utils/contexts/perspective/impl/perspectives/document.overview.json","sequence":100},{"equals":{"container":!0},"persist":!0,"module":"json!csui/utils/contexts/perspective/impl/perspectives/container.json","sequence":1e3},{"module":"json!csui/utils/contexts/perspective/impl/perspectives/metadata.json","sequence":1e4}]);return n&&r.add(e.flatten(n,!0)),r}),csui.define("csui/utils/contexts/perspective/plugins/node/node.perspective.context.plugin",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/contexts/factories/node","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/previous.node","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/perspective/node.perspectives","csui/utils/classic.nodes/classic.nodes","csui/utils/contexts/impl/delayed.actions.for.node","csui/utils/contexts/perspective/plugins/node/main.node.extra.data","csui/utils/contexts/perspective/plugins/node/node.extra.data","csui/utils/contexts/perspective/plugins/node/utils/merge.extra.data","csui/models/perspective/personalization.model"],function(e,t,i,n,s,o,r,a,l,c,u,d,p,h,f,m){"use strict";function g(){this.node=this.context.getModel(s,{"options":w}),this.node.markFetched(),y.delayCommands&&d.delayCommands(this.node)}function b(e){var t=this.fetching;if(this.fetching=null,e===t)return!1;n.debug("Suppressing the node perspective delivery in {0}.",this.cid)&&console.log(n.last);var i=new Error("Earlier node navigation suppressed.");return this.context.triggerMethod("error:perspective",this,i),!0}n=n(e.id);var v=/\bdelayCommands\b(?:=([^&]*)?)?/i.exec(location.search);v=v?"false"!==v[1]:void 0;var y=e.config();void 0!==v&&(y.delayCommands=v);var x=y.sendOriginParams,w={"fields":f(p.getModelFields(),h.getModelFields()),"expand":f(p.getModelExpand(),h.getModelExpand()),"includeResources":["metadata","perspective"]};return l.extend({"constructor":function(e){l.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(a),this.nextNodeFactory=this.context.getFactory(o,{"options":w,"permanent":!0,"detached":!0}),this.nextNode=this.nextNodeFactory.property,y.delayCommands&&d.delayCommands(this.nextNode),d.relayActionEvents(this),this.nextNode.on("change:id",this.onNextNodeChanged,this),this.previousNode=this.context.getModel(r,{"permanent":!0,"detached":!0}),g.call(this)},"onClear":function(){this._clearModels(!0)},"onRefresh":function(){this._clearModels(!1)},"isFetchable":function(e){return e.property!==this.node},"_clearModels":function(e){function t(){this.previousNode.clear({"silent":!0}),this.previousNode.set(this.node.attributes,{"silent":!0}),e?g.call(this):this.node.clear({"silent":!0})}if("node"!==this.applicationScope.id)return t.call(this),this.nextNode.clear({"silent":!0});t.call(this);var i=!e&&(this.context.hasCollection("children")||this.context.hasCollection("children2"));if(this.node.set(this.nextNode.attributes,{"silent":i}),this.nextNode.delayRestCommands&&this.nextNode.get("csuiDelayedActionsRetrieved")&&this.node.actions.reset(this.nextNode.actions.models,{"silent":i}),i){var n,s=this.context.hasCollection("children")&&this.context.getCollection("children")||this.context.hasCollection("children2")&&this.context.getCollection("children2");s.once("reset update",function(){n||(n=!0,this.node.triggerAllChanges(),d.updateNodeActions(this),d.resumeRelayingActionEvents(this))},this)}else d.updateNodeActions(this),d.resumeRelayingActionEvents(this)},"onNextNodeChanged":function(){i.trigger("closeToggleAction");var e=this.nextNode.get("id");if(!(null==e||e<=0||this.fetching)){this.context.triggerMethod("request:perspective",this),this.applicationScope.set("id","node"),d.suppressRelayingActionEvents(this);var t=this.nextNode.get("id");this.nextNode.clear({"silent":!0}),this.nextNode.actions.reset([],{"silent":!0}),this.nextNode.set("id",t,{"silent":!0});var n=this,s=this.fetching=this.nextNodeFactory.fetch({"headers":x?{"X-OriginParams":location.search}:void 0,"success":function(){n.onNodeFetchSuccess(s)},"error":function(e,t){n.onNodeFetchFailure(s,e,t)}})}},"onNodeFetchSuccess":function(e){b.call(this,e)||m.loadPersonalization(this.nextNode,this.context).then(this._changePerspective.bind(this,this.nextNode),this.context.rejectPerspective.bind(this.context))},"onNodeFetchFailure":function(e,t,i){b.call(this,e)||this.context.rejectPerspective(t,i)},"_changePerspective":function(e,i){var n=u.getUrl(e);if(n)return void window.location.replace(n);var s,o=c.findByNode(e),r=t.isEmpty(e.get("perspective"))&&t.isEmpty(i),a=!y.enableNewPerspectiveNodes&&!e.get("container"),l=o.get("important");if((r||a||l)&&(s=o.get("module")),o&&e.set({"persist":o.get("persist")},{"silent":!0}),s)return this.context.overridePerspective(e,s);this.context.applyPerspective(e,!1,i)}})}),csui.define("csui/utils/contexts/perspective/search.perspectives",["module","csui/lib/underscore","csui/lib/backbone","csui/models/mixins/rules.matching/rules.matching.mixin","csui-ext!csui/utils/contexts/perspective/search.perspectives"],function(e,t,i,n,s){var o=e.config();t.defaults(o,{"perspectiveCollection":[{"module":"json!csui/utils/contexts/perspective/impl/perspectives/search.json","sequence":1e4}]});var r=i.Model.extend({"defaults":{"sequence":100,"module":null},"constructor":function(e,t){i.Model.prototype.constructor.apply(this,arguments),this.makeRulesMatching(t)}});n.mixin(r.prototype);var a=i.Collection.extend({"model":r,"comparator":"sequence","constructor":function(e,t){i.Collection.prototype.constructor.apply(this,arguments)},"findByQuery":function(e){return this.find(function(t){return t.matchRules(e,t.attributes)})}}),l=new a(o.perspectiveCollection);return s&&l.add(t.flatten(s,!0)),l}),csui.define("csui/utils/contexts/perspective/plugins/search.perspective.context.plugin",["require","module","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/search.formquery.factory","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/perspective/search.perspectives"],function(e,t,i,n,s,o,r,a,l,c){"use strict";var u=t.config();return i.defaults(u,{"allowAlphaNumericsInQueryId":!1}),l.extend({"constructor":function(e){l.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(a),this.searchQuery=this.context.getModel(o,{"permanent":!0,"detached":!0}).on("change",this.onSearchQueryChanged,this),this.searchForm=this.context.getModel(r,{"permanent":!0,"detached":!0}).on("change",this.onSearchQueryChanged,this)},"onSearchQueryChanged":function(){this.searchQuery.get("query_id")&&"string"==typeof this.searchQuery.get("query_id")&&this.searchQuery.attributes.enableSearchForm&&"string"==typeof this.searchQuery.attributes.enableSearchForm&&(u.allowAlphaNumericsInQueryId?this.searchQuery.attributes.query_id=this.searchQuery.get("query_id"):this.searchQuery.attributes.query_id=parseInt(this.searchQuery.get("query_id")),this.searchQuery.attributes.enableSearchForm=this.searchQuery.attributes.forcePerspectiveChange=!0,this.context._factories.searchTemplate.property=this.searchQuery);var e=!this.searchQuery.get("query_id")&&!this.searchForm.get("query_id")||this.searchQuery.get("query_id"),t=e?c.findByQuery(this.searchQuery):c.findByQuery(this.searchForm),i=e?this.searchQuery.get("forcePerspectiveChange"):this.searchForm.get("forcePerspectiveChange");this.applicationScope.set("id","search"),this.context.loadPerspective(t.get("module"),i),this.listenToOnce(this.context,"sync:perspective",function(){this.searchQuery.unset("forcePerspectiveChange",{"silent":!0}),this.searchForm.unset("forcePerspectiveChange",{"silent":!0})})}})}),csui.define("csui/utils/contexts/perspective/impl/search.perspective.context.plugin",["require","csui/utils/contexts/perspective/plugins/search.perspective.context.plugin"],function(e,t){"use strict";return t}),csui.define("csui/utils/contexts/perspective/impl/metadata.perspective.context.plugin",["module","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/lib/jquery","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/factories/metadata.factory","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/factories/node","csui/utils/log","csui/models/node/node.model"],function(e,t,i,n,s,o,r,a,l,c){"use strict";return c=c(e.id),a.extend({"constructor":function(e){a.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(o),this.metadataModel=this.context.getModel(r,{"permanent":!0,"detached":!0}).on("change:metadata_info",this.onMetadataChanged,this),this.listenTo(this.context,"clear",this._prepareContext)},"_prepareContext":function(){if(-1!==["properties","permissions"].indexOf(this.applicationScope.get("id"))){var e=this.metadataModel.get("metadata_info");e&&e.id&&(this.node=this.context.getModel(l),this.node.set("id",e.id))}},"onMetadataChanged":function(){var e=this.metadataModel.get("metadata_info");if(e){if(-1!==["properties","permissions"].indexOf(this.applicationScope.get("id"))){var t=e.model;if(e.navigator&&t&&this.node.set(t.attributes),e.collection&&e.collection===this.lastMetadataInfo.collection)return}this.lastMetadataInfo=e,e.showPermissionView?this.applicationScope.set("id","permissions"):this.applicationScope.set("id","properties");var i;i=this.metadataModel.get("metadata_info").navigator?"metadata.navigation.json":"metadata.json",this.context.loadPerspective("json!csui/utils/contexts/perspective/impl/perspectives/"+i,!0)}}})}),csui.define("csui/utils/contexts/perspective/impl/root.perspective.context.plugin",["csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/perspective/perspective.context.plugin"],function(e,t,i,n){"use strict";var s={"myassignments":"myassignmentstable","recentlyaccessed":"recentlyaccessedtable","favorites":"favorites2.table","searchresults":"searchresults.table"};return n.extend({"constructor":function(e){n.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(i).on("change:id",this.onApplicationScopeChanged,this)},"onApplicationScopeChanged":function(){var e=this.applicationScope.id;s[e]&&!this.loadingPerspective&&this.context.loadPerspective("json!csui/utils/contexts/perspective/impl/perspectives/"+s[e]+".json")}})}),csui.define("csui/utils/contexts/factories/version",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/version","csui/utils/commands/versions"],function(e,t,i,n,s,o,r){"use strict";return n.extend({"propertyPrefix":"version","constructor":function(i,a){n.prototype.constructor.call(this,i,a);var l=this.options.version||{};if(!(l instanceof o)){var c=i.getObject(s,a),u=e.config();l=new o(void 0,t.extend({"connector":c,"commands":r.getAllSignatures()},l.options,u.options))}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/perspective/impl/version.perspective.context.plugin",["csui/lib/jquery","csui/utils/contexts/factories/version","csui/utils/contexts/factories/next.version","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/factories/ancestors","csui/utils/contexts/perspective/perspective.context.plugin"],function(e,t,i,n,s,o){"use strict";function r(){this.version=this.context.getModel(t),this.version.markFetched()}return o.extend({"constructor":function(e){o.prototype.constructor.call(this,e),this.applicationScope=this.context.getModel(n),this.nextVersionFactory=this.context.getFactory(i,{"permanent":!0,"detached":!0}),this.nextVersion=this.nextVersionFactory.property,this.nextVersion.on("change:id change:version_number",this.onVersionChanged,this),this.listenTo(this.context,"retain:perspective",this.onRetainPerspective),r.call(this)},"onClear":function(){this._clearModels(!0);var t=this;e.Deferred().resolve().then(function(){t._setAncestortAttrs()})},"onRefresh":function(){this._clearModels(!1)},"onRetainPerspective":function(){this._setAncestortAttrs()},"isFetchable":function(e){return e.property!==this.version},"_setAncestortAttrs":function(){if("version"===this.applicationScope.id){this.context.getCollection(s).node.set("id",this.nextVersion.get("id"),{"silent":!0})}},"_clearModels":function(e){function t(){e?r.call(this):this.version.clear({"silent":!0})}if("version"!==this.applicationScope.id)return t.call(this),this.nextVersion.clear({"silent":!0});t.call(this),this.version.set(this.nextVersion.attributes)},"onVersionChanged":function(){if(!this.context.loadingPerspective){this.context.triggerMethod("request:perspective",this),this.applicationScope.set("id","version");var e=this.nextVersion.get("id"),t=this.nextVersion.get("version_number");this.nextVersion.clear({"silent":!0}),this.nextVersion.actions.reset([],{"silent":!0}),this.nextVersion.set({"id":e,"version_number":t},{"silent":!0});var i=this;this.fetching=this.nextVersionFactory.fetch({"success":function(){i.onVersionFetchSuccess()},"error":function(e,t){i.onVersionFetchFailure(e,t)}})}},"onVersionFetchSuccess":function(){this.context.loadPerspective("json!csui/utils/contexts/perspective/impl/perspectives/version.overview.json")},"onVersionFetchFailure":function(e,t){this.context.rejectPerspective(e,t)}})}),csui.define("csui/utils/contexts/perspective/plugins/node/impl/csui.node.extra.data",[],function(){"use strict";return{"getModelFields":function(e){return{"properties":[]}},"getModelExpand":function(e){return{"properties":["reserved_user_id"]}}}}),csui.define("csui/utils/contexts/perspective/plugins/node/impl/csui.main.node.extra.data",[],function(){"use strict";return{"getModelFields":function(e){return{"columns":[]}},"getModelExpand":function(e){return{}}}}),csui.define("csui/utils/contexts/factories/global.error",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,n){"use strict";var s=i.Model.extend({"defaults":{"message":null,"details":null}});return n.extend({"propertyPrefix":"globalError","constructor":function(o,r){n.prototype.constructor.apply(this,arguments);var a=this.options.globalError||{};if(!(a instanceof i.Model)){var l=e.config();a=new s(a.attributes,t.extend({},a.options,l.options)),this.options.permanent=!0}this.property=a}})}),csui.define("csui/utils/contexts/perspective/perspective.guide",["csui/lib/underscore"],function(e){function t(){}function i(e){return Object.keys(e).sort().reduce(function(t,i){return t[i]=e[i],t},{})}return t.prototype={"isNew":function(t,n){var s=i(e.omit(n,["showWidgetInMaxMode","id","canEditPerspective"])),o=i(e.omit(t,["showWidgetInMaxMode","id","canEditPerspective"]));return!e.isEqual(s,o)}},t}),csui.define("csui/utils/contexts/perspective/perspective.context",["require","module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/base","csui/utils/log","csui/utils/contexts/context","csui/utils/contexts/factories/user","csui/utils/contexts/factories/global.error","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/impl/csui.context.plugin","csui/utils/contexts/perspective/impl/landing.perspective.context.plugin","csui/utils/contexts/perspective/perspective.guide","csui-ext!csui/utils/contexts/perspective/perspective.context"],function(e,t,i,n,s,o,r,a,l,c,u,d,p,h,f){"use strict";return r=r(t.id),a.extend({"constructor":function(e){a.prototype.constructor.apply(this,arguments),i.defaults(this.options,{"online":!0}),this.perspective=new s.Model,this.perspectiveGuide=new h,this._applicationScope=this.getModel(u,{"permanent":!0,"detached":!0}),this.options.online&&(this._user=this.getModel(l,{"options":{"includeResources":["perspective"]},"permanent":!0}));var t=[d,p],n=i.chain(e&&e.plugins||f).flatten(!0).filter(function(e){return e!==d&&e!==p}).concat(t).unique().reverse().value();this._plugins=i.map(n,function(e){return new e({"context":this})},this),i.invoke(this._plugins,"onCreate")},"fetchPerspective":function(){return i.find(this._plugins,function(e){return e instanceof p}).onApplicationScopeChanged(),this},"_destroyNonPermanentFactories":function(){a.prototype._destroyNonPermanentFactories.apply(this,arguments),i.invoke(this._plugins,"onClear")},"_isFetchable":function(e){return a.prototype._isFetchable.apply(this,arguments)&&(e.property!==this._user||!this._user.get("id"))&&i.all(this._plugins,function(t){return!1!==t.isFetchable(e)})},"loadPerspective":function(t,i){var o=n.Deferred(),a=this;r.debug('Using perspective from "{0}".',t)&&console.log(r.last),this.triggerMethod("request:perspective",this.context),this.loadingPerspective=o.promise(),e([t],function(e){var t=new s.Model({"perspective":e});a.loadingPerspective=!1,a.applyPerspective(t,i)},function(e){a.loadingPerspective=!1,a.rejectPerspective(e)})},"overridePerspective":function(t,n){var s=this
;return r.debug('Overriding the perspective in {0} with "{1}".',r.getObjectName(t),n)&&console.log(r.last),e([n],function(e){t.set("perspective",e),s.applyPerspective(t)},i.bind(this.rejectPerspective,this))},"applyPerspective":function(e,t,i){var n=this;this.triggerMethod("sync:perspective",this,e),this._interceptApplyPerspective(e,t).done(function(s){s&&void 0!==s.forceChange&&(t=s.forceChange),n._continueApplyingPerspective(e,t,i)}).fail(function(e){e&&n.rejectPerspective(e)})},"_continueApplyingPerspective":function(e,t,n){var s=n||e.get("perspective")||{};if(t||this.perspectiveGuide.isNew(this.perspective.attributes,s)){var o=this.viewStateModel;o&&o.set(o.CONSTANTS.ALLOW_WIDGET_URL_PARAMS,!0),this.triggerMethod("before:change:perspective",this,e),r.info("Perspective has changed")&&console.log(r.last),this.perspective.clear(),this.perspective.set(s),this.triggerMethod("change:perspective",this.perspective,e)}else this.suppressFetch(),this.perspective.set(s,{"silent":!0}),r.info("Perspective has not changed")&&console.log(r.last),this._destroyTemporaryFactories(),i.invoke(this._plugins,"onRefresh"),this.triggerMethod("retain:perspective",this,e),this.fetch()},"rejectPerspective":function(e,t){function i(){n._informFailure(t).then(function(){n.trigger("reject:perspective")})}var n=this;t||(t=e),t instanceof Error||(t=new o.Error(t)),this.triggerMethod("error:perspective",this,t),e&&e instanceof s.Model?(e.set("id",-1,{"silent":!0}),n.trigger("current:folder:changed",e),csui.require(["json!csui/utils/contexts/perspective/impl/perspectives/error.global.json"],function(i){r.debug("Showing error perspective for {0}.",r.getObjectName(e))&&console.log(r.last),e.set("perspective",i,{"silent":!0}),n.getModel(c).set({"message":t.message,"details":t.errorDetails}),n.applyPerspective(e)},function(){i()})):i()},"_interceptApplyPerspective":function(e,t){return this._plugins.reduce(function(t,s){return t.then(function(t){function o(e){if(!1===e)return n.Deferred().reject();if(!0!==e&&e){if(e.then)return e.then(o)}else e={};return void 0===e.forceChange&&(e.forceChange=r),e}var r=t.forceChange;return i.isFunction(s.onApply)?o(s.onApply(e,r)):o()})},n.Deferred().resolve({"forceChange":t}))},"_informFailure":function(e){var t=!1,s=n.Deferred();return 0===e.statusCode&&(t=i.find(this._plugins,function(t){if(t.offlineErrorHandler)return t.offlineErrorHandler(e)})),t||csui.require(["csui/dialogs/modal.alert/modal.alert"],function(t){t.showError(e.toString()).always(s.resolve)}),s.promise()}})}),csui.define("csui/utils/contexts/factories/appcontainer",["csui/utils/contexts/factories/factory","csui/models/mixins/appcontainer/appcontainer.mixin","csui/utils/contexts/factories/ancestors","csui/utils/url","csui/lib/jquery","csui/lib/underscore"],function(e,t,i,n,s,o){"use strict";function r(e){return e.type_name=e.name,delete e.name,e}function a(e,t,i,n){e.forEach(function(e){e.trigger(t,e,i,n)})}var l=e.extend({"propertyPrefix":"appcontainer","constructor":function(t,n){e.prototype.constructor.call(this,t,n);var s=this.options.models;this.node=s.container,this.addableTypes=s.addableTypes,this.children=s.children,this.connector=this.node.connector;var o=t.getFactory(i);this.ancestors=o.property,this.listenTo(t,"request",function(){o.options.detached=!0}),this.property={},this.makeAppContainer(n)},"isFetchable":function(){return this.node.isFetchable()},"fetch":function(e){var t=this.children.getResourceFieldsUrlQuery(),i=n.combineQueryString(this.children.getBrowsableUrlQuery(),{"fields":o.without(t.fields,"properties")}),l=new n(this.connector.connection.url).getApiBase(2),c=n.combine(l,"app/container",this.node.get("id")),u=n.appendQuery(c,i),d=[this.children,this.ancestors,this.addableTypes],p=this;return a(d,"request",{},e),this.connector.makeAjaxCall({"url":u}).then(function(t,i,n){var o,l=t.results,c={"silent":!0},u=l.contents.map(function(e){return p.massageResponse(e)}),h=p.children.prefetch({"collection":t.collection,"links":t.links,"results":u},c),f=p.ancestors.prefetch({"ancestors":l.ancestors},c),m=l.add_menu;if(m)m=l.add_menu.map(r),o=p.addableTypes.prefetch(m,{"parse":!1,"silent":!0});else{var g=l.addable_node_types;g&&(o=p.addableTypes.prefetch(g,c))}return s.when(f,o,h).then(function(){return a(d,"reset",t,e),a(d,"sync",t,e),s.Deferred().resolve(t,i,n)})},function(t,i,n){return a(d,"error",t,e),s.Deferred().reject(t,i,n)})}});return t.mixin(l.prototype),l}),csui.define("csui/utils/contexts/factories/children",["module","nuc/lib/underscore","nuc/lib/backbone","csui/utils/contexts/mixins/clone.and.fetch.mixin","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","nuc/models/nodechildren","csui/utils/commands"],function(e,t,i,n,s,o,r,a){"use strict";var l=s.extend({"propertyPrefix":"children","constructor":function(n,l){l||(l={}),s.prototype.constructor.apply(this,arguments);var c=this.options.children||{},u=c.options&&c.options.commands||a;if(!(c instanceof i.Collection)){var d=n.getModel(o,l),p=e.config();c=new r(c.models,t.defaults({"autoreset":!0,"fields":{"properties":[]},"expand":{"properties":["original_id"]},"commands":u.getAllSignatures()},p.options,c.options,{"node":d}))}this.property=c,this.makeCloneAndFetch(l)},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}});return n.mixin(l.prototype),l}),csui.define("csui/utils/contexts/factories/children2",["module","nuc/lib/underscore","nuc/lib/backbone","csui/utils/contexts/mixins/clone.and.fetch.mixin","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","nuc/models/node.children2/node.children2","csui/utils/commands"],function(e,t,i,n,s,o,r,a){"use strict";var l=s.extend({"propertyPrefix":"children2","constructor":function(n,l){l||(l={}),s.prototype.constructor.apply(this,arguments);var c=this.options.children2||{},u=c.options&&c.options.commands||a;if(!(c instanceof i.Collection)){var d=n.getModel(o,l),p=e.config();c=new r(c.models,t.defaults({"autoreset":!0,"fields":{"properties":[]},"expand":{"properties":["original_id"]},"stateEnabled":!0,"commands":Array.isArray(u)?u:u.getAllSignatures()},p.options,c.options,{"useSpecialPaging":l.useSpecialPaging},{"node":d}))}this.property=c,this.makeCloneAndFetch(l)},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}});return n.mixin(l.prototype),l}),csui.define("csui/utils/contexts/factories/columns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/children"],function(e,t,i,n,s){return n.extend({"propertyPrefix":"columns","constructor":function(t,o){n.prototype.constructor.apply(this,arguments);var r=this.options.columns||{};if(!(r instanceof i.Collection)){var a=t.getModel(s,o);e.config();r=a.columns}this.property=r}})}),csui.define("csui/utils/contexts/factories/columns2",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/node.columns2","csui/utils/log"],function(e,t,i,n,s,o,r){"use strict";function a(e,t){return e.map(function(e){e=e.toJSON();var i=e.key;switch(e.column_key=i,i){case"name":e.default_action=!0,e.contextual_menu=!1,e.editable=!0,e.filter_key=i;break;case"type":e.default_action=!0;break;case"modify_date":e.initialSortingDescending=!0}return t[i]=e,e.sort_key&&(e.sort=!0),e})}function l(e,t,i){var n,s=t.get("key"),o=s.lastIndexOf("_formatted"),a=500+i;if(o>=0){if(n=e[s.substr(0,s.length-10)])return void(n.definitions_order=a)}n=e[s],n?n.definitions_order=a:r.warn('No definition found for the column "{0}".',s)}function c(e,i){return e.length!==i.length||e.some(function(e,n){var s=t.pick(i[n],d),o=t.pick(e.attributes,d);return!t.isEqual(s,o)})}r=r(e.id);var u=n.extend({"propertyPrefix":"columns2","constructor":function(e,t){n.prototype.constructor.apply(this,arguments);var r=this.options.columns2||{};if(r instanceof i.Collection)this.property=r;else{var a=r.options&&r.options.node||e.getModel(s,t);this.property=new o,this.node=a,a.columns.on("reset",this._resetColumns,this),this._resetColumns()}},"_resetColumns":function(){var e=this.node,t={},i=a(e.definitions,t);e.columns.each(l.bind(null,t)),c(this.property,i)?this.property.reset(i):this.property.trigger("remain",this.property)}}),d=["description","key","multi_value","name","type","type_name"];return u}),csui.define("csui/utils/contexts/factories/usernodepermission",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/user","csui/utils/contexts/factories/connector","csui/models/authenticated.user.node.permission"],function(e,t,i,n,s,o,r,a){"use strict";return s.extend({"propertyPrefix":"userNodePermission","constructor":function(i,l){s.prototype.constructor.apply(this,arguments);var c=this.options.userNodePermission||{},u=e.config();if(!(c instanceof n.Model)){var d=i.getObject(r,l),p=i.getModel(o);c=new a(c.attributes,t.defaults({"connector":d,"user":p,"node":this.options.node},c.options,u.options))}this.property=c},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/volume",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/node/node.model"],function(e,t,i,n,s,o){return n.extend({"propertyPrefix":"volume","constructor":function(r,a){n.prototype.constructor.apply(this,arguments);var l=this.options.volume||{};if(!(l instanceof i.Model)){var c=r.getModel(s,a),u=e.config();c.setExpand("properties","volume_id"),l=new o(t.extend({},c.get("volume_id"),l.attributes||u.attributes),t.extend({"connector":c.connector},l.options,u.options)),this.listenTo(c,"change:volume_id",function(){l.set(c.get("volume_id"))})}this.property=l}})}),csui.define("csui/models/widget/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/models/widget/nls/root/lang",{"searchResults":"Search Results","ra_access_date_last":"Last Accessed","ra_parent_id":"Location","ra_name":"Name","ra_modify_date":"Modified","ra_reserved":"State","ra_size":"Size","ra_type":"Type","ra_favorite":"Favorite","ma_type":"Type","ma_name":"Name","ma_location_name":"Location","ma_location_id":"Location","ma_date_due":"Due Date","ma_priority":"Priority","ma_status":"Status","ma_from_user_name":"From","fav_parent_id":"Location","fav_favorite_name":"Name","fav_size":"Size","owner":"Owner","created":"Created","createdBy":"Created by","modified":"Modified","size":"Size","type":"Type","owner_user_id":"User","status":"Status","originalParent":"Filed location","pending":"Pending","filed":"Filed","failed":"Failed","failedAria":"Failed message"}),csui.define("csui/models/widget/favorites.model",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin","csui/models/mixins/v2.fields/v2.fields.mixin","csui/models/mixins/v2.expandable/v2.expandable.mixin","csui/models/mixins/v2.commandable/v2.commandable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model","i18n!csui/models/widget/nls/lang","csui/utils/deepClone/deepClone"],function(e,t,i,n,s,o,r,a,l,c,u,d,p,h,f){"use strict";var m=d.extend({"constructor":function(e,t){if(e&&!e.title){var i="fav_"+e.column_key;e.title=f[i]}d.prototype.constructor.call(this,e,t)}}),g=p.extend({"model":m,"getColumnModels":function(t,i){var n=p.prototype.getColumnModels.call(this,t,i);return e.each(n,function(e){var t=e.column_key;"type"!==t&&"name"!==t&&"modify_date"!==t&&"parent_id"!==t&&"size"!=t||(e.sort=!0)}),n}}),b=h.extend({"parse":function(e,t){var i,n;return e.data&&e.data.properties?(i=e.data.properties,n=e.data.versions):(i=e,n=e.versions),i.short_name=i.name,i.size||(i.container?i.size=i.container_size:n&&(i.size=n.file_size)),!i.mime_type&&n&&n.mime_type&&(i.mime_type=n.mime_type),h.prototype.parse.call(this,e,t)}}),v=t.Collection.extend({"model":b,"constructor":function(i,n){t.Collection.prototype.constructor.apply(this,arguments),n&&(this.options=e.pick(n,["connector","autoreset","includeResources","fields","expand","commands"])),this.makeConnectable(n).makeFetchable(n).makeAdditionalResourcesV2Mixin(n).makeFieldsV2(n).makeExpandableV2(n).makeCommandableV2(n).makeClientSideBrowsable(n).makeBrowsableV2Response(n),this.columns=new g},"clone":function(){var e=new this.constructor(this.models,this.options);return this.columns&&e.columns.reset(this.columns.toJSON()),e.actualSkipCount=this.actualSkipCount,e.totalCount=this.totalCount,e.filteredCount=this.filteredCount,e},"url":function(){var e=this.connector.getConnectionUrl().getApiBase("v2"),t=i.combineQueryString(this.getAdditionalResourcesUrlQuery(),this.getResourceFieldsUrlQuery(),this.getExpandableResourcesUrlQuery(),this.getRequestedCommandsUrlQuery(),this.getBrowsableUrlQuery());return e=i.combine(e,"/members/favorites"),t?e+"?"+t:e},"parse":function(e,t){return this.parseBrowsedState(e,t),this.columns&&this.columns.resetColumnsV2(e,this.options),this.parseBrowsedItems(e,t)},"getResourceScope":function(){return e.deepClone({"fields":this.fields,"expand":this.expand,"includeResources":this._additionalResources,"commands":this.commands})},"setResourceScope":function(e){this.excludeResources(),e.includeResources&&this.includeResources(e.includeResources),this.resetFields(),e.fields&&this.setFields(e.fields),this.resetExpand(),e.expand&&this.setExpand(e.expand),this.resetCommands(),e.commands&&this.setCommands(e.commands)}});return c.mixin(v.prototype),u.mixin(v.prototype),n.mixin(v.prototype),s.mixin(v.prototype),o.mixin(v.prototype),r.mixin(v.prototype),a.mixin(v.prototype),l.mixin(v.prototype),v}),csui.define("csui/utils/contexts/factories/favorites",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/favorites.model","csui/utils/commands","csui/utils/deepClone/deepClone"],function(e,t,i,n,s,o,r){"use strict";return n.extend({"propertyPrefix":"favorites","constructor":function r(a,l){n.prototype.constructor.apply(this,arguments);var c=this.options.favorites||{};if(!(c instanceof i.Collection)){var u=a.getObject(s,l),d=e.config();c=new o(c.models,t.extend({"connector":u},c.options,d.options,r.getDefaultResourceScope(),{"autoreset":!0}))}this.property=c},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"properties":[],"versions.element(0)":[]},"includeResources":["metadata"],"commands":r.getAllSignatures()})}})}),csui.define("csui/utils/contexts/factories/favoritescolumns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/favorites"],function(e,t,i,n,s){return n.extend({"propertyPrefix":"favorites_columns","constructor":function(e,t){n.prototype.constructor.apply(this,arguments);var o=this.options.columns||{};if(!(o instanceof i.Collection)){o=e.getCollection(s,t).columns}this.property=o}})}),csui.define("csui/utils/contexts/factories/favorites2",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/favorites2","csui/utils/defaultactionitems","csui/utils/commands","csui/utils/deepClone/deepClone"],function(e,t,i,n,s,o,r,a){"use strict";return n.extend({"propertyPrefix":"favorites2","constructor":function r(a,l){n.prototype.constructor.apply(this,arguments);var c=this.options.favorites||{};if(!(c instanceof i.Collection)){var u=a.getObject(s,l),d=e.config();c=new o(c.models,t.extend({"connector":u,"autoreset":!0},c.options,d.options,r.getDefaultResourceScope()))}this.property=c},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"properties":[],"favorites":["name","tab_id"],"versions.element(0)":["mime_type","owner_id"]},"expand":{"properties":["original_id","parent_id","reserved_user_id","custom_view_search"]},"stateEnabled":!0,"includeResources":[],"commands":a.getAllSignatures()})},"getLimitedResourceScope":function(){return t.deepClone({"fields":{"properties":["container","id","name","original_id","type","type_name","parent_id","container","custom_view_search","version_number"],"favorites":["name","tab_id"],"versions.element(0)":["mime_type"]},"expand":{"properties":["original_id"]},"stateEnabled":!0,"includeResources":[],"commands":r.getAllCommandSignatures(a)})},"getDefaultsOnlyResourceScope":function(){return t.deepClone({"fields":{"properties":[],"favorites":["name","tab_id"],"versions.element(0)":[]},"expand":{"properties":["original_id","parent_id","reserved_user_id","locked_user_id"]},"stateEnabled":!0,"includeResources":[],"commands":r.getAllCommandSignatures(a)})}})}),csui.define("csui/utils/contexts/factories/favorite2groups",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/favorites2","csui/models/favorite2groups","csui/utils/commands","csui/utils/deepClone/deepClone"],function(e,t,i,n,s,o,r,a){"use strict";return n.extend({"propertyPrefix":"favorites2groups","constructor":function l(c,u){n.prototype.constructor.apply(this,arguments);var d=this.options.favoriteGroups||{};if(!(d instanceof i.Collection)){var p=e.config(),h=c.getObject(s,u),f=c.getCollection(o,u);d=new r(d.models,t.extend({"favorites":f,"connector":h,"autoreset":!0,"commands":a.getAllSignatures()},d.options,p.options,l.getDefaultResourceScope()))}this.property=d},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"properties":[]},"stateEnabled":!0})}})}),csui.define("csui/utils/contexts/factories/favorite2columns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/favorites2"],function(e,t,i,n,s){return n.extend({"propertyPrefix":"favorites2_columns","constructor":function(e,t){n.prototype.constructor.apply(this,arguments);var o=this.options.columns||{};if(!(o instanceof i.Collection)){o=e.getCollection(s,t).columns}this.property=o}})}),csui.define("csui/models/widget/myassignments.model",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin","csui/models/mixins/v2.fields/v2.fields.mixin","csui/models/mixins/v2.expandable/v2.expandable.mixin","csui/models/mixins/state.requestor/state.requestor.mixin","csui/models/mixins/v2.commandable/v2.commandable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model","i18n!csui/models/widget/nls/lang","csui/utils/deepClone/deepClone"],function(e,t,i,n,s,o,r,a,l,c,u,d,p,h,f,m){"use strict";var g=p.extend({"constructor":function(e,t){if(e&&!e.title){var i="ma_"+e.column_key;e.title=m[i]}p.prototype.constructor.call(this,e,t)}}),b=h.extend({"model":g,"constructor":function(e,t){e||(e=[{"key":"type","type":2,"sort":!0,"default_action":!0,"name":"Type"},{"key":"name","type":-1,"sort":!0,"default_action":!0,"contextual_menu":!1,"editable":!0,"filter_key":"name","name":"Name"},{"key":"location_name","type":2,"sort":!0,"name":"Location","filter_key":"location_name"},{"key":"date_due","type":-7,"sort":!0,"name":"Due Date"},{"key":"priority","type":2,"sort":!0,"name":"Priority"},{"key":"status","type":2,"sort":!0,"initialSortingDescending":!0,"name":"Status"},{"key":"from_user_name","type":-1,"sort":!0,"name":"From"}],e.forEach(function(e,t){e.definitions_order=t+100,e.column_key=e.key})),h.prototype.constructor.call(this,e,t)},"getColumnModels":function(t,i){var n=h.prototype.getColumnModels.call(this,t,i);return e.each(n,function(e){var t=e.column_key;"type"!==t&&"name"!==t&&"location_id"!==t&&"date_due"!==t&&"priority"!==t&&"status"!==t&&"from_user_name"!==t||(e.sort=!0,"location_id"===t&&(e.sort_key="location_name"))}),n},"getV2Columns":function(t){var i=t.results&&t.results[0]&&t.results[0].metadata&&t.results[0].metadata.assignments||{};!i.location_id_expand&&i.name&&(i.location_id_expand=e.clone(i.name),i.location_id_expand.key="location_id_expand",i.location_id_expand.name="Location"),!i.from_user_id_expand&&i.name&&(i.from_user_id_expand=e.clone(i.name),i.from_user_id_expand.key="from_user_id_expand",i.from_user_id_expand.name="From"),!i.location_name&&i.name&&(i.location_name=e.clone(i.name),i.location_name.key="location_name",i.location_name.name="Location Name"),!i.from_user_name&&i.name&&(i.from_user_name=e.clone(i.name),i.from_user_name.key="from_user_name",i.from_user_name.name="From");var n=e.keys(i);return this.getColumnModels(n,i)}}),v=f.extend({"parse":function(e,t){var i=e.data.assignments;i.short_name=i.name;var n=i.from_user_id_expand||{},s=n.first_name||"";return s=s+" "+(n.last_name||""),(!s.length||1===s.length&&" "===s)&&(s=n.name),i.from_user_name=s,e.data&&e.data.assignments&&(e.data.properties=e.data.assignments),f.prototype.parse.call(this,e,t)}}),y=t.Collection.extend({"model":v,"constructor":function(i,n){t.Collection.prototype.constructor.apply(this,arguments),n&&(this.options=e.pick(n,["connector","autoreset","includeResources","fields","expand","commands"])),this.makeConnectable(n).makeFetchable(n).makeAdditionalResourcesV2Mixin(n).makeFieldsV2(n).makeExpandableV2(n).makeStateRequestor(n).makeCommandableV2(n).makeClientSideBrowsable(n).makeBrowsableV2Response(n),this.columns=new b},"clone":function(){var e=new this.constructor(this.models,this.options);return this.columns&&e.columns.reset(this.columns.toJSON()),e.actualSkipCount=this.actualSkipCount,e.totalCount=this.totalCount,e.filteredCount=this.filteredCount,e},"url":function(){var e=this.connector.getConnectionUrl().getApiBase("v2"),t=i.combineQueryString(this.getAdditionalResourcesUrlQuery(),this.getResourceFieldsUrlQuery(),this.getExpandableResourcesUrlQuery(),this.getStateEnablingUrlQuery(),this.getRequestedCommandsUrlQuery());return e=i.combine(e,"/members/assignments"),t?e+"?"+t:e},"parse":function(t,i){return t.results=e.filter(t.results,function(e){return 398!=e.data.assignments.type}),this.parseBrowsedState(t,i),this.parseBrowsedItems(t,i)},"getResourceScope":function(){return e.deepClone({"fields":this.fields,"expand":this.expand,"includeResources":this._additionalResources,"commands":this.commands})},"setResourceScope":function(e){this.excludeResources(),e.includeResources&&this.includeResources(e.includeResources),this.resetFields(),e.fields&&this.setFields(e.fields),this.resetExpand(),e.expand&&this.setExpand(e.expand),this.resetCommands(),e.commands&&this.setCommands(e.commands)}});u.mixin(y.prototype);var x=y.prototype._compareValues;return y.prototype._compareValues=function(e,t,i){if(e.indexOf("date")>=0){if(null===t)return 1;if(null===i)return-1}return x.apply(this,arguments)},d.mixin(y.prototype),n.mixin(y.prototype),s.mixin(y.prototype),o.mixin(y.prototype),r.mixin(y.prototype),a.mixin(y.prototype),l.mixin(y.prototype),c.mixin(y.prototype),y}),csui.define("csui/utils/contexts/factories/myassignments",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/myassignments.model","csui/utils/deepClone/deepClone"],function(e,t,i,n,s,o){"use strict";return n.extend({"propertyPrefix":"myassignments","constructor":function r(a,l){n.prototype.constructor.apply(this,arguments);var c=this.options.myassignments||{};if(!(c instanceof i.Collection)){var u=a.getObject(s,l),d=e.config();c=new o(c.models,t.extend({"connector":u},c.options,d.options,r.getDefaultResourceScope(),{"autoreset":!0}))}this.property=c},"fetch":function(e){return this.property.fetch(e)},"isFetchable":function(){return!window.csui||!window.csui.mobile||!this.property.fetched}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"assignments":[]},"stateEnabled":!0,"includeResources":["metadata"]})}})}),csui.define("csui/utils/contexts/factories/myassignmentscolumns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/myassignments"],function(e,t,i,n,s){return n.extend({"propertyPrefix":"myassignments_columns","constructor":function(e,t){n.prototype.constructor.apply(this,arguments);var o=this.options.columns||{};if(!(o instanceof i.Collection)){o=e.getCollection(s,t).columns}this.property=o}})}),csui.define("csui/models/widget/recentlyaccessed/server.adaptor.mixin",["csui/lib/underscore","csui/utils/url"],function(e,t){"use strict";return{"mixin":function(i){return e.extend(i,{"makeServerAdaptor":function(e){return this},"url":function(){var e=this.connector.getConnectionUrl().getApiBase("v2"),i=t.combineQueryString(this.getAdditionalResourcesUrlQuery(),this.getResourceFieldsUrlQuery(),this.getExpandableResourcesUrlQuery(),this.getStateEnablingUrlQuery(),this.getRequestedCommandsUrlQuery(),this._getSubtypesUrlQuery());return e=t.combine(e,"/members/accessed"),i?e+"?"+i:e},"parse":function(e,t){return this.parseBrowsedState(e,t),this.parseBrowsedItems(e,t)},"_getSubtypesUrlQuery":function(){var e="";if(this.options.recentlyAccessedSubtypes)for(var t=0;t<this.options.recentlyAccessedSubtypes.length;t++)e=e.concat("where_type=",this.options.recentlyAccessedSubtypes[t],"&");return e}})}}}),csui.define("csui/models/widget/recentlyaccessed.model",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin","csui/models/mixins/v2.fields/v2.fields.mixin","csui/models/mixins/v2.expandable/v2.expandable.mixin","csui/models/mixins/v2.commandable/v2.commandable.mixin","csui/models/mixins/state.requestor/state.requestor.mixin","csui/models/mixins/v2.delayed.commandable/v2.delayed.commandable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model","i18n!csui/models/widget/nls/lang","csui/models/widget/recentlyaccessed/server.adaptor.mixin","csui/utils/deepClone/deepClone"],function(e,t,i,n,s,o,r,a,l,c,u,d,p,h,f,m,g){"use strict";var b=p.extend({"constructor":function(e,t){if(e&&!e.title){var i="ra_"+e.column_key;e.title=m[i]}p.prototype.constructor.call(this,e,t)}}),v=h.extend({"model":b,"constructor":function(e,t){e||(e=[{"key":"type","type":2,"sort":!0,"default_action":!0,"name":"Type"},{"key":"name","type":-1,"sort":!0,"default_action":!0,"contextual_menu":!1,"editable":!0,"filter_key":"name","name":"Name"},{"key":"reserved","type":5,"name":"Reserved"},{"key":"parent_id","type":15,"sort":!0,"name":"Parent ID"},{"key":"access_date_last","type":-7,"sort":!0,"name":"Last Accessed"},{"key":"size","type":2,"sort":!0,"name":"Size"},{"key":"modify_date","type":-7,"sort":!0,"initialSortingDescending":!0,"name":"Modified"},{"key":"favorite","type":5,"name":"Favorite"}],e.forEach(function(e,t){e.definitions_order=t+100,e.column_key=e.key})),h.prototype.constructor.call(this,e,t)},"getColumnModels":function(t,i){var n=h.prototype.getColumnModels.call(this,t,i);return e.each(n,function(e){var t=e.column_key;"type"!==t&&"name"!==t&&"access_date_last"!==t&&"modify_date"!==t&&"parent_id"!==t&&"size"!==t||(e.sort=!0,"parent_id"===t&&(e.sort_key="parent_name"))}),n},"getV2Columns":function(t){var i=t.results&&t.results[0]&&t.results[0].metadata&&t.results[0].metadata.properties||{};return!i.access_date_last&&i.modify_date&&(i.access_date_last=e.clone(i.modify_date),i.access_date_last.key="access_date_last",i.access_date_last.name="Last Accessed"),!i.parent_name&&i.name&&(i.parent_name=e.clone(i.name),i.parent_name.key="parent_name",i.parent_name.name="Location Name"),h.prototype.getV2Columns.call(this,t)}}),y=f.extend({"parse":function(e,t){var i,n,s,o;return e.data&&e.data.properties?(i=e.data.properties,n=e.data.versions,s=e.data.properties_user,o=e.data.properties.parent_id_expand):(i=e,n=e.versions,s=e.properties_user,o=e.parent_id_expanded),i.short_name=i.name,i.size||(i.container?i.size=i.container_size:n&&(i.size=n.file_size)),!i.mime_type&&n&&n.mime_type&&(i.mime_type=n.mime_type),!i.access_date_last&&s&&s.access_date_last&&(i.access_date_last=s.access_date_last),i.parent_name="",!i.parent_name&&o&&o.name&&(i.parent_name=o.name),f.prototype.parse.call(this,e,t)}}),x=t.Collection.extend({"model":y,"constructor":function(i,n){t.Collection.prototype.constructor.apply(this,arguments),n&&(this.options=e.pick(n,["connector","autoreset","includeResources","fields","expand","commands","recentlyAccessedSubtypes"])),this.makeConnectable(n).makeFetchable(n).makeAdditionalResourcesV2Mixin(n).makeFieldsV2(n).makeExpandableV2(n).makeStateRequestor(n).makeCommandableV2(n).makeClientSideBrowsable(n).makeBrowsableV2Response(n).makeDelayedCommandableV2(n).makeServerAdaptor(n),this.columns=new v},"_prepareModel":function(e,i){return i||(i={}),i.promotedActionCommands=this.promotedActionCommands,i.nonPromotedActionCommands=this.nonPromotedActionCommands,t.Collection.prototype._prepareModel.call(this,e,i)},"clone":function(){var t=new this.constructor(this.models,this.options);return this.columns&&t.columns.reset(this.columns.toJSON()),t.actualSkipCount=this.actualSkipCount,t.skipCount=this.skipCount,t.topCount=this.topCount,t.totalCount=this.totalCount,t.filteredCount=this.filteredCount,t.filters=e.deepClone(this.filters),t.orderBy=this.orderBy,t.expand=e.clone(this.expand),t.includeActions=this.includeActions,t.includeCommands=e.clone(this.includeCommands),t.defaultActionCommands=e.clone(this.defaultActionCommands),t.commands=e.clone(this.commands),t},"getResourceScope":function(){return e.deepClone({"fields":this.fields,"expand":this.expand,"includeResources":this._additionalResources,"commands":this.commands,"defaultActionCommands":this.defaultActionCommands})},"setResourceScope":function(e){this.excludeResources(),e.includeResources&&this.includeResources(e.includeResources),this.resetFields(),e.fields&&this.setFields(e.fields),this.resetExpand(),e.expand&&this.setExpand(e.expand),this.resetCommands(),e.commands&&this.setCommands(e.commands),this.resetDefaultActionCommands(),e.defaultActionCommands&&this.setDefaultActionCommands(e.defaultActionCommands)}});return u.mixin(x.prototype),d.mixin(x.prototype),i.mixin(x.prototype),n.mixin(x.prototype),s.mixin(x.prototype),o.mixin(x.prototype),r.mixin(x.prototype),a.mixin(x.prototype),l.mixin(x.prototype),c.mixin(x.prototype),g.mixin(x.prototype),x}),csui.define("csui/utils/contexts/factories/recentlyaccessed",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/recentlyaccessed.model","csui/utils/commands","csui/utils/defaultactionitems","csui/utils/deepClone/deepClone"],function(e,t,i,n,s,o,r,a){"use strict";return n.extend({"propertyPrefix":"recentlyaccessed","constructor":function r(a,l){n.prototype.constructor.apply(this,arguments);var c=this.options.recentlyaccessed||{};if(!(c instanceof i.Collection)){var u=a.getObject(s,l),d=e.config();c=new o(c.models,t.extend({"connector":u,"recentlyAccessedSubtypes":d.recentlyAccessedSubtypes},c.options,d.options,r.getDefaultResourceScope(),{"autoreset":!0}))}this.property=c},"fetch":function(e){
return this.property.fetch(e)}},{"getDefaultResourceScope":function(e){return t.deepClone({"fields":{"properties":[],"versions.element(0)":[]},"stateEnabled":!!e,"includeResources":e?["metadata"]:[],"commands":e?r.getAllSignatures():[]})},"getLimitedResourceScope":function(){return t.deepClone({"fields":{"properties":["container","id","name","original_id","type","type_name","parent_id","reserved","custom_view_search","version_number"],"versions.element(0)":["mime_type"]},"includeResources":[],"commands":a.getAllCommandSignatures(r)})}})}),csui.define("csui/utils/contexts/factories/recentlyaccessedcolumns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/recentlyaccessed"],function(e,t,i,n,s){return n.extend({"propertyPrefix":"recentlyaccessed_columns","constructor":function(e,t){n.prototype.constructor.apply(this,arguments);var o=this.options.columns||{};if(!(o instanceof i.Collection)){o=e.getCollection(s,t).columns}this.property=o}})}),csui.define("csui/utils/contexts/factories/search.results.table.columns",["module","csui/lib/underscore","csui/lib/backbone","nuc/utils/log","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/node.columns2"],function(e,t,i,n,s,o,r){function a(e,t){return e.map(function(e){e=e.toJSON();var i=e.key;switch(e.column_key=i,i){case"name":e.default_action=!0,e.contextual_menu=!1,e.editable=!0,e.filter_key=i;break;case"type":e.default_action=!0;break;case"modify_date":e.initialSortingDescending=!0}return t[i]=e,e.sort_key&&(e.sort=!0),e})}function l(e,t,i){var s,o=t.get("key"),r=o.lastIndexOf("_formatted"),a=500+i;if(r>=0){if(s=e[o.substr(0,o.length-10)])return void(s.definitions_order=a)}s=e[o],s?s.definitions_order=a:n.warn('No definition found for the column "{0}".',o)}function c(e,i){return e.length!==i.length||e.some(function(e,n){var s=t.pick(i[n],d),o=t.pick(e.attributes,d);return!t.isEqual(s,o)})}var u=s.extend({"propertyPrefix":"SearchResults_columns","constructor":function(e,t){s.prototype.constructor.apply(this,arguments);var n=this.options.columns||{};if(n instanceof i.Collection)this.property=n;else{var a=n.options&&n.options.node||e.getModel(o,t);this.property=new r,this.node=a,a.columns.on("reset",this._resetColumns,this),this._resetColumns()}},"_resetColumns":function(){var e=this.node,t={},i=a(e.definitions,t);e.columns.each(l.bind(null,t)),c(this.property,i)?this.property.reset(i):this.property.trigger("remain",this.property)}}),d=["description","key","multi_value","name","type","type_name"];return u}),csui.define("csui/models/widget/search.results.tile/search.response.mixin",["csui/lib/underscore","csui/utils/base","csui/utils/accessibility","csui/models/ancestor","csui/models/node/node.model"],function(e,t,i,n,s){"use strict";i.isAccessibleTable();return{"mixin":function(t){return e.extend(t,{"makeSearchResponse":function(e){return this},"parseSearchResponse":function(e,t){var i=e.collection.sorting;this.orderBy=this.orderBy?this.orderBy:i&&i.sort&&i.sort[0],this.previousOrderBy=this.orderBy;var o=e.results;if(o)for(var r in o)if(o.hasOwnProperty(r)){if(o[r].data&&o[r].data.properties&&(o[r].nickname&&(o[r].data.properties.nickname=o[r].nickname),o[r].data.versions&&o[r].data.versions.file_size&&(o[r].data.properties.size=o[r].data.versions.file_size),o[r].data.versions&&o[r].data.versions.version_id&&(o[r].data.properties.version_id=o[r].data.versions.version_id),o[r].data.properties&&o[r].data.properties.container&&o[r].data.properties.container&&(o[r].data.properties.size=o[r].data.properties.container_size),o[r].data.properties.reserved_user_id_expand&&(o[r].data.properties.reserved_user_id=o[r].data.properties.reserved_user_id_expand)),o[r].links&&o[r].links.ancestors){var a=[],l=o[r].links.ancestors,c=[];if(l)for(var u in l)if(l.hasOwnProperty(u)){var d=new n,p=parseInt(u,10),h={},f=l[p];h.id=f.href.substring(f.href.lastIndexOf("/")+1,f.href.length),h.volume_id=0===p?h.id:c[0],h.parent_id=0===p?"-1":c[p-1],s.usesIntegerId&&(h.id=parseInt(h.id),h.volume_id=parseInt(h.volume_id),h.parent_id=parseInt(h.parent_id)),c.push(h.id),h.name=f.name,h.showAsLink=!0,d.attributes=h,a.push(d)}o[r].data.properties.ancestors=a}for(var m in o[r].data.regions)o[r].data.regions.hasOwnProperty(m)&&(o[r].data.properties[m]=o[r].data.regions[m]);o[r].search_result_metadata&&(o[r].data.properties.search_result_metadata=o[r].search_result_metadata)}},"parseBrowsedItems":function(e,t){return e.results}})}}}),csui.define("csui/models/widget/search.results.tile/server.adaptor.mixin",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/node.columns2"],function(e,t,i,n){"use strict";return{"mixin":function(t){var s=t.sync;return e.extend(t,{"filterQueryParameterName":"filter","makeServerAdaptor":function(e){return e},"cacheId":"","url":function(){var e=this.connector.getConnectionUrl().getApiBase("v2");return i.combine(e,"search")},"sync":function(t,i,n){var o={"query_id":this.options.query_id};return this.options.limit&&(o.limit=this.options.limit,o.page=this.skipCount?Math.floor(this.skipCount/this.options.limit)+1:1),e.extend(o,this.getBrowsableParams()),e.extend(o,this.getRequestedCommandsUrlQuery()),e.extend(o,this.getResourceFieldsUrlQuery()),e.extend(o,this.getStateEnablingUrlQuery()),this.prevTopCount&&this.prevTopCount!=this.topCount&&(this.activePageNumber=1),this.prevTopCount=this.topCount,this.activePageNumber&&(o.page=this.activePageNumber,o.skipCount=(this.activePageNumber-1)*this.topCount),this.options.isTileView?o.fields="properties{container,id,parent_id,name,type,type_name,custom_view_search,version_number}":o.expand="properties{original_id,owner_user_id,create_user_id,owner_id,reserved_user_id,parent_id,locked_user_id}",(this.orderBy||this.pagination)&&this.cacheId&&(o.cache_id=this.cacheId,this.pagination=!1),e.extend(n,{"type":"POST","contentType":"application/x-www-form-urlencoded","data":o,"traditional":!0}),s.apply(this,arguments)},"parse":function(t,i){if(this.addRegionsToPromotedList(t.featured),t.collection.searching){var s=new n,o=e.clone(t.collection.searching.regions_metadata),r=e.clone(e.uniq(t.collection.searching.regions_order)),a=[];e.each(o,function(e,t){var i=500+r.indexOf(t);e.definitions_order=i,e.key=t,e.sortable=!1,e.column_key=t,e.column_name=t,e.default_action=["OTLocation","OTName","OTMIMEType"].indexOf(t)>=0,e.default=["OTLocation","OTName","OTMIMEType"].indexOf(t)>=0,e.completeName=e.name,e.titleAttr=e.name.replace(/:([^\s])/,": $1"),e.name=e.name&&e.name.replace(/^[^:]*:\s*/,""),a.push(e)}),a.push({"key":"favorite","column_key":"favorite","default":!0}),a.push({"key":"reserved","column_key":"reserved","default":!0});var l=e.pluck(t.results,"search_result_metadata"),c=e.where(l,{"current_version":!1});c=c.length?c:e.where(l,{"version_type":"minor"}),c&&c.length>0&&a.push({"key":"version_id","column_key":"version_id"}),s.reset(a),t.collection.searching.sortedColumns=s,e.each(t.results,function(e){e.data.versions&&e.search_result_metadata&&(!1===e.search_result_metadata.current_version||"minor"===e.search_result_metadata.version_type)&&(e.data.versions.current_version=!1)})}var u=t.collection.sorting.links;for(var d in u)if(0===d.search("asc_")){var p=this.trimSortOptionName(u[d].name);p=p.trim();var h=t.collection.searching.sortedColumns.where({"completeName":p});h&&h.length>0&&h[0].set("sort",!0)}return t.results=t.featured&&t.collection.sorting&&"relevance"===t.collection.sorting.sort[0]?t.featured.concat(t.results):t.results,this.parseBrowsedState(t.collection,i),this.parseSearchResponse(t,i),t.results.sorting=t.collection.sorting,this.cacheId=t.collection&&t.collection.searching&&t.collection.searching.cache_id?t.collection.searching.cache_id:"",this.parseBrowsedItems(t,i)},"trimSortOptionName":function(e){return e.replace(/\(([;\s\w\"\=\,\:\.\/\~\{\}\?\!\-\%\&\#\$\^\(\)]*?)\)/g,"")},"addRegionsToPromotedList":function(t){e.each(t,function(e,t){e.data.regions={"OTMIMEType":e.data.properties.mime_type,"OTName":e.data.properties.name,"OTLocation":e.data.properties.parent_id,"OTObjectDate":e.data.properties.create_date,"OTModifyDate":e.data.properties.modify_date,"OTObjectSize":e.data.properties.size_formatted}})}})}}}),csui.define("csui/models/widget/search.results.tile/search.results.tile.collection",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/models/node/node.model","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/browsable/browsable.mixin","csui/models/browsable/v1.request.mixin","csui/models/browsable/v2.response.mixin","csui/models/mixins/state.requestor/state.requestor.mixin","csui/models/mixins/v2.delayed.commandable/v2.delayed.commandable.mixin","csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin","csui/models/mixins/v2.fields/v2.fields.mixin","csui/models/mixins/v2.expandable/v2.expandable.mixin","csui/models/widget/search.results.tile/search.response.mixin","csui/models/widget/search.results.tile/server.adaptor.mixin","csui/utils/contexts/perspective/plugins/node/node.extra.data","csui/utils/contexts/perspective/plugins/node/utils/merge.extra.data","i18n!csui/models/widget/nls/lang","csui/utils/deepClone/deepClone"],function(e,t,i,n,s,o,r,a,l,c,u,d,p,h,f,m,g,b,v){"use strict";var y=i.Collection.extend({"model":n,"constructor":function(e,t){this.options=t||(t={}),i.Collection.prototype.constructor.call(this,e,t),this.title=v.searchResults,t.fields||(t.fields=g.getModelFields()),this.query_id=t.query_id,t.expand||(t.expand=b(g.getModelExpand(),{"properties":["reserved_user_id","original_id","owner_user_id","create_user_id","owner_id","reserved_user_id","parent_id"]})),this.makeConnectable(t).makeFetchable(t).makeAdditionalResourcesV2Mixin(t).makeBrowsable(t).makeBrowsableV1Request(t).makeFieldsV2(t).makeExpandableV2(t).makeBrowsableV2Response(t).makeStateRequestor(t).makeDelayedCommandableV2(t).makeSearchResponse(t).makeServerAdaptor(t)},"clone":function(){return new this.constructor(this.models,{"connector":this.connector,"skip":this.skipCount,"top":this.topCount,"filter":e.deepClone(this.filters),"orderBy":e.clone(this.orderBy),"expand":e.clone(this.expand),"includeActions":this.includeActions,"commands":e.clone(this.commands),"defaultActionCommands":e.clone(this.defaultActionCommands),"delayRestCommands":this.delayRestCommands})},"_prepareModel":function(e,t){return t||(t={}),t.promotedActionCommands=this.promotedActionCommands,t.nonPromotedActionCommands=this.nonPromotedActionCommands,i.Collection.prototype._prepareModel.call(this,e,t)},"isFetchable":function(){return!!this.options.query_id},"setDefaultPageNum":function(){this.skipCount=0},"setPreviousOrder":function(e,t){if(this.previousOrderBy!=e)return this.previousOrderBy=e,!1!==t&&this.fetch({"skipSort":!1}),!0},"getResourceScope":function(){return e.deepClone({"includeResources":this._additionalResources,"commands":this.commands,"defaultActionCommands":this.defaultActionCommands})},"setResourceScope":function(e){this.excludeResources(),e.includeResources&&this.includeResources(e.includeResources),this.resetCommands(),e.commands&&this.setCommands(e.commands),this.resetDefaultActionCommands(),e.defaultActionCommands&&this.setDefaultActionCommands(e.defaultActionCommands)}});return r.mixin(y.prototype),a.mixin(y.prototype),l.mixin(y.prototype),p.mixin(y.prototype),h.mixin(y.prototype),s.mixin(y.prototype),o.mixin(y.prototype),c.mixin(y.prototype),d.mixin(y.prototype),f.mixin(y.prototype),m.mixin(y.prototype),u.mixin(y.prototype),y}),csui.define("csui/utils/contexts/factories/search.results.table.factory",["require","module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/search.query.factory","csui/models/widget/search.results.tile/search.results.tile.collection","csui/utils/commands","csui/utils/base","csui/utils/defaultactionitems","csui/utils/deepClone/deepClone"],function(e,t,i,n,s,o,r,a,l,c,u){return s.extend({"propertyPrefix":"searchResults","constructor":function(e,r){s.prototype.constructor.apply(this,arguments);var c=this.options.searchResults||{},u=r.options;if(!(c instanceof n.Collection)){u&&delete u.factoryUID;var d=e.getObject(o,r),p=u&&u.query_id,h=t.config();c=new a(c.models,i.extend({"connector":d,"query_id":p,"stateEnabled":!0,"commands":l.getAllSignatures()},c.options,h.options,{"autofetch":!0,"autoreset":!0}))}this.property=c},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){!this.property.fetched&&this.property.fetch({"success":i.bind(this._onSearchResultsFetched,this,e),"error":i.bind(this._onSearchResultsFailed,this,e)})},"_onSearchResultsFetched":function(e){return!0},"_onSearchResultsFailed":function(e,t,i){new c.RequestErrorMessage(i)}},{"getDefaultResourceScope":function(){return i.deepClone({"commands":l.getAllSignatures()})},"getLimitedResourceScope":function(){return i.deepClone({"fields":{"properties":["container","id","name","original_id","type","type_name","parent_id","reserved","custom_view_search","version_number"],"versions.element(0)":["mime_type"]},"includeResources":[],"commands":u.getAllCommandSignatures(l)})}})}),csui.define("csui/utils/contexts/factories/member",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/member"],function(e,t,i,n,s,o){"use strict";return n.extend({"propertyPrefix":"member","constructor":function(r,a){n.prototype.constructor.apply(this,arguments);var l=this.options.member||{};if(!(l instanceof i.Model)){var c=r.getObject(s,a),u=e.config();l=new o(l.attributes||u.attributes,t.defaults({"connector":c},l.options,u.options))}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/models/widget/search.box/server.adaptor.mixin",["csui/lib/underscore","csui/lib/jquery","csui/utils/url"],function(e,t,i){"use strict";return{"mixin":function(n){return e.extend(n,{"makeServerAdaptor":function(e){return this},"url":function(){var e=this.connector.connection.url.replace("/v1","/v2");return i.combine(e,"search/members/info?enterprise_slices=true")},"parse":function(e,i){var n=e.results,s=n.slices,o={},r=[];return o.search_forms={},t.each(s,function(e){r.push({"sliceId":s[e].id,"sliceDisplayName":s[e].name})}),o={"search_forms":{"recent_search_forms":this.createSearchFormsList(n.recent_search_forms),"personal_search_forms":this.createSearchFormsList(n.personal_search_forms),"system_search_forms":this.createSearchFormsList(n.system_search_forms)},"slices":r,"search_bar_settings":n.search_bar_settings}},"createSearchFormsList":function(e){var i=[];return t.each(e,function(t){(null!==e[t].name||e[t].name)&&i.push(e[t])}),i}})}}}),csui.define("csui/models/widget/search.box.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/widget/search.box/server.adaptor.mixin"],function(e,t,i,n,s,o,r){"use strict";var a=i.Model.extend({"constructor":function(e,t){this.options=t||(t={}),i.Model.prototype.constructor.call(this,e,t),this.makeConnectable(t).makeFetchable(t).makeServerAdaptor(t)}});return s.mixin(a.prototype),o.mixin(a.prototype),r.mixin(a.prototype),e.extend(a.prototype,{"isFetchable":function(){return!!this.options}}),a}),csui.define("csui/utils/contexts/factories/search.box.factory",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/search.box.model"],function(e,t,i,n,s,o,r){"use strict";var a=/\bprefetch(?:=([^&]*)?)/i.exec(location.search);a=!a||"false"!==a[1];var l;return s.extend({"propertyPrefix":"searchBox","constructor":function(i,l){s.prototype.constructor.apply(this,arguments);var c=this.options.searchBox||{},u=e.config();if(a&&(this.initialResponse=c.initialResponse||u.initialResponse),!(c instanceof n.Collection)){var d=i.getObject(o,l);c=new r(c.attributes||u.attributes,t.defaults({"connector":d},c.options,u.options,{"autofetch":!0}))}this.property=c},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){if(this.initialResponse&&!l){var t=this.property.prefetch(this.initialResponse,e);return l=!0,t}return this.property.fetch(e)}})}),csui.define("csui/models/widget/search.results/search.metadata/search.metadata.mixin",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone"],function(e,t,i){"use strict";return{"mixin":function(t){return e.extend(t,{"makeSearchMetadataResponse":function(e){return this},"parseSearchMetadataResponse":function(e,t){return e}})}}}),csui.define("csui/models/widget/search.results/search.metadata/server.adaptor.mixin",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone"],function(e,t,i){"use strict";return{"mixin":function(i){return e.extend(i,{"makeServerAdaptor":function(e){return this},"sync":function(i,n,s){var o=t.Deferred();return s=e.defaults({"parse":!0},s),this.trigger("request",this,{},s),setTimeout(function(){s.success.call(s.context,{},"success",{}),o.resolve()}.bind(this)),o.promise()},"parse":function(e,t){return this.parseSearchMetadataResponse(e,t)}})}}}),csui.define("csui/models/widget/search.results/search.metadata/search.metadata.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/widget/search.results/search.metadata/search.metadata.mixin","csui/models/widget/search.results/search.metadata/server.adaptor.mixin"],function(e,t,i,n,s,o,r){"use strict";var a=i.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),l=i.Collection.extend({"model":a,"comparator":"sequence","constructor":function e(t,i){e.__super__.constructor.apply(this,arguments),this.makeConnectable(i).makeFetchable(i).makeSearchMetadataResponse(i).makeServerAdaptor(i)},"getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new l(this.map(function(e){return e.attributes}))}});return n.mixin(l.prototype),s.mixin(l.prototype),o.mixin(l.prototype),r.mixin(l.prototype),l}),csui.define("csui/utils/contexts/factories/search.metadata.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/models/widget/search.results/search.metadata/search.metadata.model"],function(e,t,i,n,s){return n.extend({"propertyPrefix":"searchMetadata","constructor":function(o,r){n.prototype.constructor.apply(this,arguments);var a=this.options.metadata||{};if(!(a instanceof i.Collection)){var l=e.config();a=new s(a.models,t.extend({},a.options,l.options))}this.property=a},"isFetchable":function(){return!!this.options},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/task.queue.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/taskqueue"],function(e,t,i,n,s){return n.extend({"propertyPrefix":"taskQueue","constructor":function(i){n.prototype.constructor.apply(this,arguments);var o=this.options.taskQueue||{};if(!(o instanceof s)){var r=e.config();o=new s(t.extend({},o.options,r.options))}this.property=o}})}),csui.define("csui/models/server.info",["csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/server.info/server.adaptor.mixin"],function(e,t,i,n,s){"use strict";var o=e.Model.extend({"constructor":function(t,i){e.Model.prototype.constructor.apply(this,arguments),this.makeConnectable(i).makeFetchable(i)}});return i.mixin(o.prototype),n.mixin(o.prototype),s.mixin(o.prototype),o}),csui.define("csui/utils/contexts/factories/server.info",["csui/lib/backbone","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/factory","csui/models/server.info"],function(e,t,i,n){return i.extend({"propertyPrefix":"serverInfo","constructor":function(s,o){i.prototype.constructor.apply(this,arguments);var r=s.getObject(t,{"permanent":!0}),a=this.options.serverInfoModel||{};a instanceof e.Model||(a=new n(void 0,{"connector":r})),this.property=a}})}),csui.define("csui/models/widget/search.results/search.settings/server.adaptor.mixin",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url"],function(e,t,i,n){"use strict";return{"mixin":function(t){var i=t.sync;return e.extend(t,{"makeServerAdaptor":function(e){return this},"url":function(){var e=this.connector.getConnectionUrl().getApiBase("v2"),t="",i=this.options.templateId;return t=i?n.combine(t,"/template/"+i):n.combine(t,"/template"),t=n.combine(t,"/settings/display"),n.combine(e,"search"+t)},"sync":function(e,t,n){return i.apply(this,arguments)}})}}}),csui.define("csui/models/widget/search.results/search.settings/search.settings.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/utils/url","csui/models/mixins/fetchable/fetchable.mixin","csui/models/widget/search.results/search.settings/server.adaptor.mixin"],function(e,t,i,n,s,o,r){"use strict";var a=i.Model.extend({"constructor":function(){i.Model.apply(this,arguments)}}),l=i.Collection.extend({"model":a,"constructor":function(){i.Collection.apply(this,arguments)},"isFetchable":!1}),c=i.Model.extend({"constructor":function(e,t){this.options=t||(t={}),i.Model.apply(this,arguments),this.makeConnectable(t).makeFetchable(t).makeServerAdaptor(t)},"idAttribute":"key","defaults":{"key":null,"sequence":0},"isNew":function(){return!1},"parse":function(e,i){e=e.results&&e.results.data;var n=["available","selected"];return t.each(e&&e.display,function(e){t.isObject(e)&&n.map(function(i){e[i]&&t.isArray(e[i])&&(e[i]=new l(e[i]))})}),e},"isFetchable":function(){return!0},"getColumnKeys":function(){return this.pluck("key")}});return n.mixin(c.prototype),o.mixin(c.prototype),r.mixin(c.prototype),c}),csui.define("csui/utils/contexts/factories/search.settings.factory",["require","module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/search.results/search.settings/search.settings.model"],function(e,t,i,n,s,o,r){return s.extend({"propertyPrefix":"searchSettings","constructor":function(e,a){s.prototype.constructor.apply(this,arguments);var l=this.options.searchSettings||{};if(!(l instanceof n.Collection)){var c=e.getObject(o,a),u=t.config(),d=a.templateId;l=new r(l.models,i.extend({"connector":c,"templateId":d},l.options,u.options,{"autofetch":!0,"autoreset":!0}))}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/compound.document.reorganize.factory",["require","module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/compound.document/reorganize/reorganize.collection"],function(e,t,i,n,s,o,r){return s.extend({"propertyPrefix":"reorganize","constructor":function(e,a){s.prototype.constructor.apply(this,arguments);var l=this.options.reorganize||{};if(!(l instanceof n.Collection)){var c=e.getObject(o,a),u=t.config(),d=a.node.get("id");l=new r(l.models,i.extend({"connector":c,"nodeId":d},l.options,u.options,{"autofetch":!0,"autoreset":!0}))}this.property=l},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/models/server.adaptors/largefilesettings.mixin",["csui/lib/jquery","csui/lib/underscore","csui/utils/url","i18n!csui/models/impl/nls/lang"],function(e,t,i,n){"use strict";return{"mixin":function(e){return t.extend(e,{"makeServerAdaptor":function(e){return this},"url":function(){return i.combine(this.options.connector.getConnectionUrl().getApiBase("v2"),"multipart/settings")},"parse":function(e){var t=e.results.data;return{"largeFileSettings":{"is_enabled":t.is_enabled,"max_size":t.max_size,"min_size":t.min_size}}}})}}}),csui.define("csui/models/largefilesettingsmodel",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/server.adaptors/largefilesettings.mixin"],function(e,t,i,n,s,o,r){"use strict";var a=i.Model.extend({"constructor":function(e,t){this.options=t||(t={}),i.Model.prototype.constructor.call(this,e,t),this.makeConnectable(t).makeFetchable(t).makeServerAdaptor(t)}});return s.mixin(a.prototype),o.mixin(a.prototype),r.mixin(a.prototype),e.extend(a.prototype,{"isFetchable":function(){return!this.get("largeFileSettings")}}),a}),csui.define("csui/utils/contexts/factories/largefilesettings.factory",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/largefilesettingsmodel"],function(e,t,i,n,s,o,r){"use strict";return s.extend({"propertyPrefix":"largeFileSettings","constructor":function(i,n){s.prototype.constructor.apply(this,arguments);var a=this.options.largeFileSettings||{},l=e.config(),c=i.getObject(o,n);a=new r(a.attributes||l.attributes,t.defaults({"connector":c},a.options,l.options,{"autofetch":!0})),this.property=a},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/document.overview.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/document.overview"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/version.overview.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/version.overview"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/favorites2.table.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/favorites2.table"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/container.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/nodestable"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/metadata.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/metadata"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/metadata.navigation.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/metadata.navigation"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/myassignmentstable.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/myassignmentstable"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/recentlyaccessedtable.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/recentlyaccessedtable"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/search.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/search.results","className":"search-results-container"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/saved.query.json",{"type":"grid","options":{"rows":[{"columns":[{"sizes":{"md":12},"heights":{"xs":"half"},"widget":{"type":"csui/widgets/placeholder","options":{"label":"Saved Query","color":"#fff","bgcolor":"#cccc88"}}},{"sizes":{"md":12},"heights":{"xs":"full"},"widget":{"type":"csui/widgets/search.results","options":{}}}]}]}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/user.json",{"type":"flow","options":{"widgets":[{"type":"csui/widgets/welcome.placeholder"},{"type":"csui/widgets/myassignments"},{"type":"csui/widgets/favorites"},{"type":"csui/widgets/shortcuts","options":{"shortcutItems":[{"type":141}],"shortcutTheme":"csui-shortcut-theme-teal2"}},{"type":"csui/widgets/shortcuts","options":{"shortcutItems":[{"type":142}],"shortcutTheme":"csui-shortcut-theme-pink1"}},{"type":"csui/widgets/recentlyaccessed"}]}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/searchresults.table.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/search.results.table"}}}),csui.define("csui/temporary/activeviews/icons/icons",[],function(){"use strict";return[{"equals":{"type":30309},"className":"csui-icon mime_active_view","sequence":30},{"equals":{"type":30303},"className":"csui-icon mime_web_report","sequence":30}]}),csui.define("csui/temporary/appearances/icons/icons",[],function(){"use strict";return[{"equals":{"type":480},"className":"csui-icon mime_appearance","sequence":30}]}),csui.define("css!csui/temporary/cop/icons/icons",[],function(){}),csui.define("csui/temporary/cop/icons/icons",["css!csui/temporary/cop/icons/icons"],function(){"use strict";return[{"equals":{"type":356},"className":"csui-icon csui-temporary-cop-blog","sequence":30},{"equals":{"type":357},"className":"csui-icon mime_blog_entry","sequence":30},{"equals":{"type":1257},"className":"csui-icon mime_collaborative_place","sequence":30},{"equals":{"type":123475},"className":"csui-icon mime_faq","sequence":30},{"equals":{"type":123476},"className":"csui-icon mime_faq_entry","sequence":30},{"equals":{"type":123469},"className":"csui-icon mime_forum","sequence":30},{"equals":{"type":123470},"className":"csui-icon mime_forum_topics_replies","sequence":30},{"equals":{"type":130},"className":"csui-icon mime_topic","sequence":30},{"equals":{"type":5573},"className":"csui-icon mime_wiki","sequence":30},{"equals":{"type":5574},"className":"csui-icon mime_wiki_page","sequence":30},{"equals":{"type":3030202},"className":"csui-icon mime_community","sequence":30}]}),
csui.define("bundles/csui-data",["csui/controls/icons.v2","csui/controls/icon/icon.view","csui/behaviors/default.action/default.action.behavior","csui/behaviors/default.action/impl/defaultaction","csui/behaviors/dropdown.menu/dropdown.menu.behavior","csui/behaviors/keyboard.navigation/retainfocus.behavior","csui/behaviors/keyboard.navigation/tabkey.behavior","csui/behaviors/widget.container/widget.container.behavior","csui/controls/error/error.view","csui/controls/globalmessage/globalmessage","css!csui/controls/globalmessage/globalmessage_icons","csui/controls/grid/grid.view","csui/controls/doc.preview/doc.preview.view","csui/controls/doc.preview/active.plugin","csui/controls/doc.preview/preview.plugins/preview.plugins","csui/controls/node-type.icon/node-type.icon.view","csui/controls/progressblocker/blocker","csui/controls/globalmessage/impl/progresspanel/progresspanel.view","csui/controls/globalmessage/impl/progresspanel/progressbar.view","csui/controls/globalmessage/progresspanel.view.ext","csui/controls/globalmessage/progressbar.view.ext","i18n!csui/controls/globalmessage/impl/nls/globalmessage.lang","csui/controls/perspective.panel/perspective.animator","csui/controls/perspective.panel/perspective.panel.view","csui/controls/breadcrumbspanel/breadcrumbspanel.view","csui/controls/breadcrumbs/breadcrumbs.view","csui/controls/breadcrumbs/breadcrumb.view","csui/controls/breadcrumbs/impl/breadcrumb/breadcrumb.view","csui/controls/form/pub.sub","csui/controls/mixins/keyboard.navigation/modal.keyboard.navigation.mixin","csui/controls/tab.panel/tab.panel.view","csui/controls/tab.panel/tab.links.dropdown.view","csui/controls/tab.panel/tab.links.ext.scroll.mixin","csui/controls/tab.panel/tab.links.ext.view","csui/controls/tab.panel/impl/tab.link.ext.view","csui/controls/tab.panel/impl/tab.contents.view","csui/controls/tab.panel/behaviors/common.keyboard.behavior.mixin","csui/controls/tab.panel/behaviors/tab.contents.keyboard.behavior","csui/controls/tab.panel/behaviors/tab.contents.proxy.keyboard.behavior","csui/controls/tab.panel/behaviors/tab.links.dropdown.keyboard.behavior","csui/controls/tab.panel/behaviors/tab.links.keyboard.behavior","csui/controls/tab.panel/behaviors/tab.panel.keyboard.behavior","csui/controls/perspective.header/perspective.header.view","csui/controls/tab.panel/impl/tab.link.view","csui/controls/tab.panel/impl/tab.links.view","i18n!csui/controls/tab.panel/impl/nls/lang","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/controls/mixins/global.alert/global.alert.mixin","csui/controls/mixins/view.state/metadata.view.state.mixin","csui/controls/mixins/view.state/node.view.state.mixin","csui/controls/mixins/view.state/toolitems.state.mixin","csui/controls/mixins/view.state/multi.node.fetch.mixin","csui/controls/mixins/view.state/node.selection.restore.mixin","csui/controls/tile/behaviors/blocking.behavior","csui/controls/tile/behaviors/infinite.scrolling.behavior","csui/controls/tile/behaviors/parent.scrollbar.updating.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/tile/behaviors/searching.behavior","csui/dialogs/modal.alert/modal.alert","csui/perspectives/flow/flow.perspective.view","csui/perspectives/grid/grid.perspective.view","csui/perspectives/left-center-right/left-center-right.perspective.view","csui/perspectives/banner-content-sidebar/banner-content-sidebar.perspective.view","csui/perspectives/sidepanel-left/sidepanel-left.perspective.view","csui/perspectives/sidepanel-right/sidepanel-right.perspective.view","csui/perspectives/single/single.perspective.view","csui/perspectives/tabbed/tabbed.perspective.view","csui/perspectives/tabbed-flow/tabbed-flow.perspective.view","csui/perspectives/zone/zone.perspective.view","csui/perspectives/mixins/perspective.edit.mixin","csui/perspectives/tabbed/tab.index/tab.index.preferences","csui/pages/start/perspective.router","csui/pages/start/perspective.routing","csui/pages/start/multi.perspective.routing","csui/pages/start/impl/landing.perspective.router","csui/pages/start/impl/node.perspective.router","csui/pages/start/impl/search.perspective.router","csui/pages/start/impl/metadata.perspective.router","csui/pages/start/impl/root.perspective.router","csui/pages/start/impl/version.perspective.router","i18n!csui/pages/start/impl/nls/lang","csui/utils/classic.nodes/impl/core.classic.nodes","csui/utils/content.helper","csui/utils/handlebars/l10n","csui/utils/impl/core.defaultactionitems","csui/utils/non-attaching.region/non-attaching.region","csui/utils/non-emptying.region/non-emptying.region","csui/utils/script-executing.region/script-executing.region","csui/utils/node.links/impl/core.node.links","csui/utils/open.authenticated.page","csui/utils/smart.nodes/impl/core.smart.nodes","csui/utils/taskqueue","csui/behaviors/keyboard.navigation/tabables.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/models/node/node.addable.type.factory","csui/controls/perspective.panel/perspective.factory","csui/utils/contexts/browsing/browsing.context","csui/utils/contexts/impl/csui.context.plugin","csui/utils/contexts/portal/portal.context","csui/utils/contexts/perspective/impl/landing.perspective.context.plugin","csui/utils/contexts/perspective/plugins/node/node.perspective.context.plugin","csui/utils/contexts/perspective/impl/search.perspective.context.plugin","csui/utils/contexts/perspective/plugins/search.perspective.context.plugin","csui/utils/contexts/perspective/impl/metadata.perspective.context.plugin","csui/utils/contexts/perspective/impl/root.perspective.context.plugin","csui/utils/contexts/perspective/impl/version.perspective.context.plugin","csui/utils/contexts/perspective/plugins/node/main.node.extra.data","csui/utils/contexts/perspective/plugins/node/node.extra.data","csui/utils/contexts/perspective/plugins/node/impl/csui.node.extra.data","csui/utils/contexts/perspective/plugins/node/impl/csui.main.node.extra.data","csui/utils/contexts/perspective/plugins/node/utils/implement.extra.data","csui/utils/contexts/perspective/plugins/node/utils/merge.extra.data","csui/utils/contexts/perspective/landing.perspectives","csui/utils/contexts/perspective/node.perspectives","csui/utils/contexts/perspective/perspective.context","csui/utils/contexts/perspective/perspective.guide","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/perspective/search.perspectives","csui/utils/contexts/factories/ancestors","csui/utils/contexts/factories/appcontainer","csui/utils/contexts/factories/children","csui/utils/contexts/factories/children2","csui/utils/contexts/factories/columns","csui/utils/contexts/factories/columns2","csui/utils/contexts/factories/global.error","csui/utils/contexts/factories/node","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/previous.node","csui/utils/contexts/factories/version","csui/utils/contexts/factories/next.version","csui/utils/contexts/factories/user","csui/utils/contexts/factories/usernodepermission","csui/utils/contexts/factories/volume","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/factories/favoritescolumns","csui/utils/contexts/factories/favorite2groups","csui/utils/contexts/factories/favorites","csui/utils/contexts/factories/favorites2","csui/utils/contexts/factories/favorite2columns","csui/utils/contexts/factories/myassignmentscolumns","csui/utils/contexts/factories/myassignments","csui/utils/contexts/factories/recentlyaccessedcolumns","csui/utils/contexts/factories/recentlyaccessed","csui/utils/contexts/factories/search.results.table.columns","csui/utils/contexts/factories/search.results.table.factory","csui/utils/contexts/factories/member","csui/utils/contexts/factories/search.box.factory","csui/utils/contexts/factories/search.formquery.factory","csui/utils/contexts/factories/search.metadata.factory","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/metadata.factory","csui/utils/contexts/factories/task.queue.factory","csui/utils/contexts/factories/server.info","csui/utils/contexts/factories/search.settings.factory","csui/utils/contexts/factories/compound.document.reorganize.factory","csui/utils/contexts/factories/largefilesettings.factory","csui/utils/contexts/factories/objecttypes.factory","csui/pages/start/impl/location","json!csui/utils/contexts/perspective/impl/perspectives/document.overview.json","json!csui/utils/contexts/perspective/impl/perspectives/version.overview.json","json!csui/utils/contexts/perspective/impl/perspectives/favorites2.table.json","json!csui/utils/contexts/perspective/impl/perspectives/container.json","json!csui/utils/contexts/perspective/impl/perspectives/metadata.json","json!csui/utils/contexts/perspective/impl/perspectives/metadata.navigation.json","json!csui/utils/contexts/perspective/impl/perspectives/myassignmentstable.json","json!csui/utils/contexts/perspective/impl/perspectives/recentlyaccessedtable.json","json!csui/utils/contexts/perspective/impl/perspectives/search.json","json!csui/utils/contexts/perspective/impl/perspectives/saved.query.json","json!csui/utils/contexts/perspective/impl/perspectives/user.json","json!csui/utils/contexts/perspective/impl/perspectives/searchresults.table.json","csui/widgets/error/error.view","csui/models/widget/recentlyaccessed.model","csui/temporary/activeviews/icons/icons","csui/temporary/appearances/icons/icons","csui/temporary/cop/icons/icons","i18n!csui/models/widget/nls/lang","i18n!csui/perspectives/impl/nls/lang","csui/models/widget/myassignments.model"],{}),csui.require(["require","css"],function(e,t){t.styleLoad(e,"csui/bundles/csui-data",!0)}),csui.define("csui/pages/start/impl/perspective.factory",["csui/controls/perspective.panel/perspective.factory"],function(e){"use strict";return console.warn('DEPRECATED: depend on the module "csui/controls/perspective.panel/perspective.factory" instead.'),e}),csui.define("csui/pages/start/impl/perspective.router",["csui/utils/routing"],function(e){"use strict";function t(){}return t.routesWithSlashes=e.routesWithSlashes,t}),csui.define("csui/pages/start/impl/perspective.panel/perspective.animator",["csui/controls/perspective.panel/perspective.animator"],function(e){"use strict";return console.warn('DEPRECATED: depend on the module "csui/controls/perspective.panel/perspective.animator" instead.'),e}),csui.define("csui/pages/start/impl/perspective.panel/perspective.panel.view",["csui/controls/perspective.panel/perspective.panel.view"],function(e){"use strict";return console.warn('DEPRECATED: depend on the module "csui/controls/perspective.panel/perspective.panel.view" instead.'),e});
//# sourceMappingURL=csui-data.js.map