csui.define("csui/behaviors/item.name/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/behaviors/item.name/impl/nls/root/lang",{"nameErrorEmptyValue":"This is a required field.","nameErrorMaxLegthExceed":"Name cannot be longer than 248 characters.","nameErrorContainSemiColon":"Name cannot contain a colon.","error":"Unable to complete this request. Please try again later.","nameExists":"An item with the name '{name}' already exists.","renameTitle":"Rename","addFolderTitle":"Add folder"}),csui.define("csui/behaviors/item.name/item.name.behavior",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/models/version","csui/models/namequery","csui/utils/commands","i18n!csui/behaviors/item.name/impl/nls/lang"],function(e,t,i,n,o,s,l,r,a){return n.Behavior.extend({"ui":{"inputName":".title-input","saveButton":".cs-add-button"},"events":{"click @ui.name":"onClickName","click @ui.nameInput":"cancelEvent","keyup @ui.nameInput":"onKeyReleased","paste @ui.inputName":"mouseRightCicked","cut @ui.inputName":"mouseRightCicked","click @ui.nameEditCancelIcon":"cancelNameEdit","click @ui.nameEditDiv":"cancelEvent","click @ui.saveButtonInEditMode":"saveInput","blur @ui.nameInput":"saveInputOnFocusOut"},"constructor":function(e,i){n.Behavior.prototype.constructor.apply(this,arguments),this._nameSchema=t.extend({"required":!0,"readonly":!1},this.options.nameSchema,i.options.nameSchema),this.view=i,this.view.ItemNameBehavior=this,this.view.readonly=this._nameSchema.readonly,this.autoSave=this.options.autoSave,this.listenTo(this.view.model||this.view.options.model,"change:name",this.toggleButton)},"updateNameSchema":function(e){this._nameSchema=t.extend({"required":!0,"readonly":!1},e),this.toggleButton()},"toggleButton":function(e){if(this.ui&&this.ui.inputName&&this.ui.inputName.val){var t=this.ui.inputName.val().trim(),i=!0;this._isEditMode()&&!this._isCopyMoveAction()||(i=this._nameSchema.required&&0==t.length,this.view.trigger("update:button",{"disabled":i}))}},"_isEditMode":function(){return void 0!==this.view.model.get("id")},"_isCopyMoveAction":function(){return"copy"===this.view.model.get("action")||"move"},"mouseRightCicked":function(e){var t=this;setTimeout(function(){t.toggleButton(e)},100)},"onBeforeDestroy":function(){this.view._nodeIconView&&this.view._nodeIconView.destroy(),this.view.dropdownMenuView&&(this.view.cancelEventsToViewsPropagation(this.view.dropdownMenuView),this.view.dropdownMenuView.destroy())},"onKeyInView":function(i){if(!this.view.readonly){var n=i||window.event;if(9===n.keyCode&&""===this.getInputBoxValue()&&this.autoSave)return n.preventDefault(),n.stopPropagation(),this.validate(""),void setTimeout(t.bind(function(){this.view.ui.nameInput.trigger("focus")},this),100);if(9===n.keyCode&&this.view.editing)return void(this.view.tabableElements&&this.view._moveTab(n));if(27===n.keyCode)return void this.cancelNameEdit(n);if(32===n.keyCode||13===n.keyCode){var s=!!(this.view.dropdownMenuView&&this.view.dropdownMenuView.$el.find(n.target).length>0),l=13===n.keyCode?200:0,r=n.target||n.srcElement;s?(n.preventDefault(),n.stopPropagation(),o.isMozilla()||o.isEdge()?e(r).trigger("click"):setTimeout(function(){e(r).trigger("click")},l)):!0!==this.view.editing&&(n.preventDefault(),n.stopPropagation(),setTimeout(t.bind(function(){this._toggleEditMode(!0)},this),l))}}},"setEditModeFocus":function(){this.view.readonly||setTimeout(t.bind(function(){this.view.ui.nameInput instanceof Object&&(this._toggleEditMode(!0),this.view.ui.nameInput.trigger("focus"),this.view.ui.nameInput[0].select())},this),500)},"showInlineError":function(e){this.view.ui.titleError.text(e),this.view.ui.titleError.attr("role","alert"),this.view.ui.titleError.addClass("visible"),this.view.ui.nameInput.addClass("csui-red-border"),this.view.ui.nameInput[0].setAttribute("aria-invalid",!0),this.view.ui.saveButtonInEditMode.prop("disabled",!0)},"clearInlineError":function(){this.view.ui.titleError.text(""),this.view.ui.titleError.removeAttr("role"),this.view.ui.titleError.removeClass("visible"),this.view.ui.nameInput.removeClass("csui-red-border"),this.view.ui.nameInput[0].setAttribute("aria-invalid",!1)},"validateInputName":function(t){var i=e.Deferred(),n=!0;if(this.view.readonly)return this.clearInlineError(),!0;var o=void 0===t?this.getValue():t;o=o.trim();var s=this;return this._isValidName(o).done(function(e){e?(s._displayInlineError(o,e),n=!1,i.resolve(n)):(s.clearInlineError(),i.resolve(n))}).fail(function(){i.reject()}),i.promise()},"validate":function(e){if(this.view.readonly)return this.clearInlineError(),!0;var t=void 0===e?this.getValue():e;return t=t.trim(),t.length<1?(this.showInlineError(a.nameErrorEmptyValue),!1):t.length>248?(this.showInlineError(a.nameErrorMaxLegthExceed),!1):t.indexOf(":")>=0?(this.showInlineError(a.nameErrorContainSemiColon),!1):(this.clearInlineError(),!0)},"_isValidName":function(t){var i=!0,n=e.Deferred();if(t&&t.length<=248&&-1===t.indexOf(":")){var o=this.view.model,s=o.parent||this.view.options.container;return!s||s.get("id")&&-1!==s.get("id")?this.checkNameExists(t).done(function(e,t,o){null===e.results[0].id&&(i=!1),n.resolve(i)}).fail(n.reject):n.resolve(!1),n.promise()}return n.resolve(i),n.promise()},"checkNameExists":function(t){var i=this.view.model,n=i.parent||this.view.options.container,o=n.connector,s=e.Deferred();return new l(null,{"container":n,"connector":o}).runQuery(n.get("id"),[t]).done(s.resolve).fail(s.reject),s.promise()},"_displayInlineError":function(e,t){var i;e.length<1?i=a.nameErrorEmptyValue:e.length>248?i=a.nameErrorMaxLegthExceed:-1!==e.indexOf(":")?i=a.nameErrorContainSemiColon:t&&(i=a.nameExists.replace("{name}",e)),this.showInlineError(i)},"getValue":function(){return this.view.ui.name.text().trim()},"getInputBoxValue":function(){return this.view.modelHasEmptyName&&!0!==this.view.inputBoxNameChange?"":this.view.ui.nameInput.val()},"setValue":function(e){this.view.ui.name.text(e),this.view.ui.name.attr("title",e)},"setInputBoxValue":function(e){e||(e=""),this.view.ui.nameInput.val(e)},"_toggleEditMode":function(e,i){void 0===i&&(i=!0),this.view.readonly&&(e=!1);var n=this.view.model.get("name_multilingual");if(e&&n&&(this.view.prevMultilingualVal=t.clone(n)),e){if(this._isEditingEnabled()){this.view.editing=!0,this.view.ui.name.addClass("binf-hidden"),this.view.ui.contextMenuDiv&&this.view.ui.contextMenuDiv.addClass("binf-hidden"),this.view.ui.nameEditDiv.removeClass("binf-hidden"),this.autoSave&&!this.view.$el.find(".csui-multilingual-icon").length||this.view.refreshTabableElements&&this.view.refreshTabableElements(),i&&this.view.ui.nameInput.trigger("focus");var o=this.view.ui.nameInput[0],s=o.value,l=s?s.length:0;o.selectionEnd=0,144===this.view.model.get("type")&&s.lastIndexOf(".")>0&&s.lastIndexOf(".")<s.length-1&&(l=s.lastIndexOf(".")),o.selectionEnd=l,0===s.length&&(this.view.ui.nameInput[0].placeholder=this.view.placeHolderName),this.view.trigger("changed:editmode",this.view.editing),this.view&&t.isFunction(this.view._openMLFlyoutInEditMode)&&this.view._openMLFlyoutInEditMode()}}else this.view.$el.is(":visible")&&(this.view.editing=!1,this.view.ui.nameEditDiv.addClass("binf-hidden"),this.view.ui.name.removeClass("binf-hidden"),this.view.nameEditDivIgnoreBlurOnce=!0,i&&this.view.ui.name.trigger("focus"),this.view.ui.contextMenuDiv&&this.view.ui.contextMenuDiv.removeClass("binf-hidden"),this.view.trigger("changed:editmode",this.view.editing))},"_isEditing":function(){return this.view.editing},"_isEditingEnabled":function(){if(this.view.readonly)return!1;if(void 0===this.view.model.get("id"))return!0;var e=r.get("Rename");return e&&e.enabled({"nodes":new i.Collection([this.view.model]),"context":this.view.options.context})},"onClickName":function(e){this.view.readonly||(e.preventDefault(),e.stopPropagation(),this.view.options.model instanceof s||this._toggleEditMode(!0))},"cancelEvent":function(e){e.preventDefault(),e.stopPropagation()},"isSaveEnabled":function(e){return!(!e.length||e.trim()===this.view.model.get("name"))},"onKeyReleased":function(e){this.view.readonly||(this.view.options&&"create"===this.view.options.mode||(e.preventDefault(),e.stopPropagation(),27===e.keyCode?this.cancelNameEdit(e):13===e.keyCode&&this.isSaveEnabled(e.target.value)?this.view.options.originatingView&&t.isFunction(this.view.options.originatingView._validateAndSave)?this.view.options.originatingView._validateAndSave():this.view._validateAndSave():""===this.getInputBoxValue()&&(this.view.ui.nameInput[0].placeholder=this.view.placeHolderName?this.view.placeHolderName:"",this.view.inputBoxNameChange=!1)),this.toggleButton(e))},"saveInput":function(e){return e&&e.preventDefault(),e&&e.stopPropagation(),!0===this.view.cancelEdit?void(this.view.cancelEdit=!1):!0===this.view.nameEditDivIgnoreBlurOnce&&this.autoSave?void(this.view.nameEditDivIgnoreBlurOnce=!1):void(this.view.modelHasEmptyName&&!0!==this.view.inputBoxNameChange?(this.setInputBoxValue(this.placeHolderName),this.validate("")):this.view.options.originatingView&&t.isFunction(this.view.options.originatingView._validateAndSave)?this.view.options.originatingView._validateAndSave():this.view._validateAndSave())},"saveInputOnFocusOut":function(e){!this.view.readonly&&this.autoSave&&this.saveInput(e)},"cancelNameEdit":function(e){this.view.readonly||(e.preventDefault(),e.stopPropagation(),this.cancelEdit=!0,this.clearInlineError(),this.view.enableAddButton&&this.view.ui.saveButtonInEditMode.prop("disabled",!0),this.view.inputBoxNameChange=!this.view.modelHasEmptyName,this.view.modelHasEmptyName&&!0!==this.view.inputBoxNameChange?(this.setInputBoxValue(""),this.validate(""),this.toggleButton(e)):(this.setInputBoxValue(this.getValue()),this._toggleEditMode(!1),this.toggleButton()),this.view.prevMultilingualVal&&this.view.model.set("name_multilingual",this.view.prevMultilingualVal))},"_getErrorMessageFromResponse":function(t){var i;if(t&&t.responseJSON&&t.responseJSON.error)i=t.responseJSON.error,o.MessageHelper.hasMessages()&&o.MessageHelper.reset();else if(o.MessageHelper.hasMessages()){var n=o.MessageHelper.toHtml();o.MessageHelper.reset(),i=e(n).text()}return i}})}),csui.define("hbs!csui/controls/table.rowselection.toolbar/impl/right.toolbar",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-condensed-header-toggle-container">\r\n    <button type="button" class="csui-condensed-header-toggle"\r\n            title="'+e.escapeExpression((s=null!=(s=l(i,"toggleCondensedHeaderTooltip")||(null!=t?l(t,"toggleCondensedHeaderTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"toggleCondensedHeaderTooltip","hash":{},"loc":{"start":{"line":4,"column":19},"end":{"line":4,"column":51}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"toggleCondensedHeaderAria")||(null!=t?l(t,"toggleCondensedHeaderAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"toggleCondensedHeaderAria","hash":{},"loc":{"start":{"line":4,"column":65},"end":{"line":4,"column":94}}}):s))+'">\r\n      <span class="icon icon-condensed-header"></span>\r\n    </button>\r\n  </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"showCondensedHeaderToggle"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":8,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_table.rowselection.toolbar_impl_right.toolbar",n),n}),csui.define("csui/controls/table.rowselection.toolbar/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table.rowselection.toolbar/impl/nls/root/localized.strings",{"showCondensedHeaderTooltip":"Show header","showCondensedHeaderAria":"Show table header","hideCondensedHeaderTooltip":"Hide header","hideCondensedHeaderAria":"Hide table header"}),csui.define("css!csui/controls/table.rowselection.toolbar/impl/right.toolbar",[],function(){}),csui.define("csui/controls/table.rowselection.toolbar/impl/right.toolbar.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/controls/table.rowselection.toolbar/impl/right.toolbar","i18n!csui/controls/table.rowselection.toolbar/impl/nls/localized.strings","css!csui/controls/table.rowselection.toolbar/impl/right.toolbar"],function(e,t,i,n,o,s,l){"use strict";var r=i.ItemView.extend({"className":"csui-right-toolbar-view","template":s,"templateHelpers":function(){return{"showCondensedHeaderToggle":this.options.showCondensedHeaderToggle,"toggleCondensedHeaderTooltip":l.showCondensedHeaderTooltip,"toggleCondensedHeaderAria":l.showCondensedHeaderAria}},"behaviors":{"TabableRegion":{"behaviorClass":o}},"ui":{"condensedHeaderToggleButton":".csui-condensed-header-toggle","condensedHeaderToggleIcon":".icon-condensed-header"},"events":{"keydown":"onKeyInView","keyup":"keyUpHandler","click .csui-condensed-header-toggle-container":"onClickCondensedHeaderToggle"},"constructor":function(e){e||(e={}),i.ItemView.prototype.constructor.call(this,e),this._toolbarVisible=!1},"onRender":function(){this.delegateEvents()},"onToolbarActivity":function(e,t){this._toolbarVisible=e,this.options.showCondensedHeaderToggle&&1===this.ui.condensedHeaderToggleButton.length&&(this.ui.condensedHeaderToggleButton.attr("tabindex",e?"0":"-1"),t?(this.ui.condensedHeaderToggleIcon.addClass("icon-rotate180"),this.ui.condensedHeaderToggleButton.attr("aria-label",l.hideCondensedHeaderAria),this.ui.condensedHeaderToggleButton.attr("title",l.hideCondensedHeaderTooltip)):(this.ui.condensedHeaderToggleIcon.removeClass("icon-rotate180"),this.ui.condensedHeaderToggleButton.attr("aria-label",l.showCondensedHeaderAria),this.ui.condensedHeaderToggleButton.attr("title",l.showCondensedHeaderTooltip)))},"onClickCondensedHeaderToggle":function(e){this.trigger("toggle:condensed:header"),this.ui.condensedHeaderToggleButton.trigger("focus")},"currentlyFocusedElement":function(){return this._toolbarVisible?this.ui.condensedHeaderToggleButton:t()},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),t(e.target).trigger("click"))},"keyUpHandler":function(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;32==e.keyCode&&t&&(e.stopPropagation(),e.preventDefault())}});return e.extend(r.prototype,n),r}),csui.define("hbs!csui/controls/table.rowselection.toolbar/impl/table.rowselection.toolbar",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-selected-items-counter-region"></div>\r\n<div class="csui-toolbar-region"></div>\r\n<div class="csui-right-toolbar-region"></div>\r\n'}});return i.registerPartial("csui_controls_table.rowselection.toolbar_impl_table.rowselection.toolbar",n),n}),csui.define("css!csui/controls/table.rowselection.toolbar/impl/table.rowselection.toolbar",[],function(){}),csui.define("csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/toolbar/toolitems.filtered.model","csui/controls/toolbar/toolbar.command.controller","csui/controls/toolbar/toolbar.view","csui/controls/toolbar/delayed.toolbar.view","csui/controls/table.rowselection.toolbar/impl/right.toolbar.view","csui/controls/selected.count/selected.count.view","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/mixins/global.alert/global.alert.mixin","hbs!csui/controls/table.rowselection.toolbar/impl/table.rowselection.toolbar","css!csui/controls/table.rowselection.toolbar/impl/table.rowselection.toolbar"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p){"use strict";var m=n.LayoutView.extend({"template":p,"className":"csui-table-rowselection-toolbar-view","regions":{"toolbarRegion":".csui-toolbar-region","rightToolbarRegion":".csui-right-toolbar-region","selectedItemsCounterRegion":".csui-selected-items-counter-region"},"events":{"keydown":"onKey"},"behaviors":{"TabableRegion":{"behaviorClass":d}},"currentlyFocusedElement":function(){return e(this._focusableElements[this._focusedToolbarItemIndex])},"constructor":function(e){e||(e={}),this.selectedChildren=e.selectedChildren,this.scrollableParent=e.scrollableParent,n.LayoutView.prototype.constructor.apply(this,arguments),this._focusedToolbarItemIndex=0},"initialize":function(e){var i={"nodes":this.selectedChildren,"context":e.context,"collection":e.collection,"container":e.collection.node,"originatingView":e.originatingView};this._commandController=e.toolbarCommandController||new l({"commands":e.commands}),this._filteredToolItemsCollection=new s(e.toolItemFactory,{"status":i,"commands":this._commandController.commands,"delayedActions":e.collection.delayedActions,"mask":e.toolbarItemsMask});var n=t.extend({"originatingView":e.originatingView,"collection":this._filteredToolItemsCollection,"toolbarName":"tableHeader"},e.toolItemFactory.options,{"role":"menubar"});e.collection.delayedActions?this._toolbarView=new a(n):this._toolbarView=new r(n),this.listenTo(this._toolbarView,"childview:toolitem:action",this._toolbarItemClicked),this.listenTo(this._toolbarView,"render render:lazy:actions",function(){this._updateCounts(),this._focusableElements.length&&(this._focusedToolbarItemIndex=0,this._moveTabindexToFocusedElement())}),this._rightToolbarView=new c(e),this.listenTo(this._rightToolbarView,"toggle:condensed:header",function(){this.trigger("toggle:condensed:header")}),this.listenTo(this,"toolbar:activity",function(e,t){this._rightToolbarView.triggerMethod("toolbar:activity",e,t),!e&&this._selectedCountView&&this._selectedCountView.resetState()}),this.listenTo(this._commandController,"before:execute:command",function(e){this._toolbarView.trigger("before:execute:command",e)}),this.listenTo(this._commandController,"after:execute:command",function(e){this._toolbarView.trigger("after:execute:command",e)}),this.listenTo(this,"render",function(){this.toolbarRegion.show(this._toolbarView),this.rightToolbarRegion.show(this._rightToolbarView),this.options.showSelectionCounter&&(this._selectedCountView=new u({"collection":this.selectedChildren,"scrollableParent":this.scrollableParent,"showOnlyOnSelection":!1}),this.selectedItemsCounterRegion.show(this._selectedCountView))}),this.listenTo(this,"dom:refresh",function(){this._toolbarView.triggerMethod("dom:refresh"),this._rightToolbarView.triggerMethod("dom:refresh"),this._selectedCountView&&this._selectedCountView.triggerMethod("dom:refresh")})},"_toolbarItemClicked":function(e,t){var i={"context":this.options.context,"nodes":this.selectedChildren,"container":this.options.collection.node,"collection":this.options.collection,"originatingView":this.options.originatingView,"toolItemView":e};this._commandController.toolitemClicked(t.toolItem,i)},"onKey":function(e){switch(e.keyCode){case 37:this._updateCounts(),this._focusedToolbarItemIndex>0?--this._focusedToolbarItemIndex>=this._visibleToolitemsCount&&(this._focusedToolbarItemIndex=this._visibleToolitemsCount-1):this._focusedToolbarItemIndex=0,this._moveTabindexToFocusedElement(),this._moveFocus(),e.preventDefault(),e.stopPropagation();break;case 39:this._updateCounts(),this._focusedToolbarItemIndex<this._visibleToolitemsCount-1?this._focusedToolbarItemIndex++:this._focusedToolbarItemIndex=this._visibleToolitemsCount-1,this._moveTabindexToFocusedElement(),this._moveFocus(),e.preventDefault(),e.stopPropagation()}},"_updateCounts":function(){this._focusableElements=o.findFocusables(this._toolbarView.el),this._visibleToolitemsCount=this._toolbarView.getVisibleToolitemsCount()},"_moveTabindexToFocusedElement":function(){for(var e=0;e<this._focusableElements.length;e++)e===this._focusedToolbarItemIndex?this._focusableElements[e].setAttribute("tabindex","0"):this._focusableElements[e].setAttribute("tabindex","-1")},"_moveFocus":function(){this.trigger("changed:focus");var e=this._focusableElements.length>this._focusedToolbarItemIndex&&this._focusableElements[this._focusedToolbarItemIndex].parentElement,t=this._toolbarView.$el.children().index(e);this._toolbarView&&this._toolbarView.setFocusByIndex(t)},"setActive":function(e){this._filteredToolItemsCollection.setActive(e),this._toolbarView.setActive(e)}});return t.extend(m.prototype,h),m}),csui.define("css!csui/behaviors/table.rowselection.toolbar/impl/table.rowselection.toolbar",[],function(){}),csui.define("csui/behaviors/table.rowselection.toolbar/table.rowselection.toolbar.behavior",["csui/lib/underscore","csui/lib/marionette","csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view","csui/utils/accessibility","csui/lib/jquery.redraw","css!csui/behaviors/table.rowselection.toolbar/impl/table.rowselection.toolbar"],function(e,t,i,n){"use strict";function o(t,i,n){if(null!=t){var o=t[i];return e.isFunction(o)?t[i].call(n):o}}var s=n.isAccessibleTable();return t.Behavior.extend({"initialize":function(){this.listenTo(this.view,{"before:render":this.setToolbar,"render":this.renderToolbar})},"setToolbar":function(){function t(){var e=this.toolbarRegion.$el;a.length>0?e.hasClass(n)||(s?e.removeClass("binf-hidden").addClass("csui-no-animation").addClass(n):e.removeClass("binf-hidden").redraw().addClass(n)):e.hasClass(n)&&(s?e.addClass("binf-hidden").addClass("csui-no-animation").removeClass(n):e.one("transitionend",function(){e.addClass("binf-hidden")}).removeClass(n))}if(this.toolbarRegion=this.view[o(this.options,"toolbarRegionName",this.view)]||this.view.toolbarRegion,this.toolbarRegion&&this.view.tableView){var n=o(this.options,"visibleClassName",this.view)||"csui-rowselection-toolbar-visible",l=o(this.options,"toolbarViewOptions",this.view),r=o(this.options,"showSelectionCounter",this.view)||this.view.options.showSelectionCounter,a=o(this.options,"allSelectedNodes",this.view)||this.view.tableView.selectedChildren;this.toolbarView=new i(e.extend({"toolItemFactory":this.view.options.toolbarItems.tableHeaderToolbar,"showSelectionCounter":r,"toolbarItemsMask":this.view.options.toolbarItemsMasks.toolbars.tableHeaderToolbar,"toolbarCommandController":this.view.commandController,"commands":this.view.defaultActionController.commands,"selectedChildren":a,"container":this.view.collection.node,"context":this.view.options.context,"originatingView":this.view,"collection":this.view.collection,"scrollableParent":this.options.scrollableParent},l)),this.listenTo(a,"reset",function(){t.call(this),this.toolbarView&&this.toolbarView.triggerMethod("dom:refresh")})}},"renderToolbar":function(){this.toolbarRegion&&this.toolbarView&&(this.toolbarRegion.show(this.toolbarView),this.toolbarRegion.$el.addClass("binf-hidden"))}})}),csui.define("csui/controls/conflict.resolver/impl/conflict.dialog/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/conflict.resolver/impl/conflict.dialog/impl/nls/root/lang",{"conflictCount":"{0} Conflicts","oneConflict":"1 Conflict","upload":"Upload","cancel":"Cancel","save":"Save","inputPlaceHolder":"Enter filename","nameErrorContainSemiColon":"Name cannot contain a colon.","nameConflict":"An item with this name already exists.","nameConflictVersionAria":"A file {0} already exists. Add a new version","nameConflictRenameAria":"A file {0} already exists. Rename","nameConflictSkipAria":"A file {0} already exists. Skip","rename":"Rename","addVersion":"Add version","skip":"Skip","conflict":"Conflict","cancelUpload":"Cancel Upload","renamed":"Renamed","undo":"Undo","undoAria":"File {0} has state {1}. Undo","retry":"Retry","serverError":"File(s) not uploaded due to server error."}),csui.define("hbs!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="csui-multilingual-icon-label binf-hidden">\r\n              <button  class="icon csui-multilingual-icon">\r\n                '+(null!=(s=(l(i,"icon-v2")||t&&l(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"small","iconName":"csui_action_language_switcher24"},"loc":{"start":{"line":15,"column":16},"end":{"line":15,"column":99}}}))?s:"")+"\r\n              </button>\r\n            </span>\r\n"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="csui-msg" title="'+e.escapeExpression((s=null!=(s=l(i,"conflict-error-msg")||(null!=t?l(t,"conflict-error-msg"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"conflict-error-msg","hash":{},"loc":{"start":{"line":27,"column":39},"end":{"line":27,"column":61}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"conflict-error-msg")||(null!=t?l(t,"conflict-error-msg"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"conflict-error-msg","hash":{},"loc":{"start":{"line":27,"column":63},"end":{"line":27,"column":85}}}):s))+"</div>\r\n"},"5":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=r(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"excludeAddVersion"):t,{"name":"unless","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":37,"column":2},"end":{"line":40,"column":13}}}))?s:"")+'    <button type="button" class="binf-btn btn-rename conflict-field '+e.escapeExpression((l=null!=(l=r(i,"multiRowClass")||(null!=t?r(t,"multiRowClass"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"multiRowClass","hash":{},"loc":{"start":{"line":41,"column":68},"end":{"line":41,"column":85}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"renameAria")||(null!=t?r(t,"renameAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"renameAria","hash":{},"loc":{"start":{"line":41,"column":99},"end":{"line":41,"column":113}}}):l))+'" tabindex="0"\r\n            title="'+e.escapeExpression((l=null!=(l=r(i,"rename")||(null!=t?r(t,"rename"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"rename","hash":{},"loc":{"start":{"line":42,"column":19},"end":{"line":42,"column":29}}}):l))+'" data-cs-id="rename">'+e.escapeExpression((l=null!=(l=r(i,"rename")||(null!=t?r(t,"rename"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"rename","hash":{},"loc":{"start":{"line":42,"column":51},"end":{"line":42,"column":61}}}):l))+"</button>\r\n"},"6":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button type="button" class="binf-btn btn-version conflict-field" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"versionAria")||(null!=t?l(t,"versionAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"versionAria","hash":{},"loc":{"start":{"line":38,"column":84},"end":{"line":38,"column":99}}}):s))+'" tabindex="0" title="'+e.escapeExpression((s=null!=(s=l(i,"version")||(null!=t?l(t,"version"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"version","hash":{},"loc":{"start":{"line":38,"column":121},"end":{"line":38,"column":132}}}):s))+'"\r\n            data-cs-id="version">'+e.escapeExpression((s=null!=(s=l(i,"version")||(null!=t?l(t,"version"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"version","hash":{},"loc":{"start":{"line":39,"column":33},"end":{"line":39,"column":44}}}):s))+"</button>\r\n"},"8":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"noServerError"):t,{"name":"if","hash":{},"fn":e.program(9,o,0),"inverse":e.noop,"loc":{"start":{"line":44,"column":2},"end":{"line":46,"column":9}}}))?s:""},"9":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button type="button" class="binf-btn btn-undo '+e.escapeExpression((s=null!=(s=l(i,"multiRowClass")||(null!=t?l(t,"multiRowClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"multiRowClass","hash":{},"loc":{"start":{"line":45,"column":53},"end":{"line":45,"column":70}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"undoAria")||(null!=t?l(t,"undoAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"undoAria","hash":{},"loc":{"start":{"line":45,"column":84},"end":{"line":45,"column":96}}}):s))+'" tabindex="0" title="'+e.escapeExpression((s=null!=(s=l(i,"undo")||(null!=t?l(t,"undo"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"undo","hash":{},"loc":{"start":{"line":45,"column":118},"end":{"line":45,"column":126}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"undo")||(null!=t?l(t,"undo"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"undo","hash":{},"loc":{"start":{"line":45,"column":128},"end":{"line":45,"column":136}}}):s))+"</button>\r\n"},"11":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"notSingleUpload"):t,{"name":"if","hash":{},"fn":e.program(12,o,0),"inverse":e.noop,"loc":{"start":{"line":51,"column":0},"end":{"line":55,"column":7}}}))?s:""},"12":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"statusNotSkip"):t,{"name":"if","hash":{},"fn":e.program(13,o,0),"inverse":e.noop,"loc":{"start":{"line":52,"column":2},"end":{"line":54,"column":9}}}))?s:""},"13":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span class="cs-icon circle_delete conflict-field" tabindex="0" title="'+e.escapeExpression((s=null!=(s=l(i,"skip")||(null!=t?l(t,"skip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"skip","hash":{},"loc":{"start":{"line":53,"column":79},"end":{"line":53,"column":87}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"skipAria")||(null!=t?l(t,"skipAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"skipAria","hash":{},"loc":{"start":{"line":53,"column":101},"end":{"line":53,"column":113}}}):s))+'" role="button"></span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n<span class="csui-icon csui-status-icon '+e.escapeExpression((l=null!=(l=r(i,"status-icon")||(null!=t?r(t,"status-icon"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"status-icon","hash":{},"loc":{"start":{"line":2,"column":40},"end":{"line":2,"column":55}}
}):l))+' " aria-hidden="true"></span>\r\n\r\n\r\n      <div class="csui-icon '+e.escapeExpression((l=null!=(l=r(i,"file-icon")||(null!=t?r(t,"file-icon"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"file-icon","hash":{},"loc":{"start":{"line":5,"column":28},"end":{"line":5,"column":41}}}):l))+'" aria-hidden="true"></div>\r\n\r\n\r\n      <div class="csui-description">\r\n        <div class="csui-name">\r\n          <span class="folder-name conflict-field '+e.escapeExpression((l=null!=(l=r(i,"status-ok")||(null!=t?r(t,"status-ok"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"status-ok","hash":{},"loc":{"start":{"line":10,"column":50},"end":{"line":10,"column":63}}}):l))+'" title="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":10,"column":72},"end":{"line":10,"column":80}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":10,"column":82},"end":{"line":10,"column":90}}}):l))+'</span>\r\n          <input class="binf-form-control cs-input rename-field binf-hidden" placeholder="'+e.escapeExpression((l=null!=(l=r(i,"inputPlaceHolder")||(null!=t?r(t,"inputPlaceHolder"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"inputPlaceHolder","hash":{},"loc":{"start":{"line":11,"column":90},"end":{"line":11,"column":110}}}):l))+'" tabindex="-1">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"mlDataEnabled"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":12,"column":9},"end":{"line":18,"column":17}}}))?s:"")+'          <button type="button" class="csui-undo csui-edit-save csui-btn-save inline-edit-icon rename-field binf-hidden" disabled title="'+e.escapeExpression((l=null!=(l=r(i,"save")||(null!=t?r(t,"save"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"save","hash":{},"loc":{"start":{"line":19,"column":137},"end":{"line":19,"column":145}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"save")||(null!=t?r(t,"save"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"save","hash":{},"loc":{"start":{"line":19,"column":159},"end":{"line":19,"column":167}}}):l))+'">\r\n            '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"normal","iconName":"csui_action_confirm32"},"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":86}}}))?s:"")+'\r\n          </button>\r\n          <button type="button" class="csui-undo csui-edit-cancel csui-btn-cancel inline-edit-icon rename-field binf-hidden" title="'+e.escapeExpression((l=null!=(l=r(i,"cancel")||(null!=t?r(t,"cancel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":22,"column":132},"end":{"line":22,"column":142}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"cancel")||(null!=t?r(t,"cancel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"cancel","hash":{},"loc":{"start":{"line":22,"column":156},"end":{"line":22,"column":166}}}):l))+'">\r\n            '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"normal","iconName":"csui_action_cancel32"},"loc":{"start":{"line":23,"column":12},"end":{"line":23,"column":85}}}))?s:"")+"\r\n          </button>\r\n        </div>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"conflict"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":26,"column":8},"end":{"line":28,"column":15}}}))?s:"")+'      </div>\r\n\r\n    <div class="csui-status conflict-field '+e.escapeExpression((l=null!=(l=r(i,"status-ok")||(null!=t?r(t,"status-ok"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"status-ok","hash":{},"loc":{"start":{"line":31,"column":43},"end":{"line":31,"column":56}}}):l))+'" title="'+e.escapeExpression((l=null!=(l=r(i,"status")||(null!=t?r(t,"status"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"status","hash":{},"loc":{"start":{"line":31,"column":65},"end":{"line":31,"column":75}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"status")||(null!=t?r(t,"status"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"status","hash":{},"loc":{"start":{"line":31,"column":77},"end":{"line":31,"column":87}}}):l))+'</div>\r\n\r\n\r\n\r\n<div class="csui-button-container" style="'+e.escapeExpression((l=null!=(l=r(i,"resolvedStyle")||(null!=t?r(t,"resolvedStyle"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"resolvedStyle","hash":{},"loc":{"start":{"line":35,"column":42},"end":{"line":35,"column":59}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"conflict"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.program(8,o,0),"loc":{"start":{"line":36,"column":0},"end":{"line":47,"column":7}}}))?s:"")+"\r\n\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"noServerError"):t,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"loc":{"start":{"line":50,"column":0},"end":{"line":56,"column":7}}}))?s:"")+'\r\n\r\n<div class=\'csui-internal-placeholder rename-field binf-hidden\'>\r\n  <div class="csui-progress-container binf-hidden">\r\n    <div class="loader">\r\n      <div class="inner-border"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n</div>\r\n'}});return i.registerPartial("csui_controls_conflict.resolver_impl_conflict.dialog_impl_conflict.item_conflict.item",n),n}),csui.define("css!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item",[],function(){}),csui.define("css!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/progress.wheel",[],function(){}),csui.define("csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/nodesprites","csui/models/namequery","i18n!csui/controls/conflict.resolver/impl/conflict.dialog/impl/nls/lang","csui/controls/progressblocker/blocker","csui/utils/base","csui/utils/log","hbs!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item","csui/utils/mime.types","css!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item","css!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/progress.wheel","css!csui/controls/globalmessage/globalmessage_icons"],function(e,t,i,n,o,s,l,r,a,c,u){var d=i.ItemView.extend({"constructor":function(n){if(i.ItemView.call(this,n),this._onDynamicPlacment=e.bind(this._setDynamicPlacement,this),t(window).on("resize.app",this._onDynamicPlacment),!this.model.get("newName")){var o=this.model.get("name");this.model.set("newName",o)}this.blockKeyUp=!1,l.imbue(this);var s=this;this.metadataLanguages=r.getMetadataLanguageInfo(),this.saveMldata="",this.listenTo(this,"ml:value:updated",function(e){s.saveMldata=e,s.enableAddButton=!0,s.ui.saveEdit.prop("disabled",!s.enableAddButton),this.refreshTabableElements(),void 0===s.model.get("id")&&(s.model.set("name",e.value,{"silent":!0}),this.inputBoxNameChange=!0,this.ui.nameInput.removeClass("csui-empty-with-placeholder"),this.trigger("update:button",{"disabled":!1}));var t={"name_multilingual":e.value_multilingual,"multilingual_provided":!0};s.model.set(t,{"silent":!0}),s.targetElement.val(e.value)})},"ui":{"inputField":"input","fileDescription":".csui-description","versionBtn":".btn-version","renameBtn":".btn-rename","cancelIcon":".circle_delete","progressWheel":".csui-progress-container","errorMessage":".csui-msg","statusText":".csui-status","cancelEdit":".csui-btn-cancel","errorMsgElem":".csui-msg","saveEdit":".csui-btn-save","conflictFields":".conflict-field","renameFields":".rename-field","globeIcon":".csui-multilingual-icon","globeIconLabel":".csui-multilingual-icon-label"},"triggers":{"click @ui.versionBtn":"click:version","mouseleave":"hide:cancel","click @ui.cancelEdit":"cancel:input"},"events":{"click @ui.renameBtn":"onRename","click @ui.saveEdit":"_queryName","click @ui.cancelIcon":"onCancelUpload","click @ui.globeIcon":"onClickGlobeIcon","keydown @ui.globeIcon":"onKeyDownGlobeIcon","keydown @ui.cancelIcon":"onCancelUpload","click .btn-undo":"undo","mouseenter":"onHover","focus *[tabindex]":"onFocus","keydown":"onKeyInView","keyup":"onKeyUp","input @ui.inputField":"onChangeName","mousedown @ui.cancelEdit":"onMouseDownCancel"},"tagName":"div","className":"binf-list-group-item","template":c,"templateHelpers":function(){var t=this.options.multiConflicts&&"skip"!==this.model.status?"":"no-cancel-icon",i=this.model.get("newName");return{"file-icon":this.getMimeTypeIcon(),"name":i,"conflict-error-msg":s.nameConflict,"conflict":!this.model.status,"status":this.getStatus(),"excludeAddVersion":this.model.excludeAddVersion||!1===this.model.get("versioned"),"version":s.addVersion,"versionAria":e.str.sformat(s.nameConflictVersionAria,i),"rename":s.rename,"renameAria":e.str.sformat(s.nameConflictRenameAria,i),"skip":s.skip,"skipAria":e.str.sformat(s.nameConflictSkipAria,i),"notSingleUpload":this.options.notSingleUpload,"multiRowClass":t,"undo":s.undo,"undoAria":e.str.sformat(s.undoAria,i,this.getStatus()),"status-ok":this.getResolveStatus(),"status-icon":this.getStatusIcon(),"cancel":s.cancel,"save":s.save,"inputPlaceHolder":s.inputPlaceHolder,"statusNotSkip":"skip"!==this.model.status,"noServerError":"serverError"!==this.model.status,"resolvedStyle":this.resolvedStyle,"mlDataEnabled":this.metadataLanguages.enabled}},"onKeyInView":function(e){var i=e.keyCode,n=t(e.target),o=!0;switch(i){case 9:break;case 27:n.hasClass("cs-input")&&(this.escapePressed=!0,this.blockKeyUp=!0,this.onCancelInput(),this.setFocusInView(),o=!1);break;case 32:case 13:n.hasClass("cs-input")&&13===i&&(this._queryName(),o=!1)}return o},"onChangeName":function(t){if(this.ui.saveEdit.length){var i=(this.ui.inputField.val().trim(),!1);i=this.isSaveEnabled(t.target.value),e.isFunction(this.updateMLdata)&&this.updateMLdata(t),this.ui.saveEdit.prop("disabled",!i)}},"isSaveEnabled":function(e){return e=e.trim(),!(!e.length||e===this.model.get("name"))},"onKeyUp":function(e){27===e.keyCode&&this.blockKeyUp&&(e.stopPropagation(),this.blockKeyUp=!1),27===e.keyCode&&this._isReadyToSave&&e.preventDefault()},"onFocus":function(e){this.trigger("item:focus",e.target)},"setFocusInView":function(){this.$el.find("input:not([disabled]),  button:not([disabled])").filter(":visible").first().trigger("focus")},"refreshTabableElements":function(){this.tabableElements=this.$el.find("input:not([disabled]),  button:not([disabled])").filter(":visible").toArray()},"getStatus":function(){switch(this.model.status){case"renamed":return s.renamed;case"skip":return s.skip;case"version":return s.addVersion;case"serverError":return s.serverError}return s.conflict},"getStatusIcon":function(){var e="csui-icon-notification-warning";switch(this.model.status){case"version":case"renamed":case"skip":e="csui-icon-notification-success";break;case"serverError":e="category_delete"}return e},"getMimeTypeIcon":function(){var e;return e=void 0===this.model.get("mime_type")&&void 0!==this.model.get("file")?this.model.get("file").type||u.getMimeType(this.model.get("name")):null!==this.model.get("mime_type")?this.model.get("mime_type"):this.model.get("type"),this.model.set("mime_type",e),n.findClassByNode(this.model)},"getResolveStatus":function(){var e="";switch(this.model.status){case"version":case"renamed":case"skip":e="ok";break;case"serverError":e="error"}return e},"onDestroy":function(){t(window).off("resize.app",this._onDynamicPlacment)},"onClickVersion":function(e){this.model.status="version",this.model.set("newVersion",!0),this.setResolveStatus(!0),this.render()},"onRename":function(t){t.preventDefault(),t.stopPropagation(),this.model.set("multilingual_provided",!1,{"silent":!0});var i=this.model.get("name_multilingual");i&&(this.prevMultilingualVal=e.clone(i));var n=this.model.get("newName");this.ui.inputField.val(n),this.ui.conflictFields.addClass("binf-hidden"),this.ui.renameFields.removeClass("binf-hidden"),this.ui.globeIconLabel.removeClass("binf-hidden"),this.ui.inputField.trigger("focus"),this.ui.fileDescription.addClass("edit-mode"),this.$el.addClass("edit-mode"),this.$el.find(".csui-status-icon").addClass("edit-mode"),this.metadataLanguages&&this.metadataLanguages.enabled&&this._openMLFlyoutInEditMode()},"onCancelInput":function(){this.render()},"onCancelUpload":function(e){void 0!==e.keyCode&&32!==e.keyCode&&13!==e.keyCode||(e.stopPropagation(),e.preventDefault(),this.view&&this.view.enableAddButton&&this.view.ui.saveButtonInEditMode.prop("disabled",!0),this.options.removeItemList[this.model.get("id")]=this.model,this.previousState=this.model.status,this.model.status="skip",this.setResolveStatus(!0),this.render())},"onKeyDownGlobeIcon":function(e){13!==e.keyCode&&32!==e.keyCode||this.multiLingualForm&&this.keyDownOnGlobeIcon(e)},"onClickGlobeIcon":function(e){e.stopPropagation(),this._showLanguagePopover()},"setResolveStatus":function(e){this._resolved&&!e&&this.trigger("resolved",!1),!this._resolved&&e&&this.trigger("resolved",!0),this._resolved=e},"onHover":function(){this.resolvedStyle||(this.resolvedStyle="width:"+t(".csui-button-container").width()+"px;"),this.ui.cancelIcon.addClass("binf-show")},"onHideCancel":function(){this.ui.cancelIcon.removeClass("binf-show")},"onRender":function(){var e=this;if(this.model.get("first")&&this.$el.addClass("no-border"),this._setDynamicPlacement(),this.mouseDownCancel=!1,this.escapePressed=!1,this.metadataLanguages.enabled){this.ui.inputField.addClass("csui-multilingual-input");var t=e.ui.inputField,i=e.ui.globeIcon;csui.require(["csui/controls/multilingual.text.picker/multilingual.popover.mixin"],function(n){n.mixin(d.prototype),e.blockActions(),e.requiredInfoAvilable("name_multilingual").then(function(){e.multiLingualForm&&e.targetElement.binf_popover("destroy");var n={"parentView":e,"targetElement":t,"mlGlobeIcon":i,"validationRequired":!0,"multilingualData":e.model.get("name_multilingual")};e._loadMultiLingualPopover(n),e.unblockActions()})})}},"undo":function(e){e.preventDefault(),e.stopPropagation();var t=this.model.get("id");this.model.status=this.previousState,this.previousState?(delete this.options.removeItemList[t],this.previousState=void 0):(this.oldName&&this.model.set("newName",this.oldName),this.oldId&&this.model.set("id",this.oldId),this.oldName=this.Id=void 0,this.model.set("newVersion",void 0),this.model.set("name_multilingual",this.prevMultilingualVal,{"silent":!0}),delete this.options.removeItemList[t],this.model.status=void 0,this.setResolveStatus(!1)),this.render()},"validateName":function(e){return-1===e.indexOf(":")||(this.showInlineError(s.nameErrorContainSemiColon),!1)},"showInlineError":function(e){this.ui.errorMsgElem.attr("title",e),this.ui.errorMsgElem.text(e)},"_queryName":function(e){var t=this.ui.inputField.val(),i=this.model.get("newName"),n=this.model.get("type"),o=e&&e.relatedTarget&&"cancel"===e.relatedTarget.id;t=t&&t.trim(),this.validateName(t)&&(!t||t===i||this.mouseDownCancel||this.escapePressed||o?this.escapePressed?this.escapePressed=!1:o||(this.onCancelInput(),this.mouseDownCancel=!1):(this.oldName=i,this.oldId=this.model.get("id"),this.model.set("id",void 0),this.model.set("newName",t),this.ui.progressWheel.removeClass("binf-hidden"),this._runNameQuery([{"name":t,"type":n}])))},"onMouseDownCancel":function(e){this.mouseDownCancel=!0,this.prevMultilingualVal&&this.model.set({"name_multilingual":this.prevMultilingualVal}),e.stopPropagation()},"_runNameQuery":function(e){var t=this;new o({"containerId":this.options.parentId},{"connector":this.options.connector}).queryNames(e).done(function(e,i){i&&i.length>0?t._resetConflictStatus(i):t._setRenameStatus()}).fail(function(e){t.ui.progressWheel.addClass("binf-hidden"),t._processServerError(e)})},"_processServerError":function(e){this.options.removeItemList[this.model.get("id")]=this.model,this.model.status="serverError",this.$el.removeClass("edit-mode"),this._setErrorMsg(e),this.setResolveStatus(!0),this.render()},"_setErrorMsg":function(e){var t=(s.serverError,"Conflict.Item.View: Server returned error during name query");e&&(t=new r.RequestErrorMessage(e)),a.error(t)&&console.error(a.last)},"_setRenameStatus":function(){this.model.status="renamed",this.$el.removeClass("edit-mode"),this.setResolveStatus(!0),this.render()},"_resetConflictStatus":function(e){this.model.set("id",e[0].id),this.render()},"_setDynamicPlacement":function(){t(window).width()-176<600?(this.$el.addClass("sm"),this.ui.statusText.addClass("sm"),this.ui.fileDescription.addClass("sm")):(this.$el.removeClass("sm"),this.ui.statusText.removeClass("sm"),this.ui.fileDescription.removeClass("sm"))}});return d}),csui.define("csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.list.navigation",["csui/lib/jquery","csui/behaviors/keyboard.navigation/tabable.region.behavior"],function(e,t){"use strict";return{"currentlyFocusedElement":function(e){e="object"==typeof e?e.shiftKey:e;var t=this.$("button[tabindex=-1]");return t.length&&(t.prop("tabindex",0),this.$(".circle_delete").prop("tabindex",0)),e?this.$("[tabindex]:visible").last():this.$("[tabindex]:visible").first()},"onKeyInView":function(t){var i=t.keyCode,n=e(t.target),o=!1;switch(i){case 39:case 37:if(n.hasClass("cs-input"))return!0;this.navigateLeftRight(i);break;case 38:case 40:this.navigateUpDown(i);break;default:o=!0}return o},"navigateUpDown":function(t){var i,n,o,s,l=this.focusedElement,r=l.hasClass("btn-version")?".btn-version":l.hasClass("btn-rename")||l.hasClass("btn-undo")?".btn-rename, .btn-undo":".circle_delete",a=this.collection.length;if(38===t&&this.activeChildIndex>0){for(n=this.activeChildIndex-1;n>=0;n--)if(o=this.children.findByIndex(n),s=o.$(r),s.length>0){i=n;break}}else if(40===t&&this.activeChildIndex<a-1)for(n=this.activeChildIndex+1;n<a;n++)if(o=this.children.findByIndex(n),s=o.$(r),s.length>0){i=n;break}void 0!==i&&(this.$(".csui-focus").removeClass("csui-focus"),e(this.children.findByIndex(i).$(r)).trigger("focus"))},"navigateLeftRight":function(t){var i,n=this.activeChildView.$("[tabindex=0]"),o=this._getActiveIndex(n);void 0!==o&&(37===t&&o>0?i=o-1:39===t&&o<n.length-1&&(i=o+1),void 0!==i&&e(n[i]).trigger("focus"))},"onLastTabElement":function(i){var n=void 0===this.activeElementIndex?0:this.activeElementIndex,o=(this.children.findByIndex(n),this.$("[tabindex=0]")),s=o.length-1;if(o.length){var l=i?o[0]:o[s];return this.$(".csui-focus").removeClass("csui-focus"),e(l).hasClass(t.accessibilityActiveElementClass)}return!0},"setItemFocus":function(i,n){this.activeChildView=i,this.$(".csui-focus").removeClass("csui-focus"),i.$el.addClass("csui-focus"),this.focusedElement&&this.focusedElement.removeClass(t.accessibilityActiveElementClass),this.focusedElement=e(n),this.focusedElement.addClass(t.accessibilityActiveElementClass),this.activeChildIndex=i.model.index},"clearTabFocus":function(){}}}),csui.define("csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.list.view",["csui/lib/underscore","csui/lib/jquery","csui/utils/base","csui/controls/list/simplelist.view","csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item.view","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.list.navigation"],function(e,t,i,n,o,s,l){var r=n.extend({"childView":o,"childEvents":{"resolved":"trackResolved","item:focus":"setItemFocus"},"events":{"keydown":"onKeyInView","mouseenter":"clearTabFocus"},"behaviors":{"TabableRegionBehavior":{"behaviorClass":s}},"constructor":function(i){i||(i={}),n.prototype.constructor.apply(this,arguments),this.notSingleUpload=1!==i.totalNumFiles,this.removeItemList=[],this.listenToOnce(this,"mouseenter",this.onUpdateScroll),this._onSetContaintListHeight=e.bind(this._setContainerListHeight,this),t(window).on("resize.app",this._onSetContaintListHeight)},"childViewOptions":function(){return{"notSingleUpload":this.notSingleUpload,"connector":this.options.connector,"parentId":this.options.parentId,"removeItemList":this.options.removeItemList}},"onDomRefresh":function(){this._setContainerListHeight()},"onUpdateScroll":function(){this.triggerMethod("update:scrollbar",this)},"onDestroy":function(){t(window).off("resize.app",this._onSetContaintListHeight)},"trackResolved":function(){var e=arguments[1];this.options.trackResolved(e)},"_setContainerListHeight":function(){var e=.9*t(window).height()-100-60-130+"px";this.$el.find(".cs-content").css("max-height",e)},"_getActiveIndex":function(e){for(var i=e.length-1,n=0;n<=i;n++)if(t(e[n]).hasClass(s.accessibilityActiveElementClass))return n}});return e.extend(r.prototype,l),r}),csui.define("css!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.dialog",[],function(){}),csui.define("csui/controls/conflict.resolver/impl/conflict.dialog/conflict.dialog",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/controls/dialog/dialog.view","i18n!csui/controls/conflict.resolver/impl/conflict.dialog/impl/nls/lang","csui/utils/log","csui/controls/list/simplelist.view","csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.item/conflict.item.view","csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.list.view","css!csui/controls/conflict.resolver/impl/conflict.dialog/impl/conflict.dialog"],function(e,t,i,n,o,s,l,r,a){"use strict";function c(i){this.options=i||{},this.deferred=t.Deferred(),this.removeItemList={},this._resolveCount=this.options.conflictFiles.length,this.deferred.then(e.bind(this.destroy,this),e.bind(this.destroy,this))}return e.extend(c.prototype,i.Events,{"destroy":function(){this._view.destroy(),this._view.off(),this._dialog.destroy()},"show":function(){var e=this.options.conflictFiles;return e[0].first=!0,this._view=this._getListView(e),this._dialog=this._createDialog(e),this._view.$el.on("hover",function(){t(".cs-content").trigger("scroll")}),this.deferred},"_createDialog":function(t){var i=this.options,s=this,l=t.length>1?o.conflictCount:o.oneConflict,r=e.str.sformat(l,t.length),a=new n({"standardHeader":!1,"view":this._view,"className":"csui-conflict-dialog csui-individual","attributes":{"data-backdrop":"static"},"headers":[{"id":"h1","label":this.options.h1Label,"class":"csui-numUploads"},{"id":"h2","label":r,"class":"csui-numConflicts"}],"buttons":[{"id":"upload","label":i.actionBtnLabel,"toolTip":i.actionBtnLabel,"disabled":!0,"click":function(){a.destroy(),s._resolutionComplete()}},{"id":"cancel","label":o.cancel,"toolTip":o.cancel,"close":!0,"click":function(){a.destroy(),s.cancel()}}],"dialogTxtAria":this.options.h1Label+". "+r});return a.on("hide",function(){a.off(),this.cancel()},this),a.show(),a},"_getListView":function(e){var t=this;return new a({"data":{"items":e},"totalNumFiles":this.options.totalNumFiles,"numConflicts":e.length,"removeItemList":this.removeItemList,"connector":this.options.connector,"parentId":this.options.parentId,"trackResolved":function(e){t.trackResolved(e)}})},"cancel":function(){return this.deferred.reject(),!0},"trackResolved":function(i){var n=t(".csui-conflict-dialog.csui-individual .csui-numConflicts");i?0==--this._resolveCount&&this._dialog.updateButton("upload",{"disabled":!1}):(this._resolveCount++,this._dialog.updateButton("upload",{"disabled":!0}));var s=this._resolveCount>1||0===this._resolveCount?o.conflictCount:o.oneConflict;return n.text(e.str.sformat(s,this._resolveCount)),!0},"_resolutionComplete":function(){return this.deferred.resolve(this._view.collection.models,this.removeItemList),!0}}),c.version="1.0",c}),csui.define("hbs!csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflicts",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span id="csui-collection-conflicts-title"\r\n      class="csui-collection-conflicts-title">'+e.escapeExpression((s=null!=(s=l(i,"conflictsItemsTitle")||(null!=t?l(t,"conflictsItemsTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"conflictsItemsTitle","hash":{},"loc":{"start":{"line":2,"column":46},"end":{"line":2,"column":69}}}):s))+'</span>\r\n<ul id="csui-collection-conflict-items" class="csui-collection-conflict-items"></ul>\r\n'}});return i.registerPartial("csui_controls_conflict.resolver_impl_collection.conflicts_collection.conflicts",n),n}),csui.define("hbs!csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflict.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="csui-type-icon '+e.escapeExpression((s=null!=(s=l(i,"icon")||(null!=t?l(t,"icon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":1,"column":28},"end":{"line":1,"column":36}}}):s))+'"></span><span class="item-name">'+e.escapeExpression((s=null!=(s=l(i,"conflictsItemsName")||(null!=t?l(t,"conflictsItemsName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"conflictsItemsName","hash":{},"loc":{"start":{"line":1,"column":69},"end":{"line":1,"column":91}}}):s))+"</span>\r\n"}});return i.registerPartial("csui_controls_conflict.resolver_impl_collection.conflicts_collection.conflict.item",n),n}),csui.define("csui/controls/conflict.resolver/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/conflict.resolver/impl/nls/root/lang",{"batchMessage":"These files already exist. How do you want to proceed?","skipConflicts":"Skip conflicts","resolveIndividual":"Resolve individually","conflictCount":"{0} Conflicts","upload":"Upload","cancel":"Cancel","addVersion":"Add version","conflictsItemsHeader":"Listed items will not be added"}),csui.define("css!csui/controls/conflict.resolver/impl/collection.conflicts/conflicts.dialog",[],function(){}),csui.define("csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflicts.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","hbs!csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflicts","hbs!csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflict.item","csui/controls/node-type.icon/node-type.icon.view","i18n!csui/controls/conflict.resolver/impl/nls/lang","csui/controls/tile/behaviors/perfect.scrolling.behavior","css!csui/controls/conflict.resolver/impl/collection.conflicts/conflicts.dialog"],function(e,t,i,n,o,s,l,r){"use strict";var a=i.ItemView.extend({"tagName":"li","template":o,"className":"csui-conflict-item","templateHelpers":function(){return{"conflictsItemsName":this.model.get("name")}},"constructor":function(e){e||(e={}),i.ItemView.prototype.constructor.call(this,e)},"onRender":function(){this._nodeIconView=new s({"el":this.$(".csui-type-icon").get(0),"node":this.model.node}),this._nodeIconView.render()}});return i.CompositeView.extend({"template":n,"className":"csui-conflicts-items-data","childView":a,"childViewContainer":"#csui-collection-conflict-items","ui":{"conflictItems":"#csui-collection-conflict-items"},"templateHelpers":function(){return{"conflictsItemsTitle":l.conflictsItemsHeader}},"behaviors":{"PerfectScrolling":{"behaviorClass":r,"contentParent":"ul.csui-collection-conflict-items","suppressScrollX":!0,"scrollYMarginOffset":15}},"constructor":function(n){n||(n={}),this.collection=n.collection||{},i.CompositeView.prototype.constructor.apply(this,arguments),this._onSetContaintListHeight=e.bind(this._setContainerListHeight,this),t(window).on("resize.app",this._onSetContaintListHeight)},"onDomRefresh":function(){this._setContainerListHeight()},"_setContainerListHeight":function(){var e=.9*t(window).height()-100-60-112+"px";t(".csui-collection-conflict-items").css("max-height",e)},"onDestroy":function(){t(window).off("resize.app",this._onSetContaintListHeight)}})}),csui.define("css!csui/controls/conflict.resolver/impl/conflict.resolver",[],function(){}),csui.define("csui/controls/conflict.resolver/conflict.resolver",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/node","csui/controls/dialog/dialog.view","i18n!csui/controls/conflict.resolver/impl/nls/lang","csui/utils/log","csui/controls/conflict.resolver/impl/conflict.dialog/conflict.dialog","csui/models/namequery","csui/utils/base","csui/models/fileuploads","css!csui/controls/conflict.resolver/impl/conflict.resolver"],function(e,t,i,n,o,s,l,r,a,c,u){"use strict";function d(i){this.options=i||{},this.deferred=t.Deferred(),this.container=i.container,this.actionBtnLabel=i.actionBtnLabel||s.upload,this.excludeAddVersion=i.excludeAddVersion||!1,this.originatingView=i.originatingView,this.excludeAddVersionforFolders=i.excludeAddVersionforFolders||!1,this.files=i.files instanceof u?i.files:new u(i.files),this.deferred.then(e.bind(this.destroy,this),e.bind(this.destroy,this))}return e.extend(d.prototype,{"destroy":function(){this._dialog&&this._dialog.destroy()},"run":function(t){var i=this;return e.extend(this.options,t),this.queryNames(this.files).done(function(e,t){i._resolveConflicts(e,t)}).fail(function(e){var t=i.getMsgResponse(e);i.deferred.reject(new Error(t))}),this.deferred.promise()},"queryNames":function(e){var i=t.Deferred();return new a({"containerId":this.container.get("id")},{"connector":this.container.connector}).queryNames(e).done(function(e,t){i.resolve(e,t)}).fail(function(e){var t=new c.Error(e);i.reject(t)}),i},"getMsgResponse":function(e){var t=s.fileNameQueryFailed;return e&&(t=new c.RequestErrorMessage(e),t=t.message),t},"showBatchResolve":function(e){var i=t.Deferred(),n=s.batchMessage,o=[{"id":"versions","label":s.addVersion,"toolTip":s.addVersion,"click":function(e){i.resolve("versions",e.dialog)}},{"id":"skip","label":s.skipConflicts,"toolTip":s.skipConflicts,"close":!0,"click":function(e){i.resolve("skip",e.dialog)}},{"id":"individual","label":s.resolveIndividual,"toolTip":s.resolveIndividual,"click":function(e){i.resolve("individual",e.dialog)}}];return(this.excludeAddVersion||this.excludeAddVersionforFolders)&&o.shift(),this._createDialog("csui-conflict-dialog csui-batch",e,o,n),i},"checkAddVersion":function(i){if(this.excludeAddVersion)return i.excludeAddVersion=this.excludeAddVersion,t.Deferred().resolve().promise();var n=this.originatingView&&this.originatingView.context,o=i.node.collection||this.originatingView&&this.originatingView.collection||n&&n.hasCollection("children2")&&n.getCollection("children2"),s=null;if(o&&(s=e.find(o.models,function(e){return e.get("id")===i.get("id")})),s)return i.excludeAddVersion=!s.actions.findWhere({"signature":"addversion"}),t.Deferred().resolve().promise();var l=t.Deferred(),r=this;return csui.require(["csui/models/node.actions"],function(e){var t=new e(void 0,{"connector":r.container.connector,"nodes":[i.get("id")],"commands":["addversion"]})
;t.fetch().then(function(){var e=i.get("id"),n=t.get(e);i.excludeAddVersion=!n.actions.findWhere({"signature":"addversion"}),l.resolve()})}),l},"validateAddVersion":function(i){var n=this,o=[];return e.each(i,function(e){o.push(n.checkAddVersion(e))}),t.whenAll.apply(t,o)},"showIndividualResolve":function(e){var t,i=this;this.validateAddVersion(e).done(function(){return t=this._conflictDialog=new r({"parentId":this.container.get("id"),"connector":this.container.connector,"totalNumFiles":this.options.files.length,"conflictFiles":e,"actionBtnLabel":this.actionBtnLabel,"h1Label":this.options.h1Label}),this.originatingView&&this.originatingView._blockingCounter>0&&this.originatingView.unblockActions(),t.show().done(function(e,t){i._removeDeletedFiles(t),i._returnFiles()}).fail(function(){i.deferred.reject({"userAction":"cancelResolveNamingConflicts"})}),t}.bind(this))},"_createDialog":function(t,i,n,l,r){var a=e.str.sformat(s.conflictCount,i.length),c=this.options.h1Label+". "+a+". "+l,u=this._dialog=new o({"bodyMessage":l,"standardHeader":!1,"view":r,"className":t,"attributes":{"data-backdrop":"static"},"headers":[{"id":"h1","label":this.options.h1Label,"class":"csui-numUploads"},{"id":"h2","label":a,"class":"csui-numConflicts"}],"buttons":n,"dialogTxtAria":c});return u.listenTo(u,"hide",this.deferred.reject),this.originatingView&&this.originatingView._blockingCounter>0&&this.originatingView.unblockActions(),u.show(),u},"_resolveConflicts":function(e,t){var i=this;return this.nonConflictFiles=e,t&&t.length>0?t.length>1?this.showBatchResolve(t).then(function(e,n){switch(n.stopListening(n,"hide",i.deferred.reject),n.kill(),e){case"versions":i._addVersions(t),i._returnFiles();break;case"individual":i.showIndividualResolve(t);break;case"skip":i._removeConnflicts(t),i._returnFiles()}}):this.showIndividualResolve(t):this.deferred.resolve(this.options.files,t.length>0),!0},"_returnFiles":function(){if(this.options.files.length&&this.options.files instanceof u)this.deferred.resolve(this.files);else if(this.files.length){var t=[];e.each(this.files.models,function(e){t.push(e.attributes)}),this.deferred.resolve(t)}else this.deferred.reject()},"_removeConnflicts":function(t){var i=this.files;e.each(t,function(e){i.remove(e)})},"_addVersions":function(t){e.each(t,function(e){e.set("newVersion",!0)})},"_removeDeletedFiles":function(t){e.each(t,function(e){this.files.remove(e)},this)},"_getArrayOfFileNames":function(t){var i=[];return e.each(t,function(e){var t=e.newName||e.name;i.push({"name":t})}),i}}),d.version="1.0",d}),csui.define("csui/controls/side.panel/side.panel.view",["smart/controls/side.panel/side.panel.view","csui/lib/binf/js/binf"],function(e){return e}),csui.define("csui/controls/draganddrop/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/draganddrop/impl/nls/root/lang",{"defaultDropMessage":"Drop your file(s) into","singleFileDropMessage":"Drop file to upload it to","singleFolderDropMessage":"Drop item to upload it to","MultipleFilesDropMessage":"Drop items to upload them to","versionDropMessage":"Add version to {0}.","dropNotPermitted":"No items can be dropped here.","ieFolderSupportError":"Internet Explorer does not support dragging of folders","safariFolderSupportError":"Safari does not support dragging of folders","dropInvalid":"Only files can be dropped here.","InvalidFile":"{0} was rejected, invalid type or size.","addTypeDenied":"Cannot add items to {0}.","addVersionDeniedForReservedItem":"Unable to add version to reserved item.","addVersionDenied":"Unable to add version to {0}. Permissions required to add new content here.","addFileDenied":"Permissions required to add new content in {0}.","dialogTitle":"Add version","dialogTemplate":"Add new version to {0}?","OneFolderSuccessfullyUploaded":"{0} was successfully uploaded.","AllFoldersSuccessfullyUploaded":"{0} folders were successfully uploaded.","FolderCreationError":"{0} folder failed to upload.","MultipleFolderCreationError":"{0} folders failed to upload.","AddVersionNotAllowed":"Unable to add version. Please try again when the current operation is finished"}),csui.define("csui/controls/fileupload/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/fileupload/impl/nls/root/lang",{"uploadCounts":"Uploading {0} files","uploadCountsItems":"Uploading {0} items","uploadCount":"Uploading 1 file","uploadCountFolder":"Uploading 1 folder","OneFileSuccessfullyUploaded":"{0} file was successfully uploaded.","AllFilesSuccessfullyUploaded":"{0} files were successfully uploaded.","over500Items":"Cannot add more than 500 items.","invalidFileList":"Invalid file list","fileNameQueryFailed":"File name query failed - reason unknown.","MessageVersionAdded":"Version added","pageLeavingWarning":"If you leave the page now, pending files will not be uploaded.","InvalidFile":"{0} was rejected: the file type is not supported or the file size is zero bytes.","warnTitle":"Add version","warnMessage":"This document is unreserved and the latest version was added by {0} on {1}. Ensure that the version you upload includes the latest changes.","AddButtonLabel":"Add","cancelButtonLabel":"Cancel","CommandTitleUpload":"Upload documents","UploadNotAllowed":"Unable to upload. Please try again when the current operation is finished"}),csui.define("csui/controls/fileupload/impl/fileupload.collection",["require","module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log","i18n!csui/controls/fileupload/impl/nls/lang","csui/controls/fileupload/impl/upload.controller","csui/utils/url","csui/models/fileuploads","csui/controls/globalmessage/globalmessage","csui/controls/conflict.resolver/conflict.resolver","csui/utils/mime.types","csui/dialogs/modal.alert/modal.alert","csui/utils/page.leaving.blocker","csui/utils/node.links/node.links","csui/utils/contexts/factories/next.node"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g){"use strict";var b=t.config();n.defaults(b,{"actionType":"UPLOAD","allowMultipleInstances":!0,"hideGotoLocationSingleSet":!0,"hideGotoLocationMultiSet":!0});var v=o.Model.extend({"defaults":{"parentCollection":null,"container":null},"constructor":function(e,t){e||(e={});var i=e.UploadFileCollection||c;o.Model.prototype.constructor.call(this,e,t);var n=this.container=this.get("container"),s=this.get("parentCollection");this.uploadFiles=new i,this.controller=new r({"container":n,"originatingView":this.get("originatingView"),"context":this.get("context")}),s&&(this.originalCollectionUrl=s.url(),this.listenTo(s,"reset",this._stopCollectionUpdate),this.listenTo(s.node,"request",this._stopCollectionUpdate)),this._uploadCounts={"failed":0,"success":0,"complete":0}},"close":function(){return this.onDestroy(),this.trigger("destroy"),!0},"onDestroy":function(){return this.uploadView&&this.uploadView.destroy(),!0},"onUploadFileAdded":function(e){e.promise().done(n.bind(this.onFileUploadProcessed,this)).fail(n.bind(this.onFileUploadFailed,this))},"addFilesToUpload":function(e,t){var o=this,s=i.Deferred();if(e=this._validateFileList(e),u.isActionInProgress(b.actionType,l.UploadNotAllowed,l.CommandTitleUpload))return s.resolve();if(e.length){var r=this.setBlocker();return this.addFilesToUploadCollection(e,t),this.resolveNamingConflicts(t).then(n.bind(this.checkAndHandleRequiredMetadata,this,t)).then(n.bind(this.addToUpload,this)).fail(function(e){e&&(e.error?u.showMessage("error",e.error.message):e.userAction&&"cancelAddOneItemWithRequiredMetadata"===e.userAction?o.trigger("metadata:cancelled"):e.userAction&&"closeMetadataActionView"===e.userAction?o.trigger("metadata:closed"):e.userAction&&"cancelResolveNamingConflicts"===e.userAction&&o.trigger("resolve:naming:conflicts:cancelled"))}).always(function(e){r&&r.unblockActions(),s.resolve(e),o.close()}),s.promise()}return this.close(),!1},"addFilesToUploadCollection":function(e,t){return n.each(e,function(e){var i=e,n=i.container||t&&t.container||this.container,o=t&&t.collection||this.get("parentCollection");i.file&&(e=i.file);var s=i.newName||e.newName;this.uploadFiles.add({"file":e,"newName":s,"name":s||e.name,"newVersion":i.newVersion,"id":i.id,"extended_data":i.data||{},"collection":o,"subType":this.get("addableType")||i.type,"type":i.type,"targetLocation":{"id":n.get("id"),"url":f.getUrl(n)}},{"container":n,"connector":n.connector,"enforcedRequiredAttrs":!0})},this),this.uploadFiles},"setBlocker":function(){var e=this.get("originatingView");return e&&e.blockActions||(e=void 0),e&&e.blockActions(),e},"unSetBlocker":function(){var e=this.get("originatingView");e&&e.unblockActions||(e=void 0),e&&e.unblockActions()},"resolveNamingConflicts":function(e){e||(e={});var t=this.uploadFiles;if(e.skipResolveNamingConflicts){var o=i.Deferred();return n.each(t.models,n.bind(function(e){"version"===this.status&&(e.attributes.id=this.itemId,e.attributes.newVersion=!0)},this)),o.resolve(t)}var s=1===t.length?l.uploadCount:l.uploadCounts;return new d({"h1Label":n.str.sformat(s,t.length),"container":e.container||this.container,"files":t,"originatingView":this.get("originatingView"),"excludeAddVersion":e.excludeAddVersion}).run()},"_validateFileList":function(e){if(!e||0===e.length)return s.debug("No upload files selected")&&console.log(s.last),[];var t=e[0];return t.name||t.file&&t.file.name||t.get&&t.get("name")?e:(u.showMessage("error",l.invalidFileList),[])},"checkAndHandleRequiredMetadata":function(e,t){var n=this,o=i.Deferred(),l=this.get("originatingView");return l&&0===l._blockingCounter&&l.blockActions(),csui.require(["csui/widgets/metadata/metadata.add.document.controller"],function(i){(new i).addItemsRequiredMetadata(t,{"container":e&&e.container||n.container,"addableType":144,"context":n.get("context"),"openMetadata":e&&e.openMetadata,"inheritance":e&&e.inheritance}).then(function(){return n.unSetBlocker(),t}).done(o.resolve).fail(o.reject)},function(e){s.warn("Failed to load MetadataAddDocumentController. {0}",e)&&console.warn(s.last),o.reject(e)}),o.promise()},"addToUpload":function(e){var t;if(e&&e.length>0){var o,r,a,c=this,u=(new Date).getTime(),d=this.get("originatingView"),p=d&&d.largeFileSettingsModel&&d.largeFileSettingsModel.get("largeFileSettings"),f=p&&p.min_size,g=d&&d.container&&136===d.container.get("type");g&&(a=d.container.get("order_next"),r=d.container.get("fileOrder")?d.container.get("fileOrder"):0),t=n.map(e.models,function(e){var n=i.Deferred();if(!e.get("id")||e.get("newName")||e.get("newVersion")){var d=e.get("newName")||e.get("file").name,p=!!e.get("file").type&&e.get("file").type||h.getMimeType(d),b=e.get("size")||e.get("file").size;if(e.set("mime_type",p),e.set("bundleNumber",u),e.uploadContainer=c.container,g&&a&&!e.get("newVersion")&&e.set("order_new",a+r++),b>f){var v={"size":b,"uploadKey":"","state":"pending","retryCount":0,"fileChunks":{"slicedFiles":[],"total":0}};e.set("largeFile",v)}if(s.debug("Object was added - {0}",d)&&console.log(s.last),!o){o=!0;var w=this.get("pageLeavingWarning")||l.pageLeavingWarning;m.enable(w)}return this.controller.scheduleFileForUpload(e),this.onUploadFileAdded(e),e.promise().done(function(e){n.resolve(e)}).fail(function(e){n.reject(e)}),n.promise()}return s.debug("Object was skipped - {0}",e.name),n.reject(e),n.promise(t)},this),g&&d.container.set("fileOrder",r)}else s.debug("No files were upload. All have naming conflict")&&console.log(s.last);return this.showProgress(e),i.whenAll.apply(i,t)},"onFileUploadProcessed":function(e){if(!this.stopParentUpdate){var t=e.get("collection"),n=this.get("parentCollection");if(t||(t=n),t!==n||n&&n.url()==this.originalCollectionUrl){var o=e.container,s=(this.container||o).get("id"),l=o.get("parent_id");if(l&&l.id&&(l=l.id),s==l)t.findWhere({"id":o.get("id")})||(o.isLocallyCreated=!0,t.unshift(o),i(".csui-new-item").closest("tbody").scrollTop(0));else if(s==o.get("id")){var r=!e.get("newVersion");r&&(e.node.isLocallyCreated=!0,t.unshift(e.node),i(".csui-new-item").closest("tbody").scrollTop(0))}}}this._increaseUploadCount("success")},"onFileUploadFailed":function(e,t){this.uploadFiles&&this.uploadFiles.trigger("try:again"),this._increaseUploadCount("failed")},"showProgress":function(e){this.uploadView&&this.uploadView.destroy();var t={"originatingView":this.get("originatingView"),"actionType":this.get("actionType")||b.actionType,"allowMultipleInstances":b.allowMultipleInstances,"hideGotoLocationSingleSet":b.hideGotoLocationSingleSet,"hideGotoLocationMultiSet":b.hideGotoLocationMultiSet,"context":this.get("context"),"nextNodeModelFactory":g};u.showProgressPanel(e,t)},"_stopCollectionUpdate":function(){this.stopParentUpdate=!1},"_increaseUploadCount":function(e){var t=this.uploadFiles.length,i=this._uploadCounts;"failed"===e?i.failed++:i.success++,++i.complete===t&&m.disable(),this.close()}});return o.Collection.extend({"model":v,"comparator":"sequence"})}),csui.define("csui/controls/fileupload/fileupload",["module","csui/lib/underscore","csui/lib/backbone","csui/controls/fileupload/impl/fileupload.collection"],function(e,t,i,n){"use strict";return{"newUpload":function(e,i){e||(e={}),i||(i={}),t.extend(i,{"parentCollection":e.collection,"container":e.container?e.container.clone():void 0,"originatingView":e.originatingView,"context":e.context||i&&i.context,"skipProgressBar":!!e.skipProgressBar}),this.collection||(this.collection=new n);var o=this.collection.add(i);return o.listenToOnce(o,"destroy",function(){this.collection.remove(o)},this),o}}}),csui.define("csui/utils/dragndrop.supported.subtypes",["csui/lib/underscore","csui-ext!csui/utils/dragndrop.supported.subtypes"],function(e,t){"use strict";var i=[0,136,141,142,144,202,749,751,800,801,1307,1308,30205];return t&&(i=i.concat(e.flatten(t,!0))),i}),csui.define("hbs!csui/controls/draganddrop/impl/draganddrop",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <p class="csui-messageBox"><span>'+e.escapeExpression((s=null!=(s=l(i,"fileName")||(null!=t?l(t,"fileName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"fileName","hash":{},"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":47}}}):s))+"</span></p>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<p class="csui-messageBox"><span>'+e.escapeExpression((l=null!=(l=r(i,"message")||(null!=t?r(t,"message"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"message","hash":{},"loc":{"start":{"line":1,"column":33},"end":{"line":1,"column":44}}}):l))+"</span></p>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"fileName"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":0},"end":{"line":4,"column":7}}}))?s:"")}});return i.registerPartial("csui_controls_draganddrop_impl_draganddrop",n),n}),csui.define("csui/controls/draganddrop/impl/uploaditems",["csui/lib/jquery","csui/lib/underscore","csui/utils/base","csui/controls/fileupload/fileupload","csui/models/fileuploads","i18n!csui/controls/fileupload/impl/nls/lang","csui/controls/conflict.resolver/conflict.resolver","csui/models/namequery","csui/utils/deepClone/deepClone"],function(e,t,i,n,o,s,l,r){"use strict";return{"uploadFiles":function(e,t,i){return n.newUpload(t,i).addFilesToUpload(e,i)},"uploadFilesDirectly":function(e,t,i){var o=n.newUpload(t,i),s=o.addFilesToUploadCollection(e,i);return o.addToUpload(s)},"handleResolveConflictsAndMetadata":function(i,n){var o=e.Deferred();return this.validateItems(i)?(this.addDropItemsToCollection(i,n),this.resolveNamingConflicts(n).done(t.bind(function(e){t.filter(e.models,function(e){return e.get("isFolderEmpty")}).length===e.length&&(n.addableType=0),this.handleRequiredMetadata(this.uploadItems,n).done(t.bind(function(e){o.resolve(e)},this))},this)).fail(function(e){o.reject(e),n.originatingView&&n.originatingView.unblockActions()})):o.reject(),o.promise()},"validateItems":function(e,t){return e&&e.length},"addDropItemsToCollection":function(e,i){return this.uploadItems=new o,t.each(e,t.bind(function(e){e.file?this.addFileToUploadCollection(e.file,i):this.addFolderToUploadCollection(e,i)},this)),this.uploadItems},"addFileToUploadCollection":function(e,t){var i=e.newName;this.uploadItems.add({"file":e,"newName":i,"name":i||e.name,"extended_data":e.data||{},"collection":t.collection,"subType":144},{"container":t.container,"connector":t.container.connector,"enforcedRequiredAttrs":!0})},"addFolderToUploadCollection":function(e,t){this.uploadItems.add({"container":!0,"name":e.get("name"),"enforcedRequiredAttrsForFolders":e.get("enforcedRequiredAttrsForFolders"),"extended_data":e.data||e.get("data")||{},"collection":t.collection,"subType":e.get("type"),"subItems":e.subItems,"isFolderEmpty":e.get("isFolderEmpty")},{"container":t.container,"connector":t.container.connector,"enforcedRequiredAttrs":!0})},"resolveNamingConflicts":function(e){var i=this.uploadItems,n=1===i.length?i.models[0].get("container")?s.uploadCountFolder:s.uploadCount:s.uploadCountsItems,o=new l({"h1Label":t.str.sformat(n,i.length),"container":e&&e.container||this.container,"files":i,"excludeAddVersionforFolders":e.excludeAddVersionforFolders,"excludeAddVersion":e.excludeAddVersion,"originatingView":e.originatingView});return this.resolveNameConflicts=!0,o.run()},"validateNodes":function(i,n){var o,s=[],l=[],a=e.Deferred();return t.each(i,function(e){e.data?s.push(e):l.push(e)}),n=l.length?l[0].container:n,o=new r({"containerId":n.get("id")},{"connector":n.connector}),o.queryNames(l).always(function(e,t){s=e?s.concat(e):s,a.resolve(s,t)}),a.promise()},"handleRequiredMetadata":function(t,i){var n=e.Deferred();return i.originatingView&&0===i.originatingView._blockingCounter&&i.originatingView.blockActions(),csui.require(["csui/widgets/metadata/impl/add.items/metadata.add.item.controller"],function(e){(new e).addItemsRequiredMetadata(t.models,{"container":i&&i.container,"context":i.context,"openMetadata":i.openMetadata,"inheritance":i.inheritance,"addableType":i.addableType}).done(function(){n.resolve(t)}).fail(function(){i.originatingView&&i.originatingView.unblockActions(),n.reject()})},function(e){n.reject(e)}),n.promise()},"create":function(n,o){var s,l=o.container,r=e.Deferred(),a=n.node||n,c=n.get("extended_data");if(s={"name":n.get("newName")||n.get("name"),"type":n.get("type")||0,"parent_id":l.get("id"),"container":!0,"collection":o.collection},c&&t.deepExtend(s,c),!a.connector){if(!l)throw new Error("Either node or container have to be connected.");l.connector.assignTo(a)}var u=a.save(void 0,{"data":s,"wait":!0,"silent":!0});return r.fail(function(e,t){t||u.abort()}),u.then(function(e,t,i){return n.set("id",e.id),a.fetch({"refreshCache":!0})}).done(function(e,t,i){a.isLocallyCreated=!0,r.resolve(a)}).fail(function(e,t,o){var s=new i.RequestErrorMessage(e);r.reject(n,s)}),r.promise()}}}),csui.define("css!csui/controls/draganddrop/impl/draganddrop",[],function(){}),csui.define("csui/controls/draganddrop/draganddrop.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/lib/backbone","csui/utils/log","i18n!csui/controls/draganddrop/impl/nls/lang","csui/controls/globalmessage/globalmessage","csui/controls/fileupload/fileupload","csui/dialogs/modal.alert/modal.alert","csui/utils/dragndrop.supported.subtypes","csui/utils/base","csui/utils/url","csui/models/node/node.addable.type.collection","csui/models/node/node.model","hbs!csui/controls/draganddrop/impl/draganddrop","csui/controls/draganddrop/impl/uploaditems","css!csui/controls/draganddrop/impl/draganddrop","csui/lib/jquery.when.all"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g){"use strict";var b=i.defaults({},e.config(),{"detectLeaveDelay":10,"hideDropMessageDelay":100,"hideWarningAlert":!1,"fileSubTypes":[144,801,1307],"folderSubTypes":[800,1308]});return n.ItemView.extend({"template":f,"className":"csui-dropMessage","ui":{"message":".csui-messageBox"},"constructor":function(e){n.ItemView.prototype.constructor.call(this,e),this.collection=e.collection,this.container=e.container,this.addableTypes=e.addableTypes,this.wantDragAndDrop=!0,this.context=e.context,this.visible=!1,this.highlightedTarget=e.highlightedTarget,this.parentView=e.originatingView||e.parentView,this.listenTo(this.options.container,"change:name",this._resetMessage)},"setDragParentView":function(e,n){return this._parentEl=i.isString(n)&&e.$(n)||void 0!==n.length&&n||n&&t(n)||e.$el,this.render(),e.csuiDropMessage||(e.csuiDropMessage=this.$el,this._parentEl.append(e.csuiDropMessage)),this.parentView=e||this.parentView,this.shouldDragAndDrop()&&(this.parentView.csuiDropMessage.hide(),this.disable(),this._setDragEvents()),!0},"onDestroy":function(){this.shouldDragAndDrop()&&this._parentEl&&this._parentEl.off("dragover",this.dragOver).off("dragleave",this.dragLeave).off("drop",this.dragDrop)},"stopListeningDragEvent":function(e,i){t(e)&&i&&t(e).off("dragover",i.dragOver).off("dragleave",i.dragLeave).off("drop",i.dragDrop)},"_setDragEvents":function(){this.dragOver=i.bind(this.onOverView,this),this.dragLeave=i.bind(this.onLeaveView,this),this.dragDrop=i.bind(this.onDropView,this),this._parentEl.on("dragover",this.dragOver).on("dragleave",this.dragLeave).on("drop",this.dragDrop)},"getSupportedSubType":function(){return{"type":144,"type_name":"Document"}},"enable":function(e){if(this.visible||(!1!==e&&this.trigger("drag:over"),this.parentView.csuiDropMessage.show(),this.visible=!0),this.canAdd()){var t=this.getSupportedSubType();this.options.addableType=t.type,this.options.addableTypeName=t.type_name}},"disable":function(e){this.trigger("drag:leave",this),this.parentView.leaveViewTimeout||(this.parentView.leaveViewTimeout=setTimeout(i.bind(function(){this.parentView.leaveViewTimeout=void 0,this.parentView.csuiDropMessage.hide()},this),b.hideDropMessageDelay))},"shouldDragAndDrop":function(){return this.wantDragAndDrop},"canAdd":function(){return!!(this.addableTypes&&this.addableTypes.length&&this._isSupportedType(this.addableTypes,u))||!this.addableTypes},"_isSupportedType":function(e,t){return void 0!==t.filter(function(t){return e.get(t)})[0]},"isDndSupportedContainer":function(e){return-1!==t.inArray(e.get("type"),u)},"onOverView":function(e){e.preventDefault(),e.stopPropagation(),this.parentView.leaveViewTimeout&&(clearTimeout(this.parentView.leaveViewTimeout),this.parentView.leaveViewTimeout=void 0),this.leaveViewTimeout?(clearTimeout(this.leaveViewTimeout),this.leaveViewTimeout=void 0):this.enable(!1);var t=e.originalEvent&&e.originalEvent.dataTransfer,n=t.items,o=n&&1===n.length&&!n[0].type,s=n&&n.length&&i.all(n,function(e){return"file"===e.kind}),r=t&&t.types,a=r&&r.length&&i.any(r,function(e){return"files"===e.toLowerCase()}),c=l.dropInvalid;if(this.valid=n&&s||a,t.dropEffect="copy",!this.canAdd()){var u=this.isDndSupportedContainer(this.parentView.container);this.valid=u&&this.options.isSupportedRowView,c=l.dropNotPermitted}var d=b.fileSubTypes.indexOf(this.container.get("type"))>=0;o&&d||this.valid&&n&&n.length>1&&d?(this.currentRowHighlightedTarget||(this.currentRowHighlightedTarget=this.highlightedTarget,this.highlightedTarget=void 0),this.parentView.addableTypes&&!this._isSupportedType(this.parentView.addableTypes,b.fileSubTypes)&&(this.valid=!1)):this.currentRowHighlightedTarget&&(this.highlightedTarget=this.currentRowHighlightedTarget,this.currentRowHighlightedTarget=void 0),this.valid&&this._resetMessage({"items":n}),this.overViewTimeout||(this.overViewTimeout=setTimeout(i.bind(function(){this.overViewTimeout=void 0,this.valid?(this.parentView.csuiDropMessage.hasClass("csui-disabled")&&this.parentView.csuiDropMessage.removeClass("csui-disabled"),this.trigger("drag:over",this,{"disabled":!1,"highlightedTarget":this.highlightedTarget}),this.parentView.csuiDropMessage.show(),this.visible=!0):(!this.parentView.csuiDropMessage.hasClass("csui-disabled")&&this.parentView.csuiDropMessage.addClass("csui-disabled"),this.parentView.csuiDropMessage.html(this.template({"message":c})),this.parentView.csuiDropMessage.show(),this.visible=!0,this.trigger("drag:over",this,{"disabled":!0}))},this),b.detectLeaveDelay))},"onLeaveView":function(e){e.preventDefault(),e.stopPropagation(),this.leaveViewTimeout||(this.leaveViewTimeout=setTimeout(i.bind(function(){this.leaveViewTimeout=void 0,this.disable(e)},this),b.detectLeaveDelay)),this.overViewTimeout&&(clearTimeout(this.overViewTimeout),this.overViewTimeout=void 0)},"onDropView":function(e){if(e.preventDefault(),e.stopPropagation(),this.overViewTimeout&&(clearTimeout(this.overViewTimeout),this.overViewTimeout=void 0),this.valid){var n=this,o=e.originalEvent&&e.originalEvent.dataTransfer||{"files":e.originalEvent&&e.originalEvent.target&&e.originalEvent.target.files||[]},s=b.fileSubTypes.indexOf(this.container.get("type"))>=0?n.parentView.container:n.container,a=1===o.files.length,p=a&&o.items&&o.items[0].webkitGetAsEntry()&&o.items[0].webkitGetAsEntry().isFile,m=0===window.location.href.toLowerCase().indexOf("http");if(s&&136===s.get("type")&&!s.get("fileOrder")){var f=s.connector.getConnectionUrl().getApiBase("v2"),v=h.combineQueryString({"fields":["properties{order_next}"]}),w={"url":h.combine(f,"nodes",s.get("id"),"?"+v),"type":"GET","contentType":"application/x-www-form-urlencoded"};s.connector.makeAjaxCall(w).always(function(e){e.results&&s.set("order_next",e.results.data.properties.order_next)})}if(o.dropEffect="copy",n.canAdd()||n.isDndSupportedContainer(n.parentView.container)&&n.options.isSupportedRowView)if(p&&b.fileSubTypes.indexOf(n.container.get("type"))>=0)n.parentView.blockActions(),n.checkFiles(o).always(function(e){n.container.fetch().done(function(){if(e.length){var o={},a=n.container.get("name"),u=u||{};o={"container":n.container,"context":n.context,"originatingView":n.parentView},(!n.options.isSupportedRowView||b.fileSubTypes.indexOf(n.container.get("type"))>=0)&&(o.collection=n.collection);var d=n.container.actions.findWhere({"signature":"addversion"});if(d){if(o.actionType=d.actionType||"ADD_VERSION",r.isActionInProgress(o.actionType,l.AddVersionNotAllowed,l.dialogTitle))return t.Deferred().resolve().promise();c.confirmQuestion(i.str.sformat(l.dialogTemplate,a),l.dialogTitle,{}).done(function(t){n._addVersionToFile(e[0].file,o,u)})}else s.get("reserved")?r.showMessage("warning",i.str.sformat(l.addVersionDeniedForReservedItem)):r.showMessage("warning",i.str.sformat(l.addVersionDenied,a))}}).fail(function(e){if(e){var t=new d.Error(e);r.showMessage("error",t.message)}}).always(function(){n.parentView.unblockActions()})});else if(o.items&&m)this._prepareForResolveConflicts(o,s).done(function(e,t){n.parentView.blockActions();var o,a;e.length&&(o=i.find(e,function(e){return!e.file}));var c={},u=s.get("name"),h=h||{};c={"container":s,"context":n.context,"originatingView":n.parentView,"excludeAddVersionforFolders":n.options.excludeAddVersionforFolders||!!o,"excludeAddVersion":n.options.excludeAddVersion},(!n.options.isSupportedRowView||b.fileSubTypes.indexOf(n.container.get("type"))>=0)&&(c.collection=n.collection),n.getAddableTypes(s).then(function(o){o&&o.length&&(o.find("type",[144,801])||o.get(0))?g.handleResolveConflictsAndMetadata(e,c).done(function(e){t=t.filter(function(t){var i=e.findWhere({"name":t.name});return t.node=i,!!t.node}),n.selectFiles(t,s,e).always(function(e,t,o,u){if(n.parentView.unblockActions(),e&&e.length)n.parentView.blockActions(),e&&g.validateNodes(e,s).done(function(e,t){h.skipProgressBar=!1,h.openMetadata=!1,h.inheritance="original",h.UploadFileCollection=n.options.UploadFileCollection,e.length&&(h.skipResolveNamingConflicts=!0,g.uploadFilesDirectly(e,c,h).always(function(e){n.updateChildrenCount(u,c)})),n.parentView.unblockActions()});else if(o){if(n.updateChildrenCount(u,c),1===o){var d=u[0].get("newName")||u[0].get("name");a=i.str.sformat(l.OneFolderSuccessfullyUploaded,d)}else a=i.str.sformat(l.AllFoldersSuccessfullyUploaded,o);r.showMessage("success",a)}t.length&&(a=1===t.length?l.FolderCreationError:l.MultipleFolderCreationError,r.showMessage("error",i.str.sformat(a,t.length)))})}).fail(function(e){if(n.parentView.unblockActions(),e){var t=new d.Error(e);t.message&&r.showMessage("error",t.message)}}):(n.parentView.unblockActions(),r.showMessage("warning",i.str.sformat(l.addFileDenied,u)))}).fail(function(e){if(n.parentView.unblockActions(),e){var t=new d.Error(e);t.message&&r.showMessage("error",t.message)}})}).fail(function(e){if(n.parentView.unblockActions(),e){var t=new d.Error(e);t.message&&r.showMessage("error",t.message)}});else{var y=o.types[0];n.checkFiles(o).always(function(e){var t=i.filter(e,function(e){return!(e instanceof Error)});if(t&&t.length){if(t.length){n.parentView.blockActions();var o={},a=s.get("name");o={"container":s,"context":n.context,"originatingView":n.parentView},(!n.options.isSupportedRowView||b.fileSubTypes.indexOf(n.container.get("type"))>=0)&&(o.collection=n.collection),n.getAddableTypes(s).then(function(e){e&&e.length&&n._isSupportedType(e,u)?(o.skipProgressBar=!1,t.length&&g.uploadFiles(t,o).always(function(e){!o.collection&&o.container.fetch()})):r.showMessage("warning",i.str.sformat(l.addFileDenied,a)),n.parentView.unblockActions()}).fail(function(e){if(n.parentView.unblockActions(),e){var t=new d.Error(e);r.showMessage("error",t.message)}})}}else d.isIE11()&&"Files"===y?r.showMessage("error",l.ieFolderSupportError):d.isSafari()&&"Files"===y?r.showMessage("error",l.safariFolderSupportError):r.showMessage("error",l.dropNotPermitted)})}else{var C=n.container.get("name");r.showMessage("error",i.str.sformat(l.addTypeDenied,C))}}this.disable()},"getAddableTypes":function(e){var i=t.Deferred();if(this.addableTypes)i.resolve(this.addableTypes);else if(!this.addableTypes){var n=new p(void 0,{"node":e});n.fetch().done(function(){i.resolve(n)}).fail(function(e){i.reject(e)})}return i.promise()},"_addVersionToFile":function(e,t,i){b.actionType=t.actionType,csui.require(["csui/controls/fileupload/impl/addversion.controller"],function(i){return new i({"view":t.originatingView,"selectedNode":t.container}).uploadFile(e,b)})},"selectFiles":function(e,t,i){return this._traverseItems(e,t,i)||this.checkFiles(e)},"_prepareForResolveConflicts":function(e,n){var o=e.items,s=t.Deferred(),l=[],a=[],c=[],u=b.folderSubTypes.indexOf(n.get("type"))>=0;return o&&(i.each(o,function(e){var o=t.Deferred(),s=e.webkitGetAsEntry&&e.webkitGetAsEntry()||e.getAsEntry&&e.getAsEntry();if(s)if(l.push(o),c.push(s),s.isFile)a.push({"file":{"name":s.name,"type":e.type},"container":n}),o.resolve();else if(s.isDirectory){var h=s.createReader(),p={"type":u?n.get("type"):0,"type_name":u?n.get("type_name"):"Folder","container":!0,"name":s.name,"parent_id":n.get("id"),"parent":n};h.readEntries(function(e){e.length?i.extend(p,{"enforcedRequiredAttrsForFolders":!0}):i.extend(p,{"isFolderEmpty":!0}),p=new m(p,{"connector":n.connector}),p.parent=n,a.push(p),o.resolve()},function(e){if(e){var t=new d.Error(e);r.showMessage("error",t.message)}o.reject()})}},this),t.when.apply(t,l).done(function(){s.resolve(a,c)}).fail(s.reject)),s.promise()},"_traverseItems":function(e,n,o){function s(){return++u}function l(){u&&--u,u||c.resolve()}function a(e,t,i){s();var n=i.node,o=n&&n.get("newName"),c=n&&n.get("newVersion"),u=!1;if(t.subItems=t.subItems?t.subItems:[],e=e+"/"+(i.newName||i.name),i.isFile)return i.file(function(e){n?h.push({"file":e,"newName":o||i.name,"id":c&&n.get("id"),"newVersion":c,"data":n.get("extended_data"),"type":n.get("type")}):h.push({"file":e,"container":t,"newName":o||i.name}),t.subItems.push({"file":e,"container":t}),l()},function(e){var n={"name":i.name,"container":t,"error":new Error(e),"isFile":i.isFile};f.push(n),l()}),!0;if(i.isDirectory){var y=i.createReader(),C={"container":!0,"name":o||i.name,"parent_id":t.get("id"),
"parent":t,"enforcedRequiredAttrsForFolders":!0},_=b.folderSubTypes.indexOf(t.get("type"))>=0;C=i.node||new m(C,{"connector":p.parentView.connector}),C.parent=t,C.set({"type":_?t.get("type"):0,"type_name":_?t.get("type_name"):"Folder"},{"silent":!0});var x={};u=p.parentView.container.get("id")===t.get("id"),x={"collection":u?p.collection:void 0,"container":t,"context":p.context,"originatingView":p.parentView},g.create(C,x).done(function(i){if(i.get("id")){w++,t.subItems.push(i),i.isLocallyCreated=!0,u&&(p.collection.unshift(i),v.push(i));var n=[],o=function(){y.readEntries(function(t){t.length?(i.hasEntries=!0,n=n.concat(t),o()):(n.forEach(a.bind(p,e,i)),l())},function(e){if(e){var t=new d.Error(e);r.showMessage("error",t.message)}l()})};o()}else f.push(i),l()}).fail(function(e,t){e.error=t,f.push(e),l()})}else l()}var c=t.Deferred(),u=0,h=[],p=this,f=[],v=[],w=0;if(e&&i.every(e,function(e){if(e){var t=o.findWhere({"name":e.name});return e.newName=t.get("newName")||e.name,e.node=t,a(".",n,e),!0}},this))return u||c.resolve(),c.then(function(){var e="reject";return h.length&&(e="resolve"),t.Deferred()[e](h,f,w,v).promise()})},"checkFiles":function(e){function n(e){var i,n=new FileReader,o=t.Deferred(),s={};if(0===e.size){var l=new Error("size is 0");return l.file=e,o.reject(l)}n.addEventListener("load",function(){s.file=e,s.container=this.container,o.resolve(s),i=!0,n.abort()}),n.addEventListener("error",function(){if(!i){var t=new Error("No file");t.file=e,o.reject(t)}});try{var r=Math.min(e.size,512),a=e.slice(0,r);n.readAsArrayBuffer(a)}catch(t){var c=new Error(t.message);c.file=e,o.reject(c)}return o.promise()}var o=e.files;return o?t.whenAll.apply(t,i.map(o,i.bind(n,this))).then(function(e){return e},function(e){return t.Deferred().reject(e).promise()}):t.Deferred().reject([]).promise()},"_resetMessage":function(e){if(this._isRendered){var t=this.parentView.csuiDropMessage;t&&t.length&&t.html(this.template(this._getDropPossibleMessage(e)))}},"_getDropPossibleMessage":function(e){var t=e&&e.items,i=t&&t.length,n=1===i&&!t[0].type,o={},s=b.fileSubTypes.indexOf(this.container.get("type"))>=0;return o.fileName=i&&i>1&&s||s&&n?this.parentView.container.get("name"):this.container.get("name"),o.message=function(){return i&&i>1?l.MultipleFilesDropMessage:i&&n?l.singleFolderDropMessage:i?l.singleFileDropMessage:l.defaultDropMessage}(),o},"updateChildrenCount":function(e,t){t.collection?i.each(e,function(e){e.hasEntries&&e.fetch()}):t.container.fetch()}})}),csui.define("csui/controls/settings/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/settings/impl/nls/root/lang",{"summaryDescriptionTitle":"Summary / description","columnSettingsTitle":"Column settings","selectColumns":"Select columns","searchBackToTooltip":"Go back to '{0}'","searchBackToAria":"Go back to '{0}'","addAvailableColumns":"Add columns","addColumnsAria":"Add table columns to show","removeColumn":"Remove '{0}'","removeColumnAria":"Remove column '{0}' ","removeColumnMenuAria":"Remove column '{0}' from menu","SearchBackToolTip":"Back","SearchBackAria":"Close","SettingsBackAria":"column settings: Go back to search settings menu","SummaryDescriptionBackAria":"Go back to search settings menu","selectcolumnsbackaria":"select Columns: Go back to column settings menu","selected":"Selected","SummaryOnly":"Summaries only","SummaryPreferred":"Summaries preferred","DescriptionOnly":"Descriptions only","DescriptionPreferred":"Descriptions preferred","SummaryAndDescription":"Summaries and descriptions"}),csui.define("hbs!csui/controls/settings/available.columns/impl/available.columns",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="column-header">\r\n  <div class="icon arrow_back" tabindex="0" title="'+e.escapeExpression((s=null!=(s=l(i,"backToButtonTitle")||(null!=t?l(t,"backToButtonTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"backToButtonTitle","hash":{},"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":72}}}):s))+'"  aria-label="'+e.escapeExpression((s=null!=(s=l(i,"backToButtonAria")||(null!=t?l(t,"backToButtonAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"backToButtonAria","hash":{},"loc":{"start":{"line":2,"column":87},"end":{"line":2,"column":107}}}):s))+'" role="button"></div>\r\n  <div class="column-title" title="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":44}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":3,"column":46},"end":{"line":3,"column":55}}}):s))+'</div>\r\n  <div class="selected-column-count"></div>\r\n</div>\r\n<div class="columns-list binf-list-group" role="menu" >\r\n</div>'}});return i.registerPartial("csui_controls_settings_available.columns_impl_available.columns",n),n}),csui.define("hbs!csui/controls/settings/available.columns/impl/available.column",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="column-label">\r\n    <span class="csui-column-label-category">'+e.escapeExpression((s=null!=(s=l(i,"categoryName")||(null!=t?l(t,"categoryName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"categoryName","hash":{},"loc":{"start":{"line":5,"column":45},"end":{"line":5,"column":61}}}):s))+'</span>\r\n    <span class="csui-column-label-attribute">'+e.escapeExpression((s=null!=(s=l(i,"attributeName")||(null!=t?l(t,"attributeName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"attributeName","hash":{},"loc":{"start":{"line":6,"column":46},"end":{"line":6,"column":63}}}):s))+"</span>\r\n  </span>\r\n"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="column-label">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":9,"column":29},"end":{"line":9,"column":37}}}):s))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="column-item-container" title="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":1,"column":42},"end":{"line":1,"column":50}}}):l))+'">\r\n  <span class="icon icon-listview-checkmark"></span>\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"hasAttribute"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":3,"column":2},"end":{"line":10,"column":9}}}))?s:"")+"</div>"}});return i.registerPartial("csui_controls_settings_available.columns_impl_available.column",n),n}),csui.define("csui/controls/settings/available.columns/available.columns.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette3","csui/utils/base","csui/controls/globalmessage/globalmessage","csui/controls/tile/behaviors/perfect.scrolling.behavior","i18n!csui/controls/settings/impl/nls/lang","hbs!csui/controls/settings/available.columns/impl/available.columns","hbs!csui/controls/settings/available.columns/impl/available.column"],function(e,t,i,n,o,s,l,r,a,c){"use strict";var u=n.View.extend({"template":c,"attributes":{"tabindex":"0","role":"checkbox","aria-checked":"false"},"className":"column-item","triggers":{"click":"column:add","keydown":{"event":"keydown:item","stopPropagation":!1,"preventDefault":!1}},"templateContext":function(){var e=this.model.get("name"),t=e&&e.replace(/\s*:[^:]*/g,""),i=e&&e.replace(/^[^:]*:\s*/,"");return{"name":e,"categoryName":t,"attributeName":i,"hasAttribute":t!==i}},"constructor":function(e){n.View.apply(this,arguments)}}),d=n.CollectionView.extend({"childView":u,"childViewEvents":{"column:add":"onColumnAdd","keydown:item":"onChildViewKeydown"},"attributes":{"role":"presentation"},"constructor":function(e){n.CollectionView.apply(this,arguments),this.focusIndex=0},"onColumnAdd":function(e){e.$el.toggleClass("selected");var t=e.$el.hasClass("selected");t?e.$el.attr("aria-checked",!0):e.$el.attr("aria-checked",!1),t?(e.model.set({"isNew":!0}),this.options.availableSelectedColumnsCollection.add(e.model),"OTName"===e.model.get("key")?this.options.selectedColumnsCollection.findWhere({"key":"OTMIMEType"})?this.options.selectedColumnsCollection.add(e.model,{"at":1}):this.options.selectedColumnsCollection.add(e.model,{"at":0}):"OTMIMEType"===e.model.get("key")?this.options.selectedColumnsCollection.add(e.model,{"at":0}):this.options.selectedColumnsCollection.add(e.model)):(e.model.set({"isNew":!1}),this.options.availableSelectedColumnsCollection.remove(e.model),this.options.selectedColumnsCollection.remove(e.model)),this.options.searchResultsView.headerView.data.display_regions="{"+this.options.selectedColumnsCollection.pluck("key").map(function(e){return"'"+e+"'"}).join(",")+"}"},"onBeforeDestroy":function(){this.options.availableSelectedColumnsCollection&&(this.collection.remove(this.options.availableSelectedColumnsCollection.models),this.options.availableSelectedColumnsCollection.reset())},"onChildViewKeydown":function(t,i){var n=this.$el.find("*[tabindex]");switch(i.which){case 27:this.$el.closest(".csui-search-settings").trigger("focus"),this.options.settingsView.triggerMethod("close:menu",i);break;case 13:case 32:this.onColumnAdd(t),i.preventDefault(),i.stopPropagation();break;case 38:this.focusIndex>0&&--this.focusIndex,e(n[this.focusIndex]).trigger("focus"),i.preventDefault(),i.stopPropagation();break;case 40:this.focusIndex<n.length-1&&++this.focusIndex,e(n[this.focusIndex]).trigger("focus"),i.preventDefault(),i.stopPropagation();break;case 9:this.$el.parents(".available-columns-container").find(".arrow_back").trigger("focus"),i.preventDefault(),i.stopPropagation()}}}),h=n.View.extend({"constructor":function(){n.View.apply(this,arguments),this.listenTo(this.options.availableSelectedColumnsCollection,"update",this.render)},"templateContext":function(){return{"count":this.options.availableSelectedColumnsCollection.length||"","label":r.selected}},"template":t.template("<span title='<%=label%> <%=count%>'><%=count%></span>")});return n.View.extend({"className":"csui-available-column","template":a,"templateContext":function(){return{"label":r.selectColumns,"available":this.options.availableColumns,"backToButtonTitle":t.str.sformat(r.searchBackToTooltip,r.columnSettingsTitle),"backToButtonAria":r.selectcolumnsbackaria}},"regions":{"columnsList":".columns-list","selectedColumnsCountView":".selected-column-count"},"ui":{"backArrow":".arrow_back"},"events":{"keydown @ui.backArrow":"onKeyDownArrow","click @ui.backArrow":"showSelectedColumns","keydown":"onKeyInView"},"behaviors":{"PerfectScrolling":{"behaviorClass":l,"contentParent":".columns-list","suppressScrollX":!0,"scrollYMarginOffset":15}},"onKeyDownArrow":function(e){var t=e.keyCode;!!!this.options.searchResultsView.$el.find(".load-container.binf-hidden").length||13!==t&&32!==t&&37!==t||(this.showSelectedColumns(e),e.preventDefault(),e.stopPropagation())},"onKeyInView":function(t){var i=this.$el.find(".column-item*[tabindex]");switch(t.which){case 27:this.$el.closest(".csui-search-settings").trigger("focus"),this.options.settingsView.triggerMethod("close:menu",t);break;case 9:this.availableColumnsCollectionView.focusIndex=0,e(i[0]).trigger("focus"),t.preventDefault(),t.stopPropagation()}},"constructor":function(e){n.View.apply(this,arguments),this.options.availableSelectedColumnsCollection=new i.Collection},"showSelectedColumns":function(e){var i=new FormData,n=this.options.searchResultsView.headerView.data.display_regions,l=!!this.options.selectedColumnsCollection.filter({"isNew":!0}).length,r=this;l&&n&&(this.options.searchResultsView.blockActions(),i.append("display_regions",n),this.options.settings.save(null,{"parse":!1,"data":i,"processData":!1,"cache":!1,"contentType":!1}).done(t.bind(function(e){r.options.searchResultsView.collection.settings_changed=!0,r.options.tableCollection.fetch(),r.options.searchResultsView.headerView.data={},r.options.searchResultsView.unblockActions()},this)).fail(function(e){e=new o.Error(e),s.showMessage("error",e.message),r.options.searchResultsView.unblockActions()})),this.options.selectedColumnsCollection&&(this.options.selectedColumnsCollection.add(this.options.collection.remove(this.options.availableSelectedColumnsCollection.models)),this.options.availableSelectedColumnsCollection.reset()),this.options.settingsView.showSettings("selectedColumnsContainer",this.options.selectedColumnView)},"onRender":function(){this.availableColumnsCollectionView=new d(this.options),this.showChildView("columnsList",this.availableColumnsCollectionView),this.showChildView("selectedColumnsCountView",new h({"availableSelectedColumnsCollection":this.options.availableSelectedColumnsCollection}))}})}),csui.define("csui/lib/jquery.dataTables/js/jquery.dataTables",["csui/lib/jquery"],function(e){return function(t,i,n){!function(o){"use strict";e&&!e.fn.dataTable&&function(e){function o(t){var i,n,s="a aa ai ao as b fn i m o s ",l={};e.each(t,function(e,r){(i=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!==s.indexOf(i[1]+" ")&&(n=e.replace(i[0],i[2].toLowerCase()),l[n]=e,"o"===i[1]&&o(t[e]))}),t._hungarianMap=l}function s(t,i,l){t._hungarianMap||o(t);var r;e.each(i,function(o,a){(r=t._hungarianMap[o])===n||!l&&i[r]!==n||("o"===r.charAt(0)?(i[r]||(i[r]={}),e.extend(!0,i[r],i[o]),s(t[r],i[r],l)):i[r]=i[o])})}function l(e){var t=Ke.defaults.oLanguage,i=e.sZeroRecords;!e.sEmptyTable&&i&&"No data available in table"===t.sEmptyTable&&Re(e,e,"sZeroRecords","sEmptyTable"),!e.sLoadingRecords&&i&&"Loading..."===t.sLoadingRecords&&Re(e,e,"sZeroRecords","sLoadingRecords"),e.sInfoThousands&&(e.sThousands=e.sInfoThousands);var n=e.sDecimal;n&&Ge(n)}function r(e){vt(e,"ordering","bSort"),vt(e,"orderMulti","bSortMulti"),vt(e,"orderClasses","bSortClasses"),vt(e,"orderCellsTop","bSortCellsTop"),vt(e,"order","aaSorting"),vt(e,"orderFixed","aaSortingFixed"),vt(e,"paging","bPaginate"),vt(e,"pagingType","sPaginationType"),vt(e,"pageLength","iDisplayLength"),vt(e,"searching","bFilter");var t=e.aoSearchCols;if(t)for(var i=0,n=t.length;i<n;i++)t[i]&&s(Ke.models.oSearch,t[i])}function a(e){vt(e,"orderable","bSortable"),vt(e,"orderData","aDataSort"),vt(e,"orderSequence","asSorting"),vt(e,"orderDataType","sortDataType")}function c(t){var i=t.oBrowser,n=e("<div/>").css({"position":"absolute","top":0,"left":0,"height":1,"width":1,"overflow":"hidden"}).append(e("<div/>").css({"position":"absolute","top":1,"left":1,"width":100,"overflow":"scroll"}).append(e('<div class="test"/>').css({"width":"100%","height":10}))).appendTo("body"),o=n.find(".test");i.bScrollOversize=100===o[0].offsetWidth,i.bScrollbarLeft=1!==o.offset().left,n.remove()}function u(e,t,i,o,s,l){var r,a=o,c=!1;for(i!==n&&(r=i,c=!0);a!==s;)e.hasOwnProperty(a)&&(r=c?t(r,e[a],a,e):e[a],c=!0,a+=l);return r}function d(t,n){var o=Ke.defaults.column,s=t.aoColumns.length,l=e.extend({},Ke.models.oColumn,o,{"nTh":n||i.createElement("th"),"sTitle":o.sTitle?o.sTitle:n?n.innerHTML:"","aDataSort":o.aDataSort?o.aDataSort:[s],"mData":o.mData?o.mData:s,"idx":s});t.aoColumns.push(l);var r=t.aoPreSearchCols;r[s]=e.extend({},Ke.models.oSearch,r[s]),h(t,s,null)}function h(t,i,o){var l=t.aoColumns[i],r=t.oClasses,c=e(l.nTh);if(!l.sWidthOrig){l.sWidthOrig=c.attr("width")||null;var u=(c.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);u&&(l.sWidthOrig=u[1])}o!==n&&null!==o&&(a(o),s(Ke.defaults.column,o),o.mDataProp===n||o.mData||(o.mData=o.mDataProp),o.sType&&(l._sManualType=o.sType),o.className&&!o.sClass&&(o.sClass=o.className),e.extend(l,o),Re(l,o,"sWidth","sWidthOrig"),"number"==typeof o.iDataSort&&(l.aDataSort=[o.iDataSort]),Re(l,o,"aDataSort"));var d=l.mData,h=S(d),p=l.mRender?S(l.mRender):null,m=function(e){return"string"==typeof e&&-1!==e.indexOf("@")};l._bAttrSrc=e.isPlainObject(d)&&(m(d.sort)||m(d.type)||m(d.filter)),l.fnGetData=function(e,t,i){var o=h(e,t,n,i);return p&&t?p(o,t,e,i):o},l.fnSetData=function(e,t,i){return I(d)(e,t,i)},"number"!=typeof d&&(t._rowReadObject=!0),t.oFeatures.bSort||(l.bSortable=!1,c.addClass(r.sSortableNone));var f=-1!==e.inArray("asc",l.asSorting),g=-1!==e.inArray("desc",l.asSorting);l.bSortable&&(f||g)?f&&!g?(l.sSortingClass=r.sSortableAsc,l.sSortingClassJUI=r.sSortJUIAscAllowed):!f&&g?(l.sSortingClass=r.sSortableDesc,l.sSortingClassJUI=r.sSortJUIDescAllowed):(l.sSortingClass=r.sSortable,l.sSortingClassJUI=r.sSortJUI):(l.sSortingClass=r.sSortableNone,l.sSortingClassJUI="")}function p(e){if(!1!==e.oFeatures.bAutoWidth){var t=e.aoColumns;ve(e);for(var i=0,n=t.length;i<n;i++)t[i].nTh.style.width=t[i].sWidth}var o=e.oScroll;""===o.sY&&""===o.sX||ge(e),je(e,null,"column-sizing",[e])}function m(e,t){var i=b(e,"bVisible");return"number"==typeof i[t]?i[t]:null}function f(t,i){var n=b(t,"bVisible"),o=e.inArray(i,n);return-1!==o?o:null}function g(e){return b(e,"bVisible").length}function b(t,i){var n=[];return e.map(t.aoColumns,function(e,t){e[i]&&n.push(t)}),n}function v(e){var t,i,o,s,l,r,a,c,u,d=e.aoColumns,h=e.aoData,p=Ke.ext.type.detect;for(t=0,i=d.length;t<i;t++)if(a=d[t],u=[],!a.sType&&a._sManualType)a.sType=a._sManualType;else if(!a.sType){for(o=0,s=p.length;o<s;o++){for(l=0,r=h.length;l<r&&(u[l]===n&&(u[l]=k(e,l,t,"type")),(c=p[o](u[l],e))||o===p.length-1)&&"html"!==c;l++);if(c){a.sType=c;break}}a.sType||(a.sType="string")}}function w(t,i,o,s){var l,r,a,c,u,h,p,m=t.aoColumns;if(i)for(l=i.length-1;l>=0;l--){p=i[l];var f=p.targets!==n?p.targets:p.aTargets;for(e.isArray(f)||(f=[f]),a=0,c=f.length;a<c;a++)if("number"==typeof f[a]&&f[a]>=0){for(;m.length<=f[a];)d(t);s(f[a],p)}else if("number"==typeof f[a]&&f[a]<0)s(m.length+f[a],p);else if("string"==typeof f[a])for(u=0,h=m.length;u<h;u++)("_all"==f[a]||e(m[u].nTh).hasClass(f[a]))&&s(u,p)}if(o)for(l=0,r=o.length;l<r;l++)s(l,o[l])}function y(t,i,n,o){var s=t.aoData.length,l=e.extend(!0,{},Ke.models.oRow,{"src":n?"dom":"data"});l._aData=i,t.aoData.push(l);for(var r=t.aoColumns,a=0,c=r.length;a<c;a++)n&&T(t,s,a,k(t,s,a)),r[a].sType=null;return t.aiDisplayMaster.push(s),!n&&t.oFeatures.bDeferRender||F(t,s,n,o),s}function C(t,i){var n;return i instanceof e||(i=e(i)),i.map(function(e,i){return n=D(t,i),y(t,n.data,i,n.cells)})}function _(e,t){return t._DT_RowIndex!==n?t._DT_RowIndex:null}function x(t,i,n){return e.inArray(n,t.aoData[i].anCells)}function k(e,t,i,o){var s=e.iDraw,l=e.aoColumns[i],r=e.aoData[t]._aData,a=l.sDefaultContent,c=l.fnGetData(r,o,{"settings":e,"row":t,"col":i});if(c===n)return e.iDrawError!=s&&null===a&&(Ne(e,0,"Requested unknown parameter "+("function"==typeof l.mData?"{function}":"'"+l.mData+"'")+" for row "+t,4),e.iDrawError=s),a;if(c!==r&&null!==c||null===a){if("function"==typeof c)return c.call(r)}else c=a;return null===c&&"display"==o?"":c}function T(e,t,i,n){var o=e.aoColumns[i],s=e.aoData[t]._aData;o.fnSetData(s,n,{"settings":e,"row":t,"col":i})}function V(t){return e.map(t.match(/(\\.|[^\.])+/g),function(e){return e.replace(/\\./g,".")})}function S(t){if(e.isPlainObject(t)){var i={};return e.each(t,function(e,t){t&&(i[e]=S(t))}),function(e,t,o,s){var l=i[t]||i._;return l!==n?l(e,t,o,s):e}}if(null===t)return function(e){return e};if("function"==typeof t)return function(e,i,n,o){return t(e,i,n,o)};if("string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("[")&&-1===t.indexOf("("))return function(e,i){return e[t]};var o=function(e,t,i){var s,l,r,a;if(""!==i)for(var c=V(i),u=0,d=c.length;u<d;u++){if(s=c[u].match(wt),l=c[u].match(yt),s){c[u]=c[u].replace(wt,""),""!==c[u]&&(e=e[c[u]]),r=[],c.splice(0,u+1),a=c.join(".");for(var h=0,p=e.length;h<p;h++)r.push(o(e[h],t,a));var m=s[0].substring(1,s[0].length-1);e=""===m?r:r.join(m);break}if(l)c[u]=c[u].replace(yt,""),e=e[c[u]]();else{if(null===e||e[c[u]]===n)return n;e=e[c[u]]}}return e};return function(e,i){return o(e,i,t)}}function I(t){if(e.isPlainObject(t))return I(t._);if(null===t)return function(){};if("function"==typeof t)return function(e,i,n){t(e,"set",i,n)};if("string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("[")&&-1===t.indexOf("("))return function(e,i){e[t]=i};var i=function(e,t,o){for(var s,l,r,a,c,u=V(o),d=u[u.length-1],h=0,p=u.length-1;h<p;h++){if("__proto__"===u[h])throw new Error("Cannot set prototype values");if(l=u[h].match(wt),r=u[h].match(yt),l){u[h]=u[h].replace(wt,""),e[u[h]]=[],s=u.slice(),s.splice(0,h+1),c=s.join(".");for(var m=0,f=t.length;m<f;m++)a={},i(a,t[m],c),e[u[h]].push(a);return}r&&(u[h]=u[h].replace(yt,""),e=e[u[h]](t)),null!==e[u[h]]&&e[u[h]]!==n||(e[u[h]]={}),e=e[u[h]]}d.match(yt)?e=e[d.replace(yt,"")](t):e[d.replace(wt,"")]=t};return function(e,n){return i(e,n,t)}}function A(e){return ht(e.aoData,"_aData")}function E(e){e.aoData.length=0,e.aiDisplayMaster.length=0,e.aiDisplay.length=0}function M(e,t,i){for(var o=-1,s=0,l=e.length;s<l;s++)e[s]==t?o=s:e[s]>t&&e[s]--;-1!=o&&i===n&&e.splice(o,1)}function P(e,t,i,o){var s,l,r=e.aoData[t],a=function(i,n){for(;i.childNodes.length;)i.removeChild(i.firstChild);i.innerHTML=k(e,t,n,"display")};if("dom"!==i&&(i&&"auto"!==i||"dom"!==r.src)){var c=r.anCells;if(c)if(o!==n)a(c[o],o);else for(s=0,l=c.length;s<l;s++)a(c[s],s)}else r._aData=D(e,r,o,o===n?n:r._aData).data;r._aSortData=null,r._aFilterData=null;var u=e.aoColumns;if(o!==n)u[o].sType=null;else{for(s=0,l=u.length;s<l;s++)u[s].sType=null;O(r)}}function D(t,i,o,s){var l,r,a,c=[],u=i.firstChild,d=0,h=t.aoColumns,p=t._rowReadObject;s=s||p?{}:[];var m=function(e,t){if("string"==typeof e){var i=e.indexOf("@");if(-1!==i){var n=e.substring(i+1);I(e)(s,t.getAttribute(n))}}},f=function(t){if(o===n||o===d)if(r=h[d],a=e.trim(t.innerHTML),r&&r._bAttrSrc){var i=I(r.mData._);i(s,a),m(r.mData.sort,t),m(r.mData.type,t),m(r.mData.filter,t)}else p?(r._setter||(r._setter=I(r.mData)),r._setter(s,a)):s[d]=a;d++};if(u)for(;u;)l=u.nodeName.toUpperCase(),"TD"!=l&&"TH"!=l||(f(u),c.push(u)),u=u.nextSibling;else{c=i.anCells;for(var g=0,b=c.length;g<b;g++)f(c[g])}return{"data":s,"cells":c}}function F(e,t,n,o){var s,l,r,a,c,u=e.aoData[t],d=u._aData,h=[];if(null===u.nTr){for(s=n||i.createElement("tr"),u.nTr=s,u.anCells=h,s._DT_RowIndex=t,O(u),a=0,c=e.aoColumns.length;a<c;a++)r=e.aoColumns[a],l=n?o[a]:i.createElement(r.sCellType),h.push(l),n&&!r.mRender&&r.mData===a||(l.innerHTML=k(e,t,a,"display")),r.sClass&&(l.className+=" "+r.sClass),r.bVisible&&!n?s.appendChild(l):!r.bVisible&&n&&l.parentNode.removeChild(l),r.fnCreatedCell&&r.fnCreatedCell.call(e.oInstance,l,k(e,t,a),d,t,a);je(e,"aoRowCreatedCallback",null,[s,d,t])}}function O(t){var i=t.nTr,n=t._aData;if(i){if(n.DT_RowId&&(i.id=n.DT_RowId),n.DT_RowClass){var o=n.DT_RowClass.split(" ");t.__rowc=t.__rowc?bt(t.__rowc.concat(o)):o,e(i).removeClass(t.__rowc.join(" ")).addClass(n.DT_RowClass)}n.DT_RowData&&e(i).data(n.DT_RowData)}}function N(t){var i,n,o,s,l,r=t.nTHead,a=t.nTFoot,c=0===e("th, td",r).length,u=t.oClasses,d=t.aoColumns;for(c&&(s=e("<tr/>").appendTo(r)),i=0,n=d.length;i<n;i++)l=d[i],o=e(l.nTh).addClass(l.sClass),c&&o.appendTo(s),t.oFeatures.bSort&&(o.addClass(l.sSortingClass),!1!==l.bSortable&&(o.attr("tabindex",t.iTabIndex).attr("aria-controls",t.sTableId),Ee(t,l.nTh,i))),l.sTitle!=o.html()&&o.text(l.sTitle),ze(t,"header")(t,o,l,u);if(c&&j(t.aoHeader,r),e(r).find(">tr>th, >tr>td").addClass(u.sHeaderTH),e(a).find(">tr>th, >tr>td").addClass(u.sFooterTH),null!==a){var h=t.aoFooter[0];for(i=0,n=h.length;i<n;i++)l=d[i],l.nTf=h[i].cell,l.sClass&&e(l.nTf).addClass(l.sClass)}}function R(t,i,o){var s,l,r,a,c,u,d,h,p,m=[],f=[],g=t.aoColumns.length;if(i){for(o===n&&(o=!1),s=0,l=i.length;s<l;s++){for(m[s]=i[s].slice(),m[s].nTr=i[s].nTr,r=g-1;r>=0;r--)t.aoColumns[r].bVisible||o||m[s].splice(r,1);f.push([])}for(s=0,l=m.length;s<l;s++){if(d=m[s].nTr)for(;u=d.firstChild;)d.removeChild(u);for(r=0,a=m[s].length;r<a;r++)if(h=1,p=1,f[s][r]===n){for(d.appendChild(m[s][r].cell),f[s][r]=1;m[s+h]!==n&&m[s][r].cell==m[s+h][r].cell;)f[s+h][r]=1,h++;for(;m[s][r+p]!==n&&m[s][r].cell==m[s][r+p].cell;){for(c=0;c<h;c++)f[s+c][r+p]=1;p++}var b=e(m[s][r].cell);1!==h&&b.attr("rowspan",h),1!==p&&b.attr("colspan",p)}}}}function B(t){var i=je(t,"aoPreDrawCallback","preDraw",[t]);if(-1!==e.inArray(!1,i))return void me(t,!1);var o=[],s=0,l=t.asStripeClasses,r=l.length,a=(t.aoOpenRows.length,t.oLanguage),c=t.iInitDisplayStart,u="ssp"==Ue(t),d=t.aiDisplay;t.bDrawing=!0,c!==n&&-1!==c&&(t._iDisplayStart=u?c:c>=t.fnRecordsDisplay()?0:c,t.iInitDisplayStart=-1);var h=t._iDisplayStart,p=t.fnDisplayEnd();if(t.bDeferLoading)t.bDeferLoading=!1,t.iDraw++,me(t,!1);else if(u){if(!t.bDestroying&&!U(t))return}else t.iDraw++;if(0!==d.length)for(var m=u?0:h,f=u?t.aoData.length:p,b=m;b<f;b++){var v=d[b],w=t.aoData[v];null===w.nTr&&F(t,v);var y=w.nTr;if(0!==r){var C=l[s%r];w._sRowStripe!=C&&(e(y).removeClass(w._sRowStripe).addClass(C),w._sRowStripe=C)}je(t,"aoRowCallback",null,[y,w._aData,s,b]),o.push(y),s++}else{var _=a.sZeroRecords;1==t.iDraw&&"ajax"==Ue(t)?_=a.sLoadingRecords:a.sEmptyTable&&0===t.fnRecordsTotal()&&(_=a.sEmptyTable),o[0]=e("<tr/>",{"class":r?l[0]:""}).append(e("<td />",{"style":"vertical-align: top;","colSpan":g(t),"class":t.oClasses.sRowEmpty}).html(_))[0]}je(t,"aoHeaderCallback","header",[e(t.nTHead).children("tr")[0],A(t),h,p,d]),je(t,"aoFooterCallback","footer",[e(t.nTFoot).children("tr")[0],A(t),h,p,d]);var x=e(t.nTBody);x.children().detach(),x.append(e(o)),je(t,"aoDrawCallback","draw",[t]),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1}function L(e,t){var i=e.oFeatures,n=i.bSort,o=i.bFilter;n&&Se(e),o?J(e,e.oPreviousSearch):e.aiDisplay=e.aiDisplayMaster.slice(),!0!==t&&(e._iDisplayStart=0),e._drawHold=t,B(e),e._drawHold=!1}function $(t){var i=t.oClasses,n=e(t.nTable),o=e("<div/>").insertBefore(n),s=t.oFeatures,l=e("<div/>",{"id":t.sTableId+"_wrapper","class":i.sWrapper+(t.nTFoot?"":" "+i.sNoFooter)});t.nHolding=o[0],t.nTableWrapper=l[0],t.nTableReinsertBefore=t.nTable.nextSibling;for(var r,a,c,u,d,h,p=t.sDom.split(""),m=0;m<p.length;m++){if(r=null,"<"==(a=p[m])){if(c=e("<div/>")[0],"'"==(u=p[m+1])||'"'==u){for(d="",h=2;p[m+h]!=u;)d+=p[m+h],h++;if("H"==d?d=i.sJUIHeader:"F"==d&&(d=i.sJUIFooter),-1!=d.indexOf(".")){var f=d.split(".");c.id=f[0].substr(1,f[0].length-1),c.className=f[1]}else"#"==d.charAt(0)?c.id=d.substr(1,d.length-1):c.className=d;m+=h}l.append(c),l=e(c)}else if(">"==a)l=l.parent();else if("l"==a&&s.bPaginate&&s.bLengthChange)r=ue(t);else if("f"==a&&s.bFilter)r=K(t);else if("r"==a&&s.bProcessing)r=pe(t);else if("t"==a)r=fe(t);else if("i"==a&&s.bInfo)r=oe(t);else if("p"==a&&s.bPaginate)r=de(t);else if(0!==Ke.ext.feature.length)for(var g=Ke.ext.feature,b=0,v=g.length;b<v;b++)if(a==g[b].cFeature){r=g[b].fnInit(t);break}if(r){var w=t.aanFeatures;w[a]||(w[a]=[]),w[a].push(r),l.append(r)}}o.replaceWith(l)}function j(t,i){var n,o,s,l,r,a,c,u,d,h,p,m=e(i).children("tr");for(t.splice(0,t.length),s=0,a=m.length;s<a;s++)t.push([]);for(s=0,a=m.length;s<a;s++)for(n=m[s],u=0,o=n.firstChild;o;){if("TD"==o.nodeName.toUpperCase()||"TH"==o.nodeName.toUpperCase())for(d=1*o.getAttribute("colspan"),h=1*o.getAttribute("rowspan"),d=d&&0!==d&&1!==d?d:1,h=h&&0!==h&&1!==h?h:1,c=function(e,t,i){for(var n=e[t];n[i];)i++;return i}(t,s,u),p=1===d,r=0;r<d;r++)for(l=0;l<h;l++)t[s+l][c+r]={"cell":o,"unique":p},t[s+l].nTr=n;o=o.nextSibling}}function H(e,t,i){var n=[];i||(i=e.aoHeader,t&&(i=[],j(i,t)));for(var o=0,s=i.length;o<s;o++)for(var l=0,r=i[o].length;l<r;l++)!i[o][l].unique||n[l]&&e.bSortCellsTop||(n[l]=i[o][l].cell);return n}function z(t,i,n){if(je(t,"aoServerParams","serverParams",[i]),i&&e.isArray(i)){var o={},s=/(.*?)\[\]$/;e.each(i,function(e,t){var i=t.name.match(s);if(i){var n=i[0];o[n]||(o[n]=[]),o[n].push(t.value)}else o[t.name]=t.value}),i=o}var l,r=t.ajax,a=t.oInstance;if(e.isPlainObject(r)&&r.data){l=r.data;var c=e.isFunction(l)?l(i):l;i=e.isFunction(l)&&c?c:e.extend(!0,i,c),delete r.data}var u={"data":i,"success":function(e){var i=e.error||e.sError;i&&t.oApi._fnLog(t,0,i),t.json=e,je(t,null,"xhr",[t,e]),n(e)},"dataType":"json","cache":!1,"type":t.sServerMethod,"error":function(e,i,n){var o=t.oApi._fnLog;"parsererror"==i?o(t,0,"Invalid JSON response",1):4===e.readyState&&o(t,0,"Ajax error",7),me(t,!1)}};t.oAjaxData=i,je(t,null,"preXhr",[t,i]),t.fnServerData?t.fnServerData.call(a,t.sAjaxSource,e.map(i,function(e,t){return{"name":t,"value":e}}),n,t):t.sAjaxSource||"string"==typeof r?t.jqXHR=e.ajax(e.extend(u,{"url":r||t.sAjaxSource})):e.isFunction(r)?t.jqXHR=r.call(a,i,n,t):(t.jqXHR=e.ajax(e.extend(u,r)),r.data=l)}function U(e){return!e.bAjaxDataGet||(e.iDraw++,me(e,!0),z(e,q(e),function(t){G(e,t)}),!1)}function q(t){var i,n,o,s,l=t.aoColumns,r=l.length,a=t.oFeatures,c=t.oPreviousSearch,u=t.aoPreSearchCols,d=[],h=Ve(t),p=t._iDisplayStart,m=!1!==a.bPaginate?t._iDisplayLength:-1,f=function(e,t){d.push({"name":e,"value":t})};f("sEcho",t.iDraw),f("iColumns",r),f("sColumns",ht(l,"sName").join(",")),f("iDisplayStart",p),f("iDisplayLength",m);var g={"draw":t.iDraw,"columns":[],"order":[],"start":p,"length":m,"search":{"value":c.sSearch,"regex":c.bRegex}};for(i=0;i<r;i++)o=l[i],s=u[i],n="function"==typeof o.mData?"function":o.mData,g.columns.push({"data":n,"name":o.sName,"searchable":o.bSearchable,"orderable":o.bSortable,"search":{"value":s.sSearch,"regex":s.bRegex}}),f("mDataProp_"+i,n),a.bFilter&&(f("sSearch_"+i,s.sSearch),f("bRegex_"+i,s.bRegex),f("bSearchable_"+i,o.bSearchable)),a.bSort&&f("bSortable_"+i,o.bSortable);a.bFilter&&(f("sSearch",c.sSearch),f("bRegex",c.bRegex)),a.bSort&&(e.each(h,function(e,t){g.order.push({"column":t.col,"dir":t.dir}),f("iSortCol_"+e,t.col),f("sSortDir_"+e,t.dir)}),f("iSortingCols",h.length));var b=Ke.ext.legacy.ajax;return null===b?t.sAjaxSource?d:g:b?d:g}function G(e,t){var i=function(e,i){return t[e]!==n?t[e]:t[i]},o=i("sEcho","draw"),s=i("iTotalRecords","recordsTotal"),l=i("iTotalDisplayRecords","recordsFiltered");if(o){if(1*o<e.iDraw)return;e.iDraw=1*o}E(e),e._iRecordsTotal=parseInt(s,10),e._iRecordsDisplay=parseInt(l,10);for(var r=W(e,t),a=0,c=r.length;a<c;a++)y(e,r[a]);e.aiDisplay=e.aiDisplayMaster.slice(),e.bAjaxDataGet=!1,B(e),e._bInitComplete||ae(e,t),e.bAjaxDataGet=!0,me(e,!1)}function W(t,i){var o=e.isPlainObject(t.ajax)&&t.ajax.dataSrc!==n?t.ajax.dataSrc:t.sAjaxDataProp;return"data"===o?i.aaData||i[o]:""!==o?S(o)(i):i}function K(t){var n=t.oClasses,o=t.sTableId,s=t.oLanguage,l=t.oPreviousSearch,r=t.aanFeatures,a='<input type="search" class="'+n.sFilterInput+'"/>',c=s.sSearch;c=c.match(/_INPUT_/)?c.replace("_INPUT_",a):c+a;var u=e("<div/>",{"id":r.f?null:o+"_filter","class":n.sFilter}).append(e("<label/>").append(c)),d=function(){var e=(r.f,this.value?this.value:"");e!=l.sSearch&&(J(t,{"sSearch":e,"bRegex":l.bRegex,"bSmart":l.bSmart,"bCaseInsensitive":l.bCaseInsensitive}),t._iDisplayStart=0,B(t))},h=null!==t.searchDelay?t.searchDelay:"ssp"===Ue(t)?400:0,p=e("input",u).val(l.sSearch).attr("placeholder",s.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",h?we(d,h):d).bind("keypress.DT",function(e){if(13==e.keyCode)return!1}).attr("aria-controls",o);return e(t.nTable).on("search.dt.DT",function(e,n){if(t===n)try{p[0]!==i.activeElement&&p.val(l.sSearch)}catch(e){}}),
u[0]}function J(e,t,i){var o=e.oPreviousSearch,s=e.aoPreSearchCols,l=function(e){o.sSearch=e.sSearch,o.bRegex=e.bRegex,o.bSmart=e.bSmart,o.bCaseInsensitive=e.bCaseInsensitive},r=function(e){return e.bEscapeRegex!==n?!e.bEscapeRegex:e.bRegex};if(v(e),"ssp"!=Ue(e)){Y(e,t.sSearch,i,r(t),t.bSmart,t.bCaseInsensitive),l(t);for(var a=0;a<s.length;a++)Q(e,s[a].sSearch,a,r(s[a]),s[a].bSmart,s[a].bCaseInsensitive);X(e)}else l(t);e.bFiltered=!0,je(e,null,"search",[e])}function X(e){for(var t,i,n=Ke.ext.search,o=e.aiDisplay,s=0,l=n.length;s<l;s++){for(var r=[],a=0,c=o.length;a<c;a++)i=o[a],t=e.aoData[i],n[s](e,t._aFilterData,i,t._aData,a)&&r.push(i);o.length=0,o.push.apply(o,r)}}function Q(e,t,i,n,o,s){if(""!==t)for(var l,r=e.aiDisplay,a=Z(t,n,o,s),c=r.length-1;c>=0;c--)l=e.aoData[r[c]]._aFilterData[i],a.test(l)||r.splice(c,1)}function Y(e,t,i,n,o,s){var l,r,a,c=Z(t,n,o,s),u=e.oPreviousSearch.sSearch,d=e.aiDisplayMaster;if(0!==Ke.ext.search.length&&(i=!0),r=te(e),t.length<=0)e.aiDisplay=d.slice();else for((r||i||u.length>t.length||0!==t.indexOf(u)||e.bSorted)&&(e.aiDisplay=d.slice()),l=e.aiDisplay,a=l.length-1;a>=0;a--)c.test(e.aoData[l[a]]._sFilterRow)||l.splice(a,1)}function Z(t,i,n,o){if(t=i?t:ee(t),n){t="^(?=.*?"+e.map(t.match(/"[^"]+"|[^ ]+/g)||"",function(e){if('"'===e.charAt(0)){var t=e.match(/^"(.*)"$/);e=t?t[1]:e}return e.replace('"',"")}).join(")(?=.*?")+").*$"}return new RegExp(t,o?"i":"")}function ee(e){return e.replace(ot,"\\$1")}function te(e){var t,i,n,o,s,l,r,a,c=e.aoColumns,u=Ke.ext.type.search,d=!1;for(i=0,o=e.aoData.length;i<o;i++)if(a=e.aoData[i],!a._aFilterData){for(l=[],n=0,s=c.length;n<s;n++)t=c[n],t.bSearchable?(r=k(e,i,n,"filter"),u[t.sType]&&(r=u[t.sType](r)),null===r&&(r=""),"string"!=typeof r&&r.toString&&(r=r.toString())):r="",r.indexOf&&-1!==r.indexOf("&")&&(Ct.innerHTML=r,r=_t?Ct.textContent:Ct.innerText),r.replace&&(r=r.replace(/[\r\n]/g,"")),l.push(r);a._aFilterData=l,a._sFilterRow=l.join("  "),d=!0}return d}function ie(e){return{"search":e.sSearch,"smart":e.bSmart,"regex":e.bRegex,"caseInsensitive":e.bCaseInsensitive}}function ne(e){return{"sSearch":e.search,"bSmart":e.smart,"bRegex":e.regex,"bCaseInsensitive":e.caseInsensitive}}function oe(t){var i=t.sTableId,n=t.aanFeatures.i,o=e("<div/>",{"class":t.oClasses.sInfo,"id":n?null:i+"_info"});return n||(t.aoDrawCallback.push({"fn":se,"sName":"information"}),o.attr("role","status").attr("aria-live","polite"),e(t.nTable).attr("aria-describedby",i+"_info")),o[0]}function se(t){var i=t.aanFeatures.i;if(0!==i.length){var n=t.oLanguage,o=t._iDisplayStart+1,s=t.fnDisplayEnd(),l=t.fnRecordsTotal(),r=t.fnRecordsDisplay(),a=r?n.sInfo:n.sInfoEmpty;r!==l&&(a+=" "+n.sInfoFiltered),a+=n.sInfoPostFix,a=le(t,a);var c=n.fnInfoCallback;null!==c&&(a=c.call(t.oInstance,t,o,s,l,r,a)),e(i).html(a)}}function le(e,t){var i=e.fnFormatNumber,n=e._iDisplayStart+1,o=e._iDisplayLength,s=e.fnRecordsDisplay(),l=-1===o;return t.replace(/_START_/g,i.call(e,n)).replace(/_END_/g,i.call(e,e.fnDisplayEnd())).replace(/_MAX_/g,i.call(e,e.fnRecordsTotal())).replace(/_TOTAL_/g,i.call(e,s)).replace(/_PAGE_/g,i.call(e,l?1:Math.ceil(n/o))).replace(/_PAGES_/g,i.call(e,l?1:Math.ceil(s/o)))}function re(e){var t,i,n,o=e.iInitDisplayStart,s=e.aoColumns,l=e.oFeatures;if(!e.bInitialised)return void setTimeout(function(){re(e)},200);for($(e),N(e),R(e,e.aoHeader),R(e,e.aoFooter),me(e,!0),l.bAutoWidth&&ve(e),t=0,i=s.length;t<i;t++)n=s[t],n.sWidth&&(n.nTh.style.width=ke(n.sWidth));L(e);var r=Ue(e);"ssp"!=r&&("ajax"==r?z(e,[],function(i){var n=W(e,i);for(t=0;t<n.length;t++)y(e,n[t]);e.iInitDisplayStart=o,L(e),me(e,!1),ae(e,i)},e):(me(e,!1),ae(e)))}function ae(e,t){e._bInitComplete=!0,t&&p(e),je(e,"aoInitComplete","init",[e,t])}function ce(e,t){var i=parseInt(t,10);e._iDisplayLength=i,He(e),je(e,null,"length",[e,i])}function ue(t){for(var i=t.oClasses,n=t.sTableId,o=t.aLengthMenu,s=e.isArray(o[0]),l=s?o[0]:o,r=s?o[1]:o,a=e("<select/>",{"name":n+"_length","aria-controls":n,"class":i.sLengthSelect}),c=0,u=l.length;c<u;c++)a[0][c]=new Option(r[c],l[c]);var d=e("<div><label/></div>").addClass(i.sLength);return t.aanFeatures.l||(d[0].id=n+"_length"),d.children().append(t.oLanguage.sLengthMenu.replace("_MENU_",a[0].outerHTML)),e("select",d).val(t._iDisplayLength).bind("change.DT",function(i){ce(t,e(this).val()),B(t)}),e(t.nTable).bind("length.dt.DT",function(i,n,o){t===n&&e("select",d).val(o)}),d[0]}function de(t){var i=t.sPaginationType,n=Ke.ext.pager[i],o="function"==typeof n,s=function(e){B(e)},l=e("<div/>").addClass(t.oClasses.sPaging+i)[0],r=t.aanFeatures;return o||n.fnInit(t,l,s),r.p||(l.id=t.sTableId+"_paginate",t.aoDrawCallback.push({"fn":function(e){if(o){var t,i,l=e._iDisplayStart,a=e._iDisplayLength,c=e.fnRecordsDisplay(),u=-1===a,d=u?0:Math.ceil(l/a),h=u?1:Math.ceil(c/a),p=n(d,h);for(t=0,i=r.p.length;t<i;t++)ze(e,"pageButton")(e,r.p[t],t,p,d,h)}else n.fnUpdate(e,s)},"sName":"pagination"})),l}function he(e,t,i){var n=e._iDisplayStart,o=e._iDisplayLength,s=e.fnRecordsDisplay();0===s||-1===o?n=0:"number"==typeof t?(n=t*o)>s&&(n=0):"first"==t?n=0:"previous"==t?(n=o>=0?n-o:0)<0&&(n=0):"next"==t?n+o<s&&(n+=o):"last"==t?n=Math.floor((s-1)/o)*o:Ne(e,0,"Unknown paging action: "+t,5);var l=e._iDisplayStart!==n;return e._iDisplayStart=n,l&&(je(e,null,"page",[e]),i&&B(e)),l}function pe(t){return e("<div/>",{"id":t.aanFeatures.r?null:t.sTableId+"_processing","class":t.oClasses.sProcessing}).html(t.oLanguage.sProcessing).insertBefore(t.nTable)[0]}function me(t,i){t.oFeatures.bProcessing&&e(t.aanFeatures.r).css("display",i?"block":"none"),je(t,null,"processing",[t,i])}function fe(t){var i=e(t.nTable),n=t.oScroll;if(""===n.sX&&""===n.sY)return t.nTable;var o=n.sX,s=n.sY,l=t.oClasses,r=i.children("caption"),a=r.length?r[0]._captionSide:null,c=e(i[0].cloneNode(!1)),u=e(i[0].cloneNode(!1)),d=i.children("tfoot"),h="<div/>",p=function(e){return e?ke(e):null};n.sX&&"100%"===i.attr("width")&&i.removeAttr("width"),d.length||(d=null);var m=e(h,{"class":l.sScrollWrapper}).append(e(h,{"class":l.sScrollHead}).css({"overflow":"hidden","position":"relative","border":0,"width":o?p(o):"100%"}).append(e(h,{"class":l.sScrollHeadInner}).css({"box-sizing":"content-box","width":n.sXInner||"100%"}).append(c.removeAttr("id").css("margin-left",0).append("top"===a?r:null).append(i.children("thead"))))).append(e(h,{"class":l.sScrollBody}).css({"overflow":"auto","height":p(s),"width":p(o)}).append(i));d&&m.append(e(h,{"class":l.sScrollFoot}).css({"overflow":"hidden","border":0,"width":o?p(o):"100%"}).append(e(h,{"class":l.sScrollFootInner}).append(u.removeAttr("id").css("margin-left",0).append("bottom"===a?r:null).append(i.children("tfoot")))));var f=m.children(),g=f[0],b=f[1],v=d?f[2]:null;return o&&e(b).scroll(function(e){var t=this.scrollLeft;g.scrollLeft=t,d&&(v.scrollLeft=t)}),t.nScrollHead=g,t.nScrollBody=b,t.nScrollFoot=v,t.aoDrawCallback.push({"fn":ge,"sName":"scrolling"}),m[0]}function ge(t){var i,n,o,s,l,r,a,c,u,d=t.oScroll,h=d.sX,p=d.sXInner,f=d.sY,g=d.iBarWidth,b=e(t.nScrollHead),v=b[0].style,w=b.children("div"),y=w[0].style,C=w.children("table"),_=t.nScrollBody,x=e(_),k=_.style,T=e(t.nScrollFoot),V=T.children("div"),S=V.children("table"),I=e(t.nTHead),A=e(t.nTable),E=A[0],M=E.style,P=t.nTFoot?e(t.nTFoot):null,D=t.oBrowser,F=D.bScrollOversize,O=[],N=[],R=[],B=function(e){var t=e.style;t.paddingTop="0",t.paddingBottom="0",t.borderTopWidth="0",t.borderBottomWidth="0",t.height=0};if(A.children("thead, tfoot").remove(),l=I.clone().prependTo(A),i=I.find("tr"),o=l.find("tr"),l.find("th, td").removeAttr("tabindex"),P&&(r=P.clone().prependTo(A),n=P.find("tr"),s=r.find("tr")),h||(k.width="100%",b[0].style.width="100%"),e.each(H(t,l),function(e,i){a=m(t,e),i.style.width=t.aoColumns[a].sWidth}),P&&be(function(e){e.style.width=""},s),d.bCollapse&&""!==f&&(k.height=x[0].offsetHeight+I[0].offsetHeight+"px"),u=A.outerWidth(),""===h?(M.width="100%",F&&(A.find("tbody").height()>_.offsetHeight||"scroll"==x.css("overflow-y"))&&(M.width=ke(A.outerWidth()-g))):""!==p?M.width=ke(p):u==x.width()&&x.height()<A.height()?(M.width=ke(u-g),A.outerWidth()>u-g&&(M.width=ke(u))):M.width=ke(u),u=A.outerWidth(),be(B,o),be(function(t){R.push(t.innerHTML),O.push(ke(e(t).css("width")))},o),be(function(e,t){e.style.width=O[t]},i),e(o).height(0),P&&(be(B,s),be(function(t){N.push(ke(e(t).css("width")))},s),be(function(e,t){e.style.width=N[t]},n),e(s).height(0)),be(function(e,t){e.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+R[t]+"</div>",e.style.width=O[t]},o),P&&be(function(e,t){e.innerHTML="",e.style.width=N[t]},s),A.outerWidth()<u?(c=_.scrollHeight>_.offsetHeight||"scroll"==x.css("overflow-y")?u+g:u,F&&(_.scrollHeight>_.offsetHeight||"scroll"==x.css("overflow-y"))&&(M.width=ke(c-g)),""!==h&&""===p||Ne(t,1,"Possible column misalignment",6)):c="100%",k.width=ke(c),v.width=ke(c),P&&(t.nScrollFoot.style.width=ke(c)),f||F&&(k.height=ke(E.offsetHeight+g)),f&&d.bCollapse){k.height=ke(f);var L=h&&E.offsetWidth>_.offsetWidth?g:0;E.offsetHeight<_.offsetHeight&&(k.height=ke(E.offsetHeight+L))}var $=A.outerWidth();C[0].style.width=ke($),y.width=ke($);var j=A.height()>_.clientHeight||"scroll"==x.css("overflow-y"),z="padding"+(D.bScrollbarLeft?"Left":"Right");y[z]=j?g+"px":"0px",P&&(S[0].style.width=ke($),V[0].style.width=ke($),V[0].style[z]=j?g+"px":"0px"),x.scroll(),!t.bSorted&&!t.bFiltered||t._drawHold||(_.scrollTop=0)}function be(e,t,i){for(var n,o,s=0,l=0,r=t.length;l<r;){for(n=t[l].firstChild,o=i?i[l].firstChild:null;n;)1===n.nodeType&&(i?e(n,o,s):e(n,s),s++),n=n.nextSibling,o=i?o.nextSibling:null;l++}}function ve(i){var n,o,s,l,r,a=i.nTable,c=i.aoColumns,u=i.oScroll,d=u.sY,h=u.sX,m=u.sXInner,f=c.length,v=b(i,"bVisible"),w=e("th",i.nTHead),y=a.getAttribute("width"),C=a.parentNode,_=!1;for(n=0;n<v.length;n++)o=c[v[n]],null!==o.sWidth&&(o.sWidth=ye(o.sWidthOrig,C),_=!0);if(_||h||d||f!=g(i)||f!=w.length){var x=e(a).clone().empty().css("visibility","hidden").removeAttr("id").append(e(i.nTHead).clone(!1)).append(e(i.nTFoot).clone(!1)).append(e("<tbody><tr/></tbody>"));x.find("tfoot th, tfoot td").css("width","");var k=x.find("tbody tr");for(w=H(i,x.find("thead")[0]),n=0;n<v.length;n++)o=c[v[n]],w[n].style.width=null!==o.sWidthOrig&&""!==o.sWidthOrig?ke(o.sWidthOrig):"";if(i.aoData.length)for(n=0;n<v.length;n++)s=v[n],o=c[s],e(_e(i,s)).clone(!1).append(o.sContentPadding).appendTo(k);if(x.appendTo(C),h&&m?x.width(m):h?(x.css("width","auto"),x.width()<C.offsetWidth&&x.width(C.offsetWidth)):d?x.width(C.offsetWidth):y&&x.width(y),Ce(i,x[0]),h){var T=0;for(n=0;n<v.length;n++)o=c[v[n]],r=e(w[n]).outerWidth(),T+=null===o.sWidthOrig?r:parseInt(o.sWidth,10)+r-e(w[n]).width();x.width(ke(T)),a.style.width=ke(T)}for(n=0;n<v.length;n++)o=c[v[n]],(l=e(w[n]).width())&&(o.sWidth=ke(l));a.style.width=ke(x.css("width")),x.remove()}else for(n=0;n<f;n++)c[n].sWidth=ke(w.eq(n).width());y&&(a.style.width=ke(y)),!y&&!h||i._reszEvt||(e(t).bind("resize.DT-"+i.sInstance,we(function(){p(i)})),i._reszEvt=!0)}function we(e,t){var i,o,s=t!==n?t:200;return function(){var t=this,l=+new Date,r=arguments;i&&l<i+s?(clearTimeout(o),o=setTimeout(function(){i=n,e.apply(t,r)},s)):i?(i=l,e.apply(t,r)):i=l}}function ye(t,n){if(!t)return 0;var o=e("<div/>").css("width",ke(t)).appendTo(n||i.body),s=o[0].offsetWidth;return o.remove(),s}function Ce(t,i){var n=t.oScroll;if(n.sX||n.sY){var o=n.sX?0:n.iBarWidth;i.style.width=ke(e(i).outerWidth()-o)}}function _e(t,i){var n=xe(t,i);if(n<0)return null;var o=t.aoData[n];return o.nTr?o.anCells[i]:e("<td/>").html(k(t,n,i,"display"))[0]}function xe(e,t){for(var i,n=-1,o=-1,s=0,l=e.aoData.length;s<l;s++)i=k(e,s,t,"display")+"",i=i.replace(xt,""),i.length>n&&(n=i.length,o=s);return o}function ke(e){return null===e?"0px":"number"==typeof e?e<0?"0px":e+"px":e.match(/\d$/)?e+"px":e}function Te(){if(!Ke.__scrollbarWidth){var t=e("<p/>").css({"width":"100%","height":200,"padding":0})[0],i=e("<div/>").css({"position":"absolute","top":0,"left":0,"width":200,"height":150,"padding":0,"overflow":"hidden","visibility":"hidden"}).append(t).appendTo("body"),n=t.offsetWidth;i.css("overflow","scroll");var o=t.offsetWidth;n===o&&(o=i[0].clientWidth),i.remove(),Ke.__scrollbarWidth=n-o}return Ke.__scrollbarWidth}function Ve(t){var i,o,s,l,r,a,c,u=[],d=t.aoColumns,h=t.aaSortingFixed,p=e.isPlainObject(h),m=[],f=function(t){t.length&&!e.isArray(t[0])?m.push(t):m.push.apply(m,t)};for(e.isArray(h)&&f(h),p&&h.pre&&f(h.pre),f(t.aaSorting),p&&h.post&&f(h.post),i=0;i<m.length;i++)for(c=m[i][0],l=d[c].aDataSort,o=0,s=l.length;o<s;o++)r=l[o],a=d[r].sType||"string",m[i]._idx===n&&(m[i]._idx=e.inArray(m[i][1],d[r].asSorting)),u.push({"src":c,"col":r,"dir":m[i][1],"index":m[i]._idx,"type":a,"formatter":Ke.ext.type.order[a+"-pre"]});return u}function Se(e){var t,i,n,o,s,l=[],r=Ke.ext.type.order,a=e.aoData,c=(e.aoColumns,0),u=e.aiDisplayMaster;for(v(e),s=Ve(e),t=0,i=s.length;t<i;t++)o=s[t],o.formatter&&c++,Pe(e,o.col);if("ssp"!=Ue(e)&&0!==s.length){for(t=0,n=u.length;t<n;t++)l[u[t]]=t;c===s.length?u.sort(function(e,t){var i,n,o,r,c,u=s.length,d=a[e]._aSortData,h=a[t]._aSortData;for(o=0;o<u;o++)if(c=s[o],i=d[c.col],n=h[c.col],0!==(r=i<n?-1:i>n?1:0))return"asc"===c.dir?r:-r;return i=l[e],n=l[t],i<n?-1:i>n?1:0}):u.sort(function(e,t){var i,n,o,c,u,d,h=s.length,p=a[e]._aSortData,m=a[t]._aSortData;for(o=0;o<h;o++)if(u=s[o],i=p[u.col],n=m[u.col],d=r[u.type+"-"+u.dir]||r["string-"+u.dir],0!==(c=d(i,n)))return c;return i=l[e],n=l[t],i<n?-1:i>n?1:0})}e.bSorted=!0}function Ie(e){for(var t,i,o,s=e.aoColumns,l=Ve(e),r=e.oLanguage.oAria,a=e.oLanguage.oTooltip,c=0,u=s.length;c<u;c++){var d=s[c],h=d.asSorting,p=d.sTitle.replace(/<.*?>/g,"").trim(),m=d.nTh;if(m.removeAttribute("aria-sort"),d.bSortable){var f=n;l.length>0&&l[0].col==c?(f=l[0].dir,o=h[l[0].index+1]||h[0]):o=h[0],t="asc"===f?r.sSortedAscending:"desc"===f?r.sSortedDescending:"{0}",t=t.replace(/\{0\}/g,p),i="asc"===o?a.sSortAscending:"desc"===o?a.sSortDescending:a.sIsUnsorted,i=i.replace(/\{0\}/g,p),m.setAttribute("data-csui-column-current-sort-dir",f),m.setAttribute("data-csui-column-next-sort-dir",o)}else t=p,i=p;t&&t.length>0&&m.setAttribute("aria-label",t),i&&i.length>0&&m.setAttribute("title",i)}}function Ae(t,i,o,s){var l,r=t.aoColumns[i],a=t.aaSorting,c=r.asSorting,u=function(t,i){var o=t._idx;return o===n&&(o=e.inArray(t[1],c)),o+1<c.length?o+1:i?null:0};if("number"==typeof a[0]&&(a=t.aaSorting=[a]),o&&t.oFeatures.bSortMulti){var d=e.inArray(i,ht(a,"0"));-1!==d?(l=u(a[d],!0),null===l?a.splice(d,1):(a[d][1]=c[l],a[d]._idx=l)):(a.push([i,c[0],0]),a[a.length-1]._idx=0)}else a.length&&a[0][0]==i?(l=u(a[0]),a.length=1,a[0][1]=c[l],a[0]._idx=l):(a.length=0,a.push([i,c[0]]),a[0]._idx=0);L(t),"function"==typeof s&&s(t)}function Ee(e,t,i,n){var o=e.aoColumns[i];Le(t,{},function(t){!1!==o.bSortable&&(e.oFeatures.bProcessing?(me(e,!0),setTimeout(function(){Ae(e,i,t.shiftKey,n),"ssp"!==Ue(e)&&me(e,!1)},0)):Ae(e,i,t.shiftKey,n))})}function Me(t){var i,n,o,s=t.aLastSort,l=t.oClasses.sSortColumn,r=Ve(t),a=t.oFeatures;if(a.bSort&&a.bSortClasses){for(i=0,n=s.length;i<n;i++)o=s[i].src,e(ht(t.aoData,"anCells",o)).removeClass(l+(i<2?i+1:3));for(i=0,n=r.length;i<n;i++)o=r[i].src,e(ht(t.aoData,"anCells",o)).addClass(l+(i<2?i+1:3))}t.aLastSort=r}function Pe(e,t){var i,n=e.aoColumns[t],o=Ke.ext.order[n.sSortDataType];o&&(i=o.call(e.oInstance,e,t,f(e,t)));for(var s,l,r=Ke.ext.type.order[n.sType+"-pre"],a=0,c=e.aoData.length;a<c;a++)s=e.aoData[a],s._aSortData||(s._aSortData=[]),s._aSortData[t]&&!o||(l=o?i[a]:k(e,a,t,"sort"),s._aSortData[t]=r?r(l):l)}function De(t){if(t.oFeatures.bStateSave&&!t.bDestroying){var i={"time":+new Date,"start":t._iDisplayStart,"length":t._iDisplayLength,"order":e.extend(!0,[],t.aaSorting),"search":ie(t.oPreviousSearch),"columns":e.map(t.aoColumns,function(e,i){return{"visible":e.bVisible,"search":ie(t.aoPreSearchCols[i])}})};je(t,"aoStateSaveParams","stateSaveParams",[t,i]),t.oSavedState=i,t.fnStateSaveCallback.call(t.oInstance,t,i)}}function Fe(t,i){var n,o,s=t.aoColumns;if(t.oFeatures.bStateSave){var l=t.fnStateLoadCallback.call(t.oInstance,t);if(l&&l.time){var r=je(t,"aoStateLoadParams","stateLoadParams",[t,l]);if(-1===e.inArray(!1,r)){var a=t.iStateDuration;if(!(a>0&&l.time<+new Date-1e3*a)&&s.length===l.columns.length){for(t.oLoadedState=e.extend(!0,{},l),t._iDisplayStart=l.start,t.iInitDisplayStart=l.start,t._iDisplayLength=l.length,t.aaSorting=[],e.each(l.order,function(e,i){t.aaSorting.push(i[0]>=s.length?[0,i[1]]:i)}),e.extend(t.oPreviousSearch,ne(l.search)),n=0,o=l.columns.length;n<o;n++){var c=l.columns[n];s[n].bVisible=c.visible,e.extend(t.aoPreSearchCols[n],ne(c.search))}je(t,"aoStateLoaded","stateLoaded",[t,l])}}}}}function Oe(t){var i=Ke.settings,n=e.inArray(t,ht(i,"nTable"));return-1!==n?i[n]:null}function Ne(e,i,n,o){if(n="DataTables warning: "+(null!==e?"table id="+e.sTableId+" - ":"")+n,o&&(n+=". For more information about this error, please see http://datatables.net/tn/"+o),i)t.console&&console.log&&console.log(n);else{var s=Ke.ext;if("alert"!=(s.sErrMode||s.errMode))throw new Error(n);alert(n)}}function Re(t,i,o,s){if(e.isArray(o))return void e.each(o,function(n,o){e.isArray(o)?Re(t,i,o[0],o[1]):Re(t,i,o)});s===n&&(s=o),i[o]!==n&&(t[s]=i[o])}function Be(t,i,n){var o;for(var s in i)i.hasOwnProperty(s)&&(o=i[s],e.isPlainObject(o)?(e.isPlainObject(t[s])||(t[s]={}),e.extend(!0,t[s],o)):n&&"data"!==s&&"aaData"!==s&&e.isArray(o)?t[s]=o.slice():t[s]=o);return t}function Le(t,i,n){e(t).on("click.DT",i,function(e){t.blur(),n(e)}).on("keypress.DT",i,function(e){13===e.which&&(e.preventDefault(),n(e))}).on("selectstart.DT",function(){return!1})}function $e(e,t,i,n){i&&e[t].push({"fn":i,"sName":n})}function je(t,i,n,o){var s=[];return i&&(s=e.map(t[i].slice().reverse(),function(e,i){return e.fn.apply(t.oInstance,o)})),null!==n&&e(t.nTable).trigger(n+".dt",o),s}function He(e){var t=e._iDisplayStart,i=e.fnDisplayEnd(),n=e._iDisplayLength;t>=i&&(t=i-n),t-=t%n,(-1===n||t<0)&&(t=0),e._iDisplayStart=t}function ze(t,i){var n=t.renderer,o=Ke.ext.renderer[i];return e.isPlainObject(n)&&n[i]?o[n[i]]||o._:"string"==typeof n?o[n]||o._:o._}function Ue(e){return e.oFeatures.bServerSide?"ssp":e.ajax||e.sAjaxSource?"ajax":"dom"}function qe(e,t){var i=[],n=zt.numbers_length,o=Math.floor(n/2);return t<=n?i=mt(0,t):e<=o?(i=mt(0,n-2),i.push("ellipsis"),i.push(t-1)):e>=t-1-o?(i=mt(t-(n-2),t),i.splice(0,0,"ellipsis"),i.splice(0,0,0)):(i=mt(e-1,e+2),i.push("ellipsis"),i.push(t-1),i.splice(0,0,"ellipsis"),i.splice(0,0,0)),i.DT_el="span",i}function Ge(t){e.each({"num":function(e){return Ut(e,t)},"num-fmt":function(e){return Ut(e,t,st)},"html-num":function(e){return Ut(e,t,tt)},"html-num-fmt":function(e){return Ut(e,t,tt,st)}},function(e,i){Je.type.order[e+t+"-pre"]=i,e.match(/^html\-/)&&(Je.type.search[e+t]=Je.type.search.html)})}function We(e){return function(){var t=[Oe(this[Ke.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return Ke.ext.internal[e].apply(this,t)}}var Ke,Je,Xe,Qe,Ye,Ze={},et=/[\r\n]/g,tt=/<.*?>/g,it=/^[\w\+\-]/,nt=/[\w\+\-]$/,ot=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),st=/[',$\xa3\u20ac\xa5%\u2009\u202F]/g,lt=function(e){return!e||!0===e||"-"===e},rt=function(e){var t=parseInt(e,10);return!isNaN(t)&&isFinite(e)?t:null},at=function(e,t){return Ze[t]||(Ze[t]=new RegExp(ee(t),"g")),"string"==typeof e&&"."!==t?e.replace(/\./g,"").replace(Ze[t],"."):e},ct=function(e,t,i){var n="string"==typeof e;return t&&n&&(e=at(e,t)),i&&n&&(e=e.replace(st,"")),lt(e)||!isNaN(parseFloat(e))&&isFinite(e)},ut=function(e){return lt(e)||"string"==typeof e},dt=function(e,t,i){return!!lt(e)||(ut(e)?!!ct(gt(e),t,i)||null:null)},ht=function(e,t,i){var o=[],s=0,l=e.length;if(i!==n)for(;s<l;s++)e[s]&&e[s][t]&&o.push(e[s][t][i]);else for(;s<l;s++)e[s]&&o.push(e[s][t]);return o},pt=function(e,t,i,o){var s=[],l=0,r=t.length;if(o!==n)for(;l<r;l++)e[t[l]][i]&&s.push(e[t[l]][i][o]);else for(;l<r;l++)s.push(e[t[l]][i]);return s},mt=function(e,t){var i,o=[];t===n?(t=0,i=e):(i=t,t=e);for(var s=t;s<i;s++)o.push(s);return o},ft=function(e){for(var t=[],i=0,n=e.length;i<n;i++)e[i]&&t.push(e[i]);return t},gt=function(e){return e.replace(tt,"")},bt=function(e){var t,i,n,o=[],s=e.length,l=0;e:for(i=0;i<s;i++){for(t=e[i],n=0;n<l;n++)if(o[n]===t)continue e;o.push(t),l++}return o},vt=function(e,t,i){e[t]!==n&&(e[i]=e[t])},wt=/\[.*?\]$/,yt=/\(\)$/,Ct=e("<div>")[0],_t=Ct.textContent!==n,xt=/<.*?>/g;Ke=function(t){this.$=function(e,t){return this.api(!0).$(e,t)},this._=function(e,t){return this.api(!0).rows(e,t).data()},this.api=function(e){return new Xe(e?Oe(this[Je.iApiIndex]):this)},this.fnAddData=function(t,i){var o=this.api(!0),s=e.isArray(t)&&(e.isArray(t[0])||e.isPlainObject(t[0]))?o.rows.add(t):o.row.add(t);return(i===n||i)&&o.draw(),s.flatten().toArray()},this.fnAdjustColumnSizing=function(e){var t=this.api(!0).columns.adjust(),i=t.settings()[0],o=i.oScroll;e===n||e?t.draw(!1):""===o.sX&&""===o.sY||ge(i)},this.fnClearTable=function(e){var t=this.api(!0).clear();(e===n||e)&&t.draw()},this.fnClose=function(e){this.api(!0).row(e).child.hide()},this.fnDeleteRow=function(e,t,i){var o=this.api(!0),s=o.rows(e),l=s.settings()[0],r=l.aoData[s[0][0]];return s.remove(),t&&t.call(this,l,r),(i===n||i)&&o.draw(),r},this.fnDestroy=function(e){this.api(!0).destroy(e)},this.fnDraw=function(e){this.api(!0).draw(!e)},this.fnFilter=function(e,t,i,o,s,l){var r=this.api(!0);null===t||t===n?r.search(e,i,o,l):r.column(t).search(e,i,o,l),r.draw()},this.fnGetData=function(e,t){var i=this.api(!0);if(e!==n){var o=e.nodeName?e.nodeName.toLowerCase():"";return t!==n||"td"==o||"th"==o?i.cell(e,t).data():i.row(e).data()||null}return i.data().toArray()},this.fnGetNodes=function(e){var t=this.api(!0);return e!==n?t.row(e).node():t.rows().nodes().flatten().toArray()},this.fnGetPosition=function(e){var t=this.api(!0),i=e.nodeName.toUpperCase();if("TR"==i)return t.row(e).index();if("TD"==i||"TH"==i){var n=t.cell(e).index();return[n.row,n.columnVisible,n.column]}return null},this.fnIsOpen=function(e){return this.api(!0).row(e).child.isShown()},this.fnOpen=function(e,t,i){return this.api(!0).row(e).child(t,i).show().child()[0]},this.fnPageChange=function(e,t){var i=this.api(!0).page(e);(t===n||t)&&i.draw(!1)},this.fnSetColumnVis=function(e,t,i){var o=this.api(!0).column(e).visible(t);(i===n||i)&&o.columns.adjust().draw()},this.fnSettings=function(){return Oe(this[Je.iApiIndex])},this.fnSort=function(e){this.api(!0).order(e).draw()},this.fnSortListener=function(e,t,i){this.api(!0).order.listener(e,t,i)},this.fnUpdate=function(e,t,i,o,s){var l=this.api(!0);return i===n||null===i?l.row(t).data(e):l.cell(t,i).data(e),(s===n||s)&&l.columns.adjust(),(o===n||o)&&l.draw(),0},this.fnVersionCheck=Je.fnVersionCheck;var i=this,o=t===n,u=this.length;o&&(t={}),this.oApi=this.internal=Je.internal;for(var p in Ke.ext.internal)p&&(this[p]=We(p));return this.each(function(){var p,m={},f=u>1?Be(m,t,!0):t,g=0,b=this.getAttribute("id"),v=!1,_=Ke.defaults;if("table"!=this.nodeName.toLowerCase())return void Ne(null,0,"Non-table node initialisation ("+this.nodeName+")",2);r(_),a(_.column),s(_,_,!0),s(_.column,_.column,!0),s(_,f);var x=Ke.settings;for(g=0,p=x.length;g<p;g++){if(x[g].nTable==this){var k=f.bRetrieve!==n?f.bRetrieve:_.bRetrieve,T=f.bDestroy!==n?f.bDestroy:_.bDestroy;if(o||k)return x[g].oInstance;if(T){x[g].oInstance.fnDestroy();break}return void Ne(x[g],0,"Cannot reinitialise DataTable",3)}if(x[g].sTableId==this.id){x.splice(g,1);break}}null!==b&&""!==b||(b="DataTables_Table_"+Ke.ext._unique++,this.id=b);var V=e.extend(!0,{},Ke.models.oSettings,{"nTable":this,"oApi":i.internal,"oInit":f,"sDestroyWidth":e(this)[0].style.width,"sInstance":b,"sTableId":b});x.push(V),V.oInstance=1===i.length?i:e(this).dataTable(),r(f),f.oLanguage&&l(f.oLanguage),f.aLengthMenu&&!f.iDisplayLength&&(f.iDisplayLength=e.isArray(f.aLengthMenu[0])?f.aLengthMenu[0][0]:f.aLengthMenu[0]),f=Be(e.extend(!0,{},_),f),Re(V.oFeatures,f,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),Re(V,f,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),Re(V.oScroll,f,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),Re(V.oLanguage,f,"fnInfoCallback"),$e(V,"aoDrawCallback",f.fnDrawCallback,"user"),$e(V,"aoServerParams",f.fnServerParams,"user"),$e(V,"aoStateSaveParams",f.fnStateSaveParams,"user"),$e(V,"aoStateLoadParams",f.fnStateLoadParams,"user"),$e(V,"aoStateLoaded",f.fnStateLoaded,"user"),$e(V,"aoRowCallback",f.fnRowCallback,"user"),$e(V,"aoRowCreatedCallback",f.fnCreatedRow,"user"),$e(V,"aoHeaderCallback",f.fnHeaderCallback,"user"),$e(V,"aoFooterCallback",f.fnFooterCallback,"user"),$e(V,"aoInitComplete",f.fnInitComplete,"user"),$e(V,"aoPreDrawCallback",f.fnPreDrawCallback,"user");var S=V.oClasses;if(f.bJQueryUI?(e.extend(S,Ke.ext.oJUIClasses,f.oClasses),f.sDom===_.sDom&&"lfrtip"===_.sDom&&(V.sDom='<"H"lfr>t<"F"ip>'),V.renderer?e.isPlainObject(V.renderer)&&!V.renderer.header&&(V.renderer.header="jqueryui"):V.renderer="jqueryui"):e.extend(S,Ke.ext.classes,f.oClasses),e(this).addClass(S.sTable),""===V.oScroll.sX&&""===V.oScroll.sY||(V.oScroll.iBarWidth=Te()),!0===V.oScroll.sX&&(V.oScroll.sX="100%"),V.iInitDisplayStart===n&&(V.iInitDisplayStart=f.iDisplayStart,V._iDisplayStart=f.iDisplayStart),null!==f.iDeferLoading){V.bDeferLoading=!0;var I=e.isArray(f.iDeferLoading);V._iRecordsDisplay=I?f.iDeferLoading[0]:f.iDeferLoading,V._iRecordsTotal=I?f.iDeferLoading[1]:f.iDeferLoading}var A=V.oLanguage;e.extend(!0,A,f.oLanguage),""!==A.sUrl&&(e.ajax({"dataType":"json","url":A.sUrl,"success":function(t){l(t),s(_.oLanguage,t),e.extend(!0,A,t),re(V)},"error":function(){re(V)}}),v=!0),null===f.asStripeClasses&&(V.asStripeClasses=[S.sStripeOdd,S.sStripeEven]);var E=V.asStripeClasses,M=e("tbody tr:eq(0)",this);-1!==e.inArray(!0,e.map(E,function(e,t){return M.hasClass(e)}))&&(e("tbody tr",this).removeClass(E.join(" ")),V.asDestroyStripes=E.slice());var P,F=[],O=this.getElementsByTagName("thead");if(0!==O.length&&(j(V.aoHeader,O[0]),F=H(V)),null===f.aoColumns)for(P=[],g=0,p=F.length;g<p;g++)P.push(null);else P=f.aoColumns;for(g=0,p=P.length;g<p;g++)d(V,F?F[g]:null);if(w(V,f.aoColumnDefs,P,function(e,t){h(V,e,t)}),M.length){var N=function(e,t){return e.getAttribute("data-"+t)?t:null};e.each(D(V,M[0]).cells,function(e,t){var i=V.aoColumns[e];if(i.mData===e){var o=N(t,"sort")||N(t,"order"),s=N(t,"filter")||N(t,"search");null===o&&null===s||(i.mData={"_":e+".display","sort":null!==o?e+".@data-"+o:n,"type":null!==o?e+".@data-"+o:n,"filter":null!==s?e+".@data-"+s:n},h(V,e))}})}var R=V.oFeatures;if(f.bStateSave&&(R.bStateSave=!0,Fe(V,f),$e(V,"aoDrawCallback",De,"state_save")),f.aaSorting===n){var B=V.aaSorting;for(g=0,p=B.length;g<p;g++)B[g][1]=V.aoColumns[g].asSorting[0]}Me(V),R.bSort&&$e(V,"aoDrawCallback",function(){if(V.bSorted){var t=Ve(V),i={};e.each(t,function(e,t){i[t.src]=t.dir}),je(V,null,"order",[V,t,i]),Ie(V)}}),$e(V,"aoDrawCallback",function(){(V.bSorted||"ssp"===Ue(V)||R.bDeferRender)&&Me(V)},"sc"),c(V);var L=e(this).children("caption").each(function(){this._captionSide=e(this).css("caption-side")}),$=e(this).children("thead");0===$.length&&($=e("<thead/>").appendTo(this)),V.nTHead=$[0];var z=e(this).children("tbody");0===z.length&&(z=e("<tbody/>").appendTo(this)),V.nTBody=z[0];var U=e(this).children("tfoot");if(0===U.length&&L.length>0&&(""!==V.oScroll.sX||""!==V.oScroll.sY)&&(U=e("<tfoot/>").appendTo(this)),0===U.length||0===U.children().length?e(this).addClass(S.sNoFooter):U.length>0&&(V.nTFoot=U[0],j(V.aoFooter,V.nTFoot)),f.aaData)for(g=0;g<f.aaData.length;g++)y(V,f.aaData[g]);else(V.bDeferLoading||"dom"==Ue(V))&&C(V,e(V.nTBody).children("tr"));V.aiDisplay=V.aiDisplayMaster.slice(),V.bInitialised=!0,!1===v&&re(V)}),i=null,this};var kt=[],Tt=Array.prototype,Vt=function(t){var i,n,o=Ke.settings,s=e.map(o,function(e,t){return e.nTable});return t?t.nTable&&t.oApi?[t]:t.nodeName&&"table"===t.nodeName.toLowerCase()?(i=e.inArray(t,s),-1!==i?[o[i]]:null):t&&"function"==typeof t.settings?t.settings().toArray():("string"==typeof t?n=e(t):t instanceof e&&(n=t),n?n.map(function(t){return i=e.inArray(this,s),-1!==i?o[i]:null}).toArray():void 0):[]};Xe=function(t,i){if(!this instanceof Xe)throw"DT API must be constructed as a new object";var n=[],o=function(e){var t=Vt(e);t&&n.push.apply(n,t)};if(e.isArray(t))for(var s=0,l=t.length;s<l;s++)o(t[s]);else o(t);this.context=bt(n),i&&this.push.apply(this,i.toArray?i.toArray():i),this.selector={"rows":null,"cols":null,"opts":null},Xe.extend(this,this,kt)},Ke.Api=Xe,Xe.prototype={"concat":Tt.concat,"context":[],"each":function(e){for(var t=0,i=this.length;t<i;t++)e.call(this,this[t],t,this);return this},"eq":function(e){var t=this.context;return t.length>e?new Xe(t[e],this[e]):null},"filter":function(e){var t=[];if(Tt.filter)t=Tt.filter.call(this,e,this);else for(var i=0,n=this.length;i<n;i++)e.call(this,this[i],i,this)&&t.push(this[i]);return new Xe(this.context,t)},"flatten":function(){var e=[];return new Xe(this.context,e.concat.apply(e,this.toArray()))},"join":Tt.join,"indexOf":Tt.indexOf||function(e,t){for(var i=t||0,n=this.length;i<n;i++)if(this[i]===e)return i;return-1},"iterator":function(e,t,i,o){var s,l,r,a,c,u,d,h,p=[],m=this.context,f=this.selector;for("string"==typeof e&&(o=i,i=t,t=e,e=!1),l=0,r=m.length;l<r;l++){var g=new Xe(m[l]);if("table"===t)(s=i.call(g,m[l],l))!==n&&p.push(s);else if("columns"===t||"rows"===t)(s=i.call(g,m[l],this[l],l))!==n&&p.push(s);else if("column"===t||"column-rows"===t||"row"===t||"cell"===t)for(d=this[l],"column-rows"===t&&(u=Pt(m[l],f.opts)),a=0,c=d.length;a<c;a++)h=d[a],(s="cell"===t?i.call(g,m[l],h.row,h.column,l,a):i.call(g,m[l],h,l,a,u))!==n&&p.push(s)}if(p.length||o){var b=new Xe(m,e?p.concat.apply([],p):p),v=b.selector;return v.rows=f.rows,v.cols=f.cols,v.opts=f.opts,b}return this},"lastIndexOf":Tt.lastIndexOf||function(e,t){return this.indexOf.apply(this.toArray.reverse(),arguments)},"length":0,"map":function(e){var t=[];if(Tt.map)t=Tt.map.call(this,e,this);else for(var i=0,n=this.length;i<n;i++)t.push(e.call(this,this[i],i));return new Xe(this.context,t)},"pluck":function(e){return this.map(function(t){return t[e]})},"pop":Tt.pop,"push":Tt.push,"reduce":Tt.reduce||function(e,t){return u(this,e,t,0,this.length,1)},"reduceRight":Tt.reduceRight||function(e,t){return u(this,e,t,this.length-1,-1,-1)},"reverse":Tt.reverse,"selector":null,"shift":Tt.shift,"sort":Tt.sort,"splice":Tt.splice,"toArray":function(){return Tt.slice.call(this)},"to$":function(){return e(this)},"toJQuery":function(){return e(this)},"unique":function(){return new Xe(this.context,bt(this))},"unshift":Tt.unshift},Xe.extend=function(t,i,n){if(i&&(i instanceof Xe||i.__dt_wrapper)){var o,s,l;for(o=0,s=n.length;o<s;o++)l=n[o],i[l.name]="function"==typeof l.val?function(e,t,i){return function(){var n=t.apply(e,arguments);return Xe.extend(n,n,i.methodExt),n}}(t,l.val,l):e.isPlainObject(l.val)?{}:l.val,i[l.name].__dt_wrapper=!0,Xe.extend(t,i[l.name],l.propExt)}},Xe.register=Qe=function(t,i){if(e.isArray(t))for(var n=0,o=t.length;n<o;n++)Xe.register(t[n],i);else{var s,l,r,a,c=t.split("."),u=kt;for(s=0,l=c.length;s<l;s++){a=-1!==c[s].indexOf("()"),r=a?c[s].replace("()",""):c[s];var d=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i].name===t)return e[i];return null}(u,r);d||(d={"name":r,"val":{},"methodExt":[],"propExt":[]},u.push(d)),s===l-1?d.val=i:u=a?d.methodExt:d.propExt}}},Xe.registerPlural=Ye=function(t,i,o){Xe.register(t,o),Xe.register(i,function(){var t=o.apply(this,arguments)
;return t===this?this:t instanceof Xe?t.length?e.isArray(t[0])?new Xe(t.context,t[0]):t[0]:n:t})};var St=function(t,i){if("number"==typeof t)return[i[t]];var n=e.map(i,function(e,t){return e.nTable});return e(n).filter(t).map(function(t){var o=e.inArray(this,n);return i[o]}).toArray()};Qe("tables()",function(e){return e?new Xe(St(e,this.context)):this}),Qe("table()",function(e){var t=this.tables(e),i=t.context;return i.length?new Xe(i[0]):t}),Ye("tables().nodes()","table().node()",function(){return this.iterator("table",function(e){return e.nTable},1)}),Ye("tables().body()","table().body()",function(){return this.iterator("table",function(e){return e.nTBody},1)}),Ye("tables().header()","table().header()",function(){return this.iterator("table",function(e){return e.nTHead},1)}),Ye("tables().footer()","table().footer()",function(){return this.iterator("table",function(e){return e.nTFoot},1)}),Ye("tables().containers()","table().container()",function(){return this.iterator("table",function(e){return e.nTableWrapper},1)}),Qe("draw()",function(e){return this.iterator("table",function(t){L(t,!1===e)})}),Qe("page()",function(e){return e===n?this.page.info().page:this.iterator("table",function(t){he(t,e)})}),Qe("page.info()",function(e){if(0===this.context.length)return n;var t=this.context[0],i=t._iDisplayStart,o=t._iDisplayLength,s=t.fnRecordsDisplay(),l=-1===o;return{"page":l?0:Math.floor(i/o),"pages":l?1:Math.ceil(s/o),"start":i,"end":t.fnDisplayEnd(),"length":o,"recordsTotal":t.fnRecordsTotal(),"recordsDisplay":s}}),Qe("page.len()",function(e){return e===n?0!==this.context.length?this.context[0]._iDisplayLength:n:this.iterator("table",function(t){ce(t,e)})});var It=function(e,t,i){if("ssp"==Ue(e)?L(e,t):(me(e,!0),z(e,[],function(i){E(e);for(var n=W(e,i),o=0,s=n.length;o<s;o++)y(e,n[o]);L(e,t),me(e,!1)})),i){var n=new Xe(e);n.one("draw",function(){i(n.ajax.json())})}};Qe("ajax.json()",function(){var e=this.context;if(e.length>0)return e[0].json}),Qe("ajax.params()",function(){var e=this.context;if(e.length>0)return e[0].oAjaxData}),Qe("ajax.reload()",function(e,t){return this.iterator("table",function(i){It(i,!1===t,e)})}),Qe("ajax.url()",function(t){var i=this.context;return t===n?0===i.length?n:(i=i[0],i.ajax?e.isPlainObject(i.ajax)?i.ajax.url:i.ajax:i.sAjaxSource):this.iterator("table",function(i){e.isPlainObject(i.ajax)?i.ajax.url=t:i.ajax=t})}),Qe("ajax.url().load()",function(e,t){return this.iterator("table",function(i){It(i,!1===t,e)})});var At=function(t,i){var o,s,l,r,a,c,u=[],d=typeof t;for(t&&"string"!==d&&"function"!==d&&t.length!==n||(t=[t]),l=0,r=t.length;l<r;l++)for(s=t[l]&&t[l].split?t[l].split(","):[t[l]],a=0,c=s.length;a<c;a++)(o=i("string"==typeof s[a]?e.trim(s[a]):s[a]))&&o.length&&u.push.apply(u,o);return u},Et=function(e){return e||(e={}),e.filter&&!e.search&&(e.search=e.filter),{"search":e.search||"none","order":e.order||"current","page":e.page||"all"}},Mt=function(e){for(var t=0,i=e.length;t<i;t++)if(e[t].length>0)return e[0]=e[t],e.length=1,e.context=[e.context[t]],e;return e.length=0,e},Pt=function(t,i){var n,o,s,l=[],r=t.aiDisplay,a=t.aiDisplayMaster,c=i.search,u=i.order,d=i.page;if("ssp"==Ue(t))return"removed"===c?[]:mt(0,a.length);if("current"==d)for(n=t._iDisplayStart,o=t.fnDisplayEnd();n<o;n++)l.push(r[n]);else if("current"==u||"applied"==u)l="none"==c?a.slice():"applied"==c?r.slice():e.map(a,function(t,i){return-1===e.inArray(t,r)?t:null});else if("index"==u||"original"==u)for(n=0,o=t.aoData.length;n<o;n++)"none"==c?l.push(n):(-1===(s=e.inArray(n,r))&&"removed"==c||s>=0&&"applied"==c)&&l.push(n);return l},Dt=function(t,i,n){return At(i,function(i){var o=rt(i);if(null!==o&&!n)return[o];var s=Pt(t,n);if(null!==o&&-1!==e.inArray(o,s))return[o];if(!i)return s;if("function"==typeof i)return e.map(s,function(e){var n=t.aoData[e];return i(e,n._aData,n.nTr)?e:null});var l=ft(pt(t.aoData,s,"nTr"));return i.nodeName&&-1!==e.inArray(i,l)?[i._DT_RowIndex]:e(l).filter(i).map(function(){return this._DT_RowIndex}).toArray()})};Qe("rows()",function(t,i){t===n?t="":e.isPlainObject(t)&&(i=t,t=""),i=Et(i);var o=this.iterator("table",function(e){return Dt(e,t,i)},1);return o.selector.rows=t,o.selector.opts=i,o}),Qe("rows().nodes()",function(){return this.iterator("row",function(e,t){return e.aoData[t].nTr||n},1)}),Qe("rows().data()",function(){return this.iterator(!0,"rows",function(e,t){return pt(e.aoData,t,"_aData")},1)}),Ye("rows().cache()","row().cache()",function(e){return this.iterator("row",function(t,i){var n=t.aoData[i];return"search"===e?n._aFilterData:n._aSortData},1)}),Ye("rows().invalidate()","row().invalidate()",function(e){return this.iterator("row",function(t,i){P(t,i,e)})}),Ye("rows().indexes()","row().index()",function(){return this.iterator("row",function(e,t){return t},1)}),Ye("rows().remove()","row().remove()",function(){var t=this;return this.iterator("row",function(i,n,o){var s=i.aoData;s.splice(n,1);for(var l=0,r=s.length;l<r;l++)null!==s[l].nTr&&(s[l].nTr._DT_RowIndex=l);e.inArray(n,i.aiDisplay);M(i.aiDisplayMaster,n),M(i.aiDisplay,n),M(t[o],n,!1),He(i)})}),Qe("rows.add()",function(e){var t=this.iterator("table",function(t){var i,n,o,s=[];for(n=0,o=e.length;n<o;n++)i=e[n],i.nodeName&&"TR"===i.nodeName.toUpperCase()?s.push(C(t,i)[0]):s.push(y(t,i));return s},1),i=this.rows(-1);return i.pop(),i.push.apply(i,t.toArray()),i}),Qe("row()",function(e,t){return Mt(this.rows(e,t))}),Qe("row().data()",function(e){var t=this.context;return e===n?t.length&&this.length?t[0].aoData[this[0]]._aData:n:(t[0].aoData[this[0]]._aData=e,P(t[0],this[0],"data"),this)}),Qe("row().node()",function(){var e=this.context;return e.length&&this.length?e[0].aoData[this[0]].nTr||null:null}),Qe("row.add()",function(t){t instanceof e&&t.length&&(t=t[0]);var i=this.iterator("table",function(e){return t.nodeName&&"TR"===t.nodeName.toUpperCase()?C(e,t)[0]:y(e,t)});return this.row(i[0])});var Ft=function(t,i,n,o){var s=[],l=function(i,n){if(i.nodeName&&"tr"===i.nodeName.toLowerCase())s.push(i);else{var o=e("<tr><td/></tr>").addClass(n);e("td",o).addClass(n).html(i)[0].colSpan=g(t),s.push(o[0])}};if(e.isArray(n)||n instanceof e)for(var r=0,a=n.length;r<a;r++)l(n[r],o);else l(n,o);i._details&&i._details.remove(),i._details=e(s),i._detailsShow&&i._details.insertAfter(i.nTr)},Ot=function(e,t){var i=e.context;if(i.length){var o=i[0].aoData[t!==n?t:e[0]];o._details&&(o._details.remove(),o._detailsShow=n,o._details=n)}},Nt=function(e,t){var i=e.context;if(i.length&&e.length){var n=i[0].aoData[e[0]];n._details&&(n._detailsShow=t,t?n._details.insertAfter(n.nTr):n._details.detach(),Rt(i[0]))}},Rt=function(e){var t=new Xe(e),i=e.aoData;t.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),ht(i,"_details").length>0&&(t.on("draw.dt.DT_details",function(n,o){e===o&&t.rows({"page":"current"}).eq(0).each(function(e){var t=i[e];t._detailsShow&&t._details.insertAfter(t.nTr)})}),t.on("column-visibility.dt.DT_details",function(t,n,o,s){if(e===n)for(var l,r=g(n),a=0,c=i.length;a<c;a++)l=i[a],l._details&&l._details.children("td[colspan]").attr("colspan",r)}),t.on("destroy.dt.DT_details",function(n,o){if(e===o)for(var s=0,l=i.length;s<l;s++)i[s]._details&&Ot(t,s)}))};Qe("row().child()",function(e,t){var i=this.context;return e===n?i.length&&this.length?i[0].aoData[this[0]]._details:n:(!0===e?this.child.show():!1===e?Ot(this):i.length&&this.length&&Ft(i[0],i[0].aoData[this[0]],e,t),this)}),Qe(["row().child.show()","row().child().show()"],function(e){return Nt(this,!0),this}),Qe(["row().child.hide()","row().child().hide()"],function(){return Nt(this,!1),this}),Qe(["row().child.remove()","row().child().remove()"],function(){return Ot(this),this}),Qe("row().child.isShown()",function(){var e=this.context;return!(!e.length||!this.length)&&(e[0].aoData[this[0]]._detailsShow||!1)});var Bt=/^(.+):(name|visIdx|visible)$/,Lt=function(e,t,i,n,o){for(var s=[],l=0,r=o.length;l<r;l++)s.push(k(e,o[l],t));return s},$t=function(t,i,n){var o=t.aoColumns,s=ht(o,"sName"),l=ht(o,"nTh");return At(i,function(i){var r=rt(i);if(""===i)return mt(o.length);if(null!==r)return[r>=0?r:o.length+r];if("function"==typeof i){var a=Pt(t,n);return e.map(o,function(e,n){return i(n,Lt(t,n,0,0,a),l[n])?n:null})}var c="string"==typeof i?i.match(Bt):"";if(!c)return e(l).filter(i).map(function(){return e.inArray(this,l)}).toArray();switch(c[2]){case"visIdx":case"visible":var u=parseInt(c[1],10);if(u<0){var d=e.map(o,function(e,t){return e.bVisible?t:null});return[d[d.length+u]]}return[m(t,u)];case"name":return e.map(s,function(e,t){return e===c[1]?t:null})}})},jt=function(t,i,o,s){var l,r,a,c,u=t.aoColumns,d=u[i],h=t.aoData;if(o===n)return d.bVisible;if(d.bVisible!==o){if(o){var m=e.inArray(!0,ht(u,"bVisible"),i+1);for(r=0,a=h.length;r<a;r++)c=h[r].nTr,l=h[r].anCells,c&&c.insertBefore(l[i],l[m]||null)}else e(ht(t.aoData,"anCells",i)).detach();d.bVisible=o,R(t,t.aoHeader),R(t,t.aoFooter),(s===n||s)&&(p(t),(t.oScroll.sX||t.oScroll.sY)&&ge(t)),je(t,null,"column-visibility",[t,i,o]),De(t)}};Qe("columns()",function(t,i){t===n?t="":e.isPlainObject(t)&&(i=t,t=""),i=Et(i);var o=this.iterator("table",function(e){return $t(e,t,i)},1);return o.selector.cols=t,o.selector.opts=i,o}),Ye("columns().header()","column().header()",function(e,t){return this.iterator("column",function(e,t){return e.aoColumns[t].nTh},1)}),Ye("columns().footer()","column().footer()",function(e,t){return this.iterator("column",function(e,t){return e.aoColumns[t].nTf},1)}),Ye("columns().data()","column().data()",function(){return this.iterator("column-rows",Lt,1)}),Ye("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].mData},1)}),Ye("columns().cache()","column().cache()",function(e){return this.iterator("column-rows",function(t,i,n,o,s){return pt(t.aoData,s,"search"===e?"_aFilterData":"_aSortData",i)},1)}),Ye("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(e,t,i,n,o){return pt(e.aoData,o,"anCells",t)},1)}),Ye("columns().visible()","column().visible()",function(e,t){return this.iterator("column",function(i,o){if(e===n)return i.aoColumns[o].bVisible;jt(i,o,e,t)})}),Ye("columns().indexes()","column().index()",function(e){return this.iterator("column",function(t,i){return"visible"===e?f(t,i):i},1)}),Qe("columns.adjust()",function(){return this.iterator("table",function(e){p(e)},1)}),Qe("column.index()",function(e,t){if(0!==this.context.length){var i=this.context[0];if("fromVisible"===e||"toData"===e)return m(i,t);if("fromData"===e||"toVisible"===e)return f(i,t)}}),Qe("column()",function(e,t){return Mt(this.columns(e,t))});var Ht=function(t,i,o){var s,l,r,a,c,u,d,h=t.aoData,p=Pt(t,o),m=ft(pt(h,p,"anCells")),f=e([].concat.apply([],m)),g=t.aoColumns.length;return At(i,function(i){var o="function"==typeof i;if(null===i||i===n||o){for(l=[],r=0,a=p.length;r<a;r++)for(s=p[r],c=0;c<g;c++)u={"row":s,"column":c},o?(d=t.aoData[s],i(u,k(t,s,c),d.anCells[c])&&l.push(u)):l.push(u);return l}return e.isPlainObject(i)?[i]:f.filter(i).map(function(t,i){return s=i.parentNode._DT_RowIndex,{"row":s,"column":e.inArray(i,h[s].anCells)}}).toArray()})};Qe("cells()",function(t,i,o){if(e.isPlainObject(t)&&(typeof t.row!==n?(o=i,i=null):(o=t,t=null)),e.isPlainObject(i)&&(o=i,i=null),null===i||i===n)return this.iterator("table",function(e){return Ht(e,t,Et(o))});var s,l,r,a,c,u=this.columns(i,o),d=this.rows(t,o),h=this.iterator("table",function(e,t){for(s=[],l=0,r=d[t].length;l<r;l++)for(a=0,c=u[t].length;a<c;a++)s.push({"row":d[t][l],"column":u[t][a]});return s},1);return e.extend(h.selector,{"cols":i,"rows":t,"opts":o}),h}),Ye("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(e,t,i){var o=e.aoData[t].anCells;return o?o[i]:n},1)}),Qe("cells().data()",function(){return this.iterator("cell",function(e,t,i){return k(e,t,i)},1)}),Ye("cells().cache()","cell().cache()",function(e){return e="search"===e?"_aFilterData":"_aSortData",this.iterator("cell",function(t,i,n){return t.aoData[i][e][n]},1)}),Ye("cells().render()","cell().render()",function(e){return this.iterator("cell",function(t,i,n){return k(t,i,n,e)},1)}),Ye("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(e,t,i){return{"row":t,"column":i,"columnVisible":f(e,i)}},1)}),Ye("cells().invalidate()","cell().invalidate()",function(e){return this.iterator("cell",function(t,i,n){P(t,i,e,n)})}),Qe("cell()",function(e,t,i){return Mt(this.cells(e,t,i))}),Qe("cell().data()",function(e){var t=this.context,i=this[0];return e===n?t.length&&i.length?k(t[0],i[0].row,i[0].column):n:(T(t[0],i[0].row,i[0].column,e),P(t[0],i[0].row,"data",i[0].column),this)}),Qe("order()",function(t,i){var o=this.context;return t===n?0!==o.length?o[0].aaSorting:n:("number"==typeof t?t=[[t,i]]:e.isArray(t[0])||(t=Array.prototype.slice.call(arguments)),this.iterator("table",function(e){e.aaSorting=t.slice()}))}),Qe("orderNeutral()",function(){return this.iterator("table",function(e){e.aaSorting=[]})}),Qe("order.listener()",function(e,t,i){return this.iterator("table",function(n){Ee(n,e,t,i)})}),Qe(["columns().order()","column().order()"],function(t){var i=this;return this.iterator("table",function(n,o){var s=[];e.each(i[o],function(e,i){s.push([i,t])}),n.aaSorting=s})}),Qe("search()",function(t,i,o,s){var l=this.context;return t===n?0!==l.length?l[0].oPreviousSearch.sSearch:n:this.iterator("table",function(n){n.oFeatures.bFilter&&J(n,e.extend({},n.oPreviousSearch,{"sSearch":t+"","bRegex":null!==i&&i,"bSmart":null===o||o,"bCaseInsensitive":null===s||s}),1)})}),Ye("columns().search()","column().search()",function(t,i,o,s){return this.iterator("column",function(l,r){var a=l.aoPreSearchCols;if(t===n)return a[r].sSearch;l.oFeatures.bFilter&&(e.extend(a[r],{"sSearch":t+"","bRegex":null!==i&&i,"bSmart":null===o||o,"bCaseInsensitive":null===s||s}),J(l,l.oPreviousSearch,1))})}),Qe("state()",function(){return this.context.length?this.context[0].oSavedState:null}),Qe("state.clear()",function(){return this.iterator("table",function(e){e.fnStateSaveCallback.call(e.oInstance,e,{})})}),Qe("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),Qe("state.save()",function(){return this.iterator("table",function(e){De(e)})}),Ke.versionCheck=Ke.fnVersionCheck=function(e){for(var t,i,n=Ke.version.split("."),o=e.split("."),s=0,l=o.length;s<l;s++)if(t=parseInt(n[s],10)||0,i=parseInt(o[s],10)||0,t!==i)return t>i;return!0},Ke.isDataTable=Ke.fnIsDataTable=function(t){var i=e(t).get(0),n=!1;return e.each(Ke.settings,function(e,t){t.nTable!==i&&t.nScrollHead!==i&&t.nScrollFoot!==i||(n=!0)}),n},Ke.tables=Ke.fnTables=function(t){return e.map(Ke.settings,function(i){if(!t||t&&e(i.nTable).is(":visible"))return i.nTable})},Ke.util={"throttle":we,"escapeRegex":ee},Ke.camelToHungarian=s,Qe("$()",function(t,i){var n=this.rows(i).nodes(),o=e(n);return e([].concat(o.filter(t).toArray(),o.find(t).toArray()))}),e.each(["on","one","off"],function(t,i){Qe(i+"()",function(){var t=Array.prototype.slice.call(arguments);t[0].match(/\.dt\b/)||(t[0]+=".dt");var n=e(this.tables().nodes());return n[i].apply(n,t),this})}),Qe("clear()",function(){return this.iterator("table",function(e){E(e)})}),Qe("settings()",function(){return new Xe(this.context,this.context)}),Qe("data()",function(){return this.iterator("table",function(e){return ht(e.aoData,"_aData")}).flatten()}),Qe("destroy()",function(i){return i=i||!1,this.iterator("table",function(n){var o,s=n.nTableWrapper.parentNode,l=n.oClasses,r=n.nTable,a=n.nTBody,c=n.nTHead,u=n.nTFoot,d=e(r),h=e(a),p=e(n.nTableWrapper),m=e.map(n.aoData,function(e){return e.nTr});n.bDestroying=!0,je(n,"aoDestroyCallback","destroy",[n]),i||new Xe(n).columns().visible(!0),p.off(".DT").find(":not(tbody *)").off(".DT"),e(t).off(".DT-"+n.sInstance),r!=c.parentNode&&(d.children("thead").detach(),d.append(c)),u&&r!=u.parentNode&&(d.children("tfoot").detach(),d.append(u)),d.detach(),p.detach(),n.aaSorting=[],n.aaSortingFixed=[],Me(n),e(m).removeClass(n.asStripeClasses.join(" ")),e("th, td",c).removeClass(l.sSortable+" "+l.sSortableAsc+" "+l.sSortableDesc+" "+l.sSortableNone),n.bJUI&&(e("th span."+l.sSortIcon+", td span."+l.sSortIcon,c).detach(),e("th, td",c).each(function(){var t=e("div."+l.sSortJUIWrapper,this);e(this).append(t.contents()),t.detach()})),!i&&s&&s.insertBefore(r,n.nTableReinsertBefore),h.children().detach(),h.append(m),d.css("width",n.sDestroyWidth).removeClass(l.sTable),(o=n.asDestroyStripes.length)&&h.children().each(function(t){e(this).addClass(n.asDestroyStripes[t%o])});var f=e.inArray(n,Ke.settings);-1!==f&&Ke.settings.splice(f,1)})}),Ke.version="1.10.4",Ke.settings=[],Ke.models={},Ke.models.oSearch={"bCaseInsensitive":!0,"sSearch":"","bRegex":!1,"bSmart":!0},Ke.models.oRow={"nTr":null,"anCells":null,"_aData":[],"_aSortData":null,"_aFilterData":null,"_sFilterRow":null,"_sRowStripe":"","src":null},Ke.models.oColumn={"idx":null,"aDataSort":null,"asSorting":null,"bSearchable":null,"bSortable":null,"bVisible":null,"_sManualType":null,"_bAttrSrc":!1,"fnCreatedCell":null,"fnGetData":null,"fnSetData":null,"mData":null,"mRender":null,"nTh":null,"nTf":null,"sClass":null,"sContentPadding":null,"sDefaultContent":null,"sName":null,"sSortDataType":"std","sSortingClass":null,"sSortingClassJUI":null,"sTitle":null,"sType":null,"sWidth":null,"sWidthOrig":null},Ke.defaults={"aaData":null,"aaSorting":[[0,"asc"]],"aaSortingFixed":[],"ajax":null,"aLengthMenu":[10,25,50,100],"aoColumns":null,"aoColumnDefs":null,"aoSearchCols":[],"asStripeClasses":null,"bAutoWidth":!0,"bDeferRender":!1,"bDestroy":!1,"bFilter":!0,"bInfo":!0,"bJQueryUI":!1,"bLengthChange":!0,"bPaginate":!0,"bProcessing":!1,"bRetrieve":!1,"bScrollCollapse":!1,"bServerSide":!1,"bSort":!0,"bSortMulti":!0,"bSortCellsTop":!1,"bSortClasses":!0,"bStateSave":!1,"fnCreatedRow":null,"fnDrawCallback":null,"fnFooterCallback":null,"fnFormatNumber":function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},"fnHeaderCallback":null,"fnInfoCallback":null,"fnInitComplete":null,"fnPreDrawCallback":null,"fnRowCallback":null,"fnServerData":null,"fnServerParams":null,"fnStateLoadCallback":function(e){try{return JSON.parse((-1===e.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+e.sInstance+"_"+location.pathname))}catch(e){}},"fnStateLoadParams":null,"fnStateLoaded":null,"fnStateSaveCallback":function(e,t){try{(-1===e.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+e.sInstance+"_"+location.pathname,JSON.stringify(t))}catch(e){}},"fnStateSaveParams":null,"iStateDuration":7200,"iDeferLoading":null,"iDisplayLength":10,"iDisplayStart":0,"iTabIndex":0,"oClasses":{},"oLanguage":{"oAria":{"sSortedDescending":"{0} in descending order","sSortedAscending":"{0} in ascending order"},"oTooltip":{"sSortAscending":"In ascending order","sSortDescending":"In descending order","sIsUnsorted":"Unsorted"},"oPaginate":{"sFirst":"First","sLast":"Last","sNext":"Next","sPrevious":"Previous"},"sEmptyTable":"No data available in table","sInfo":"Showing _START_ to _END_ of _TOTAL_ entries","sInfoEmpty":"Showing 0 to 0 of 0 entries","sInfoFiltered":"(filtered from _MAX_ total entries)","sInfoPostFix":"","sDecimal":"","sThousands":",","sLengthMenu":"Show _MENU_ entries","sLoadingRecords":"Loading...","sProcessing":"Processing...","sSearch":"Search:","sSearchPlaceholder":"","sUrl":"","sZeroRecords":"No matching records found"},"oSearch":e.extend({},Ke.models.oSearch),"sAjaxDataProp":"data","sAjaxSource":null,"sDom":"lfrtip","searchDelay":null,"sPaginationType":"simple_numbers","sScrollX":"","sScrollXInner":"","sScrollY":"","sServerMethod":"GET","renderer":null},o(Ke.defaults),Ke.defaults.column={"aDataSort":null,"iDataSort":-1,"asSorting":["asc","desc"],"bSearchable":!0,"bSortable":!0,"bVisible":!0,"fnCreatedCell":null,"mData":null,"mRender":null,"sCellType":"td","sClass":"","sContentPadding":"","sDefaultContent":null,"sName":"","sSortDataType":"std","sTitle":null,"sType":null,"sWidth":null},o(Ke.defaults.column),Ke.models.oSettings={"oFeatures":{"bAutoWidth":null,"bDeferRender":null,"bFilter":null,"bInfo":null,"bLengthChange":null,"bPaginate":null,"bProcessing":null,"bServerSide":null,"bSort":null,"bSortMulti":null,"bSortClasses":null,"bStateSave":null},"oScroll":{"bCollapse":null,"iBarWidth":0,"sX":null,"sXInner":null,"sY":null},"oLanguage":{"fnInfoCallback":null},"oBrowser":{"bScrollOversize":!1,"bScrollbarLeft":!1},"ajax":null,"aanFeatures":[],"aoData":[],"aiDisplay":[],"aiDisplayMaster":[],"aoColumns":[],"aoHeader":[],"aoFooter":[],"oPreviousSearch":{},"aoPreSearchCols":[],"aaSorting":null,"aaSortingFixed":[],"asStripeClasses":null,"asDestroyStripes":[],"sDestroyWidth":0,"aoRowCallback":[],"aoHeaderCallback":[],"aoFooterCallback":[],"aoDrawCallback":[],"aoRowCreatedCallback":[],"aoPreDrawCallback":[],"aoInitComplete":[],"aoStateSaveParams":[],"aoStateLoadParams":[],"aoStateLoaded":[],"sTableId":"","nTable":null,"nTHead":null,"nTFoot":null,"nTBody":null,"nTableWrapper":null,"bDeferLoading":!1,"bInitialised":!1,"aoOpenRows":[],"sDom":null,"searchDelay":null,"sPaginationType":"two_button","iStateDuration":0,"aoStateSave":[],"aoStateLoad":[],"oSavedState":null,"oLoadedState":null,"sAjaxSource":null,"sAjaxDataProp":null,"bAjaxDataGet":!0,"jqXHR":null,"json":n,"oAjaxData":n,"fnServerData":null,"aoServerParams":[],"sServerMethod":null,"fnFormatNumber":null,"aLengthMenu":null,"iDraw":0,"bDrawing":!1,"iDrawError":-1,"_iDisplayLength":10,"_iDisplayStart":0,"_iRecordsTotal":0,"_iRecordsDisplay":0,"bJUI":null,"oClasses":{},"bFiltered":!1,"bSorted":!1,"bSortCellsTop":null,"oInit":null,"aoDestroyCallback":[],"fnRecordsTotal":function(){return"ssp"==Ue(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},"fnRecordsDisplay":function(){return"ssp"==Ue(this)?1*this._iRecordsDisplay:this.aiDisplay.length},"fnDisplayEnd":function(){var e=this._iDisplayLength,t=this._iDisplayStart,i=t+e,n=this.aiDisplay.length,o=this.oFeatures,s=o.bPaginate;return o.bServerSide?!1===s||-1===e?t+n:Math.min(t+e,this._iRecordsDisplay):!s||i>n||-1===e?n:i},"oInstance":null,"sInstance":null,"iTabIndex":0,"nScrollHead":null,"nScrollFoot":null,"aLastSort":[],"oPlugins":{}},Ke.ext=Je={"classes":{},"errMode":"alert","feature":[],"search":[],"internal":{},"legacy":{"ajax":null},"pager":{},"renderer":{"pageButton":{},"header":{}},"order":{},"type":{"detect":[],"search":{},"order":{}},"_unique":0,"fnVersionCheck":Ke.fnVersionCheck,"iApiIndex":0,"oJUIClasses":{},"sVersion":Ke.version},e.extend(Je,{"afnFiltering":Je.search,"aTypes":Je.type.detect,"ofnSearch":Je.type.search,"oSort":Je.type.order,"afnSortData":Je.order,"aoFeatures":Je.feature,"oApi":Je.internal,"oStdClasses":Je.classes,"oPagination":Je.pager}),e.extend(Ke.ext.classes,{"sTable":"dataTable","sNoFooter":"no-footer","sPageButton":"paginate_button","sPageButtonActive":"current","sPageButtonDisabled":"disabled","sStripeOdd":"odd","sStripeEven":"even","sRowEmpty":"dataTables_empty","sWrapper":"dataTables_wrapper","sFilter":"dataTables_filter","sInfo":"dataTables_info","sPaging":"dataTables_paginate paging_","sLength":"dataTables_length","sProcessing":"dataTables_processing","sSortAsc":"sorting_asc","sSortDesc":"sorting_desc","sSortable":"sorting","sSortableAsc":"sorting_asc_disabled","sSortableDesc":"sorting_desc_disabled","sSortableNone":"sorting_disabled","sSortColumn":"sorting_","sFilterInput":"","sLengthSelect":"","sScrollWrapper":"dataTables_scroll","sScrollHead":"dataTables_scrollHead","sScrollHeadInner":"dataTables_scrollHeadInner","sScrollBody":"dataTables_scrollBody","sScrollFoot":"dataTables_scrollFoot","sScrollFootInner":"dataTables_scrollFootInner","sHeaderTH":"","sFooterTH":"","sSortJUIAsc":"","sSortJUIDesc":"","sSortJUI":"","sSortJUIAscAllowed":"","sSortJUIDescAllowed":"","sSortJUIWrapper":"","sSortIcon":"","sJUIHeader":"","sJUIFooter":""}),function(){var t="";t="";var i=t+"ui-state-default",n=t+"css_right ui-icon ui-icon-",o=t+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";e.extend(Ke.ext.oJUIClasses,Ke.ext.classes,{"sPageButton":"fg-button ui-button "+i,"sPageButtonActive":"ui-state-disabled","sPageButtonDisabled":"ui-state-disabled","sPaging":"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_","sSortAsc":i+" sorting_asc","sSortDesc":i+" sorting_desc","sSortable":i+" sorting","sSortableAsc":i+" sorting_asc_disabled","sSortableDesc":i+" sorting_desc_disabled","sSortableNone":i+" sorting_disabled","sSortJUIAsc":n+"triangle-1-n","sSortJUIDesc":n+"triangle-1-s","sSortJUI":n+"carat-2-n-s","sSortJUIAscAllowed":n+"carat-1-n","sSortJUIDescAllowed":n+"carat-1-s","sSortJUIWrapper":"DataTables_sort_wrapper","sSortIcon":"DataTables_sort_icon","sScrollHead":"dataTables_scrollHead "+i,"sScrollFoot":"dataTables_scrollFoot "+i,"sHeaderTH":i,"sFooterTH":i,"sJUIHeader":o+" ui-corner-tl ui-corner-tr","sJUIFooter":o+" ui-corner-bl ui-corner-br"})}();var zt=Ke.ext.pager;e.extend(zt,{"simple":function(e,t){return["previous","next"]},"full":function(e,t){return["first","previous","next","last"]},"simple_numbers":function(e,t){return["previous",qe(e,t),"next"]},"full_numbers":function(e,t){return["first","previous",qe(e,t),"next","last"]},"_numbers":qe,"numbers_length":7}),e.extend(!0,Ke.ext.renderer,{"pageButton":{"_":function(t,n,o,s,l,r){var a,c,u=t.oClasses,d=t.oLanguage.oPaginate,h=0,p=function(i,n){var s,m,f,g,b=function(e){he(t,e.data.action,!0)};for(s=0,m=n.length;s<m;s++)if(g=n[s],e.isArray(g)){var v=e("<"+(g.DT_el||"div")+"/>").appendTo(i);p(v,g)}else{switch(a="",c="",g){case"ellipsis":i.append("<span>&hellip;</span>");break;case"first":a=d.sFirst,c=g+(l>0?"":" "+u.sPageButtonDisabled);break;case"previous":a=d.sPrevious,c=g+(l>0?"":" "+u.sPageButtonDisabled);break;case"next":a=d.sNext,c=g+(l<r-1?"":" "+u.sPageButtonDisabled);break;case"last":a=d.sLast,c=g+(l<r-1?"":" "+u.sPageButtonDisabled);break;default:a=g+1,c=l===g?u.sPageButtonActive:""}a&&(f=e("<a>",{"class":u.sPageButton+" "+c,"aria-controls":t.sTableId,"data-dt-idx":h,"tabindex":t.iTabIndex,"id":0===o&&"string"==typeof g?t.sTableId+"_"+g:null}).html(a).appendTo(i),Le(f,{"action":g},b),h++)}};try{var m=e(i.activeElement).data("dt-idx");p(e(n).empty(),s),null!==m&&e(n).find("[data-dt-idx="+m+"]").focus()}catch(e){}}}}),e.extend(Ke.ext.type.detect,[function(e,t){var i=t.oLanguage.sDecimal;return ct(e,i)?"num"+i:null},function(e,t){if(e&&!(e instanceof Date)&&(!it.test(e)||!nt.test(e)))return null;var i=Date.parse(e);return null!==i&&!isNaN(i)||lt(e)?"date":null},function(e,t){var i=t.oLanguage.sDecimal;return ct(e,i,!0)?"num-fmt"+i:null},function(e,t){var i=t.oLanguage.sDecimal;return dt(e,i)?"html-num"+i:null},function(e,t){var i=t.oLanguage.sDecimal;return dt(e,i,!0)?"html-num-fmt"+i:null},function(e,t){return lt(e)||"string"==typeof e&&-1!==e.indexOf("<")?"html":null}]),e.extend(Ke.ext.type.search,{"html":function(e){return lt(e)?e:"string"==typeof e?e.replace(et," ").replace(tt,""):""},"string":function(e){return lt(e)?e:"string"==typeof e?e.replace(et," "):e}});var Ut=function(e,t,i,n){return 0===e||e&&"-"!==e?(t&&(e=at(e,t)),e.replace&&(i&&(e=e.replace(i,"")),n&&(e=e.replace(n,""))),1*e):-1/0};e.extend(Je.type.order,{"date-pre":function(e){return Date.parse(e)||0},"html-pre":function(e){return lt(e)?"":e.replace?e.replace(/<.*?>/g,"").toLowerCase():e+""},"string-pre":function(e){return lt(e)?"":"string"==typeof e?e.toLowerCase():e.toString?e.toString():""},"string-asc":function(e,t){return e<t?-1:e>t?1:0},"string-desc":function(e,t){return e<t?1:e>t?-1:0}}),Ge(""),e.extend(!0,Ke.ext.renderer,{"header":{"_":function(t,i,n,o){e(t.nTable).on("order.dt.DT",function(e,s,l,r){if(t===s){var a=n.idx;i.removeClass(n.sSortingClass+" "+o.sSortAsc+" "+o.sSortDesc).addClass("asc"==r[a]?o.sSortAsc:"desc"==r[a]?o.sSortDesc:n.sSortingClass)}})},"jqueryui":function(t,i,n,o){e("<div/>").addClass(o.sSortJUIWrapper).append(i.contents()).append(e("<span/>").addClass(o.sSortIcon+" "+n.sSortingClassJUI)).appendTo(i),e(t.nTable).on("order.dt.DT",function(e,s,l,r){if(t===s){var a=n.idx;i.removeClass(o.sSortAsc+" "+o.sSortDesc).addClass("asc"==r[a]?o.sSortAsc:"desc"==r[a]?o.sSortDesc:n.sSortingClass),i.find("span."+o.sSortIcon).removeClass(o.sSortJUIAsc+" "+o.sSortJUIDesc+" "+o.sSortJUI+" "+o.sSortJUIAscAllowed+" "+o.sSortJUIDescAllowed).addClass("asc"==r[a]?o.sSortJUIAsc:"desc"==r[a]?o.sSortJUIDesc:n.sSortingClassJUI)}})}}}),Ke.render={"number":function(e,t,i,n){return{"display":function(o){var s=o<0?"-":"";o=Math.abs(parseFloat(o));var l=parseInt(o,10),r=i?t+(o-l).toFixed(i).substring(2):"";return s+(n||"")+l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)+r}}}},e.extend(Ke.ext.internal,{"_fnExternApiFunc":We,"_fnBuildAjax":z,"_fnAjaxUpdate":U,"_fnAjaxParameters":q,"_fnAjaxUpdateDraw":G,"_fnAjaxDataSrc":W,"_fnAddColumn":d,"_fnColumnOptions":h,"_fnAdjustColumnSizing":p,"_fnVisibleToColumnIndex":m,"_fnColumnIndexToVisible":f,"_fnVisbleColumns":g,"_fnGetColumns":b,"_fnColumnTypes":v,"_fnApplyColumnDefs":w,"_fnHungarianMap":o,"_fnCamelToHungarian":s,"_fnLanguageCompat":l,"_fnBrowserDetect":c,"_fnAddData":y,"_fnAddTr":C,"_fnNodeToDataIndex":_,"_fnNodeToColumnIndex":x,"_fnGetCellData":k,"_fnSetCellData":T,"_fnSplitObjNotation":V,"_fnGetObjectDataFn":S,"_fnSetObjectDataFn":I,"_fnGetDataMaster":A,"_fnClearTable":E,"_fnDeleteIndex":M,"_fnInvalidate":P,"_fnGetRowElements":D,"_fnCreateTr":F,"_fnBuildHead":N,"_fnDrawHead":R,"_fnDraw":B,"_fnReDraw":L,"_fnAddOptionsHtml":$,"_fnDetectHeader":j,"_fnGetUniqueThs":H,"_fnFeatureHtmlFilter":K,"_fnFilterComplete":J,"_fnFilterCustom":X,"_fnFilterColumn":Q,"_fnFilter":Y,"_fnFilterCreateSearch":Z,"_fnEscapeRegex":ee,"_fnFilterData":te,"_fnFeatureHtmlInfo":oe,"_fnUpdateInfo":se,"_fnInfoMacros":le,"_fnInitialise":re,"_fnInitComplete":ae,"_fnLengthChange":ce,"_fnFeatureHtmlLength":ue,"_fnFeatureHtmlPaginate":de,"_fnPageChange":he,"_fnFeatureHtmlProcessing":pe,"_fnProcessingDisplay":me,"_fnFeatureHtmlTable":fe,"_fnScrollDraw":ge,"_fnApplyToChildren":be,"_fnCalculateColumnWidths":ve,"_fnThrottle":we,"_fnConvertToWidth":ye,"_fnScrollingWidthAdjust":Ce,"_fnGetWidestNode":_e,"_fnGetMaxLenString":xe,"_fnStringToCss":ke,"_fnScrollBarWidth":Te,"_fnSortFlatten":Ve,"_fnSort":Se,"_fnSortAria":Ie,"_fnSortListener":Ae,"_fnSortAttachListener":Ee,"_fnSortingClasses":Me,"_fnSortData":Pe,"_fnSaveState":De,"_fnLoadState":Fe,"_fnSettingsFromNode":Oe,"_fnLog":Ne,"_fnMap":Re,"_fnBindAction":Le,"_fnCallbackReg":$e,"_fnCallbackFire":je,"_fnLengthOverflow":He,"_fnRenderer":ze,"_fnDataSource":Ue,"_fnRowAttributes":O,"_fnCalculateEnd":function(){}}),e.fn.dataTable=Ke,e.fn.dataTableSettings=Ke.settings,e.fn.dataTableExt=Ke.ext,e.fn.DataTable=function(t){return e(this).dataTable(t).api()},e.each(Ke,function(t,i){e.fn.DataTable[t]=i}),e.fn.dataTable}(e)}()}(window,document),e.fn.dataTable}),csui.define("csui/lib/jquery.dataTables.bootstrap/js/dataTables.bootstrap",["csui/lib/jquery","csui/lib/jquery.dataTables/js/jquery.dataTables","csui/lib/binf/js/binf"],function(e,t){return function(i,n,o){!function(i){"use strict";e&&"bootstrap"!=t.defaults.renderer&&function(e,t){e.extend(!0,t.defaults,{"dom":"<'binf-row'<'binf-col-sm-6'l><'binf-col-sm-6'f>><'binf-row'<'binf-col-sm-12'tr>><'binf-row'<'binf-col-sm-6'i><'binf-col-sm-6'p>>","renderer":"bootstrap"}),e.extend(t.ext.classes,{"sWrapper":"dataTables_wrapper binf-form-inline dt-bootstrap","sFilterInput":"binf-form-control binf-input-sm","sLengthSelect":"binf-form-control binf-input-sm"}),t.ext.renderer.pageButton.bootstrap=function(i,n,o,s,l,r){var a,c,u=new t.Api(i),d=i.oClasses,h=i.oLanguage.oPaginate,p=function(t,n){var s,m,f,g,b=function(t){t.preventDefault(),e(t.currentTarget).hasClass("binf-disabled")||u.page(t.data.action).draw(!1)};for(s=0,m=n.length;s<m;s++)if(g=n[s],e.isArray(g))p(t,g);else{switch(a="",c="",g){case"ellipsis":a="&hellip;",c=" binf-disabled";break;case"first":a=h.sFirst,c=g+(l>0?"":" binf-disabled");break;case"previous":a=h.sPrevious,
c=g+(l>0?"":" binf-disabled");break;case"next":a=h.sNext,c=g+(l<r-1?"":" binf-disabled");break;case"last":a=h.sLast,c=g+(l<r-1?"":" binf-disabled");break;default:a=g+1,c=l===g?" binf-active":""}a&&(f=e("<li>",{"class":d.sPageButton+" "+c,"aria-controls":i.sTableId,"tabindex":i.iTabIndex,"id":0===o&&"string"==typeof g?i.sTableId+"_"+g:null}).append(e("<a>",{"href":"#"}).html(a)).appendTo(t),i.oApi._fnBindAction(f,{"action":g},b))}};p(e(n).empty().html('<ul class="binf-pagination"/>').children("ul"),s)},t.TableTools&&(e.extend(!0,t.TableTools.classes,{"container":"DTTT binf-btn-group","buttons":{"normal":"binf-btn binf-btn-default","disabled":"binf-disabled"},"collection":{"container":"DTTT_dropdown binf-dropdown-menu","buttons":{"normal":"","disabled":"disabled"}},"print":{"info":"DTTT_print_info"},"select":{"row":"binf-active"}}),e.extend(!0,t.TableTools.DEFAULTS.oTags,{"collection":{"container":"ul","button":"li","liner":"a"}})),e.fn.dataTable}(e,t)}()}(window,document),e.fn.dataTable}),csui.define("csui/lib/jquery.dataTables.tableTools/js/dataTables.tableTools",["csui/lib/jquery","csui/lib/jquery.dataTables/js/jquery.dataTables"],function(e){var t;return function(i,n,o){e&&!e.fn.dataTable.TableTools&&function(o,s){var l={"version":"1.0.4-TableTools2","clients":{},"moviePath":"","nextId":1,"$":function(e){return"string"==typeof e&&(e=n.getElementById(e)),e.addClass||(e.hide=function(){this.style.display="none"},e.show=function(){this.style.display=""},e.addClass=function(e){this.removeClass(e),this.className+=" "+e},e.removeClass=function(e){this.className=this.className.replace(new RegExp("\\s*"+e+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},e.hasClass=function(e){return!!this.className.match(new RegExp("\\s*"+e+"\\s*"))}),e},"setMoviePath":function(e){this.moviePath=e},"dispatch":function(e,t,i){var n=this.clients[e];n&&n.receiveEvent(t,i)},"register":function(e,t){this.clients[e]=t},"getDOMObjectPosition":function(e){var t={"left":0,"top":0,"width":e.width?e.width:e.offsetWidth,"height":e.height?e.height:e.offsetHeight};for(""!==e.style.width&&(t.width=e.style.width.replace("px","")),""!==e.style.height&&(t.height=e.style.height.replace("px",""));e;)t.left+=e.offsetLeft,t.top+=e.offsetTop,e=e.offsetParent;return t},"Client":function(e){this.handlers={},this.id=l.nextId++,this.movieId="ZeroClipboard_TableToolsMovie_"+this.id,l.register(this.id,this),e&&this.glue(e)}};l.Client.prototype={"id":0,"ready":!1,"movie":null,"clipText":"","fileName":"","action":"copy","handCursorEnabled":!0,"cssEffects":!0,"handlers":null,"sized":!1,"glue":function(e,t){this.domElement=l.$(e);var i=99;this.domElement.style.zIndex&&(i=parseInt(this.domElement.style.zIndex,10)+1);var o=l.getDOMObjectPosition(this.domElement);this.div=n.createElement("div");var s=this.div.style;s.position="absolute",s.left="0px",s.top="0px",s.width=o.width+"px",s.height=o.height+"px",s.zIndex=i,void 0!==t&&""!==t&&(this.div.title=t),0!==o.width&&0!==o.height&&(this.sized=!0),this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(o.width,o.height).replace(/&/g,"&amp;"))},"positionElement":function(){var e=l.getDOMObjectPosition(this.domElement),t=this.div.style;if(t.position="absolute",t.width=e.width+"px",t.height=e.height+"px",0!==e.width&&0!==e.height){this.sized=!0;var i=this.div.childNodes[0];i.width=e.width,i.height=e.height}},"getHTML":function(e,t){var i="",n="id="+this.id+"&width="+e+"&height="+t;if(navigator.userAgent.match(/MSIE/)){i+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+(location.href.match(/^https/i)?"https://":"http://")+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+e+'" height="'+t+'" id="'+this.movieId+'" align="middle"><param name="allowFullScreen" value="false" /><param name="movie" value="'+l.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+n+'"/><param name="wmode" value="transparent"/></object>'}else i+='<embed id="'+this.movieId+'" src="'+l.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+e+'" height="'+t+'" name="'+this.movieId+'" align="middle" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+n+'" wmode="transparent" />';return i},"hide":function(){this.div&&(this.div.style.left="-2000px")},"show":function(){this.reposition()},"destroy":function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var e=n.getElementsByTagName("body")[0];try{e.removeChild(this.div)}catch(e){}this.domElement=null,this.div=null}},"reposition":function(e){if(e&&(this.domElement=l.$(e),this.domElement||this.hide()),this.domElement&&this.div){var t=l.getDOMObjectPosition(this.domElement),i=this.div.style;i.left=t.left+"px",i.top=t.top+"px"}},"clearText":function(){this.clipText="",this.ready&&this.movie.clearText()},"appendText":function(e){this.clipText+=e,this.ready&&this.movie.appendText(e)},"setText":function(e){this.clipText=e,this.ready&&this.movie.setText(e)},"setCharSet":function(e){this.charSet=e,this.ready&&this.movie.setCharSet(e)},"setBomInc":function(e){this.incBom=e,this.ready&&this.movie.setBomInc(e)},"setFileName":function(e){this.fileName=e,this.ready&&this.movie.setFileName(e)},"setAction":function(e){this.action=e,this.ready&&this.movie.setAction(e)},"addEventListener":function(e,t){e=e.toString().toLowerCase().replace(/^on/,""),this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},"setHandCursor":function(e){this.handCursorEnabled=e,this.ready&&this.movie.setHandCursor(e)},"setCSSEffects":function(e){this.cssEffects=!!e},"receiveEvent":function(e,t){var o;switch(e=e.toString().toLowerCase().replace(/^on/,"")){case"load":if(this.movie=n.getElementById(this.movieId),!this.movie)return o=this,void setTimeout(function(){o.receiveEvent("load",null)},1);if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/))return o=this,setTimeout(function(){o.receiveEvent("load",null)},100),void(this.ready=!0);this.ready=!0,this.movie.clearText(),this.movie.appendText(this.clipText),this.movie.setFileName(this.fileName),this.movie.setAction(this.action),this.movie.setCharSet(this.charSet),this.movie.setBomInc(this.incBom),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("binf-active");break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("binf-active")&&(this.domElement.removeClass("binf-active"),this.recoverActive=!0));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("binf-active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("binf-active"),this.recoverActive=!1)}if(this.handlers[e])for(var s=0,l=this.handlers[e].length;s<l;s++){var r=this.handlers[e][s];"function"==typeof r?r(this,t):"object"==typeof r&&2==r.length?r[0][r[1]](this,t):"string"==typeof r&&i[r](this,t)}}},i.ZeroClipboard_TableTools=l,function(e,i,n){t=function(i,n){!this instanceof t&&alert("Warning: TableTools must be initialised with the keyword 'new'");var o=e.fn.dataTable.Api?new e.fn.dataTable.Api(i).settings()[0]:i.fnSettings();return this.s={"that":this,"dt":o,"print":{"saveStart":-1,"saveLength":-1,"saveScroll":-1,"funcEnd":function(){}},"buttonCounter":0,"select":{"type":"","selected":[],"preRowSelect":null,"postSelected":null,"postDeselected":null,"all":!1,"selectedClass":""},"custom":{},"swfPath":"","buttonSet":[],"master":!1,"tags":{}},this.dom={"container":null,"table":null,"print":{"hidden":[],"message":null},"collection":{"collection":null,"background":null}},this.classes=e.extend(!0,{},t.classes),this.s.dt.bJUI&&e.extend(!0,this.classes,t.classes_themeroller),this.fnSettings=function(){return this.s},void 0===n&&(n={}),t._aInstances.push(this),this._fnConstruct(n),this},t.prototype={"fnGetSelected":function(e){var t,i,n=[],o=this.s.dt.aoData,s=this.s.dt.aiDisplay;if(e)for(t=0,i=s.length;t<i;t++)o[s[t]]._DTTT_selected&&n.push(o[s[t]].nTr);else for(t=0,i=o.length;t<i;t++)o[t]._DTTT_selected&&n.push(o[t].nTr);return n},"fnGetSelectedData":function(){var e,t,i=[],n=this.s.dt.aoData;for(e=0,t=n.length;e<t;e++)n[e]._DTTT_selected&&i.push(this.s.dt.oInstance.fnGetData(e));return i},"fnGetSelectedIndexes":function(e){var t,i,n=[],o=this.s.dt.aoData,s=this.s.dt.aiDisplay;if(e)for(t=0,i=s.length;t<i;t++)o[s[t]]._DTTT_selected&&n.push(s[t]);else for(t=0,i=o.length;t<i;t++)o[t]._DTTT_selected&&n.push(t);return n},"fnIsSelected":function(e){var t=this.s.dt.oInstance.fnGetPosition(e);return!0===this.s.dt.aoData[t]._DTTT_selected},"fnSelectAll":function(e){this._fnRowSelect(e?this.s.dt.aiDisplay:this.s.dt.aoData)},"fnSelectNone":function(e){this._fnRowDeselect(this.fnGetSelectedIndexes(e))},"fnSelect":function(e){"single"==this.s.select.type?(this.fnSelectNone(),this._fnRowSelect(e)):this._fnRowSelect(e)},"fnDeselect":function(e){this._fnRowDeselect(e)},"fnGetTitle":function(e){var t="";if(void 0!==e.sTitle&&""!==e.sTitle)t=e.sTitle;else{var i=n.getElementsByTagName("title");i.length>0&&(t=i[0].innerHTML)}return"\xa1".toString().length<4?t.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):t.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")},"fnCalcColRatios":function(e){var t,i,n=this.s.dt.aoColumns,o=this._fnColumnTargets(e.mColumns),s=[],l=0,r=0;for(t=0,i=o.length;t<i;t++)o[t]&&(l=n[t].nTh.offsetWidth,r+=l,s.push(l));for(t=0,i=s.length;t<i;t++)s[t]=s[t]/r;return s.join("\t")},"fnGetTableData":function(e){if(this.s.dt)return this._fnGetDataTablesData(e)},"fnSetText":function(e,t){this._fnFlashSetText(e,t)},"fnResizeButtons":function(){for(var e in l.clients)if(e){var t=l.clients[e];void 0!==t.domElement&&t.domElement.parentNode&&t.positionElement()}},"fnResizeRequired":function(){for(var e in l.clients)if(e){var t=l.clients[e];if(void 0!==t.domElement&&t.domElement.parentNode==this.dom.container&&!1===t.sized)return!0}return!1},"fnPrint":function(e,t){void 0===t&&(t={}),void 0===e||e?this._fnPrintStart(t):this._fnPrintEnd()},"fnInfo":function(t,i){var n=e("<div/>").addClass(this.classes.print.info).html(t).appendTo("body");setTimeout(function(){n.fadeOut("normal",function(){n.remove()})},i)},"fnContainer":function(){return this.dom.container},"_fnConstruct":function(i){var o=this;this._fnCustomiseSettings(i),this.dom.container=n.createElement(this.s.tags.container),this.dom.container.className=this.classes.container,"none"!=this.s.select.type&&this._fnRowSelectConfig(),this._fnButtonDefinations(this.s.buttonSet,this.dom.container),this.s.dt.aoDestroyCallback.push({"sName":"TableTools","fn":function(){e(o.s.dt.nTBody).off("click.DTTT_Select","tr"),e(o.dom.container).empty();var i=e.inArray(o,t._aInstances);-1!==i&&t._aInstances.splice(i,1)}})},"_fnCustomiseSettings":function(i){void 0===this.s.dt._TableToolsInit&&(this.s.master=!0,this.s.dt._TableToolsInit=!0),this.dom.table=this.s.dt.nTable,this.s.custom=e.extend({},t.DEFAULTS,i),this.s.swfPath=this.s.custom.sSwfPath,void 0!==l&&(l.moviePath=this.s.swfPath),this.s.select.type=this.s.custom.sRowSelect,this.s.select.preRowSelect=this.s.custom.fnPreRowSelect,this.s.select.postSelected=this.s.custom.fnRowSelected,this.s.select.postDeselected=this.s.custom.fnRowDeselected,this.s.custom.sSelectedClass&&(this.classes.select.row=this.s.custom.sSelectedClass),this.s.tags=this.s.custom.oTags,this.s.buttonSet=this.s.custom.aButtons},"_fnButtonDefinations":function(i,n){for(var o,s=0,l=i.length;s<l;s++){if("string"==typeof i[s]){if(void 0===t.BUTTONS[i[s]]){alert("TableTools: Warning - unknown button type: "+i[s]);continue}o=e.extend({},t.BUTTONS[i[s]],!0)}else{if(void 0===t.BUTTONS[i[s].sExtends]){alert("TableTools: Warning - unknown button type: "+i[s].sExtends);continue}var r=e.extend({},t.BUTTONS[i[s].sExtends],!0);o=e.extend(r,i[s],!0)}var a=this._fnCreateButton(o,e(n).hasClass(this.classes.collection.container));a&&n.appendChild(a)}},"_fnCreateButton":function(t,i){var n=this._fnButtonBase(t,i);if(t.sAction.match(/flash/)){if(!this._fnHasFlash())return!1;this._fnFlashConfig(n,t)}else"text"==t.sAction?this._fnTextConfig(n,t):"div"==t.sAction?this._fnTextConfig(n,t):"collection"==t.sAction&&(this._fnTextConfig(n,t),this._fnCollectionConfig(n,t));return-1!==this.s.dt.iTabIndex&&e(n).attr("tabindex",this.s.dt.iTabIndex).attr("aria-controls",this.s.dt.sTableId).on("keyup.DTTT",function(t){13===t.keyCode&&(t.stopPropagation(),e(this).trigger("click"))}).on("mousedown.DTTT",function(e){t.sAction.match(/flash/)||e.preventDefault()}),n},"_fnButtonBase":function(e,t){var i,o,s;t?(i=e.sTag&&"default"!==e.sTag?e.sTag:this.s.tags.collection.button,o=e.sLinerTag&&"default"!==e.sLinerTag?e.sLiner:this.s.tags.collection.liner,s=this.classes.collection.buttons.normal):(i=e.sTag&&"default"!==e.sTag?e.sTag:this.s.tags.button,o=e.sLinerTag&&"default"!==e.sLinerTag?e.sLiner:this.s.tags.liner,s=this.classes.buttons.normal);var l=n.createElement(i),r=n.createElement(o),a=this._fnGetMasterSettings();return l.className=s+" "+e.sButtonClass,l.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+a.buttonCounter),l.appendChild(r),r.innerHTML=e.sButtonText,a.buttonCounter++,l},"_fnGetMasterSettings":function(){if(this.s.master)return this.s;for(var e=t._aInstances,i=0,n=e.length;i<n;i++)if(this.dom.table==e[i].s.dt.nTable)return e[i].s},"_fnCollectionConfig":function(e,t){var i=n.createElement(this.s.tags.collection.container);i.style.display="none",i.className=this.classes.collection.container,t._collection=i,n.body.appendChild(i),this._fnButtonDefinations(t.aButtons,i)},"_fnCollectionShow":function(t,o){var s=this,l=e(t).offset(),r=o._collection,a=l.left,c=l.top+e(t).outerHeight(),u=e(i).height(),d=e(n).height(),h=e(i).width(),p=e(n).width();r.style.position="absolute",r.style.left=a+"px",r.style.top=c+"px",r.style.display="block",e(r).css("opacity",0);var m=n.createElement("div");m.style.position="absolute",m.style.left="0px",m.style.top="0px",m.style.height=(u>d?u:d)+"px",m.style.width=(h>p?h:p)+"px",m.className=this.classes.collection.background,e(m).css("opacity",0),n.body.appendChild(m),n.body.appendChild(r);var f=e(r).outerWidth(),g=e(r).outerHeight();a+f>p&&(r.style.left=p-f+"px"),c+g>d&&(r.style.top=c-g-e(t).outerHeight()+"px"),this.dom.collection.collection=r,this.dom.collection.background=m,setTimeout(function(){e(r).animate({"opacity":1},500),e(m).animate({"opacity":.25},500)},10),this.fnResizeButtons(),e(m).click(function(){s._fnCollectionHide.call(s,null,null)})},"_fnCollectionHide":function(t,i){null!==i&&"collection"==i.sExtends||null!==this.dom.collection.collection&&(e(this.dom.collection.collection).animate({"opacity":0},500,function(e){this.style.display="none"}),e(this.dom.collection.background).animate({"opacity":0},500,function(e){this.parentNode.removeChild(this)}),this.dom.collection.collection=null,this.dom.collection.background=null)},"_fnRowSelectConfig":function(){if(this.s.master){var t=this,i=this.s.dt;this.s.dt.aoOpenRows;e(i.nTable).addClass(this.classes.select.table),"os"===this.s.select.type&&(e(i.nTBody).on("mousedown.DTTT_Select","tr",function(t){t.shiftKey&&e(i.nTBody).css("-moz-user-select","none").one("selectstart.DTTT_Select","tr",function(){return!1})}),e(i.nTBody).on("mouseup.DTTT_Select","tr",function(t){e(i.nTBody).css("-moz-user-select","")})),e(i.nTBody).on("click.DTTT_Select",this.s.custom.sRowSelector,function(n){var o="tr"===this.nodeName.toLowerCase()?this:e(this).parents("tr")[0],s=t.s.select,l=t.s.dt.oInstance.fnGetPosition(o);if(o.parentNode==i.nTBody&&null!==i.oInstance.fnGetData(o)){if("os"==s.type)if(n.ctrlKey||n.metaKey)t.fnIsSelected(o)?t._fnRowDeselect(o,n):t._fnRowSelect(o,n);else if(n.shiftKey){var r=t.s.dt.aiDisplay.slice(),a=e.inArray(s.lastRow,r),c=e.inArray(l,r);if(0===t.fnGetSelected().length||-1===a)r.splice(e.inArray(l,r)+1,r.length);else{if(a>c){var u=c;c=a,a=u}r.splice(c+1,r.length),r.splice(0,a)}t.fnIsSelected(o)?(r.splice(e.inArray(l,r),1),t._fnRowDeselect(r,n)):t._fnRowSelect(r,n)}else t.fnIsSelected(o)&&1===t.fnGetSelected().length?t._fnRowDeselect(o,n):(t.fnSelectNone(),t._fnRowSelect(o,n));else t.fnIsSelected(o)?t._fnRowDeselect(o,n):"single"==s.type?(t.fnSelectNone(),t._fnRowSelect(o,n)):"multi"==s.type&&t._fnRowSelect(o,n);s.lastRow=l}}),i.oApi._fnCallbackReg(i,"aoRowCreatedCallback",function(n,o,s){i.aoData[s]._DTTT_selected&&e(n).addClass(t.classes.select.row)},"TableTools-SelectAll")}},"_fnRowSelect":function(i,n){var o,s,l=this,r=this._fnSelectData(i),a=(0===r.length||r[0].nTr,[]);for(o=0,s=r.length;o<s;o++)r[o].nTr&&a.push(r[o].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,n,a,!0)){for(o=0,s=r.length;o<s;o++)r[o]._DTTT_selected=!0,r[o].nTr&&e(r[o].nTr).addClass(l.classes.select.row);null!==this.s.select.postSelected&&this.s.select.postSelected.call(this,a),t._fnEventDispatch(this,"select",a,!0)}},"_fnRowDeselect":function(i,n){var o,s,l=this,r=this._fnSelectData(i),a=(0===r.length||r[0].nTr,[]);for(o=0,s=r.length;o<s;o++)r[o].nTr&&a.push(r[o].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,n,a,!1)){for(o=0,s=r.length;o<s;o++)r[o]._DTTT_selected=!1,r[o].nTr&&e(r[o].nTr).removeClass(l.classes.select.row);null!==this.s.select.postDeselected&&this.s.select.postDeselected.call(this,a),t._fnEventDispatch(this,"select",a,!1)}},"_fnSelectData":function(e){var t,i,n,o=[];if(e.nodeName)t=this.s.dt.oInstance.fnGetPosition(e),o.push(this.s.dt.aoData[t]);else{if(void 0!==e.length){for(i=0,n=e.length;i<n;i++)e[i].nodeName?(t=this.s.dt.oInstance.fnGetPosition(e[i]),o.push(this.s.dt.aoData[t])):"number"==typeof e[i]?o.push(this.s.dt.aoData[e[i]]):o.push(e[i]);return o}o.push(e)}return o},"_fnTextConfig":function(i,n){var o=this;null!==n.fnInit&&n.fnInit.call(this,i,n),""!==n.sToolTip&&(i.title=n.sToolTip),e(i).hover(function(){null!==n.fnMouseover&&n.fnMouseover.call(this,i,n,null)},function(){null!==n.fnMouseout&&n.fnMouseout.call(this,i,n,null)}),null!==n.fnSelect&&t._fnEventListen(this,"select",function(e){n.fnSelect.call(o,i,n,e)}),e(i).click(function(e){null!==n.fnClick&&n.fnClick.call(o,i,n,null,e),null!==n.fnComplete&&n.fnComplete.call(o,i,n,null,null),o._fnCollectionHide(i,n)})},"_fnHasFlash":function(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(e){if(navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1},"_fnFlashConfig":function(e,t){var i=this,n=new l.Client;null!==t.fnInit&&t.fnInit.call(this,e,t),n.setHandCursor(!0),"flash_save"==t.sAction?(n.setAction("save"),n.setCharSet("utf16le"==t.sCharSet?"UTF16LE":"UTF8"),n.setBomInc(t.bBomInc),n.setFileName(t.sFileName.replace("*",this.fnGetTitle(t)))):"flash_pdf"==t.sAction?(n.setAction("pdf"),n.setFileName(t.sFileName.replace("*",this.fnGetTitle(t)))):n.setAction("copy"),n.addEventListener("mouseOver",function(o){null!==t.fnMouseover&&t.fnMouseover.call(i,e,t,n)}),n.addEventListener("mouseOut",function(o){null!==t.fnMouseout&&t.fnMouseout.call(i,e,t,n)}),n.addEventListener("mouseDown",function(o){null!==t.fnClick&&t.fnClick.call(i,e,t,n)}),n.addEventListener("complete",function(o,s){null!==t.fnComplete&&t.fnComplete.call(i,e,t,n,s),i._fnCollectionHide(e,t)}),this._fnFlashGlue(n,e,t.sToolTip)},"_fnFlashGlue":function(e,t,i){var o=this,s=t.getAttribute("id");n.getElementById(s)?e.glue(t,i):setTimeout(function(){o._fnFlashGlue(e,t,i)},100)},"_fnFlashSetText":function(e,t){var i=this._fnChunkData(t,8192);e.clearText();for(var n=0,o=i.length;n<o;n++)e.appendText(i[n])},"_fnColumnTargets":function(t){var i,n,o=[],s=this.s.dt,l=s.aoColumns,r=l.length;if("function"==typeof t){var a=t.call(this,s);for(i=0,n=r;i<n;i++)o.push(-1!==e.inArray(i,a))}else if("object"==typeof t){for(i=0,n=r;i<n;i++)o.push(!1);for(i=0,n=t.length;i<n;i++)o[t[i]]=!0}else if("visible"==t)for(i=0,n=r;i<n;i++)o.push(!!l[i].bVisible);else if("hidden"==t)for(i=0,n=r;i<n;i++)o.push(!l[i].bVisible);else if("sortable"==t)for(i=0,n=r;i<n;i++)o.push(!!l[i].bSortable);else for(i=0,n=r;i<n;i++)o.push(!0);return o},"_fnNewline":function(e){return"auto"==e.sNewLine?navigator.userAgent.match(/Windows/)?"\r\n":"\n":e.sNewLine},"_fnGetDataTablesData":function(t){var i,n,o,l,r,a,c,u=[],d="",h=this.s.dt,p=new RegExp(t.sFieldBoundary,"g"),m=this._fnColumnTargets(t.mColumns),f=void 0!==t.bSelectedOnly&&t.bSelectedOnly;if(t.bHeader){for(r=[],i=0,n=h.aoColumns.length;i<n;i++)m[i]&&(d=h.aoColumns[i].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),d=this._fnHtmlDecode(d),r.push(this._fnBoundData(d,t.sFieldBoundary,p)));u.push(r.join(t.sFieldSeperator))}f=!0;var g,b=this.fnGetSelectedIndexes();for(f="none"!==this.s.select.type&&f&&0!==b.length,g=f?b:s.Api?new s.Api(h).rows(t.oSelectorOpts).indexes().flatten().toArray():h.oInstance.$("tr",t.oSelectorOpts).map(function(e,t){return h.oInstance.fnGetPosition(t)}).get(),o=0,l=g.length;o<l;o++){for(c=h.aoData[g[o]].nTr,r=[],i=0,n=h.aoColumns.length;i<n;i++)if(m[i]){var v=h.oApi._fnGetCellData(h,g[o],i,"display");t.fnCellRender?d=t.fnCellRender(v,i,c,g[o])+"":"string"==typeof v?(d=v.replace(/\n/g," "),d=d.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,"$1$2$3"),d=d.replace(/<.*?>/g,"")):d=v+"",d=d.replace(/^\s+/,"").replace(/\s+$/,""),d=this._fnHtmlDecode(d),r.push(this._fnBoundData(d,t.sFieldBoundary,p))}u.push(r.join(t.sFieldSeperator)),t.bOpenRows&&(a=e.grep(h.aoOpenRows,function(e){return e.nParent===c}),1===a.length&&(d=this._fnBoundData(e("td",a[0].nTr).html(),t.sFieldBoundary,p),u.push(d)))}if(t.bFooter&&null!==h.nTFoot){for(r=[],i=0,n=h.aoColumns.length;i<n;i++)m[i]&&null!==h.aoColumns[i].nTf&&(d=h.aoColumns[i].nTf.innerHTML.replace(/\n/g," ").replace(/<.*?>/g,""),d=this._fnHtmlDecode(d),r.push(this._fnBoundData(d,t.sFieldBoundary,p)));u.push(r.join(t.sFieldSeperator))}return u.join(this._fnNewline(t))},"_fnBoundData":function(e,t,i){return""===t?e:t+e.replace(i,t+t)+t},"_fnChunkData":function(e,t){for(var i=[],n=e.length,o=0;o<n;o+=t)o+t<n?i.push(e.substring(o,o+t)):i.push(e.substring(o,n));return i},"_fnHtmlDecode":function(e){if(-1===e.indexOf("&"))return e;var t=n.createElement("div");return e.replace(/&([^\s]*?);/g,function(e,i){return"#"===e.substr(1,1)?String.fromCharCode(Number(i.substr(1))):(t.innerHTML=e,t.childNodes[0].nodeValue)})},"_fnPrintStart":function(t){var o=this,s=this.s.dt;this._fnPrintHideNodes(s.nTable),this.s.print.saveStart=s._iDisplayStart,this.s.print.saveLength=s._iDisplayLength,t.bShowAll&&(s._iDisplayStart=0,s._iDisplayLength=-1,s.oApi._fnCalculateEnd&&s.oApi._fnCalculateEnd(s),s.oApi._fnDraw(s)),""===s.oScroll.sX&&""===s.oScroll.sY||(this._fnPrintScrollStart(s),e(this.s.dt.nTable).bind("draw.DTTT_Print",function(){o._fnPrintScrollStart(s)}));var l=s.aanFeatures;for(var r in l)if("i"!=r&&"t"!=r&&1==r.length)for(var a=0,c=l[r].length;a<c;a++)this.dom.print.hidden.push({"node":l[r][a],"display":"block"}),l[r][a].style.display="none";e(n.body).addClass(this.classes.print.body),""!==t.sInfo&&this.fnInfo(t.sInfo,3e3),t.sMessage&&e("<div/>").addClass(this.classes.print.message).html(t.sMessage).prependTo("body"),this.s.print.saveScroll=e(i).scrollTop(),i.scrollTo(0,0),e(n).bind("keydown.DTTT",function(e){27==e.keyCode&&(e.preventDefault(),o._fnPrintEnd.call(o,e))})},"_fnPrintEnd":function(t){var o=this.s.dt,s=this.s.print;this.dom.print;this._fnPrintShowNodes(),""===o.oScroll.sX&&""===o.oScroll.sY||(e(this.s.dt.nTable).unbind("draw.DTTT_Print"),this._fnPrintScrollEnd()),i.scrollTo(0,s.saveScroll),e("div."+this.classes.print.message).remove(),e(n.body).removeClass("DTTT_Print"),o._iDisplayStart=s.saveStart,o._iDisplayLength=s.saveLength,o.oApi._fnCalculateEnd&&o.oApi._fnCalculateEnd(o),o.oApi._fnDraw(o),e(n).unbind("keydown.DTTT")},"_fnPrintScrollStart":function(){var t,i,n=this.s.dt,o=n.nScrollHead.getElementsByTagName("div")[0],s=(o.getElementsByTagName("table")[0],n.nTable.parentNode);t=n.nTable.getElementsByTagName("thead"),t.length>0&&n.nTable.removeChild(t[0]),null!==n.nTFoot&&(i=n.nTable.getElementsByTagName("tfoot"),i.length>0&&n.nTable.removeChild(i[0])),t=n.nTHead.cloneNode(!0),n.nTable.insertBefore(t,n.nTable.childNodes[0]),null!==n.nTFoot&&(i=n.nTFoot.cloneNode(!0),n.nTable.insertBefore(i,n.nTable.childNodes[1])),""!==n.oScroll.sX&&(n.nTable.style.width=e(n.nTable).outerWidth()+"px",s.style.width=e(n.nTable).outerWidth()+"px",s.style.overflow="visible"),""!==n.oScroll.sY&&(s.style.height=e(n.nTable).outerHeight()+"px",s.style.overflow="visible")},"_fnPrintScrollEnd":function(){var e=this.s.dt,t=e.nTable.parentNode;""!==e.oScroll.sX&&(t.style.width=e.oApi._fnStringToCss(e.oScroll.sX),t.style.overflow="auto"),""!==e.oScroll.sY&&(t.style.height=e.oApi._fnStringToCss(e.oScroll.sY),t.style.overflow="auto")},"_fnPrintShowNodes":function(){for(var e=this.dom.print.hidden,t=0,i=e.length;t<i;t++)e[t].node.style.display=e[t].display;e.splice(0,e.length)},"_fnPrintHideNodes":function(t){for(var i=this.dom.print.hidden,n=t.parentNode,o=n.childNodes,s=0,l=o.length;s<l;s++)if(o[s]!=t&&1==o[s].nodeType){var r=e(o[s]).css("display");"none"!=r&&(i.push({"node":o[s],"display":r}),o[s].style.display="none")}"BODY"!=n.nodeName.toUpperCase()&&this._fnPrintHideNodes(n)}},t._aInstances=[],t._aListeners=[],t.fnGetMasters=function(){for(var e=[],i=0,n=t._aInstances.length;i<n;i++)t._aInstances[i].s.master&&e.push(t._aInstances[i]);return e},t.fnGetInstance=function(e){"object"!=typeof e&&(e=n.getElementById(e));for(var i=0,o=t._aInstances.length;i<o;i++)if(t._aInstances[i].s.master&&t._aInstances[i].dom.table==e)return t._aInstances[i];return null},t._fnEventListen=function(e,i,n){t._aListeners.push({"that":e,"type":i,"fn":n})},t._fnEventDispatch=function(e,i,n,o){for(var s=t._aListeners,l=0,r=s.length;l<r;l++)e.dom.table==s[l].that.dom.table&&s[l].type==i&&s[l].fn(n,o)},t.buttonBase={"sAction":"text","sTag":"default","sLinerTag":"default","sButtonClass":"DTTT_button_text","sButtonText":"Button text","sTitle":"","sToolTip":"","sCharSet":"utf8","bBomInc":!1,"sFileName":"*.csv","sFieldBoundary":"","sFieldSeperator":"\t","sNewLine":"auto","mColumns":"all","bHeader":!0,"bFooter":!0,"bOpenRows":!1,"bSelectedOnly":!1,"oSelectorOpts":void 0,"fnMouseover":null,"fnMouseout":null,"fnClick":null,"fnSelect":null,"fnComplete":null,"fnInit":null,"fnCellRender":null},t.BUTTONS={"csv":e.extend({},t.buttonBase,{"sAction":"flash_save","sButtonClass":"DTTT_button_csv","sButtonText":"CSV","sFieldBoundary":'"',"sFieldSeperator":",","fnClick":function(e,t,i){this.fnSetText(i,this.fnGetTableData(t))}}),"xls":e.extend({},t.buttonBase,{"sAction":"flash_save","sCharSet":"utf16le","bBomInc":!0,"sButtonClass":"DTTT_button_xls","sButtonText":"Excel","fnClick":function(e,t,i){this.fnSetText(i,this.fnGetTableData(t))}}),"copy":e.extend({},t.buttonBase,{"sAction":"flash_copy","sButtonClass":"DTTT_button_copy","sButtonText":"Copy","fnClick":function(e,t,i){this.fnSetText(i,this.fnGetTableData(t))},"fnComplete":function(e,t,i,n){var o=n.split("\n").length;t.bHeader&&o--,null!==this.s.dt.nTFoot&&t.bFooter&&o--;var s=1==o?"":"s";this.fnInfo("<h6>Table copied</h6><p>Copied "+o+" row"+s+" to the clipboard.</p>",1500)}}),"pdf":e.extend({},t.buttonBase,{"sAction":"flash_pdf","sNewLine":"\n","sFileName":"*.pdf","sButtonClass":"DTTT_button_pdf","sButtonText":"PDF","sPdfOrientation":"portrait","sPdfSize":"A4","sPdfMessage":"","fnClick":function(e,t,i){this.fnSetText(i,"title:"+this.fnGetTitle(t)+"\nmessage:"+t.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(t)+"\norientation:"+t.sPdfOrientation+"\nsize:"+t.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(t))}}),"print":e.extend({},t.buttonBase,{"sInfo":"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.</p>","sMessage":null,"bShowAll":!0,"sToolTip":"View print view","sButtonClass":"DTTT_button_print","sButtonText":"Print","fnClick":function(e,t){this.fnPrint(!0,t)}}),"text":e.extend({},t.buttonBase),"select":e.extend({},t.buttonBase,{"sButtonText":"Select button","fnSelect":function(t,i){0!==this.fnGetSelected().length?e(t).removeClass(this.classes.buttons.disabled):e(t).addClass(this.classes.buttons.disabled)},"fnInit":function(t,i){e(t).addClass(this.classes.buttons.disabled)}}),"select_single":e.extend({},t.buttonBase,{"sButtonText":"Select button","fnSelect":function(t,i){1==this.fnGetSelected().length?e(t).removeClass(this.classes.buttons.disabled):e(t).addClass(this.classes.buttons.disabled)},"fnInit":function(t,i){e(t).addClass(this.classes.buttons.disabled)}}),"select_all":e.extend({},t.buttonBase,{"sButtonText":"Select all","fnClick":function(e,t){this.fnSelectAll()},"fnSelect":function(t,i){this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()?e(t).addClass(this.classes.buttons.disabled):e(t).removeClass(this.classes.buttons.disabled)}}),"select_none":e.extend({},t.buttonBase,{"sButtonText":"Deselect all","fnClick":function(e,t){this.fnSelectNone()},"fnSelect":function(t,i){0!==this.fnGetSelected().length?e(t).removeClass(this.classes.buttons.disabled):e(t).addClass(this.classes.buttons.disabled)},"fnInit":function(t,i){e(t).addClass(this.classes.buttons.disabled)}}),"ajax":e.extend({},t.buttonBase,{"sAjaxUrl":"/xhr.php","sButtonText":"Ajax button","fnClick":function(t,i){var n=this.fnGetTableData(i);e.ajax({"url":i.sAjaxUrl,"data":[{"name":"tableData","value":n}],"success":i.fnAjaxComplete,"dataType":"json","type":"POST","cache":!1,"error":function(){alert("Error detected when sending table data to server")}})},"fnAjaxComplete":function(e){alert("Ajax complete")}}),"div":e.extend({},t.buttonBase,{"sAction":"div","sTag":"div","sButtonClass":"DTTT_nonbutton","sButtonText":"Text button"}),"collection":e.extend({},t.buttonBase,{"sAction":"collection","sButtonClass":"DTTT_button_collection","sButtonText":"Collection","fnClick":function(e,t){this._fnCollectionShow(e,t)}})},t.buttons=t.BUTTONS,t.classes={"container":"DTTT_container","buttons":{"normal":"DTTT_button","disabled":"DTTT_disabled"},"collection":{"container":"DTTT_collection","background":"DTTT_collection_background","buttons":{"normal":"DTTT_button","disabled":"DTTT_disabled"}},"select":{"table":"DTTT_selectable","row":"DTTT_selected selected"},"print":{"body":"DTTT_Print","info":"DTTT_print_info","message":"DTTT_PrintMessage"}},t.classes_themeroller={"container":"DTTT_container ui-buttonset ui-buttonset-multi","buttons":{"normal":"DTTT_button ui-button ui-state-default"},"collection":{"container":"DTTT_collection ui-buttonset ui-buttonset-multi"}},t.DEFAULTS={"sSwfPath":"../swf/copy_csv_xls_pdf.swf","sRowSelect":"none","sRowSelector":"tr","sSelectedClass":null,"fnPreRowSelect":null,"fnRowSelected":null,"fnRowDeselected":null,"aButtons":["copy","csv","xls","pdf","print"],"oTags":{"container":"div","button":"a","liner":"span","collection":{"container":"div","button":"a","liner":"span"}}},t.defaults=t.DEFAULTS,t.prototype.CLASS="TableTools",t.version="2.2.3",e.fn.dataTable.Api&&e.fn.dataTable.Api.register("tabletools()",function(){var e=null;return this.context.length>0&&(e=t.fnGetInstance(this.context[0].nTable)),e}),"function"==typeof e.fn.dataTable&&"function"==typeof e.fn.dataTableExt.fnVersionCheck&&e.fn.dataTableExt.fnVersionCheck("1.9.0")?e.fn.dataTableExt.aoFeatures.push({"fnInit":function(e){var i=e.oInit,n=i?i.tableTools||i.oTableTools||{}:{};return new t(e.oInstance,n).dom.container},"cFeature":"T","sFeature":"TableTools"}):alert("Warning: TableTools requires DataTables 1.9.0 or newer - www.datatables.net/download"),e.fn.DataTable.TableTools=t}(e,i,n),
"function"==typeof o.fn.dataTable&&"function"==typeof o.fn.dataTableExt.fnVersionCheck&&o.fn.dataTableExt.fnVersionCheck("1.9.0")?o.fn.dataTableExt.aoFeatures.push({"fnInit":function(e){var i=void 0!==e.oInit.oTableTools?e.oInit.oTableTools:{},n=new t(e.oInstance,i);return t._aInstances.push(n),n.dom.container},"cFeature":"T","sFeature":"TableTools"}):alert("Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download"),o.fn.dataTable.TableTools=t,o.fn.DataTable.TableTools=t}(e,e.fn.dataTable)}(window,document),e.fn.dataTable.TableTools}),csui.define("csui/controls/table/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/impl/nls/root/lang",{"columnSortAscendingTooltip":"{0} - Click to sort ascending","columnSortDescendingTooltip":"{0} - Click to sort descending","searchPlaceholder":"{0}","searchInputTooltip":"Search {0}","searchByNamePlaceholder":"Name","searchByNameAria":"Search by name","searchIconTooltip":"Search in {0}","searchClearIconTooltip":"Clear","collapseSearch":"Close search","collapseSearchAria":"Clear all and close search","selectAll":"Select all items","selectAllAria":"Select all items","selectItem":"Select {0}","selectItemAria":"Select {0}. When selected an action bar of options can be reached per shift-tab","selectItemICanNotAria":"Can not select {0}","selectedItemActionBarAria":"Action bar of selected items","nameAria":"{0}","noUserFound":"NO USERS FOUND","noResultsFound":"No results found","nameNoOpenAria":"{0}. Can not be opened.","NodeTableNoItems":"No item to display.","NodeTableNoSearchResult":"No results found.","NodeTableLoadingItems":"Loading...","NodeTableProcessingItems":"","NodeTablePageInfo":"Showing _START_ to _END_ of _TOTAL_ items","NodeTableEmptyPageInfo":"Showing 0 items","NodeTableFilteredPageInfo":"(filtered from _MAX_ total items)","NodeTablePageInfoSuffix":"","NodeTablePageThousandsSeparator":",","NodeTablePagingFirst":"First","NodeTablePagingLast":"Last","NodeTablePagingPrevious":"Previous","NodeTablePagingNext":"Next","NodeTablePageSizeSelector":"Show _MENU_ items","NodeTablePageFilterLabel":"Filter by:","NodeTableSortedDescendingColumnAria":"{0} in descending order","NodeTableSortedAscendingColumnAria":"{0} in ascending order","NodeTableSortAscendingTooltip":"{0} - Click to sort ascending","NodeTableSortDescendingTooltip":"{0} - Click to sort descending","NodeTableIsUnsortedTooltip":"Unsorted","NodeTableSortAscendingButtonAria":"{0} - Sort ascending","NodeTableSortDescendingButtonAria":"{0} - Sort descending","MasterCompoundDocumentLabel":"Master","backButtonTooltip":"Go back","typeAndNameAria":"{0} {1}","tableApplicationAria":"Table","selectionColumnTitle":"Selected","descriptionColumnTitle":"Description","toggleDetailsColumnTitle":"Toggle details","cellNoTextAria":"No text","noPermissions":"You don't have permissions to add items to this location.","promotedLabel":"Promoted","Bytes":"Bytes","KiloBytes":"KB","MegaBytes":"MB","GigaBytes":"GB","TeraBytes":"TB","Items":"{0} Items","Item":"{0} Item","ZeroByte":"0 Byte","favorite":"Favorite","reserved":"Reserved"}),csui.define("csui/utils/focusable",["csui/lib/ally"],function(e){"use strict";function t(t,i){var n=i?i.querySelector(t):t;return e.query.focusable({"context":n,"includeContext":!1,"strategy":"quick"})}function i(t){return e.is.focusable(t)}return{"findFocusables":t,"isFocusable":i}}),csui.define("csui/controls/table/cells/cell.registry",["csui/lib/underscore"],function(e){function t(){this._columnKeys={},this._columnOtherKeys={},this._dataTypes={}}return e.extend(t.prototype,{"hasCellViewByOtherKey":function(e){return!!this._columnOtherKeys[e]},"getCellView":function(e){if("type"!==e.get("column_type_identifier")){var t=e.get("column_key"),i=t&&this._columnKeys[t];if(i)return i}var n=e.get("type");return n&&this._dataTypes[n.toString()]},"registerByColumnKey":function(t,i){if(!e.isString(t)||!t)throw new Error("Column key must be a non-empty string");this._registerCellView(this._columnKeys,t,i)},"registerByOtherColumnKey":function(t,i){if(!e.isString(t)||!t)throw new Error("Column key must be a non-empty string");this._registerCellView(this._columnOtherKeys,t,i)},"registerByDataType":function(t,i){if(!e.isNumber(t)||!t)throw new Error("Data type must be a non-zero number");this._registerCellView(this._dataTypes,t.toString(),i)},"_registerCellView":function(e,t,i){if("function"!=typeof i)throw new Error("Column handler must be a function object");e[t]=i}}),new t}),csui.define("csui/controls/table/cells/cell/cell.view",["module","csui/lib/underscore","csui/lib/marionette","csui/utils/focusable","i18n!csui/controls/table/impl/nls/lang"],function(e,t,i,n,o){"use strict";var s=t.extend({"multiValueSeparator":", "},e.config());return i.View.extend({"tagName":"td","constructor":function(e){i.View.prototype.constructor.apply(this,arguments),this.listenTo(this,"before:render",this._detachClickHandler).listenTo(this,"before:destroy",this._detachClickHandler)},"render":function(){return this._ensureViewIsIntact(),this._renderContent(),this.bindUIElements(),this._attachClickHandler(),this.triggerMethod("render",this),this},"_renderContent":function(){var e=t.result(this,"className");e&&this.$el.addClass(e);var i=this.options.column;if(i){var n=i.name;this.$el.attr("data-csui-attribute",n),this.model.get("addEmptyAttribute")&&!this.model.get(n)&&void 0!==this.model.get(n)&&this.el.setAttribute("data-csui-empty-cell",!0)}this.renderValue(),this._ensureAriaLabel()},"_ensureAriaLabel":function(){if(!1!==this.needsAriaLabel){if(void 0===this.needsAriaLabel){if(1===n.findFocusables(this.el).length)return}var e=this.getAriaLabel();e&&this.$el.attr("aria-label",e)}},"_attachClickHandler":function(){var e=this;this.$el.on("click."+this.cid,function(t){e.triggerMethod("clicked:cell",t)})},"_detachClickHandler":function(){this.$el.off("click."+this.cid)},"renderValue":function(){var e=this.getValueText();this.$el.text(e),this.$el.attr("title",e)},"getValueText":function(){var e=this.options.column;if(e){var t=e.name,i=this.model,n=i.get(t+"_formatted");return null!==n&&void 0!==n||(n=i.get(t),n="order"===t&&0===n?o.MasterCompoundDocumentLabel:n,"order"===t&&"string"==typeof n&&this.$el.addClass("csui-order-shortname-colomn"),null!==n&&void 0!==n||(n="")),this.getSingleOrMultipleValueText(n)}return""},"getAriaLabel":function(){return this.getValueText()},"getSingleOrMultipleValueText":function(e,t){return t=this._validateFormater(t),Array.isArray(e)?this.concatenateTextValues(e,t):t(e)},"concatenateTextValues":function(e,t){return t=this._validateFormater(t),e.map(t).join(s.multiValueSeparator)},"_validateFormater":function(e){return e||function(e){return e}}},{"hasFixedWidth":!1,"columnClassName":"","getValue":function(e,t){var i=e.get(t.name);if(Array.isArray(i))for(var n=0;n<i.length;n++)if(void 0!==i[n]&&null!==i[n]){i=i[n];break}return void 0!==i?i:null}})}),csui.define("hbs!csui/controls/table/cells/templated/value",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span title="'+e.escapeExpression((s=null!=(s=l(i,"value")||(null!=t?l(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":1,"column":13},"end":{"line":1,"column":22}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"formattedValue")||(null!=t?l(t,"formattedValue"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"formattedValue","hash":{},"loc":{"start":{"line":1,"column":24},"end":{"line":1,"column":42}}}):s))+"</span>\r\n"}});return i.registerPartial("csui_controls_table_cells_templated_value",n),n}),csui.define("csui/controls/table/cells/templated/templated.view",["csui/controls/table/cells/cell/cell.view","hbs!csui/controls/table/cells/templated/value"],function(e,t){"use strict";return e.extend({"template":t,"renderValue":function(){var e=this.getValueData(),t=e?this.template(e):"";this.$el.html(t)},"getValueData":function(){function e(e){return e}function t(e){return void 0!==l||null!==l?l:(null===e&&(e=""),e)}var i=this.model,n=this.options.column,o=n.name,s=i.get(o),l=i.get(o+"_formatted");return this.getSingleOrMultipleValueData(s,e,t)},"getSingleOrMultipleValueData":function(e,t,i){var n,o;return Array.isArray(e)?(n=this.concatenateTextValues(e,t),o=this.concatenateTextValues(e,i)):(n=t(e),o=i(e)),{"value":n,"formattedValue":o}}})}),csui.define("hbs!csui/controls/table/cells/text/impl/text",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-table-cell-text" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"value")||(null!=t?l(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":2,"column":50},"end":{"line":2,"column":59}}}):s))+'">&nbsp;</div>\r\n'},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-table-cell-text" title="'+e.escapeExpression((s=null!=(s=l(i,"value")||(null!=t?l(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":4,"column":45},"end":{"line":4,"column":54}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"value")||(null!=t?l(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":4,"column":56},"end":{"line":4,"column":65}}}):s))+"</div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isEmpty"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":5,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_table_cells_text_impl_text",n),n}),csui.define("css!csui/controls/table/cells/text/impl/text",[],function(){}),csui.define("csui/controls/table/cells/text/text.view",["csui/controls/table/cells/templated/templated.view","i18n!csui/controls/table/impl/nls/lang","hbs!csui/controls/table/cells/text/impl/text","css!csui/controls/table/cells/text/impl/text"],function(e,t,i){return e.extend({"className":"csui-truncate","template":i,"renderValue":function(){var e=this.getValueText(),i=void 0===e||0===e.length;i&&(e=t.cellNoTextAria);var n=this.template({"value":e,"isEmpty":i});this.$el.html(n)}},{"hasFixedWidth":!1,"columnClassName":"csui-table-cell-generic-text"})}),csui.define("hbs!csui/controls/table/cells/name/impl/name",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"inactive"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(7,o,0),"loc":{"start":{"line":2,"column":2},"end":{"line":45,"column":9}}}))?s:""},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-table-cell-name-div">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"promoted"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.program(5,o,0),"loc":{"start":{"line":4,"column":6},"end":{"line":20,"column":13}}}))?s:"")+'      <div class="csui-table-cell-name-appendix"></div>\r\n    </div>\r\n'},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="csui-best-bet-container">\r\n          <div class="csui-table-cell-name-justify-div">\r\n            <p class="csui-table-cell-name-value csui-table-cell-no-default-action" title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":7,"column":91},"end":{"line":7,"column":99}}}):s))+'"\r\n               aria-label="'+e.escapeExpression((s=null!=(s=l(i,"nameNoOpenAria")||(null!=t?l(t,"nameNoOpenAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"nameNoOpenAria","hash":{},"loc":{"start":{"line":8,"column":27},"end":{"line":8,"column":45}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":47},"end":{"line":8,"column":55}}}):s))+'</p>\r\n          </div>\r\n          <div class="csui-best-bet '+e.escapeExpression((s=null!=(s=l(i,"promotedClass")||(null!=t?l(t,"promotedClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"promotedClass","hash":{},"loc":{"start":{"line":10,"column":36},"end":{"line":10,"column":53}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"promotedAria")||(null!=t?l(t,"promotedAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"promotedAria","hash":{},"loc":{"start":{"line":10,"column":67},"end":{"line":10,"column":83}}}):s))+'"\r\n               title="'+e.escapeExpression((s=null!=(s=l(i,"promotedLabel")||(null!=t?l(t,"promotedLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"promotedLabel","hash":{},"loc":{"start":{"line":11,"column":22},"end":{"line":11,"column":39}}}):s))+'">\r\n            <span class="csui-best-bet-label">'+e.escapeExpression((s=null!=(s=l(i,"promotedLabel")||(null!=t?l(t,"promotedLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"promotedLabel","hash":{},"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":63}}}):s))+"</span>\r\n          </div>\r\n        </div>\r\n"},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="csui-table-cell-name-justify-div">\r\n          <p class="csui-table-cell-name-value csui-table-cell-no-default-action" title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":17,"column":89},"end":{"line":17,"column":97}}}):s))+'"\r\n             aria-label="'+e.escapeExpression((s=null!=(s=l(i,"nameNoOpenAria")||(null!=t?l(t,"nameNoOpenAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"nameNoOpenAria","hash":{},"loc":{"start":{"line":18,"column":25},"end":{"line":18,"column":43}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":18,"column":45},"end":{"line":18,"column":53}}}):s))+"</p>\r\n        </div>\r\n"},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-table-cell-name-div">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"promoted"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.program(10,o,0),"loc":{"start":{"line":25,"column":6},"end":{"line":42,"column":13}}}))?s:"")+'      <div class="csui-table-cell-name-appendix"></div>\r\n    </div>\r\n'},"8":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="csui-best-bet-container">\r\n          <a href="'+e.escapeExpression((s=null!=(s=l(i,"defaultActionUrl")||(null!=t?l(t,"defaultActionUrl"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"defaultActionUrl","hash":{},"loc":{"start":{"line":27,"column":19},"end":{"line":27,"column":39}}}):s))+'"\r\n             class="csui-table-cell-name-value csui-table-cell-default-action csui-table-cell-name-justify-div"\r\n             title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":29,"column":20},"end":{"line":29,"column":28}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"nameAria")||(null!=t?l(t,"nameAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"nameAria","hash":{},"loc":{"start":{"line":29,"column":42},"end":{"line":29,"column":54}}}):s))+'">\r\n            <span class="csui-table-cell-name-link-text">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":30,"column":57},"end":{"line":30,"column":65}}}):s))+'</span>\r\n          </a>\r\n          <div class="csui-best-bet '+e.escapeExpression((s=null!=(s=l(i,"promotedClass")||(null!=t?l(t,"promotedClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"promotedClass","hash":{},"loc":{"start":{"line":32,"column":36},"end":{"line":32,"column":53}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"promotedAria")||(null!=t?l(t,"promotedAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"promotedAria","hash":{},"loc":{"start":{"line":32,"column":67},"end":{"line":32,"column":83}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=l(i,"promotedLabel")||(null!=t?l(t,"promotedLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"promotedLabel","hash":{},"loc":{"start":{"line":32,"column":92},"end":{"line":32,"column":109}}}):s))+'">\r\n            <span class="csui-best-bet-label">'+e.escapeExpression((s=null!=(s=l(i,"promotedLabel")||(null!=t?l(t,"promotedLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"promotedLabel","hash":{},"loc":{"start":{"line":33,"column":46},"end":{"line":33,"column":63}}}):s))+"</span>\r\n          </div>\r\n        </div>\r\n"},"10":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <a href="'+e.escapeExpression((s=null!=(s=l(i,"defaultActionUrl")||(null!=t?l(t,"defaultActionUrl"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"defaultActionUrl","hash":{},"loc":{"start":{"line":37,"column":17},"end":{"line":37,"column":37}}}):s))+'"\r\n           class="csui-table-cell-name-value csui-table-cell-default-action csui-table-cell-name-justify-div"\r\n           title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":39,"column":18},"end":{"line":39,"column":26}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"nameAria")||(null!=t?l(t,"nameAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"nameAria","hash":{},"loc":{"start":{"line":39,"column":40},"end":{"line":39,"column":52}}}):s))+'">\r\n          <span class="csui-table-cell-name-link-text">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":40,"column":55},"end":{"line":40,"column":63}}}):s))+"</span>\r\n        </a>\r\n"},"12":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-table-cell-name-div">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"promoted"):t,{"name":"if","hash":{},"fn":e.program(13,o,0),"inverse":e.program(15,o,0),"loc":{"start":{"line":48,"column":4},"end":{"line":63,"column":11}}}))?s:"")+'    <div class="csui-table-cell-name-appendix"></div>\r\n  </div>\r\n'},"13":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-best-bet-container">\r\n        <div class="csui-table-cell-name-justify-div">\r\n          <p class="csui-table-cell-name-value csui-table-cell-no-default-action" title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":51,"column":89},"end":{"line":51,"column":97}}}):s))+'"\r\n             aria-label="'+e.escapeExpression((s=null!=(s=l(i,"nameNoOpenAria")||(null!=t?l(t,"nameNoOpenAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"nameNoOpenAria","hash":{},"loc":{"start":{"line":52,"column":25},"end":{"line":52,"column":43}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":52,"column":45},"end":{"line":52,"column":53}}}):s))+'</p>\r\n        </div>\r\n        <div class="csui-best-bet '+e.escapeExpression((s=null!=(s=l(i,"promotedClass")||(null!=t?l(t,"promotedClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"promotedClass","hash":{},"loc":{"start":{"line":54,"column":34},"end":{"line":54,"column":51}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"promotedAria")||(null!=t?l(t,"promotedAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"promotedAria","hash":{},"loc":{"start":{"line":54,"column":65},"end":{"line":54,"column":81}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=l(i,"promotedLabel")||(null!=t?l(t,"promotedLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"promotedLabel","hash":{},"loc":{"start":{"line":54,"column":90},"end":{"line":54,"column":107}}}):s))+'">\r\n          <span class="csui-best-bet-label">'+e.escapeExpression((s=null!=(s=l(i,"promotedLabel")||(null!=t?l(t,"promotedLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"promotedLabel","hash":{},"loc":{"start":{"line":55,"column":44},"end":{"line":55,"column":61}}}):s))+"</span>\r\n        </div>\r\n      </div>\r\n"},"15":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-table-cell-name-justify-div">\r\n        <p class="csui-table-cell-name-value csui-table-cell-no-default-action" title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":60,"column":87},"end":{"line":60,"column":95}}}):s))+'"\r\n           aria-label="'+e.escapeExpression((s=null!=(s=l(i,"nameNoOpenAria")||(null!=t?l(t,"nameNoOpenAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"nameNoOpenAria","hash":{},"loc":{"start":{"line":61,"column":23},"end":{"line":61,"column":41}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":61,"column":43},"end":{"line":61,"column":51}}}):s))+"</p>\r\n      </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"defaultAction"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(12,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":66,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_table_cells_name_impl_name",n),n}),csui.define("css!csui/controls/table/cells/name/impl/name",[],function(){}),csui.define("csui/controls/table/cells/name/name.view",["csui/lib/underscore","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","csui/utils/base","csui/utils/node.links/node.links","hbs!csui/controls/table/cells/name/impl/name","i18n!csui/controls/table/impl/nls/lang","css!csui/controls/table/cells/name/impl/name"],function(e,t,i,n,o,s,l){"use strict";var r=t.extend({"template":s,"className":function(){var e="csui-truncate";return n.isIE11()?e+=" csui-on-IE11":e+=" csui-not-on-IE11",e},"constructor":function(e){t.prototype.constructor.apply(this,arguments),this.listenTo(this,"before:render",function(){this.needsAriaLabel=!(this.options.column.defaultAction&&!this.model.get("inactive"))})},"getValueData":function(){var t=this.model;t&&t.changed&&t.changed.name&&t.set({"OTName":t.changed.name});var i=this.options.column,n=i.attributes&&i.attributes.promoted,s=t.get("promoted_column_info")||n&&n(t)||{},r=t.get(i.name),a=s.message,c=t.get("bestbet")||t.get("nickname")||a,u=o.getUrl(t);return{"defaultAction":i.defaultAction,"defaultActionUrl":u,"contextualMenu":i.contextualMenu,"name":r,"nameAria":e.str.sformat(l.nameAria,r),"nameNoOpenAria":e.str.sformat(l.nameNoOpenAria,r),"inactive":t.get("inactive"),"promoted":c&&c.length>0,"promotedLabel":a||l.promotedLabel,"promotedAria":s.aria||l.promotedLabel,"promotedClass":s.class||""}}},{"widthFactor":1,"columnClassName":"csui-table-cell-name","permanentColumn":!0});return i.registerByColumnKey("OTName",r),r}),csui.define("css!csui/controls/table/cells/date/impl/date",[],function(){}),csui.define("csui/controls/table/cells/date/date.view",["csui/lib/underscore","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","csui/utils/types/date","css!csui/controls/table/cells/date/impl/date"],function(e,t,i,n){"use strict";var o=t.extend({"className":"csui-nowrap","needsAriaLabel":!0,"constructor":function(){t.prototype.constructor.apply(this,arguments)},"formatFunction":function(e,t){return t&&t.includeTime?n.formatExactDateTime(e):n.formatExactDate(e)},"getValueData":function(){function e(e){return o(e,n)}var t=this.options.column,i=this.model.get(t.name),n={"includeTime":!1!==t.attributes.include_time},o=this.formatFunction;return this.getSingleOrMultipleValueData(i,e,e)},"getValueText":function(){return this.getValueData().formattedValue}},{"flexibleWidth":!0,"columnClassName":"csui-table-cell-date","getValue":function(e,i){var o=t.getValue(e,i);return o&&n.deserializeDate(o)}});return i.registerByDataType(-7,o),o}),csui.define("hbs!csui/controls/table/cells/search/version/version",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-search-results-version csui-search-item-version-'+e.escapeExpression((s=null!=(s=l(i,"cid")||(null!=t?l(t,"cid"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":2,"column":67},"end":{"line":2,"column":74}}}):s))+'">\r\n    <a href="javascript:void(0);" class="csui-search-version-label" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"versionAria")||(null!=t?l(t,"versionAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"versionAria","hash":{},"loc":{"start":{"line":3,"column":80},"end":{"line":3,"column":95}}}):s))+'" tabindex="0">'+e.escapeExpression((s=null!=(s=l(i,"versionText")||(null!=t?l(t,"versionText"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"versionText","hash":{},"loc":{"start":{"line":3,"column":110},"end":{"line":3,"column":125}}}):s))+"\r\n    </a>\r\n  </div>\r\n"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"visibleNoVersionText"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":2},"end":{"line":9,"column":9}}}))?s:""},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="csui-search-results-version-none">'+e.escapeExpression((s=null!=(s=l(i,"noVersionsText")||(null!=t?l(t,"noVersionsText"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"noVersionsText","hash":{},"loc":{"start":{"line":8,"column":53},"end":{"line":8,"column":71}}}):s))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"has_version"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":10,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_table_cells_search_version_version",n),n}),csui.define("csui/controls/table/cells/search/version/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/cells/search/version/nls/root/lang",{"versionLabel":"v {0}","versionLabelAria":"Version {0}, show versions","noVersionsAria":"No versions"}),csui.define("css!csui/controls/table/cells/search/version/version",[],function(){}),csui.define("csui/controls/table/cells/search/version/version.view",["csui/lib/underscore","csui/lib/marionette","csui/utils/accessibility","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","hbs!csui/controls/table/cells/search/version/version","i18n!csui/controls/table/cells/search/version/nls/lang","css!csui/controls/table/cells/search/version/version"],function(e,t,i,n,o,s,l){"use strict";var r=i.isAccessibleTable(),a=n.extend({"className":"csui-table-cell-version","needsAriaLabel":!1,"template":s,"events":{"click .csui-search-results-version":"openVersionHistory"},"getValueData":function(){var t=this.hasVersion(),i=this.model.get("versions"),n=i?i.version_number_name:"";return{"has_version":t,"visibleNoVersionText":!t&&r,"noVersionsText":l.noVersionsAria,"versionText":e.str.sformat(l.versionLabel,n),"versionAria":e.str.sformat(l.versionLabelAria,n),"cid":this.model.cid}},"constructor":function(){n.prototype.constructor.apply(this,arguments)},"hasVersion":function(){return this.model.get("versions")&&this.model.get("search_result_metadata")&&(!1===this.model.get("search_result_metadata").current_version||"minor"===this.model.get("search_result_metadata").version_type)},"openVersionHistory":function(){var e={"model":this.model};(this.options.tableView&&this.options.tableView.options.parentView).openVersionHistory(e)}},{"columnClassName":"csui-table-cell-version","hasFixedWidth":!0});return o.registerByColumnKey("version_id",a),a}),csui.define("hbs!csui/controls/table/cells/search/location/impl/location",["module","hbs","nuc/lib/handlebars"],function(e,t,i){
var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"defaultAction"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":2,"column":0},"end":{"line":20,"column":7}}}))?s:""},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-table-cell-location-div">\r\n    <a href="'+e.escapeExpression((s=null!=(s=l(i,"defaultActionUrl")||(null!=t?l(t,"defaultActionUrl"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"defaultActionUrl","hash":{},"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":33}}}):s))+'"\r\n       class="csui-table-cell-location-value csui-table-cell-default-action\r\n       csui-table-cell-location-justify-div"\r\n       title="'+e.escapeExpression((s=null!=(s=l(i,"location")||(null!=t?l(t,"location"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"location","hash":{},"loc":{"start":{"line":7,"column":14},"end":{"line":7,"column":26}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"locationAria")||(null!=t?l(t,"locationAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"locationAria","hash":{},"loc":{"start":{"line":7,"column":40},"end":{"line":7,"column":56}}}):s))+'">\r\n      <span class ="csui-icon-type"></span>\r\n      <span class="csui-table-cell-location-link-text">'+e.escapeExpression((s=null!=(s=l(i,"location")||(null!=t?l(t,"location"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"location","hash":{},"loc":{"start":{"line":9,"column":55},"end":{"line":9,"column":67}}}):s))+"</span>\r\n    </a>\r\n  </div>\r\n"},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-table-cell-location-div">\r\n    <div class="csui-table-cell-location-justify-div">\r\n      <span class ="csui-icon-type"></span>\r\n      <p class="csui-table-cell-location-value csui-table-cell-no-default-action" title="'+e.escapeExpression((s=null!=(s=l(i,"location")||(null!=t?l(t,"location"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"location","hash":{},"loc":{"start":{"line":16,"column":89},"end":{"line":16,"column":101}}}):s))+'"\r\n         aria-label="'+e.escapeExpression((s=null!=(s=l(i,"nameNoOpenAria")||(null!=t?l(t,"nameNoOpenAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"nameNoOpenAria","hash":{},"loc":{"start":{"line":17,"column":21},"end":{"line":17,"column":39}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"location")||(null!=t?l(t,"location"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"location","hash":{},"loc":{"start":{"line":17,"column":41},"end":{"line":17,"column":53}}}):s))+"</p>\r\n    </div>\r\n  </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"showLocation"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":21,"column":7}}}))?s:"")+"\r\n"}});return i.registerPartial("csui_controls_table_cells_search_location_impl_location",n),n}),csui.define("csui/controls/table/cells/parent/impl/parent.base.view",["csui/lib/underscore","csui/lib/marionette","csui/lib/backbone","csui/utils/commands","csui/utils/commandhelper"],function(e,t,i,n,o){"use strict";return t.ItemView.extend({"constructor":function(e){t.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(this,"cell:node:request",function(){var e=n.get("goToLocation");if(!e)throw new Error("Invalid command: goToLocation");var t={"nodes":new i.Collection([this.options.node]),"model":this.options.model,"context":this.options.context,"originatingView":this},s={"context":this.options.context,"originatingView":this};o.handleExecutionResults(e.execute(t,s))})}})}),csui.define("hbs!csui/controls/table/cells/parent/impl/parent.with.icon",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <a href="'+e.escapeExpression((s=null!=(s=l(i,"defaultActionUrl")||(null!=t?l(t,"defaultActionUrl"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"defaultActionUrl","hash":{},"loc":{"start":{"line":2,"column":13},"end":{"line":2,"column":33}}}):s))+'" class="csui-parent-name" title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":2,"column":67},"end":{"line":2,"column":75}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":2,"column":77},"end":{"line":2,"column":85}}}):s))+"</a>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"name"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":3,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_table_cells_parent_impl_parent.with.icon",n),n}),csui.define("css!csui/controls/table/cells/parent/impl/parent.with.icon",[],function(){}),csui.define("csui/controls/table/cells/parent/impl/parent.with.icon.view",["csui/lib/underscore","csui/utils/node.links/node.links","csui/controls/node-type.icon/node-type.icon.view","csui/controls/table/cells/parent/impl/parent.base.view","hbs!csui/controls/table/cells/parent/impl/parent.with.icon","css!csui/controls/table/cells/parent/impl/parent.with.icon"],function(e,t,i,n,o){"use strict";return n.extend({"template":o,"className":"csui-parent-location","triggers":{"click a.csui-parent-name":"cell:node:request"},"events":{"click span.csui-icon-group":"_triggerEvent"},"_triggerEvent":function(){this.trigger("cell:node:request")},"templateHelpers":function(){return{"name":this.model.get("name"),"defaultActionUrl":t.getUrl(this.model)}},"constructor":function(e){e||(e={}),n.prototype.constructor.apply(this,arguments),this.iconView=new i({"node":this.model,"size":e.size})},"onRender":function(){this.model.get("name")&&(this.iconView.render(),this.$el.prepend(this.iconView.$el))}})}),csui.define("css!csui/controls/table/cells/search/location/impl/location",[],function(){}),csui.define("csui/controls/table/cells/search/location/location.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","csui/models/node/node.model","csui/utils/base","csui/utils/node.links/node.links","csui/controls/node-type.icon/node-type.icon.view","hbs!csui/controls/table/cells/search/location/impl/location","i18n!csui/controls/table/impl/nls/lang","csui/utils/defaultactionitems","csui/utils/commands","csui/controls/table/cells/parent/impl/parent.with.icon.view","csui/models/nodeancestors","csui/utils/commandhelper","css!csui/controls/table/cells/search/location/impl/location"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g){"use strict";var b=o.extend({"template":u,"className":"csui-truncate","ui":{"mimeType":".csui-icon-type","location":".csui-table-cell-location-div"},"events":{"keydown":"onKeyInView","click @ui.location":"onClickLocationItem"},"constructor":function(e){o.prototype.constructor.apply(this,arguments);var i=this;this.listenTo(this,"render",this._createNodeTypeIcon),this.listenTo(this,"before:render",function(){this.needsAriaLabel=!(this.options.column.defaultAction&&!this.model.get("inactive"))}),this.listenTo(this.model,"change:ancestors",function(e){var o=i.getDisplayName(e),s={"defaultAction":this.options.column.defaultAction,"defaultActionUrl":a.getUrl(e),"location":o,"showLocation":!0,"locationAria":t.str.sformat(d.nameAria,o)},l=s?i.template(s):"";if(i.$el.html(l),i.parentNode=i.getParent(e),i.parentNode){var r=new c({"node":i.parentNode});1===i.$el.find(".csui-icon-type").length&&(i.cellRegion=new n.Region({"el":i.$el.find(".csui-icon-type")}),i.cellRegion.show(r))}}),this.hasPromoted()&&!this.model.get("ancestors")&&this.model.parent.get("id")>0&&(!this.model.attributes.ancestors||this.model.attributes.ancestors&&0===this.model.attributes.ancestors.length)&&this.getAncestors(this.options,this.model).fetch().done(t.bind(function(e){this.model.attributes.ancestors=e.ancestors,this.model.trigger("change:ancestors",this.model)},this))},"hasBestBet":function(){return!!this.model.get("bestbet")&&!!this.model.get("bestbet").length},"hasNickName":function(){return!!this.model.get("nickname")&&!!this.model.get("nickname").length},"hasPromoted":function(){return!!this.hasBestBet()||!!this.hasNickName()},"getAncestors":function(e,t){var i=t,n={"node":i.parent,"autofetch":!1};return new f(void 0,n)},"_createNodeTypeIcon":function(){if(this.parentNode&&this.parentNode.get("id")>=0){var e=new c({"node":this.parentNode});this.ui.mimeType&&this.ui.mimeType.length>0&&(this.cellRegion=new n.Region({"el":this.ui.mimeType}),this.cellRegion.show(e))}},"getValueData":function(){var e,i,n,o;return this.parentNode=this.getParent(this.model),e=this.options.column,i=this.getDisplayName(this.model),n=this.parentNode,o=a.getUrl(n),i?this.model=this.parentNode:this.parentNode=void 0,{"defaultAction":e.defaultAction,"defaultActionUrl":o,"location":i,"showLocation":!0,"locationAria":t.str.sformat(d.nameAria,i)}},"getParent":function(e){var t=e.get("parent_id_expand"),i=this.getDisplayName(e);return new l({"id":t?t.id:e.get("parent_id"),"type":t?t.type:this.getType(e),"type_name":t?t.type_name:this.getTypeName(e),"mime_type":t?t.mime_type:null,"container":t?t.container:this.isContainer(e),"name":i||""},{"connector":e.connector})},"getType":function(e){var t=0;return e.get("ancestors")&&e.get("ancestors").length&&(t=void 0!==e.get("ancestors")[e.get("ancestors").length-1].type?e.get("ancestors")[e.get("ancestors").length-1].type:e.get("ancestors")[e.get("ancestors").length-1].get("type")),t},"getTypeName":function(e){var t="";return e.get("ancestors")&&e.get("ancestors").length&&(t=e.get("ancestors")[e.get("ancestors").length-1].type_name||e.get("ancestors")[e.get("ancestors").length-1].get("type_name")),t},"isContainer":function(e){var t=!0;return e.get("ancestors")&&e.get("ancestors").length&&(t=e.get("ancestors")[e.get("ancestors").length-1].container||e.get("ancestors")[e.get("ancestors").length-1].get("container")),t},"getDisplayName":function(e){return e.get("ancestors")&&e.get("ancestors").length?e.get("ancestors")[e.get("ancestors").length-1].name||e.get("ancestors")[e.get("ancestors").length-1].get("name"):r.formatMemberName(e.get("parent_id_expand"))},"getValueText":function(){return this.getDisplayName(this.model)},"getContentView":function(){return this.parentNode||(this.parentNode=this.getParent(this.model)),new m({"model":this.parentNode,"context":this.options.context})},"onClickLocationItem":function(e){if(r.isControlClick(e));else{e.preventDefault(),e.stopPropagation();var t=p.get("goToLocation");if(!t)throw new Error("Invalid command: goToLocation");var n={"nodes":new i.Collection([this.model]),"model":this.parentNode,"context":this.options.context,"originatingView":this},o={"context":this.options.context,"originatingView":this};g.handleExecutionResults(t.execute(n,o))}}},{"columnClassName":"csui-table-cell-location","permanentColumn":!1});return s.registerByColumnKey("OTLocation",b),b}),csui.define("hbs!csui/controls/table/cells/search/category/impl/category",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-table-cell-categories-text">\r\n    <span class="csui-table-cell-categories-title">'+e.escapeExpression((l=null!=(l=r(i,"formattedValue")||(null!=t?r(t,"formattedValue"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"formattedValue","hash":{},"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":69}}}):l))+"</span>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"count"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":4},"end":{"line":6,"column":11}}}))?s:"")+"    </div>\r\n"},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span class="csui-count">+'+e.escapeExpression((s=null!=(s=l(i,"count")||(null!=t?l(t,"count"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"count","hash":{},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":43}}}):s))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"formattedValue"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":8,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_table_cells_search_category_impl_category",n),n}),csui.define("csui/controls/table/cells/search/category/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/cells/search/category/impl/nls/root/lang",{"categoryTooltip":"{0} and {1} more"}),csui.define("css!csui/controls/table/cells/search/category/impl/category",[],function(){}),csui.define("csui/controls/table/cells/search/category/category.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","csui/controls/table/cells/search/category/category.popover.list.view","csui/utils/base","i18n","hbs!csui/controls/table/cells/search/category/impl/category","i18n!csui/controls/table/cells/search/category/impl/nls/lang","css!csui/controls/table/cells/search/category/impl/category"],function(e,t,i,n,o,s,l,r,a,c){"use strict";var u=n.extend({"template":a,"className":"csui-category","templateHelpers":function(){return{"count":this.collection.length}},"events":{"focus":"onFocus","blur .csui-table-cell-categories-text":"onBlur","click .csui-count":"openPopover","keydown .csui-table-cell-categories-text":"onKeyInView"},"constructor":function(){n.prototype.constructor.apply(this,arguments),this.categories=this.model.get("OTDCategory_expand"),this.formattedValue=this.model.get("OTDCategory_formatted"),this.windowResizeHandler=t.bind(this._onWindowResize,this),e(window).on("resize",this.windowResizeHandler)},"getValueText":function(){return this.getValueData().formattedValueForExpandView},"_createCategoryCollection":function(){var e,n=new i.Collection;return t.each(this.model.get("OTDCategory_expand").values,function(t){e=new i.Model({"value":t.value,"value_formatted":t.value_formatted}),n.add(e)}),n},"_onWindowResize":function(){this.popoverEl&&this.closePopover()},"openPopover":function(i,n){if(this.collection){var o,l,a=this,c=e(".csui-result-list").width()||e(".csui-search-results-table-view"),u=e(window).width()!==c,d=r&&r.settings.rtl;if(this.popoverEl=n||e(i.currentTarget),this.categoryPopoverView=new s({"originatingView":this,"collection":this.collection}),this.categoryPopoverView.render(),this.options.searchMetadataView)l=d?"right":"left";else{if(d&&u)o=e(window).width()-this.popoverEl.offset().left-this.popoverEl.width();else{o=(e(".csui-search-results").width()||e(".csui-search-results-table-view").width())-this.popoverEl.offset().left-this.popoverEl.width()}l=o<260?"left":"right"}this.popoverEl.binf_popover({"content":this.categoryPopoverView.$el,"html":!0,"placement":l,"trigger":"manual"}),this.popoverEl.binf_popover("show"),this.popover=this.popoverEl.siblings(".binf-popover"),this.popover.addClass("binf-invisible");var h=t.uniqueId("popoverLabelId"),p=t.has(this.options.column.attributes,"completeName")&&this.options.column.attributes.completeName,m=this.popover.find(">.binf-popover-title");this.popover.attr("role","dialog"),m&&(m.attr("id",h),m.html(p),this.popover.attr("aria-labelledby",h)),this.onShowOverviewFlyout(),this.popoverEl.on("shown.binf.popover",t.bind(function(){var t=this.options.originatingView?this.options.originatingView:this.options.tableView;this.listenTo(t,"scroll",function(){a.closePopover()}),e(document).on("mouseup.popover",{"view":this},this._handleClickEvent),e(this.categoryPopoverView.$el.find(".csui-category-value")[0]).prop("tabindex",0).trigger("focus")},this)),this.popover.removeClass("binf-invisible")}},"onKeyInView":function(t){if(32==t.keyCode||13==t.keyCode){t.preventDefault(),t.stopPropagation();var i=e(t.target).find(".csui-count");this.openPopover(t,i)}},"onFocus":function(e){if(this.$el.find(".csui-count").length){var t=this.$el.find(".csui-table-cell-categories-text");t.attr("tabindex",0),t.focus(),e.preventDefault(),e.stopPropagation()}},"onBlur":function(){this.$el.find(".csui-table-cell-categories-text").attr("tabindex",-1)},"onRender":function(){if(this.collection){var e=this.$el.find(".csui-table-cell-categories-text"),i=t.str.sformat(c.categoryTooltip,this.formattedValue,this.collection.length-1);e.attr("role","button"),e.attr("aria-label",i),this.el.setAttribute("title",i)}else this.formattedValue&&(this.el.setAttribute("aria-label",this.formattedValue),this.el.setAttribute("title",this.formattedValue))},"closePopover":function(e){e=e||this,this.popover.addClass("binf-hidden"),this.popoverEl.binf_popover("destroy"),e.categoryPopoverView&&e.categoryPopoverView.destroy()},"_handleClickEvent":function(t){if(!e(t.target).closest(".binf-popover").length){var i=t.data.view;e(document).off("mouseup.popover",this._handleClickEvent),i.closePopover(t.data.view)}},"onShowOverviewFlyout":function(){var t,i=this.popoverEl,n=i.parent().find(".binf-popover"),o=n.find(".binf-arrow"),s=parseInt(o.css("border-top-width")),r=parseInt(o.css("top")),a=e("nav.csui-navbar").length?e("nav.csui-navbar").innerHeight():e(".binf-nav").parents("nav")&&e(".binf-nav").parents("nav").length?e(".binf-nav").parents("nav").innerHeight():0;(t=i.offset().top-(a+parseInt(o.css("top")))+s/2)<a&&(t=a,r=i.offset().top-(a+t));var c=e(".cs-perspective-panel"),u=c.length>0?c[0].getBoundingClientRect().top:0;l.isIE11()&&(t=i[0].getBoundingClientRect().top-parseInt(o.css("top"))+s,r=i.offset().top-t+(u-a)+s/2),n.css({"position":"fixed","top":t}),o.css("top",r);var d,h,p=parseInt(n.css("left")),m=this.$el.parents(".csui-search-results")&&this.$el.parents(".csui-search-results").find(".csui-search-left-panel");this.options.originatingView?(h=i.offset().left,d=n.hasClass("binf-left")?h-(n.outerWidth()+s/2):h+i.width()):d=n.hasClass("binf-left")?p-s/2:p+s,m.hasClass("csui-is-visible")&&(d+=m.width()),n.css({"right":"auto","left":d})},"getValueData":function(){var e,i="";return this.categories&&(e=this.categories.values.length,this.collection=this.categories&&this._createCategoryCollection()),this.categories&&this.categories.values.length>0&&this.categories.values.forEach(function(t,n){i+=n===e-1?t.value_formatted:t.value_formatted+";  "}),{"formattedValue":this.formattedValue,"formattedValueForExpandView":e?i:this.formattedValue,"value":this.collection?t.str.sformat(c.categoryTooltip,this.formattedValue,this.collection.length-1):this.formattedValue,"count":e&&e-1,"collection":this.collection}}},{"columnClassName":"csui-table-cell-category","hasFixedWidth":!0});return o.registerByColumnKey("OTDCategory",u),u}),csui.define("csui/controls/table/cells/search/description.cell.view",["csui/controls/table/cells/text/text.view","csui/controls/table/cells/cell.registry"],function(e,t){"use strict";var i=e.extend({"getValueText":function(){var e=this.options.column;if(e){var t=e.name,i=this.model,n=i.get(t+"_formatted");return"DP"!==this.options.tableView.selectedSettings&&"SP"!==this.options.tableView.selectedSettings||("DP"===this.options.tableView.selectedSettings&&"summary"===t?n=""===i.get("description")?n:"":"SP"===this.options.tableView.selectedSettings&&"description"===t&&(n=""===i.get("summary")?n:"")),null!==n&&void 0!==n||null!==(n=i.get(t))&&void 0!==n||(n=""),this.getSingleOrMultipleValueText(n)}return""}});return t.registerByColumnKey("description",i),t.registerByColumnKey("summary",i),i}),csui.define("csui/controls/table/cells/datetime/datetime.view",["csui/controls/table/cells/date/date.view","csui/controls/table/cells/cell.registry","csui/utils/base"],function(e,t,i){var n=e.extend({"formatFunction":i.formatDateTime});return t.registerByDataType(401,n),n}),csui.define("hbs!csui/controls/table/cells/duedate/duedate",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="cellview_warning" title="'+e.escapeExpression((s=null!=(s=l(i,"value")||(null!=t?l(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":2,"column":40},"end":{"line":2,"column":49}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"formattedValue")||(null!=t?l(t,"formattedValue"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"formattedValue","hash":{},"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":69}}}):s))+"</span>\r\n"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span title="'+e.escapeExpression((s=null!=(s=l(i,"value")||(null!=t?l(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":4,"column":15},"end":{"line":4,"column":24}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"formattedValue")||(null!=t?l(t,"formattedValue"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"formattedValue","hash":{},"loc":{"start":{"line":4,"column":26},"end":{"line":4,"column":44}}}):s))+"</span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"pastDueDate"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":5,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_table_cells_duedate_duedate",n),n}),csui.define("csui/controls/table/cells/duedate/duedate.view",["csui/lib/underscore","csui/controls/table/cells/date/date.view","csui/controls/table/cells/cell.registry","csui/utils/base","hbs!csui/controls/table/cells/duedate/duedate"],function(e,t,i,n,o){var s=t.extend({"template":o,"formatFunction":n.formatDateTime,"getValueData":function(){var i=this.model.get(this.options.column.name);return e.extend(t.prototype.getValueData.call(this),{"pastDueDate":new Date(i)<new Date})}});return i.registerByColumnKey("date_due",s),s}),csui.define("csui/controls/table/cells/member/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/cells/member/impl/nls/root/lang",{"agentOnBehalf":"{0} on behalf of {1}"}),csui.define("csui/controls/table/cells/member/member.view",["csui/lib/underscore","csui/controls/table/cells/text/text.view","csui/controls/table/cells/cell.registry","csui/utils/base","i18n!csui/controls/table/cells/member/impl/nls/lang"],function(e,t,i,n,o){"use strict";var s=t.extend({"className":"csui-truncate","needsAriaLabel":!0,"getValueText":function(){return s.getValue(this.model,this.options.column)}},{"getValue":function(t,i){var s=i.name,l=t.get(s+"_expand")||t.get(s)||"",r=t.get("agent_id_expand")||t.get("agent_id"),a=r||l;return e.isObject(a)?r?e.str.sformat(o.agentOnBehalf,n.formatMemberName(a),n.formatMemberName(l)):n.formatMemberName(a):t.get(s+"_formatted")||a.toString()},"getModelExpand":function(e){return{"properties":[e.column.name]}}});return i.registerByDataType(14,s),i.registerByDataType(19,s),i.registerByColumnKey("owner_id",s),i.registerByColumnKey("user_id",s),s}),csui.define("csui/controls/node.state/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/node.state/impl/nls/root/lang",{"stateListAria":"List of states"}),csui.define("css!csui/controls/node.state/impl/node.states",[],function(){}),csui.define("csui/controls/node.state/node.states.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","i18n!csui/controls/node.state/impl/nls/lang","css!csui/controls/node.state/impl/node.states"],function(e,t,i,n){"use strict";return i.CollectionView.extend({"tagName":"ul","className":"csui-node-states","attributes":{"aria-label":n.stateListAria},"getChildView":function(e){return e.get("iconView")},"childViewOptions":function(t){return e.extend({"context":this.options.context,"model":this.options.node,"tableView":this.options.tableView},t.get("iconViewOptions"))}})}),csui.define("csui/controls/table/cells/node.state/node.state.icons",["csui-ext!csui/controls/table/cells/node.state/node.state.icons"],function(e){"use strict";return e}),csui.define("csui/controls/node.state/node.state.icons",["csui/lib/underscore","csui/lib/backbone","csui/controls/table/cells/node.state/node.state.icons","csui-ext!csui/controls/node.state/node.state.icons"],function(e,t,i,n){"use strict";function o(t){if(t){var i=e.flatten(t,!0);r.add(i)}}var s=t.Model.extend({"defaults":{"sequence":100,"iconView":null,"iconViewOptions":null},"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments)}}),l=t.Collection.extend({"model":s,"comparator":"sequence","constructor":function(e,i){t.Collection.prototype.constructor.apply(this,arguments)}}),r=new l;return o(i),o(n),r}),csui.define("csui/controls/table/cells/node.state/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/cells/node.state/impl/nls/root/lang",{"someStateIconsAria":"State available","noStateIconsAria":"No state","stateEntryButtonAria":"State available, click to Enter","bool_value_true":"true","bool_value_false":"false"}),csui.define("css!csui/controls/table/cells/node.state/impl/node.state",[],function(){}),csui.define("csui/controls/table/cells/node.state/node.state.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/utils/accessibility","csui/controls/table/cells/cell/cell.view","csui/controls/table/cells/cell.registry","csui/controls/node.state/node.states.view","csui/controls/node.state/node.state.icons","csui/models/mixins/v2.fields/v2.fields.mixin","i18n!csui/controls/table/cells/node.state/impl/nls/lang","css!csui/controls/table/cells/node.state/impl/node.state"],function(e,t,i,n,o,s,l,r,a,c,u,d,h){"use strict";var p=l.isAccessibleTable();o=o(e.id);var m=r.extend({"needsAriaLabel":!0,"events":{"focus":"_focused","keydown":"_handleKeys","keyup":"_trapKeys","click":"_clicked","blur @ui.entryButton":"_blurredEntryButton"},"ui":{"entryButton":"button.csui-node-states-entry"},"constructor":function(e){r.prototype.constructor.apply(this,arguments),this.cellRegion=new n.Region({"el":this.el}),this.listenTo(this,"before:render",this._rememberFocus).listenTo(this,"before:render",this._disengageKeyTrap).listenTo(this,"before:render",this._destroyStateIcons).listenTo(this,"render",this._restoreFocus).listenTo(this,"before:destroy",this._disengageKeyTrap).listenTo(this,"before:destroy",this._destroyStateIcons)},"_destroyStateIcons":function(){this.cellRegion.empty()},"_getEnabledNodeStateIcons":function(){var e;return e=Object.getPrototypeOf(u),new e.constructor(u.filter(function(e){var t=e.get("iconView");try{return t&&(!t.enabled||t.enabled({"context":this.options.context,"node":this.model}))}catch(e){o.warn("Evaluating an icon view failed.\n{0}",e.message)&&console.warn(o.last)}},this))},"renderValue":function(){var e=this._getEnabledNodeStateIcons();if(e.length){e.length>1&&this._render4MultiState();var t=new c({"context":this.options.context,"node":this.model,"tableView":this.options.tableView,"collection":e});if(e.length>1){var i=this.$el.find("div.csui-node-states-multi-wrapper");this.cellRegion=new n.Region({"el":i})}this.cellRegion.show(t);var o=this;this.$("button.csui-node-states-entry").on("keyup",function(e){13!==e.keyCode&&32!==e.keyCode||(o._disengageKeyTrap(),o._engageKeyTrap(),e.preventDefault(),e.stopPropagation())})}else this._renderEmpty()},"getAriaLabel":function(){return this.cellRegion.currentView?h.someStateIconsAria:h.noStateIconsAria},"getAttributes":function(){var e=this,i=[];return this._getEnabledNodeStateIcons().each(function(n){var o=n.get("iconView"),s=new o({"context":e.options.context,"model":e.model});t.isFunction(s.getAttributes)&&(i=i.concat(s.getAttributes()))}),t.each(i,function(e){t.isBoolean(e.value)&&(e.value=!0===e.value?h.bool_value_true:h.bool_value_false)}),i},"_render4MultiState":function(){i("<button>",{"class":"csui-node-states csui-node-states-entry","aria-label":h.stateEntryButtonAria,"tabindex":-1}).text("").appendTo(this.$el),i("<div>",{"class":"csui-node-states-multi-wrapper"}).appendTo(this.$el)},"_renderEmpty":function(){p&&i("<span>",{"title":h.noStateIconsAria}).text(h.noStateIconsAria).appendTo(this.$el)},"_clicked":function(e){e.target===this.ui.entryButton[0]&&(e.preventDefault(),e.stopPropagation(),this._disengageKeyTrap(),this._engageKeyTrap())},"_handleKeys":function(e){13===e.keyCode||32===e.keyCode?e.target===this.ui.entryButton[0]&&(e.preventDefault(),e.stopPropagation(),this._disengageKeyTrap(),this._engageKeyTrap()):this._hasEngagedKeyTrap()&&(27===e.keyCode?(this._disengageKeyTrap(),e.preventDefault(),e.stopPropagation(),this.ui.entryButton.is(":visible")&&(this.$el.addClass("csui-node-states-entry-focused"),this.ui.entryButton.attr("tabindex",0).focus())):37===e.keyCode||38===e.keyCode?(e.preventDefault(),e.stopPropagation(),this._moveFocus(-1)):39===e.keyCode||40===e.keyCode?(e.preventDefault(),e.stopPropagation(),this._moveFocus(1)):this._trapKeys(e))},"_trapKeys":function(e){this._hasEngagedKeyTrap()&&9===e.keyCode&&(e.preventDefault(),e.stopPropagation())},"_rememberFocus":function(){this._focusTrapped=this.el.contains(document.activeElement)&&this._hasEngagedKeyTrap()},"_restoreFocus":function(){this._focusTrapped&&this._engageKeyTrap()},"_focused":function(e){if("TD"===e.target.tagName&&this._hasEngagedKeyTrap())return this._engageKeyTrap(),e.preventDefault(),void e.stopPropagation();this._disengageKeyTrap(),this._getEnabledNodeStateIcons().length>1&&(this.ui.entryButton.attr("tabindex",0),this.$el.attr("tabindex",-1),this.$el.addClass("csui-node-states-entry-focused"),this.ui.entryButton.focus(),e.preventDefault(),e.stopPropagation())},"_blurredEntryButton":function(e){this.$el.removeClass("csui-node-states-entry-focused"),this.ui.entryButton.attr("tabindex","-1")},"_engageKeyTrap":function(){
var e=s.findFocusables(this.cellRegion.el);e.length&&(this._keysTrapped=!0,i(e[0]).focus())},"_disengageKeyTrap":function(){this._hasEngagedKeyTrap()&&(this._keysTrapped=!1)},"_hasEngagedKeyTrap":function(){return this._keysTrapped},"_moveFocus":function(e){var t=s.findFocusables(this.cellRegion.el),i=t.length-1,n=t.index(document.activeElement)+e;n<0?n=i:n>i&&(n=0),n=t[n],n?n.focus():o.warn("Focusable elements were unexpectedly removed from {0} ({1}).",o.getObjectName(this),this.cid)&&console.warn(o.last)}},{"columnClassName":"csui-table-cell-node-state","flexibleWidth":!0,"getModelFields":function(e){return u.reduce(function(t,i){var n=i.get("iconView");if(n&&n.getModelFields){var o=n.getModelFields(e);o&&d.mergePropertyParameters(t,o)}return t},{})},"getModelExpand":function(e){return u.reduce(function(t,i){var n=i.get("iconView");if(n&&n.getModelExpand){var o=n.getModelExpand(e);o&&d.mergePropertyParameters(t,o)}return t},{})}});return a.registerByColumnKey("reserved",m),a.registerByOtherColumnKey("reserved_user_id",m),m}),csui.define("csui/controls/table/cells/parent/impl/parent.with.text.view",["csui/lib/underscore","csui/utils/node.links/node.links","csui/controls/table/cells/parent/impl/parent.base.view"],function(e,t,i){"use strict";return i.extend({"tagName":"a","attributes":function(){return{"title":this.model.get("name"),"href":t.getUrl(this.model)}},"template":!1,"triggers":{"click":"cell:node:request"},"constructor":function(e){i.prototype.constructor.apply(this,arguments)},"onRender":function(){this.el.textContent=this.model.get("name")}})}),csui.define("csui/controls/table/cells/parent/parent.view",["csui/lib/underscore","csui/lib/marionette","csui/models/node/node.model","csui/controls/table/cells/text/text.view","csui/controls/table/cells/cell.registry","csui/controls/table/cells/parent/impl/parent.with.icon.view","csui/controls/table/cells/parent/impl/parent.with.text.view"],function(e,t,i,n,o,s,l){"use strict";var r=n.extend({"events":{"keydown":"onKeyInView"},"constructor":function(e){e||(e={}),n.prototype.constructor.apply(this,arguments);var o=e.parent||this.model.get("parent_id_expand")||this.model.get("parent_id")||this.model.get("location_id_expand")||this.model.get("location_id");this.model&&153===this.model.get("type")&&(o=this.model.get("workflow_id_expand")||this.model.get("workflow_id")),this.parentModel=new i(o,{"connector":e.connector||this.model.connector}),this.parentIconView=new s({"model":this.parentModel,"node":this.model,"size":e.iconSize,"context":this.options.context}),this.parentTextView=new l({"model":this.parentModel,"node":this.model,"context":this.options.context}),this.contentRegion=new t.Region({"el":this.el})},"renderValue":function(){this.contentRegion.show(this.parentIconView)},"getValueText":function(){return this.parentModel.get("name")},"getContentView":function(){return this.parentIconView}},{"getModelExpand":function(e){return{"properties":["parent_id"]}}});return o.registerByColumnKey("parent_id",r),o.registerByColumnKey("location_id",r),o.registerByColumnKey("location_name",r),r}),csui.define("csui/controls/table/cells/priority/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/cells/priority/impl/nls/root/lang",{"priority_name_high":"High","priority_name_medium":"Medium","priority_name_low":"Low","priority_no_value":"No value"}),csui.define("hbs!csui/controls/table/cells/priority/impl/priority",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'    <span class="icon icon-priorityHigh"></span>\r\n'},"3":function(e,t,i,n,o){return'    <span class="icon icon-priorityMedium"></span>\r\n'},"5":function(e,t,i,n,o){return'    <span class="icon icon-priorityLow"></span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-table-cell-priority-container">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"priority_high"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":2},"end":{"line":4,"column":9}}}))?s:"")+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"priority_medium"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":2},"end":{"line":7,"column":9}}}))?s:"")+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"priority_low"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":2},"end":{"line":10,"column":9}}}))?s:"")+'  <span class="csui-table-cell-priority-text" title="'+e.escapeExpression((l=null!=(l=r(i,"priority_name")||(null!=t?r(t,"priority_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"priority_name","hash":{},"loc":{"start":{"line":11,"column":53},"end":{"line":11,"column":70}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"priority_name")||(null!=t?r(t,"priority_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"priority_name","hash":{},"loc":{"start":{"line":11,"column":72},"end":{"line":11,"column":89}}}):l))+"</span>\r\n</div>"}});return i.registerPartial("csui_controls_table_cells_priority_impl_priority",n),n}),csui.define("css!csui/controls/table/cells/priority/impl/priority",[],function(){}),csui.define("csui/controls/table/cells/priority/priority.view",["csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","csui/utils/accessibility","i18n!csui/controls/table/cells/priority/impl/nls/lang","hbs!csui/controls/table/cells/priority/impl/priority","css!csui/controls/table/cells/priority/impl/priority"],function(e,t,i,n,o){"use strict";var s=i.isAccessibleTable(),l=e.extend({"template":o,"needsAriaLabel":!0,"getValueData":function(){var e=this._getPriorityObject();return{"priority":e.priority,"priority_name":e.priority_name,"priority_high":e.priority_high,"priority_medium":e.priority_medium,"priority_low":e.priority_low}},"getValueText":function(){return this._getPriorityObject().priority_name},"_getPriorityObject":function(){var e={};e.priority=this.model.get(this.options.column.name);var t,i=this.model.get(this.options.column.name+"_name");return e.priority_high=!1,e.priority_medium=!1,e.priority_low=!1,null===e.priority?(t="",s&&(t=n.priority_no_value)):e.priority>50?(e.priority_high=!0,t=n.priority_name_high):50===e.priority?(e.priority_medium=!0,t=n.priority_name_medium):e.priority<50&&(e.priority_low=!0,t=n.priority_name_low),e.priority_name=t||i,e}},{"hasFixedWidth":!0,"columnClassName":"csui-table-cell-priority"});return t.registerByColumnKey("priority",l),l}),csui.define("css!csui/controls/table/cells/select/impl/select.view",[],function(){}),csui.define("csui/controls/table/cells/select/select.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/checkbox/checkbox.view","csui/controls/table/cells/cell/cell.view","csui/controls/table/cells/cell.registry","i18n!csui/controls/table/impl/nls/lang","css!csui/controls/table/cells/select/impl/select.view"],function(e,t,i,n,o,s,l,r){var a=s.extend({"constructor":function(e){a.__super__.constructor.apply(this,arguments)},"renderValue":function(){var t=this;this.$el.empty();var i=!0===this.model.get(a.isSelectedModelAttributeName),s=this.model.get("name");this.model.has("favorite_name")&&(s=this.model.get("favorite_name"));var l=!1!==this.model.get("selectable"),c="",u=e.str.sformat(r.selectItemICanNotAria,s);l&&(u=e.str.sformat(r.selectItemAria,s),c=e.str.sformat(r.selectItem,s)),this.checkboxView=new o({"checked":i?"true":"false","disabled":!l,"ariaLabel":u,"title":c}),new n.Region({"el":this.el}).show(this.checkboxView);var d=this.checkboxView.model;this.listenTo(this.model,"change:"+a.isSelectedModelAttributeName,function(e,t,i){this.checkboxView.setChecked(t)}),this.checkboxView.listenTo(this.checkboxView,"clicked",function(e){e.cancel=!0;var i=d.get("checked");t.triggerMethod("clicked:checkbox",{"checked":i})})}},{"columnKey":"_select","hasFixedWidth":!0,"columnClassName":"csui-table-cell-_select","isSelectedModelAttributeName":"csuiIsSelected"});return l.registerByColumnKey(a.columnKey,a),a}),csui.define("hbs!csui/controls/table/cells/toggledetails/impl/toggledetails",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <a class="expand-details-row-toggle" title="'+e.escapeExpression((l=null!=(l=r(i,"expandToggleTooltip")||(null!=t?r(t,"expandToggleTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"expandToggleTooltip","hash":{},"loc":{"start":{"line":2,"column":46},"end":{"line":2,"column":69}}}):l))+'"\r\n     aria-label="'+e.escapeExpression((l=null!=(l=r(i,"expandToggleAria")||(null!=t?r(t,"expandToggleAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"expandToggleAria","hash":{},"loc":{"start":{"line":3,"column":17},"end":{"line":3,"column":37}}}):l))+'"\r\n     href="#csui-details-row-'+e.escapeExpression((l=null!=(l=r(i,"id")||(null!=t?r(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":4,"column":29},"end":{"line":4,"column":35}}}):l))+'" data-binf-toggle="collapse" aria-expanded="'+e.escapeExpression((l=null!=(l=r(i,"ariaExpanded")||(null!=t?r(t,"ariaExpanded"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"ariaExpanded","hash":{},"loc":{"start":{"line":4,"column":80},"end":{"line":4,"column":96}}}):l))+'"\r\n     aria-controls="csui-details-row-'+e.escapeExpression((l=null!=(l=r(i,"id")||(null!=t?r(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":5,"column":37},"end":{"line":5,"column":43}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"ariaExpanded"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":6,"column":4},"end":{"line":10,"column":11}}}))?s:"")+"  </a>\r\n"},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"      "+(null!=(s=(l(i,"icon-v2")||t&&l(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"size":"xsmall","iconName":"csui_caret_up"},"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":59}}}))?s:"")+"\r\n"},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"      "+(null!=(s=(l(i,"icon-v2")||t&&l(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"size":"xsmall","iconName":"csui_caret_down"},"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":61}}}))?s:"")+"\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"hasMetadataRow"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":12,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_table_cells_toggledetails_impl_toggledetails",n),n}),csui.define("csui/controls/table/cells/toggledetails/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/cells/toggledetails/impl/nls/root/lang",{"expandAllTooltip":"Show all","expandAllAria":"Show more details of all items","collapseAllTooltip":"Show less","collapseAllAria":"Show less details of all items","showMoreTooltip":"Show more","showMoreAria":"Show more details","showLessTooltip":"Show less","showLessAria":"Show less details"}),csui.define("css!csui/controls/table/cells/toggledetails/impl/toggledetails",[],function(){}),csui.define("csui/controls/table/cells/toggledetails/toggledetails.view",["csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","hbs!csui/controls/table/cells/toggledetails/impl/toggledetails","i18n!csui/controls/table/cells/toggledetails/impl/nls/lang","css!csui/controls/table/cells/toggledetails/impl/toggledetails","csui/lib/binf/js/binf"],function(e,t,i,n){"use strict";var o=e.extend({"template":i,"triggers":{"click a":"toggle"},"events":{"keydown":"onKeyInView"},"getValueData":function(){return{"hasMetadataRow":this.model.get("hasMetadataRow"),"id":this.model.cid,"ariaExpanded":!!this.options.rowIsExpanded,"expandToggleTooltip":this.options.rowIsExpanded?n.showLessTooltip:n.showMoreTooltip,"expandToggleAria":this.options.rowIsExpanded?n.showLessAria:n.showMoreAria}},"onToggle":function(e){var t=this.$("a").attr("href"),i=this.$el.parent().parent().find("[id="+t.replace("#","")+"]"),n=this;i.hasClass("binf-collapse")&&(this.options.rowIsExpanded=!1,i.hasClass("binf-in")?i.binf_collapse("hide").on("hidden.binf.collapse",function(){n.trigger("toggle:detailsrow",{"model":n.model,"detailsRowIsExpanded":n.options.rowIsExpanded})}):(i.binf_collapse("show"),this.options.rowIsExpanded=!0),this.trigger("toggle:detailsrow",{"model":this.model,"detailsRowIsExpanded":this.options.rowIsExpanded}),this.render(),this.$("a")[0].focus())}},{"hasFixedWidth":!0,"columnClassName":"csui-table-cell-_toggledetails","rowIsExpandedModelAttributeName":"csui-toggledetails-rowIsExpanded","widthFactor":1/3});return t.registerByColumnKey("_toggledetails",o),o}),csui.define("csui/controls/table/cells/size/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/cells/size/impl/nls/root/localized.strings",{"ColumnTitle":"Size","containerSize":{"formatForNone":"{0} Items","formatForOne":"{0} Item","formatForTwo":"{0} Items","formatForFive":"{0} Items"},"sizeUnavailable":"No size","sizeUnavailableAria":"Size unavailable for {0}"}),csui.define("css!csui/controls/table/cells/size/impl/size",[],function(){}),csui.define("csui/controls/table/cells/size/size.view",["csui/lib/underscore","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","csui/utils/base","csui/utils/accessibility","i18n!csui/controls/table/cells/size/impl/nls/localized.strings","css!csui/controls/table/cells/size/impl/size"],function(e,t,i,n,o,s){"use strict";var l=o.isAccessibleTable(),r=t.extend({"className":"csui-nowrap","needsAriaLabel":!0,"getValueData":function(){var e=this.model,i=this.options.column,o=i.name,r=e.get(o),a=e.get("type"),c=e.get(o+"_formatted");if(null==r||""===c){if(!l)return t.prototype.getValueData.apply(this,arguments);r=c=s.sizeUnavailable}else if(e.get("container"))899===a||411===a?c="":void 0===c&&(c=n.formatMessage(r,s.containerSize)),l&&!c&&(c=s.sizeUnavailable),r=c;else{if(144!==a&&749!==a&&736!==a&&30309!==a&&5574!==a)return t.prototype.getValueData.apply(this,arguments);c=n.formatFriendlyFileSize(r),r=n.formatExactFileSize(r)}return{"value":r,"formattedValue":c}},"getValueText":function(){var e=this.getValueData();return!e||void 0!==e.formattedValue&&null!==e.formattedValue?e&&e.formattedValue:e&&e.value},"getTooltipValueText":function(){var e=this.getValueData();return e&&e.value||this.getValueText()},"getAriaLabel":function(){var t=this.getValueData();return t&&t.value||e.str.sformat(s.sizeUnavailableAria,this.model.get("type_name"))}},{"flexibleWidth":!0,"columnClassName":"csui-table-cell-size"});return i.registerByColumnKey("size",r),i.registerByColumnKey("container_size",r),i.registerByColumnKey("file_size",r),i.registerByColumnKey("OTObjectSize",r),r}),csui.define("hbs!csui/controls/table/cells/status/impl/status",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="cellview_warning" title="'+e.escapeExpression((s=null!=(s=l(i,"status_name")||(null!=t?l(t,"status_name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"status_name","hash":{},"loc":{"start":{"line":2,"column":40},"end":{"line":2,"column":55}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"status_name")||(null!=t?l(t,"status_name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"status_name","hash":{},"loc":{"start":{"line":2,"column":57},"end":{"line":2,"column":72}}}):s))+"</span>\r\n"},"3":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"icon"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":2},"end":{"line":6,"column":9}}}))?s:"")+'  <span title="'+e.escapeExpression((l=null!=(l=r(i,"status_name")||(null!=t?r(t,"status_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"status_name","hash":{},"loc":{"start":{"line":7,"column":15},"end":{"line":7,"column":30}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"status_name")||(null!=t?r(t,"status_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"status_name","hash":{},"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":47}}}):l))+"</span>\r\n"},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="csui-icon '+e.escapeExpression((s=null!=(s=l(i,"icon")||(null!=t?l(t,"icon"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":5,"column":27},"end":{"line":5,"column":35}}}):s))+'"></span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"status_late"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":8,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_table_cells_status_impl_status",n),n}),csui.define("csui/controls/table/cells/status/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/cells/status/impl/nls/root/lang",{"status_name_206_0":"Pending","status_name_206_1":"In Progress","status_name_206_2":"Issue","status_name_206_3":"On Hold","status_name_153_1":"OK","status_name_153_2":"Halted","status_name_153_3":"Step Late","status_name_153_4":"Milestone Late","status_name_153_5":"Late","status_name_153_6":"Suspended","status_name_153_7":"Completed","status_name_153_8":"Stopped","status_name_153_9":"Archived","status_name_153_10":"Subwork Late"}),csui.define("css!csui/controls/table/cells/status/impl/status",[],function(){}),csui.define("csui/controls/table/cells/status/status.view",["csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","hbs!csui/controls/table/cells/status/impl/status","i18n!csui/controls/table/cells/status/impl/nls/lang","css!csui/controls/table/cells/status/impl/status"],function(e,t,i,n){"use strict";var o=e.extend({"template":i,"needsAriaLabel":!0,"getValueData":function(){var e=this._getStatusName(),t=this.model.getStatusIcon&&this.model.getStatusIcon(),i=this.model.get("type"),n=!1;return 153!==i||3!==status&&4!==status&&5!==status&&10!==status||(n=!0),{"status_name":e,"status_late":n,"icon":t}},"getValueText":function(){return this._getStatusName()},"_getStatusName":function(){var e=this.model.get("type"),t=this.model.get(this.options.column.name),i=n["status_name_"+e+"_"+t],o=this.model.get(this.options.column.name+"_name");return i||o},"_getIcon":function(){var e=this.model.get(this.options.column.name+"_icon_name");return e?"icon-status-"+e:void 0}},{"hasFixedWidth":!0,"columnClassName":"csui-table-cell-status"});return t.registerByColumnKey("status",o),o}),csui.define("hbs!csui/widgets/favorites/impl/favorite.star/favorite.add.form",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <label for=\"grpSelectId\" class='favorite-group-label'>"+e.escapeExpression((s=null!=(s=l(i,"group_label")||(null!=t?l(t,"group_label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"group_label","hash":{},"loc":{"start":{"line":9,"column":56},"end":{"line":9,"column":71}}}):s))+"</label>\r\n  <div class='favorite-groups-container'></div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div>\r\n<label for="'+e.escapeExpression((l=null!=(l=r(i,"name_input_id")||(null!=t?r(t,"name_input_id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name_input_id","hash":{},"loc":{"start":{"line":2,"column":12},"end":{"line":2,"column":29}}}):l))+"\" class='favorite-name-label'>"+e.escapeExpression((l=null!=(l=r(i,"name_label")||(null!=t?r(t,"name_label"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name_label","hash":{},"loc":{"start":{"line":2,"column":59},"end":{"line":2,"column":73}}}):l))+'</label>\r\n<input id="'+e.escapeExpression((l=null!=(l=r(i,"name_input_id")||(null!=t?r(t,"name_input_id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name_input_id","hash":{},"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":28}}}):l))+"\" class='favorite-name-input binf-form-control' type='text' placeholder='"+e.escapeExpression((l=null!=(l=r(i,"name_place_holder")||(null!=t?r(t,"name_place_holder"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name_place_holder","hash":{},"loc":{"start":{"line":3,"column":101},"end":{"line":3,"column":122}}}):l))+"' value='"+e.escapeExpression((l=null!=(l=r(i,"favorite_name")||(null!=t?r(t,"favorite_name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"favorite_name","hash":{},"loc":{"start":{"line":3,"column":131},"end":{"line":3,"column":148}}}):l))+"'>\r\n<div class='favorite-name-input-error-div'>\r\n  <span class='favorite-name-input-error'></span>\r\n</div>\r\n\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"groups"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":0},"end":{"line":11,"column":7}}}))?s:"")+"\r\n<div class='favorite-buttons-container'>\r\n  <button title=\""+e.escapeExpression((l=null!=(l=r(i,"add_button_label")||(null!=t?r(t,"add_button_label"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"add_button_label","hash":{},"loc":{"start":{"line":14,"column":17},"end":{"line":14,"column":37}}}):l))+"\" class='add-btn binf-btn binf-btn-primary binf-btn-default'>"+e.escapeExpression((l=null!=(l=r(i,"add_button_label")||(null!=t?r(t,"add_button_label"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"add_button_label","hash":{},"loc":{"start":{"line":14,"column":98},"end":{"line":14,"column":118}}}):l))+'</button>\r\n  <button title="'+e.escapeExpression((l=null!=(l=r(i,"cancel_button_label")||(null!=t?r(t,"cancel_button_label"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"cancel_button_label","hash":{},"loc":{"start":{"line":15,"column":17},"end":{"line":15,"column":40}}}):l))+"\" class='cancel-btn binf-btn binf-btn-default'>"+e.escapeExpression((l=null!=(l=r(i,"cancel_button_label")||(null!=t?r(t,"cancel_button_label"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"cancel_button_label","hash":{},"loc":{"start":{"line":15,"column":87},"end":{"line":15,"column":110}}}):l))+"</button>\r\n</div>\r\n</div>\r\n"}});return i.registerPartial("csui_widgets_favorites_impl_favorite.star_favorite.add.form",n),n}),csui.define("hbs!csui/widgets/favorites/impl/favorite.star/favorite.add.form.group",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a href="#" tabindex="-1">\r\n  <span class="favorite_group" title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":2,"column":38},"end":{"line":2,"column":46}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":2,"column":48},"end":{"line":2,"column":56}}}):s))+"</span>\r\n</a>\r\n"}});return i.registerPartial("csui_widgets_favorites_impl_favorite.star_favorite.add.form.group",n),n}),csui.define("hbs!csui/widgets/favorites/impl/favorite.star/favorite.add.form.groups",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<button id="grpSelectId" type="button" class="binf-btn binf-btn-default binf-dropdown-toggle"\r\n        data-binf-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\r\n  <span class="selected-group-label"></span>\r\n  <span class="cs-icon icon-caret-down"></span>\r\n</button>\r\n<div class="binf-dropdown-menu favorite-groups-dropdown-container" role="menu">\r\n  <ul class="favorite-groups-dropdown" role="presentation"></ul>\r\n</div>\r\n'}});return i.registerPartial("csui_widgets_favorites_impl_favorite.star_favorite.add.form.groups",n),n}),csui.define("csui/widgets/favorites/impl/favorite.star/favorite.add.form.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/behaviors/dropdown.menu/dropdown.menu.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/utils/namedsessionstorage","hbs!csui/widgets/favorites/impl/favorite.star/favorite.add.form","hbs!csui/widgets/favorites/impl/favorite.star/favorite.add.form.group","hbs!csui/widgets/favorites/impl/favorite.star/favorite.add.form.groups","i18n!csui/widgets/favorites/impl/nls/lang"],function(e,t,i,n,o,s,l,r,a,c,u,d){var h=new r,p=n.ItemView.extend({"tagName":"li","attributes":function(){return{"role":"menuitem"}},"template":c,"triggers":{"click a":"click:item"},"constructor":function(e){n.ItemView.prototype.constructor.apply(this,arguments)}}),m=n.CompositeView.extend({"className":"favorite-groups-dropdown-container binf-dropdown","template":u,"behaviors":{"PerfectScrolling":{"behaviorClass":l,"contentParent":".favorite-groups-dropdown","suppressScrollX":!0},"DropdownMenuBehavior":{"behaviorClass":s}},"ui":{"toggle":">.binf-dropdown-toggle","selectedLabel":">.binf-btn >.selected-group-label","groupsScrollbarContainer":".favorite-groups-dropdown"},"events":{"shown.binf.dropdown":"onShownDropdown"},"childViewContainer":".favorite-groups-dropdown","childView":p,"childEvents":{"click:item":"onClickItem","render":"_onChildRender"},"_onChildRender":function(e){var t=e.$el;e.model.get("tab_id")===this.options.favModel.get("tab_id")&&t.addClass("binf-active")},"constructor":function(e){n.CompositeView.call(this,e)},"onRender":function(){var e=this.options.collection.findWhere({"tab_id":this.options.favModel.get("tab_id")}),t=e.get("name");this.ui.selectedLabel.text(t),this.ui.selectedLabel.attr("title",t),this.ui.toggle.attr("aria-label",d.addFavoriteGroupLabel+" - "+t),this.ui.toggle.binf_dropdown()},"onClickItem":function(e){this.$el.find("ul li").removeClass("binf-active"),e.$el.addClass("binf-active"),this.ui.toggle.binf_dropdown("toggle"),this.ui.toggle.trigger("focus");var t=e.model.get("tab_id");this.options.favModel.set("tab_id",t);var i=e.model.get("name");this.ui.selectedLabel.text(i),this.ui.selectedLabel.attr("title",i),this.ui.toggle.attr("aria-label",d.addFavoriteGroupLabel+" - "+i),h.set("csuiFavoriteTabID",t)},"_computeDropdownMenuMaxHeight":function(){var e=170,i=this.ui.groupsScrollbarContainer[0];if(!i.getBoundingClientRect)return e;var n=i.getBoundingClientRect();return e=t(window).height()-n.top-16},"onShownDropdown":function(){this.ui.groupsScrollbarContainer.css("max-height",this._computeDropdownMenuMaxHeight()),this.ui.toggle.attr("aria-expanded","true"),this.triggerMethod("dom:refresh")},"closeDropdownMenu":function(){this.$el.hasClass("binf-open")&&(this.ui.toggle.attr("aria-expanded","false"),this.ui.toggle.binf_dropdown("toggle",!1))}}),f=n.LayoutView.extend({"template":a,"templateHelpers":function(){return{"name_label":d.addFavoriteNameLabel,"name_place_holder":d.addFavoriteNamePlaceHolder,"name_input_id":e.uniqueId("nameInp"),"favorite_name":this.options.favModel.get("name"),"groups":this.showGroups,"group_label":d.addFavoriteGroupLabel,"add_button_label":d.addFavoriteAddButtonLabel,"cancel_button_label":d.addFavoriteCancelButtonLabel}},"regions":{"favGroupsRegion":".favorite-groups-container"},"triggers":{"click .add-btn":"click:add:button","click .cancel-btn":"click:cancel:button"},"ui":{"nameInput":".favorite-name-input","nameInputError":".favorite-name-input-error","addButton":".add-btn","cancelButton":".cancel-btn"},"events":{"click @ui.nameInput":"onClickNameInput","keyup":"onKeyupEvent","keyup @ui.nameInput":"onNameInputEvent","blur @ui.nameInput":"onNameInputEvent","keydown @ui.nameInput":"controlsOnKeydownEvent","keydown @ui.addButton":"controlsOnKeydownEvent","keydown @ui.cancelButton":"cancelButtonOnKeydownEvent"},"constructor":function(e){if(n.LayoutView.call(this,e),this.showGroups=!0,1===this.options.collection.length&&-1===this.options.collection.at(0).get("tab_id")&&(this.showGroups=!1),this.showGroups){this.groupsView=new m(e);var t=h.get("csuiFavoriteTabID");this.options.collection.findWhere({"tab_id":t})||(t=-1,h.set("csuiFavoriteTabID",t)),t&&this.options.favModel&&this.options.favModel.set("tab_id",t)}this.propagateEventsToRegions()},"onRender":function(){this.showGroups&&(this.groupsView.render(),this.favGroupsRegion.show(this.groupsView)),this.validateNameInputAndSetAddButtonState(!0)},"currentlyFocusedElement":function(e){return this.ui.nameInput},"showInlineError":function(e){this.ui.nameInputError.attr("title",e),this.ui.nameInputError.text(e)},"clearInlineError":function(){this.ui.nameInputError.attr("title",""),this.ui.nameInputError.text("")},"validateNameInputAndSetAddButtonState":function(e){var t=!1,i=this.ui.nameInput.val();return i=i.trim(),i.length<1?t=!1:i.length>248?!0!==e&&this.showInlineError(d.nameErrorMaxLengthExceed):i.indexOf(":")>=0?!0!==e&&this.showInlineError(d.nameErrorContainSemiColon):(this.clearInlineError(),t=!0),t?(this.options.favModel.set("name",i),this.ui.addButton.prop("disabled",!1)):this.ui.addButton.prop("disabled",!0),t},"cancelButtonOnKeydownEvent":function(e){e&&13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.trigger("click:cancel:button"))},"controlsOnKeydownEvent":function(e){e&&13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),
this.validateNameInputAndSetAddButtonState()&&this.trigger("click:add:button"))},"onKeyupEvent":function(e){e&&27===e.keyCode&&(e.preventDefault(),this.trigger("click:cancel:button"))},"onNameInputEvent":function(e){if(!e||27!==e.keyCode){this.validateNameInputAndSetAddButtonState()}},"onClickNameInput":function(e){e&&e.stopPropagation(),this.groupsView&&this.groupsView.closeDropdownMenu()}});return e.extend(f.prototype,o),f}),csui.define("hbs!csui/widgets/favorites/impl/favorite.star/favorite.star.view",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"  <div class='csui-favorite-star-view-container csui-favorite-popover-container'>\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"selected"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(7,o,0),"loc":{"start":{"line":3,"column":4},"end":{"line":16,"column":11}}}))?s:"")+"  </div>\r\n"},"2":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button type="button" class="csui-favorite-star selected csui-acc-focusable"\r\n        '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"focusable"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.program(5,o,0),"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":66}}}))?s:"")+'\r\n              title="'+e.escapeExpression((l=null!=(l=r(i,"removeFav")||(null!=t?r(t,"removeFav"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"removeFav","hash":{},"loc":{"start":{"line":6,"column":21},"end":{"line":6,"column":34}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"removeFav")||(null!=t?r(t,"removeFav"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"removeFav","hash":{},"loc":{"start":{"line":6,"column":48},"end":{"line":6,"column":61}}}):l))+'">\r\n        '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","theme":null!=t?r(t,"iconTheme"):t,"iconName":null!=t?r(t,"iconName"):t},"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":69}}}))?s:"")+"\r\n      </button>\r\n"},"3":function(e,t,i,n,o){return'tabindex="0" '},"5":function(e,t,i,n,o){return'tabindex="-1"'},"7":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <button type="button" class="csui-favorite-star csui-acc-focusable"\r\n        '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"focusable"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.program(5,o,0),"loc":{"start":{"line":11,"column":8},"end":{"line":11,"column":66}}}))?s:"")+"\r\n        "+(null!=(s=r(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"showInFavoritesTable"):t,{"name":"unless","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":73}}}))?s:"")+'\r\n              title="'+e.escapeExpression((l=null!=(l=r(i,"addFav")||(null!=t?r(t,"addFav"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"addFav","hash":{},"loc":{"start":{"line":13,"column":21},"end":{"line":13,"column":31}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"addFav")||(null!=t?r(t,"addFav"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"addFav","hash":{},"loc":{"start":{"line":13,"column":45},"end":{"line":13,"column":55}}}):l))+'">\r\n        '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","theme":null!=t?r(t,"iconTheme"):t,"iconName":null!=t?r(t,"iconName"):t},"loc":{"start":{"line":14,"column":8},"end":{"line":14,"column":69}}}))?s:"")+"\r\n      </button>\r\n"},"8":function(e,t,i,n,o){return'aria-haspopup="dialog"'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"enabled"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":18,"column":7}}}))?s:""}});return i.registerPartial("csui_widgets_favorites_impl_favorite.star_favorite.star.view",n),n}),csui.define("css!csui/widgets/favorites/impl/favorite.star/favorite.star.view",[],function(){}),csui.define("csui/widgets/favorites/favorite.star.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/models/favorite.model","csui/dialogs/modal.alert/modal.alert","csui/utils/base","i18n","csui/controls/progressblocker/blocker","csui/utils/contexts/factories/favorites2","csui/utils/contexts/factories/favorite2groups","csui/widgets/favorites/impl/favorite.star/favorite.add.form.view","csui/controls/mixins/keyboard.navigation/modal.keyboard.navigation.mixin","csui/widgets/favorites/tileview.toolbaritems","csui/utils/commands","hbs!csui/widgets/favorites/impl/favorite.star/favorite.star.view","i18n!csui/widgets/favorites/impl/nls/lang","csui/controls/icons.v2","css!csui/widgets/favorites/impl/favorite.star/favorite.star.view"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f){"use strict";var g=i.ItemView.extend({"template":m,"templateHelpers":function(){return{"enabled":this.enabled(),"showInFavoritesTable":this.favTableOptions.isFavoritesTable,"focusable":this.options.focusable,"iconName":this._iconName,"iconTheme":this.options.useIconsForDarkBackground?"dark":"","addFav":f.addFav,"removeFav":f.removeFav,"selected":this.favModel.get("selected")}},"events":{"keydown":"onKeyInView","click":"_onClickView","click button.csui-favorite-star":"_onClickStarButton","click button .icon-socialFav":"_clickRemoveFavoriteStar","click button .icon-socialFavOpen":"_clickAddFavoriteStar"},"modelEvents":{"change:favorite":"onChangeFavorite"},"constructor":function(o){o||(o={}),e.defaults(o,{"formPopoverPlacement":"left","popoverAtBodyElement":!1,"focusable":!0,"favIcon":"csui_action_no_fav32","favOnIcon":"csui_action_fav32"}),this.favTableOptions=o.favoritesTableOptions||{},i.ItemView.call(this,o),o&&o.blockingParentView&&r.delegate(this,o.blockingParentView);var s=p.getSignatures(h);this.favGroupsCollection=o.context&&o.context.getCollection(c,{"detached":!0,"permanent":!0,"favorites":{"options":{"promotedActionCommands":[],"nonPromotedActionCommands":s}}});var l=a.getLimitedResourceScope();this.favGroupsCollection.favorites.setResourceScope(l);var u=this.model&&this.model.connector,d={};this.model&&(d=e.extend(this._getModelDataForFavoriteModel(),{"selected":this.model.get("favorite")})),this.favModel=new n(d,{"connector":u}),this.listenTo(this.favModel,"change:selected",this.render),this.uniqueViewId="view"+e.uniqueId(),this.popoverContainerClassname="csui-favorite-popover-container "+this.uniqueViewId,this.popoverContainerSelector=".csui-favorite-popover-container."+this.uniqueViewId,t(window).on("resize."+this.uniqueViewId,{"view":this},this._onWindowResize)},"onBeforeDestroy":function(){this.triggerMethod("close:add:favorite:form"),this.closePopover(),t(window).off("resize."+this.uniqueViewId,this._onWindowResize)},"enabled":function(){return!(!this.model||!this.options.context)},"onBeforeRender":function(){var e=this.favModel.get("selected");this._iconName=e?this.options.favOnIcon:this.options.favIcon},"onRender":function(){this._previousFocusElm&&t(this._previousFocusElm).hasClass("csui-favorite-star")&&(this.$el.find("button.csui-favorite-star").trigger("focus"),this._previousFocusElm=void 0),this._previousTitle=void 0,this.delegateEvents()},"_collectionEnsureFetched":function(){var e=this,i=t.Deferred();return this.blockActions&&this.blockActions(),this.favGroupsCollection.ensureFetched().always(function(){e.unblockActions&&e.unblockActions()}).done(function(e){i.resolve(e)}).fail(function(e){i.reject(e)}),i.promise()},"_onWindowResize":function(e){if(!s.isTouchBrowser()&&!s.isAppleMobile()&&e&&e.data&&e.data.view){var t=e.data.view;t.showingForm&&t.closePopover()}},"_getPopoverParent":function(){return this.options.popoverAtBodyElement?t(this.popoverContainerSelector):this.$el},"_handleClickEvent":function(e){if(!t(e.target).closest(".binf-popover").length){var i;if(e&&e.data&&e.data.view){if(i=e.data.view,i.commandBlocked)return;t(document).off("mouseup",i._handleClickEvent)}i&&i._getPopoverParent().find(".binf-popover").length>0&&(i.closePopover(),i._setBlocked())}},"_handleScrollEvent":function(e){if(!s.isTouchBrowser()&&!s.isAppleMobile()&&!t(e.target).closest(".binf-popover").length){var i;e&&e.data&&e.data.view&&(i=e.data.view,t(document).off("scroll",i._handleScrollEvent)),i&&i.closePopover()}},"_getModelDataForFavoriteModel":function(){var e;return e=this.favTableOptions.isFavoritesTable&&this.favTableOptions.selectedGroup?this.favTableOptions.selectedGroup.get("tab_id"):this.model.get("favorite_tab_id")||-1,{"id":this.model.get("id"),"name":this.model.get("favorite_name")||this.model.get("name"),"tab_id":e}},"_onClickView":function(e){!this.enabled()||this.$el.find(e.target).length>0||this._onClickStarButton(e)},"_onClickStarButton":function(e){this.favModel.get("selected")?this._clickRemoveFavoriteStar(e):this._clickAddFavoriteStar(e)},"_setBlocked":function(){this.commandBlocked=!0,setTimeout(e.bind(function(){this.commandBlocked=!1},this),500)},"_clickAddFavoriteStar":function(e){e&&e.preventDefault(),this.commandBlocked||(0===this._getPopoverParent().find(".binf-popover").length&&this._setBlocked(),this._capturePreviousFocusElement(),this.favModel.set(this._getModelDataForFavoriteModel()),this.favTableOptions.isFavoritesTable?(this._addFavoriteToClientSideCollection(!0),this.favGroupsCollection.trigger("bulk:update")):this._addFavoriteWithForm())},"_clickRemoveFavoriteStar":function(e){e&&e.preventDefault(),e&&e.stopPropagation(),this.commandBlocked||(this._setBlocked(),this._capturePreviousFocusElement(),this.favTableOptions.isFavoritesTable?(this._removeFavoriteFromClientSideCollection(!0),this.favGroupsCollection.trigger("bulk:update")):this._removeFavoriteFromServer())},"_clickAddButton":function(){this.commandBlocked||this._addFavoriteToServer().done(e.bind(function(){this._previousTitle=void 0,this.disengageModalKeyboardFocusOnClose(),this.closePopover(),this._restorePreviousFocusAfterClosingPopover()},this))},"_clickCancelButton":function(){this.closePopover()},"scrollCheckToClosePopover":function(){if(this._elTop){var e=this.$el.offset().top;(this._elTop&&this._elTop<e-15||this._elTop>e+15)&&this.closePopover()}},"_capturePreviousFocusElement":function(){this._previousFocusElm=document.activeElement},"_restorePreviousFocusAfterClosingPopover":function(){if(this._previousFocusElm){var e=t(this._previousFocusElm);e.hasClass("csui-favorite-star")?this.$el.find("button.csui-favorite-star").trigger("focus"):e.trigger("focus"),this._previousFocusElm=void 0}},"closePopover":function(){if(this._getPopoverParent().find(".binf-popover").length>0){t(document).off("mouseup",this._handleClickEvent),t(document).off("scroll",this._handleScrollEvent),this.disengageModalKeyboardFocusOnClose(),this.triggerMethod("close:add:favorite:form"),this.showingForm=!1,this.commandBlocked=!1,this._elTop=void 0;var i=t(this.$el.find(".csui-favorite-star")[0]);i.binf_popover("destroy"),this._previousTitle&&(i.attr("title",this._previousTitle),this._previousTitle=void 0),this._restorePreviousFocusAfterClosingPopover(),setTimeout(e.bind(function(){this.addForm&&this.addForm.destroy(),this.addForm=void 0,this.options.popoverAtBodyElement&&t(this.popoverContainerSelector).remove()},this),500)}},"_removeFavoriteFromClientSideCollection":function(e){var t=this;this._setModelFavorite(!1),this.$el.trigger("favorite:change"),!0===e&&(this.listenToOnce(this.favGroupsCollection,"bulk:update:succeed",function(){t.stopListening(t.favGroupsCollection,"bulk:update:fail"),t.favModel.set("selected",!1)}),this.listenToOnce(this.favGroupsCollection,"bulk:update:fail",function(){t.stopListening(t.favGroupsCollection,"bulk:update:succeed"),t._setModelFavorite(!0)})),this._collectionEnsureFetched().always(function(){t.favGroupsCollection.each(function(e){e.favorites&&e.favorites.remove({"id":t.favModel.get("id")})})})},"_removeFavoriteFromServer":function(){var e=this;this.blockActions&&this.blockActions(),this.favModel.removeFromFavorites().always(function(t){e.unblockActions&&e.unblockActions()}).done(function(t){e._removeFavoriteFromClientSideCollection()}).fail(function(t){e._showErrorMessage(e.favModel,t)})},"_addFavoriteWithForm":function(){this._getPopoverParent().find(".binf-popover").length>0||this._collectionEnsureFetched().always(e.bind(function(){this._showAddFavoriteForm()},this))},"_showAddFavoriteForm":function(){this.favModel.set(this._getModelDataForFavoriteModel()),this.addForm&&this.addForm.destroy(),this.addForm=new u({"context":this.options.context,"model":this.model,"favModel":this.favModel,"collection":this.favGroupsCollection}),this.addForm.render(),this.listenTo(this.addForm,"click:add:button",this._clickAddButton),this.listenTo(this.addForm,"click:cancel:button",this._clickCancelButton);var i=this.options.formPopoverPlacement,n=l&&l.settings.rtl,o={"html":!0,"content":this.addForm.el,"trigger":"manual","placement":i};if(this.options.popoverAtBodyElement){var r=t("body"),a=this.$el.closest(".binf-modal-body");a&&a.length>0&&(r=t(a[0])),r.append('<div class="binf-widgets '+this.popoverContainerClassname+'"></div>'),o=e.extend(o,{"container":this.popoverContainerSelector})}var c=t(this.$el.find(".csui-favorite-star")[0]);this._previousTitle=c.attr("title");var d=c.offset().left;2===window.devicePixelRatio&&t(window).width()-d<350&&n||d<350&&(i="left"===i?"right":"left"),o.placement=i,c.binf_popover(o).binf_popover("show");var h=this._getPopoverParent().find(".binf-popover");this.favGroupsCollection.length>1&&h.addClass("show-groups");var p=parseInt(h.css("top"),10)+52;h.css("top",p);var m=h.find(".binf-arrow");if(m.css("top",20),!0===this.options.popoverAtBodyElement)!0!==s.isVisibleInWindowViewportVertically(h)&&(p=parseInt(h.css("top"),10)-h.height()+45,h.css("top",p),m.css("top",h.height()-20));else if(this.options.checkVisible){var f=h.closest(".csui-perfect-scrolling");0===f.length&&(f=h.closest(".csui-normal-scrolling")),!0!==s.isElementVisibleInParent(h,f,90,90)&&(p=parseInt(h.css("top"),10)-h.height()+45,h.css("top",p),t(this.$el.find(".binf-arrow")[0]).css("top",h.height()-23))}var g=t(this.$el.find(".csui-favorite-star")[0]),b=g.offset().top+g.height()/2,v=m.offset().top+11,w=b-v;h.offset({"top":h.offset().top+w}),this.engageModalKeyboardFocusOnOpen(this.addForm.el);var y=e.uniqueId("popoverLabelId");h.find(">.binf-popover-title").attr("id",y),h.attr("role","dialog"),h.attr("aria-labelledby",y),c.on("shown.binf.popover",e.bind(function(e){if(this._elTop=this.$el.offset().top,this.addForm){var i=this.addForm.currentlyFocusedElement();i.trigger("focus"),i.select()}t(document).on("mouseup",{"view":this},this._handleClickEvent),this.options.popoverAtBodyElement&&t(document).on("scroll",{"view":this},this._handleScrollEvent),this.triggerMethod("show:add:favorite:form")},this)),this.showingForm=!0},"_addFavoriteToClientSideCollection":function(t){var i=this;this._setModelFavorite(!0),this.$el.trigger("favorite:change",this.favModel),!0===t&&(this.listenToOnce(this.favGroupsCollection,"bulk:update:succeed",function(){i.stopListening(i.favGroupsCollection,"bulk:update:fail"),i.favModel.set("selected",!0)}),this.listenToOnce(this.favGroupsCollection,"bulk:update:fail",function(){i.stopListening(i.favGroupsCollection,"bulk:update:succeed"),i._setModelFavorite(!1)})),this._collectionEnsureFetched().always(e.bind(function(){var e=this.favModel.get("tab_id"),t=this.favGroupsCollection.findWhere({"tab_id":e}),i=this.model.clone();i.set({"favorite":!0,"favorite_name":this.favModel.get("name"),"favorite_tab_id":e}),t.favorites.add(i)},this))},"_addFavoriteToServer":function(){var e=t.Deferred(),i=this;return this.blockActions&&this.blockActions(),this.favModel.addToFavorites().always(function(e){i.unblockActions&&i.unblockActions()}).done(function(t){e.resolve(t),i._addFavoriteToClientSideCollection()}).fail(function(t){e.reject(t),i._showErrorMessage(i.favModel,t)}),e.promise()},"_suspendPopoverBehaviors":function(){this._getPopoverParent().find(".binf-popover").length>0&&(this._focusElementBeforeErrorDialog=document.activeElement,t(document).off("mouseup",this._handleClickEvent),this.disengageModalKeyboardFocusOnClose())},"_resumePopoverBehaviors":function(){this._getPopoverParent().find(".binf-popover").length>0&&(t(document).on("mouseup",{"view":this},this._handleClickEvent),this.addForm&&this.engageModalKeyboardFocusOnOpen(this.addForm.el),this._focusElementBeforeErrorDialog&&t(this._focusElementBeforeErrorDialog).trigger("focus"),this._focusElementBeforeErrorDialog=void 0)},"_showErrorMessage":function(t,i){var n=new s.Error(i),l=f.updateFavoriteFailTitle,r=e.str.sformat(f.updateFavoriteFailMessage,t.get("id"),n.message);this._suspendPopoverBehaviors(),o.showError(r,l).always(e.bind(function(){this._resumePopoverBehaviors()},this))},"toggleFavorite":function(){this.model.get("favorite")?this._clickRemoveFavoriteStar():this._clickAddFavoriteStar()},"_setModelFavorite":function(e){this.model.set("favorite",e)},"onChangeFavorite":function(){this.favModel.set("selected",this.model.get("favorite"))},"onKeyInView":function(e){if(32===e.keyCode||13===e.keyCode){if(this._getPopoverParent().find(".binf-popover").length>0)return void e.stopPropagation();e.preventDefault(),e.stopPropagation(),this.enabled()&&this.toggleFavorite()}}});return d.mixin(g.prototype),g}),csui.define("css!csui/controls/table/cells/favorite/impl/favorite",[],function(){}),csui.define("csui/controls/table/cells/favorite/favorite.view",["csui/lib/underscore","csui/controls/table/cells/cell/cell.view","csui/controls/table/cells/cell.registry","csui/widgets/favorites/favorite.star.view","css!csui/controls/table/cells/favorite/impl/favorite"],function(e,t,i,n){var o=t.extend({"constructor":function(e){t.prototype.constructor.apply(this,arguments)},"onBeforeDestroy":function(){this.triggerMethod("close:add:favorite:form"),this.favStarView&&(this.favStarView.destroy(),this.favStarView=void 0)},"renderValue":function(){this.favStarView||(this.favStarView=new n(e.extend({"checkVisible":!0,"popoverAtBodyElement":!0,"focusable":!1,"blockingParentView":this.options.tableView},this.options))),this.listenTo(this.favStarView,"show:add:favorite:form",function(){this.triggerMethod("show:add:favorite:form")}),this.listenTo(this.favStarView,"close:add:favorite:form",function(){this.triggerMethod("close:add:favorite:form")}),this.favStarView.render(),this.$el.append(this.favStarView.el),this.listenTo(this.options.tableView,"scroll",function(){this.favStarView&&this.favStarView.scrollCheckToClosePopover()})}},{"hasFixedWidth":!0,"columnClassName":"csui-table-cell-favorite"});return i.registerByColumnKey("favorite",o),o}),csui.define("csui/controls/table/cells/favorite/favorite.name.view",["csui/controls/table/cells/name/name.view","csui/controls/table/cells/cell.registry"],function(e,t){var i=e.extend({});return t.registerByColumnKey("favorite_name",i),i}),csui.define("hbs!csui/controls/table/cells/type.icon/impl/type.icon",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"inactive"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":2,"column":2},"end":{"line":7,"column":9}}}))?s:""},"2":function(e,t,i,n,o){return'    <div class="csui-table-cell-no-default-action"></div>\r\n'},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <a class="csui-table-cell-default-action" href="'+e.escapeExpression((s=null!=(s=l(i,"defaultActionUrl")||(null!=t?l(t,"defaultActionUrl"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"defaultActionUrl","hash":{},"loc":{"start":{"line":5,"column":52},"end":{"line":5,"column":72}}}):s))+'"\r\n       aria-label="'+e.escapeExpression((s=null!=(s=l(i,"typeAndNameAria")||(null!=t?l(t,"typeAndNameAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"typeAndNameAria","hash":{},"loc":{"start":{"line":6,"column":19},"end":{"line":6,"column":38}}}):s))+'"></a>\r\n'},"6":function(e,t,i,n,o){return'  <div class="csui-table-cell-no-default-action"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"defaultAction"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(6,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":10,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_table_cells_type.icon_impl_type.icon",n),n}),csui.define("css!csui/controls/table/cells/type.icon/impl/type.icon",[],function(){}),csui.define("csui/controls/table/cells/type.icon/type.icon.view",["csui/lib/underscore","csui/lib/marionette","csui/controls/table/cells/templated/templated.view","csui/controls/node-type.icon/node-type.icon.view","csui/controls/table/cells/cell.registry","csui/utils/node.links/node.links","hbs!csui/controls/table/cells/type.icon/impl/type.icon","i18n!csui/controls/table/impl/nls/lang","csui/controls/icons.v2","css!csui/controls/table/cells/type.icon/impl/type.icon"],function(e,t,i,n,o,s,l,r,a){"use strict";var c=i.extend({"events":{"keydown":"onKeyInView"},"template":l,"constructor":function(e){i.prototype.constructor.apply(this,arguments),this.needsAriaLabel=!this.options.column.defaultAction,this.listenTo(this,"render",this._createNodeTypeIcon).listenTo(this,"before:render",this._destroyNodeTypeIcon).listenTo(this,"before:destroy",this._destroyNodeTypeIcon)},"getValueData":function(){var t=this.model,i=s.getUrl(this.model),n=e.str.sformat(r.typeAndNameAria,t.get("type_name"),t.get("name"));return{"defaultAction":this.options.column.defaultAction,"defaultActionUrl":i,"typeAndNameAria":n,"inactive":t.get("inactive")}},"_createNodeTypeIcon":function(){var e=new n({"node":this.model});this.cellRegion=new t.Region({"el":this.$("> *")}),this.cellRegion.show(e)},"_destroyNodeTypeIcon":function(){this.cellRegion&&(this.cellRegion.empty(),this.cellRegion=null)},"getValueText":function(){return this.model.get("type_name")||""}},{"hasFixedWidth":!0,"noTitleInHeader":!0,"columnClassName":"csui-table-cell-type"});return o.registerByColumnKey("type",c),o.registerByColumnKey("OTMIMEType",c),c}),csui.define("csui/dialogs/members.picker/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/dialogs/members.picker/impl/nls/root/lang",{"ViewDenied":'Access denied, you do not have permission to view "{0}".',"cancelButtonLabel":"Cancel","dialogTitle":"View group membership","serverError":"Server request failed with error code {0}.","backButtonTooltip":"Go back","missingConnector":"Missing connector information!","emptyMembersText":"No results found.","UserPickerPlaceHolder":"Enter user or group","addButtonLabel":"Add","selectPermissionLevel":"Select permission level","nextButtonLabel":"Next","doneButtonLabel":"Done","groupSymbolAlt":"Group symbol","userSymbolAlt":"User symbol","disabledItemTypeNameAria":"Disabled: {0}: {1}","itemTypeNameAria":"{0}: {1}","AddUserOrGroup":"Add user or group","AddMember":"Add member","userSearchPlaceHolder":"Search for user","addAnotherNamePlaceHolder":"Add another user or group","removeSelectedUser":"Remove member","removeSelectedUserAria":"Remove {0} from selection list","singleUserText":"{0} added to the {1} group.","singleUserFailureText":"{0} failed to add to the {1} group.","SinglePassMoreThanOneFail":"{0} added to the {1} group and {2} members failed to added to the group.","onlyFailUsersText":"{0} members failed to add to the {1} group","onlyAllSuccessText":"{0} members Successfully added to the {1} group","onlyAllFailureText":"{0} members failed to add to the {1} group","manyUserText":"{0} members Successfully added, {1} members failed to add to the {2} group .","searchIconTitle":"Open user or group search box","searchIconAria":"Click or press enter to open user or group search box","openSearchBar":"Open search bar","closeSearchBar":"Close search bar"}),csui.define("hbs!csui/dialogs/members.picker/impl/member.list/list.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return""},"3":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="csui-item-standard csui-list-group-item" role="list">\r\n    <div class="user-profile-row">\r\n      <div class="user-profile-img  binf-pull-left">\r\n        <span class="csui-icon csui-start-icon '+e.escapeExpression((l=null!=(l=r(i,"selected")||(null!=t?r(t,"selected"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"selected","hash":{},"loc":{"start":{"line":6,"column":47},"end":{"line":6,"column":59}}}):l))+'"></span>\r\n\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isGroup"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.program(6,o,0),"loc":{"start":{"line":8,"column":8},"end":{"line":21,"column":15}}}))?s:"")+'      </div>\r\n\r\n      <div class="user-profile-info  binf-pull-left">\r\n        <div class="'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isGroup"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":25,"column":20},"end":{"line":25,"column":59}}}))?s:"")+'"><span title="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":25,"column":74},"end":{"line":25,"column":82}}}):l))+'"\r\n                                                                   class="binf-pull-left csui-list-item-title">'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":26,"column":111},"end":{"line":26,"column":119}}}):l))+"</span></div>\r\n"+(null!=(s=r(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isGroup"):t,{"name":"unless","hash":{},"fn":e.program(10,o,0),"inverse":e.noop,"loc":{"start":{"line":27,"column":8},"end":{"line":30,"column":19}}}))?s:"")+"      </div>\r\n    </div>\r\n  </span>\r\n"},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span\r\n              class="csui-user-default-picture-dlg csui-icon image_group_placeholder_permission"></span>\r\n        <span><img src="'+e.escapeExpression((s=null!=(s=l(i,"imgSrc")||(null!=t?l(t,"imgSrc"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"imgSrc","hash":{},"loc":{"start":{"line":11,"column":24},"end":{"line":11,"column":34}}}):s))+'" alt="'+e.escapeExpression((s=null!=(s=l(i,"imgAlt")||(null!=t?l(t,"imgAlt"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"imgAlt","hash":{},"loc":{"start":{"line":11,"column":41},"end":{"line":11,"column":51}}}):s))+'"\r\n                   class="binf-hidden csui-user-profile-picture-dlg csui-member-group-icon csui-icon" /></span>\r\n        <span class="csui-icon csui-end-icon icon-sidebar-expand24 binf-hidden"></span>\r\n'},"6":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n          <span\r\n              class="csui-user-default-picture-dlg csui-icon image_user_placeholder">'+e.escapeExpression((s=null!=(s=l(i,"initials")||(null!=t?l(t,"initials"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"initials","hash":{},"loc":{"start":{"line":17,"column":85},"end":{"line":17,"column":97}}}):s))+'</span>\r\n        <span><img src="'+e.escapeExpression((s=null!=(s=l(i,"imgSrc")||(null!=t?l(t,"imgSrc"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"imgSrc","hash":{},"loc":{"start":{"line":18,"column":24},"end":{"line":18,"column":34}}}):s))+'" alt="'+e.escapeExpression((s=null!=(s=l(i,"imgAlt")||(null!=t?l(t,"imgAlt"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"imgAlt","hash":{},"loc":{"start":{"line":18,"column":41},"end":{"line":18,"column":51}}}):s))+'"\r\n                   class="binf-hidden csui-user-profile-picture-dlg csui-member-group-icon csui-icon" /></span>\r\n\r\n'},"8":function(e,t,i,n,o){return" user-group-name "},"10":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div><span class="binf-pull-left csui-list-item-department"\r\n                     title="'+e.escapeExpression((s=null!=(s=l(i,"department")||(null!=t?l(t,"department"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"department","hash":{},"loc":{"start":{"line":29,"column":28},"end":{"line":29,"column":42}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"department")||(null!=t?l(t,"department"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"department","hash":{},"loc":{"start":{"line":29,"column":44},"end":{"line":29,"column":58}}}):s))+"</span></div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"totalcount"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":34,"column":7}}}))?s:""}});return i.registerPartial("csui_dialogs_members.picker_impl_member.list_list.item",n),n}),csui.define("hbs!csui/dialogs/node.picker/impl/search.list/search.location.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="csui-type-location-icon" aria-hidden="true"></span><span title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":1,"column":77},"end":{"line":1,"column":85}}}):s))+'"\r\n                                                                      class="csui-list-item-title">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":2,"column":99},"end":{"line":2,"column":107}}}):s))+"</span>\r\n"}});return i.registerPartial("csui_dialogs_node.picker_impl_search.list_search.location.item",n),n}),csui.define("css!csui/dialogs/members.picker/impl/members.picker",[],function(){}),
csui.define("csui/dialogs/members.picker/impl/member.list/list.item.view",["csui/lib/underscore","csui/lib/jquery","csui/controls/listitem/listitemstandard.view","csui/utils/url","csui/utils/user.avatar.color","hbs!csui/dialogs/members.picker/impl/member.list/list.item","hbs!csui/dialogs/node.picker/impl/search.list/search.location.item","i18n!csui/dialogs/members.picker/impl/nls/lang","css!csui/dialogs/members.picker/impl/members.picker"],function(e,t,i,n,o,s,l,r){return i.extend({"template":s,"searchLocationTemplate":l,"templateHelpers":function(){return{"defaultProfilePictureClass":this._isGroup()?"image_group_placeholder_permission":"image_user_placeholder","imgAlt":this._isGroup()?r.groupSymbolAlt:r.userSymbolAlt,"department":this.options.model.get("group_id_expand")&&this.options.model.get("group_id_expand").name,"totalcount":!this.options.model.collection.totalCount,"isGroup":!!this._isGroup(),"name":this.options.model.get("name_formatted"),"selected":this.selected?"icon-listview-checkmark":"","imgSrc":"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs="}},"tagName":"li","events":{"keydown":"onKeyInView"},"ui":{"link":".csui-list-group-item"},"onKeyInView":function(e){return 39!==e.keyCode&&32!==e.keyCode&&13!==e.keyCode||(this.$el.trigger("focus"),!1)},"_isUser":function(){return 0===this.options.model.get("type")},"_isGroup":function(){return 1===this.options.model.get("type")},"_isInActiveUser":function(){return this.options.model.get("type")<0},"constructor":function(e){i.apply(this,arguments),this.browsed=!1},"toggleSelect":function(){this.selected=!this.selected,this.isDestroyed||this.render()},"toggleBrowse":function(){this.browsed=!this.browsed,this.render()},"assignedBrowseNSelect":function(){this.browsed=this.selected=!0,this.render()},"unassignBrowseNSelect":function(){this.isDestroyed||(this.browsed=this.selected=!1,this.render())},"isSelected":function(){return this.selected},"isBrowsed":function(){return this.browsed},"setValidity":function(e){this.valid=e},"onRender":function(){this.$el.addClass("cs-left-item-"+this.model.get("id")),this.$el.removeClass("select"),this.$el.removeClass("browse"),this.ui.link.removeAttr("aria-selected"),this.$el.attr("role","option");var t=e.str.sformat(r.itemTypeNameAria,this.model.get("type_name"),this.model.get("name"));this.valid||(t=e.str.sformat(r.disabledItemTypeNameAria,this.model.get("type_name"),this.model.get("name"))),this.$el.attr("aria-label",t),this.selected?(this._isGroup()&&this.$el.find("span").removeClass("binf-hidden"),this.$el.addClass("select"),this.$el.attr("aria-selected","true")):this.browsed&&(this.$el.addClass("browse"),this.$el.find("span.csui-end-icon").removeClass("binf-hidden")),this._isBrowsable(this.model)&&(this.ui.link.attr("aria-haspopup","true"),this.ui.link.attr("aria-expanded","false")),this._renderPhoto()},"_renderPhoto":function(){var t=this.model.get("photo_url"),i=o.getUserAvatarColor(this.options.model.attributes.data.properties);if(this.$el.find(".csui-user-default-picture-dlg.image_user_placeholder").css("background-color",i),this._isGroup()||null===t);else{var n=this;this._resolvePhoto(t).done(e.bind(function(e){var t=n.$el.find(".csui-user-profile-picture-dlg");n.$el.find(".csui-user-default-picture-dlg").addClass("binf-hidden"),n.url=URL.createObjectURL(e),t.removeClass("binf-hidden").attr("src",n.url)})).fail(function(){n.$el.find(".csui-user-profile-picture-dlg").attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=")})}},"_resolvePhoto":function(e){var i=this.options.model.connector,o=i.connection,s=new n(o.url).getCgiScript(),l=t.Deferred(),r=n.combine(s,e),a={"url":r,"dataType":"binary","connection":o};return i.makeAjaxCall(a).done(function(e){l.resolve(e)}).fail(l.reject),l.promise()},"_isBrowsable":function(e){return e.get("container")&&!1!==e.get("perm_see_contents")}})}),csui.define("hbs!csui/dialogs/members.picker/impl/member.list/member.list",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="list-content">\r\n  <ul class="binf-list-group" role="listbox"></ul>\r\n  <div class="binf-search-location-group"></div>\r\n</div>'}});return i.registerPartial("csui_dialogs_members.picker_impl_member.list_member.list",n),n}),csui.define("hbs!csui/dialogs/members.picker/impl/member.list/empty.members.list",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<p class='csui-members-empty'> "+e.escapeExpression((s=null!=(s=l(i,"emptyTableText")||(null!=t?l(t,"emptyTableText"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"emptyTableText","hash":{},"loc":{"start":{"line":1,"column":31},"end":{"line":1,"column":49}}}):s))+" </p>\r\n"}});return i.registerPartial("csui_dialogs_members.picker_impl_member.list_empty.members.list",n),n}),csui.define("css!csui/dialogs/members.picker/impl/member.list/member.list",[],function(){}),csui.define("csui/dialogs/members.picker/impl/member.list/member.list.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/dialogs/members.picker/impl/member.list/list.item.view","csui/controls/progressblocker/blocker","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","hbs!csui/dialogs/members.picker/impl/member.list/member.list","hbs!csui/dialogs/members.picker/impl/member.list/empty.members.list","i18n!csui/dialogs/members.picker/impl/nls/lang","css!csui/dialogs/members.picker/impl/member.list/member.list"],function(e,t,i,n,o,s,l,r,a,c){"use strict";return i.CompositeView.extend({"className":"cs-list","template":r,"childViewContainer":".binf-list-group","childView":n,"childViewOptions":function(){return{"locationEle":this.ui.location}},"childEvents":{"click:item":"onItemClick","before:add:child":"onBeforeAddChild"},"ui":{"listParent":".list-content","list":".binf-list-group","location":".binf-search-location-group"},"events":{"keydown":"onKeyInView"},"onBeforeAddChild":function(e){var t=this.commandType.validateTarget(e.model);e.setValidity(t)},"onAddChild":function(t){var i=t.model.get("id");if(this.selectedItem&&this.selectedItem.model.get("id")===i&&(this.selectedItem=t,this.toggleSelectedChild(t)),this.commandType.validateMember(t.model)?t.$el.addClass("csui-acc-focusable"):t.$el.hide(),!this.commandType.isSelectable(t.model)&&!this._isBrowsable(t.model)){t.$el.addClass("csui-disabled");var n=e.str.sformat(c.disabledItemTypeNameAria,t.model.get("type_name"),t.model.get("name"));t.$el.attr("aria-label",n)}return this._isBrowsable(t.model)?(t.ui.link.attr("aria-haspopup","true"),t.ui.link.attr("aria-expanded","false")):(t.ui.link.removeAttr("aria-haspopup"),t.ui.link.removeAttr("aria-expanded")),this.browsedChild&&this.browsedChild.model.get("id")===i&&(this.browsedChild=t,this.toggleBrowsedChild(t)),!0},"collectionEvents":{"sync":"syncUpdate","reset":"rebuild"},"behaviors":{"PerfectScrolling":{"behaviorClass":l,"contentParent":"> .list-content","suppressScrollX":!0},"TabableRegion":{"behaviorClass":s}},"isTabable":function(){return this.children.find(function(e){var t=e.$el;return t.is(":visible")&&!t.is(":disabled")})},"currentlyFocusedElement":function(){var e=this.$el.find(".binf-list-group-item.csui-acc-focusable");return e.length?t(e[this.focusIndex]):t()},"setFocus":function(){var e=this.$el.find(".binf-list-group-item.csui-acc-focusable");t(e[this.focusIndex]).trigger("focus")},"onKeyInView":function(e){var i=e.keyCode,n=this.$el.find(".binf-list-group-item.csui-acc-focusable");switch(i){case 38:case 40:38===i?this.focusIndex>0&&--this.focusIndex:this.focusIndex<n.length&&++this.focusIndex,this.trigger("changed:focus"),t(n[this.focusIndex]).trigger("focus")}},"constructor":function(n){n||(n={}),e.defaults(n,{"pageSize":30}),i.CompositeView.prototype.constructor.apply(this,arguments),this.jQuery=t,o.imbue(this),this.selectedItem=n.selection?n.selection:null,this.blockScroll=!0,this.notFetching=!0,this.init=!0,this.nextCollectionPage=e.bind(this.addNextCollectionPage,this),this.commandType=n.commandType,this.focusIndex=0,this.listenTo(this.collection,"sync",function(){if(this.ui.listParent.find("p.csui-members-empty").remove(),0===this.collection.length){this.ui.listParent.addClass("csui-members-empty");var e=a.call(this,{"emptyTableText":c.emptyMembersText});this.ui.listParent.append(e)}else this.ui.listParent.removeClass("csui-members-empty")}),this.listenTo(this.collection,"request",this.setBlocker),this.listenTo(this.collection,"reset",this.setBlocker),this.listenTo(this,"browse:complete",function(){this.notFetching=!0})},"syncUpdate":function(){this.nextTriggerSetting=this.options.pageSize/2,this.blockScroll=!0,this.notFetching=!0,this.init=!0,this.browsedChild&&!this.collection.findWhere({"id":this.browsedChild.model.get("id")})&&(this.browsedChild=void 0),this.unblockActions(),this.currentlyFocusedElement().attr("tabindex",-1)},"rebuild":function(){if(this.ui.listParent.find("p.csui-members-empty").remove(),0===this.collection.length){this.ui.listParent.addClass("csui-members-empty");var e=a.call(this,{"emptyTableText":c.emptyMembersText});this.ui.listParent.append(e)}else this.ui.listParent.removeClass("csui-members-empty");this.reset(),this.trigger("dom:refresh")},"reset":function(){this.init=!0;var e=this;this.scrollBar&&(this.scrollBar.scrollTop(0),this.collection.length||setTimeout(function(){e.triggerMethod("update:scrollbar",this)},0))},"stopBlocker":function(){return this.unblockActions(),!0},"setBlocker":function(){return this.blockScroll&&(this.blockScroll=!1,this.blockActions()),!0},"addNextCollectionPage":function(){var e=this.collection.length,t=this.ui.list.height()-this.ui.listParent.height(),i=this.ui.listParent.scrollTop()/t,n=(e-this.nextTriggerSetting)/e;e&&e<this.collection.totalCount&&i>=n&&(this.notFetching&&(this.notFetching=!1,this.collection.setSkip(e,!1),this.collection.fetch({"reset":!1,"remove":!1,"merge":!1})),i>.98&&this.init&&(this.setBlocker(),this.init=!1))},"onDomRefresh":function(){this.scrollBar||(this.scrollBar=this.ui.listParent,this.scrollBar.on("scroll",this.nextCollectionPage))},"onItemClick":function(e){e.$el.hasClass("csui-disabled")||this._processClickedItem(e)},"_processClickedItem":function(e){if(this.notFetching){this.notFetching=!1;this._isBrowsable(e.model)?this._browseSelection(e):this._targetSelection(e),e.$el.trigger("blur")}return this.$el.trigger("setCurrentTabFocus"),!0},"clearSelect":function(){var e=this;return this.selectedItem&&e.toggleSelectedChild(this.selectedItem),this.selectedItem=null,!0},"toggleSelectedChild":function(e){this.commandType.isSelectable(e.model)&&e.toggleSelect()},"toggleBrowsedChild":function(e){e&&e.toggleBrowse()},"_isBrowsable":function(e){return 1===e.get("type")},"_targetSelection":function(e){var t=e.model,i=(t.get("id"),e.isSelected()),n=t.get("type");this.clearSelect(),i||(this.selectedItem=e,this.toggleSelectedChild(e)),this.trigger("selection:change",{"type":n,"member":t,"add":!i}),this.notFetching=!0},"_browseSelection":function(e){var t=this.commandType.isSelectableType(e.model),i=this.commandType.isSelectable(e.model),n=this.commandType.browseAllowed(e.model),o=e.isBrowsed(),s=!1,l=e.model.attributes.type;o?(i&&this._targetSelection(e),this.notFetching=!0):(i?(this._browseNSelect(e),s=!0):((n||t)&&(this.clearSelect(),s=!0),this.toggleBrowsedChild(e)),n&&this.trigger("selection:change",{"member":e.model,"silent":!1,"add":s,"type":l}),this._browse(e,s))},"_browse":function(e,t){this.browsedChild&&this.browsedChild.toggleBrowse(),this.browsedChild=e,e.ui.link.attr("aria-expanded","true"),this.trigger("browse:select",{"member":e.model,"add":t})},"_browseNSelect":function(e){this.clearSelect(),this.selectedItem=e,e.assignedBrowseNSelect()}})}),csui.define("hbs!csui/dialogs/members.picker/impl/select.view/impl/header/header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-search-item-left-panel">\r\n    <div class="csui-search-item-type">\r\n      <span class="csui-type-label"> '+e.escapeExpression((s=null!=(s=l(i,"type")||(null!=t?l(t,"type"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"type","hash":{},"loc":{"start":{"line":4,"column":37},"end":{"line":4,"column":45}}}):s))+' </span>\r\n    </div>\r\n    <div class="csui-search-item">\r\n      <div class="csui-search-item-name">\r\n        '+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":16}}}):s))+'\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="csui-search-item-right-panel">\r\n    <div class="csui-search-item-location">\r\n      <div class="csui-search-toolbar-container">\r\n        '+e.escapeExpression((s=null!=(s=l(i,"location")||(null!=t?l(t,"location"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"location","hash":{},"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":20}}}):s))+"\r\n      </div>\r\n    </div>\r\n  </div>\r\n"},"3":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-targetbrowse-history">\r\n      <span class="csui-targetbrowse-arrow-back">\r\n        <span class="icon arrow_back cs-go-back" title="'+e.escapeExpression((l=null!=(l=r(i,"backButtonTooltip")||(null!=t?r(t,"backButtonTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"backButtonTooltip","hash":{},"loc":{"start":{"line":22,"column":56},"end":{"line":22,"column":77}}}):l))+'" tabindex="0"\r\n              aria-label="'+e.escapeExpression((l=null!=(l=r(i,"backButtonAria")||(null!=t?r(t,"backButtonAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"backButtonAria","hash":{},"loc":{"start":{"line":23,"column":26},"end":{"line":23,"column":44}}}):l))+'" data-cstabindex="-1" role="link"></span>\r\n      </span>\r\n  </div>\r\n  <div class="csui-folder-name">\r\n    <span class="folder-name" title="'+e.escapeExpression((l=null!=(l=r(i,"title")||(null!=t?r(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":27,"column":37},"end":{"line":27,"column":46}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"title")||(null!=t?r(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":27,"column":48},"end":{"line":27,"column":57}}}):l))+"</span>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"allMembers"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":28,"column":4},"end":{"line":32,"column":11}}}))?s:"")+'  </div>\r\n\r\n  <form class="cs-modal-filter">\r\n    <div class="binf-form-group">\r\n      <span class="icon-search-placeholder">'+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"iconName":"csui_action_search32"},"loc":{"start":{"line":37,"column":44},"end":{"line":37,"column":89}}}))?s:"")+'</span>\r\n      <input class="binf-form-control cs-filter-input" placeholder="'+e.escapeExpression((l=null!=(l=r(i,"search_placeholder")||(null!=t?r(t,"search_placeholder"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_placeholder","hash":{},"loc":{"start":{"line":38,"column":68},"end":{"line":38,"column":90}}}):l))+'"\r\n             tabindex="0" data-cstabindex="-1" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"search_aria")||(null!=t?r(t,"search_aria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_aria","hash":{},"loc":{"start":{"line":39,"column":59},"end":{"line":39,"column":74}}}):l))+'">\r\n      <span class="binf-form-control-feedback cs-icon icon-formfield-clear" role="button"\r\n            aria-label="'+e.escapeExpression((l=null!=(l=r(i,"clearSearchButtonAria")||(null!=t?r(t,"clearSearchButtonAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"clearSearchButtonAria","hash":{},"loc":{"start":{"line":41,"column":24},"end":{"line":41,"column":49}}}):l))+'" tabindex="0" data-cstabindex="-1"></span>\r\n      <button class="binf-btn csui-form-control-search" title="'+e.escapeExpression((l=null!=(l=r(i,"collapseSearch")||(null!=t?r(t,"collapseSearch"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"collapseSearch","hash":{},"loc":{"start":{"line":42,"column":63},"end":{"line":42,"column":81}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"collapseSearch")||(null!=t?r(t,"collapseSearch"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"collapseSearch","hash":{},"loc":{"start":{"line":42,"column":95},"end":{"line":42,"column":113}}}):l))+'" aria-expanded="true" aria-haspopup="true"\r\n              tabindex="0" data-cstabindex="-1">\r\n      <span class="form-control-search cs-icon icon-sv-search-hide"></span>\r\n      </button>\r\n    </div>\r\n  </form>\r\n'},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="cs-icon icon-sv-search csui-acc-focusable" tabindex="0" data-cstabindex="-1"\r\n            role="button" aria-expanded="false" title="'+e.escapeExpression((s=null!=(s=l(i,"openSearchBar")||(null!=t?l(t,"openSearchBar"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"openSearchBar","hash":{},"loc":{"start":{"line":30,"column":55},"end":{"line":30,"column":72}}}):s))+'"\r\n            aria-label="'+e.escapeExpression((s=null!=(s=l(i,"searchInButtonAria")||(null!=t?l(t,"searchInButtonAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"searchInButtonAria","hash":{},"loc":{"start":{"line":31,"column":24},"end":{"line":31,"column":46}}}):s))+'"></span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"searchView"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":48,"column":7}}}))?s:""}});return i.registerPartial("csui_dialogs_members.picker_impl_select.view_impl_header_header",n),n}),csui.define("csui/dialogs/node.picker/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/dialogs/node.picker/impl/nls/root/lang",{"noSearchResultMessage":"No results found","PermissionDenied":"Permission denied","ViewDenied":'Access denied, you do not have permission to view "{0}".',"InsufficientContent":"Insufficient content to open the browse dialog","selectButtonLabel":"Select","cancelButtonLabel":"Cancel","copyButtonLabel":"Copy","moveButtonLabel":"Move","clearSearchButtonAria":"Clear Search","collapseSearch":"Clear and collapse search","saveFilterButtonLabel":"Save","placeHolderName":"Enter name","itemTypeNameAria":"{0}: {1}","selectNBrowseAria":"{0}: {1}, Press Space to select and drill down","selectAria":"{0}: {1}, Press Space to select","browseAria":"{0}: {1}, Press Enter to drill down","disabledItemTypeNameAria":"Disabled: {0}: {1}","dialogTitle":"Select an object","dialogTitleForContainers":"Select a Container","dialogTitleForDocuments":"Select a Document","dialogTitleForCategories":"Select a Category","breadcrumbAria":"Breadcrumb in Dialog","serverError":"Server request failed with error code {0}.","backButtonTooltip":"Go back","backToFolderView":"Go back to Folder View","backToSearchAria":"Go back to Search View","Type":"Type","Name":"Name","Location":"Location","searchResults":"Search results","searchFoundAbout":"About {0} items","searchFoundZero":"No items","nameCannotContainColon":"Name cannot contain a colon","nameCannotBeEmpty":"This is a required field.","SelectOneItemMessage":"{0} item selected","SelectManyItemsMessage":"{0} items selected","noValue":"(no value)","nodePickerChoices":"Choices","nodePickerChoicesIn":"Choices in {0}","checkboxSelectAria":"Selected {0}: {1}","checkboxBrowsedAria":"Browsed {0}: {1}","checkboxAriaSelectNBrowse":"Selected and browsed {0}: {1}"}),csui.define("csui/dialogs/members.picker/impl/select.view/impl/header/header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","i18n!csui/controls/table/impl/nls/lang","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/models/member/member.model","csui/models/member/membercollection","hbs!csui/dialogs/members.picker/impl/select.view/impl/header/header","i18n!csui/dialogs/node.picker/impl/nls/lang","i18n!csui/dialogs/members.picker/impl/nls/lang"],function(e,t,i,n,o,s,l,r,a,c,u){return i.ItemView.extend({"template":a,"tagName":"div","templateHelpers":function(){return{"title":this.options.title||!!this.options&&!!this.options.container&&this.options.container.get("name"),"search_icon_tooltip":e.str.sformat(o.searchIconTooltip,this.options.columnTitle),"search_placeholder":o.searchByNamePlaceholder,"search_aria":o.searchByNameAria,"search_clear_icon_tooltip":o.searchClearIconTooltip,"backButtonTooltip":c.backButtonTooltip||o.backButtonTooltip,"type":c.Type,"name":c.Name,"location":c.Location,"searchView":this.options.searchView,"searchInButtonAria":e.str.sformat(o.searchIconTooltip,this.title),"clearSearchButtonAria":c.clearSearchButtonAria,"allMembers":"member.groups"!==this.options.location&&(!this.container.id&&!this.container.groupId),"openSearchBar":u.openSearchBar,"closeSearchBar":u.closeSearchBar,"collapseSearch":c.collapseSearch,"backButtonAria":o.backButtonTooltip}},"ui":{"searchBox":"> form.cs-modal-filter","openSearchIcon":"> .csui-folder-name .icon-sv-search","headerTitle":"> .csui-folder-name","searchInput":"> form .cs-filter-input","clearer":"> form .binf-form-control-feedback","tabElements":"> *[tabindex]","closeSearchButton":"> form .csui-form-control-search","backButton":".csui-targetbrowse-arrow-back","placeholderSearchIcon":".cs-modal-filter .icon-search-placeholder"},"events":{"click @ui.placeholderSearchIcon":"placeholderSearchIconClicked","click .icon-sv-search":"searchClicked","click @ui.closeSearchButton":"searchClicked","paste @ui.searchInput":"contentPasted","change @ui.searchInput":"filterChanged","click @ui.clearer":"searchFieldClearerClicked","submit @ui.searchBox":"filterChanged","keydown":"onKeyInView"},"behaviors":{"TabableRegionBehavior":{"behaviorClass":s}},"constructor":function(e){this.options=e||{},this.container=e.container,this.title=e.title,this.headerView=this,i.ItemView.prototype.constructor.apply(this,arguments),this.container&&this.listenTo(this.container,"change:name",function(e){this.title=e.get("name"),this.render()})},"onRender":function(){this.ui.clearer.toggle(!1),this.ui.searchBox.toggleClass("binf-hidden"),this.ui.closeSearchButton.toggleClass("binf-hidden"),this.ui.searchInput.hide();var e=this;this.ui.searchInput.on("keyup",function(t){e.filterChanged(t)}),this.$el.find("*[data-cstabindex]").on("focus",function(){var i=t(this);e.focusedElement&&e.focusedElement.removeClass(s.accessibilityActiveElementClass),i.addClass(s.accessibilityActiveElementClass),e.focusedElement=i})},"currentlyFocusedElement":function(){var e=this.$el.find("*[data-cstabindex=-1]");return e.length&&e.prop("tabindex",0),this.focusedElement?this.focusedElement:(this.$el.find(".csui-folder-name.binf-hidden").length?this.focusElement=this.$el.find("input"):this.$el.find(".csui-targetbrowse-arrow-back .cs-go-back").is(":visible")?this.focusElement=this.$el.find(".csui-targetbrowse-arrow-back .cs-go-back"):this.$el.find(".csui-folder-name .icon-sv-search").is(":visible")&&(this.focusElement=this.$el.find(".csui-folder-name .icon-sv-search")),this.focusElement)},"onLastTabElement":function(e){var i=this.$("[data-cstabindex=-1]"),n=i.length-1;if(i.length){var o,l=0,r=n+1,a=1;e||(l=n,r=-1,a=-1);for(var c=l;c!=r;c+=a)if(t(i[c]).is(":visible")){l=c;break}return l>=0&&l<=n&&(o=i[l]),this.$(".csui-focus").removeClass("csui-focus"),t(o).hasClass(s.accessibilityActiveElementClass)&&!e}return!0},"onKeyInView":function(e){var i=t(e.target);switch(e.keyCode){case 13:i.removeClass(s.accessibilityActiveElementClass),t(e.target).trigger("click");break;case 27:t(e.target).hasClass(".icon-sv-search")||this.$el.trigger("tabNextRegion");break;default:return!0}return!1},"searchClicked":function(i){i.preventDefault(),i.stopPropagation(),n.trigger("closeToggleAction"),this.ui.headerTitle.toggleClass("binf-hidden"),this.ui.searchInput.toggleClass(s.accessibilityFocusableClass),this.ui.clearer.toggle(!1),this.getValue().length&&(this.ui.searchInput.val(""),this.filterChanged(i)),this.ui.searchInput.toggle(200,"linear",e.bind(function(){this.ui.searchInput.trigger("focus")},this)),this.ui.closeSearchButton.toggleClass(s.accessibilityFocusableClass),this.ui.closeSearchButton.removeClass(s.accessibilityActiveElementClass),this.ui.openSearchIcon.toggleClass(s.accessibilityFocusableClass),this.ui.searchBox.toggleClass("binf-hidden"),this.ui.closeSearchButton.toggleClass("binf-hidden"),t(i.target).hasClass("form-control-search")?(this.ui.searchInput.removeClass(s.accessibilityActiveElementClass),this.ui.openSearchIcon.addClass(s.accessibilityActiveElementClass),this.$el.trigger("setCurrentTabFocus")):(this.ui.searchInput.addClass(s.accessibilityActiveElementClass),this.ui.openSearchIcon.removeClass(s.accessibilityActiveElementClass)),this.trigger("changed:focus"),this.focusElement&&this.focusElement.trigger("focus")},"searchFieldClearerClicked":function(e){e.preventDefault(),e.stopPropagation(),this.ui.clearer.removeClass(s.accessibilityFocusableClass),this.ui.clearer.removeClass(s.accessibilityActiveElementClass),this.ui.searchInput.val(""),this.filterChanged(e),this.ui.searchInput.trigger("focus"),this.ui.searchInput.addClass(s.accessibilityActiveElementClass)},"placeholderSearchIconClicked":function(){this.ui.searchInput.trigger("focus")},"getColumn":function(){return this.options.column},"getValue":function(){var e;return e=this.ui.searchInput.val(),e===this.ui.searchInput.attr("placeholder")&&(e=""),e},"setValue":function(e){e&&e.length&&(this.ui.searchInput.val(e),this.lastFilterValue=e)},"getShown":function(){return this.ui.searchInput.hasClass("binf-show")},"setShown":function(e){!0===e&&this.ui.searchInput.hasClass("binf-hidden")?this.ui.searchInput.toggleClass("show binf-hidden"):!1===e&&this.ui.searchInput.hasClass("binf-show")&&this.ui.searchInput.toggleClass("show binf-hidden")},"setFocus":function(){var e=this.ui.searchInput.val().length;this.ui.searchInput.trigger("focus"),this.ui.searchInput[0].setSelectionRange(e,e)},"contentPasted":function(e){this.applyFilter()},"filterChanged":function(e){return this.applyFilter(),!1},"applyFilter":function(){var e=this.getValue(),t=!!e.length;if(this.ui.clearer.toggle(t),t?this.ui.clearer.addClass(s.accessibilityFocusableClass):this.ui.clearer.removeClass(s.accessibilityFocusableClass),this.lastFilterValue!=e){this.lastFilterValue=e;var i=this;this.filterTimeout&&clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(function(){i.filterTimeout=void 0,i.trigger("change:filterValue",{"name":i.getValue(),"collection":i.options.collection})},1e3)}}})}),csui.define("hbs!csui/dialogs/members.picker/impl/select.view/impl/select.view",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div>\r\n  <div class="csui-mp-header cs-folder-name"></div>\r\n</div>\r\n<div class="csui-mp-content"></div>\r\n\r\n'}});return i.registerPartial("csui_dialogs_members.picker_impl_select.view_impl_select.view",n),n}),csui.define("css!csui/dialogs/members.picker/impl/select.view/impl/select.view",[],function(){}),csui.define("csui/dialogs/members.picker/impl/select.view/select.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/dialogs/members.picker/impl/member.list/member.list.view","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/dialogs/members.picker/impl/select.view/impl/header/header.view","hbs!csui/dialogs/members.picker/impl/select.view/impl/select.view","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","i18n!csui/dialogs/members.picker/impl/nls/lang","css!csui/dialogs/members.picker/impl/select.view/impl/select.view"],function(e,t,i,n,o,s,l,r,a,c,u,d,h){var p=o.LayoutView.extend({"template":u,"templateHelpers":function(){return{"backButtonTooltip":h.backButtonTooltip,"backButtonAria":h.backButtonTooltip}},"regions":{"viewHeaderRegion":".csui-mp-header","viewContentRegion":".csui-mp-content"},"ui":{"backButton":".csui-targetbrowse-arrow-back"},"behaviors":{"TabableRegion":{"behaviorClass":a}},"events":{"click @ui.backButton":"onClickFolderBack","keydown @ui.backButton":"selectFolderBack"},"constructor":function(e){e||(e={}),i.defaults(e,{"pageSize":30}),o.LayoutView.prototype.constructor.call(this,e),this.rendered=!1,this.selectedMember=null,this.collection=e.collection,this.completeCollection=e.collection,this.originalModels=e.collection.models,this.container=e.container,this.propagateEventsToRegions(),this.setHeader(e),this.setListView(e),this.onWinRefresh=i.bind(this.windowRefresh,this),t(window).on("resize.app",this.onWinRefresh)},"windowRefresh":function(){var e=this.options.parentEl.height();(window.chrome||navigator.userAgent.indexOf("Firefox")>0)&&e>0&&this.$el.css("height",e+"px")},"onDestroy":function(){this.$el.off(),t(window).off("resize.app",this.onWinRefresh)},"onRender":function(){var e=this,t=e.$el.find(".csui-mp-content");this.viewHeaderRegion.show(this.headerView),this.viewContentRegion.show(this.listView),this.$el.on("hover",function(){t.addClass("binf-focus")},function(){t.removeClass("binf-focus")}),this.rendered=!0},"onDomRefresh":function(){this.windowRefresh()},"onShow":function(){this.rendered||this.render(),i.each(this.regionManager._regions,function(e){e.currentView&&e.currentView.trigger("show")})},"getNumberOfSelectItems":function(){return null!==this.selectedMember?1:0},"setNewSelect":function(e,t){this.clearSelect(),this._setSelection({"member":e,"add":!0,"silent":t})},"clearSelect":function(){!!this.listView&&this.listView.clearSelect(),this.selectedMember=null},"setListView":function(e){e||(e={});var t={"collection":this.collection,"container":this.container,"commandType":e.commandType,"pageSize":e.pageSize},n=this.listView=new r(t);this.listenTo(n,"selection:change",this._setSelection).listenTo(n,"browse:select",i.bind(this.trigger,this,"browse:select",this)).listenTo(this,"browse:complete",i.bind(n.trigger,n,"browse:complete"))},"selectFolderBack":function(e){13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),this.trigger("backbutton:click",this))},"onClickFolderBack":function(e){e.preventDefault(),e.stopPropagation(),this.trigger("backbutton:click",this)},"setHeader":function(){var e=this.container&&(this.container.get("name")||this.options.displayName)
;e=null===e?this.options.locationName:e,this.headerView=new c({"title":e,"container":this.container,"searchView":this.options.searchView,"location":this.options.location||this.options.initialLocation}),this.listenTo(this.headerView,"change:filterValue",this.applyFilter)},"applyFilter":function(e){if(i.extend(e,{"type":this.options.listTypes}),this.collection.fetching)this.filterValuePending=e;else{var t=this;this.collection.setLimit(0,this.options.pageSize,!1),this.collection.setFilter(e,!1),this.collection.fetch({"reset":!0}).fail(function(e){t.listView.stopBlocker(),t.trigger("search:failed",{"resp":e,"view":t})}),this.listView.reset()}},"refresh":function(){var e=this;this.collection.fetch({"reset":!0}).fail(function(){e.listView.stopBlocker()})},"stopBlocker":function(){this.listView.stopBlocker()},"addMemberSelection":function(e){this._setSelection({"browse":!0,"add":!0,"breadCrumbSelection":!0,"member":e,"type":1})},"_setSelection":function(e){var t=(e.member.get("id"),this.options.commandType);this.selectedMember=null,e.add&&t.isSelectable(e.member)&&(this.selectedMember=e.member),e.silent||this.trigger("selection:change",e,this)}});return i.extend(p.prototype,d),p}),csui.define("hbs!csui/dialogs/members.picker/impl/select.views/selectviews",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return"\r\n"}});return i.registerPartial("csui_dialogs_members.picker_impl_select.views_selectviews",n),n}),csui.define("csui/dialogs/members.picker/impl/select.views/select.views",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/log","csui/utils/base","i18n!csui/dialogs/members.picker/impl/nls/lang","csui/models/member/member.model","csui/models/member/membercollection","csui/dialogs/members.picker/impl/select.view/select.view","csui/dialogs/modal.alert/modal.alert","csui/utils/commands","hbs!csui/dialogs/members.picker/impl/select.views/selectviews","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/lib/jquery.ui/js/jquery-ui"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p){"use strict";var m=n.ItemView.extend({"className":"csui-select-lists","template":h,"constructor":function(e){e||(e={}),i.defaults(e,{"pageSize":30}),n.ItemView.prototype.constructor.call(this,e),this.commandType=e.commandType,this.leftView=this.rightView=null,this.rootGroup=e.rootGroup,this.invalidMembers=[],this.ancestorCollection=e.ancestorCollection,this.connector=e.connector},"onRender":function(){var e=this;this.setLeftOnly().done(function(){e.options.leftSelection&&e.$el.find(".cs-left-item-"+e.options.leftSelection).length>0&&(e.$el.find(".cs-left-item-"+e.options.leftSelection).trigger("click"),e.options.selectException=void 0)}),this.leftView&&this.leftView.render(),this.rightView&&this.rightView.render()},"onDomRefresh":function(){this.leftView.triggerMethod("dom:refresh",this.leftView),this.rightView&&this.rightView.triggerMethod("dom:refresh",this.rightView)},"onShow":function(){this.leftView.triggerMethod("show"),this.rightView&&this.rightView.triggerMethod("show")},"setParentGroupAsTarget":function(e){var t=this.commandType.isSelectable(e);return this.rightView&&this.rightView.clearSelect(),this.leftView&&this.leftView.setNewSelect(e,!0),t},"getSelection":function(){var e=this.rightView?this.rightView.selectedMember:null,t=null===e?this.leftView.selectedMember:null;return null!==e?e:t},"getNumberOfSelectItems":function(){return this.rightView&&this.rightView.getNumberOfSelectItems()>0?this.rightView.getNumberOfSelectItems():this.leftView.getNumberOfSelectItems()},"leftNodeId":function(){var e=this.leftView.container;return e?e.get("id"):-1},"setLeftOnly":function(){var e=this._setView(this.rootGroup,"cs-start-locations left-only",!1,this.options),t=e.view.container,i=this;return e.promise.done(function(){t&&i.leftView.addMemberSelection(t),i.options.targetBrowseHistory.length>0?i.showBackButton():(i.options.targetBrowseHistory.length>1||1===i.options.targetBrowseHistory.length&&i.options.navigateFromHistory)&&i.showBackButton()}).fail(function(e){i.forceClose(e)}),this.leftView=e.view,e.promise},"forceClose":function(e){this._displayAlert(e).always(this.trigger("close"))},"newLeftView":function(e,t){var i=this;return this.options.pageSize=t,this._drillUp(e).done(function(t){i.leftView=t,i.leftView.addMemberSelection(e),i.trigger("changed"),i.onDomRefresh()}).fail(function(e){i._displayAlert(e)})},"onSelectionChange":function(e,t){var i,n=t&&this._isRightView(t);return e&&!e.breadCrumbSelection&&(n?e.add&&this.leftView.clearSelect():this.rightView&&(e.add&&this.rightView.clearSelect(),i=this.rightView.container.id!==e.member.id)),1===e.type&&this._updateAncestorCollection(e.member,{"isLeftView":!n,"replaceRightView":i}),e.member.add=e.add,this.trigger("change:complete",e.member),!0},"onBrowse":function(e,t){var i=this._isRightView(e),n=null;return this.trigger("changing:selection"),n=i?this.selectRight(t):this.selectLeft(t),n.done(function(){e.trigger("browse:complete")}).fail(function(){e.clearSelect()}),n},"selectLeft":function(e){var t=this;return this._runSelection(e,".cs-pane-view").done(function(e){e&&(t.rightView=e,t.onDomRefresh())})},"selectRight":function(e){var t=this,i=Math.floor((this.leftView.collection.skipCount||0)/this.leftView.collection.topCount)+1,n=parseInt(this.leftView.collection.topCount)*parseInt(i),o=e.member.get("parentId"),s=this.ancestorCollection.get(o),l=s&&this.ancestorCollection.get(s.get("parentId"));if(0===this.options.targetBrowseHistory.length){var r={"leftId":"start.location","rightId":s?s.get("id"):void 0,"rightName":s?s.get("name"):void 0,"rightParent":s?s.get("parentId"):void 0,"rightType":s?s.get("type"):void 0,"pageSize":n};this.options.targetBrowseHistory.push(r)}else{var a={"leftId":l?l.get("id"):null,"leftName":l?l.get("name"):void 0,"leftParent":l?l.get("parentId"):void 0,"leftType":l?l.get("type"):void 0,"rightId":s?s.get("id"):void 0,"rightName":s?s.get("name"):void 0,"rightParent":s?s.get("parentId"):void 0,"rightType":s?s.get("type"):void 0,"pageSize":n};this.options.targetBrowseHistory.push(a)}return this._runSelection(e,".csui-panel.cs-start-locations").done(function(e){e&&(t.leftView=t.rightView,t.showBackButton(),t.rightView=e,t.onDomRefresh())})},"showBackButton":function(){this.leftView&&this.options.targetBrowseHistory.length>=1&&this.leftView.headerView.ui.backButton.parent().show()},"hideBackButton":function(){this.leftView&&this.options.targetBrowseHistory.length<1&&this.leftView.headerView.ui.backButton.parent().hide()},"_runSelection":function(e,i){var n=e.member,o=this,s=t.Deferred();return this._drillDown(n,i).done(function(e){o.trigger("changed"),o.trigger("change:complete",n),s.resolve(e)}).fail(function(e){o._displayAlert(e),o.trigger("change:complete"),s.reject()}),s},"_drillUp":function(e,i){var n=this._setView(e,"csui-new-view left-only binf-hidden","prepend"),o=n.view,s=this,l=t.Deferred();return o.$el.addClass("zeroWidth").removeClass("binf-hidden"),o.render(),i||s._removeRightView(n.promise).done(function(){l.resolve(n.view)}).fail(function(e){l.reject(e)}),l},"_drillDown":function(e,t){var i=this._setView(e,"csui-new-view",!1),n=i.view;return n.render(),this.rightView?this._replaceView(i.promise,n,t):this._addRightView(i.promise,n)},"_showLeftOnly":function(){function e(){if(i){var e=i[0].selectView;n.cancelEventsToViewsPropagation(e),e.destroy(),i.remove(),n.rightView=null}}var t=this.$el.find(".csui-panel.cs-start-locations"),i=this.$el.find(".csui-panel.cs-pane-view.csui-slideMidLeft"),n=this;i.hide(),t.animate({"width":"100%"},{"duration":200,"complete":e})},"_removeRightView":function(e){var i=this.$el.find(".csui-new-view"),n=this.$el.find(".csui-panel.cs-start-locations"),o=this.$el.find(".cs-pane-view"),s=t.Deferred(),l=this;return n.hide(),o.hide(),i[0].className="csui-panel cs-start-locations left-only",e.done(function(){l._finishRightRemove(i,n,o),s.resolve()}).fail(function(e){l._removeNewView(i,n,o),s.reject(e)}),s},"_removeNewView":function(e,t,i){e||(e=this.$el.find(".csui-new-view"));var n=e[0].selectView;this.cancelEventsToViewsPropagation(n),n.destroy(),e.remove(),t&&t.show(),i&&i.show()},"_finishRightRemove":function(e,t,i){var n;return i.length>0&&(n=i[0].selectView,this.cancelEventsToViewsPropagation(n),n.destroy(),i.remove(),this.rightView=null),n=t[0].selectView,this.cancelEventsToViewsPropagation(n),n.destroy(),t.remove(),this.leftView=null,!0},"_addRightView":function(e,i){var n=this.$el.find(".csui-panel.cs-start-locations"),o=this.$el.find(".csui-new-view"),s=t.Deferred(),l=this;return n[0].className="csui-panel cs-start-locations",o[0].className="csui-panel cs-pane-view csui-slideMidLeft",e.done(function(){s.resolve(i)}).fail(function(e){l._removeNewView(o),n.animate({"width":"100%"},200),l.leftView.clearSelect(),l.leftView.refresh(),s.reject(e)}),s},"_replaceView":function(e,i,n){var o=this.$el.find(n),s=t(".csui-new-view"),l=t(".cs-pane-view"),r=t.Deferred(),a=this;switch(o.hide(),n){case".csui-panel.cs-start-locations":l[0].className="csui-panel cs-start-locations csui-slideLeft",s[0].className="csui-panel cs-pane-view csui-slideMidLeft";break;case".cs-pane-view":s[0].className="csui-panel cs-pane-view csui-slideMidLeft"}return e.done(function(){a._removeView(o),r.resolve(i)}).fail(function(e){a._reverseRemoveView(s,n,l),".csui-panel.cs-start-locations"===n&&o.show(),r.reject(e)}),r},"_reverseRemoveView":function(e,t,i){switch(this._removeNewView(e),t){case".csui-panel.cs-start-locations":i[0].className="csui-panel cs-pane-view csui-slideRight",this.rightView.refresh();break;case".cs-pane-view":this._removeView(i),this.leftView.$el[0].className="csui-panel cs-start-locations left-only",this.leftView.clearSelect(),this.leftView.refresh()}return!0},"_removeView":function(e){var t=e[0].selectView;return this.cancelEventsToViewsPropagation(t),t.destroy(),e.remove(),!0},"_setView":function(e,t,n,o){o||(o=this._getViewOptions(e,this.connector)),i.defaults(o,this.options,{"invalidMembers":this.invalidMembers}),n||(n="append");var s=this._newView(o,t),l=this._fetchView(s);return s.el.selectView=s,this.$el[n](s.el),{"view":s,"promise":l}},"_fetchView":function(e){return this._fetchCollection(e)},"_fetchCollection":function(e){return e.collection.setOrder(this.options.orderBy,!1),e.collection.setLimit(0,this.options.pageSize,!1),e.collection.fetch({"reset":!1,"merge":!1,"remove":!1})},"_newView":function(e,t){var n=i.extend({"className":t+" csui-panel","parentEl":this.$el,"initialLocation":this.initialLocation&&this.initialLocation.get("location")},e),o=new c(n);return this.propagateEventsToViews(o),this.listenTo(o,"selection:change",this.onSelectionChange),this.listenTo(o,"backbutton:click",this._onClickBackButton),this.listenTo(o,"browse:select",i.bind(this.onBrowse,this)),o},"_onClickBackButton":function(){var e=this,t=this.options.targetBrowseHistory.length>0?this.options.targetBrowseHistory.pop():void 0;if(this.options.navigateFromHistory=1===this.options.targetBrowseHistory.length,"start.location"===t.leftId)this.trigger("change:location",this.options.startLocation,t);else if(t.leftId){var i=new r({"id":t.leftId,"name":t.leftName},{"connector":this.connector}),n=new r({"id":t.rightId,"name":t.rightName},{"connector":this.connector});this.newLeftView(i,t.pageSize).done(function(){e.setParentGroupAsTarget(i),e.trigger("change:complete"),e.options.targetBrowseHistory.length>0&&n&&n.get("id")&&e.$el.find(".cs-left-item-"+n.get("id")).length>0&&e.$el.find(".cs-left-item-"+n.get("id")).trigger("click"),e.showBackButton()})}else{e.hideBackButton();var o=new r({"id":this.options.container.groupId,"useLocation":!0},{"connector":this.connector});this.options.container.groupId;this.newLeftView(o,t.pageSize).done(function(){e.setParentGroupAsTarget(o);var i=e.ancestorCollection.findByIndex(t.rightId);e.ancestorCollection.findByIndex(t.rightId),e.ancestorCollection.reset(e.ancestorCollection.slice(0,i)),o.unset("useLocation",{"silent":!0})})}},"_isRightView":function(e){var t=e.$el[0].className.split(" ");return i.contains(t,"cs-pane-view")},"_addNewPanel":function(e,t){var i=document.createElement("div");return i.className=e,this.$el[t](i),i},"_getViewOptions":function(e,t){var i=new r({"id":e.get("id"),"name":e.get("name"),"parentId":e.get("parentId"),"nodeId":e.get("nodeId"),"categoryId":e.get("categoryId"),"groupId":e.get("groupId")},{"connector":t}),n="all.groups"===this.options.startLocation?1:null;return e.get("useLocation")&&this.options.location&&(n="member.groups"===this.options.location?"GroupsOfCurrentUser":n),{"container":i,"collection":new a(void 0,{"member":i,"autofetch":!0,"orderBy":this.options.orderBy,"commands":d.getAllSignatures(),"connector":this.connector,"type":n})}},"_displayAlert":function(e){var t=i.str.sformat(l.serverError,"unknown");return e&&(e instanceof c?t=i.str.sformat(l.ViewDenied,e.member.get("name")):e.responseJSON&&(t=e.responseJSON.error)),u.showInformation(t)},"_updateAncestorCollection":function(e,t){var i=this.ancestorCollection.findByIndex(e.id);i>=0?this.ancestorCollection.reset(this.ancestorCollection.slice(0,i+1)):(t.isLeftView&&t.replaceRightView&&this.ancestorCollection.pop(),this.ancestorCollection.add(e.clone()))}});return i.extend(m.prototype,p),m}),csui.define("hbs!csui/dialogs/members.picker/impl/selectedMembers/impl/selectedMember",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-selected-member" id="'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":1,"column":38},"end":{"line":1,"column":44}}}):s))+'">\r\n  <div class="member-picture binf-pull-left">\r\n    <span class="csui-icon-paceholder csui-icon image_user_placeholder">'+e.escapeExpression((s=null!=(s=l(i,"initials")||(null!=t?l(t,"initials"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"initials","hash":{},"loc":{"start":{"line":3,"column":72},"end":{"line":3,"column":84}}}):s))+'</span>\r\n    <img class="csui-icon-user csui-icon binf-img-circle binf-hidden" alt="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":4,"column":75},"end":{"line":4,"column":83}}}):s))+'"\r\n         src="'+e.escapeExpression((s=null!=(s=l(i,"userImgSrc")||(null!=t?l(t,"userImgSrc"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"userImgSrc","hash":{},"loc":{"start":{"line":5,"column":14},"end":{"line":5,"column":28}}}):s))+'">\r\n  </div>\r\n  <div class="member-info binf-pull-left">\r\n    <span class="name binf-pull-left" title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":45},"end":{"line":8,"column":53}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":55},"end":{"line":8,"column":63}}}):s))+'</span>\r\n    <span class="department binf-pull-left" title="'+e.escapeExpression((s=null!=(s=l(i,"department")||(null!=t?l(t,"department"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"department","hash":{},"loc":{"start":{"line":9,"column":51},"end":{"line":9,"column":65}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"department")||(null!=t?l(t,"department"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"department","hash":{},"loc":{"start":{"line":9,"column":67},"end":{"line":9,"column":81}}}):s))+'</span>\r\n\r\n  </div>\r\n  <button type="button" class="close notification_error" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"removeSelectedUserAria")||(null!=t?l(t,"removeSelectedUserAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"removeSelectedUserAria","hash":{},"loc":{"start":{"line":12,"column":69},"end":{"line":12,"column":95}}}):s))+'"\r\n          title="'+e.escapeExpression((s=null!=(s=l(i,"removeSelectedUser")||(null!=t?l(t,"removeSelectedUser"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"removeSelectedUser","hash":{},"loc":{"start":{"line":13,"column":17},"end":{"line":13,"column":39}}}):s))+'"></button>\r\n</div>\r\n \r\n'}});return i.registerPartial("csui_dialogs_members.picker_impl_selectedMembers_impl_selectedMember",n),n}),csui.define("csui/dialogs/members.picker/impl/selectedMembers/selectedMember",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/utils/url","csui/utils/user.avatar.color","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/dialogs/members.picker/impl/selectedMembers/impl/selectedMember","i18n!csui/dialogs/members.picker/impl/nls/lang"],function(e,t,i,n,o,s,l,r,a){return i.ItemView.extend({"template":r,"tagName":"div","className":"csui-userpicker-item","ui":{"closeButton":".close","personalizedImage":".csui-icon-user","defaultImage":".csui-icon-paceholder"},"behaviors":{"TabableRegion":{"behaviorClass":l}},"events":{"click @ui.closeButton":"onRemoveButtonClicked"},"currentlyFocusedElement":function(){return this.ui.closeButton},"templateHelpers":function(){return{"name":n.formatMemberName(this.model),"department":this.model.get("group_id")&&this.model.get("group_id").name,"id":this.model.get("id"),"initials":this.model.get("initials"),"userImgSrc":"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=","removeSelectedUser":a.removeSelectedUser,"removeSelectedUserAria":e.str.sformat(a.removeSelectedUserAria,this.model.get("name_formatted"))}},"constructor":function(e){e||(e={}),e.disabledMessage||(e.disabledMessage=""),i.ItemView.prototype.constructor.call(this,e),this.listenTo(this,"render",this._assignUserColor)},"onRender":function(){this.options.lightWeight||this._displayProfileImage()},"onDestroy":function(){this._releasePhotoUrl()},"onRemoveButtonClicked":function(e){e.stopPropagation(),e.preventDefault(),this._parent.trigger("remove:selectItem",this.model)},"_displayProfileImage":function(){var t=this._getUserPhotoUrl();if(this.ui.personalizedImage.addClass("esoc-userprofile-img-"+this.model.get("id")),t){var i={"url":t,"dataType":"binary"};this._releasePhotoUrl(),this.options.model.connector.makeAjaxCall(i).always(e.bind(function(e,t,i){200===i.status?this._showPersonalizedImage(e):this._showDefaultImage()},this))}else this._showDefaultImage()},"_getUserPhotoUrl":function(){var e=this.options.model&&this.options.model.connector.connection||this.options.connector&&this.options.connector.connection,t=new o(e.url).getCgiScript(),i=this.model.get("photo_url");if(i&&i.indexOf("?")>0)return o.combine(t,i)},"_showPersonalizedImage":function(e){this._releasePhotoUrl(),this._photoUrl=URL.createObjectURL(e),this.ui.personalizedImage.attr("src",this._photoUrl),this.ui.defaultImage.addClass("binf-hidden"),this.ui.personalizedImage.removeClass("binf-hidden")},"_showDefaultImage":function(e){this._releasePhotoUrl(),this.ui.personalizedImage.addClass("binf-hidden"),this.ui.defaultImage.removeClass("binf-hidden")},"_releasePhotoUrl":function(){this._photoUrl&&(URL.revokeObjectURL(this._photoUrl),this._photoUrl=void 0)},"_assignUserColor":function(){var e=s.getUserAvatarColor(this.model.attributes);this.ui.defaultImage.css("background",e)}})}),csui.define("hbs!csui/dialogs/members.picker/impl/selectedMembers/impl/selectedMemberList",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-selected-member-list"></div>'}});return i.registerPartial("csui_dialogs_members.picker_impl_selectedMembers_impl_selectedMemberList",n),n}),csui.define("css!csui/dialogs/members.picker/impl/selectedMembers/impl/selectedMember",[],function(){}),csui.define("csui/dialogs/members.picker/impl/selectedMembers/selectedMemberList",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/dialogs/members.picker/impl/selectedMembers/selectedMember","csui/controls/tile/behaviors/perfect.scrolling.behavior","hbs!csui/dialogs/members.picker/impl/selectedMembers/impl/selectedMemberList","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","css!csui/dialogs/members.picker/impl/selectedMembers/impl/selectedMember"],function(e,t,i,n,o,s,l,r){var a=n.CollectionView.extend({"template":l,"childView":o,"childViewContainer":".csui-selected-member-list","childViewOptions":{"collection":this.collection},"ui":{"memberListContainer":".csui-selected-member-list"},"behaviors":{"PerfectScrolling":{"behaviorClass":s,"suppressScrollX":!0,"scrollYMarginOffset":15}},"constructor":function(e){e||(e={}),this.collection=e.collection||new i.Collection,n.CollectionView.prototype.constructor.apply(this,arguments),this.listenTo(this,"show:selectItem",t.bind(function(e){this.collection.add(e)},this))},"onRender":function(){this.listenTo(this,"remove:selectItem",t.bind(function(e){this.collection.remove(e)},this))}});return t.extend(a.prototype,r),a}),csui.define("csui/models/memberancestorcollection",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone"],function(e,t,i,n){"use strict";return n.Collection.extend({"constructor":function(e,t,i){n.Collection.prototype.constructor.apply(this,arguments),this.context=i},"clone":function(){return new this.constructor(this.attributes,{"connector":this.connector})},"isFetchable":function(){return!1},"add":function(e,t){n.Collection.prototype.add.apply(this,arguments),this.trigger("sync",this)},"findByIndex":function(e){for(var t=0;t<this.models.length;t++)if(this.models[t].id===e)return t;return-1}})}),csui.define("hbs!csui/dialogs/members.picker/impl/members.picker",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div id="csui-mp-selected-member-list-container"\r\n     class="csui-mp-selected-member-list-container"></div>\r\n<div id="csui-mp-breadcrumbs" class="cs-breadcrumb">\r\n  <div role="navigation" class="breadcrumb-inner"></div>\r\n  <div class="searchheader-inner"></div>\r\n</div>\r\n<div id="csui-mp-selectviews"></div>\r\n'}});return i.registerPartial("csui_dialogs_members.picker_impl_members.picker",n),n}),csui.define("csui/dialogs/members.picker/impl/members.picker.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/models/member/member.model","csui/dialogs/members.picker/impl/select.views/select.views","csui/dialogs/members.picker/impl/selectedMembers/selectedMemberList","csui/controls/breadcrumbs/breadcrumbs.view","csui/models/memberancestorcollection","hbs!csui/dialogs/members.picker/impl/members.picker","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin"],function(e,t,i,n,o,s,l,r,a,c,u,d,h){var p=n.LayoutView.extend({"template":d,"regions":{"breadcrumbRegion":"#csui-mp-breadcrumbs > .breadcrumb-inner","searchHeaderRegion":"#csui-mp-breadcrumbs > div.searchheader-inner","selectViewRegion":"#csui-mp-selectviews","selectedMemberListRegion":"#csui-mp-selected-member-list-container"},"ui":{"breadcrumb":"#csui-mp-breadcrumbs","breadcrumbContent":".breadcrumb-inner","selectViews":"#csui-mp-selectviews"},"constructor":function(e){e||(e={}),n.LayoutView.prototype.constructor.call(this,e),this.propagateEventsToRegions(),this.rootGroup=e.container,this.ancestorCollection=new u(this.rootGroup.clone(),e,e.context),e.rootGroup=this.rootGroup,e.ancestorCollection=this.ancestorCollection,this.setBreadcrumbs(e),this.setViews(e),this.onWinRefresh=i.bind(this.windowRefresh,this),t(window).on("resize.app",this.onWinRefresh)},"windowRefresh":function(){var e=t(".cs-breadcrumb"),i=e.is(":visible")?e.height():0;this.$el.height();window.chrome,this.selectViews.triggerMethod("dom:refresh",this.selectViews)},"onDestroy":function(){t(window).off("resize.app",this.onWinRefresh)},"onRender":function(){this.options.searchView&&this.searchHeaderRegion.show(this.searchHeaderView),this.breadcrumbs&&this.breadcrumbRegion.show(this.breadcrumbs),this.selectViews.options.navigateFromHistory=this.options.navigateFromHistory,this.selectViewRegion.show(this.selectViews),this.selectedMemberListRegion.show(this.selectedMemberList)},"onDomRefresh":function(){this.windowRefresh()},"onShow":function(){i.each(this.regionManager.regions,function(e){e.currentView&&e.currentView.trigger("show")}),this.options.adduserorgroup&&1===this.ancestorCollection.length&&(this.ui.breadcrumb.hide(),this.ui.selectViews.addClass("csui-full-height"))},"setViews":function(e){var t=this.selectViews=new r(e);this.selectedMemberList=new a,this.listenTo(t,"changed",this.updateBreadcrumbs),this.listenTo(t,"change:location",i.bind(this.trigger,this,"change:location")),this.listenTo(t,"change:complete",i.bind(this.trigger,this,"change:complete")),this.listenTo(t,"close",this.close),this.listenTo(this.selectedMemberList,"add:child remove:child",this.onMemberListChange)},"onMemberListChange":function(){this.adjustSelectViews(),this.trigger("update:button",this.selectedMemberList.collection)},"adjustSelectViews":function(){var e=this.selectedMemberList.collection.length<3?this.selectedMemberList.collection.length:3,t=e?e*this.selectedMemberList.$el.find(".csui-userpicker-item").height():0,i=t?"calc(100% - "+t+"px)":"100%";this.selectViews.$el.find(".list-content").css({"height":i})},"getSelection":function(){return this.selectViews.getSelection()},"getNumberOfSelectItems":function(){return this.selectViews.getNumberOfSelectItems()},"close":function(){this.destroy(),this.trigger("close")},"updateBreadcrumbs":function(){return this.options.adduserorgroup&&1===this.ancestorCollection.length?(this.ui.breadcrumb.hide(),this.ui.selectViews.addClass("csui-full-height")):(this.ui.breadcrumb.show(),this.ui.breadcrumbContent.show(),this.ui.selectViews.removeClass("csui-full-height")),this.windowRefresh(),this.adjustSelectViews(),!0},"setBreadcrumbs":function(e){return this.breadcrumbs=new c({"node":e.rootGroup,"collection":e.ancestorCollection}),this.setBreadcrumbEvents(),!0},"setBreadcrumbEvents":function(){this.listenTo(this.breadcrumbs,"before:defaultAction",function(e){var t=this.selectViews,i=this;e.node.set({"useLocation":!0},{"silent":!0}),t.newLeftView(e.node,t.options.pageSize).done(function(n){t.setParentGroupAsTarget(n.container),i.trigger("change:complete",n.container),e.node.unset("useLocation",{"silent":!0})})})}});return i.extend(p.prototype,h),p}),csui.define("csui/dialogs/members.picker/start.locations/start.location.collection",["require","module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone"],function(e,t,i,n,o){"use strict";function s(e){return e.lastIndexOf("/")>=0?e:"csui/dialogs/members.picker/start.locations/"+e}function l(e){return!i.contains(c.blacklist,e)&&(!c.whitelist.length||i.contains(c.whitelist,e))}var r=t.config(),a=r.startLocations||[],c=r.masks||{};i.isArray(a)||(a=Array.prototype.concat.apply([],i.values(a))),c=i.reduce(i.values(c),function(e,t){return{"blacklist":e.blacklist.concat(t.blacklist||[]),"whitelist":e.whitelist.concat(t.whitelist||[])}},{"blacklist":[],"whitelist":[]}),c={"blacklist":i.unique(c.blacklist),"whitelist":i.unique(c.whitelist)},a=i.chain(a).map(s).filter(l).unique().value();var u=o.Model.extend({"defaults":{"id":null,"name":null,"icon":null,"invalid":!1,"factory":null,"unselectable":!0},"constructor":function(e,t){o.Model.prototype.constructor.apply(this,arguments)},"sync":function(e,t,i){if("read"!==e)throw new Error("Only fetching the widget is supported.");var o=this;return i||(i={}),this._resolveFactory(i).then(function(){return o.get("factory").updateLocationModel(o)}).then(function(){var e=o.toJSON();i.success&&i.success(e,i),o.trigger("sync",o,e,i)},function(){var e=o.get("error");return i.error&&i.error(e,i),o.trigger("error",o,e,i),n.Deferred().reject(e)})},"_resolveFactory":function(t){var i=this,o=n.Deferred(),s=this.getFactoryData(),l=this.getFactoryModulePath(s);return e([l],function(e){i.set("factory",new e(t)),o.resolve()},function(e){i.set("error",e),t.ignoreErrors?o.resolve():o.reject(e)}),o.promise()},"getFactoryData":function(){var e,t=this.get("id"),i=t.lastIndexOf("/");return i<0?e="csui/dialogs/members.picker/start.locations/"+t:(e=t,t=t.substring(i+1)),{"name":t,"path":e}},"getFactoryModulePath":function(e){return e.path+"/"+e.name+".factory"}});return o.Collection.extend({"model":u,"constructor":function(e){e||(e={});var t=e.startLocations;t=t?i.chain(t).concat(["current.group"]).map(s).filter(l).unique().value():a;var n=i.map(t,function(e){return{"id":e}});o.Collection.prototype.constructor.call(this,n,e)},"sync":function(e,t,i){if("read"!==e)throw new Error("Only fetching the start locations is supported.");var n=this;return i||(i={}),this._resolveFactories(i).then(function(){if(!1!==i.removeInvalid){var e=n.where({"invalid":!0});n.remove(e)}var t=n.toJSON();i.success&&i.success(t,i),n.trigger("sync",n,t,i)})},"_resolveFactories":function(e){var t=this.filter(function(e){return e.has("id")&&!(e.has("factory")||e.has("error"))}),o=i.defaults({"ignoreErrors":!0},i.omit(e,"success","error")),s=i.invoke(t,"fetch",o);return n.when.apply(n,s)}})}),csui.define("csui/dialogs/members.picker/impl/command.type",["module","csui/lib/underscore","i18n!csui/dialogs/members.picker/impl/nls/lang"],function(e,t,i){var n=(e.config(),function(e){var t=e.initialContainer;this.unselectableMembers=e.unselectableMembers,this.selectableMembers=e.selectableMembers,this.invalidMembers=e.invalidMembers,this.selectableTypes=e.selectableTypes||[],this.unselectableTypes=e.unselectableTypes||[],this.showAllTypes=e.showAllTypes||!1,this.parentId=t?t.get("id"):-1,this.addButtonLabel=e.addButtonLabel||i.addButtonLabel});return t.extend(n.prototype,{"getSelectableMemberTypes":function(){return this.showAllTypes?[]:this.selectableTypes},"validateTarget":function(e){var i=e.data?e.data.id:e.get("id"),n=e.get("type"),o=t.every(this.unselectableMembers,function(e){return i!==e});return this.browseAllowed(e)&&(o=t.every(this.unselectableTypes,function(e){return n!==e})),o},"validId":function(e){return(e.data?e.data.id:e.get("id"))!==this.parentId},"validateAddableTypes":function(e){return!e.addable_types},"isSelectableType":function(e){var i=e.get("type");if(!i&&0!==i)return!1;var n=t.every(this.unselectableTypes,function(e){return i!==e});return n&&!t.isEmpty(this.selectableTypes)&&!(n=-1!==t.indexOf(this.selectableTypes,i))&&this.browseAllowed(e)&&t.indexOf(this.selectableTypes,-1)>-1&&(n=!0),n},"isSelectable":function(e){var i=e.data?e.data.id:e.get("id");if(e.get("unselectable"))return!1;var n=this.isSelectableType(e);return n&&(n=t.every(this.unselectableMembers,function(e){return i!==e})),this.selectableMembers&&(n=1===e.get("type")),n},"browseAllowed":function(e){return 1===e.get("type")},"validateMember":function(e){var t=this._hasValidId(e);return t&&!this.showAllTypes&&(this.browseAllowed(e)||this.selectableTypes.length>0&&-1===this.selectableTypes.indexOf(e.get("type"))&&(t=!1)),t},"_hasValidId":function(e){return t.every(this.invalidmembers,function(t){return t.get("id")!==e.get("id")})}}),n}),
csui.define("hbs!csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="cs-icon '+e.escapeExpression((s=null!=(s=l(i,"iconClass")||(null!=t?l(t,"iconClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"iconClass","hash":{},"loc":{"start":{"line":3,"column":25},"end":{"line":3,"column":38}}}):s))+'"></span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a role="menuitem" tabindex="-1" href="#" class="'+e.escapeExpression((l=null!=(l=r(i,"class")||(null!=t?r(t,"class"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"class","hash":{},"loc":{"start":{"line":1,"column":49},"end":{"line":1,"column":58}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"icon"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":2},"end":{"line":4,"column":9}}}))?s:"")+'  <span class="cs-label">'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":5,"column":25},"end":{"line":5,"column":33}}}):l))+"</span>\r\n</a>\r\n"}});return i.registerPartial("csui_dialogs_node.picker_impl_header_start.location.selector_start.location.selector.item",n),n}),csui.define("hbs!csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button id="'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":1,"column":12},"end":{"line":1,"column":18}}}):s))+'" class="binf-btn binf-btn-default binf-dropdown-toggle csui-acc-focusable"\r\n        data-binf-toggle="dropdown" aria-haspopup="true" aria-expanded="false"\r\n        aria-label="'+e.escapeExpression((s=null!=(s=l(i,"labelSelectLocation")||(null!=t?l(t,"labelSelectLocation"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"labelSelectLocation","hash":{},"loc":{"start":{"line":3,"column":20},"end":{"line":3,"column":43}}}):s))+'">\r\n  <span class="'+e.escapeExpression((s=null!=(s=l(i,"iconClass")||(null!=t?l(t,"iconClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"iconClass","hash":{},"loc":{"start":{"line":4,"column":15},"end":{"line":4,"column":28}}}):s))+'"></span>\r\n  <span class="cs-label">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":5,"column":25},"end":{"line":5,"column":33}}}):s))+'</span>\r\n  <span class="cs-icon icon-caret-down"></span>\r\n</button>\r\n<div class="csui-separator"></div>\r\n<ul class="binf-dropdown-menu" role="menu" aria-labelledby="'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":9,"column":60},"end":{"line":9,"column":66}}}):s))+'"></ul>\r\n'}});return i.registerPartial("csui_dialogs_node.picker_impl_header_start.location.selector_start.location.selector",n),n}),csui.define("csui/dialogs/node.picker/start.locations/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/dialogs/node.picker/start.locations/impl/nls/root/lang",{"labelNoSelection":"Go to...","labelSearch":"Search","labelCurrentLocation":"Current location","labelFavorites":"Favorites","labelEnterpriseVolume":"Enterprise volume","labelPersonalVolume":"Personal volume","labelPerspectiveAssetsVolume":"Perspective assets volume","labelRecentContainers":"Recent locations","labelSelectLocation":"Select location"}),csui.define("css!csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector",[],function(){}),csui.define("csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector.view",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector.item","hbs!csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector","i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang","css!csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector","csui/lib/binf/js/binf"],function(e,t,i,n,o,s,l){"use strict";function r(e){var t=e.get("icon")||"";return t&&t.indexOf("-")<0&&(t="icon-menu-"+t),"cs-icon "+t}var a=i.ItemView.extend({"tagName":"li","attributes":{"role":"presentation"},"template":o,"templateHelpers":function(){return{"iconClass":r(this.model)}},"triggers":{"click >a":"click:link"},"constructor":function(){i.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"activate",this._activate),this.listenTo(this.model,"deactivate",this._deactivate)},"_activate":function(){this._parent.activeModel=this.model,this.el.classList.add("binf-active")},"_deactivate":function(){this.el.classList.remove("binf-active")}});return i.CompositeView.extend({"className":"dropdown-locations","template":s,"childView":a,"childViewContainer":"> .binf-dropdown-menu","behaviors":{"TabableRegion":{"behaviorClass":n}},"ui":{"toggle":"> .binf-dropdown-toggle","selectedLabel":">.binf-dropdown-toggle >.cs-label","selectedIcon":">.binf-dropdown-toggle >.cs-icon:not(.icon-caret-down)","selectedLocation":">.binf-dropdown-toggle >span:not(.icon-caret-down)"},"events":{"keyup":"onKeyInView"},"constructor":function(e){i.CompositeView.prototype.constructor.apply(this,arguments),this.selected=new t.Model,this.options.selected?this._setSelection(this.options.selected.attributes):this.resetSelection(),this.activeModel=this.selected,this.listenTo(this.collection,"change",this._refreshSelection),this.listenTo(this.selected,"change",this._updateSelection),this.listenTo(t,"closeToggleAction",this._closeToggle)},"filter":function(e,t,i){return!e.get("hide")},"currentlyFocusedElement":function(){return this.$el.find("button")},"accDeactivateTabableRegion":function(){this._closeToggle()},"reset":function(){this.resetSelection()},"resetSelection":function(){this.selected.set({"id":e.uniqueId(),"name":l.labelNoSelection,"icon":""})},"serializeData":function(){var t=e.pick(this.selected.toJSON(),["id","name","icon"]);return e.defaults({"id":e.uniqueId()},t)},"templateHelpers":function(){return{"search":l.labelSearch,"iconClass":r(this.selected),"labelSelectLocation":l.labelSelectLocation}},"onKeyInView":function(e){var t=this.$el.hasClass("binf-open");if(27===e.keyCode&&t)return this.$el.removeClass("binf-open"),this.$('*[tabindex = "0"]').trigger("focus"),!1},"onRender":function(){this.ui.toggle.binf_dropdown(),this.options.selected&&this.options.selected.trigger("activate")},"onChildviewClickLink":function(e){this.ui.selectedLabel.removeClass("select-prompt"),this._setSelection(e.model.attributes),this.ui.toggle.binf_dropdown("toggle"),this.ui.selectedLocation.removeClass("binf-hide"),this.triggerMethod("change:location",e.model),this.$el.trigger("setCurrentTabFocus")},"hideDropDownLabel":function(e){var t=this.selected.get("factory"),i=t.getLocationParameters().container,n=i&&i.get("id"),o=e&&e.get("id");e&&o!==n?(this._setSelection({"name":l.labelSelectLocation,"id":""}),this.ui.selectedLabel.addClass("select-prompt"),this.ui.selectedIcon.addClass("binf-hide")):o===n&&this.ui.selectedLabel[0].innerHTML!==i.get("name")&&this.activeModel&&this.activeModel.get("name")!==l.labelCurrentLocation&&(this.selected.attributes.name=i.get("name"),this._updateSelection())},"_setSelection":function(e){this.selected.set(e)},"_updateSelection":function(){this.ui.selectedLabel.text(this.selected.get("name")),this.ui.selectedIcon.attr("class",r(this.selected)),this.collection.get(this.activeModel).trigger("deactivate");var e=this.collection.get(this.selected);e&&e.trigger("activate")},"_refreshSelection":function(e){e.get("id")===this.selected.get("id")&&this._setSelection(e.attributes)},"_closeToggle":function(){var e=this.$el;e.hasClass&&e.hasClass("binf-open")&&this.ui.toggle.binf_dropdown("toggle"),this.ui.toggle&&this.ui.toggle.attr&&this.ui.toggle.attr("aria-expanded","false")}})}),csui.define("hbs!csui/dialogs/members.picker/impl/header/user.search/user.search",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-user-search-container">\r\n  <div class="csui-user-search-bar"></div>\r\n</div><a href="javascript:void(0);" class="icon icon-global-search csui-header-userpicker-icon\r\n         icon-header-search csui-acc-focusable" title="'+e.escapeExpression((s=null!=(s=l(i,"searchIconTitle")||(null!=t?l(t,"searchIconTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"searchIconTitle","hash":{},"loc":{"start":{"line":4,"column":55},"end":{"line":4,"column":74}}}):s))+'" tabindex="0"\r\n         data-cstabindex="-1" role="button" aria-expanded="false"\r\n         aria-label="'+e.escapeExpression((s=null!=(s=l(i,"searchIconAria")||(null!=t?l(t,"searchIconAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"searchIconAria","hash":{},"loc":{"start":{"line":6,"column":21},"end":{"line":6,"column":39}}}):s))+'"></a>'}});return i.registerPartial("csui_dialogs_members.picker_impl_header_user.search_user.search",n),n}),csui.define("csui/dialogs/members.picker/impl/header/user.search/user.search.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/behaviors/keyboard.navigation/tabable.region.behavior","i18n","i18n!csui/dialogs/members.picker/impl/nls/lang","hbs!csui/dialogs/members.picker/impl/header/user.search/user.search"],function(e,t,i,n,o,s,l){return i.ItemView.extend({"className":"csui-user-lookup","template":l,"templateHelpers":{"searchIconTitle":s.searchIconTitle,"searchIconAria":s.searchIconAria},"ui":{"input":".cs-search","userPickerIcon":".csui-header-userpicker-icon"},"events":{"click @ui.userPickerIcon":"userPickerIconClicked"},"initialize":function(e){this.options=e},"constructor":function(e){e||(e={}),e.data||(e.data={}),this.options=e,this.direction=o.settings.rtl?"left":"right",i.ItemView.prototype.constructor.call(this,e)},"onShow":function(){var e=this;csui.require(["csui/controls/userpicker/userpicker.view"],function(n){e.pickerView=new n({"context":e.options.context,"limit":5,"memberFilter":{"type":[0,1]},"widgetoptions":e.options,"placeholder":e.options.placeHolder||s.UserPickerPlaceHolder,"prettyScrolling":!0,"scrollContainerHeight":"auto","model":e.options.userPickerModel,"id_input":t.uniqueId("csui-inline-permissions-user-picker-input"),"lightWeight":!1}),new i.Region({"el":e.$el.find(".csui-user-search-bar")}).show(e.pickerView),e.listenTo(e.pickerView,"item:change",e.processItemChange),e.listenTo(e.pickerView,"item:clear",e.processItemChange)})},"processItemChange":function(){var e=arguments.length>0&&arguments[0].item;this.param=e,this.trigger("show:selectItem",this.param),this.processAfterSelect()},"processAfterSelect":function(){""!==this.pickerView.ui.searchbox.val()&&this.pickerView&&this.pickerView.ui&&this.pickerView.ui.searchclear&&this.pickerView.ui.searchclear.trigger("click")},"updatePlaceHolder":function(e){e?this.$el.find("input").attr("placeholder",s.addAnotherNamePlaceHolder):this.$el.find("input").attr("placeholder",s.UserPickerPlaceHolder)},"currentlyFocusedElement":function(e){if(this.$el){var t=this.$el.find("*[data-cstabindex=-1]");t.length&&t.prop("tabindex",0);!(!!e&&e.shiftKey)&&this.$el.find(".search-bar").length&&this.$el.find(".search-bar").is(":visible")?this.focusElement=this.$el.find(".csui-input"):this.$el.find("a.csui-acc-focusable").length&&(this.focusElement=this.$el.find("a.csui-acc-focusable"))}return this.focusElement},"userPickerIconClicked":function(t){if(e(document).bind("click."+this.cid+" keydown."+this.cid,this,this._hideSearchBar),this.ui.input.toggleClass(n.accessibilityFocusableClass),this.$el.find(".csui-user-search-container").is(":visible"));else if(this.$el&&this.$el.parents()){var i=this;this.hideStartLocations(),this.$el.find(".csui-user-search-container").show("blind",{"direction":this.direction},"200",function(){i.$el.find(".csui-user-search-container input").trigger("focus")})}this.ui.userPickerIcon.attr("aria-expanded",!0)},"_hideSearchBar":function(t){var i=t||window.event,n=e(".csui-user-search-container"),o=t.data;n.is(":visible")&&(("keydown"!==i.type||27!==i.keyCode&&27!==i.which)&&(e(i.target).closest(n).length||"click"!==i.type||e(i.target).closest(".csui-header-userpicker-icon").length)||(o.$el.find(".csui-user-search-container input").val(""),o.$el.find(n).hide("blind",{"direction":t.data.direction},"200",function(){o.showStartLocations(),o.focusedElement=void 0,o.currentlyFocusedElement().trigger("focus")}),e(document).unbind("click."+o.cid+" keydown."+o.cid),o.ui.userPickerIcon instanceof Object&&o.ui.userPickerIcon.attr("aria-expanded",!1)))},"showStartLocations":function(e){this.trigger("show:startLocation")},"hideStartLocations":function(e){this.trigger("hide:startLocation")}})}),csui.define("hbs!csui/dialogs/members.picker/impl/header/members.picker.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <h2 class="member-title">'+e.escapeExpression((l=null!=(l=r(i,"title")||(null!=t?r(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":2,"column":27},"end":{"line":2,"column":36}}}):l))+'</h2><span class="csui-separator"></span>\r\n  <div class="csui-target-controls">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"locationSelector"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":4},"end":{"line":7,"column":11}}}))?s:"")+'    <div class="csui-member-picker-container">\r\n      <div class="csui-member-picker"></div>\r\n    </div>\r\n  </div>\r\n'},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-start-locations binf-dropdown '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"displayStartLocation"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":53},"end":{"line":6,"column":50}}}))?s:"")+'"></div>\r\n'},"3":function(e,t,i,n,o){return"binf-hidden"},"5":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <h2 class="member-title member-picker-view-header">'+e.escapeExpression((l=null!=(l=r(i,"title")||(null!=t?r(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":13,"column":53},"end":{"line":13,"column":62}}}):l))+'</h2><span\r\n      class="csui-view-separator csui-separator binf-hidden"></span>\r\n  <div class="csui-target-controls">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isNotDeleted"):t,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":16,"column":4},"end":{"line":24,"column":11}}}))?s:"")+"  </div>\r\n"},"6":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-member-picker-container">\r\n        <span class="csui-member-picker"></span>\r\n        <span tabindex="-1" class="csui-add-member binf-hidden"\r\n              title="'+e.escapeExpression((l=null!=(l=r(i,"addMemberTitle")||(null!=t?r(t,"addMemberTitle"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"addMemberTitle","hash":{},"loc":{"start":{"line":20,"column":21},"end":{"line":20,"column":39}}}):l))+'">\r\n          '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"size":"large","states":"true","iconName":"csui_action_add32"},"loc":{"start":{"line":21,"column":10},"end":{"line":21,"column":79}}}))?s:"")+"\r\n        </span>\r\n      </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"adduserorgroup"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(5,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":26,"column":7}}}))?s:""}});return i.registerPartial("csui_dialogs_members.picker_impl_header_members.picker.header",n),n}),csui.define("css!csui/dialogs/members.picker/impl/header/members.picker.header",[],function(){}),csui.define("csui/dialogs/members.picker/impl/header/members.picker.header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/icons.v2","csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector.view","csui/dialogs/members.picker/impl/header/user.search/user.search.view","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/dialogs/members.picker/impl/header/members.picker.header","i18n!csui/dialogs/members.picker/impl/nls/lang","css!csui/dialogs/members.picker/impl/header/members.picker.header"],function(e,t,i,n,o,s,l,r,a){return i.LayoutView.extend({"template":r,"className":"cs-header-control","regions":{"startLocations":".csui-start-locations","userSearch":".csui-member-picker"},"templateHelpers":function(){return{"adduserorgroup":this.options.adduserorgroup,"locationSelector":this.options.locationSelector,"displayStartLocation":this.options.displayStartLocation,"isNotDeleted":!(this.options.headerViewoptions.selectedGroup&&this.options.headerViewoptions.selectedGroup.get("right_id_expand").deleted),"title":this.options.title?this.options.title:a.dialogTitle,"addMemberTitle":a.AddMember}},"ui":{"addIcon":".csui-add-member","memberPickerContainer":".csui-member-picker-container","viewSeparator":".csui-view-separator","headerTitle":".member-picker-view-header"},"events":{"click @ui.addIcon":"onAddMemberClick","keyup":"onKeyInView"},"onAddMemberClick":function(e){e.stopPropagation(),e.preventDefault(),this.ui.addIcon.addClass("binf-hidden"),this.ui.viewSeparator.removeClass("binf-hidden"),this.ui.headerTitle.html(a.AddUserOrGroup),this.editPermission&&this.showUserSearchView(e),this.trigger("enable:add")},"behaviors":{"TabableRegion":{"behaviorClass":l}},"currentlyFocusedElement":function(e){if(this.$el){var i=this.$("*[tabindex]:visible");return i.length&&i.prop("tabindex",0),!!i[0]&&t(i[0])}},"onKeyInView":function(e){13===e.keyCode&&t(e.target).hasClass("csui-add-member")&&t(e.target).trigger("click")},"initialize":function(){var e=this.options;e.locationSelector&&e.adduserorgroup&&(this.startLocationView=new o({"collection":this.options.locations,"title":this.options.dialogTitle,"selected":this.options.initialLocation}),e.placeHolder=void 0!==this.options.selectedMember?a.addAnotherNamePlaceHolder:a.userSearchPlaceHolder,e.addAnotherNamePlaceHolder=a.addAnotherNamePlaceHolder,this.options=e)},"onRender":function(){var e=this.options,t=this.options.authUser&&this.options.authUser.get("id"),i=this.options.headerViewoptions.selectedGroup&&this.options.headerViewoptions.selectedGroup.get("right_id_expand").leader_id,n=!1;i&&i===t&&(n=!0),this.editPermission=(n||this.options.hasEditPermissionAction)&&this.options.node&&"simple"!==this.options.node.get("permissions_model"),this.editPermission?this.ui.addIcon.removeClass("binf-hidden"):this.ui.addIcon.addClass("binf-hidden"),this.options.showUserPicker&&(this.ui.addIcon.addClass("binf-hidden"),this.showUserSearchView(),this.trigger("enable:add")),this.startLocationView&&e.adduserorgroup&&(this.startLocations.show(this.startLocationView),this.options.showUserPicker&&(this.showUserSearchView(),this.userSearchView.on("show:startLocation",this.showStartLocations,this),this.userSearchView.on("hide:startLocation",this.hideStartLocations,this)))},"showUserSearchView":function(e){this.userSearchView=new s(this.options),this.userSearch.show(this.userSearchView),this.userSearchView.userPickerIconClicked(e),this.userSearchView.on("show:selectItem",this.selectUsers,this)},"selectUsers":function(e){e&&this.trigger("show:selectItem",e)},"showStartLocations":function(){this.startLocationView.$el.removeClass("binf-hidden")},"hideStartLocations":function(){this.startLocationView.$el.addClass("binf-hidden")},"onDestroy":function(){this.startLocationView&&this.startLocationView.destroy()}})}),csui.define("csui/controls/wizard/step/footer.view",["csui/lib/marionette","csui/behaviors/keyboard.navigation/tabable.region.behavior"],function(e,t){var i=e.ItemView.extend({"tagName":"button","className":"binf-btn","template":!1,"triggers":{"click":"click"},"behaviors":{"TabableRegion":{"behaviorClass":t}},"constructor":function(t){e.View.prototype.constructor.apply(this,arguments)},"isTabable":function(){return this.$el.is(":not(:disabled)")&&this.$el.is(":not(:hidden)")},"currentlyFocusedElement":function(){return-1===this.$el.prop("tabindex")&&this.$el.prop("tabindex",0),this.$el},"onRender":function(){var e=this.$el,t=this.model.attributes;e.text(t.label),e.addClass(t.default?"binf-btn-primary cs-add-button":"binf-btn-default"),t.toolTip&&e.attr("title",t.toolTip),t.separate&&e.addClass("cs-separate"),this.updateButton(t)},"updateButton":function(e){var t=this.$el;e||(e={}),void 0!==e.hidden&&(e.hidden?t.addClass("binf-hidden"):t.removeClass("binf-hidden")),void 0!==e.disabled&&t.prop("disabled",e.disabled)}});return e.CollectionView.extend({"childView":i,"constructor":function(t){e.CollectionView.prototype.constructor.apply(this,arguments),this.listenTo(this,"update:button",this.selectedMemberCollection,this)},"onDomRefresh":function(){this.children.each(function(e){e.trigger("dom:refresh")})},"selectedMemberCollection":function(e){this.selectedMemberCollection=e},"getButtons":function(){return this.children.toArray()},"updateButton":function(e,t){var n=this.collection.get(e);n?this.children.findByModel(n).updateButton(t):!!i.updateButton&&i.updateButton(this.$('[data-cs-id="'+e+'"]'),t)},"getPreviousButton":function(){return this.children.toArray()[0]},"getNextButton":function(){var e=this.children.toArray();return e[e.length-1]}})}),csui.define("hbs!csui/controls/wizard/step/impl/step.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"actionIconNameLeft"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":2,"column":2},"end":{"line":10,"column":9}}}))?s:"")+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"iconNameLeft"):t,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.program(9,o,0),"loc":{"start":{"line":11,"column":2},"end":{"line":30,"column":9}}}))?s:"")+'    <h4 class="tile-title binf-modal-title">'+e.escapeExpression((l=null!=(l=r(i,"title")||(null!=t?r(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":31,"column":44},"end":{"line":31,"column":53}}}):l))+'</h4>\r\n  </div>\r\n\r\n    <div class="cs-header-control"></div>\r\n\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"showCloseBtn"):t,{"name":"if","hash":{},"fn":e.program(17,o,0),"inverse":e.noop,"loc":{"start":{"line":36,"column":2},"end":{"line":41,"column":9}}}))?s:"")+"\r\n"},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="tile-type-action-icon cs-icon-left" tabindex="0">\r\n      '+(null!=(s=(l(i,"icon-v2")||t&&l(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","iconName":null!=t?l(t,"actionIconNameLeft"):t},"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":61}}}))?s:"")+"\r\n    </span>\r\n"},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"actionIconLeft"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":4},"end":{"line":9,"column":11}}}))?s:""},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="tile-type-action-icon cs-icon-left '+e.escapeExpression((s=null!=(s=l(i,"actionIconLeft")||(null!=t?l(t,"actionIconLeft"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"actionIconLeft","hash":{},"loc":{"start":{"line":8,"column":54},"end":{"line":8,"column":72}}}):s))+'" tabindex="0"></span>\r\n'},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="tile-type-icon cs-icon-left">\r\n      '+(null!=(s=(l(i,"icon-v2")||t&&l(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","iconName":null!=t?l(t,"iconNameLeft"):t},"loc":{"start":{"line":13,"column":6},"end":{"line":13,"column":55}}}))?s:"")+'\r\n    </span>\r\n    <div class="tile-title">\r\n'},"9":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"iconLeft"):t,{"name":"if","hash":{},"fn":e.program(10,o,0),"inverse":e.program(12,o,0),"loc":{"start":{"line":17,"column":4},"end":{"line":29,"column":11}}}))?s:""},"10":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="tile-type-icon cs-icon-left '+e.escapeExpression((s=null!=(s=l(i,"iconLeft")||(null!=t?l(t,"iconLeft"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"iconLeft","hash":{},"loc":{"start":{"line":18,"column":47},"end":{"line":18,"column":59}}}):s))+'"></span>\r\n      <div class="tile-title">\r\n'},"12":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"imageLeftUrl"):t,{"name":"if","hash":{},"fn":e.program(13,o,0),"inverse":e.program(15,o,0),"loc":{"start":{"line":21,"column":6},"end":{"line":28,"column":13}}}))?s:""},"13":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="tile-type-image '+e.escapeExpression((s=null!=(s=l(i,"imageLeftClass")||(null!=t?l(t,"imageLeftClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"imageLeftClass","hash":{},"loc":{"start":{"line":22,"column":38},"end":{"line":22,"column":56}}}):s))+'">\r\n            <img src="'+e.escapeExpression((s=null!=(s=l(i,"imageLeftUrl")||(null!=t?l(t,"imageLeftUrl"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"imageLeftUrl","hash":{},"loc":{"start":{"line":23,"column":22},"end":{"line":23,"column":38}}}):s))+'" aria-hidden="true" alt="">\r\n          </div>\r\n        <div class="tile-title">\r\n'},"15":function(e,t,i,n,o){return'        <div class="tile-title cs-text-only">\r\n'},"17":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="cs-close" title="'+e.escapeExpression((s=null!=(s=l(i,"dialogCloseButtonTooltip")||(null!=t?l(t,"dialogCloseButtonTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"dialogCloseButtonTooltip","hash":{},"loc":{"start":{"line":37,"column":35},"end":{"line":37,"column":63}}}):s))+'">\r\n        <div class="icon circular '+e.escapeExpression((s=null!=(s=l(i,"iconRight")||(null!=t?l(t,"iconRight"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"iconRight","hash":{},"loc":{"start":{"line":38,"column":34},"end":{"line":38,"column":47}}}):s))+'" tabindex="0" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"dialogCloseAria")||(null!=t?l(t,"dialogCloseAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"dialogCloseAria","hash":{},"loc":{"start":{"line":38,"column":74},"end":{"line":38,"column":93}}}):s))+'"\r\n             role="button"></div>\r\n      </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"expandedHeader"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":43,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_wizard_step_impl_step.header",n),n}),csui.define("csui/controls/wizard/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/wizard/impl/nls/root/lang",{"dialogCloseButtonTooltip":"Close","dialogCloseAria":"Close dialog","back":"Back","next":"Next","cancel":"Cancel"}),csui.define("css!csui/controls/wizard/impl/wizard",[],function(){}),csui.define("csui/controls/wizard/step/impl/header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/controls/wizard/step/impl/step.header","i18n!csui/controls/wizard/impl/nls/lang","css!csui/controls/wizard/impl/wizard"],function(e,t,i,n,o,s){return i.ItemView.extend({"template":o,"behaviors":{"TabableRegion":{"behaviorClass":n}},"ui":{"headerControl":".cs-header-control"},"events":{"keydown":"onKeyInView"},"templateHelpers":function(){return{"iconLeft":this.options.iconLeft,"actionIconLeft":this.options.actionIconLeft,"imageLeftUrl":this.options.imageLeftUrl,"imageLeftClass":this.options.imageLeftClass,"title":this.options.title,"showCloseBtn":this.options.showCloseBtn,"iconRight":this.options.iconRight||"cs-icon-cross","expandedHeader":this.options.expandedHeader,"dialogCloseButtonTooltip":s.dialogCloseButtonTooltip,"dialogCloseAria":s.dialogCloseAria}},"constructor":function(e){i.View.prototype.constructor.apply(this,arguments)},"isTabable":function(){return this.$("*[tabindex]").length>0},
"currentlyFocusedElement":function(e){var i=this.$("*[tabindex]");return i.length&&i.prop("tabindex",0),t(e&&e.shiftKey?i[i.length-1]:i[0])},"onLastTabElement":function(e,t){return e&&t.target===this.$("*[tabindex]")[0]},"onKeyInView":function(e){var i=e.keyCode;13!==i&&32!==i||t(e.target).trigger("click")},"onRender":function(){var t=this.options.headers||[];t.length&&e.each(t,function(e){var t=this._renderHeader(e);this.$el.append(t)},this);var i=this.options.headerControl;i&&(this.ui.headerControl.append(i.$el),i.render(),i.trigger("dom:refresh")),this.options.actionIconLeft&&this._adjustTitleCSS()},"onDomRefresh":function(){var e=this.options.headerControl;e&&(e.triggerMethod("dom:refresh"),e.triggerMethod("after:show"))},"_renderHeader":function(e){var i=t('<div class="modal-header-item"></div>').text(e.label);return e.class&&i.addClass(e.class),e.id&&i.attr("id",e.id),i},"_adjustTitleCSS":function(e){this.$el.find("div.tile-title").addClass("tile-action-icon-tittle")}})}),csui.define("hbs!csui/controls/wizard/step/impl/wizard.step",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'  <div class="binf-modal-dialog binf-modal-lg" role="dialog">\r\n'},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"midSize"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.program(6,o,0),"loc":{"start":{"line":4,"column":2},"end":{"line":8,"column":9}}}))?s:""},"4":function(e,t,i,n,o){return'    <div class="binf-modal-dialog binf-modal-md" role="dialog">\r\n'},"6":function(e,t,i,n,o){return'    <div class="binf-modal-dialog" role="dialog">\r\n'},"8":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="binf-modal-body cs-dialog cs-dialog-bodymessage">'+e.escapeExpression((s=null!=(s=l(i,"bodyMessage")||(null!=t?l(t,"bodyMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"bodyMessage","hash":{},"loc":{"start":{"line":16,"column":67},"end":{"line":16,"column":82}}}):s))+"</div>\r\n"},"10":function(e,t,i,n,o){return'      <div class="binf-modal-body"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"largeSize"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":9,"column":7}}}))?s:"")+'\r\n  <div class="binf-modal-content" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"dialogTxtAria")||(null!=t?r(t,"dialogTxtAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"dialogTxtAria","hash":{},"loc":{"start":{"line":11,"column":46},"end":{"line":11,"column":63}}}):l))+'">\r\n\r\n    <div class="tile-header binf-modal-header"></div>\r\n\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"bodyMessage"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.program(10,o,0),"loc":{"start":{"line":15,"column":4},"end":{"line":19,"column":11}}}))?s:"")+'\r\n    <div class="binf-modal-footer binf-hidden"></div>\r\n\r\n  </div>\r\n\r\n</div>\r\n'}});return i.registerPartial("csui_controls_wizard_step_impl_wizard.step",n),n}),csui.define("csui/controls/wizard/step/wizard.step.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/behaviors/keyboard.navigation/tabables.behavior","csui/controls/wizard/step/footer.view","csui/controls/wizard/step/impl/header.view","hbs!csui/controls/wizard/step/impl/wizard.step","csui/utils/log","i18n!csui/controls/wizard/impl/nls/lang","i18n"],function(e,t,i,n,o,s,l,r,a,c,u,d,h){u=u(e.id);var p=o.LayoutView.extend({"className":function(){var e="cs-wizard-step cs-dialog binf-modal binf-fade";return this.options.className&&(e+=" "+t.result(this.options,"className")),e},"attributes":{"tabindex":"-1","role":"dialog","aria-hidden":"true"},"template":c,"behaviors":{"TabablesBehavior":{"behaviorClass":l,"recursiveNavigation":!0,"containTabFocus":!0}},"regions":{"body":".binf-modal-body","header":".binf-modal-header","footer":".binf-modal-footer"},"ui":{"header":".binf-modal-header","footer":".binf-modal-footer","body":".binf-modal-body"},"events":{"hide.binf.modal":"onHiding","hidden.binf.modal":"onHidden","click .cs-close":"onClickClose","shown.binf.modal":"onShown","keyup":"onKeyInView","setCurrentTabFocus":"setCurrentTabFocus","tabNextRegion":"tabNextRegion","click .tile-type-action-icon":"onClickActionIcon"},"templateHelpers":function(){return{"largeSize":this.options.largeSize,"midSize":this.options.midSize,"bodyMessage":this.options.bodyMessage,"dialogTxtAria":this.options.dialogTxtAria}},"constructor":function(){o.LayoutView.prototype.constructor.apply(this,arguments),this.listenToOnce(this,"before:hide",l.popTabableHandler),this.propagateEventsToRegions()},"onKeyInView":function(e){27===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.destroy(),this.trigger("close:wizard"))},"setCurrentTabFocus":function(){this.focusOnLastRegion=!0,this.$el.trigger("focus")},"tabNextRegion":function(){this.trigger("changed:focus")},"onRender":function(){this.$el.addClass(p.prototype.className.call(this)).attr("tabindex",0),this._renderHeader(),this.options.view&&this.body.show(this.options.view),this._renderFooter()},"onShow":function(){i(window).scrollTop(0),this.$el.binf_modal({"backdrop":"static","keyboard":!1,"paddingWhenOverflowing":!1})},"kill":function(){return p.__super__.destroy.apply(this,arguments),this._scrollToBegin(),!0},"destroy":function(){return this.$el.is(":visible")?(this.$el.binf_modal("hide"),i("body").removeClass("binf-modal-open")):p.__super__.destroy.apply(this,arguments),this._scrollToBegin(),this},"updateButton":function(e,t){var i=this.footerView;if(!i.updateButton)throw new Error("Dialog footer does not support button updating.");i.updateButton(e,t)},"showView":function(e){this.body.show(e),e.triggerMethod("after:show")},"onShown":function(){this.options.view&&(this.options.view.triggerMethod("dom:refresh"),this.options.view.triggerMethod("after:show")),this.headerView&&(this.headerView.triggerMethod("dom:refresh"),this.headerView.triggerMethod("after:show")),this.footerView&&(this.footerView.triggerMethod("dom:refresh"),this.footerView.triggerMethod("after:show"))},"onHiding":function(){this.triggerMethod("before:hide")},"onHidden":function(){this.triggerMethod("hide"),this.destroy()},"onClickClose":function(e){e.preventDefault(),e.stopPropagation(),this.trigger("close:wizard")},"onClickActionIcon":function(e){this.options.view.trigger("click:actionIcon")},"onClickButton":function(e){if("Add"===e.model.get("id"))this.trigger("add:member");else{var t=e.model.attributes;t.click&&t.click({"dialog":this,"button":this.$el}),t.close&&this.trigger("close:wizard"),"previous"===t.id&&this.trigger("switch:view")}},"_scrollToBegin":function(){if(!0===h.settings.rtl){var e=i("body").width();i("body").scrollLeft(e)}else i("body").scrollLeft(0),i(".csui-add-permission").trigger("focus")},"_renderHeader":function(){var e=this.headerView=this.options.headerView,t=void 0!==this.options.standardHeader?this.options.standardHeader:!this.options.template;if(e&&(e.editpermission=!!this.options.wizard&&!!this.options.wizard.edit_permission&&this.options.wizard.edit_permission),e)this.header.show(e);else{var i={"iconLeft":this.options.iconLeft,"actionIconLeft":this.options.actionIconLeft,"imageLeftUrl":this.options.imageLeftUrl,"imageLeftClass":this.options.imageLeftClass,"title":this.options.title,"iconRight":this.options.iconRight||"cs-icon-cross","headers":this.options.headers,"headerControl":this.options.headerControl,"expandedHeader":t,"el":this.ui.header[0]};e=this.headerView=new a(i),e.render(),this.header.attachView(e),this.headerView.trigger("dom:refresh")}},"_renderFooter":function(){var e=this.footerView=this.options.footerView;if(e)this.ui.footer.removeClass("binf-hidden"),this.footer.show(e);else{var i=[];this.options.isFirstStep||i.push({"id":"previous","label":this.options.previousButtonLabel||d.back,"toolTip":this.options.previousButtonLabel||d.back,"default":!1,"disabled":!1,"separate":!0,"click":t.bind(this.onClickPreviousButton,this)});var o={"id":"next","label":this.options.nextButtonLabel||d.next,"toolTip":this.options.nextButtonLabel||d.next,"default":!0,"disabled":void 0===this.options.disableNext||this.options.disableNext,"click":t.bind(this.onClickNextButton,this)},s={"id":"done","label":this.options.doneButtonLabel||d.next,"toolTip":this.options.doneButtonLabel||d.next,"default":!0,"disabled":void 0===this.options.disableDone||this.options.disableDone,"click":t.bind(this.onClickDoneButton,this)};this.options.nextButton?i.push(o):this.options.doneButton&&i.push(s),i.push({"id":"cancel","label":d.cancel,"toolTip":d.cancel,"close":!0});var l=this.options.buttons||i;l.length&&this.ui.footer.removeClass("binf-hidden"),e=this.footerView=new r({"collection":new n.Collection(l),"wizardView":this,"el":this.ui.footer[0]}),this.listenTo(e,"childview:click",this.onClickButton),e.render(),this.footer.attachView(e)}},"showPreviousButton":function(){this.footer.currentView.getPreviousButton().$el.removeClass("binf-hidden")},"hidePreviousButton":function(){this.footer.currentView.getPreviousButton().$el.addClass("binf-hidden")},"validate":function(){return!this.body.currentView||!this.body.currentView.validate||this.body.currentView.validate()},"onClickNextButton":function(){this.trigger("next:clicked")},"onClickDoneButton":function(){this.trigger("done:clicked")},"onClickPreviousButton":function(){this.trigger("previous:clicked")}});return t.extend(p.prototype,s),p}),csui.define("hbs!csui/controls/wizard/impl/wizard",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return""}});return i.registerPartial("csui_controls_wizard_impl_wizard",n),n}),csui.define("csui/controls/wizard/wizard.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/behaviors/keyboard.navigation/tabables.behavior","csui/controls/wizard/step/wizard.step.view","hbs!csui/controls/wizard/impl/wizard","csui/utils/non-emptying.region/non-emptying.region","csui/utils/log","i18n","css!csui/controls/wizard/impl/wizard","csui/lib/binf/js/binf"],function(e,t,i,n,o,s,l,r,a,c,u,d){var h={"FORWARD":"forward","BACKWARD":"backward","CLOSE":"close"},p=o.LayoutView.extend({"id":"wizard","template":a,"lastElementFocused":[],"behaviors":{"TabablesBehavior":{"behaviorClass":l,"recursiveNavigation":!0,"containTabFocus":!0}},"className":function(){var e="cs-wizard";return this.options.className&&(e+=" "+t.result(this.options,"className")),e},"templateHelpers":function(){return{}},"constructor":function(e){e||(e={}),o.LayoutView.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions()},"initialize":function(){this.currentStep=0,this.stepViews=[],this.direction="right"},"show":function(e){var t=i.fn.binf_modal.getDefaultContainer(),n=new c({"el":t});return this.edit_permission=e.editpermission,n.show(this),this},"onRender":function(){return this.renderCurrentStep(),this},"renderCurrentStep":function(){if(this.currentView=this.getCurrentView(),this.currentView._isRendered)this.showCurrentView();else{new c({"el":this.el}).show(this.currentView)}},"getCurrentView":function(){if(this.currentStep<this.stepViews.length)return this.stepViews[this.currentStep];var e=this.currentStep,i=new r(t.extend(this.options.steps[e],{"wizard":this,"isFirstStep":this.isFirstStep()}));return this.stepViews.push(i),this.listenTo(i,"next:clicked",this.nextStep).listenTo(i,"previous:clicked",this.prevStep).listenTo(i,"done:clicked",this.save).listenTo(i,"add:member",this.addMember).listenTo(i,"close:wizard",this.closeWizard),i},"nextStep":function(){this.currentView.validate()&&(this.isLastStep()?this.save():(this.hideCurrentView(),this.currentStep+=1,this.direction=d&&d.settings.rtl?"left":"right",this.renderCurrentStep(),this.handleFocus(h.FORWARD)))},"prevStep":function(){this.isFirstStep()||(this.hideCurrentView(),this.currentStep-=1,this.direction=d&&d.settings.rtl?"right":"left",this.renderCurrentStep(),this.handleFocus(h.BACKWARD))},"hideCurrentView":function(){this.currentView.$el.addClass("binf-hidden")},"showCurrentView":function(){this.currentView.$el.removeClass("binf-hidden")},"addDirection":function(){this.currentView.$el.find(".binf-modal-dialog").removeClass("left"),this.currentView.$el.find(".binf-modal-dialog").removeClass("right"),this.currentView.$el.find(".binf-modal-dialog").addClass(this.direction)},"updateButton":function(e,t){if(!this.currentView.updateButton)throw new Error("Dialog footer does not support button updating.");this.currentView.updateButton(e,t)},"save":function(){this.trigger("save:result")},"addMember":function(){this.trigger("add:member")},"isFirstStep":function(){return 0===this.currentStep},"isLastStep":function(){return this.currentStep===this.options.steps.length-1},"onBeforeDestroy":function(){t.each(this.stepViews,function(e,t){e.destroy()})},"closeWizard":function(){this.trigger("closing:wizard"),this.handleFocus(h.CLOSE),this.destroy()},"getStepViewByStepNumber":function(e){return this.stepViews&&e<this.stepViews.length?this.stepViews[e]:null},"handleFocus":function(e){if(e===h.FORWARD)this.lastElementFocused.push(document.activeElement),this.currentView.el.focus();else if(e===h.BACKWARD){if(this.lastElementFocused.length>0){var t=this.lastElementFocused.pop();t.focus()}}else this.lastElementFocused.splice(0,this.lastElementFocused.length)}});return t.extend(p.prototype,s),p}),csui.define("hbs!csui/widgets/permissions/impl/edit/permission.level.selector/impl/permission.level.selector",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li class="csui-permission-level-item" data-optionid="'+e.escapeExpression(e.lambda(null!=t?l(t,"id"):t,t))+'" role="option" aria-label="'+e.escapeExpression(e.lambda(null!=t?l(t,"name"):t,t))+'">\r\n      <a tabindex="-1" href="#">\r\n        <span class="cs-icon"></span>\r\n        <span class="cs-label">'+e.escapeExpression(e.lambda(null!=t?l(t,"name"):t,t))+"</span>\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"showActionIcon"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":8},"end":{"line":9,"column":15}}}))?s:"")+"      </a>\r\n    </li>\r\n"},"2":function(e,t,i,n,o){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="csui-icon '+e.escapeExpression(e.lambda(null!=t?s(t,"actionIcon"):t,t))+'"></span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<ul class="csui-permission-levels" role="listbox">\r\n'+(null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"permissionLevelOptions"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":2},"end":{"line":12,"column":11}}}))?s:"")+"</ul>\r\n"}});return i.registerPartial("csui_widgets_permissions_impl_edit_permission.level.selector_impl_permission.level.selector",n),n}),csui.define("csui/widgets/permissions/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/permissions/impl/nls/root/lang",{"properties":"Properties","versions":"Versions","general":"General","UserPickerPlaceHolder":"Enter name or group","PermissionLookupPlaceHolder":"Enter name or group for permissions lookup","right_id":"User / Group","permission_level":"Permission level","goBackTooltip":"Go back","emptyPermissionListMsg":"{0} was not found in this permissions list.","addMemberToGroup":"Add {0} as a member to a group that currently has permissions","grantAccessToMember":"Grant access to a group in which {0} is already a member","permissionLevelFullControl":"Full control","permissionLevelWrite":"Write","permissionLevelRead":"Read","permissionLevelCustom":"Custom...","permissionLevelNone":"None","FullControl":"Full control","Write":"Write","Read":"Read","Custom":"Custom","None":"None","see":"See","see_contents":"See contents","modify":"Modify","edit_attributes":"Edit attributes","add_items":"Add items","reserve":"Reserve","delete_versions":"Delete version","delete":"Delete","edit_permissions":"Edit permissions","edit_label_permissions":"edit_permissions","saveButtonLabel":"Ok","cancelButtonLabel":"Cancel","applyButtonLabel":"Apply","AddDropdownTitle":"Add","AddUserOrGroup":"Add user or group","NoOwnerAssigned":"No owner assigned","addMajorVersion":"Add major version","allUsersAndGroups":"Users and Groups","addUsersAndGroups":"Add users or groups","addButtonLabel":"Add","addButtonTooltip":"Add member to group","cancelButtonTooltip":"Close dialog","noPermissionsAvailable":"Permissions page is not available for {0}"}),csui.define("css!csui/widgets/permissions/impl/permissions",[],function(){}),csui.define("csui/widgets/permissions/edit/permission.level.selector/permission.level.selector.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/models/permission/nodepermission.model","hbs!csui/widgets/permissions/impl/edit/permission.level.selector/impl/permission.level.selector","i18n!csui/widgets/permissions/impl/nls/lang","css!csui/widgets/permissions/impl/permissions","csui/lib/binf/js/binf"],function(e,t,i,n,o,s,l){"use strict";return i.ItemView.extend({"_permissionLevelOptions":void 0,"selected":void 0,"openSelectedProperties":!1,"className":"cs-permission-level-selector","template":s,"behaviors":{"TabableRegion":{"behaviorClass":n}},"events":{"click li[data-optionid]":"onClickOption","keydown":"onKeyInView"},"constructor":function(e){e||(e={}),i.ItemView.prototype.constructor.apply(this,arguments)},"initialize":function(){this.focusIndex=0,this._setupPermissionLevelOptions();var t=this.options.selected||this.options.permissionModel.getPermissionLevel();-1!==e.indexOf(e.pluck(this._permissionLevelOptions,"id"),t)?this._setSelected(t):this._setSelected(o.PERMISSION_LEVEL_NONE)},"onKeyInView":function(e){var i=e.keyCode,n=this.$el.find("a[tabindex]");if(n.length)if(13===e.keyCode)t(n[this.focusIndex]).parent().trigger("click"),e.stopPropagation(),e.preventDefault();else if(38===i||40===i)38===i?this.focusIndex>0&&--this.focusIndex:this.focusIndex<n.length-1&&++this.focusIndex,t(n[this.focusIndex]).trigger("focus"),e.stopPropagation(),e.preventDefault();else if(9===i){var o=this.$el.parents("body").find(".csui-edit-permission-popover-container .binf-popover");o.binf_popover("destroy")}},"onClickOption":function(e){e.preventDefault(),e.stopPropagation(),this._setSelected(parseInt(t(e.currentTarget).attr("data-optionid"))),this._showSelected(),this.trigger("permission:level:selected"),this.$el.trigger("setCurrentTabFocus")},"templateHelpers":function(){return{"permissionLevelOptions":this._permissionLevelOptions}},"currentlyFocusedElement":function(){var e=this.$el.find("a[tabindex]");if(e.length)return t(e[this.focusIndex])},"accDeactivateTabableRegion":function(){},"onRender":function(){this._showSelected()},"_getOptionName":function(t){var i;return i=e.indexOf(e.pluck(this._permissionLevelOptions,"id"),t),-1===i?"":this._permissionLevelOptions[i].name},"_setupPermissionLevelOptions":function(){this._permissionLevelOptions=[],void 0!==o.PERMISSION_LEVEL_NONE&&this._permissionLevelOptions.push({"id":o.PERMISSION_LEVEL_NONE,"name":l.permissionLevelNone}),void 0!==o.PERMISSION_LEVEL_READ&&this._permissionLevelOptions.push({"id":o.PERMISSION_LEVEL_READ,"name":l.permissionLevelRead}),void 0!==o.PERMISSION_LEVEL_WRITE&&this._permissionLevelOptions.push({"id":o.PERMISSION_LEVEL_WRITE,"name":l.permissionLevelWrite}),void 0!==o.PERMISSION_LEVEL_FULL_CONTROL&&this._permissionLevelOptions.push({"id":o.PERMISSION_LEVEL_FULL_CONTROL,"name":l.permissionLevelFullControl}),"simple"!==this.options.nodeModel.get("permissions_model")&&void 0!==o.PERMISSION_LEVEL_CUSTOM&&this._permissionLevelOptions.push({"id":o.PERMISSION_LEVEL_CUSTOM,"name":l.permissionLevelCustom,"showActionIcon":!0})},"_setSelected":function(e){this.selected=e},"_showSelected":function(){var e=this.$el.find("li[data-optionid]");e.find(".cs-icon").removeClass("icon-listview-checkmark"),e.removeAttr("aria-selected");var t=this.$el.find("li[data-optionid="+this.selected+"]");t.find(".cs-icon").addClass("icon-listview-checkmark"),t.attr("aria-selected","true")},"_showOpenSelectedProperties":function(){!0===this.openSelectedProperties?(this.ui.toggle.attr("aria-expanded","true"),this.ui.iconOpenSelectedProperties.removeClass("icon-checkbox").addClass("icon-checkbox-selected")):(this.ui.toggle.attr("aria-expanded","false"),this.ui.iconOpenSelectedProperties.removeClass("icon-checkbox-selected").addClass("icon-checkbox"))},"getSelectedPermissions":function(){var e=this.options.nodeModel;return o.getPermissionsByLevelExceptCustom(this.selected,this.options.isContainer,e&&e.get("advanced_versioning"),e&&e.get("advancedVersioningEnabled"))}})}),csui.define("hbs!csui/controls/tree/impl/treeview",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-tree-child '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"nodeSplit"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":30},"end":{"line":2,"column":69}}}))?s:"")+" "+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"nodeClass"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":70},"end":{"line":3,"column":30}}}))?s:"")+'">\r\n      <input type="checkbox" id="node_'+e.escapeExpression((l=null!=(l=r(i,"nodeId")||(null!=t?r(t,"nodeId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nodeId","hash":{},"loc":{"start":{"line":4,"column":38},"end":{"line":4,"column":48}}}):l))+'" tabindex="-1" name="'+e.escapeExpression((l=null!=(l=r(i,"nodeId")||(null!=t?r(t,"nodeId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nodeId","hash":{},"loc":{"start":{"line":4,"column":70},"end":{"line":4,"column":80}}}):l))+'"\r\n             aria-label="'+e.escapeExpression((l=null!=(l=r(i,"nodeName")||(null!=t?r(t,"nodeName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nodeName","hash":{},"loc":{"start":{"line":5,"column":25},"end":{"line":5,"column":37}}}):l))+'" class="csui-tree-checkbox\r\n    '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"readonly"):t,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":4},"end":{"line":7,"column":49}}}))?s:"")+'" '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"readonly"):t,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.program(13,o,0),"loc":{"start":{"line":7,"column":51},"end":{"line":8,"column":52}}}))?s:"")+'>\r\n    <label for="node_'+e.escapeExpression((l=null!=(l=r(i,"nodeId")||(null!=t?r(t,"nodeId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nodeId","hash":{},"loc":{"start":{"line":9,"column":21},"end":{"line":9,"column":31}}}):l))+'"></label>\r\n    <span class="csui-node-name">'+e.escapeExpression((l=null!=(l=r(i,"nodeName")||(null!=t?r(t,"nodeName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nodeName","hash":{},"loc":{"start":{"line":10,"column":33},"end":{"line":10,"column":45}}}):l))+"</span>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"nodeSplit"):t,{"name":"if","hash":{},"fn":e.program(16,o,0),"inverse":e.noop,"loc":{"start":{"line":11,"column":2},"end":{"line":18,"column":9}}}))?s:"")+"  </div>\r\n  <ul></ul>\r\n"},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" "+e.escapeExpression((s=null!=(s=l(i,"splitClass")||(null!=t?l(t,"splitClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"splitClass","hash":{},"loc":{"start":{"line":2,"column":48},"end":{"line":2,"column":62}}}):s))},"4":function(e,t,i,n,o){return" nodeClass"},"6":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"checked"):t,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.program(9,o,0),"loc":{"start":{"line":6,"column":20},"end":{"line":7,"column":42}}}))?s:""},"7":function(e,t,i,n,o){return"  icon-checkbox-on_disabled\r\n    "},"9":function(e,t,i,n,o){return" icon-checkbox-disabled"},"11":function(e,t,i,n,o){return"disabled "},"13":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"checked"):t,{"name":"if","hash":{},"fn":e.program(14,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":84},"end":{"line":8,"column":45}}}))?s:""},"14":function(e,t,i,n,o){return' tabindex="-1"  checked'},"16":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-tree-split '+e.escapeExpression((s=null!=(s=l(i,"splitClass")||(null!=t?l(t,"splitClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"splitClass","hash":{},"loc":{"start":{"line":12,"column":34},"end":{"line":12,"column":48}}}):s))+'">\r\n        <div class="csui-splitcontrol-label">\r\n          <span title="'+e.escapeExpression((s=null!=(s=l(i,"splitName")||(null!=t?l(t,"splitName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"splitName","hash":{},"loc":{"start":{"line":14,"column":23},"end":{"line":14,"column":36}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"splitName")||(null!=t?l(t,"splitName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"splitName","hash":{},"loc":{"start":{"line":14,"column":38},"end":{"line":14,"column":51}}}):s))+'</span>\r\n        </div>\r\n      </div>\r\n      <div class="csui-separator"></div>\r\n'},"18":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-tree-child '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"nodeSplit"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":22,"column":32},"end":{"line":22,"column":71}}}))?s:"")+'">\r\n      <input type="checkbox" id="node_'+e.escapeExpression((l=null!=(l=r(i,"nodeId")||(null!=t?r(t,"nodeId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nodeId","hash":{},"loc":{"start":{"line":23,"column":38},"end":{"line":23,"column":48}}}):l))+'" name="'+e.escapeExpression((l=null!=(l=r(i,"nodeId")||(null!=t?r(t,"nodeId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nodeId","hash":{},"loc":{"start":{"line":23,"column":56},"end":{"line":23,"column":66}}}):l))+'"\r\n             aria-label="'+e.escapeExpression((l=null!=(l=r(i,"nodeName")||(null!=t?r(t,"nodeName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nodeName","hash":{},"loc":{"start":{"line":24,"column":25},"end":{"line":24,"column":37}}}):l))+'"  tabindex="-1" class="csui-tree-checkbox\r\n             '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"nodeClass"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":25,"column":13},"end":{"line":25,"column":47}}}))?s:"")+"\r\n        "+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"readonly"):t,{"name":"if","hash":{},"fn":e.program(19,o,0),"inverse":e.noop,"loc":{"start":{"line":26,"column":8},"end":{"line":27,"column":49}}}))?s:"")+'" '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"readonly"):t,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.program(22,o,0),"loc":{"start":{"line":27,"column":51},"end":{"line":28,"column":37}}}))?s:"")+'>\r\n      <label for="node_'+e.escapeExpression((l=null!=(l=r(i,"nodeId")||(null!=t?r(t,"nodeId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nodeId","hash":{},"loc":{"start":{"line":29,"column":23},"end":{"line":29,"column":33}}}):l))+'"></label>\r\n      <span class="csui-node-name">'+e.escapeExpression((l=null!=(l=r(i,"nodeName")||(null!=t?r(t,"nodeName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nodeName","hash":{},"loc":{"start":{"line":30,"column":35},"end":{"line":30,"column":47}}}):l))+"</span>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"nodeSplit"):t,{"name":"if","hash":{},"fn":e.program(25,o,0),"inverse":e.noop,"loc":{"start":{"line":31,"column":6},"end":{"line":38,"column":13}}}))?s:"")+"    </div>\r\n"},"19":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"checked"):t,{"name":"if","hash":{},"fn":e.program(20,o,0),"inverse":e.program(9,o,0),"loc":{"start":{"line":26,"column":24},"end":{"line":27,"column":42}}}))?s:""},"20":function(e,t,i,n,o){return" icon-checkbox-on_disabled\r\n    "},"22":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"checked"):t,{"name":"if","hash":{},"fn":e.program(23,o,0),"inverse":e.noop,"loc":{"start":{"line":27,"column":84},"end":{"line":28,"column":30}}}))?s:""},"23":function(e,t,i,n,o){return" checked"},"25":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="csui-tree-split '+e.escapeExpression((s=null!=(s=l(i,"splitClass")||(null!=t?l(t,"splitClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"splitClass","hash":{},"loc":{"start":{"line":32,"column":36},"end":{"line":32,"column":50}}}):s))+'">\r\n          <div class="csui-splitcontrol-label">\r\n            <span title="'+e.escapeExpression((s=null!=(s=l(i,"splitName")||(null!=t?l(t,"splitName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"splitName","hash":{},"loc":{"start":{"line":34,"column":25},"end":{"line":34,"column":38}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"splitName")||(null!=t?l(t,"splitName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"splitName","hash":{},"loc":{"start":{"line":34,"column":40},
"end":{"line":34,"column":53}}}):s))+'</span>\r\n          </div>\r\n        </div>\r\n        <div class="csui-separator"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isNodesExists"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(18,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":40,"column":9}}}))?s:""}});return i.registerPartial("csui_controls_tree_impl_treeview",n),n}),csui.define("css!csui/controls/tree/impl/treeview",[],function(){}),csui.define("csui/controls/tree/tree.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","hbs!csui/controls/tree/impl/treeview","css!csui/controls/tree/impl/treeview"],function(e,t,i,n,o,s){"use strict";var l=o.CompositeView.extend({"template":s,"templateHelpers":function(){return{"isNodesExists":!!(this.model.nodes&&this.model.nodes.length>0),"readonly":!!this.model.attributes&&this.model.attributes.readonly}},"tagName":"li","childViewContainer":"ul","className":"csui-tree-root","events":{"click input.csui-tree-checkbox":"onNodeClicked"},"initialize":function(){this.collection=this.model.nodes},"onNodeClicked":function(e){this.trigger("Node:clicked",e.target)}});return o.CollectionView.extend({"tagName":"ul","className":"csui-tree-container","childView":l,"childEvents":{"Node:clicked":"onChildNodeClicked"},"onChildNodeClicked":function(e,t){t.checked?this.trigger("node:selected",t):this.trigger("node:unselected",t)}})}),csui.define("csui/models/permission/permissionlevel",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone"],function(e,t,i,n){"use strict";var o=n.Model.extend({"initialize":function(){var e=this.get("nodes");e&&(this.nodes=new s(e),this.unset("nodes"))}}),s=n.Collection.extend({"model":o});return s}),csui.define("csui/widgets/permissions/impl/edit/permission.attributes/impl/permission.attributes.data",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/models/permission/permissionlevel","i18n!csui/widgets/permissions/impl/nls/lang"],function(e,t,i,n,o){function s(e){var i=!1!==e.readonly,s=e.permissions||[],l=[{"nodeName":o.see,"nodeId":"see","readonly":i,"checked":s.indexOf("see")>=0,"nodes":[{"nodeName":o.see_contents,"nodeId":"see_contents","nodeClass":"","nodeSplit":!0,"splitName":o.Read,"splitClass":"csui-split-read","readonly":i,"checked":s.indexOf("see_contents")>=0},{"nodeName":o.modify,"nodeId":"modify","readonly":i,"checked":s.indexOf("modify")>=0,"nodes":[{"nodeName":o.edit_attributes,"nodeId":"edit_attributes","readonly":i,"checked":s.indexOf("edit_attributes")>=0},{"nodeName":o.reserve,"nodeId":"reserve","readonly":i,"checked":s.indexOf("reserve")>=0,"nodes":[{"nodeName":o.addMajorVersion,"nodeId":"add_major_version","readonly":i,"checked":s.indexOf("add_major_version")>=0}]},{"nodeName":o.delete_versions,"nodeId":"delete_versions","readonly":i,"checked":s.indexOf("delete_versions")>=0,"nodes":[{"nodeName":o.delete,"nodeId":"delete","nodeSplit":!0,"splitName":o.Write,"splitClass":"csui-split-write","readonly":i,"checked":s.indexOf("delete")>=0,"nodes":[{"nodeName":o.edit_permissions,"nodeId":"edit_permissions","nodeSplit":!0,"splitName":o.FullControl,"splitClass":"csui-split-fullcontrol","readonly":i,"checked":s.indexOf("edit_permissions")>=0}]}]}]}]}];if(e.node){var r;e.node.get("container")?(l[0].nodes[1].nodes.splice(1,0,{"nodeName":o.add_items,"nodeId":"add_items","readonly":i,"checked":s.indexOf("add_items")>=0}),r=t.findWhere(l[0].nodes[1].nodes,{"nodeName":o.reserve}),e.node.get("advancedVersioningEnabled")||r.nodes.splice(t.findIndex(r.nodes,{"nodeName":o.addMajorVersion}),1)):e.node.get("advanced_versioning")||(r=t.findWhere(l[0].nodes[1].nodes,{"nodeName":o.reserve}),r.nodes.splice(t.findIndex(r.nodes,{"nodeName":o.addMajorVersion}),1))}return new n(l)}return{"getPermissionAttributes":s}}),csui.define("hbs!csui/widgets/permissions/impl/edit/permission.attributes/impl/permission.attributes",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-permission-attribute-buttons-container">\r\n    <button class="cs-save-btn binf-btn binf-btn-primary\r\n  binf-btn-default" tabindex="-1">'+e.escapeExpression((s=null!=(s=l(i,"save_button_label")||(null!=t?l(t,"save_button_label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"save_button_label","hash":{},"loc":{"start":{"line":6,"column":34},"end":{"line":6,"column":55}}}):s))+'</button>\r\n    <button class="cs-cancel-btn binf-btn binf-btn-default"\r\n            tabindex="-1">'+e.escapeExpression((s=null!=(s=l(i,"cancel_button_label")||(null!=t?l(t,"cancel_button_label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cancel_button_label","hash":{},"loc":{"start":{"line":8,"column":26},"end":{"line":8,"column":49}}}):s))+"</button>\r\n  </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-permission-attribute-tree"></div>\r\n\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"showButtons"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":0},"end":{"line":10,"column":7}}}))?s:"")}});return i.registerPartial("csui_widgets_permissions_impl_edit_permission.attributes_impl_permission.attributes",n),n}),csui.define("csui/widgets/permissions/edit/permission.attributes/permission.attributes.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/base","i18n","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/tree/tree.view","csui/widgets/permissions/impl/edit/permission.attributes/impl/permission.attributes.data","hbs!csui/widgets/permissions/impl/edit/permission.attributes/impl/permission.attributes","i18n!csui/widgets/permissions/impl/nls/lang"],function(e,t,i,n,o,s,l,r,a,c,u){return i.LayoutView.extend({"className":"csui-permission-attributes","template":c,"regions":{"treeRegion":".csui-permission-attribute-tree"},"events":{"click button.cs-save-btn":"onClickSave","click button.cs-cancel-btn":"onClickCancel","keydown":"_handleKeyEvents"},"behaviors":{"TabableRegionBehavior":{"behaviorClass":s},"PerfectScrolling":{"behaviorClass":l,"contentParent":".csui-permission-attribute-tree","suppressScrollX":!0}},"_handleKeyEvents":function(e){if(e&&9===e.keyCode){var t=this.$tabableElements.index(e.target);t=e.shiftKey&&0===t?this.$tabableElements.length-1:e.shiftKey||t!==this.$tabableElements.length-1?void 0:0,void 0!==t&&(e.preventDefault(),this.$tabableElements.eq(t).trigger("focus"))}},"currentlyFocusedElement":function(e){return this.$tabableElements.prop("tabindex",0),e&&e.shiftKey?this.$tabableElements.eq([this.$tabableElements.length-1]):this.$tabableElements.eq(0)},"onLastTabElement":function(e,t){var i=this.$tabableElements.index(t.target);return e&&0===i||!e&&i===this.$tabableElements.length-1},"templateHelpers":function(){var e=this.options.showButtons;return void 0===e&&(e=!this.options.readonly),{"save_button_label":u.saveButtonLabel,"cancel_button_label":u.cancelButtonLabel,"showButtons":e}},"constructor":function(e){e||(e={}),i.LayoutView.prototype.constructor.call(this,e),this.options=e},"onRender":function(){var e=a.getPermissionAttributes({"readonly":this.options.readonly,"node":this.options.node,"permissions":this.options.permissions||this.model.get("permissions")});this.treeView=new r({"collection":e}),this.treeRegion.show(this.treeView),this.listenTo(this.treeView,"node:selected",this.onPermissionNodeSelected),this.listenTo(this.treeView,"node:unselected",this.onPermissionNodeUnselected),this.$tabableElements=this.$("*[tabindex]"),this.listenTo(this,"adjust:splitbar:separator",this.adjustSplitBarandSeparatorPositions)},"onPermissionNodeSelected":function(e){var t,i=this.treeView;e.attributes.name.value===u.edit_label_permissions?(i.$el.find("input:checkbox").each(function(e,t){t.checked=!0}),t=i.$el.find("input.csui-tree-checkbox")):e.attributes.name.value===u.edit_attributes?(i.$el.find("#node_see")[0].checked=!0,i.$el.find("#node_see_contents")[0].checked=!0,i.$el.find("#node_modify")[0].checked=!0,t=i.$el.find(e).closest(".csui-tree-root").parents(".csui-tree-root").children(".csui-tree-child").find("input.csui-tree-checkbox")):e.attributes.name.value===u.delete?(i.$el.find("#node_see")[0].checked=!0,i.$el.find("#node_see_contents")[0].checked=!0,i.$el.find("#node_delete_versions")[0].checked=!0,t=i.$el.find(e).closest(".csui-tree-root").parents(".csui-tree-root").children(".csui-tree-child").find("input.csui-tree-checkbox")):e.attributes.name.value===u.delete_versions?(i.$el.find("#node_see")[0].checked=!0,i.$el.find("#node_see_contents")[0].checked=!0,i.$el.find("#node_modify")[0].checked=!0,t=i.$el.find(e).closest(".csui-tree-root").parents(".csui-tree-root").children(".csui-tree-child").find("input.csui-tree-checkbox")):e.attributes.name.value===u.reserve?(i.$el.find("#node_see")[0].checked=!0,i.$el.find("#node_see_contents")[0].checked=!0,i.$el.find("#node_modify")[0].checked=!0,t=i.$el.find(e).closest(".csui-tree-root").parents(".csui-tree-root").children(".csui-tree-child").find("input.csui-tree-checkbox")):t=i.$el.find(e).closest(".csui-tree-root").parents(".csui-tree-root").children(".csui-tree-child").find("input.csui-tree-checkbox"),t.prop("checked",!0),t.length&&0!==this.options.node.attributes.type&&(i.$el.find("#node_see_contents")[0].checked=!0)},"onPermissionNodeUnselected":function(e){var t,i=this.treeView;"see_contents"===e.attributes.name.value?t=i.$el.find(e).closest(".csui-tree-root").siblings(".csui-tree-root").find("input.csui-tree-checkbox"):(t=i.$el.find(e).closest(".csui-tree-root").children("ul").find("input.csui-tree-checkbox"),t.length&&"reserve"!==e.attributes.name.value||(i.$el.find("#node_edit_permissions")[0].checked=!1)),t.prop("checked",!1)},"onClickSave":function(){var e=this.getSelectedPermissions();this.trigger("permission:attribute:save:clicked",e)},"onClickCancel":function(){this.trigger("permission:attribute:cancel:clicked")},"onDestroy":function(){},"getSelectedPermissions":function(){for(var e=this.treeView.$el.find("input.csui-tree-checkbox"),t=[],i=0;i<e.length;i++)e[i].checked&&t.push(e[i].name);return t},"adjustSplitBarandSeparatorPositions":function(){for(var t,i,n,s=this.$el.find(".csui-permission-attribute-tree .csui-tree-container"),l=s.find(".csui-tree-split"),r=l.length-1,a=0;a<l.length;r--,a++)i=e(l[r]).width()*a,n=e(l[r]).closest(".csui-tree-child").find(".csui-separator"),l[r]===l[l.length-1]?t=s.outerHeight()+28:(t=Math.round(e(l[r]).closest("li").position().top+e(l[r]).closest(".csui-tree-child").outerHeight()),i+=a),o&&o.settings.rtl?(e(l[r]).css({"height":t,"left":i}),e(l[r]).find("span").css({"width":t,"right":-(t/2-15),"top":t/2-15,"direction":"ltr","text-align":"right","transform":"rotate(-90deg)"}),n.css({"left":i}),e(l[r]).closest(".csui-tree-child").css({"padding-left":i+e(l[r]).width()})):(e(l[r]).css({"height":t,"right":i}),e(l[r]).find("span").css({"width":t,"left":-(t/2-15),"top":t/2-15}),n.css({"right":i}),e(l[r]).closest(".csui-tree-child").css({"padding-right":i+e(l[r]).width()}))}})}),csui.define("hbs!csui/widgets/permissions/impl/edit/apply.permission/impl/apply.permission",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-apply-permission-content">\r\n  <span class="csui-apply-permission-message"></span>\r\n</div>\r\n<div class="csui-apply-permission-subfolder-container">\r\n  <div class="csui-apply-permission-sub-folder">\r\n    <span class="csui-apply-permission-sub-folder-label"></span>\r\n    <div class="required-fields-switch"></div>\r\n  </div>\r\n  <div class="csui-apply-permission-subitems-container">\r\n    <div class="csui-apply-subitems-message"></div>\r\n  </div>\r\n</div>'}});return i.registerPartial("csui_widgets_permissions_impl_edit_apply.permission_impl_apply.permission",n),n}),csui.define("hbs!csui/widgets/permissions/impl/edit/apply.permission/impl/include.subitems",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-selected-checkbox csui-slice-checkbox csui-checkbox-primary\r\n  csui-permisison-subItem">\r\n    <input type="checkbox" class="csui-subtypes-option" name="'+e.escapeExpression((s=null!=(s=l(i,"itemName")||(null!=t?l(t,"itemName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"itemName","hash":{},"loc":{"start":{"line":4,"column":62},"end":{"line":4,"column":74}}}):s))+'" id="'+e.escapeExpression((s=null!=(s=l(i,"value")||(null!=t?l(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":4,"column":80},"end":{"line":4,"column":89}}}):s))+'"\r\n           value="'+e.escapeExpression((s=null!=(s=l(i,"value")||(null!=t?l(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":27}}}):s))+'">\r\n    <label class="csui-subtype-name" for="'+e.escapeExpression((s=null!=(s=l(i,"itemName")||(null!=t?l(t,"itemName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"itemName","hash":{},"loc":{"start":{"line":6,"column":42},"end":{"line":6,"column":54}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=l(i,"itemName")||(null!=t?l(t,"itemName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"itemName","hash":{},"loc":{"start":{"line":6,"column":63},"end":{"line":6,"column":75}}}):s))+'">\r\n      <span class="cs-ellipsis">'+e.escapeExpression((s=null!=(s=l(i,"itemName")||(null!=t?l(t,"itemName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"itemName","hash":{},"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":44}}}):s))+"\r\n        ("+e.escapeExpression((s=null!=(s=l(i,"total")||(null!=t?l(t,"total"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"total","hash":{},"loc":{"start":{"line":8,"column":9},"end":{"line":8,"column":18}}}):s))+" "+e.escapeExpression((s=null!=(s=l(i,"itemTitle")||(null!=t?l(t,"itemTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"itemTitle","hash":{},"loc":{"start":{"line":8,"column":19},"end":{"line":8,"column":32}}}):s))+")\r\n  </span>\r\n    </label>\r\n  </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"subItems"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":12,"column":9}}}))?s:""}});return i.registerPartial("csui_widgets_permissions_impl_edit_apply.permission_impl_include.subitems",n),n});csui.define("csui/widgets/permissions/impl/edit/apply.permission/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/permissions/impl/edit/apply.permission/impl/nls/root/lang",{"applyPermissionHeaderTitle":"Apply permissions","removePermissionHeaderTitle":"Remove {0}","restorePublicAccessHeaderTitle":"Restore public access","applytoSubFolder":"Apply to sub-folders","applytoSubFolderWithCount":"Apply to sub-folders ( {0} )","applyToSubItemsTitle":"Include special items in {0} and sub-folders","applyToItem":"Permissions will be applied to all items in {0}.","applyToThresholdExceeded":"Permissions will be applied to large number of items in {0}.","removeThresholdExceeded":"Permissions will be removed from large number of items in {0}","removeToItem":"Permissions will be removed from all items in {0}","RestorePermissions":"Permissions will be restored to all items in {0}.","includeSubItems":"Including {0}","publicAccess":"Public Access","item":"item","items":"items","204":"Task lists","207":"Channels","215":"Discussions","298":"Collections","3030202":"Communities"}),csui.define("csui/models/permission/permission.precheck",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/permission/permission.precheck.server.adaptor"],function(e,t,i,n,o,s,l){"use strict";var r=n.Model.extend({"constructor":function(e,i){e||(e={}),i||(i={}),n.Model.prototype.constructor.call(this,e,i),this.options=t.pick(i,["connector"]),this.makeConnectable(i)}});return s.mixin(r.prototype),l.mixin(r.prototype),r}),csui.define("csui/utils/permissions/permissions.precheck",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/taskqueue","csui/models/permission/permission.precheck"],function(e,t,i,n,o,s){var l=e.config();return t.defaults(l,{"parallelism":6}),{"includeSubTypesWithFolder":function(){return[0,204,207,215,298,3030202]},"includeSubTypes":function(){return[204,207,215,298,3030202]},"fetchPermissionsPreCheck":function(e){this.options=e,this.connector=e.connector||e.model.connector,this.options.applyTo.subTypes=[];var n=this,r=this.includeSubTypesWithFolder(),a=new o({"parallelism":l.parallelism}),c=n.options.model?n.options.model.get("id"):n.options.node.get("id"),u=t.map(r,function(e){var o=i.Deferred();return a.pending.add({"worker":function(){return new s({"id":c,"subType":e,"include_sub_items":!1},{"connector":n.connector}).fetch().then(t.bind(function(e){void 0!==e.results.data.subtypes_info&&n.options.applyTo.subTypes.push(e.results.data.subtypes_info[0].id),n.options.applyTo.thresholdExceeded=e.results.data.threshold_exceeded,o.resolve(e)})).fail(function(e){o.reject(e)}),o.promise()}}),o.promise(u)});return i.whenAll.apply(i,u)}}}),csui.define("csui/widgets/permissions/impl/edit/apply.permission/apply.permission.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/models/permission/nodepermission.model","hbs!csui/widgets/permissions/impl/edit/apply.permission/impl/apply.permission","hbs!csui/widgets/permissions/impl/edit/apply.permission/impl/include.subitems","i18n!csui/widgets/permissions/impl/edit/apply.permission/impl/nls/lang","csui/utils/taskqueue","csui/utils/url","csui/utils/permissions/permissions.precheck","csui/models/permission/permission.precheck","csui/controls/progressblocker/blocker","csui/lib/handlebars.helpers.xif","css!csui/widgets/permissions/impl/permissions"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m){"use strict";var f=e.config();return t.defaults(f,{"parallelism":5}),o.ItemView.extend({"className":"csui-apply-permission","template":r,"includeSubitemsTemplate":a,"ui":{"applyPermissionMsg":".csui-apply-permission-message","appplyToSubFolderContainer":".csui-apply-permission-sub-folder","appplyToSubFolder":".csui-apply-permission-sub-folder-label","applyToSubItemsContainer":"csui-apply-permission-subitems-container","applyToSubItemsTitle":".csui-apply-subitems-message","subItemsCheckBox":".csui-subtypes-option"},"behaviors":{"TabableRegion":{"behaviorClass":s}},"events":{"keydown":"onKeyInView"},"constructor":function(e){var i=this;i._=t,i.userSelectionCount=0,e||(e={}),e.removePermission=e.removePermission||!1,o.ItemView.prototype.constructor.apply(this,arguments),m.imbue(this)},"initialize":function(){this.focusIndex=0},"onKeyInView":function(e){var t=e.keyCode,n=this.$el.find("*[tabindex]");n.length&&(13===e.keyCode?(i(n[this.focusIndex]).parent().trigger("click"),e.stopPropagation(),e.preventDefault()):38!==t&&40!==t||(38===t?this.focusIndex>0&&--this.focusIndex:this.focusIndex<n.length-1&&++this.focusIndex,i(n[this.focusIndex]).trigger("focus"),e.stopPropagation(),e.preventDefault()))},"currentlyFocusedElement":function(){var e=this.$el.find("*[tabindex]");if(e.length)return i(e[this.focusIndex])},"onRender":function(){var e=this,i="";i=this.options.removePermission?t.str.sformat(c.removeToItem,this.options.model.get("container")):this.options.restorePublicAccess?t.str.sformat(c.RestorePermissions,this.options.model.get("name")):t.str.sformat(c.applyToItem,this.options.model.get("name")),this.ui.applyPermissionMsg.html(i),this.options.model&&this.options.model.get("container")&&(this.options.applyTo||this.options.model.get("applyTo")?(this.options.applyTo=this.options.applyTo?this.options.applyTo:this.options.model.get("applyTo"),this.loadSubFolderDeatils(this),this.loadSpecialItems(this.options.applyTo.subTypes,this.options.applyTo.thresholdExceeded)):(this.options.applyTo={},this.blockActions&&this.blockActions(),h.fetchPermissionsPreCheck(this.options).done(function(){e.model.set({"applyTo":e.options.applyTo},{"silent":!0}),e.unblockActions&&e.unblockActions(),e.loadSubFolderDeatils(e),e.loadSpecialItems(e.options.applyTo.subTypes,e.options.applyTo.thresholdExceeded)})))},"loadSubFolderDeatils":function(e){if((e.options.applyTo&&e.options.applyTo.subTypes.indexOf(0))>=0){e.ui.appplyToSubFolderContainer.removeClass("binf-hidden"),e.$(e.ui.appplyToSubFolder).html(c.applytoSubFolder),e.requiredFieldSwitchModel=new n.Model({"data":!1});var i=t.uniqueId("appplyToSubFolder");e.ui.appplyToSubFolder.attr("id",i),csui.require(["csui/controls/form/fields/booleanfield.view"],function(t){e.requiredFieldSwitchView=new t({"mode":"writeonly","model":e.requiredFieldSwitchModel,"labelId":i}),e.requiredFieldSwitchView.render(),e.requiredFieldSwitchView.on("field:changed",function(t){e.subFolderSelected=t.fieldvalue,t.fieldvalue?e.options.subTypes?e.loadSpecialItems(e.options.subTypes,e.options.thresholdExceeded):e.fetchSubFoldersSubItems(e.options).then(function(t){e.loadSpecialItems(e.options.subTypes,e.options.thresholdExceeded)}):e.options.applyTo&&e.loadSpecialItems(e.options.applyTo.subTypes,e.options.applyTo.thresholdExceeded)}),e.$(".required-fields-switch").append(e.requiredFieldSwitchView.$el)})}else e.ui&&e.ui.applyToSubItemsContainer&&e.ui.appplyToSubFolderContainer.addClass("binf-hidden")},"loadSpecialItems":function(e,i){var n=this,o=e,s=i,l=(n.options.applyTo&&n.options.applyTo.subTypes.indexOf(0),n.model.get("name")),r=this.options.permissionModel&&this.options.permissionModel.get("right_id_expand")&&this.options.permissionModel.get("right_id_expand").name_formatted,a="";if(r=this.options.permissionModel&&"public"===this.options.permissionModel.get("type")?c.publicAccess:r,o.indexOf(204)>=0&&(a=""===a?a+c[204]:a+", "+c[204]),o.indexOf(207)>=0&&(a=""===a?a+c[207]:a+", "+c[207]),o.indexOf(215)>=0&&(a=""===a?a+c[215]:a+", "+c[215]),o.indexOf(298)>=0&&(a=""===a?a+c[298]:a+", "+c[298]),o.indexOf(3030202)>=0&&(a=""===a?a+c[3030202]:a+", "+c[3030202]),this.options.removePermission&&t.str.sformat(c.removeToItem,l),s)this.options.removePermission?n.ui.applyPermissionMsg.html(t.str.sformat(c.removeThresholdExceeded,l)):this.options.restorePublicAccess?n.ui.applyPermissionMsg.html(t.str.sformat(c.RestorePermissions,this.options.model.get("name"))):n.ui.applyPermissionMsg.html(t.str.sformat(c.applyToThresholdExceeded,l));else if(this.options.removePermission)n.ui.applyPermissionMsg.html(t.str.sformat(c.removeToItem,l));else if(this.options.restorePublicAccess){var u=t.str.sformat(c.RestorePermissions,this.options.model.get("name"));n.ui.applyPermissionMsg.html(u)}else!!n.ui.applyPermissionMsg.html&&n.ui.applyPermissionMsg.html(t.str.sformat(c.applyToItem,l));""!==a?(n.ui.applyToSubItemsContainer.removeClass("binf-hidden"),n.ui.applyToSubItemsTitle.html(t.str.sformat(c.includeSubItems,a))):(!!n.ui.applyToSubItemsTitle.html&&n.ui.applyToSubItemsTitle.html(""),!!n.ui.applyToSubItemsContainer.addClass&&n.ui.applyToSubItemsContainer.addClass("binf-hidden"))},"fetchSubFoldersSubItems":function(e){this.options=e,this.options.subTypes=[];var n=this,o=h.includeSubTypes(),s=new u({"parallelism":f.parallelism}),l=n.model.get("id"),r=t.map(o,function(e){var o=i.Deferred();return s.pending.add({"worker":function(){return new p({"id":l,"subType":e,"include_sub_items":!0},{"connector":n.model.connector}).fetch().then(t.bind(function(e){void 0!==e.results.data.subtypes_info&&n.options.subTypes.push(e.results.data.subtypes_info[0].id),n.options.thresholdExceeded=e.results.data.threshold_exceeded,o.resolve(e)})).fail(function(e){o.reject(e)}),o.promise()}}),o.promise(r)});return i.whenAll.apply(i,r)},"getApplyToFlag":function(){return this.subFolderSelected}})}),csui.define("hbs!csui/dialogs/node.picker/impl/node.list/list.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return" csui-inlineform-row "},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="icon icon-checkbox '+e.escapeExpression((s=null!=(s=l(i,"showOnHover")||(null!=t?l(t,"showOnHover"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"showOnHover","hash":{},"loc":{"start":{"line":3,"column":36},"end":{"line":3,"column":51}}}):s))+" "+e.escapeExpression((s=null!=(s=l(i,"selected")||(null!=t?l(t,"selected"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"selected","hash":{},"loc":{"start":{"line":3,"column":52},"end":{"line":3,"column":64}}}):s))+'">\r\n      <input type="checkbox" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"checkboxAria")||(null!=t?l(t,"checkboxAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"checkboxAria","hash":{},"loc":{"start":{"line":4,"column":41},"end":{"line":4,"column":57}}}):s))+'" />\r\n    </span>\r\n'},"5":function(e,t,i,n,o){return'      <div class="csui-inlineform-container">\r\n      </div>\r\n'},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="csui-list-item-title">\r\n        '+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":14,"column":8},"end":{"line":14,"column":16}}}):s))+"\r\n      </span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<span class="csui-item-standard csui-list-group-item '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"inlineForm"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":53},"end":{"line":1,"column":99}}}))?s:"")+'">\r\n'+(null!=(s=r(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"inlineForm"):t,{"name":"unless","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":2},"end":{"line":6,"column":14}}}))?s:"")+'  <span class="csui-browsable">\r\n    <span class="csui-type-icon" aria-hidden="true" title="'+e.escapeExpression((l=null!=(l=r(i,"iconTitle")||(null!=t?r(t,"iconTitle"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"iconTitle","hash":{},"loc":{"start":{"line":8,"column":59},"end":{"line":8,"column":72}}}):l))+'"></span>\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"inlineForm"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.program(7,o,0),"loc":{"start":{"line":9,"column":4},"end":{"line":16,"column":11}}}))?s:"")+'  </span>\r\n  <span class="csui-icon csui-end-icon '+e.escapeExpression((l=null!=(l=r(i,"browsed")||(null!=t?r(t,"browsed"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"browsed","hash":{},"loc":{"start":{"line":18,"column":39},"end":{"line":18,"column":50}}}):l))+'"></span>\r\n</span>'}});return i.registerPartial("csui_dialogs_node.picker_impl_node.list_list.item",n),n}),csui.define("csui/dialogs/node.picker/impl/node.list/list.item.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/listitem/listitemstandard.view","hbs!csui/dialogs/node.picker/impl/node.list/list.item","hbs!csui/dialogs/node.picker/impl/search.list/search.location.item","csui/controls/node-type.icon/node-type.icon.view","csui/behaviors/default.action/default.action.behavior","i18n!csui/dialogs/node.picker/impl/nls/lang"],function(e,t,i,n,o,s,l,r,a){return n.extend({"template":o,"searchLocationTemplate":s,"templateHelpers":function(){return{"showOnHover":this.options.commandType.isSelectable(this.getResolvedModel())?"csui-selectable":"","selected":this.selected?"icon-checkbox-selected":"","browsed":this.browsed?"icon-sidebar-expand24":"","checkboxAria":e.str.sformat(a.checkboxSelectAria,this.model.get("name")),"ariaChecked":this.selected,"inlineForm":void 0!==this.model.inlineFormView}},"tagName":"li","events":function(){var t={"keydown":"onKeyInView","click .csui-selectable":"onSelectClick"};return this.getResolvedModel().get("container")&&!this._isBrowsable()||e.extend(t,{"click .csui-browsable":"onBrowseClick"}),t},"ui":{"link":".csui-list-group-item","inlineFormContainer":".csui-inlineform-container"},"onKeyInView":function(e){if(void 0===this.model.inlineFormView)return 39===e.keyCode||13===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.$el.find(".csui-browsable").trigger("click"),this.$el.trigger("focus"),!1):(32===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.$el.find(".csui-selectable").trigger("click"),this.$el.trigger("focus")),!0)},"constructor":function(e){n.apply(this,arguments),this.selected=!1,this.browsed=!1},"toggleSelect":function(){this.selected=!this.selected,this.render()},"toggleBrowse":function(){this.browsed=!this.browsed,this.render()},"assignedSelect":function(){this.selected=!0,this.render()},"assignedBrowse":function(){this.browsed=!0,this.render()},"unassignSelect":function(){this.isDestroyed||(this.selected=!1,this.render())},"unassignBrowse":function(){this.isDestroyed||(this.browsed=!1,this.render())},"isSelected":function(){return this.selected},"isBrowsed":function(){return this.browsed},"setValidity":function(e){this.valid=e},"setEnable":function(t){var i=this.getResolvedModel(),n=this._isBrowsable(),o=this.options.commandType.isSelectable(i),s=this.model.get("type_name"),l=this.model.get("name");if(t){this.$el.removeClass("csui-disabled");var r=e.str.sformat(a.itemTypeNameAria,s,l);this.valid||(r=e.str.sformat(a.disabledItemTypeNameAria,s,l)),o&&n?r=e.str.sformat(a.selectNBrowseAria,s,l):o?r=e.str.sformat(a.selectAria,s,l):n&&(r=e.str.sformat(a.browseAria,s,l)),this.$el.attr("aria-label",r)}else{this.$el.addClass("csui-disabled");var c=e.str.sformat(a.disabledItemTypeNameAria,s,l);this.$el.attr("aria-label",c)}i.get("container")&&!n?this.$el.addClass("csui-browse-disabled"):this.$el.removeClass("csui-browse-disabled")},"onSelectClick":function(){void 0===this.model.inlineFormView&&this.trigger("select:item")},"onBrowseClick":function(){void 0===this.model.inlineFormView&&this.trigger("browse:item")},"onDomRefresh":function(){this.activeInlineForm&&this.activeInlineForm.triggerMethod("dom:refresh",this.activeInlineForm)},"onRender":function(){
if(void 0!==this.model.inlineFormView){this.$el.addClass("csui-has-inlineform"),this.activeInlineForm=new this.model.inlineFormView({"model":this.model,"originatingView":this,"context":this.context,"cancelTitle":""}),this.listenTo(this.activeInlineForm,"destroy editEnded",function(){this.model.get("id")&&this.onSelectClick(),delete this.activeInlineForm});new i.Region({"el":this.ui.inlineFormContainer}).show(this.activeInlineForm),this.activeInlineForm.$el.find(".csui-btn-cancel").attr("title",a.cancelButtonLabel),this.model.get("csuiInlineFormErrorMessage")&&this.$el.addClass("csui-has-error")}this.$el.addClass("cs-left-item-"+this.model.get("id")),this.$el.removeClass("select"),this.$el.removeClass("browse"),this.$el.attr("role","option"),this.$el.removeAttr("aria-label"),this.setEnable(!0),this.options.searchView||(t(".binf-list-group").removeClass("search-left-item"),t(".csui-np-content .csui-search-item-left-panel").is(":visible")?t(".binf-list-group").addClass("search-left-folder-right"):t(".cs-start-locations .binf-search-location-group").is(":visible")&&t(".binf-list-group").removeClass("search-left-folder-right"),this._nodeLocationIconView&&this._nodeLocationIconView.destroy());var n=this._isBrowsable();this.selected?(this.$el.addClass("select"),this.$el.attr("aria-label",e.str.sformat(a.checkboxSelectAria,this.model.get("type_name"),this.model.get("name")))):this.browsed&&(this.$el.addClass("browse"),this.$el.attr("aria-label",e.str.sformat(a.checkboxBrowsedAria,this.model.get("type_name"),this.model.get("name")))),this.selected&&this.browsed&&this.$el.attr("aria-label",e.str.sformat(a.checkboxAriaSelectNBrowse,this.model.get("type_name"),this.model.get("name")));var o=this.options.commandType.isSelectable(this.getResolvedModel()),s={"el":this.$(".csui-type-icon").get(0),"node":this.model};!n&&!o&&e.extend(s,{"filter":"grayscale","selectable":!1}),this._nodeIconView=new l(s),this._nodeIconView.render()},"onBeforeDestroy":function(){this._nodeIconView&&this._nodeIconView.destroy()},"_openSearchLocation":function(e){e.preventDefault(),e.stopPropagation(),this._parent.triggerMethod("click:location",this.model.parent)},"_isBrowsable":function(){return this.options.commandType.browseAllowed(this.model)},"getResolvedModel":function(){var e=this.model;return this.options.resolveShortcuts&&1===e.get("type")&&void 0!==e.original&&(e=e.original),e}})}),csui.define("hbs!csui/dialogs/node.picker/impl/node.list/node.list",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return"search-left-item"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\r\n<div class="list-content">\r\n  <ul class="binf-list-group '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"searchView"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":29},"end":{"line":3,"column":70}}}))?s:"")+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"nodePickerChoices")||(null!=t?r(t,"nodePickerChoices"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nodePickerChoices","hash":{},"loc":{"start":{"line":3,"column":84},"end":{"line":3,"column":105}}}):l))+'" role="listbox"></ul>\r\n  <div class="binf-search-location-group"></div>\r\n</div>\r\n'}});return i.registerPartial("csui_dialogs_node.picker_impl_node.list_node.list",n),n}),csui.define("hbs!csui/dialogs/node.picker/impl/node.list/empty.node.list",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <p class="csui-no-result-message">\r\n      '+e.escapeExpression((s=null!=(s=l(i,"noSearchResultMessage")||(null!=t?l(t,"noSearchResultMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"noSearchResultMessage","hash":{},"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":31}}}):s))+"\r\n    </p>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-no-result-wrapper">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=(s=null!=t?l(t,"noSearchResultMessage"):t)?l(s,"length"):s,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":2},"end":{"line":6,"column":9}}}))?s:"")+"</div>\r\n\r\n\r\n\r\n"}});return i.registerPartial("csui_dialogs_node.picker_impl_node.list_empty.node.list",n),n}),csui.define("css!csui/dialogs/node.picker/impl/search.list/search.list",[],function(){}),csui.define("csui/dialogs/node.picker/impl/search.list/search.location.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","i18n!csui/dialogs/node.picker/impl/nls/lang","hbs!csui/dialogs/node.picker/impl/search.list/search.location.item","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/behaviors/default.action/default.action.behavior","csui/models/node/node.model","csui/controls/node-type.icon/node-type.icon.view","csui/utils/node.links/node.links","css!csui/dialogs/node.picker/impl/search.list/search.list"],function(e,t,i,n,o,s,l,r,a,c,u){"use strict";var d=n.ItemView.extend({"constructor":function(e){e||(e={}),n.View.prototype.constructor.apply(this,arguments)},"triggers":{"click":"click:location"},"tagName":"a","template":s,"className":"search-location-name","behaviors":{"DefaultAction":{"behaviorClass":r}},"templateHelpers":function(){return{"name":this.model.parent.get("name")?this.model.parent.get("name"):o.noValue}},"onRender":function(e){if(this.model.parent){var t=new a(this.model.get("parent_id_expand"),{"connector":this.model.connector}),i=u.getUrl(t);this.$el.prop("href",i),this._nodeIconViewLocation=new c({"el":this.$(".csui-type-location-icon").get(0),"node":this.model.parent}),this._nodeIconViewLocation.render()}}});return n.CollectionView.extend({"childView":d,"childEvents":{"click:location":"onLocationClick"},"events":{"keydown":"onKeyInView"},"onAddChild":function(e){e.$el.addClass("csui-acc-focusable")},"childViewOptions":function(){return{"notTabableRegion":this.options.notTabableRegion}},"updateChildOptions":function(e){this.childViewOptions.notTabableRegion=!0},"constructor":function(e){e||(e={}),n.CollectionView.prototype.constructor.apply(this,arguments),this.focusIndex=0,this.on("render",function(){var e=this;setTimeout(function(){e.trigger("dom:refresh")},100)})},"onLocationClick":function(e){this.trigger("click:location",e.model.parent)},"behaviors":{"TabableRegion":{"behaviorClass":l}},"isTabable":function(){return this.children.find(function(e){var t=e.$el;return t.is(":visible")&&!t.is(":disabled")})},"currentlyFocusedElement":function(){var e=this.$el.find(".search-location-name.csui-acc-focusable");if(e.length)return t(e[this.focusIndex])},"setFocus":function(){var e=this.$el.find(".search-location-name.csui-acc-focusable");t(e[this.focusIndex]).trigger("focus")},"onKeyInView":function(e){var i=e.keyCode,n=this.$el.find(".search-location-name.csui-acc-focusable");switch(i){case 38:case 40:38===i?this.focusIndex>0&&--this.focusIndex:this.focusIndex<n.length-1&&++this.focusIndex,document.activeElement.classList.contains("search-location-name")&&(n=this.$el.find(".search-location-name.csui-acc-focusable")),this.trigger("changed:focus"),t(n[this.focusIndex]).trigger("focus")}}})}),csui.define("css!csui/dialogs/node.picker/impl/node.list/node.list",[],function(){}),csui.define("csui/dialogs/node.picker/impl/node.list/node.list.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/dialogs/node.picker/impl/node.list/list.item.view","csui/controls/progressblocker/blocker","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/models/node/node.model","hbs!csui/dialogs/node.picker/impl/node.list/node.list","hbs!csui/dialogs/node.picker/impl/node.list/empty.node.list","csui/dialogs/node.picker/impl/search.list/search.location.view","i18n!csui/dialogs/node.picker/impl/nls/lang","css!csui/dialogs/node.picker/impl/node.list/node.list"],function(e,t,i,n,o,s,l,r,a,c,u,d,h){"use strict";var p=i.ItemView.extend({"template":u,"constructor":function(e){i.ItemView.prototype.constructor.apply(this,arguments),this.listenTo(this.model,"change",this.render)}});return i.CompositeView.extend({"className":"cs-list","template":c,"emptyView":p,"emptyViewOptions":function(){return{"model":this.emptyModel}},"templateHelpers":function(){var t=this.collection.node&&this.collection.node.get("name");return{"searchView":this.options.searchView,"nodePickerChoices":t?e.str.sformat(h.nodePickerChoicesIn,t):h.nodePickerChoices}},"childViewContainer":".binf-list-group","childView":o,"childViewOptions":function(){return{"searchView":this.options.searchView,"locationEle":this.ui.location,"resolveShortcuts":this.options.resolveShortcuts,"commandType":this.commandType,"context":this.options.context}},"childEvents":{"before:add:child":"onBeforeAddChild","change:child":"onChangeChild","select:item":"onSelectItem","browse:item":"onBrowseItem"},"ui":{"listParent":".list-content","list":".binf-list-group","location":".binf-search-location-group"},"events":{"keydown":"onKeyInView"},"onBeforeAddChild":function(t){var i=t.model,n=this.commandType.validateTarget(i),o=i.get("id");this.commandType.multiSelect&&this.selectedCountList[o]&&(t.selected=!0),n=n&&e.every(this.commandType.unselectableNodes,function(e){return o!==e}),t.setValidity(n)},"onChangeChild":function(e){if(e!==this.collection){var t=this.children.findByModel(e);t.render(),this.validateAndUpdateChild(t)}},"onAddChild":function(e){var t=e.model.get("id");return!this.commandType.multiSelect&&this.selectItems[t]&&(this.selectItems[t]=e,this.toggleSelectedChild(e)),this.validateAndUpdateChild(e),this.browsedChild&&this.browsedChild.model.get("id")===t&&(this.browsedChild=e,this.toggleBrowsedChild(e)),!0},"toggleNodeSelection":function(e){var t=this.collection.findWhere({"id":e}),i=t&&this.children.findByModel(t);i&&this.toggleSelectedChild(i)},"shouldDisable":function(e,t){return void 0===e||(!!this.commandType.isActionNode(e)||(this.options.resolveShortcuts&&1===e.get("type")&&void 0!==e.original?this.shouldDisable(e.original,e):!this.commandType.isSelectable(e)&&!this._isBrowsable(t||e)))},"validateAndUpdateChild":function(e){this.options.searchView||this.commandType.validateNode(e.getResolvedModel())?e.$el.addClass("csui-acc-focusable"):e.$el.hide();var t=this.shouldDisable(e.model);e.setEnable(!t)},"collectionEvents":{"sync":"syncUpdate","change":"onChangeChild"},"behaviors":{"PerfectScrolling":{"behaviorClass":r,"contentParent":"> .list-content","suppressScrollX":!0},"TabableRegion":{"behaviorClass":l}},"isTabable":function(){return this.children.find(function(e){var t=e.$el;return t.is(":visible")&&!t.is(":disabled")})},"currentlyFocusedElement":function(){var e=this.$el.find(".binf-list-group-item.csui-acc-focusable");if(e.length)return t(e[this.focusIndex])},"setFocus":function(){var e=this.$el.find(".binf-list-group-item.csui-acc-focusable");t(e[this.focusIndex]).trigger("focus")},"onKeyInView":function(e){var i=e.keyCode,n=this.$el.find(".binf-list-group-item.csui-acc-focusable"),o=!1;switch(i){case 9:break;case 38:case 40:38===i?this.focusIndex>0&&--this.focusIndex:this.focusIndex<n.length-1&&++this.focusIndex,o=!0,document.activeElement.classList.contains("search-location-name")&&(n=this.$el.find(".search-location-name.csui-acc-focusable"));break;case 35:this.focusIndex=this.collection.length-1,o=!0;break;case 36:this.focusIndex=0,o=!0}o&&(this.trigger("changed:focus"),t(n[this.focusIndex]).trigger("focus"))},"constructor":function(o){o||(o={}),e.defaults(o,{"pageSize":30}),this.selectedCountList=o.selectedCountList,i.CompositeView.prototype.constructor.apply(this,arguments),this.jQuery=t,s.imbue(this),this.selectItems=e.extend({},o.selection),this.blockScroll=!0,this.notFetching=!0,this.init=!0,this.nextCollectionPage=e.bind(this.addNextCollectionPage,this),this.commandType=o.commandType,this.focusIndex=0,this.selectException=o.selectException,this.emptyModel=new n.Model({"noSearchResultMessage":""}),this.listenTo(this.collection,"sync",function(){0===this.collection.length?(t(".binf-list-group").removeClass("search-left-item"),this.$el.find(".binf-list-group").addClass("csui-no-results")):this.$el.find(".binf-list-group").removeClass("csui-no-results"),this.emptyModel.set("noSearchResultMessage",h.noSearchResultMessage),this.commandType.multiSelect&&(this.$el.find(".list-content .binf-list-group").attr("aria-multiselectable",!0),this.trigger("update:checkbox"))}),this.locationView=new d({"collection":this.collection}),this.listenTo(this.locationView,"click:location",this.onClickLocation),this.listenTo(this.collection,"request",this.setBlocker),this.listenTo(this.collection,"error",this.stopBlocker),this.listenTo(this.collection,"reset",this.setBlocker),this.listenTo(this,"browse:complete",function(){this.notFetching=!0});var l,r;this.listenTo(this,"update:checkbox",function(e){!!e&&this.toggleNodeSelection(e),this.$el.parents(".cs-start-locations").find(".icon-checkbox-selected").length&&(l=!0),this.$el.parents(".cs-start-locations").find(".icon-checkbox-selected").length||l&&this.collection.filters.name?this.$el.parents(".cs-start-locations").find(".cs-list .csui-selectable").addClass("csui-show-checkbox"):(l=!1,this.$el.parents(".cs-start-locations").find(".cs-list .csui-selectable").removeClass("csui-show-checkbox")),this.$el.parents(".csui-slideMidLeft").find(".icon-checkbox-selected").length&&(r=!0),this.$el.parents(".csui-slideMidLeft").find(".icon-checkbox-selected").length||r&&this.collection.filters.name?this.$el.parents(".csui-slideMidLeft").find(".cs-list .csui-selectable").addClass("csui-show-checkbox"):(r=!1,this.$el.parents(".csui-slideMidLeft").find(".cs-list .csui-selectable").removeClass("csui-show-checkbox"))})},"onRender":function(e){var t=new i.Region({"el":this.ui.location});this.options.searchView&&t.show(this.locationView)},"onClickLocation":function(e){this.trigger("click:location",e)},"syncUpdate":function(){this.nextTriggerSetting=this.options.pageSize/2,this.blockScroll=!0,this.notFetching=!0,this.init=!0,this.browsedChild&&!this.collection.findWhere({"id":this.browsedChild.model.get("id")})&&(this.browsedChild=void 0),this.unblockActions(),this.confirmSelectionList(),this.trigger("dom:refresh")},"reset":function(){this.init=!0,this.scrollBar&&this.scrollBar.scrollTop(0)},"stopBlocker":function(){return this.unblockActions(),!0},"setBlocker":function(){return this.blockScroll&&(this.blockScroll=!1,this.blockActions()),!0},"addNextCollectionPage":function(e,t){var i=this.collection.length,n=this.ui.list.height()-this.ui.listParent.height(),o=this.ui.listParent.scrollTop()/n,s=(i-this.nextTriggerSetting)/i;if(i<this.collection.totalCount&&o>=s){var l=this;this.notFetching&&(this.notFetching=!1,this.collection.setSkip(i,!1),this.collection.fetch({"reset":!1,"remove":!1,"merge":!1}).done(function(){if(l.options.resolveShortcuts){var e=l.collection.filter(function(e,t){return t>=i&&l.commandType.shouldResolveShortcut(e)});l.resolveShortcuts(e)}})),o>.98&&this.init&&(this.setBlocker(),this.init=!1)}},"resolveShortcuts":function(e){var i=this,n=[];return i.options.resolveShortcuts?(e.filter(i.commandType.shouldResolveShortcut).forEach(function(e){var t=void 0!==e.original?e.original.get("id"):e.original_id,i=new a({"id":t},{"connector":e.connector});n.push(i.fetch().done(function(){e.original=i,e.trigger("change",e)}))}),t.whenAll.apply(t,n)):t.Deferred().resolve()},"onDomRefresh":function(){this.scrollBar||(this.scrollBar=this.ui.listParent,this.scrollBar.on("scroll",this.nextCollectionPage))},"onSelectItem":function(e){var i=this.commandType.isSelectable(e.getResolvedModel());if(n.trigger("closeToggleAction"),this.selectItem=!0,!e.$el.hasClass("csui-disabled")){this.options.searchView?this.childView=o:(this.options.searchView=!1,e.options.searchView=!1),this.notFetching&&(this.notFetching=!1,i?this._targetSelection(e):this.notFetching=!0);var s=this.$el.find(".binf-list-group-item.csui-acc-focusable");this.focusIndex=t(s).index(e.el),this.trigger("changed:focus"),t(s[this.focusIndex]).trigger("focus"),this.commandType.multiSelect&&this.trigger("update:checkbox")}},"onBrowseItem":function(e){if(n.trigger("closeToggleAction"),!e.$el.hasClass("csui-disabled")){this.options.searchView?(this.childView=o,e.getResolvedModel().get("container")&&(this.jQuery(".csui-node-picker .binf-search-location-group").addClass("binf-hidden"),this.jQuery(".csui-node-picker .csui-search-item-right-panel").addClass("binf-hidden"))):(this.options.searchView=!1,e.options.searchView=!1);var t=this._isBrowsable(e.model);return this.notFetching&&(t?(!this.commandType.multiSelect&&(!e.selected||e.selected&&e.browsed)&&this.onSelectItem(e),this.notFetching=!1,this._browseSelection(e)):(this.notFetching=!0,this.onSelectItem(e)),e.$el.trigger("blur")),this.$el.trigger("setCurrentTabFocus"),!0}},"clearSelect":function(){var t=this;return e.each(this.selectItems,function(e){t.toggleSelectedChild(e)}),this.selectItems={},!0},"toggleSelectedChild":function(e){this.commandType.isSelectable(e.getResolvedModel())&&e.toggleSelect()},"toggleBrowsedChild":function(e){e&&e.toggleBrowse()},"confirmSelectionList":function(){e.each(this.selectItems,function(t,i){e.find(this.collection.models,function(e){return e.get("id").toString()===i})||this.commandType.multiSelect||(delete this.selectItems[i],this.trigger("selection:change",{"node":this._getNodeForSelection(t),"add":!1}))},this)},"_isBrowsable":function(e){return this.commandType.browseAllowed(e)},"_targetSelection":function(e){var t=this._getNodeForSelection(e),i=t.get("id"),n=e.isSelected();n?(this.toggleSelectedChild(e),delete this.selectItems[i]):(this.commandType.multiSelect||this.clearSelect(),this.selectItems[i]=e,this.toggleSelectedChild(e)),this.trigger("selection:change",{"node":t,"add":!n,"targetEl":e.$el}),this.notFetching=!0},"_browseSelection":function(e){var t=e.getResolvedModel(),i=this.commandType.browseAllowed(e.model);this.commandType.isSelectable(t),e.isBrowsed(),e.isSelected();i?this._browseItem(e):this.toggleBrowsedChild(e),this.options.searchView=!1,e.options.searchView=!1,this._browse(e,!1)},"_browse":function(e,t){if(e===this.browsedChild)return void(this.notFetching=!0);this.browsedChild&&this.browsedChild.toggleBrowse(),this.browsedChild=e,this.trigger("browse:select",{"node":e.getResolvedModel(),"add":t})},"_SelectItem":function(e){var t=this._getNodeForSelection(e).get("id");this.commandType.multiSelect||this.clearSelect(),this.selectItems[t]=e,e.assignedSelect()},"_browseItem":function(e){e.assignedBrowse()},"_getNodeForSelection":function(e){var t=e.model;return this.options.resultOriginalNode&&null!=e.model.original&&(t=e.model.original),t}})}),csui.define("hbs!csui/controls/item.title/impl/name/name",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <span class="csui-multilingual-icon-label">\r\n      <button  class="icon csui-multilingual-icon">\r\n        '+(null!=(s=(l(i,"icon-v2")||t&&l(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"small","iconName":"csui_action_language_switcher24"},"loc":{"start":{"line":13,"column":8},"end":{"line":13,"column":91}}}))?s:"")+"\r\n      </button>\r\n    </span>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h2 class="csui-item-name">\r\n<button class="csui-item-name-readonly binf-btn title csui-acc-focusable" title="'+e.escapeExpression((l=null!=(l=r(i,"itemTitleAria")||(null!=t?r(t,"itemTitleAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"itemTitleAria","hash":{},"loc":{"start":{"line":2,"column":81},"end":{"line":2,"column":98}}}):l))+'"\r\n     aria-expanded="false" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"itemTitleAria")||(null!=t?r(t,"itemTitleAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"itemTitleAria","hash":{},"loc":{"start":{"line":3,"column":39},"end":{"line":3,"column":56}}}):l))+'">\r\n  <span class="csui-item-name-block">'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":4,"column":37},"end":{"line":4,"column":45}}}):l))+'</span>\r\n</button>\r\n</h2>\r\n<div class="csui-item-name-edit title-edit-div">\r\n  <input class="title-input" placeholder="'+e.escapeExpression((l=null!=(l=r(i,"placeholderName")||(null!=t?r(t,"placeholderName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"placeholderName","hash":{},"loc":{"start":{"line":8,"column":42},"end":{"line":8,"column":61}}}):l))+'" type="text" value="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":82},"end":{"line":8,"column":90}}}):l))+'"\r\n          title="'+e.escapeExpression((l=null!=(l=r(i,"edit_name_tooltip")||(null!=t?r(t,"edit_name_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"edit_name_tooltip","hash":{},"loc":{"start":{"line":9,"column":17},"end":{"line":9,"column":38}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"mlDataEnabled"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":10,"column":2},"end":{"line":16,"column":9}}}))?s:"")+'  <button type="button" class="csui-undo csui-edit-save inline-edit-icon" disabled title="'+e.escapeExpression((l=null!=(l=r(i,"save_edit_name_tooltip")||(null!=t?r(t,"save_edit_name_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"save_edit_name_tooltip","hash":{},"loc":{"start":{"line":17,"column":90},"end":{"line":17,"column":116}}}):l))+'">\r\n    '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"normal","iconName":"csui_action_confirm32"},"loc":{"start":{"line":18,"column":4},"end":{"line":18,"column":78}}}))?s:"")+'\r\n  </button>\r\n  <button type="button" class="csui-undo csui-edit-cancel inline-edit-icon" title="'+e.escapeExpression((l=null!=(l=r(i,"cancel_edit_name_tooltip")||(null!=t?r(t,"cancel_edit_name_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"cancel_edit_name_tooltip","hash":{},"loc":{"start":{"line":20,"column":83},"end":{"line":20,"column":111}}}):l))+'">\r\n    '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"normal","iconName":"csui_action_cancel32"},"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":77}}}))?s:"")+'\r\n  </button>\r\n  <div class="csui-item-name-error title-error binf-text-danger" title=""></div>\r\n</div>'}});return i.registerPartial("csui_controls_item.title_impl_name_name",n),n}),csui.define("csui/controls/item.title/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/item.title/impl/nls/root/localized.strings",{"editNameTooltip":"Edit Name","cancelEditNameTooltip":"Cancel","placeHolderName":"Enter name","showMore":"Show more","showMoreAria":"Show more actions of {0}","saveEditNameTooltip":"Save","itemTitleAria":"{0}, click to edit"}),csui.define("css!csui/controls/item.title/impl/name/name",[],function(){}),csui.define("csui/controls/item.title/impl/name/name.view",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","hbs!csui/controls/item.title/impl/name/name","i18n!csui/controls/item.title/impl/nls/localized.strings","csui/utils/commandhelper","csui/behaviors/item.name/item.name.behavior","csui/utils/contexts/factories/ancestors","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","css!csui/controls/item.title/impl/name/name"],function(e,t,i,n,o,s,l,r,a,c,u,d,h){var p=o.ItemView.extend({"className":"csui-item-name","template":r,"templateHelpers":function(){return{"name":this.model.get("name"),"edit_name_tooltip":a.editNameTooltip,"cancel_edit_name_tooltip":a.cancelEditNameTooltip,"save_edit_name_tooltip":a.saveEditNameTooltip,"placeholderName":a.placeHolderName,"mlDataEnabled":this.metadataLanguages.enabled,"itemTitleAria":i.str.sformat(a.itemTitleAria,this.model.get("name"))}},"ui":{"name":".csui-item-name-readonly","nameReadonly":".csui-item-name-readonly","nameEdit":".csui-item-name-edit","nameEditDiv":".csui-item-name-edit","nameInput":".csui-item-name-edit>input","inputName":".csui-item-name-edit>input","nameEditCancelIcon":".csui-item-name-edit>.csui-edit-cancel","titleError":".csui-item-name-error","saveButtonInEditMode":".csui-edit-save","globeIcon":".csui-multilingual-icon"},"modelEvents":{"change":"render"},"events":{"keydown":"onKeyInView","input @ui.inputName":"onChangeName","click @ui.globeIcon":"onClickGlobeIcon","keydown @ui.globeIcon":"onKeyDownGlobeIcon"},"behaviors":{"ItemName":{"behaviorClass":u,"autoSave":!1}},"constructor":function(e){var t=this;e||(e={}),o.ItemView.prototype.constructor.call(this,e),this.metadataLanguages=l.getMetadataLanguageInfo(),t.saveMldata="",this.listenTo(this,"ml:value:updated",function(e){t.model.set("name_multilingual",e.value_multilingual,{"silent":!0}),t.targetElement.val(e.value),t.saveMldata=e,t.enableAddButton=!0,t.ui.saveButtonInEditMode.prop("disabled",!t.enableAddButton),t.refreshTabableElements()}),this.listenTo(this.model.actions,"reset update",function(){this._checkAndEnableOrDisableEditing()})},"onClickGlobeIcon":function(){this._showLanguagePopover()},"onKeyDownGlobeIcon":function(e){13!==e.keyCode&&32!==e.keyCode||this.multiLingualForm&&this.keyDownOnGlobeIcon(e)},"onChangeName":function(e){if(this.ui.saveButtonInEditMode.length){this.ui.inputName.val().trim();this.enableAddButton=!1,this.enableAddButton=this.isSaveEnabled(e.target.value),i.isFunction(this.updateMLdata)&&this.updateMLdata(e),this.ui.saveButtonInEditMode.prop("disabled",!this.enableAddButton)}this.refreshTabableElements()},"isSaveEnabled":function(e){return e=e.trim(),!(!e.length||e===this.model.get("name")&&!this.saveMldata)},"refreshTabableElements":function(){this.tabableElements=this.$el.find("input:not([disabled]),  button:not([disabled])").filter(":visible").toArray()},"_moveTab":function(e){this.currentlyFocusedElementIndex=this.tabableElements.indexOf(e.target),e.shiftKey?this.currentlyFocusedElementIndex>0?(this.currentlyFocusedElementIndex-=1,t(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):(this.currentlyFocusedElementIndex=this.tabableElements.length-1,t(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):this.currentlyFocusedElementIndex<this.tabableElements.length-1?(this.currentlyFocusedElementIndex+=1,t(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):(this.currentlyFocusedElementIndex=0,t(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")),e.stopPropagation(),e.preventDefault()},"onRender":function(){var e=this;if(this.editing=!1,this.ui.nameEdit.addClass("binf-hidden"),this._checkAndEnableOrDisableEditing(),this.metadataLanguages.enabled){this.ui.nameInput.addClass("csui-multilingual-input");var t=this.ui.nameInput,i=e.ui.globeIcon;csui.require(["csui/controls/multilingual.text.picker/multilingual.popover.mixin"],function(n){n.mixin(p.prototype);var o={"parentView":e,"targetElement":t,"mlGlobeIcon":i,"validationRequired":!0,"multilingualData":e.model.get("name_multilingual")};e._loadMultiLingualPopover(o)})}},"_checkAndEnableOrDisableEditing":function(){var e=t(this.ui.name);if(e.length&&this.ItemNameBehavior._isEditingEnabled()){var n=i.str.sformat(a.itemTitleAria,this.model.get("name"));e.attr("aria-label",n),e.attr("title",n),e.prop("disabled",!1),e.addClass("csui-acc-focusable")}else e.removeAttr("aria-label"),e.removeAttr("title"),e.prop("disabled",!0),e.removeClass("csui-acc-focusable")},"_validateAndSave":function(){var e=this.model.get("name"),t=this.getInputBoxValue();if(t=t.trim(),e!==t||this.model.changed.name_multilingual){if(!0===this.validate(t)){var n=this;this.setInputBoxValue(t),this.setValue(t),n._blockActions();var o={"name":t};this.model.changed.name_multilingual&&n.saveMldata&&i.extend(o,{"name_multilingual":this.model.changed.name_multilingual});var l=(this.options.context,n.options.model),r=!!o.name;l.save(o,{"wait":!0,"patch":!0,"silent":r}).then(function(){r&&l.set("name",e,{"silent":!0}),l.fetch().done(function(e){n._unblockActions(),n.options.originatingView.unblockActions()}).fail(function(e){n._unblockActions();var t=n._getErrorMessageFromResponse(e);s.error("Saving failed. ",t)&&console.error(t)}),n._toggleEditMode(!1)}).fail(function(t){n._unblockActions(),n.saveMldata&&n.model.set({"name_multilingual":n.prevMultilingualVal});var i=n._getErrorMessageFromResponse(t);n.setValue(e),n._toggleEditMode(!0),n.showInlineError(i)})}}else this.clearInlineError(),this._toggleEditMode(!1)},"_blockActions":function(){var e=this.options.originatingView;e&&e.blockActions&&e.blockActions()},"_unblockActions":function(){var e=this.options.originatingView;e&&e.unblockActions&&e.unblockActions()},"onKeyInView":function(e){return this.ItemNameBehavior.onKeyInView(e)},"_toggleEditMode":function(e){this.ItemNameBehavior._toggleEditMode(e)},"onClickName":function(e){return this.ItemNameBehavior.onClickName(e)},"getValue":function(){return this.ItemNameBehavior.getValue()},"setValue":function(e){return this.ItemNameBehavior.setValue(e)},"getInputBoxValue":function(){return this.ItemNameBehavior.getInputBoxValue()},"setInputBoxValue":function(e){return this.ItemNameBehavior.setInputBoxValue(e)},"validate":function(e){return this.ItemNameBehavior.validate(e)},"setEditModeFocus":function(){return this.ItemNameBehavior.setEditModeFocus()},"showInlineError":function(e){return this.ItemNameBehavior.showInlineError(e)},"clearInlineError":function(){return this.ItemNameBehavior.clearInlineError()},"_getErrorMessageFromResponse":function(e){return this.ItemNameBehavior._getErrorMessageFromResponse(e)}});return i.extend(p.prototype,h),p}),csui.define("hbs!csui/controls/item.title/impl/dropdown.menu/dropdown.menu",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-dropdown">\r\n  <button id="'+e.escapeExpression((s=null!=(s=l(i,"btnId")||(null!=t?l(t,"btnId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"btnId","hash":{},"loc":{"start":{"line":2,"column":14},"end":{"line":2,"column":23}}
}):s))+'" type="button" class="binf-btn binf-dropdown-toggle csui-acc-focusable"\r\n          data-binf-toggle="dropdown" aria-haspopup="true" aria-expanded="false"\r\n          aria-label="'+e.escapeExpression((s=null!=(s=l(i,"showMoreAria")||(null!=t?l(t,"showMoreAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"showMoreAria","hash":{},"loc":{"start":{"line":4,"column":22},"end":{"line":4,"column":38}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=l(i,"showMoreTooltip")||(null!=t?l(t,"showMoreTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"showMoreTooltip","hash":{},"loc":{"start":{"line":4,"column":47},"end":{"line":4,"column":66}}}):s))+'">\r\n    <span class="csui-button-icon icon-expandArrowDown" title="'+e.escapeExpression((s=null!=(s=l(i,"showMoreTooltip")||(null!=t?l(t,"showMoreTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"showMoreTooltip","hash":{},"loc":{"start":{"line":5,"column":63},"end":{"line":5,"column":82}}}):s))+'">\r\n    </span>\r\n  </button>\r\n  <ul class="binf-dropdown-menu" role="menu"></ul>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_item.title_impl_dropdown.menu_dropdown.menu",n),n}),csui.define("css!csui/controls/item.title/impl/dropdown.menu/dropdown.menu",[],function(){}),csui.define("csui/controls/item.title/impl/dropdown.menu/dropdown.menu.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/toolbar/toolitem.view","csui/models/nodes","csui/controls/toolbar/toolitems.filtered.model","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/behaviors/dropdown.menu/dropdown.menu.behavior","csui/controls/toolbar/flyout.toolitem.view","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/utils/commands","csui/utils/commandhelper","csui/utils/log","i18n","hbs!csui/controls/item.title/impl/dropdown.menu/dropdown.menu","i18n!csui/controls/item.title/impl/nls/localized.strings","css!csui/controls/item.title/impl/dropdown.menu/dropdown.menu"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b){"use strict";return m=m(e.id),o.CompositeView.extend({"className":"csui-item-title-dropdown-menu","template":g,"templateHelpers":function(){return{"btnId":i.uniqueId("dropdownMenuButton"),"showMoreTooltip":b.showMore,"showMoreAria":i.str.sformat(b.showMoreAria,this.model.get("name"))}},"getChildView":function(e){return e.get("flyout")?u:s},"childViewContainer":"ul.binf-dropdown-menu","childViewOptions":function(e){return{"command":this.collection.commands&&this.collection.commands.findWhere({"signature":e.get("signature")}),"noMenuRoles":void 0}},"ui":{"dropdownToggle":".binf-dropdown-toggle"},"behaviors":{"TabableRegionBehavior":{"behaviorClass":a},"DropdownMenuBehavior":{"behaviorClass":c},"PerfectScrolling":{"behaviorClass":d,"contentParent":".binf-dropdown-menu","suppressScrollX":!0,"includePadding":!0}},"constructor":function(e){e.collection=new r(e.toolItems,{"status":this._createCommandStatus(e),"commands":this.commands,"mask":e.toolItemsMask}),e.reorderOnSort=!0,o.CompositeView.prototype.constructor.apply(this,arguments),i.defaults(this.options,e.toolItems.options),this.commands=e.commands||h,e.el&&t(e.el).addClass(i.result(this,"className")),this.listenTo(this,"childview:toolitem:action",this._triggerMenuItemAction).listenTo(this.model,"sync",this.render).listenTo(this,"close:menu",this._closeToggle).listenTo(n,"closeToggleAction",this._closeToggle).listenTo(this.model,"change",this.render).listenTo(this.options.collection,"add remove reset",this._setCaretVisibility),this.model.delayedActions&&this.listenTo(this.model.delayedActions,"request",this._hide).listenTo(this.model.delayedActions,"sync error",this._show),this.model.actions&&this.listenTo(this.model.actions,"update",this.render)},"_createCommandStatus":function(e){return{"nodes":new l([e.model]),"container":e.model,"context":e.context}},"_updateCollectionStatus":function(){var e=this._createCommandStatus(this.options);this.options.collection.setStatus(e)},"_setCaretVisibility":function(){0===this.options.collection.length?this.$el.addClass("binf-hidden"):this.$el.removeClass("binf-hidden")},"onBeforeRender":function(){this._updateCollectionStatus(),this._setCaretVisibility()},"onRender":function(){this.model.delayedActions&&this.model.delayedActions.fetching&&this._hide(),this.ui.dropdownToggle.binf_dropdown();var e=this;this.ui.dropdownToggle.on("binf.dropdown.after.show",function(){e.adjustDropdown(),e.trigger("update:scrollbar")}),t(window).on("resize.item.title.dropdown.menu",i.bind(this.adjustDropdown,this)),this.delegateEvents()},"adjustDropdown":function(){var e=this.options.originatingView&&this.options.originatingView.$el||this.options.containerClass&&this.$el.closest(this.options.containerClass),i=f&&f.settings.rtl;if(e){var n=e.height(),o=this.$el.find("ul.binf-dropdown-menu"),s=this.options.offset||52,l=n-s;o.css("max-height",l+"px");var r=t(".csui-toolbar-caption").width()-t(".csui-item-title").width();r=t(".csui-rightToolbar").width()+r/2+24,r<o.width()&&(i?o.css({"left":0,"right":"auto"}):o.css({"left":"auto","right":0}))}},"currentlyFocusedElement":function(){return t(this.ui.dropdownToggle)},"_hide":function(){this.$el.addClass("binf-invisible")},"_show":function(){this.$el.removeClass("binf-invisible")},"_closeToggle":function(){this.isRendered&&(this.ui.dropdownToggle.parent().hasClass("binf-open")&&this.ui.dropdownToggle.binf_dropdown("toggle"),this.ui.dropdownToggle.attr("aria-expanded","false"))},"_triggerMenuItemAction":function(e,t){this.ui.dropdownToggle.binf_dropdown("toggle");var n=t.toolItem,o=n.get("signature"),s=this.commands.get(o),r={"context":this.options.context,"nodes":new l([this.model]),"container":this.model,"originatingView":this.options.originatingView};try{if(!s)throw new Error('Command "'+o+'" not found.');if(i.isFunction(s.execute)){var a=s.execute(r);p.handleExecutionResults(a,{"command":s,"suppressSuccessMessage":r.suppressSuccessMessage,"suppressFailMessage":r.suppressFailMessage})}else this.trigger(o.toLowerCase(),this)}catch(e){m.warn('Executing the command "{0}" failed.\n{1}',s.get("signature"),e.message)&&console.warn(m.last)}}})}),csui.define("csui/controls/item.title/impl/node.state/node.state.view",["module","csui/lib/marionette","csui/utils/base","csui/utils/log","csui/controls/node.state/node.states.view","csui/controls/node.state/node.state.icons"],function(e,t,i,n,o,s){"use strict";return n=n(e.id),t.View.extend({"className":"csui-node-state","constructor":function(e){t.View.prototype.constructor.apply(this,arguments),this.cellRegion=new t.Region({"el":this.el}),this.listenTo(this,"before:render",this._destroyStateIcons).listenTo(this,"before:destroy",this._destroyStateIcons),this.listenTo(this.model,"change",this.render)},"_destroyStateIcons":function(){this.cellRegion.empty()},"render":function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderContent(),this.bindUIElements(),this.triggerMethod("render",this),this},"_getEnabledNodeStateIcons":function(){var e;return e=Object.getPrototypeOf(s),new e.constructor(s.filter(function(e){var t=e.get("iconView");try{return t&&(!t.enabled||t.enabled({"context":this.options.context,"node":this.model}))}catch(e){n.warn("Evaluating an icon view failed.\n{0}",e.message)&&console.warn(n.last)}},this))},"_renderContent":function(){this._renderValue()},"_renderValue":function(){var e=this._getEnabledNodeStateIcons();if(e.length){var t=new o({"context":this.options.context,"node":this.model,"tableView":this.options.tableView,"collection":e});this.cellRegion.show(t)}},"onDomRefresh":function(){i.findFocusables(this.el).addClass("csui-acc-focusable")}})}),csui.define("hbs!csui/controls/item.title/impl/item.title",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-item-title-icon"></div>\r\n<div class="csui-item-title-name"></div>\r\n<div  class="csui-item-title-version"></div>\r\n<div class="csui-item-title-menu"></div>\r\n<div class="csui-item-title-node-state"></div>\r\n'}});return i.registerPartial("csui_controls_item.title_impl_item.title",n),n}),csui.define("css!csui/controls/item.title/impl/item.title",[],function(){}),csui.define("csui/controls/item.title/item.title.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/controls/node-type.icon/node-type.icon.view","csui/controls/item.title/impl/name/name.view","csui/controls/item.title/impl/dropdown.menu/dropdown.menu.view","csui/controls/item.title/impl/node.state/node.state.view","hbs!csui/controls/item.title/impl/item.title","csui/utils/contexts/factories/ancestors","css!csui/controls/item.title/impl/item.title"],function(e,t,i,n,o,s,l,r,a,c,u){"use strict";return n.LayoutView.extend({"className":"csui-item-title","template":c,"ui":{"icon":".csui-item-title-icon","name":".csui-item-title-name","menu":".csui-item-title-menu","nodeState":".csui-item-title-node-state","versionNumberState":".csui-item-title-version"},"regions":{"iconRegion":"@ui.icon","nameRegion":"@ui.name","menuRegion":"@ui.menu","nodeStateRegion":"@ui.nodeState"},"constructor":function(e){e||(e={}),n.LayoutView.prototype.constructor.call(this,e)},"initialize":function(){this.iconView=new s({"node":this.options.model}),this.nameView=new l({"context":this.options.context,"model":this.options.model,"originatingView":this.options.originatingView,"nameSchema":this.options.nameSchema}),this.listenTo(this.nameView,"changed:editmode",function(e){e?this.ui.menu.addClass("binf-hidden"):this.ui.menu.removeClass("binf-hidden")}),this.menuView=new r({"context":this.options.context,"model":this.options.model,"originatingView":this.options.originatingView,"toolItems":this.options.toolItems,"toolItemsMask":this.options.toolItemsMask,"commands":this.options.commands}),this.listenTo(this.menuView,"rename",function(){this.nameView._toggleEditMode.call(this.nameView,!0)}),this.nodeStateView=new a({"context":this.options.context,"model":this.options.model,"tableView":this.options.originatingView})},"getSourceOfCompoundDocuments":function(e){if(!e||0===e.length)return!1;var t=e.length,i=e[t-1];if(i&&136===i.type){var n=e[t-2];return!(!n||138!==n.type&&139!==n.type)&&n}return!1},"getAncestorModels":function(t){var i=e.Deferred();return this.options.originatingView.connector.makeAjaxCall({"url":this.getURL(t)}).then(function(e){return i.resolve(e)}).catch(function(e){return i.reject(e)}),i.promise()},"getURL":function(e){var t="";return e?(t=this.options.originatingView.connector.getConnectionUrl().getApiBase("v2"),t&&(t+="nodes/"+Math.abs(e)+"/releases"),t):t},"getVesionNoNType":function(e,t){if(!e||!t||0===t.length)return!1;for(var i,n=t.length,o=0;o<n;o++)if(t[o].data&&t[o].data.properties&&t[o].data.properties.id&&t[o].data.properties.id===e){i=t[o].data.properties.release+"."+t[o].data.properties.revision;break}return i},"onRender":function(){this.nodeStateRegion.show(this.nodeStateView);var e=this.options.context.getModel(u);136===e.node.attributes.type?this.checkForRelUnderCompDoc(e):(this.iconRegion.show(this.iconView),this.nameRegion.show(this.nameView),this.menuRegion.show(this.menuView))},"checkForRelUnderCompDoc":function(e){this.listenTo(e,"sync",function(){var t=e.toJSON(),i=this.getSourceOfCompoundDocuments(t);if(!i||138!==i.type&&139!==i.type)this.showVersionNo(this);else{this.removeHeaderIcons4CompoundDoc(this);var n=this;this.getAncestorModels(i.parent_id).done(function(e){var t=n.getVesionNoNType(i.id,e.results);n.showVersionNo(n,t,i)}).catch(function(e){console.warn(e),n.showVersionNo(n)})}})},"showVersionNo":function(e,t,i){var n=e.$(e.ui.versionNumberState);if(!(e&&i instanceof Object&&t))return n.html(""),n.removeClass("csui-item-title-version-style"),void e.showHeaderIcons4CompoundDoc(e);n.html(t),n.addClass("csui-item-title-version-style"),e.options.model.attributes.type=i.type,e.options.model.attributes.type_name=i.type_name,e.iconView=new s({"node":e.options.model}),e.showHeaderIcons4CompoundDoc(e)},"showHeaderIcons4CompoundDoc":function(e){e.nameView=new l({"context":e.options.context,"model":e.options.model,"originatingView":e.options.originatingView,"nameSchema":e.options.nameSchema}),e.menuView=new r({"context":e.options.context,"model":e.options.model,"originatingView":e.options.originatingView,"toolItems":e.options.toolItems,"toolItemsMask":e.options.toolItemsMask,"commands":e.options.commands}),e.iconRegion.show(e.iconView),e.nameRegion.show(e.nameView),e.menuRegion.show(e.menuView)},"removeHeaderIcons4CompoundDoc":function(e){e.iconRegion.empty(),e.nameRegion.empty(),e.menuRegion.empty()},"onDomRefresh":function(){t.each(this.regionManager._regions,function(e){e.currentView&&e.currentView.triggerMethod("dom:refresh")})},"onShow":function(){t.each(this.regionManager._regions,function(e){e.currentView&&e.currentView.triggerMethod("show")})},"onAfterShow":function(){t.each(this.regionManager._regions,function(e){e.currentView&&e.currentView.triggerMethod("after:show")})},"closeMenu":function(){this.menuView&&this.menuView.trigger("close:menu")}})}),csui.define("csui/controls/table/inlineforms/inlineform.registry",["csui/lib/underscore"],function(e){function t(){this._addableTypes={}}return e.extend(t.prototype,{"getInlineFormView":function(e){return this._addableTypes[e]},"registerByAddableType":function(t,i){if(!e.isNumber(t))throw new Error("addableType key must be a number");this._addableTypes[t]=i}}),new t}),csui.define("csui/controls/table/inlineforms/folder/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/inlineforms/folder/impl/nls/root/lang",{"CancelButtonLabel":"Cancel","NewNamePlaceholder":"Enter name"}),csui.define("csui/controls/table/inlineforms/inlineform/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/inlineforms/inlineform/impl/nls/root/lang",{"EditCancelTooltip":"Cancel","SaveEditTooltip":"Save","CancelButtonLabel":"Cancel","SaveButtonLabel":"Save","AddButtonLabel":"Add","ExtendedAdd":"Extended add dialog","ExtendedAddAria":"Open extended add dialog","ActionFailedMessage":"Action failed","ShortcutPickerTitle":"Shortcut","ShortcutNamePlaceholder":"Enter a new Shortcut name","NameMustNotBeEmpty":"Shortcut name cannot be empty.","NoShortcutSelected":"No Shortcut target selected."}),csui.define("css!csui/controls/table/inlineforms/inlineform/impl/inlineform",[],function(){}),csui.define("csui/controls/table/inlineforms/inlineform/inlineform.view",["require","csui/lib/jquery","csui/lib/underscore","csui/utils/base","csui/utils/log","i18n!csui/controls/table/inlineforms/inlineform/impl/nls/lang","csui/lib/marionette","csui/models/nodechildren","csui/utils/commands/add.item.metadata","csui/utils/commands/properties","csui/models/nodes","csui/utils/commandhelper","csui/behaviors/keyboard.navigation/tabkey.behavior","csui/lib/jsonpath","csui/models/nodecreateforms","css!csui/controls/table/inlineforms/inlineform/impl/inlineform"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m){return l.ItemView.extend({"className":"csui-inlineform","ui":{"inputFieldName":".csui-inlineform-input-name","cancelButton":".csui-btn-cancel","editCancelButton":".csui-btn-edit-cancel","saveButton":".csui-btn-save","metadataButton":".csui-btn-metadata"},"events":{"keyup @ui.inputFieldName":"keyReleased","input @ui.inputFieldName":"mouseRightCicked","focusin @ui.inputFieldName":"onFocusInWrite","keydown @ui.editCancelButton":"cancelEditKeyPressed","submit form":"saveClicked","click @ui.saveButton":"saveClicked","click @ui.cancelButton":"cancelClicked","click @ui.editCancelButton":"cancelClicked","click @ui.metadataButton":i.debounce(function(e){this.metadataIconClicked(e)},500),"keydown":"onKeyInView"},"behaviors":{"TabKeyBehavior":{"behaviorClass":h}},"_templateHelpers":function(){var e=this.model.get("csuiInlineFormErrorMessage"),t=!1;this.model.get("type");t=!this.model.get("name"),t=t||this.checkCustomFieldsModel();var n={"name":this.model.get("name"),"EditCancelTooltip":s.EditCancelTooltip,"SaveEditTooltip":s.SaveEditTooltip,"CancelButtonLabel":i.isUndefined(this.options.cancelTitle)?s.CancelButtonLabel:this.options.cancelTitle,"disableSaveBtn":t,"SaveButtonLabel":this._isEditMode()?s.SaveButtonLabel:s.AddButtonLabel,"formModeIsEdit":this._isEditMode(),"haveErrorMessage":!!e,"extendedAdd":s.ExtendedAdd,"extendedAddAria":s.ExtendedAddAria};return n.haveErrorMessage&&(n.errorMessage=e,n.errorMsgId=i.uniqueId("err")),n},"constructor":function(e){this.options=e||{},l.ItemView.prototype.constructor.apply(this,arguments)},"onDomRefresh":function(){this.refreshTabableElements();this.model.get("csuiInlineFormErrorMessage");!!this.tabableElements&&!!this.tabableElements[0]&&t(this.tabableElements[0]).trigger("focus"),this.ui.metadataButton.length&&(this.ui.metadataButton.attr("title",this.options.ExtendedAdd||s.ExtendedAdd),this.ui.metadataButton.attr("aria-label",this.options.ExtendedAddAria||s.ExtendedAddAria),void 0===this.options.AriaHasPopUp?this.ui.metadataButton.attr("aria-haspopup",!0):this.ui.metadataButton.attr("aria-haspopup",this.options.AriaHasPopUp))},"cancelClicked":function(e){e.preventDefault(),e.stopPropagation(),this.cancel()},"onKeyInView":function(e){if(9===e.keyCode)return this._moveTab(e),!0},"refreshTabableElements":function(){this.tabableElements=this.$el.find("input:not([disabled]),  button:not([disabled])").filter(":visible").toArray()},"_moveTab":function(e){this.currentlyFocusedElementIndex=this.tabableElements.indexOf(e.target),e.shiftKey?this.currentlyFocusedElementIndex>0?(this.currentlyFocusedElementIndex-=1,t(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):(this.currentlyFocusedElementIndex=this.tabableElements.length-1,t(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):this.currentlyFocusedElementIndex<this.tabableElements.length-1?(this.currentlyFocusedElementIndex+=1,t(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):(this.currentlyFocusedElementIndex=0,t(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")),e.stopPropagation(),e.preventDefault()},"saveClicked":function(e){if(e.preventDefault(),e.stopPropagation(),this.model.get("id"))this._saveIfOk();else{var t=this;t.required=!1,t._getCategoryID().done(function(){t.required?t._openMetadataPage():t._saveIfOk()})}},"_getCategoryID":function(){var e=this,n=e.options.model.collection.node.get("id"),o=this.model.get("type"),s=(e.options.model.connector,t.Deferred()),l=new m(void 0,{"node":this.model,"docParentId":n,"type":o});return this.xhr=this.model.get("xhr")||new XMLHttpRequest,l.fetch().then(i.bind(function(t,n,o){i.any(t.forms,function(t){if(t.hasOwnProperty("role_name")){var n=e._checkForAlpacaRequiredFields(t),o=p(t.schema.properties,"$..[?(@.required===true)]");i.isArray(o)&&o.length>0&&!n&&(e.required=!0)}}),e.model.attributes.forms=t,e.model.attributes.xhr=this.xhr,s.resolve()})).fail(function(e){s.reject()}),s.promise()},"_checkForAlpacaRequiredFields":function(e){var t=!0,n=e.data||e.get("data"),o=e.options||e.get("options"),s=e.schema||e.get("schema"),l=[],r=p(s,"$..[?(@.required===true)]",{"resultType":"PATH"}),a=p(o,"$..[?(@.validate===false)]",{"resultType":"PATH"}),c=[];i.each(a,function(e){var t=e.toString().match(/(\'[\w]*\')/g);t&&c.push(t[t.length-1].replace(/'/g,""))});var u=[];i.each(r,function(e){var t=e.toString().match(/(\'[\w]*\')/g);t&&u.push(t[t.length-1].replace(/'/g,""))});var d=function(e,t){return t.filter(function(t){return-1===e.indexOf(t)})}(c,u);if(d){var h=!1;i.each(d,function(e){if(l=p(n,"$.."+e.toString(),{"resultType":"PATH"}.toArray),i.each(l,function(e){var n=function(e){if(e instanceof Array&&(null!==e||""!==e))i.each(e,function(e){n(e)});else if(null===e||""===e)return void(h=!0)};if(h)return void(t=!1);n(e)}),h)return void(t=!1)})}return t},"_openMetadataPage":function(){var e=this;e.viewToModelData();var t=new u;t.push(e.options.model);var n={"nodes":t,"container":e.options.model.collection.node,"collection":e.options.model.collection},o={"context":e.options.context};o=i.extend(o,{"addableType":e.constructor.CSSubType}),(new a).execute(n,o).then(function(t){if(delete e.model.inlineFormView,e.model.unset("csuiInlineFormErrorMessage",{"silent":!0}),e.trigger("editEnded",this),t.name)return e._removeLastElement(),e.model.fetch()}).fail(function(t){e.cancel()})},"cancelEditKeyPressed":function(e){9===e.keyCode&&(e.shiftKey||(e.preventDefault(),e.stopPropagation(),this._saveIfOk()))},"onFocusInWrite":function(e){var i=t(e.target)[0],n=i.value,o=n?n.length:0;144===this.model.get("type")&&n.lastIndexOf(".")>0&&n.lastIndexOf(".")<n.length-1&&(o=n.lastIndexOf(".")),i.selectionEnd=o},"toggleButton":function(e){if(this.ui.saveButton.length){var t=(this.ui.inputFieldName.val().trim(),!1);t=this.isSaveEnabled(e.target.value),t=t&&this.checkCustomFieldsInputVal(),this.ui.saveButton.prop("disabled",!t)}this.refreshTabableElements()},"checkCustomFieldsModel":function(){return!1},"checkCustomFieldsInputVal":function(){return!0},"mouseRightCicked":function(e){this.toggleButton(e)},"isSaveEnabled":function(e){return e=e.trim(),!(!e.length||e===this.model.get("name"))},"keyReleased":function(e){if(this.leftInputFieldTimer&&clearTimeout(this.leftInputFieldTimer),27===e.keyCode)return this.cancel(),e.preventDefault(),void e.stopPropagation();this.toggleButton(e)},"cancel":function(e){e||(e={}),this.destroy(),void 0===this.model.get("id")?this.model.destroy():(delete this.model.inlineFormView,this.model.set("csuiInlineFormErrorMessage","dummy",{"silent":!0}),this.model.unset("csuiInlineFormErrorMessage",{"silent":e.silent}))},"_isEditMode":function(){return void 0!==this.model.get("id")},"viewToModelData":function(){this._viewToModelData(),this._viewToModelDataExtended()},"_viewToModelData":function(){this.model.set("name",this._getInputName(),{"silent":!0})},"_viewToModelDataExtended":function(){},"_getInputName":function(){var e=this.ui.inputFieldName,t=e.val();return t=t.trim()},"_saveIfOk":function(){},"_save":function(e){var t=this.options.originatingView;t&&t.blockActions&&t.blockActions();var n=void 0===this.model.get("id")?"_saveNewModel":"_updateModel",o=this[n](e);return t&&t.unblockActions&&o.always(i.bind(t.unblockActions,t)),o.done(i.bind(this.destroy,this)),o},"_updateModel":function(e){var t=this.model.inlineFormView;delete this.model.inlineFormView;var n=!1!==this.model.mustRefreshAfterPut?e:void 0,s=!1!==this.model.mustRefreshAfterPut?void 0:e,l=this,r=l.options.originatingView&&l.options.originatingView.thumbnailView;return this.model.save(s,{"data":n,"patch":!0,"wait":!0,"silent":!0,"skipSetValue":r}).then(function(){if(l.model.set(e,{"silent":!0}),!1!==l.model.mustRefreshAfterPut)return l.model.fetch();l.model.set("csuiInlineFormErrorMessage","dummy",{"silent":!0}),l.model.unset("csuiInlineFormErrorMessage")}).fail(function(n){l.model.inlineFormView=t;var s=i.keys(e),r=i.pick(i.clone(l.model.attributes),s);l.model.set(e,{"silent":!0});var a=l._getErrorMessageFromResponse(n);l.model.set("csuiInlineFormErrorMessage",a),o.error("Saving failed. ",a)&&console.error(o.last),l.model.set(r,{"silent":!0})})},"onRender":function(){var e=this,t=e.options.originatingView&&e.options.originatingView.thumbnailView;this.model.get("csuiInlineFormErrorMessage")&&t&&setTimeout(function(){var t=e.$el.find(".csui-inlineform-group-error").height(),i=e.$el.find(".csui-text-danger").height();e._isEditMode()?e.$el.addClass("csui-inlineform-edit"):e.$el.removeClass("csui-inlineform-edit"),t<i?e.$el.find(".binf-text-danger").addClass("add-ellipsis"):e.$el.find(".binf-text-danger").removeClass("add-ellipsis")})},"_saveNewModel":function(e){var t=this.model.inlineFormView;delete this.model.inlineFormView,this.model.set(e,{"silent":!0});var n=i.clone(this.model.attributes);delete n.hasMetadataRow,delete n.csuiInlineFormErrorMessage,delete n.forms,delete n.xhr;var s=this;return this.model.save(void 0,{"data":n,"wait":!0,"silent":!0}).then(function(){if(!1!==s.model.mustRefreshAfterPut)return s._removeLastElement(),s.model.fetch();s.model.set("csuiInlineFormErrorMessage","dummy",{"silent":!0}),s.model.unset("csuiInlineFormErrorMessage")}).fail(function(e){s.model.inlineFormView=t,s.model.trigger("error",s.model);var i=s._getErrorMessageFromResponse(e);s.model.set("csuiInlineFormErrorMessage",i),o.error("Saving failed. ",i)&&console.error(o.last)})},"_getErrorMessageFromResponse":function(e){var i;if(e&&e.responseJSON&&e.responseJSON.error)i=e.responseJSON.error;else{var o=n.MessageHelper.toHtml();n.MessageHelper.reset(),i=t(o).text()}return i},"metadataIconClicked":function(e){e.preventDefault(),e.stopPropagation(),this.viewToModelData();var t=this,n=new u;n.push(this.model);var o={"nodes":n,"container":this.model.collection.node,"collection":this.model.collection},s={"context":this.options.context};if(void 0===this.model.get("id")){s=i.extend(s,{"addableType":this.constructor.CSSubType});(new a).execute(o,s).then(function(e){if(delete t.model.inlineFormView,t.model.unset("csuiInlineFormErrorMessage",{"silent":!0}),t.trigger("editEnded",this),e.name)return t.model.fetch()}).done(function(){t.options.originatingView.$el.find(".csui-nodetable .csui-new-item a.csui-table-cell-name-value").first().trigger("focus")}).fail(function(e){t.cancel(),t.options.originatingView.$el.find(".csui-addToolbar .binf-dropdown-toggle").trigger("focus")})}else{o=i.extend(o,{"originatingView":this.options.originatingView});(new c).execute(o,s).always(function(e){t.cancel()})}},"_removeLastElement":function(){this.model.collection&&this.model.collection.length>0&&this.model.collection.length>this.model.collection.topCount&&(this.model.collection.isPoped=!0,this.model.collection.pop())}},{"CSSubType":void 0})}),csui.define("hbs!csui/controls/table/inlineforms/folder/impl/folder",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return"csui-form-error"},"3":function(e,t,i,n,o){return"csui-inlineform-error"},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":41}}}):s))},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s=null!=(s=l(i,"namePlaceholder")||(null!=t?l(t,"namePlaceholder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"namePlaceholder","hash":{},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":68}}}):s))},"9":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-describedby="'+e.escapeExpression((s=null!=(s=l(i,"errorMsgId")||(null!=t?l(t,"errorMsgId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMsgId","hash":{},"loc":{"start":{"line":7,"column":47},"end":{"line":7,"column":61}}}):s))+'"'},"11":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-inlineform-group csui-inlineform-group-error" role="alert" id="'+e.escapeExpression((s=null!=(s=l(i,"errorMsgId")||(null!=t?l(t,"errorMsgId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMsgId","hash":{},"loc":{"start":{"line":17,"column":82},"end":{"line":17,"column":96}}}):s))+'">\r\n    <div class="binf-text-danger" title="'+e.escapeExpression((s=null!=(s=l(i,"errorMessage")||(null!=t?l(t,"errorMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMessage","hash":{},"loc":{"start":{"line":18,"column":41},"end":{"line":18,"column":57}}}):s))+'"><span\r\n        class="csui-text-danger">'+e.escapeExpression((s=null!=(s=l(i,"errorMessage")||(null!=t?l(t,"errorMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMessage","hash":{},"loc":{"start":{"line":19,"column":33},"end":{"line":19,"column":49}}}):s))+"</span></div>\r\n  </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form class="csui-inlineform-group csui-inlineform-group-folder-name '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"haveErrorMessage"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":69},"end":{"line":2,"column":44}}}))?s:"")+'">\r\n  <input type="text" value="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":28},"end":{"line":3,"column":36}}}):l))+'" placeholder="'+e.escapeExpression((l=null!=(l=r(i,"namePlaceholder")||(null!=t?r(t,"namePlaceholder"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"namePlaceholder","hash":{},"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":70}}}):l))+'"\r\n         class="binf-form-control csui-inlineform-input-name '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"haveErrorMessage"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":61},"end":{"line":5,"column":59}}}))?s:"")+'"\r\n         aria-label="'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"name"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.program(7,o,0),"loc":{"start":{"line":6,"column":21},"end":{"line":6,"column":75}}}))?s:"")+'"\r\n    '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"haveErrorMessage"):t,{"name":"if","hash":{},"fn":e.program(9,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":4},"end":{"line":7,"column":69}}}))?s:"")+'>\r\n    <button type="submit" class="csui-btn-save" disabled title="'+e.escapeExpression((l=null!=(l=r(i,"SaveEditTooltip")||(null!=t?r(t,"SaveEditTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"SaveEditTooltip","hash":{},"loc":{"start":{"line":8,"column":64},"end":{"line":8,"column":83}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"SaveEditTooltip")||(null!=t?r(t,"SaveEditTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"SaveEditTooltip","hash":{},"loc":{"start":{"line":8,"column":97},"end":{"line":8,"column":116}}}):l))+'">\r\n      '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"normal","iconName":"csui_action_confirm32"},"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":80}}}))?s:"")+'\r\n    </button>\r\n    <button type="reset" class="csui-btn-cancel csui-inline" title="'+e.escapeExpression((l=null!=(l=r(i,"EditCancelTooltip")||(null!=t?r(t,"EditCancelTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"EditCancelTooltip","hash":{},"loc":{"start":{"line":11,"column":68},"end":{"line":11,"column":89}}}):l))+'"\r\n            aria-label="'+e.escapeExpression((l=null!=(l=r(i,"EditCancelTooltip")||(null!=t?r(t,"EditCancelTooltip"):t))?l:e.hooks.helperMissing,
"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"EditCancelTooltip","hash":{},"loc":{"start":{"line":12,"column":24},"end":{"line":12,"column":45}}}):l))+'">\r\n      '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"normal","iconName":"csui_action_cancel32"},"loc":{"start":{"line":13,"column":6},"end":{"line":13,"column":79}}}))?s:"")+"\r\n    </button>\r\n</form>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"haveErrorMessage"):t,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"loc":{"start":{"line":16,"column":0},"end":{"line":21,"column":7}}}))?s:"")}});return i.registerPartial("csui_controls_table_inlineforms_folder_impl_folder",n),n}),csui.define("css!csui/controls/table/inlineforms/folder/impl/folder",[],function(){}),csui.define("csui/controls/table/inlineforms/generic/generic.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","i18n!csui/controls/table/inlineforms/folder/impl/nls/lang","csui/controls/table/inlineforms/inlineform.registry","csui/controls/table/inlineforms/inlineform/inlineform.view","hbs!csui/controls/table/inlineforms/folder/impl/folder","css!csui/controls/table/inlineforms/folder/impl/folder"],function(e,t,i,n,o,s,l){var r=s.extend({"className":function(){var e="csui-inlineform-generic";return s.prototype.className&&(e+=" "+t.result(s.prototype,"className")),e},"template":l,"templateHelpers":function(){var e=this._templateHelpers();return t.extend(e,{"namePlaceholder":n.NewNamePlaceholder})},"ui":{},"events":{},"constructor":function(e){this.options=e||{},this.ui=t.extend({},this.ui,s.prototype.ui),this.events=t.extend({},this.events,s.prototype.events),i.ItemView.prototype.constructor.apply(this,arguments)},"_saveIfOk":function(){var e=this._getInputName(),t=this.model.get("name");e.length>0&&e===t?this.cancel():e.length>0&&this._save({"name":e})}},{"CSSubType":NaN});return o.registerByAddableType(r.CSSubType,r),r}),csui.define("hbs!csui/controls/table/inlineforms/base/views/textfield/impl/textfield.view",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return"csui-inlineform-error"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":4,"column":31},"end":{"line":4,"column":39}}}):s))},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s=null!=(s=l(i,"namePlaceholder")||(null!=t?l(t,"namePlaceholder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"namePlaceholder","hash":{},"loc":{"start":{"line":4,"column":47},"end":{"line":4,"column":66}}}):s))},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-errormessage="'+e.escapeExpression((s=null!=(s=l(i,"errorMsgId")||(null!=t?l(t,"errorMsgId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMsgId","hash":{},"loc":{"start":{"line":5,"column":53},"end":{"line":5,"column":67}}}):s))+'" aria-invalid="true" '},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<input type="text" value="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":1,"column":26},"end":{"line":1,"column":34}}}):l))+'" placeholder="'+e.escapeExpression((l=null!=(l=r(i,"namePlaceholder")||(null!=t?r(t,"namePlaceholder"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"namePlaceholder","hash":{},"loc":{"start":{"line":1,"column":49},"end":{"line":1,"column":68}}}):l))+'"\r\n       class="binf-form-control csui-inlineform-type-'+e.escapeExpression((l=null!=(l=r(i,"prefix")||(null!=t?r(t,"prefix"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"prefix","hash":{},"loc":{"start":{"line":2,"column":53},"end":{"line":2,"column":63}}}):l))+" "+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"haveErrorMessage"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":64},"end":{"line":3,"column":57}}}))?s:"")+'"\r\n       aria-label="'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"name"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.program(5,o,0),"loc":{"start":{"line":4,"column":19},"end":{"line":4,"column":73}}}))?s:"")+'"\r\n         '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"haveErrorMessage"):t,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":9},"end":{"line":5,"column":96}}}))?s:"")+"/>"}});return i.registerPartial("csui_controls_table_inlineforms_base_views_textfield_impl_textfield.view",n),n}),csui.define("css!csui/controls/table/inlineforms/base/views/textfield/impl/textfield",[],function(){}),csui.define("csui/controls/table/inlineforms/base/views/textfield/textfield.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette3","hbs!csui/controls/table/inlineforms/base/views/textfield/impl/textfield.view","css!csui/controls/table/inlineforms/base/views/textfield/impl/textfield"],function(e,t,i,n){return i.View.extend({"className":function(){return"csui-inlineform-text-field csui-inlineform-type-"+this.fieldName},"ui":{"inputFieldName":"input"},"events":{"input @ui.inputFieldName":"toggleSaveButton","focusin @ui.inputFieldName":"onFocusInWrite"},"template":n,"templateContext":function(){var e=this.parentView.model.get("csuiInlineFormErrorMessage"),i={"haveErrorMessage":!!e,"name":this.parentView.model.get(this.fieldName),"namePlaceholder":this.model.get("namePlaceholder"),"prefix":this.fieldName};return i.haveErrorMessage&&(i.errorMessage=e,i.errorMsgId=t.uniqueId("err")),i},"constructor":function(e){this.parentView=e.parentView,this.fieldName=e.model.get("fieldName"),i.View.prototype.constructor.apply(this,arguments)},"toggleSaveButton":function(e){this.updateFieldModel(e.target.value),this.parentView.trigger("enable:save:btn"),this.onInputValueChanged(e)},"onRender":function(){this.parentView.model.get("csuiInlineFormErrorMessage")&&this.$el.find("input").attr("aria-errormessage",this.options.node.get("errorid"))},"onInputValueChanged":function(e){},"updateFieldModel":function(e){var t=this.parentView.model.get(this.fieldName),i=!1;if(e=e.trim(),e.length&&e!==t)i=!0;else{i=!(!(void 0===this.parentView.model.get("id"))||!t)&&(!this.model.get("required")||!!e)}return this.model.set({"validField":i,"value":e}),i},"onFocusInWrite":function(t){var i=e(t.target)[0],n=i.value,o=n?n.length:0;144===this.model.get("type")&&n.lastIndexOf(".")>0&&n.lastIndexOf(".")<n.length-1&&(o=n.lastIndexOf(".")),i.selectionEnd=o},"isReadyToSave":function(){var e=this._getInputName(),t=!1;if(e.length>0){t=!this.model.get("regex")||e.match(this.model.get("regex"))}return t&&this.model.set("value",e),t},"_getInputName":function(){if(this.model.get("regex"))return this._getInputUrl();var e=this.ui.inputFieldName,t=e.val();return t=t.trim()},"_getInputUrl":function(){var t=this.ui.inputFieldName,i=e(t).val().trim();return i.length&&!i.match(this.model.get("regex"))&&(i=i.match(/^[a-zA-Z]+:\/\//)?i:"http://"+i,this.model.set("value",i)),i}})}),csui.define("hbs!csui/controls/table/inlineforms/base/views/textfield/impl/multilingual.textfield",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return"csui-inlineform-error"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":4,"column":31},"end":{"line":4,"column":39}}}):s))},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s=null!=(s=l(i,"namePlaceholder")||(null!=t?l(t,"namePlaceholder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"namePlaceholder","hash":{},"loc":{"start":{"line":4,"column":47},"end":{"line":4,"column":66}}}):s))},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-errormessage="'+e.escapeExpression((s=null!=(s=l(i,"errorMsgId")||(null!=t?l(t,"errorMsgId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMsgId","hash":{},"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":64}}}):s))+'" aria-invalid="true" '},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<input type="text" value="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":1,"column":26},"end":{"line":1,"column":34}}}):l))+'" placeholder="'+e.escapeExpression((l=null!=(l=r(i,"namePlaceholder")||(null!=t?r(t,"namePlaceholder"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"namePlaceholder","hash":{},"loc":{"start":{"line":1,"column":49},"end":{"line":1,"column":68}}}):l))+'"\r\n       class="binf-form-control csui-inlineform-type-'+e.escapeExpression((l=null!=(l=r(i,"prefix")||(null!=t?r(t,"prefix"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"prefix","hash":{},"loc":{"start":{"line":2,"column":53},"end":{"line":2,"column":63}}}):l))+" "+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"haveErrorMessage"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":64},"end":{"line":3,"column":57}}}))?s:"")+'"\r\n       aria-label="'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"name"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.program(5,o,0),"loc":{"start":{"line":4,"column":19},"end":{"line":4,"column":73}}}))?s:"")+'"\r\n      '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"haveErrorMessage"):t,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":93}}}))?s:"")+'/>\r\n<span class="csui-multilingual-icon-label">\r\n<button type="button" class="icon csui-multilingual-icon">\r\n  '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"small","iconName":"csui_action_language_switcher24"},"loc":{"start":{"line":8,"column":2},"end":{"line":8,"column":85}}}))?s:"")+"\r\n</button>\r\n</span>\r\n"}});return i.registerPartial("csui_controls_table_inlineforms_base_views_textfield_impl_multilingual.textfield",n),n}),csui.define("css!csui/controls/table/inlineforms/base/views/textfield/impl/multilingual.textfield",[],function(){}),csui.define("csui/controls/table/inlineforms/base/views/textfield/multilingual.textfield.view",["csui/lib/underscore","csui/utils/base","csui/controls/multilingual.text.picker/multilingual.popover.mixin","csui/controls/table/inlineforms/base/views/textfield/textfield.view","hbs!csui/controls/table/inlineforms/base/views/textfield/impl/multilingual.textfield","css!csui/controls/table/inlineforms/base/views/textfield/impl/multilingual.textfield"],function(e,t,i,n,o){var s=n.extend({"template":o,"constructor":function(e){this.listenTo(this,"ml:value:updated",function(e){this.onMultiLingualPopoverClose(e)}),e=e||{},e.connector=e.parentView&&e.parentView.model&&e.parentView.model.connector,n.prototype.constructor.apply(this,arguments)},"ui":function(){return e.extend({},n.prototype.ui,{"mlGlobeIcon":".csui-multilingual-icon"})},"events":function(){return e.extend({},n.prototype.events,{"click @ui.mlGlobeIcon":"_showLanguagePopover","keydown @ui.mlGlobeIcon":"onKeyDownGlobeIcon"})},"onKeyDownGlobeIcon":function(e){13!==e.keyCode&&32!==e.keyCode||this.multiLingualForm&&this.keyDownOnGlobeIcon(e)},"loadAdditionalInfo":function(){var e=this,i=this.parentView.model,n=i.get("name_multilingual"),o=this.model,s=i.get("id");this.$el.addClass("csui-multilingual-input"),i.get("csuiInlineFormErrorMessage")&&this.$el.find("input").attr("aria-errormessage",this.options.node.get("errorid"));var l=this.parentView.options.originatingView;l&&l.blockActions&&l.blockActions(),this.targetElement=this.ui.inputFieldName,this.metadataLanguages=this.options.metadataLanguages||t.getMetadataLanguageInfo();var r={"parentView":this,"targetElement":this.targetElement,"validationRequired":!0,"mlGlobeIcon":this.ui.mlGlobeIcon};!!n&&o.set("name_multilingual",n,{"silent":!0}),!!s&&o.set("id",s,{"silent":!0}),this.requiredInfoAvilable("name_multilingual").then(function(){r.multilingualData=e.model.get("name_multilingual"),e._loadMultiLingualPopover(r),!n&&i.set("name_multilingual",o.get("name_multilingual"),{"silent":!0}),l&&l.unblockActions&&l.unblockActions(),e._openMLFlyoutInEditMode()})},"onInputValueChanged":function(t){e.isFunction(this.updateMLdata)&&this.updateMLdata(t)},"onRender":function(){this.loadAdditionalInfo()},"onBeforeDestroy":function(){this.multiLingualForm&&this.multiLingualForm.trigger("ml:hide:popover")},"onMultiLingualPopoverClose":function(e){this.prevMultilingualVal=this.model.get("name_multilingual"),this.model.set("name_multilingual",e.value_multilingual,{"silent":!0}),this.targetElement.val(e.value),this.saveMldata=e,this.model.set({"validField":!0,"value":e.value}),this.options.parentView.trigger("enable:save:btn")}});return i.mixin(s.prototype),s}),csui.define("hbs!csui/controls/table/inlineforms/base/views/selectfield/impl/selectfield.view",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <option value="'+e.escapeExpression((s=null!=(s=l(i,"value")||(null!=t?l(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":4,"column":19},"end":{"line":4,"column":28}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"displayName")||(null!=t?l(t,"displayName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"displayName","hash":{},"loc":{"start":{"line":4,"column":30},"end":{"line":4,"column":45}}}):s))+"</option>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<select type="text" value="" class="binf-form-control csui-inlineform-input-'+e.escapeExpression((l=null!=(l=r(i,"prefix")||(null!=t?r(t,"prefix"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"prefix","hash":{},"loc":{"start":{"line":1,"column":76},"end":{"line":1,"column":86}}}):l))+'">\r\n<option value="">'+e.escapeExpression((l=null!=(l=r(i,"namePlaceholder")||(null!=t?r(t,"namePlaceholder"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"namePlaceholder","hash":{},"loc":{"start":{"line":2,"column":17},"end":{"line":2,"column":36}}}):l))+"</option>\r\n"+(null!=(s=r(i,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"selectEnum"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":2},"end":{"line":5,"column":11}}}))?s:"")+"</select>"}});return i.registerPartial("csui_controls_table_inlineforms_base_views_selectfield_impl_selectfield.view",n),n}),csui.define("css!csui/controls/table/inlineforms/base/views/selectfield/impl/selectfield",[],function(){}),csui.define("csui/controls/table/inlineforms/base/views/selectfield/selectfield.view",["csui/lib/underscore","csui/lib/marionette3","hbs!csui/controls/table/inlineforms/base/views/selectfield/impl/selectfield.view","css!csui/controls/table/inlineforms/base/views/selectfield/impl/selectfield"],function(e,t,i){return t.View.extend({"className":function(){return"csui-inlineform-type-"+this.fieldName},"ui":{"inputFieldName":"select"},"events":{"change @ui.inputFieldName":"toggleSaveButton"},"templateContext":function(){var t=this.parentView.model.get("csuiInlineFormErrorMessage"),i={"haveErrorMessage":!!t,"name":this.parentView.model.get(this.fieldName),"namePlaceholder":this.model.get("namePlaceholder"),"prefix":this.fieldName,"selectEnum":this.selectEnum};return i.haveErrorMessage&&(i.errorMessage=t,i.errorMsgId=e.uniqueId("err")),i},"template":i,"constructor":function(e){this.parentView=e.parentView,this.fieldName=e.model.get("fieldName"),this.selectEnum=[],t.View.prototype.constructor.apply(this,arguments),this.fetchDropDownValues()},"toggleSaveButton":function(e){this.updateFieldModel(e.target.value),this.parentView.trigger("enable:save:btn")},"updateFieldModel":function(e){return e=e.trim(),e.length&&e!==this.parentView.model.get(this.fieldName)?(this.model.set({"validField":!0,"value":e}),!0):(this.model.set({"validField":!1,"value":e}),!1)},"isReadyToSave":function(){return this._getInputName().length>0},"_getInputName":function(){var e=this.ui.inputFieldName,t=e.val();return t=t&&t.trim()},"fetchDropDownValues":function(){var t={"context":this.options.context,"node":this.parentView.model},i=this.model.get("getData");e.isFunction(i)&&i(t).always(e.bind(function(e){this.selectEnum=e,this.render(),this.bindUIElements()},this))}})}),csui.define("csui/controls/table/inlineforms/base/base.inline.form.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette3","csui/utils/base","csui/utils/log","csui/lib/jsonpath","csui/models/nodes","csui/models/nodecreateforms","csui/utils/commands/add.item.metadata","csui/controls/table/inlineforms/base/views/textfield/textfield.view","csui/controls/table/inlineforms/base/views/textfield/multilingual.textfield.view","csui/controls/table/inlineforms/base/views/selectfield/selectfield.view"],function(e,t,i,n,o,s,l,r,a,c,u,d,h){return n.CollectionView.extend({"className":"csui-inlineform-field-container","childView":function(e){var t;switch(e.get("type")||""){case"text":t=u;break;case"multilingualtextfield":t=d;break;case"select":t=h;break;default:t=u}return t},"childViewOptions":function(){return{"context":this.options.context,"formType":this.options.model.get("type"),"regExp":this.options.model.get("regex"),"node":this.options.node,"options":this.options,"parentView":this}},"constructor":function(e){e=e||{},e.collection=new i.Collection(this.getFieldModels(e)),n.CollectionView.prototype.constructor.apply(this,arguments)},"onRender":function(){this.listenTo(this,"save:form",this._saveForm)},"checkAllformFields":function(){return this.model.get("id")?-1!==this.collection.findIndex({"validField":!0}):-1===this.collection.findIndex({"validField":!1})},"_saveIfOk":function(){var e=!0,t={},i=this.options.originatingView&&this.options.originatingView.thumbnailView,n=i&&this.$el.closest(".csui-perfect-scrolling");this.children.each(function(i){var n=i.model,o=n.get("fieldName")+"_multilingual";e=e&&i.isReadyToSave(),t[n.get("fieldName")]=n.get("value"),"multilingualtextfield"===n.get("type")&&n.attributes[o]&&(t[o]=n.get(o))}),e&&this._save(t).fail(function(e){this.model.set(this.model.changed,{"silent":!0}),n&&n.perfectScrollbar("update")}.bind(this))},"_getErrorMessageFromResponse":function(t){var i;if(t&&t.responseJSON&&t.responseJSON.error)i=t.responseJSON.error;else{var n=o.MessageHelper.toHtml();o.MessageHelper.reset(),i=e(n).text()}return i},"_saveForm":function(){if(this.model.get("id"))this._saveIfOk();else{var e=this;e.required=!1,e._getCategoryID().done(function(){e.required?e._openMetadataPage():e._saveIfOk()})}},"viewToModelData":function(){this.children.each(t.bind(function(e){this.model.set(e.model.get("fieldName"),e.model.get("value"),{"silent":!0})},this))},"_removeLastElement":function(){this.model.collection&&this.model.collection.length>0&&this.model.collection.length>this.model.collection.topCount&&(this.model.collection.isPoped=!0,this.model.collection.pop())},"_getCategoryID":function(){var i=this,n=i.options.model.collection.node.get("id"),o=this.model.get("type"),s=(i.options.model.connector,e.Deferred()),r=new a(void 0,{"node":this.model,"docParentId":n,"type":o});return this.xhr=this.model.get("xhr")||new XMLHttpRequest,r.fetch().then(t.bind(function(e,n,o){t.any(e.forms,function(e){if(e.hasOwnProperty("role_name")){var n=i._checkForAlpacaRequiredFields(e),o=l(e.schema.properties,"$..[?(@.required===true)]");t.isArray(o)&&o.length>0&&!n&&(i.required=!0)}}),i.model.attributes.forms=e,i.model.attributes.xhr=this.xhr,s.resolve()})).fail(function(e){s.reject()}),s.promise()},"_save":function(e){var i=this.options.originatingView;i&&i.blockActions&&i.blockActions();var n=void 0===this.model.get("id")?"_saveNewModel":"_updateModel",o=this[n](e);return i&&i.unblockActions&&o.always(t.bind(i.unblockActions,i)),o.done(t.bind(function(){this.trigger("end:of:edit")},this)),o},"_checkForAlpacaRequiredFields":function(e){var i=!0,n=e.data||e.get("data"),o=e.options||e.get("options"),s=e.schema||e.get("schema"),r=[],a=l(s,"$..[?(@.required===true)]",{"resultType":"PATH"}),c=l(o,"$..[?(@.validate===false)]",{"resultType":"PATH"}),u=[];t.each(c,function(e){var t=e.toString().match(/(\'[\w]*\')/g);t&&u.push(t[t.length-1].replace(/'/g,""))});var d=[];t.each(a,function(e){var t=e.toString().match(/(\'[\w]*\')/g);t&&d.push(t[t.length-1].replace(/'/g,""))});var h=function(e,t){return t.filter(function(t){return-1===e.indexOf(t)})}(u,d);if(h){var p=!1;t.each(h,function(e){if(r=l(n,"$.."+e.toString(),{"resultType":"PATH"}.toArray),t.each(r,function(e){var n=function(e){if(e instanceof Array&&(null!==e||""!==e))t.each(e,function(e){n(e)});else if(null===e||""===e)return void(p=!0)};if(p)return void(i=!1);n(e)}),p)return void(i=!1)})}return i},"_saveNewModel":function(e){var i=this.model.inlineFormView;delete this.model.inlineFormView,this.model.set(e,{"silent":!0});var n=t.clone(this.model.attributes);delete n.hasMetadataRow,delete n.csuiInlineFormErrorMessage,delete n.forms,delete n.xhr;var o=this;return this.model.save(void 0,{"data":n,"wait":!0,"silent":!0}).then(function(){if(!1!==o.model.mustRefreshAfterPut)return o._removeLastElement(),o.model.fetch();o.model.set("csuiInlineFormErrorMessage","dummy",{"silent":!0}),o.model.unset("csuiInlineFormErrorMessage")}).fail(function(e){o.model.inlineFormView=i,o.model.trigger("error",o.model);var t=o._getErrorMessageFromResponse(e);o.model.set("csuiInlineFormErrorMessage",t),s.error("Saving failed. ",t)&&console.error(s.last)})},"_updateModel":function(e){var i=this.model.inlineFormView;delete this.model.inlineFormView;var n=!1!==this.model.mustRefreshAfterPut?e:void 0,o=!1!==this.model.mustRefreshAfterPut?void 0:e,l=this,r=l.options.originatingView&&l.options.originatingView.thumbnailView;return this.model.save(o,{"data":n,"patch":!0,"wait":!0,"silent":!0,"skipSetValue":r}).then(function(){if(l.model.set(e,{"silent":!0}),!1!==l.model.mustRefreshAfterPut)return l.model.fetch();l.model.set("csuiInlineFormErrorMessage","dummy",{"silent":!0}),l.model.unset("csuiInlineFormErrorMessage")}).fail(function(n){l.model.inlineFormView=i;var o=t.keys(e),r=t.pick(t.clone(l.model.attributes),o);l.model.set(e,{"silent":!0});var a=l._getErrorMessageFromResponse(n);l.model.set("csuiInlineFormErrorMessage",a),s.error("Saving failed. ",a)&&console.error(s.last),l.model.set(r,{"silent":!0})})},"_openMetadataPage":function(){var e=this;e.viewToModelData();var i=new r;i.push(e.options.model);var n={"nodes":i,"container":e.options.model.collection.node,"collection":e.options.model.collection},o={"context":e.options.context};e.children.each(function(t){var i=t.model,n=i.get("fieldName")+"_multilingual",o=i.attributes[n];"multilingualtextfield"===i.get("type")&&o&&e.model.set(n,o,{"silent":!0})}),o=t.extend(o,{"addableType":e.model.get("type")}),(new c).execute(n,o).then(function(t){if(delete e.model.inlineFormView,e.model.unset("csuiInlineFormErrorMessage",{"silent":!0}),e.trigger("end:of:edit",this),t.name)return e._removeLastElement(),e.model.fetch()}).fail(function(t){e.trigger("cancel:edit:form")})},"getFieldModels":function(e){var t=e.node,i=e.showOnlyDefaultField,n=t.get("form").fields,s=[],l=o.getMetadataLanguageInfo(),r=void 0===e.model.get("id");for(var a in n)if(void 0!==n[a]){var c=n[a];i&&"text"!==c.type&&i&&"multilingualtextfield"!==c.type||(c.fieldName=a,c.type="text"===c.type&&c.multilingual&&l.enabled?"multilingualtextfield":c.type,c.validField=!c.required||!(!r||!e.model.get(c.fieldName)),s.push(c))}return s}})}),csui.define("csui/controls/table/inlineforms/inlineform/inlineform.schemas",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/rules.matching/rules.matching.mixin","csui-ext!csui/inlineform/inlineform.schemas"],function(e,t,i,n){"use strict";var o=t.Model.extend({"defaults":{"sequence":100,"form":null},"constructor":function(e,i){t.Model.prototype.constructor.call(this,e,i),this.makeRulesMatching(i)}});i.mixin(o.prototype);var s=t.Collection.extend({"model":o,"comparator":"sequence","constructor":function(e,i){t.Collection.prototype.constructor.call(this,e,i)},"findByNode":function(e){return this.find(function(t){return t.matchRules(e,t.attributes)})},"getFormFieldsSchema":function(e){return this.findByNode(e.node)}}),l=new s;return n&&l.add(e.flatten(n,!0)),l}),csui.define("csui/controls/table/inlineforms/base/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/inlineforms/base/impl/nls/root/lang",{"EditCancelTooltip":"Cancel","SaveEditTooltip":"Save","CancelButtonLabel":"Cancel","SaveButtonLabel":"Save","AddButtonLabel":"Add","ExtendedAdd":"Extended add dialog","ExtendedAddAria":"Open extended add dialog","ActionFailedMessage":"Action failed","NewNamePlaceholder":"Enter name","UrlNamePlaceholder":"Enter website name","UrlNameAria":"Website name","UrlAddressPlaceholder":"Web address","UrlAddressAria":"Web address","UrlInvalidFormat":"The format of the Web address is invalid."}),csui.define("hbs!csui/controls/table/inlineforms/base/impl/inline.edit",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return"csui-form-error"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-inlineform-group csui-inlineform-group-error" >\r\n    <div class="binf-text-danger" role="alert" title="'+e.escapeExpression((s=null!=(s=l(i,"errorMessage")||(null!=t?l(t,"errorMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMessage","hash":{},"loc":{"start":{"line":16,"column":54},"end":{"line":16,"column":70}}}):s))+'">\r\n      <span class="csui-text-danger"  id="'+e.escapeExpression((s=null!=(s=l(i,"errorMsgId")||(null!=t?l(t,"errorMsgId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMsgId","hash":{},"loc":{"start":{"line":17,"column":42},"end":{"line":17,"column":56}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"errorMessage")||(null!=t?l(t,"errorMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMessage","hash":{},"loc":{"start":{"line":17,"column":58},"end":{"line":17,"column":74}}}):s))+"</span></div>\r\n  </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form class="csui-inlineform-group  '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"haveErrorMessage"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":36},"end":{"line":1,"column":83}}}))?s:"")+'">\r\n  <div class="csui-inlineform-region"></div>\r\n  <div class="csui-inline-action-button-wrapper">\r\n    <button type="submit" class="csui-btn-save csui-edit-save" disabled title="'+e.escapeExpression((l=null!=(l=r(i,"SaveEditTooltip")||(null!=t?r(t,"SaveEditTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"SaveEditTooltip","hash":{},"loc":{"start":{"line":4,"column":79},"end":{"line":4,"column":98}}}):l))+'"\r\n            aria-label="'+e.escapeExpression((l=null!=(l=r(i,"SaveEditTooltip")||(null!=t?r(t,"SaveEditTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"SaveEditTooltip","hash":{},"loc":{"start":{"line":5,"column":24},"end":{"line":5,"column":43}}}):l))+'">\r\n      '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"normal","iconName":"csui_action_confirm32"},"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":80}}}))?s:"")+'\r\n    </button>\r\n    <button type="reset" class="csui-btn-cancel csui-inline csui-edit-cancel" title="'+e.escapeExpression((l=null!=(l=r(i,"EditCancelTooltip")||(null!=t?r(t,"EditCancelTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"EditCancelTooltip","hash":{},"loc":{"start":{"line":8,"column":85},"end":{"line":8,"column":106}}}):l))+'"\r\n            aria-label="'+e.escapeExpression((l=null!=(l=r(i,"EditCancelTooltip")||(null!=t?r(t,"EditCancelTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"EditCancelTooltip","hash":{},"loc":{"start":{"line":9,"column":24},"end":{"line":9,"column":45}}}):l))+'">\r\n      '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"normal","iconName":"csui_action_cancel32"},"loc":{"start":{"line":10,"column":6},"end":{"line":10,"column":79}}}))?s:"")+"\r\n    </button>\r\n  </div>\r\n</form>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"haveErrorMessage"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":14,"column":0},"end":{"line":19,"column":7}}}))?s:"")}});return i.registerPartial("csui_controls_table_inlineforms_base_impl_inline.edit",n),n}),csui.define("css!csui/controls/table/inlineforms/base/impl/inline.edit",[],function(){}),csui.define("csui/controls/table/inlineforms/base/inline.edit.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette3","csui/controls/table/inlineforms/base/base.inline.form.view","csui/controls/table/inlineforms/inlineform/inlineform.schemas","i18n!csui/controls/table/inlineforms/base/impl/nls/lang","hbs!csui/controls/table/inlineforms/base/impl/inline.edit","css!csui/controls/table/inlineforms/base/impl/inline.edit"],function(e,t,i,n,o,s,l,r){return n.View.extend({"className":"csui-inline-editform","template":r,"regions":{"inlineFormRegion":{"el":".csui-inlineform-region","replaceElement":!0}},"ui":{"cancelButton":".csui-btn-cancel",
"editCancelButton":".csui-btn-edit-cancel","saveButton":".csui-btn-save"},"events":{"click @ui.saveButton":"saveClicked","click @ui.cancelButton":"cancelClicked","keydown":"onKeyInView"},"templateContext":function(){var e=this.model.get("csuiInlineFormErrorMessage"),i={"haveErrorMessage":!!e,"formModeIsEdit":this._isEditMode(),"EditCancelTooltip":l.EditCancelTooltip,"SaveEditTooltip":l.SaveEditTooltip,"CancelButtonLabel":l.CancelButtonLabel,"SaveButtonLabel":l.AddButtonLabel};return i.haveErrorMessage&&(i.errorMessage=e,i.errorMsgId=t.uniqueId("err"),this.options.node.set("errorid",i.errorMsgId)),i},"constructor":function(e){e||(e={});var o={"node":new i.Model({"type":e.model.get("type")})};e.otherOptions=e.otherOptions||(e.otherOptions={}),t.extend(o,e.otherOptions);var l=s.getFormFieldsSchema(o);l||(o={"node":new i.Model({"type":-1})},l=s.getFormFieldsSchema(o)),e.node=l,n.View.prototype.constructor.apply(this,arguments)},"onRender":function(){var e,t=this.options.originatingView;t&&this.listenTo(t,"disable:blocking",this.setFocus),this.options.showOnlyDefaultField=this._isEditMode()||!!this.errorMessage,this.baseInlineFormView=new o(this.options),this.getRegion("inlineFormRegion").show(this.baseInlineFormView),this.listenTo(this.baseInlineFormView,"enable:save:btn",this._enableSaveBtn).listenTo(this.baseInlineFormView,"cancel:edit:form",this.cancel).listenTo(this.baseInlineFormView,"end:of:edit",this.destroy),e=this.baseInlineFormView.collection&&this.baseInlineFormView.collection.length,this.$el.addClass("csui-field-size-"+e)},"onDomRefresh":function(){this._enableSaveBtn(),this.setFocus()},"setFocus":function(){this.refreshTabableElements(),!!this.tabableElements&&!!this.tabableElements[0]&&e(this.tabableElements[0]).trigger("focus")},"_isEditMode":function(){return void 0!==this.model.get("id")},"onKeyInView":function(t){return 9===t.keyCode?(this._moveTab(t),!0):27!==t.keyCode||e(t.target).is("button")?void 0:(this.cancel(),t.preventDefault(),void t.stopPropagation())},"refreshTabableElements":function(){this.tabableElements=this.$el.find("input:not([disabled]),  select:not([disabled]), button:not([disabled])").filter(":visible").toArray()},"_moveTab":function(t){this.currentlyFocusedElementIndex=this.tabableElements.indexOf(t.target),t.shiftKey?this.currentlyFocusedElementIndex>0?(this.currentlyFocusedElementIndex-=1,e(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):(this.currentlyFocusedElementIndex=this.tabableElements.length-1,e(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):this.currentlyFocusedElementIndex<this.tabableElements.length-1?(this.currentlyFocusedElementIndex+=1,e(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):(this.currentlyFocusedElementIndex=0,e(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")),t.stopPropagation(),t.preventDefault()},"_enableSaveBtn":function(){var e=this.baseInlineFormView.checkAllformFields();this._isRendered&&this.ui.saveButton.prop("disabled",!e),this.refreshTabableElements()},"saveClicked":function(e){e.preventDefault(),e.stopPropagation(),this.baseInlineFormView.trigger("save:form")},"cancelClicked":function(e){e.preventDefault(),e.stopPropagation(),this.cancel()},"cancel":function(e){e||(e={}),this.destroy(),void 0===this.model.get("id")?this.model.destroy():(delete this.model.inlineFormView,this.model.set("csuiInlineFormErrorMessage","dummy",{"silent":!0}),this.model.unset("csuiInlineFormErrorMessage",{"silent":e.silent}))}})}),csui.define("csui/controls/table/inlineforms/inlineform.factory",["csui/lib/underscore","csui/lib/backbone","csui/controls/table/inlineforms/inlineform.registry","csui/controls/table/inlineforms/generic/generic.view","csui/controls/table/inlineforms/base/inline.edit.view","csui/controls/table/inlineforms/inlineform/inlineform.schemas","csui-ext!csui/controls/table/inlineforms/inlineform.factory"],function(e,t,i,n,o,s){function l(){}return e.extend(l.prototype,{"getInlineFormView":function(e){var n=i.getInlineFormView(e);if(!n){var l={"node":new t.Model({"type":e})},r=s.getFormFieldsSchema(l);r&&(n=o,Object.getPrototypeOf(n).addableCommandInfo=r.attributes.addableCommandInfo)}return n}}),new l}),csui.define("hbs!csui/controls/tabletoolbar/impl/tabletoolbar",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-tabletoolbar tile-nav" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"toolbarAria")||(null!=t?l(t,"toolbarAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"toolbarAria","hash":{},"loc":{"start":{"line":1,"column":52},"end":{"line":1,"column":67}}}):s))+'" role="toolbar">\r\n  <div class="csui-navigationToolbar"></div>\r\n  <div class="csui-filterToolbar" ></div>\r\n  <div class="csui-addToolbar" ></div>\r\n  <div class="csui-leftToolbar" ></div>\r\n  <div class="csui-otherToolbar" ></div>\r\n  <div class="csui-toolbar-caption" ></div>\r\n  <div class="csui-rightToolbar" ></div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_tabletoolbar_impl_tabletoolbar",n),n}),csui.define("css!csui/controls/tabletoolbar/impl/tabletoolbar",[],function(){}),csui.define("csui/controls/tabletoolbar/tabletoolbar.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/models/node/node.model","csui/models/nodes","csui/controls/toolbar/toolitem.model","csui/controls/toolbar/toolitems.filtered.model","csui/controls/toolbar/toolbar.view","csui/controls/item.title/item.title.view","csui/controls/toolbar/delayed.toolbar.view","csui/utils/commands/add","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/table/inlineforms/inlineform.factory","hbs!csui/controls/tabletoolbar/impl/tabletoolbar","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/toolbar/toolbar.command.controller","csui/utils/commands","csui/utils/accessibility","csui/utils/nodesprites","csui-ext!csui/controls/tabletoolbar/tabletoolbar.view","csui/lib/jquery.when.all","css!csui/controls/tabletoolbar/impl/tabletoolbar"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v,w,y){"use strict";var C=i.LayoutView.extend({"template":p,"templateHelpers":function(){return{"toolbarAria":d.ToolbarAria}},"regions":{"navigationToolbarRegion":".csui-navigationToolbar","filterToolbarRegion":".csui-filterToolbar","addToolbarRegion":".csui-addToolbar","leftToolbarRegion":".csui-leftToolbar","otherToolbarRegion":".csui-otherToolbar","toolbarCaptionRegion":".csui-toolbar-caption","rightToolbarRegion":".csui-rightToolbar"},"behaviors":{"TabableRegion":{"behaviorClass":f}},"toolbarItemSelector":"a."+f.accessibilityFocusableClass+":visible,button."+f.accessibilityFocusableClass+":visible,div."+f.accessibilityFocusableClass+":visible","events":{"keydown":"onKeyInView"},"currentlyFocusedElement":function(){var t=this.$(this.toolbarItemSelector);return t.length?e(t[this.accNthToolbarItemFocused]):null},"constructor":function(e){e||(e={}),this.context=e.context,this.commandController=e.toolbarCommandController||new g({"commands":e.commands||b}),this.addableTypes=e.addableTypes,this.originatingView=e.originatingView||this,this.blockingParentView=e.blockingParentView,this.selectedNodes=new o,this.accNthToolbarItemFocused=0,this.toolbarNames=["navigation","filter","add","left","other","right"],i.LayoutView.prototype.constructor.apply(this,arguments),this.listenTo(this,"before:regions:reinitialize",this.initialize)},"initialize":function(e){this.container=e.container||this.collection&&this.collection.node;var i={"context":this.context,"nodes":this.selectedNodes,"container":e.removeContainer?void 0:this.container,"collection":this.collection,"originatingView":this.originatingView,"data":{"addableTypes":this.addableTypes}};t.each(this.toolbarNames,function(e){var n=e+"Toolbar",o=this.options.toolbarItems[n];if(o){var s=this.options.toolbarItemsMasks&&this.options.toolbarItemsMasks.toolbars[n],a=this.collection&&this.collection.delayedActions,u=new l(o,{"status":i,"commands":this.commandController.commands,"delayedActions":a,"mask":s});this.container&&this.listenTo(this.container.actions,"reset update",function(){u.refilter()});var d=r,h=new d(t.extend({"collection":u,"toolbarName":e,"toolbarCommandController":this.commandController,"toolbarItemsMask":s,"originatingView":this.originatingView,"blockingParentView":this.blockingParentView,"noMenuRoles":!0},o.options));this[e+"ToolbarView"]=h,h.closeDropdown&&h.listenTo(this,"changed:focus close:dropdown",h.closeDropdown),this.listenTo(h,"childview:toolitem:action",this._toolbarItemClicked).listenTo(h,"dom:refresh",function(){this.triggerMethod("refresh:tabindexes")}).listenTo(this.commandController,"after:execute:command",function(e){if(e&&e.cancelled){var t=this.$el.find("[data-csui-command="+e.commandSignature.toLowerCase()+"] a"),i=t.length?t.closest("ul.csui-more-dropdown-menu"):{};i.length?i.siblings("a.binf-dropdown-toggle").trigger("focus"):t.trigger("focus")}}),h instanceof c&&this.listenTo(this.selectedNodes,"reset",function(){h.actionState.set("showMessage",!!this.selectedNodes.length)})}},this),this.options.toolbarItems.addToolbar&&this.addableTypes&&(this._updateAddToolbar(),this.listenTo(this.addableTypes,"reset",this._updateAddToolbar,this)),this.options.headermenuItems&&this.options.headermenuItems.headerMenuToolbar&&this.container&&(this.captionView=new a({"model":this.container,"toolItems":this.options.headermenuItems.headerMenuToolbar,"toolItemsMask":this.options.headermenuItemsMask,"context":this.context,"commands":this.commandController.commands,"originatingView":this.originatingView,"nameSchema":this.options.nameSchema}),this.captionView.listenTo(this,"changed:focus",this.captionView.closeMenu)),this.propagateEventsToRegions();var n=this;y&&y.forEach(function(e){e(n)})},"_moveTo":function(e){e.preventDefault(),e.stopPropagation(),this.trigger("changed:focus",this),this.currentlyFocusedElement().trigger("focus")},"onKeyInView":function(t){var i;if(!e(t.target).is(":input")||e(t.target).hasClass(f.accessibilityFocusableClass))switch(t.keyCode){case 9:this.trigger("close:dropdown");break;case 37:i=this.$(this.toolbarItemSelector),this.accNthToolbarItemFocused>0&&this.accNthToolbarItemFocused--,this._moveTo(t);break;case 39:i=this.$(this.toolbarItemSelector),this.accNthToolbarItemFocused<i.length-1&&this.accNthToolbarItemFocused++,this._moveTo(t);break;case 35:e(t.target).closest("ul").hasClass("binf-dropdown-menu")||(i=this.$(this.toolbarItemSelector),this.accNthToolbarItemFocused=i.length-1,this._moveTo(t));break;case 36:e(t.target).closest("ul").hasClass("binf-dropdown-menu")||(this.accNthToolbarItemFocused=0,this._moveTo(t))}},"_updateAddToolbar":function(){var e=[];this.addableTypes.each(function(i){var o,l=i.get("type"),r=u.isAddableTypeWithoutInlineForm(l);if(r||(o=h.getInlineFormView(l)),r||o){var a="Add",c="add",p=o&&Object.getPrototypeOf(o).addableCommandInfo;if(o&&t.isObject(p)){var m=p;a=m.signature||a,c=m.group||c}else if(o&&t.isFunction(o.prototype.getAddableCommandInfo)){var f=o.prototype.getAddableCommandInfo();a=f.signature||a,c=f.group||c}var g=i.get("type_name");g=w.findTypeByNode(new n({"type":l,"type_name":g}))||g;var b=new s({"signature":a,"name":g,"title":t.str.sformat(d.AddToolbarItemsTitle,g),"type":l,"group":c,"commandData":{"type":l,"addableTypes":this.addableTypes}});t.isFunction(this.options.updateAddToolItem)&&this.options.updateAddToolItem(b),e.push(b)}},this);var i=this;e.length?(this.stopListening(this.addToolbarView,"toolbar.show").listenTo(this.addToolbarView,"toolbar.show",function(){this.addToolbarView.startLazyLoading(),this._requestAddToolbar(e).always(function(){i.addToolbarView.collection.silentFetch=!0,i._resetAddToolbar(e),i.addToolbarView.stopLazyLoading(),i.stopListening(i.addToolbarView,"toolbar.show"),i.addToolbarView.appendLazyActions()})}),this._resetAddToolbar(e)):this._requestAddToolbar(e).always(function(){i._resetAddToolbar(e)})},"_requestAddToolbar":function(t){var i=[];return this.triggerMethod("before:updateAddToolbar",{"context":this.context,"container":this.container,"addableTypes":this.addableTypes,"toolbarItems":t,"async":function(){var t=e.Deferred();return i.push(t),function(){t.resolve()}}}),e.whenAll.apply(e,i)},"_resetAddToolbar":function(e){this.options.creationToolItemsMask&&(e=this.options.creationToolItemsMask.maskItems(e)),this.options.toolbarItems.addToolbar.reset(e)},"_toolbarItemClicked":function(e,t){var i={"context":this.context,"nodes":this.selectedNodes.clone(),"container":this.container,"collection":this.collection,"originatingView":this.originatingView,"toolItemView":e};this.commandController.toolitemClicked(t.toolItem,i)},"updateForSelectedChildren":function(e){this.selectedNodes.reset(e)},"onRender":function(){v.isAccessibleMode()&&this.el.firstElementChild.classList.add("csui-wrap-text"),this.options.height&&this.$el.height(this.options.height),t.each(this.toolbarNames,function(e){var t=this[e+"ToolbarView"];t&&(t.collection.refilter(),this[e+"ToolbarRegion"].show(t))},this),this.captionView&&this.toolbarCaptionRegion.show(this.captionView)}});return t.extend(C.prototype,m),C}),csui.define("hbs!csui/dialogs/node.picker/impl/select.view/impl/header/header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-search-item-left-panel">\r\n    <div class="csui-search-item-type">\r\n      <span class="csui-type-label"> '+e.escapeExpression((s=null!=(s=l(i,"type")||(null!=t?l(t,"type"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"type","hash":{},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":45}}}):s))+' </span>\r\n    </div>\r\n    <div class="csui-search-item">\r\n      <div class="csui-search-item-name">\r\n        '+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":14,"column":8},"end":{"line":14,"column":16}}}):s))+'\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="csui-search-item-right-panel">\r\n    <div class="csui-search-item-location">\r\n      <div class="csui-search-toolbar-container">\r\n        '+e.escapeExpression((s=null!=(s=l(i,"location")||(null!=t?l(t,"location"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"location","hash":{},"loc":{"start":{"line":21,"column":8},"end":{"line":21,"column":20}}}):s))+"\r\n      </div>\r\n    </div>\r\n  </div>\r\n"},"3":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-folder-name">\r\n    <h3 class="folder-name" title="'+e.escapeExpression((l=null!=(l=r(i,"title")||(null!=t?r(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":27,"column":35},"end":{"line":27,"column":44}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"title")||(null!=t?r(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":27,"column":46},"end":{"line":27,"column":55}}}):l))+"</h3>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"enableSearch"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":28,"column":4},"end":{"line":32,"column":11}}}))?s:"")+'      <div class="csui-header-tools"></div>\r\n  </div>\r\n\r\n  <form class="cs-modal-filter">\r\n    <div class="binf-form-group">\r\n        <span class="icon-search-placeholder">'+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"iconName":"csui_action_search32"},"loc":{"start":{"line":38,"column":46},"end":{"line":38,"column":91}}}))?s:"")+'</span>\r\n      <input class="binf-form-control cs-filter-input" placeholder="'+e.escapeExpression((l=null!=(l=r(i,"search_placeholder")||(null!=t?r(t,"search_placeholder"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_placeholder","hash":{},"loc":{"start":{"line":39,"column":68},"end":{"line":39,"column":90}}}):l))+'"\r\n             tabindex="0" data-cstabindex="-1" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"search_aria")||(null!=t?r(t,"search_aria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_aria","hash":{},"loc":{"start":{"line":40,"column":59},"end":{"line":40,"column":74}}}):l))+'">\r\n      <span class="binf-form-control-feedback cs-icon icon-formfield-clear" role="button"\r\n            title="'+e.escapeExpression((l=null!=(l=r(i,"clearSearchButtonAria")||(null!=t?r(t,"clearSearchButtonAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"clearSearchButtonAria","hash":{},"loc":{"start":{"line":42,"column":19},"end":{"line":42,"column":44}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"clearSearchButtonAria")||(null!=t?r(t,"clearSearchButtonAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"clearSearchButtonAria","hash":{},"loc":{"start":{"line":42,"column":58},"end":{"line":42,"column":83}}}):l))+'" tabindex="0"\r\n            data-cstabindex="-1"></span>\r\n\r\n      <button class="binf-btn csui-form-control-search" title="'+e.escapeExpression((l=null!=(l=r(i,"collapseSearch")||(null!=t?r(t,"collapseSearch"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"collapseSearch","hash":{},"loc":{"start":{"line":45,"column":63},"end":{"line":45,"column":81}}}):l))+'"\r\n              aria-label="'+e.escapeExpression((l=null!=(l=r(i,"collapseSearch")||(null!=t?r(t,"collapseSearch"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"collapseSearch","hash":{},"loc":{"start":{"line":46,"column":26},"end":{"line":46,"column":44}}}):l))+'" aria-expanded="true" aria-haspopup="true" tabindex="0"\r\n              data-cstabindex="-1">\r\n        <span class="form-control-search cs-icon icon-sv-search-hide"></span>\r\n      </button>\r\n    </div>\r\n  </form>\r\n'},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span class="cs-icon icon-sv-search csui-acc-focusable" tabindex="0" data-cstabindex="-1"\r\n            role="button" aria-expanded="false" aria-haspopup="true" title="'+e.escapeExpression((s=null!=(s=l(i,"searchInButtonAria")||(null!=t?l(t,"searchInButtonAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"searchInButtonAria","hash":{},"loc":{"start":{"line":30,"column":76},"end":{"line":30,"column":98}}}):s))+'"\r\n            aria-label="'+e.escapeExpression((s=null!=(s=l(i,"searchInButtonAria")||(null!=t?l(t,"searchInButtonAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"searchInButtonAria","hash":{},"loc":{"start":{"line":31,"column":24},"end":{"line":31,"column":46}}}):s))+'"></span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-targetbrowse-history">\r\n      <span class="csui-targetbrowse-arrow-back">\r\n        <span class="icon arrow_back cs-go-back" title="'+e.escapeExpression((l=null!=(l=r(i,"backButtonTooltip")||(null!=t?r(t,"backButtonTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"backButtonTooltip","hash":{},"loc":{"start":{"line":3,"column":56},"end":{"line":3,"column":77}}}):l))+'"\r\n              aria-label="'+e.escapeExpression((l=null!=(l=r(i,"backButtonAria")||(null!=t?r(t,"backButtonAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"backButtonAria","hash":{},"loc":{"start":{"line":4,"column":26},"end":{"line":4,"column":44}}}):l))+'" tabindex="0" data-cstabindex="-1" role="link"></span>\r\n      </span>\r\n</div>\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"searchView"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":7,"column":0},"end":{"line":52,"column":7}}}))?s:"")}});return i.registerPartial("csui_dialogs_node.picker_impl_select.view_impl_header_header",n),n}),csui.define("css!csui/dialogs/node.picker/impl/select.view/impl/header/header",[],function(){}),csui.define("csui/dialogs/node.picker/impl/select.view/impl/header/header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","i18n!csui/controls/table/impl/nls/lang","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/models/node/node.addable.type.factory","csui/controls/tabletoolbar/tabletoolbar.view","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitems.mask","csui/controls/toolbar/toolbar.command.controller","csui/utils/commands","csui/controls/table/inlineforms/inlineform.factory","hbs!csui/dialogs/node.picker/impl/select.view/impl/header/header","i18n!csui/dialogs/node.picker/impl/nls/lang","css!csui/dialogs/node.picker/impl/select.view/impl/header/header","csui/lib/jquery.ui/js/jquery-ui"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m){return i.ItemView.extend({"template":p,"tagName":"div","templateHelpers":function(){return{"search_icon_tooltip":e.str.sformat(o.searchIconTooltip,this.options.columnTitle),"search_placeholder":o.searchByNamePlaceholder,"search_aria":o.searchByNameAria,"search_clear_icon_tooltip":o.searchClearIconTooltip,"title":this.title,"enableSearch":this.options.collection.length>0,"backButtonTooltip":m.backButtonTooltip,"type":m.Type,"name":m.Name,"location":m.Location,"searchView":this.options.searchView,"searchInButtonAria":e.str.sformat(o.searchIconTooltip,this.title),"clearSearchButtonAria":m.clearSearchButtonAria,"collapseSearch":m.collapseSearch,"backButtonAria":m.backButtonTooltip}},"ui":{"placeholderSearchIcon":".cs-modal-filter .icon-search-placeholder","searchBox":"> form.cs-modal-filter","closeSearchIcon":"> form .csui-form-control-search","openSearchIcon":"> .csui-folder-name .icon-sv-search","headerTitle":"> .csui-folder-name","searchInput":"> form .cs-filter-input","clearer":"> form .binf-form-control-feedback","tabElements":"> *[tabindex]","backBtn":".csui-targetbrowse-history","toolbar":".csui-header-tools"},"events":{"click @ui.placeholderSearchIcon":"placeholderSearchIconClicked","click .icon-sv-search":"searchClicked","click .csui-form-control-search":"searchClicked","paste @ui.searchInput":"contentPasted","change @ui.searchInput":"filterChanged","click @ui.clearer":"searchFieldClearerClicked","submit @ui.searchBox":"filterChanged","keydown":"onKeyInView"},"behaviors":{"TabableRegionBehavior":{"behaviorClass":s}},"constructor":function(t){this.options=t||{},this.container=t.container,this.lastFilterValue="",this.title=t.title,i.ItemView.prototype.constructor.apply(this,arguments),this.container&&this.listenTo(this.container,"change:name",function(e){this.title=e.get("name"),this.render()}),this.listenTo(t.collection,"sync reset",e.bind(function(){this.ui.searchBox.hasClass("binf-hidden")&&this.render()},this))},"_canAddNewItems":function(){return this.container&&this.options.addableTypes&&this.options.addableTypes.length>0},"_initializeToolbar":function(){var t=this.options.context.getCollection(l,{"options":{"node":this.container},"attributes":{"id":this.container.get("id")},"temporary":!0});t.ensureFetched(),this.commandController=new u({"commands":d});var i={"addToolbar":new a({"add":[]},{"maxItemsShown":1,"dropDownIconName":"csui_action_add32","dropDownText":o.ToolbarItemAddItem,"addTrailingDivider":!1})},n=e.map(this.options.addableTypes,function(e){return{"signature":"Add","commandData":{"type":e}}});this.tableToolbarView=new r({"context":this.options.context,"toolbarItems":i,"container":this.container,"collection":this.options.collection,"originatingView":this,"blockingParentView":this.options.blockingParentView||this,"addableTypes":t,"toolbarCommandController":this.commandController,"creationToolItemsMask":new c({"whitelist":n},{"normalize":!1}),"updateAddToolItem":e.bind(function(e){1===this.options.addableTypes.length&&e.set({"renderIconAndText":!1,"renderTextOnly":!1,"iconName":"csui_action_add32","dropDownIconName":"csui_action_add32"})},this)}),this.tableToolbarView.render(),this.listenTo(this.commandController,"before:execute:command",this._beforeExecuteCommand),this.listenTo(this.commandController,"after:execute:command",this._toolbarActionTriggered)},"_beforeExecuteCommand":function(e){var t=this.options.collection.filter(function(e){return!!e.inlineFormView});this.options.collection.remove(t)},"_toolbarActionTriggered":function(e){if(e&&!e.cancelled&&e.status.forwardToTable){var t=h.getInlineFormView(e.addableType);if(t){var i=e.newNodes[0];i.error||(i.set("parent_id",this.container.get("id")),i.isLocallyCreated=!0,i.inlineFormView=t,this.options.collection.add(i,{"at":0}),this.listenTo(i,"destroy",function(){this.tableToolbarView.$el.find("a").trigger("focus")}))}}},"currentlyFocusedElement":function(e){var t=this.$el.find("*[data-cstabindex=-1], *[tabindex=-1]");return t.length&&t.prop("tabindex",0),t.length>1?this.$el.find(".cs-go-back:visible").length&&!e.shiftKey?this.$el.find(".cs-go-back"):this.$el.find(".csui-folder-name.binf-hidden").length&&!e.shiftKey?this.$el.find("input"):this.$el.find(".csui-folder-name.binf-hidden").length&&e.shiftKey?this.$el.find("button"):e.shiftKey&&this.tableToolbarView&&this.tableToolbarView.$el.find("a").length?this.tableToolbarView.$el.find("a"):this.$el.find(".csui-folder-name .icon-sv-search"):t[0]},"onLastTabElement":function(e){var i=this.$("[data-cstabindex=-1], *[tabindex=-1]"),n=i.length-1;if(i.length){var o=e?i[0]:i[n];return this.$(".csui-focus").removeClass("csui-focus"),t(o).hasClass(s.accessibilityActiveElementClass)&&!e}return!0},"onKeyInView":function(e){var i=t(e.target);switch(e.keyCode){case 13:i.removeClass(s.accessibilityActiveElementClass),t(e.target).trigger("click");break;case 27:t(e.target).hasClass(".icon-sv-search")||this.$el.trigger("tabNextRegion");break;default:return!0}return!1},"onRender":function(){this.ui.clearer.toggle(!1),this.ui.searchBox.toggleClass("binf-hidden"),this.ui.closeSearchIcon.toggleClass("binf-hidden"),this.ui.searchInput.hide(),this.showHistoryBackBtn()&&this.ui.backBtn.show();var e=this;this.ui.searchInput.on("keyup",function(t){e.filterChanged(t)}),this.$el.find("*[data-cstabindex]").on("focus",function(){var i=t(this);e.focusedElement&&e.focusedElement.removeClass(s.accessibilityActiveElementClass),i.addClass(s.accessibilityActiveElementClass),e.focusedElement=i}),this._canAddNewItems()&&(this._initializeToolbar(),this.tableToolbarView.$el.appendTo(this.ui.toolbar))},"showHistoryBackBtn":function(){var e=!this.$el.closest(".csui-slideMidLeft").length;return e=e&&this.options.targetBrowseHistory&&this.options.targetBrowseHistory.length>=1},"searchClicked":function(i){i.preventDefault(),i.stopPropagation(),n.trigger("closeToggleAction"),this.ui.headerTitle.toggleClass("binf-hidden"),this.ui.searchInput.toggleClass(s.accessibilityFocusableClass),this.ui.clearer.toggle(!1),this.getValue().length&&(this.ui.searchInput.val(""),this.filterChanged(i)),this.ui.searchInput.toggle(200,"linear",e.bind(function(){this.ui.searchInput.is(":visible")?this.ui.searchInput.trigger("focus"):this.ui.openSearchIcon.trigger("focus"),this.ui.closeSearchIcon.toggleClass("binf-hidden")},this)),this.ui.closeSearchIcon.toggleClass(s.accessibilityFocusableClass),this.ui.closeSearchIcon.removeClass(s.accessibilityActiveElementClass),this.ui.openSearchIcon.toggleClass(s.accessibilityFocusableClass),this.ui.searchBox.toggleClass("binf-hidden"),t(i.target).hasClass("form-control-search")?(this.ui.searchInput.removeClass(s.accessibilityActiveElementClass),this.ui.openSearchIcon.addClass(s.accessibilityActiveElementClass),this.$el.trigger("setCurrentTabFocus")):(this.ui.searchInput.addClass(s.accessibilityActiveElementClass),this.ui.openSearchIcon.removeClass(s.accessibilityActiveElementClass)),this.trigger("changed:focus"),this.focusElement&&this.focusElement.trigger("focus")},"searchFieldClearerClicked":function(e){e.preventDefault(),e.stopPropagation(),this.ui.clearer.removeClass(s.accessibilityFocusableClass),this.ui.clearer.removeClass(s.accessibilityActiveElementClass),this.ui.searchInput.val(""),this.filterChanged(e),this.ui.searchInput.trigger("focus"),this.ui.searchInput.addClass(s.accessibilityActiveElementClass)},"placeholderSearchIconClicked":function(){this.ui.searchInput.trigger("focus")},"getColumn":function(){return this.options.column},"getValue":function(){var e;return e=this.ui.searchInput.val(),e===this.ui.searchInput.attr("placeholder")&&(e=""),e},"setValue":function(e){e&&e.length&&(this.ui.searchInput.val(e),this.lastFilterValue=e)},"getShown":function(){return this.ui.searchInput.hasClass("binf-show")},"setShown":function(e){!0===e&&this.ui.searchInput.hasClass("binf-hidden")?this.ui.searchInput.toggleClass("show binf-hidden"):!1===e&&this.ui.searchInput.hasClass("binf-show")&&this.ui.searchInput.toggleClass("show binf-hidden")},"setFocus":function(){var e=this.ui.searchInput.val().length;this.ui.searchInput.trigger("focus"),this.ui.searchInput[0].setSelectionRange(e,e)},"contentPasted":function(e){this.applyFilter()},"filterChanged":function(e){return this.applyFilter(),!1},"applyFilter":function(){var e=this.getValue(),t=!!e.length;if(this.ui.clearer.toggle(t),t?this.ui.clearer.addClass(s.accessibilityFocusableClass):this.ui.clearer.removeClass(s.accessibilityFocusableClass),this.lastFilterValue!=e){this.lastFilterValue=e;var i=this;this.filterTimeout&&clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(function(){i.filterTimeout=void 0,i.trigger("change:filterValue",{"name":i.getValue()})},1e3)}}})}),csui.define("hbs!csui/dialogs/node.picker/impl/select.view/impl/select.view",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div>\r\n  <div class="csui-np-header cs-folder-name"></div>\r\n</div>\r\n<div class="csui-np-content"></div>\r\n\r\n'}});return i.registerPartial("csui_dialogs_node.picker_impl_select.view_impl_select.view",n),n}),csui.define("css!csui/dialogs/node.picker/impl/select.view/impl/select.view",[],function(){}),csui.define("csui/dialogs/node.picker/impl/select.view/select.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/dialogs/node.picker/impl/node.list/node.list.view","csui/dialogs/node.picker/impl/select.view/impl/header/header.view","hbs!csui/dialogs/node.picker/impl/select.view/impl/select.view","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/behaviors/keyboard.navigation/tabable.region.behavior","i18n!csui/dialogs/node.picker/impl/nls/lang","css!csui/controls/list/impl/list","css!csui/dialogs/node.picker/impl/select.view/impl/select.view"],function(e,t,i,n,o,s,l,r,a,c,u,d,h){var p=o.LayoutView.extend({"template":c,"templateHelpers":function(){var e,t=""
;return this.options.targetBrowseHistory.length&&(e=this.options.targetBrowseHistory[this.options.targetBrowseHistory.length-1],t="search"===e[0]?h.backToSearchAria:"location"===e[0]?h.backToFolderView:"node"===e[0]?h.backToFolderView:""),{"backButtonTooltip":h.backButtonTooltip,"backButtonAria":""!=t?t:h.backToFolderView}},"regions":{"viewHeaderRegion":".csui-np-header","viewContentRegion":".csui-np-content"},"ui":{"backSearchButton":".csui-targetbrowse-arrow-back"},"events":{"tabNextRegion":"tabNextRegion","click @ui.backSearchButton":"onClickFolderBack","keydown @ui.backSearchButton":"selectFolderBack"},"behaviors":{"TabableRegion":{"behaviorClass":d,"recursiveNavigation":!0,"containTabFocus":!0}},"constructor":function(e){e||(e={}),i.defaults(e,{"pageSize":30}),o.LayoutView.prototype.constructor.call(this,e),this.search=!1,this.rendered=!1,this.selectList={},this.collection=e.collection,this.container=e.container,this.propagateEventsToRegions(),this.listenTo(this.collection,"sync",this._handlePendingFilter),this.setHeader(e),this.setListView(e),this.onWinRefresh=i.bind(this.windowRefresh,this),t(window).on("resize.app",this.onWinRefresh)},"tabNextRegion":function(e){this.listView.currentlyFocusedElement()&&(e.preventDefault(),e.stopPropagation(),this.listView.setFocus())},"windowRefresh":function(){var e=this.options.parentEl.height();e>0&&this.$el.css("height",e+"px")},"onDestroy":function(){this.$el.off(),t(window).off("resize.app",this.onWinRefresh)},"onRender":function(){var e=this,i=e.$el.find(".csui-np-content");this.viewHeaderRegion.show(this.headerView),this.viewContentRegion.show(this.listView),this.$el.on("hover",function(){i.addClass("binf-focus")},function(){i.removeClass("binf-focus")}),this.$el.find("*[data-cstabindex]").on("focus",function(){var i=t(this);e.focusedElement&&e.focusedElement.removeClass(d.accessibilityActiveElementClass),i.addClass(d.accessibilityActiveElementClass),e.focusedElement=i}),this.rendered=!0,this.trigger("dom:refresh")},"onDomRefresh":function(){this.windowRefresh()},"onShow":function(){this.rendered||this.render(),i.each(this.regionManager._regions,function(e){e.currentView&&e.currentView.trigger("show")})},"getNumberOfSelectItems":function(){return i.size(this.selectList)},"setNewSelect":function(e,t){this.clearSelect(),this._setSelection({"node":e,"add":!0,"silent":t})},"isTabable":function(){return this.$("*[tabindex]").length>0},"currentlyFocusedElement":function(e){var t=this.$el.find("*[tabindex=-1]");return t.length&&t.prop("tabindex",0),this.$el.find(".csui-folder-name.binf-hidden").length?this.$el.find("input"):this.$el.find(".csui-targetbrowse-arrow-back .cs-go-back:visible").length&&!e.shiftKey?this.$el.find(".csui-targetbrowse-arrow-back .cs-go-back"):this.$el.find(".csui-folder-name .icon-sv-search")},"onLastTabElement":function(e){var i=this.$("[data-cstabindex=-1]"),n=i.length-1;if(i.length){var o=e?i[0]:i[n];return this.$(".csui-focus").removeClass("csui-focus"),t(o).hasClass(d.accessibilityActiveElementClass)}return!0},"clearSelect":function(){this.listView.clearSelect(),this.selectList={}},"setListView":function(e){e||(e={});var t={"collection":this.collection,"container":this.container,"commandType":e.commandType,"pageSize":e.pageSize,"searchView":e.searchView,"resolveShortcuts":e.resolveShortcuts,"resultOriginalNode":e.resultOriginalNode,"context":e.context,"selectedCountList":e.selectedCountList,"selectException":e.selectException},n=this.listView=new r(t);this.listenTo(n,"selection:change",this._setSelection).listenTo(n,"click:location",this._clickLocation).listenTo(n,"browse:select",this._onBrowse).listenTo(this,"browse:complete",i.bind(n.trigger,n,"browse:complete"))},"selectFolderBack":function(e){13!==e.keyCode&&32!==e.keyCode||this.trigger("backbutton:click",this)},"onClickFolderBack":function(e){this.trigger("backbutton:click",this)},"setHeader":function(e){var t=this.container&&(this.container.get("name")||"");t=null==t?this.options.locationName:t,this.headerView=new a({"title":t,"container":this.container,"searchView":e.searchView,"collection":this.collection,"context":this.options.context,"selectableTypes":this.options.selectableTypes,"addableTypes":this.options.addableTypes,"targetBrowseHistory":this.options.targetBrowseHistory}),this.listenTo(this.headerView,"change:filterValue",this.applyFilter)},"cancelInlineForms":function(e){e||(e=this.options.collection.filter(function(e){return!!e.inlineFormView})),this.collection.remove(e)},"applyFilter":function(e){if(i.extend(e,{"type":this.options.listTypes}),this.collection.fetching)this.filterValuePending=e;else{var t=this;this.collection.setLimit(0,this.options.pageSize,!1),this.collection.setFilter(e,!1),this.collection.fetch({"reset":!0}).fail(function(e){t.listView.stopBlocker(),t.trigger("search:failed",{"resp":e,"view":t})}),this.listView.reset()}},"refresh":function(){var e=this;this.collection.fetch({"reset":!0}).fail(function(){e.listView.stopBlocker()})},"addFolderSelection":function(e){this._setSelection({"browse":!0,"add":!0,"node":e})},"_handlePendingFilter":function(){i.isEmpty(this.filterValuePending)||(this.collection.setFilter(this.filterValuePending),this.filterValuePending={})},"_onBrowse":function(e){this.trigger("browse:select",this,e),this.cancelInlineForms()},"_setSelection":function(e){var t=e.node.get("id"),i=this.options.commandType;if(!i.multiSelect&&(this.selectList={}),e.add&&i.isSelectable(e.node)){if(i.multiSelect){this.trigger("add:to:collection",{"id":t,"node":e.node,"targetEl":e.targetEl})}this.selectList[t]=e.node}else delete this.selectList[t],i.multiSelect?this.trigger("remove:from:collection",{"id":t,"node":e.node,"targetEl":e.targetEl}):this.trigger("clear:selectList",e,this);e.silent||(this.trigger("selection:change",e,this),this.cancelInlineForms())},"_clickLocation":function(e){this.trigger("click:location",e,this)}});return i.extend(p.prototype,u),p}),csui.define("hbs!csui/dialogs/node.picker/impl/select.views/selectviews",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return"\r\n"}});return i.registerPartial("csui_dialogs_node.picker_impl_select.views_selectviews",n),n}),csui.define("csui/dialogs/node.picker/impl/search.list/search.results.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/node/node.model","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/browsable/browsable.mixin","csui/models/browsable/v1.request.mixin","csui/models/browsable/v2.response.mixin","csui/utils/deepClone/deepClone"],function(e,t,i,n,o,s,l,r,a,c){"use strict";var u=i.Collection.extend({"model":o,"constructor":function(e,t){this.options=t||(t={}),i.Collection.prototype.constructor.call(this,e,t),this.makeConnectable(t).makeFetchable(t).makeBrowsable(t).makeBrowsableV1Request(t).makeBrowsableV2Response(t)},"clone":function(){return new this.constructor(this.models,{"connector":this.connector,"skip":this.skipCount,"top":this.topCount,"filter":e.deepClone(this.filters),"orderBy":e.clone(this.orderBy)})}});return r.mixin(u.prototype),a.mixin(u.prototype),c.mixin(u.prototype),s.mixin(u.prototype),l.mixin(u.prototype),e.extend(u.prototype,{"isFetchable":function(){return!!this.options.query.get("where")},"cacheId":"","url":function(){var e=this.connector.getConnectionUrl().getApiBase("v2"),t=this.options.query.toJSON();return t.where="OTName:"+t.where,this.orderBy="OTName",t=n.combineQueryString(this.getBrowsableUrlQuery(),{"actions":"open","expand":"properties{parent_id}"},t),n.combine(e,"search?"+t)},"parse":function(e,t){return this.parseBrowsedState(e.collection,t),e.results.sorting=e.collection.sorting,this.cacheId=e.collection&&e.collection.searching&&e.collection.searching.cache_id?e.collection.searching.cache_id:"",this.parseBrowsedItems(e,t)}}),u}),csui.define("css!csui/dialogs/node.picker/impl/select.views/selectviews",[],function(){}),csui.define("css!csui/dialogs/node.picker/impl/select.views/slider",[],function(){}),csui.define("csui/dialogs/node.picker/impl/select.views/select.views",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","i18n!csui/dialogs/node.picker/impl/nls/lang","csui/models/node/node.model","csui/models/node.children2/node.children2","csui/dialogs/node.picker/impl/select.view/select.view","csui/dialogs/modal.alert/modal.alert","csui/utils/commands","hbs!csui/dialogs/node.picker/impl/select.views/selectviews","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/dialogs/node.picker/impl/search.list/search.results.model","csui/lib/binf/js/binf","csui/lib/jquery.ui/js/jquery-ui","css!csui/dialogs/node.picker/impl/select.views/selectviews","css!csui/dialogs/node.picker/impl/select.views/slider"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g){"use strict";var b=o.ItemView.extend({"className":"csui-select-lists","template":p,"constructor":function(e){e||(e={}),i.defaults(e,{"pageSize":30}),o.ItemView.prototype.constructor.call(this,e),this.selectedCountList=e.selectedCountList,this.commandType=e.commandType,this.selectableTypes=this.commandType.getSelectableNodeTypes(),this.listTypes=i.isEmpty(this.selectableTypes)?[]:i.contains(this.selectableTypes,-1)?this.selectableTypes:i.union(this.selectableTypes,[-1]),this.leftView=this.rightView=null,this.invalidNodes=[],this.connector=e.connector},"onRender":function(){var e=this;this.setLeftOnly().done(function(){e.options.leftSelection&&e.$el.find(".cs-left-item-"+e.options.leftSelection).length>0&&(e.$el.find(".cs-left-item-"+e.options.leftSelection+" .csui-browsable").trigger("click"),e.options.selectException=void 0)}),this.leftView&&this.leftView.render(),this.rightView&&this.rightView.render()},"onDomRefresh":function(){this.leftView&&this.leftView.triggerMethod("dom:refresh",this.leftView),this.rightView&&this.rightView.triggerMethod("dom:refresh",this.rightView)},"onDestroy":function(){this.leftView&&this.leftView.destroy(),this.rightView&&this.rightView.destroy()},"onShow":function(){this.leftView.triggerMethod("show"),this.rightView&&this.rightView.triggerMethod("show")},"setParentNodeAsTarget":function(e){var t=this.commandType.isSelectable(e);return this.rightView&&this.rightView.clearSelect(),this.commandType.multiSelect||this.leftView&&this.leftView.setNewSelect(e,!0),t},"getSelection":function(){var e={},t=this.rightView?this.rightView.selectList:{},n=this.leftView.selectList;return i.extend(e,n,t),e},"getNumberOfSelectItems":function(){var e=this.leftView.getNumberOfSelectItems();return this.rightView&&(e+=this.rightView.getNumberOfSelectItems()||0),e},"leftNodeId":function(){var e=this.leftView.container;return e?e.get("id"):-1},"setLeftOnly":function(){var e=this._setView(-1,"cs-start-locations left-only",this.options.searchView,!1,this.options),t=e.view.container,i=this;return e.promise.done(function(){t&&!i.commandType.multiSelect&&i.leftView.addFolderSelection(t),i.options.searchView&&i.trigger("update:searchHeader",this),0===i.options.targetBrowseHistory.length&&i.options.searchView&&i.options.targetBrowseHistory.push(["location",i.options.previousLocation.id]),i.options.targetBrowseHistory.length>0?i.showBackButton():(i.options.targetBrowseHistory.length>1||1===i.options.targetBrowseHistory.length&&i.options.navigateFromHistory)&&i.showBackButton()}).fail(function(e){i.forceClose(e)}),this.leftView=e.view,e.promise},"forceClose":function(e){this._displayAlert(e).always(this.trigger("close"))},"newLeftView":function(e,t){var i=e.get("id"),n=this;return this.options.pageSize=t,this._drillUp(i).done(function(t){if(n.leftView=t,n.commandType.multiSelect||n.leftView.addFolderSelection(e),n.onDomRefresh(),0===n.options.targetBrowseHistory.length){var i=Math.floor((n.leftView.collection.skipCount||0)/n.leftView.collection.topCount)+1,o=parseInt(n.leftView.collection.topCount)*parseInt(i);n.leftView&&n.leftView.container?n.leftView.container.get("id"):e.parent&&e.parent.get("id"),n.rightView&&n.rightView.container&&n.rightView.container.get("id")}}).fail(function(e){n._displayAlert(e)})},"onSelectionChange":function(e,t){var i=t&&this._isRightView(t);return e&&e.add&&!this.commandType.multiSelect&&(i?this.leftView.clearSelect():this.rightView&&this.rightView.clearSelect()),t.options.searchView&&e.node.get("container")&&e.add?(this.trigger("update:searchHeader",e.node),this.trigger("change:complete",e.node)):this.trigger("change:complete",e.node),!0},"onBrowse":function(e,t){var i=this._isRightView(e),n=null;return this.trigger("changing:selection"),n=i?this.selectRight(t):this.selectLeft(t),n.done(function(){e.trigger("browse:complete")}).fail(function(){e.clearSelect()}),n},"onClickLocation":function(e,t){this.trigger("click:location",e)},"selectLeft":function(e,t){var i=this;return this.options.searchView&&this.options.targetBrowseHistory.push(["search",this.options.query.clone()]),this._runSelection(e,".cs-pane-view","right").done(function(e){e&&(i.rightView=e,i.onDomRefresh())})},"selectRight":function(e,t){var i=this,n=Math.floor((this.leftView.collection.skipCount||0)/this.leftView.collection.topCount)+1,o=parseInt(this.leftView.collection.topCount)*parseInt(n),s=this.leftView.listView.browsedChild;if(0===this.options.targetBrowseHistory.length){var l={"leftId":this.options.previousLocation.id,"rightId":s?s.model.get("id"):void 0,"pageSize":o};this.options.targetBrowseHistory.push(["location",l])}else{var r={"leftId":s?s.model.parent.get("id"):void 0,"rightId":s?s.model.get("id"):void 0,"pageSize":o};this.options.targetBrowseHistory.push(["node",r])}return this._runSelection(e,".csui-panel.cs-start-locations","left").done(function(e){e&&(i.leftView=i.rightView,i.rightView=e,i.onDomRefresh(),i.showBackButton())})},"showBackButton":function(){this.leftView&&!this.leftView.isDestroyed&&this.options.targetBrowseHistory.length>=1&&this.leftView.headerView&&this.leftView.headerView.ui.backBtn.show()},"hideBackButton":function(){this.leftView&&this.options.targetBrowseHistory.length<1&&this.leftView.headerView&&this.leftView.headerView.ui.backBtn.hide()},"_runSelection":function(e,i,n){var o=e.node,s=this,l=t.Deferred();return this._drillDown(o,i).done(function(e){"left"===n?s.onClearLeftViewSelectList():"right"===n&&s.onClearRightViewSelectList();var t=("left"===n?s.rightView:s.leftView).listView.browsedChild.model;s.trigger("changed",t.get("id")),s.trigger("change:complete",o),l.resolve(e)}).fail(function(e){s._displayAlert(e),s.trigger("change:complete"),l.reject()}),l},"_drillUp":function(e,i){this.trigger("drill:up",e);var n=this._setView(e,"csui-new-view left-only binf-hidden",this.options.searchView,"prepend"),o=n.view,s=this,l=t.Deferred();return o.$el.addClass("zeroWidth").removeClass("binf-hidden"),o.render(),i||s._removeRightView(n.promise).done(function(){l.resolve(n.view)}).fail(function(e){l.reject(e)}),l},"_drillDown":function(e,i){var n=this._setView(e,"csui-new-view",!1),o=null,s=n.view;return s.render(),s.options.searchView&&null==this.rightView?(s.options.searchView=!1,t(".binf-list-group").removeClass("search-left-item"),t(".csui-search-item-left-panel").is(":visible")&&t(".binf-list-group").addClass("search-left-folder-right"),o=this._addRightView(n.promise,s)):o=this._replaceView(n.promise,s,i),o},"_showLeftOnly":function(){function e(){if(null!=i){var e=i[0].selectView;n.cancelEventsToViewsPropagation(e),e.destroy(),i.remove(),n.rightView=null}}var t=this.leftView,i=this.rightView,n=this;t.animate({"width":"100%"},{"duration":200,"complete":e})},"_removeRightView":function(e){var i=this.$el.find(".csui-new-view"),n=this.$el.find(".csui-panel.cs-start-locations"),o=this.$el.find(".cs-pane-view"),s=t.Deferred(),l=this;return n.hide(),o.hide(),i[0].className="csui-panel cs-start-locations left-only",e.done(function(){l._finishRightRemove(i,n,o),s.resolve()}).fail(function(e){l._removeNewView(i,n,o),s.reject(e)}),s},"_removeNewView":function(e,t,i){e||(e=this.$el.find(".csui-new-view"));var n=e[0].selectView;this.cancelEventsToViewsPropagation(n),n.destroy(),e.remove(),t&&t.show(),i&&i.show()},"_finishRightRemove":function(e,t,i){var n;return i.length>0&&(n=i[0].selectView,this.cancelEventsToViewsPropagation(n),n.destroy(),i.remove(),this.rightView=null),n=t[0].selectView,this.cancelEventsToViewsPropagation(n),n.destroy(),t.remove(),this.leftView=null,!0},"_addRightView":function(e,i){var n=this.$el.find(".csui-panel.cs-start-locations"),o=this.$el.find(".csui-new-view"),s=t.Deferred(),l=this;return n[0].className="csui-panel cs-start-locations",o[0].className="csui-panel cs-pane-view csui-slideMidLeft",e.done(function(){s.resolve(i)}).fail(function(e){l._removeNewView(o),n.animate({"width":"100%"},{"duration":200,"complete":function(){n.addClass("left-only").css("width","")}}),l.leftView.clearSelect(),l.leftView.refresh(),s.reject(e)}),s},"_replaceView":function(e,i,n){var o=this.$el.find(n),s=t(".csui-new-view"),l=t(".cs-pane-view"),r=t.Deferred(),a=this;switch(o.hide(),n){case".csui-panel.cs-start-locations":l[0].className="csui-panel cs-start-locations csui-slideLeft",s[0].className="csui-panel cs-pane-view csui-slideMidLeft";break;case".cs-pane-view":s[0].className="csui-panel cs-pane-view csui-slideMidLeft"}return this.$el.find(".left-only").removeClass("left-only"),e.done(function(){a._removeView(o),r.resolve(i)}).fail(function(e){a._reverseRemoveView(s,n,l),".csui-panel.cs-start-locations"===n&&o.show(),r.reject(e)}),r},"_reverseRemoveView":function(e,t,i){switch(this._removeNewView(e),t){case".csui-panel.cs-start-locations":i[0].className="csui-panel cs-pane-view csui-slideRight",this.rightView.refresh();break;case".cs-pane-view":this._removeView(i),this.leftView.$el[0].className="csui-panel cs-start-locations left-only",this.leftView.clearSelect(),this.leftView.refresh()}return!0},"_removeView":function(e){if(e.length){var t=e[0].selectView;return this.cancelEventsToViewsPropagation(t),t.destroy(),e.remove(),!0}return!1},"_setView":function(e,t,n,o,s){s||(s=this._getViewOptions(e,this.connector)),this.options.searchView=n,i.defaults(s,this.options,{"invalidNodes":this.invalidNodes,"fetchContainer":!0}),o||(o="append");var l=this._newView(s,t),r=this._fetchView(l,s);return this.options.fromSearch=!!n,l.el.selectView=l,this.$el[o](l.el),{"view":l,"promise":r}},"_fetchView":function(e,t){return t.fetchContainer&&this._fetchContainer(e),this._fetchCollection(e)},"_fetchContainer":function(e){return e.container&&e.container.get("id")&&e.container.ensureFetched(),!0},"_fetchCollection":function(e){e.collection.setOrder(this.options.orderBy,!1),e.collection.setFilter({"type":this.listTypes},!1),e.collection.setLimit(0,this.options.pageSize||e.options.pageSize,!1),e.collection.includeResources&&e.collection.includeResources(this.options.includeResources);var i=t.Deferred();return e.collection.fetch({"reset":!1,"merge":!1,"remove":!1}).done(function(t){e.listView.resolveShortcuts(e.collection).always(function(){i.resolve(e.collection)})}).fail(function(e){i.reject(e)}),i},"_newView":function(e,t){var n=i.extend({"listTypes":this.listTypes,"className":t+" csui-panel","parentEl":this.$el},e),o=new u(n);this.propagateEventsToViews(o),this.listenTo(o,"selection:change",this.onSelectionChange),this.listenTo(o,"search:failed",this._searchFailed),this.listenTo(o,"backbutton:click",this._onClickBackButton),this.listenTo(o,"clear:selectList",this.onClearLeftViewSelectList),this.listenTo(o,"browse:select",i.bind(this.onBrowse,this)),this.listenTo(o,"click:location",i.bind(this.onClickLocation,this));var s=function(e){return e.closest(".csui-slideMidLeft").length?"right":"left"};return this.listenTo(o,"add:to:collection",i.bind(function(e){var t=s(e.targetEl),i=this.commandType.browseAllowed(e.node);this._toggleSelectionSameNode(e.id,t,i),this.trigger("add:to:collection",{"id":e.id,"node":e.node})},this)),this.listenTo(o,"remove:from:collection",i.bind(function(e){var t=s(e.targetEl);this._toggleSelectionSameNode(e.id,t),this.trigger("remove:from:collection",{"id":e.id,"node":e.node})},this)),o},"_toggleSelectionSameNode":function(e,t,i){var n="right"===t?this.leftView:this.rightView;"left"===t&&i||n&&n.collection.findWhere({"id":e})&&n.listView.toggleNodeSelection(e)},"onClearLeftViewSelectList":function(){this.leftView&&(this.leftView.selectList={})},"onClearRightViewSelectList":function(){this.rightView&&(this.rightView.selectList={})},"clearSelect":function(){this.onClearLeftViewSelectList(),this.onClearRightViewSelectList()},"_onClickBackButton":function(e){var t=this,i=this.options.targetBrowseHistory.length>0?this.options.targetBrowseHistory.pop():void 0;if(1===this.options.targetBrowseHistory.length?this.options.navigateFromHistory=!0:this.options.navigateFromHistory=!1,i&&"search"===i[0])this.requestedQueryModel=i[1],this.trigger("back:toSearch",this),this.options.targetBrowseHistory.length>0&&this.showBackButton();else if(i&&"location"===i[0])this.onClearLeftViewSelectList(),this.onClearRightViewSelectList(),this.trigger("change:location",i);else if(this.options.searchView&&i&&"node"===i[0]||i&&"node"===i[0]){this.options.searchView=!1;var n=new a({"id":i[1].leftId},{"connector":this.connector}),o=new a({"id":i[1].rightId},{"connector":this.connector});this.commandType.multiSelect&&(this.options.selectException=i[1].rightId),this.newLeftView(n,i[1].pageSize).done(function(e){t.setParentNodeAsTarget(n),t.trigger("change:complete"),t.trigger("toggle:breadcrumbs",t.leftNodeId()),t.options.targetBrowseHistory&&t.hideBackButton(),t.options.targetBrowseHistory.length>0&&o&&o.get("id")?(t.$el.find(".cs-left-item-"+o.get("id")).length>0&&(t.$el.find(".cs-left-item-"+o.get("id")+" .csui-browsable").trigger("click"),t.options.selectException=void 0),t.showBackButton()):t.hideBackButton()})}this.options.backBtn=!0},"_searchFailed":function(e){this._isRightView(e.view)?this._displayAlert(e.resp):this.forceClose(e.resp)},"_isRightView":function(e){var t=e.$el[0].className.split(" ");return i.contains(t,"cs-pane-view")},"_addNewPanel":function(e,t){var i=document.createElement("div");return i.className=e,this.$el[t](i),i},"_getViewOptions":function(e,t){var i=e instanceof n.Model,o=i?e:new a({"id":e},{"connector":t});return{"container":o,"collection":new c(void 0,{"node":o,"autofetch":!0,"orderBy":this.options.orderBy,"expand":{"properties":["original_id","parent_id"]},"fields":{"properties":[]},"commands":"default,open","includeResources":["show_hidden"]}),"fetchContainer":!i}},"_displayAlert":function(e){var t=i.str.sformat(r.serverError,"unknown");return e&&(e instanceof u?t=i.str.sformat(r.ViewDenied,e.node.get("name")):e.responseJSON&&(t=e.responseJSON.error)),d.showInformation(t)}});return i.extend(b.prototype,m),b}),csui.define("hbs!csui/dialogs/node.picker/impl/node.picker",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="csui-np-breadcrumbs" class="cs-breadcrumb">\r\n  <div class="breadcrumb-inner" role="navigation" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"breadcrumbAria")||(null!=t?l(t,"breadcrumbAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"breadcrumbAria","hash":{},"loc":{"start":{"line":2,"column":62},"end":{"line":2,"column":80}}}):s))+'"></div>\r\n  <div class="searchheader-inner"></div>\r\n  <div class= \'csui-selected-count-parent\'></div>\r\n</div>\r\n<div id="csui-np-selectviews"></div>\r\n'}});return i.registerPartial("csui_dialogs_node.picker_impl_node.picker",n),n}),csui.define("hbs!csui/dialogs/node.picker/impl/search.list/header/search.result.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-search-header">\r\n    <span class="csui-search-header-title">\r\n        <span class="results-title searchResultsTitle">'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"searchResults"):s,t))+'</span>\r\n        <span class="headerCount searchHeaderCount" aria-live="polite"></span>\r\n    </span>\r\n</div>\r\n'}});return i.registerPartial("csui_dialogs_node.picker_impl_search.list_header_search.result.header",n),n}),csui.define("csui/dialogs/node.picker/impl/search.list/header/search.result.header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","i18n!csui/dialogs/node.picker/impl/nls/lang","hbs!csui/dialogs/node.picker/impl/search.list/header/search.result.header","css!csui/dialogs/node.picker/impl/search.list/search.list"],function(e,t,i,n,o){"use strict";return i.ItemView.extend({"className":"csui-search-data-header","template":o,"templateHelpers":function(){return{"messages":{"searchResults":n.searchResults}}},"constructor":function(e){e||(e={}),i.View.prototype.constructor.apply(this,arguments)},"onRender":function(){var e=this.collection;this.rendered=!0,this.$el.show(),this._assignTotalItemElem(e)},"_assignTotalItemElem":function(t){this.totalCount=0,t&&t.length>0&&(this.totalCount=t.totalCount);var i=this.$el.find(".searchHeaderCount"),o=n.searchFoundZero;return null!==this.totalCount&&(o=e.str.sformat(n.searchFoundAbout,this.totalCount)),i.empty(),i.append(o),!0}})}),csui.define("csui/dialogs/node.picker/impl/node.picker.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/models/node/node.model","csui/models/nodechildren","csui/dialogs/node.picker/impl/select.views/select.views","csui/controls/breadcrumbs/breadcrumbs.view","csui/utils/contexts/factories/ancestors","csui/models/nodeancestors","hbs!csui/dialogs/node.picker/impl/node.picker","i18n!csui/dialogs/node.picker/impl/nls/lang","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/dialogs/node.picker/impl/search.list/header/search.result.header.view"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f){var g=n.LayoutView.extend({"template":h,"className":"csui-node-picker","regions":{"breadcrumbRegion":"#csui-np-breadcrumbs > div.breadcrumb-inner","searchHeaderRegion":"#csui-np-breadcrumbs > div.searchheader-inner","selectViewRegion":"#csui-np-selectviews","selectedCountRegion":".csui-selected-count-parent"},"ui":{"breadcrumb":"#csui-np-breadcrumbs","breadcrumbContent":".breadcrumb-inner","searchHeaderContent":".searchheader-inner","selectViews":"#csui-np-selectviews"},"templateHelpers":function(){return{"breadcrumbAria":p.breadcrumbAria}},"constructor":function(e){e||(e={}),n.LayoutView.prototype.constructor.call(this,e),this.propagateEventsToRegions(),this.setViews(e),this.setBreadcrumbs(e),e.searchView&&(this.updatedBreadcrumbId=e.locationID,this.setSearchResultsHeader(e)),this.onWinRefresh=i.bind(this.windowRefresh,this),t(window).on("resize.app",this.onWinRefresh)},"windowRefresh":function(){var e=t(".cs-breadcrumb"),i=e.is(":visible")?e.height():0,n=this.$el.height()-i;window.chrome&&n>0&&this.selectViews.$el.css("height",n+"px"),this.selectViews.triggerMethod("dom:refresh",this.selectViews),this.breadcrumbs&&this.breadcrumbs.refresh()},"onDestroy":function(){t(window).off("resize.app",this.onWinRefresh)},"onRender":function(){this.options.searchView&&this.searchHeaderRegion.show(this.searchHeaderView),this.breadcrumbs&&this.breadcrumbRegion.show(this.breadcrumbs),this.selectViews.options.navigateFromHistory=this.options.navigateFromHistory,this.selectViewRegion.show(this.selectViews),this.options.commandType.multiSelect&&this.selectedCountRegion.show(this.options.selectedCountView)},"onDomRefresh":function(){this.windowRefresh()},"onShow":function(){i.each(this.regionManager.regions,function(e){e.currentView&&e.currentView.trigger("show")}),this.options.container||this.options.searchView||(this.options.commandType.multiSelect?this.ui.searchHeaderContent.hide():(this.ui.breadcrumb.hide(),this.ui.selectViews.addClass("csui-full-height")))},"setViews":function(e){var t=this.selectViews=new a(e);this.listenTo(t,"changed",this.updateBreadcrumbs),this.listenTo(t,"update:searchHeader",this.updateSearchResultHeader),this.listenTo(t,"change:complete",i.bind(this.trigger,this,"change:complete")),this.listenTo(t,"click:location",i.bind(this.trigger,this,"open:location")),this.listenTo(t,"change:location",i.bind(this.trigger,this,"change:location")),this.listenTo(t,"back:toSearch",function(e){this.trigger("back:toSearch",e)}),this.listenTo(t,"backto:folder",function(e){this.trigger("backto:folder",e)}),this.listenTo(t,"close",this.close).listenTo(t,"toggle:breadcrumbs",this.updateBreadcrumbs),this.listenTo(t,"add:to:collection",i.bind(this.trigger,this,"add:to:collection")),this.listenTo(t,"remove:from:collection",i.bind(this.trigger,this,"remove:from:collection"))},"getSelection":function(){return this.options.commandType.multiSelect?i.values(this.options.selectedCountList):i.values(this.selectViews.getSelection())},"getNumberOfSelectItems":function(){return this.options.commandType.multiSelect?i.size(this.options.selectedCountList):this.selectViews.getNumberOfSelectItems()},"close":function(){this.destroy(),this.trigger("close")},"updateBreadcrumbs":function(e){if(this.updatedBreadcrumbId=void 0,this.breadcrumbNode)this.breadcrumbNode.set("id",e);else if(e){this.getAncestors(e).fetch()}return this.listenTo(this.breadcrumbs,"after:synchronized",this.onAfterBreadcrumbsSynchronized),!0},"getAncestors":function(e){var t=new l({"id":e},{"connector":this.options.connector}),i={"node":t,"autofetch":!0},n=new d(void 0,i);return this.breadcrumbs=new c({"node":t,"collection":n}),this.breadcrumbs.synchronizeCollections(),this.breadcrumbNode||(this.breadcrumbNode=t),n},"setBreadcrumbs":function(e){var t=e.container||e.initialContainer,i=t?t.get("id"):0;if(!i||0===i)return this.getAncestors(0),void this.setBreadcrumbEvents();if(e.container){this.getAncestors(i).fetch()}else this.getAncestors(0),this.setBreadcrumbEvents();return this.setBreadcrumbEvents(),!0},"showBackButton":function(){this.selectViews.showBackButton()},"setBreadcrumbEvents":function(){this.listenTo(this.breadcrumbs,"before:defaultAction",function(e){var t=this.selectViews,i=this;t.newLeftView(e.node).done(function(e){t.setParentNodeAsTarget(e.container),i.trigger("change:complete",e.container)})}),this.listenTo(this.breadcrumbs,"after:synchronized",this.onAfterBreadcrumbsSynchronized)},"onAfterBreadcrumbsSynchronized":function(){this.ui.breadcrumb.hasClass("cs-breadcrumb")&&(this.ui.breadcrumb.show(),this.ui.breadcrumbContent.show(),this.ui.searchHeaderContent.hide(),this.ui.selectViews.removeClass("csui-full-height"),1===this.breadcrumbs.collection.length&&(this.options.targetBrowseHistory=[]),this.windowRefresh())},"setSearchResultsHeader":function(e){return this.searchHeaderView=new f({"collection":this.collection}),!0},"updateSearchResultHeader":function(){this.options.searchView&&(this.options.container?this.ui.searchHeaderContent.removeClass("csui-non-container-padding"):this.ui.searchHeaderContent.addClass("csui-non-container-padding"),this.ui.breadcrumbContent.hide(),this.ui.searchHeaderContent.show(),this.searchHeaderView._assignTotalItemElem(this.collection))}});return i.extend(g.prototype,m),g}),csui.define("csui/dialogs/node.picker/start.locations/start.location.collection",["require","module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone"],function(e,t,i,n,o){"use strict";function s(e){return e.lastIndexOf("/")>=0?e:"csui/dialogs/node.picker/start.locations/"+e}function l(e){return!i.contains(c.blacklist,e)&&(!c.whitelist.length||i.contains(c.whitelist,e))}
var r=t.config(),a=r.startLocations||[],c=r.masks||{};i.isArray(a)||(a=Array.prototype.concat.apply([],i.values(a))),c=i.reduce(i.values(c),function(e,t){return{"blacklist":e.blacklist.concat(t.blacklist||[]),"whitelist":e.whitelist.concat(t.whitelist||[])}},{"blacklist":[],"whitelist":[]}),c={"blacklist":i.unique(c.blacklist),"whitelist":i.unique(c.whitelist)},a=i.chain(a).map(s).filter(l).unique().value();var u=o.Model.extend({"defaults":{"id":null,"name":null,"icon":null,"invalid":!1,"factory":null,"unselectable":!0},"constructor":function(e,t){o.Model.prototype.constructor.apply(this,arguments)},"sync":function(e,t,i){if("read"!==e)throw new Error("Only fetching the widget is supported.");var o=this;return i||(i={}),this._resolveFactory(i).then(function(){return o.get("factory").updateLocationModel(o)}).then(function(){var e=o.toJSON();i.success&&i.success(e,i),o.trigger("sync",o,e,i)},function(){var e=o.get("error");return i.error&&i.error(e,i),o.trigger("error",o,e,i),n.Deferred().reject(e)})},"_resolveFactory":function(t){var i=this,o=n.Deferred(),s=this.getFactoryData(),l=this.getFactoryModulePath(s);return e([l],function(e){i.set("factory",new e(t)),o.resolve()},function(e){i.set("error",e),t.ignoreErrors?o.resolve():o.reject(e)}),o.promise()},"getFactoryData":function(){var e,t=this.get("id"),i=t.lastIndexOf("/");return i<0?e="csui/dialogs/node.picker/start.locations/"+t:(e=t,t=t.substring(i+1)),{"name":t,"path":e}},"getFactoryModulePath":function(e){return e.path+"/"+e.name+".factory"}});return o.Collection.extend({"model":u,"constructor":function(e){e||(e={});var t=e.startLocations;t=t?i.chain(t).concat(["search.location","default.location"]).map(s).filter(l).unique().value():a;var n=i.map(t,function(e){return{"id":e}});o.Collection.prototype.constructor.call(this,n,e)},"sync":function(e,t,i){if("read"!==e)throw new Error("Only fetching the start locations is supported.");var n=this;return i||(i={}),this._resolveFactories(i).then(function(){if(!1!==i.removeInvalid){var e=n.where({"invalid":!0});n.remove(e)}var t=n.toJSON();i.success&&i.success(t,i),n.trigger("sync",n,t,i)})},"_resolveFactories":function(e){var t=this.filter(function(e){return e.has("id")&&!(e.has("factory")||e.has("error"))}),o=i.defaults({"ignoreErrors":!0},i.omit(e,"success","error")),s=i.invoke(t,"fetch",o);return n.whenAll.apply(n,s)}})}),csui.define("hbs!csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/apply.properties.selector",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li role="presentation" data-optionid="'+e.escapeExpression(e.lambda(null!=t?s(t,"id"):t,t))+'">\r\n      <a role="menuitem" tabindex="-1" href="#">\r\n        <span class="cs-label">'+e.escapeExpression(e.lambda(null!=t?s(t,"name"):t,t))+"</span>\r\n      </a>\r\n    </li>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button id="'+e.escapeExpression((l=null!=(l=r(i,"id")||(null!=t?r(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":1,"column":12},"end":{"line":1,"column":18}}}):l))+'" class="binf-btn binf-btn-default binf-dropdown-toggle csui-acc-focusable" data-binf-toggle="dropdown"\r\n        aria-haspopup="true" aria-expanded="false" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"applyPropertiesAria")||(null!=t?r(t,"applyPropertiesAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"applyPropertiesAria","hash":{},"loc":{"start":{"line":2,"column":63},"end":{"line":2,"column":86}}}):l))+'">\r\n  <span class="cs-label">'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":25},"end":{"line":3,"column":33}}}):l))+'</span>\r\n  <span class="cs-icon icon-caret-down"></span>\r\n</button>\r\n<ul class="binf-dropdown-menu" role="menu" aria-labelledby="'+e.escapeExpression((l=null!=(l=r(i,"id")||(null!=t?r(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":6,"column":60},"end":{"line":6,"column":66}}}):l))+'">\r\n'+(null!=(s=r(i,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"applyPropertiesOptions"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":2},"end":{"line":13,"column":11}}}))?s:"")+'  <li role="presentation" class="binf-divider"></li>\r\n  <li role="presentation" class="open-selected-properties">\r\n    <a role="menuitem"  tabindex="-1" href="#">\r\n      <span class="cs-icon"></span>\r\n      <span class="cs-label">'+e.escapeExpression((l=null!=(l=r(i,"openSelectedProperties")||(null!=t?r(t,"openSelectedProperties"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"openSelectedProperties","hash":{},"loc":{"start":{"line":18,"column":29},"end":{"line":18,"column":55}}}):l))+"</span>\r\n    </a>\r\n  </li>\r\n</ul>\r\n"}});return i.registerPartial("csui_dialogs_node.picker_impl_header_apply.properties.selector_impl_apply.properties.selector",n),n}),csui.define("csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/nls/root/lang",{"ApplyPropertiesAria":"Select properties handling","KeepOriginalProperties":"Keep original categories","ApplyDestinationProperties":"Apply destination categories","CombineAllProperties":"Combine all categories","OpenSelectedProperties":"Open properties page"}),csui.define("css!csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/apply.properties.selector",[],function(){}),csui.define("csui/dialogs/node.picker/impl/header/apply.properties.selector/apply.properties.selector.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/apply.properties.selector","i18n!csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/nls/lang","css!csui/dialogs/node.picker/impl/header/apply.properties.selector/impl/apply.properties.selector","csui/lib/binf/js/binf"],function(e,t,i,n,o,s,l){"use strict";var r=n.ItemView.extend({"_applyOptions":void 0,"selected":void 0,"openSelectedProperties":!1,"className":"cs-apply-properties-selector binf-dropdown","template":s,"behaviors":{"TabableRegion":{"behaviorClass":o}},"ui":{"toggle":">.binf-dropdown-toggle","selectedLabel":">.binf-dropdown-toggle >.cs-label","iconOpenSelectedProperties":"li.open-selected-properties > a > span.cs-icon"},"events":{"click li[data-optionid]":"onClickPropertiesOption","click li.open-selected-properties":"onClickOpenSelectedProperties","keydown":"onKeyInView","keyup":"onKeyUpInView"},"constructor":function t(i){i||(i={}),e.defaults(i,{"startSelection":t.KEEP_ORIGINAL_PROPERTIES}),n.ItemView.prototype.constructor.apply(this,arguments)},"onKeyInView":function(e){if(27===e.keyCode&&this.$el.hasClass("binf-open"))return this.$el.removeClass("binf-open"),this.$('*[tabindex = "0"]').trigger("focus"),this.isKeydownClosedDropDown=!0,!1;27!==e.keyCode||this.$el.hasClass("binf-open")||(this.isKeydownClosedDropDown=!1)},"onKeyUpInView":function(e){return!this.isKeydownClosedDropDown&&27===e.keyCode||27!==e.keyCode&&void 0},"onClickPropertiesOption":function(e){e.preventDefault(),e.stopPropagation(),this._setSelected(parseInt(t(e.currentTarget).attr("data-optionid"))),this._showSelected(),this.ui.toggle.trigger("click"),this.trigger("property:click:event"),this.$el.find("button.binf-dropdown-toggle").trigger("focus")},"onClickOpenSelectedProperties":function(e){e.preventDefault(),e.stopPropagation(),this.openSelectedProperties=!this.openSelectedProperties,this._showOpenSelectedProperties(),this.ui.toggle.trigger("click"),this.$el.find("button.binf-dropdown-toggle").trigger("focus")},"initialize":function(){this._setupApplyOptions(),-1!==e.indexOf(e.pluck(this._applyOptions,"id"),this.options.selected)?this._setSelected(this.options.selected):this._setSelected(r.KEEP_ORIGINAL_PROPERTIES),this.listenTo(i,"closeToggleAction",this._closeToggle)},"templateHelpers":function(){return{"id":e.uniqueId("optionsDropdown"),"applyPropertiesOptions":this._applyOptions,"applyPropertiesAria":l.ApplyPropertiesAria,"openSelectedProperties":l.OpenSelectedProperties}},"currentlyFocusedElement":function(){return this.$el.find("button")},"accDeactivateTabableRegion":function(){this._closeToggle()},"onRender":function(){this.ui.toggle.binf_dropdown(),this._showSelected(),this._showOpenSelectedProperties()},"_getOptionName":function(t){var i;return i=e.indexOf(e.pluck(this._applyOptions,"id"),t),-1===i?"":this._applyOptions[i].name},"_setupApplyOptions":function(){this._applyOptions=[{"id":r.KEEP_ORIGINAL_PROPERTIES,"name":l.KeepOriginalProperties},{"id":r.APPLY_DESTINATION_PROPERTIES,"name":l.ApplyDestinationProperties}],!0===this.options.includeCombineProperties&&this._applyOptions.push({"id":r.COMBINE_ALL_PROPERTIES,"name":l.CombineAllProperties})},"_setSelected":function(e){this.selected=e},"_showSelected":function(){this.ui.selectedLabel.text(this._getOptionName(this.selected)),this.$el.find("li[data-optionid]").removeClass("binf-active"),this.$el.find("li[data-optionid="+this.selected+"]").addClass("binf-active")},"_showOpenSelectedProperties":function(){!0===this.openSelectedProperties?(this.ui.toggle.attr("aria-expanded","true"),this.ui.iconOpenSelectedProperties.removeClass("icon-checkbox").addClass("icon-checkbox-selected")):(this.ui.toggle.attr("aria-expanded","false"),this.ui.iconOpenSelectedProperties.removeClass("icon-checkbox-selected").addClass("icon-checkbox"))},"_closeToggle":function(){this.ui.toggle.parent&&this.ui.toggle.parent().hasClass("binf-open")&&this.ui.toggle.binf_dropdown("toggle")}});return r.KEEP_ORIGINAL_PROPERTIES=1,r.APPLY_DESTINATION_PROPERTIES=2,r.COMBINE_ALL_PROPERTIES=3,r}),csui.define("csui/dialogs/node.picker/impl/search.list/search.query.model",["module","csui/lib/underscore","csui/lib/backbone"],function(e,t,i){var n=i.Model.extend({"constructor":function e(t,i){e.__super__.constructor.apply(this,arguments)},"toJSON":function(){return n.__super__.toJSON.apply(this,arguments)}});return n}),csui.define("csui/dialogs/node.picker/impl/header/search.box/impl/search.box.model",["module","csui/lib/underscore","csui/lib/backbone"],function(e,t,i){var n=i.Model.extend({"constructor":function e(t,i){e.__super__.constructor.apply(this,arguments)},"toJSON":function(){return n.__super__.toJSON.apply(this,arguments)}});return n}),csui.define("csui/dialogs/node.picker/impl/header/search.box/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/dialogs/node.picker/impl/header/search.box/impl/nls/root/lang",{"placeholder":"Search","clearerTitle":"Clear keywords","searchBoxTitle":"Enter your search term","searchOptionsTitle":"Show search options","searchFromHere":"Search from here","searchFromHereAria":"Select: search from here","searchIconTitle":"Search","searchIconAria":"Open searchbar","searchOptionsSelect":"Select: ","startSearch":"Start search"}),csui.define("hbs!csui/dialogs/node.picker/impl/header/search.box/impl/search.box",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="search-bar">\r\n  <div class="search-bar-content">\r\n    <div class="csui-search-input-container">\r\n      <input type="search" class="csui-input csui-acc-focusable"\r\n             placeholder="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"placeholder"):s,t))+'" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"searchBoxTitle"):s,t))+'" tabindex="0"\r\n             data-cstabindex="-1" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"searchBoxTitle"):s,t))+'">\r\n      <div class="csui-search-options-dropdown"></div>\r\n    </div>\r\n    <span class="csui-clearer formfield_clear csui-acc-focusable" title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"clearerTitle"):s,t))+'"\r\n          aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"clearerTitle"):s,t))+'" role="button" tabindex="0" data-cstabindex="-1"></span>\r\n  </div>\r\n</div><a href="javascript:void(0);"\r\n         class="icon icon-global-search csui-header-search-icon csui-acc-focusable"\r\n         title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"searchIconTitle"):s,t))+'" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"messages"):t)?l(s,"searchIconAria"):s,t))+'"\r\n         tabindex="0" data-cstabindex="-1" role="button" aria-haspopup="true" aria-expanded="false"></a>\r\n'}});return i.registerPartial("csui_dialogs_node.picker_impl_header_search.box_impl_search.box",n),n}),csui.define("hbs!csui/dialogs/node.picker/impl/header/search.box/impl/search.slice.dropdown",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return" icon-checkbox-selected "},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-selected-checkbox csui-slice-checkbox csui-checkbox-primary" tabindex="0"\r\n     data-cstabindex="-1" aria-label="'+e.escapeExpression(e.lambda(null!=t?r(t,"searchFromHereAria"):t,t))+'">\r\n  <input type="checkbox" '+e.escapeExpression((l=null!=(l=r(i,"checked")||(null!=t?r(t,"checked"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"checked","hash":{},"loc":{"start":{"line":3,"column":25},"end":{"line":3,"column":36}}}):l))+' class="csui-searchbox-option" name="'+e.escapeExpression(e.lambda(null!=t?r(t,"nodeId"):t,t))+'"\r\n         id="'+e.escapeExpression(e.lambda(null!=t?r(t,"nodeIdSO"):t,t))+'" value="'+e.escapeExpression(e.lambda(null!=t?r(t,"nodeId"):t,t))+'">\r\n  <label class="csui-search-slice-name csui-selectlabel" for="'+e.escapeExpression(e.lambda(null!=t?r(t,"nodeIdSO"):t,t))+'"\r\n         title="'+e.escapeExpression(e.lambda(null!=t?r(t,"select"):t,t))+e.escapeExpression(e.lambda(null!=t?r(t,"fromHere"):t,t))+'">\r\n          <span role="checkbox" aria-checked="true" class="csui-control">\r\n            <span class="csui-icon icon-checkbox'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"checked"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":48},"end":{"line":8,"column":94}}}))?s:"")+'"></span>\r\n          </span>\r\n    <span class="cs-ellipsis">'+e.escapeExpression(e.lambda(null!=t?r(t,"fromHere"):t,t))+"</span>\r\n  </label>\r\n</div>\r\n"}});return i.registerPartial("csui_dialogs_node.picker_impl_header_search.box_impl_search.slice.dropdown",n),n}),csui.define("css!csui/dialogs/node.picker/impl/header/search.box/impl/search.box",[],function(){}),csui.define("csui/dialogs/node.picker/impl/header/search.box/search.box.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/dialogs/node.picker/impl/search.list/search.query.model","csui/dialogs/node.picker/impl/header/search.box/impl/search.box.model","csui/behaviors/keyboard.navigation/tabable.region.behavior","i18n!csui/dialogs/node.picker/impl/header/search.box/impl/nls/lang","hbs!csui/dialogs/node.picker/impl/header/search.box/impl/search.box","hbs!csui/dialogs/node.picker/impl/header/search.box/impl/search.slice.dropdown","i18n","css!csui/dialogs/node.picker/impl/header/search.box/impl/search.box","csui/lib/jquery.ui/js/jquery-ui"],function(e,t,i,n,o,s,l,r,a,c,u){"use strict";var d=t.defaults({},e.config(),{"showInput":!1,"inputValue":"","nodeName":"","searchFromHere":!0});return n.ItemView.extend({"className":"csui-search-box","template":a,"templateHelpers":function(){return{"messages":{"placeholder":r.placeholder,"clearerTitle":r.clearerTitle,"searchIconTitle":r.searchIconTitle,"searchBoxTitle":r.searchBoxTitle,"searchOptionsTitle":r.searchOptionsTitle,"searchOptionsSelect":r.searchOptionsSelect,"startSearch":r.startSearch,"searchIconAria":r.searchIconAria}}},"sliceDropDownTemplate":c,"ui":{"input":".csui-input","clearer":".csui-clearer","searchIcon":".csui-header-search-icon"},"events":{"click .csui-header-search-icon":"searchIconClicked","focusin @ui.input":"hideStartLocations","click @ui.input":"hidePopover","keyup @ui.input":"inputTyped","paste @ui.input":"inputChanged","keydown @ui.clearer":"clearerClicked","change @ui.input":"inputChanged","click @ui.clearer":"clearerClicked","click .csui-searchbox-option":"selectSearchOption","keydown .csui-slice-checkbox":"changeSearchOption","focusout @ui.input":"hideSearchOptionsDropDown","focusout .csui-search-options-dropdown":"hideSearchOptionsDropDown","mouseleave .csui-search-options-dropdown":"hideSearchOptionsDropDown"},"behaviors":{"TabableRegion":{"behaviorClass":l}},"constructor":function(e){e||(e={}),e.data=t.defaults({},e.data,d),this.direction=u.settings.rtl?"left":"right",n.ItemView.prototype.constructor.apply(this,arguments),this.model=new o(void 0,e),this.searchboxModel=new s(void 0,e),this.listenTo(this.searchboxModel,"change",this.prepareTargetBrowsedropdown),this.listenTo(this.searchboxModel,"change",this.searchIconToggle),this.listenTo(this.searchboxModel,"change",this.hideSearchBar),this.model.get("where")&&i(document).bind("click."+this.cid+" keydown."+this.cid,this,this._hideSearchBar),this.options.disableSearchFromHere&&(this.options.data.searchFromHere=!1)},"isSearchbarVisible":function(){return this.$(".search-bar").is(":visible")},"onRender":function(){var e=this.options.data.inputValue||this.model.get("where");e&&(this._setInputValue(e),this.$el.find(".search-bar").show()),(this.options.data.showInput||e)&&(this.triggerMethod("before:show:input",this),this.ui.input.show(),this.triggerMethod("show:input",this)),this.ui.searchIcon.removeClass("icon-header-search_enabled").addClass("icon-header-search");var t=this;this.$el.find("*[data-cstabindex]").on("focus",function(){t._updateFocusables(this)})},"_updateFocusables":function(e){var t=i(e);this.focusedElement&&this.focusedElement.removeClass(l.accessibilityActiveElementClass),t.addClass(l.accessibilityActiveElementClass),this.focusedElement=t},"currentlyFocusedElement":function(e){if(this.$el){var t=this.$el.find("*[data-cstabindex=-1]");t.length&&t.prop("tabindex",0);!(!!e&&e.shiftKey)&&this.$el.find(".search-bar").length&&this.$el.find(".search-bar").is(":visible")?this.focusElement=this.$el.find(".csui-input"):this.$el.find("a.csui-acc-focusable").length&&(this.focusElement=this.$el.find("a.csui-acc-focusable"))}return this.focusElement},"onLastTabElement":function(e){var t=this.$("[data-cstabindex=-1]"),n=t.length-1,o=this;if(this.$el.find("*[data-cstabindex]").on("focus",function(){o._updateFocusables(this)}),t.length){var s=n;if(e)for(var r=e?0:n;t[n];e?r++:r--)if(i(t[r]).is(":visible")){s=r;break}var a=t[s];return this.$(".csui-focus").removeClass("csui-focus"),i(a).hasClass(l.accessibilityActiveElementClass)}return!0},"resetPageDefaults":function(e){this.model.resetDefaults=!0},"searchIconClicked":function(e){if(i(document).bind("click."+this.cid+" keydown."+this.cid,this,this._hideSearchBar),this.ui.input.toggleClass(l.accessibilityFocusableClass),this.resetPageDefaults(e),this.searchboxModel.nodeId&&this.$el.find(".csui-searchbox-option").length>0&&(this.$el.find(".csui-searchbox-option")[0].checked=this.options.data.searchFromHere),this.$el.find(".search-bar").is(":visible")){this.$el.find("a.icon-global-search").attr("aria-expanded","true");var t=this.ui.input.val().trim();t&&(this._setInputValue(t),i(e.currentTarget).attr("title",r.startSearch).attr("aria-label",r.startSearch));var n="",o=this.$el.find(".csui-searchbox-option:checked");if(o&&(n=o.val()),history.state&&history.state.search&&(this.previousState=history.state.search),t){this.model.clear({"silent":!0});var s={};s.location_id1=n,t&&(s.where=t),this.model.set(s),this.trigger("change:searchterm",this.model),this._updateInput(e)}this.previousState&&(this.model.prevSearchState=this.previousState)}else if(this.$el&&this.$el.parents()){var a=this.$el.parents(".target-browse ").find("div[class='load-container']");if(a&&!a.hasClass("binf-hidden")){this.$el.find("a.icon-global-search").attr("aria-expanded","true");var c=this;this.hideStartLocations(),this.$el.find(".search-bar").show("blind",{"direction":this.direction},"200",function(){c.ui.input.trigger("focus")}),""===this.model.attributes.where&&(i(e.currentTarget).title="",i(e.currentTarget).addClass("icon-header-search-nohover"))}}},"showStartLocations":function(e){this.trigger("show:startLocation")},"hideStartLocations":function(e){this.trigger("hide:startLocation")},"inputTyped":function(e){var t=this.ui.input.val().trim();13===e.which?(e.preventDefault(),e.stopPropagation(),this._setInputValue(t),t&&this.searchIconClicked(e),this.previousValue!=t&&(this.previousValue=t)):27==e.keyCode?this.ui.searchIcon.is(":focus")?(e.preventDefault(),e.stopImmediatePropagation()):(this.hideSearchBar(),this.ui.searchIcon.trigger("focus"),e&&e.stopPropagation()):40===e.which&&i(".csui-search-options-dropdown").is(":visible")?this.$el.find(".csui-selected-checkbox").trigger("focus").trigger("focus"):this.inputChanged(e)},"inputChanged":function(e){var t=this.ui.input.val();this.searchIconToggle(),this.ui.clearer.toggle(!!t.length),this.showOptionsDropdown(e)},"showOptionsDropdown":function(e){var t=e||window.event;this.searchboxModel.nodeId&&27!==t.which&&(this.$el.find(".csui-search-options-dropdown").show(),this.$el.find(".csui-searchbox-option").length>0&&(this.$el.find(".csui-searchbox-option")[0].checked=this.options.data.searchFromHere,this.selectSearchOption()))},"prepareTargetBrowsedropdown":function(e){if(this.searchboxModel.nodeId){this.searchOptions={},this.searchOptions.nodeId=this.searchboxModel.nodeId,this.searchOptions.nodeIdSO=t.uniqueId("csui-so-"+this.searchboxModel.nodeId),this.searchOptions.select=r.searchOptionsSelect,this.searchOptions.fromHere=r.searchFromHere,this.searchOptions.selectFromHereAria=r.searchFromHereAria;var i=this.sliceDropDownTemplate(this.searchOptions);this.$el.find(".csui-search-options-dropdown").html(i),this.hideSearchOptionsDropDown(),this.ui.searchIcon.show(),this.ui.searchIcon.removeClass("icon-header-search_enabled").addClass("icon-header-search")}else this.destroyOptionspopover()},"destroyOptionspopover":function(e){this.$el.find(".csui-search-options-dropdown").html(""),this.$el.find(".csui-search-options-dropdown").hide()},"changeSearchOption":function(e){if(13===e.keyCode||32===e.keyCode){this.$el.find(".csui-searchbox-option:checked").length>0?this.$el.find(".csui-searchbox-option")[0].checked=!1:this.$el.find(".csui-searchbox-option")[0].checked=!0,this.selectSearchOption(e)}},"selectSearchOption":function(e){this.$el.find(".csui-searchbox-option:checked").length>0?(this.options.data.searchFromHere=!0,this.$el.find(".csui-icon").addClass("icon-checkbox-selected"),this.$el.find('.csui-selected-checkbox input[type="checkbox"]').attr("aria-checked",!0)):(this.options.data.searchFromHere=!1,this.$el.find(".csui-icon").removeClass("icon-checkbox-selected"),this.$el.find('.csui-selected-checkbox input[type="checkbox"]').attr("aria-checked",!1))},"hideSearchOptionsDropDown":function(){var e=this;e.$el.find(".csui-searchbox-option").attr("tabindex",-1),setTimeout(function(){if(e.$el.find(".csui-selected-checkbox")[0]===document.activeElement)return!1;var t=e;return e.popoverTimer&&clearTimeout(e.popoverTimer),e.popoverTimer=setTimeout(function(){t.showSearchOptionDropDown()},800),!0},100)},"showSearchOptionDropDown":function(){this.$el.find(".csui-search-options-dropdown").is(":hover")?this.popoverTimer&&clearTimeout(this.popoverTimer):this.$el.find(".csui-search-options-dropdown").hide()},"clearerClicked":function(e){"click"!==e.type&&13!==e.keyCode||(e.preventDefault(),e.stopPropagation(),this._setInputValue(""),this.ui.searchIcon.removeClass("icon-header-search_enabled").addClass("icon-header-search"),this.hidePopover(e),this.ui.input.trigger("focus"))},"setSlices":function(e){e.preventDefault(),e.stopPropagation();var t=i(e.target).data("sliceid"),n=this.$el.find(".csui-search-popover-checked"),o=this.$el.find(".icon-listview-checkmark"),s=o.length>0&&o.attr("id")===i(e.target).data("sliceid")+"";this.options.sliceString="",i(n).removeClass("icon-listview-checkmark"),s||(i("#"+t).addClass("icon-listview-checkmark"),this.options.sliceString="{"+t+"}"),this.slice=this.options.sliceString},"hidePopover":function(e){"none"!==i(".csui-search-box-slice-popover").css("display")&&i(".csui-search-box-slice-popover").binf_popover("hide"),this.showOptionsDropdown(e)},"hideSearchBar":function(e){var t=this.$el.find(".search-bar"),i=this;this.ui.input.val(""),t.hide("blind",{"direction":this.direction},"200",function(){i.showStartLocations()}),this.$el.find(".csui-header-search-icon").removeClass("icon-header-search_enabled").addClass("icon-header-search")},"_hideSearchBar":function(e){var t=e||window.event,n=i(".search-bar"),o=e.data;n.is(":visible")&&(("keydown"!==t.type||27!==t.keyCode&&27!==t.which)&&(i(t.target).closest(n).length||"click"!==t.type||i(t.target).closest(".csui-header-search-icon").length||i(t.target).closest(".esoc-activityfeed-invisiblebutton").length)||(i(this).find(".icon-header-search-nohover").removeClass("icon-header-search-nohover"),i(this).find(".csui-input").val(""),o.$el.find(n).hide("blind",{"direction":e.data.direction},"200",function(){o.showStartLocations(),o.focusedElement=void 0,o.currentlyFocusedElement().trigger("focus")}),i(this).find(".csui-search-box-slice-popover").binf_popover("hide"),i(this).find(".csui-search-box .csui-header-search-icon").attr("title",r.searchIconTitle),i(this).find(".csui-search-box .csui-header-search-icon").attr("aria-label",r.searchIconAria),i(this).find(".csui-search-box .csui-header-search-icon").attr("aria-expanded","false"),e.data.slice=e.data.model.get("slice"),this.$el&&this.$el.parents(".csui-navbar").find(".binf-navbar-brand").addClass("binf-navbar-collapse"),i(this).find(".csui-search-options-dropdown").hide(),i(this).find(".csui-search-box .csui-header-search-icon").removeClass("icon-header-search_enabled").addClass("icon-header-search"),i(document).unbind("click."+this.cid+" keydown."+this.cid)))},"_updateInput":function(e){if(this._isRendered){var t=this.model.get("where")||"";this._setInputValue(t)}},"_setInputValue":function(e){this.ui.input.val(e),this.ui.clearer.toggle(!!e.length),this.searchIconToggle()},"searchIconToggle":function(){this.ui.input.val().trim()?(this.ui.searchIcon.removeClass("icon-header-search").addClass("icon-header-search_enabled"),this.ui.input.addClass("csui-input-focus"),i(this.ui.searchIcon).attr("title",r.startSearch).attr("aria-label",r.startSearch),i(this.ui.searchIcon).removeClass("icon-header-search-nohover")):(this.ui.searchIcon.removeClass("icon-header-search_enabled").addClass("icon-header-search"),this.ui.input.removeClass("csui-input-focus"),this.$el.find(".search-bar").is(":visible")&&(i(this.ui.searchIcon).addClass("icon-header-search-nohover"),i(this.ui.searchIcon).attr("title",r.searchBoxTitle).attr("aria-label",r.searchBoxTitle)))}})}),csui.define("hbs!csui/dialogs/node.picker/impl/header/header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <h2 class="csui-title">'+e.escapeExpression((l=null!=(l=r(i,"title")||(null!=t?r(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":2,"column":25},"end":{"line":2,"column":34}}}):l))+"</h2>\r\n  <div class='csui-filtername-container'>\r\n    <span class=\"cs-icon-required category_required\" title=\"\"></span>\r\n    <input type='text' class='csui-filtername' placeholder=\""+e.escapeExpression((l=null!=(l=r(i,"placeHolderName")||(null!=t?r(t,"placeHolderName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"placeHolderName","hash":{},"loc":{"start":{"line":5,"column":60},"end":{"line":5,"column":79}}}):l))+'" tabindex="-1"\r\n           data-cstabindex="-1" aria-invalid="false" aria-errormessage="csui-filtername-error-id" />\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"mlDataEnabled"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":6},"end":{"line":13,"column":13}}}))?s:"")+'  <div class="csui-filtername-error-wrapper binf-hidden">\r\n      <span class="binf-text-danger csui-filtername-error" id="csui-filtername-error-id"></span>\r\n  </div>\r\n  </div>\r\n'},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <span class="csui-multilingual-icon-label">\r\n      <button class="icon csui-multilingual-icon">\r\n          '+(null!=(s=(l(i,"icon-v2")||t&&l(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"small","iconName":"csui_action_language_switcher24"},"loc":{"start":{"line":10,"column":10},"end":{"line":10,"column":93}}}))?s:"")+"\r\n      </button>\r\n    </span>\r\n"},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <h2 class="csui-title">'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":19,"column":25},"end":{"line":19,"column":34}}}):s))+"</h2>\r\n"},"6":function(e,t,i,n,o){return"csui-no-search"},"8":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"saveFilter"):t,{"name":"if","hash":{},"fn":e.noop,"inverse":e.program(9,o,0),"loc":{"start":{"line":24,"column":4},"end":{"line":26,"column":11}}}))?s:"")+'    <div class="csui-start-locations binf-dropdown" ></div>\r\n'},"9":function(e,t,i,n,o){return'      <span class="csui-separator"></span>\r\n'},"11":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-global-search '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"saveFilter"):t,{"name":"if","hash":{},"fn":e.program(12,o,0),"inverse":e.noop,"loc":{"start":{"line":32,"column":37},"end":{"line":32,"column":79}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"propertiesSeletor"):t,{"name":"if","hash":{},"fn":e.program(14,o,0),"inverse":e.program(16,o,0),"loc":{"start":{"line":32,"column":79},"end":{"line":33,"column":84}}}))?s:"")+'"></div>\r\n'},"12":function(e,t,i,n,o){return"csui-save-filter "},"14":function(e,t,i,n,o){return""},"16":function(e,t,i,n,o){return"csui-no-properties-selector for-shortcut"},"18":function(e,t,i,n,o){return'      <div class="apply-properties-selector"></div>\r\n'},
"20":function(e,t,i,n,o){return"csui-no-properties-selector"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"saveFilter"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":20,"column":7}}}))?s:"")+'\r\n<div class="csui-target-controls '+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.globalSearch !== false",{"name":"xif","hash":{},"fn":e.program(6,o,0),"inverse":e.noop,"loc":{"start":{"line":22,"column":33},"end":{"line":22,"column":93}}}))?s:"")+'">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"locationSelector"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":23,"column":2},"end":{"line":28,"column":9}}}))?s:"")+'\r\n  <div class="csui-target-search-property-container">\r\n'+(null!=(s=(l(i,"xif")||t&&l(t,"xif")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},"this.globalSearch !== false",{"name":"xif","hash":{},"fn":e.program(11,o,0),"inverse":e.noop,"loc":{"start":{"line":31,"column":4},"end":{"line":34,"column":12}}}))?s:"")+"\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"propertiesSeletor"):t,{"name":"if","hash":{},"fn":e.program(18,o,0),"inverse":e.noop,"loc":{"start":{"line":36,"column":4},"end":{"line":38,"column":11}}}))?s:"")+'    <span class="csui-separator '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"propertiesSeletor"):t,{"name":"if","hash":{},"fn":e.program(14,o,0),"inverse":e.program(20,o,0),"loc":{"start":{"line":39,"column":32},"end":{"line":40,"column":69}}}))?s:"")+'"></span>\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_dialogs_node.picker_impl_header_header",n),n}),csui.define("css!csui/dialogs/node.picker/impl/header/header",[],function(){}),csui.define("csui/dialogs/node.picker/impl/header/header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/dialogs/node.picker/impl/header/apply.properties.selector/apply.properties.selector.view","csui/dialogs/node.picker/impl/header/start.location.selector/start.location.selector.view","csui/dialogs/node.picker/impl/header/search.box/search.box.view","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/dialogs/node.picker/impl/header/header","i18n!csui/dialogs/node.picker/impl/nls/lang","csui/lib/handlebars.helpers.xif","css!csui/dialogs/node.picker/impl/header/header"],function(e,t,i,n,o,s,l,r,a,c,u){var d=n.LayoutView.extend({"template":c,"className":"cs-header-control","regions":{"startLocations":".csui-start-locations","globalSearch":".csui-global-search","properties":".apply-properties-selector"},"ui":{"saveFilter":".csui-filtername","saveFilterError":".csui-filtername-error-wrapper","saveFilterErrorText":".csui-filtername-error","startlocations":".csui-start-locations","globeIcon":".csui-multilingual-icon"},"events":{"keyup @ui.saveFilter":"onChangeFilterName","keydown @ui.startlocations":"onStartLoaction","focusout @ui.saveFilter":"onFocusoutFilterName","click @ui.globeIcon":"onClickGlobeIcon","keydown @ui.globeIcon":"onKeyDownGlobeIcon"},"templateHelpers":function(){var e=this.options;return{"title":e.title,"locationSelector":e.locationSelector,"propertiesSeletor":e.propertiesSeletor,"saveFilter":e.saveFilter,"placeHolderName":u.placeHolderName,"globalSearch":e.globalSearch,"backButtonTooltip":u.backButtonTooltip,"mlDataEnabled":this.metadataLanguages.enabled}},"behaviors":{"TabableRegion":{"behaviorClass":a}},"initialize":function(){var e=this.options,t=s.KEEP_ORIGINAL_PROPERTIES;if(this.metadataLanguages=o.getMetadataLanguageInfo(),e.propertiesSeletor&&(this.propertiesView=new s({"selected":t,"includeCombineProperties":this.options.includeCombineProperties})),e.locationSelector&&(this.startLocationView=new l({"collection":this.options.locations,"title":this.options.dialogTitle,"selected":this.options.initialLocation})),!1!==e.globalSearch){var i,n;if(this.options.initialLocation){var a=this.options.initialLocation.get("factory");i=a&&a.options.container?a.options.container.get("id"):null,n=a&&a.options.container?a.options.container.get("name"):null}this.searchBoxView=new r({"targetBrowseSearch":!0,"command":this.options.command,"disableSearchFromHere":this.options.disableSearchFromHere,"locationID":i,"locationName":n}),this.searchboxModel=this.searchBoxView.searchboxModel,this.searchQueryModel=this.searchBoxView.model}var c=this;this.listenTo(this,"ml:value:updated",function(e){c.model.set("name_multilingual",e.value_multilingual,{"silent":!0}),c.targetElement.val(e.value),c.saveMldata=e,c.trigger("change:filterName")})},"onRender":function(){this.options;this.startLocationView&&this.startLocations.show(this.startLocationView),this.propertiesView&&this.properties.show(this.propertiesView),this.searchBoxView&&(this.globalSearch.show(this.searchBoxView),this.searchBoxView.on("show:startLocation",this.showStartLocations,this),this.searchBoxView.on("hide:startLocation",this.hideStartLocations,this),this.searchBoxView.on("close:dialog",this.onApplyProperties,this));var e=this;if(this.metadataLanguages.enabled){var n=this.ui.saveFilter,o=e.ui.globeIcon;n.addClass("csui-multilingual-input"),csui.require(["csui/controls/multilingual.text.picker/multilingual.popover.mixin"],function(t){t.mixin(d.prototype),e.model=new i.Model;var s={"parentView":e,"targetElement":n,"mlGlobeIcon":o,"validationRequired":!0,"multilingualData":e.model.get("name_multilingual")};e._loadMultiLingualPopover(s)})}this.$el.find("*[data-cstabindex]").on("focus",function(){var i=t(this);e.focusedElement&&e.focusedElement.removeClass(a.accessibilityActiveElementClass),i.addClass(a.accessibilityActiveElementClass),e.focusedElement=i})},"currentlyFocusedElement":function(e){if(this.$el){var i=this.$("*[tabindex]");i.length&&i.prop("tabindex",0);return!(!!e&&e.shiftKey)&&this.$el.find(".csui-filtername").length?this.$el.find(".csui-filtername"):!!i[0]&&t(i[0]).trigger("focus")}},"onLastTabElement":function(e,t){return e&&t.target===this.$("*[tabindex]")[0]},"onStartLoaction":function(e){27===e.keyCode&&(this.ui.startlocations.is(":focus")||e.stopImmediatePropagation())},"onApplyProperties":function(){this.trigger("parent:destroydialog")},"showStartLocations":function(){this.startLocationView&&this.startLocationView.$el.removeClass("binf-hidden")},"hideStartLocations":function(){this.startLocationView&&this.startLocationView.$el.addClass("binf-hidden")},"onClickGlobeIcon":function(){this._showLanguagePopover()},"onKeyDownGlobeIcon":function(e){13!==e.keyCode&&32!==e.keyCode||this.multiLingualForm&&this.keyDownOnGlobeIcon(e)},"onDomRefresh":function(){this.startLocationView&&this.startLocationView.trigger("dom:refresh"),this.propertiesView&&this.propertiesView.trigger("dom:refresh"),this.searchBoxView&&this.searchBoxView.trigger("dom:refresh")},"hideStartLocationLabel":function(e){this.startLocationView.hideDropDownLabel(e)},"reset":function(){this.startLocationView.reset()},"onChangeFilterName":function(){this.trigger("change:filterName")},"onFocusoutFilterName":function(){this.trigger("focusout:filterName")},"showErrorMessage":function(e){this.$(this.ui.saveFilterErrorText).html(e),this.ui.saveFilter.attr("aria-invalid",!0),this.ui.saveFilterError.removeClass("binf-hidden")},"removeErrorMessage":function(){this.$(this.ui.saveFilterErrorText).html(""),this.ui.saveFilter.attr("aria-invalid",!1),this.ui.saveFilterError.addClass("binf-hidden")}});return d}),csui.define("hbs!csui/dialogs/node.picker/impl/footer/footer",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-selected-items"></div>\r\n<div class="csui-footer-buttons"></div>'}});return i.registerPartial("csui_dialogs_node.picker_impl_footer_footer",n),n}),csui.define("hbs!csui/dialogs/node.picker/impl/footer/selectedItems.info",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s=null!=(s=l(i,"selectedItemsMessage")||(null!=t?l(t,"selectedItemsMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"selectedItemsMessage","hash":{},"loc":{"start":{"line":1,"column":34},"end":{"line":1,"column":58}}}):s))},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span>"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isMultiSelectEnabled"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":65}}}))?s:"")+"</span>\r\n"}});return i.registerPartial("csui_dialogs_node.picker_impl_footer_selectedItems.info",n),n}),csui.define("css!csui/dialogs/node.picker/impl/footer/footer",[],function(){}),csui.define("csui/dialogs/node.picker/impl/footer/footer.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/dialog/footer.view","hbs!csui/dialogs/node.picker/impl/footer/footer","hbs!csui/dialogs/node.picker/impl/footer/selectedItems.info","i18n!csui/dialogs/node.picker/impl/nls/lang","csui/lib/handlebars.helpers.xif","css!csui/dialogs/node.picker/impl/footer/footer"],function(e,t,i,n,o,s,l,r,a,c){var u=i.ItemView.extend({"template":a,"className":"csui-selectedItems-message","templateHelpers":function(){var t=this.selectedItemsCnt||this.options.selectedItemsCnt,i="";return i=1===t?e.str.sformat(c.SelectOneItemMessage,t):e.str.sformat(c.SelectManyItemsMessage,t),{"isMultiSelectEnabled":this.options.isMultiSelectEnabled,"selectedItemsMessage":i}},"constructor":function(e){e||(e={}),i.ItemView.prototype.constructor.call(this,e)},"onRender":function(){this.selectedItemsCnt||this.options.selectedItemsCnt?this.$el.removeClass("binf-hidden"):this.$el.addClass("binf-hidden")}}),d=i.LayoutView.extend({"template":r,"className":"cs-footer-control","behaviors":{"TabablesBehavior":{"behaviorClass":s,"recursiveNavigation":!0,"containTabFocus":!0}},"regions":{"selectedItemsInfoRegion":".csui-selected-items","buttonsRegion":".csui-footer-buttons"},"isTabable":function(){return this.$("*[tabindex]").length>0},"constructor":function(e){i.LayoutView.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions()},"initialize":function(){var t=this.options,i=t.buttons?t.buttons:[],o=this.footerView=new l({"collection":new n.Collection(i)});this.messageView=new u(e.extend({},{"selectedItemsCnt":0})),this.listenTo(o,"childview:click",this.onClickButton),this.listenTo(this,"selectedItems:updateCount",this.updateSelectedItems)},"onRender":function(){this.buttonsRegion.show(this.footerView)},"updateButton":function(e,t){this.footerView.updateButton(e,t)},"onClickButton":function(e){var t=e.model.attributes;t.click&&t.click({"dialog":this,"button":this.$el}),t.close&&this.destroy()},"updateSelectedItems":function(t){this.messageView=new u(e.extend({},{"selectedItemsCnt":t,"isMultiSelectEnabled":this.options.isMultiSelectEnabled})),this.selectedItemsInfoRegion.show(this.messageView)},"onBeforeDestroy":function(){this.footerView.destroy(),this.messageView.destroy()}});return e.extend(d.prototype,o),d}),csui.define("csui/dialogs/node.picker/impl/command.type",["module","csui/lib/underscore","i18n!csui/dialogs/node.picker/impl/nls/lang"],function(e,t,i){var n=e.config();t.defaults(n,{"addable_types":{"899":[899,480,146]}});var o=function(e){var n=e.initialContainer;switch(this.actionNodes=e.initialSelection?t.isArray(e.initialSelection)?e.initialSelection:e.initialSelection.models:[],this.unselectableNodes=e.unselectableNodes,this.invalidNodes=e.invalidNodes,this.selectableTypes=e.selectableTypes||[],this.unselectableTypes=e.unselectableTypes||[],this.showAllTypes=e.showAllTypes||!1,this.multiSelect=!!e.selectMultiple,this.action=e.command,this.parentId=null!=n?n.get("id"):-1,this.selectButtonLabel=e.selectButtonLabel||i.selectButtonLabel,this.action){case"copy":this.selectButtonLabel=e.selectButtonLabel||i.copyButtonLabel;break;case"move":this.selectButtonLabel=e.selectButtonLabel||i.moveButtonLabel;break;case"addCategories":this.selectableTypes=e.selectableTypes||[131],this.multiSelect=!0,this.actionNodes=[];break;case"savefilter":this.selectButtonLabel=e.selectButtonLabel||i.saveFilterButtonLabel,this.actionNodes=[];break;case"collect":this.selectableTypes=e.selectableTypes,this.multiSelect=!0,this.actionNodes=[];break;default:this.actionNodes=[]}};return t.extend(o.prototype,{"getSelectableNodeTypes":function(){return this.showAllTypes?[]:this.selectableTypes},"validateTarget":function(e){var i=e.data?e.data.id:e.get("id"),o=e.get("type"),s=n.addable_types[o],l=t.every(this.unselectableNodes,function(e){return i!==e});if(this.browseAllowed(e)&&(l=t.every(this.unselectableTypes,function(e){return o!==e})),s&&(l=t.every(this.actionNodes,function(e){return t.contains(s,e.get("type"))})),l)switch(this.action){case"copy":l=!this.isVirtualNode(e)&&this.validateNode(e);break;case"move":l=!this.isVirtualNode(e)&&this.validId(e),l&&(l=this.validateAddableTypes(e));break;case"savefilter":l=!this.isVirtualNode(e)}return l},"validId":function(e){return(e.data?e.data.id:e.get("id"))!==this.parentId},"validateAddableTypes":function(e){var i=e.addable_types;return!i||t.every(this.actionNodes,function(e){return t.some(i,function(t){return t.type===e.get("type")})})},"isSelectableType":function(e){var i=e.get("type"),n=t.every(this.unselectableTypes,function(e){return i!==e});return n&&!t.isEmpty(this.selectableTypes)&&!(n=-1!==t.indexOf(this.selectableTypes,i))&&e.get("container")&&t.indexOf(this.selectableTypes,-1)>-1&&(n=!0),n},"isSelectable":function(e){var i=e.data?e.data.id:e.get("id"),o=e.get("type"),s=n.addable_types[o];if(e.get("unselectable"))return!1;var l=this.isSelectableType(e);if(l&&s&&(l=t.every(this.actionNodes,function(e){return t.contains(s,e.get("type"))})),l&&(l=t.every(this.unselectableNodes,function(e){return i!==e})),l&&(l=!this.isActionNode(e)),l)switch(this.action){case"copy":l=!this.isVirtualNode(e)&&this.validateNode(e);break;case"move":l=!this.isVirtualNode(e)&&this.validId(e);break;case"addCategories":l=!this.browseAllowed(e);break;case"savefilter":l=!this.isVirtualNode(e)}return l},"browseAllowed":function(e){var t=e.original||e,i=e.actions;return!(!t.get("container")||!e.isLocallyCreated&&i&&!i.get("open"))&&!1!==e.get("perm_see_contents")},"validateNode":function(e){var t=this._hasValidId(e);return t&&!this.showAllTypes&&(this.browseAllowed(e)?"move"!==this.action&&"copy"!==this.action||!this.isActionNode(e)||(t=!1):this.selectableTypes.length>0&&-1===this.selectableTypes.indexOf(e.get("type"))&&(t=!1)),t},"isActionNode":function(e){var i=e.get("id"),n=e.get("parent_id");return t.any(this.actionNodes,function(e){var t=e.get("id"),o=t===i;return o||t===n})},"isVirtualNode":function(e){var t=e.get("type"),i=!1;return 899===t&&(i=!0),i},"_hasValidId":function(e){return t.every(this.invalidNodes,function(t){return t.get("id")!==e.get("id")})},"shouldResolveShortcut":function(e){return 1===e.get("type")&&!e.get("original_id_expand")&&t.isNumber(e.get("original_id"))}}),o}),csui.define("css!csui/dialogs/node.picker/impl/node.picker",[],function(){}),csui.define("csui/dialogs/node.picker/node.picker",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/dialog/dialog.view","csui/dialogs/node.picker/impl/node.picker.view","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node","csui/models/node/node.model","csui/dialogs/node.picker/start.locations/start.location.collection","csui/controls/selected.count/selected.count.view","csui/dialogs/node.picker/impl/header/header.view","csui/dialogs/node.picker/impl/footer/footer.view","csui/dialogs/node.picker/impl/command.type","i18n!csui/dialogs/node.picker/impl/nls/lang","csui/utils/log","csui/controls/progressblocker/blocker","css!csui/dialogs/node.picker/impl/node.picker"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v){"use strict";function w(e){if(e||(e={}),this.options=t.defaults(e,C,{"pageSize":30}),this.options.connector||(this.options.connector=this._getConnector(this.options)),!this.options.connector){var i="Node Picker: insufficient options";throw g.error(i)&&console.error(i),new Error(i)}this.options.targetBrowseHistory=[],this.options.navigateFromHistory=!1,this.options.initialContainer=this._getInitalContainer(this.options),this.options.unselectableNodes=this._getArrayOfNodeIds(e.unselectableNodes),this.options.commandType=new m(this.options)}var y=t.extend({"initialLocationLookupOrder":["csui/dialogs/node.picker/start.locations/recent.containers","csui/dialogs/node.picker/start.locations/current.location","csui/dialogs/node.picker/start.locations/favorites"]},e.config()),C={"initialSelection":[],"selectMultiple":!1,"unselectableNodes":[],"dialogTitle":f.dialogTitle,"orderBy":"name asc"};return t.extend(w.prototype,{"show":function(){return this._locations=new u(this.options),this._locations.fetch({"connector":this.options.connector,"container":this.options.initialContainer,"removeInvalid":!1}).always(t.bind(this._showDialog,this)),this._deferred=i.Deferred(),this._deferred.promise()},"_showDialog":function(){this.options.commandType.multiSelect&&(this.selectedCountList={},this.options.selectedCountList=this.selectedCountList,this.selectedCountCollection=new n.Collection(t.values(this.selectedCountList))),this.recentLocations=this._locations.get("csui/dialogs/node.picker/start.locations/recent.containers");var e=this._locations.where({"invalid":!0});this._locations.remove(e);var i=this._getInitialLocation();this.searchLocation=i,t.extend(i,this.options.selectedCountList),this._headerControl=this._createHeaderControl(i),this._view=this._createNodePickerView(i),this._footerView=this._createFooterViewControl(),this._dialog=this._createDialog(),this._dialog.show()},"_createHeaderControl":function(e){var t=this.options,i=null==t.locationSelector||t.locationSelector;this.options.previousLocation=e;var n=new h({"locations":this._locations,"title":t.dialogTitle,"initialLocation":e,"includeCombineProperties":t.includeCombineProperties,"propertiesSeletor":t.propertiesSeletor,"saveFilter":t.saveFilter,"locationSelector":i,"initialSelection":t.initialSelection,"globalSearch":t.globalSearch,"disableSearchFromHere":t.disableSearchFromHere});return n.startLocationView&&n.startLocationView.on("change:location",this.onChangeLocation,this),n.on("change:filterName",this.onChangeFilterName,this),n.on("focusout:filterName",this.onFocusOutFilterName,this),n.searchBoxView&&n.searchBoxView.on("change:searchterm",this.onChangeSearchTerm,this),n},"_createSelectedCountView":function(){this.selectedCountView=new d({"collection":this.selectedCountCollection,"scrollableParent":".cs-start-locations .csui-np-content .list-content"}),this.selectedCountView.listenTo(this.selectedCountView.collection,"remove",t.bind(function(e){var t=this._view.selectViews,i=e.get("id");delete this.selectedCountList[i],this._dialog.updateButton("select",{"disabled":this._view.getNumberOfSelectItems()<=0}),this.updatedCheckbox?this.updatedCheckbox=!1:(t.leftView&&t.leftView.listView.trigger("update:checkbox",i),t.rightView&&t.rightView.listView.trigger("update:checkbox",i))},this)),this.selectedCountView.listenTo(this.selectedCountView.collection,"reset",t.bind(function(){var e=this._view.selectViews;t.each(this.selectedCountList,t.bind(function(t){var i=t.get("id");delete this.selectedCountList[i],this._dialog.updateButton("select",{"disabled":this._view.getNumberOfSelectItems()<=0}),e.leftView&&e.leftView.listView.trigger("update:checkbox",i),e.rightView&&e.rightView.listView.trigger("update:checkbox",i)},this))},this)),this.options.selectedCountView=this.selectedCountView},"_createNodePickerView":function(e,i){this.options.searchView=!1,this.options.commandType.multiSelect&&this._createSelectedCountView();var n=e.get("factory"),o=n.getLocationParameters(this.options);t.defaults(o,this.options,{"leftSelection":i});var s=new l(o);return s.on("change:complete",this.onSelectionChange,this).on("changing:selection",this._blockDialog,this).on("back:toSearch",this.onClickBackFromFolderToSearch,this).on("change:location",this.onChangeLocationFromBack,this).on("backto:folder",this.onClickBackFromSearch,this).on("close",this.forceClosed,this).on("add:to:collection",t.bind(function(e){this.selectedCountList[e.id]=e.node,this.selectedCountCollection.add(t.values(this.selectedCountList))},this)).on("remove:from:collection",t.bind(function(e){this.updatedCheckbox=!0,this.selectedCountCollection.remove(e.node)},this)),s.selectViews.on("drill:up",this.onDrillUp,this),s},"_createFooterViewControl":function(){var e=this.options;return new p({"isMultiSelectEnabled":this.options.commandType.multiSelect,"buttons":[{"id":"select","label":e.selectButtonLabel||e.commandType.selectButtonLabel,"default":!0,"disabled":!0,"click":t.bind(this.onClickSelectButton,this)},{"id":"cancel","label":f.cancelButtonLabel,"close":!0,"click":t.bind(this.onClickCancelButton,this)}]})},"_blockDialog":function(){return this._dialog.blockWithoutIndicator(),!0},"dialogClassName":function(){var e="target-browse";return this.options&&this.options.view&&this.options.view.options&&this.options.view.options.saveFilter&&(e+=" csui-save-filter-browse"),e},"_createDialog":function(){var e=this.options,i=new s({"title":e.dialogTitle,"headerView":this._headerControl,"view":this._view,"className":this.dialogClassName,"attributes":{"aria-label":e.dialogTitle},"largeSize":!0,"footerView":this._footerView});return i.listenTo(i,"hide",t.bind(this.onHideDialog,this)),b.imbue(i),i},"onChangeLocation":function(e){this.options.targetBrowseHistory=[],this._view.destroy(),this._view.options.commandType.multiSelect||this._view.selectViews.clearSelect(),this._dialog.updateButton("select",{"disabled":this._view.getNumberOfSelectItems()<=0}),this.options.previousLocation=e,this._view=this._createNodePickerView(e);var t=e.get("factory").container;this.updateSearch(t),this._dialog.showView(this._view)},"onChangeSearchTerm":function(e){this._headerControl.searchQueryModel=e,this._view.destroy(),this._dialog.updateButton("select",{"disabled":this._view.getNumberOfSelectItems()<=0});var t=this._view.selectViews.leftView.listView.browsedChild;if(0===this.options.targetBrowseHistory.length){var i={"leftId":this.options.previousLocation.id,"rightId":t?t.model.get("id"):void 0};this.options.targetBrowseHistory.push(["location",i])}if(!this._view.options.navigateFromHistory&&!this.options.searchView){var n=this._view.selectViews.leftView,o=this._view.selectViews.rightView,s=Math.floor((n.collection.skipCount||0)/n.collection.topCount)+1,l=parseInt(n.collection.topCount)*parseInt(s);if(n.container&&o){var r={"leftId":o&&o.container&&o.container.parent?o.container.parent.get("id"):void 0,"rightId":o&&o.container?o.container.get("id"):void 0,"pageSize":l};this.options.targetBrowseHistory.push(["node",r])}else if(n.container&&null===o&&["csui/dialogs/node.picker/start.locations/current.location","csui/dialogs/node.picker/start.locations/enterprise.volume"].indexOf(this.options.previousLocation.get("id"))<0){n.container.get("id")}}this.options.locationID=this._view.breadcrumbNode?this._view.breadcrumbNode.get("id"):this.options.locationID,this.searchLocation=this.options.previousLocation;var a=this._locations.get("csui/dialogs/node.picker/start.locations/search.location");this._view=this._createSearchResultsView(a),this._dialog.showView(this._view)},"_createSearchResultsView":function(e,i){this._headerControl.searchQueryModel&&(this.options.query=this._headerControl.searchQueryModel),this.options.commandType.multiSelect&&this._createSelectedCountView(),this.options.searchView=!0;var n=e.get("factory"),o=n.getLocationParameters(this.options);t.defaults(o,this.options);var s=new l(o);return s.on("change:complete",this.onSelectionChange,this).on("changing:selection",this._blockDialog,this).on("open:location",this.onClickLocationFromSearch,this).on("change:location",this.onChangeLocationFromBack,this).on("back:toSearch",this.onClickBackFromFolderToSearch,this).on("backto:folder",this.onClickBackFromSearch,this).on("close",this.forceClosed,this).on("add:to:collection",t.bind(function(e){this.selectedCountList[e.id]=e.node,this.selectedCountCollection.add(t.values(this.selectedCountList))},this)).on("remove:from:collection",t.bind(function(e){this.updatedCheckbox=!0,this.selectedCountCollection.remove(e.node)},this)),s},"onChangeLocationFromBack":function(e){this.options.targetBrowseHistory=[];var t=this._locations.get(e[1].leftId),i=e[1].rightId;this._view.destroy(),this._dialog.updateButton("select",{"disabled":this._view.getNumberOfSelectItems()<=0}),this.options.previousLocation=t,this._view=this._createNodePickerView(t,i);var n=t.get("factory").container;this.updateSearch(n),this._dialog.showView(this._view),this._view.selectViews.options.backBtn=!0,this._headerControl.hideStartLocationLabel(n)},"onClickBackFromSearch":function(){this._view.destroy(),this._dialog.updateButton("select",{"disabled":this._view.getNumberOfSelectItems()<=0});var e=this.options.locationID?this.options.locationID:this.options.container?this.options.container.get("id"):this.options.nodes.models.length>0?this.options.nodes.models[0].get("id"):null,t=new c({"id":e},{"connector":this.options.connector});this.updateSearch(t,void 0,!0);var i=this._locations.get("csui/dialogs/node.picker/start.locations/search.location");if(0===this.options.locationID&&(i=this.options.previousLocation),i){i.get("factory").options.container=t,this._view=this._createNodePickerView(i),this._view&&this._dialog.showView(this._view)}this._view.selectViews.options.backBtn=!0},"onClickLocationFromSearch":function(e){this._view.destroy(),this._dialog.updateButton("select",{"disabled":this._view.getNumberOfSelectItems()<=0});var t=this._locations.get("csui/dialogs/node.picker/start.locations/default.location");t.get("factory").options.container=e,this.options.targetBrowseHistory.push(["search",this.options.query.clone()]),this._view=this._createNodePickerView(t),this._view&&(this._dialog.showView(this._view),this._view.showBackButton())},"onClickBackFromFolderToSearch":function(e){this._view.destroy(),this._headerControl.searchQueryModel=e.requestedQueryModel,this.updateSearch(e.options.container,e.requestedQueryModel,!0),this._dialog.updateButton("select",{"disabled":this._view.getNumberOfSelectItems()<=0});var t=this._locations.get("csui/dialogs/node.picker/start.locations/search.location");this._view=this._createSearchResultsView(t,!0),this._view.options.navigateFromHistory=e.options.navigateFromHistory,this._dialog.showView(this._view),this._view.selectViews.options.backBtn=!0},"onSelectionChange":function(e){var t,i=this._view.getNumberOfSelectItems()>0;e&&e.get("id")&&e.get("name")&&(this.options.locationID=e.get("id"),this.updateSearch(e),this.updateHeaderStartLocation(e)),this._dialog.destroyBlockingView(),this.options.saveFilter&&this._headerControl&&this._headerControl.ui.saveFilter?(t=!!this._headerControl.ui.saveFilter.val().trim(),t&&i?this._dialog.updateButton("select",{"disabled":!1}):this._dialog.updateButton("select",{"disabled":!0})):this._dialog.updateButton("select",{"disabled":!i}),this._view.selectViews.options.backBtn&&(this._view.selectViews.options.backBtn=!1,this._view.$el.find(".list-content li:first-child").trigger("focus"))},"onChangeFilterName":function(){var e=this._dialog.$el.find("div[class='load-container']");if(this.options.saveFilter&&e&&0===e.length){var t,i,n=!0;this._headerControl.ui.saveFilter&&(n=this._headerControl.ui.saveFilter.val().trim().length<1),i=this._view.getNumberOfSelectItems()>0,this._headerControl&&this._headerControl.ui.saveFilter&&(t=!n),t&&i?this._dialog.updateButton("select",{"disabled":!1}):this._dialog.updateButton("select",{"disabled":!0})}},"onFocusOutFilterName":function(){this.isValidVirtualFolderName()},"isValidVirtualFolderName":function(){var e=!1,t=!1;return this._headerControl.ui.saveFilter&&1===this._headerControl.ui.saveFilter.length&&void 0!==this._headerControl.ui.saveFilter.val()&&null!==this._headerControl.ui.saveFilter.val()&&(e=this._headerControl.ui.saveFilter.val().trim().length<1,t=this._headerControl.ui.saveFilter.val().indexOf(":")>=0),e?this._headerControl.showErrorMessage(f.nameCannotBeEmpty):t?this._headerControl.showErrorMessage(f.nameCannotContainColon):this._headerControl.removeErrorMessage(),!e&&!t},"updateHeaderStartLocation":function(e){this.options.commandType.browseAllowed(e)&&this._headerControl.hideStartLocationLabel(e)},"updateSearch":function(e,t,i){var n=e?e.get("id"):void 0,o=e?e.get("name"):"";if(this._headerControl.searchBoxView&&this._headerControl.searchboxModel){if(i){var s=t?t.get("location_id1"):this._headerControl.searchBoxView.model.get("location_id1");this._headerControl.searchboxModel.nodeId=s}else this._headerControl.searchboxModel.nodeId=n;this._headerControl.searchboxModel.nodeName=o,this._headerControl.searchboxModel.trigger("change")}},"onClickSelectButton":function(){if(this&&this._view&&this._view.getSelection().length>0){var e,t,i=this._view.getSelection(),n=this._headerControl.propertiesView;if(this._headerControl.searchQueryModel&&this._headerControl.searchQueryModel.clear({"silent":!0}),!(this._headerControl.ui&&this._headerControl.ui.saveFilter&&this.isValidVirtualFolderName()))return;e=this._headerControl.ui.saveFilter.val(),t=this._headerControl.model&&this._headerControl.model.get("name_multilingual"),this._result={"nodes":i,"applyProperties":n&&n.selected,"openSelectedProperties":n&&n.openSelectedProperties,"filterName":e,"multiLingualData":t},this._dialog.destroy()}else this._dialog.updateButton("select",{"disabled":!0})},"onHideDialog":function(){this._deferred&&(this._result?this._deferred.resolve(this._result):"pending"===this._deferred.state()&&this._deferred.reject({"cancelled":!0})),this._headerControl.searchQueryModel&&this._headerControl.searchQueryModel.clear({"silent":!0})},"onDrillUp":function(e){this.options.container=new c({"id":e},{"connector":this.options.connector});var t=this._locations.get("csui/dialogs/node.picker/start.locations/search.location");t&&(t.get("factory").options.container=this.options.container)},"_getConnector":function(e){var i;if(e.context)i=e.context.getObject(r);else if(e.initialSelection||e.initialContainer){var n=e.initialSelection,o=n?t.isArray(n)?n:n.models:void 0,s=e.initialContainer||o[0];i=s&&s.connector}return i},"_getInitalContainer":function(e){var i=this.options.initialContainer;if(null==i||t.isEmpty(i)){var o=e.context&&e.context.getModel(a);i=null!=o&&null!=o.parent&&o.parent.isFetchable()?1===o.parent.get("id")||o.get("container")?o.clone():o.parent.clone():null}else i instanceof n.Model||(i=new c(i,{"connector":this.options.connector}));return i},"_getArrayOfNodeIds":function(e){return e&&!t.isEmpty(e)&&e[0]instanceof n.Model?t.map(e,function(e){return e.get("id")}):e},"_getInitialLocation":function(){var e,i=this.options.startLocation;if(i){i.lastIndexOf("/")<0&&(i="csui/dialogs/node.picker/start.locations/"+i),e=this._locations.get(i)}
return e||(e=!t.isEmpty(this.options.initialContainer)&&this._locations.get("csui/dialogs/node.picker/start.locations/current.location"))||(t.find(y.initialLocationLookupOrder,function(t){return e=this._locations.get(t)},this),e||(e=this._locations.first())),e},"onClickCancelButton":function(){this._dialog.destroy()}}),w.defaults={"containers":{"selectableTypes":[-1],"dialogTitle":f.dialogTitleForContainers},"documents":{"selectableTypes":[144],"dialogTitle":f.dialogTitleForDocuments},"categories":{"initialContainer":{"id":"volume","type":133},"selectableTypes":[131],"dialogTitle":f.dialogTitleForCategories}},w}),csui.define("csui/dialogs/members.picker/members.picker.wizard",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/dialogs/members.picker/impl/members.picker.view","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/member","csui/models/member/member.model","csui/models/member/membercollection","csui/models/permission/nodepermission.model","csui/dialogs/members.picker/start.locations/start.location.collection","csui/dialogs/members.picker/impl/command.type","csui/dialogs/members.picker/impl/header/members.picker.header.view","i18n!csui/dialogs/members.picker/impl/nls/lang","csui/utils/log","csui/utils/url","csui/controls/progressblocker/blocker","csui/controls/wizard/wizard.view","csui/widgets/permissions/edit/permission.level.selector/permission.level.selector.view","csui/widgets/permissions/edit/permission.attributes/permission.attributes.view","csui/widgets/permissions/impl/edit/apply.permission/apply.permission.view","csui/utils/taskqueue","csui/controls/globalmessage/globalmessage","i18n","css!csui/dialogs/members.picker/impl/members.picker","csui/dialogs/node.picker/node.picker"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v,w,y,C,_,x,k){"use strict";function T(e){if(e||(e={}),this.options=t.defaults(e,S,{"pageSize":30}),this.options.connector||(this.options.connector=this._getConnector(this.options)),!this.options.connector){var i=m.missingConnector;throw f.error(i)&&console.error(i),new Error(i)}this.options.targetBrowseHistory=[],this.options.navigateFromHistory=!1,this.options.initialContainer=this._getInitalContainer(this.options),this.options.unselectableMembers=this._getArrayOfNodeIds(e.unselectableMembers),this.options.selectableMembers=this._getArrayOfNodeIds(e.selectableMembers),this.options.commandType=new h(this.options)}var V=t.extend({"initialLocationLookupOrder":["csui/dialogs/members.picker/start.locations/recent.groups","csui/dialogs/members.picker/start.locations/member.groups","csui/dialogs/members.picker/start.locations/acl.groups","csui/dialogs/members.picker/start.locations/all.members"]},e.config());t.defaults(V,{"parallelism":3});var S={"initialSelection":[],"dialogTitle":m.dialogTitle,"orderBy":"name asc"};return t.extend(T.prototype,{"show":function(){return this._locations=new d(this.options),this._locations.fetch({"connector":this.options.connector,"container":this.options.initialContainer,"nodeId":this.options.nodeModel?this.options.nodeModel.get("id"):void 0,"removeInvalid":!1}).done(t.bind(this._showWizard,this)),this._deferred=i.Deferred(),this._deferred.promise()},"_showWizard":function(){this._steps=this._createWizardSteps(),this._wizard=new v({"steps":this._steps}),b.imbue(this._wizard),this._wizard.options.editpermission=this.membersPickerView.options.edit_permission,this._wizard.options.groupId=this.membersPickerView.options.groupId,this._wizard.options.id=this.membersPickerView.options.groupId,this._wizard.options.add=this.membersPickerView.options.add,this.membersPickerView.selectViews.initialLocation=this.initialLocation,this._wizard.show(this._wizard.options),this._wizard.on("save:result",this.onClickFinishButton,this),this._wizard.on("add:member",this.onClickAddButton,this),this._wizard.currentView.headerView.on("show:selectItem",this.selectUsers,this),this._wizard.currentView.headerView.on("enable:add",this.enableAdd,this),this.options.selectedMember&&this.selectUsers(this.options.selectedMember)},"_createHeaderControl":function(e){var t=this.options,i=null==t.locationSelector||t.locationSelector,n=null!=t.displayStartLocation&&t.displayStartLocation,o=new p({"locations":this._locations,"headerViewoptions":this.options,"title":t.dialogTitle,"context":t.context,"node":this.options.node,"authUser":this.options.authUser,"hasEditPermissionAction":this.options.edit_permission,"initialLocation":e,"displayStartLocation":n,"adduserorgroup":!!t.adduserorgroup&&t.adduserorgroup,"showUserPicker":t.showUserPicker,"locationSelector":i,"selectedMember":t.selectedMember,"initialSelection":t.initialSelection});return t.adduserorgroup&&o.startLocationView.on("change:location",this.onChangeLocation,this),o.on("hide:parentDialog",this.parentdialogdestroy,this),o},"parentdialogdestroy":function(e){this._wizard.destroy()},"_createPickerView":function(e,i){this.options.startLocation||(this.options.startLocation=this._locations.at(0));var n=this.options,o=e.get("factory"),l=o.getLocationParameters(this.options);t.defaults(l,this.options,{"leftSelection":i});var r=new s(l);return r.on("update:button",this.updateButton,this),r.on("changing:selection",this._blockDialog,this).on("change:location",this.onChangeLocation,this),n.adduserorgroup&&r.on("change:complete",this.onSelectionChange,this),this.membersPickerView=r,r},"_createPermissionLevelSelectorView":function(){var e=new w({"selected":1,"isContainer":!this.options.nodeModel||this.options.nodeModel.get("container"),"nodeModel":this.options.nodeModel});return e.on("permission:level:selected",this.onPermissionLevelSelection,this),e},"_createPermissionLevelSubItemsView":function(){var e=new C({"selected":2,"context":this.options.context,"model":this.options.nodeModel,"applyTo":this.options.applyTo});return e.on("permission:level:selected",this.onPermissionLevelSelection,this),e},"dialogClassName":function(){var e="target-browse";return this.options&&this.options.userClassName&&(e=e+" "+this.options.userClassName),e},"_createWizardSteps":function(){this.initialLocation=this._getInitialLocation();var e,i,n,o=this.options,s=this._createHeaderControl(this.initialLocation),l=this._createPickerView(this.initialLocation),r=!(!o.nodeModel||!o.nodeModel.get("container")||"advanced"!==o.nodeModel.get("permissions_model")),a=t.uniqueId("permissionLevel");if(o.adduserorgroup&&!o.showUserPicker&&r)return e={"title":o.dialogTitle,"adduserorgroup":!!o.adduserorgroup&&o.adduserorgroup,"headerView":s,"view":l,"className":this.dialogClassName,"nextButton":!0,"userClassName":this.options.dialogClass,"attributes":{"aria-labelledby":"memberPickerHeader"},"largeSize":!0},i={"title":o.dialogTitle,"headers":[{"label":m.selectPermissionLevel,"class":"csui-permission-level-select","id":a}],"nextButtonLabel":m.nextButtonLabel,"nextButton":!0,"disableNext":!1,"view":this._createPermissionLevelSelectorView(),"className":this.dialogClassName()+" csui-permissions-level","attributes":{"aria-labelledby":"memberPickerHeader","aria-describedby":a}},n={"title":o.dialogTitle,"doneButtonLabel":m.doneButtonLabel,"disableDone":!1,"doneButton":!0,"view":this._createPermissionLevelSubItemsView(),"className":this.dialogClassName()+" csui-permissions-apply-dialog","attributes":{"aria-labelledby":"memberPickerHeader"}},[e,i,n];if(!o.adduserorgroup||o.showUserPicker||r){return[{"title":o.dialogTitle,"adduserorgroup":!!o.adduserorgroup&&o.adduserorgroup,"showUserPicker":o.showUserPicker,"headerView":s,"view":l,"className":this.dialogClassName,"userClassName":this.options.dialogClass,"attributes":{"aria-labelledby":"memberPickerHeader"},"largeSize":!0,"buttons":o.buttons}]}return e={"title":o.dialogTitle,"adduserorgroup":!!o.adduserorgroup&&o.adduserorgroup,"headerView":s,"view":l,"className":this.dialogClassName,"nextButton":!0,"userClassName":this.options.dialogClass,"attributes":{"aria-labelledby":"memberPickerHeader"},"largeSize":!0},i={"title":o.dialogTitle,"headers":[{"label":m.selectPermissionLevel,"class":"csui-permission-level-select","id":a}],"doneButtonLabel":m.doneButtonLabel,"disableDone":!1,"doneButton":!0,"view":this._createPermissionLevelSelectorView(),"className":this.dialogClassName()+" csui-permissions-level","attributes":{"aria-labelledby":"memberPickerHeader","aria-describedby":a}},[e,i]},"_blockDialog":function(){return this._wizard.blockWithoutIndicator(),!0},"onHideDialog":function(){this._deferred&&(this._result?this._deferred.resolve(this._result):"pending"===this._deferred.state()&&this._deferred.reject({"cancelled":!0}))},"onChangeLocation":function(e,t){e.get||(e=this._locations.get("csui/dialogs/members.picker/start.locations/"+e)),this.options.targetBrowseHistory=[];var i=this.membersPickerView&&this.membersPickerView.selectedMemberList&&this.membersPickerView.selectedMemberList.collection.models;this._steps[0].view.destroy(),this.membersPickerView.trigger("change:complete"),this.options.location=e.get("location"),this.options.startLocation=this.options.location;var n=t&&t.rightId;this._steps[0].view=this._createPickerView(e,n);e.get("factory").container;this._wizard.currentView.showView(this._steps[0].view),i&&this.selectUsers(i)},"selectUsers":function(e){this.membersPickerView&&this.membersPickerView.selectedMemberList&&this.membersPickerView.selectedMemberList.trigger("show:selectItem",e)},"enableAdd":function(){var e=this._wizard.currentView.footerView.children._views;t.each(e,function(e){"Add"===e.model.get("id")&&e.$el.removeClass("binf-hidden")},this)},"updateButton":function(e){this._wizard.currentView.footerView&&this._wizard.currentView.footerView.trigger("update:button",e),this.locationId=!!this._wizard.currentView.headerView.options&&!!this._wizard.currentView.headerView.options.headerViewoptions&&this._wizard.currentView.headerView.options.headerViewoptions.locationID;var i=this._wizard.currentView.footerView.children._views;t.each(i,function(t){"Add"===t.model.get("id")&&(e.models.length>0&&this._wizard.options.add?this.options.selectedMember&&!this.locationId?t.$el.attr("disabled","disabled"):t.$el.removeAttr("disabled"):t.$el.attr("disabled","disabled"))},this);var n=e.models.length>0;this._wizard.currentView.headerView&&this._wizard.currentView.headerView.userSearchView&&this._wizard.currentView.headerView.userSearchView.updatePlaceHolder(n)},"onClickFinishButton":function(){var e,t,i,n;this&&this.getMemberPickerView()&&this.getMemberPickerView().getSelection()?(e=this.getMemberPickerView().getSelection(),t=this.getPermissionLevelView().getSelectedPermissions(),n=!(!this.options.nodeModel.get("container")||"advanced"!==this.options.nodeModel.get("permissions_model")),n&&(i=this.getPermissionsApplyView().getApplyToFlag()),this._result={"members":e,"permissions":t,"apply_to":n?i?2:3:0},this._wizard.destroy(),this.onHideDialog()):this._wizard.currentView.updateButton("next",{"disabled":!0})},"onClickAddButton":function(){var e=this._wizard.options.groupId,n=(this.options.connector.getConnectionUrl().getApiBase("v2"),this),o=this.getMemberPickerView().getSelection()&&this.getMemberPickerView().getSelection().get("name_formatted")||this.membersPickerView.options.displayName,s={},l=this.options.connector,r=!!this._wizard.currentView.headerView.options&&!!this._wizard.currentView.headerView.options.headerViewoptions&&this._wizard.currentView.headerView.options.headerViewoptions.locationID;e=r||e,n.groupName=o,n.failedUsers=[],n.passcount=0,n.failcount=0;var c=new _({"parallelism":V.parallelism}),u=0,d=this.membersPickerView&&this.membersPickerView.selectedMemberList&&this.membersPickerView&&this.membersPickerView.selectedMemberList.collection.models,h=t.map(d,function(t){var o=i.Deferred();return c.pending.add({"worker":function(){return s={"member_id":t.id},n.userName=t.get("name_formatted")||t.get("name"),new a({},{"id":e,"connector":l}).save(s,{"type":"POST","processData":!1,"metadataPartName":"body"}).done(function(e){n.passcount+=1,o.resolve(t)},n).fail(function(e){n.failcount+=1,n.failedUsers.push(n.userName),o.resolve(t)},n),o.promise()}}),u++,o.promise(h)});i.whenAll.apply(i,h).then(function(e){1===n.passcount&&0===n.failcount?x.showMessage("success",t.str.sformat(m.singleUserText,n.userName,n.groupName)):0===n.passcount&&1===n.failcount?x.showMessage("error",t.str.sformat(m.singleUserFailureText,n.userName,n.groupName)):1===n.passcount&&n.failcount>0?x.showMessage("success",t.str.sformat(m.SinglePassMoreThanOneFail,n.userName,n.groupName,n.failcount)):n.passcount>0&&n.failcount>0?x.showMessage("success",t.str.sformat(m.manyUserText,n.passcount,n.failcount,n.groupName)):n.passcount>0&&0===n.failcount?x.showMessage("success",t.str.sformat(m.onlyAllSuccessText,n.passcount,n.groupName)):0===n.passcount&&n.failcount>0&&x.showMessage("error",t.str.sformat(m.onlyAllFailureText,n.failcount,n.groupName)),n._wizard.destroy()})},"_getArrayOfNodeIds":function(e){return e&&!t.isEmpty(e)&&e[0]instanceof n.Model?t.map(e,function(e){return e.get("right_id")}):e},"_getInitalContainer":function(e){var i=this.options.initialContainer;return null!=i&&!t.isEmpty(i)&&i instanceof n.Model||(i=new a({"groupId":e.groupId,"displayName":e.displayName},{"connector":e.connector})),i},"_getConnector":function(e){var i;if(e.context)i=e.context.getObject(l);else if(e.initialSelection||e.initialContainer){var n=e.initialSelection,o=n?t.isArray(n)?n:n.models:void 0,s=e.initialContainer||o[0];i=s&&s.connector}return i},"_getInitialLocation":function(){var e,t=this.options.startLocation;if(t){t.lastIndexOf("/")<0&&(t="csui/dialogs/members.picker/start.locations/"+t),e=this._locations.get(t)}return!t&&this.options.groupId&&(e=this._locations.get("csui/dialogs/members.picker/start.locations/current.group")),e},"onSelectionChange":function(e){var t,i=this.getMemberPickerView().getNumberOfSelectItems()>0;e&&e.get("id")&&(this.options.locationID=e.get("id")),this._wizard.options.add=e&&e.add,this._wizard.destroyBlockingView();var n=this.getMemberPickerHeader();if(this.options.saveFilter&&n&&n.ui.saveFilter?(t=!!n.ui.saveFilter.val().trim(),t&&i?this._wizard.updateButton("next",{"disabled":!1}):this._wizard.updateButton("next",{"disabled":!0})):(this._wizard.updateButton("next",{"disabled":!i}),this.membersPickerView&&this.membersPickerView.selectedMemberList.collection.models.length>0&&e&&e.get("id")&&e.add&&!e.get("deleted")?this._wizard.updateButton("Add",{"disabled":!1}):this._wizard.updateButton("Add",{"disabled":!0})),this.isCustom){this._steps[1].view=this._createPermissionLevelSelectorView();this._wizard.getStepViewByStepNumber(1).showView(this._steps[1].view),this.isCustom=!1}},"onPermissionLevelSelection":function(){if(this.getPermissionLevelView().selected===u.PERMISSION_LEVEL_CUSTOM){var e=new y({"permissions":[],"readonly":!1,"showButtons":!1,"node":this.options.nodeModel});this._steps[1].view=e,this._wizard.currentView.showView(this._steps[1].view),this.isCustom=!0,e.trigger("adjust:splitbar:separator")}this._wizard.updateButton("next",{"disabled":!1})},"getMemberPickerView":function(){return this._steps[0].view},"getMemberPickerHeader":function(){return this._steps[0].headerView},"getPermissionLevelView":function(){return this._steps[1].view},"getPermissionsApplyView":function(){return this._steps[2].view}}),T}),csui.define("csui/controls/table/cells/user/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/cells/user/impl/nls/root/localized.strings",{"publicAccess":"Public Access","noOwnerAssigned":"No owner assigned","noGroupAssigned":"No group assigned","addOwnerOrGroup":"Add owner or owner group","ownerAccessTitle":"Owner access","ownerAria":"Owner {0}","groupOwnerAccessTitle":"Group owner access","groupOwnerAria":"Group owner {0}","roleAccessTitle":"Role access","roleAria":"Role {0}","groupAccessTile":"Group access","groupAria":"Group {0}","userAria":"User {0}","addButtonLabel":"Add","cancelButtonLabel":"Cancel","addButtonTooltip":"Add member to group","cancelButtonTooltip":"Close dialog","addOwner":"Add Owner","addOwnerGroup":"Add Owner Group "}),csui.define("hbs!csui/controls/table/cells/user/impl/user",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-profileimg binf-pull-left">\r\n    <span class="csui-icon-paceholder csui-icon icon_permmision_public"\r\n          title="'+e.escapeExpression((l=null!=(l=r(i,"publicAccessLabel")||(null!=t?r(t,"publicAccessLabel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"publicAccessLabel","hash":{},"loc":{"start":{"line":5,"column":17},"end":{"line":5,"column":38}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"publicAccessLabel")||(null!=t?r(t,"publicAccessLabel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"publicAccessLabel","hash":{},"loc":{"start":{"line":5,"column":52},"end":{"line":5,"column":73}}}):l))+'"></span>\r\n  </div>\r\n  <div class="member-info csui-fadeout'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":38},"end":{"line":7,"column":75}}}))?s:"")+'">\r\n    <div class="">\r\n      <span class="csui-user-display-name csui-public">'+e.escapeExpression((l=null!=(l=r(i,"publicAccessLabel")||(null!=t?r(t,"publicAccessLabel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"publicAccessLabel","hash":{},"loc":{"start":{"line":9,"column":55},"end":{"line":9,"column":76}}}):l))+"</span>\r\n    </div>\r\n  </div>\r\n"},"2":function(e,t,i,n,o){return" binf-disabled"},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"showProfileImg"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":2},"end":{"line":26,"column":9}}}))?s:"")+'  <div class="member-info csui-fadeout ">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"addOwnerOrGroup"):t,{"name":"if","hash":{},"fn":e.program(22,o,0),"inverse":e.program(24,o,0),"loc":{"start":{"line":28,"column":4},"end":{"line":38,"column":11}}}))?s:"")+"  </div>\r\n"},"5":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-profileimg'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":14,"column":31},"end":{"line":14,"column":68}}}))?s:"")+' binf-pull-left">\r\n    <span class="csui-icon '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isOwner"):t,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.program(8,o,0),"loc":{"start":{"line":15,"column":27},"end":{"line":18,"column":69}}}))?s:"")+'" title="'+e.escapeExpression((l=null!=(l=r(i,"title")||(null!=t?r(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":18,"column":78},"end":{"line":18,"column":87}}}):l))+'">\r\n          '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isUser"):t,{"name":"if","hash":{},"fn":e.program(16,o,0),"inverse":e.noop,"loc":{"start":{"line":19,"column":10},"end":{"line":19,"column":43}}}))?s:"")+"</span>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isOwner"):t,{"name":"if","hash":{},"fn":e.program(18,o,0),"inverse":e.program(20,o,0),"loc":{"start":{"line":20,"column":6},"end":{"line":24,"column":13}}}))?s:"")+"    </div>\r\n"},"6":function(e,t,i,n,o){return" icon_permmision_owner "},"8":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\r\n      "+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isOwnerGroup"):t,{"name":"if","hash":{},"fn":e.program(9,o,0),"inverse":e.program(11,o,0),"loc":{"start":{"line":16,"column":6},"end":{"line":18,"column":62}}}))?s:"")},"9":function(e,t,i,n,o){return" icon_permmision_owner_group "},"11":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return" csui-icon-paceholder\r\n      "+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isGroup"):t,{"name":"if","hash":{},"fn":e.program(12,o,0),"inverse":e.program(14,o,0),"loc":{"start":{"line":17,"column":6},"end":{"line":18,"column":55}}}))?s:"")},"12":function(e,t,i,n,o){return" image_group_placeholder_permission\r\n      "},"14":function(e,t,i,n,o){return" image_user_placeholder_permission"},"16":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s=null!=(s=l(i,"initials")||(null!=t?l(t,"initials"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"initials","hash":{},"loc":{"start":{"line":19,"column":24},"end":{"line":19,"column":36}}}):s))},"18":function(e,t,i,n,o){return""},"20":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <img class="csui-icon-user csui-icon binf-img-circle binf-hidden" src="'+e.escapeExpression((s=null!=(s=l(i,"usrImgSrc")||(null!=t?l(t,"usrImgSrc"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"usrImgSrc","hash":{},"loc":{"start":{"line":22,"column":79},"end":{"line":22,"column":92}}}):s))+'"\r\n             alt="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":23,"column":18},"end":{"line":23,"column":26}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":23,"column":35},"end":{"line":23,"column":43}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"userTypeAria")||(null!=t?l(t,"userTypeAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"userTypeAria","hash":{},"loc":{"start":{"line":23,"column":57},"end":{"line":23,"column":73}}}):s))+'">\r\n'},"22":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-add-owner-or-group">\r\n        <span class="csui-user-display-name binf-disabled">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":30,"column":59},"end":{"line":30,"column":67}}}):s))+'</span>\r\n        <span class="csui-icon"></span>\r\n      </div>\r\n'},"24":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="">\r\n        <span class="csui-user-display-name'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"disabled"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":35,"column":43},"end":{"line":35,"column":80}}}))?s:"")+'"\r\n              aria-label="'+e.escapeExpression((l=null!=(l=r(i,"userTypeAria")||(null!=t?r(t,"userTypeAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"userTypeAria","hash":{},"loc":{"start":{"line":36,"column":26},"end":{"line":36,"column":42}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":36,"column":44},"end":{"line":36,"column":52}}}):l))+"</span>\r\n      </div>\r\n"},"26":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isOwnerOrOwnerGroup"):t,{"name":"if","hash":{},"fn":e.program(27,o,0),"inverse":e.noop,"loc":{"start":{"line":42,"column":2},"end":{"line":44,"column":9}}}))?s:"")+(null!=(s=l(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?l(t,"addOwnerOrGroup"):t,{"name":"unless","hash":{},"fn":e.program(29,o,0),"inverse":e.noop,"loc":{"start":{"line":45,"column":2},"end":{"line":47,"column":13}}}))?s:"")},"27":function(e,t,i,n,o){return'    <div class="csui-inline-owner-change"></div>\r\n'},"29":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="'+e.escapeExpression((s=null!=(s=l(i,"inlineToolBarPlaceholderClass")||(null!=t?l(t,"inlineToolBarPlaceholderClass"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"inlineToolBarPlaceholderClass","hash":{},"loc":{"start":{"line":46,"column":16},"end":{"line":46,"column":49}}}):s))+' binf-hidden"></div>\r\n'},"31":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-selected-user-ingroup">\r\n    <span class="icon icon-toolbar-more"></span>\r\n    <span class="csui-selected-username">'+e.escapeExpression((s=null!=(s=l(i,"selectedUsername")||(null!=t?l(t,"selectedUsername"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"selectedUsername","hash":{},"loc":{"start":{"line":53,"column":41},"end":{"line":53,"column":61}}}):s))+"</span>\r\n  </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-user-container">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isPublicPermission"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":2,"column":0},"end":{"line":40,"column":7}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"includeInlineToolBarPlaceholder"):t,{"name":"if","hash":{},"fn":e.program(26,o,0),"inverse":e.noop,"loc":{"start":{"line":41,"column":0},"end":{"line":48,"column":7}}}))?s:"")+"</div>\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"selectedUsername"):t,{"name":"if","hash":{},"fn":e.program(31,o,0),"inverse":e.noop,"loc":{"start":{"line":50,"column":0},"end":{"line":55,"column":7}}}))?s:"")}});return i.registerPartial("csui_controls_table_cells_user_impl_user",n),n}),csui.define("csui/controls/table/cells/user/user.view",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","csui/utils/base","csui/utils/commands","csui/utils/url","csui/dialogs/members.picker/members.picker.wizard","csui/utils/contexts/factories/connector","csui/utils/user.avatar.color","i18n!csui/controls/table/cells/user/impl/nls/localized.strings","hbs!csui/controls/table/cells/user/impl/user"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f){var g=e.config(),b=l.extend({"template":f,"ui":{"personalizedImage":".csui-icon-user","defaultImage":".csui-icon-paceholder","userDisplayName":".csui-user-display-name","addOwnerOrGroup":".csui-add-owner-or-group","addOwnerOrGroupIcon":".csui-add-owner-or-group .icon-edit","userPlaceHolder":".image_user_placeholder_permission"},"events":function(){var e=a.isTouchBrowser()?{"click @ui.addOwnerOrGroup":"addOwnerOrGroupIconClicked"}:{"mouseover @ui.personalizedImage":"showMiniProfilePopup","mouseover @ui.defaultImage":"showMiniProfilePopup","mouseover @ui.userDisplayName":"showMiniProfilePopup","mouseover @ui.addOwnerOrGroup":"showAddOwnerOrGroupIcon","mouseleave @ui.personalizedImage":"removeUnderline","mouseleave @ui.defaultImage":"removeUnderline","mouseleave @ui.userDisplayName":"removeUnderline","mouseleave @ui.addOwnerOrGroup":"removeAddOwnerOrGroupIcon","click @ui.addOwnerOrGroupIcon":"addOwnerOrGroupIconClicked","keydown":"onKeyInView"};return n.extend(e,{"click @ui.userDisplayName":"showUserProfileDialog","click @ui.personalizedImage":"showUserProfileDialog","click @ui.defaultImage":"showUserProfileDialog"}),e},"getValueData":function(){var e=this.prepareUserType(),t=this.model.get("right_id_expand"),i=t&&t.type,o="owner"===e,s="group"===e,l=!o&&!s&&0===i,r="custom"===e&&1===i,a="custom"===e&&848===i,c=this.getDisplayName(),u=o?m.ownerAccessTitle:s?m.groupOwnerAccessTitle:a?m.roleAccessTitle:r?m.groupAccessTile:l?c:"public",d=o?m.ownerAria:s?m.groupOwnerAria:a?m.roleAria:r?m.groupAria:l?m.userAria:"public",h=n.str.sformat(d,c);return{"includeInlineToolBarPlaceholder":this.options.includeInlineToolBarPlaceholder,"inlineToolBarPlaceholderClass":this.options.inlineToolBarPlaceholderClass,"name":c,"disabled":this.hasPermissions(),"showProfileImg":!this.options.showOnlyUserName,"isPublicPermission":"public"===e,"publicAccessLabel":m.publicAccess,"isOwner":o,"userTypeAria":h,"isOwnerGroup":s,"isOwnerOrOwnerGroup":o||s,"initials":t?t.initials:"","isUser":l,"title":u,"isGroup":r,"addOwnerOrGroup":this.addOwnerOrGroup,"usrImgSrc":"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=","selectedUsername":this.model.selectedUser&&this.model.selectedUser.get("name")}},"constructor":function e(t){e.__super__.constructor.apply(this,arguments);var i=this.options.column.attributes;this.options.connector=this.options.context.getModel(h),void 0===this.options.includeInlineToolBarPlaceholder&&(this.options.includeInlineToolBarPlaceholder=i&&i.containsInlineActions),this.options.inlineToolBarPlaceholderClass||(this.options.inlineToolBarPlaceholderClass="csui-inlinetoolbar"),this.noOwnerOrGroup="owner"===this.model.get("type")&&this.hasPermissions(),this.noOwnerOrGroup&&(this.commands=c,this.addOwnerOrGroupCommand=this.commands.findWhere({"signature":"addownerorgroup"}),this.status={"context":this.options.context,"permissionCollection":this.model.collection,"connector":this.options.connector,"applyTo":this.options.applyTo,"nodeId":this.model.collection.options.nodeId,"nodeModel":this.model.collection.options.node,"originatingView":this.options.originatingView,"authUser":this.options.originatingView.options.authUser},this.addOwnerOrGroup=this.noOwnerOrGroup&&this.addOwnerOrGroupCommand&&this.addOwnerOrGroupCommand.enabled(this.status)),this.listenTo(this,"render",this._assignUserColor)},"onRender":function(){var e=this.model.get("right_id_expand");e?(this.isGroup=1===e.type,this.userId=e.id):(this.isGroup=!0,this.userId=-1);var t=this.options.showOnlyUserName,i="owner"===this.model.get("type")||"group"===this.model.get("type");t||i||this._displayProfileImage()},"onDestroy":function(){this._releasePhotoUrl()},"prepareUserType":function(){return!!this.model&&this.model.get("type")},"hasPermissions":function(){var e=!1;return this.model.get("permissions")||(e=!0),e},"getDisplayName":function(){var e,t=this.options.authUser.get("privilege_system_admin_rights")
;return this.model.get("right_id_expand")?e=a.formatMemberName(this.model.get("right_id_expand")):"owner"===this.model.get("type")&&this.hasPermissions()?e=t&&this.addOwnerOrGroup?m.addOwnerOrGroup:!t&&this.addOwnerOrGroup?g&&g.AdminRestoreOwner&&g.AdminRestoreOwnerGroup?m.noOwnerAssigned:g&&g.AdminRestoreOwner?m.addOwnerGroup:g&&g.AdminRestoreOwnerGroup?m.addOwner:m.addOwnerOrGroup:m.noOwnerAssigned:"group"===this.model.get("type")&&this.hasPermissions()&&(e=m.noGroupAssigned),e},"_displayProfileImage":function(){var e=this._getUserPhotoUrl();if(this.ui.personalizedImage.addClass("esoc-userprofile-img-"+this.userId),this.ui.defaultImage.addClass("esoc-user-default-avatar-"+this.userId),e){var t={"url":e,"dataType":"binary"};this._releasePhotoUrl(),this.options.connector.makeAjaxCall(t).always(n.bind(function(e,t,i){200===i.status?this._showPersonalizedImage(e):this._showDefaultImage()},this))}else this._showDefaultImage()},"_getUserPhotoUrl":function(){var e=this.options.connector.connection,t=new u(e.url).getCgiScript(),i=this.model.get("right_id_expand")?this.model.get("right_id_expand").photo_url:null;if(i&&i.indexOf("?")>0)return u.combine(t,i)},"_showPersonalizedImage":function(e){this._releasePhotoUrl(),this._photoUrl=URL.createObjectURL(e),"object"==typeof this.ui.personalizedImage&&(this.ui.personalizedImage.attr("src",this._photoUrl),this.ui.personalizedImage.removeClass("binf-hidden")),"object"==typeof this.ui.defaultImage&&this.ui.defaultImage.addClass("binf-hidden")},"_showDefaultImage":function(e){this._releasePhotoUrl(),"object"==typeof this.ui.personalizedImage&&this.ui.personalizedImage.addClass("binf-hidden"),"object"==typeof this.ui.defaultImage&&this.ui.defaultImage.removeClass("binf-hidden")},"showAddOwnerOrGroupIcon":function(){this.addOwnerOrGroupCommand&&this.addOwnerOrGroupCommand.enabled(this.status)&&this.ui.addOwnerOrGroup.find(".csui-icon").addClass("icon-edit")},"removeAddOwnerOrGroupIcon":function(){this.ui.addOwnerOrGroup.find(".csui-icon").removeClass("icon-edit")},"addOwnerOrGroupIconClicked":function(){var e=this;this.addOwnerOrGroupCommand&&this.addOwnerOrGroupCommand.enabled(this.status)&&this.addOwnerOrGroupCommand.execute(this.status).done(n.bind(function(t){if(t.get("addOwnerGroup")){var i=!!e.options.updateModelSilent&&e.options.updateModelSilent;e.model&&e.model.collection&&e.model.collection.addOwnerOrGroup(t,i)}}))},"_releasePhotoUrl":function(){this._photoUrl&&(URL.revokeObjectURL(this._photoUrl),this._photoUrl=void 0)},"removeUnderline":function(e){this.isGroup||-3===this.userId||(this.ui.personalizedImage.removeClass("cs-user-photo-hover"),this.ui.defaultImage.removeClass("cs-user-photo-hover"),this.ui.userDisplayName.removeClass("cs-user-container-hover").addClass("cs-user-container-no-hover"))},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||this.showUserProfileDialog(e)},"showUserProfileDialog":function(e){if(this.userId<0);else{if(this.isGroup){var t=this,n=this;return void new d({"context":t.options.context,"connector":t.options.connector,"groupId":t.model.attributes.right_id,"edit_permission":t.options.hasEditPermissionAction||t.options.column.attributes.containsInlineActions,"dialogClass":"cs-permission-group-picker","startLocations":["current.group"],"authUser":t.options.originatingView.user,"selectedGroup":t.model,"node":t.options.originatingView&&t.options.originatingView.model,"displayName":a.formatMemberName(this.model.get("right_id_expand")),"unselectableTypes":[0,1],"add":!0,"buttons":[{"id":"Add","label":m.addButtonLabel,"default":!0,"hidden":!0,"disabled":!0,"toolTip":m.addButtonTooltip},{"id":"Cancel","label":m.cancelButtonLabel,"disabled":!1,"close":!0,"toolTip":m.cancelButtonTooltip}]}).show().always(function(){n.$el.trigger("focus")}).done()}e.preventDefault(),e.stopPropagation(),this.userWidgetView?(this.dialogOpen=!0,this.ui.personalizedImage.addClass("cs-user-photo-hover"),this.ui.defaultImage.addClass("cs-user-photo-hover"),this.ui.userDisplayName.removeClass("cs-user-container-no-hover").addClass("cs-user-container-hover"),i(".popover.esoc-mini-profile-popover").hide(),this.userWidgetView.showUserProfileDialog(e)):this.setUserWidget("showUserProfileDialog",e)}},"showMiniProfilePopup":function(e){this.isGroup||-3===this.userId||(this.userWidgetView?(this.ui.personalizedImage.addClass("cs-user-photo-hover"),this.ui.defaultImage.addClass("cs-user-photo-hover"),this.ui.userDisplayName.removeClass("cs-user-container-no-hover").addClass("cs-user-container-hover"),this.userWidgetView.showMiniProfilePopup(e)):this.setUserWidget("showMiniProfilePopup",e))},"setUserWidget":function(e,t){var i=this;csui.require(["esoc/controls/userwidget/userwidget.view"],function(n){i.userWidgetView=new n({"userid":i.userId,"context":i.options.context,"baseElement":i.ui.userDisplayName,"showUserProfileLink":!0,"showMiniProfile":!0,"loggedUserId":i.userId,"connector":i.options.connector}),i[e](t)})},"_assignUserColor":function(){var e=this.model.get("right_id_expand"),t=p.getUserAvatarColor(e);this.ui.userPlaceHolder.css("background",t)}},{"hasFixedWidth":!1,"widthFactor":2});return r.registerByColumnKey("right_id",b),b}),csui.define("hbs!csui/widgets/permissions/impl/edit/apply.permission/impl/header/apply.permission.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h4 class="binf-modal-title">\r\n  <span class="icon icon-notification-information"></span>\r\n  <span class="title-text csui-apply-permission-header-title" title="'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":3,"column":69},"end":{"line":3,"column":78}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":3,"column":80},"end":{"line":3,"column":89}}}):s))+"</span>\r\n</h4>"}});return i.registerPartial("csui_widgets_permissions_impl_edit_apply.permission_impl_header_apply.permission.header",n),n}),csui.define("csui/widgets/permissions/edit/apply.permission/header/apply.permission.header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","hbs!csui/widgets/permissions/impl/edit/apply.permission/impl/header/apply.permission.header","i18n!csui/widgets/permissions/impl/edit/apply.permission/impl/nls/lang","css!csui/widgets/permissions/impl/permissions"],function(e,t,i,n,o){"use strict";return i.ItemView.extend({"template":n,"templateHelpers":function(){var t="";if(this.options.removePermission){var i=this.options.permissionModel&&this.options.permissionModel.get("right_id_expand")&&this.options.permissionModel.get("right_id_expand").name_formatted;i=this.options.permissionModel&&"public"===this.options.permissionModel.get("type")?o.publicAccess:i,t=e.str.sformat(o.removePermissionHeaderTitle,i)}else t=this.options.restorePublicAccess?o.restorePublicAccessHeaderTitle:o.applyPermissionHeaderTitle;return{"title":t}},"constructor":function(e){e||(e={}),i.ItemView.prototype.constructor.apply(this,arguments)}})}),csui.define("csui/widgets/permissions/edit/edit.permission.helper",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/controls/dialog/dialog.view","i18n","csui/models/permission/nodepermission.model","csui/widgets/permissions/edit/permission.level.selector/permission.level.selector.view","csui/widgets/permissions/edit/permission.attributes/permission.attributes.view","csui/widgets/permissions/impl/edit/apply.permission/apply.permission.view","csui/widgets/permissions/edit/apply.permission/header/apply.permission.header.view","csui/controls/progressblocker/blocker","i18n!csui/widgets/permissions/impl/nls/lang"],function(e,t,i,n,o,s,l,r,a,c,u,d,h){"use strict";return i.Object.extend({"constructor":function(e){i.Object.prototype.constructor.apply(this,arguments)},"initialize":function(t){this.uniqueViewId="view"+e.uniqueId()},"_showSelectPermissionLevelPopover":function(){this.permissionLevelSelectorView&&this.permissionLevelSelectorView.destroy(),this.permissionLevelSelectorView=new r({"permissionModel":this.options.permissionModel,"nodeModel":this.options.originatingView.model}),this.permissionLevelSelectorView.render(),this.listenTo(this.permissionLevelSelectorView,"permission:level:selected",this._permissionLevelSelected),this.currentPopoverView=this.permissionLevelSelectorView,this.popoverContainerClassname="",this.showPopover()},"showCustomPermissionPopover":function(){this.permissionAttributesView&&this.permissionAttributesView.destroy(),this.permissionAttributesView=new a({"model":this.options.permissionModel,"readonly":this.options.readonly,"node":this.options.originatingView&&this.options.originatingView.model}),this.permissionAttributesView.render(),this.listenTo(this.permissionAttributesView,"permission:attribute:save:clicked",this.permissionAttributesSelected),this.listenTo(this.permissionAttributesView,"permission:attribute:cancel:clicked",this.closePopover),this.currentPopoverView=this.permissionAttributesView,this.popoverContainerClassname="csui-permission-attribute-popover-container ",this.showPopover()},"_permissionLevelSelected":function(){this._blockActions();var e=this.permissionLevelSelectorView.selected,t=this.options.nodeModel||this.options.originatingView.model,i=t.get("advancedVersioningEnabled");e!==l.PERMISSION_LEVEL_CUSTOM?(this.showingPopover&&this.closePopover(!0),this.permissions=l.getPermissionsByLevelExceptCustom(e,!this.options.originatingView||this.options.originatingView.model.get("container"),this.options.originatingView&&this.options.originatingView.model.get("advanced_versioning"),!!i),this.options.originatingView&&this.options.originatingView.model&&this.options.originatingView.model.get("container")&&"advanced"===this.options.originatingView.model.get("permissions_model")?(this._applyDialog=this.showApplyPermissionDialog(),this._applyDialog.show()):this.triggerMethod("permissions:selected",{"permissions":this.permissions})):this.showCustomPermissionPopover(),this.unblockActions()},"showApplyPermissionDialog":function(){var t=new u;this._view=new c({"context":this.options.context||this.options.originatingView.context,"model":this.options.nodeModel||this.options.originatingView.model,"applyTo":this.options.applyTo,"permissionModel":this.options.permissionModel});var i=new o({"headerView":t,"view":this._view,"className":"csui-permissions-apply-dialog","midSize":!0,"buttons":[{"id":"apply","label":h.applyButtonLabel,"toolTip":h.applyButtonLabel,"default":!0,"click":e.bind(this.onClickApplyButton,this)},{"label":h.cancelButtonLabel,"toolTip":h.cancelButtonLabel,"close":!0}]});return i.listenTo(i,"hide",e.bind(this.onHideDialog,this)),d.imbue(i),i},"onClickApplyButton":function(e){var t=e.dialog.$el.find(".csui-subtypes-option:checked").map(function(){return this.value}).toArray(),i=e.dialog.options.view.model.get("container"),n=e.dialog.options.view.options.permissionModel&&e.dialog.options.view.options.permissionModel.get("right_id"),o=e.dialog.options.view.model.get("permissions_model"),s=i&&"advanced"===o&&e.dialog.options.view.subFolderSelected?2:i&&"advanced"===o?3:0;this.triggerMethod("permissions:selected",{"permissions":this.permissions,"apply_to":s,"right_id":n,"include_sub_types":t});this._applyDialog.destroy(),this._blockActions()},"onHideDialog":function(){var e=this.options.originatingView;this.unblockActions(),e&&e.trigger("unblock:view:actions")},"_blockActions":function(){var e=this.options.originatingView;e&&e.blockActions&&e.blockActions()},"_unblockActions":function(){var e=this.options.originatingView;e&&e.unblockActions&&e.unblockActions()},"unblockActions":function(){this._unblockActions()},"permissionAttributesSelected":function(e){this.permissions=e,this.showingPopover&&this.closePopover(!0),(this.options.nodeModel?this.options.nodeModel:this.options.originatingView&&this.options.originatingView.model).get("container")?(this._applyDialog=this.showApplyPermissionDialog(),this._applyDialog.show()):this.triggerMethod("permissions:selected",{"permissions":this.permissions})},"showPopover":function(){var i=this.options.popoverPlacement;s&&s.settings.rtl&&(i="left"===i?"right":"left");var n={"html":!0,"content":e.bind(function(){return this.currentPopoverView.el},this),"trigger":"manual","placement":i};this.options.popoverAtBodyElement&&(this.popoverContainerClassname+="csui-edit-permission-popover-container "+this.uniqueViewId,this.popoverContainerSelector=".csui-edit-permission-popover-container."+this.uniqueViewId,this.$popoverEl?this._getPopoverParent().addClass(this.popoverContainerClassname):t("body").append('<div class="binf-widgets '+this.popoverContainerClassname+'"></div>'),n=e.extend(n,{"container":this.popoverContainerSelector})),this.$popoverEl=this.options.popoverTargetElement,this.$popoverEl.binf_popover(n).binf_popover("show");var o,l=this._getPopoverParent().find(".binf-popover"),r=l.find(".csui-permission-attribute-tree");r.length&&this.permissionAttributesView.trigger("adjust:splitbar:separator"),o=s&&s.settings.rtl?parseInt(l.css("left"))+l.find(".binf-arrow").outerWidth():parseInt(l.css("left"))-l.find(".binf-arrow").outerWidth(),l.css("left",o),this.$popoverEl.on("shown.binf.popover",e.bind(function(e){this.currentPopoverView&&this.currentPopoverView.currentlyFocusedElement&&this.currentPopoverView.currentlyFocusedElement().trigger("focus"),t(document).on("mousedown."+this.uniqueViewId,{"view":this},this._handleClickEvent),t(window).on("resize."+this.uniqueViewId,{"view":this},this._onWindowResize),this.options.popoverAtBodyElement&&(t(document).on("scroll",{"view":this},this._handleScrollEvent),this.options.originatingView&&this.listenToOnce(this.options.originatingView,"scroll",function(e){e.data={"view":this},this._handleScrollEvent(e)})),t("body").on("keydown."+this.uniqueViewId,{"view":this},this._handleKeyEvents),this.triggerMethod("shown:permission:level:popover")},this)),this.$popoverEl.on("hidden.binf.popover",e.bind(function(e){this.$popoverEl.trigger("focus"),this.currentPopoverView&&this.currentPopoverView.destroy(),this.currentPopoverView=void 0,this.options.popoverAtBodyElement&&t(this.popoverContainerSelector).remove()},this)),t(this.popoverContainerSelector).find("h3.binf-popover-title").html(h.edit_permissions),this.showingPopover=!0},"_onWindowResize":function(e){if(e&&e.data&&e.data.view){var t=e.data.view;t.showingPopover&&t.closePopover()}},"_handleKeyEvents":function(e){if(e&&e.data&&e.data.view){var t=e.data.view;(t.getOption("readonly")&&(9===e.keyCode||13===e.keyCode)||27===e.keyCode)&&t.showingPopover&&t.closePopover()}},"_handleClickEvent":function(e){if(!t(e.target).closest(".binf-popover").length){var i;e&&e.data&&e.data.view&&(i=e.data.view,t(document).off("mousedown."+this.uniqueViewId,i._handleClickEvent)),i&&i.closePopover(),i._unblockActions()}},"_handleScrollEvent":function(e){if(!t(e.target).closest(".binf-popover").length){var i;e&&e.data&&e.data.view&&(i=e.data.view,t(document).off("scroll",i._handleScrollEvent)),i.currentPopoverView&&i&&i.closePopover(),i._unblockActions()}},"closePopover":function(e){this.$popoverEl&&this.$popoverEl.data("binf.popover")&&(t(document).off("mousedown."+this.uniqueViewId,this._handleClickEvent),t(document).off("scroll",this._handleScrollEvent),t(window).off("resize."+this.uniqueViewId,this._onWindowResize),this.currentPopoverView&&this.currentPopoverView.$el.off("keydown",this._handleKeyEvents),this.$popoverEl.binf_popover("destroy"),this.showingPopover=!1,e||this.triggerMethod("closed:permission:level:popover"),this.$popoverEl.trigger("focus"))},"_getPopoverParent":function(){return this.options.popoverAtBodyElement?t(this.popoverContainerSelector):this.$popoverEl.parent()},"onBeforeDestroy":function(){this.closePopover(!0)}})}),csui.define("csui/controls/table/cells/permission/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/cells/permission/impl/nls/root/localized.strings",{"FullControl":"Full control","Write":"Write","Read":"Read","Custom":"Custom","None":"None","see":"See","see_contents":"See contents","modify":"Modify","edit_attributes":"Edit attributes","add_items":"Add items","reserve":"Reserve","delete_versions":"Delete version","delete":"Delete","permissionfor":"{0} Permission for {1}","publicaccess":"Public Access","edit_permissions":"Edit permissions"}),csui.define("hbs!csui/controls/table/cells/permission/impl/permission.level",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-permission-level-container csui-fadeout">\r\n    <span class="csui-permission-level" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"permissionLevelAria")||(null!=t?l(t,"permissionLevelAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"permissionLevelAria","hash":{},"loc":{"start":{"line":3,"column":52},"end":{"line":3,"column":75}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"value")||(null!=t?l(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":3,"column":77},"end":{"line":3,"column":86}}}):s))+'</span>\r\n    <div class="csui-tree"></div>\r\n  </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"value"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":6,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_table_cells_permission_impl_permission.level",n),n}),csui.define("csui/controls/table/cells/permission/permission.level.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","csui/widgets/permissions/edit/edit.permission.helper","csui/utils/commandhelper","csui/utils/commands","i18n!csui/controls/table/cells/permission/impl/nls/localized.strings","hbs!csui/controls/table/cells/permission/impl/permission.level"],function(e,t,i,n,o,s,l,r,a,c,u){"use strict";var d=o.extend({"template":u,"ui":{"permissionLevel":".csui-permission-level","permissionTree":".csui-tree"},"events":{"click @ui.permissionLevel":"onClickPermissionLevel","keydown":"onKeyInView"},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||this.$el.find(".csui-permission-level").trigger("click")},"getValueData":function(){var e,i=this.model.get("permissions"),n=this.model.getPermissionLevel(i);return e="public"===this.model.get("type")?c.publicaccess:this.model&&this.model.get("right_id_expand")?this.model.get("right_id_expand").name:"",null===n?o.prototype.getValueData.apply(this,arguments):(n=this.getPermissionLevel(n),{"value":n,"permissionLevelAria":t.str.sformat(c.permissionfor,n,e),"formattedValue":n})},"getPermissionLevel":function(e){var t=null;switch(e){case 0:t=c.None;break;case 1:t=c.Read;break;case 2:t=c.Write;break;case 3:t=c.FullControl;break;case 4:t=c.Custom}return t},"constructor":function t(i){t.__super__.constructor.apply(this,arguments),this.$=e},"onClickPermissionLevel":function(e){[0,1].indexOf(this.options.model.get("right_id_expand")&&this.options.model.get("right_id_expand").type)<0&&"custom"===this.options.model.get("type")?this._handlePermissionLevelFocus({"cellView":this}):(this._handlePermissionLevelClicked({"cellView":this}),this.trigger("cell:content:clicked",this))},"_handlePermissionLevelClicked":function(e){this._hidePopovers();var t=this.options.originatingView,i=e.cellView;if(!i.$el.data("binf.popover")){var n=e.command?e.command:a.get("EditPermission"),o={"model":i.model,"targetView":{"permissions":i},"originatingView":this.options.originatingView,"applyTo":t&&t.options.applyTo,"authUser":this.options.authUser,"admin_permissions":this.options.hasEditPermissionAction&&"simple"!==this.options.originatingView.model.get("permissions_model")},s=i.$el.closest(".csui-table-row");if(s.addClass("active-row"),t&&t.trigger("block:view:actions"),n.enabled(o)){var c=n.execute(o);r.handleExecutionResults(c,{"command":n,"suppressSuccessMessage":o.suppressSuccessMessage,"suppressFailMessage":o.suppressFailMessage}).done(function(e){n.allowCollectionRefetch&&t.collection.totalCount>t.collection.topCount&&t&&t.collection.fetch()}).always(function(){t&&t.trigger("unblock:view:actions",i.options),s.removeClass("active-row"),t&&t.unblockActions(),i.$el.trigger("focus")})}else{var u=new l({"permissionModel":i.model,"popoverPlacement":"left","popoverAtBodyElement":!t||!t.options.originatingView||!(t&&t.options.originatingView.options.isExpandedView),"popoverTargetElement":i.$el,"readonly":!0,"originatingView":t});u.showCustomPermissionPopover(),u.listenTo(u,"closed:permission:level:popover",function(){u.destroy(),t&&t.trigger("unblock:view:actions"),i.$el.closest(".csui-table-row").removeClass("active-row")})}}},"_handlePermissionLevelFocus":function(e){this._hidePopovers();var t=this.options.originatingView,i=e.cellView;if(!i.$el.data("binf.popover")){i.$el.closest(".csui-table-row").addClass("active-row"),t&&t.trigger("block:view:actions");var n=new l({"permissionModel":i.model,"popoverPlacement":"left","popoverAtBodyElement":!t||!t.options.originatingView||!(t&&t.options.originatingView.options.isExpandedView),"popoverTargetElement":i.$el,"readonly":!0,"originatingView":t&&t});n.showCustomPermissionPopover(),n.listenTo(n,"closed:permission:level:popover",function(){n.destroy(),t&&t.trigger("unblock:view:actions"),i.$el.closest(".csui-table-row").removeClass("active-row"),i.$el.trigger("focus")})}},"_hidePopovers":function(){if(this.$el.parents("body")&&this.$el.parents("body").find(".csui-edit-permission-popover-container .binf-popover")){var e=this.$el.parents("body").find(".csui-edit-permission-popover-container .binf-popover");e.data("binf.popover")&&e.binf_popover("destroy")}}},{"hasFixedWidth":!1,"columnClassName":"csui-permission-level","widthFactor":1});return s.registerByColumnKey("permissions",d),d}),csui.define("csui/controls/table/cells/add.permission/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/cells/add.permission/impl/nls/root/localized.strings",{"addpermission":"Add permission","ToolbarItemMore":"More actions"}),csui.define("csui/controls/table/cells/add.permission/add.permission.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","i18n!csui/controls/table/cells/add.permission/impl/nls/localized.strings"],function(e,t,i,n,o,s,l){"use strict";var r=o.extend({"className":"csui-row-inlinetoolbar","events":{"keydown":"onKeyInView"},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||document.activeElement===this.el&&(this.options.originatingView&&this.options.originatingView.trigger("permission:inlineaction:clicked",{"cellView":this}),this.$el.find("a.binf-dropdown-toggle").trigger("click"),e.preventDefault(),e.stopPropagation())},"renderValue":function(){var e=t.result(this,"className");e&&this.$el.addClass(e),this.$el.attr({"aria-label":l.ToolbarItemMore,"role":"button"})},"_onWindowResize":function(){this.$el.find(".binf-dropdown.binf-open").length&&this.$el.find(".binf-dropdown").removeClass("binf-open")},"constructor":function i(n){i.__super__.constructor.apply(this,arguments),this.windowResizeHandler=t.bind(this._onWindowResize,this),e(window).on("resize",this.windowResizeHandler)}},{"hasFixedWidth":!0,"noTitleInHeader":!0,"isToolbar":!0,"columnClassName":"csui-add-permission","widthFactor":1/3});return s.registerByColumnKey("addpermissions",r),r}),csui.define("css!csui/controls/table/cells/versionnumber/impl/versionnumber",[],function(){}),csui.define("csui/controls/table/cells/versionnumber/versionnumber.view",["csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/cell.registry","csui/utils/base","css!csui/controls/table/cells/versionnumber/impl/versionnumber"],function(e,t,i){"use strict";var n=e.extend({"className":"csui-nowrap","needsAriaLabel":!0},{"hasFixedWidth":!0,"columnClassName":"csui-table-cell-version_number_name"});return t.registerByColumnKey("version_number_name",n),n}),csui.define("csui/controls/table/cells/cell.factory",["csui/lib/underscore","csui/controls/table/cells/cell.registry","csui/controls/table/cells/text/text.view","csui/controls/table/cells/name/name.view","csui/controls/table/cells/date/date.view","csui/controls/table/cells/search/version/version.view","csui/controls/table/cells/search/location/location.view","csui/controls/table/cells/search/category/category.view","csui/controls/table/cells/search/description.cell.view","csui/controls/table/cells/datetime/datetime.view","csui/controls/table/cells/duedate/duedate.view","csui/controls/table/cells/member/member.view","csui/controls/table/cells/node.state/node.state.view","csui/controls/table/cells/parent/parent.view","csui/controls/table/cells/priority/priority.view","csui/controls/table/cells/select/select.view","csui/controls/table/cells/toggledetails/toggledetails.view","csui/controls/table/cells/size/size.view","csui/controls/table/cells/status/status.view","csui/controls/table/cells/favorite/favorite.view","csui/controls/table/cells/favorite/favorite.name.view","csui/controls/table/cells/type.icon/type.icon.view","csui/controls/table/cells/user/user.view","csui/controls/table/cells/permission/permission.level.view","csui/controls/table/cells/add.permission/add.permission.view","csui/controls/table/cells/versionnumber/versionnumber.view","csui-ext!csui/controls/table/cells/cell.factory"],function(e,t,i,n){function o(){}return e.extend(o.prototype,{"hasCellViewByOtherKey":function(e){return t.hasCellViewByOtherKey(e)},"getCellView":function(e){return!0===e.get("isNaming")?n:t.getCellView(e)||i}}),new o}),csui.define("hbs!csui/controls/table/cells/searchbox/searchbox",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="search-box csui-table-searchbox cs-item-picker'+(null!=(s=r(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"show_input"):t,{"name":"unless","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":60},"end":{"line":2,"column":105}}}))?s:"")+'"\r\n         role="combobox" aria-expanded="false" aria-haspopup="listbox">\r\n    <input type="text" class="csui-table-search-input typeahead"\r\n        placeholder="'+e.escapeExpression((l=null!=(l=r(i,"search_placeholder")||(null!=t?r(t,"search_placeholder"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_placeholder","hash":{},"loc":{"start":{"line":5,"column":21},"end":{"line":5,"column":43}}}):l))+'" title="'+e.escapeExpression((l=null!=(l=r(i,"search_input_tooltip")||(null!=t?r(t,"search_input_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_input_tooltip","hash":{},"loc":{"start":{"line":5,"column":52},"end":{"line":5,"column":76}}}):l))+'" aria-autocomplete="list">\r\n    <span class="icon-search-placeholder" title="'+e.escapeExpression((l=null!=(l=r(i,"search_input_tooltip")||(null!=t?r(t,"search_input_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_input_tooltip","hash":{},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":73}}}):l))+'">'+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"size":"contain","iconName":"csui_action_search32"},"loc":{"start":{"line":6,"column":75},"end":{"line":7,"column":61}}}))?s:"")+'</span>\r\n    <span class="typeahead sbclearer binf-hidden formfield_clear" role="button" aria-expanded="false"\r\n        title="'+e.escapeExpression((l=null!=(l=r(i,"search_clear_icon_tooltip")||(null!=t?r(t,"search_clear_icon_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_clear_icon_tooltip","hash":{},"loc":{"start":{"line":9,"column":15},"end":{"line":9,"column":44}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"search_clear_icon_tooltip")||(null!=t?r(t,"search_clear_icon_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_clear_icon_tooltip","hash":{},"loc":{"start":{"line":9,"column":58},"end":{"line":9,"column":87}}}):l))+'"\r\n        tabindex="0"></span>\r\n  </div>\r\n'},"2":function(e,t,i,n,o){return" binf-hidden"},"4":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="search-box csui-table-searchbox'+(null!=(s=r(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"show_input"):t,{"name":"unless","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":45},"end":{"line":13,"column":90}}}))?s:"")+'">\r\n    <span class="icon-search-placeholder" title="'+e.escapeExpression((l=null!=(l=r(i,"search_input_tooltip")||(null!=t?r(t,"search_input_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_input_tooltip","hash":{},"loc":{"start":{"line":14,"column":49},"end":{"line":14,"column":73}}}):l))+'">'+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"size":"contain","iconName":"csui_action_search32"},"loc":{"start":{"line":14,"column":75},"end":{"line":15,"column":59}}}))?s:"")+'</span>\r\n    <input type="search" class="csui-table-search-input"\r\n       placeholder="'+e.escapeExpression((l=null!=(l=r(i,"search_placeholder")||(null!=t?r(t,"search_placeholder"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_placeholder","hash":{},"loc":{"start":{"line":17,"column":20},"end":{"line":17,"column":42}}}):l))+'" title="'+e.escapeExpression((l=null!=(l=r(i,"search_input_tooltip")||(null!=t?r(t,"search_input_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_input_tooltip","hash":{},"loc":{"start":{"line":17,"column":51},"end":{"line":17,"column":75}}}):l))+'" value="'+e.escapeExpression((l=null!=(l=r(i,"search_value")||(null!=t?r(t,"search_value"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_value","hash":{},"loc":{"start":{"line":17,"column":84},"end":{"line":17,"column":100}}}):l))+'">\r\n    <span class="fadeout csui-icon" title="'+e.escapeExpression((l=null!=(l=r(i,"search_input_tooltip")||(null!=t?r(t,"search_input_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_input_tooltip","hash":{},"loc":{"start":{"line":18,"column":43},"end":{"line":18,"column":67}}
}):l))+'"></span>\r\n    <span class="sbclearer binf-hidden formfield_clear" role="button" aria-expanded="false"\r\n          title="'+e.escapeExpression((l=null!=(l=r(i,"search_clear_icon_tooltip")||(null!=t?r(t,"search_clear_icon_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_clear_icon_tooltip","hash":{},"loc":{"start":{"line":20,"column":17},"end":{"line":20,"column":46}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"search_clear_icon_tooltip")||(null!=t?r(t,"search_clear_icon_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_clear_icon_tooltip","hash":{},"loc":{"start":{"line":20,"column":60},"end":{"line":20,"column":89}}}):l))+'"\r\n          tabindex="0"></span>\r\n  </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isTypeAhead"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":23,"column":7}}}))?s:"")+'<div class="csui-table-search-icon" role="button" aria-expanded="false"\r\n     aria-label="'+e.escapeExpression((l=null!=(l=r(i,"search_icon_tooltip")||(null!=t?r(t,"search_icon_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_icon_tooltip","hash":{},"loc":{"start":{"line":25,"column":17},"end":{"line":25,"column":40}}}):l))+'" title="'+e.escapeExpression((l=null!=(l=r(i,"search_icon_tooltip")||(null!=t?r(t,"search_icon_tooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"search_icon_tooltip","hash":{},"loc":{"start":{"line":25,"column":49},"end":{"line":25,"column":72}}}):l))+'" tabindex="0">\r\n</div>'}});return i.registerPartial("csui_controls_table_cells_searchbox_searchbox",n),n}),csui.define("css!csui/controls/table/cells/searchbox/searchbox",[],function(){}),csui.define("csui/controls/table/cells/searchbox/searchbox.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/controls/icon/icon.view","i18n!csui/controls/table/impl/nls/lang","hbs!csui/controls/table/cells/searchbox/searchbox","css!csui/controls/table/cells/searchbox/searchbox"],function(e,t,i,n,o,s){return i.ItemView.extend({"className":"csui-table-column-search","template":s,"templateHelpers":function(){return{"isTypeAhead":this.options.isTypeAhead,"search_value":this.lastFilterValue,"show_input":!this.options.isTypeAhead&&void 0!==this.lastFilterValue,"search_icon_tooltip":t.str.sformat(o.searchIconTooltip,this.options.columnTitle),"search_placeholder":t.str.sformat(o.searchPlaceholder,this.options.columnTitle),"search_input_tooltip":t.str.sformat(o.searchInputTooltip,this.options.columnTitle),"search_clear_icon_tooltip":o.searchClearIconTooltip}},"ui":{"itemPicker":"div.cs-item-picker","searchBox":".csui-table-searchbox","searchInput":".csui-table-search-input","searchInputFadeout":".fadeout","clearer":".sbclearer","searchGlassContainer":".csui-table-search-icon","searchPlaceholderIcon":".icon-search-placeholder"},"events":{"keyup @ui.searchInput":"filterChanged","keydown":"onKeyInView","paste @ui.searchInput":"filterChanged","change @ui.searchInput":"filterChanged","click @ui.searchInput":"_searchFieldInputClicked","click @ui.searchInputFadeout":"_searchFieldInputClicked","click @ui.clearer":"_searchFieldClearerClicked","click @ui.searchGlassContainer":"_searchFieldGlassClicked","click":"_searchBoxClicked","click @ui.searchPlaceholderIcon":"setFocusToInput"},"valueChangedEventName":"change:filterValue","constructor":function(e,t){this.options=t||{},i.ItemView.prototype.constructor.apply(this,arguments),this.lastFilterValue=e,this.lastFocused="I",this.searchGlassIconView=new n({"iconName":"csui_action_search32","size":"contain"})},"onRender":function(){new i.Region({"el":this.ui.searchGlassContainer}).show(this.searchGlassIconView),this.ui.searchBox.hasClass("binf-hidden")||(this.showClearerIfFilterHasValue(),this.triggerMethod("opened"),this.triggerMethod("changed:focus",this.lastFocused),this.setIconAndState())},"onDestroy":function(){this.filterTimeout&&(clearTimeout(this.filterTimeout),this.filterTimeout=void 0)},"onKeyInView":function(t){if(this.getShown()){if(27===t.keyCode)return this.hideAndClear(),void this.triggerMethod("changed:focus");switch(13!==t.keyCode&&32!==t.keyCode||(e(t.target).hasClass("sbclearer")&&this._searchFieldClearerClicked(t),e(t.target).hasClass("csui-table-search-icon")&&this._searchFieldGlassClicked(t)),this.lastFocused){case"I":var i=this.ui.searchInput[0].selectionStart,n=this.getValue();switch(t.keyCode){case 13:t.stopPropagation(),t.preventDefault(),n.length>0&&this.triggerMethod(this.valueChangedEventName,{"column":this.options.column,"keywords":n});break;case 37:i>0&&t.stopPropagation();break;case 39:n.length>0&&i<n.length?t.stopPropagation():(this._moveFocusRight(),t.stopPropagation(),t.preventDefault());break;case 35:this.ui.searchInput[0].selectionStart=n.length,this.ui.searchInput[0].selectionEnd=n.length,t.stopPropagation(),t.preventDefault();break;case 36:this.ui.searchInput[0].selectionStart=0,this.ui.searchInput[0].selectionEnd=0,t.stopPropagation(),t.preventDefault()}break;case"C":switch(t.keyCode){case 13:case 32:this._searchFieldClearerClicked(t);break;case 37:this.lastFocused="I",this.triggerMethod("changed:focus",this.lastFocused),t.stopPropagation(),t.preventDefault();break;case 39:this.lastFocused="G",this.triggerMethod("changed:focus",this.lastFocused),t.stopPropagation(),t.preventDefault()}break;case"G":switch(t.keyCode){case 13:case 32:this.hideAndClear(),t.stopPropagation(),t.preventDefault();break;case 37:this._moveFocusLeft(),t.stopPropagation(),t.preventDefault();break;case 39:t.preventDefault()}}}else 13!==t.keyCode&&32!==t.keyCode||(t.preventDefault(),t.stopPropagation(),this.showSearchInput())},"currentlyFocusedElement":function(){if(!this.getShown())return this.ui.searchGlassContainer;switch(this.lastFocused){case"I":return this.ui.searchInput;case"C":return this.ui.clearer;case"G":return this.ui.searchGlassContainer;default:return e()}},"setFocusToInput":function(){this.lastFocused="I",this.triggerMethod("changed:focus",this.lastFocused),this.ui.searchInput[0].focus()},"setFocusToGlass":function(){this.lastFocused="G",this.triggerMethod("changed:focus",this.lastFocused)},"showSearchInput":function(){this.ui.searchBox.removeClass("binf-hidden"),this.options.isTypeAhead&&this.ui.searchBox.attr("aria-controls",this.options.pickerListId),this.$el.addClass("csui-searchbox-shown"),this.setIconAndState(),this.setFocusToInput(),this.triggerMethod("opened")},"setIconAndState":function(){this.ui.searchGlassContainer.attr("title",o.collapseSearch),this.ui.searchGlassContainer.attr("aria-label",o.collapseSearchAria),this.ui.searchGlassContainer.attr("aria-expanded","true"),this.options.isTypeAhead&&this.ui.itemPicker.attr("aria-expanded","true"),this.searchGlassIconView.setIcon("csui_action_close32")},"hideAndClear":function(e){this.ui.searchBox.addClass("binf-hidden").removeAttr("aria-controls"),this.$el.removeClass("csui-searchbox-shown"),this.ui.searchGlassContainer.attr("title",this.templateHelpers().search_icon_tooltip),this.ui.searchGlassContainer.attr("aria-label",this.templateHelpers().search_icon_tooltip),this.ui.searchGlassContainer.attr("aria-expanded","false"),this.searchGlassIconView.setIcon("csui_action_search32"),this.options.isTypeAhead&&this.ui.itemPicker.attr("aria-expanded","false"),this.ui.clearer.addClass("binf-hidden"),this.lastFocused="I",this.filterTimeout&&(clearTimeout(this.filterTimeout),this.filterTimeout=void 0),this.hideAndClearPostAction(e)},"hideAndClearPostAction":function(e){this.getValue().length&&!e&&(this.setValue(),this.triggerMethod(this.valueChangedEventName,{"column":this.options.column,"keywords":""})),this.lastFilterValue=void 0,this.triggerMethod("closed")},"toggleSearch":function(){this.ui.searchBox.hasClass("binf-hidden")?this.showSearchInput():(this.showInputField=!1,this.hideAndClear())},"showClearerIfFilterHasValue":function(){var e=this.getValue();return!e.length?this.ui.clearer.addClass("binf-hidden"):this.ui.clearer.removeClass("binf-hidden"),e},"getColumn":function(){return this.options.column},"getValue":function(){return this.ui.searchInput.val()},"setValue":function(e){e=e||"",this.ui.searchInput.val(e),this.lastFilterValue=e},"getShown":function(){return!this.ui.searchBox.hasClass("binf-hidden")},"setFocus":function(){var e=this.ui.searchInput.val().length;this.lastFocused="I",setTimeout(t.bind(function(){this.ui.searchInput[0].setSelectionRange&&(this.ui.searchInput.trigger("focus"),this.ui.searchInput[0].setSelectionRange(e,e))},this),500)},"filterChanged":function(){var e=this.showClearerIfFilterHasValue();if(this.lastFilterValue!==e){this.lastFilterValue=e;var t=this;this.filterTimeout&&clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(function(){t.filterTimeout=void 0,t.triggerMethod(t.valueChangedEventName,{"column":t.options.column,"keywords":t.getValue()})},1e3)}},"_hasFilterValue":function(){return this.ui.searchInput.val().length>0},"_moveFocusLeft":function(){this._hasFilterValue()?(this.lastFocused="C",this.triggerMethod("changed:focus",this.lastFocused)):(this.lastFocused="I",this.triggerMethod("changed:focus",this.lastFocused))},"_moveFocusRight":function(){this._hasFilterValue()?(this.lastFocused="C",this.triggerMethod("changed:focus",this.lastFocused)):(this.lastFocused="G",this.triggerMethod("changed:focus",this.lastFocused))},"_searchFieldInputClicked":function(e){e.stopPropagation(),this.setFocusToInput()},"_searchFieldClearerClicked":function(e){e.preventDefault(),e.stopPropagation(),this.showInputField=!0,this.setValue(),this.ui.clearer.addClass("binf-hidden"),this.lastFilterValue="",this.setFocusToInput(),this.triggerMethod(this.valueChangedEventName,{"column":this.options.column,"keywords":""})},"_searchFieldGlassClicked":function(e){e.stopPropagation(),this.toggleSearch()},"_searchBoxClicked":function(e){e.stopPropagation(),this.getShown()||this.toggleSearch()}})}),csui.define("hbs!csui/controls/table/cells/searchbox/empty.results",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="csui-typeahead-no-results">\r\n  '+e.escapeExpression((s=null!=(s=l(i,"noresultsfound")||(null!=t?l(t,"noresultsfound"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"noresultsfound","hash":{},"loc":{"start":{"line":2,"column":2},"end":{"line":2,"column":20}}}):s))+"\r\n</li>"}});return i.registerPartial("csui_controls_table_cells_searchbox_empty.results",n),n}),csui.define("csui/controls/table/cells/searchbox/typeahead.searchbox.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/controls/table/cells/searchbox/searchbox.view","csui/utils/contexts/factories/connector","csui/utils/base","i18n!csui/controls/table/impl/nls/lang","hbs!csui/controls/table/cells/searchbox/empty.results","csui/lib/bootstrap3-typeahead","css!csui/controls/table/cells/searchbox/searchbox"],function(e,t,i,n,o,s,l,r){return n.extend({"valueChangedEventName":"item:change","events":function(){return t.defaults({"keyup @ui.searchInput":"taFilterChanged","keydown":"onKeyInViewUserFilter","paste @ui.searchInput":"taFilterChanged","change @ui.searchInput":"taFilterChanged"},n.prototype.events)},"taFilterChanged":function(e){this.showClearerIfFilterHasValue()},"onKeyInViewUserFilter":function(e){this.getShown()&&"I"==this.lastFocused&&13==e.keyCode||this.onKeyInView(e)},"constructor":function(e){if(this.defaultOptions={"items":"all","delay":200,"minLength":0,"autoSelect":!0,"handleNoResults":!0,"prettyScrolling":!0,"emptyTemplate":r({"noresultsfound":l.noResultsFound})},!e.context)throw new Error("Context is missing in the constructor options");this.context=e.context,e.isTypeAhead=!0,n.prototype.constructor.apply(this,[void 0,arguments[0]]),this.source=this.options.source,this.collection=this.options.collection;var i=(this.options.context.getObject(o),t.isFunction(this.source));if(!this.source)throw new Error("typeahead.seachbox options require a source to be set");this.source=i?t.bind(this.source,this):this.source,e.sorter?this.sorter=e.sorter:this.sorter=i?this._sortMembers:null,e.matcher?this.matcher=e.matcher:this.matcher=i?this._matchMembers:null,this.listenTo(this,"render",t.bind(this.initializeTypeahead,this))},"initializeTypeahead":function(){t.defaults(this.options,this.defaultOptions);var e={"matcher":this.matcher,"sorter":this.sorter,"source":this.source,"displayText":this.options.displayText&&t.bind(this.options.displayText,this),"highlighter":this.options.highlighter&&t.bind(this.options.highlighter,this),"afterSelect":t.bind(this.options.afterSelect||this._afterSelect,this),"updater":t.bind(this.options.updater||this._updater,this),"accessibility":t.bind(this.options.accessibility||this._accessibility,this),"appendTo":this.ui.searchBox};void 0!==this.lastFilterValue&&this.$el.addClass("csui-searchbox-shown"),this.$el.prop("title",""),this.ui.searchInput.typeahead(t.extend(this.options,e))},"hideAndClearPostAction":function(e){void 0===this.getFilterValue()||e||(this.setValue(),this.triggerMethod(this.valueChangedEventName,{"column":this.options.filter,"keywords":""})),this.ui.searchInput.val(""),this.lastFilterValue=void 0,this.triggerMethod("closed")},"_updater":function(e){var t=e.clone();return t.set("name",s.formatMemberName(t)),t},"_matchMembers":function(e){return!0},"_sortMembers":function(e){return e},"_searchFieldClearerClicked":function(e){e.preventDefault(),e.stopPropagation(),this.showInputField=!0,this.ui.searchInput.val(""),this.ui.clearer.addClass("binf-hidden"),this.lastFilterValue="",this.setFocusToInput(),this.triggerMethod(this.valueChangedEventName,{"column":this.options.filter,"keywords":""})},"_afterSelect":function(e){var t=this.options.clearOnSelect?"":s.formatMemberName(e);this.ui.searchBox.val(t),this.trigger(this.valueChangedEventName,{"column":this.options.filter,"keywords":e.get("id")})},"setValue":function(e){this.lastFilterValue=""===e?void 0:e},"getFilterValue":function(){return this.lastFilterValue},"getColumn":function(){return this.options.filter},"_accessibility":function(e){this.ui.searchInput.attr("aria-activedescendant",e.attr("id"))}})}),csui.define("hbs!csui/controls/table/rows/metadata/impl/metadatarow",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="binf-form-group binf-col-xs-12"\r\n           data-csui-attribute="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":5,"column":32},"end":{"line":5,"column":40}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isRegion"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":6,"column":10},"end":{"line":18,"column":17}}}))?s:"")+"      </div>\r\n"},"2":function(e,t,i,n,o){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <div title="'+e.escapeExpression(e.lambda(null!=t?s(t,"titleAttr"):t,t))+'" id="'+e.escapeExpression(e.lambda(null!=t?s(t,"regionLabelId"):t,t))+'"\r\n                     class="binf-col-xs-4 binf-col-sm-3 binf-col-md-2 binf-control-label">'+e.escapeExpression(e.lambda(null!=t?s(t,"label"):t,t))+'</div>\r\n\r\n              <div id="'+e.escapeExpression(e.lambda(null!=t?s(t,"id"):t,t))+'" class="binf-col-xs-8 binf-col-sm-9 binf-col-md-10\r\n              binf-form-control-static csui-content-view" aria-labelledby="'+e.escapeExpression(e.lambda(null!=t?s(t,"regionLabelId"):t,t))+'"></div>\r\n'},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'              <label for="'+e.escapeExpression(e.lambda(null!=t?l(t,"id"):t,t))+'" title="'+e.escapeExpression(e.lambda(null!=t?l(t,"titleAttr"):t,t))+'"\r\n                     class="binf-col-xs-4 binf-col-sm-3 binf-col-md-2 binf-control-label">'+e.escapeExpression(e.lambda(null!=t?l(t,"label"):t,t))+'</label>\r\n              <input id="'+e.escapeExpression(e.lambda(null!=t?l(t,"id"):t,t))+'" type="text" readonly value="'+e.escapeExpression(e.lambda(null!=t?l(t,"value"):t,t))+'"\r\n                     '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"tooltip"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":16,"column":21},"end":{"line":16,"column":72}}}))?s:"")+'\r\n                     class="binf-col-xs-8 binf-col-sm-9 binf-col-md-10 binf-form-control-static">\r\n'},"5":function(e,t,i,n,o){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'title="'+e.escapeExpression(e.lambda(null!=t?s(t,"tooltip"):t,t))+'"'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-row">\r\n  <div class="cs-form binf-form-horizontal">\r\n'+(null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"meta"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":4},"end":{"line":20,"column":13}}}))?s:"")+"  </div>\r\n</div>"}});return i.registerPartial("csui_controls_table_rows_metadata_impl_metadatarow",n),n}),csui.define("css!csui/controls/table/rows/metadata/impl/metadatarow",[],function(){}),csui.define("csui/controls/table/rows/metadata/metadatarow.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","hbs!csui/controls/table/rows/metadata/impl/metadatarow","css!csui/controls/table/rows/metadata/impl/metadatarow","css!csui/controls/form/impl/form"],function(e,t,i,n){"use strict";return i.ItemView.extend({"className":"csui-table-metadata-view binf-container-fluid","template":n,"templateHelpers":function(){var e,i=this,n=[];return t.each(this.options.columns,function(t){e=new t.CellView({"context":this.options.context,"column":t,"model":this.options.model,"nameEdit":!1}),n=n.concat(this._getColumnAttributes(t,e))},this),this._contentViews=[],t.each(n,function(e){e.id=t.uniqueId(e.name),e.contentView&&(e.id=t.uniqueId(e.name),e.isRegion=!0,e.regionLabelId=t.uniqueId("rl_"+e.id),i._contentViews.push({"view":e.contentView,"regionElementId":e.id}))}),{"meta":n}},"_getColumnAttributes":function(e,i){var n=[];if(t.isFunction(i.getAttributes))n=i.getAttributes();else{var o=i.getValueText(),s=t.isFunction(i.getTooltipValueText)?i.getTooltipValueText():o;("size"!==e.name||0!==o&&null!==o&&""!==o)&&n.push({"label":e.title,"titleAttr":e.titleAttr||e.title,"value":o,"tooltip":s,"name":e.name,"contentView":t.isFunction(i.getContentView)?i.getContentView():void 0})}return n},"constructor":function(e){i.ItemView.prototype.constructor.apply(this,arguments)},"onRender":function(){t.each(this._contentViews,function(e){var t=this.$el.find("#"+e.regionElementId);new i.Region({"el":t}).show(e.view)},this)},"currentlyFocusedElement":function(){return e()}})}),csui.define("hbs!csui/controls/table/rows/error/impl/errorrow",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-text-danger" title="'+e.escapeExpression((s=null!=(s=l(i,"errorMessage")||(null!=t?l(t,"errorMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMessage","hash":{},"loc":{"start":{"line":1,"column":37},"end":{"line":1,"column":53}}}):s))+'><span class="csui-text-danger">'+e.escapeExpression((s=null!=(s=l(i,"errorMessage")||(null!=t?l(t,"errorMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMessage","hash":{},"loc":{"start":{"line":1,"column":85},"end":{"line":1,"column":101}}}):s))+"</span></div>\r\n"}});return i.registerPartial("csui_controls_table_rows_error_impl_errorrow",n),n}),csui.define("css!csui/controls/table/rows/error/impl/errorrow",[],function(){}),csui.define("csui/controls/table/rows/error/errorrow.view",["csui/lib/underscore","csui/lib/marionette","hbs!csui/controls/table/rows/error/impl/errorrow","css!csui/controls/table/rows/error/impl/errorrow"],function(e,t,i){return t.ItemView.extend({"className":"csui-table-error-view binf-container-fluid","template":i,"templateHelpers":function(){return{"errorMessage":this.options.errorMessage?this.options.errorMessage:""}},"ui":{},"events":{},"constructor":function(e){this.options=e||{},t.ItemView.prototype.constructor.apply(this,arguments)}})}),csui.define("csui/controls/table/impl/table.header.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/base","i18n"],function(e,t,i,n,o){"use strict";function s(){this.accFocusedColumn>=this.displayedColumns.length&&(this.displayedColumns>0?this.accFocusedColumn=this.displayedColumns.length-1:this.accFocusedColumn=0)}return i.View.extend({"constructor":function t(i){t.__super__.constructor.apply(this,arguments),this._getActiveInlineForm=i._getActiveInlineForm,this.searchBoxes=i.searchBoxes,this.alternativeHeaderView=i.alternativeHeaderView,this.displayedColumns=i.displayedColumns,this.accFocusedColumn=i.accFocusedColumn||0,this.accSearchFocused=i.accSearchFocused||!1,this.alternativeHeaderView&&(this.listenTo(this.alternativeHeaderView,"focusout",function(i){var n,o,s=this.$(">tr>th:not(.csui-alternative-table-header)"),l=-1;if("left"===i.direction){for(n=0;n<s.length;n++)if(o=e(s[n]),o.hasClass(t.ClassNameColumnForAlternativeHeader)){l=n-1;break}}else for(n=s.length-1;n>0;n--)if(o=e(s[n]),o.hasClass(t.ClassNameColumnForAlternativeHeader)&&n+1<s.length){l=n+1;break}l>=0&&(this.accFocusedColumn=l),this._accSetFocusToCurrentlyFocusedElement()}),this.listenTo(this.alternativeHeaderView,"changed:focus",this._accSetFocusToCurrentlyFocusedElement))},"events":{"keydown":"onKeyInView"},"render":function(){this.triggerMethod("before:render",this);var e=this.$(">tr>th"),t=this.$(">tr>th>.csui-table-column-search");this._columnCount=e.length,this._searchBoxCount=t.length,this.triggerMethod("render",this)},"remove":function(){return this.stopListening(),this.undelegateEvents(),this},"currentlyFocusedElement":function(){s.call(this);var t=this._getColumnSelector(this.displayedColumns[this.accFocusedColumn]),i=this.$(t);if(i.is(":visible"))if(this.accSearchFocused){var n=this._findActiveSearchBoxView();i=n?n.currentlyFocusedElement():e()}else{var o=e(i[0]).find(".csui-focusable-table-column-header");o.length>0&&(i=o)}return i},"_getColumnSelector":function(e){return'tr>th[data-csui-attribute="'+e.attributes.column_key+'"]'},"_rightIsNextColumn":function(){var e=this.displayedColumns[this.accFocusedColumn],t=this._getColumnSelector(e),i=t+" .csui-table-column-search",n=this.$(i);return this.accSearchFocused||0===n.length},"onKeyInView":function(e){function t(){for(r=this.accFocusedColumn-1;r>=0;){if(i=this._getColumnSelector(this.displayedColumns[r]),n=this.$(i),n.is(":visible")&&n.find(".csui-focusable-table-column-header").length>0){this.accFocusedColumn=r,l=n.find(".csui-table-column-search"),this.accSearchFocused=l.length>0,this.accSearchFocused&&(a=this._findActiveSearchBoxView())&&a.getShown()&&a.setFocusToGlass();break}r--}}var i,n,s,l,r,a;if(!this._getActiveInlineForm())switch(e.keyCode){case 32:case 13:e.ctrlKey||e.metaKey||this.accSearchFocused||this.options.displayedColumns[this.accFocusedColumn].bSortable&&(e.preventDefault(),e.stopPropagation(),this.trigger("sorting:toggle",this.accFocusedColumn));break;case 37:o&&o.settings.rtl?this._handleRightArrowKey(i,n,a,s):this._handleLeftArrowKey(a,t),e.preventDefault(),e.stopPropagation(),this.trigger("closeOtherControls"),this._accSetFocusAfterTabableRegionActivated();break;case 39:o&&o.settings.rtl?this._handleLeftArrowKey(a,t):this._handleRightArrowKey(i,n,a,s),e.preventDefault(),e.stopPropagation(),this.trigger("closeOtherControls"),this._accSetFocusAfterTabableRegionActivated();break;case 35:this.accFocusedColumn=this.displayedColumns.length-1,s=this.accFocusedColumn+1,l=this.$(">tr>th:nth-child("+s+") .csui-table-column-search"),this.accSearchFocused=l.length>0,this.accSearchFocused&&(a=this._findActiveSearchBoxView())&&a.getShown()&&a.setFocusToInput(),e.preventDefault(),e.stopPropagation(),this.trigger("closeOtherControls"),this._accSetFocusAfterTabableRegionActivated();break;case 36:this.accFocusedColumn=0,this.accSearchFocused=!1,e.preventDefault(),e.stopPropagation(),this.trigger("closeOtherControls"),this._accSetFocusAfterTabableRegionActivated();break;case 121:e.shiftKey&&(this.searchBoxes&&this.searchBoxes.length>0&&(a=this.searchBoxes[0],a.showSearchInput(),this.listenToOnce(a,"closed",this._accSetFocusAfterTabableRegionActivated)),e.stopPropagation(),e.preventDefault())}},"_handleLeftArrowKey":function(e,t){this.accSearchFocused?(e=this._findActiveSearchBoxView(),e&&e.getShown()?t.call(this):this.accSearchFocused=!1):t.call(this)},"_handleRightArrowKey":function(e,t,i,n){if(this._rightIsNextColumn()){for(n=this.accFocusedColumn+1;n<this.displayedColumns.length;){if(e=this._getColumnSelector(this.displayedColumns[n]),t=this.$(e),this._isHeaderCellFocusable(t)){this.accFocusedColumn=n,this.accSearchFocused=!1;break}n+=1}i=this._findActiveSearchBoxView(),i&&i.getShown()&&(this.accSearchFocused=!0,i.setFocusToInput())}else this.accSearchFocused=!0,(i=this._findActiveSearchBoxView())&&i.getShown()&&i.setFocusToInput()},"_accSetFocusToCurrentlyFocusedElement":function(){var t=this.currentlyFocusedElement();t.length>0&&(t=e(t[0]),this.trigger("changed:focus",this),n.isVisibleInWindowViewport(t)&&t.trigger("focus"))},"_accSetFocusAfterTabableRegionActivated":function(){if(!this._getActiveInlineForm()){var e=this._findActiveSearchBoxView();e&&e.getShown()||this._accSetFocusToCurrentlyFocusedElement()}},"_accSearchBoxFocused":function(e){this.accFocusedColumn=e.columnIndex,this.accSearchFocused=!0,this._accSetFocusToCurrentlyFocusedElement()},"_findActiveSearchBoxView":function(){var e=this.searchBoxes,i=this.displayedColumns,n=i[this.accFocusedColumn].name.toLowerCase();return t.find(e,function(e){return e.options.columnName===n})},"_isHeaderCellFocusable":function(e){return e.is(":visible")&&e.find(".csui-focusable-table-column-header").length>0}},{"ClassNameColumnForAlternativeHeader":"csui-undefined"})}),csui.define("csui/controls/table/impl/table.body.view",["csui/lib/jquery","csui/lib/marionette","csui/utils/focusable","i18n"],function(e,t,i,n){"use strict";function o(e){var t;return e&&(t=this._detailRowViewsByModelId[e.id||e.get("id")]),t||{"views":[]}}return t.View.extend({"constructor":function e(t){e.__super__.constructor.apply(this,arguments),this._getActiveInlineForm=t._getActiveInlineForm,this.startInlineFormForEdit=t.startInlineFormForEdit,this.collection=t.collection,this.displayedColumns=t.displayedColumns,this.nameColumnIndex=e.getNameColumnIndex(t.displayedColumns)||0,this.accFocusedCell=t.accFocusedCell||{"column":this.nameColumnIndex,"row":0},this.tableView=t.tableView},"events":{"keydown":"onKeyInView"},"render":function(){this.triggerMethod("before:render",this);var e=this.$el.parent().find("thead>tr>th");this._columnCount=e.length,this.triggerMethod("render",this)},"remove":function(){return this.stopListening(),this.undelegateEvents(),this},"currentlyFocusedElement":function(){if(!this.tableView.table)return e();if(this.accFocusedCell){var t=this.collection.at(this.accFocusedCell.row);if(void 0!==o.call(this.tableView,t).accFocusedViewIndex)return e();var n=e(this.tableView.table.row(this.accFocusedCell.row).node()),s=n.children()[this.accFocusedCell.column],l=i.findFocusables(s);return e(1===l.length?l[0]:s)}return e()},"onClickedCell":function(e){this.accFocusedCell.row=e.rowIndex,this.accFocusedCell.column=e.colIndex,this._accSetFocusAfterTabableRegionActivated()},"onKeyInView":function(t){var i,s,l=e();if(!this._getActiveInlineForm())if(37===t.keyCode){if(n&&n.settings.rtl)for(;this.accFocusedCell.column<this.displayedColumns.length-1&&(this.accFocusedCell.column++,!this._isCurrentBodyCellFocusable()););else for(;this.accFocusedCell.column>0&&(this.accFocusedCell.column--,!this._isCurrentBodyCellFocusable()););t.preventDefault(),t.stopPropagation(),this.trigger("closeOtherControls"),this._accSetFocusAfterTabableRegionActivated()}else if(38===t.keyCode){if(t.preventDefault(),t.stopPropagation(),this.trigger("closeOtherControls"),i=this.collection.at(this.accFocusedCell.row),s=o.call(this.tableView,i),void 0===s.accFocusedViewIndex){if(!(this.accFocusedCell.row>0))return;this.accFocusedCell.row--}else s.accFocusedViewIndex>0?s.accFocusedViewIndex--:delete s.accFocusedViewIndex;this._accSetFocusAfterTabableRegionActivated()}else if(39===t.keyCode){if(n&&n.settings.rtl)for(;this.accFocusedCell.column>0&&(this.accFocusedCell.column--,!this._isCurrentBodyCellFocusable()););else for(;this.accFocusedCell.column<this.displayedColumns.length-1&&(this.accFocusedCell.column++,!this._isCurrentBodyCellFocusable()););t.preventDefault(),t.stopPropagation(),this.trigger("closeOtherControls"),this._accSetFocusAfterTabableRegionActivated()}else if(40===t.keyCode){i=this.collection.at(this.accFocusedCell.row),s=o.call(this.tableView,i);var r=s.accFocusedViewIndex;for(void 0===s.accFocusedViewIndex&&s.views.length>0&&(s.accFocusedViewIndex=-1);0===l.length;){if(void 0!==s.accFocusedViewIndex&&s.accFocusedViewIndex+1<s.views.length)s.accFocusedViewIndex=s.accFocusedViewIndex+1;else{if(!(this.accFocusedCell.row+1<this.collection.length)){s.accFocusedViewIndex=r;break}delete s.accFocusedViewIndex,this.accFocusedCell.row++,(i=this.collection.at(this.accFocusedCell.row))&&(s=o.call(this.tableView,i))}l=this.currentlyFocusedElement()}t.preventDefault(),t.stopPropagation(),this.trigger("closeOtherControls"),this._accSetFocusAfterTabableRegionActivated()}else 33===t.keyCode?(this.accFocusedCell.row=0,i=this.collection.at(this.accFocusedCell.row),s=o.call(this.tableView,i),delete s.accFocusedViewIndex,t.preventDefault(),t.stopPropagation(),this.trigger("closeOtherControls"),this._accSetFocusAfterTabableRegionActivated()):34===t.keyCode?(this.collection.length>0?(this.accFocusedCell.row=this.collection.length-1,i=this.collection.at(this.accFocusedCell.row),s=o.call(this.tableView,i),delete s.accFocusedViewIndex):this.accFocusedCell.row=0,t.preventDefault(),t.stopPropagation(),this.trigger("closeOtherControls"),this._accSetFocusAfterTabableRegionActivated()):35===t.keyCode?(this.accFocusedCell.column=this.displayedColumns.length-1,t.preventDefault(),t.stopPropagation(),this.trigger("closeOtherControls"),this._accSetFocusAfterTabableRegionActivated()):36===t.keyCode?(this.accFocusedCell.column=0,t.preventDefault(),t.stopPropagation(),this.trigger("closeOtherControls"),this._accSetFocusAfterTabableRegionActivated()):113===t.keyCode&&(i=this.collection.at(this.accFocusedCell.row),i&&this.startInlineFormForEdit(i),t.preventDefault(),t.stopPropagation())},"_accSetFocusAfterTabableRegionActivated":function(){if(!this._getActiveInlineForm()){var t=this.currentlyFocusedElement();if(t.length>0){var i=e(t);this.trigger("changed:focus",this),
this._isVisible(i)&&i.trigger("focus")}}},"_isVisible":function(t){return e(t).is(":visible")},"_isCurrentBodyCellFocusable":function(){return!("description"===this.displayedColumns[this.accFocusedCell.column].name&&!this.hasCustomDescriptionColumn)}},{"getNameColumnIndex":function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t];if(i.isNaming)return t}}})}),csui.define("css!csui/controls/table/impl/table",[],function(){}),csui.define("csui/controls/table/table.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/lib/jquery.dataTables.bootstrap/js/dataTables.bootstrap","csui/lib/jquery.dataTables.tableTools/js/dataTables.tableTools","i18n!csui/controls/table/impl/nls/lang","csui/utils/log","csui/utils/base","csui/utils/focusable","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/table/cells/cell.factory","csui/models/nodechildrencolumn","csui/controls/progressblocker/blocker","csui/utils/contexts/factories/connector","csui/behaviors/default.action/impl/defaultaction","csui/controls/checkbox/checkbox.view","csui/controls/disclosure/disclosure.view","csui/controls/table/cells/select/select.view","csui/controls/table/cells/searchbox/searchbox.view","csui/controls/table/cells/searchbox/typeahead.searchbox.view","csui/controls/table/inlineforms/inlineform.factory","csui/controls/table/rows/metadata/metadatarow.view","csui/controls/table/rows/error/errorrow.view","csui/controls/table/impl/table.header.view","csui/controls/table/impl/table.body.view","csui/utils/accessibility","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/controls/mixins/view.state/node.view.state.mixin","csui/controls/toolbar/toolitems.filtered.model","csui/controls/toolbar/toolbar.command.controller","csui/models/mixins/v2.fields/v2.fields.mixin","i18n!csui/controls/table/cells/toggledetails/impl/nls/lang","css!csui/controls/table/impl/table","csui/lib/perfect-scrollbar","csui/lib/jquery.mousehover","csui/lib/jquery.scrollbarwidth","csui/lib/jquery.renametag"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v,w,y,C,_,x,k,T,V,S,I,A,E,M,P,D,F){"use strict";function O(e,i,n){var o=0,s=this.$el.find("thead th"),l=s.length;if(0===this.wrappedColumns.length&&s.last().hasClass("csui-table-cell-_toggledetails")&&(l-=1),n&&n.firstColumnIndex>=0){if(l>0&&n.firstColumnIndex<l){var r=t(i.children()[0]);n.lastColumnIndex&&n.lastColumnIndex>=n.firstColumnIndex&&(o=n.lastColumnIndex-n.firstColumnIndex+1,o>1&&r.attr("colspan",o),i.attr("style",""));for(var a=0;a<n.firstColumnIndex;a++)i.prepend("<td></td>");var c=l-n.firstColumnIndex-o;if(n.displayInEntireRow)n.descriptionColspan=c+1;else if(c>0)for(var u=0;u<c;u++)i.append("<td></td>")}}else{var d=t(e).children(),h=i.children();1===h.length&&d.length>1&&(o=d.length,0===this.wrappedColumns.length&&o>0&&(o-=1),h.attr("colspan",o))}}function N(e,t){var i=e.id||e.get("id"),n=this._detailRowViewsByModelId[i];n||(n={"views":[]},this._detailRowViewsByModelId[i]=n),n.views.push(t)}function R(e,i,n,o){var s,l=o.get("csuiErrorMessage");if(l){var r=new T({"errorMessage":l});r.render(),e.row(i).child(r.el,"csui-details-row").show(),t(n).addClass("csui-has-details-row"),s=e.row(i).child(),o.isLocallyCreated&&s.addClass("csui-new-item"),void 0!==o.get("id")&&s.addClass("csui-saved-item")}else{var a,c,u=[];if(me)s=t();else{if(this.options.descriptionRowView){var d=o.get("description")&&o.get("description").length>0;if((!d&&this.options.descriptionRowViewOptions.showSummary||this.options.descriptionRowViewOptions.showSummaryOnly)&&(d=o.get("summary")&&o.get("summary").length>0),d){var h=!1;this.options.descriptionRowViewOptions&&this.options.descriptionRowViewOptions.collapsedHeightIsOneLine&&(h=!0);var p=new this.options.descriptionRowView({"model":o,"collapsedHeightIsOneLine":h,"tableView":this});p.render(),c=t('<td class="csui-details-row"></td>'),a=t('<tr class="csui-details-row csui-details-row-description"></tr>'),c.appendTo(a),p.triggerMethod("before:show"),p.$el.appendTo(c),p.triggerMethod("show"),O.call(this,n,a,this.options.descriptionRowViewOptions),this.options.descriptionRowViewOptions&&(this.options.descriptionRowViewOptions.displayInEntireRow&&this.options.descriptionRowViewOptions.descriptionColspan&&c.attr("colspan",this.options.descriptionRowViewOptions.descriptionColspan),this.options.descriptionRowViewOptions.showDescriptions||a.addClass("binf-hidden")),this._detailRowsDescriptionTRs.push({"rowEl":a,"view":p}),N.call(this,o,p),u.push(a[0])}}if(this.wrappedColumns.length>0){var m=new k({"context":this.context,"model":o,"columns":this.wrappedColumns});m.render(),c=t('<td class="csui-details-row"></td>'),a=t('<tr class="csui-details-row csui-details-row-metadata"></tr>'),c.appendTo(a),this.options.haveDetailsRowExpandCollapseColumn&&this.options.haveToggleAllDetailsRows?this.detailsRowsAreExpanded||this.expandedDetailRows[o.id||o.get("id")]?a.addClass("binf-collapse binf-in"):a.addClass("binf-collapse"):a.addClass("binf-collapse binf-in"),a.attr("id","csui-details-row-"+o.cid),m.triggerMethod("before:show"),m.$el.appendTo(c),m.triggerMethod("show"),O.call(this,n,a),o.set("hasMetadataRow",!0,{"silent":!0}),N.call(this,o,m),u.push(a[0])}else o.set("hasMetadataRow",!1,{"silent":!0});e.row(i).child(u,"csui-details-row").show(),s=e.row(i).child()}}return s.length>0&&t(n).addClass("csui-has-details-row"),s}function B(){if(this.allColumns.length){this.trigger("creatingTable",{"sender":this});var e=this;e.hoveredRowDataId=void 0,this._detailRowsDescriptionTRs=[],this._detailRowViewsByModelId={};se.call(this);var n=new c.Url(this.connector.connection.url).getOrigin(!0),s=c.Url.combine(n,this.connector.connection.supportPath),l=H.call(this);this.csuiDestroyRowCallbacks=[];var u=i.extend({"columns":i.map(this.displayedColumns,function(e){return e.attributes.initialSortingDescending&&(e.asSorting=["desc","asc"]),e}),"jQueryUI":!1,"autoWidth":!1,"deferRender":!0,"serverSide":!0,"language":e.localizableLabels,"ajax":function(t,i,n){if(!1!==this.refreshEnabled){var o=this.api();o.context.length>0&&(e.options.clientSideDataOperation?ce.call(e,o,t,n,i):ae.call(e,o,t,n,i))}},"initComplete":function(t,i){e.trigger("tableFrameRendered",{"sender":e,"target":this[0]})},"drawCallback":function(n){var o=t(this);if(e.collection&&(0===e.collection.length||1===e.collection.length&&e.collection.at(0).inlineFormView?o.addClass("csui-table-empty"):o.removeClass("csui-table-empty")),me&&(o.parent().addClass("csui-accessibility-table"),o.find("thead > tr").children().each(function(){var e=t(this);if(e.find(".csui-table-column-search").length){var i=t("<div>",{"class":"csui-accessibility-table-th"});e.wrapInner(i)}})),e.hoveredRowDataId=void 0,e.hoveredRow=void 0,e.options.haveDetailsRowExpandCollapseColumn&&e.options.haveToggleAllDetailsRows&&!o.find("td.csui-table-cell-_toggledetails > .expand-details-row-toggle").length&&e.collection.length){e.displayedColumns=i.filter(e.displayedColumns,function(e){return"_toggledetails"!==e.sName});o.find(".csui-table-cell-_toggledetails").remove()}o.find("thead th").each(function(n){if(e.displayedColumns.length>n){var o=e.displayedColumns[n];if(o.titleAttr){var s=o.titleAttr;o.orderable&&(s="desc"===t(this).attr("data-csui-column-next-sort-dir")?i.str.sformat(r.columnSortDescendingTooltip,o.titleAttr):i.str.sformat(r.columnSortAscendingTooltip,o.titleAttr)),t(this).attr("title",s)}}var l=t(this).find("div.csui-focusable-table-column-header");if(l.hasClass("csui-empty")&&(l.hasClass("csui-iconButSorted")||(t(this).removeAttr("title"),l.removeAttr("role")),l.removeClass("csui-iconButSorted")),"button"===l.attr("role")){if(!l.attr("aria-label")){var a=t(this).attr("data-csui-column-next-sort-dir"),c="desc"===a?r.NodeTableSortDescendingButtonAria:"asc"===a?r.NodeTableSortAscendingButtonAria:"LaLaLa",u=t(this).attr("data-csui-attribute"),d=i.find(e.displayedColumns,function(e){return e.name===u}),h=d.titleAttr||d.title;c=i.str.sformat(c,h),l.attr("aria-label",c)}}t(this).removeAttr("data-csui-column-current-sort-dir"),t(this).removeAttr("data-csui-column-next-sort-dir")}),o.find("th[aria-sort]").each(function(){t(this).removeAttr("aria-sort")}),o.find("tr:not(.csui-details-row)").each(function(){t(this).find("> *").last().addClass("csui-table-cell-last-visible")}),e.trigger("tableBodyRendered",{"sender":e,"target":t("tbody",this)[0]}),e._plugHeaderBodyViews(),e.table&&setTimeout(function(){e.trigger("update:scrollbar")})},"headerCallback":function(n,o,s,l,a){if(i.find(e.searchBoxes,function(e){return e.getShown()}))return void(e.collection.length&&e._selectAllCheckboxRegion&&e._selectAllCheckboxRegion.currentView.model.get("disabled")&&e._selectAllCheckboxRegion.currentView.model.set("disabled",!1));var c,u=[y.columnClassName,"csui-table-cell-_toggledetails"],d=t(n),h=d.find(">th"),p=this.api().order();if(p.length>0){var m=p[0];m.length>0&&(c=m[0])}h.each(function(n){var o=t(this);if(e.displayedColumns.length>n){var s=e.displayedColumns[n];if(o.attr("data-csui-attribute",s.name),void 0===i.find(u,function(e){return o.hasClass(e)})){t(this).empty(),void 0===o.attr("aria-label")&&o.attr("aria-label",s.title?s.title:r[s.name]),s.titleIconInHeader&&void 0===o.attr("title")&&o.attr("title",s.title);var l=t('<div class="csui-focusable-table-column-header"></div>'),a=s.titleIconInHeader&&c===n,d=!0===s.noTitleInHeader&&(!s.titleIconInHeader||a);if(me&&(d=!1),d)l.addClass("csui-empty"),a&&(l.addClass("csui-iconButSorted"),l.attr("role","button"));else{s.attributes.sort&&l.attr("role","button");var h;h=s.titleIconInHeader?t('<span class="csui-icon csui-table-header-icon '+s.titleIconInHeader+'">'):t('<div class="csui-table-column-text"></div>').text(s.title),s.customHeader&&(s.customHeader.render(),h.append(s.customHeader.$el),s.customHeader.trigger("dom:added")),l.append(h)}t(this).append(l)}}}),q.call(e,n),G.call(e,n),K.call(e,this.api().order()),J.call(e),e.trigger("tableHeaderRendered",{"sender":e,"target":n})},"footerCallback":function(t,i,n,o,s){e.trigger("tableFooterRendered",{"sender":e,"target":t})},"rowCallback":function(l,r,a){function c(){var t=e._detailRowViewsByModelId||{};Object.keys(t).forEach(function(i){t[i].views.forEach(function(t){e.stopListening(t),t.destroy()})}),e._detailRowsDescriptionTRs=[],e._detailRowViewsByModelId={},e.hoveredRowDataId=void 0}function u(){var t=f;setTimeout(function(){for(var i=0;i<t.length;i++)e.stopListening(t[i]),t[i].destroy()},0)}function d(i,n){void 0===n&&(n=t());var o=!0,s=i._DT_RowIndex;if(e.hoveredRowDataId&&e.hoveredRowDataId===s&&(o=!1),e.hoveredRowDataId=s,o){if(e.hoveredRow){t(e.hoveredRow).removeClass("csui-state-hover");e.table.row(e.hoveredRow).child().removeClass("csui-state-hover")}var l=e.table.row(i).data();if(l){if(void 0!==(l.id||l.get("id"))){var r={"sender":e,"targets":[i],"nodes":Z.call(e,[i])};e.trigger("selectingTableRow",r),r.cancel||(e.hoveredRow=i,t(i).addClass("csui-state-hover"),n.addClass("csui-state-hover"))}}}}function h(i,n){void 0===n&&(n=t()),t(i).removeClass("csui-state-hover"),n.removeClass("csui-state-hover"),e.hoveredRowDataId=void 0,e.hoveredRow=void 0}var p=t(l),m=R.call(e,this.api(),a,l,r);e._allSelectedNodes.get(r)&&r.set(y.isSelectedModelAttributeName,!0),r.get(y.isSelectedModelAttributeName)?(p.addClass("binf-active"),i.each(m,function(e){t(e).addClass("binf-active")})):(p.removeClass("binf-active"),i.each(m,function(e){t(e).removeClass("binf-active")})),r.isLocallyCreated&&(p.addClass("csui-new-item"),m.addClass("csui-new-item")),void 0!==r.get("id")?(p.addClass("csui-saved-item"),m.addClass("csui-saved-item"),r.set("inactive",!e.checkModelHasAction(r),{"silent":!0})):r.set("inactive",!0,{"silent":!0}),!0===r.get("isCut")&&(p&&p.addClass("csui-cut-row"),m&&m.addClass("csui-cut-row"));var f=[],g=void 0!==r.inlineFormView;g&&p.addClass("csui-table-row-shows-inlineform");var b,v=0,w=[];e.csuiDestroyRowCallbacks.push(u,c);for(var C=0;C<e.displayedColumns.length;C++){var _=e.displayedColumns[C];if(_.CellView){var x=t(p.children()[C]);if(e.cachedColumnWidths&&e.cachedColumnWidths[_.className]&&!_.CellView.hasFixedWidth){var k=e.cachedColumnWidths[_.className];x.css(k)}_.isNaming&&x.attr("role","rowheader");var T={"el":x,"tableView":e,"column":_,"model":r,"context":e.context,"originUrl":n,"supportUrl":s,"nameEdit":e.options.nameEdit,"favoritesTableOptions":e.options.favoritesTableOptions,"rowIndex":a};"_toggledetails"===_.name&&(T.rowIsExpanded=e.detailsRowsAreExpanded||e.expandedDetailRows[r.id||r.get("id")]);var V=new _.CellView(T);if("_toggledetails"===_.name&&e.listenTo(V,"toggle:detailsrow",function(t){e.expandedDetailRows[t.model.id||t.model.get("id")]=t.detailsRowIsExpanded,e.trigger("update:scrollbar")}),g?"type"===_.name?(V.render(),e.listenTo(V,"type:clicked",function(){e.triggerMethod("type:clicked")})):!_.isNaming&&"name"!==_.name||b?"_select"!==_.name&&"order"!==_.name&&(v++,w.push(x)):(v=1,b=x):V.render(),e.listenTo(V,"cellCloseOther",function(){e.cancelAnyExistingInlineForm(),e.trigger("closeOther",V),e.lockedForOtherContols=!0,i.each(f,function(e){e!==V&&e.triggerMethod("closeOther")})}),e.listenTo(V,"cellAllowOther",function(){e.trigger("allowOther",V),e.lockedForOtherContols=!1,i.each(f,function(e){e!==V&&e.triggerMethod("allowOther")})}),e.listenTo(V,"cancelEdit",function(){var t=e.collection.at(0);t&&void 0===t.get("id")&&(t.csuiIsRemoved=!0,e.collection.remove(t))}),e.listenTo(V,"show:add:favorite:form",function(){e._destroyInlineBar(),e.lockedForOtherContols=!0}),e.listenTo(V,"close:add:favorite:form",function(){e.lockedForOtherContols=!1}),a>=0){var S=function(t,i){e.trigger("clicked:cell",{"cellView":V,"rowIndex":a,"colIndex":t,"model":r})};e.listenTo(V,"clicked:cell",S.bind(null,C)),e.listenTo(V,"clicked:checkbox",function(t){if(!1!==r.get("selectable")){var i=j.call(e);"false"===t.checked?(e._isSingleSelectionEnabled()&&e._allSelectedNodes.reset(),i.fnSelect(l)):i.fnDeselect(l)}})}f.push(V)}}if(g&&b&&v>1){i.each(w,function(e){e.remove()}),b.attr("colspan",v),b.addClass("csui-inlineform-parent"),e.trigger("closeOther"),r.inlineFormView&&(e.activeInlineForm&&e.activeInlineForm.destroy(),e.activeInlineForm=new r.inlineFormView({"model":r,"originatingView":e.options.originatingView,"context":e.context})),e.activeInlineForm.listenTo(e.activeInlineForm,"destroy",function(){e.lockedForOtherContols=!1,e.activeInlineForm.model.get("id")&&setTimeout(function(){e.accFocusedState.focusView="tableBody",e.trigger("changed:focus"),e.currentlyFocusedElement().trigger("focus")},1),delete e.activeInlineForm});new o.Region({"el":b}).show(e.activeInlineForm)}else p.mousehover(function(){var t={"sender":e,"target":l,"node":e.table.row(l).data()};e.trigger("enterTableRow",t)},function(){var t={"sender":e,"target":l,"node":e.table.row(l).data()};e.trigger("leaveTableRow",t)},{"namespace":e.cid}),p.mousehover(function(){d.call(e,l,m)},function(){h.call(e,l,m)},{"namespace":e.cid}),m.mousehover(function(){d.call(e,l,m)},function(){},{"namespace":e.cid});e.trigger("tableRowRendered",{"sender":e,"target":l,"node":r,"expandedRows":m})}},l),d=t("<table></table>").addClass("binf-table").attr("id",this.cid),h=this.options.tableAria;if(h&&d.attr("aria-label",h),me||this.$el.addClass("csui-not-ready"),d.appendTo(this.el),this.table=d.DataTable(u),this._isSingleSelectionEnabled()&&X.call(this,this._allSelectedNodes),t(this.$el.children()[0]).attr("tabindex","-1"),Q.call(this,l.selectedNodesById),this.collection.length>0&&void 0!==l.currentScollPosition&&this.$("tbody").scrollTop(l.currentScollPosition),this.$("tbody").on("scroll",function(){e.trigger("scroll")}),this.table.on("click",".csui-table-cell-default-action",function(t){ue.call(e,t,"DefaultPre")}).on("click","a#parentAction",function(t){ue.call(e,t,"Parent")}).on("click","a#menuAction",function(t){ue.call(e,t,"Menu")}).on("click","input[id^='selectAction']",function(e){e.stopPropagation(),t(e.target).closest("td,th").trigger("click")}).on("processing",function(t,i,n){L.call(e,i,n)}).on("destroy",function(e,t){}).on("preDraw",function(t,i){i.oFeatures.bServerSide&&!i.bDrawing||(oe.call(e),e.activeInlineForm&&e.activeInlineForm.destroy(),e._destroyTableHeaderAndBodyViews())}),d.on("order.dt",function(){if(e.displayedColumns){var t=[];i.each(e.table.order(),function(i){var n=i[0],o=e.displayedColumns[n].attributes.column_key;o&&(i[1]?t.push(o+" "+i[1]):t.push(o))}),e.collection&&e.collection.isSortOptionSelected||t.length&&e.collection.setOrder(t.join())}}),this.options.alternativeHeader){a.warn("Using of options.alternativeHeader with table.view is deprecated. Please use csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view instead and render this view ouside of table.view. The behavior csui/behaviors/table.rowselection.toolbar/table.rowselection.toolbar.behavior might help using it.")&&console.log(a.last),this.$el.find(".csui-table-alternative-header").remove();var p=t('<div class="csui-table-alternative-header"></div>');this.$el.prepend(p),this._alternativeHeaderRegion=new o.Region({"el":p});var m=this._createAlternativeHeaderView();this._alternativeHeaderRegion.show(m),this.triggerMethod("alternativeHeader:show",m),this.listenTo(m,"childview:toolitem:action",this._toolbarItemClicked)}this.trigger("tableCreated",{"sender":this})}}function L(e,i){this.disablingOverlay||(this.disablingOverlay=t("<div id='disabling_overlay'></div>").hide().prependTo(this.table)),i?this.disablingOverlay.show():this.disablingOverlay.hide()}function $(e){this.disablingOverlay&&(this.disablingOverlay.remove(),this.disablingOverlay=void 0)}function j(){return this.tableTools||(this.tableTools=l.fnGetInstance(this.table.table().node()))}function H(){var e;switch(this.options.paginationStyle){case"all_buttons":e={"pagingType":"full_numbers"};break;case"two_buttons":e={"pagingType":"two_button"};break;case"infinite_scrolling":e={"scrollCollapse":!0,"scrollY":this.options.pageSize?25*this.options.pageSize-1+"px":"249px"};break;default:e={"paging":!1}}this.recreated||(this.recreated=this.columns.length||this.columns.fetched),e.order=z.call(this,this.collection.orderBy),e.ordering=U.call(this);var n=this.options.selectRows;if("none"===n)e.dom='<"H"lfr>t<"F"ip>';else{e.dom='<"H"lTfr>t<"F"ip>';var s=this;e.tableTools={"aButtons":[],"sRowSelect":n,"fnPreRowSelect":function(e,i,n){function l(){var e=Z.call(s,i),t={"sender":s,"targets":i,"nodes":e};return s.trigger(n?"selectingTableRow":"unselectingTableRow",t),!t.cancel}if(!s._rebuildingTable){if(o.triggerMethodOn(s.tableBodyView,"before:render"),i&&i.length>0){if(function(){var e=s.table.row(i[0]).data();if(!e.inlineFormView){var t={"sender":s,"target":i[0],"node":e};return s.triggerMethod("row:clicked",t),!t.cancel}}()){if(s.options.selectColumn){return!!(!(e&&e.target)||t(e.target).hasClass(y.columnClassName))&&l()}return l()}return!1}return!0}},"fnRowSelected":function(e){s._rebuildingTable||i.isArray(e)&&e.length>0&&(i.each(e,function(e){var i=s.table.row(e).data();t(e);i.set(y.isSelectedModelAttributeName,!0)}),Y.call(s),o.triggerMethodOn(s.tableBodyView,"render"),s.trigger("closeOther"),s.selectedChildren.reset(s.getSelectedChildren()),s.trigger("tableRowSelected",{"sender":s,"targets":e,"nodes":Z.call(s,e)}))},"fnRowDeselected":function(e){s._rebuildingTable||i.isArray(e)&&e.length>0&&(i.each(e,function(e){var i=s.table.row(e).data();t(e);i.set(y.isSelectedModelAttributeName,!1)}),Y.call(s),o.triggerMethodOn(s.tableBodyView,"render"),s.selectedChildren.reset(s.getSelectedChildren()),s.trigger("tableRowUnselected",{"sender":s,"targets":e,"nodes":Z.call(s,e)}))}}}return e.searching||e.lengthChange||(e.dom=e.dom.replace('"H"',"").replace("l","").replace("f","")),e.info||e.pagingType||(e.dom=e.dom.replace('"F"',"").replace("i","").replace("p","")),re.call(this,e),e}function z(e){var t=[];return e&&(t=i.map(e.split(","),function(e){e=e.split(" ");var t=e[0],i=ee.call(this,t);if(void 0!==i&&(t=this.displayedColumns[i].attributes.column_key,this.columns.findWhere({"column_key":t}).get("sort")))return[i,e[1]||"asc"]},this)),i.filter(t,function(e){return!!e})}function U(){return!0===this.options.enableSorting&&!!i.find(this.displayedColumns,function(e){return e.attributes&&!0===e.attributes.sort})}function q(e){function i(e){this.detailsRowsAreExpanded=!this.detailsRowsAreExpanded,this._clearExpandedRows(),this._detailRowsDescriptionTRs=[],this._drawTable(),this.options.descriptionRowViewOptions&&this.options.descriptionRowViewOptions.showDescriptions?this.showDetailRowDescriptions(!0):this.trigger("dom:refresh"),this._adjustColumns(),this.collection.isSortOptionSelected&&(this.collection.isSortOptionSelected=!1)}if(this.options.haveDetailsRowExpandCollapseColumn&&this.options.haveToggleAllDetailsRows&&this.collection.length){var n=t("th.csui-table-cell-_toggledetails",e);if(n.length>0&&!this._toggleExpandAllRegion){var s=new w({"titleDisclosed":F.expandAllTooltip,"titleExpanded":F.collapseAllTooltip,"ariaLabelDisclosed":F.expandAllAria,"ariaLabelExpanded":F.collapseAllAria});this.listenTo(s.model,"change:expanded",i),this._toggleExpandAllRegion=new o.Region({"el":n}),this._toggleExpandAllRegion.show(s)}}}function G(e){function i(){var e,t,i=[],o=[],s=[],r=[];if(l._selectAllCheckboxRegion&&l._selectAllCheckboxRegion.currentView){n.trigger("closeToggleAction");switch(l._selectAllCheckboxRegion.currentView.model.get("checked")){case"true":l.collection.each(function(i){i.get(y.isSelectedModelAttributeName)&&(e=l.collection.indexOf(i),t=l.table.row(e),r.push(i),s.push(t.node()))});break;default:l.collection.each(function(n){!1!==n.get("selectable")?n.get(y.isSelectedModelAttributeName)||(e=l.collection.indexOf(n),t=l.table.row(e),o.push(n),i.push(t.node())):n.get(y.isSelectedModelAttributeName)&&(e=l.collection.indexOf(n),t=l.table.row(e),r.push(n),s.push(t.node()))})}s.length>0&&(l.trigger("tableRowUnselected",{"sender":l,"targets":s,"nodes":r}),r.forEach(function(e){e.set(y.isSelectedModelAttributeName,!1)})),i.length>0&&(o.forEach(function(e){e.set(y.isSelectedModelAttributeName,!0)}),l.trigger("tableRowSelected",{"sender":l,"targets":i,"nodes":o})),l.selectedChildren.reset(l.getSelectedChildren()),Y.call(this),l.trigger("dom:refresh")}}function s(){var e=u.findFocusables(c.el);t(e).addClass("csui-focusable-table-column-header")}var l=this,a=t("th:first-child",e);if(0!==a.length&&this.options.selectColumn&&this.options.selectAllColumnHeader){if(!this._selectAllCheckboxRegion){var c=new v({"checked":!1,"disabled":!1,"ariaLabel":r.selectAllAria,"title":r.selectAll});this.listenTo(c,"clicked",function(e){e.cancel=!0,i.call(l)}),this.listenTo(c,"render",function(){s()}),this._selectAllCheckboxRegion=new o.Region({"el":a}),this._selectAllCheckboxRegion.show(c),s()}if(this.collection.length){this._selectAllCheckboxRegion.currentView.setDisabled(!1);this.collection.where({"csuiIsSelected":!0}).length>0&&Y.call(this)}else this._selectAllCheckboxRegion.currentView.setDisabled(!0)}}function W(){i.each(this.searchBoxes,function(e){e.destroy()}),this.searchBoxes.splice(0,this.searchBoxes.length)}function K(e,t){if(e&&e.length>0&&e[0].length>1){var n=this,o=e[0],s=o[0],l=o[1];if(n.displayedColumns.some(function(e){return e===n.allColumns[s]})){var r="icon-sortArrowUnknown";"asc"===l?r="icon-sortArrowUp":"desc"===l&&(r="icon-sortArrowDown");var a='<span class="csui-sort-arrow '+r+'"></span>',c=n.$("th:eq("+s+") .csui-focusable-table-column-header");n.$el.find(".csui-sort-arrow").remove(),c.append(a),i.find(n.searchBoxes,function(e){var i=e.getColumn();if(t===i&&e.getShown())return n.$el.find(".csui-sort-arrow").addClass("binf-hidden"),!0})}}}function J(){var e=this;W.call(e),this.$("thead th").each(function(n){if(0===t(this).find(".csui-table-column-search").length&&e.displayedColumns.length>n){var o=e.displayedColumns[n].name.toLowerCase(),s=e.displayedColumns[n].title;!0===e.displayedColumns[n].noTitleInHeader&&(s="");if(i.indexOf(e.columnsWithSearch,o)>-1||!0===e.displayedColumns[n].filterable){var l,a=e.displayedColumns[n].data&&e.displayedColumns[n].data(void 0,"filterBy"),c=e.columnsWithTypeaheadSearchbox&&-1!==i.indexOf(e.columnsWithTypeaheadSearchbox,o),u={"column":a,"columnName":o,"columnTitle":s,"context":e.options.context};if(c){var d=e.options.columnsWithTypeaheadSearchbox[o];i.extend(u,d),l=new _(u)}else{var h=e.collection.filters&&e.collection.filters[o];l=new C(h,u)}e.searchBoxes.push(l),l.off(l.valueChangedEventName).on(l.valueChangedEventName,function(t){e.applyFilter(t)});var p=t(this).find(".csui-table-column-search"),m=t(this).find(".csui-table-column-text"),f=this;l.off("opened").on("opened",function(){m.addClass("binf-hidden"),t(f).find(".csui-sort-arrow").addClass("binf-hidden"),t(f).removeAttr("title"),t(f).attr("aria-label",s),e.searchColumn=o}),l.off("closed").on("closed",function(){m.removeClass("binf-hidden"),t(f).find(".csui-sort-arrow").removeClass("binf-hidden"),t(f).hasClass("sorting_asc")?(t(f).attr("title",r.NodeTableSortDescendingTooltip),t(f).attr("aria-label",i.str.sformat(r.NodeTableSortedAscendingColumnAria,s))):t(f).hasClass("sorting_desc")?(t(f).attr("title",r.NodeTableSortAscendingTooltip),t(f).attr("aria-label",i.str.sformat(r.NodeTableSortedDescendingColumnAria,s))):t(f).attr("title",r.NodeTableSortAscendingTooltip),e.collection.filters[o]=void 0}),l.off("changed:focus").on("changed:focus",function(){e.tableCaptionView&&e.tableCaptionView._accSearchBoxFocused({"columnName":o,"columnIndex":n})}),l.render(),t(this).append(l.el),o===e.searchColumn&&l.setFocus(),p=t(this).find(".csui-table-column-search"),p&&s&&p.attr("aria-label",i.str.sformat(r.searchIconTooltip,s.toLowerCase()))}}})}function X(e){e&&e.forEach(function(e){Q.call(this,e.get("id"))}.bind(this))}function Q(e){this.table&&e&&i.each(this.table.rows(),function(t){i.each(t,function(t){var i=this.table.row(t).data(),n=!1;if(this._allSelectedNodes.length)n=!!this._allSelectedNodes.get(i);else{var o=i.id||i.get("id");n=!!e[o]}if(n){var s=j.call(this),l=this.table.row(t).node();s.fnSelect(l)}},this)},this)}function Y(){if(this._selectAllCheckboxRegion&&this._selectAllCheckboxRegion.currentView){var e=this._selectAllCheckboxRegion.currentView;if(this.collection.length){e.setDisabled(!1);var t,i=this.collection.filter(function(e){return e.get(y.isSelectedModelAttributeName)});t=this.table?this.table.rows().nodes().to$().find(".csui-checkbox").not(":disabled").length:this.collection.length;var n=i.length>=t;i.length>0&&!n?e.setChecked("mixed"):e.setChecked(i.length>0)}else e.model.set("checked",!1),e.setDisabled(!0)}}function Z(e){return i.map(e,function(e){var t=this.table.row(e).index();return this.table.row(t).data()},this)}function ee(e){e=e.toLowerCase();var t;return i.find(this.displayedColumns,function(i,n){if(i.attributes.sort_key===e||i.name.toLowerCase()===e||i.attributes.column_key===e)return t=n,!0}),t}function te(e,t){var n=e.options;if(n.selectColumn&&t.unshift(new m({"column_key":"_select","name":r.selectionColumnTitle,"sortable":!1,"alignment":"center","permanentColumn":!0})),n.additionalColumns&&n.additionalColumns.length>0&&i.each(n.additionalColumns,function(e,i){t.push(new m(e))}),me&&n.enforceDescriptionColumnInAccessibleMode){t.some(function(e){return"description"===e.get("column_key")})||t.push(new m({"column_key":"description","name":r.descriptionColumnTitle,"sortable":!1,"permanentColumn":!0}))}return n.haveDetailsRowExpandCollapseColumn&&t.push(new m({"column_key":"_toggledetails","name":"","sortable":!1,"alignment":"center","permanentColumn":!0,"title":"","noTitleInHeader":!0})),t}function ie(){$.call(this),oe.call(this),this._destroyTableHeaderAndBodyViews()}function ne(){ie.call(this),this.table&&(this.trigger("destroyingTable",{"sender":this}),this._inlineBarShouldDestroy(),W.call(this),this._alternativeHeaderRegion&&(this._alternativeHeaderRegion.empty(),delete this._alternativeHeaderRegion),this._selectAllCheckboxRegion&&(this._selectAllCheckboxRegion.empty(),delete this._selectAllCheckboxRegion),delete this._detailRowsDescriptionTRs,delete this._detailRowViewsByModelId,this.table.destroy(),se.call(this),delete this.table,delete this.tableTools,this.trigger("tableDestroyed",{"sender":this}))}function oe(){i.each(this.csuiDestroyRowCallbacks,function(e){e()}),this.csuiDestroyRowCallbacks=[]}function se(){t("> table , > #message",this.$el).remove()}function le(){var e=this.collection,t=this.table.rows(".selected").data(),n={};i.each(t,function(e){e.get(y.isSelectedModelAttributeName)&&(n[e.id||e.get("id")]=!0)}),this.stateBeforeRebuild={"pageLength":e?e.topCount:this.options.pageSize,"selectedNodesById":n,"currentScollPosition":this.$("tbody").scrollTop()}}function re(e){this.stateBeforeRebuild&&(i.extend(e,this.stateBeforeRebuild),delete this.stateBeforeRebuild)}function ae(e,t,i,n){if(!1!==this.refreshEnabled&&(this.columns.length||this.columns.fetched)){de.call(this,t,i)&&this.collection.fetch();var o={"sEcho":he(t,"sEcho"),"data":this.collection.models};this.trigger("settingServerData",{"sender":this,"result":o}),n(o),this._isSingleSelectionEnabled()&&X.call(this,this._allSelectedNodes)}}function ce(e,t,i,n){if(this.options.clientSideDataOperation){de.call(this,t,i);var o={"sEcho":he(t,"sEcho"),"data":this.collection.models};this.trigger("settingServerData",{"sender":this,"result":o}),n(o)}}function ue(e,i){if(c.isControlClick(e));else{e.preventDefault(),e.stopPropagation();var n=t(e.target),o=n.closest("tr"),s=o[0]._DT_RowIndex;if(void 0!==s){var l=this.table.row(s).data();this.trigger("click"+i+"Action",{"sender":this,"target":n[0],"node":l,"event":e})}}}function de(e,t){var n=t.aoColumns,o=[];if(i.each(t.oInstance.api().table().order(),function(e){var t=e[0],i=n[t].attributes.column_key;i&&(e[1]?o.push(i+" "+e[1]):o.push(i))}),this.enableViewState){var s=!1;this.getViewStateOrderBy()||(s=!0),o.length>0&&this.setViewStateOrderBy(o,{"default":s})}return!!o.length&&this.collection.setOrder(o.join(),!1)}function he(e,t){return e?e[t]:void 0}a=a(e.id);var pe=e.config(),me=I.isAccessibleTable(),fe=o.View.extend({"className":function(){var e="csui-nodetable";return me&&(e+=" csui-wrap-text"),e},"constructor":function(e){e||(e={}),i.defaults(pe,{"minNumberOfToolbarItems":e.minNumberOfToolbarItems}),i.defaults(pe,{"minNumberOfToolbarItems":2});var t=e.focusView?e.focusView:"tableBody";if(this.accFocusedState={"focusView":t,"headerColumn":0,"body":{"column":0,"row":0}},this.context=e.context,this.enableViewState=e.enableViewState&&this.context&&this.context.viewStateModel.get("enabled"),this._allSelectedNodes=e.allSelectedNodes||new n.Collection,this.expandedDetailRows={},this._showEmptyViewText=!0,this.columnHeadersVisible=!0,this.columnsWithSearch=e.columnsWithSearch||[],i.each(this.columnsWithSearch,i.bind(function(e,t){this.columnsWithSearch[t]=this.columnsWithSearch[t].toLowerCase()},this)),this.columnsWithTypeaheadSearchbox=i.keys(e.columnsWithTypeaheadSearchbox)||[],i.each(this.columnsWithTypeaheadSearchbox,i.bind(function(e,t){this.columnsWithTypeaheadSearchbox[t]=this.columnsWithTypeaheadSearchbox[t].toLowerCase()},this)),this.searchBoxes=[],e.filterBy&&i.each(e.filterBy,i.bind(function(t,i){e.collection.filters&&(e.collection.filters[i]=t)},this)),e.actionItems&&e.commands?(this.defaultActionController=new b({"actionItems":e.actionItems,"commands":e.commands}),this.checkModelHasAction=this.defaultActionController.hasAction.bind(this.defaultActionController)):this.checkModelHasAction=function(){return!0},this.additionalColumns=e.additionalColumns||[],!e.collection)throw new Error("table.view options require a collection to be set");o.View.prototype.constructor.apply(this,arguments);var s={"enableSorting":!0,"selectColumn":!0,"haveToggleAllDetailsRows":!0,"haveDetailsRowExpandCollapseColumn":!0,"selectRows":"multiple","selectAllColumnHeader":!0,"nameEdit":!0,"maxColumnsDisplayed":25,"spacing":"medium"};switch(i.defaults(this.options,s),
this.options.selectRows){case"single":this.options.selectAllColumnHeader=!1;break;case"multiple":break;default:this.options.selectRows="none",this.options.selectAllColumnHeader=!1,this.options.selectColumn=!1}if(me&&(this.options.haveToggleAllDetailsRows=!1,this.options.haveDetailsRowExpandCollapseColumn=!1),this.options.orderBy||this.enableViewState?(this.collection.setOrder(this.options.orderBy,!1),delete this.options.orderBy):this.options.collection.orderBy||this.collection.setOrder("name asc",!1),this.options.blockingParentView?f.delegate(this,this.options.blockingParentView):f.imbue(this),this.connector=this.options.connector,this.connector||(this.connector=this.context.getObject(g)),this.columns=this.options.columns,!this.columns&&(this.columns=this.collection.columns,!this.columns))throw new Error("table.view options require columns or collection.columns to be set");this._ViewCollection=n.Collection.extend({"model":this.collection.model}),this.selectedChildren=new this._ViewCollection,this.listenTo(this.selectedChildren,"reset",function(){this._showOrHideAlternativeHeaderView()}),this.listenTo(this.collection,"reset",this._handleModelsReset).listenTo(this.collection,"update",this._handleModelsUpdate).listenTo(this.collection,"remove",this._handleModelRemove).listenTo(this.collection,"change",this.updateRow).listenTo(this.collection,"request",this.blockActions).listenTo(this.collection,"sync",this.unblockActions).listenTo(this.collection,"sync",this._handlePendingFilter).listenTo(this.collection,"sync",this._handleResponseSortBy).listenTo(this.collection,"new:page",this.resetScrollToTop).listenTo(this.collection,"reset",this._updateSelectedChildren).listenTo(this.collection,"remove",this._updateSelectedChildren).listenTo(this.collection,"destroy",this.unblockActions).listenTo(this.collection,"error",this.unblockActions).listenTo(this.columns,"update reset remain",this._handleColumnsReset),this.enableViewState&&this.listenTo(this.context.viewStateModel,"change:state",this.onViewStateChanged),this.listenTo(this.collection,"orderBy:change",this._collectionOrderByChanged).listenTo(this.collection,"filter:change",this._collectionFilterChanged).listenTo(this.collection,"filter:clear",this._collectionFilterCleared),this.options.tableColumns&&this.listenTo(this.options.tableColumns,"reset update",this._handleTableColumnsReset),this.context&&this.listenTo(this.context,"request:perspective",this._handlePerspectiveContextRequest).listenTo(this.context,"request request:perspective",this._handleContextRequest).listenTo(this.context,"sync",this._handleContextSync).listenTo(this.context,"sync error error:perspective",this._handleContextFinish).listenTo(this.context,"request",this.blockActions).listenTo(this.context,"sync",this.unblockActions),this.listenTo(this.collection,"reset",function(){this.isRendered&&this.table&&Y.call(this)}),this.listenTo(this.collection,"reset",this.setFocusToFirstRow).listenTo(this.collection,"add",this.setFocusToFirstRow).listenTo(this.collection,"remove",this.setFocusToFirstRow).listenTo(this.collection,"destroy",this.setFocusToFirstRow),this.collection.fetching&&(this.blockActions(),this.disableEmptyViewText()),this.disableEmptyViewText(),this.listenTo(this,"dom:refresh",this._handleDomRefresh),this.listenTo(this,"show:descriptions",this.showDetailRowDescriptions),this.listenTo(this,"clickDefaultPreAction",function(e){this.triggerMethod("execute:defaultAction",e.node)}),this.collection.node&&(this.listenTo(this.collection.node,"change:id",this.setFocusToFirstRow),this.listenTo(this.collection.node,"change:id",this._clearSearchBoxes),this.listenTo(this.collection.node,"change:id",this._clearExpandedRows),this.listenTo(this.collection.node,"change:id",function(){}));me||(this.resizeHandler=i.debounce(i.bind(this._adjustColumnsIfViewResized,this),50),addEventListener("resize",this.resizeHandler)),this.listenTo(this,"before:destroy",function(){me||removeEventListener("resize",this.resizeHandler),ne.call(this)}),this.options.inlineBar&&this._setInlineBarEvents(),this._tableColumnsResetTime=this._columnsResetTime=1,this._columnsComputeTime=0},"behaviors":{"PerfectScrolling":{"behaviorClass":d,"contentParent":"tbody","suppressScrollX":!0},"TabableRegion":{"behaviorClass":h,"initialActivationWeight":100}},"events":{"keydown":"onKeyInView"},"render":function(){return this._renderingTableDelayedAsync?void(a.debug("render: currently in async render -> skip")&&console.log(a.last)):(this._initializeLocalizableLabels(),this.columns&&this.columns.length?(a.debug("render")&&console.log(a.last),this._startTableRendering=new Date,performance&&performance.mark&&performance.mark("start_table_render"),this._ensureViewIsIntact(),this._inlineBarShouldDestroy(),this.table&&(le.call(this),this._toggleExpandAllRegion&&(this._toggleExpandAllRegion.destroy(),delete this._toggleExpandAllRegion),ne.call(this)),this._ensureFreshColumns(),this.updateCollectionParameters(),void(this._canMeasureTableSize()?(this._renderTableDelayed=!1,this._preRenderTable(),this._renderTable()):(this._renderTableDelayed=!0,this._renderingTableDelayedAsync=!1,this._renderFake()))):void(this.collection&&this.collection.length?(a.debug("No columns -> skip render")&&console.log(a.last),this._renderFake()):(a.debug("No columns and no rows -> render empty text")&&console.log(a.last),this._renderEmpty())))},"onBeforeRender":function(){this._startBeforeTableRendering=new Date},"onRender":function(){var e=new Date,t=e-this._startBeforeTableRendering;if(this._startTableRendering){var i=e-this._startTableRendering;a.debug("TIMINGS: rendering totally "+i+"ms. beforeRender...render "+t+"ms")&&console.log(a.last),performance&&performance.mark&&(performance.mark("end_table_render"),performance.measure("table_render","start_table_render","end_table_render"))}else a.debug("TIMINGS: beforeRender...render took "+t+"ms")&&console.log(a.last);delete this._startTableRendering},"_handleDomRefresh":function(){if(this._renderingTableDelayedAsync)a.debug("onDomRefresh: currently in async render -> skip")&&console.log(a.last);else{if(this._renderTableDelayed)if(a.debug("onDomRefresh -> need to render table delayed")&&console.log(a.last),this._startTableRendering=new Date,this._canMeasureTableSize()){this._renderingTableDelayedAsync=!0,a.debug("onDomRefresh: el is visible -> start rendering (async)")&&console.log(a.last);var e=this;e._renderTableDelayed=!1,e._renderingTableDelayedAsync=!1,e._preRenderTable(),e._renderTable()}else document.body.contains(this.el)?a.debug("onDomRefresh: el is in DOM but still not measurable -> skip render")&&console.log(a.last):a.warn("WARNING: onDomRefresh: el is not in DOM and therefore not measurable -> skip render (dom:refresh should not be triggered on table.view if table.view is not attached to the DOM)")&&console.log(a.last);else a.debug("dom:refresh -> checking if columns must be adjusted")&&console.log(a.last),this._adjustColumnsIfViewResized();this.activeInlineForm&&this.activeInlineForm.triggerMethod("dom:refresh",this.activeInlineForm)}},"_canMeasureTableSize":function(){return document.body.contains(this.el)&&(this.el.offsetWidth||this.el.offsetHeight||this.el.getClientRects().length)},"_renderFake":function(){a.debug("_renderFake")&&console.log(a.last),this.triggerMethod("before:render",this),this.isRendered=!0,this.triggerMethod("render",this)},"_renderEmpty":function(){a.debug("_renderEmpty")&&console.log(a.last),this.triggerMethod("before:render",this),this.showOrHideZeroRecordsMessage(),this.isRendered=!0,this.triggerMethod("render",this)},"_preRenderTable":function(){if(a.debug("_preRenderTable")&&console.log(a.last),this.isRendered=!1,this.triggerMethod("before:render",this),void 0===this._extraWidthForToolbarItems&&(this._extraWidthForToolbarItems=0,this.options.inlineBar&&this.options.inlineBar.viewClass)){var e=this.options.inlineBar.viewClass;if(e.estimateWidthForToolbarItems){var i=pe.minNumberOfToolbarItems;this._extraWidthForToolbarItems=Math.floor(e.estimateWidthForToolbarItems(i,13))}}this._setSpacing();var n=this.$el.outerWidth();n-=t.scrollbarWidth(),this.maxColumnsDisplayed=this._calculateMaxColumnsDisplayed(n),a.debug("Table width is "+n+". Displaying max. "+this.maxColumnsDisplayed+" columns")&&console.log(a.last),this._setColumnsWrappedByAvailableWidth(),a.debug("Columns displayed: "+this.displayedColumns.length+", wrapped: "+this.wrappedColumns.length)&&console.log(a.last)},"_renderTable":function(){if(a.debug("_renderTable")&&console.log(a.last),this.$el.addClass("csui-nodetable"),this._isSingleSelectionEnabled()&&this.$el.addClass("csui-single-select"),B.call(this),this.accFocusedState.body.row=0,this.accFocusedState.body.column=S.getNameColumnIndex(this.displayedColumns)||0,this.showOrHideZeroRecordsMessage(),this.$el.parent().length>0){this.$el.parent().css("display").indexOf("flex")<0&&this.$el.addClass("csui-not-in-flex-container")}this.$el.removeClass("csui-not-ready"),this._adjustColumns(),this._previousViewWidth=this._calculateActualTableWidth(),this.isRendered=!0,this.triggerMethod("render",this)},"_drawTable":function(){this.table?(this._inlineBarShouldDestroy(),this.triggerMethod("before:render",this),this.showOrHideZeroRecordsMessage(),this.table.draw(),this.triggerMethod("render",this)):this.render()},"_calculateMaxColumnsDisplayed":function(e){var t,n,o=0,s=0;i.each(this.allColumns,function(e){e.attributes&&!0===e.attributes.permanentColumn&&(t=e.attributes&&e.attributes.widthFactor,n=t?90*t:90,e.isNaming&&(n+=this._extraWidthForToolbarItems),s+=n,o++)},this);for(var l=0;l<this.allColumns.length;l++){var r,a=this.allColumns[l];if(a.attributes&&!a.attributes.permanentColumn){if(t=a.attributes&&a.attributes.widthFactor,r=90,n=t?r*t:r,(s+=n)>e)break;o++}}return o>this.options.maxColumnsDisplayed&&(o=this.options.maxColumnsDisplayed),o<1&&(o=1),o},"_ensureFreshColumns":function(){(this._tableColumnsResetTime>this._columnsComputeTime||this._columnsResetTime>this._columnsComputeTime)&&this._getColumns()},"_getColumns":function(){this.trigger("buildingColumnDefinitions",{"sender":this});var e=[];if(this.options.tableColumns){var t,n,o=this.options.tableColumns.deepClone(),s={};this.columns.each(function(e){var l=e.get("column_key"),r=e.get("definitions_order");if("order"===l&&(e.set("definitions_order",1,{"silent":!0}),r=1),!0===e.get("isNaming")&&(n=l,e.unset("isNaming",{"silent":!0})),s[l]=e,e.get("type")&&r){var c=o.findWhere({"key":l});if(c){!0===c.get("isNaming")&&(t=c.get("key"));var u=c.get("sequence"),d=i.extend({"sequence":u},e.attributes);c.set(d)}else{p.hasCellViewByOtherKey(l)?a.debug("server column '"+l+"' has no corresponding column in client column list and no registered cell view")&&console.log(a.last):o.add({"key":l,"sequence":r,"permanentColumn":!1})}}},this);var l=t||n||"name",r=[];o.each(function(e){var t=e.get("key");if(t===l&&e.set("isNaming",!0),s[t]){var n=s[t];t===l&&n.set("isNaming",!0);var o=p.getCellView(n),c=["permanentColumn","noTitleInHeader","titleIconInHeader","title","align","widthFactor","isNaming"];i.each(c,function(t){var i=e.get(t);i?n.set(t,i,{"silent":!0}):o[t]&&n.set(t,o[t],{"silent":!0})}),r.push(n)}else a.warn("Client side column with key '"+t+"' is not part of server columns")&&console.log(a.last)},this),r.length>0&&(r=te(this,r)),e=i.map(r,function(e){var t=e.get("column_key"),n=p.getCellView(e),o=e.get("title")||e.get("name");o||"_toggledetails"===t||console.log("No accessible text for column header "+t);var s={"CellView":n,"name":t,"noTitleInHeader":e.get("noTitleInHeader"),"titleIconInHeader":e.get("titleIconInHeader"),"isNaming":e.get("isNaming"),"title":o,"titleAttr":e.get("titleAttr"),"orderable":!!e.get("sort"),"filterable":!!e.get("filter"),"className":n.columnClassName,"defaultAction":e.get("default_action"),"contextualMenu":e.get("contextual_menu"),"customHeader":e.get("customHeader"),"data":function(t,i){if("orderBy"===i)return e.get("sort_key")||e.get("column_key");if("filterBy"===i)return e.get("filter_key")||e.get("column_key");if("set"===i)throw new Error("Setting column value not implemented");return n.getValue(t,s)},"render":function(){return""}},l=e.get("align");return l&&(window.csui&&window.csui.rtl&&("left"===l&&(l="right")||"right"===l&&(l="left")),s.className+=" csui-align-"+l),e.attributes&&(s.attributes=s.attributes||{},i.extend(s.attributes,e.attributes)),s},this)}else a.warn("No client side columns defined in this.options.tableColumns");this.allColumns=e,this.displayedColumns=[],this.wrappedColumns=[],i.each(e,function(e){e.attributes&&!0===e.attributes.permanentColumn&&(e.columnWrapped=!1,this.displayedColumns.push(e))},this),this._columnsComputeTime=(new Date).getTime(),this.trigger("columnDefinitionsBuilt",{"sender":this,"columns":e})},"_setColumnsWrappedByAvailableWidth":function(){if(this.allColumns.length&&(this.maxColumnsDisplayed||this.options.maxColumnsDisplayed)){var e=this.maxColumnsDisplayed||this.options.maxColumnsDisplayed;this.displayedColumns=[],this.wrappedColumns=[];var t=0;i.each(this.allColumns,function(e){e.attributes&&!0===e.attributes.permanentColumn&&(e.columnWrapped=!1,t++)},this),me?(this.displayedColumns=i.clone(this.allColumns),this.wrappedColumns=[]):(i.each(this.allColumns,function(i){i.attributes&&!0===i.attributes.permanentColumn||(t++,i.columnWrapped=!!e&&t>e)},this),this.displayedColumns=i.where(this.allColumns,{"columnWrapped":!1}),this.wrappedColumns=i.where(this.allColumns,{"columnWrapped":!0}))}},"_calculateActualTableWidth":function(){var e=this.$el.outerWidth(),n=this.$el.find("tbody");if(i.size(n)>0){n[0].scrollHeight>n.innerHeight()&&(e-=t.scrollbarWidth())}return e},"_adjustColumnsIfViewResized":function(){if(this.isRendered&&this.columns&&this.columns.length>0){var e=this._calculateActualTableWidth();if(e!==this._previousViewWidth){var t=this._previousViewWidth+100,i=this._previousViewWidth-100;if(e>t||e<i){this._calculateMaxColumnsDisplayed(e)!==this.maxColumnsDisplayed?(a.debug("_adjustColumnsIfViewResized: maxColumnsDisplayed differ -> render new table")&&console.log(a.last),this.render()):(a.debug("_adjustColumnsIfViewResized: maxColumnsDisplayed equal -> adjust columns")&&console.log(a.last),this._adjustColumns()),this._previousViewWidth=e}else a.debug("_adjustColumnsIfViewResized: table width changed minimally -> adjust columns")&&console.log(a.last),this._adjustColumns()}else a.debug("_adjustColumnsIfViewResized: width not changed -> skip")&&console.log(a.last)}},"enableEmptyViewText":function(){this._showEmptyViewText=!0},"disableEmptyViewText":function(){this._showEmptyViewText=!1},"_updateSelectedChildren":function(){if(this.isRendered&&!this.deletingNodes&&this.table){var e=this.getSelectedChildren();this.selectedChildren.reset(e)}},"_setInlineBarEvents":function(){this.listenTo(this,"closeOther",this._inlineBarShouldDestroy),this.options.inlineBar.options.forceInlineBarOnClick?this.listenTo(this,"row:clicked",function(e){if(this.inlineBarView){if(this.inlineBarView.model.get("id")===e.node.get("id"))return}this.options.inlineBar.viewClass&&this._destroyOldAndCreateNewInlineBarWithoutDelay(e)}):this.options.inlineBar.options.showInlineBarOnHover&&(this.listenTo(this,"enterTableRow",this._destroyOldAndCreateNewInlineBarWithDelay),this.listenTo(this,"leaveTableRow",this._inlineBarShouldDestroy)),this.listenTo(this.collection,"reset",this._destroyInlineBar),this.collection.node&&this.listenTo(this.collection.node,"change:id",this._destroyInlineBar)},"_showInlineBar":function(e){if(0===this._allSelectedNodes.length&&0===this.getSelectedChildren().length)if(this.inlineBarView)this._savedHoverEnterArgs=e;else{this._savedHoverEnterArgs=null,this.inlineBarView=new this.options.inlineBar.viewClass(i.extend({"context":this.options.context,"originatingView":this.options.originatingView,"commands":this.defaultActionController.commands,"model":e.node},this.options.inlineBar.options)),this.listenToOnce(this.inlineBarView,"destroy",function(){this.inlineBarView&&this.stopListening(this.inlineBarView),this._savedHoverEnterArgs&&this._destroyOldAndCreateNewInlineBarWithDelay(this._savedHoverEnterArgs)},this);var t=this.getNameCell(e.target);if(t&&1===t.length){var n=t.find(".csui-table-cell-name-appendix"),s=new o.Region({"el":n});s.show(this.inlineBarView),this.inlineBarView.$el.parent().length>0&&t.addClass("csui-table-actionbar-shown")}}},"_destroyOldAndCreateNewInlineBarWithDelay":function(e){this._inlineBarShouldDestroy(),this._showInlineBarTimeout&&clearTimeout(this._showInlineBarTimeout);var t=this;this._showInlineBarTimeout=setTimeout(function(){t._showInlineBarTimeout=null,t.lockedForOtherContols||t._showInlineBar.call(t,e)},750)},"_inlineBarShouldDestroy":function(){this._showInlineBarTimeout&&(clearTimeout(this._showInlineBarTimeout),this._showInlineBarTimeout=null),this._destroyInlineBar()},"_destroyOldAndCreateNewInlineBarWithoutDelay":function(e){this._inlineBarShouldDestroy(),this.lockedForOtherContols||this._showInlineBar.call(this,e)},"_destroyInlineBar":function(){if(this.inlineBarView){this.inlineBarView.$el.parent().closest(".csui-table-actionbar-shown").removeClass("csui-table-actionbar-shown"),this.inlineBarView.destroy(),this.inlineBarView=null}},"_clearExpandedRows":function(){this.isRendered&&(this.expandedDetailRows={})},"onKeyInView":function(e){if(9===e.keyCode){if(this.activeInlineForm){if(e.preventDefault(),e.stopPropagation(),0===t(document.activeElement).parents(".csui-inline-editform").length){var i=this.$el.find(".csui-inline-editform input")[0];i&&i.focus()}return}e.shiftKey?"tableBody"===this.accFocusedState.focusView&&(e.preventDefault(),e.stopPropagation(),this.accFocusedState.focusView="tableHeader",this.trigger("changed:focus"),this.currentlyFocusedElement().trigger("focus")):"tableHeader"===this.accFocusedState.focusView&&(e.preventDefault(),e.stopPropagation(),this.accFocusedState.focusView="tableBody",this.trigger("changed:focus"),this.currentlyFocusedElement().trigger("focus"))}},"currentlyFocusedElement":function(){if("tableHeader"===this.accFocusedState.focusView){if(this.tableCaptionView)return this.tableCaptionView.currentlyFocusedElement()}else if(this.tableBodyView)return this.tableBodyView.currentlyFocusedElement();return t()},"setFocusToFirstRow":function(){this.isRendered&&(this.accFocusedState.body.row=0,this.accFocusedState.body.column=S.getNameColumnIndex(this.displayedColumns)||0)},"renderError":function(){this.table||(se.call(this),t("<div></div>",{"id":"message"}).html(c.MessageHelper.toHtml()).appendTo(this.$el))},"_plugHeaderBodyViews":function(){var e=this;this.tableCaptionView=new V({"el":this.$("thead"),"displayedColumns":this.displayedColumns,"searchBoxes":this.searchBoxes,"_getActiveInlineForm":i.bind(function(){return this.activeInlineForm},this),"accFocusedColumn":this.accFocusedState.headerColumn,"accSearchFocused":this.accFocusedState.accSearchFocused}),this.propagateEventsToViews(this.tableCaptionView),this.tableCaptionView.listenTo(this.tableCaptionView,"closeOtherControls",function(){e.trigger("closeOther")}),this.tableCaptionView.listenTo(this.tableCaptionView,"sorting:toggle",function(t){if(e.displayedColumns[t].bSortable){var n="asc",o=e.table.order();if(i.isArray(o)&&o.length>0){var s=o[0][0],l=o[0][1];s===t&&l===n&&(n="desc")}e.table.order([t,n]).draw()}}),this.tableCaptionView.listenTo(this.tableCaptionView,"changed:focus",function(){e.accFocusedState.focusView="tableHeader",e.trigger("changed:focus")}),this.tableCaptionView.render(),o.triggerMethodOn(this.tableCaptionView,"before:show"),o.triggerMethodOn(this.tableCaptionView,"show"),this.tableBodyView=new S({"el":this.$("tbody"),"collection":this.collection,"displayedColumns":this.displayedColumns,"_getActiveInlineForm":i.bind(function(){return this.activeInlineForm},this),"startInlineFormForEdit":i.bind(this.startInlineFormForEdit,this),"accFocusedCell":this.accFocusedState.body,"tableView":this}),this.propagateEventsToViews(this.tableBodyView),this.tableBodyView.listenTo(this.tableBodyView,"closeOtherControls",function(){e.trigger("closeOther")}),this.tableBodyView.listenTo(this.tableBodyView,"changed:focus",function(){e.accFocusedState.focusView="tableBody",e.trigger("changed:focus")}),this.tableBodyView.render(),o.triggerMethodOn(this.tableBodyView,"before:show"),this.tableBodyView.triggerMethod("show")},"_destroyTableHeaderAndBodyViews":function(){this.tableCaptionView&&(this.accFocusedState.headerColumn=this.tableCaptionView.accFocusedColumn,this.accFocusedState.accSearchFocused=this.tableCaptionView.accSearchFocused,this.tableCaptionView.destroy(),this.tableCaptionView=null),this.tableBodyView&&(this.tableBodyView.destroy(),this.tableBodyView=null)},"setDeletingNodesState":function(e){this.deletingNodes=e},"_handleContextRequest":function(){this._fetchingContext||(this._fetchingContext=!0,this._columnsReset=!1,this._collectionReset=!1,this.context.perspective&&!this._fetchingPerspectiveContext&&(this._columnsReset=this.columns.length>0))},"_handlePerspectiveContextRequest":function(){this._fetchingPerspectiveContext=!0},"_handleContextSync":function(){this._fetchingContext&&(this._fetchingContext=!1,this._columnsReset?(a.debug("_handleContextSync: columns reset -> full render")&&console.log(a.last),this.render()):this._collectionReset&&this.isRendered&&(a.debug("_handleContextSync: collection reset -> draw")&&console.log(a.last),this._drawTable()))},"_handleContextFinish":function(){this._fetchingContext=!1,this._fetchingPerspectiveContext=!1,this.unblockActions()},"_handleTableColumnsReset":function(){this._tableColumnsResetTime=(new Date).getTime(),this._fetchingContext?(this._columnsReset=!0,a.debug("_handleTableColumnsReset: fetching -> skip")&&console.log(a.last)):(a.debug("_handleTableColumnsReset -> full render")&&console.log(a.last),this.render())},"_handleColumnsReset":function(){this._columnsResetTime=(new Date).getTime(),this._fetchingContext?(this._columnsReset=!0,this._collectionReset?(a.debug("_handleColumnsReset: fetching -> collection was reset -> handleContextSync")&&console.log(a.last),this._handleContextSync()):a.debug("_handleColumnsReset: fetching -> skip")&&console.log(a.last)):(a.debug("_handleColumnsReset -> full render")&&console.log(a.last),this.render())},"_dataTablesOrderNeutral":function(){var e=this.collection&&this.collection.orderBy;if(this.table&&e&&e.length>0){e=e.split(" ");var t=e[0],i=this._getColumnIndexFromColumnName(t);-1===i&&(i=this._getColumnIndexFromSortKey(t)),-1===i&&this.table.orderNeutral()}},"_handleModelsReset":function(){this._dataTablesOrderNeutral(),this.enableEmptyViewText(),this._fetchingContext?(this._collectionReset=!0,this._columnsReset?(a.debug("ModelsReset: fetching and columns reset -> handleContextSync")&&console.log(a.last),this._handleContextSync()):a.debug("ModelsReset: fetching -> skip")&&console.log(a.last)):this.isRendered?(a.debug("ModelsReset: -> draw")&&console.log(a.last),this._drawTable()):(a.debug("ModelsReset: table not rendered -> full render")&&console.log(a.last),this.render())},"_handleModelsUpdate":function(e,t){if(this.isRendered){var n=t.changes.added;if(n.length>0&&this.table){i.each(n,function(e){e.unset(y.isSelectedModelAttributeName)}),a.debug("_handleModelsUpdate: -> draw")&&console.log(a.last),this._drawTable();i.find(n,function(e){if(e.get("description")&&e.get("description").length>0)return!0})&&this.trigger("refresh:rightTableToolbar")}}},"_handleModelRemove":function(e,i,n){if(this.isRendered)if(i.node&&(i.node.get("versionable")||null===i.node.get("versionable"))&&i.node.fetch({"refreshCache":!0}),!0===this.deletingNodes){if(e){var o;this.table.rows(function(t,i,n){return i.get("id")===e.get("id")&&(o=t,!0)}).data(),void 0!==o&&t(this.$el.find(this.table.row(o).node())).hide()}}else a.debug("_handleModelRemove: -> draw")&&console.log(a.last),this._drawTable()},"updateRow":function(e){if(this.isRendered&&this.table){var n=i.keys(e.changedAttributes());if(1!==n.length||"favorite"!==n[0]){var o=this.collection.indexOf(e);if(void 0!==o){if(this.table){var s=t(this.table.row(o).node()),l=this.table.row(o).child();if(1===i.keys(e.changed).length){if(null!=e.changed[y.isSelectedModelAttributeName]){return e.get(y.isSelectedModelAttributeName)?(s.addClass("binf-active"),i.each(l,function(e){t(e).addClass("binf-active")})):(s.removeClass("binf-active"),i.each(l,function(e){t(e).removeClass("binf-active")})),void Y.call(this)}if(null!=e.changed.csuiDelayedActionsRetrieved)return}!0===e.get("isCut")?(s&&s.addClass("csui-cut-row"),l&&l.addClass("csui-cut-row")):(s&&s.removeClass("csui-cut-row"),l&&l.removeClass("csui-cut-row"))}this.activeInlineForm&&this.activeInlineForm.model!==e&&this.cancelAnyExistingInlineForm({"silent":!0});var r=this.$("tbody").scrollTop();a.debug("updateRow: -> draw")&&console.log(a.last),this.triggerMethod("before:render"),this.table.row(o).invalidate(),this.table.draw(),this.$("tbody").scrollTop(r),this.triggerMethod("render"),this.table&&(this.activeInlineForm&&this.activeInlineForm.triggerMethod("dom:refresh",this.activeInlineForm),this._adjustColumns())}}}},"onAfterShow":function(){this._adjustColumns()},"getNameCell":function(e){var i=S.getNameColumnIndex(this.displayedColumns);if(void 0!==i){var n=t(e).children()[i];return t(n)}},"updateCollectionParameters":function(){var e=this.collection,t=this.context,n=e.makeFieldsV2,o=e.makeExpandableV2,s={},l={};this.collection.setFields&&(this._ensureFreshColumns(),(n||o)&&e.getResourceScope&&e.setResourceScope&&(this._originalCollectionScope?e.setResourceScope(this._originalCollectionScope):this._originalCollectionScope=e.getResourceScope()),i.each(this.allColumns,function(i){var r=i.CellView;if(r){if(n&&r.getModelFields){var a=r.getModelFields({"collection":e,"context":t,"column":i});a&&D.mergePropertyParameters(s,a)}if(o&&r.getModelExpand){var c=r.getModelExpand({"collection":e,"context":t,"column":i});c&&D.mergePropertyParameters(l,c)}r.updateCollectionParameters&&r.updateCollectionParameters({"collection":e,"context":t,"column":i})}},this),i.isEmpty(s)||e.setFields(s),i.isEmpty(l)||e.setExpand(l))},"clearFilter":function(e,n){return this.table&&(n&&!t.isEmptyObject(this.options.filter)&&(this.options.filter=i.omit(this.options.filter,n.split(","))),this.options.filter&&delete this.options.filter.name,this.table.search("").columns().search("").draw()),this},"setFilter":function(e){this.table&&(t.isEmptyObject(this.options.filter)?this.options.filter=e:this.options.filter=i.extend(this.options.filter,e),this._drawTable())},"resetOrder":function(e){return this.collection.resetOrder(),this},"getScreenRowCount":function(e){var i=this.table&&j.call(this);if(i){var n=t("#"+i.dom.table.id),o=n&&n[0].childNodes[1]&&n[0].childNodes[1].clientHeight||0,s=n&&n.dataTable().$("tbody tr"),l=s[0]&&s[0].clientHeight||0;return l>0?Math.floor(o/l):0}return 0},"getSelectedChildren":function(){var e={};return e[y.isSelectedModelAttributeName]=!0,this.collection.where(e)},"clearChildrenSelection":function(){var e=this.table&&j.call(this);e&&e.fnSelectNone()},"getFocusedChild":function(){return this.accFocusedState.body.row?this.collection.at(this.accFocusedState.body.row):void 0},"cancelFetch":function(){this.table&&this.table.clear()},"_setSpacing":function(){switch(this.options.spacing){case"medium":this.$el.removeClass("csui-table-spacing-narrow"),this.$el.addClass("csui-table-spacing-medium"),this.$el.removeClass("csui-table-spacing-wide");break;case"wide":this.$el.removeClass("csui-table-spacing-narrow"),this.$el.removeClass("csui-table-spacing-medium"),this.$el.addClass("csui-table-spacing-wide");break;default:this.$el.addClass("csui-table-spacing-narrow"),this.$el.removeClass("csui-table-spacing-medium"),this.$el.removeClass("csui-table-spacing-wide")}},"toggleSpacing":function(){switch(this.options.spacing){case"medium":this.options.spacing="wide";break;case"wide":this.options.spacing="narrow";break;default:this.options.spacing="medium"}this._setSpacing(),this._adjustColumns()},"showDetailRowDescriptions":function(e){this.options.descriptionRowView&&(this.options.descriptionRowViewOptions.showDescriptions=e,i.each(this._detailRowsDescriptionTRs,function(t){e?t.rowEl.removeClass("binf-hidden"):t.rowEl.addClass("binf-hidden"),t.view.trigger("dom:refresh")}),this.trigger("dom:refresh"))},"enableLocationColumn":function(e){this.options.locationColumn!==e&&(this.options.locationColumn=e)},"enableRefresh":function(e){this.refreshEnabled=e},"applyFilter":function(e){if(this.options.clientSideDataOperation)this.clientSideSearch(e.column);else{var t={};-1===i.keys(e).indexOf("column")?t=e:t[e.column]=e.keywords,this.collection.fetching?this.filterValuePending=t:(this.collection.resetLimit(!1),this.collection.setFilter(t))}},"cancelAnyExistingInlineForm":function(e){this.activeInlineForm&&this.activeInlineForm.cancel(e)},"startCreateNewModel":function(e,t){this.cancelAnyExistingInlineForm(),this.collection&&this.collection.node&&(e.set("parent_id",this.collection.node.get("id")),e.isLocallyCreated=!0,e.inlineFormView=t,this.collection.add(e,{"at":0}))},"startInlineFormForEdit":function(e){if(this.collection.contains(e)){this.cancelAnyExistingInlineForm();var t=x.getInlineFormView(e.get("type"));t||(t=x.getInlineFormView(-1)),t&&(e.inlineFormView=t,e.set("csuiInlineFormErrorMessage","dummy",{"silent":!0}),e.unset("csuiInlineFormErrorMessage"))}},"showOrHideZeroRecordsMessage":function(){if(this.$el.find("div.csui-table-empty").remove(),0===this.collection.length){this.$el.find("tbody").empty(),this.$el.addClass("csui-table-empty"),this._setEmptyViewText();var e="csui-table-empty csui-table-empty-default"+(this.canAddItemsToContainer&&this.addItemsPermissions?" csui-can-add-items":""),i=t("<div class='"+e+"'><p class='csui-no-result-message'>"+this.emptyTableText+"</p></div>");i.attr("title",this.emptyTableText),this._showEmptyViewText||i.addClass("csui-state-loading"),this.$el.append(i),this.trigger("refresh:rightTableToolbar")}else this.$el.removeClass("csui-table-empty"),this._renderedEmptyTable&&(this._previousViewWidth=0);this._renderedEmptyTable=0===this.collection.length},"_setEmptyViewText":function(){if(this.emptyTableText="",this._showEmptyViewText){var e=this.options.customLabels?this.options.customLabels:this.localizableLabels;if(this.options.customLabels&&e.emptyTableText)this.emptyTableText=e.emptyTableText;else{this.emptyTableText=this.addItemsPermissions?e.zeroRecords:r.noPermissions,this.emptyTableText=this.canAddItemsToContainer?this.emptyTableText:e.zeroRecords;var t=i.size(this.collection.filters);t>1?this.emptyTableText=e.emptySearchTable:1===t&&this.collection.filters.name&&(this.emptyTableText=e.emptySearchTable)}}},"setCustomLabels":function(e){function t(e,n){return i.reduce(i.keys(e),function(o,s){var l=e[s];if(i.isObject(l)){var r=n[s]||(n[s]={});return o||t(l,r)}var a=n[s]!=l;return n[s]=l,o||a},!1)}var n=this.getOption("customLabels")||this.getOption("tableTexts")||{};if(i.isFunction(n)&&(n=n.call(this)),this.options.customLabels=this._fillDefaultLocalizableLabels(e,n),this.table){var o=i.deepClone(this.options.customLabels);s.camelToHungarian(s.defaults.oLanguage,o);t(o,this.table.settings()[0].oLanguage)&&0===this.collection.length&&this._drawTable()}},"_fillDefaultLocalizableLabels":function(){function e(t){i.each(i.keys(t),function(n){var o=t[n];i.isObject(o)?e(o):!1!==o&&null!==o||delete t[n]})}var t=Array.prototype.slice.call(arguments),n={"paginate":{},"aria":{},"tooltip":{}};return i.each(t,function(e){null!=e.zeroRecordsMsg&&null==e.zeroRecords&&(e.zeroRecords=e.zeroRecordsMsg,delete e.zeroRecordsMsg),i.defaults(n,e),i.defaults(n.paginate,e.paginate),i.defaults(n.aria,e.aria)}),e(n),i.defaults(n,{"emptyTable":r.NodeTableNoItems,"emptySearchTable":r.NodeTableNoSearchResult,"zeroRecords":r.NodeTableNoItems,"loadingRecords":r.NodeTableLoadingItems,"processing":r.NodeTableProcessingItems,"info":r.NodeTablePageInfo,"infoEmpty":r.NodeTableEmptyPageInfo,
"infoFiltered":r.NodeTableFilteredPageInfo,"infoThousands":r.NodeTablePageThousandsSeparator,"infoPostFix":r.NodeTablePageInfoSuffix,"lengthMenu":r.NodeTablePageSizeSelector,"search":r.NodeTablePageFilterLabel}),i.defaults(n.paginate,{"first":r.NodeTablePagingFirst,"last":r.NodeTablePagingLast,"previous":r.NodeTablePagingPrevious,"next":r.NodeTablePagingNext}),i.defaults(n.aria,{"sortedDescending":r.NodeTableSortedDescendingColumnAria,"sortedAscending":r.NodeTableSortedAscendingColumnAria}),i.defaults(n.tooltip,{"sortAscending":r.NodeTableSortAscendingTooltip,"sortDescending":r.NodeTableSortDescendingTooltip,"isUnsorted":r.NodeTableIsUnsortedTooltip}),n},"_initializeLocalizableLabels":function(){var e=this.getOption("customLabels")||this.getOption("tableTexts")||{};i.isFunction(e)&&(e=e.call(this)),this.localizableLabels=this._fillDefaultLocalizableLabels(e)},"_handlePendingFilter":function(){this.isRendered&&(i.isEmpty(this.filterValuePending)||(this.collection.resetLimit(!1),this.collection.setFilter(this.filterValuePending),this.filterValuePending={}))},"_handleResponseSortBy":function(){var e=this.collection.sorting;if(e&&e.sort&&e.sort.length>0&&e.sort[0].value){var t,i=e.sort[0].value,n=i.indexOf("_"),o=i.substring(n+1),s=i.substring(0,n),l=this.collection.sortingColumnKey,r=l&&-1===l.lastIndexOf("_formatted")?l:this._getSortableColumnKey(o);t=this._getColumnIndexFromColumnName(r),-1===t&&(t=this._getColumnIndexFromSortKey(r)),this.table&&-1!==t&&this.table.order([parseInt(t),s]);var a=this.collection.setOrder(r+" "+s,!1);if(this.table&&K.call(this,this.table.order(),r),l&&this.enableViewState&&a){var c=r+" "+s;this.getViewStateOrderBy()!==c&&this.setViewStateOrderBy([c],{"default":!0})}}},"clientSideSearch":function(e){var t={};i.each(this.searchBoxes,function(e){var i=e.getColumn(),n=e.getValue();n.length&&(t[i]=n)}),this.collection.resetLimit(!1),this.collection.setFilter(t)},"resetScrollToTop":function(){if(this.isRendered){this.$("tbody").scrollTop(0)}},"_clearSearchBoxes":function(){this.isRendered&&i.each(this.searchBoxes,function(e){e.hideAndClear()})},"_adjustColumns":function(){if(!me&&this.displayedColumns&&this.$el.is(":visible")){if(this.collection.node&&136===this.collection.node.get("type")){var e=i.findWhere(this.displayedColumns,{"name":"order"});e&&(e.CellView.hasFixedWidth=!0)}var n=this.$el.width();d.usePerfectScrollbar()||this.$el.find(".csui-normal-scrolling").hasScroll()&&(n-=t.scrollbarWidth());var o,s=0,l=0,r=this.$el.find("table>thead>tr>th");if(this.collection.length>0)if(this.activeInlineForm){var a=this.collection.at(0).get("id"),c=this.activeInlineForm.model.get("id");if(a===c)if(this.collection.length>1){var u=t(this.$el.find("table>tbody>tr:not(.csui-table-row-shows-inlineform) .csui-table-cell-_select")[0]).closest("tr");o=u.children()}else o=r,this.$el.find(".csui-inlineform-parent").addClass("csui-inline-form-full-width");else o=this.$el.find("table>tbody>tr:first-child").children()}else o=this.$el.find("table>tbody>tr:first-child").children();else o=r;var h,p={},m=[],f=this.displayedColumns,g=0,b=0,v=0,w=0,y=this._extraWidthForToolbarItems;i.findWhere(f,{"isNaming":!0})||(y=0),o.each(function(e){if(e<f.length){var i=t(this),n=Math.max(i.outerWidth(),t(r[e]).outerWidth()),o=f[e];if(o.CellView.hasFixedWidth)l+=n,s++;else{var a=o.attributes&&o.attributes.widthFactor||1;a&&1!==a?(p[e]=a,g+=a):o.CellView&&o.CellView.flexibleWidth?(v+=n,w++):(m.push(e),g+=1),a>b&&(b=a,h=e)}}});var C=n-l-v-y,_=f.length-s-w,x=_>0?C/_:0,k=0,T=g/_;i.each(p,function(e,t){var i=e/T,n=x*i;k+n>C&&(n=C-k)<0&&(n=0),n=Math.floor(n),p[t]=n,k+=n});var V;m.length>0?(x=(C-k)/m.length/T,x=Math.floor(x),V=C-k-x*m.length):(x=0,V=C-k),V=Math.floor(V);var S={},I="",A=this;o.each(function(e){if(!(e>=f.length)){var n=t(this),o=0,s=f[e];s.isNaming&&(o=y);var l;if(s.CellView.hasFixedWidth||s.CellView.flexibleWidth){var a=Math.max(n.outerWidth(),t(r[e]).outerWidth())+o;l=i.str.sformat("{width: {0}px}",a)}else{var c;c=p[e]&&p[e]>0?p[e]:x,e===h&&V&&(c+=V),c+=o,l=i.str.sformat("{min-width: {0}px; max-width: {1}px}",c,c)}I+=i.str.sformat('#{0} [data-csui-attribute="{1}"] {2} \n',A.cid,s.attributes.column_key,l),S[s.className]=l}}),function(e,t){var i=document.getElementById(e);i&&document.getElementsByTagName("head")[0].removeChild(i),i=document.createElement("style"),i.type="text/css",i.id=e,i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i)}("adjusted_colstyles_js_"+A.cid,I),this.cachedColumnWidths=S,this.accFocusedState.body.column>f.length-1&&(this.accFocusedState.body.column=f.length-1),this._showOrHideAlternativeHeaderView()}},"_showOrHideAlternativeHeaderView":function(){this._alternativeHeaderRegion&&(this.selectedChildren.length>0?this._alternativeHeaderRegion.$el.addClass("csui-table-alternative-header-visible"):this._alternativeHeaderRegion.$el.removeClass("csui-table-alternative-header-visible"))},"_createAlternativeHeaderView":function(){var e,t,n=this.options.alternativeHeader.options;if(n&&n.toolbarItems&&n.toolbarItems.tableHeaderToolbar){var o=n.toolbarItems.tableHeaderToolbar;e=o?o.options:void 0;var s={"nodes":this.selectedChildren,"container":this.collection.node,"context":this.context,"collection":this.collection};this._alternativeHeaderCommandController=n.toolbarCommandController||new P({"commands":n.commands}),t=new M(o,{"status":s,"commands":this._alternativeHeaderCommandController.commands,"delayedActions":this.collection.delayedActions,"mask":n.toolbarItemsMask})}var l=new this.options.alternativeHeader.viewClass(i.extend({"collection":t,"toolbarName":"tableHeader","originatingView":this.options.parentView,"keyboardNavigationEnabled":!0,"selectedNodes":this.selectedChildren},e));return this._alternativeHeaderCommandController&&(this.listenTo(this._alternativeHeaderCommandController,"before:execute:command",function(e){a.debug("command "+e.commandSignature+" is starting")&&console.log(a.last),this.lockedForOtherContols=!0,this._destroyInlineBar(),l.trigger("before:execute:command",e)}),this.listenTo(this._alternativeHeaderCommandController,"after:execute:command",function(e){a.debug("command is finished")&&console.log(a.last),this.lockedForOtherContols=!1,l.trigger("after:execute:command",e)})),l},"_toolbarItemClicked":function(e,t){var i=this.getSelectedChildren(),n={"context":this.context,"nodes":new this._ViewCollection(i),"container":this.collection.node,"collection":this.collection,"originatingView":this.options.originatingView,"toolItemView":e};this._alternativeHeaderCommandController.toolitemClicked(t.toolItem,n)},"_getSortableColumnKey":function(e){var t=e;return e=e.toLowerCase(),i.find(this.displayedColumns,function(i,n){if(i.attributes.sort_key===e||i.name.toLowerCase()===e||i.attributes.column_key===e)return t=i.attributes.column_key,!0}),t},"_getColumnIndexFromColumnName":function(e){var t=-1;return this.displayedColumns&&this.displayedColumns.some(function(i,n){if(i.name==e)return t=n,!0},this),t},"_getColumnIndexFromSortKey":function(e){var t=-1;return this.displayedColumns&&this.displayedColumns.some(function(i,n){if(i.attributes.sort_key==e)return t=n,!0},this),t},"_collectionOrderByChanged":function(){var e=this.collection.orderBy;if(e&&this.table){e=e.split(" ");var t,i,n=e[0],o=e[1],s=this._getColumnIndexFromColumnName(n),l=this.table.order();-1===s&&(s=this._getColumnIndexFromSortKey(n)),l&&l.length>0&&(t=l[0][0],i=l[0][1]),-1===s||t===s&&i===o||(this.table.order([parseInt(s),o]),this.collection.fetch())}},"_collectionFilterChanged":function(){this.searchBoxes&&0!==this.searchBoxes.length||J.call(this);var e=this.collection.filters;i.each(this.searchBoxes,function(t){var i=t.getColumn(),n=e[i];void 0!==n&&""!==n||t.showInputField?(t.getShown()||t.showSearchInput(),t.setValue(n)):t.getShown()&&t.hideAndClear()}),this.enableViewState&&this.setViewStateFilter(this.collection.getFilterAsObject())},"_collectionFilterCleared":function(){i.each(this.searchBoxes,function(e){e.hideAndClear()}),this.enableViewState&&this.setViewStateFilter("")},"onViewStateChanged":function(){var e=this.context.viewStateModel,t=e.getViewState("filter",!0);t?JSON.stringify(this.collection.getFilterAsObject())!==t&&this.applyFilter(this.getViewStateFilterAsObject(t)):this.collection.filters&&this.collection.clearFilter()},"getViewStateFilterAsObject":function(e){var t={};try{t=JSON.parse(e)}catch(e){}return t},"_isSingleSelectionEnabled":function(){return"single"===this.options.selectRows}});return fe.version="1.0",i.extend(fe.prototype,A),i.extend(fe.prototype,E),fe.prototype._eventsToPropagateToViews.push("clicked:cell"),fe}),csui.define("hbs!csui/controls/settings/selected.columns/impl/selected.columns",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="column-header">\r\n  <div class="icon arrow_back" tabindex="0"  title="'+e.escapeExpression((s=null!=(s=l(i,"backButtonTitle")||(null!=t?l(t,"backButtonTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"backButtonTitle","hash":{},"loc":{"start":{"line":2,"column":52},"end":{"line":2,"column":71}}}):s))+'"   aria-label="'+e.escapeExpression((s=null!=(s=l(i,"ColumnSettingsBackAria")||(null!=t?l(t,"ColumnSettingsBackAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"ColumnSettingsBackAria","hash":{},"loc":{"start":{"line":2,"column":87},"end":{"line":2,"column":113}}}):s))+'" role="button"></div>\r\n  <div class="column-title" title="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":44}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":3,"column":46},"end":{"line":3,"column":55}}}):s))+'</div>\r\n</div>\r\n<div class="add-button" tabindex="0" role="button" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"addColumnsAria")||(null!=t?l(t,"addColumnsAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"addColumnsAria","hash":{},"loc":{"start":{"line":5,"column":63},"end":{"line":5,"column":81}}}):s))+'">\r\n  <span class="icon icon-columnsadd" title="'+e.escapeExpression((s=null!=(s=l(i,"addAvailableColumns")||(null!=t?l(t,"addAvailableColumns"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"addAvailableColumns","hash":{},"loc":{"start":{"line":6,"column":44},"end":{"line":6,"column":67}}}):s))+'"></span>\r\n</div>\r\n<div class="columns-list binf-list-group"  role="menu">\r\n</div>'}});return i.registerPartial("csui_controls_settings_selected.columns_impl_selected.columns",n),n}),csui.define("hbs!csui/controls/settings/selected.columns/impl/selected.column",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="column-label" data-csui-key="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":4,"column":44},"end":{"line":4,"column":53}}}):s))+'">\r\n    <span class="csui-column-label-category">'+e.escapeExpression((s=null!=(s=l(i,"categoryName")||(null!=t?l(t,"categoryName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"categoryName","hash":{},"loc":{"start":{"line":5,"column":45},"end":{"line":5,"column":61}}}):s))+'</span>\r\n    <span class="csui-column-label-attribute">'+e.escapeExpression((s=null!=(s=l(i,"attributeName")||(null!=t?l(t,"attributeName"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"attributeName","hash":{},"loc":{"start":{"line":6,"column":46},"end":{"line":6,"column":63}}}):s))+"</span>\r\n  </span>\r\n"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="column-label" data-csui-key="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":9,"column":44},"end":{"line":9,"column":53}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":9,"column":55},"end":{"line":9,"column":63}}}):s))+"</span>\r\n"},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="remove-button icon circle_delete" tabindex="0" role="button" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"removeColumnAria")||(null!=t?l(t,"removeColumnAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"removeColumnAria","hash":{},"loc":{"start":{"line":13,"column":87},"end":{"line":13,"column":107}}}):s))+'"  title="'+e.escapeExpression((s=null!=(s=l(i,"removeColumn")||(null!=t?l(t,"removeColumn"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"removeColumn","hash":{},"loc":{"start":{"line":13,"column":117},"end":{"line":13,"column":133}}}):s))+'"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="column-item-container" title="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":1,"column":42},"end":{"line":1,"column":50}}}):l))+'">\r\n  <span class="icon icon-draggable-handle6"></span>\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"hasAttribute"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":3,"column":2},"end":{"line":10,"column":9}}}))?s:"")+"</div>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isRemovable"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":12,"column":0},"end":{"line":14,"column":7}}}))?s:"")}});return i.registerPartial("csui_controls_settings_selected.columns_impl_selected.column",n),n}),csui.define("csui/controls/settings/selected.columns/selected.columns.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette3","csui/utils/base","csui/controls/globalmessage/globalmessage","csui/controls/tile/behaviors/perfect.scrolling.behavior","i18n!csui/controls/settings/impl/nls/lang","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/settings/available.columns/available.columns.view","csui/controls/table/table.view","hbs!csui/controls/settings/selected.columns/impl/selected.columns","hbs!csui/controls/settings/selected.columns/impl/selected.column"],function(e,t,i,n,o,s,l,r,a,c,u,d,h){"use strict";var p=n.View.extend({"template":h,"className":function(){return"column-item"+(this.model.get("isNew")?" csui-new-column-item":"")},"attributes":{"data-value":"column","role":"menuitem"},"ui":{"removeBtn":".remove-button"},"triggers":{"keydown":{"event":"keydown:item","stopPropagation":!1,"preventDefault":!1},"click @ui.removeBtn":{"event":"column:remove","stopPropagation":!1,"preventDefault":!1}},"templateContext":function(){var e=["OTName","OTMIMEType"],i=this.model.get("key"),n=this.model.get("name"),o=n&&n.replace(/\s*:[^:]*/g,""),s=n&&n.replace(/^[^:]*:\s*/,"");return{"name":n,"categoryName":o,"attributeName":s,"hasAttribute":o!==s,"label":i,"isRemovable":!(e.indexOf(i)>-1),"removeColumn":t.str.sformat(r.removeColumn,n),"removeColumnAria":t.str.sformat(r.removeColumnMenuAria,n)}},"constructor":function(e){n.View.apply(this,arguments),e&&e.isTabularView&&this.$el.attr("draggable",!0),this.model.set("sequence",this.model&&this.model.collection&&this.model.collection.findIndex(this.model))}}),m=n.CollectionView.extend({"className":"csui-selected-column","childView":p,"childViewOptions":function(){return{"isTabularView":this.options&&this.options.isTabularView}},"childViewEvents":{"column:remove":"onColumnRemove","keydown:item":"onChildViewKeydown"},"constructor":function(e){e||(e={}),this.options=e,this.focusIndex=0,n.CollectionView.apply(this,e)},"onColumnRemove":function(e){this.options.availableColumnsCollection.add(this.options.collection.remove(e.model)),this.options.settingsView.$el.css("height",this.options.settingsView.currentCard.outerHeight()),this.options.searchResultsView.headerView.data.display_regions="{"+this.collection.pluck("key").map(function(e){return"'"+e+"'"}).join(",")+"}"},"attachHtml":function(e,t,i){n.CollectionView.prototype.attachHtml.call(this,e,t,i),this.options.isTabularView&&"OTName"!==t.model.get("key")&&"OTMIMEType"!==t.model.get("key")?this.attachDragListeners(t):(t.$el.addClass("drag-disabled"),t.$el.removeAttr("draggable"))},"_getItemKey":function(e){return e.find("[data-csui-key]").attr("data-csui-key")},"attachDragListeners":function(i){var n=this,o=i.$el,s=function(){n.$el.find(".csui-dragline").remove(),delete n._dropAfter};o.on("dragstart",function(t){n._dragData={"sourceKey":n._getItemKey(e(t.currentTarget))},t.originalEvent.dataTransfer.setData("text","")}),o.on("dragover",function(t){if(n._dragData&&void 0!==n._dragData.sourceKey){t.preventDefault();var i=e('<div class="csui-dragline">'),o=e(t.currentTarget).height();t.offsetY>o/2?void 0!==n._dropAfter&&!1!==n._dropAfter||(s(),e(t.currentTarget).after(i),n._dropAfter=!0):void 0!==n._dropAfter&&!0!==n._dropAfter||(s(),e(t.currentTarget).before(i),n._dropAfter=!1)}}),o.on("drop",t.bind(function(e){n._dragData&&void 0!==n._dragData.sourceKey&&this.onSubItemDrop(n,e)},this)),o.on("dragleave",function(){s()}),o.on("dragend",function(e){e.preventDefault(),s(),delete n._dragData})},"onSubItemDrop":function(t,i){var n,o,s,l=t,r=l._dragData&&l._dragData.sourceKey||l.keyDragSource||null,a=l._getItemKey(e(i.currentTarget)),c=l.collection.findWhere({"key":r}),u=l.collection.findWhere({"key":a}),d=l.collection.indexOf(c),h=l.collection.indexOf(u);this.$el.find("*[tabindex]");i.preventDefault(),d!==h&&d&&(!0===l._dropAfter&&h++,d<h&&h--,l.collection.remove(c),l.collection.add(c,{"at":h}),l.$el.find(".csui-dragline").remove(),l.keyDragSource&&(l.$el.find(".active").removeClass("active"),e(l.$el.children()[h]).addClass("active"),l.$el.find(".active > *[tabindex]").trigger("focus"),n=l._getItemKey(l.$el.find(".active")),o=l.collection.findWhere({"key":n}),s=l.collection.indexOf(o)-1,this.focusIndex=s-1),l.triggerMethod("reorder",c),l._dragData&&l._dragData.sourceKey&&delete l._dropAfter,this.options.settingsView.isChanged=!0,this.options.searchResultsView.headerView.data.display_regions="{"+this.collection.pluck("key").map(function(e){return"'"+e+"'"}).join(",")+"}")},"onSubItemPaste":function(t,i){var n=t,o=e('<div class="csui-dragline">');n.$el.find(".csui-dragline").remove(),40===i.keyCode?e(i.currentTarget).after(o):e(i.currentTarget).siblings(".active").before(o)},"onChildViewKeydown":function(t,i){var n,s=o.isMacintosh(),l=i.keyCode,r=this.$el.find("*[tabindex]"),a=!1;if(this.options.isTabularView&&(s&&i.metaKey&&!i.ctrlKey||!s&&!i.metaKey&&i.ctrlKey))i.preventDefault(),i.stopPropagation(),88===l?this.keyDragSource=this._getItemKey(e(i.currentTarget)):86===l&&(this.onSubItemDrop(this,i),this.keyDragSource=void 0);else if(27===l)this.$el.closest(".csui-search-settings").trigger("focus"),this.options.settingsView.triggerMethod("close:menu",i);else if(13===l||32===l)this.onColumnRemove(t,i),i.stopPropagation(),r.length-1===this.focusIndex&&--this.focusIndex,r=this.$el.find("*[tabindex]"),0===r.length?(n=this.$el.parents(".selected-columns-container").find(".add-button"),n.trigger("focus")):(e(r[this.focusIndex]).closest(".column-item").addClass("active"),e(r[this.focusIndex]).trigger("focus"));else if(r.length&&(38!==l&&40!==l||(e(r[this.focusIndex]).closest(".column-item").removeClass("active"),38===l?this.focusIndex>0&&(--this.focusIndex,a=!0):this.focusIndex<r.length-1&&(++this.focusIndex,a=!0),e(r[this.focusIndex]).closest(".column-item").addClass("active"),e(r[this.focusIndex]).trigger("focus"),this.keyDragSource&&a&&(this.onSubItemPaste(this,i),a=!1),i.stopPropagation(),i.preventDefault()),9===i.keyCode)){if(e(r[this.focusIndex]).closest(".column-item").removeClass("active"),i.shiftKey&&this.options.availableColumnsCollection.length)n=this.$el.parents(".selected-columns-container").find(".add-button"),n.trigger("focus");else{var c=this.$el.parents(".selected-columns-container").find(".arrow_back");c.trigger("focus")}i.stopPropagation(),i.preventDefault()}}});return n.View.extend({"constructor":function(e){n.View.apply(this,arguments)},"template":d,"templateContext":{"label":r.columnSettingsTitle,"backButtonTitle":r.SearchBackToolTip,"backButtonAria":r.SearchBackAria,"ColumnSettingsBackAria":r.SettingsBackAria,"addAvailableColumns":r.addAvailableColumns,"addColumnsAria":r.addColumnsAria},"behaviors":{"PerfectScrolling":{"behaviorClass":l,"contentParent":".columns-list","suppressScrollX":!0,"scrollYMarginOffset":15},"TabableRegionBehavior":{"behaviorClass":a}},"regions":{"columnsList":".columns-list"},"ui":{"backArrow":".arrow_back","addButton":".add-button"},"events":{"click @ui.backArrow":"showSettingsView","keydown @ui.backArrow":"onKeydownBackArrow","click @ui.addButton":"showAvailableColumns","keydown":"onKeyInView"},"onKeydownBackArrow":function(e){var t=e.keyCode;!!!this.options.searchResultsView.$el.find(".load-container.binf-hidden").length||13!==t&&32!==t&&37!==t||(this.showSettingsView(e),e.preventDefault(),e.stopPropagation())},"currentlyFocusedElement":function(t){var i=this.$("*[tabindex]");return i.length&&i.prop("tabindex",0),e(t&&t.shiftKey?i[i.length-1]:i[0])},"onKeyInView":function(t){var i=t.keyCode,n=this.$el.find(".add-button"),o=0;!this.options.searchResultsView.$el.find(".load-container.binf-hidden").length?(t.stopPropagation(),t.preventDefault()):27===i?(this.$el.closest(".csui-search-settings").trigger("focus"),this.options.settingsView.triggerMethod("close:menu",t)):n.length&&(9===i?(t.shiftKey?e(document.activeElement).hasClass("arrow_back")?(n=this.$el.find(".circle_delete"),o=this.selectedColumnsCollectionView.focusIndex=n.length-1,e(n[o]).closest(".column-item").addClass("active"),e(n[o]).trigger("focus")):this.$el.find(".arrow_back").trigger("focus"):(o=0,e(document.activeElement).hasClass("arrow_back")&&this.options.availableColumnsCollection.length?e(n[o]).trigger("focus"):(n=this.$el.find(".circle_delete"),this.selectedColumnsCollectionView.focusIndex=0,e(n[o]).closest(".column-item").addClass("active"),e(n[o]).trigger("focus"))),t.preventDefault(),t.stopPropagation()):13!==i&&32!==i||(this.showAvailableColumns(t),t.preventDefault(),t.stopPropagation()))},"showSettingsView":function(e){var i=new FormData,n=this.options.searchResultsView.headerView.data.display_regions;n&&(this.options.searchResultsView.blockActions(),i.append("display_regions",n),this.options.settings.save(null,{"parse":!1,"data":i,"processData":!1,"cache":!1,"contentType":!1}).done(t.bind(function(e){this.options.searchResultsView.collection.settings_changed=!0,this.options.tableCollection.fetch(),this.options.settingsView.isChanged=!1,this.options.searchResultsView.headerView.data={},this.options.searchResultsView.unblockActions()},this)).fail(t.bind(function(e){e=new o.Error(e),s.showMessage("error",e.message),this.options.searchResultsView.unblockActions()},this))),this.options.settingsView.showSettings("settingsDropDownContainer",this.options.settingsView.settingsDropDownView)},"showAvailableColumns":function(){var e,t,i=this.options.settings&&this.options.settings.get("display");i&&i.display_regions&&(e=i.display_regions.available,t=i.display_regions.selected),this.options.settingsView.showSettings("availableColumnsContainer",new c({"selectedColumnView":this,"settingsView":this.options.settingsView,"tableCollection":this.options.tableCollection,"collection":e,"selectedColumnsCollection":t,"settings":this.options.settings,"searchResultsView":this.options.searchResultsView}))},"onRender":function(){this.options.availableColumnsCollection.length||this.ui.addButton.addClass("binf-hidden"),this.selectedColumnsCollectionView=new m(this.options),this.showChildView("columnsList",this.selectedColumnsCollectionView),this.listenTo(this.options.availableColumnsCollection,"update",t.bind(function(){this.options.availableColumnsCollection.length?this.ui.addButton.removeClass("binf-hidden"):this.ui.addButton.addClass("binf-hidden")},this))}})}),csui.define("hbs!csui/controls/settings/summary.description/impl/summary.descriptions",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="column-header"  >\r\n  <div class="icon arrow_back" tabindex="0" title="'+e.escapeExpression((s=null!=(s=l(i,"backButtonTitle")||(null!=t?l(t,"backButtonTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"backButtonTitle","hash":{},"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":70}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"backButtonAria")||(null!=t?l(t,"backButtonAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"backButtonAria","hash":{},"loc":{"start":{"line":2,"column":84},"end":{"line":2,"column":102}}}):s))+'" role="button"></div>\r\n  <div class="column-title" title="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":44}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":3,"column":46},"end":{"line":3,"column":55}}}):s))+'</div>\r\n</div>\r\n<div class="columns-list binf-list-group" ></div>'}});return i.registerPartial("csui_controls_settings_summary.description_impl_summary.descriptions",n),n}),csui.define("hbs!csui/controls/settings/summary.description/impl/summary.description",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return"selected"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="column-item-container" tabindex="0" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":1,"column":60},"end":{"line":1,"column":68}}}):l))+"\" role='radio' aria-checked=\""+e.escapeExpression((l=null!=(l=r(i,"checked")||(null!=t?r(t,"checked"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"checked","hash":{},"loc":{"start":{"line":1,"column":97},"end":{"line":1,"column":108}}}):l))+'">\r\n  <span class="icon icon-listview-checkmark '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"selected"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":44},"end":{"line":2,"column":75}}}))?s:"")+'"></span>\r\n  <span class="column-label" id="'+e.escapeExpression((l=null!=(l=r(i,"key")||(null!=t?r(t,"key"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"key","hash":{},"loc":{"start":{"line":3,"column":33},"end":{"line":3,"column":40}}}):l))+'" title="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":49},"end":{"line":3,"column":57}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":59},"end":{"line":3,"column":67}}}):l))+"</div>\r\n</div>"}});return i.registerPartial("csui_controls_settings_summary.description_impl_summary.description",n),n}),csui.define("csui/controls/settings/summary.description/summary.description.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette3","csui/controls/globalmessage/globalmessage","i18n!csui/controls/settings/impl/nls/lang","csui/utils/base","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/controls/settings/summary.description/impl/summary.descriptions","hbs!csui/controls/settings/summary.description/impl/summary.description"],function(e,t,i,n,o,s,l,r,a,c){"use strict";var u=n.View.extend({"template":c,"className":"column-item","templateContext":function(){return{"name":this._nameResolver(),"label":this.model.get("key"),"checked":!!this.model.get("selected")}},"ui":{"itemContainer":".column-item-container"},"attributes":{"role":"presentation"},"triggers":{"click @ui.itemContainer":"click:itemContainer","keydown @ui.itemContainer":{"event":"keydown:itemContainer","stopPropagation":!1,"preventDefault":!1}},"constructor":function(e){e||(e={}),this.options=e,n.View.call(this,e),this.listenTo(this.model,"change",this.render)},"_nameResolver":function(){var e,t=this.model.get("key");switch(t){case"SO":e=s.SummaryOnly;break;case"SP":e=s.SummaryPreferred;break;case"DO":e=s.DescriptionOnly;break;case"DP":e=s.DescriptionPreferred;break;case"SD":e=s.SummaryAndDescription;break;default:e=this.model.get("name")}return e}}),d=n.CollectionView.extend({"childView":u,"childViewOptions":{},"attributes":{"role":"menu"},"constructor":function(e){e||(e={}),this.options=e,this.focusIndex=0,n.CollectionView.call(this,e)},"onChildviewClickItemContainer":function(e){this.selectSummary(e)},"selectSummary":function(e){this.collection.findWhere({"selected":!0}).unset("selected"),e.model.set("selected",!0),this.options.searchResultsView.headerView.data.summary_description=e.model.get("key"),this.options.selectedCollection=e.model.get("key"),this.options.settingsView.model.get("display").summary_description.selected=e.model.get("key"),e.$el.find(".column-item-container").trigger("focus")},"onChildviewKeydownItemContainer":function(t,i){var n=i.keyCode,o=this.$el.find("*[tabindex]");if(27===n)this.$el.closest(".csui-search-settings").trigger("focus"),this.options.settingsView.triggerMethod("close:menu",i);else if(13===n||32===n)this.selectSummary(t),i.stopPropagation(),i.preventDefault();else if(o.length&&(38!==n&&40!==n||(38===n?this.focusIndex>0&&--this.focusIndex:this.focusIndex<o.length-1&&++this.focusIndex,e(o[this.focusIndex]).trigger("focus"),i.stopPropagation(),i.preventDefault()),9===i.keyCode)){var s=this.$el.parents(".csui-summary-description-list").find(".arrow_back");s.trigger("focus"),i.stopPropagation(),i.preventDefault()}}});return n.View.extend({"template":a,"className":"csui-summary-description-list","ui":{
"backArrow":".arrow_back"},"events":{"click @ui.backArrow":"onClickBackArrow","keydown @ui.backArrow":"onKeyPressBackArrow","keydown":"onKeyInView"},"regions":{"columnsList":".columns-list"},"behaviors":{"TabableRegionBehavior":{"behaviorClass":r}},"currentlyFocusedElement":function(t){var i=this.$("*[tabindex]");return i.length&&i.prop("tabindex",0),e(t&&t.shiftKey?i[i.length-1]:i[0])},"templateContext":function(){var e=this;return t.each(this.options.availableCollection&&this.options.availableCollection.models,function(t,i){t.get("key")===e.options.selectedCollection&&(t.set("selected",!0),t.set("checked",!0))}),{"label":s.summaryDescriptionTitle,"available":this.options.availableCollection&&this.options.availableCollection.models,"backButtonTitle":s.SearchBackToolTip,"backButtonAria":s.SummaryDescriptionBackAria}},"constructor":function(e){e||(e={}),this.options=e,n.View.call(this,e)},"onClickBackArrow":function(e){this.showSettingsView(e)},"onKeyPressBackArrow":function(e){var t=e.keyCode;!!!this.options.searchResultsView.$el.find(".load-container.binf-hidden").length||13!==t&&32!==t&&37!==t||(this.showSettingsView(e),e.stopPropagation(),e.preventDefault())},"showSettingsView":function(e){var i=new FormData,n=this.options.searchResultsView.headerView.data.summary_description;n&&(this.options.searchResultsView.blockActions(),i.append("summary_description",n),this.options.settings.save(null,{"parse":!1,"data":i,"processData":!1,"cache":!1,"contentType":!1}).done(t.bind(function(e){this.options.settingsView.trigger("update:showSummaryDescriptions"),this.options.searchResultsView.collection.settings_changed=!1,this.options.searchResultsView.headerView.data={},this.options.searchResultsView.unblockActions()},this)).fail(function(e){e=new l.Error(e),o.showMessage("error",e.message),this.options.searchResultsView.unblockActions()})),this.options.settingsView.showSettings("settingsDropDownContainer",this.options.settingsView.settingsDropDownView)},"onRender":function(){this.summaryDescriptionCollectionView=new d(this.options),this.showChildView("columnsList",this.summaryDescriptionCollectionView)},"onKeyInView":function(t){var i=t.keyCode,n=this.$el.find(".column-item-container"),o=0;27===i?(this.$el.closest(".csui-search-settings").trigger("focus"),this.options.settingsView.triggerMethod("close:menu",t)):n.length&&(9!==i&&16!==i||(o=t.shiftKey?n.length-1:0,this.summaryDescriptionCollectionView.focusIndex=0,e(n[o]).trigger("focus"),t.stopPropagation(),t.preventDefault()))}})}),csui.define("hbs!csui/controls/settings/impl/settings.dropdown",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<a class="csui-settings-option" id="'+e.escapeExpression((s=null!=(s=l(i,"id")||(null!=t?l(t,"id"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":1,"column":36},"end":{"line":1,"column":42}}}):s))+'" href="javascript:void(0);" tabindex="-1" title="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":1,"column":92},"end":{"line":1,"column":101}}}):s))+'" role="menuitem" aria-labelledby="search-setting-wrapper">\r\n  <span class="csui-settings-option-title">'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":2,"column":43},"end":{"line":2,"column":52}}}):s))+'</span>\r\n  <span class="icon icon-next-card"></span>\r\n</a>\r\n'}});return i.registerPartial("csui_controls_settings_impl_settings.dropdown",n),n}),csui.define("csui/controls/settings/impl/settings.dropdown.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette3","i18n!csui/controls/settings/impl/nls/lang","csui/controls/settings/selected.columns/selected.columns.view","csui/controls/settings/summary.description/summary.description.view","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/controls/settings/impl/settings.dropdown"],function(e,t,i,n,o,s,l,r,a){"use strict";var c=n.View.extend({"tagName":"li","template":a,"className":"binf-list-group-item","triggers":{"click a":{"event":"show:settings"},"keydown a":{"event":"show:settings:dropdown","preventDefault":!1}},"attributes":{"role":"presentation"},"constructor":function(e){e||(e={}),this.options=e,n.View.call(this,e)},"showColumnsSettings":function(e){var t,i,n=this.model&&this.model.get("display");n&&n.display_regions&&(t=n.display_regions.selected,i=n.display_regions.available),t&&t.where({"isNew":!0}).map(function(e){e.set({"isNew":!1},{"silent":!0})}),this.options.showSettings("selectedColumnsContainer",new s({"settingsDropDownView":this,"tableCollection":this.options.tableCollection,"collection":t,"availableColumnsCollection":i,"settings":this.model}))},"showSummaryOrDescription":function(e){var t,i,n=this.model&&this.model.get("display");n.summary_description&&n.summary_description.available&&(t=n.summary_description.available,i=n.summary_description.selected),this.options.originatingView.showSettings("summaryOrDescriptionContainer",new l({"settingsDropDownView":this,"selectedCollection":i,"availableCollection":t,"collection":t,"settings":this.model}))}});return n.CollectionView.extend({"constructor":function(){this.focusIndex=0,n.CollectionView.apply(this,arguments)},"className":"binf-list-group","tagName":"ul","attributes":{"role":"menu","id":"search-setting-wrapper","aria-label":"search settings"},"childView":c,"childViewEvents":{"show:settings:dropdown":"onShowSettingsDropdown","show:settings":"onShowSettings"},"childViewOptions":function(){return{"settingsView":this.options.settingsView}},"behaviors":{"TabableRegionBehavior":{"behaviorClass":r}},"currentlyFocusedElement":function(t){var i=this.$("*[tabindex]");return i.length&&i.prop("tabindex",0),e(t&&t.shiftKey?i[i.length-1]:i[0])},"onShowSettings":function(e,t){!this.options.searchResultsView.$el.find(".load-container.binf-hidden").length?(t.preventDefault(),t.stopPropagation()):this.options.settingsView.showSettings(e.model.get("id"),e.model.get("view"))},"onShowSettingsDropdown":function(t,i){var n=i.keyCode,o=this.$el.find("a[tabindex]"),s=!!this.options.searchResultsView.$el.find(".load-container.binf-hidden").length,l=this.$el.closest(".csui-search-settings");s?27===n||9===n&&i.target&&("summaryOrDescriptionContainer"===i.target.id&&!i.shiftKey||"selectedColumnsContainer"===i.target.id&&i.shiftKey)?(l.trigger("focus"),l.attr("aria-expanded","false"),this.options.settingsView.triggerMethod("close:menu",i)):13===n||32===n||39===n?this.onShowSettings(t,i):o.length&&(38!==n&&40!==n||(38===n?this.focusIndex>0&&--this.focusIndex:this.focusIndex<o.length-1&&++this.focusIndex,e(o[this.focusIndex]).trigger("focus"),i.stopPropagation(),i.preventDefault())):(i.stopPropagation(),i.preventDefault())}})}),csui.define("hbs!csui/controls/settings/impl/settings",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'<div class="selected-columns-container"></div>\r\n<div class="available-columns-container"></div>\r\n<div class="summary-description-container" role=\'dialog\' aria-label=\'summary/description\'></div>\r\n'},"3":function(e,t,i,n,o){return'<div id="'+e.escapeExpression(e.lambda(t,t))+'"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="settings-dropdown-container csui-settings-show"></div>\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"showDefaults"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":0},"end":{"line":6,"column":7}}}))?s:"")+(null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"regions"):t,{"name":"each","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":0},"end":{"line":9,"column":9}}}))?s:"")}});return i.registerPartial("csui_controls_settings_impl_settings",n),n}),csui.define("css!csui/controls/settings/impl/settings",[],function(){}),csui.define("csui/controls/settings/settings.view",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette3","i18n","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/settings/impl/settings.dropdown.view","csui/controls/settings/selected.columns/selected.columns.view","csui/controls/settings/summary.description/summary.description.view","i18n!csui/controls/settings/impl/nls/lang","hbs!csui/controls/settings/impl/settings","css!csui/controls/settings/impl/settings"],function(e,t,i,n,o,s,l,r,a,c,u,d){"use strict";return o.View.extend({"constructor":function(e){e||(e={}),i.defaults(e,{"showDefaults":!0}),this.plugins=i.each(e.options,function(e,t){e.region="#"+e.id}),o.View.call(this,e)},"className":"csui-settings-container","template":d,"templateContext":function(){return{"showDefaults":this.options.showDefaults,"regions":i.map(this.plugins,function(e){return e.region.substring(1)})}},"regions":function(){var e={"settingsDropDownContainer":this.options.settingsDropDownContainer||".settings-dropdown-container"};return this.options.showDefaults&&i.extend(e,{"selectedColumnsContainer":".selected-columns-container","availableColumnsContainer":".available-columns-container","summaryOrDescriptionContainer":".summary-description-container"}),i.each(this.plugins,function(t){e[t.id]=t.region}),e},"ui":function(){var e={"settingsDropDownContainer":".settings-dropdown-container"};return this.options.showDefaults&&i.extend(e,{"selectedColumnsContainer":".selected-columns-container","availableColumnsContainer":".available-columns-container","summaryOrDescriptionContainer":".summary-description-container"}),i.each(this.plugins,function(t){e[t.id]=t.region}),e},"behaviors":{"TabableRegionBehavior":{"behaviorClass":l}},"currentlyFocusedElement":function(e){var i=this.$("*[tabindex]");return i.length&&i.prop("tabindex",0),t(e&&e.shiftKey?i[i.length-1]:i[0])},"onRender":function(){var e=new n.Collection(this.options.options);if(this.options.showDefaults){var t,i,o=this.model&&this.model.get("display");this.prevModel=JSON.parse(JSON.stringify(o)),o&&o.display_regions&&(t=o.display_regions.selected,i=o.display_regions.available);var s,l;o&&o.summary_description&&o.summary_description.available&&(s=o.summary_description.available,l=o.summary_description.selected),t&&t.where({"isNew":!0}).map(function(e){e.set({"isNew":!1},{"silent":!0})}),e.add([{"id":"selectedColumnsContainer","label":u.columnSettingsTitle,"view":new a({"settingsView":this,"isTabularView":this.options.isTabularView,"tableCollection":this.options.tableCollection,"collection":t,"availableColumnsCollection":i,"settings":this.model,"searchResultsView":this.options.searchResultsView})},{"id":"summaryOrDescriptionContainer","label":u.summaryDescriptionTitle,"view":new c({"settingsView":this,"selectedCollection":l,"availableCollection":s,"collection":s,"settings":this.model,"searchResultsView":this.options.searchResultsView})}],{"at":0})}this.settingsDropDownView=new r({"settingsView":this,"model":this.model,"tableCollection":this.options.tableCollection,"collection":e,"searchResultsView":this.options.searchResultsView,"showSettings":this.showSettings.bind(this)}),this.showChildView("settingsDropDownContainer",this.settingsDropDownView),this.currentCard=this.ui.settingsDropDownContainer},"onShow":function(){var e=this;this.$el.css("height",this.currentCard.outerHeight()),setTimeout(function(){e.settingsDropDownView.$el.find(".binf-list-group-item a").length>0&&t(e.settingsDropDownView.$el.find(".binf-list-group-item a")[0]).trigger("focus")},0)},"showSettings":function(e,t){var i=!!this.options.searchResultsView.$el.find(".load-container.binf-hidden").length;!this.isCardChanging&&i&&(this.isCardChanging=!0,this.showChildView(e,t),this.animate(this.currentCard,this.ui[e]),this.currentCard=this.ui[e])},"animate":function(e,t){this.$el&&this.$el.css("height",t.outerHeight());var i=this;t.index()>e.index()?(t.one("transitionend",function(){delete i.isCardChanging,t.addClass("csui-settings-show").removeClass("transition-show"),t.find("[tabindex]:first").trigger("focus")}),t.addClass("transition-show")):(e.one("transitionend",function(){delete i.isCardChanging,e.removeClass("csui-settings-show transition-hide"),t.find("[tabindex]:first").trigger("focus")}),e.addClass("transition-hide"))}})}),csui.define("csui/controls/table/rows/description/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/rows/description/impl/nls/root/lang",{"suggestedTooltip":"View the full description in the properties page"}),csui.define("hbs!csui/controls/table/rows/description/impl/description",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-description-colunm">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"current_description"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":8},"end":{"line":7,"column":15}}}))?s:"")+"    </div>\r\n"},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="description '+e.escapeExpression((s=null!=(s=l(i,"truncate_fade_class")||(null!=t?l(t,"truncate_fade_class"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"truncate_fade_class","hash":{},"loc":{"start":{"line":4,"column":37},"end":{"line":4,"column":60}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"complete_description")||(null!=t?l(t,"complete_description"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"complete_description","hash":{},"loc":{"start":{"line":4,"column":74},"end":{"line":4,"column":98}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=l(i,"complete_description")||(null!=t?l(t,"complete_description"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"complete_description","hash":{},"loc":{"start":{"line":4,"column":107},"end":{"line":4,"column":131}}}):s))+'">\r\n                '+e.escapeExpression((s=null!=(s=l(i,"current_description")||(null!=t?l(t,"current_description"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"current_description","hash":{},"loc":{"start":{"line":5,"column":16},"end":{"line":5,"column":39}}}):s))+"\r\n            </span>\r\n"},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-summary-colunm">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"current_summary"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":8},"end":{"line":17,"column":15}}}))?s:"")+"    </div>\r\n"},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="summary '+e.escapeExpression((s=null!=(s=l(i,"truncate_fade_class")||(null!=t?l(t,"truncate_fade_class"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"truncate_fade_class","hash":{},"loc":{"start":{"line":14,"column":33},"end":{"line":14,"column":56}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"complete_summary")||(null!=t?l(t,"complete_summary"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"complete_summary","hash":{},"loc":{"start":{"line":14,"column":70},"end":{"line":14,"column":90}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=l(i,"complete_summary")||(null!=t?l(t,"complete_summary"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"complete_summary","hash":{},"loc":{"start":{"line":14,"column":99},"end":{"line":14,"column":119}}}):s))+'">\r\n                '+e.escapeExpression((s=null!=(s=l(i,"complete_summary")||(null!=t?l(t,"complete_summary"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"complete_summary","hash":{},"loc":{"start":{"line":15,"column":16},"end":{"line":15,"column":36}}}):s))+"\r\n            </span>\r\n"},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-summary-colunm">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"current_summary"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":23,"column":8},"end":{"line":37,"column":15}}}))?s:"")+"    </div>\r\n"},"8":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <span class="summary '+e.escapeExpression((l=null!=(l=r(i,"truncate_fade_class")||(null!=t?r(t,"truncate_fade_class"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"truncate_fade_class","hash":{},"loc":{"start":{"line":24,"column":29},"end":{"line":24,"column":52}}}):l))+'" title="'+e.escapeExpression((l=null!=(l=r(i,"complete_summary")||(null!=t?r(t,"complete_summary"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"complete_summary","hash":{},"loc":{"start":{"line":24,"column":61},"end":{"line":24,"column":81}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"search_summary"):t,{"name":"if","hash":{},"fn":e.program(9,o,0),"inverse":e.program(15,o,0),"loc":{"start":{"line":25,"column":12},"end":{"line":35,"column":19}}}))?s:"")+"        </span>\r\n"},"9":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"current_summary"):t,{"name":"each","hash":{},"fn":e.program(10,o,0),"inverse":e.noop,"loc":{"start":{"line":26,"column":12},"end":{"line":32,"column":21}}}))?s:""},"10":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"type"):t,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.program(13,o,0),"loc":{"start":{"line":27,"column":12},"end":{"line":31,"column":19}}}))?s:""},"11":function(e,t,i,n,o){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <span class="csui-summary-hh">'+e.escapeExpression(e.lambda(null!=t?s(t,"text"):t,t))+"</span>\r\n"},"13":function(e,t,i,n,o){return"            <span>"+e.escapeExpression(e.lambda(t,t))+"</span>\r\n"},"15":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"            "+e.escapeExpression((s=null!=(s=l(i,"current_summary")||(null!=t?l(t,"current_summary"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"current_summary","hash":{},"loc":{"start":{"line":34,"column":12},"end":{"line":34,"column":31}}}):s))+"\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"descriptionAvailable"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":9,"column":7}}}))?s:"")+"\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"summary_Available"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":11,"column":0},"end":{"line":19,"column":7}}}))?s:"")+"\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"summary_description_available"):t,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":21,"column":0},"end":{"line":39,"column":7}}}))?s:"")}});return i.registerPartial("csui_controls_table_rows_description_impl_description",n),n}),csui.define("css!csui/controls/table/rows/description/impl/description",[],function(){}),csui.define("csui/controls/table/rows/description/description.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","i18n!csui/controls/table/rows/description/impl/nls/lang","hbs!csui/controls/table/rows/description/impl/description","css!csui/controls/table/rows/description/impl/description"],function(e,t,i,n,o,s){return i.ItemView.extend({"className":function(){return this._collapsedHeightIsOneLine?"cs-description csui-description-short-lines-1":"cs-description"},"template":s,"templateHelpers":function(){var e=this.model.get("instructions")||this.model.get("description")||"",t=this.model.get("summary")||"";return this.exceededDescription=!1,this.options.tableView.options.parentView&&this.options.tableView.options.parentView.options.useAppContainer&&e&&e.toString().length>254&&(e+="...",this.exceededDescription=!0),{"complete_description":this.exceededDescription?o.suggestedTooltip:e,"current_description":e,"complete_summary":t,"current_summary":t,"descriptionAvailable":e}},"ui":{"description":".description","summary":".summary"},"constructor":function(e){i.ItemView.prototype.constructor.apply(this,arguments)}})}),csui.define("csui/controls/table/rows/description/search.description.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/controls/table/rows/description/description.view"],function(e,t,i,n,o){return o.extend({"templateHelpers":function(){var t=this.model.get("description"),i=this.model.get("summary"),n=this.options&&this.options.tableView&&this.options.tableView.selectedSettings,s=this.options&&this.options.tableView&&this.options.tableView.options.descriptionRowViewOptions.tableRowSummaryAvailable||!1,l=!1;switch(n){case"SD":l=!0;break;case"SO":l=!0,t=void 0;break;case"SP":l=!0,i&&(t=void 0);break;case"DP":l=!0,t&&(i=void 0);break;case"DO":i=void 0;break;case"NONE":default:t=i=void 0}return e.extend(o.prototype.templateHelpers.apply(this),{"complete_description":t,"current_description":t,"complete_summary":this.model.get("stringifiedSummary")?this.model.get("stringifiedSummary"):i,"current_summary":i,"search_description":!0,"search_summary":!0,"summary_description_available":l&&i&&!s,"descriptionAvailable":t,"summary_Available":s&&l&&i})}})}),csui.define("csui/controls/fileupload/impl/addversion.controller",["csui/lib/underscore","csui/lib/jquery","i18n!csui/controls/fileupload/impl/nls/lang","csui/controls/fileupload/impl/upload.controller","csui/models/fileupload","csui/controls/globalmessage/globalmessage","csui/models/fileuploads","csui/utils/base","csui/utils/url","csui/utils/types/date","csui/utils/types/member","csui/lib/moment","csui/models/version","csui/utils/commandhelper","csui/utils/contexts/factories/usernodepermission","csui/utils/contexts/factories/connector","csui/models/node/node.model"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g){"use strict";function b(e){this.view=e.view,this.selectedNode=e.selectedNode,this.status=e.status||{},this.context=this.status.context||this.view.context,this.status.connector=this.context.getObject(f),this.uploadController=new n({"container":this.view.container,"context":this.context,"originatingView":this.view})}return e.extend(b.prototype,{"uploadFile":function(i,n){var o=t.Deferred();return this.status.actionType=n.actionType,this.status.hideWarningAlert=n.hideWarningAlert,this.currentLoggedInUserId=this.context.getModel("user").id,this.currentModel=this.selectedNode,this._ensureNodeAdvanceInfo().then(e.bind(function(){!this.currentModel.get("advanced_versioning")&&this.currentModel.get("reserved")?this._doUpload(i).done(o.resolve).fail(o.reject):this._getLatestVersionAndUploadFile(i,this.status).done(o.resolve).fail(o.reject)},this)),o.promise()},"_doUpload":function(n){function a(e,t){var i=[];(e.actions.findRecursively("download")||e.actions.findRecursively("Download"))&&i.push({"signature":"versions_download"},{"signature":"versions_open"}),(e.actions.findRecursively("delete")||e.actions.findRecursively("Delete"))&&i.push({"signature":"versions_delete"}),(e.actions.findRecursively("properties")||e.actions.findRecursively("Properties"))&&i.push({"signature":"versions_properties"}),t.actions.reset(i)}var c=t.Deferred();this._blockActions();var u=this.selectedNode,d=new o({"file":n},{"node":u});n.add_major_version&&d.set("add_major_version",!0);var h=new l([d]),p=this.view&&this.view.largeFileSettingsModel&&this.view.largeFileSettingsModel.get("largeFileSettings"),m=p&&p.min_size,f=n.size||d.get("file").size,g=this;if(f>m){var b={"size":f,"uploadKey":"","state":"pending","retryCount":0,"fileChunks":{"slicedFiles":[],"total":0}};d.set("largeFile",b)}return this.uploadController.scheduleFileForUpload(d),s.showProgressPanel(h,{"actionType":this.status.actionType}),d.promise().then(function(e){if(u.versions||u.attributes&&u.attributes.versions)return e.version.fetch().then(function(t){return e.version})}).then(function(e){if(u.versions||u.attributes&&u.attributes.versions){var t=e.get("file_size"),i=r.formatFileSize(t);e.set("file_size_formatted",i),e.isLocallyCreated=!0,a(u,e),!!u.versions&&u.versions.add(e,{"at":0}),Array.isArray(u.get("versions"))&&!!u.attributes&&!!u.attributes.versions&&u.attributes.versions.push(e.attributes)}}).then(function(){return!0}).then(function(){return!0}).done(function(){s.hideFileUploadProgress(),g.view&&g.view.trigger("new:version:added"),s.showMessage("success",i.MessageVersionAdded),c.resolve()}).fail(function(e){c.reject(e)}).always(e.bind(this._unblockActions,this)),c.promise()},"_checkAdvancedVersionAndUpload":function(e,i,n){var o=this,s=this.currentModel,l=t.Deferred();return o._getNodePermission().done(function(t){var r=t.results.data.permissions.permissions;s.get("advanced_versioning")&&-1!==r.indexOf("add_major_version")?o._promoteToSelectVersion(e,i,n).done(function(){o._doUpload(e).done(l.resolve).fail(l.reject)}):o._doUpload(e).done(l.resolve).fail(l.reject)}).fail(function(e){l.reject(e)}),l.promise()},"_promoteToSelectVersion":function(e,n,o){var s=this,l=this.currentModel,r=t.Deferred();return csui.require(["csui/controls/version.control.dialog/version.control.dialog.view","csui/controls/version.control.dialog/add.version.control.view"],function(t,n){(function(){var s={"latestVersion":o,"fileName":e.name,"reserved":l.get("reserved")},r=new n(s),a={"_view":r,"standardHeader":!1,"title":i.warnTitle,"dialogClassName":"csui-add-version-control","actionBtnLabel":i.AddButtonLabel,"cancelBtnLabel":i.cancelButtonLabel};return new t(a).show()})().done(function(t){t.promoteToMajor&&(e.add_major_version=!0),t.reserved&&p.updateNode(l,{"reserved_user_id":null}),r.resolve()}).fail(function(){r.reject()})},s),r.promise()},"_ensureNodeAdvanceInfo":function(){var e=t.Deferred(),i=this.currentModel;if(void 0===i.get("advanced_versioning")){var n=new g({"id":i.get("id")},{"connector":i.connector});n.fetch({"silent":!0}).done(function(){i.set("advanced_versioning",n.get("advanced_versioning"),{"silent":!0}),e.resolve()}).fail(function(){e.reject()})}else e.resolve();return e.promise()},"dialogClassName":function(){return"addversion-fornonreserve"},"_showWarnDialog":function(e,n){var o=this,s=t.Deferred();return csui.require(["csui/controls/version.control.dialog/version.control.dialog.view"],function(e){new e({"title":i.warnTitle,"bodyMessage":o._getBodyMessage(n),"dialogClassName":o.dialogClassName(),"actionBtnLabel":i.AddButtonLabel,"cancelBtnLabel":i.cancelButtonLabel}).show().done(s.resolve).fail(s.reject)},o),s.promise()},"_getBodyMessage":function(t){var n=d(),o=c.deserializeDate(t.get("create_date")),s=n.diff(o,"days"),l=u.formatMemberName(t.get("owner_id_expand")||t.get("owner_id"));return o=s>=4?c.formatExactDate(o):s>=2?c.formatFriendlyDateTimeNow(o)+" "+c.formatExactTime(o):c.formatDateTime(o),e.str.sformat(i.warnMessage,l,o)},"_getLatestVersionAndUploadFile":function(i,n){var o=this,s=t.Deferred();return o._getLatestVersion(n).done(function(t){o.currentLoggedInUserId===t.get("owner_id")?o._checkAdvancedVersionAndUpload(i,n,t).done(s.resolve).fail(s.reject):o.currentModel.get("advanced_versioning")||o.status.hideWarningAlert?o._checkAdvancedVersionAndUpload(i,o.status,t).done(s.resolve).fail(s.reject):o._showWarnDialog(n,t).done(e.bind(function(){o._checkAdvancedVersionAndUpload(i,o.status,t).done(s.resolve).fail(s.reject)}),o)}),s.promise()},"_getLatestVersion":function(i){var n=t.Deferred(),o=i.connector,s=this.currentModel;return new h({"id":s.get("id"),"version_number":0,"expand":encodeURIComponent("versions{owner_id}")},{"connector":o}).fetch().then(e.bind(function(e,t,i){n.resolve(new h(e,{"parse":!0}))},function(e){n.reject(e)})),n.promise()},"_getNodePermission":function(){return this.context.getObject(m,{"node":this.currentModel}).fetch()},"_blockActions":function(){this.view&&this.view.blockActions&&this.view.blockActions()},"_unblockActions":function(){this.view&&this.view.unblockActions&&this.view.unblockActions()}}),b}),csui.define("csui/controls/pagination/nodespagination.view",["nuc/lib/underscore","csui/behaviors/keyboard.navigation/tabable.region.behavior","smart/controls/pagination/nodespagination.view"],function(e,t,i){return i.extend({"behaviors":{"TabableRegion":{"behaviorClass":t}},"constructor":function(t){t.collection&&(this.listenTo(t.collection,"collection:set:limit",e.bind(this.collectionReset,this)),t.collection.node&&this.listenTo(t.collection.node,"change:id",this.onChangeId)),i.prototype.constructor.call(this,t)},"collectionReset":function(e){this.collection.setLimit(e.skipItems,e.pageSize,e.autoFetch,e.paginationView)},"onChangeId":function(){this.trigger("reset:attributes"),this.options.setPageInfoFromViewState?this.options.setPageInfoFromViewState():this.resetCollection(0,this.pageSize,!1)}})}),csui.define("hbs!csui/controls/tableactionbar/impl/tableactionbar",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<ul class="tile-nav binf-nav binf-nav-pills" role="menu"></ul>\r\n'}});return i.registerPartial("csui_controls_tableactionbar_impl_tableactionbar",n),n}),csui.define("hbs!csui/controls/tableactionbar/impl/lazy.loading.template",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<li role="menuitem" class="csui-loading-parent-wrapper binf-disabled">\r\n  <span class="csui-loading-dots-wrapper">\r\n    <span class="csui-loading-dot"></span>\r\n    <span class="csui-loading-dot"></span>\r\n    <span class="csui-loading-dot"></span>\r\n  </span>\r\n</li>'}});return i.registerPartial("csui_controls_tableactionbar_impl_lazy.loading.template",n),n}),csui.define("css!csui/controls/tableactionbar/impl/tableactionbar",[],function(){}),
csui.define("csui/controls/tableactionbar/tableactionbar.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","i18n","csui/controls/toolbar/toolitem.view","csui/models/nodes","csui/controls/toolbar/toolitems.filtered.model","csui/controls/toolbar/toolbar.state.behavior","csui/controls/toolbar/flyout.toolitem.view","csui/utils/commandhelper","csui/utils/commands","csui/behaviors/dropdown.menu/dropdown.menu.behavior","csui/utils/high.contrast/detector!","hbs!csui/controls/tableactionbar/impl/tableactionbar","hbs!csui/controls/tableactionbar/impl/lazy.loading.template","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/icons.v2","csui/controls/toolbar/toolitem.model","css!csui/controls/tableactionbar/impl/tableactionbar"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v,w,y,C){"use strict";s=s(e.id);var _=o.CompositeView.extend({"className":"csui-table-actionbar","template":b,"getChildView":function(e){return e.get("flyout")?h:a},"childViewOptions":function(e){return{"model":e,"command":this.commands&&this.commands.findWhere({"signature":e.get("signature")}),"useIconsForDarkBackground":this._useIconsForDarkBackground}},"childViewContainer":"ul","behaviors":{"ToolbarState":{"behaviorClass":d},"DropdownMenuBehavior":{"behaviorClass":f,"dropdownSelector":"li.binf-dropdown","refilterOnShow":!1}},"constructor":function(e){this.container=e.container,this.containerCollection=e.containerCollection,this.originatingView=e.originatingView,this.commandExecutionOptions=e.commandExecutionOptions,this.minimalItemsRequiredForDisplay=1,this._useIconsForDarkBackground=e.useIconsForDarkBackground&&2!==g||1===g,this.notOccupiedSpace=void 0===e.notOccupiedSpace?150:e.notOccupiedSpace,e.status||(e.status={});var n=t.defaults(e.status,{"nodes":new c([e.model]),"container":this.container,"context":this.originatingView.context});this.commands=e.commands||m,e.collection=new u(e.collection,{"status":n,"commands":this.commands,"delayedActions":e.delayedActions,"mask":e.toolItemsMask}),this.renderLazyActions=!e.hasOwnProperty("lazyActions")||!!e.lazyActions,o.CompositeView.prototype.constructor.apply(this,arguments),this.model.nonPromotedActionCommands&&this.model.nonPromotedActionCommands.length&&0===e.collection.length&&this.actionState.set("state","loading"),e.el&&i(e.el).addClass(t.result(this,"className"))},"isEmpty":function(e){return 0===this.collection.length},"onBeforeDestroy":function(){this.originatingView=null,this.collection.stopListening()},"onBeforeRenderCollection":function(){this.destroyChildren(),this.$childViewContainer&&this.$childViewContainer.empty()},"onRenderCollection":function(){this._adjusted=!1,l.isVisibleInWindowViewport(this.$el)&&this._layoutButtons()},"onRender":function(){this.options.inlineBarStyle&&this.$el.addClass(this.options.inlineBarStyle),this._isBlocked&&this.$el.addClass("binf-disabled")},"onShow":function(){this._layoutButtons()},"toggleDropdownMenu":function(e){var t=this.$el.find("li.binf-dropdown"),i=this.$el.find("li.binf-dropdown > a.binf-dropdown-toggle");e||!t.hasClass("binf-open")?(i.trigger("binf.dropdown.before.show"),t.addClass("binf-open"),i.attr("aria-expanded","true"),i.trigger("binf.dropdown.after.show")):(t.removeClass("binf-open"),i.attr("aria-expanded","false"))},"closeDropdownMenuIfOpen":function(){var e=this.$el.find("li.binf-dropdown");return!!e.hasClass("binf-open")&&(e.removeClass("binf-open"),this.$el.find("li.binf-dropdown > a.binf-dropdown-toggle").attr("aria-expanded","false"),!0)},"_layoutButtons":function(){var e=this.options.delayedActions;if(!e||!e.fetching&&!e.error){if(this._adjusted)return!0;this._adjusting=!0;var i=this.model,n=!!i&&!!i.get("csuiLazyActionsRetrieved"),o=!!i.isLocallyCreated,s=t.sortBy(this.children.toArray(),"cid");s=s.filter(function(e){return e instanceof a||e instanceof h}),this.actionbarOptions={"toolItemCounter":0,"cntItemsFit":0,"index":0,"dropDownMenuEl":void 0,"separatorView":void 0},this.enabledNonPomotedCommands=!1!==i.collection.enableNonPromotedCommands||i.collection.enableNonPromotedCommands;var l=this.options.maxItemsShown;if(s.length>0){var r=this.$el.parent();if(r=r.offsetParent(),r.length>0){var c=r[0].clientWidth-this.notOccupiedSpace;if(c<0)l=0;else{if(this.$el.find(">ul").length>0){var u=_.estimateIconWidth(13);l=Math.round(c/u),l>s.length&&(l=s.length)}}}if(l>this.options.maxItemsShown&&(l=this.options.maxItemsShown),l<this.minimalItemsRequiredForDisplay)return void this.destroy();t.each(s,t.bind(function(e,t){this.actionbarOptions.index=t,this._wrapToolItemView(e,l)},this)),i&&!n&&i.nonPromotedActionCommands&&this.enabledNonPomotedCommands&&this.renderLazyActions&&i.nonPromotedActionCommands.length&&!o?this.$childViewContainer.find(".binf-dropdown").length?this.$childViewContainer.find(".binf-dropdown ul").first().append(v):(this.actionbarOptions.toolItemCounter===l&&this.$childViewContainer.find("li:last").length>0&&this.$childViewContainer.find("li:last").addClass("csui-actionbar-hide-child"),this.$childViewContainer.append(v),this._renderLazyActions(l).always(t.bind(function(){this._checkInlineActionBarShouldAlive()},this))):this._checkInlineActionBarShouldAlive()}else i&&!n&&i.nonPromotedActionCommands&&i.nonPromotedActionCommands.length&&!o&&this.enabledNonPomotedCommands&&this.renderLazyActions?this._renderLazyActions(l).always(t.bind(function(){this._checkInlineActionBarShouldAlive()},this)):this._checkInlineActionBarShouldAlive();this._adjusting=!1,this._adjusted=!0}},"_checkInlineActionBarShouldAlive":function(){this.actionbarOptions.cntItemsFit<this.minimalItemsRequiredForDisplay&&1!==this.options.maxItemsShown&&this.destroy()},"_wrapToolItemView":function(e,i){if(e instanceof a||e instanceof h){var n=e.model.isSeparator();n||this.actionbarOptions.toolItemCounter++,this.actionbarOptions.dropDownMenuEl?n&&this.actionbarOptions.index+1===this.children.length||(e.renderTextOnly(),e.$el.attr("role","menuitem"),this.actionbarOptions.dropDownMenuEl.append(e.$el),e.triggerMethod("dom:refresh"),this.usePerfectScrollbar()&&this.actionbarOptions.dropDownMenuEl.perfectScrollbar("update"),this.actionbarOptions.prevToolItemView=e):n?this.actionbarOptions.toolItemCounter>=i?this.actionbarOptions.separatorView=e:e.$el.addClass("binf-hidden"):(this.actionbarOptions.toolItemCounter>i?this.actionbarOptions.prevToolItemView?(this.actionbarOptions.prevToolItemView.$el.attr("role","menuitem"),this.actionbarOptions.dropDownMenuEl=this._wrapWithDropDown(this.actionbarOptions.prevToolItemView,e,this.actionbarOptions.separatorView)):this.actionbarOptions.dropDownMenuEl=this._wrapWithDropDown(e.$el,e):(this.$el.find(".binf-dropdown-submenu").off("binf.dropdown.submenu.after.show").on("binf.dropdown.submenu.after.show",t.bind(function(e){var t=this.$el.find(".binf-dropdown-submenu .binf-dropdown-menu");if(t.length){var n=this.$el.find(e.target),o=this.model,s=!!o.get("csuiLazyActionsRetrieved"),r=!!o.isLocallyCreated;if(!this.model.get("csuiLazyActionsRetrieved")){var a=this.$el.find(".csui-loading-parent-wrapper");a.length&&a.remove(),o&&!s&&o.nonPromotedActionCommands&&o.nonPromotedActionCommands.length&&!r&&this.enabledNonPomotedCommands&&this.renderLazyActions&&(t.first().append(v),this._renderLazyActions(i).done(function(){l.alignDropDownSubMenus({"targetEl":n,"dropdownMenu":n.children().last()})}))}l.alignDropDownSubMenus({"targetEl":n,"dropdownMenu":n.children().last()})}},this)),this.actionbarOptions.cntItemsFit++),this.actionbarOptions.prevToolItemView=e)}},"_renderLazyActions":function(e){var n=this,o=this.model,s=0,l=t.sortBy(n.children.toArray()),r=i.Deferred();return!!o&&o.setEnabledLazyActionCommands(!0).done(t.bind(function(){var i=new u(n.options.collection.unfilteredModels,{"status":n.options.status,"commands":n.commands,"delayedActions":n.model.delayedActions,"mask":n.options.toolItemsMask,"addGroupSeparators":n.options.addGroupSeparators,"suppressGroupSeparators":n.options.suppressGroupSeparators}),o=n.$childViewContainer.find(".csui-loading-parent-wrapper");o.length?o.animate("width: 0",300,function(){n.$childViewContainer.find(".csui-actionbar-hide-child").removeClass("csui-actionbar-hide-child"),o.addClass("binf-hidden"),!0===n.isDestroyed||n._isDestroyed||(t.each(i.models,function(t){var i=l[s],o=t.get("name");if(i&&i.model.get("name")===o)t.get("flyout")&&t.toolItems.length!==i.model.toolItems.length&&i.collection.reset(t.toolItems.models),s++;else if(n.actionbarOptions&&!t.isSeparator()){n.options.addGroupSeparators&&n.actionbarOptions.prevToolItemView&&t.get("group")!==n.actionbarOptions.prevToolItemView.model.get("group")&&n._wrapToolItemView(n.addChild(C.createSeparator(),a),e),n.actionbarOptions.index++;var r=t.get("flyout")?h:a,c=n.addChild(t,r,n.actionbarOptions.index);n._wrapToolItemView(c,e)}}),r.resolve())}):(!0===n.isDestroyed||n._isDestroyed?n.children=void 0:n.collection.refilter(),r.resolve())}),n).fail(function(){n.$childViewContainer.find(".csui-loading-parent-wrapper").remove(),n.$childViewContainer.find(".csui-actionbar-hide-child").removeClass("csui-actionbar-hide-child"),r.reject()}),r.promise()},"_wrapWithDropDown":function(e,n,o,s){e.renderTextOnly(),e.$el.wrap('<li class="binf-dropdown"><ul class="binf-dropdown-menu" role="menu"></ul></li>');var r=this._makeDropDown();this.$el.find("li.binf-dropdown").prepend(r);var a=this.$el.find("li.binf-dropdown > a.binf-dropdown-toggle");a.binf_dropdown(),a.on("binf.dropdown.before.show",t.bind(function(){i(this.nextElementSibling).addClass("binf-invisible");var e=this.model,t=!!e.get("csuiLazyActionsRetrieved"),n=!!e.isLocallyCreated;e&&!t&&e.nonPromotedActionCommands&&e.nonPromotedActionCommands.length&&!n&&this.enabledNonPomotedCommands&&this.renderLazyActions&&this._renderLazyActions(s),l.alignDropDownMenu({"targetEl":a})},this));var c=n._parent;c.listenTo(c,"destroy",function(){i(".csui-zero-zindex").removeClass("csui-zero-zindex")});var u=this;a.on("binf.dropdown.after.show",function(){var e=i(this).closest(".csui-perfect-scrolling").length>0?".csui-perfect-scrolling":".csui-normal-scrolling",t=(i(this).closest(e),i(this).nextAll(".binf-dropdown-menu")),n={};if(t.is(".binf-dropdown-align-left-top, .binf-dropdown-align-right-top")){if(n.maxHeight=Math.floor(window.innerHeight-(window.innerHeight-t.closest(".binf-dropdown")[0].getBoundingClientRect().top))-3,u.model.get("csuiDelayedActionsRetrieved")&&u.renderLazyActions&&!u.model.get("csuiLazyActionsRetrieved")&&u.model.nonPromotedActionCommands&&u.model.nonPromotedActionCommands.length&&u.enabledNonPomotedCommands){var o=t.closest(".binf-dropdown"),s=i(o).find(".csui-loading-parent-wrapper");s.length&&s.remove(),o.addClass("csui-actionbar-hide-child"),t.closest(".csui-table-actionbar .binf-nav").append(v)}t.closest(".cs-perspective-panel").length&&i("#breadcrumb-wrap , .csui-search-tool-container, .csui-navbar.binf-navbar.binf-navbar-default").addClass("csui-zero-zindex")}else n.maxHeight=Math.floor(window.innerHeight-t.closest(".binf-dropdown")[0].getBoundingClientRect().top)-t.closest(".binf-dropdown").height()-3,t.closest(".cs-perspective-panel").length&&i("#breadcrumb-wrap , .csui-search-tool-container, .csui-navbar.binf-navbar.binf-navbar-default").removeClass("csui-zero-zindex");t.css(n);var l;u.usePerfectScrollbar()?(t.addClass("csui-perfect-scrolling"),t.perfectScrollbar({"suppressScrollX":!0,"includePadding":!0}),l=t.closest(".binf-dropdown").closest(".csui-perfect-scrolling.ps-container")):l=t.closest(".binf-dropdown").scrollParent(),setTimeout(function(){l.on("scroll.csui.inline.actions",function(e){!t.is(":hidden")&&t.binf_dropdown("toggle"),i(e.target).off("scroll.csui.inline.actions")})})});var d=this.$el.find("li.binf-dropdown>ul.binf-dropdown-menu");return o&&d.append(o.$el),n.renderTextOnly(),n.$el.attr("role","menuitem"),d.append(n.$el),n.triggerMethod("dom:refresh"),this.triggerMethod("refresh:dropdown"),d},"_makeDropDown":function(){var e='<a role="button" href="#" tabindex="-1" class="binf-dropdown-toggle" data-binf-toggle="dropdown" aria-expanded="false"';return this.options.dropDownText?e+=' title="'+this.options.dropDownText+'" aria-label="'+this.options.dropDownText+'">':e+=">",this.options.dropDownIconName?e+=y.getIconByNameWithOptions({"iconName":this.options.dropDownIconName,"theme":this._useIconsForDarkBackground?"dark":"","states":!0}):this.options.dropDownIcon?e+='<span class="'+this.options.dropDownIcon+'"></span>':this.options.dropDownText&&(e+=this.options.dropDownText),e+="</a>"},"_setBlocked":function(e,t){var i=this;this._blockedTimer=setTimeout(function(){!1===i._isBlocked&&i.$el.removeClass("binf-disabled"),i._blockedTimer=void 0},500),this._isBlocked=!0,e.get("selfBlockOnly")?t.$el.find("a").addClass("binf-disabled"):this.$el.addClass("binf-disabled")},"_setUnblocked":function(e,t){this._isBlocked=!1,this._blockedTimer||(e.get("selfBlockOnly")?t.$el.find("a").removeClass("binf-disabled"):this.$el.removeClass("binf-disabled"))},"onChildviewToolitemAction":function(e,i){var o=this,l=i.toolItem,r=l.get("signature"),a=this.commands.get(r),u=t.defaults(this.options.status,{"nodes":new c([this.model]),"container":this.container,"originatingView":this.originatingView,"context":this.originatingView.context});u.collection=this.containerCollection,u=t.defaults({"toolItem":l,"data":l.get("commandData")||{}},u);var d={"status":u,"commandSignature":r};if(!1===l.get("execute")||!a.execute)return d.execute=!1,d.toolItem=l,this.trigger("before:execute:command",d),this.trigger("click:toolitem:action",d),this.trigger("after:execute:command",d);this.trigger("before:execute:command",d),this._setBlocked(a,e),n.trigger("closeToggleAction");var h;try{if(!a)throw new Error('Command "'+r+'" not found.');h=a.execute(u,this.commandExecutionOptions)}catch(t){return o._setUnblocked(a,e),s.warn('Executing the command "{0}" failed.\n{1}',a.get("signature"),t.message)&&console.warn(s.last),d.error=t,this.trigger("after:execute:command",d)}if(!h)return o._setUnblocked(a,e),this.trigger("after:execute:command",d);p.handleExecutionResults(h,{"command":a,"suppressSuccessMessage":u.suppressSuccessMessage,"suppressFailMessage":u.suppressFailMessage,"customError":this.options.customError}).done(function(e){if(a.allowCollectionRefetch&&o.options.originatingView.collection.totalCount>=o.options.originatingView.collection.topCount){var t=o.options.originatingView.collection;0!==t.skipCount&&t.totalCount===t.skipCount&&t.setLimit(t.skipCount-t.topCount,t.topCount,!1),o.options.originatingView.collection.fetch()}}).always(function(){o._setUnblocked(a,e),o.trigger("after:execute:command",d)})},"usePerfectScrollbar":function(){return w.usePerfectScrollbar()}},{"estimateWidthForToolbarItems":function(e,t){var i=.1875*t,n=i,o=(4*t-36)/2,s=o;return o+i+e*this.estimateIconWidth(t)+2*(e-1)+n+s},"estimateIconWidth":function(e){return 2*e+4+.1*e}});return _}),csui.define("csui/controls/table/table.columns",["csui/lib/backbone"],function(e){var t=e.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),i=e.Collection.extend({"model":t,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new i(this.map(function(e){return e.attributes}))}});return new i([{"key":"type","sequence":2,"titleIconInHeader":"mime_type","permanentColumn":!0},{"key":"name","sequence":3,"permanentColumn":!0,"isNaming":!0},{"key":"reserved","sequence":4,"title":"State","noTitleInHeader":!0},{"key":"wnd_comments","sequence":900,"noTitleInHeader":!0,"permanentColumn":!0},{"key":"favorite","sequence":910,"noTitleInHeader":!0,"permanentColumn":!0}])}),csui.define("hbs!csui/controls/table.list/impl/table.list.row",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-table-cell csui-table-cell-'+e.escapeExpression(e.lambda(null!=t?s(t,"name"):t,t))+" "+e.escapeExpression(e.lambda(null!=t?s(t,"class"):t,t))+'" role="cell"></div>\r\n'},"3":function(e,t,i,n,o){return'  <div class="csui-table-extra-cols csui-column-wrapped" role="cell"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"columns"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":3,"column":9}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"hasWrappedColumns"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":0},"end":{"line":6,"column":7}}}))?s:"")}});return i.registerPartial("csui_controls_table.list_impl_table.list.row",n),n}),csui.define("hbs!csui/controls/table.list/impl/table.list.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"noTitleInHeader"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":2,"column":2},"end":{"line":13,"column":9}}}))?s:""},"2":function(e,t,i,n,o){return'    <div class="csui-table-header-cell" role="columnheader"></div>\r\n'},"4":function(e,t,i,n,o){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-table-header-cell '+e.escapeExpression(e.lambda(null!=t?s(t,"className"):t,t))+'" title="'+e.escapeExpression(e.lambda(null!=t?s(t,"title"):t,t))+'" tabindex="-1"\r\n         data-cstabindex="-1" role="columnheader">\r\n      <div class="csui-table-header-cell-container csui-fadeout">\r\n        <span>\r\n          '+e.escapeExpression(e.lambda(null!=t?s(t,"title"):t,t))+"\r\n        </span>\r\n      </div>\r\n    </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"columns"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":14,"column":9}}}))?s:"")+"\r\n\r\n"}});return i.registerPartial("csui_controls_table.list_impl_table.list.header",n),n}),csui.define("hbs!csui/controls/table.list/impl/table.list",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-table-list-header" role="rowgroup"></div>\r\n<div class="csui-table-list-body"></div>'}});return i.registerPartial("csui_controls_table.list_impl_table.list",n),n}),csui.define("hbs!csui/controls/table.list/impl/empty.table",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((s=null!=(s=l(i,"message")||(null!=t?l(t,"message"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"message","hash":{},"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":11}}}):s))}});return i.registerPartial("csui_controls_table.list_impl_empty.table",n),n}),csui.define("csui/controls/table.list/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table.list/impl/nls/root/lang",{"addTitle":"Add"}),csui.define("css!csui/controls/table.list/impl/table.list",[],function(){}),csui.define("csui/controls/table.list/table.list.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/utils/commands","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/table/cells/cell.factory","csui/controls/progressblocker/blocker","csui/controls/globalmessage/globalmessage","csui/controls/tableactionbar/tableactionbar.view","csui/controls/table/rows/metadata/metadatarow.view","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","hbs!csui/controls/table.list/impl/table.list.row","hbs!csui/controls/table.list/impl/table.list.header","hbs!csui/controls/table.list/impl/table.list","hbs!csui/controls/table.list/impl/empty.table","i18n!csui/controls/table.list/impl/nls/lang","css!csui/controls/table.list/impl/table.list","csui/lib/jquery.mousehover"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v){"use strict";var w=n.ItemView.extend({"className":"csui-table-empty","template":b,"constructor":function(e){n.ItemView.prototype.constructor.apply(this,arguments)},"templateHelpers":function(){return{"message":this.options.emptyTableText}}}),y=n.LayoutView.extend({"className":function(){var e="csui-table-row";return this.model.get("isAddNew")&&(e+=" active-row"),e},"attributes":function(){return{"role":"row"}},"tagName":"div","template":m,"events":{"focusin .csui-table-cell":"onFocusInTableCell","blur .csui-table-cell":"onFocusOutTableCell"},"templateHelpers":function(){return{"columns":this.options.columns,"hasWrappedColumns":this.options.wrappedColumns&&this.options.wrappedColumns.length>0}},"constructor":function(e){e||(e={}),n.LayoutView.prototype.constructor.call(this,e)},"initialize":function(){var t=this;this.options.columns&&e.each(this.options.columns,function(e){if(e.CellView){var i=e.name;t.addRegion(i,".csui-table-cell-"+i)}},this),this.options.wrappedColumns&&this.options.wrappedColumns.length>0&&t.addRegion("csui-column-wrapped",".csui-column-wrapped")},"onRender":function(){var t=this;if(this.options.columns&&e.each(this.options.columns,function(e,i){if(e.CellView){var n=e.name,o=new e.CellView({"tagName":"DIV","nodeModel":this.options.nodeModel,"model":t.model,"context":t.options.context,"applyTo":t.options.applyTo,"column":e,"authUser":t.options.authUser,"hasEditPermissionAction":t.options.userHasEditPermissions,"updateModelSilent":!0,"originatingView":t.options.originatingView});t[n].show(o),t.listenTo(o,"clicked:cell",function(e){t.trigger("clicked:cell",{"cellView":o,"rowIndex":t._index,"colIndex":i,"model":t.model})})}},this),this.options.wrappedColumns&&this.options.wrappedColumns.length>0){var i=new d({"context":this.options.context,"model":this.model,"columns":this.options.wrappedColumns});this["csui-column-wrapped"].show(i)}this.$el.hasClass("csui-changeowner-permission")&&(this.$el.removeClass("csui-changeowner-permission"),this.$el.find(".member-info").removeClass("binf-hidden")),!o.isHybrid()&&this.options.showInlineToolbar&&this.$el&&this._subscribeEventHandlers(),o.isHybrid()&&this.options.showInlineToolbar&&this._showInlineRowActions()},"_showInlineRowActions":function(){var t=this.$el.find(".csui-row-inlinetoolbar").removeClass("binf-hidden");null!==this.model.get("permissions")&&this.options.userHasEditPermissions||this.$el.find(".csui-row-inlinetoolbar").addClass("binf-hidden"),0!==t.length&&void 0===this.inlineRowToolbarView&&(this.inlineRowToolbarView=new u(e.extend({"context":this.options.context,"commands":s,"collection":this.options.toolbarItems.inlineToolbar,"toolItemsMask":this.options.toolbarItemsMasks.toolbars.inlineToolbar,"originatingView":this.options.originatingView,"model":this.model,"applyTo":this.options.applyTo,"notOccupiedSpace":0,"status":{"model":this.model,"targetView":this,"connector":this.options.connector,"applyTo":this.options.applyTo,"userHasEditPermissions":this.options.userHasEditPermissions,"originatingView":this.options.originatingView}},this.options.toolbarItems.inlineToolbar.options,{"maxItemsShown":1})),this.listenTo(this.inlineRowToolbarView,"before:execute:command",function(e){e&&e.status&&e.status.targetView&&e.status.targetView.$el&&e.status.targetView.$el.addClass("active-row"),this.trigger("before:execute:action",e)}),this.listenTo(this.inlineRowToolbarView,"after:execute:command",function(e){e&&e.status&&e.status.targetView&&e.status.targetView.$el&&e.status.targetView.$el.removeClass("active-row"),this.trigger("after:execute:action",e)}),this.options.originatingView&&(this.listenTo(this.options.originatingView,"block:view:actions",function(){this.trigger("before:execute:action")}),this.listenTo(this.options.originatingView,"unblock:view:actions",function(){this.trigger("after:execute:action")})),this.inlineRowToolbarView.render(),t.append(this.inlineRowToolbarView.$el),this.inlineRowToolbarView.triggerMethod("show"))},"_destroyInlineRowActionBar":function(){this.inlineRowToolbarView&&(this.inlineRowToolbarView.destroy(),this.inlineRowToolbarView=void 0,this.$el.find("active-row")&&this.$el.removeClass("active-row"))},"onBeforeRender":function(){!o.isHybrid()&&this.options.showInlineToolbar&&this._unsubscribeEventHandlers()},"onBeforeDestroy":function(){this.options.showInlineToolbar&&(o.isHybrid()?this._destroyInlineRowActionBar():this._unsubscribeEventHandlers())},"_subscribeEventHandlers":function(){this.$el&&this.$el.mousehover(this.showInlineActions.bind(this),this.hideInlineActions.bind(this),{"namespace":this.cid})},"_unsubscribeEventHandlers":function(){this._isRendered&&this.$el.mousehover("off",{"namespace":this.cid})},"showInlineActions":function(e){if(this.options.originatingView.$el.find(".csui-changeowner-permission").length>0)return void(this.lockedForOtherContols=!0);this.lockedForOtherContols=!1;var t=this.$el.find(".csui-inlinetoolbar").removeClass("binf-hidden");if(t.length>0){var i=this,n={"sender":i,"target":t,"model":i.model};i.trigger("mouseenter:row",n)}},"hideInlineActions":function(e){var t=this.$el.find(".csui-inlinetoolbar").addClass("binf-hidden");if(t.length>0){var i=this,n={"sender":i,"target":t,"model":i.model};i.trigger("mouseleave:row",n)}},"onFocusInTableCell":function(e){this.options.showInlineToolbar&&!this.lockedForOtherContols&&this.$el.find(".csui-inlinetoolbar").hasClass("binf-hidden")&&this._showInlineRowActions()},"onFocusOutTableCell":function(t){this.options.showInlineToolbar&&setTimeout(e.bind(function(){0!==this.$el.find(document.activeElement).length||o.isHybrid()||this._destroyInlineRowActionBar()},this),50)}}),C=n.ItemView.extend({"className":"csui-table-header","attributes":function(){return{"role":"row"}},"tagName":"div","template":f,"templateHelpers":function(){return{"columns":this.options.columns,"addTitle":v.addTitle}},"constructor":function(e){e||(e={}),n.ItemView.prototype.constructor.call(this,e)},"onRender":function(){if(this._columnCount=this.options.columns.length,this._toolbarHeaderColumnCount=0,this.options.userHasEditPermissions)this._toolbarHeaderColumnCount=this._columnCount;else for(var e=0;e<this._columnCount;e++){var t=this.options.columns[e];t.isToolbar||this._toolbarHeaderColumnCount++,void 0!==t.attributes.containsInlineActions&&(t.attributes.containsInlineActions=!1)}}}),_=n.CollectionView.extend({"className":"csui-table-body","attributes":function(){return{"role":"rowgroup"}},"childView":y,"childEvents":{"mouseenter:row":"onChildShowInlineActionBarWithDelay","onpointerenter:row":"onChildShowInlineActionBarWithDelay","mouseleave:row":"onChildActionBarShouldDestroy","clicked:cell":"onClickedCell"},"behaviors":{"TabableRegion":{"behaviorClass":p,"initialActivationWeight":100}},"events":{"keydown":"onKeyInView"},"childViewOptions":function(){return{"context":this.options.context,"columns":this.options.columns,"wrappedColumns":this.options.wrappedColumns,"showInlineToolbar":this.showInlineToolbar,"toolbarItems":this.options.toolbarItems,"toolbarItemsMasks":this.options.toolbarItemsMasks,"connector":this.options.collection.connector,"originatingView":this.options.originatingView,"applyTo":this.options.applyTo,"authUser":this.options.authUser,"userHasEditPermissions":this.options.userHasEditPermissions,"nodeModel":this.model}},"getEmptyView":function(){return this.options.emptyView?this.options.emptyView:w},"emptyViewOptions":function(){return this.options.emptyView?{"model":this.options.emptyViewModel}:this.options},"constructor":function(e){n.CollectionView.prototype.constructor.call(this,e),this.showInlineToolbar=this.options.toolbarItems&&this.options.toolbarItemsMasks,this.showInlineToolbar&&this.setInlineActionBarEvents()},"onRender":function(){if(this.nameColumnIndex=this.getNameColumnIndex(this.options.columns)||0,this.accFocusedCell=this.options.accFocusedCell||{"column":this.nameColumnIndex,"row":0},this.columnState=0,this._columnCount=this.options.columns.length,this._toolbarColumnCount=0,this.hasEditPermission=this.options.userHasEditPermissions,!this.hasEditPermission)for(var e=0;e<this._columnCount;e++){var t=this.options.columns[e];t.isToolbar&&this._toolbarColumnCount++}},"setInlineActionBarEvents":function(){this.listenTo(this,"closeOther",this._destroyInlineActionBar),this.listenTo(this.collection,"reset",this._destroyInlineActionBar)},"_showInlineActionBar":function(i){this.inlineToolbarView?this._savedHoverEnterArgs=i:i&&(this._savedHoverEnterArgs=null,this.inlineToolbarView=new u(e.extend({"context":this.options.context,"commands":s,"collection":this.options.toolbarItems.inlineToolbar,"toolItemsMask":this.options.toolbarItemsMasks.toolbars.inlineToolbar,"originatingView":this.options.originatingView,"applyTo":this.options.applyTo,"model":i.model,"notOccupiedSpace":0,"status":{"model":i.model,"targetView":i.sender,"connector":this.options.collection.connector,"filterId":this.options.memberFilter.get("id"),"applyTo":this.options.applyTo,"userHasEditPermissions":this.options.userHasEditPermissions,"originatingView":this.options.originatingView},"customError":!0},this.options.toolbarItems.inlineToolbar.options)),this.options.toolbarItems.inlineToolbar.options.maxItemsShown=navigator.maxTouchPoints>1?3:this.options.toolbarItems.inlineToolbar.options.maxItemsShown,this.listenTo(this.inlineToolbarView,"before:execute:command",function(e){this.lockedForOtherContols=!0,e&&e.status&&e.status.targetView&&e.status.targetView.$el&&e.status.targetView.$el.addClass("active-row"),this._destroyInlineActionBar()}),this.listenTo(this.inlineToolbarView,"after:execute:command",function(e){this.lockedForOtherContols=!1,e&&e.status&&e.status.targetView&&e.status.targetView.$el&&e.status.targetView.$el.removeClass("active-row"),this._toolbarActionTriggered(e)}),this.options.originatingView&&(this.listenTo(this.options.originatingView,"block:view:actions",function(){this.lockedForOtherContols=!0,this._destroyInlineActionBar()}),this.listenTo(this.options.originatingView,"unblock:view:actions",function(){this.lockedForOtherContols=!1})),this.inlineToolbarView.render(),this.listenTo(this.inlineToolbarView,"destroy",function(){this.inlineToolbarView=void 0,this._savedHoverEnterArgs&&this.onChildShowInlineActionBarWithDelay(this._savedHoverEnterArgs)},this),t(i.target).append(this.inlineToolbarView.$el),this.inlineToolbarView.triggerMethod("show"))},"onChildShowInlineActionBarWithDelay":function(e,t){this._showInlineActionbarTimeout&&clearTimeout(this._showInlineActionbarTimeout);var i=this;this._showInlineActionbarTimeout=setTimeout(function(){i._showInlineActionbarTimeout=void 0,i.lockedForOtherContols||i._showInlineActionBar.call(i,t)},200)},"onChildActionBarShouldDestroy":function(e,t){this._showInlineActionbarTimeout&&(clearTimeout(this._showInlineActionbarTimeout),this._showInlineActionbarTimeout=void 0),this.inlineToolbarView&&this.inlineToolbarView.destroy()},"onChildviewBeforeExecuteAction":function(){o.isHybrid()&&this.children.each(function(e,t){e.inlineRowToolbarView&&e.inlineRowToolbarView.$el&&e.inlineRowToolbarView.$el.addClass("binf-disabled")})},"onChildviewAfterExecuteAction":function(){
o.isHybrid()&&this.children.each(function(e,t){e.inlineRowToolbarView&&e.inlineRowToolbarView.$el&&(e.inlineRowToolbarView.$el.removeClass("binf-disabled"),e.$el.find("active-row")&&e.$el.removeClass("active-row"))})},"_destroyInlineActionBar":function(){this.inlineToolbarView&&(this.inlineToolbarView.destroy(),this.inlineToolbarView=void 0)},"_toolbarActionTriggered":function(e){e&&e.commandSignature&&this.trigger("after:action:execute",e),this.currentlyFocusedElement().trigger("focus")},"currentlyFocusedElement":function(){if(this.collection.length>0&&null!=this.accFocusedCell.column){var e=this.children.findByIndex(this.accFocusedCell.row);return e&&e.$el.find(".csui-table-cell:nth-child("+(this.accFocusedCell.column+1)+")").children("DIV")}return t()},"onClickedCell":function(e,t){this.accFocusedCell.row=t.rowIndex,t.colIndex<this._columnCount-this._toolbarColumnCount?this.accFocusedCell.column=t.colIndex:this.accFocusedCell.column=this._columnCount-this._toolbarColumnCount-1,this._accSetFocusToCurrentlyFocusedElement()},"onKeyInView":function(e){var i,n,o,s=!0,l=this.currentlyFocusedElement();switch(e.keyCode){case 33:this.accFocusedCell.row=0;break;case 34:this.collection.length>0?this.accFocusedCell.row=this.collection.length-1:this.accFocusedCell.row=0;break;case 35:this.accFocusedCell.column=this._columnCount-this._toolbarColumnCount-1;break;case 36:this.accFocusedCell.column=0;break;case 37:if(this.accFocusedCell.column>0&&(i=this.accFocusedCell.column,this.accFocusedCell.column--,l=this.currentlyFocusedElement(),"true"===l.attr("data-csui-empty-cell")&&l.children().length<1)){var r=this._getNextFocusableElementIndex(37,--this.accFocusedCell.column);this.accFocusedCell.column=r>=0?r:i}break;case 38:if(this.$(".binf-dropdown-toggle").parent(".binf-dropdown").hasClass("binf-open")){n=this.$(".binf-dropdown-menu li").length-1,o=t(document.activeElement.parentElement).index(),n<=o&&(o-=1,this.$(this.$(".binf-dropdown-menu li a")[o]).trigger("focus").trigger("focus")),s=!1;break}this.accFocusedCell.row>0&&(i=this.accFocusedCell.column,this.accFocusedCell.row--,l=this.currentlyFocusedElement(),"true"===l.attr("data-csui-empty-cell")&&l.children().length<1&&(this.accFocusedCell.row=i));break;case 39:this.accFocusedCell.column<this._columnCount-this._toolbarColumnCount-1&&(i=this.accFocusedCell.column,this.accFocusedCell.column++,l=this.currentlyFocusedElement(),"true"===l.attr("data-csui-empty-cell")&&l.children().length<1&&(this.accFocusedCell.column=i));break;case 40:if(this.$(".binf-dropdown-toggle").parent(".binf-dropdown").hasClass("binf-open")){n=this.$(".binf-dropdown-menu li").length-1,o=t(document.activeElement.parentElement).index(),n>o&&(o+=1,this.$(this.$(".binf-dropdown-menu li a")[o]).trigger("focus").trigger("focus")),s=!1;break}this.accFocusedCell.row<this.collection.length-1&&(i=this.accFocusedCell.row,this.accFocusedCell.row++);break;default:s=!1}s&&(e.preventDefault(),e.stopPropagation(),this.trigger("closeOther"),this._accSetFocusToCurrentlyFocusedElement())},"_getNextFocusableElementIndex":function(e,t){var i=this.currentlyFocusedElement();switch(e){case 37:return this.accFocusedCell.column>=0&&"true"===i.attr("data-csui-empty-cell")?t:-1;default:return-1}},"_accSetFocusToCurrentlyFocusedElement":function(){var e=this.currentlyFocusedElement();e.length>0&&(e=t(e[0]),this.trigger("changed:focus",this),o.isVisibleInWindowViewport(e)&&(e.find("input").length?e.find("input").trigger("focus"):e.trigger("focus")))},"getNameColumnIndex":function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t];if(i.isNaming)return t}}}),x=n.LayoutView.extend({"className":"csui-table-list","attributes":function(){return{"role":"table"}},"template":g,"regions":{"headerRegion":".csui-table-list-header","bodyRegion":".csui-table-list-body"},"behaviors":{"PerfectScrolling":{"behaviorClass":h,"contentParent":".csui-table-list-body","suppressScrollX":!0}},"constructor":function(i){i||(i={}),i.maxColumnsDisplayed||(i.maxColumnsDisplayed=10),i.tableColumns||(i.tableColumns=[]),n.LayoutView.prototype.constructor.call(this,i),this.context=i.context,this.collection=i.collection,this.listenTo(this.collection.delayedActions,"error",function(e,t,i){var n=new o.Error(t);c.showMessage("error",n.message)}),this.listenTo(this.collection,"sync",this._updateTable),this.listenTo(this.collection,"update",this.render),this.listenTo(this,"update:table",this._updateTable),this.onTableWinResize=e.bind(function(e){this._adjustColumnsAfterWindowResize(),this.trigger("resizetable",e)},this),t(window).on("resize",this.onTableWinResize),t(window).on("resize.tableview",this.onTableWinResize)},"onBeforeDestroy":function(){t(window).off("resize",this.onTableWinResize)},"_updateTable":function(e){if(this.tableBodyView&&this.tableBodyView.accFocusedCell){var t=this.tableBodyView.accFocusedCell.row,i=this.tableBodyView.accFocusedCell.column,n=this.tableBodyView.children.findByModel(e);e===this.collection?this.render():(n.render(),this.triggerMethod("dom:refresh"),o.isHybrid()&&(n._destroyInlineRowActionBar(),n._showInlineRowActions())),this.tableBodyView.accFocusedCell.row=t,this.tableBodyView.accFocusedCell.column=i,this.tableBodyView.trigger("changed:focus",this.tableBodyView)}else this.render()},"onRender":function(){this.allColumns=this.getColumns(),this.displayedColumns=e.where(this.allColumns,{"columnWrapped":!1}),this.wrappedColumns=e.where(this.allColumns,{"columnWrapped":!0}),this.userHasEditPermissions=this.options.admin_permissions,this.tableHeaderView=new C({"columns":this.displayedColumns,"context":this.context,"userHasEditPermissions":this.userHasEditPermissions}),this.headerRegion.show(this.tableHeaderView),this.tableBodyView=new _(e.defaults({"columns":this.displayedColumns,"wrappedColumns":this.wrappedColumns,"context":this.context,"collection":this.collection,"toolbarItems":this.options.toolbarItems,"toolbarItemsMasks":this.options.toolbarItemsMasks,"emptyView":this.options.emptyView,"authUser":this.options.authUser,"userHasEditPermissions":this.userHasEditPermissions,"emptyViewModel":this.options.emptyViewModel},this.options)),this.bodyRegion.show(this.tableBodyView);var t=this;this.$el.find(".csui-table-list-body").on("scroll",function(e){t.trigger("scroll",e)}),this._rebuildingTable=!1},"onBeforeRender":function(){this._rebuildingTable=!0},"onDomRefresh":function(e){this.$el.is(":visible")&&(this._adjustColumnsAfterWindowResize(),this.trigger("resizetable",e))},"getColumns":function(){var t=[];if(this.options.tableColumns){var i=this.options.tableColumns.deepClone(),n=[];i.each(function(e){var t=e,i=e.get("key");e.attributes.column_key=i,n.push(t)},this),t=e.map(n,function(t){var i=r.getCellView(t),n=t.get("column_key"),o=i.columnClassName;o||(o="csui-table-cell-"+n);var s=["permanentColumn","noTitleInHeader","title","align","widthFactor","isNaming","containsInlineActions"];e.each(s,function(e){i[e]&&t.set(e,i[e],{"silent":!0})});var l={"CellView":i,"name":n,"noTitleInHeader":t.get("noTitleInHeader"),"isToolbar":t.get("isToolbar"),"title":t.get("title")||t.get("name")||t.get("column_name"),"className":o},a=t.get("align");return a&&(window.csui&&window.csui.rtl&&("left"===a&&(a="right")||"right"===a&&(a="left")),l.className+=" csui-align-"+a),t.attributes&&(l.attributes=l.attributes||{},e.extend(l.attributes,t.attributes)),l})}if(this.options.maxColumnsDisplayed||this.maxColumnsDisplayed){var o=0;e.each(t,function(e){e.attributes&&!0===e.attributes.permanentColumn&&(o++,e.columnWrapped=!1)},this),this.maxColumnsDisplayed=this.calculateMaxColumnsDisplayed(t),e.each(t,function(e){e.attributes&&!0===e.attributes.permanentColumn||(o++,e.columnWrapped=o>this.maxColumnsDisplayed)},this)}return t},"_adjustColumns":function(){if(this.displayedColumns&&this.$el.is(":visible")){var i,n=this.$el.width()-5,o=0,s=0,l=this.$el.find(".csui-table-header-cell");i=this.collection.length>0?this.$el.find(".csui-table-body>div").first().find(".csui-table-cell"):l;var r,a={},c=[],u=this.displayedColumns,d=0,h=0,p=0,m=0;i.each(function(e){if(e<u.length){var i=t(this),n=u[e];if(n.CellView&&n.CellView.hasFixedWidth)s+=i.outerWidth(),o++;else{var l=n.attributes&&n.attributes.widthFactor||1;l&&1!==l?(a[e]=l,d+=l):n.CellView&&n.CellView.flexibleWidth?(p+=i.outerWidth(),m++):(c.push(e),d+=1),l>h&&(h=l,r=e)}}});var f=n-s-p-4*u.length,g=u.length-o-m,b=g>0?f/g:0,v=0,w=d/g;e.each(a,function(e,t){var i=e/w,n=b*i;v+n>f&&(n=f-v)<0&&(n=0),n=Math.floor(n),a[t]=n,v+=n});var y;c.length>0?(b=(f-v)/c.length/w,b=Math.floor(b),y=f-v-b*c.length):(b=0,y=f-v),y=Math.floor(y);var C={},_=this;i.each(function(e){if(e<u.length){var i=t(this),n=u[e],o=n.CellView&&n.CellView.hasFixedWidth,s={"width":i.outerWidth()+"px"};if(!o){var c;c=a[e]&&a[e]>0?a[e]:b,e===r&&y&&(c+=y);var d=c+"px";n.CellView.flexibleWidth?t(l[e]).css(s):(s={"min-width":d,"max-width":d},t(l[e]).css(s));_.$el.find(".csui-table-cell:nth-child("+(e+1)+")").css(s)}C[n.className]=s}}),this.cachedColumnWidths=C}},"calculateMaxColumnsDisplayed":function(t){if(t&&0!==t.length){var i,n,o=0,s=0;if(this.$el.length>0&&this.$el[0].children.length>0){var l=this.$el.width();e.each(t,function(e){e.attributes&&!0===e.attributes.permanentColumn&&(i=e.attributes.widthFactor,n=i?120*i:120,s+=n,o++)},this);for(var r=0;r<t.length;r++){var a,c=t[r];if(c.attributes&&!c.attributes.permanentColumn){if(i=c.attributes.widthFactor,a=120,n=i?a*i:a,(s+=n)>l)break;o++}}o>this.options.maxColumnsDisplayed&&(o=this.options.maxColumnsDisplayed),o<1&&(o=1)}else o=this.options.maxColumnsDisplayed;return o}},"_adjustColumnsAfterWindowResize":function(){if(this.allColumns.length){if(this.maxColumnsDisplayed&&this.$el.is(":visible")){var t=this.calculateMaxColumnsDisplayed(this.allColumns);if(t!==this.maxColumnsDisplayed&&(this.maxColumnsDisplayed=t,!this._rebuildingTable))return setTimeout(e.bind(this.render,this))}this._adjustColumns()}}});return e.extend(x.prototype,l),x}),csui.define("hbs!csui/controls/table.configuration.toolbar/impl/configuration.toolbar.dropdown",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-dropdown">\r\n  <button id="'+e.escapeExpression((s=null!=(s=l(i,"btnId")||(null!=t?l(t,"btnId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"btnId","hash":{},"loc":{"start":{"line":2,"column":14},"end":{"line":2,"column":23}}}):s))+'" type="button" class="binf-dropdown-toggle csui-acc-focusable"\r\n          data-binf-toggle="dropdown" aria-haspopup="true" aria-expanded="false"\r\n          title="'+e.escapeExpression((s=null!=(s=l(i,"configurationButtonTooltip")||(null!=t?l(t,"configurationButtonTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"configurationButtonTooltip","hash":{},"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":47}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"configurationButtonTooltip")||(null!=t?l(t,"configurationButtonTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"configurationButtonTooltip","hash":{},"loc":{"start":{"line":4,"column":61},"end":{"line":4,"column":91}}}):s))+'">\r\n    <span class="icon icon-toolbar-settings"></span>\r\n  </button>\r\n  <ul class="binf-dropdown-menu" role="menu"></ul>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_table.configuration.toolbar_impl_configuration.toolbar.dropdown",n),n}),csui.define("csui/controls/table.configuration.toolbar/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table.configuration.toolbar/impl/nls/root/localized.strings",{"configurationButtonTooltip":"Settings"}),csui.define("css!csui/controls/table.configuration.toolbar/impl/configuration.toolbar.dropdown",[],function(){}),csui.define("csui/controls/table.configuration.toolbar/configuration.toolbar.dropdown.view",["module","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/controls/toolbar/toolitem.view","csui/models/nodes","csui/controls/toolbar/toolitems.filtered.model","csui/utils/commands","csui/controls/toolbar/toolbar.command.controller","csui/behaviors/dropdown.menu/dropdown.menu.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","hbs!csui/controls/table.configuration.toolbar/impl/configuration.toolbar.dropdown","i18n!csui/controls/table.configuration.toolbar/impl/nls/localized.strings","css!csui/controls/table.configuration.toolbar/impl/configuration.toolbar.dropdown","csui/lib/binf/js/binf"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p){"use strict";return o=o(e.id),n.CompositeView.extend({"className":"csui-configuration-view","template":h,"templateHelpers":function(){return{"btnId":t.uniqueId("configurationButton"),"configurationButtonTooltip":p.configurationButtonTooltip}},"childView":s,"childViewContainer":"ul.binf-dropdown-menu","childViewOptions":function(e){return{"renderTextOnly":!0,"role":"menuitem"}},"ui":{"dropdownDiv":".binf-dropdown","dropdownToggle":".binf-dropdown-toggle","dropdownMenu":".binf-dropdown-menu","loadingIconsDiv":".csui-loading-parent-wrapper"},"behaviors":{"DropdownMenuBehavior":{"behaviorClass":u},"PerfectScrolling":{"behaviorClass":d,"contentParent":".command-view-region"}},"constructor":function(e){e||(e={}),this.context=e.context,this.commands=e.commands||a,this.commandController=e.toolbarCommandController||new c({"commands":this.commands}),this.selectedNodes=e.status&&e.status.nodes||new l,this.container=e.container,this.status=e.status||{"context":this.context,"nodes":this.selectedNodes,"container":this.container},e.collection=new r(e.toolbarItems,{"status":this.status,"commands":this.commands,"mask":e.toolbarItemsMask}),n.CompositeView.prototype.constructor.apply(this,arguments),this.listenTo(this,"childview:toolitem:action",this._triggerMenuItemAction).listenTo(i,"closeToggleAction",this._closeToggle)},"enabled":function(){return!!this.options.context},"onRender":function(){this.collection.length<1?(this.$el.addClass("binf-hidden"),this.ui.dropdownToggle.attr("data-cstabindex","-1"),this.ui.dropdownToggle.removeClass("csui-acc-focusable")):(this.$el.find(".binf-dropdown").removeClass("binf-hidden"),this.$el.removeClass("binf-hidden"),this.ui.dropdownToggle.attr("data-cstabindex","0"),this.ui.dropdownToggle.addClass("csui-acc-focusable")),this.collection.length>0&&(this.ui.dropdownToggle.binf_dropdown(),this.ui.dropdownDiv.on("hide.binf.dropdown",t.bind(function(){this._showMenuItems()},this)))},"_closeToggle":function(){var e=this.$el.find(".binf-dropdown-toggle");e.parent().hasClass("binf-open")&&e.binf_dropdown("toggle",!1),this._showMenuItems()},"_triggerMenuItemAction":function(e,i){if(i&&i.toolItem&&!0===i.toolItem.get("menuWithMoreOptions"))this._toolitemClicked(e,i);else{this.$el.find(".binf-dropdown-toggle").binf_dropdown("toggle");var n=t.extend(this.status,{"originatingView":this.options.originatingView,"blockingParentView":this.options.blockingParentView,"configurationMenuView":this,"toolItemView":e});this.commandController.toolitemClicked(i.toolItem,n)}},"_toolitemClicked":function(e,i){var n=this,s=i.toolItem.get("signature"),l=this.commandController.commands.findWhere({"signature":s}),r=t.extend(this.status,{"originatingView":this.options.originatingView,"blockingParentView":this.options.blockingParentView,"configurationMenuView":this,"toolItemView":e}),a=t.extend({},r.data,i.toolItem.get("commandData"));r=t.defaults({"toolItem":i.toolItem,"data":a},r);var c={"status":r,"commandSignature":s,"command":l};this.commandController.trigger("before:execute:command",c);var u={"context":r.context};try{l.execute(r,u).done(function(e){e&&e.viewClass&&n._showCommandViewInDropdownMenu(e.viewClass,e.viewOptions||{}),n.commandController.trigger("after:execute:command",c)}).fail(function(e){void 0===e&&(e={"cancelled":!0,"commandSignature":s}),n.commandController.trigger("after:execute:command",e)})}catch(e){o.warn('Executing the command "{0}" failed.\n{1}',l.get("signature"),e.message)&&console.warn(o.last),this.commandController.trigger("after:execute:command",e)}},"_showCommandViewInDropdownMenu":function(e,i){var n=new e(i);this.listenTo(n,"go:back",t.bind(function(){this._showMenuItemsWithAnimation()},this)),this.listenTo(n,"close:menu",t.bind(function(){this._showMenuItems(),this._closeToggle()},this)),this.listenTo(n,"dom:refresh",t.bind(function(){this.trigger("render"),this.trigger("update:scrollbar")},this)),this._ensureCommandViewRegion(),this.commandViewRegion.show(n),this._hideMenuItemsWithAnimation()},"_ensureCommandViewRegion":function(){if(!this.commandViewRegion){this.ui.dropdownMenu.append('<div class="command-view-region"></div>');var e=this.ui.dropdownMenu.find(".command-view-region");this.commandViewRegion=new n.Region({"el":e}),e.on("click",function(e){e.preventDefault(),e.stopPropagation()}),this.commandViewRegion.$el.hide()}},"_emptyCommandViewRegion":function(){this.commandViewRegion&&this.commandViewRegion.empty()},"_showMenuItems":function(){this.ui.dropdownMenu.find("> li").show(),this._emptyCommandViewRegion(),this.commandViewRegion&&this.commandViewRegion.$el.hide()},"_showMenuItemsWithAnimation":function(){var e=this,t=this.ui.dropdownMenu.find(".csui-icon-rightArrow");t.addClass("binf-hidden"),e.ui.dropdownMenu.css("overflow","hidden"),e.ui.dropdownMenu.animate({"width":e.dropdownMenuOriginalWidth,"height":e.dropdownMenuOriginalHeight},500),e.commandViewRegion.$el.css({"position":"absolute","top":e.ui.dropdownMenu.css("padding-top"),"background-color":e.ui.dropdownMenu.css("background-color"),"opacity":1}),e.ui.dropdownMenu.find("> li").show(),e.commandViewRegion.$el.hide("blind",{"direction":"right","complete":function(){e._emptyCommandViewRegion(),t.removeClass("binf-hidden"),e.commandViewRegion.$el.css({"position":"","top":"","background-color":"","opacity":""}),e.ui.dropdownMenu.css({"overflow":"","width":"","height":""})}},500)},"_hideMenuItemsWithAnimation":function(){var e=this,t=this.ui.dropdownMenu.find(".csui-icon-rightArrow");t.addClass("binf-hidden"),e.dropdownMenuOriginalWidth=e.ui.dropdownMenu.css("width"),e.dropdownMenuOriginalHeight=e.ui.dropdownMenu.css("height"),e.ui.dropdownMenu.css("overflow","hidden"),e.ui.dropdownMenu.animate({"width":e.commandViewRegion.$el.width(),"height":e.commandViewRegion.$el.height()},500),e.commandViewRegion.$el.css({"position":"absolute","top":e.ui.dropdownMenu.css("padding-top"),"background-color":e.ui.dropdownMenu.css("background-color"),"opacity":1}),e.commandViewRegion.$el.show("blind",{"direction":"right","complete":function(){e.ui.dropdownMenu.find("> li").hide(),t.removeClass("binf-hidden"),e.commandViewRegion.$el.css({"position":"","top":"","background-color":"","opacity":""}),e.ui.dropdownMenu.css({"width":"","height":""})}},500)}})}),csui.define("csui/controls/table/inlineforms/inlineform/impl/csui.inlineform.schemas",["i18n!csui/controls/table/inlineforms/base/impl/nls/lang"],function(e){return[{"equals":{"type":0},"form":{"fields":{"name":{"type":"text","required":!0,"namePlaceholder":e.NewNamePlaceholder,"multilingual":!0}}}},{"equals":{"type":-1},"form":{"fields":{"name":{"type":"text","required":!0,"namePlaceholder":e.NewNamePlaceholder,"multilingual":!0}}}},{"equals":{"type":1},"form":{"fields":{"name":{"type":"text","required":!0,"namePlaceholder":e.ShortcutNamePlaceholder,"multilingual":!0}}}},{"equals":{"type":298},"form":{"fields":{"name":{"type":"text","required":!0,"namePlaceholder":e.NewNamePlaceholder,"multilingual":!0}}}},{"equals":{"type":1308},"form":{"fields":{"name":{"type":"text","required":!0,"namePlaceholder":e.NewNamePlaceholder,"multilingual":!0}}}},{"equals":{"type":136},"form":{"fields":{"name":{"type":"text","required":!0,"namePlaceholder":e.NewNamePlaceholder,"multilingual":!0}}}},{"equals":{"type":800},"form":{"fields":{"name":{"type":"text","required":!0,"namePlaceholder":e.NewNamePlaceholder,"multilingual":!0}}}},{"equals":{"type":140},"form":{"fields":{"name":{"type":"text","required":!0,"namePlaceholder":e.UrlNamePlaceholder,"multilingual":!0},"url":{"type":"text","required":!0,"namePlaceholder":e.UrlAddressPlaceholder,"regex":/^[a-z0-9]+:\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*(\:[0-9]{1,5})?(([0-9]{1,5})?\/.*)?$/i}}}}]}),csui.define("csui/controls/table/inlineforms/favorite/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/inlineforms/favorite/impl/nls/root/lang",{"CancelButtonLabel":"Cancel","NewNamePlaceholder":"Enter name"}),csui.define("hbs!csui/controls/table/inlineforms/favorite/impl/favorite",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-describedby="'+e.escapeExpression((s=null!=(s=l(i,"errorMsgId")||(null!=t?l(t,"errorMsgId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMsgId","hash":{},"loc":{"start":{"line":4,"column":47},"end":{"line":4,"column":61}}}):s))+'" '},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-inlineform-group csui-inlineform-group-error" role="alert" id="'+e.escapeExpression((s=null!=(s=l(i,"errorMsgId")||(null!=t?l(t,"errorMsgId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMsgId","hash":{},"loc":{"start":{"line":14,"column":82},"end":{"line":14,"column":96}}}):s))+'">\r\n    <div class="binf-text-danger" title="'+e.escapeExpression((s=null!=(s=l(i,"errorMessage")||(null!=t?l(t,"errorMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMessage","hash":{},"loc":{"start":{"line":15,"column":41},"end":{"line":15,"column":57}}}):s))+'"><span\r\n        class="csui-text-danger">'+e.escapeExpression((s=null!=(s=l(i,"errorMessage")||(null!=t?l(t,"errorMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMessage","hash":{},"loc":{"start":{"line":16,"column":33},"end":{"line":16,"column":49}}}):s))+"</span></div>\r\n  </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form class="csui-inlineform-group csui-inlineform-group-favorite-name">\r\n  <input type="text" value="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":2,"column":28},"end":{"line":2,"column":36}}}):l))+'" placeholder="'+e.escapeExpression((l=null!=(l=r(i,"namePlaceholder")||(null!=t?r(t,"namePlaceholder"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"namePlaceholder","hash":{},"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":70}}}):l))+'"\r\n         class="binf-form-control csui-inlineform-input-name"\r\n    '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"haveErrorMessage"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":4},"end":{"line":4,"column":70}}}))?s:"")+'>\r\n    <button type="submit" class="csui-btn-save" disabled title="'+e.escapeExpression((l=null!=(l=r(i,"SaveEditTooltip")||(null!=t?r(t,"SaveEditTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"SaveEditTooltip","hash":{},"loc":{"start":{"line":5,"column":64},"end":{"line":5,"column":83}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"SaveEditTooltip")||(null!=t?r(t,"SaveEditTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"SaveEditTooltip","hash":{},"loc":{"start":{"line":5,"column":97},"end":{"line":5,"column":116}}}):l))+'">\r\n      '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"normal","iconName":"csui_action_confirm32"},"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":80}}}))?s:"")+'\r\n    </button>\r\n    <button type="reset" class="csui-btn-cancel csui-inline" title="'+e.escapeExpression((l=null!=(l=r(i,"EditCancelTooltip")||(null!=t?r(t,"EditCancelTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"EditCancelTooltip","hash":{},"loc":{"start":{"line":8,"column":68},"end":{"line":8,"column":89}}}):l))+'"\r\n            aria-label="'+e.escapeExpression((l=null!=(l=r(i,"EditCancelTooltip")||(null!=t?r(t,"EditCancelTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"EditCancelTooltip","hash":{},"loc":{"start":{"line":9,"column":24},"end":{"line":9,"column":45}}}):l))+'">\r\n      '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"normal","iconName":"csui_action_cancel32"},"loc":{"start":{"line":10,"column":6},"end":{"line":10,"column":79}}}))?s:"")+"\r\n    </button>\r\n</form>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"haveErrorMessage"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":0},"end":{"line":18,"column":7}}}))?s:"")}});return i.registerPartial("csui_controls_table_inlineforms_favorite_impl_favorite",n),n}),csui.define("css!csui/controls/table/inlineforms/favorite/impl/favorite",[],function(){}),csui.define("csui/controls/table/inlineforms/favorite/favorite.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","i18n!csui/controls/table/inlineforms/favorite/impl/nls/lang","csui/controls/table/inlineforms/inlineform.registry","csui/controls/table/inlineforms/inlineform/inlineform.view","hbs!csui/controls/table/inlineforms/favorite/impl/favorite","css!csui/controls/table/inlineforms/favorite/impl/favorite"],function(e,t,i,n,o,s,l){return s.extend({"className":function(){var e="csui-inlineform-favorite";return s.prototype.className&&(e+=" "+t.result(s.prototype,"className")),e},"template":l,"templateHelpers":function(){var e=this._templateHelpers(),i=!this.model.get("favorite_name");return t.extend(e,{"name":this.model.get("favorite_name"),"namePlaceholder":n.NewNamePlaceholder,"disableSaveBtn":i})},"ui":{},"constructor":function e(i){this.options=i||{},this.ui=t.extend({},this.ui,s.prototype.ui),this.events=t.extend({},this.events,s.prototype.events),e.__super__.constructor.apply(this,arguments)},"_saveIfOk":function(){var e=this._getInputName(),t=this.model.get("favorite_name");e.length>0&&e===t?this.cancel():e.length>0&&this._save({"favorite_name":e})},"isSaveEnabled":function(e){return!(!e.length||e===this.model.get("favorite_name"))}},{"CSSubType":void 0})}),csui.define("csui/controls/table/inlineforms/inlineform/impl/inlineform.view",["csui/utils/log","csui/controls/table/inlineforms/inlineform/inlineform.view"],function(e,t){"use strict";return e.warn('DEPRECATED: depend on the module "csui/controls/table/inlineforms/inlineform/inlineform.view" instead.'),t}),csui.define("csui/controls/table/inlineforms/permissions/user.picker/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/inlineforms/permissions/user.picker/impl/nls/root/lang",{"CancelButtonLabel":"Cancel","SaveButtonLabel":"Save","UserPickerPlaceHolder":"Enter name","InvalidUser":"Invalid user"}),csui.define("hbs!csui/controls/table/inlineforms/permissions/user.picker/impl/user.picker",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div id="csui-inline-permissions-user-picker" class="csui-inline-permissions-user-picker"></div>\r\n<div class="csui-user-picker-buttons csui-inlineform-group">\r\n  <button class="binf-btn csui-btn binf-btn-primary cs-save-button" tabindex="-1" disabled>'+e.escapeExpression(e.lambda(null!=t?s(t,"SaveButtonLabel"):t,t))+'</button>\r\n  <button class="binf-btn csui-btn binf-btn-default cs-cancel-button" tabindex="-1">'+e.escapeExpression(e.lambda(null!=t?s(t,"CancelButtonLabel"):t,t))+'</button>\r\n</div>\r\n<div class="csui-change-user-error"></div>'}});return i.registerPartial("csui_controls_table_inlineforms_permissions_user.picker_impl_user.picker",n),n}),csui.define("css!csui/controls/table/inlineforms/permissions/user.picker/impl/user.picker",[],function(){}),csui.define("csui/controls/table/inlineforms/permissions/user.picker/user.picker.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/behaviors/keyboard.navigation/tabable.region.behavior","i18n!csui/controls/table/inlineforms/permissions/user.picker/impl/nls/lang","hbs!csui/controls/table/inlineforms/permissions/user.picker/impl/user.picker","css!csui/controls/table/inlineforms/permissions/user.picker/impl/user.picker"],function(e,t,i,n,o,s){return i.ItemView.extend({"className":"cs-inline-user-lookup","template":s,"behaviors":{"TabableRegion":{"behaviorClass":n,"initialActivationWeight":100}},"ui":{"cancelButton":".cs-cancel-button","saveButton":".cs-save-button","inputBox":".cs-search"},"events":{"click @ui.saveButton":"saveClicked","click @ui.cancelButton":"cancelClicked","focus @ui.inputBox":"inputBoxFocus","click":"handleClick"},"handleClick":function(e){e.preventDefault(),e.stopPropagation()},"templateHelpers":function(){return{"SaveButtonLabel":o.SaveButtonLabel,"CancelButtonLabel":o.CancelButtonLabel}},"initialize":function(e){this.options=e},"constructor":function(e){e||(e={}),e.data||(e.data={}),this.options=e,i.ItemView.prototype.constructor.call(this,e)},"inputBoxFocus":function(){this.focusIndex=0},"onShow":function(){var e=this;this.focusIndex=0,csui.require(["csui/controls/userpicker/userpicker.view"],function(n){e.pickerView=new n({"context":e.options.context,"limit":5,"memberFilter":e.options.memberFilter,"widgetoptions":e.options,"placeholder":o.UserPickerPlaceHolder,"prettyScrolling":!0,"scrollContainerHeight":"auto","model":e.options.userPickerModel,"id_input":t.uniqueId("csui-inline-permissions-user-picker-input"),"lightWeight":!1}),new i.Region({"el":e.$el.find("#csui-inline-permissions-user-picker")}).show(e.pickerView),e.pickerView.$el.find("input")&&e.pickerView.$el.find("input").trigger("focus"),e.listenTo(e.pickerView,"item:change",e.processItemChange),e.listenTo(e.pickerView,"item:clear",e.processItemChange),e.$el.on("keydown",t.bind(e.onKeyInView,e)),e.$el.find("input").trigger("focus").attr("tabindex","-1")})},"processItemChange":function(){var e=arguments.length>0&&arguments[0].item;this.param=e,e?this.options.currentRow.find(".cs-save-button").prop("disabled",!1):(this.options.currentRow.find(".cs-save-button").attr("disabled",!0),this.$el.find("input").trigger("focus"))},"currentlyFocusedElement":function(){return this.$el.find("input")},"cancelClicked":function(e){e.preventDefault(),e.stopPropagation(),this.options.currentRow.removeClass("csui-changeowner-permission"),this.options.currentRow.find(".member-info").removeClass("binf-hidden"),this.trigger("change:completed")},"saveClicked":function(e){e.preventDefault(),e.stopPropagation(),this.$(".cs-search").val()===this.param.get("name_formatted")?this.trigger("member:selected:save",this.param):this.$(".csui-change-user-error").addClass("csui-change-user-error-display").html(o.InvalidUser)},"onKeyInView":function(e){var t=this,i=this.$el.find("[tabindex]").filter(function(e,i){
return t.$(i).is(":visible")&&!t.$(i).is(":disabled")});i.length,i[this.focusIndex];switch(this.$(e.target).hasClass("cs-search")&&(this.focusIndex=0),e.keyCode){case 37:this.focusIndex>0&&(this.focusIndex--,i[this.focusIndex].focus(),e.preventDefault()),e.stopPropagation();break;case 9:e.shiftKey?this.focusIndex>0&&(this.focusIndex--,i[this.focusIndex].focus()):this.focusIndex<i.length-1&&(this.focusIndex++,i[this.focusIndex].focus()),e.preventDefault(),e.stopPropagation();break;case 39:e.stopPropagation();break;case 38:case 40:e.preventDefault(),e.stopPropagation();break;case 32:e.stopPropagation();break;case 13:this.$(e.target).trigger("click"),e.preventDefault(),e.stopPropagation();break;default:e.stopPropagation()}}})}),csui.define("csui/controls/table/inlineforms/folder/folder.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","i18n!csui/controls/table/inlineforms/folder/impl/nls/lang","csui/controls/table/inlineforms/inlineform.registry","csui/controls/table/inlineforms/inlineform/inlineform.view","hbs!csui/controls/table/inlineforms/folder/impl/folder","css!csui/controls/table/inlineforms/folder/impl/folder"],function(e,t,i,n,o,s,l){var r=s.extend({"className":function(){var e="csui-inlineform-folder";return s.prototype.className&&(e+=" "+t.result(s.prototype,"className")),e},"template":l,"templateHelpers":function(){var e=this._templateHelpers();return t.extend(e,{"namePlaceholder":n.NewNamePlaceholder})},"ui":{},"constructor":function(e){this.options=e||{},this.ui=t.extend({},this.ui,s.prototype.ui),this.events=t.extend({},this.events,s.prototype.events),i.ItemView.prototype.constructor.apply(this,arguments)},"_saveIfOk":function(){var e=this._getInputName(),t=this.model.get("name");e.length>0&&e===t?this.cancel():e.length>0&&this._save({"name":e}).fail(function(e){this.model.set({"name":t},{"silent":!0})}.bind(this))}},{"CSSubType":NaN});return o.registerByAddableType(r.CSSubType,r),r}),csui.define("csui/controls/table/cells/celleditor/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/cells/celleditor/impl/nls/root/lang",{"NewNamePlaceholder":"Enter name"}),csui.define("hbs!csui/controls/table/cells/celleditor/impl/celleditor",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'    <span class="csui-undo edit-cancel inline-edit-icon"></span>\r\n'},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <button class="csui-undo csui-btn-cancel binf-btn">'+e.escapeExpression((s=null!=(s=l(i,"CancelButtonLabel")||(null!=t?l(t,"CancelButtonLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"CancelButtonLabel","hash":{},"loc":{"start":{"line":6,"column":55},"end":{"line":6,"column":76}}}):s))+"</button>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-td-content-edit">\r\n  <input type="text" value="'+e.escapeExpression((l=null!=(l=r(i,"formattedValue")||(null!=t?r(t,"formattedValue"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"formattedValue","hash":{},"loc":{"start":{"line":2,"column":28},"end":{"line":2,"column":46}}}):l))+'" placeholder="'+e.escapeExpression((l=null!=(l=r(i,"inputPlaceholder")||(null!=t?r(t,"inputPlaceholder"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"inputPlaceholder","hash":{},"loc":{"start":{"line":2,"column":61},"end":{"line":2,"column":81}}}):l))+'" class="binf-form-control">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"useEditCancelIcon"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":3,"column":2},"end":{"line":7,"column":9}}}))?s:"")+"</div>\r\n"}});return i.registerPartial("csui_controls_table_cells_celleditor_impl_celleditor",n),n}),csui.define("css!csui/controls/table/cells/celleditor/impl/celleditor",[],function(){}),csui.define("csui/controls/table/cells/celleditor/celleditor.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/controls/table/cells/templated/templated.view","i18n!csui/controls/table/cells/celleditor/impl/nls/lang","hbs!csui/controls/table/cells/celleditor/impl/celleditor","css!csui/controls/table/cells/celleditor/impl/celleditor"],function(e,t,i,n,o,s,l,r){return s.extend({"template":r,"ui":{"editCancel":".csui-td-content-edit .csui-undo","cancelButton":".csui-td-content-edit .csui-btn-cancel","inputField":".csui-td-content-edit > input"},"events":{"click @ui.editCancel":"iconUndoClicked","keyup @ui.inputField":"keyReleased","blur @ui.inputField":"leftInputField","click @ui.inputField":"inputFieldClicked"},"onRender":function(){this.ui.inputField.addClass("csui-input-full"),this.ui.inputField.select()},"endEdit":function(){this.editStarted=!1,this.saving=!1,delete this.model.csuiValueEdited;var t=this.$el.find(".csui-td-content-edit");t.length>0&&e(t[0]).remove(),this.model.unset("csuiErrorMessage"),this.trigger("closed",this)},"_cancelEdit":function(){this.leftInputFieldTimer&&clearTimeout(this.leftInputFieldTimer),this.trigger("cancelEdit",this),this.endEdit()},"_save":function(){if(this.editStarted){var e=this.ui.inputField,t=e.val();t=t.trim(),t.length>0?(this.saving=!0,this.trigger("cellEditorWantsSave",{"newName":t})):this._cancelEdit()}},"inputFieldClicked":function(e){e.preventDefault(),e.stopPropagation()},"iconUndoClicked":function(e){e.preventDefault(),e.stopPropagation(),this._cancelEdit()},"keyReleased":function(e){e.preventDefault(),e.stopPropagation(),this.leftInputFieldTimer&&clearTimeout(this.leftInputFieldTimer),27===e.keyCode?this._cancelEdit():13===e.keyCode&&this._save()},"leftInputField":function(e){if(!this.saving){var t=this;this.leftInputFieldTimer&&clearTimeout(this.leftInputFieldTimer),this.leftInputFieldTimer=setTimeout(function(){t.leftInputFieldTimer=void 0,t._save()},100)}},"renderValue":function(){var t;t=this.model.csuiValueEdited?{"value":this.model.csuiValueEdited,"formattedValue":this.model.csuiValueEdited}:this.getValueData(),t.useEditCancelIcon=void 0!==this.model.get("id"),t.CancelButtonLabel=l.CancelButtonLabel,t.inputPlaceholder=l.NewNamePlaceholder;var i=void 0!==this.model.get("csuiErrorMessage"),n=t?this.template(t):"",o=this.$el.find(".csui-td-content-edit");if(o.length>0)i&&e(o[0]).addClass("binf-has-error"),e(o[0]).replaceWith(n);else{var s=e(n);i&&s.addClass("binf-has-error"),s.appendTo(this.$el.find(".csui-td-container"))}this.editStarted=!0,this.saving=!1}})}),csui.define("hbs!csui/controls/table/cells/reservation/impl/reservation",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isReservedByOther"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":2,"column":2},"end":{"line":6,"column":9}}}))?s:""},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span title="'+e.escapeExpression((s=null!=(s=l(i,"reservedTooltip")||(null!=t?l(t,"reservedTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"reservedTooltip","hash":{},"loc":{"start":{"line":3,"column":19},"end":{"line":3,"column":38}}}):s))+'" class="icon icon-shared_collaborate_other"></span>\r\n'},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span title="'+e.escapeExpression((s=null!=(s=l(i,"reservedTooltip")||(null!=t?l(t,"reservedTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"reservedTooltip","hash":{},"loc":{"start":{"line":5,"column":19},"end":{"line":5,"column":38}}}):s))+'" class="icon icon-shared_collaborate_self"></span>\r\n'},"6":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"reserved"):t,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":0},"end":{"line":19,"column":0}}}))?s:""},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"canUnreserve"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":2},"end":{"line":10,"column":9}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isReservedByOther"):t,{"name":"if","hash":{},"fn":e.program(10,o,0),"inverse":e.program(12,o,0),"loc":{"start":{"line":11,"column":2},"end":{"line":15,"column":9}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"canUnreserve"):t,{"name":"if","hash":{},"fn":e.program(14,o,0),"inverse":e.noop,"loc":{"start":{"line":16,"column":2},"end":{"line":18,"column":9}}}))?s:"")},"8":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <button type="button" title="'+e.escapeExpression((s=null!=(s=l(i,"reservedTooltip")||(null!=t?l(t,"reservedTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"reservedTooltip","hash":{},"loc":{"start":{"line":9,"column":33},"end":{"line":9,"column":52}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"reservedAria")||(null!=t?l(t,"reservedAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"reservedAria","hash":{},"loc":{"start":{"line":9,"column":66},"end":{"line":9,"column":82}}}):s))+'" class="csui-unreserve-cellview">\r\n'},"10":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span title="'+e.escapeExpression((s=null!=(s=l(i,"reservedTooltip")||(null!=t?l(t,"reservedTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"reservedTooltip","hash":{},"loc":{"start":{"line":12,"column":19},"end":{"line":12,"column":38}}}):s))+'" class="icon icon-reserved_other"></span>\r\n'},"12":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <span title="'+e.escapeExpression((s=null!=(s=l(i,"reservedTooltip")||(null!=t?l(t,"reservedTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"reservedTooltip","hash":{},"loc":{"start":{"line":14,"column":19},"end":{"line":14,"column":38}}}):s))+'" class="icon icon-reserved_self"></span>\r\n'},"14":function(e,t,i,n,o){return"    </button>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"reservedSharedCollaboration"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(6,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":19,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_table_cells_reservation_impl_reservation",n),n}),csui.define("csui/controls/table/cells/reservation/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/table/cells/reservation/impl/nls/root/lang",{"reservedTooltip":"Reserved by {0}\r\n{1}","reservedAria":"Reserved by {0} at {1}, click to unreserve","reservedSharedCollaborationTooltip":"Shared for collaboration by {0}\r\n{1}","reservedSharedCollaborationAria":"Shared for collaboration by {0} at {1}"}),csui.define("css!csui/controls/table/cells/reservation/impl/reservation",[],function(){}),csui.define("csui/controls/table/cells/reservation/reservation.view",["csui/lib/jquery","csui/lib/underscore","csui/utils/base","csui/utils/log","csui/utils/contexts/factories/user","csui/models/nodes","csui/models/nodechildren","csui/controls/table/cells/templated/templated.view","csui/utils/commands","csui/utils/commands/unreserve","csui/utils/commandhelper","csui/controls/table/cells/cell.registry","hbs!csui/controls/table/cells/reservation/impl/reservation","i18n!csui/controls/table/cells/reservation/impl/nls/lang","css!csui/controls/table/cells/reservation/impl/reservation"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p){"use strict";return r.extend({"template":h,"triggers":{"click .csui-unreserve-cellview":"remove:reservation"},"events":{"keydown":"onKeyInView"},"getValueData":function(){var e=this.model.get("reserved_user_id");e&&"object"==typeof e&&(e=e.id);var n,o=this.model.get("reserved")&&e,s=this.model.get("reserved_shared_collaboration"),l=!1;if(o){var r=this.model.get("reserved_user_id_expand")||this.model.get("reserved_user_id");n=i.formatMemberName(r),l=this.userId!==e}var a,c,u=i.formatExactDate(this.model.get("reserved_date"));i.formatMemberName(n);return s?(a=p.reservedSharedCollaborationTooltip,c=p.reservedSharedCollaborationAria):o&&(a=p.reservedTooltip,c=p.reservedAria),a&&(a=t.str.sformat(a,n,u)),c&&(c=t.str.sformat(c,n,u)),{"reservedTooltip":a,"reservedAria":c,"canUnreserve":this.canUnreserve,"reserved":o,"isReservedByOther":l,"reservedSharedCollaboration":s}},"initialize":function(){var e=this.options.context.getModel(o);this.userId=e.get("id"),this.unreserveCommand=new c,this.commandStatus={"nodes":new s([this.model]),"context":this.options.context},this._checkEnabledAction();var t=this.model.collection.delayedActions;t&&this.listenTo(t,"sync",this._checkEnabledAction)},"_checkEnabledAction":function(){this.canUnreserve=this.unreserveCommand.enabled(this.commandStatus),this.isDestroyed||this.render()},"onRemoveReservation":function(e){var t;this.canUnreserve&&(t=this.unreserveCommand.execute(this.commandStatus),u.handleExecutionResults(t,{"command":this.unreserveCommand,"suppressSuccessMessage":this.commandStatus.suppressSuccessMessage,"suppressFailMessage":this.commandStatus.suppressFailMessage}))},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||this.onRemoveReservation()}},{"hasFixedWidth":!0,"columnClassName":"csui-table-cell-reservation","getModelExpand":function(e){return{"properties":["reserved_user_id"]}}})}),csui.define("hbs!csui/controls/node.state/impl/reservation/reservation",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"canUnreserve"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":2},"end":{"line":4,"column":9}}}))?s:"")+'      <span title="'+e.escapeExpression((l=null!=(l=r(i,"reservedTooltip")||(null!=t?r(t,"reservedTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"reservedTooltip","hash":{},"loc":{"start":{"line":5,"column":19},"end":{"line":5,"column":38}}}):l))+'"'+(null!=(s=r(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"canUnreserve"):t,{"name":"unless","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":39},"end":{"line":5,"column":104}}}))?s:"")+' class="icon '+e.escapeExpression((l=null!=(l=r(i,"iconPrefix")||(null!=t?r(t,"iconPrefix"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"iconPrefix","hash":{},"loc":{"start":{"line":5,"column":117},"end":{"line":5,"column":131}}}):l))+"_"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isReservedByOther"):t,{"name":"if","hash":{},"fn":e.program(6,o,0),"inverse":e.program(8,o,0),"loc":{"start":{"line":5,"column":132},"end":{"line":5,"column":181}}}))?s:"")+'"></span>\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"canUnreserve"):t,{"name":"if","hash":{},"fn":e.program(10,o,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":2},"end":{"line":8,"column":9}}}))?s:"")},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <button title="'+e.escapeExpression((s=null!=(s=l(i,"reservedTooltip")||(null!=t?l(t,"reservedTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"reservedTooltip","hash":{},"loc":{"start":{"line":3,"column":19},"end":{"line":3,"column":38}}}):s))+'" type="button" tabindex="-1" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"canUnreserveAria")||(null!=t?l(t,"canUnreserveAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"canUnreserveAria","hash":{},"loc":{"start":{"line":3,"column":80},"end":{"line":3,"column":100}}}):s))+'">\r\n'},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-label="'+e.escapeExpression((s=null!=(s=l(i,"reservedAria")||(null!=t?l(t,"reservedAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"reservedAria","hash":{},"loc":{"start":{"line":5,"column":76},"end":{"line":5,"column":92}}}):s))+'"'},"6":function(e,t,i,n,o){return"other"},"8":function(e,t,i,n,o){return"self"},"10":function(e,t,i,n,o){return"    </button>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isReserved"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":9,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_node.state_impl_reservation_reservation",n),n}),csui.define("csui/controls/node.state/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/node.state/nls/root/lang",{"reservedTooltip":"Reserved by {0}\r\n{1}","reservedAria":"Reserved by {0} at {1}","canUnreserveAria":"Reserved by {0} at {1}, click to unreserve","reservedSharedCollaborationTooltip":"Shared for collaboration by {0}\r\n{1}","reservedSharedCollaborationAria":"Shared for collaboration by {0} at {1}","reserved_attribute_title":"Reserved","reserved_attribute_name":"reserved","reserved_shared_collaboration_attribute_title":"Shared for collaboration","reserved_shared_collaboration_attribute_name":"reserved_shared_collaboration"}),csui.define("css!csui/controls/node.state/impl/reservation/reservation",[],function(){}),csui.define("csui/controls/node.state/impl/reservation/reservation.view",["csui/lib/underscore","csui/lib/marionette","csui/utils/base","csui/utils/contexts/factories/user","csui/models/nodes","csui/utils/commands","csui/utils/commandhelper","hbs!csui/controls/node.state/impl/reservation/reservation","i18n!csui/controls/node.state/nls/lang","css!csui/controls/node.state/impl/reservation/reservation"],function(e,t,i,n,o,s,l,r,a){"use strict";return t.ItemView.extend({"tagName":"li","className":"csui-node-state-reservation","template":r,"templateHelpers":function(){var t,n,o,s,l=this._getReservedStatus(),r=l.isReserved,c=l.isSharedCollaboration,u=l.reservedBy;if(r){var d=i.formatExactDate(this.model.get("reserved_date")),h=i.formatMemberName(u);c?(t=a.reservedSharedCollaborationTooltip,n=a.reservedSharedCollaborationAria):(t=a.reservedTooltip,n=a.reservedAria,o=a.canUnreserveAria),this.options.reservedByLabel&&(t=!1===l.canUnreserve?"":this.options.reservedByLabel),t&&(t=e.str.sformat(t,h,d)),n&&(n=e.str.sformat(n,h,d)),o&&(o=e.str.sformat(o,h,d)),s=c?"icon-shared_collaborate":"icon-reserved"}return this._reservedStatus={"isReserved":r,"isSharedCollaboration":c,"isReservedByOther":u&&this.userId!==u.id,"canUnreserve":l.canUnreserve,"canUnreserveAria":o,"reservedTooltip":t,"reservedAria":n,"iconPrefix":s},this._reservedStatus},"triggers":{"click button":"remove:reservation"},"constructor":function(){t.ItemView.prototype.constructor.apply(this,arguments);var e=this.options.context.getModel(n);this.userId=e.get("id"),void 0===this.userId&&this.listenToOnce(e,"sync",function(){this.userId=e.get("id"),this.render()}),this.unreserveCommand=s.get("UnreserveDoc"),this.commandStatus={"nodes":new o([this.model]),"context":this.options.context};var i=this.model.actions;i&&this.listenTo(i,"update",function(){this._isDestroyed||this.render()})},"onRemoveReservation":function(e){if(this._reservedStatus.canUnreserve){var t=this.unreserveCommand,i=t.execute(this.commandStatus);l.handleExecutionResults(i,{"command":t,"suppressSuccessMessage":this.commandStatus.suppressSuccessMessage,"suppressFailMessage":this.commandStatus.suppressFailMessage})}},"_getReservedStatus":function(){var e=this.model.get("reserved"),t=this.model.get("reserved_shared_collaboration"),i=this.model.get("reserved_user_id_expand"),n=this.unreserveCommand.enabled(this.commandStatus);return i||(i=this.model.get("reserved_user_id"))&&"number"==typeof i&&(i={"id":i}),{"isReserved":e&&void 0!==i||t,"isSharedCollaboration":t,"reservedBy":i,"canUnreserve":n}},"getAttributes":function(){var e,t,i=this.templateHelpers();return i.isSharedCollaboration?(e=a.reserved_shared_collaboration_attribute_title,t=a.reserved_shared_collaboration_attribute_name):(e=a.reserved_attribute_title,t=a.reserved_attribute_name),[{"label":e,"value":i.isReserved,"name":t,"tooltip":i.reservedTooltip,"aria":i.reservedAria}]}},{"enabled":function(e){var t=e.node,i=t.get("reserved"),n=t.get("reserved_shared_collaboration"),o=t.get("reserved_user_id");return i&&o&&(!t.has("versions")||!1!==t.get("versions").current_version)||n},"getModelExpand":function(e){return{"properties":["reserved_user_id"]}}})}),csui.define("hbs!csui/controls/node.state/impl/locked/impl/locked",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"canUnlock"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":2},"end":{"line":4,"column":9}}}))?s:"")+'      <span title="'+e.escapeExpression((l=null!=(l=r(i,"lockedTooltip")||(null!=t?r(t,"lockedTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"lockedTooltip","hash":{},"loc":{"start":{"line":5,"column":19},"end":{"line":5,"column":36}}}):l))+'" class="csui-icon-locked"> '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"small","iconName":"csui_mime_locked24"},"loc":{"start":{"line":5,"column":64},"end":{"line":5,"column":134}}}))?s:"")+" </span>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"canUnlock"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":2},"end":{"line":8,"column":9}}}))?s:"")},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <button type="button" title="'+e.escapeExpression((s=null!=(s=l(i,"lockedTooltip")||(null!=t?l(t,"lockedTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"lockedTooltip","hash":{},"loc":{"start":{"line":3,"column":33},"end":{"line":3,"column":50}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"lockedAria")||(null!=t?l(t,"lockedAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"lockedAria","hash":{},"loc":{"start":{"line":3,"column":64},"end":{"line":3,"column":78}}}):s))+'" class="csui-unlock-cellview">\r\n'},"4":function(e,t,i,n,o){return"    </button>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"locked"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":9,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_node.state_impl_locked_impl_locked",n),n}),csui.define("csui/controls/node.state/impl/locked/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/node.state/impl/locked/impl/nls/root/lang",{"lockedTooltip":"Locked by {0}\r\n{1}","lockedAria":"Locked by {0} at {1}"}),csui.define("css!csui/controls/node.state/impl/locked/impl/locked",[],function(){}),csui.define("csui/controls/node.state/impl/locked/locked.view",["csui/lib/underscore","csui/lib/marionette3","csui/utils/base","csui/utils/contexts/factories/user","csui/models/nodes","csui/utils/commandhelper","csui/utils/commands/compound.document/unlock","hbs!csui/controls/node.state/impl/locked/impl/locked","i18n!csui/controls/node.state/impl/locked/impl/nls/lang","css!csui/controls/node.state/impl/locked/impl/locked"],function(e,t,i,n,o,s,l,r,a){"use strict";return t.View.extend({"tagName":"li","className":"csui-node-state-locked","template":r,"templateContext":function(){var t,n,o,s,l,r=this.model.get("locked"),c=!1;return r&&(n=this.model.get("locked_user_id_expand"),c=this.userId!==this.model.get("locked_user_id"),t=i.formatExactDate(this.model.get("locked_date")),n&&(s=n.name,o=e.str.sformat(a.lockedTooltip,n.name,t),l=e.str.sformat(a.lockedAria,n.name,t))),this.lockedStatus={"locked":r,"lockedUser":s,"lockedTooltip":o,"lockedAria":l,"canUnlock":this.canUnlock||!c},this.lockedStatus},"triggers":{"click button":"remove:lock"},"constructor":function(){t.View.prototype.constructor.apply(this,arguments)},"initialize":function(){var e=this.options.context.getModel(n);this.userId=e.get("id"),this.commandStatus={"nodes":new o([this.model]),"context":this.options.context},this.unlockCommand=new l,this.canUnlock=this.unlockCommand.enabled(this.commandStatus)},"onRemoveLock":function(){var e;this.lockedStatus.canUnlock&&(e=this.unlockCommand.execute(this.commandStatus),s.handleExecutionResults(e,{"command":this.unlockCommand,"suppressSuccessMessage":this.commandStatus.suppressSuccessMessage,"suppressFailMessage":this.commandStatus.suppressFailMessage}))}},{"enabled":function(t){var i=t.node;return!!e.contains([138,139],i.get("type"))&&i.has("locked")&&i.get("locked")},"getModelExpand":function(e){return{"properties":["locked_user_id"]}}})}),csui.define("csui/controls/node.state/impl/node.state.icons",["csui/controls/node.state/impl/reservation/reservation.view","csui/controls/node.state/impl/locked/locked.view"],function(e,t){"use strict";return[{"sequence":50,"iconView":e},{"sequence":60,"iconView":t}]}),csui.define("hbs!csui/controls/thumbnail/impl/metadata/thumbnail.metadata",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="csui-thumbnail-metadata-label" title="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":2,"column":53},"end":{"line":2,"column":62}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":2,"column":64},"end":{"line":2,"column":73}}}):s))+'</span>\r\n  <span class="csui-thumbnail-metadata-spacer"></span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"displayHeader"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":4,"column":7}}}))?s:"")+'<span class="csui-thumbnail-metadata-val">'+e.escapeExpression((l=null!=(l=r(i,"value")||(null!=t?r(t,"value"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":5,"column":42},"end":{"line":5,"column":51}}}):l))+"</span>"}});return i.registerPartial("csui_controls_thumbnail_impl_metadata_thumbnail.metadata",n),n}),csui.define("csui/controls/thumbnail/impl/metadata/thumbnail.metadata.view",["csui/lib/underscore","csui/lib/marionette","csui/utils/types/date","hbs!csui/controls/thumbnail/impl/metadata/thumbnail.metadata"],function(e,t,i,n){"use strict";var o=t.ItemView.extend({"className":"csui-thumbnail-item-details binf-col-lg-12","template":n,"templateHelpers":function(){this.$el.attr("role","listitem");var e=this.getValueData();return{"displayHeader":this.model.get("noTitleHeader"),"label":this.model.get("key"),"value":e}},"getValueData":function(){var e=this.options.thumbnailItemModel,t=this.model.get("key"),n=this.model.get("column_type"),o=e.get(t);if("date"===n){o=(!1!==this.model.get("include_time")?i.formatExactDateTime:i.formatExactDate)(o)}return o}});return t.CollectionView.extend({"className":"csui-thumbnail-metadata","childView":o,"childViewOptions":function(){return{"rowId":this.options.rowId,"thumbnailItemModel":this.model}},"filter":function(e,t,i){return"size"===e.get("key")?this.model.get(e.get("key"))&&""!==this.model.get(e.get("key")+"_formatted"):this.model.get(e.get("key"))&&""!==this.model.get(e.get("key"))},"onRender":function(){this.collection;this.bindUIElements()}})});csui.define("csui/controls/thumbnail/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/thumbnail/impl/nls/root/lang",{"addTitle":"Add","searchIconTooltip":"Search by {0}","selectAll":"Select all","selectAllTitle":"Select all items","noResults":"No item to display.","noSearchResults":"No results found.","dragAndDropMessage":"Drag and drop files here to add new content","items":"Items","formatForNone":"{0} items","formatForOne":"{0} item","formatForTwo":"{0} items","formatForFive":"{0} items","asc_name":"Name (A-Z)","desc_name":"Name (Z-A)","asc_modify_date":"Modified (new-old)","desc_modify_date":"Modified (old-new)","asc_size":"Size (small-large)","desc_size":"Size (large-small)","name":"Name","modified":"Modified","size":"Size","selectItem":"Select {0}","selectItemAria":"Select {0}. When selected an action bar of options can be reached per shift-tab","noPermissions":"You don't have permissions to add items to this location.","sortAscending":"Descending order - Click to sort ascending","sortAscendingAria":"{0} in descending order - Sort ascending","sortDescending":"Ascending order - Click to sort descending","sortDescendingAria":"{0} in ascending order - sort descending","sortBy":"Sort by {0}","sortByAria":"Sort By menu - {0} selected","MasterCompoundDocumentLabel":"Master"}),csui.define("hbs!csui/controls/thumbnail/impl/sort/impl/sort.menu",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <li role="presentation">\r\n          <a role="menuitem" href="#" class="csui-sort-option" data-binf-toggle="tab">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"selected"):t,{"name":"if","hash":{},
"fn":e.program(2,o,0),"inverse":e.program(4,o,0),"loc":{"start":{"line":14,"column":8},"end":{"line":18,"column":15}}}))?s:"")+'        <span class="cs-label" title="'+e.escapeExpression(e.lambda(null!=t?l(t,"value"):t,t))+'" data-sortbyid="'+e.escapeExpression(e.lambda(null!=t?l(t,"key"):t,t))+'">'+e.escapeExpression(e.lambda(null!=t?l(t,"value"):t,t))+" </span></a>\r\n      </li>\r\n"},"2":function(e,t,i,n,o){return'          <span class="cs-icon icon-listview-checkmark"></span>\r\n'},"4":function(e,t,i,n,o){return'          <span class="cs-icon "></span>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-search-sort-options">\r\n  <button id="'+e.escapeExpression((l=null!=(l=r(i,"id")||(null!=t?r(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":2,"column":14},"end":{"line":2,"column":20}}}):l))+'" type="button" class="binf-btn binf-btn-default binf-dropdown-toggle"\r\n          title="'+e.escapeExpression((l=null!=(l=r(i,"sortByTooltip")||(null!=t?r(t,"sortByTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"sortByTooltip","hash":{},"loc":{"start":{"line":3,"column":17},"end":{"line":3,"column":34}}}):l))+'" data-binf-toggle="dropdown" aria-haspopup="true"\r\n          aria-label="'+e.escapeExpression((l=null!=(l=r(i,"sortByAria")||(null!=t?r(t,"sortByAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"sortByAria","hash":{},"loc":{"start":{"line":4,"column":22},"end":{"line":4,"column":36}}}):l))+'" aria-expanded="false">\r\n    <span class="cs-label">'+e.escapeExpression((l=null!=(l=r(i,"selectedValue")||(null!=t?r(t,"selectedValue"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"selectedValue","hash":{},"loc":{"start":{"line":5,"column":27},"end":{"line":5,"column":44}}}):l))+'</span>\r\n    <span class="csui-button-icon icon-caret-down"></span>\r\n  </button>\r\n  <span class="csui-sort-arrow '+e.escapeExpression((l=null!=(l=r(i,"selectedArrowClass")||(null!=t?r(t,"selectedArrowClass"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"selectedArrowClass","hash":{},"loc":{"start":{"line":8,"column":31},"end":{"line":8,"column":53}}}):l))+'" title="'+e.escapeExpression((l=null!=(l=r(i,"selectedArrowTooltip")||(null!=t?r(t,"selectedArrowTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"selectedArrowTooltip","hash":{},"loc":{"start":{"line":8,"column":62},"end":{"line":8,"column":86}}}):l))+'"\r\n        aria-label="'+e.escapeExpression((l=null!=(l=r(i,"selectedArrowAria")||(null!=t?r(t,"selectedArrowAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"selectedArrowAria","hash":{},"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":41}}}):l))+'" role="button" tabindex="0"></span>\r\n  <ul class="binf-dropdown-menu" role="menu">\r\n'+(null!=(s=r(i,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"sortListArray"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":11,"column":4},"end":{"line":21,"column":13}}}))?s:"")+"  </ul>\r\n</div>\r\n"}});return i.registerPartial("csui_controls_thumbnail_impl_sort_impl_sort.menu",n),n}),csui.define("csui/controls/thumbnail/impl/sort/sort.view",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","i18n!csui/controls/thumbnail/impl/nls/lang","hbs!csui/controls/thumbnail/impl/sort/impl/sort.menu","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/mixins/view.state/node.view.state.mixin","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/lib/binf/js/binf"],function(e,t,i,n,o,s,l,r,a,c,u,d){var h=s.ItemView.extend({"className":"cs-sort-links","template":a,"constants":{"SORT_ASC":"asc","SORT_DESC":"desc"},"templateHelpers":function(){var e=this;n.any(this.sortMenu,function(t){return t.value===e.actualValue?t.selected=!0:t.selected=!1},e);return{"id":n.uniqueId("sortButton"),"selectedValue":e.selectedValue,"sortListArray":this.sortMenu,"sortByTooltip":n.str.sformat(r.sortBy,e.selectedValue),"sortByAria":n.str.sformat(r.sortByAria,e.selectedValue),"selectedArrowClass":e.selectedArrow,"selectedArrowTooltip":"icon-sortArrowUp"===e.selectedArrow?r.sortDescending:r.sortAscending,"selectedArrowAria":"icon-sortArrowUp"===e.selectedArrow?n.str.sformat(r.sortDescendingAria,e.selectedValue):n.str.sformat(r.sortAscendingAria,e.selectedValue)}},"ui":{"sortOrderBtn":".csui-search-sort-options span.csui-sort-arrow","dropdownToggle":".binf-dropdown-toggle","dropdown":".binf-dropdown-menu"},"events":{"click .binf-dropdown-menu > li > a":"onSortOptionClick","click @ui.sortOrderBtn":"onSortOrderClick","keydown @ui.sortOrderBtn":"onKeyInView"},"constructor":function(e){s.ItemView.prototype.constructor.call(this,e);var t={},i=[];this.context=this.options.resultView.options.context;var o=this.collection.orderBy?this.collection.orderBy.split(" ")[0]:this.context&&this.context.viewStateModel.getViewState("order_by")&&this.context.viewStateModel.getViewState("order_by").split("_")[0],l=o||r.name;l=l.toLowerCase(),0===Object.keys(t).length&&(n.each(this.options.resultView.options.allColumns,function(e){e.attributes&&!0===e.attributes.sort&&(t[e.attributes.key]=e.attributes.name)}),n.each(t,function(e,t){i.push({"key":t,"value":e,"selected":!1})})),this.sortMenu=i;var a=this.OverlapDisplayText(t[l]);this.selectedValue=a,this.actualValue=this.options.collection.sortname?this.options.collection.sortname:r.name,this.selectedArrow=this.collection.orderBy?this.options.collection.orderstate:"icon-sortArrowUp",this.selectedId=o||"name",this.config=this.options.config||{}},"onSortOptionClick":function(e){e.preventDefault(),e.stopPropagation(),this.$el.find(".csui-search-sort-options li>a").removeClass("binf-active"),this.$el.find(".csui-search-sort-options li>a>span").removeClass("icon-listview-checkmark"),this.$(e.currentTarget).addClass("binf-active"),this.resetSelection(i(e.currentTarget.children[1]).attr("data-sortbyid"),e.currentTarget.children[1].innerHTML.trim()),this.options.resultView.isSortOrderClicked=!1},"resetSelection":function(e,t){this.collection.setOrder(e+" "+this.constants.SORT_ASC),[].push(e+" "+this.constants.SORT_ASC),this.setDefaultOrderBy(),this.selectedValue=t,this.actualValue=t,this.selectedArrow="icon-sortArrowUp",this.options.collection.selectedId=e,this.options.collection.sortname=t,this.options.collection.state=e+" "+this.constants.SORT_ASC,this.options.collection.orderstate=this.selectedArrow,this.options.collection.sort_state=this.options.collection.orderBy;var i=this;this.options.collection.fetch({"silent":!0}).then(function(){i.trigger("render:sortmenu",i.options.collection.state),i.$el.find(".binf-dropdown-toggle >span.cs-label").innerText=t,i.$el.find(".csui-sort-option.binf-active >span.cs-icon").addClass("icon-listview-checkmark");var e=i.OverlapDisplayText(t);i.$el.find(".binf-dropdown-toggle >span.cs-label").html(e),i.$el.find(".csui-search-sort-options").removeClass("binf-open")},i)},"OverlapDisplayText":function(e){return e},"onKeyInView":function(e){13!==e.keyCode&&32!==e.keyCode||this.onSortOrderClick()},"onSortOrderClick":function(e){if(this.ui.sortOrderBtn.hasClass("icon-sortArrowDown"))this.resetSelection(this.selectedId,this.selectedValue);else{var t=this.getViewStateOrderBy()?this.getViewStateOrderBy().split(" ")[0]:this.selectedValue.toLowerCase();this.collection.setOrder(t+" "+this.constants.SORT_DESC);[].push(t+" "+this.constants.SORT_DESC),this.setDefaultOrderBy(),this.options.collection.sort_state=t+" "+this.constants.SORT_DESC,this.options.collection.selectedId=t,this.selectedArrow="icon-sortArrowDown",this.options.collection.orderstate=this.selectedArrow,this.OverlapDisplayText(this.sortMenu[t])}this.options.resultView.isSortOrderClicked=!0},"setDefaultOrderBy":function(){if(l.debug("Setting default view state order"),this.context&&this.context.viewStateModel.get("enabled")){var e=this.collection.orderBy,t=!1;if(this.getViewStateOrderBy()||(t=!0),e.length>0&&this.setViewStateOrderBy([e],{"default":t}))return!0}},"onRender":function(){var e=this,t=c.usePerfectScrollbar();e.$el.find(".csui-search-sort-options li>a span.cs-label").each(function(){i(this).text().trim()===e.selectedValue&&(e.$el.find(".csui-search-sort-options li>a>span").removeClass("icon-listview-checkmark"),i(this).siblings().addClass("icon-listview-checkmark"))},e),e.ui.dropdownToggle.on("binf.dropdown.after.show",function(){t?(e.ui.dropdown.addClass("csui-perfect-scrolling"),e.ui.dropdown.perfectScrollbar({"suppressScrollX":!0,"includePadding":!0})):e.ui.dropdown.addClass("csui-normal-scrolling csui-no-scroll-x")})}});return n.extend(h.prototype,u),h}),csui.define("csui/controls/thumbnail/content/content.registry",["csui/lib/underscore"],function(e){function t(){this._contentKeys={},this._dataTypes={}}return e.extend(t.prototype,{"getContentView":function(e){if("type"!==e.get("column_type_identifier")){var t=e.get("key"),i=t&&this._contentKeys[t];if(i)return i}var n=e.get("type");return n&&this._dataTypes[n.toString()]},"registerByKey":function(t,i){if(!e.isString(t)||!t)throw new Error("Key must be a non-empty string");this._registerContentView(this._contentKeys,t,i)},"registerByDataType":function(t,i){if(!e.isNumber(t)||!t)throw new Error("Data type must be a non-zero number");this._registerContentView(this._dataTypes,t.toString(),i)},"_registerContentView":function(e,t,i){if("function"!=typeof i)throw new Error("Column handler must be a function object");e[t]=i}}),new t}),csui.define("hbs!csui/controls/thumbnail/content/text/impl/text",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-thumbnail-label csui-thumbnail-text-label" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":2,"column":74},"end":{"line":2,"column":83}}}):s))+'">\r\n    <span>'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":3,"column":10},"end":{"line":3,"column":19}}}):s))+"</span>\r\n  </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"displayLabel"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":5,"column":7}}}))?s:"")+'<div class="csui-thumbnail-value">\r\n  <p class="csui-thumbnail-content-text '+e.escapeExpression((l=null!=(l=r(i,"className")||(null!=t?r(t,"className"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"className","hash":{},"loc":{"start":{"line":7,"column":40},"end":{"line":7,"column":53}}}):l))+'" title="'+e.escapeExpression((l=null!=(l=r(i,"value")||(null!=t?r(t,"value"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":7,"column":62},"end":{"line":7,"column":71}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"value")||(null!=t?r(t,"value"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":7,"column":85},"end":{"line":7,"column":94}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"value")||(null!=t?r(t,"value"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":7,"column":96},"end":{"line":7,"column":105}}}):l))+"</p>\r\n</div>\r\n"}});return i.registerPartial("csui_controls_thumbnail_content_text_impl_text",n),n}),csui.define("css!csui/controls/thumbnail/content/text/impl/text",[],function(){}),csui.define("csui/controls/thumbnail/content/text/text.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","i18n!csui/controls/thumbnail/impl/nls/lang","hbs!csui/controls/thumbnail/content/text/impl/text","css!csui/controls/thumbnail/content/text/impl/text"],function(e,t,i,n,o,s,l){var r=i.extend({"multiValueSeparator":", "},e.config());return o.ItemView.extend({"className":"csui-thumbnail-generic","template":l,"templateHelpers":function(){var e=this.getValueText(),t=this.options.column;return{"value":e,"displayLabel":this.options.displayLabel,"className":"order"===this.options.column.name&&isNaN(e)?"csui-master-order-column":"","label":this.options.displayLabel?t.title||t.name:""}},"getValueText":function(){var e=this.options.column;if(e){var t=e.name,i=this.model,n=i.get(t+"_formatted");return null!==n&&void 0!==n||(n=i.get(t),null!==(n="order"===t&&0===n?s.MasterCompoundDocumentLabel:n)&&void 0!==n||(n="")),this.getSingleOrMultipleValueText(n)}return""},"getSingleOrMultipleValueText":function(e,t){return t=this._validateFormater(t),Array.isArray(e)?this.concatenateTextValues(e,t):t(e)},"concatenateTextValues":function(e,t){return t=this._validateFormater(t),e.map(t).join(r.multiValueSeparator)},"_validateFormater":function(e){return e||function(e){return e}},"constructor":function(e){e||(e={}),o.ItemView.prototype.constructor.apply(this,arguments)}})}),csui.define("csui/controls/thumbnail/content/favorite/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/thumbnail/content/favorite/impl/nls/root/localized.strings",{"ColumnTitle":"Favorite"}),csui.define("hbs!csui/controls/thumbnail/content/favorite/impl/favorite",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<span class="csui-thumbnail-favorite"></span>'}});return i.registerPartial("csui_controls_thumbnail_content_favorite_impl_favorite",n),n}),csui.define("css!csui/controls/thumbnail/content/favorite/impl/favorite",[],function(){}),csui.define("csui/controls/thumbnail/content/favorite/favorite.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/widgets/favorites/favorite.star.view","csui/controls/thumbnail/content/content.registry","i18n!csui/controls/thumbnail/content/favorite/impl/nls/localized.strings","hbs!csui/controls/thumbnail/content/favorite/impl/favorite","css!csui/controls/thumbnail/content/favorite/impl/favorite"],function(e,t,i,n,o,s,l,r){"use strict";var a=n.LayoutView.extend({"template":r,"className":"csui-thumbnail-favorite-container","regions":{"favRegion":".csui-thumbnail-favorite"},"constructor":function(e){e||(e={}),n.LayoutView.prototype.constructor.call(this,e)},"onRender":function(){this.favStarView||(this.favStarView=new o(t.extend({"checkVisible":!0,"popoverAtBodyElement":!0,"focusable":!0},this.options)),this.favRegion.show(this.favStarView)),this.listenTo(this.favStarView,"show:add:favorite:form",function(){this.triggerMethod("show:add:favorite:form")}),this.listenTo(this.favStarView,"close:add:favorite:form",function(){this.triggerMethod("close:add:favorite:form")}),this.favStarView.render(),this.$el.append(this.favStarView.el),this.listenTo(this.options.originatingView&&this.options.originatingView.thumbnail,"scroll",function(){this.favStarView&&this.favStarView.closePopover()})}});return s.registerByKey("favorite",a),a}),csui.define("hbs!csui/controls/thumbnail/content/node.state/impl/node.state",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-thumbnail-nodestate"></div>'}});return i.registerPartial("csui_controls_thumbnail_content_node.state_impl_node.state",n),n}),csui.define("csui/controls/thumbnail/content/node.state/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/thumbnail/content/node.state/impl/nls/root/localized.strings",{"stateListAria":"List of states","someStateIconsAria":"State available","noStateIconsAria":"No state","bool_value_true":"true","bool_value_false":"false","reservedTooltip":"Reserved by {0}\r\n{1}","reservedAria":"Reserved by {0} at {1}, click to unreserve","reservedSharedCollaborationTooltip":"Shared for collaboration by {0}\r\n{1}","reservedSharedCollaborationAria":"Shared for collaboration by {0} at {1}","reserved_attribute_title":"Reserved","reserved_attribute_name":"reserved","reserved_shared_collaboration_attribute_title":"Shared for collaboration","reserved_shared_collaboration_attribute_name":"reserved_shared_collaboration","nodeStateTitle_thumbnail":"Open info panel to see status icons"}),csui.define("csui/controls/thumbnail/content/node.state/node.state.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/controls/thumbnail/content/content.registry","csui/controls/node.state/node.states.view","csui/controls/node.state/node.state.icons","csui/models/mixins/v2.fields/v2.fields.mixin","hbs!csui/controls/thumbnail/content/node.state/impl/node.state","i18n!csui/controls/thumbnail/content/node.state/impl/nls/localized.strings"],function(e,t,i,n,o,s,l,r,a,c,u){"use strict";var d=n.LayoutView.extend({"template":c,"className":"csui-thumbnail-nodestate-container","regions":{"nodeStateRegion":".csui-thumbnail-nodestate"},"events":{"keydown":"_onKeyInView"},"constructor":function(e){e||(e={}),this.options=e,n.LayoutView.prototype.constructor.call(this,e)},"onRender":function(){var e=this._getEnabledNodeStateIcons(),t=e.length?u.someStateIconsAria:u.noStateIconsAria,i=this.options.displayTitle?u.nodeStateTitle_thumbnail:"";if(this.el.setAttribute("aria-label",t),this.el.setAttribute("title",i),e.length){var n=new l({"context":this.options.context,"node":this.model,"tableView":this.options.originatingView,"targetView":this.options.targetView,"collection":e});this.nodeStateRegion.show(n),this.options.displayTitle&&n.$el.find("button").attr("tabindex","-1")}},"_onKeyInView":function(e){if(27===e.keyCode){e.preventDefault(),e.stopPropagation();this.$el.parents(".binf-popover").trigger("close:popover")}},"_getEnabledNodeStateIcons":function(){var e;return e=Object.getPrototypeOf(r),new e.constructor(r.filter(function(e){var t=e.get("iconView");try{return t&&(!t.enabled||t.enabled({"context":this.options.context,"node":this.model}))}catch(e){o.warn("Evaluating an icon view failed.\n{0}",e.message)&&console.warn(o.last)}},this))}});return s.registerByKey("reserved",d),d}),csui.define("csui/controls/thumbnail/content/name/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/thumbnail/content/name/impl/nls/root/localized.strings",{"ColumnTitle":"Name","nameAria":"{0}","nameNoOpenAria":"{0}. Can not be opened.","typeAndNameAria":"{0} {1}"}),csui.define("hbs!csui/controls/thumbnail/content/name/impl/name",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"defaultAction"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(7,o,0),"loc":{"start":{"line":2,"column":2},"end":{"line":11,"column":9}}}))?s:""},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"inactive"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.program(5,o,0),"loc":{"start":{"line":3,"column":4},"end":{"line":8,"column":11}}}))?s:""},"3":function(e,t,i,n,o){return'      <div class="csui-thumbnail-overview-icon csui-thumbnail-no-default-action"></div>\r\n'},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a href="'+e.escapeExpression((s=null!=(s=l(i,"defaultActionUrl")||(null!=t?l(t,"defaultActionUrl"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"defaultActionUrl","hash":{},"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":35}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"typeAndNameAria")||(null!=t?l(t,"typeAndNameAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"typeAndNameAria","hash":{},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":68}}}):s))+'"\r\n         class="csui-thumbnail-overview-icon csui-thumbnail-default-action" tabindex="0"></a>\r\n'},"7":function(e,t,i,n,o){return'    <div class="csui-thumbnail-overview-icon csui-thumbnail-no-default-action"></div>\r\n'},"9":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"inactive"):t,{"name":"if","hash":{},"fn":e.program(10,o,0),"inverse":e.program(12,o,0),"loc":{"start":{"line":14,"column":2},"end":{"line":31,"column":9}}}))?s:""},"10":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-thumbnail-name csui-thumbnail-name-'+e.escapeExpression((s=null!=(s=l(i,"cid")||(null!=t?l(t,"cid"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":15,"column":56},"end":{"line":15,"column":63}}}):s))+'">\r\n      <div class="csui-thumbnail-name-justify-div csui-thumbnail-no-default-action"  title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":16,"column":92},"end":{"line":16,"column":100}}}):s))+'"  aria-label="'+e.escapeExpression((s=null!=(s=l(i,"nameAria")||(null!=t?l(t,"nameAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"nameAria","hash":{},"loc":{"start":{"line":16,"column":115},"end":{"line":16,"column":127}}}):s))+'">\r\n        <span class="csui-thumbnail-name-value"  title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":17,"column":56},"end":{"line":17,"column":64}}}):s))+'"\r\n              aria-label="'+e.escapeExpression((s=null!=(s=l(i,"nameNoOpenAria")||(null!=t?l(t,"nameNoOpenAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"nameNoOpenAria","hash":{},"loc":{"start":{"line":18,"column":26},"end":{"line":18,"column":44}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":18,"column":46},"end":{"line":18,"column":54}}}):s))+"</span>\r\n      </div>\r\n    </div>\r\n"},"12":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-thumbnail-name csui-thumbnail-name-'+e.escapeExpression((s=null!=(s=l(i,"cid")||(null!=t?l(t,"cid"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":22,"column":56},"end":{"line":22,"column":63}}}):s))+'">\r\n      <a href="'+e.escapeExpression((s=null!=(s=l(i,"defaultActionUrl")||(null!=t?l(t,"defaultActionUrl"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"defaultActionUrl","hash":{},"loc":{"start":{"line":23,"column":15},"end":{"line":23,"column":35}}}):s))+'"\r\n         class="csui-thumbnail-name-value csui-thumbnail-default-action"  title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":24,"column":81},"end":{"line":24,"column":89}}}):s))+'"\r\n          aria-label="'+e.escapeExpression((s=null!=(s=l(i,"nameAria")||(null!=t?l(t,"nameAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"nameAria","hash":{},"loc":{"start":{"line":25,"column":22},"end":{"line":25,"column":34}}}):s))+'" tabindex="0">\r\n        <div class="csui-thumbnail-name-justify-div">\r\n          <span class="csui-thumbnail-name-link-text binf-line-clamp">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":27,"column":70},"end":{"line":27,"column":78}}}):s))+"</span>\r\n        </div>\r\n      </a>\r\n    </div>\r\n"},"14":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-thumbnail-name csui-thumbnail-name-'+e.escapeExpression((l=null!=(l=r(i,"cid")||(null!=t?r(t,"cid"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":33,"column":54},"end":{"line":33,"column":61}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"displayLabel"):t,{"name":"if","hash":{},"fn":e.program(15,o,0),"inverse":e.noop,"loc":{"start":{"line":34,"column":3},"end":{"line":38,"column":9}}}))?s:"")+'    <div class="csui-thumbnail-name-justify-div csui-thumbnail-no-default-action"  aria-label="'+e.escapeExpression((l=null!=(l=r(i,"nameAria")||(null!=t?r(t,"nameAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nameAria","hash":{},"loc":{"start":{"line":39,"column":95},"end":{"line":39,"column":107}}}):l))+'">\r\n      <span class="csui-thumbnail-name-value" \r\n            aria-label="'+e.escapeExpression((l=null!=(l=r(i,"nameNoOpenAria")||(null!=t?r(t,"nameNoOpenAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nameNoOpenAria","hash":{},"loc":{"start":{"line":41,"column":24},"end":{"line":41,"column":42}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":41,"column":44},"end":{"line":41,"column":52}}}):l))+"</span>\r\n    </div>\r\n  </div>\r\n"},"15":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-thumbnail-label csui-thumbnail-name-label" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":35,"column":76},"end":{"line":35,"column":85}}}):s))+'">\r\n      <span>'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":21}}}):s))+"</span>\r\n    </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"displayIcon"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":12,"column":7}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"defaultAction"):t,{"name":"if","hash":{},"fn":e.program(9,o,0),"inverse":e.program(14,o,0),"loc":{"start":{"line":13,"column":0},"end":{"line":44,"column":7}}}))?s:"")+"\r\n"}});return i.registerPartial("csui_controls_thumbnail_content_name_impl_name",n),n}),csui.define("css!csui/controls/thumbnail/content/name/impl/name",[],function(){}),csui.define("csui/controls/thumbnail/content/name/name.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/node-type.icon/node-type.icon.view","csui/utils/node.links/node.links","csui/controls/thumbnail/content/content.registry","i18n!csui/controls/thumbnail/content/name/impl/nls/localized.strings","hbs!csui/controls/thumbnail/content/name/impl/name","css!csui/controls/thumbnail/content/name/impl/name"],function(e,t,i,n,o,s,l,r,a){"use strict";var c=n.ItemView.extend({"template":a,"className":"csui-thumbnail-name-container","templateHelpers":function(){var e=this.options.column,i=this.model,n=i.get(e.name),o=s.getUrl(i),l=t.str.sformat(r.typeAndNameAria,i.get("type_name"),n);return{"cid":this.model.cid,"defaultAction":e.defaultAction,"defaultActionUrl":o,"contextualMenu":e.contextualMenu,"name":n,"nameAria":t.str.sformat(r.nameAria,n),"nameNoOpenAria":t.str.sformat(r.nameNoOpenAria,n),"inactive":i.get("inactive"),"displayIcon":this.options.displayIcon,"typeAndNameAria":l,"displayLabel":this.options.displayLabel,"label":this.options.displayLabel?e.title||e.name:""}},"events":{"keydown":"onKeyInView"},"constructor":function(e){e||(e={}),this.options=e,n.ItemView.prototype.constructor.apply(this,arguments),this.options.displayIcon&&this.listenTo(this,"render",this._createNodeTypeIcon).listenTo(this,"before:render",this._destroyNodeTypeIcon).listenTo(this,"before:destroy",this._destroyNodeTypeIcon)},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||this.model.inlineFormView||this.trigger("execute:defaultAction",e)},"_createNodeTypeIcon":function(){var e=new o({"node":this.model,"size":"xsmall"});this.typeIconRegion=new n.Region({"el":this.$(".csui-thumbnail-overview-icon")}),this.typeIconRegion.show(e)},"_destroyNodeTypeIcon":function(){this.typeIconRegion&&(this.typeIconRegion.empty(),this.typeIconRegion=null)},"onRender":function(){var e=this;this.$el.find(".csui-thumbnail-default-action").on("click."+this.cid,function(t){e.model.inlineFormView||e.trigger("execute:defaultAction",t)})}});return l.registerByKey("name",c),c}),csui.define("csui/controls/thumbnail/content/parent/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/thumbnail/content/parent/impl/nls/root/localized.strings",{"ColumnTitle":"Location","nameAria":"{0}","nameNoOpenAria":"{0}. Can not be opened."}),csui.define("hbs!csui/controls/thumbnail/content/parent/impl/parent",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-thumbnail-label csui-thumbnail-parent-label" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":2,"column":76},"end":{"line":2,"column":85}}}):s))+'">\r\n    <span>'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{
"start":{"line":3,"column":10},"end":{"line":3,"column":19}}}):s))+"</span>\r\n  </div>\r\n"},"3":function(e,t,i,n,o){return"csui-thumbnail-parent-default-action"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"displayLabel"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":5,"column":7}}}))?s:"")+'<div class="csui-thumbnail-parent '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"defaultActionUrl"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":6,"column":34},"end":{"line":6,"column":101}}}))?s:"")+'">\r\n  <span class="csui-thumbnail-parent-icon"></span>\r\n  <a href="'+e.escapeExpression((l=null!=(l=r(i,"defaultActionUrl")||(null!=t?r(t,"defaultActionUrl"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"defaultActionUrl","hash":{},"loc":{"start":{"line":8,"column":11},"end":{"line":8,"column":31}}}):l))+'" class="csui-parent-name" title="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":65},"end":{"line":8,"column":73}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":8,"column":75},"end":{"line":8,"column":83}}}):l))+"</a>\r\n</div>"}});return i.registerPartial("csui_controls_thumbnail_content_parent_impl_parent",n),n}),csui.define("css!csui/controls/thumbnail/content/parent/impl/parent",[],function(){}),csui.define("csui/controls/thumbnail/content/parent/parent.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/models/node/node.model","csui/controls/node-type.icon/node-type.icon.view","csui/utils/node.links/node.links","csui/utils/contexts/factories/next.node","csui/behaviors/default.action/default.action.behavior","csui/controls/thumbnail/content/content.registry","i18n!csui/controls/thumbnail/content/parent/impl/nls/localized.strings","hbs!csui/controls/thumbnail/content/parent/impl/parent","css!csui/controls/thumbnail/content/parent/impl/parent"],function(e,t,i,n,o,s,l,r,a,c,u,d){"use strict";var h=n.ItemView.extend({"template":d,"className":"csui-thumbnail-parent-container","behaviors":{"DefaultAction":{"behaviorClass":a}},"templateHelpers":function(){var e=this.parentModel.get("name"),t=l.getUrl(this.parentModel);return{"label":u.ColumnTitle,"name":e,"defaultActionUrl":t,"displayLabel":this.options.displayLabel}},"events":{"keydown":"onKeyInView","click .csui-thumbnail-parent-default-action":"onClickParentLocation"},"constructor":function(e){e||(e={}),this.options=e,n.ItemView.prototype.constructor.apply(this,arguments),this.options.displayIcon&&this.listenTo(this,"render",this._createNodeTypeIcon).listenTo(this,"before:render",this._destroyNodeTypeIcon).listenTo(this,"before:destroy",this._destroyNodeTypeIcon);var t=this.model.get("parent_id_expand");this.parentModel=new o(t,{"connector":this.model.connector})},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||this.onClickParentLocation()},"_createNodeTypeIcon":function(){var e=new s({"node":this.parentModel});this.typeIconRegion=new n.Region({"el":this.$(".csui-thumbnail-parent-icon")}),this.typeIconRegion.show(e)},"_destroyNodeTypeIcon":function(){this.typeIconRegion&&(this.typeIconRegion.empty(),this.typeIconRegion=null)},"onClickParentLocation":function(){this.triggerMethod("execute:defaultAction",this.parentModel)}});return c.registerByKey("parent_id",h),h}),csui.define("hbs!csui/controls/thumbnail/content/member/impl/member",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-thumbnail-user csui-thumbnail-user-'+e.escapeExpression((s=null!=(s=l(i,"cid")||(null!=t?l(t,"cid"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":1,"column":52},"end":{"line":1,"column":59}}}):s))+'">\r\n  <div class="csui-thumbnail-label csui-thumbnail-user-content-label" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":2,"column":82},"end":{"line":2,"column":91}}}):s))+'">\r\n    <span>'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":3,"column":10},"end":{"line":3,"column":19}}}):s))+'</span>\r\n  </div>\r\n  <div class="csui-thumbnail-value csui-thumbnail-user-content-justify-div">\r\n    <p class="csui-thumbnail-item-content-value" title="'+e.escapeExpression((s=null!=(s=l(i,"value")||(null!=t?l(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":6,"column":56},"end":{"line":6,"column":65}}}):s))+'"\r\n       aria-label="'+e.escapeExpression((s=null!=(s=l(i,"userNoOpenAria")||(null!=t?l(t,"userNoOpenAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"userNoOpenAria","hash":{},"loc":{"start":{"line":7,"column":19},"end":{"line":7,"column":37}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"value")||(null!=t?l(t,"value"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":7,"column":39},"end":{"line":7,"column":48}}}):s))+"</p>\r\n  </div>\r\n</div>"}});return i.registerPartial("csui_controls_thumbnail_content_member_impl_member",n),n}),csui.define("csui/controls/thumbnail/content/member/member.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/thumbnail/content/content.registry","hbs!csui/controls/thumbnail/content/member/impl/member"],function(e,t,i,n,o,s,l){"use strict";var r=n.ItemView.extend({"template":l,"className":"csui-thumbnail-user-container","templateHelpers":function(){var e,i=this.options.column.name,n=this.model.get(i+"_expand")||this.model.get(i)||"",s=this.options.contentModel.get("name");return e=t.isObject(n)?o.formatMemberName(n):this.model.get(i+"_formatted")||n.toString(),{"label":s,"value":e}},"constructor":function(e){e||(e={}),this.options=e,n.ItemView.prototype.constructor.apply(this,arguments)}});return s.registerByDataType(14,r),s.registerByDataType(19,r),s.registerByKey("owner_id",r),r}),csui.define("csui/controls/thumbnail/content/size/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/thumbnail/content/size/impl/nls/root/localized.strings",{"sizeLabel":"Size","ColumnTitle":"Size","formatForNone":"{0} items","formatForOne":"{0} item","formatForTwo":"{0} items","formatForFive":"{0} items","sizeUnavailable":"Size unavailable for {0}"}),csui.define("hbs!csui/controls/thumbnail/content/size/impl/size",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-thumbnail-label csui-thumbnail-size-label" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":3,"column":76},"end":{"line":3,"column":85}}}):s))+'">\r\n      <span>'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":4,"column":12},"end":{"line":4,"column":21}}}):s))+"</span>\r\n    </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-thumbnail-size csui-thumbnail-size-'+e.escapeExpression((l=null!=(l=r(i,"cid")||(null!=t?r(t,"cid"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":1,"column":52},"end":{"line":1,"column":59}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"displayLabel"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":2},"end":{"line":6,"column":9}}}))?s:"")+'  <div class="csui-thumbnail-value csui-thumbnail-size-justify-div">\r\n    <p class="csui-thumbnail-size-value" title="'+e.escapeExpression((l=null!=(l=r(i,"value")||(null!=t?r(t,"value"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":8,"column":48},"end":{"line":8,"column":57}}}):l))+'"\r\n       aria-label="'+e.escapeExpression((l=null!=(l=r(i,"value")||(null!=t?r(t,"value"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":9,"column":19},"end":{"line":9,"column":28}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"formattedValue")||(null!=t?r(t,"formattedValue"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"formattedValue","hash":{},"loc":{"start":{"line":9,"column":30},"end":{"line":9,"column":48}}}):l))+"</p>\r\n  </div>\r\n</div>"}});return i.registerPartial("csui_controls_thumbnail_content_size_impl_size",n),n}),csui.define("css!csui/controls/thumbnail/content/size/impl/size",[],function(){}),csui.define("csui/controls/thumbnail/content/size/size.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/thumbnail/content/content.registry","i18n!csui/controls/thumbnail/content/size/impl/nls/localized.strings","hbs!csui/controls/thumbnail/content/size/impl/size","css!csui/controls/thumbnail/content/size/impl/size"],function(e,t,i,n,o,s,l,r){"use strict";var a=n.ItemView.extend({"template":r,"className":"csui-thumbnail-size-container","templateHelpers":function(){var e,t=this.model,i=this.options.column,n=i.name,s=t.get(n),r=t.get("type");return null==s&&(s=e=t.get(n+"_formatted")),t.get("container")?s=e=899!==r&&411!==r?t.get(n+"_formatted"):"":144===r||749===r||736===r||30309===r?(e=o.formatFriendlyFileSize(s),s=o.formatExactFileSize(s)):s=e=t.get(n+"_formatted"),{"value":s,"formattedValue":e,"displayLabel":this.options.displayLabel,"label":this.options.displayLabel?l.sizeLabel:"","cid":this.model.cid}},"constructor":function(e){e||(e={}),n.ItemView.prototype.constructor.apply(this,arguments)}});return s.registerByKey("size",a),a}),csui.define("hbs!csui/controls/thumbnail/content/select/impl/select",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-focusable-table-column-header">\r\n    <div class="csui-selected-checkbox csui-checkbox-primary">\r\n      <input type="checkbox" tabindex=\'0\' class="selectAction" title="'+e.escapeExpression((l=null!=(l=r(i,"selectItemName")||(null!=t?r(t,"selectItemName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"selectItemName","hash":{},"loc":{"start":{"line":4,"column":70},"end":{"line":4,"column":88}}}):l))+'"\r\n             '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"checked"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":13},"end":{"line":5,"column":42}}}))?s:"")+' >\r\n      <div class="csui-selectlabel"></div>\r\n    </div>\r\n  </div>\r\n'},"2":function(e,t,i,n,o){return"checked"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"selectable"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":9,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_thumbnail_content_select_impl_select",n),n}),csui.define("css!csui/controls/thumbnail/content/select/impl/select",[],function(){}),csui.define("csui/controls/thumbnail/content/select/select.view",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/thumbnail/content/content.registry","i18n!csui/controls/thumbnail/impl/nls/lang","hbs!csui/controls/thumbnail/content/select/impl/select","css!csui/controls/thumbnail/content/select/impl/select"],function(e,t,i,n,o,s){"use strict";var l=i.ItemView.extend({"template":s,"templateHelpers":function(){return{"selectable":!1!==this.model.get("selectable"),"checked":!0===this.model.get(l.isSelectedModelAttributeName),"selectItemName":e.str.sformat(o.selectItem,this.model.get("name")),"selectItemAria":e.str.sformat(o.selectItemAria,this.model.get("name"))}},"events":{"keydown":"onKeyInView"},"constructor":function(e){i.ItemView.prototype.constructor.apply(this,arguments),this.rowIndex=e.rowIndex,this.listenTo(this.model,"change:"+l.isSelectedModelAttributeName,this.render),this.listenTo(this,"before:render",this._detachClickHandler).listenTo(this,"before:destroy",this._detachClickHandler)},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||this._toggleCheckbox(e)},"_attachClickHandler":function(){var e=this,i=this.$el.find('input[type="checkbox"]');this.$el.find(".csui-selectlabel").on("click."+this.cid,function(t){t.preventDefault(),t.stopPropagation(),e.options.thumbnailView&&e.options.thumbnailView._isSelectCheckBoxBlocked||(i.prop("checked",!i.prop("checked")).change(),e.triggerMethod("clicked:checkbox",t))}),i.on("change."+this.cid,function(n){t.trigger("closeToggleAction");var o=i.prop("checked");e.triggerMethod("clicked:checkbox",{"view":e,"checked":o})})},"_detachClickHandler":function(){var e=this.$el.find('input[type="checkbox"]'),t=this.$el.find(".csui-selectlabel");e.off("change."+this.cid),t.off("click."+this.cid),this.$el.off("click."+this.cid)},"_toggleCheckbox":function(e){var t=this.$el.find('input[type="checkbox"]');return t.prop("checked",!t.prop("checked")).change(),this.$el.attr("aria-checked",t.prop("checked")),e.preventDefault(),e.stopPropagation(),t.prop("checked")},"onRender":function(){this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this.$el.attr("aria-label",o.selectItemAria),this.$el.attr("role","checkbox");var e=this.$el.find('input[type="checkbox"]'),t=e.prop("checked");return this.$el.attr("aria-checked",t),this._attachClickHandler(),this}},{"columnClassName":"csui-table-cell-_select","isSelectedModelAttributeName":"csuiIsSelected"});return n.registerByKey("_select",l),l}),csui.define("csui/controls/thumbnail/content/date/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/thumbnail/content/date/impl/nls/root/localized.strings",{"ColumnTitle":"Date","dateLabel":"Modified date"}),csui.define("hbs!csui/controls/thumbnail/content/date/impl/date",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-thumbnail-label csui-thumbnail-date-label" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":3,"column":76},"end":{"line":3,"column":85}}}):s))+'">\r\n      <span>'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":4,"column":12},"end":{"line":4,"column":21}}}):s))+"</span>\r\n    </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-thumbnail-date csui-thumbnail-date-'+e.escapeExpression((l=null!=(l=r(i,"cid")||(null!=t?r(t,"cid"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":1,"column":52},"end":{"line":1,"column":59}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"displayLabel"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":2},"end":{"line":6,"column":9}}}))?s:"")+'  <div class="csui-thumbnail-value csui-thumbnail-date-justify-div">\r\n    <p class="csui-thumbnail-date-value" title="'+e.escapeExpression((l=null!=(l=r(i,"value")||(null!=t?r(t,"value"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":8,"column":48},"end":{"line":8,"column":57}}}):l))+'"\r\n       aria-label="'+e.escapeExpression((l=null!=(l=r(i,"value")||(null!=t?r(t,"value"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":9,"column":19},"end":{"line":9,"column":28}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"value")||(null!=t?r(t,"value"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":9,"column":30},"end":{"line":9,"column":39}}}):l))+"</p>\r\n  </div>\r\n</div>"}});return i.registerPartial("csui_controls_thumbnail_content_date_impl_date",n),n}),csui.define("css!csui/controls/thumbnail/content/date/impl/date",[],function(){}),csui.define("csui/controls/thumbnail/content/date/date.view",["module","csui/lib/underscore","csui/lib/marionette","csui/utils/types/date","csui/controls/thumbnail/content/content.registry","i18n!csui/controls/thumbnail/content/date/impl/nls/localized.strings","hbs!csui/controls/thumbnail/content/date/impl/date","css!csui/controls/thumbnail/content/date/impl/date"],function(e,t,i,n,o,s,l){"use strict";var r=t.extend({"multiValueSeparator":", "},e.config()),a=i.ItemView.extend({"template":l,"className":"csui-thumbnail-date-container","templateHelpers":function(){var e=this.options.column,t=this.model.get(e.name),i=!1!==e.include_time,o=i?n.formatExactDateTime:n.formatExactDate,l=this.getSingleOrMultipleValueData(t,o,o);return this.options.displayLabel&&(l.label=this.options.contentModel.get("name")?this.options.contentModel.get("name"):s.dateLabel),l.displayLabel=this.options.displayLabel,l.cid=this.model.cid,l},"getSingleOrMultipleValueData":function(e,t,i){var n,o;return Array.isArray(e)?(n=this.concatenateTextValues(e,t),o=this.concatenateTextValues(e,i)):(n=t(e),o=i(e)),{"value":n,"formattedValue":o}},"concatenateTextValues":function(e,t){return t=this._validateFormater(t),e.map(t).join(r.multiValueSeparator)},"_validateFormater":function(e){return e||function(e){return e}},"constructor":function(e){e||(e={}),i.ItemView.prototype.constructor.apply(this,arguments)}});return o.registerByDataType(-7,a),a}),csui.define("hbs!csui/controls/thumbnail/content/thumbnail.icon/impl/thumbnail.icon",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div\r\n      class="csui-thumbnail-content-icon csui-thumbnail-content-no-default-action thumbnail-'+e.escapeExpression((s=null!=(s=l(i,"cid")||(null!=t?l(t,"cid"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":3,"column":92},"end":{"line":3,"column":99}}}):s))+'"\r\n      aria-label="'+e.escapeExpression((s=null!=(s=l(i,"typeAndNameAria")||(null!=t?l(t,"typeAndNameAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"typeAndNameAria","hash":{},"loc":{"start":{"line":4,"column":18},"end":{"line":4,"column":37}}}):s))+'" tabindex="-1"></div>\r\n'},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"inactive"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.program(6,o,0),"loc":{"start":{"line":6,"column":2},"end":{"line":17,"column":9}}}))?s:""},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-thumbnail-content-icon csui-thumbnail-content-no-default-action inactive"\r\n         aria-label="'+e.escapeExpression((s=null!=(s=l(i,"typeAndNameAria")||(null!=t?l(t,"typeAndNameAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"typeAndNameAria","hash":{},"loc":{"start":{"line":8,"column":21},"end":{"line":8,"column":40}}}):s))+'"></div>\r\n'},"6":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"inCreateMode"):t,{"name":"if","hash":{},"fn":e.program(7,o,0),"inverse":e.program(9,o,0),"loc":{"start":{"line":10,"column":4},"end":{"line":16,"column":11}}}))?s:""},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-thumbnail-content-icon csui-thumbnail-content-default-action"\r\n           aria-label="'+e.escapeExpression((s=null!=(s=l(i,"typeAndNameAria")||(null!=t?l(t,"typeAndNameAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"typeAndNameAria","hash":{},"loc":{"start":{"line":12,"column":23},"end":{"line":12,"column":42}}}):s))+'" tabindex="-1"></div>\r\n'},"9":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <a class="csui-thumbnail-content-icon csui-thumbnail-content-default-action thumbnail-'+e.escapeExpression((s=null!=(s=l(i,"cid")||(null!=t?l(t,"cid"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":14,"column":92},"end":{"line":14,"column":99}}}):s))+'"\r\n         href="'+e.escapeExpression((s=null!=(s=l(i,"defaultActionUrl")||(null!=t?l(t,"defaultActionUrl"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"defaultActionUrl","hash":{},"loc":{"start":{"line":15,"column":15},"end":{"line":15,"column":35}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"typeAndNameAria")||(null!=t?l(t,"typeAndNameAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"typeAndNameAria","hash":{},"loc":{"start":{"line":15,"column":49},"end":{"line":15,"column":68}}}):s))+'" tabindex="-1"></a>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"thumbnailAction"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":18,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_thumbnail_content_thumbnail.icon_impl_thumbnail.icon",n),n}),csui.define("hbs!csui/controls/thumbnail/content/thumbnail.icon/impl/thumbnail.image",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="csui-thumbnail-image" alt="'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":1,"column":39},"end":{"line":1,"column":48}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":1,"column":62},"end":{"line":1,"column":71}}}):s))+'" src="'+e.escapeExpression((s=null!=(s=l(i,"imgUrl")||(null!=t?l(t,"imgUrl"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"imgUrl","hash":{},"loc":{"start":{"line":1,"column":78},"end":{"line":1,"column":88}}}):s))+'" />'}});return i.registerPartial("csui_controls_thumbnail_content_thumbnail.icon_impl_thumbnail.image",n),n}),csui.define("csui/controls/thumbnail/content/thumbnail.icon/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/thumbnail/content/thumbnail.icon/impl/nls/root/localized.strings",{"typeAndNameAria":"{0} {1}","downloadTitle":"Download","hideTitle":"Hide filmstrip","showTitle":"Show filmstrip","nextTitle":"Next","previousTitle":"Previous","videoNotSupportMsg":"Your browser does not support the video tag.","OpenTitle":"Open","GalleyViewTitle":"Gallery view"}),csui.define("hbs!csui/controls/thumbnail/content/thumbnail.icon/util/gallery",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return' data-interval="false"'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-current-total-items">'+e.escapeExpression((l=null!=(l=r(i,"currentItem")||(null!=t?r(t,"currentItem"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"currentItem","hash":{},"loc":{"start":{"line":1,"column":38},"end":{"line":1,"column":53}}}):l))+" / "+e.escapeExpression((l=null!=(l=r(i,"totalItems")||(null!=t?r(t,"totalItems"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"totalItems","hash":{},"loc":{"start":{"line":1,"column":56},"end":{"line":1,"column":70}}}):l))+'</div>\r\n<div class="csui-active-item-name">\r\n  <span class="item-name">'+e.escapeExpression((l=null!=(l=r(i,"currentItemName")||(null!=t?r(t,"currentItemName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"currentItemName","hash":{},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":45}}}):l))+'</span>\r\n  <span title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"lang"):t)?r(s,"downloadTitle"):s,t))+'" class="icon icon-download-white csui-download-gallery"\r\n        tabindex="0" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"lang"):t)?r(s,"downloadTitle"):s,t))+'"></span>\r\n</div>\r\n<div class="csui-carousel-container">\r\n  <div class="csui-preview-carousal-container">\r\n    <div id="binf-carousel" class="binf-carousel binf-slide" data-binf-ride="carousel" '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"onlyVideos"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":9,"column":87},"end":{"line":9,"column":134}}}))?s:"")+'>\r\n      <a class="binf-left binf-carousel-control" href="#binf-carousel" data-binf-slide="binf-prev"\r\n         title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"lang"):t)?r(s,"previousTitle"):s,t))+'" tabindex="0" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"lang"):t)?r(s,"previousTitle"):s,t))+'">\r\n        <span class="icon-previous-gallery" aria-hidden="true"></span>\r\n      </a>\r\n      <div class="csui-preview-carousal"></div>\r\n      <a class="binf-right binf-carousel-control" href="#binf-carousel" data-binf-slide="binf-next"\r\n         title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"lang"):t)?r(s,"nextTitle"):s,t))+'" tabindex="0" aria-label="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"lang"):t)?r(s,"nextTitle"):s,t))+'">\r\n        <span class="icon-next-gallery" aria-hidden="true"></span>\r\n      </a>\r\n    </div>\r\n  </div>\r\n  <div class="csui-carousel-film-strip">\r\n    <div class="binf-carousel binf-slide binf-filmstrip-container" data-interval="false"></div>\r\n    <div class="binf-left binf-carousel-control csui-thumb-toggle-control">\r\n    <span class="binf-glyphicon binf-glyphicon-menu-down" aria-hidden="true"\r\n          title="'+e.escapeExpression(e.lambda(null!=(s=null!=t?r(t,"lang"):t)?r(s,"hideTitle"):s,t))+'"></span>\r\n    </div>\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_thumbnail_content_thumbnail.icon_util_gallery",n),n}),csui.define("hbs!csui/controls/thumbnail/content/thumbnail.icon/util/gallery.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"activeItem"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(18,o,0),"loc":{"start":{"line":2,"column":2},"end":{"line":106,"column":9}}}))?s:""},"2":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isVideo"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.program(10,o,0),"loc":{"start":{"line":3,"column":4},"end":{"line":53,"column":11}}}))?s:""},"3":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="binf-item binf-active binf-item-'+e.escapeExpression((l=null!=(l=r(i,"id")||(null!=t?r(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":4,"column":50},"end":{"line":4,"column":56}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"originalAvailable"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.program(7,o,0),"loc":{"start":{"line":5,"column":8},"end":{"line":22,"column":15}}}))?s:"")+"      </div>\r\n"},"4":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="csui-video">\r\n            <video '+(null!=(s=l(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?l(t,"streaming"):t,{"name":"unless","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":19},"end":{"line":7,"column":66}}}))?s:"")+' poster="" controls="controls">\r\n              <source src="'+e.escapeExpression(e.lambda(null!=t?l(t,"contentURL"):t,t))+"\" type='"+e.escapeExpression(e.lambda(null!=t?l(t,"videoType"):t,t))+"'>\r\n              "+e.escapeExpression(e.lambda(null!=t?l(t,"videoNotSupportMsg"):t,t))+"\r\n            </video>\r\n          </div>\r\n"},"5":function(e,t,i,n,o){return' preload="none"'},"7":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}
;return'          <div class="csui-video">\r\n            <video '+(null!=(s=l(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?l(t,"streaming"):t,{"name":"unless","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":14,"column":19},"end":{"line":14,"column":66}}}))?s:"")+' poster="" controls="controls">\r\n              <source src="'+e.escapeExpression(e.lambda(null!=t?l(t,"contentURL"):t,t))+"\" type='"+e.escapeExpression(e.lambda(null!=t?l(t,"videoType"):t,t))+"'>\r\n              "+e.escapeExpression(e.lambda(null!=t?l(t,"videoNotSupportMsg"):t,t))+'\r\n            </video>\r\n            <div class="csui-img-loader '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"streaming"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":18,"column":40},"end":{"line":18,"column":85}}}))?s:"")+'">\r\n              <div class="csui-img-loader-inner"></div>\r\n            </div>\r\n          </div>\r\n'},"8":function(e,t,i,n,o){return"csui-video-streaming"},"10":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="binf-item binf-active binf-item-'+e.escapeExpression((l=null!=(l=r(i,"id")||(null!=t?r(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":25,"column":50},"end":{"line":25,"column":56}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"originalAvailable"):t,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.program(13,o,0),"loc":{"start":{"line":26,"column":8},"end":{"line":51,"column":15}}}))?s:"")+"      </div>\r\n"},"11":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="csui-img-box csui-gallery-original-icon">\r\n            <img src="'+e.escapeExpression(e.lambda(null!=t?l(t,"contentURL"):t,t))+'" alt="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":28,"column":48},"end":{"line":28,"column":56}}}):s))+'" tabindex="0">\r\n          </div>\r\n'},"13":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"thumbnailAvailable"):t,{"name":"if","hash":{},"fn":e.program(14,o,0),"inverse":e.program(16,o,0),"loc":{"start":{"line":31,"column":10},"end":{"line":50,"column":17}}}))?s:""},"14":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="csui-img-box csui-gallery-thumbnail-icon">\r\n              <div>\r\n                <img src="'+e.escapeExpression(e.lambda(null!=t?r(t,"contentURL"):t,t))+'" alt="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":34,"column":52},"end":{"line":34,"column":60}}}):l))+'" tabindex="0">\r\n                <div class="csui-img-loader '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"streaming"):t,{"name":"if","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":35,"column":44},"end":{"line":35,"column":89}}}))?s:"")+'">\r\n                  <div class="csui-img-loader-inner"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class="csui-img-box csui-gallery-original-icon binf-hidden">\r\n              <img src="'+e.escapeExpression(e.lambda(null!=t?r(t,"contentURL"):t,t))+'" alt="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":41,"column":50},"end":{"line":41,"column":58}}}):l))+'" tabindex="0">\r\n            </div>\r\n'},"16":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'            <div class="csui-img-box csui-gallery-original-icon binf-hidden">\r\n              <img src="'+e.escapeExpression(e.lambda(null!=t?l(t,"contentURL"):t,t))+'" alt="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":45,"column":50},"end":{"line":45,"column":58}}}):s))+'" tabindex="0">\r\n            </div>\r\n            <div class="outer-border">\r\n              <div class="loader"></div>\r\n            </div>\r\n'},"18":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isVideo"):t,{"name":"if","hash":{},"fn":e.program(19,o,0),"inverse":e.program(21,o,0),"loc":{"start":{"line":55,"column":4},"end":{"line":105,"column":11}}}))?s:""},"19":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="binf-item binf-item-'+e.escapeExpression((l=null!=(l=r(i,"id")||(null!=t?r(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":56,"column":38},"end":{"line":56,"column":44}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"originalAvailable"):t,{"name":"if","hash":{},"fn":e.program(4,o,0),"inverse":e.program(7,o,0),"loc":{"start":{"line":57,"column":8},"end":{"line":74,"column":15}}}))?s:"")+"      </div>\r\n"},"21":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="binf-item binf-item-'+e.escapeExpression((l=null!=(l=r(i,"id")||(null!=t?r(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":77,"column":38},"end":{"line":77,"column":44}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"originalAvailable"):t,{"name":"if","hash":{},"fn":e.program(11,o,0),"inverse":e.program(13,o,0),"loc":{"start":{"line":78,"column":8},"end":{"line":103,"column":15}}}))?s:"")+"      </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"data"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":107,"column":9}}}))?s:""}});return i.registerPartial("csui_controls_thumbnail_content_thumbnail.icon_util_gallery.item",n),n}),csui.define("hbs!csui/controls/thumbnail/content/thumbnail.icon/util/filmstrip.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"activeItem"):t,{"name":"if","hash":{},"fn":e.program(2,o,0),"inverse":e.program(12,o,0),"loc":{"start":{"line":2,"column":2},"end":{"line":46,"column":9}}}))?s:""},"2":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="binf-item binf-filmstrip-item-'+e.escapeExpression((l=null!=(l=r(i,"id")||(null!=t?r(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":3,"column":46},"end":{"line":3,"column":52}}}):l))+' binf-active" title="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":73},"end":{"line":3,"column":81}}}):l))+'" tabindex="-1"  aria-label="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":3,"column":110},"end":{"line":3,"column":118}}}):l))+'">\r\n      <div class="binf-thumb" data-binf-target="#binf-carousel" data-binf-slide-to= "'+e.escapeExpression((l=null!=(l=r(i,"index")||(null!=t?r(t,"index"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"index","hash":{},"loc":{"start":{"line":4,"column":85},"end":{"line":4,"column":94}}}):l))+'">\r\n        <div class="binf-thumb-caption">'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":5,"column":40},"end":{"line":5,"column":48}}}):l))+'</div>\r\n        <div class="binf-thumb-img-container">\r\n          <div class="binf-thumb-img '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isVideo"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":7,"column":37},"end":{"line":7,"column":80}}}))?s:"")+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isVideo"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.program(7,o,0),"loc":{"start":{"line":8,"column":12},"end":{"line":19,"column":19}}}))?s:"")+"          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n"},"3":function(e,t,i,n,o){return"binf-video-container "},"5":function(e,t,i,n,o){return'              <div class="binf-play-arrow-container"><span\r\n                  class="binf-play-arrow"></span></div>\r\n'},"7":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"              <div>\r\n                <img "+(null!=(s=r(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"thumbnailURL"):t,{"name":"unless","hash":{},"fn":e.program(8,o,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":21},"end":{"line":13,"column":81}}}))?s:"")+'\r\n                    src="'+e.escapeExpression(e.lambda(null!=t?r(t,"thumbnailURL"):t,t))+'" alt="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":14,"column":53},"end":{"line":14,"column":61}}}):l))+'">\r\n'+(null!=(s=r(i,"unless").call(null!=t?t:e.nullContext||{},null!=t?r(t,"thumbnailURL"):t,{"name":"unless","hash":{},"fn":e.program(10,o,0),"inverse":e.noop,"loc":{"start":{"line":15,"column":16},"end":{"line":17,"column":27}}}))?s:"")+"              </div>\r\n"},"8":function(e,t,i,n,o){return' class="binf-hidden"'},"10":function(e,t,i,n,o){return'                <span class="csui-icon mime_image"></span>\r\n'},"12":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="binf-item binf-filmstrip-item-'+e.escapeExpression((l=null!=(l=r(i,"id")||(null!=t?r(t,"id"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"id","hash":{},"loc":{"start":{"line":25,"column":46},"end":{"line":25,"column":52}}}):l))+'" title="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":25,"column":61},"end":{"line":25,"column":69}}}):l))+'" tabindex="-1"  aria-label="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":25,"column":98},"end":{"line":25,"column":106}}}):l))+'">\r\n      <div class="binf-thumb" data-binf-target="#binf-carousel" data-binf-slide-to= "'+e.escapeExpression((l=null!=(l=r(i,"index")||(null!=t?r(t,"index"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"index","hash":{},"loc":{"start":{"line":26,"column":85},"end":{"line":26,"column":94}}}):l))+'">\r\n        <div class="binf-thumb-caption">'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":27,"column":40},"end":{"line":27,"column":48}}}):l))+'</div>\r\n        <div class="binf-thumb-img-container">\r\n          <div class="binf-thumb-img '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isVideo"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":29,"column":37},"end":{"line":29,"column":80}}}))?s:"")+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isVideo"):t,{"name":"if","hash":{},"fn":e.program(5,o,0),"inverse":e.program(7,o,0),"loc":{"start":{"line":30,"column":12},"end":{"line":41,"column":19}}}))?s:"")+"          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"data"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":47,"column":9}}}))?s:""}});return i.registerPartial("csui_controls_thumbnail_content_thumbnail.icon_util_filmstrip.item",n),n}),csui.define("css!csui/controls/thumbnail/content/thumbnail.icon/util/gallary",[],function(){}),csui.define("csui/controls/thumbnail/content/thumbnail.icon/util/gallery.view",["csui/lib/underscore","csui/lib/jquery","i18n","csui/utils/base","hbs!csui/controls/thumbnail/content/thumbnail.icon/util/gallery","hbs!csui/controls/thumbnail/content/thumbnail.icon/util/gallery.item","hbs!csui/controls/thumbnail/content/thumbnail.icon/util/filmstrip.item","css!csui/controls/thumbnail/content/thumbnail.icon/util/gallary","csui/lib/jquery.touchSwipe"],function(e,t,i,n,o,s,l){"use strict";function r(i){var r=i.galleryData,C=i.currentItemIndex,T=i.lang,V=i.onlyVideos,S=i.view;m=r,v=r.length,w=r[C],y=w.name,x=0,k=S||{},f=t("<div />",{"class":"binf-gallery-container","html":o({"totalItems":r.length,"currentItem":w.index+1,"currentItemName":y,"lang":T,"onlyVideos":V})}),g=t("<div />",{"class":"binf-carousel-inner","html":s({"data":r})}),b=t("<div />",{"class":"csui-carousel-film-strip-inner","html":l({"data":r})}),f.find(".csui-carousel-film-strip .binf-carousel").html(b),f.find(".csui-preview-carousal").html(g),e.each(r,function(e,t){var i=f.find(".binf-item-"+e.model.cid).find(".csui-gallery-original-icon");e.model.flipRight&&i.find("img").css({"-webkit-transform":"scaleX(-1)","-moz-transform":"scaleX(-1)","-o-transform":"scaleX(-1)","transform":"scaleX(-1)","filter":"FlipH","-ms-filter":"FlipH"}),i.find("img").css({"-webkit-transform":"rotate("+e.model.transformDegrees+"deg)","-moz-transform":"rotate("+e.model.transformDegrees+"deg)","-ms-transform":"rotate("+e.model.transformDegrees+"deg)","-o-transform":"rotate("+e.model.transformDegrees+"deg)","transform":"rotate("+e.model.transformDegrees+"deg)"}),i.find("img").attr({"aria-label":T.OpenTitle,"title":T.OpenTitle})},this),m.length<2&&(f.find("#binf-carousel").children(".binf-left").hide(),f.find("#binf-carousel").children(".binf-right").hide()),_=74;var I=_*m.length;return t(window).width()<I&&(f.find(".csui-carousel-film-strip-inner").css("width",I+"px"),f.find(".csui-carousel-film-strip-inner").addClass("csui-film-strip-adjust")),f.find("#binf-carousel").on("slid.binf.carousel",u),f.find(".csui-thumb-toggle-control").on("click",{"lang":T},d),f.find(".csui-download-gallery").on("click keydown",a),f.find(".csui-gallery-original-icon>img").on("click keydown",c),f.find(".csui-preview-carousal-container .binf-carousel-control").on("keydown",h),b.find(".binf-item").on("keydown",p),n.isMSBrowser()||f.find("#binf-carousel").swipe({"swipe":function(e,i,n,o,s,l){"left"==i&&t(this).binf_carousel("next"),"right"==i&&t(this).binf_carousel("prev")},"allowPageScroll":"vertical"}),f}function a(e){("keydown"!==e.type||13!==e.keyCode&&32!==e.keyCode)&&"click"!==e.type||w.downloadItem(e)}function c(e){("keydown"!==e.type||13!==e.keyCode&&32!==e.keyCode)&&"click"!==e.type||(k&&(k.model=w.model),w.executeDefaultAction(e))}function u(e,i){var n;n="click"===e.type||"keyup"===e.type?i:e.relatedTarget,_=t(f.find(".csui-carousel-film-strip-inner .binf-thumb-img")[0]).width()+10,C=f.find(".csui-carousel-film-strip-inner").find(".binf-item").removeClass("binf-active");var o=t(C[t(n).index()]);o.addClass("binf-active"),w&&w.index>=0&&(w=m[t(n).index()],m[w.index].model&&m[w.index].model.contentURL&&!m[w.index].model.addedOriginalImage&&(t(n).addClass("csui-item-original"),m[w.index].addedOriginalImage=!0,t(n).find("img").length>0&&t(n).find("img").attr("src",m[w.index].model.contentURL),t(n).find("video").length>0&&(t(n).find("video").attr("src",m[w.index].model.contentURL),t(n).find(".outer-border").addClass("binf-hidden"))),t(this).find("video").trigger("pause"),y=w.name,f.find(".csui-current-total-items").html(w.index+1+" / "+v),f.find(".csui-active-item-name .item-name").html(y),w.updateScroll(o))}function d(e){f.find(".csui-carousel-film-strip .binf-carousel").slideToggle(),f.find(".binf-glyphicon-menu-down").toggleClass("binf-glyphicon-menu-up"),f.find(".binf-glyphicon-menu-up").length>0?f.find(".binf-glyphicon-menu-up").attr("title",e.data.lang.showTitle):f.find(".binf-glyphicon-menu-down").attr("title",e.data.lang.hideTitle)}function h(e){"keydown"===e.type&&32===e.keyCode&&t(e.currentTarget).trigger("click"),"keydown"!==e.type||9!==e.keyCode||e.shiftKey||t(b.find(".binf-item")[0]).attr("tabindex",0),x=0}function p(e){var i=b.find(".binf-item");switch(e.keyCode){case 9:e.shiftKey?t(i[0]).attr("tabindex",-1):(f.parents(".binf-modal-content").find(".cs-close").trigger("focus"),e.preventDefault(),e.stopPropagation());break;case 13:case 32:t(e.currentTarget)&&t(e.currentTarget).find(".binf-thumb").trigger("click");break;case 39:x<i.length-1&&++x,t(i[x]).trigger("focus");break;case 37:x>0&&--x,t(i[x]).trigger("focus")}x=x}var m,f,g,b,v,w,y,C,_,x,k;return t(window).on("resize",function(){n.isTouchBrowser()&&t(".csui-thumbcarousel-dialog").addClass("csui-adjust-gallery-backdrop")}),{"createGalleryContainer":r,"updateSlide":u,"thumbToggle":d,"downloadItem":a,"executeDefaultAction":c}}),csui.define("csui/controls/thumbnail/content/thumbnail.icon/gallery.plugin.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/jquery.parse.param","csui/lib/marionette","csui/models/nodes","csui/utils/base","csui/controls/thumbnail/content/thumbnail.icon/util/gallery.view","i18n!csui/controls/thumbnail/content/thumbnail.icon/impl/nls/localized.strings","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/dialog/dialog.view","csui/dialogs/modal.alert/modal.alert","csui/utils/contexts/factories/node","csui/utils/commandhelper","csui/utils/log","csui/utils/commands/download","csui/utils/taskqueue","csui/utils/thumbnail/thumbnail.object","csui/lib/exif"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v){"use strict";m=m(e.id);var w=e.config();t.defaults(w,{"parallelism":3,"streaming":!1});var y=!1,C=o.ItemView.extend({"className":"gallery-container","template":!1,"constructor":function(e){e.data||(e.data={}),o.ItemView.prototype.constructor.call(this,e),w.streaming=w.streaming||this.options.streaming},"onRender":function(){var e=this,i=this.options.thumbNailCollection,n=[],o=0;this.model=this.options.model,this.imageCount=0,this.fetchGalleryImageURL(i),t.each(i,function(t){if(w.streaming&&144===t.get("type")&&t.get("mime_type").match(/^video\/!*[-.\w\s]*$/g)){t.thumbnail||(t.thumbnail=new b({"node":t}));var i=t.thumbnail.getPhotOptions(t);t.contentURL=i.url}t.get("mime_type")&&t.get("mime_type").match(/^image\/*[-.\w\s]*$/g)&&(e.imageCount=e.imageCount+1)}),e.thumbNailCollection=i,t.each(i,function(t,i){var s={"name":t.get("name"),"contentURL":t.contentURL?t.contentURL:t.thumbnail?t.thumbnail.imgUrl:"","thumbnailURL":t.thumbnail&&t.thumbnail.imgUrl?t.thumbnail.imgUrl:t.contentURL?t.contentURL:"","id":t.cid,"index":i,"activeItem":t.get("id")===e.model.get("id"),"downloadItem":e.downloadItem.bind(null,t),"executeDefaultAction":e.executeDefaultAction.bind(null,e),"updateScroll":e.updateScroll.bind(null,e),"isVideo":t.get("mime_type").match(/^video\/*[-.\w\s]*$/g),"videoType":t.get("mime_type"),"model":t,"videoNotSupportMsg":a.videoNotSupportMsg,"originalAvailable":!!t.contentURL,"thumbnailAvailable":!(!t.thumbnail||!t.thumbnail.imgUrl),"streaming":w.streaming};t.get("id")===e.model.get("id")&&(o=i),n.push(s)},e);var s=r.createGalleryContainer({"galleryData":n,"currentItemIndex":o,"lang":a,"view":this,"onlyVideos":0===e.imageCount}),l=new _({"el":s[0]}),d=new u({"title":"","headerView":"","view":l,"className":"csui-thumbcarousel-dialog "+(e.options.customStyle?e.options.customStyle:""),"userClassName":"","largeSize":!0});if(c.usePerfectScrollbar()&&s.find(".binf-filmstrip-container").addClass("csui-no-scrolling"),y)return e.options.originatingView&&e.options.originatingView.blockingView&&e.options.originatingView.blockingView.disable(),!1;d.show(),y=!0;var h=t.uniqueId("dialogLabelId"),p=d.headerView.$el.find(".binf-modal-title");p&&(p.attr("id",h),p.html(a.GalleyViewTitle),d.headerView.$el.attr("aria-labelledby",h)),d.headerView.$el.find(".cs-icon-cross").removeClass("cs-icon-cross").addClass("icon-close-gallery"),d.headerView.$el.on("keydown click",t.bind(this.handleShiftKey,this)),e.options.originatingView&&e.options.originatingView.blockingView&&e.options.originatingView.blockingView.disable(),e.galleryView=l,e.dialogView=d;var m=s.find(".csui-preview-carousal .binf-active");setTimeout(function(){r.updateSlide(e.options.event,m)},200)},"handleShiftKey":function(e){e.shiftKey;if(e.shiftKey&&9===e.keyCode){var t=this.thumbNailCollection[this.thumbNailCollection.length-1].cid;setTimeout(function(){i(".binf-filmstrip-item-"+t).trigger("focus")},200)}y=!1},"downloadItem":function(e,t){(new f).execute({"nodes":new s([e])})},"executeDefaultAction":function(e){e.listenTo(e.options.originatingView,"destroy:gallery",function(){e.dialogView.$el.find(".cs-close").click()}),e.options.originatingView.thumbnail.trigger("execute:defaultAction",e.model)},"updateScroll":function(e,t){e.galleryView.updateScrollbar(t)},"fetchGalleryImageURL":function(e){var n=this,o=new g({"parallelism":w.parallelism}),s=t.map(e,function(e){var t=i.Deferred();return e.contentURL||o.pending.add({"worker":function(){return n._fetchImageOpenURL(e).done(function(e){t.resolve(e)}).fail(function(e){t.reject(e)}),t.promise()}}),t.promise(s)});return i.whenAll.apply(i,s)},"_fetchImageOpenURL":function(e){var n=this,o=i.Deferred();e.thumbnail||(e.thumbnail=new b({"node":e}));var s=e.thumbnail.getPhotOptions(e);return 144===e.get("type")&&(w.streaming?w.streaming&&!e.get("mime_type").match(/^video\/!*[-.\w\s]*$/g)&&e.connector.makeAjaxCall(s).done(t.bind(function(t,i,s){e.contentURL=e.thumbnail.getContentUrl(t),e.addedOriginalImage=!0,n.displayGalleryItems(e,t),o.resolve()},this)).fail(t.bind(function(t,i,s){e.contentURL=e.thumbnail&&e.thumbnail.defaultImgUrl,e.addedOriginalImage=!1,n.displayGalleryItems(e,void 0),o.reject(s)},this)):e.connector.makeAjaxCall(s).done(t.bind(function(t,i,s){e.contentURL=e.thumbnail.getContentUrl(t),e.addedOriginalImage=!0,n.displayGalleryItems(e,t),o.resolve()},this)).fail(t.bind(function(t,i,s){e.contentURL=e.thumbnail&&e.thumbnail.defaultImgUrl,e.addedOriginalImage=!1,n.displayGalleryItems(e,void 0),o.reject(s)},this))),o.promise()},"displayGalleryItems":function(e,t){var i=0,n=!1,o=this;if(e.get("mime_type").match(/^video\/!*[-.\w\s]*$/g)){var s=o.galleryView&&o.galleryView.$el.find(".binf-item-"+e.cid).find("video");s.length>0&&(s.attr("src",e.contentURL),o.galleryView.$el.find(".binf-item-"+e.cid).addClass("csui-item-original"),o.galleryView.$el.find(".binf-item-"+e.cid+" .csui-img-loader").addClass("binf-hidden"))}else{var l=o.galleryView&&o.galleryView.$el.find(".binf-item-"+e.cid),r=l.find(".csui-gallery-thumbnail-icon"),a=l.find(".csui-gallery-original-icon");r.length>0?r.addClass("binf-hidden"):o.galleryView.$el.find(".binf-item-"+e.cid+" .outer-border").addClass("binf-hidden"),a.find("img").attr("src",e.contentURL),a.find("img").addClass("csui-item-original"),a.removeClass("binf-hidden"),t&&v.getData(t,function(){var t=this,o=t&&t.exifdata&&t.exifdata.Orientation;i=7===o||8===o?-90:5===o||6===o?90:3===o||4===o?180:0,e.transformDegrees=i,2!==o&&4!==o&&5!==o&&7!==o||(n=!0,e.flipRight=!0),n&&a.find("img").css({"transform":"scaleX(-1)","filter":"FlipH","-ms-filter":"FlipH"}),a.find("img").css({"transform":"rotate("+i+"deg)"})});var c=o.galleryView&&o.galleryView.$el.find(".binf-filmstrip-item-"+e.cid);(!c.find("img").attr("src")||c.find("img").attr("src")&&c.find("img").hasClass("binf-hidden"))&&(c.find("img").attr("src",e.contentURL).removeClass("binf-hidden"),c.find(".mime_image").addClass("binf-hidden"))}}}),_=o.View.extend({"constructor":function(e){o.View.prototype.constructor.apply(this,arguments)},"behaviors":{"PerfectScrolling":{"behaviorClass":c,"contentParent":".binf-filmstrip-container","suppressScrollY":!0,"scrollXMarginOffset":2}},"updateScrollbar":function(e){this.trigger("update:scrollbar");var t,i=this.$(this.behaviors.PerfectScrolling.contentParent),n=this.$el.find(".binf-filmstrip-container").scrollLeft();e.offset().left+e.width()>=i.width()?t=e.offset().left-i.width()+n+e.width()+20:e.offset().left<=0&&(t=e.offset().left+n-5),this.$(this.behaviors.PerfectScrolling.contentParent).animate({"scrollLeft":t},"fast")}});return C}),csui.define("css!csui/controls/thumbnail/content/thumbnail.icon/impl/thumbnail.icon",[],function(){}),csui.define("csui/controls/thumbnail/content/thumbnail.icon/thumbnail.icon.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/node-type.icon/node-type.icon.view","csui/utils/node.links/node.links","hbs!csui/controls/thumbnail/content/thumbnail.icon/impl/thumbnail.icon","hbs!csui/controls/thumbnail/content/thumbnail.icon/impl/thumbnail.image","i18n!csui/controls/thumbnail/content/thumbnail.icon/impl/nls/localized.strings","csui/controls/thumbnail/content/content.registry","csui/controls/thumbnail/content/thumbnail.icon/gallery.plugin.view","csui/utils/thumbnail/thumbnail.object","csui/utils/url","csui/lib/exif","css!csui/controls/thumbnail/content/thumbnail.icon/impl/thumbnail.icon"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f){"use strict";var g=e.config();t.defaults(g,{"parallelism":3,"streaming":!1});var b=o.LayoutView.extend({"className":"csui-thumbnail-icon-view","ui":{"thumbnailIcon":".csui-thumbnail-content-icon","iconcloseGallery":".icon-close-gallery"},"events":{"keydown":"onKeyInView","keydown click @ui.iconcloseGallery":"handleShiftKey","click @ui.thumbnailIcon":"showThumbCarousel","keyup @ui.thumbnailIcon":"showGalleryView"},"template":a,"regions":{"imageRegion":".csui-thumbnail-content-icon"},"templateHelpers":function(){var e=this.model,i=this.model.get("mime_type")&&this.model.get("mime_type").match(/^image|video\/*[-.\w\s]*$/g)||144===this.model.get("type"),n=r.getUrl(this.model),o=t.str.sformat(u.typeAndNameAria,e.get("type_name"),e.get("name"));return{"thumbnailAction":i,"cid":this.model&&this.model.cid||this.options.model.cid,"defaultActionUrl":n,"typeAndNameAria":o,"inactive":e.get("inactive"),"inCreateMode":!this.model.get("id")}},"constructor":function(e){o.LayoutView.prototype.constructor.apply(this,arguments),this.thumbnailObj=new p({"node":this.model}),this.listenTo(this.thumbnailObj,"loadUrl",this.render),this.showingCarousel=!1},"onRender":function(){var e=this.options.originatingView;if(e.getContainerPrefs&&e.getContainerPrefs("isThumbnailEnabled")||!e.getContainerPrefs||!e.container.get("persist")){if(this.thumbnailObj.available()){var t,i=this.thumbnailObj.imgUrl||this.thumbnailObj.node&&this.thumbnailObj.node.get("csuiThumbnailImageUrl");if(g.streaming&&i){if(!this.thumbnailObj.node.get("mime_type").match(/^video\/*[-.\w\s]*$/g))return t=new v({"model":this.model}),void this.imageRegion.show(t)}else{if(i)return t=new v({"model":this.model}),void this.imageRegion.show(t);this.thumbnailObj.loadUrl()}}var n=new l({"node":this.model,"size":"contain"});this.imageRegion.show(n)}},"showGalleryView":function(e){13!==e.keyCode&&32!==e.keyCode||this.showThumbCarousel(e)},"showThumbCarousel":function(e){if(!this.showingCarousel){this.showingCarousel=!0;var i=this,n=!1;if((n=s.isSafari()||s.isMSBrowser()||s.isAppleMobile()?this.model.get("mime_type")&&(this.model.get("mime_type").match(/^image\/*[-.\w\s]*$/g)||this.model.get("mime_type").match(/^video\/(mp4|mov|quicktime)$/g)):this.model.get("mime_type")&&(this.model.get("mime_type").match(/^image\/*[-.\w\s]*$/g)||this.model.get("mime_type").match(/^video\/(mp4|webm|ogg|mov|quicktime)$/g)))&&n.length>0){this.options.originatingView.blockingView.enable();var o=t.filter(i.model.collection.models,function(e){return s.isSafari()||s.isMSBrowser()||s.isAppleMobile()?e.get("mime_type")&&(e.get("mime_type").match(/^image\/*[-.\w\s]*$/g)||e.get("mime_type").match(/^video\/(mp4|mov|quicktime)$/g)):e.get("mime_type")&&(e.get("mime_type").match(/^image\/*[-.\w\s]*$/g)||e.get("mime_type").match(/^video\/(mp4|webm|ogg|mov|quicktime)$/g))},this);new h({"thumbNailCollection":o,"model":i.model,"originatingView":i.options.originatingView,"event":e,"streaming":g.streaming}).render(),setTimeout(function(){i.showingCarousel=!1},250)}else!this.model.get("inactive")&&this.model.get("id")&&(this.showingCarousel=!1,this.trigger("execute:defaultAction",e))}},"onKeyInView":function(e){13!==e.keyCode&&32!==e.keyCode||this.$el.find("a.csui-thumbnail-content-default-action").trigger("click")}}),v=o.ItemView.extend({"templateHelpers":function(){var e=this.model.get("description");return{"imgUrl":this.model.get("csuiThumbnailImageUrl"),"title":e||this.model.get("name")}},"template":c,"constructor":function e(t){t||(t={}),e.__super__.constructor.call(this,t)}});return d.registerByKey("thumbnailIcon",b),b}),csui.define("csui/controls/thumbnail/content/overview/overview.content",["csui/lib/underscore","csui/lib/backbone","csui-ext!csui/controls/thumbnail/content/overview/overview.content"],function(e,t,i){var n=t.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),o=t.Collection.extend({"model":n,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new o(this.map(function(e){return e.attributes}))}}),s=[{"key":"type","sequence":2,"defaultAction":!1},{"key":"properties","title":"properties","sequence":7},{"key":"reserved","sequence":100,"title":"State"}],l=["type","properties","reserved","wnd_comments"];i&&e.each(i,function(t){e.each(t,function(e,t){s.push(e)})});var r=new o(s);return r.fixedOrRemovedOverviewContent=l,r}),csui.define("hbs!csui/controls/thumbnail/content/impl/content",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-thumbnail-label csui-thumbnail-item-content-label" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,
"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":3,"column":84},"end":{"line":3,"column":93}}}):s))+'">\r\n      <span>'+e.escapeExpression((s=null!=(s=l(i,"label")||(null!=t?l(t,"label"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"label","hash":{},"loc":{"start":{"line":4,"column":12},"end":{"line":4,"column":21}}}):s))+"</span>\r\n    </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-thumbnail-item-content csui-thumbnail-item-content-'+e.escapeExpression((l=null!=(l=r(i,"cid")||(null!=t?r(t,"cid"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"cid","hash":{},"loc":{"start":{"line":1,"column":68},"end":{"line":1,"column":75}}}):l))+'">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"displayLabel"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":2},"end":{"line":6,"column":9}}}))?s:"")+'  <div class="csui-thumbnail-value csui-thumbnail-item-content-justify-div">\r\n    <p class="csui-thumbnail-item-content-value" title="'+e.escapeExpression((l=null!=(l=r(i,"value")||(null!=t?r(t,"value"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":8,"column":56},"end":{"line":8,"column":65}}}):l))+'"\r\n       aria-label="'+e.escapeExpression((l=null!=(l=r(i,"value")||(null!=t?r(t,"value"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":9,"column":19},"end":{"line":9,"column":28}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"value")||(null!=t?r(t,"value"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"value","hash":{},"loc":{"start":{"line":9,"column":30},"end":{"line":9,"column":39}}}):l))+"</p>\r\n  </div>\r\n</div>"}});return i.registerPartial("csui_controls_thumbnail_content_impl_content",n),n}),csui.define("csui/controls/thumbnail/content/content.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","hbs!csui/controls/thumbnail/content/impl/content"],function(e,t,i,n,o){"use strict";return n.ItemView.extend({"template":o,"className":"csui-thumbnail-content-item","templateHelpers":function(){var e=this.options.contentModel,t=e.get("name"),i=e.get("key");return{"value":this.model.get(i),"displayLabel":this.options.displayLabel,"label":this.options.displayLabel?t:"","cid":this.model.cid}},"constructor":function(e){e||(e={}),n.ItemView.prototype.constructor.apply(this,arguments)}})}),csui.define("hbs!csui/controls/thumbnail/content/properties/impl/properties",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-thumbnail-properties">\r\n  <button type="button" class="csui-btn-metadata binf-btn" title="'+e.escapeExpression((l=null!=(l=r(i,"propertiesTitle")||(null!=t?r(t,"propertiesTitle"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"propertiesTitle","hash":{},"loc":{"start":{"line":2,"column":66},"end":{"line":2,"column":85}}}):l))+'">\r\n    '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","iconName":"csui_action_properties32"},"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":68}}}))?s:"")+"\r\n  </button>\r\n</div>"}});return i.registerPartial("csui_controls_thumbnail_content_properties_impl_properties",n),n}),csui.define("csui/controls/thumbnail/content/properties/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/thumbnail/content/properties/impl/nls/root/localized.strings",{"propertiesTitle":"Properties"}),csui.define("csui/controls/thumbnail/content/properties/properties.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/controls/thumbnail/content/content.registry","csui/utils/commands/properties","csui/models/nodes","csui/controls/icons.v2","hbs!csui/controls/thumbnail/content/properties/impl/properties","i18n!csui/controls/thumbnail/content/properties/impl/nls/localized.strings"],function(e,t,i,n,o,s,l,r,a){"use strict";var c=i.LayoutView.extend({"template":r,"templateHelpers":function(){return{"propertiesTitle":a.propertiesTitle}},"className":"csui-thumbnail-properties-container","regions":{"propertiesRegion":".csui-thumbnail-properties"},"ui":{"propertiesButton":".csui-btn-metadata"},"events":{"click @ui.propertiesButton":"showMetadataForm","keydown":"onKeyInView"},"onKeyInView":function(e){if(27===e.keyCode){e.preventDefault(),e.stopPropagation();this.$el.parents(".binf-popover").trigger("close:popover")}},"constructor":function(e){e||(e={}),i.LayoutView.prototype.constructor.call(this,e)},"showMetadataForm":function(i){if(!this.ui.propertiesButton.hasClass("binf-disabled")){var n=new s([this.model]),l={"nodes":n,"data":{},"container":this.options.collection.node,"context":this.options.context,"collection":this.options.collection,"showThumbnails":!0},r=this;this.ui.propertiesButton.addClass("binf-disabled"),l=t.extend(l,{"originatingView":this.options.originatingView});(new o).execute(l,this.options).always(function(t){r.ui.propertiesButton.removeClass("binf-disabled"),e("body").addClass("csui-apply-zero-zindex")}),e("body").removeClass("csui-apply-zero-zindex")}},"cancel":function(e){e||(e={}),this.destroy()}});return n.registerByKey("properties",c),c}),csui.define("csui/controls/thumbnail/content/overview/impl/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/thumbnail/content/overview/impl/nls/root/localized.strings",{"ColumnTitle":"Metadata","Modified":"Modified","Size":"Size","columnTitleLocation":"Location","overviewTitle":"General properties"}),csui.define("hbs!csui/controls/thumbnail/content/overview/impl/properties.overview",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'      <div class="csui-thumbnail-properties csui-thumbnail-overview-'+e.escapeExpression((s=null!=(s=l(i,"index")||o&&l(o,"index"))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"index","hash":{},"data":o,"loc":{"start":{"line":5,"column":68},"end":{"line":5,"column":78}}}):s))+'"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-thumbnail-metadata-name-container">\r\n  <div class="csui-thumbnail-properties csui-thumbnail-overview-name"></div>\r\n  <div class="csui-thumbnail-metadata-container">\r\n'+(null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"columns"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"data":o,"loc":{"start":{"line":4,"column":4},"end":{"line":6,"column":13}}}))?s:"")+'  </div>\r\n</div>\r\n<div class="csui-thumbnail-properties-actions">\r\n  <div class="csui-thumbnail-properties csui-thumbnail-overview-properties"></div>\r\n  <div class="csui-thumbnail-properties csui-thumbnail-overview-reserved"></div>\r\n</div>'},"useData":!0});return i.registerPartial("csui_controls_thumbnail_content_overview_impl_properties.overview",n),n}),csui.define("csui/controls/thumbnail/content/overview/properties.overview",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/thumbnail/content/overview/overview.content","csui/models/utils/v1tov2","csui/controls/thumbnail/content/content.view","csui/controls/thumbnail/content/name/name.view","csui/controls/thumbnail/content/properties/properties.view","csui/controls/thumbnail/content/node.state/node.state.view","csui/controls/tile/behaviors/perfect.scrolling.behavior","i18n!csui/controls/thumbnail/content/overview/impl/nls/localized.strings","hbs!csui/controls/thumbnail/content/overview/impl/properties.overview"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p){"use strict";return o.LayoutView.extend({"className":"csui-overview-container","template":p,"templateHelpers":function(){return{"columns":this.columnModels}},"regions":{"nameRegion":".csui-thumbnail-overview-name","propertiesRegion":".csui-thumbnail-overview-properties","nodeStateRegion":".csui-thumbnail-overview-reserved"},"events":{"keydown":"onKeyInView"},"behaviors":{"PerfectScrolling":{"behaviorClass":d,"contentParent":".csui-thumbnail-metadata-name-container","suppressScrollX":!0,"scrollYMarginOffset":15}},"initialize":function(){this.propertiesCollection=this.getColumns(),this.model.collection&&this.model.collection.filters&&this.model.collection.filters.facet&&this.model.collection.filters.facet.length&&this.model.get("parent_id_expand")?this._showOrHideLocationColumn(!0):this._showOrHideLocationColumn();var e=this,i=[];this.propertiesCollection&&this.propertiesCollection.models&&t.each(this.propertiesCollection.models,function(t,n){var o=t.get("key");"size"===o?!!e.getSizeValue(o)&&i.push(t):"reserved_user_id"===o?e.showReservedLabel(e.model)&&i.push(t):void 0!==e.model.get(o)&&i.push(t)}),this.columnModels=i},"constructor":function(e){e||(e={}),this.options=e,o.LayoutView.prototype.constructor.call(this,e);var i,n,s,l=this,d=this.options.originatingView&&this.options.originatingView.thumbnail&&this.options.originatingView.thumbnail.thumbnailHeaderView,h=l.options.columns.where({"isNaming":!0}),p=h[0]?h[0].get("key"):d.getName();this.nameView=new a({"model":l.model,"context":l.options.context,"column":{"name":p,"defaultAction":!1},"displayIcon":!0}),n=new c({"model":l.model,"context":l.options.context,"column":{"name":"properties","defaultAction":!0},"displayIcon":!0,"selectedChildren":l.options.selectedChildren,"collection":l.options.collection,"originatingView":l.options.originatingView}),l.model.set("propertiesView",n),s=new u({"model":l.model,"context":l.options.context,"column":{"name":"reserved","defaultAction":!0},"displayTitle":!1,"selectedChildren":l.options.selectedChildren,"collection":l.options.collection,"originatingView":l.options.originatingView,"targetView":this}),l.model.set("nodeStateView",s),i=t.filter(this.columnModels,function(e){return e.get("key")!==p}),this.columnModels=i,this.columnModels&&t.each(this.columnModels,function(e,t){var i=this.options.ContentFactory.getContentView(e);if(i=i||r){var n,o=t,s=e.get("displayIcon"),a=e.toJSON();a.title=a.name,a.name=a.key,n=new i({"tagName":"DIV","contentModel":e,"model":l.model,"context":l.options.context,"column":a,"displayLabel":!0,"displayIcon":s}),l.addRegion(o,".csui-thumbnail-overview-"+o),e.set("contentView",n),l.listenTo(n,"clicked:content",function(e){l.trigger("clicked:content",{"contentView":n,"rowIndex":l._index,"colIndex":t,"model":l.model})})}},this)},"getSizeValue":function(e){var t=this.model.get(e+"_formatted");return t&&0!=t.split(" ")[0]?t:0},"getColumns":function(){var e,i=this;if(s&&s.models){this.fixedContent=s.fixedOrRemovedOverviewContent,e=s.deepClone(),e.remove(e.findWhere({"key":"properties"}));var n,o,l={};this.options.columns.each(function(s){var r=s.get("column_key"),a=(s.get("name"),s.get("definitions_order"));if(!0===s.get("isNaming")&&(o=r),l[r]=s,s.get("type")&&a){var c=e.findWhere({"key":r});if(c){!0===c.get("isNaming")&&(n=c.get("key"));var u=c.get("sequence"),d=t.extend({"sequence":u},s.attributes);c.set(d)}else{var h=s.clone();h.set({"sequence":a}),e.add(h)}}i.fixedContent.indexOf(r)>=0&&e.remove(e.findWhere({"key":r}))},this)}return e},"_showOrHideLocationColumn":function(e){var t=this.options.collection&&this.options.collection.node&&this.options.collection.node.get("type");e=!!e||!!t&&(899===t||298===t),this.showParent=e,e?this.propertiesCollection.get("parent_id")||this.propertiesCollection.add({"key":"parent_id","title":h.columnTitleLocation,"column_key":"parent_id","name":h.columnTitleLocation,"displayLabel":!0,"displayIcon":!0,"sequence":500},{"at":this.propertiesCollection.length}):this.propertiesCollection.remove("parent_id")},"currentlyFocusedElement":function(e){return this.$el.find(":focusable")[0]},"onKeyInView":function(e){if(e&&27===e.keyCode){e.preventDefault(),e.stopPropagation();this.$el.parents("body").find(".binf-popover").parent().trigger("click")}},"showReservedLabel":function(e){var t=e.get("reserved"),i=e.get("reserved_shared_collaboration"),n=e.get("reserved_user_id");return t&&n||i},"onRender":function(e){this.nameRegion.show(this.nameView);var i=this;this.columnModels&&(t.each(this.columnModels,function(e,t){i[t].show(e.get("contentView"));var n=e.get("contentView").$el.find(".csui-thumbnail-value p");n.length>0&&""===n[0].innerHTML&&e.get("contentView").$el.parent().addClass("binf-hidden")}),this.propertiesRegion.show(this.model.get("propertiesView")),this.nodeStateRegion.show(this.model.get("nodeStateView")))}})}),csui.define("hbs!csui/controls/thumbnail/content/overview/impl/overview",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'tabindex="0"\r\n        '},"3":function(e,t,i,n,o){return'tabindex="-1"'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button type="button" class="csui-thumbnail-overview-icon" title="'+e.escapeExpression((l=null!=(l=r(i,"overViewTitle")||(null!=t?r(t,"overViewTitle"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"overViewTitle","hash":{},"loc":{"start":{"line":1,"column":66},"end":{"line":1,"column":83}}}):l))+'"\r\n        aria-haspopup="dialog" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"overViewTitle")||(null!=t?r(t,"overViewTitle"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"overViewTitle","hash":{},"loc":{"start":{"line":2,"column":43},"end":{"line":2,"column":60}}}):l))+'" '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"focusable"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":2,"column":62},"end":{"line":3,"column":36}}}))?s:"")+">\r\n  "+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","iconName":"csui_action_view_column32"},"loc":{"start":{"line":4,"column":2},"end":{"line":4,"column":67}}}))?s:"")+"\r\n</button>"}});return i.registerPartial("csui_controls_thumbnail_content_overview_impl_overview",n),n}),csui.define("css!csui/controls/thumbnail/content/overview/impl/overview",[],function(){}),csui.define("csui/controls/thumbnail/content/overview/overview.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/thumbnail/content/content.registry","csui/controls/thumbnail/content/content.factory","csui/controls/thumbnail/content/overview/properties.overview","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/mixins/keyboard.navigation/modal.keyboard.navigation.mixin","csui/utils/base","csui/controls/icons.v2","i18n","i18n!csui/controls/thumbnail/content/overview/impl/nls/localized.strings","hbs!csui/controls/thumbnail/content/overview/impl/overview","css!csui/controls/thumbnail/content/overview/impl/overview"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p){"use strict";var m=n.LayoutView.extend({"className":"csui-thumbnail-overview-container","template":p,"behaviors":{"TabableRegion":{"behaviorClass":r,"initialActivationWeight":100}},"constructor":function(i){i||(i={}),n.LayoutView.prototype.constructor.call(this,i),t.defaults(i,{"formPopoverPlacement":"right"}),this.options=i,e(window).on("resize",t.bind(this._closePopover,this))},"currentlyFocusedElement":function(e){return this._previousFocusElm?this.propertiesOverview.currentlyFocusedElement():this.$el},"templateHelpers":function(){return{"overViewTitle":h.ColumnTitle,"focusable":this.options.focusable||!0}},"events":{"keydown":"onKeyInView","click .csui-thumbnail-overview-icon":"_showPopover","dragenter":"_closePopover","close:popover":"_closePopover"},"onKeyInView":function(e){if(32===e.keyCode||13===e.keyCode){if(this.$el.find(".binf-popover").length>0)return void e.stopPropagation();e.preventDefault(),e.stopPropagation(),this._showPopover()}else 27===e.keyCode&&this.$el.find(".binf-popover").length>0&&(e.preventDefault(),e.stopPropagation(),this._closePopover())},"_capturePreviousFocusElement":function(){this._previousFocusElm=document.activeElement},"_restorePreviousFocusAfterClosingPopover":function(){if(this._previousFocusElm){var t=e(this._previousFocusElm);t.hasClass("csui-thumbnail-overview-icon")?this.$el.find("button.csui-thumbnail-overview-icon").trigger("focus"):t.trigger("focus"),this._previousFocusElm=void 0}},"_showPopover":function(i){if(this.options.originatingView&&this.options.originatingView.thumbnail.activeInlineForm){var n=this.options.originatingView.thumbnail;n.closeInlineForm(),this.$el=n.$el.find(".csui-thumbnail-item-"+this.model.cid).find(".csui-thumbnail-overview-container"),this.$popoverEl=this.$el.find(".csui-thumbnail-overview-icon")}var o=this;if(!(this.$el.find(".binf-popover").length>0)){this._capturePreviousFocusElement();var s=this.options.formPopoverPlacement;d&&d.settings.rtl&&(this.rtl=!0),this.propertiesOverview=new l({"model":this.model,"context":this.options.context,"ContentFactory":this.options.ContentFactory,"originatingView":this.options.originatingView,"selectedChildren":this.options.selectedChildren,"collection":this.options.collection,"columns":this.options.columns}),this.propertiesOverview.render(),this.$popoverEl=this.$el.find(".csui-thumbnail-overview-icon"),this._previousTitle=this.$popoverEl.attr("title"),this.$popoverEl.attr("title","");var r,a=d&&d.settings.rtl,c=e(window).width()!==e(".csui-thumbnail-container").width();r=a&&c?e(window).width()-this.$popoverEl.offset().left-this.$popoverEl.width():e(".csui-thumbnail-container").width()-this.$popoverEl.offset().left-this.$popoverEl.width(),r<248&&(this.placementChanged=!0,s="right"===s?"left":"right"),this.$popoverEl.binf_popover({"content":t.bind(function(){return this.propertiesOverview.el},this),"html":!0,"placement":function(e,t){return s},"trigger":"manual"}),this.$popoverEl.binf_popover("show"),this.popOver=this.$el.find(".binf-popover"),this.popOver.addClass("binf-invisible"),this.propertiesOverview.trigger("dom:refresh"),this.engageModalKeyboardFocusOnOpen(this.propertiesOverview.el),this.popOver.attr("role","dialog");var u=t.uniqueId("popoverLabelId"),p=this.popOver.find(">.binf-popover-title");p&&(p.attr("id",u),p.html(h.overviewTitle),this.popOver.attr("aria-labelledby",u)),this.$popoverEl.on("shown.binf.popover",t.bind(function(t){e(document).on("mouseup.popover",{"view":this},this._handleClickEvent),this.scrollEle=this.$el.closest(".csui-thumbnail-results"),this.scrollEle.on("scroll.popover",{"view":this},this._handleScrollEvent),o.onShowOverviewFlyout(t),o.triggerMethod("shown:overview:flyout"),this.propertiesOverview&&this.propertiesOverview.nodeStateRegion.$el.find("button, a").attr("tabindex","0"),this.propertiesOverview&&e(this.propertiesOverview.currentlyFocusedElement()).trigger("focus")},this))}},"onShowOverviewFlyout":function(t){var i,o=this.$el,s=this.$el.parent().find(".binf-popover"),l=s.find(".binf-arrow"),r=parseInt(l.css("top")),a=(parseInt(l.css("height")),this.$el.closest(".csui-thumbnail-results")),u=a.closest(".ps-container").length>0?a.closest(".ps-container"):a.closest(".csui-normal-scrolling"),h=s.find(".csui-thumbnail-metadata-name-container"),p=s.find(".csui-thumbnail-properties-actions"),m=d&&d.settings.rtl,f=e("nav.csui-navbar").length?e("nav.csui-navbar").innerHeight():e(".binf-nav").parents("nav")&&e(".binf-nav").parents("nav").length?e(".binf-nav").parents("nav").innerHeight():0,g=window.innerHeight<h.height()+p.height()+100?h.height()-100:h.height();h.css({"height":g}),i=c.isIE11()?o[0].getBoundingClientRect().top-parseInt(l.css("top"))+12:o.offset().top-(f+parseInt(l.css("top")))+9;var b=e(".cs-perspective-panel"),v=b.length>0?b[0].getBoundingClientRect().top:0;h.height()>window.innerHeight&&!c.isIE11()?(g=window.innerHeight-(p.height()+f+e(".csui-table-paginationview").height()+e("#breadcrumb-wrap").innerHeight()),h.css({"height":g}),r=o.offset().top-(f+i)+11,r>g&&(i+=r-g-p.height(),r-=r-g-p.height()),i<0&&(i=0,r=o.offset().top-(f+i)+11),l.css("top",r)):i<0&&!c.isIE11()?(i=0,g=window.innerHeight-(p.height()+f+e(".csui-table-paginationview").height()+e("#breadcrumb-wrap").innerHeight()),h.css({"height":g}),r=o.offset().top-(f+i)+11,l.css("top",r)):h.height()>window.innerHeight&&c.isIE11()&&(g=window.innerHeight-(p.height()+f+e(".csui-table-paginationview").height()+e("#breadcrumb-wrap").innerHeight()),h.css({"height":g}),r=o.offset().top-i+v-f+12,i<f&&(r>g?(i+=r-g-p.height(),r-=r-g-p.height()):(i=f,r=o.offset().top-i+v-f+12)),l.css("top",r)),s.css({"position":"fixed","top":i}),c.isTouchBrowser()&&u.css({"-webkit-overflow-scrolling":"auto"});var w,y=e(window).width()!==e(".csui-thumbnail-container").width(),C=o.offset().left;if(m&&y){var _=e(".csui-thumbnail-container").width()-e(window).width(),x=this.options.originatingView&&this.options.originatingView.$el.find(".csui-table-facetview");w=this.placementChanged?_+C-s.outerWidth():_+C+o.width(),x.hasClass("csui-facetview-hidden")||(w+=x.width())}else w=this.placementChanged?C-s.outerWidth():C+o.width();s.css({"right":"auto","left":w}),this._adjustFlyOut();e(window).height(),s.offset().top,s.innerHeight(),parseInt(l.css("top")),o.offset().top;this.popOver.removeClass("binf-invisible"),n.triggerMethodOn(this,"dom:refresh",this),o.trigger("focus")},"_adjustFlyOut":function(){this.propertiesOverview.trigger("update:scrollbar");var t=this.$el.closest(".csui-thumbnail-results"),i=e(window).height(),n=e("nav.csui-navbar").innerHeight()/2;this.currentNavbarIndex=e("nav.csui-navbar").css("z-index"),this.currentBreadcrumbIndex=e("#breadcrumb-wrap").css("z-index"),this.$el.height()>i&&this.$el.height(i-n),e("body").addClass("csui-apply-zero-zindex");var o=t.closest(".ps-container").length>0?t.closest(".ps-container"):t.closest(".csui-normal-scrolling");return e(o).on("scroll",function(){e(this).data("binf.popover")&&(e(this).binf_popover("destroy"),e("body").removeClass("csui-apply-zero-zindex"))}),!1},"_closePopover":function(){this.disengageModalKeyboardFocusOnClose(),this.$popoverEl=this.$el.find(".csui-thumbnail-overview-icon"),this.$popoverEl.binf_popover("destroy"),this.placementChanged=!1,this._previousTitle&&(this.$popoverEl.attr("title",this._previousTitle),this._previousTitle=void 0),e(document).off("mouseup.popover",this._handleClickEvent),this.scrollEle=this.$el.closest(".csui-thumbnail-results"),this.scrollEle.off("scroll.popover",this._handleScrollEvent),e("body").removeClass("csui-apply-zero-zindex"),this.propertiesOverview&&this.propertiesOverview.nodeStateRegion.$el.find("button, a").attr("tabindex","-1"),this.triggerMethod("hide:overview:flyout"),this._restorePreviousFocusAfterClosingPopover(),c.isTouchBrowser()&&this.scrollEle.css("-webkit-overflow-scrolling","touch")},"_handleClickEvent":function(t){if(!e(t.target).closest(".binf-popover").length){var i=t.data.view;e(document).off("mouseup.popover",this._handleClickEvent),i._closePopover()}},"_handleScrollEvent":function(t){var i=t.data.view;e(t.target).closest(".binf-popover").length||(i.scrollEle.off("scroll.popover",i._handleScrollEvent),i&&i._closePopover())}});return o.registerByKey("overview",m),a.mixin(m.prototype),m}),csui.define("csui/controls/thumbnail/content/content.factory",["csui/lib/underscore","csui/controls/thumbnail/content/content.registry","csui/controls/thumbnail/content/text/text.view","csui/controls/thumbnail/content/favorite/favorite.view","csui/controls/thumbnail/content/node.state/node.state.view","csui/controls/thumbnail/content/name/name.view","csui/controls/thumbnail/content/parent/parent.view","csui/controls/thumbnail/content/member/member.view","csui/controls/thumbnail/content/size/size.view","csui/controls/thumbnail/content/select/select.view","csui/controls/thumbnail/content/date/date.view","csui/controls/thumbnail/content/thumbnail.icon/thumbnail.icon.view","csui/controls/thumbnail/content/overview/overview.view","csui/controls/thumbnail/content/properties/properties.view","csui-ext!csui/controls/thumbnail/content/content.factory"],function(e,t,i){function n(){}return e.extend(n.prototype,{"getContentView":function(e){return t.getContentView(e)||i}}),new n}),csui.define("csui/controls/thumbnail/thumbnail.content",["csui/lib/underscore","csui/lib/backbone","csui-ext!csui/controls/thumbnail/thumbnail.content"],function(e,t,i){var n=t.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),o=t.Collection.extend({"model":n,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new o(this.map(function(e){return e.attributes}))}}),s=[{"key":"name","sequence":4,"defaultAction":!0,"isNaming":!0},{"key":"reserved","sequence":5,"displayTitle":!0,"title":"State"},{"key":"wnd_comments","sequence":900},{"key":"favorite","sequence":910},{"key":"overview","sequence":920,"showoverview":!0}];return i&&e.each(i,function(t){e.each(t,function(e,t){e.push(e)})}),new o(s)}),csui.define("hbs!csui/controls/thumbnail/impl/thumbnail.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return" binf-hidden"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-thumbnail-header-data">\r\n  <div class="csui-thumbnail-select">\r\n    <div\r\n      class="csui-selected-checkbox csui-checkbox-primary csui-checkbox-selectAll '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"selectThumbnails"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":4,"column":82},"end":{"line":4,"column":125}}}))?s:"")+'">\r\n      <div class="csui-selectAll-header csui-selectlabel"></div>\r\n    </div>\r\n  </div>\r\n  <div class="csui-thumbnail-itemcount">'+e.escapeExpression((l=null!=(l=r(i,"items")||(null!=t?r(t,"items"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"items","hash":{},"loc":{"start":{"line":8,"column":40},"end":{"line":8,"column":51}}}):l))+'</div>\r\n  <div class="csui-thumbnail-sort-search-container">\r\n    <div id="csui-sorting-container" class="csui-sorting-container"></div>\r\n    <div id="csui-thumbnail-column-search" class="csui-thumbnail-column-search"></div>\r\n  </div>\r\n</div>'}});return i.registerPartial("csui_controls_thumbnail_impl_thumbnail.header",n),n}),csui.define("hbs!csui/controls/thumbnail/impl/thumbnail.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return" csui-checkbox "},"3":function(e,t,i,n,o){return" binf-hidden"},"5":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="csui-thumbnail-content csui-thumbnail-'+e.escapeExpression(e.lambda(null!=(s=null!=t?l(t,"attributes"):t)?l(s,"key"):s,t))+'"></div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-thumbnail-item-container">\r\n<div class="csui-thumbnail-icon-container">\r\n  <div class="csui-thumbnail-select '+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isChecked"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":36},"end":{"line":3,"column":75}}}))?s:"")+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"selectThumbnails"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":75},"end":{"line":3,"column":118}}}))?s:"")+'"></div>\r\n  <div class="csui-thumbnail-actionbar"></div>\r\n  <div class="csui-thumbnail-thumbnailIcon"></div>\r\n</div>\r\n<div class="csui-thumbnail-content-container">\r\n'+(null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"columns"):t,{"name":"each","hash":{},"fn":e.program(5,o,0),"inverse":e.noop,"loc":{"start":{"line":8,"column":2},"end":{"line":10,"column":11}}}))?s:"")+"</div>\r\n</div>"}});return i.registerPartial("csui_controls_thumbnail_impl_thumbnail.item",n),n}),csui.define("hbs!csui/controls/thumbnail/impl/thumbnail",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div id="csui-thumbnail-header" class="csui-thumbnail-header"></div>\r\n<div id="csui-thumbnail-results" class="csui-thumbnail-results"></div>'}});return i.registerPartial("csui_controls_thumbnail_impl_thumbnail",n),n}),csui.define("hbs!csui/controls/thumbnail/impl/empty.thumbnail",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<p class='csui-no-result-message' title=\""+e.escapeExpression((s=null!=(s=l(i,"noResults")||(null!=t?l(t,"noResults"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"noResults","hash":{},"loc":{"start":{"line":1,"column":41},"end":{"line":1,"column":54}}}):s))+'">\r\n  '+e.escapeExpression((s=null!=(s=l(i,"noResults")||(null!=t?l(t,"noResults"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"noResults","hash":{},"loc":{"start":{"line":2,"column":2},"end":{"line":2,"column":15}}}):s))+"\r\n</p>\r\n"}});return i.registerPartial("csui_controls_thumbnail_impl_empty.thumbnail",n),n}),csui.define("css!csui/controls/thumbnail/thumbnail",[],function(){}),
csui.define("csui/controls/thumbnail/thumbnail.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/utils/commands","csui/behaviors/default.action/default.action.behavior","csui/behaviors/default.action/impl/defaultaction","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/thumbnail/impl/metadata/thumbnail.metadata.view","csui/controls/thumbnail/impl/sort/sort.view","csui/controls/thumbnail/content/content.factory","csui/controls/thumbnail/thumbnail.content","csui/controls/thumbnail/content/thumbnail.icon/thumbnail.icon.view","csui/controls/thumbnail/content/select/select.view","csui/controls/table/cells/searchbox/searchbox.view","csui/controls/checkbox/checkbox.view","csui/utils/dragndrop.supported.subtypes","csui/controls/tableactionbar/tableactionbar.view","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/controls/progressblocker/blocker","csui/controls/mixins/view.state/node.view.state.mixin","csui/models/mixins/v2.fields/v2.fields.mixin","hbs!csui/controls/thumbnail/impl/thumbnail.header","hbs!csui/controls/thumbnail/impl/thumbnail.item","hbs!csui/controls/thumbnail/impl/thumbnail","hbs!csui/controls/thumbnail/impl/empty.thumbnail","i18n!csui/controls/thumbnail/impl/nls/lang","css!csui/controls/thumbnail/thumbnail","csui/lib/jquery.mousehover"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v,w,y,C,_,x,k,T,V,S,I,A,E){"use strict";var M=(t.extend({},e.config()),o.ItemView.extend({"className":"csui-thumbnail-empty","template":A,"templateHelpers":function(){return{"noResults":this.emptyThumbnailText}},"constructor":function(e){this.options=e&&e.parentOptions,o.ItemView.prototype.constructor.apply(this,arguments)},"initialize":function(){this.canAddItems=!!this.options.originatingView.canAddItems(),this.addItemsPermissions=!!this.options.originatingView.addItemsPermissions(),this.collection.fetched&&this._setEmptyViewText()},"onRender":function(){this.collection.fetched&&this.options.$parentEl.addClass("csui-thumbnail-empty"),this.canAddItems&&this.addItemsPermissions&&this.$el.addClass("csui-can-add-items")},"onShow":function(){this.$el.addClass("icon-thumbnail-empty-page")},"onDestroy":function(){this.options.$parentEl.removeClass("csui-thumbnail-empty")},"_setEmptyViewText":function(){this.emptyThumbnailText="",this.emptyThumbnailText=this.addItemsPermissions?E.dragAndDropMessage:E.noPermissions,this.emptyThumbnailText=this.canAddItems?this.emptyThumbnailText:E.noResults,this.emptyThumbnailText=this.collection.filters&&this.collection.filters.name?E.noSearchResults:this.emptyThumbnailText}})),P=o.LayoutView.extend({"className":function(){var e="csui-thumbnail-item csui-thumbnail-item-"+this.model.cid;return this.model.inlineFormView&&(e+=" csui-thumbnail-item-form"),e},"template":S,"templateHelpers":function(){return{"columns":this.options.thumbnailContent.models,"isChecked":this.options.thumbnailView.collection.itemchecked,"selectThumbnails":"none"===this.options.thumbnailView.options.selectThumbnails}},"ui":{"itemContainer":".csui-thumbnail-item-container"},"attributes":{"tabindex":"0"},"events":{"click @ui.itemContainer":"onItemClick","keydown":"onItemKeyDown"},"regions":{"selectContentRegion":".csui-thumbnail-select","thumbnailIconRegion":".csui-thumbnail-thumbnailIcon"},"behaviors":{"PerfectScrolling":{"behaviorClass":c,"contentParent":".csui-thumbnail-item-container","suppressScrollX":!0,"scrollYMarginOffset":15}},"initialize":function(){var e=this;this.options.thumbnailContent&&this.options.thumbnailContent.models&&t.each(this.options.thumbnailContent.models,function(t,i){if(p.getContentView(t)){var n=t.get("key");e.addRegion(n,".csui-thumbnail-"+n)}},this),!s.isHybrid()&&this.options.showInlineToolbar&&this._subscribeEventHandlers(),this.model.set("inactive",!this.options.thumbnailView.checkModelHasAction(this.model),{"silent":!0}),e.ContentFactory=p,this.listenTo(this.model,"change:csuiIsSelected",function(e){e.get(g.isSelectedModelAttributeName)?(this.options.thumbnailView.$el.find(".csui-thumbnail-select").addClass("csui-checkbox"),this.$el.addClass("csui-thumbnail-item-selected")):(this.$el.removeClass("csui-thumbnail-item-selected"),this.options.thumbnailView._allSelectedNodes.length||(this.options.thumbnailView.$el.find(".csui-thumbnail-select").removeClass("csui-checkbox"),this.$el.removeClass("csui-thumbnail-item-selected"))),this.options.thumbnailView.$el.find(".selectAction").attr("tabindex",-1)}),this.options.thumbnailView._allSelectedNodes.findWhere({"id":this.model.get("id")})&&this.options.model.set("csuiIsSelected",!0)},"constructor":function(e){e||(e={}),o.LayoutView.prototype.constructor.call(this,e),this.listenTo(this.model,"sync",this.render),this.model.set("itemselected",!1,{"silent":!0}),this.listenTo(this.options.thumbnailView,"cancelInlineForm",function(e){this.activeInlineForm&&this.activeInlineForm.cancel(e)})},"onItemClick":function(){this.options.thumbnailView.currentItemView=this},"onItemKeyDown":function(e){if(i(e.target).is('input[type="text"]'))e.stopPropagation();else if(s.isFirefox()&&13===e.keyCode&&i(e.target).is('input[type="checkbox"]')){e.preventDefault(),e.stopPropagation();var t=this.model.get(g.isSelectedModelAttributeName);e.checked=!t,this.selectContentView.trigger("clicked:checkbox",e)}else if(13!==e.keyCode&&32!==e.keyCode||!i(e.target).hasClass("csui-thumbnail-item")){if(27===e.keyCode)this.model.set("itemselected",!1,{"silent":!0}),this.$el.removeClass("csui-thumbnail-item-keyActive"),this.focusableChildren="",this.$el.trigger("focus");else if(9===e.keyCode){this.focusableChildren=this.$el.find("*[tabindex]:visible").filter(function(){if(!i(this).parents().hasClass("csui-thumbnail-nodestate")&&!i(this).parent().hasClass("csui-thumbnail-name-container"))return this});var n=this.options.thumbnailView.resultsView.$el.find("a[href], area[href], input,.csui-thumbnail-select input[type=checkbox], select, textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]");this.$el.hasClass("csui-thumbnail-item-keyActive")?(e.preventDefault(),e.stopPropagation(),e.shiftKey?(this.focusedThumbnailCardIndex>0&&this.focusedThumbnailCardIndex--,i(this.focusableChildren[this.focusedThumbnailCardIndex]).trigger("focus")):(i(e.target).hasClass("csui-thumbnail-item")&&(this.focusedThumbnailCardIndex=-1),this.focusedThumbnailCardIndex<this.focusableChildren.length-1&&this.focusedThumbnailCardIndex++,i(this.focusableChildren[this.focusedThumbnailCardIndex]).trigger("focus"))):(n.length&&n.prop("tabindex",-1),i(this.options.thumbnailView.resultsView.$el.find(".csui-thumbnail-item")[this.options.thumbnailView.resultsView.currentIndexFocussed]).attr("tabindex",0))}}else e.preventDefault(),e.stopPropagation(),this.model.set("itemselected",!0,{"silent":!0}),this.$el.addClass("csui-thumbnail-item-keyActive"),this.showInlineActions.bind(this),this.focusableChildren=this.$el.find("*[tabindex]:visible").filter(function(){if(!i(this).parents().hasClass("csui-thumbnail-nodestate")&&!i(this).parent().hasClass("csui-thumbnail-name-container"))return this}),i(this).parent().hasClass("csui-thumbnail-name-container"),i(this.focusableChildren[0]).trigger("focus"),this.focusedThumbnailCardIndex=0},"_subscribeEventHandlers":function(){this.$el&&this.$el.mousehover(this.showInlineActions.bind(this),this.hideInlineActions.bind(this),{"namespace":this.cid}),this.$el&&this.$el.on("focus",this.showInlineActions.bind(this)),this.$el&&this.$el.on("blur",this.hideInlineActions.bind(this))},"_unsubscribeEventHandlers":function(){this._isRendered&&(this.$el.mousehover("off",{"namespace":this.cid}),this.$el&&this.$el.off("focus"),this.$el&&this.$el.off("blur"))},"showInlineActions":function(e){if(0===this.$el.find(".csui-inlineform-group").length){var t=this.$el.find(".csui-thumbnail-actionbar");if(t.length>0&&!this.options.originatingView.lockedForOtherContols){var i=this,n={"sender":i,"target":t,"model":i.model};i.trigger("mouseenter:row",n)}}else this.$el.find(".csui-thumbnail-select").css({"display":"none"})},"hideInlineActions":function(e){var t=this.$el.find(".csui-thumbnail-actionbar");if(t.length>0){var i=this,n={"sender":i,"target":t,"model":i.model};this.model.get("itemselected")||i.trigger("mouseleave:row",n)}},"onRender":function(e){var i=this;i.model.isLocallyCreated&&!i.model.inlineFormView&&this.$el.find(".csui-thumbnail-content-container").addClass("csui-new-item"),i.model.isLocallyCreated&&(i.listenTo(this.options.thumbnailView,"inlineFormCreation",function(e){var t=e[e.length-1],n=".csui-thumbnail-name-"+t.cid,s=this.options.thumbnailView.$el.find(n),l=new o.Region({"el":s});t.inlineFormView&&(i.activeInlineForm&&i.activeInlineForm.destroy(),i.activeInlineForm=new t.inlineFormView({"model":t,"originatingView":i.options.originatingView,"context":i.options.thumbnailView.context}),i.$el.hasClass("csui-thumbnail-item-form")&&i.$el.addClass("csui-new-thumbnail-item"),l.show(i.activeInlineForm),i.activeInlineForm.listenTo(i.activeInlineForm,"destroy",function(){i.options.thumbnailView.lockedForOtherContols=!1,delete i.activeInlineForm}))}),i.listenTo(this.options.thumbnailView,"updateItem",function(e){i.activeInlineForm&&i.activeInlineForm.model.cid===e.cid&&(i.activeInlineForm.model.trigger("sync"),i.activeInlineForm.cancel({"silent":!0}),e.renamed=!0)})),this.selectContentView=new g({"tagName":"div","model":this.options.model,"thumbnailView":this.options.thumbnailView,"events":function(){return s.isFirefox()?t.extend({},g.prototype.events,{"keydown":i.onKeyInView}):g.prototype.events}}),this.selectContentRegion.show(this.selectContentView),this.options.model.get("csuiIsSelected")?(this.selectContentRegion.$el.addClass("csui-checkbox"),this.$el.addClass("csui-thumbnail-item-selected")):0===this.options.thumbnailView.getSelectedChildren().length&&this.options.thumbnailView.resultsView.$el.find(".csui-checkbox")&&(this.selectContentRegion.$el.removeClass("csui-checkbox"),this.$el.removeClass("csui-thumbnail-item-selected")),this.options.model.get(g.isSelectedModelAttributeName)&&this.$el.addClass("csui-thumbnail-item-selected"),(this.getSelectedChildren().length>0&&i.model.isLocallyCreated&&!i.model.inlineFormView||this.options.thumbnailView._allSelectedNodes.length)&&(this.$el.find(".csui-new-item").parent().find(".csui-thumbnail-select").addClass("csui-checkbox"),this.selectContentRegion.$el.addClass("csui-checkbox")),i.listenTo(this.selectContentView,"clicked:checkbox",function(e){e.checked&&this.options.thumbnailView.cancelAnyExistingInlineForm(),this.options.thumbnailView.stopListening(this.options.thumbnailView,"thumbnailItem:toggled"),this.options.thumbnailView.listenTo(this.options.thumbnailView,"thumbnailItem:toggled",t.bind(function(e){var t=this;setTimeout(function(){t.$el.find(".selectAction").trigger("focus");var e=t.$el.find("a[href], area[href], input,.csui-thumbnail-select input[type=checkbox], select, textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]");e.length&&e.prop("tabindex",-1)},0),e.checked?"single"===this.options.thumbnailView.options.selectThumbnails&&0===this.options.thumbnailView._allSelectedNodes.length||"multiple"===this.options.thumbnailView.options.selectThumbnails?this.options.thumbnailView._allSelectedNodes.add(e.view.model,{"silent":!0}):"single"===this.options.thumbnailView.options.selectThumbnails&&this.options.thumbnailView._allSelectedNodes.length>0&&(this.options.thumbnailView._allSelectedNodes.reset([]),this.options.thumbnailView._allSelectedNodes.add(e.view.model,{"silent":!0})):this.options.thumbnailView._allSelectedNodes.remove(e.view.model,{"silent":!0}),this.options.thumbnailView._allSelectedNodes.reset(this.options.thumbnailView._allSelectedNodes.models)},this)),this.options.thumbnailView.trigger("thumbnailItem:toggled",e),i.showToolBarActions(e),e.checked?(this.options.thumbnailView.resultsView.inlineToolbarView&&this.options.thumbnailView.resultsView.inlineToolbarView.destroy(),i.model.set(g.isSelectedModelAttributeName,!0),i.model.attributes.isSelected=!0,i.options.thumbnailView.trigger("thumbnailSelected",{"sender":i,"targets":i.options.thumbnailView,"nodes":i.getNodes.call(i)})):(i.model.set(g.isSelectedModelAttributeName,!1),i.model.attributes.isSelected=!1,i.options.thumbnailView.trigger("thumbnailUnSelected",{"sender":i,"targets":i.options.thumbnailView,"nodes":i.getNodes.call(i)})),this.options.thumbnailHeaderView.trigger("selectOrUnselect.mixed")}),this.thumbnailIconView=new f({"model":this.options.model,"context":this.options.context,"column":{"defaultAction":!0},"originatingView":this.options.originatingView}),this.thumbnailIconRegion.show(this.thumbnailIconView),this.listenTo(this.thumbnailIconView,"execute:defaultAction",function(e){s.isControlClick(e)||(e.preventDefault(),e.stopPropagation(),i.options.thumbnailView.trigger("execute:defaultAction",i.model))}),this.contents=this.options.columns;var n=[];this.contents.each(function(e){var t=e.get("column_key");n.push(t)},this),n.push("overview"),this.options.thumbnailContent&&this.options.thumbnailContent.models&&t.each(this.options.thumbnailContent.models,function(e,t){this.options.model&&this.options.model.isReservedClicked||this.options.model.isUnreservedClicked?this.options.model.set("inactive",this.options.model.attributes.inactive,{"silent":!0}):this.options.model.set("inactive",!this.options.thumbnailView.checkModelHasAction(this.model),{"silent":!0});var o=p.getContentView(e),s=e.get("key");if(o&&n.indexOf(s)>-1){var l=e.get("key"),r=e.get("showoverview")?p:void 0,a=e.toJSON();a.name=a.key;var c=new o({"tagName":"DIV","model":i.model,"context":i.options.context,"column":a,"ContentFactory":r,"displayLabel":e.get("displayLabel"),"displayTitle":e.get("displayTitle"),"displayIcon":!0,"originatingView":i.options.originatingView,"selectedChildren":this.options.thumbnailView.options.selectedChildren,"collection":this.options.thumbnailView.options.collection,"columns":this.options.columns});i[l].show(c),i.listenTo(c,"clicked:content",function(e){i.trigger("clicked:content",{"contentView":c,"rowIndex":i._index,"colIndex":t,"model":i.model})}),i.listenTo(c,"execute:defaultAction",function(e){e.preventDefault(),e.stopPropagation(),i.options.thumbnailView.trigger("execute:defaultAction",i.model)}),i.listenTo(c,"show:add:favorite:form",function(){i.hideInlineActions(),i.favoritePopoverOpened=!0,i.options.originatingView.lockedForOtherContols=!0}),i.listenTo(c,"close:add:favorite:form",function(){i.favoritePopoverOpened=!1,i.options.originatingView.lockedForOtherContols=!1}),i.listenTo(c,"shown:overview:flyout",function(){i.hideInlineActions(),i.overviewPopoverOpened=!0,i.options.originatingView.lockedForOtherContols=!0}),i.listenTo(c,"hide:overview:flyout",function(){i.overviewPopoverOpened=!1,i.options.originatingView.lockedForOtherContols=!1})}},this)},"getNodes":function(){var e=[];return e.push(this.model),e},"showToolBarActions":function(e){e.checked||(this._subscribeEventHandlers(),this.options.thumbnailView.resultsView.options.showInlineActionBar=!1),this.triggerMethod("show:toolbar")},"getSelectedChildren":function(){return this.model.collection.where({"csuiIsSelected":!0})}}),D=o.CollectionView.extend({"className":"csui-thumbnail-collection","childView":P,"childViewOptions":function(){return{"context":this.options.context,"showInlineToolbar":this.showInlineToolbar,"toolbarItems":this.options.inlineBar.options.collection,"toolbarItemsMasks":this.options.inlineBar.options.toolItemsMask,"originatingView":this.options.originatingView,"thumbnailView":this.options.thumbnailView,"thumbnailHeaderView":this.options.thumbnailHeaderView,"tableColumns":this.options.tableColumns,"columns":this.options.columns,"thumbnailContent":this.options.thumbnailContent}},"childEvents":{"mouseenter:row":"onChildShowInlineActionBarWithDelay","mouseleave:row":"onChildActionBarShouldDestroy","render":"_onChildRender"},"events":{"keydown":"onItemKeyDownOnThumbnailCollection"},"emptyView":M,"emptyViewOptions":function(){return{"$parentEl":this.$el,"parentOptions":this.options}},"behaviors":{"DefaultAction":{"behaviorClass":r},"TabableRegion":{"behaviorClass":u}},"constructor":function(e){e||(e={}),this.context=e.context,o.CollectionView.prototype.constructor.apply(this,arguments),this.showInlineToolbar=this.options.inlineBar.options.collection&&this.options.inlineBar.options.toolItemsMask,this.currentIndexFocussed=0,this.showInlineToolbar&&this.setInlineActionBarEvents(),t.defaults(this.options,{"showInlineActionBar":!0}),i(window).on("resize",t.bind(this._adjustThumbnailWidth,this))},"onItemKeyDownOnThumbnailCollection":function(e){var t=this.$el.children(),n=this.$el.children().length;this.$el.children().hasClass("csui-thumbnail-item-keyActive")||(39===e.keyCode?this.currentIndexFocussed<n?(i(t[this.currentIndexFocussed]).attr("tabindex",-1),i(t[++this.currentIndexFocussed]).trigger("focus").attr("tabindex",0)):(e.preventDefault(),e.stopPropagation()):37===e.keyCode&&(this.currentIndexFocussed>0?(i(t[this.currentIndexFocussed]).attr("tabindex",-1),i(t[--this.currentIndexFocussed]).trigger("focus").attr("tabindex",0)):(e.preventDefault(),e.stopPropagation())))},"currentlyFocusedElement":function(e){return this.$el.children()[this.currentIndexFocussed]},"setInlineActionBarEvents":function(){this.listenTo(this,"closeOther",this._destroyInlineActionBar),this.listenTo(this.collection,"reset",this._destroyInlineActionBar)},"_destroyInlineActionBar":function(){this.inlineToolbarView&&(this.inlineToolbarView.destroy(),this.inlineToolbarView=void 0)},"_onChildRender":function(e){e.options.thumbnailView&&e.options.thumbnailView.trigger("thumbnailRowRendered",{"sender":this,"target":e.el,"node":e.model})},"_showInlineActionBar":function(e){this.inlineToolbarView?this._savedHoverEnterArgs=e:e&&(this._savedHoverEnterArgs=null,this.inlineToolbarView=new y(t.extend({"context":this.options.context,"commands":l,"collection":this.options.inlineBar.options.collection,"toolItemsMask":this.options.inlineBar.options.toolItemsMask,"originatingView":this.options.originatingView,"model":e.model,"status":{"originatingView":this.options.originatingView,"connector":this.options.collection.connector}},this.options.inlineBar.options)),this.listenTo(this.inlineToolbarView,"before:execute:command",function(e){this.lockedForOtherContols=!0,e&&e.status&&e.status.targetView&&e.status.targetView.$el&&e.status.targetView.$el.addClass("active-row"),this._destroyInlineActionBar()}),this.listenTo(this.inlineToolbarView,"after:execute:command",function(e){this.lockedForOtherContols=!1,e&&e.status&&e.status.targetView&&e.status.targetView.$el&&e.status.targetView.$el.removeClass("active-row")}),this.options.originatingView&&(this.listenTo(this.options.originatingView,"block:view:actions",function(){this.lockedForOtherContols=!0,this._destroyInlineActionBar()}),this.listenTo(this.options.originatingView,"unblock:view:actions",function(){this.lockedForOtherContols=!1})),this.inlineToolbarView.render(),this.listenTo(this.inlineToolbarView,"destroy",function(){this.inlineToolbarView=void 0,this._savedHoverEnterArgs&&this.onChildShowInlineActionBarWithDelay(this._savedHoverEnterArgs)},this),i(e.target).append(this.inlineToolbarView.$el),this.inlineToolbarView.triggerMethod("show"))},"onChildShowInlineActionBarWithDelay":function(e,i){this._showInlineActionbarTimeout&&clearTimeout(this._showInlineActionbarTimeout),this.isSelected=this.collection.where({"csuiIsSelected":!0}).length>0;var n=!this.isSelected&&0===this.options.thumbnailView.options.allSelectedNodes.length;(n=n&&!this.lockedForOtherContols&&this.options.showInlineActionBar)&&(this._showInlineActionbarTimeout=setTimeout(t.bind(function(){this._showInlineActionbarTimeout=void 0,this._showInlineActionBar.call(this,i)},this),200))},"onChildActionBarShouldDestroy":function(e,t){this.options.showInlineActionBar=!0,this._showInlineActionbarTimeout&&(clearTimeout(this._showInlineActionbarTimeout),this._showInlineActionbarTimeout=void 0),this.inlineToolbarView&&this.inlineToolbarView.destroy()},"showOrHideZeroRecordsMessage":function(){0===this.collection.length?(this.options.thumbnailHeaderView&&this.options.thumbnailView.collection.filters&&this.options.thumbnailHeaderView.searchBoxes.setFocus(),this._showingEmptyView&&this.options.thumbnailView.collection&&this.options.thumbnailView.collection.filters&&(this.options.thumbnailHeaderView.render(),this.options.thumbnailHeaderView.searchBoxes.setFocus())):(this.$el.removeClass("csui-thumbnail-empty"),this.$el.removeClass("icon-thumbnail-empty-page"),this.$el.is(":visible")&&this.trigger("dom:refresh"))},"onRender":function(){this.showOrHideZeroRecordsMessage(),this._adjustThumbnailWidth(),this.options.thumbnailView.updateSelectAllCheckbox.call(this)},"onMetadataClose":function(){this._adjustThumbnailWidth()},"_adjustThumbnailWidth":function(){for(var e=this.$el.find(".csui-thumbnail-item"),t=i(".csui-table-facetview .csui-facet-panel").length>0?i(".csui-facet-table-container").width()-i(".csui-table-facetview").width():i(".cs-thumbnail-wrapper").width(),n=190/t*100,o=1;o<=e.length;o++){if(o*n>100){o-=1,n=100/o;break}}e.css({"maxWidth":"calc("+n+"% - 4px)","minWidth":"calc("+n+"% - 4px)"})}}),F=o.LayoutView.extend({"className":"csui-thumbnail-header","tagName":"div","regions":{"sortRegion":"#csui-sorting-container","searchRegion":"#csui-thumbnail-column-search","selectAllRegion":".csui-checkbox-selectAll"},"behaviors":{"TabableRegion":{"behaviorClass":u,"initialActivationWeight":100}},"ui":{"selectAll":".csui-selectAll-input","sortContainer":"#csui-sorting-container"},"events":{"keydown":"onKeyInView","click @ui.sortContainer":"onSortClick"},"template":V,"templateHelpers":function(){return{"columns":this.options.thumbnailColumns,"addTitle":E.addTitle,"selectAll":E.selectAll,"selectAllTitle":E.selectAllTitle,"isEmptyNode":0===this.collection.models.length,"items":s.formatMessage(this.collection.length,E),"selectThumbnails":"none"===this.options.thumbnailView.options.selectThumbnails||"single"===this.options.thumbnailView.options.selectThumbnails}},"constructor":function(e){e||(e={}),o.LayoutView.prototype.constructor.call(this,e),this.columnsWithSearch=e.columnsWithSearch||[],this.listenTo(this,"selectOrUnselect.mixed",this.thumbnailItemClicked),this.listenTo(this,"selectOrUnselect.all",function(e){e?(this.options.thumbnailView.cancelAnyExistingInlineForm.call(this.options.thumbnailView),this.collection.models.length>0&&t.each(this.collection.models,function(e){e.set(g.isSelectedModelAttributeName,!0)}),this.options.thumbnailView.trigger("thumbnailSelected",{"sender":this,"targets":this.options.thumbnailView,"nodes":this.collection.models})):(this.collection.models.length>0&&t.each(this.collection.models,function(e){e.set(g.isSelectedModelAttributeName,!1)}),this.options.thumbnailView.trigger("thumbnailUnSelected",{"sender":this,"targets":this.options.thumbnailView,"nodes":this.collection.models})),this.options.thumbnailView.showToolBarActions()})},"onSortClick":function(){this.options.thumbnailView.currentItemView&&this.options.thumbnailView.currentItemView.overviewPopoverOpened?this.options.thumbnailView.currentItemView.overview.currentView._closePopover():this.options.thumbnailView.currentItemView&&this.options.thumbnailView.currentItemView.favoritePopoverOpened&&this.options.thumbnailView.currentItemView.favorite.currentView.favStarView.closePopover()},"sortmenurender":function(e){this.options.thumbnailView.resultsView.render(),this.isSortOrderClicked||(this.sortRegion.$el.find("button.binf-dropdown-toggle").trigger("focus"),this.isSortOrderClicked=!0),this._isRendered&&0===this.options.thumbnailView.options.allSelectedNodes.length&&this.options.thumbnailView.resultsView.$el.find(".csui-checkbox")&&this.options.thumbnailView.resultsView.$el.find(".csui-checkbox").removeClass("csui-checkbox")},"thumbnailItemClicked":function(){var e=this.collection.filter(function(e){return e.get(g.isSelectedModelAttributeName)}),t=e.length>0&&e.length===this.collection.length;e.length>0&&!t?this.$el.find(".csui-selected-checkbox").addClass("csui-checkbox-atleastone"):this.$el.find(".csui-selected-checkbox").removeClass("csui-checkbox-atleastone");this.collection.where({"csuiIsSelected":!0}).length;this.options.thumbnailView.updateSelectAllCheckbox.call(this)},"onRender":function(e){var t=(e||window.event,this.options.thumbnailView);this.focusIndex=0;var i=(t.$el.find(".csui-thumbnail-item-selected").length,new v({"checked":!1,"disabled":!1,"ariaLabel":E.selectAll,"title":E.selectAll,"label":E.selectAll}));this.listenTo(i,"clicked",function(e){this.trigger("selectOrUnselect.all","true"!==e.model.attributes.checked)}),this.selectAllRegion.show(i);var n=new h({"collection":this.collection,"resultView":this});this.sortRegion.show(n),this.isSortOrderClicked&&n.ui.sortOrderBtn.trigger("focus"),this.listenTo(n,"render:sortmenu",this.sortmenurender),this.ensureAllSearchBox(),this.currentlyFocusedElement()},"updateTotalCount":function(){var e=s.formatMessage(this.collection.length,E);this.$el.find(".csui-thumbnail-itemcount").html(e)},"currentlyFocusedElement":function(e){var t=this.$el.find("*[tabindex=-1]");if(t.length&&t.prop("tabindex",0),this.isSortOrderClicked)return i(this.sortRegion.$el.find(".csui-sort-arrow"))},"onKeyInView":function(e){if(32===e.keyCode||13===e.keyCode){if(i(e.target).hasClass("csui-selectAll-input")){if(e.preventDefault(),e.stopPropagation(),s.isFirefox()&&32===e.keyCode)return!1;i(e.target).trigger("click")}i(e.target).hasClass("csui-thumbnail-column-search")&&(e.preventDefault(),e.stopPropagation(),this.searchBoxes.showSearchInput(e))}},"getName":function(){var e=this.options.thumbnailView&&this.options.thumbnailView.options&&this.options.thumbnailView.options.allColumns.length&&this.options.thumbnailView.options.allColumns.find(function(e){return"name"===e.name});return e&&e.name},"ensureAllSearchBox":function(){var e=this,n=this.options.thumbnailView,o=this.$el.find(".csui-thumbnail-column-search"),s=this.$el.find(".csui-sorting-container"),l=n.options.columns.where({"isNaming":!0}),r=l[0]?l[0].get("key"):this.getName();if(0===i(this).find(".csui-thumbnail-column-search").length){var a=new b(e.collection.filters[r],{"column":r,"columnTitle":E.name});e.searchBoxes=a,a.on("change:filterValue",function(t){e.applyFilter(t)}),a.on("opened",function(){s.find(".csui-search-sort-options").removeClass("binf-open"),s.addClass("binf-hidden"),e.searchColumn=r}),a.on("closed",function(){s.removeClass("binf-hidden"),e.collection.filters[r]=void 0}),this.searchRegion.show(e.searchBoxes),r!==e.searchColumn||e.options.thumbnailView.activeInlineForm||a.setFocus(),o=i(this).find(".csui-table-column-search"),o&&o.attr("aria-label",t.str.sformat(E.searchIconTooltip,E.name))}},"applyFilter":function(e){var t={};t[e.column]=e.keywords,this.collection.fetching?this.filterValuePending=t:(this.collection.resetLimit(!1),this.collection.setFilter(t),this.options.thumbnailView&&this.options.enableViewState&&this.options.thumbnailView.setViewStateFilter(this.collection.getFilterAsObject()))}}),O=o.LayoutView.extend({"className":"csui-thumbnail-container","template":I,"regions":{"headerRegion":"#csui-thumbnail-header","resultsRegion":"#csui-thumbnail-results"},"childEvents":{"show:toolbar":"showToolBarActions"},"behaviors":{"PerfectScrolling":{"behaviorClass":c,"contentParent":".csui-thumbnail-results","suppressScrollX":!0,"scrollYMarginOffset":15},"DefaultAction":{"behaviorClass":r}},"constructor":function(e){e||(e={}),this._allSelectedNodes=e.allSelectedNodes||(this._allSelectedNodes=new n.Collection),this.options=e;var i={"selectThumbnails":"multiple"};t.defaults(this.options,i),e.actionItems&&e.commands?(this.defaultActionController=new a({"actionItems":e.actionItems,"commands":e.commands}),this.checkModelHasAction=this.defaultActionController.hasAction.bind(this.defaultActionController)):this.checkModelHasAction=function(){return!0},this.context=e.context,o.LayoutView.prototype.constructor.call(this,e),this.collection=e.collection;var s=this.collection.where({"csuiIsSelected":!0});this.collection.itemchecked=!1,s.length>0&&(this.collection.itemchecked=!0),this.options.blockingParentView?x.delegate(this,this.options.blockingParentView):x.imbue(this),this.listenTo(this.collection,"update",this._handleModelsUpdate),this.listenTo(this.collection,"change",this.updateRow),this.context&&this.listenTo(this.context,"request",this._handleContextRequest).listenTo(this.context,"sync error",this._handleContextFinish).listenTo(this.context,"sync",this._handleContextSync).listenTo(this.context,"request",this.blockActions).listenTo(this.context,"sync",this.unblockActions),this.listenTo(this.collection,"request",this.blockActions).listenTo(this.collection,"sync",t.bind(function(){this.triggerMethod("update:scrollbar"),this.unblockActions()},this)).listenTo(this.collection,"destroy",this.unblockActions).listenTo(this.collection,"error",this.unblockActions),this.options.enableViewState&&this.listenTo(this.context.viewStateModel,"change:state",this.onViewStateChanged),this._ViewCollection=n.Collection.extend({"model":this.collection.model}),this.selectedChildren=new this._ViewCollection;var l=this;this.el.addEventListener("scroll",function(){l.trigger("scroll")},!0),this.listenTo(this.collection,"reset",this._updateSelectedChildren),this.listenTo(this.collection,"remove",this._updateSelectedChildren),this.listenTo(this.collection,"new:page",this.resetScrollToTop),this.listenTo(this.collection,"reset",function(){this._isRendered&&(this.resetScrollToTop(),this.thumbnailHeaderView&&this.collection.filters&&this.collection.filters.name?(this.thumbnailHeaderView.updateTotalCount(),this.collection.length>0?this.thumbnailHeaderView.ui.selectAll.removeAttr("disabled"):this.thumbnailHeaderView.ui.selectAll.attr("disabled","true")):(this.thumbnailHeaderView.render(),this.thumbnailHeaderView&&this.thumbnailHeaderView.isSortOrderClicked&&l.thumbnailHeaderView.sortRegion.$el.find(".csui-sort-arrow").trigger("focus")))}),this.listenTo(this,"dom:refresh",this._adjustThumbnailWidth).listenTo(this.collection,"filter:change",this._collectionFilterChanged),this.listenTo(this,"scroll",this._destroyInlineActionBar)},"initialize":function(){this.thumbnailHeaderView=new F({"columns":this.options.displayedColumns,"context":this.context,"columnsWithSearch":this.options.columnsWithSearch,"filterBy":this.options.filterBy,"collection":this.options.collection,"thumbnailView":this,"allColumns":this.options.allColumns,"enableViewState":this.options.enableViewState}),this.updateCollectionParameters();var e=[];if(this.options.tableColumns){e=this.options.tableColumns.deepClone();var i,n=t.filter(this.options.columns.models,function(e){return e.get("isNaming")});i=n.length?n[0].get("column_key"):"name";var o=t.filter(e.models,function(e){return e.get("key")===i});o.length>0&&"name"!==o[0].get("key")?(o[0].attributes.isNaming=!0,e.remove(e.findWhere({"key":"name"}))):o.length||(e.remove(e.findWhere({"key":"name"})),e.add({"key":i,"sequence":4}))}this.resultsView=new D({"context":this.options.context,"collection":this.options.collection,"thumbnailView":this,"originatingView":this.options.originatingView,"inlineBar":this.options.inlineBar,"thumbnailHeaderView":this.thumbnailHeaderView,"tableColumns":this.options.tableColumns,"columns":this.options.columns,"thumbnailContent":this.options.thumbnailContent||e})},"_destroyInlineActionBar":function(){var e=this.$el.find(".csui-table-actionbar .binf-dropdown.binf-open");this.resultsView.inlineToolbarView&&e.length>0&&e.removeClass("binf-open")},"closeInlineForm":function(){
var e=this.thumbnail?this.thumbnail:this,t=e.activeInlineForm&&e.activeInlineForm.model.isLocallyCreated,i=e.activeInlineForm&&e.activeInlineForm.$el.parents(".csui-thumbnail-item");e.activeInlineForm&&(!t||t&&e.activeInlineForm.model.fetched)&&(140===e.activeInlineForm.model.get("type")&&e.$el.find(".csui-new-thumbnail-item").removeClass("csui-new-thumbnail-item"),e.lockedForOtherContols=!1,delete e.activeInlineForm.model.inlineFormView,e.activeInlineForm.model.trigger("sync"),delete e.activeInlineForm,e.$el.find(".csui-thumbnail-item-form").removeClass("csui-thumbnail-item-form"),e.cancelAnyExistingInlineForm({"silent":!0},i))},"_collectionFilterChanged":function(){this.options.enableViewState&&this.setViewStateFilter(this.collection.getFilterAsObject())},"_updateSelectedChildren":function(){this._isRendered&&this.options.selectedChildren&&this.options.selectedChildren.enableNonPromotedCommands&&this.showToolBarActions()},"_handleContextRequest":function(){this._fetchingContext=!0,this._columnsReset=!1,this._collectionReset=!1},"_handleContextSync":function(){this._isRendered&&(this._columnsReset?this.rebuild():this._collectionReset&&this.render())},"_handleContextFinish":function(){this._fetchingContext=!1,this.unblockActions()},"resetScrollToTop":function(){this._isRendered&&this.resultsRegion&&this.resultsRegion.$el.scrollTop(0)},"onDestroy":function(){this._originalScope&&this.options.collection.setResourceScope(this._originalScope)},"_handleModelsUpdate":function(e,i){if(this._isRendered){var n=i.changes.added,o=this;n.length>0&&(t.each(n,function(e){e.unset(g.isSelectedModelAttributeName)}),this.triggerMethod("before:render",this),this.trigger("inlineFormCreation",n),this.resultsView.showOrHideZeroRecordsMessage(),this._adjustThumbnailWidth(),this.trigger("dom:refresh"),t.each(n,function(e){e.isLocallyCreated&&!e.inlineFormView&&o.$el.find(".csui-thumbnail-item-"+e.cid).find(".csui-thumbnail-content-container").addClass("csui-new-item")})),this.thumbnailHeaderView&&(this.thumbnailHeaderView.ui.selectAll.prop("disabled",0===this.collection.length),this.thumbnailHeaderView.updateTotalCount(),this.thumbnailHeaderView.trigger("selectOrUnselect.mixed"))}},"onViewStateChanged":function(){var e=this.context.viewStateModel,t=e.getViewState("filter",!0);t?JSON.stringify(this.collection.getFilterAsObject())!==t&&this.applyFilter(this.getViewStateFilterAsObject(t)):this.collection.filters&&this.collection.clearFilter()},"updateSelectAllCheckbox":function(){var e=this.thumbnail&&this.thumbnail.headerRegion.currentView.selectAllRegion||this.options&&this.options.thumbnailView.headerRegion&&this.options.thumbnailView.headerRegion.currentView&&this.options.thumbnailView.headerRegion.currentView.selectAllRegion,t=e&&e.currentView;if(t){var i=this.collection.where({"csuiIsSelected":!0}).length,n=0!==i&&(i===this.collection.length||"mixed");t.setChecked(n)}},"_maintainNodeState":function(e){var t=e,i=this;if(e&&e.inlineFormView){i.activeInlineForm=new t.inlineFormView({"model":t,"originatingView":i.options.originatingView,"context":i.context}),i.$el.find(".csui-thumbnail-item-"+t.cid).addClass("csui-thumbnail-item-form"),(t.isLocallyCreated&&!t.fetched||140===t.get("type"))&&i.$el.find(".csui-thumbnail-item-"+t.cid).addClass("csui-new-thumbnail-item");var n=".csui-thumbnail-name-"+t.cid,s=this.$el.find(n);return new o.Region({"el":s}).show(i.activeInlineForm),!0}return!1},"updateRow":function(e){if(e.isLocallyCreated&&this.$el.find(".csui-thumbnail-item-form")&&this.$el.find(".csui-thumbnail-item-form").find(".csui-thumbnail-content-container").addClass("csui-new-item"),this.isSelected=this.collection.where({"csuiIsSelected":!0}).length>0,e.inlineFormView){this.options.originatingView.updateRowIndex=this.collection.indexOf(e);var t=this;if(t.activeInlineForm&&t.activeInlineForm.model!==e){var i=t.activeInlineForm.model.cid,n=t.activeInlineForm.model.isLocallyCreated;t.activeInlineForm.$el.parents(".csui-thumbnail-item");this.$el.find(".csui-thumbnail-item-form").removeClass("csui-thumbnail-item-form"),this.$el.find(".csui-thumbnail-item-form").removeClass("csui-thumbnail-item-rename-form"),this.$el.find(".csui-new-thumbnail-item").removeClass("csui-new-thumbnail-item"),this.activeInlineForm.model.trigger("sync"),this.cancelAnyExistingInlineForm({"silent":!0}),n&&this.$el.find(".csui-thumbnail-item-"+i).find(".csui-thumbnail-content-container").addClass("csui-new-item")}e.changed.csuiInlineFormErrorMessage||e.isLocallyCreated||this.trigger("cancelInlineForm",{"silent":!0}),t.activeInlineForm=new e.inlineFormView({"model":e,"originatingView":t.options.originatingView,"context":t.context}),this.listenTo(this.activeInlineForm,"dom:refresh",function(){t.currentItemView&&t.currentItemView.trigger("update:scrollbar")}),this.$el.find(".csui-thumbnail-item-"+e.cid).addClass("csui-thumbnail-item-rename-form"),140===e.get("type")&&this.$el.find(".csui-thumbnail-item-"+e.cid).addClass("csui-new-thumbnail-item");var s=".csui-thumbnail-name-"+e.cid,l=this.$el.find(s);if(t.activeInlineForm.listenTo(t.activeInlineForm,"destroy",function(){t.lockedForOtherContols=!1,t.activeInlineForm.model.trigger("sync"),delete t.activeInlineForm,e.renamed=!0}),this.$el.find(".csui-thumbnail-item-"+e.cid).removeClass("csui-thumbnail-item-apply-transition"),t.$el.find(".csui-thumbnail-item-"+t.activeInlineForm.model.cid).addClass("csui-thumbnail-item-form"),l.length>0){new o.Region({"el":l}).show(t.activeInlineForm)}t.$el.find(".csui-thumbnail-item-"+t.activeInlineForm.model.cid).removeClass("csui-thumbnail-item-rename-form"),t.$el.find(".csui-thumbnail-item-"+t.activeInlineForm.model.cid).find("div.csui-thumbnail-overview-icon").addClass("binf-hidden"),this.$el.find(".csui-thumbnail-item-form")&&this.$el.find(".csui-thumbnail-item-form").find(".csui-thumbnail-content-container .csui-inlineform-error").length>0&&this.$el.find(".csui-thumbnail-item-form").find(".csui-thumbnail-content-container.csui-new-item").addClass("csui-new-item-error"),t.activeInlineForm&&l.length>0&&t.activeInlineForm.triggerMethod("dom:refresh",t.activeInlineForm)}else this.$el.find(".csui-thumbnail-item-"+e.cid).removeClass("csui-thumbnail-item-form"),this.$el.find(".csui-thumbnail-item-"+e.cid).addClass("csui-thumbnail-item-apply-transition"),this.$el.find(".csui-thumbnail-item-"+e.cid).removeClass("csui-new-thumbnail-item"),this.activeInlineForm&&this.activeInlineForm.model.cid===e.cid&&(this.activeInlineForm.model.trigger("sync"),this.cancelAnyExistingInlineForm({"silent":!0}),e.renamed=!0),this.trigger("updateItem",e),this.collection&&this.collection.filters.name&&this.thumbnailHeaderView.searchBoxes&&this.thumbnailHeaderView.searchBoxes.setFocus(),this.$el.find(".csui-thumbnail-content-container.csui-new-item.csui-new-item-error").length>0&&this.$el.find(".csui-thumbnail-content-container.csui-new-item.csui-new-item-error").removeClass("csui-new-item-error")},"onAfterShow":function(){this.thumbnailHeaderView.searchBoxes.setFocus()},"onShow":function(){this.isShown=!0},"_adjustThumbnailWidth":function(){for(var e=this.$el.find(".csui-thumbnail-item"),t=i(".csui-table-facetview .csui-facet-panel").length>0?i(".csui-facet-table-container").width()-i(".csui-table-facetview").width():i(".cs-thumbnail-wrapper").width(),n=190/t*100,o=1;o<=e.length;o++){if(o*n>100){o-=1,n=100/o;break}}e.css({"maxWidth":"calc("+n+"% - 4px)","minWidth":"calc("+n+"% - 4px)"})},"cancelAnyExistingInlineForm":function(e,t){this.trigger("cancelInlineForm",e),this.activeInlineForm&&this.activeInlineForm.cancel(e)},"startCreateNewModel":function(e,t){this.cancelAnyExistingInlineForm(),this.collection&&this.collection.node&&(e.set("parent_id",this.collection.node.get("id")),e.isLocallyCreated=!0,e.inlineFormView=t,this.collection.add(e,{"at":0}),this._adjustThumbnailWidth())},"onRender":function(){this.headerRegion.show(this.thumbnailHeaderView);var e=this;e.listenTo(e,"thumbnailRowRendered",function(t){e.trigger("thumbnailItemRendered",{"sender":e,"target":t.target,"node":t.node})}),this.showToolBarActions(),this.resultsRegion.show(this.resultsView),this.listenTo(this.context,"maximize:widget",this._adjustThumbnailWidth),this.listenTo(this.context,"restore:widget:size",this._adjustThumbnailWidth),"single"===this.options.selectThumbnails?this.$el.addClass("single-select-ThumbnailView"):this.$el.removeClass("single-select-ThumbnailView")},"updateCollectionParameters":function(){var e=this.options.collection,i=this.options.context,n=e.makeFieldsV2,o=e.makeExpandableV2,s={},l={};this.options.collection.setFields&&((n||o)&&e.getResourceScope&&e.setResourceScope&&(this._originalCollectionScope?e.setResourceScope(this._originalCollectionScope):this._originalCollectionScope=e.getResourceScope()),t.each(this.options.allColumns,function(t){var r=t.CellView;if(r){if(n&&r.getModelFields){var a=r.getModelFields({"collection":e,"context":i,"column":t});a&&T.mergePropertyParameters(s,a)}if(o&&r.getModelExpand){var c=r.getModelExpand({"collection":e,"context":i,"column":t});c&&T.mergePropertyParameters(l,c)}r.updateCollectionParameters&&r.updateCollectionParameters({"collection":e,"context":i,"column":t})}},this),t.isEmpty(s)||e.setFields(s),t.isEmpty(l)||e.setExpand(l))},"clearChildrenSelection":function(){this.thumbnailHeaderView&&this.thumbnailHeaderView.trigger("selectOrUnselect.all",!1)},"showToolBarActions":function(e){var t=this.getSelectedChildren();t=this.options.allSelectedNodes&&this.options.allSelectedNodes.models||t,this.thumbnailHeaderView.$el.find(".csui-thumbnail-select .csui-control").length&&this.thumbnailHeaderView.$el.find(".csui-thumbnail-select .csui-control").trigger("focus")},"getSelectedChildren":function(){var e=[];return this.options.collection.each(function(t){t.get("csuiIsSelected")&&e.push(t)}),e}});return t.extend(P.prototype,C),t.extend(D.prototype,_),t.extend(O.prototype,C),t.extend(O.prototype,k),O}),csui.define("hbs!csui/controls/thumbnail/content/node.state/impl/reservation/reservation",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return"other"},"3":function(e,t,i,n,o){return"self"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button type="button" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"reservedAria")||(null!=t?r(t,"reservedAria"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"reservedAria","hash":{},"loc":{"start":{"line":1,"column":34},"end":{"line":1,"column":50}}}):l))+'">\r\n<span class="icon '+e.escapeExpression((l=null!=(l=r(i,"iconPrefix")||(null!=t?r(t,"iconPrefix"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"iconPrefix","hash":{},"loc":{"start":{"line":2,"column":18},"end":{"line":2,"column":32}}}):l))+"_"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isReservedByOther"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":2,"column":33},"end":{"line":2,"column":82}}}))?s:"")+'"\r\n        title="'+e.escapeExpression((l=null!=(l=r(i,"reservedTooltip")||(null!=t?r(t,"reservedTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"reservedTooltip","hash":{},"loc":{"start":{"line":3,"column":15},"end":{"line":3,"column":34}}}):l))+'"></span>\r\n</button>\r\n\r\n'}});return i.registerPartial("csui_controls_thumbnail_content_node.state_impl_reservation_reservation",n),n}),csui.define("css!csui/controls/thumbnail/content/node.state/impl/reservation/reservation",[],function(){}),csui.define("csui/controls/thumbnail/content/node.state/impl/reservation/reservation.view",["csui/lib/underscore","csui/lib/marionette","csui/utils/base","csui/utils/contexts/factories/user","csui/models/nodes","csui/utils/commands","csui/utils/commandhelper","hbs!csui/controls/thumbnail/content/node.state/impl/reservation/reservation","i18n!csui/controls/thumbnail/content/node.state/impl/nls/localized.strings","css!csui/controls/thumbnail/content/node.state/impl/reservation/reservation"],function(e,t,i,n,o,s,l,r,a){"use strict";return t.ItemView.extend({"tagName":"li","className":"csui-node-state-reservation","template":r,"triggers":{"click button":"remove:reservation"},"constructor":function(){t.ItemView.prototype.constructor.apply(this,arguments);var e=this.options.context.getModel(n);this.userId=e.get("id"),this.unreserveCommand=s.get("UnreserveDoc"),this.commandStatus={"nodes":new o([this.model]),"context":this.options.context};var i=this.model.actions;i&&this.listenTo(i,"update",function(){this._isDestroyed||this.options.targetView||(this.render(),this.$el.find("button").attr("tabindex","-1"))})},"templateHelpers":function(){var t,n,o,s=this._getReservedStatus(),l=s.isReserved,r=s.isSharedCollaboration,c=s.reservedBy;if(l){var u=i.formatExactDate(this.model.get("reserved_date")),d=i.formatMemberName(c);r?(t=a.reservedSharedCollaborationTooltip,n=a.reservedSharedCollaborationAria):(t=a.reservedTooltip,n=a.reservedAria),t=e.str.sformat(t,d,u),n=e.str.sformat(n,d,u),o=r?"icon-shared_collaborate":"icon-reserved"}return this._reservedStatus={"isReserved":l,"isSharedCollaboration":r,"isReservedByOther":c&&this.userId!==c.id,"canUnreserve":s.canUnreserve,"reservedTooltip":t,"reservedAria":n,"iconPrefix":o},this._reservedStatus},"onRemoveReservation":function(e){if(!this.model.get("FromThumbnailStateIconView")&&this._reservedStatus.canUnreserve){var t=this.unreserveCommand,i=t.execute(this.commandStatus);l.handleExecutionResults(i,{"command":t,"suppressSuccessMessage":this.commandStatus.suppressSuccessMessage,"suppressFailMessage":this.commandStatus.suppressFailMessage})}},"_getReservedStatus":function(){var e=this.model.get("reserved"),t=this.model.get("reserved_shared_collaboration"),i=this.model.get("reserved_user_id_expand"),n=this.unreserveCommand.enabled(this.commandStatus);return i||(i=this.model.get("reserved_user_id"))&&"number"==typeof i&&(i={"id":i}),{"isReserved":e&&void 0!==i||t,"isSharedCollaboration":t,"reservedBy":i,"canUnreserve":n}},"getAttributes":function(){var e,t,i=this.templateHelpers();return i.isSharedCollaboration?(e=a.reserved_shared_collaboration_attribute_title,t=a.reserved_shared_collaboration_attribute_name):(e=a.reserved_attribute_title,t=a.reserved_attribute_name),[{"label":e,"value":i.isReserved,"name":t,"tooltip":i.reservedTooltip,"aria":i.reservedAria}]}},{"enabled":function(e){var t=e.node,i=t.get("reserved"),n=t.get("reserved_shared_collaboration"),o=t.get("reserved_user_id");return i&&o||n},"getModelExpand":function(e){return{"properties":["reserved_user_id"]}}})}),csui.define("csui/controls/thumbnail/content/node.state/impl/node.state.icons",["csui/controls/thumbnail/content/node.state/impl/reservation/reservation.view"],function(e){"use strict";return[{"sequence":5,"iconView":e}]}),csui.define("csui/controls/zipanddownload/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/zipanddownload/impl/nls/root/lang",{"itemCount":"{0} item","itemsCount":"{0} items","moreThan100":"100+","preflightDialogTitle":"Download details","itemsExcludedMessage":"Items with the following types will be excluded from the Zip file:","downloadDialogTitle":"Download Zip file","zipFileName":"Zip file name","skippedItemsLabel":"The following {0} items cannot be downloaded","skippedItemLabel":"The following item cannot be downloaded","labelType":"Type","labelName":"Name","labelLocation":"Location","labelMessage":"Message","txtItems":"items"}),csui.define("hbs!csui/controls/zipanddownload/impl/dialog.header/impl/dialog.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' aria-describedby="'+e.escapeExpression((s=null!=(s=l(i,"describedBy")||(null!=t?l(t,"describedBy"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"describedBy","hash":{},"loc":{"start":{"line":2,"column":79},"end":{"line":2,"column":94}}}):s))+'"'},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-header-control csui-zipanddownload-details">\r\n  <span class="csui-items">'+e.escapeExpression((s=null!=(s=l(i,"itemsCount")||(null!=t?l(t,"itemsCount"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"itemsCount","hash":{},"loc":{"start":{"line":7,"column":27},"end":{"line":7,"column":41}}}):s))+' </span>\r\n  <span class="csui-size">'+e.escapeExpression((s=null!=(s=l(i,"size")||(null!=t?l(t,"size"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"size","hash":{},"loc":{"start":{"line":8,"column":26},"end":{"line":8,"column":34}}}):s))+"</span>\r\n</div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="tile-title">\r\n  <h2 class="tile-title binf-modal-title"'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"describedBy"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":41},"end":{"line":2,"column":102}}}))?s:"")+">\r\n      "+e.escapeExpression((l=null!=(l=r(i,"title")||(null!=t?r(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":15}}}):l))+"</h2>\r\n</div>\r\n"+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"itemCountExists"):t,{"name":"if","hash":{},"fn":e.program(3,o,0),"inverse":e.noop,"loc":{"start":{"line":5,"column":0},"end":{"line":10,"column":7}}}))?s:"")}});return i.registerPartial("csui_controls_zipanddownload_impl_dialog.header_impl_dialog.header",n),n}),csui.define("css!csui/controls/zipanddownload/impl/dialog.header/impl/dialog.header",[],function(){}),csui.define("csui/controls/zipanddownload/impl/dialog.header/dialog.header.view",["csui/lib/underscore","csui/controls/dialog/impl/header.view","csui/utils/base","i18n!csui/controls/zipanddownload/impl/nls/lang","hbs!csui/controls/zipanddownload/impl/dialog.header/impl/dialog.header","css!csui/controls/zipanddownload/impl/dialog.header/impl/dialog.header"],function(e,t,i,n,o){return t.extend({"template":o,"ui":{"header":".binf-modal-title"},"templateHelpers":function(){return{"title":this.options.title,"itemCountExists":this.options.hasOwnProperty("itemsCount")&&this.options.itemsCount>0,"itemsCount":this.options.hasOwnProperty("itemsCount")?e.str.sformat(1===this.options.itemsCount?n.itemCount:n.itemsCount,this.options.itemsCount):"","size":this.options.size?i.formatFriendlyFileSize(1024*this.options.size):"","describedBy":this.options.describedBy}},"constructor":function(e){t.prototype.constructor.call(this,e)},"onRender":function(){"downloadZip"===this.options.source?this.ui.header.addClass("csui-heading-v2"):this.ui.header.addClass("csui-heading")}})}),csui.define("hbs!csui/controls/zipanddownload/impl/preflight.dialog/impl/preflight.dialog",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'          <div class="csui-preflight-table-row">\r\n            <div class="csui-preflight-cell csui-type">\r\n              <span class="'+e.escapeExpression(e.lambda(null!=t?s(t,"mimeIcon"):t,t))+'"></span>\r\n            </div>\r\n            <div class="csui-preflight-cell csui-name">'+e.escapeExpression(e.lambda(null!=t?s(t,"typeName"):t,t))+"</div>\r\n          </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-modal-dialog '+e.escapeExpression((l=null!=(l=r(i,"binfDialogSizeClassName")||(null!=t?r(t,"binfDialogSizeClassName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"binfDialogSizeClassName","hash":{},"loc":{"start":{"line":1,"column":30},"end":{"line":1,"column":57}}}):l))+'" role="dialog" aria-modal="true" aria-hidden="false">\r\n  <div class="binf-modal-content">\r\n    <div class="tile-header binf-modal-header"></div>\r\n    <div class="binf-modal-body">\r\n      <div class="csui-preflight-table csui-preflight-table-body">\r\n        <div>'+e.escapeExpression((l=null!=(l=r(i,"itemsExcludedMessage")||(null!=t?r(t,"itemsExcludedMessage"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"itemsExcludedMessage","hash":{},"loc":{"start":{"line":6,"column":13},"end":{"line":6,"column":37}}}):l))+"</div>\r\n        <div>"+e.escapeExpression((l=null!=(l=r(i,"skippedTypes")||(null!=t?r(t,"skippedTypes"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"skippedTypes","hash":{},"loc":{"start":{"line":7,"column":13},"end":{"line":7,"column":29}}}):l))+'</div>\r\n      </div>\r\n    </div>\r\n    <div class="binf-hidden">\r\n      <div class="csui-preflight-table csui-preflight-table-header">\r\n        <div class="csui-preflight-cell csui-type">Type</div>\r\n        <div class="csui-preflight-cell csui-name">Name</div>\r\n      </div>\r\n      <div class="csui-preflight-table csui-preflight-table-body">\r\n'+(null!=(s=r(i,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"skippedTypes"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":16,"column":8},"end":{"line":23,"column":17}}}))?s:"")+'      </div>\r\n    </div>\r\n  </div>\r\n  <div class="binf-modal-footer binf-hidden"></div>\r\n</div>'}});return i.registerPartial("csui_controls_zipanddownload_impl_preflight.dialog_impl_preflight.dialog",n),n}),csui.define("css!csui/controls/zipanddownload/impl/preflight.dialog/impl/preflight.dialog",[],function(){}),csui.define("csui/controls/zipanddownload/impl/preflight.dialog/preflight.dialog.view",["csui/controls/dialog/dialog.view","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/zipanddownload/impl/dialog.header/dialog.header.view","i18n!csui/controls/zipanddownload/impl/nls/lang","hbs!csui/controls/zipanddownload/impl/preflight.dialog/impl/preflight.dialog","css!csui/controls/zipanddownload/impl/preflight.dialog/impl/preflight.dialog"],function(e,t,i,n,o){return e.extend({"className":"csui-zipanddownload-dialog csui-zipanddownload-preflight-dialog csui-preflight-check","template":o,"templateHelpers":function(){var e={};return this.options.model.get("results")&&this.options.model.get("results").data&&this.options.model.get("results").data.jobs&&(e=this.options.model.get("results").data.jobs),{"itemsExcludedMessage":n.itemsExcludedMessage,"skipped":e.total_skipped,"skippedTypes":e.skipped_types.map(function(e){return e.name}).join(", ")}},"behaviors":{"PerfectScrolling":{"behaviorClass":t,"contentParent":".csui-preflight-table-body","suppressScrollX":!0,"scrollYMarginOffset":15}},"constructor":function(t){e.prototype.constructor.call(this,t)},"_renderHeader":function(){this.getRegion("header").show(new i({"title":n.preflightDialogTitle}))}})}),csui.define("hbs!csui/controls/zipanddownload/impl/download.dialog/impl/download.dialog",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'        <div class="csui-unprocessed-item-list">\r\n          <div class="csui-info" role="alert" id="'+e.escapeExpression((l=null!=(l=r(i,"alertMsgId")||(null!=t?r(t,"alertMsgId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"alertMsgId","hash":{},"loc":{"start":{"line":21,"column":50},"end":{"line":21,"column":64}}}):l))+'">\r\n            <span class="notification_warning_orange"></span>\r\n            <span class="notification_message">'+e.escapeExpression((l=null!=(l=r(i,"skippedItemsLabel")||(null!=t?r(t,"skippedItemsLabel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"skippedItemsLabel","hash":{},"loc":{"start":{"line":23,"column":47},"end":{"line":23,"column":68}}}):l))+'</span>\r\n          </div>\r\n            <div class="csui-skipped-container-wrapper">\r\n              <table class="csui-skipped-container" aria-labelledby="'+e.escapeExpression((l=null!=(l=r(i,"alertMsgId")||(null!=t?r(t,"alertMsgId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"alertMsgId","hash":{},"loc":{"start":{"line":26,"column":69},"end":{"line":26,"column":83}}}):l))+'" tabindex="0">\r\n                <thead class="csui-skipped-item-table csui-download-table-header">\r\n                  <tr class="csui-skipped-item-table csui-download-table-header">\r\n                    <th class="csui-skipped-item-cell csui-type">'+e.escapeExpression((l=null!=(l=r(i,"labelType")||(null!=t?r(t,"labelType"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"labelType","hash":{},"loc":{"start":{"line":29,"column":65},"end":{"line":29,"column":78}}}):l))+'</th>\r\n                    <th class="csui-skipped-item-cell csui-name">'+e.escapeExpression((l=null!=(l=r(i,"labelName")||(null!=t?r(t,"labelName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"labelName","hash":{},"loc":{"start":{"line":30,"column":65},"end":{"line":30,"column":78}}}):l))+'</th>\r\n                    <th class="csui-skipped-item-cell csui-location">'+e.escapeExpression((l=null!=(l=r(i,"labelLocation")||(null!=t?r(t,"labelLocation"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"labelLocation","hash":{},"loc":{"start":{"line":31,"column":69},"end":{"line":31,"column":86}}}):l))+'</th>\r\n                    <th class="csui-skipped-item-cell csui-message">'+e.escapeExpression((l=null!=(l=r(i,"labelMessage")||(null!=t?r(t,"labelMessage"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"labelMessage","hash":{},"loc":{"start":{"line":32,"column":68},"end":{"line":32,"column":84}}}):l))+'</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody class="csui-skipped-item-table csui-download-table-body">\r\n'+(null!=(s=r(i,"each").call(null!=t?t:e.nullContext||{},null!=t?r(t,"skippedTypes"):t,{"name":"each","hash":{},"fn":e.program(2,o,0),"inverse":e.noop,"loc":{"start":{"line":36,"column":18},"end":{"line":52,"column":27}}}))?s:"")+"                </tbody>\r\n              </table>\r\n            </div>\r\n        </div>\r\n"},"2":function(e,t,i,n,o){var s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'                    <tr class="csui-download-table-row">\r\n                      <td class="csui-skipped-item-cell csui-type">\r\n                        <span title="'+e.escapeExpression(e.lambda(null!=t?s(t,"subtype_name"):t,t))+'" class="'+e.escapeExpression(e.lambda(null!=t?s(t,"mimeIcon"):t,t))+'"></span>\r\n                      </td>\r\n                      <td role="rowheader" class="csui-skipped-item-cell csui-name">\r\n                        <span title="'+e.escapeExpression(e.lambda(null!=t?s(t,"name"):t,t))+'">'+e.escapeExpression(e.lambda(null!=t?s(t,"name"):t,t))+'</span>\r\n                      </td>\r\n                      <td class="csui-skipped-item-cell csui-location">\r\n                        <span class="csui-location-name"\r\n                              title="'+e.escapeExpression(e.lambda(null!=t?s(t,"path"):t,t))+'">'+e.escapeExpression(e.lambda(null!=t?s(t,"parentLocation"):t,t))+'</span>\r\n                      </td>\r\n                      <td class="csui-skipped-item-cell csui-message">\r\n                        <span title="'+e.escapeExpression(e.lambda(null!=t?s(t,"details"):t,t))+'">'+e.escapeExpression(e.lambda(null!=t?s(t,"details"):t,t))+"</span>\r\n                      </td>\r\n                    </tr>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-modal-dialog '+e.escapeExpression((l=null!=(l=r(i,"binfDialogSizeClassName")||(null!=t?r(t,"binfDialogSizeClassName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"binfDialogSizeClassName","hash":{},"loc":{"start":{"line":1,"column":30},"end":{"line":1,"column":57}}}):l))+'" role="dialog" aria-modal="true"\r\n     aria-label="'+e.escapeExpression((l=null!=(l=r(i,"zipFileName")||(null!=t?r(t,"zipFileName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"zipFileName","hash":{},"loc":{"start":{"line":2,"column":17},"end":{"line":2,"column":32}}}):l))+'">\r\n  <div class="binf-modal-content">\r\n    <div class="tile-header binf-modal-header"></div>\r\n    <div class="binf-modal-body">\r\n      <div class="csui-zipanddownload">\r\n        <div class="csui-zipanddownload-filename">\r\n          <label for="'+e.escapeExpression((l=null!=(l=r(i,"inputId")||(null!=t?r(t,"inputId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"inputId","hash":{},"loc":{"start":{"line":8,"column":22},"end":{"line":8,"column":33}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"zipFileName")||(null!=t?r(t,"zipFileName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"zipFileName","hash":{},"loc":{"start":{"line":8,"column":35},"end":{"line":8,"column":50}}}):l))+'</label>\r\n          <input type="text" id="'+e.escapeExpression((l=null!=(l=r(i,"inputId")||(null!=t?r(t,"inputId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"inputId","hash":{},"loc":{"start":{"line":9,"column":33},"end":{"line":9,"column":44}}}):l))+'" class="csui-archive-name" name="download-name" value="'+e.escapeExpression((l=null!=(l=r(i,"fileName")||(null!=t?r(t,"fileName"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"fileName","hash":{},"loc":{"start":{"line":9,"column":100},"end":{"line":9,"column":112}}}):l))+'">\r\n          <div class="csui-zipanddownload-count-size">\r\n            <span class="csui-items-count">'+e.escapeExpression((l=null!=(l=r(i,"itemsCount")||(null!=t?r(t,"itemsCount"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"itemsCount","hash":{},"loc":{"start":{"line":11,"column":43},"end":{"line":11,"column":57}}}):l))+' </span>\r\n            <span class="csui-item-size">'+e.escapeExpression((l=null!=(l=r(i,"fileSize")||(null!=t?r(t,"fileSize"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"fileSize","hash":{},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":53}}}):l))+'</span>\r\n          </div>\r\n        </div>\r\n        <div class="csui-archive-name-error-container">\r\n          <span class="csui-archive-name-error" id="'+e.escapeExpression((l=null!=(l=r(i,"nameErrorId")||(null!=t?r(t,"nameErrorId"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"nameErrorId","hash":{},"loc":{"start":{"line":16,"column":52},"end":{"line":16,"column":67}}}):l))+'"></span>\r\n        </div>\r\n      </div>\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"skippedTypes"):t,{"name":"if",
"hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":19,"column":6},"end":{"line":57,"column":13}}}))?s:"")+'    </div>\r\n  </div>\r\n  <div class="binf-modal-footer binf-hidden"></div>\r\n</div>'}});return i.registerPartial("csui_controls_zipanddownload_impl_download.dialog_impl_download.dialog",n),n}),csui.define("css!csui/controls/zipanddownload/impl/download.dialog/impl/download.dialog",[],function(){}),csui.define("csui/controls/zipanddownload/impl/download.dialog/download.dialog.view",["csui/lib/jquery","csui/lib/backbone","csui/lib/underscore","csui/controls/dialog/dialog.view","csui/utils/base","csui/utils/nodesprites","csui/controls/tile/behaviors/perfect.scrolling.behavior","i18n!csui/controls/zipanddownload/impl/nls/lang","csui/models/node/node.model","csui/utils/accessibility","hbs!csui/controls/zipanddownload/impl/download.dialog/impl/download.dialog","css!csui/controls/zipanddownload/impl/download.dialog/impl/download.dialog"],function(e,t,i,n,o,s,l,r,a,c,u){return n.extend({"className":"csui-zipanddownload-dialog csui-download-dialog","template":u,"templateHelpers":function(){var e=this.options.model,t=this.options.model.get("unprocessed_items_list")&&this.options.model.get("unprocessed_items_list").length,n=i.uniqueId("msg"),l=i.uniqueId("err");this.options.model.get("unprocessed_items_list")&&this.options.model.get("unprocessed_items_list").map(function(e){e.mimeIcon=s.findClassByNode(new a({"id":e.id,"container":e.container,"mime_type":e.mimetype,"type":e.subtype}))}),t&&t>0&&(this.describedBy=n);var c=e.get("total_size"),u=e.get("total");return{"inputId":i.uniqueId("input"),"alertMsgId":n,"nameErrorId":l,"skipped":e.get("total_skipped"),"skippedTypes":e.get("unprocessed_items_list"),"supported":e.get("total_supported"),"size":o.formatFriendlyFileSize(e.get("total_supported_size")),"fileName":this.options.model.get("name"),"zipFileName":r.zipFileName,"labelType":r.labelType,"labelName":r.labelName,"labelLocation":r.labelLocation,"labelMessage":r.labelMessage,"skippedItemsLabel":i.str.sformat(1===t?r.skippedItemLabel:r.skippedItemsLabel,t),"itemsCount":u?u+" "+r.txtItems:"","fileSize":c?o.formatFriendlyFileSize(1024*c):""}},"ui":i.extend({"fileName":"input[name=download-name]","errorEl":".csui-archive-name-error"},n.prototype.ui),"events":i.extend({"keypress @ui.fileName":"downloadArchive","focusin @ui.fileName":"onFocusInFileName"},n.prototype.events),"behaviors":{},"constructor":function(e){e||(e={}),e.dialogTxtAria=r.downloadDialogTitle,n.prototype.constructor.call(this,e)},"downloadArchive":function(e){if("keypress"===e.type&&13===e.keyCode){e.preventDefault();var t=this.$el.find("#zipDownload").first();t.length&&!t.is(":disabled")&&t.trigger("click")}},"onFocusInFileName":function(t){if(!c.isAccessibleMode()){var i=e(t.target)[0],n=i.value,o=n?n.length:0;n.lastIndexOf(".")>0&&n.lastIndexOf(".")<n.length-1&&(o=n.lastIndexOf(".")),i.selectionEnd=o}}})}),csui.define("hbs!csui/controls/compound.document/dialog.view/impl/create.release.revision",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-version" id="'+e.escapeExpression((s=null!=(s=l(i,"versionId")||(null!=t?l(t,"versionId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"versionId","hash":{},"loc":{"start":{"line":1,"column":30},"end":{"line":1,"column":43}}}):s))+'">\r\n  <div class="csui-left">\r\n    <span class="csui-version-label">'+e.escapeExpression((s=null!=(s=l(i,"currentVersionLabel")||(null!=t?l(t,"currentVersionLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"currentVersionLabel","hash":{},"loc":{"start":{"line":3,"column":37},"end":{"line":3,"column":60}}}):s))+'</span>\r\n    <span class="csui-version-number">'+e.escapeExpression((s=null!=(s=l(i,"currentVersionNumber")||(null!=t?l(t,"currentVersionNumber"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"currentVersionNumber","hash":{},"loc":{"start":{"line":4,"column":38},"end":{"line":4,"column":62}}}):s))+'</span>\r\n  </div>\r\n  <div class="csui-right">\r\n    <span class="csui-version-label">'+e.escapeExpression((s=null!=(s=l(i,"newVersionLabel")||(null!=t?l(t,"newVersionLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"newVersionLabel","hash":{},"loc":{"start":{"line":7,"column":37},"end":{"line":7,"column":56}}}):s))+'</span>\r\n    <span class="csui-version-number">'+e.escapeExpression((s=null!=(s=l(i,"newVersionNumber")||(null!=t?l(t,"newVersionNumber"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"newVersionNumber","hash":{},"loc":{"start":{"line":8,"column":38},"end":{"line":8,"column":58}}}):s))+'</span>\r\n  </div>\r\n</div>\r\n<div class="csui-document-name">\r\n  <label class="csui-version-label" for="'+e.escapeExpression((s=null!=(s=l(i,"inputId")||(null!=t?l(t,"inputId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"inputId","hash":{},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":52}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"versionNameLabel")||(null!=t?l(t,"versionNameLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"versionNameLabel","hash":{},"loc":{"start":{"line":12,"column":54},"end":{"line":12,"column":74}}}):s))+'</label>\r\n  <input type="text" id="'+e.escapeExpression((s=null!=(s=l(i,"inputId")||(null!=t?l(t,"inputId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"inputId","hash":{},"loc":{"start":{"line":13,"column":25},"end":{"line":13,"column":36}}}):s))+'" class="csui-archive-name" name="compoundDocument-name"\r\n    value="'+e.escapeExpression((s=null!=(s=l(i,"versionNameNumber")||(null!=t?l(t,"versionNameNumber"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"versionNameNumber","hash":{},"loc":{"start":{"line":14,"column":11},"end":{"line":14,"column":32}}}):s))+'">\r\n  <div class="title-error-div">\r\n    <span class="title-error" role="alert"></span>\r\n  </div>\r\n</div>\r\n<div class="csui-archive-name-error-container">\r\n  <span class="csui-archive-name-error" id="'+e.escapeExpression((s=null!=(s=l(i,"nameErrorId")||(null!=t?l(t,"nameErrorId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"nameErrorId","hash":{},"loc":{"start":{"line":20,"column":44},"end":{"line":20,"column":59}}}):s))+'"></span>\r\n</div>'}});return i.registerPartial("csui_controls_compound.document_dialog.view_impl_create.release.revision",n),n}),csui.define("css!csui/controls/compound.document/dialog.view/impl/compound.document.dialog",[],function(){}),csui.define("csui/controls/compound.document/dialog.view/create.release.revision.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette3","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/behaviors/item.name/item.name.behavior","csui/utils/accessibility","hbs!csui/controls/compound.document/dialog.view/impl/create.release.revision","css!csui/controls/compound.document/dialog.view/impl/compound.document.dialog"],function(e,t,i,n,o,s,l){return i.View.extend({"template":l,"className":function(){return this.options.className},"ui":{"nameInput":"input.csui-archive-name","titleError":".title-error","saveButtonInEditMode":".cs-add-button"},"events":{"input @ui.nameInput":"toggleSubmitButton","focusin .csui-archive-name":"onFocusInArchiveName","keypress .csui-archive-name":"onKeyInView"},"behaviors":function(){return{"ItemName":{"behaviorClass":o},"TabableRegion":{"behaviorClass":n}}},"isTabable":function(){return this.$("*[tabindex]").length>0},"templateContext":function(){return{"currentVersionLabel":this.options.currentVersionLabel,"currentVersionNumber":this.options.currentVersionNumber,"newVersionLabel":this.options.newVersionLabel,"newVersionNumber":this.options.newVersionNumber,"versionNameLabel":this.options.versionNameLabel,"versionNameNumber":this.options.versionNameNumber,"alertMsgId":e.uniqueId("msg"),"nameErrorId":e.uniqueId("err"),"inputId":e.uniqueId("input"),"versionId":this.versionId}},"constructor":function(t){t||(t={}),this.options=t,this.currentValue=this.options.currentVersionNumber,this.versionId=e.uniqueId("msg"),i.View.prototype.constructor.apply(this,arguments)},"onFocusInArchiveName":function(e){s.isAccessibleMode()||t(e.target)[0].select()},"onRender":function(){var e=this._parent._parent._parent.$el.find(".binf-modal-dialog");e.attr("aria-describedby",this.versionId),e.attr("aria-label",this.options.arialabel)},"currentlyFocusedElement":function(e){var i=this.$("*[tabindex]");return i.length&&i.prop("tabindex",0),t(e&&e.shiftKey?i[i.length-1]:i[0])},"onLastTabElement":function(e,t){return e&&t.target===this.$("*[tabindex]")[0]},"onKeyInView":function(e){if("keypress"===e.type&&13===e.keyCode){e.preventDefault();var t=this._parent._parent._parent.$el.find(".cs-add-button");t.length&&!t.is(":disabled")&&t.trigger("click")}},"toggleSubmitButton":function(){""===this.ui.nameInput.val()?this.options.originatingView._dialog.updateButton("submit",{"disabled":!0}):this.options.originatingView._dialog.updateButton("submit",{"disabled":!1})},"_validate":function(){var e=this.currentValue,t=this.getInputBoxValue();if(t=t.trim(),e!==t)return this.validate(t)},"getInputBoxValue":function(){return this.ItemNameBehavior.getInputBoxValue()},"validate":function(e){return this.ItemNameBehavior.validate(e)}})}),csui.define("hbs!csui/controls/compound.document/impl/reorganize.item",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-cd-list-item">\r\n    <div class="csui-cd-list-item-name">\r\n        <span class="icon icon-draggable-handle6"></span>\r\n        <span class="csui-type-icon"></span>\r\n        <span class="csui-label" title="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":5,"column":40},"end":{"line":5,"column":48}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":58}}}):l))+'</span>\r\n        <span class="csui-mime-no-drop">\r\n            '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"small","iconName":"csui_mime_no_drop"},"loc":{"start":{"line":7,"column":12},"end":{"line":7,"column":81}}}))?s:"")+'\r\n        </span>\r\n    </div>\r\n    <div class="csui-cd-list-item-order">\r\n        <span class="csui-order">'+e.escapeExpression((l=null!=(l=r(i,"order")||(null!=t?r(t,"order"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"order","hash":{},"loc":{"start":{"line":11,"column":33},"end":{"line":11,"column":42}}}):l))+"</span>\r\n    </div>\r\n</div>"}});return i.registerPartial("csui_controls_compound.document_impl_reorganize.item",n),n}),csui.define("csui/controls/compound.document/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/compound.document/nls/root/localized.strings",{"enableSwitchText":"Set the first item as the master item","instructionalText":"Some objects, such as compound documents cannot be set as a Master document.","errorMessage":"This object cannot be set as the Master item. Choose another object to be in the first position.","MasterCompoundDocumentLabel":"Master"}),csui.define("css!csui/controls/compound.document/impl/reorganize",[],function(){}),csui.define("csui/controls/compound.document/reorganize/reorganize.item.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette3","csui/controls/node-type.icon/node-type.icon.view","hbs!csui/controls/compound.document/impl/reorganize.item","i18n!csui/controls/compound.document/nls/root/localized.strings","css!csui/controls/compound.document/impl/reorganize"],function(e,t,i,n,o,s){"use strict";return i.View.extend({"className":function(){var t="csui-reorder-item";return e.contains([1,2,136],this.model.get("type"))&&(t+=" csui-non-master-item"),t},"tagName":"li","template":o,"attributes":function(){return{"draggable":"true","data-order-id":this.model.get("order"),"data-type":this.model.get("type"),"id":this.model.get("id"),"tabindex":0,"role":"menuitem"}},"templateContext":function(){return{"name":this.model.get("name"),"order":0===this.model.get("order")?s.MasterCompoundDocumentLabel:this.model.get("order"),"type_name":this.model.get("type_name")}},"constructor":function(e){e||(e={}),this.options=e,i.View.prototype.constructor.call(this,e)},"onRender":function(e){this._nodeIconView=new n({"el":this.$(".csui-type-icon").get(0),"node":this.model}),this._nodeIconView.render()}})}),csui.define("csui/controls/compound.document/reorganize/reorganize.list.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette3","csui/utils/base","csui/controls/compound.document/reorganize/reorganize.item.view","i18n!csui/controls/compound.document/nls/root/localized.strings","css!csui/controls/compound.document/impl/reorganize"],function(e,t,i,n,o,s){"use strict";return i.CollectionView.extend({"className":"csui-reorder-list","tagName":"ul","childView":o,"attributes":{"role":"menu"},"events":{"dragstart .csui-reorder-item":"handleDragStart","dragenter .csui-reorder-item":"handleDragEnter","dragover .csui-reorder-item":"handleDragOver","dragleave .csui-reorder-item":"handleDragLeave","drop .csui-reorder-item":"handleDrop","dragend .csui-reorder-item":"handleDragEnd","keydown .csui-reorder-item":"onKeyInView"},"childViewOptions":function(){return{"collection":this.options.collection,"originatingView":this.options.originatingView,"parentView":this}},"constructor":function(e){e||(e={}),this.options=e,this.source=null,this.isdraggable=e.isdraggable,this.collection=this.options.collection,i.CollectionView.prototype.constructor.apply(this,arguments),this.focusIndex=0},"onRender":function(e){var t=this.$el.find(".csui-reorder-item");this.reOrder(t)},"reorderCollection":function(){this.collection.models.sort(function(e,t){return e.get("order")-t.get("order")});for(var e=0;e<this.collection.length;e++)this.collection.hasMaster?this.collection.models[e].set("order",e,{"silent":!0}):this.collection.models[e].set("order",e+1,{"silent":!0})},"handleDragStart":function(e){this.timer=null,this.edgeSize=200,this.className+=" dragStartClass",this.dragline=t('<div class="csui-dragline">'),this.source=e.currentTarget,this.ghostElem=this.source.cloneNode(!0),this.ghostElem.classList.add("ghostElem"),t(this.ghostElem).css("position","absolute"),document.body.appendChild(this.ghostElem),n.isAppleMobile()?this.ghostElem.css({"left":"-500px","top":"-100%"}):(this.dragEmptyEl=document.createElement("span"),this.dragEmptyEl.classList.add("ghostElem"),t(this.dragEmptyEl).css({"position":"absolute","display":"block","top":"0","left":"0","width":"0","height":"0"}),document.body.appendChild(this.dragEmptyEl)),e.originalEvent&&e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.setData("text",e.currentTarget.innerHTML),e.originalEvent.dataTransfer&&(e.originalEvent.dataTransfer.effectAllowed="move"),e.originalEvent&&e.originalEvent.dataTransfer&&(n.isAppleMobile()?e.originalEvent.dataTransfer.setDragImage(this.ghostElem,10,10):n.isIE11()||e.originalEvent.dataTransfer.setDragImage(this.dragEmptyEl,0,0))},"handleDragEnter":function(e){t(e.currentTarget).addClass("over"),0===parseInt(e.currentTarget.getAttribute("data-order-id"))&&t(this.source).hasClass("csui-non-master-item")?this.isdraggable=!1:this.isdraggable=!0},"removeDragline":function(){this.$el.find(".csui-dragline").remove()},"handleDragOver":function(e){e.preventDefault();var i,o=e.currentTarget;if(e.currentTarget===this.source)return!1;t(e.currentTarget).addClass("over"),t(this.source).addClass("dragStartClass"),e.originalEvent.dataTransfer.dropEffect="move";var s=t('<div class="csui-dragline">');if(0===parseInt(e.currentTarget.getAttribute("data-order-id"))&&t(this.source).hasClass("csui-non-master-item")&&0!=t(e.currentTarget).prev(".csui-dragline").length?(s.addClass("csui-restricted-location"),t(".ghostElem .csui-mime-no-drop").show()):t(".ghostElem .csui-mime-no-drop").hide(),!n.isAppleMobile()){var l=t("body .ghostElem"),r=window.innerWidth-(l.width()+40)+"px",a=e.pageY+20+"px";l.css({"left":r,"top":a})}if(i=t(o).height(),e.offsetY>i/2?(this.removeDragline(),t(o).after(s)):(this.removeDragline(),t(o).before(s)),this.viewportY=e.clientY,this.viewportHeight=this.options.options.sidePanel.$el.find(".csui-sidepanel-body")[0].clientHeight,this.edgeTop=this.edgeSize,this.edgeBottom=this.viewportHeight-this.edgeSize,this.isInTopEdge=this.viewportY<this.edgeTop,this.isInBottomEdge=this.viewportY>this.edgeBottom,!this.isInTopEdge&&!this.isInBottomEdge)return void clearTimeout(this.timer);var c=this.options.options.sidePanel.$el.find(".csui-sidepanel-body .csui-compound-document-form")[0];return this.sidePanelHeight=Math.max(c.scrollHeight,c.offsetHeight,c.clientHeight),this.maxScrollY=this.sidePanelHeight-this.viewportHeight,this.checkForAutoScroll(),!1},"checkForAutoScroll":function(){clearTimeout(this.timer),this.adjustAutoScroll()&&(this.timer=setTimeout(this.checkForAutoScroll(),30))},"adjustAutoScroll":function(){var e,t=this.options.options.sidePanel.$el.find(".csui-sidepanel-body")[0].scrollTop,i=t>0,n=t<this.maxScrollY,o=t;this.isInTopEdge&&i?(e=(this.edgeTop-this.viewportY)/this.edgeSize,o-=50*e):this.isInBottomEdge&&n&&(e=(this.viewportY-this.edgeBottom)/this.edgeSize,o+=50*e),(o=Math.max(0,Math.min(this.maxScrollY,o)))!==t&&this.options.options.sidePanel.$el.find(".csui-sidepanel-body").scrollTop(o)},"handleDragLeave":function(e){t(e.currentTarget).removeClass("dragStartClass"),t(e.currentTarget).removeClass("over")},"handleDrop":function(e){this.removeDragline();var i=this.$el.find(".csui-reorder-item");if(e.preventDefault(),e.stopPropagation(),this.dragSrcOrderId=parseInt(this.source.getAttribute("data-order-id")),this.dragTargetOrderId=parseInt(e.currentTarget.getAttribute("data-order-id")),this.source==e.currentTarget||!this.isdraggable)return t(e.currentTarget).removeClass("over"),t(this.source).removeClass("dragStartClass"),!1;this.makeNewOrderIds(e.currentTarget),t(this.source).removeClass("dragStartClass"),t(e.currentTarget).removeClass("over"),this.reOrder(i)},"makeNewOrderIds":function(e){if(this.source.setAttribute("data-order-id",this.dragTargetOrderId),e.setAttribute("data-order-id",this.dragTargetOrderId),this.nodes=this.$el.find(".csui-reorder-item"),this.dragSrcOrderId<this.dragTargetOrderId){var i=this.collection.hasMaster?this.dragSrcOrderId+1:this.dragSrcOrderId;for(i;i<=this.dragTargetOrderId&&(this.collection.hasMaster||i!==this.dragTargetOrderId);i++)0===this.dragSrcOrderId&&1==i?(t(this.nodes[i]).find(".csui-order")[0].innerHTML=s.MasterCompoundDocumentLabel,this.nodes[i].setAttribute("data-order-id",0)):this.collection.hasMaster?(this.nodes[i].setAttribute("data-order-id",i-1),t(this.nodes[i]).find(".csui-order")[0].innerHTML=i-1):(this.nodes[i].setAttribute("data-order-id",i),t(this.nodes[i]).find(".csui-order")[0].innerHTML=i),this.source.setAttribute("data-order-id",this.dragTargetOrderId),t(this.source).find(".csui-order")[0].innerHTML=this.dragTargetOrderId}else{var n=this.collection.hasMaster?this.dragTargetOrderId:this.dragTargetOrderId-1;for(n;n<this.dragSrcOrderId;n++)this.collection.hasMaster?(this.nodes[n].setAttribute("data-order-id",n+1,{"silent":!0}),t(this.nodes[n]).find(".csui-order")[0].innerHTML=n+1):(this.nodes[n].setAttribute("data-order-id",n+2,{"silent":!0}),t(this.nodes[n]).find(".csui-order")[0].innerHTML=n+2),this.source.setAttribute("data-order-id",this.dragTargetOrderId),t(this.source).find(".csui-order")[0].innerHTML=0===this.dragTargetOrderId?s.MasterCompoundDocumentLabel:this.dragTargetOrderId}},"reOrder":function(e){var t=e;t=Array.prototype.slice.call(t,0),t.sort(function(e,t){return e.getAttribute("data-order-id")-t.getAttribute("data-order-id")});var i=this.$el;i.innerHTML="";for(var n=0,o=t.length;n<o;n++)this.collection.hasMaster?t[n].dataset.orderId=n:t[n].dataset.orderId=n+1,i[0].appendChild(t[n]);this.makeNewOrderList(t),this.handleError(t)},"handleError":function(i){if(i.length){var n=this.options.originatingView.options.sidePanel;t(i).removeClass("csui-unsupported-type"),this.collection.hasMaster&&e.contains([1,2,136],parseInt(i[0].getAttribute("data-type")))?(t(i[0]).addClass("csui-unsupported-type"),n.footerView.$el.find(".csui-submit").length&&n.footerView.$el.find(".csui-submit").prop("disabled",!0),this.showErrorMessage(!0)):(n.footerView.$el.find(".csui-submit").length&&n.footerView.$el.find(".csui-submit").removeAttr("disabled"),this.showErrorMessage(!1))}},"showErrorMessage":function(e){var t=this.options.originatingView.reorganizeMasterSwitchView;e?(t.$el.addClass("csui-inlineform-group-error"),t.$el.find(".csui-masterbtn-info").addClass("binf-hidden"),t.$el.find(".binf-text-danger").removeClass("binf-hidden")):(t.$el.removeClass("csui-inlineform-group-error"),t.$el.find(".binf-text-danger").addClass("binf-hidden"),t.$el.find(".csui-masterbtn-info").removeClass("binf-hidden"))},"makeNewOrderList":function(i){this.collection.orderedList=e.map(i,function(e){var i="0"===e.getAttribute("data-order-id")?s.MasterCompoundDocumentLabel:e.getAttribute("data-order-id");return t(e).find(".csui-order")[0].innerHTML=i,{"id":parseInt(e.getAttribute("id")),"order":parseInt(e.getAttribute("data-order-id"))}})},"handleDragEnd":function(e){e.preventDefault(),t(e.currentTarget).removeClass("over"),t(this.source).removeClass("dragStartClass"),this.removeDragline(),t(this.ghostElem).remove(),t(this.dragEmptyEl).remove()},"onKeyInView":function(e){var i=this.$el.find(".csui-reorder-item"),o=n.isMacintosh(),s=e.keyCode;o&&e.metaKey&&!e.ctrlKey||!o&&!e.metaKey&&e.ctrlKey?(e.preventDefault(),e.stopPropagation(),88===s?this.handleDragStart(e):86===s&&this.source&&(this.handleDrop(e),t(i).removeClass("active"),t(this.source).addClass("active"),t(this.source).trigger("focus"))):i.length&&(38===s?(this.focusIndex>0&&--this.focusIndex,t(i).removeClass("active"),t(i[this.focusIndex]).addClass("active"),t(i[this.focusIndex]).trigger("focus"),e.preventDefault(),e.stopPropagation()):40===s?(this.focusIndex<i.length-1&&++this.focusIndex,t(i).removeClass("active"),t(i[this.focusIndex]).addClass("active"),t(i[this.focusIndex]).trigger("focus"),e.preventDefault(),e.stopPropagation()):9===s&&(t(i).removeClass("active"),e.shiftKey?t(this.options.originatingView.$el.find("input")).trigger("focus"):t(this.options.options.sidePanel.$el.find(".cs-footer-btn")[0]).trigger("focus"),e.preventDefault(),e.stopPropagation()))}})}),csui.define("hbs!csui/controls/compound.document/impl/reorganize.master.switch",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-master-fields-label">\r\n    <div class="csui-label" id="'+e.escapeExpression((s=null!=(s=l(i,"masterSwitchLabelId")||(null!=t?l(t,"masterSwitchLabelId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"masterSwitchLabelId","hash":{},"loc":{"start":{"line":2,"column":32},"end":{"line":2,"column":55}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"enable_switch_text")||(null!=t?l(t,"enable_switch_text"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"enable_switch_text","hash":{},"loc":{"start":{"line":2,"column":57},"end":{"line":2,"column":79}}}):s))+'</div>\r\n    <div class="required-fields-switch"></div>\r\n</div>\r\n<div class="csui-masterbtn-info">'+e.escapeExpression((s=null!=(s=l(i,"instructional_text")||(null!=t?l(t,"instructional_text"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"instructional_text","hash":{},"loc":{"start":{"line":5,"column":33},"end":{"line":5,"column":55}}}):s))+'</div>\r\n<div class="binf-text-danger binf-hidden" role="alert" aria-live="polite">'+e.escapeExpression((s=null!=(s=l(i,"errorMessage")||(null!=t?l(t,"errorMessage"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"errorMessage","hash":{},"loc":{"start":{"line":6,"column":74},"end":{"line":6,"column":90}}}):s))+"</div>"}});return i.registerPartial("csui_controls_compound.document_impl_reorganize.master.switch",n),n}),csui.define("csui/controls/compound.document/reorganize/reorganize.master.switch.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette3","i18n!csui/controls/compound.document/nls/localized.strings","csui/controls/form/fields/booleanfield.view","hbs!csui/controls/compound.document/impl/reorganize.master.switch","css!csui/controls/compound.document/impl/reorganize"],function(e,t,i,n,o,s,l){"use strict";return n.View.extend({"className":"csui-master-button","template":l,"ui":{"applyToFolderAndSubFoldersParentEle":".csui-version-folder-permissions","folderPermissionSelector":".csui-folder-permissions-item"},"templateContext":function(){return{"enable_switch_text":o.enableSwitchText,"instructional_text":o.instructionalText,"masterSwitchLabelId":this.masterSwitchLabelId,"errorMessage":o.errorMessage}},"constructor":function(t){t||(t={}),this.options=t,this.masterSwitchLabelId=e.uniqueId("masterSwitch"),n.View.prototype.constructor.call(this,t)},"onRender":function(){var e=this;this._reorganizeMasterSwitchEnabled=this.options.applyFlag,this.masterFieldSwitchModel=new i.Model({"data":this._reorganizeMasterSwitchEnabled,"options":{},"schema":{"disabled":this.options.disabled}}),this.masterFieldSwitchView=new s({"mode":"writeonly","model":this.masterFieldSwitchModel,"labelId":e.masterSwitchLabelId}),this.$el.find(".required-fields-switch").append(this.masterFieldSwitchView.$el),this.masterFieldSwitchView.render(),this.masterFieldSwitchView.on("field:changed",function(t){e.trigger("reorganize:master:enabled",t)}),this.masterFieldSwitchView.$el.find("input").on("keydown",function(i){if(9===i.keyCode&&!i.shiftKey){i.preventDefault(),i.stopPropagation(),e.options.originatingView.reorganizeListView.focusIndex=0,t(e.options.originatingView.$el.find(".csui-reorder-item")).removeClass("active");var n=t(e.options.originatingView.$el.find(".csui-reorder-item")[0]);n.trigger("focus"),n.addClass("active")}})}})}),csui.define("hbs!csui/controls/compound.document/impl/reorganize",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-master-button-section"></div>\r\n<div class="csui-compound-document-reorder-section"></div>'}});return i.registerPartial("csui_controls_compound.document_impl_reorganize",n),n}),csui.define("csui/controls/compound.document/reorganize/reorganize.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette3","csui/utils/contexts/factories/compound.document.reorganize.factory","csui/controls/compound.document/reorganize/reorganize.list.view","csui/controls/compound.document/reorganize/reorganize.master.switch.view","hbs!csui/controls/compound.document/impl/reorganize","css!csui/controls/compound.document/impl/reorganize"],function(e,t,i,n,o,s,l){"use strict";return i.View.extend({"className":"csui-compound-document-form","template":l,"regions":function(){return{"compoundDocumentReorderSection":".csui-compound-document-reorder-section","masterButtonSection":".csui-master-button-section"}},"constructor":function(e){e||(e={}),this.options=e,this.collection=this.options.collection||this.options.context.getCollection(n,this.options),this.collection.options.nodeId=this.options.node.get("id"),this.collection.fetch(),i.View.prototype.constructor.call(this,e),this.listenToOnce(this.collection,"sync",this._handleCollectionSync)},"_handleCollectionSync":function(){var t=e.filter(this.collection.models,function(e){return 0===e.get("order")});this.collection.hasMaster=t.length>0},"onRender":function(){this.reorganizeListView=new o({"options":this.options,"collection":this.collection,"isdraggable":this.collection.hasMaster,"originatingView":this}),this.reorganizeMasterSwitchView=new s({"applyFlag":this.reorganizeListView.collection.hasMaster,"originatingView":this,"disabled":0===this.collection.length}),this.reorganizeListView.reorderCollection(),this.showChildView("compoundDocumentReorderSection",this.reorganizeListView),this.showChildView("masterButtonSection",this.reorganizeMasterSwitchView),this.listenTo(this.reorganizeMasterSwitchView,"reorganize:master:enabled",this._reorganizeMasterEnabled)},"_reorganizeMasterEnabled":function(e){this.MasterSwitchEnabled=!!e.fieldvalue;var t=this.$el.find(".csui-reorder-list li");this.reorganizeListView.collection.hasMaster=this.MasterSwitchEnabled,this.reorganizeListView.reOrder(t)}})}),csui.define("csui/controls/about.box/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/about.box/nls/root/localized.strings",{"aboutBox":"About","brandTitle":"opentext | ","copyrights":"Copyright \xa9 2021 Open Text. All Rights Reserved. Trademarks owned by Open Text.","patents":"One or more patents may cover this product(s).","moreInfo":"For more information, please visit, ","moreInfoLink":"https://www.opentext.com/patents","disclaimer":"Disclaimer","disclaimerText":"No Warranties and Limitation of Liability. Every effort has been made to ensure the accuracy of the features and techniques presented in this publication. However, Open Text Corporation and its affiliates accept no responsibility and offer no warranty whether expressed or implied, for the accuracy of this publication.","warning":"Warning","warningText":"This software is protected by copyright law and international treaties. Unauthorized reproduction or distribution of this program, or any portion of it, may result in severe civil and criminal penalties, and will be prosecuted to the maximum extent possible under the law."}),csui.define("hbs!csui/controls/about.box/impl/about.box",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="about-box" id="'+e.escapeExpression((s=null!=(s=l(i,"infoTextId")||(null!=t?l(t,"infoTextId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"infoTextId","hash":{},"loc":{"start":{"line":1,"column":27},"end":{"line":1,"column":41}}}):s))+'">\r\n    <div id="about" class="tabcontent">\r\n        <span>'+e.escapeExpression((s=null!=(s=l(i,"copyrights")||(null!=t?l(t,"copyrights"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"copyrights","hash":{},"loc":{"start":{"line":9,"column":14},"end":{"line":9,"column":28}}}):s))+"</span>\r\n        <span>"+e.escapeExpression((s=null!=(s=l(i,"patents")||(null!=t?l(t,"patents"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{
"name":"patents","hash":{},"loc":{"start":{"line":10,"column":14},"end":{"line":10,"column":25}}}):s))+" <br> "+e.escapeExpression((s=null!=(s=l(i,"moreInfo")||(null!=t?l(t,"moreInfo"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"moreInfo","hash":{},"loc":{"start":{"line":10,"column":31},"end":{"line":10,"column":43}}}):s))+'<a href="'+e.escapeExpression((s=null!=(s=l(i,"moreInfoLink")||(null!=t?l(t,"moreInfoLink"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"moreInfoLink","hash":{},"loc":{"start":{"line":10,"column":52},"end":{"line":10,"column":68}}}):s))+'" role="link" title="'+e.escapeExpression((s=null!=(s=l(i,"moreInfoLink")||(null!=t?l(t,"moreInfoLink"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"moreInfoLink","hash":{},"loc":{"start":{"line":10,"column":89},"end":{"line":10,"column":105}}}):s))+'"\r\n                aria-label="">'+e.escapeExpression((s=null!=(s=l(i,"moreInfoLink")||(null!=t?l(t,"moreInfoLink"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"moreInfoLink","hash":{},"loc":{"start":{"line":11,"column":30},"end":{"line":11,"column":46}}}):s))+'</a></span>\r\n        <h6 class="csui-small-header">'+e.escapeExpression((s=null!=(s=l(i,"disclaimer")||(null!=t?l(t,"disclaimer"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"disclaimer","hash":{},"loc":{"start":{"line":12,"column":38},"end":{"line":12,"column":52}}}):s))+"</h6>\r\n        <span>"+e.escapeExpression((s=null!=(s=l(i,"disclaimerText")||(null!=t?l(t,"disclaimerText"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"disclaimerText","hash":{},"loc":{"start":{"line":13,"column":14},"end":{"line":13,"column":32}}}):s))+'</span>\r\n        <div class="csui-warningtext"><h6 class="csui-small-header">'+e.escapeExpression((s=null!=(s=l(i,"warning")||(null!=t?l(t,"warning"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"warning","hash":{},"loc":{"start":{"line":14,"column":68},"end":{"line":14,"column":79}}}):s))+" : </h6><span>"+e.escapeExpression((s=null!=(s=l(i,"warningText")||(null!=t?l(t,"warningText"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"warningText","hash":{},"loc":{"start":{"line":14,"column":93},"end":{"line":14,"column":108}}}):s))+"</span>\r\n        </div>\r\n    </div>\r\n</div>"}});return i.registerPartial("csui_controls_about.box_impl_about.box",n),n}),csui.define("css!csui/controls/about.box/impl/about.box",[],function(){}),csui.define("csui/controls/about.box/about.box.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette3","i18n!csui/controls/about.box/nls/localized.strings","i18n!csui/pages/start/nls/lang","hbs!csui/controls/about.box/impl/about.box","css!csui/controls/about.box/impl/about.box"],function(e,t,i,n,o,s){return i.View.extend({"template":s,"ui":{"tablinks":".tablinks","tabcontent":".tabcontent"},"events":{},"constructor":function(t){t||(t={}),this.options=t,this.infoTextId=e.uniqueId("msg"),i.View.prototype.constructor.apply(this,arguments)},"templateContext":function(){return{"copyrights":n.copyrights,"patents":n.patents,"moreInfo":n.moreInfo,"moreInfoLink":n.moreInfoLink,"disclaimer":n.disclaimer,"disclaimerText":n.disclaimerText,"warning":n.warning,"warningText":n.warningText,"infoTextId":this.infoTextId}},"onRender":function(){var e=this._parent&&this._parent._parent&&this._parent._parent._parent&&this._parent._parent._parent.$el.find(".binf-modal-dialog");e.attr({"aria-describedby":this.infoTextId,"aria-label":n.brandTitle+o.ProductName}),e.find(".csui-logo-image").attr({"role":"img","aria-label":n.brandTitle+o.ProductName})},"handleTabClick":function(e){var t=this.$el.find("#"+e.target.dataset.tabId);this.ui.tabcontent.addClass("binf-hidden"),this.ui.tablinks.removeClass("selected"),t.removeClass("binf-hidden"),e.currentTarget.classList.add("selected")}})}),csui.define("csui/dialogs/members.picker/members.picker.dialog",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/dialog/dialog.view","csui/dialogs/members.picker/impl/members.picker.view","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/member","csui/models/member/member.model","csui/models/member/membercollection","csui/dialogs/members.picker/start.locations/start.location.collection","csui/dialogs/members.picker/impl/command.type","csui/dialogs/members.picker/impl/header/members.picker.header.view","i18n!csui/dialogs/members.picker/impl/nls/lang","csui/utils/log","csui/controls/progressblocker/blocker","css!csui/dialogs/members.picker/impl/members.picker","csui/dialogs/node.picker/node.picker"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g){"use strict";function b(e){if(e||(e={}),this.options=t.defaults(e,v,{"pageSize":30}),this.options.connector||(this.options.connector=this._getConnector(this.options)),!this.options.connector){var i=m.missingConnector;throw f.error(i)&&console.error(i),new Error(i)}this.options.targetBrowseHistory=[],this.options.navigateFromHistory=!1,this.options.initialContainer=this._getInitalContainer(this.options),this.options.unselectableMembers=this._getArrayOfNodeIds(e.unselectableMembers),this.options.commandType=new h(this.options)}var v=(t.extend({"initialLocationLookupOrder":["csui/dialogs/members.picker/start.locations/recent.groups","csui/dialogs/members.picker/start.locations/member.groups","csui/dialogs/members.picker/start.locations/all.members"]},e.config()),{"initialSelection":[],"dialogTitle":m.dialogTitle,"orderBy":"name asc"});return t.extend(b.prototype,{"show":function(){return this._locations=new d(this.options),this._locations.fetch({"connector":this.options.connector,"container":this.options.initialContainer,"removeInvalid":!1}).done(t.bind(this._showDialog,this)),this._deferred=i.Deferred(),this._deferred.promise()},"_showDialog":function(){var e=(this.options,this._getInitialLocation());this._headerControl=this._createHeaderControl(e),this._view=this._createPickerView(e),this._dialog=this._createDialog(),this._dialog.show()},"_createHeaderControl":function(e){var t=this.options,i=null==t.locationSelector||t.locationSelector,n=new p({"headerViewoptions":this.options,"locations":this._locations,"title":t.dialogTitle,"context":t.context,"initialLocation":e,"adduserorgroup":!!t.adduserorgroup&&t.adduserorgroup,"locationSelector":i,"initialSelection":t.initialSelection});return t.adduserorgroup&&n.startLocationView.on("change:location",this.onChangeLocation,this),n},"_createPickerView":function(e){this.options.startLocation||(this.options.startLocation=this._locations.at(0));var i=this.options,n=e.get("factory"),o=n.getLocationParameters(this.options);t.defaults(o,this.options);var s=new l(o);return s.on("changing:selection",this._blockDialog,this).on("change:location",this.onChangeLocation,this),i.adduserorgroup&&s.on("change:complete",this.onSelectionChange,this),this.membersPickerView=s,s},"dialogClassName":function(){var e="target-browse";return this.options&&this.options.userClassName&&(e=e+" "+this.options.userClassName),e},"_createDialog":function(){var e=this.options,i=[{"label":m.cancelButtonLabel,"close":!0}];e.adduserorgroup&&(i=[{"id":"select","label":e.addButtonLabel||e.commandType.addButtonLabel,"default":!0,"disabled":!0,"click":t.bind(this.onClickAddButton,this)},{"label":m.cancelButtonLabel,"close":!0}]);var n=new s({"title":e.dialogTitle,"adduserorgroup":!!e.adduserorgroup&&e.adduserorgroup,"headerView":this._headerControl,"view":this._view,"className":this.dialogClassName,"userClassName":this.options.dialogClass,"attributes":{"aria-label":e.dialogTitle},"largeSize":!0,"buttons":i});return n.listenTo(n,"hide",t.bind(this.onHideDialog,this)),g.imbue(n),n},"_blockDialog":function(){return this._dialog.blockWithoutIndicator(),!0},"onHideDialog":function(){this._deferred&&(this._result?this._deferred.resolve(this._result):"pending"===this._deferred.state()&&this._deferred.reject({"cancelled":!0}))},"onChangeLocation":function(e){e.get||(e=this._locations.get("csui/dialogs/members.picker/start.locations/"+e)),this.options.targetBrowseHistory=[],this._view.destroy(),this.membersPickerView.trigger("change:complete"),this.options.previousLocation=e,this._view=this._createPickerView(e);e.get("factory").container;this._dialog.showView(this._view)},"onClickAddButton":function(){if(this&&this._view&&this._view.getSelection()){var e=this._view.getSelection();this._result={"members":e},this._dialog.destroy()}else this._dialog.updateButton("select",{"disabled":!0})},"_getArrayOfNodeIds":function(e){return e&&!t.isEmpty(e)&&e[0]instanceof n.Model?t.map(e,function(e){return e.get("right_id")}):e},"_getInitalContainer":function(e){var i=this.options.initialContainer;return null!=i&&!t.isEmpty(i)&&i instanceof n.Model||(i=new c({"groupId":e.groupId,"displayName":e.displayName},{"connector":e.connector})),i},"_getConnector":function(e){var i;if(e.context)i=e.context.getObject(r);else if(e.initialSelection||e.initialContainer){var n=e.initialSelection,o=n?t.isArray(n)?n:n.models:void 0,s=e.initialContainer||o[0];i=s&&s.connector}return i},"_getInitialLocation":function(){var e,t=this.options.startLocation;if(t){t.lastIndexOf("/")<0&&(t="csui/dialogs/members.picker/start.locations/"+t),e=this._locations.get(t)}return!t&&this.options.groupId&&(e=this._locations.get("csui/dialogs/members.picker/start.locations/current.group")),e},"onSelectionChange":function(e){var t,i=this._view.getNumberOfSelectItems()>0;e&&e.get("id")&&(this.options.locationID=e.get("id")),this._dialog.destroyBlockingView(),this.options.saveFilter&&this._headerControl&&this._headerControl.ui.saveFilter?(t=!!this._headerControl.ui.saveFilter.val().trim(),t&&i?this._dialog.updateButton("select",{"disabled":!1}):this._dialog.updateButton("select",{"disabled":!0})):this._dialog.updateButton("select",{"disabled":!i})}}),b}),csui.define("csui/dialogs/multilingual.text.picker/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/dialogs/multilingual.text.picker/impl/nls/root/lang",{"formHeading":"This field can be translated for each defined metadata language","dialogTitle":"Multilingual Values","btnDone":"Done","btnCancel":"Cancel"}),csui.define("csui/dialogs/multilingual.text.picker/languages",[],function(){return{"en":{"LanguageName":"English","LanguageNameLocal":"English"},"en-US":{"LanguageName":"English ( United States )","LanguageNameLocal":"English ( United States )"},"ar":{"LanguageName":"Arabic","LanguageNameLocal":"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},"ca-ES":{"LanguageName":"Catalan","LanguageNameLocal":"Catal\xe0"},"zh-CN":{"LanguageName":"Simplified Chinese","LanguageNameLocal":"\u4e2d\u6587"},"zh-TW":{"LanguageName":"Traditional Chinese","LanguageNameLocal":"\u4e2d\u6587"},"nl":{"LanguageName":"Dutch","LanguageNameLocal":"Nederlands"},"fi-FI":{"LanguageName":"Finnish","LanguageNameLocal":"Suomi"},"fr":{"LanguageName":"French","LanguageNameLocal":"Fran\xe7ais"},"de":{"LanguageName":"German","LanguageNameLocal":"Deutsch"},"it":{"LanguageName":"Italian","LanguageNameLocal":"Italiano"},"ja":{"LanguageName":"Japanese","LanguageNameLocal":"\u65e5\u672c\u8a9e"},"kk-KZ":{"LanguageName":"Kazakh","LanguageNameLocal":"\u049a\u0430\u0437\u0430\u049b"},"ko-KR":{"LanguageName":"Korean","LanguageNameLocal":"\ud55c\uad6d\uc5b4"},"pt":{"LanguageName":"Portuguese","LanguageNameLocal":"Portugu\xeas"},"ru-RU":{"LanguageName":"Russian","LanguageNameLocal":"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"},"es":{"LanguageName":"Spanish","LanguageNameLocal":"Espa\xf1ol"},"sv":{"LanguageName":"Swedish","LanguageNameLocal":"Svenska"},"uk-UA":{"LanguageName":"Ukrainian","LanguageNameLocal":"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"}}}),csui.define("hbs!csui/dialogs/multilingual.text.picker/impl/multilingual.form",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o,s,l){var r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <div class="binf-row">\r\n      <label class="binf-control-label alpaca-control-label binf-col-sm-4"\r\n             for="input-'+e.escapeExpression(e.lambda(null!=t?r(t,"LanguageCode"):t,t))+'"\r\n             title="'+e.escapeExpression(e.lambda(null!=t?r(t,"LanguageNameLocal"):t,t))+'">'+e.escapeExpression(e.lambda(null!=t?r(t,"LanguageNameLocal"):t,t))+'</label>\r\n      <div class="binf-col-sm-8 input-container">\r\n        <label lang="'+e.escapeExpression(e.lambda(null!=t?r(t,"LanguageCode"):t,t))+'">\r\n          <input id="input-'+e.escapeExpression(e.lambda(null!=t?r(t,"LanguageCode"):t,t))+'" value="'+e.escapeExpression(r(i,"lookup").call(null!=t?t:e.nullContext||{},null!=l[1]?r(l[1],"data"):l[1],null!=t?r(t,"LanguageCode"):t,{"name":"lookup","hash":{},"loc":{"start":{"line":12,"column":57},"end":{"line":12,"column":93}}}))+'" lang="'+e.escapeExpression(e.lambda(null!=t?r(t,"LanguageCode"):t,t))+'">\r\n        </label>\r\n      </div>\r\n    </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o,s,l){var r,a,c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-header">\r\n  '+e.escapeExpression((a=null!=(a=c(i,"formHeading")||(null!=t?c(t,"formHeading"):t))?a:e.hooks.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{"name":"formHeading","hash":{},"loc":{"start":{"line":2,"column":2},"end":{"line":2,"column":17}}}):a))+'\r\n</div>\r\n<div class="cs-ml-form-container">\r\n'+(null!=(r=c(i,"each").call(null!=t?t:e.nullContext||{},null!=t?c(t,"languages"):t,{"name":"each","hash":{},"fn":e.program(1,o,0,s,l),"inverse":e.noop,"loc":{"start":{"line":5,"column":2},"end":{"line":16,"column":11}}}))?r:"")+"</div>"},"useDepths":!0});return i.registerPartial("csui_dialogs_multilingual.text.picker_impl_multilingual.form",n),n}),csui.define("css!csui/dialogs/multilingual.text.picker/impl/multilingual.form",[],function(){}),csui.define("csui/dialogs/multilingual.text.picker/impl/multilingual.form.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/form/impl/fields/csformfield.view","csui/utils/contexts/factories/connector","csui/dialogs/multilingual.text.picker/languages","i18n!csui/dialogs/multilingual.text.picker/impl/nls/lang","hbs!csui/dialogs/multilingual.text.picker/impl/multilingual.form","css!csui/dialogs/multilingual.text.picker/impl/multilingual.form","csui/lib/binf/js/binf","csui/lib/handlebars.helpers.xif"],function(e,t,i,n,o,s,l,r,a){var c=csui.require.s.contexts._.config.config.i18n,u=c&&c.availableLanguages;return u&&0!=u.length||(u=[]),n.LayoutView.extend({"template":a,"className":"cs-multilingual-form","templateHelpers":function(){return{"formHeading":r.formHeading,"languages":this.languages,"data":this.data}},"constructor":function(t){n.LayoutView.apply(this,arguments),this._prepareLanguages(),this.data=e.extend({},t.data||{})},"_prepareLanguages":function(){this.languages=e.map(u,function(t,i){var n=u[i].languageCode.split("_"),o=2===n.length?n[1]:n[1]+"-"+n[2];return e.defaults({},l[o],{"LanguageCode":o,"LanguageName":u[i].displayName,"LanguageNameLocal":u[i].displayName})})},"getData":function(){var t=this,i=this.data;return e.each(this.languages,function(e){i[e.LanguageCode]=t.$el.find("#input-"+e.LanguageCode).val()}),i}})}),csui.define("csui/dialogs/multilingual.text.picker/multilingual.text.picker",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/dialog/dialog.view","i18n!csui/dialogs/multilingual.text.picker/impl/nls/lang","csui/dialogs/multilingual.text.picker/impl/multilingual.form.view","csui/utils/log","csui/lib/binf/js/binf","csui/lib/handlebars.helpers.xif"],function(e,t,i,n,o,s,l,r){function a(t){t||(t={}),this.options=e.defaults(t,c)}var c={"dialogTitle":s.dialogTitle};return e.extend(a.prototype,{"show":function(){return this._showDialog(),this._deferred=t.Deferred(),this._deferred.promise()},"_showDialog":function(){this._view=this._createMultilingualForm(),this._dialog=this._createDialog(),this._dialog.show()},"_createMultilingualForm":function(){return new l(this.options)},"_createDialog":function(){var t=this.options,i=new o({"title":t.dialogTitle,"view":this._view,"midSize":!0,"className":"cs-multilingual-picker","attributes":{"aria-label":t.dialogTitle},"buttons":[{"id":"done","label":s.btnDone,"default":!0,"disabled":!1,"click":e.bind(this._onClickDoneButton,this,status)},{"id":"cancel","label":s.btnCancel,"close":!0,"click":e.bind(this.onClickCancelButton,this)}]});return i.listenTo(i,"hide",e.bind(this._onHideDialog,this)),i},"_onClickDoneButton":function(){this._result=this._view.getData(),this._dialog.destroy()},"onClickCancelButton":function(){},"_onHideDialog":function(){this._deferred&&(this._result?this._deferred.resolve(this._view.getData()):"pending"===this._deferred.state()&&this._deferred.reject({"cancelled":!0}))}}),a}),csui.define("hbs!csui/dialogs/restructure/impl/memberlist/impl/memberlist",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-member-list-group-title">\r\n    <p id="memberlisttitle" class="title title-recepients" title="'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":5,"column":66},"end":{"line":5,"column":75}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":5,"column":77},"end":{"line":5,"column":86}}}):s))+"</p>\r\n   </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\r\n\x3c!-- start src/dialogs/restructure/impl/memberlist/impl/memberlist.hbs --\x3e\r\n"+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"title"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":3,"column":0},"end":{"line":7,"column":7}}}))?s:"")+'<div class="content">\r\n  <ul class="csui-member-list-group binf-list-group" aria-labelledby="memberlisttitle"></ul>\r\n</div>\r\n\x3c!-- end src/dialogs/restructure/impl/memberlist/impl/memberlist.hbs --\x3e\r\n\r\n'}});return i.registerPartial("csui_dialogs_restructure_impl_memberlist_impl_memberlist",n),n}),csui.define("hbs!csui/dialogs/restructure/impl/memberlist/impl/memberitem",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="csui-icon-paceholder csui-icon image_group_placeholder"></span>\r\n  <img class="csui-icon-group csui-icon binf-img-circle binf-hidden" alt="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":4,"column":74},"end":{"line":4,"column":82}}}):s))+'"> </img>\r\n'},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <span class="csui-icon-paceholder csui-icon image_user_placeholder">'+e.escapeExpression((s=null!=(s=l(i,"initials")||(null!=t?l(t,"initials"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"initials","hash":{},"loc":{"start":{"line":6,"column":70},"end":{"line":6,"column":82}}}):s))+'</span>\r\n  <img class="csui-icon-user csui-icon binf-img-circle binf-hidden" alt="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":7,"column":73},"end":{"line":7,"column":81}}}):s))+'"\r\n         src="'+e.escapeExpression((s=null!=(s=l(i,"userImgSrc")||(null!=t?l(t,"userImgSrc"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"userImgSrc","hash":{},"loc":{"start":{"line":8,"column":14},"end":{"line":8,"column":28}}}):s))+'" > </img>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-pull-left">\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"type"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":2,"column":2},"end":{"line":9,"column":9}}}))?s:"")+'</div>\r\n<div class="list-item-title">\r\n  <span class="name" title="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":12,"column":28},"end":{"line":12,"column":36}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":12,"column":38},"end":{"line":12,"column":46}}}):l))+'</span>\r\n</div>\r\n<div class="icon-remove binf-pull-right">\r\n  <button class="csui-icon circle_delete" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"ariaDelete")||(null!=t?r(t,"ariaDelete"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"ariaDelete","hash":{},"loc":{"start":{"line":15,"column":54},"end":{"line":15,"column":68}}}):l))+'" title="'+e.escapeExpression((l=null!=(l=r(i,"ariaDelete")||(null!=t?r(t,"ariaDelete"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"ariaDelete","hash":{},"loc":{"start":{"line":15,"column":77},"end":{"line":15,"column":91}}}):l))+'" tabindex="0"></button>\r\n</div>\r\n'}});return i.registerPartial("csui_dialogs_restructure_impl_memberlist_impl_memberitem",n),n}),csui.define("csui/dialogs/restructure/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/dialogs/restructure/impl/nls/root/lang",{"targetLocation":"Target location","startProcessAt":"Start process at","notifyUsers":"Notify users","reference":"Reference","comment":"Comment","startProcess":"Start process","immediate":"Immediate","schedule":"Schedule","locationPlaceholder":"Add target","notificationListTitle":"Notification recipients","selectTargetLocation":"Select target location","requiredFiledInfo":"marks required fields","requiredField":"This is a required field.","removeAssignee":"Remove"}),csui.define("css!csui/dialogs/restructure/impl/memberlist/impl/memberlist",[],function(){}),csui.define("csui/dialogs/restructure/impl/memberlist/memberlist.view",["csui/lib/underscore","csui/lib/marionette","csui/utils/base","csui/controls/userpicker/roles/user.view","csui/utils/user.avatar.color","csui/utils/url","hbs!csui/dialogs/restructure/impl/memberlist/impl/memberlist","hbs!csui/dialogs/restructure/impl/memberlist/impl/memberitem","i18n!csui/dialogs/restructure/impl/nls/lang","css!csui/dialogs/restructure/impl/memberlist/impl/memberlist"],function(e,t,i,n,o,s,l,r,a){"use strict";var c=n.extend({"constructor":function(e){e||(e={}),n.prototype.constructor.apply(this,arguments),this.listenTo(this,"render",this._assignUserColor)},"onRender":function(){this.options.lightWeight||this._displayProfileImage()},"onDestroy":function(){this._releasePhotoUrl()},"className":"csui-member-list-item binf-list-group-item","template":r,"tagName":"li","attributes":{"tabindex":"0"},"ui":{"personalizedImage":".csui-icon-user","defaultImage":".csui-icon-paceholder"},"templateHelpers":function(){return{"name":i.formatMemberName(this.model),"initials":this.model.get("initials"),"userImgSrc":"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs="}},"events":{"click .icon-remove":"onClickRemove","focus .circle_delete":"onFocusEnter","blur .circle_delete":"onFocusLeave","keydown":"onKeyDown"},"onClickRemove":function(){this.triggerMethod("remove:member"),!this.cancelClick&&this.destroy()},"onKeyDown":function(e){46===e.keyCode&&this.onClickRemove()},"onFocusEnter":function(){this.$el.addClass("focused")},"onFocusLeave":function(){this.$el.removeClass("focused")},"_displayProfileImage":function(){var t=this._getUserPhotoUrl();if(this.ui.personalizedImage.addClass("csui-userprofile-img-"+this.model.get("id")),t){var i={"url":t,"dataType":"binary"};this._releasePhotoUrl(),this.options.model.connector.makeAjaxCall(i).always(e.bind(function(e,t,i){200===i.status?this._showPersonalizedImage(e):this._showDefaultImage()},this))}else this._showDefaultImage()},"_getUserPhotoUrl":function(){var e=this.options.model&&this.options.model.connector.connection||this.options.connector&&this.options.connector.connection,t=new s(e.url).getCgiScript(),i=this.model.get("photo_url");if(i&&i.indexOf("?")>0)return s.combine(t,i)},"_showPersonalizedImage":function(e){this._releasePhotoUrl(),this._photoUrl=URL.createObjectURL(e),this.ui.personalizedImage.attr("src",this._photoUrl),this.ui.defaultImage.addClass("binf-hidden"),this.ui.personalizedImage.removeClass("binf-hidden")},"_showDefaultImage":function(e){this._releasePhotoUrl(),this.ui.personalizedImage.addClass("binf-hidden"),this.ui.defaultImage.removeClass("binf-hidden")},"_releasePhotoUrl":function(){this._photoUrl&&(URL.revokeObjectURL(this._photoUrl),this._photoUrl=void 0)},"_assignUserColor":function(){if(0===this.model.get("type")){var e=o.getUserAvatarColor(this.model.attributes);this.ui.defaultImage.css("background",e)}}});return t.CompositeView.extend({"className":"csui-member-list-group","constructor":function(i){i||(i={}),i.data||(i.data={}),t.CompositeView.prototype.constructor.apply(this,arguments),this.$el.one("mouseenter",e.bind(function(){this.triggerMethod("dom:refresh")},this))},"template":l,"templateHelpers":function(){return{"title":this.options.data.title}},"childViewContainer":".binf-list-group","childView":c,"childViewOptions":function(){return{"connector":this.options.connector,"templateHelpers":function(){return{"name":i.formatMemberName(this.model),"ariaDelete":a.removeAssignee}}}},"onChildviewRemoveMember":function(e){this.triggerMethod("remove:member",e)}},{"getNameByValue":function(t,i){var n=e.findWhere(t,{"value":i});return n&&n.name}})}),csui.define("csui/dialogs/restructure/impl/restructureform/restructureform.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/form/form.view","csui/dialogs/restructure/impl/memberlist/memberlist.view","csui/behaviors/keyboard.navigation/tabkey.behavior","i18n!csui/dialogs/restructure/impl/nls/root/lang"],function(e,t,i,n,o,s,l,r){"use strict";return o.extend({"id":"csui-restructure-form","behaviors":{"TabableRegionBehavior":{"behaviorClass":l}},"constructor":function(t){t||(t={}),t=e.extend(t,{"mode":"create"}),o.prototype.constructor.apply(this,arguments)},"initialize":function(){this.$el.addClass("csui-restructure-form"),this._assigneeCollection=this._getAssigneeCollection(),this.listenTo(this._assigneeCollection,"changed",this._ensureAssigneeListView),this.assigneeListView=new s({"collection":this._assigneeCollection,"context":this.options.context,"connector":this.options.connector,"data":{"title":r.notificationListTitle}}),this.listenTo(this.assigneeListView,"remove:member",function(e){this._removeAssignee(e.model)&&this.validate("notifyUsers")}),this.emptyView=new n.ItemView({"template":!1}),this.listenTo(this,{"render":this.onAfterRender,"before:destroy":function(){this.assigneeListView.destroy(),this.emptyView.destroy(),this.assigneeListRegion.destroy()},"change:field":function(){this.validate()}})},"_getAssigneeCollection":function(){return new i.Collection},"_addAssignee":function(e){return!(!e.id||this._assigneeCollection.findWhere({"id":e.id}))&&(this._assigneeCollection.add(e,{"at":0}),this._assigneeCollection.trigger("changed"),!0)},"_removeAssignee":function(e){var i=e.get("id");if(this._assigneeCollection.findWhere({"id":i})){this._assigneeCollection.remove(e),this._assigneeCollection.trigger("changed");var n=t.Event("keydown");return n.keyCode=9,n.shiftKey=!0,this.$el.trigger(n),!0}return!1},"_setCustomValidators":function(){var e=this,t=this.model.get("options").fields;t&&t.location&&t.notifyUsers&&(t.location.validator=function(t){this.fieldView&&this.fieldView.pickerArgs&&(this.fieldView.pickerArgs.applyProperties||this.fieldView.pickerArgs.openSelectedProperties)&&(e.applyProperties=this.fieldView.pickerArgs.applyProperties,e.openSelectedProperties=this.fieldView.pickerArgs.openSelectedProperties,e.selectedOptions=this.fieldView.pickerArgs.nodes),e.validate(this.name)?(t({"status":!0}),this.field.removeClass("binf-has-error alpaca-invalid")):(t({"status":!1}),this.field.addClass("binf-has-error alpaca-invalid"))},t.notifyUsers.validator=function(t){this.data.id&&e._addAssignee(this.data)&&(this.fieldView.setValue("",!1),this.field.find("input").val("")),this.data=""})},"_addAssigneeListRegion":function(){var e=t("<div></div>").addClass("notifyUsers-list");this.assigneeListRegion=new n.Region({"el":e}),this.$el.append(e)},"_addRequiredFieldInfo":function(){if("create"===this.type){var e=t("<div></div>").addClass("csui-required-field-info"),i=t("<span></span>").addClass("alpaca-icon-required binf-glyphicon binf-glyphicon-star");e.append(i),e.append(" "+r.requiredFiledInfo),this.$el.prepend(e)}},"_ensureAssigneeListView":function(){this._assigneeCollection.length?this.assigneeListRegion.currentView instanceof s||this.assigneeListRegion.show(this.assigneeListView,{"preventDestroy":!0}):this.assigneeListRegion.show(this.emptyView,{"preventDestroy":!0})},"validate":function(e){var t;return t=!!this.getValues().location,this.triggerMethod(t?"valid:form":"invalid:form"),t},"getValues":function(){var t=this.form.getValue();return t.notifyUsers=e.map(this._assigneeCollection.models,function(e){return e.get("id")},this),t},"onAfterRender":function(){this._setCustomValidators(),this._addRequiredFieldInfo(),this._addAssigneeListRegion(),this._ensureAssigneeListView()}})}),csui.define("csui/dialogs/restructure/impl/restructureform/impl/restructureform.model",["csui/lib/underscore","csui/lib/jquery","csui/models/form","csui/utils/base","i18n!csui/dialogs/restructure/impl/nls/root/lang"],function(e,t,i,n,o){"use strict";return i.extend({"defaults":{"data":{},"options":{},"schema":{}},"constructor":function(e,t){t||(t={}),i.prototype.constructor.apply(this,arguments)},"initialize":function(){this._setFormAttributes()},"_setFormAttributes":function(){var e=this.options.models.length,t=Date.now();this.set({"data":{"location":"","startProcess":o.immediate,"startProcessAt":n.parseDate(t),"notifyUsers":"","reference":"","comment":""},"options":{"fields":{"location":{"hidden":!1,"hideInitValidationError":!0,"label":o.targetLocation,"readonly":!1,"placeholder":o.locationPlaceholder,"type":"otcs_node_picker","type_control":{"parameters":{"propertiesSeletor":!0,"includeCombineProperties":1===e,"dialogTitle":o.selectTargetLocation,"addableTypes":[0],"selectableTypes":[-1],"unselectableTypes":[899],"startLocation":"csui/dialogs/node.picker/start.locations/current.location",
"startLocations":["csui/dialogs/node.picker/start.locations/current.location","csui/dialogs/node.picker/start.locations/enterprise.volume","csui/dialogs/node.picker/start.locations/favorites","csui/dialogs/node.picker/start.locations/recent.containers"],"initialContainer":this.options.container}}},"startProcess":{"hidden":!1,"hideInitValidationError":!0,"label":o.startProcess,"readonly":!1,"removeDefaultNone":!0,"type":"select"},"startProcessAt":{"hidden":!1,"hideInitValidationError":!0,"label":o.startProcessAt,"readonly":!1,"type":"datetime","dependencies":{"startProcess":o.schedule}},"reference":{"label":o.reference,"hidden":!1,"hideInitValidationError":!0,"readonly":!1,"validate":!0,"type":"text","size":255},"comment":{"label":o.comment,"hidden":!1,"hideInitValidationError":!0,"readonly":!1,"type":"textarea"},"notifyUsers":{"hidden":!1,"hideInitValidationError":!0,"label":o.notifyUsers,"clearField":!0,"readonly":!1,"type":"otcs_user"}}},"schema":{"properties":{"location":{"readonly":!1,"required":!0,"title":o.targetLocation,"type":"otcs_node_picker"},"startProcess":{"title":o.startProcess,"type":"string","enum":[o.immediate,o.schedule]},"startProcessAt":{"readonly":!1,"required":!1,"title":o.startProcessAt,"type":"string","dependencies":["startProcess"]},"reference":{"readonly":!1,"required":!1,"title":o.reference,"type":"string"},"comment":{"readonly":!1,"required":!1,"title":o.comment,"type":"string"},"notifyUsers":{"readonly":!1,"required":!1,"title":o.notifyUsers,"type":"otcs_user"}},"dependencies":{"startProcessAt":["startProcess"]},"type":"object"}})}})}),csui.define("hbs!csui/dialogs/restructure/impl/restructure",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div id="formviewwrapper" class="formview-wrapper"></div>'}});return i.registerPartial("csui_dialogs_restructure_impl_restructure",n),n}),csui.define("css!csui/dialogs/restructure/impl/restructure.dialog",[],function(){}),csui.define("csui/dialogs/restructure/restructure.dialog",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/dialogs/restructure/impl/restructureform/restructureform.view","csui/dialogs/restructure/impl/restructureform/impl/restructureform.model","csui/controls/progressblocker/blocker","hbs!csui/dialogs/restructure/impl/restructure","css!csui/dialogs/restructure/impl/restructure.dialog"],function(e,t,i,n,o,s,l,r,a){var c=n.LayoutView.extend({"className":"csui-restructure-wrapper","template":a,"regions":{"formRegion":"#formviewwrapper"},"constructor":function(e){e||(e={}),this.context=e.context,this.selectedNodes=e.nodes,r.imbue(this),n.LayoutView.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions(),this.formModel=new l(void 0,{"connector":this.options.connector,"updateFormData":this.options.updateFormData,"models":this.options.nodes.models,"container":this.options.container}),this.listenTo(this.formModel,"sync",this.render)},"setFormView":function(){this.restructureFormView=new s({"context":this.options.context,"connector":this.options.connector,"model":this.formModel}),this.listenTo(this.restructureFormView,{"valid:form":function(){this.options.restructureCommand.restructureDialog.updateButton("restructure",{"disabled":!1});var e=this.options.restructureCommand.restructureDialog.footerView.$el.find("#restructure");e.length&&i(e[0]).prop("tabindex",0)},"invalid:form":function(){this.options.restructureCommand.restructureDialog.updateButton("restructure",{"disabled":!0})}})},"onRender":function(){this.formModel.attributes&&this.formModel.attributes.data&&(this.setFormView(),this.formRegion.show(this.restructureFormView))}});return t.extend(c.prototype,o),c}),csui.define("csui/controls/multilingual.text.picker/multilingual.text.picker",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/dialog/dialog.view","i18n!csui/controls/multilingual.text.picker/impl/nls/lang","csui/controls/multilingual.text.picker/impl/multilingual.form.view","csui/utils/contexts/factories/server.info","csui/utils/log","csui/lib/binf/js/binf","csui/lib/handlebars.helpers.xif"],function(e,t,i,n,o,s,l,r,a){function c(t){t||(t={}),this.options=e.defaults(t,u)}var u={"dialogTitle":s.dialogTitle};return e.extend(c.prototype,{"show":function(){return this._showDialog(),this._deferred=t.Deferred(),this._deferred.promise()},"_showDialog":function(){var e=this;this._createMultilingualForm().done(function(){e._dialog=e._createDialog(),e._dialog.show()})},"_createMultilingualForm":function(){var i=t.Deferred(),n=this,o=this.options.context.getObject(r,{"permanent":!0,"detached":!0});return o.ensureFetched().done(e.bind(function(){n.languages=o.get("server").languages,n.options.data=n.languages,n.options.isDialog=!0,n._view=new l(n.options),i.resolve(n.languages)})),i.promise()},"_createDialog":function(){var t=this.options,i=new o({"title":t.dialogTitle,"view":this._view,"midSize":!0,"className":"cs-multilingual-picker","attributes":{"aria-label":t.dialogTitle},"buttons":[{"id":"done","label":s.btnDone,"default":!0,"disabled":!1,"click":e.bind(this._onClickDoneButton,this,status)},{"id":"cancel","label":s.btnCancel,"close":!0,"click":e.bind(this.onClickCancelButton,this)}]});return i.listenTo(i,"hide",e.bind(this._onHideDialog,this)),i},"_onClickDoneButton":function(){this._result=this._view.getData(),this._dialog.destroy()},"onClickCancelButton":function(){},"_onHideDialog":function(){this._deferred&&(this._result?this._deferred.resolve(this._view.getData()):"pending"===this._deferred.state()&&this._deferred.reject({"cancelled":!0}))}}),c}),csui.define("csui/dialogs/node.picker/start.locations/location.base.factory",["csui/lib/underscore","csui/lib/backbone"],function(e,t){"use strict";function i(e){this.options=e||{}}return e.extend(i.prototype,{"updateLocationModel":function(e){},"getLocationParameters":function(){return{"container":null,"collection":null,"locationName":""}}}),i.extend=t.View.extend,i}),csui.define("csui/dialogs/node.picker/start.locations/node.base.factory",["csui/lib/jquery","csui/lib/underscore","csui/dialogs/node.picker/start.locations/location.base.factory","csui/models/node/node.model","csui/models/node.children2/node.children2","csui/utils/commands"],function(e,t,i,n,o,s){"use strict";return i.extend({"constructor":function(e){i.prototype.constructor.apply(this,arguments),this.container=new n(this.options.node,{"connector":this.options.connector})},"updateLocationModel":function(t){var i=this,n=e.Deferred();return this.container.fetch().then(function(){t.set({"name":i.container.get("name")||i.options.defaultName,"icon":i.options.icon,"invalid":!1,"selectable":i.options.selectable}),n.resolve()},function(){t.set({"invalid":!0}),t.collection.remove(t),n.reject()}),n.promise()},"getLocationParameters":function(){var e=new o(void 0,{"node":this.container,"autoreset":!0,"expand":{"properties":["original_id","parent_id"]},"fields":{"properties":[]},"commands":"default,open","orderBy":"name asc","includeResources":["show_hidden"]});return this.container.set("unselectable",this.options.unselectable),{"container":this.container,"collection":e}}})}),csui.define("csui/dialogs/node.picker/start.locations/current.location/current.location.factory",["csui/lib/underscore","csui/lib/jquery","csui/dialogs/node.picker/start.locations/location.base.factory","csui/models/node.children2/node.children2","csui/utils/commands","i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang"],function(e,t,i,n,o,s){"use strict";function l(e,i){var n=t.Deferred();return e&&e.isFetchable()&&!e.isFetchableDirectly()?e.fetch().then(function(){n.resolve()},function(){i.set({"invalid":!0}),i.collection.remove(i),n.reject()}):n.resolve(),n.promise()}return i.extend({"updateLocationModel":function(e){var t=this.options.container;return e.set({"name":s.labelCurrentLocation,"icon":"location","invalid":!(t&&t.isFetchable())}),l(t,e)},"getLocationParameters":function(){var e=this.options.container,t=new n(void 0,{"node":this.options.container,"autoreset":!0,"expand":{"properties":["original_id","parent_id"]},"fields":{"properties":[]},"commands":"default,open"});return e.set("unselectable",!1),{"container":e,"collection":t,"locationName":s.labelCurrentLocation}}})}),csui.define("csui/dialogs/node.picker/start.locations/enterprise.volume/enterprise.volume.factory",["csui/lib/underscore","csui/dialogs/node.picker/start.locations/node.base.factory","i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang"],function(e,t,i){"use strict";return t.extend({"constructor":function(n){n=e.defaults({"node":{"id":"volume","type":141},"icon":"enterprise","unselectable":!1,"defaultName":i.labelEnterpriseVolume},n),t.prototype.constructor.call(this,n)}})}),csui.define("csui/dialogs/node.picker/start.locations/favorites/impl/favorite.collection",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/node/node.model","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin"],function(e,t,i,n,o,s,l,r){"use strict";var a=t.Collection.extend({"model":n,"constructor":function(e,i){t.Collection.prototype.constructor.apply(this,arguments),this.makeConnectable(i).makeFetchable(i).makeClientSideBrowsable(i).makeBrowsableV2Response(i)},"url":function(){var e="";if(this.orderBy){var t=this.orderBy.split(",")[0].split(" ");e=(t[1]||"asc")+"_"+t[0]}var n=this.connector.getConnectionUrl().getApiBase("v2"),o=i.combineQueryString({"fields":["properties","versions.element(0)"],"expand":"properties{original_id}","orderBy":e,"actions":""});return i.appendQuery(i.combine(n,"members/favorites"),o)},"parse":function(e,t){return this.parseBrowsedState(e,t),this.parseBrowsedItems(e,t)}});return l.mixin(a.prototype),r.mixin(a.prototype),o.mixin(a.prototype),s.mixin(a.prototype),a}),csui.define("csui/dialogs/node.picker/start.locations/favorites/favorites.factory",["csui/lib/underscore","csui/lib/jquery","csui/dialogs/node.picker/start.locations/location.base.factory","i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang","csui/dialogs/node.picker/start.locations/favorites/impl/favorite.collection"],function(e,t,i,n,o){"use strict";return i.extend({"updateLocationModel":function(e){return e.set({"name":n.labelFavorites,"icon":"favorites"}),t.Deferred().resolve().promise()},"getLocationParameters":function(){return{"container":null,"collection":new o(void 0,{"connector":this.options.connector,"autoreset":!0,"expand":["node"]}),"locationName":n.labelFavorites}}})}),csui.define("csui/dialogs/node.picker/start.locations/personal.volume/personal.volume.factory",["csui/lib/underscore","csui/dialogs/node.picker/start.locations/node.base.factory","i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang"],function(e,t,i){"use strict";return t.extend({"constructor":function(n){n=e.defaults({"node":{"id":"volume","type":142},"icon":"csui-icon-personal-volume","unselectable":!1,"defaultName":i.labelPersonalVolume},n),t.prototype.constructor.call(this,n)}})}),csui.define("csui/dialogs/node.picker/start.locations/category.volume/category.volume.factory",["csui/lib/underscore","csui/dialogs/node.picker/start.locations/node.base.factory","i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang"],function(e,t,i){"use strict";return t.extend({"constructor":function(n){n=e.defaults({"node":{"id":"volume","type":133},"unselectable":!0,"icon":"csui-icon-category-volume","defaultName":i.labelCategoryVolume},n),t.prototype.constructor.call(this,n)}})}),csui.define("csui/dialogs/node.picker/start.locations/perspective.assets.volume/perspective.assets.volume.factory",["csui/lib/underscore","csui/dialogs/node.picker/start.locations/node.base.factory","i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang"],function(e,t,i){"use strict";return t.extend({"constructor":function(n){n=e.defaults({"node":{"id":"volume","type":954},"unselectable":!0,"icon":"csui-icon-perspective-assets-volume","defaultName":i.labelPerspectiveAssetsVolume},n),t.prototype.constructor.call(this,n)}})}),csui.define("csui/dialogs/node.picker/start.locations/recent.containers/impl/recent.containers.collection",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/node/node.model","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin"],function(e,t,i,n,o,s,l,r,a,c){"use strict";var u=n.Collection.extend({"model":s,"constructor":function(e,i){t.defaults(i,{"orderBy":""}),n.Collection.prototype.constructor.call(this,e,i),this.makeConnectable(i).makeFetchable(i).makeClientSideBrowsable(i).makeBrowsableV2Response(i)},"url":function(){var e="";if(this.orderBy){var t=this.orderBy.split(",")[0].split(" ");e=(t[1]||"asc")+"_"+t[0]}var i=this.connector.getConnectionUrl().getApiBase("v2"),n=o.combineQueryString({"fields":["properties","versions.element(0)"],"expand":"properties{original_id}","orderBy":e,"actions":""});return o.appendQuery(o.combine(i,"members/targets"),n)},"parse":function(e,t){return this.parseBrowsedState(e,t),this.parseBrowsedItems(e,t),e.results.reverse(),e.results}});return a.mixin(u.prototype),c.mixin(u.prototype),l.mixin(u.prototype),r.mixin(u.prototype),u}),csui.define("csui/dialogs/node.picker/start.locations/recent.containers/recent.containers.factory",["csui/lib/underscore","csui/lib/jquery","csui/dialogs/node.picker/start.locations/location.base.factory","i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang","csui/dialogs/node.picker/start.locations/recent.containers/impl/recent.containers.collection"],function(e,t,i,n,o){"use strict";return i.extend({"updateLocationModel":function(e){return e.set({"name":n.labelRecentContainers,"icon":"recent"}),t.Deferred().resolve().promise()},"getLocationParameters":function(){return{"container":null,"collection":new o(void 0,{"connector":this.options.connector,"autoreset":!0,"expand":["node"]}),"locationName":n.labelRecentContainers}}})}),csui.define("csui/dialogs/node.picker/start.locations/search.location/impl/search.collection",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/node/node.model","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/browsable/browsable.mixin","csui/models/browsable/v1.request.mixin","csui/models/browsable/v2.response.mixin","csui/utils/deepClone/deepClone"],function(e,t,i,n,o,s,l,r,a,c){"use strict";var u=i.Collection.extend({"model":o,"constructor":function(e,t){this.options=t||(t={}),i.Collection.prototype.constructor.call(this,e,t),this.makeConnectable(t).makeFetchable(t).makeBrowsable(t).makeBrowsableV1Request(t).makeBrowsableV2Response(t)},"clone":function(){return new this.constructor(this.models,{"connector":this.connector,"skip":this.skipCount,"top":this.topCount,"filter":e.deepClone(this.filters),"orderBy":e.clone(this.orderBy)})}});return r.mixin(u.prototype),a.mixin(u.prototype),c.mixin(u.prototype),s.mixin(u.prototype),l.mixin(u.prototype),e.extend(u.prototype,{"isFetchable":function(){return!0},"cacheId":"","url":function(){var e=this.connector.getConnectionUrl().getApiBase("v2"),t=this.options.query.toJSON();return t.where="OTName:"+t.where,this.orderBy="OTName",this.filters&&this.filters.type&&(t.where+=' AND "OTSubType": in ( '+this.filters.type.join(",")+" )"),t=n.combineQueryString(this.getBrowsableUrlQuery(),{"actions":"open","expand":"properties{parent_id}"},t),n.combine(e,"search?"+t)},"parse":function(e,t){return this.parseBrowsedState(e.collection,t),e.results.sorting=e.collection.sorting,this.cacheId=e.collection&&e.collection.searching&&e.collection.searching.cache_id?e.collection.searching.cache_id:"",this.parseBrowsedItems(e,t)}}),u}),csui.define("csui/dialogs/node.picker/start.locations/search.location/search.location.factory",["csui/lib/underscore","csui/lib/jquery","csui/dialogs/node.picker/start.locations/location.base.factory","csui/dialogs/node.picker/start.locations/search.location/impl/search.collection","csui/utils/commands","i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang"],function(e,t,i,n,o,s){"use strict";return i.extend({"updateLocationModel":function(e){this.options.container;return e.set({"hide":!0,"invalid":!1}),t.Deferred().resolve().promise()},"getLocationParameters":function(e){var t=this.options.container,i=new n(void 0,e);return t&&t.set("unselectable",!1),{"container":t,"collection":i}}})}),csui.define("csui/dialogs/node.picker/start.locations/default.location/default.location.factory",["csui/lib/underscore","csui/lib/jquery","csui/dialogs/node.picker/start.locations/location.base.factory","csui/models/node.children2/node.children2","csui/utils/commands","i18n!csui/dialogs/node.picker/start.locations/impl/nls/lang"],function(e,t,i,n,o,s){"use strict";return i.extend({"updateLocationModel":function(e){this.options.container;return e.set({"hide":!0,"invalid":!1}),t.Deferred().resolve().promise()},"getLocationParameters":function(){var e=this.options.container,t=new n(void 0,{"node":this.options.container,"autoreset":!0,"expand":{"properties":["original_id","parent_id"]},"fields":{"properties":[]},"commands":"default,open"});return e.set("unselectable",!1),{"container":e,"collection":t,"locationName":s.labelCurrentLocation}}})}),csui.define("csui/dialogs/members.picker/start.locations/location.base.factory",["csui/lib/underscore","csui/lib/backbone"],function(e,t){"use strict";function i(e){this.options=e||{}}return e.extend(i.prototype,{"updateLocationModel":function(e){},"getLocationParameters":function(){return{"container":null,"collection":null,"locationName":""}}}),i.extend=t.View.extend,i}),csui.define("csui/dialogs/members.picker/start.locations/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/dialogs/members.picker/start.locations/impl/nls/root/lang",{"labelNoSelection":"Go to...","labelAllMembersAndGroups":"All members and groups","labelRecentGroups":"Recent groups","labelGroupWhereIamMember":"Groups where I am member","labelAllGroups":"All Groups"}),csui.define("csui/dialogs/members.picker/start.locations/current.group/current.group.factory",["csui/lib/underscore","csui/lib/jquery","csui/dialogs/node.picker/start.locations/location.base.factory","csui/models/member/membercollection","i18n!csui/dialogs/members.picker/start.locations/impl/nls/lang"],function(e,t,i,n,o){"use strict";return i.extend({"updateLocationModel":function(e){this.options.container;return e.set({"hide":!0,"invalid":!1,"location":"current.group"}),t.Deferred().resolve().promise()},"getLocationParameters":function(){var e=this.options.container,t=new n(void 0,{"connector":this.options.connector,"groupId":e.groupId,"member":e});return e.set("unselectable",!1),{"container":this.options.container,"collection":t,"locationName":o.labelCurrentLocation}}})}),csui.define("csui/dialogs/members.picker/start.locations/all.members/all.members.factory",["csui/lib/underscore","csui/lib/jquery","csui/dialogs/node.picker/start.locations/location.base.factory","csui/models/member/membercollection","i18n!csui/dialogs/members.picker/start.locations/impl/nls/lang"],function(e,t,i,n,o){"use strict";return i.extend({"updateLocationModel":function(e){var i=this.options.container;return e.set({"name":o.labelAllMembersAndGroups,"icon":"member","invalid":!(i&&i.isFetchable()),"location":"all.members"}),t.Deferred().resolve().promise()},"getLocationParameters":function(){var e=(this.options.container,new n(void 0,{"connector":this.options.connector}));return{"container":this.options.container,"collection":e,"locationName":o.labelCurrentLocation}}})}),csui.define("csui/dialogs/members.picker/start.locations/member.groups/member.groups.factory",["csui/lib/underscore","csui/lib/jquery","csui/dialogs/node.picker/start.locations/location.base.factory","csui/models/member/membercollection","i18n!csui/dialogs/members.picker/start.locations/impl/nls/lang"],function(e,t,i,n,o){"use strict";return i.extend({"updateLocationModel":function(e){var i=this.options.container;return e.set({"name":o.labelGroupWhereIamMember,"icon":"location","invalid":!(i&&i.isFetchable()),"location":"member.groups"}),t.Deferred().resolve().promise()},"getLocationParameters":function(e){var t=this.options.container,i=new n(void 0,{"connector":this.options.connector,"type":"GroupsOfCurrentUser"});return t.set("unselectable",!1),{"container":this.options.container,"collection":i,"locationName":o.labelCurrentLocation}}})}),csui.define("csui/dialogs/members.picker/start.locations/recent.groups/impl/recent.groups.collection",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/member/member.model","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin"],function(e,t,i,n,o,s,l,r,a,c){"use strict";var u=n.Collection.extend({"model":s,"constructor":function(e,t){n.Collection.prototype.constructor.call(this,e,t),this.makeConnectable(t).makeFetchable(t).makeClientSideBrowsable(t).makeBrowsableV2Response(t)},"url":function(){var e=this.connector.getConnectionUrl().getApiBase("v2");return o.appendQuery(o.combine(e,"members/targets"))},"parse":function(e,t){return this.parseBrowsedState(e,t),this.parseBrowsedItems(e,t),e.results.reverse(),e.results}});return a.mixin(u.prototype),c.mixin(u.prototype),l.mixin(u.prototype),r.mixin(u.prototype),u}),csui.define("csui/dialogs/members.picker/start.locations/recent.groups/recent.groups.factory",["csui/lib/underscore","csui/lib/jquery","csui/dialogs/node.picker/start.locations/location.base.factory","csui/dialogs/members.picker/start.locations/recent.groups/impl/recent.groups.collection","csui/utils/commands","i18n!csui/dialogs/members.picker/start.locations/impl/nls/lang"],function(e,t,i,n,o,s){"use strict";return i.extend({"updateLocationModel":function(e){var i=this.options.container;return e.set({"name":s.labelRecentGroups,"icon":"recent","invalid":!(i&&i.isFetchable()),"location":"recent.groups"}),t.Deferred().resolve().promise()},"getLocationParameters":function(){var e=this.options.container,t=new n(void 0,{"connector":this.options.connector});return e.set("unselectable",!1),{"container":this.options.container,"collection":t,"locationName":s.labelCurrentLocation}}})}),csui.define("csui/dialogs/members.picker/start.locations/all.groups/all.groups.factory",["csui/lib/underscore","csui/lib/jquery","csui/dialogs/node.picker/start.locations/location.base.factory","csui/models/member/membercollection","i18n!csui/dialogs/members.picker/start.locations/impl/nls/lang"],function(e,t,i,n,o){"use strict";return i.extend({"updateLocationModel":function(e){var i=this.options.container;return e.set({"name":o.labelAllGroups,"icon":"group","invalid":!(i&&i.isFetchable()),"location":"all.groups"}),t.Deferred().resolve().promise()},"getLocationParameters":function(){var e=(this.options.container,new n(void 0,{"connector":this.options.connector,"type":1}));return{"container":this.options.container,"collection":e,"locationName":o.labelCurrentLocation}}})}),csui.define("csui/models/permission/acl.group.server.adaptor.mixin",["csui/lib/underscore","csui/utils/url"],function(e,t){"use strict";return{"mixin":function(i){return e.extend(i,{"makeServerAdaptor":function(e){return this},"url":function(){var e,i=t.combine(this.connector.getConnectionUrl().getApiBase("v2"),"nodes",this.options.nodeId);return e=t.combineQueryString({"fields":["permissions{right_id, permissions, type}"],"expand":"permissions{right_id}"},e),e&&(i+="?"+e),i},"parse":function(e,t){return this.filterGroups(e),e.aclGroups},"filterGroups":function(t){var i=t.results.data&&t.results.data.permissions,n=[];return e.each(i,function(e){if(e.right_id_expand&&1===e.right_id_expand.type){var t={};t=e.right_id_expand,t.data={},t.data.properties=e.right_id_expand,n.push(t)}}),t.aclGroups=n,t}})}}}),csui.define("csui/dialogs/members.picker/start.locations/acl.groups/impl/acl.groups.collection",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/member/member.model","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin","csui/models/permission/acl.group.server.adaptor.mixin"],function(e,t,i,n,o,s,l,r,a,c,u){"use strict";var d=n.Collection.extend({"model":s,"constructor":function(e,t){this.options=t||{},n.Collection.prototype.constructor.call(this,e,t),this.makeConnectable(t).makeFetchable(t).makeClientSideBrowsable(t).makeBrowsableV2Response(t)}});return a.mixin(d.prototype),c.mixin(d.prototype),l.mixin(d.prototype),r.mixin(d.prototype),u.mixin(d.prototype),d}),csui.define("csui/dialogs/members.picker/start.locations/acl.groups/acl.groups.factory",["csui/lib/underscore","csui/lib/jquery","csui/dialogs/node.picker/start.locations/location.base.factory","csui/dialogs/members.picker/start.locations/acl.groups/impl/acl.groups.collection","csui/utils/commands","i18n!csui/dialogs/members.picker/start.locations/impl/nls/lang"],function(e,t,i,n,o,s){"use strict";return i.extend({"updateLocationModel":function(e){this.options.container;return e.set({"hide":!0,"invalid":!1,"location":"acl.groups"}),t.Deferred().resolve().promise()},"getLocationParameters":function(){var e=this.options.container,t=new n(void 0,{"connector":this.options.connector,"nodeId":this.options.nodeId});return e.set("unselectable",!1),{"container":this.options.container,"collection":t,"locationName":s.labelCurrentLocation}}})}),csui.define("csui/widgets/nodestable/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/nodestable/impl/nls/root/lang",{"columnTitleLocation":"Location","dragAndDropMessage":"Drag and drop files here to add new content.","filterExpandTooltip":"Show filters","filterCollapseTooltip":"Hide filters","treeBrowseExpandTooltip":"Show navigation tree","treeBrowseCollapseTooltip":"Hide navigation tree","dialogTitle":"Filters","dialogTemplate":"Applying filters would clear your current selection.\nDo you want to proceed?","loadingText":"Loading {0}","containerContentTableAria":"Content of {0}","genericContentTableAria":"Content"}),csui.define("csui/utils/toolitem.masks/children.toolitems.mask",["csui/controls/toolbar/toolitems.mask","csui-ext!csui/utils/toolitem.masks/children.toolitems.mask"],function(e,t){"use strict";return t||(t=[]),e.extend({"constructor":function(t){e.prototype.constructor.apply(this),this.context=t.context,this.node=t.node,this._updateMask(),this.listenTo(this.node,"change:id",this._updateMask)},"_updateMask":function(){var e=this.restoreMask({"silent":!0});t.forEach(function(t){(t=t({"context":this.context,"node":this.node}))&&(e=this.extendMask(t,{"silent":!0})||e)},this),e&&this.trigger("update",this)}})}),csui.define("csui/utils/toolitem.masks/creation.toolitems.mask",["module","csui/controls/toolbar/toolitems.mask","csui/utils/toolitem.masks/global.toolitems.mask","csui-ext!csui/utils/toolitem.masks/creation.toolitems.mask"],function(e,t,i,n){"use strict";return n||(n=[]),t.extend({"constructor":function(n){var o=e.config(),s=new i;t.prototype.constructor.call(this,s,{"normalize":!1}),Object.keys(o).forEach(function(e){"extensions"!=e&&this.extendMask(o[e])},this),this.storeMask(),this.context=n.context,this.node=n.node,this._updateMask(),this.listenTo(this.node,"change:id",this._updateMask)},"_updateMask":function(){var e=this.restoreMask({"silent":!0});n.forEach(function(t){(t=t({"context":this.context,"node":this.node}))&&(e=this.extendMask(t,{"silent":!0})||e)},this),e&&this.trigger("update",this)},"_normalizeRule":function(e){return"object"!=typeof e&&(e="string"==typeof e?{"signature":e}:{"type":e}),e.commandData||(e={"commandData":e}),null!=e.type&&(e.commandData.type=e.type,delete e.type),e.signature||(e.signature="Add"),e}})}),csui.define("csui/controls/tabletoolbar/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/tabletoolbar/nls/root/localized.strings",{"ToolbarItemReserve":"Reserve","ToolbarItemUnreserve":"Unreserve","ToolbarItemOriginalReserve":"Reserve original","ToolbarItemOriginalUnreserve":"Unreserve original","ToolbarItemAdvancedPermission":"Advanced permissions","MenuItemReserve":"Reserve","MenuItemUnreserve":"Unreserve","ToolbarItemThumbnail":"Grid view","ToolbarItemListView":"List view","ThumbnailTitle":"Grid view","ListViewTitle":"List view"}),csui.define("csui/controls/versionsettings/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/versionsettings/impl/nls/root/lang",{"versionSettings":"Version settings","majorMinorVersion":"Major / minor versioning","currentFolder":"Current folder","currentAndSubfolder":"Current folder and sub-folders","exampleVersions":"Example: 0.1, 0.2, 1.0, 1.1","versionControlTitle":"Version control","actionBtnLabel":"Apply","cancelBtnLabel":"Cancel"}),csui.define("hbs!csui/controls/versionsettings/impl/version.control",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div role="dialog" title="'+e.escapeExpression((s=null!=(s=l(i,"versionControlTitle")||(null!=t?l(t,"versionControlTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"versionControlTitle","hash":{},"loc":{"start":{"line":1,"column":26},"end":{"line":1,"column":49}}}):s))+'" aria-labelledby="'+e.escapeExpression((s=null!=(s=l(i,"versionControlTitle")||(null!=t?l(t,"versionControlTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"versionControlTitle","hash":{},"loc":{"start":{"line":1,"column":68},"end":{"line":1,"column":91}}}):s))+'" class="settings-dropdown-container csui-settings-show">\r\n    <h1 class="version-control-title">'+e.escapeExpression((s=null!=(s=l(i,"versionControlTitle")||(null!=t?l(t,"versionControlTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"versionControlTitle","hash":{},"loc":{"start":{"line":2,"column":38},"end":{"line":2,"column":61}}}):s))+'</h1>\r\n    <div class="required-field-switch">\r\n        <span id="'+e.escapeExpression((s=null!=(s=l(i,"requiredFieldsLabelId")||(null!=t?l(t,"requiredFieldsLabelId"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"requiredFieldsLabelId","hash":{},"loc":{"start":{"line":4,"column":18},"end":{"line":4,"column":43}}}):s))+'" class="only-required-fields-label"\r\n              title="'+e.escapeExpression((s=null!=(s=l(i,"onlyRequiredFieldsLabel")||(null!=t?l(t,"onlyRequiredFieldsLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"onlyRequiredFieldsLabel","hash":{},"loc":{"start":{"line":5,"column":21},"end":{"line":5,"column":48}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"onlyRequiredFieldsLabel")||(null!=t?l(t,"onlyRequiredFieldsLabel"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"onlyRequiredFieldsLabel","hash":{},"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":77}}}):s))+'</span>\r\n        <div class="required-fields-switch"></div>\r\n    </div>\r\n    <span class="versioning-example"> '+e.escapeExpression((s=null!=(s=l(i,"exampleVersions")||(null!=t?l(t,"exampleVersions"):t))?s:e.hooks.helperMissing,
"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"exampleVersions","hash":{},"loc":{"start":{"line":8,"column":38},"end":{"line":8,"column":57}}}):s))+' </span>\r\n    <div class="csui-version-folder-permissions binf-hidden">\r\n        <ul class="csui-folder-permissions" role="listbox">\r\n            <li class="csui-folder-permissions-item" role="option" title="'+e.escapeExpression((s=null!=(s=l(i,"currentFolder")||(null!=t?l(t,"currentFolder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"currentFolder","hash":{},"loc":{"start":{"line":11,"column":74},"end":{"line":11,"column":91}}}):s))+'"\r\n                aria-label="'+e.escapeExpression((s=null!=(s=l(i,"currentFolder")||(null!=t?l(t,"currentFolder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"currentFolder","hash":{},"loc":{"start":{"line":12,"column":28},"end":{"line":12,"column":45}}}):s))+'" tabindex="0">\r\n                <div>\r\n                    <span class="cs-icon"></span>\r\n                    <span class="cs-label">'+e.escapeExpression((s=null!=(s=l(i,"currentFolder")||(null!=t?l(t,"currentFolder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"currentFolder","hash":{},"loc":{"start":{"line":15,"column":43},"end":{"line":15,"column":60}}}):s))+'</span>\r\n                </div>\r\n            </li>\r\n            <li class="csui-folder-permissions-item" role="option" title="'+e.escapeExpression((s=null!=(s=l(i,"currentAndSubfolder")||(null!=t?l(t,"currentAndSubfolder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"currentAndSubfolder","hash":{},"loc":{"start":{"line":18,"column":74},"end":{"line":18,"column":97}}}):s))+'"\r\n                aria-label="'+e.escapeExpression((s=null!=(s=l(i,"currentAndSubfolder")||(null!=t?l(t,"currentAndSubfolder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"currentAndSubfolder","hash":{},"loc":{"start":{"line":19,"column":28},"end":{"line":19,"column":51}}}):s))+'" tabindex="0">\r\n                <div>\r\n                    <span class="cs-icon"></span>\r\n                    <span class="cs-label">'+e.escapeExpression((s=null!=(s=l(i,"currentAndSubfolder")||(null!=t?l(t,"currentAndSubfolder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"currentAndSubfolder","hash":{},"loc":{"start":{"line":22,"column":43},"end":{"line":22,"column":66}}}):s))+"</span>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n"}});return i.registerPartial("csui_controls_versionsettings_impl_version.control",n),n}),csui.define("hbs!csui/controls/version.control.dialog/impl/version.control.dialog.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<h4 class="binf-modal-title">\r\n  <span class="icon icon-notification-information"></span>\r\n  <span class="title-text csui-version-control-dialog-title" title="'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":3,"column":68},"end":{"line":3,"column":77}}}):s))+'">'+e.escapeExpression((s=null!=(s=l(i,"title")||(null!=t?l(t,"title"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":3,"column":79},"end":{"line":3,"column":88}}}):s))+"</span>\r\n</h4>"}});return i.registerPartial("csui_controls_version.control.dialog_impl_version.control.dialog.header",n),n}),csui.define("csui/controls/version.control.dialog/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/version.control.dialog/nls/root/lang",{"disableVersioningTitle":"Disable major / minor versioning","majorMinorVersion":"Major / minor versions","currentFolder":"In current folder","currentAndSubfolder":"In current folder and subfolders","unreserveDocument":"Unreserve document","majorAndMinorVersion":"Major and minor versions","majorVersion":"Major version only","majorMinorExample":"(Example: 0.1, 0.2, 1.0)","majorVersionExample":"(Example: 1, 2, 3)","uploadDocument":"Upload document and its future versions as","selectVersionlabel":'Upload "{0}" as',"majorVersionAria":"major version {0}","minorVersionAria":"minor version {0}"}),csui.define("css!csui/controls/version.control.dialog/impl/version.control.dialog",[],function(){}),csui.define("csui/controls/version.control.dialog/impl/version.control.dialog.header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","hbs!csui/controls/version.control.dialog/impl/version.control.dialog.header","i18n!csui/controls/version.control.dialog/nls/lang","css!csui/controls/version.control.dialog/impl/version.control.dialog"],function(e,t,i,n){"use strict";return i.ItemView.extend({"template":n,"templateHelpers":function(){return{"title":this.options.title}},"constructor":function(e){e||(e={}),i.ItemView.prototype.constructor.apply(this,arguments)}})}),csui.define("csui/controls/version.control.dialog/version.control.dialog.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/controls/dialog/dialog.view","csui/controls/version.control.dialog/impl/version.control.dialog.header.view","css!csui/controls/version.control.dialog/impl/version.control.dialog"],function(e,t,i,n,o){"use strict";function s(i){this.options=i||{},this.deferred=t.Deferred(),this.deferred.then(e.bind(this.destroy,this),e.bind(this.destroy,this))}return e.extend(s.prototype,i.Events,{"destroy":function(){this.options._view&&this.options._view.destroy(),this.options._view&&this.options._view.off(),this._dialog.destroy()},"show":function(){return this._dialog=this._createDialog(),this.deferred},"_createDialog":function(){var e=this.options,t=this,i=new o(e),s=new n({"headerView":i,"midSize":!0,"bodyMessage":e.bodyMessage,"view":e._view,"className":"csui-version-control-dialog "+e.dialogClassName,"attributes":{"data-backdrop":"static"},"buttons":[{"id":"add","label":e.actionBtnLabel,"default":!0,"click":function(){s.destroy(),t._resolutionComplete(e._view&&e._view.getValue())}},{"id":"cancel","close":!0,"label":e.cancelBtnLabel,"click":function(){s.destroy(),t.cancel()}}],"dialogTxtAria":e.title});return s.on("hide",function(){s.off(),this.cancel()},this),s.show(),s},"cancel":function(){return this.deferred.reject(),!0},"_resolutionComplete":function(e){return this.deferred.resolve(e),!0}}),s}),csui.define("hbs!csui/controls/version.control.dialog/impl/disable.version.settings",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-row">\r\n  <div class="binf-col-sm-12 binf-control-label">\r\n    '+e.escapeExpression((s=null!=(s=l(i,"disableVersioningTitle")||(null!=t?l(t,"disableVersioningTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"disableVersioningTitle","hash":{},"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":30}}}):s))+'\r\n  </div>\r\n  <div class="binf-col-sm-12">\r\n    <label class="binf-radio-inline">\r\n      <input type="radio" name="versioncontrol" value=\''+e.escapeExpression((s=null!=(s=l(i,"currentFolder")||(null!=t?l(t,"currentFolder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"currentFolder","hash":{},"loc":{"start":{"line":7,"column":55},"end":{"line":7,"column":72}}}):s))+"' tabindex='0'\r\n             checked> "+e.escapeExpression((s=null!=(s=l(i,"currentFolder")||(null!=t?l(t,"currentFolder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"currentFolder","hash":{},"loc":{"start":{"line":8,"column":22},"end":{"line":8,"column":39}}}):s))+'</input>\r\n    </label>\r\n  </div>\r\n  <div class="binf-col-sm-12">\r\n    <label class="binf-radio-inline">\r\n      <input type="radio" name="versioncontrol" value=\''+e.escapeExpression((s=null!=(s=l(i,"currentAndSubfolder")||(null!=t?l(t,"currentAndSubfolder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"currentAndSubfolder","hash":{},"loc":{"start":{"line":13,"column":55},"end":{"line":13,"column":78}}}):s))+"'\r\n             tabindex='0'>"+e.escapeExpression((s=null!=(s=l(i,"currentAndSubfolder")||(null!=t?l(t,"currentAndSubfolder"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"currentAndSubfolder","hash":{},"loc":{"start":{"line":14,"column":26},"end":{"line":14,"column":49}}}):s))+"</input>\r\n    </label>\r\n  </div>\r\n</div>\r\n"}});return i.registerPartial("csui_controls_version.control.dialog_impl_disable.version.settings",n),n}),csui.define("csui/controls/version.control.dialog/behaviors/version.control.dialog.keyboard.navigation.behavior",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette"],function(e,t,i){"use strict";return i.Behavior.extend({"events":{"keydown":"onKeyInView"},"initialize":function(){this.view.keyboardBehavior=this},"_rebuildFocusableElements":function(){this.focusables=this.view.$el.find('input[type="radio"]:checked, input[type="checkbox"]').filter(function(e,i){return t(i).is(":visible")})},"refreshFocusEngage":function(){this._rebuildFocusableElements()},"getCurrentlyFocusedElement":function(e){return t(e.shiftKey?this.focusables[this.focusables.length-1]:this.focusables[0])},"setFocusInView":function(){t(this.focusables[0]).trigger("focus")},"_makeRadiosChecked":function(){this.radioChanged&&(this.radioChanged=!1,this.view.$el.find('*[type="radio"]').filter(function(e,t){return!0===t.checked}).attr("checked",!0))},"isOnLastTabElement":function(e,t){return this._makeRadiosChecked(),this._rebuildFocusableElements(),e?t.target===this.focusables[0]:t.target===this.focusables[this.focusables.length-1]},"onKeyInView":function(e){switch(e.keyCode){case 37:case 38:case 39:case 40:t(e.target).is(":radio")&&(t(e.target).attr("checked",!1),this.radioChanged=!0)}}})}),csui.define("csui/controls/version.control.dialog/disable.version.settings.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","i18n!csui/controls/version.control.dialog/nls/lang","hbs!csui/controls/version.control.dialog/impl/disable.version.settings","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/version.control.dialog/behaviors/version.control.dialog.keyboard.navigation.behavior"],function(e,t,i,n,o,s,l){"use strict";return i.ItemView.extend({"constructor":function(e){i.ItemView.prototype.constructor.apply(this,arguments)},"className":"csui-version-control-dialog-view","template":o,"behaviors":{"TabableRegion":{"behaviorClass":s},"VersionControlDialogKeyboardNavigationBehavior":{"behaviorClass":l}},"templateHelpers":function(){return{"disableVersioningTitle":n.disableVersioningTitle,"currentFolder":n.currentFolder,"currentAndSubfolder":n.currentAndSubfolder}},"onAfterShow":function(){this.$el.find("*[tabindex]").prop("tabindex",0),this.keyboardBehavior.setFocusInView()},"onDomRefresh":function(){this.keyboardBehavior.refreshFocusEngage()},"currentlyFocusedElement":function(e){return this.keyboardBehavior.getCurrentlyFocusedElement(e)},"onLastTabElement":function(e,t){return this.keyboardBehavior.isOnLastTabElement(e,t)},"getValue":function(){return e.filter(document.querySelectorAll('input[name="versioncontrol"]'),function(e){return e.checked})[0].value===n.currentFolder?0:2}})}),csui.define("css!csui/controls/versionsettings/impl/settings",[],function(){}),csui.define("csui/controls/versionsettings/impl/version.control.view",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","i18n","i18n!csui/controls/versionsettings/impl/nls/lang","hbs!csui/controls/versionsettings/impl/version.control","csui/controls/version.control.dialog/version.control.dialog.view","csui/controls/version.control.dialog/disable.version.settings.view","css!csui/controls/versionsettings/impl/settings"],function(e,t,i,n,o,s,l,r,a,c){"use strict";return o.ItemView.extend({"constructor":function(e){this.options=e||(e={}),this.requiredFieldsLabelId=i.uniqueId("requiredFields"),o.ItemView.call(this,e),this.model=e.model,this.settingsView=e.settingsView},"template":r,"templateHelpers":function(){return{"onlyRequiredFieldsLabel":l.majorMinorVersion,"requiredFieldsLabelId":this.requiredFieldsLabelId,"currentFolder":l.currentFolder,"currentAndSubfolder":l.currentAndSubfolder,"versionControlTitle":l.versionControlTitle,"exampleVersions":l.exampleVersions}},"ui":{"applyToFolderAndSubFoldersParentEle":".csui-version-folder-permissions","folderPermissionSelector":".csui-folder-permissions-item"},"events":{"click @ui.folderPermissionSelector":"onClickToChangeFolderPermissionLevel","keydown":"onKeyDown","keyup":"onKeyUp"},"className":"csui-toolbar-settings-container","onRender":function(){var e=this,t=this.model.get("versions_control_advanced");this.settings={"majorMinorVersion":t||!1,"permissionLevel":this.options.permissionLevel||0},this._folderPermissionEnabled=t||!1,this.requiredFieldSwitchModel=new n.Model({"data":this._folderPermissionEnabled}),csui.require(["csui/controls/form/fields/booleanfield.view"],function(t){e.requiredFieldSwitchView=new t({"mode":"writeonly","model":e.requiredFieldSwitchModel,"labelId":e.requiredFieldsLabelId,"onBeforeChange":i.bind(function(){if(!e._folderPermissionEnabled)return!0;e._disableVersionSettings().done(function(t){return e._folderPermissionEnabled=!1,e.controlViewIsInFocus=!1,e.settings.majorMinorVersion=!1,e.settings.permissionLevel=t,e.settingsView.saveAndDestroySettingsDropdown(),e.settingsView.restoreFocusToView(),!0}).fail(function(){return e.controlViewIsInFocus=!1,e.settingsView.destroyVersionControlView(),e.settingsView.restoreFocusToView(),!1})},e)}),e.$(".required-fields-switch").append(e.requiredFieldSwitchView.$el),e.requiredFieldSwitchView.render(),e.requiredFieldSwitchView.on("field:changed",function(t){e._folderPermissionEnabled=void 0,t.fieldvalue||t.fieldView.fieldvalue?(e._applyFolderPermissionLevel(e.$el.find("ul li:nth-child(1)")),e.ui.applyToFolderAndSubFoldersParentEle.removeClass("binf-hidden"),e.settings.majorMinorVersion=!0,e.settings.permissionLevel=0):(e.ui.applyToFolderAndSubFoldersParentEle.addClass("binf-hidden"),e.settings.majorMinorVersion=!1),e.refreshTabableElements()}),e.triggerMethod("dom:refresh")})},"onDomRefresh":function(){this.requiredFieldSwitchView&&t(this.requiredFieldSwitchView.ui.flagWriteField).length&&(this.refreshTabableElements(),this.tabableElements.length&&this.tabableElements[0].focus())},"onClickToChangeFolderPermissionLevel":function(e){e.preventDefault(),e.stopPropagation();var i,n=t(e.target).attr("aria-label");l.currentFolder===n?(i=this.$el.find("ul li:nth-child(1)"),this.settings.permissionLevel=0):l.currentAndSubfolder===n&&(i=this.$el.find("ul li:nth-child(2)"),this.settings.permissionLevel=2),this._applyFolderPermissionLevel(i)},"refreshTabableElements":function(){this.tabableElements=this.$el.find("input, ul li").filter(":visible").toArray()},"_applyFolderPermissionLevel":function(e){var t=this.$el.find(".csui-folder-permissions-item.selected");e.find(".selected").length||(t.length&&(t.find(".cs-icon").removeClass("icon-listview-checkmark"),t.removeClass("selected").attr("aria-selected","false")),e.find(".cs-icon").addClass("icon-listview-checkmark"),e.attr("aria-selected","true"),e.addClass("selected"))},"onBeforeDestroy":function(){this.tabableElements=void 0,this._folderPermissionEnabled=void 0,this.controlViewIsInFocus=void 0,this.requiredFieldSwitchView&&this.requiredFieldSwitchView.off("field:changed")},"onKeyDown":function(e){switch(e.keyCode){case 13:case 32:this.onClickToChangeFolderPermissionLevel(e);break;case 9:this.moveInRegions(e);break;case 37:case 39:e.preventDefault(),e.stopPropagation();break;case 38:case 40:this.moveInSelectionRegion(e)}},"onKeyUp":function(e){27===e.keyCode&&this.trigger("closeDropdown")},"moveInRegions":function(e){var t=this.tabableElements&&this.tabableElements.indexOf(e.target);this.tabableElements&&1===this.tabableElements.length?(e.stopPropagation(),e.preventDefault()):this.tabableElements&&(0===t?this.tabableElements[1].classList.contains("selected")?this.tabableElements[1].focus():this.tabableElements[2].focus():this.tabableElements[0].focus(),e.stopPropagation(),e.preventDefault())},"moveInSelectionRegion":function(e){var t=this.tabableElements&&this.tabableElements.indexOf(e.target);this.tabableElements&&1===this.tabableElements.length||0===t?(e.stopPropagation(),e.preventDefault()):this.tabableElements&&(1===t?this.tabableElements[2].focus():this.tabableElements[1].focus(),e.stopPropagation(),e.preventDefault())},"_disableVersionSettings":function(){this.controlViewIsInFocus=!0;var e=new c,t={"_view":e,"standardHeader":!1,"title":l.majorMinorVersion,"dialogClassName":"csui-version-settings-off","actionBtnLabel":l.actionBtnLabel,"cancelBtnLabel":l.cancelBtnLabel};return new a(t).show()}})}),csui.define("hbs!csui/controls/versionsettings/impl/version.settings",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class=\'csui-toolbar-control-settings\'>\r\n    <div role="button" class="csui-toolbar-settings csui-acc-focusable"\r\n        title="'+e.escapeExpression((l=null!=(l=r(i,"settingLabel")||(null!=t?r(t,"settingLabel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"settingLabel","hash":{},"loc":{"start":{"line":4,"column":15},"end":{"line":4,"column":31}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"settingLabel")||(null!=t?r(t,"settingLabel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"settingLabel","hash":{},"loc":{"start":{"line":4,"column":45},"end":{"line":4,"column":61}}}):l))+'"\r\n        aria-haspopup="true" aria-expanded="false">\r\n      '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","theme":null!=t?r(t,"iconTheme"):t,"iconName":null!=t?r(t,"iconName"):t},"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":67}}}))?s:"")+"\r\n    </div>\r\n  </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"enabled"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":1,"column":0},"end":{"line":9,"column":7}}}))?s:""}});return i.registerPartial("csui_controls_versionsettings_impl_version.settings",n),n}),csui.define("csui/controls/versionsettings/version.settings.view",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","i18n","csui/controls/versionsettings/impl/version.control.view","i18n!csui/controls/versionsettings/impl/nls/lang","hbs!csui/controls/versionsettings/impl/version.settings","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/dialogs/modal.alert/modal.alert","csui/utils/base","csui/utils/url","smart/utils/smart.base","csui/utils/contexts/factories/next.node","csui/controls/icons.v2","css!csui/controls/versionsettings/impl/settings"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m){"use strict";var f=n.LayoutView.extend({"constructor":function(e){e||(e={}),t.defaults(e,{"iconName":"csui_action_version_control32"}),n.LayoutView.prototype.constructor.call(this,e),this.parentView=e.originatingView||e.parentView,this.context=e.context,this.listenTo(this.context.getModel(p),"before:change:id",function(){this.parentView._blockingCounter&&this.parentView.unblockActions(),this.isContainerChanged=!0}),this.isSilentFetch=!0,this.listenTo(this.parentView.collection,"request",function(){this.isSilentFetch=!1})},"template":r,"templateHelpers":function(){return{"enabled":this.enabled(),"settingLabel":l.versionSettings,"iconTheme":this.options.useIconsForDarkBackground?"dark":"","iconName":this.options.iconName}},"ui":{"settingsIcon":".csui-toolbar-settings"},"events":{"click @ui.settingsIcon":"_openSettingsView","keydown":"onKeyInView","keyup":"onKeyUpView"},"_openSettingsView":function(i){i=i||{},i.model=this.options.model,i.settingsView=this,this.versionControlSettings=new s(i),this.listenTo(this.versionControlSettings,"closeDropdown",this._closeSettingsMenu),this.listenTo(this.versionControlSettings,"show",this.setDropdownPosition),e(window).on("resize.dropdownResize",t.bind(this.setDropdownPosition,this));var o=e.fn.binf_modal.getDefaultContainer();this.versionDropdownMask=document.createElement("div"),this.versionDropdownContainer=document.createElement("div"),this.ui.settingsIcon.attr("aria-expanded","true"),this.versionDropdownContainer.classList.add("csui-toolbar-control-settings-dropdown"),this.versionDropdownMask.classList.add("version-mask"),e(o).append(this.versionDropdownMask).append(this.versionDropdownContainer),e(this.versionDropdownMask).on("click",t.bind(this._saveAndDestroySettingsDropdown,this)),this.versionDropdownContainerRegion=new n.Region({"el":this.versionDropdownContainer}),this.versionDropdownContainerRegion.show(this.versionControlSettings),this.versionDropdownContainerRegion.$el.addClass("binf-open")},"_saveAndDestroySettingsDropdown":function(){function e(){var e=this.versionControlSettings.settings,t=this.options.model,i=t.connector,n={"versions_control_advanced":e.majorMinorVersion.toString(),"apply_to":e.permissionLevel};return t.save(void 0,{"data":n,"type":"PUT","wait":!0,"silent":!0,"patch":!0,"contentType":"application/x-www-form-urlencoded","url":d.combine(i.getConnectionUrl().getApiBase("v2"),"/nodes/"+t.get("id"))})}var i=this.versionControlSettings.settings,n=this.options.model;n.get("versions_control_advanced")!==i.majorMinorVersion&&(0===this.parentView._blockingCounter&&this.parentView.blockActions(),e.call(this).done(t.bind(function(){!this.isContainerChanged&&n.fetch({"silent":this.isSilentFetch}).always(t.bind(function(){this.isSilentFetch=!0},this)),this.parentView.unblockActions()},this)).fail(t.bind(function(e){this.parentView.unblockActions();var t=new u.RequestErrorMessage(e);c.showError(t.message)},this))),this.destroyVersionControlView()},"destroyVersionControlView":function(){var t=this.versionControlSettings;t&&!t.controlViewIsInFocus&&(this.versionDropdownContainerRegion.$el.removeClass("binf-open"),this.ui.settingsIcon.attr("aria-expanded","false"),e(this.versionDropdownMask).off("click"),e(window).off("resize.dropdownResize"),t.destroy(),e(this.versionDropdownMask).remove(),e(this.versionDropdownContainer).remove())},"restoreFocusToView":function(){this.$el.find(".csui-acc-focusable").trigger("focus")},"setDropdownPosition":function(){var e=this.ui.settingsIcon[0].getBoundingClientRect(),t=e.width,i=e.height,n=e.left,o=e.top,s=this.versionDropdownContainer.offsetWidth,l=h.isRTL()?0:s-t;this.versionDropdownContainer.style.left=n-l+"px",this.versionDropdownContainer.style.top=o+i+"px"},"enabled":function(){return this.options.model.actions.findWhere({"signature":"versionscontrol"})},"saveAndDestroySettingsDropdown":function(){this._saveAndDestroySettingsDropdown()},"onKeyInView":function(e){switch(e.keyCode){case 13:case 32:this.enabled()&&(e.preventDefault(),e.stopPropagation(),this._openSettingsView(this.options))}},"_closeSettingsMenu":function(){this._saveAndDestroySettingsDropdown(),this.restoreFocusToView()}});return t.extend(f.prototype,a),f}),csui.define("csui/widgets/nodestable/toolbaritems",["csui/lib/underscore","i18n!csui/controls/tabletoolbar/nls/localized.strings","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","csui/widgets/favorites/favorite.star.view","csui/controls/versionsettings/version.settings.view","csui-ext!csui/widgets/nodestable/toolbaritems","i18n"],function(e,t,i,n,o,s,l,r,a){"use strict";var c={"navigationToolbar":new n({"main":[{"signature":"BackToLastFragment","name":i.ToolbarItemGoBack,"icon":"icon arrow_back csui-icon-go-previous-node csui-no-hover-effect","toolItemAria":i.ToolbarItemGoBack},{"signature":"TreeBrowse","name":i.ToolbarItemTreeBrowse,"iconName":a&&a.settings.rtl?"csui_action_toggle_tree_rtl32":"csui_action_toggle_tree32","toolItemAria":i.ToolbarItemTreeBrowse,"toolItemAriaExpand":!1}]}),"filterToolbar":new n({"filter":[{"signature":"Filter","name":i.ToolbarItemFilter,"iconName":"csui_action_filter32","toolItemAria":i.ToolbarItemFilterAria,"toolItemAriaExpand":!1,"toolItemRole":"button"}]}),"addToolbar":new n({"add":[]},{"maxItemsShown":0,"dropDownIconName":"csui_action_add32","dropDownText":i.ToolbarItemAddItem,"addTrailingDivider":!1}),"leftToolbar":new n({"main":[{"signature":"CollectionCanCollect","name":i.ToolbarItemAddItem,"iconName":"csui_action_add32"}]}),"tableHeaderToolbar":new n({"info":[{"signature":"Properties","name":i.ToolbarItemInfo,"iconName":"csui_action_properties32"},{"signature":"DocPreview","name":i.ToolbarItemDocPreview,"commandData":{"ifNotOpenDelegate":!0}},{"signature":"CopyLink","name":i.ToolbarItemCopyLink}],"edit":[{"signature":"Edit","name":i.ToolbarItemEdit,"flyout":"edit","promoted":!0},{"signature":"EditActiveX","name":"EditActiveX","flyout":"edit"},{"signature":"EditOfficeOnline","name":"EditOfficeOnline","flyout":"edit"},{"signature":"EditWebDAV","name":"EditWebDAV","flyout":"edit"}],"share":[{"signature":"SendTo","name":i.ToolbarItemSendTo,"flyout":"sendto","group":"share"},{"signature":"Shares","name":i.ToolbarItemShare,"flyout":"share","promoted":!0,"group":"share"},{"signature":"EmailLink","name":i.ToolbarItemEmailLink,"flyout":"sendto","promoted":!0,"group":"share"}],"main":[{"signature":"InlineEdit","name":i.ToolbarItemRename},{"signature":"permissions","name":i.ToolbarItemPermissions},{"signature":"Download","name":i.ToolbarItemDownload},{"signature":"ReserveDoc","name":t.ToolbarItemReserve},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve},{"signature":"Lock","name":i.ToolbarItemLock},{"signature":"Unlock","name":i.ToolbarItemUnlock},{"signature":"Copy","name":i.ToolbarItemCopy},{"signature":"Move","name":i.ToolbarItemMove},{"signature":"AddVersion","name":i.ToolbarItemAddVersion},{"signature":"Collect","name":i.ToolbarCollect},{"signature":"Delete","name":i.ToolbarItemDelete},{"signature":"RemoveCollectedItems","name":i.ToolbarItemRemoveCollectionItems},{"signature":"ZipAndDownload","name":i.MenuItemZipAndDownload},{"signature":"Restructure","name":i.ToolbarItemRestructure},{"signature":"CompoundDocument","name":i.compoundDocument,"flyout":"CompoundDocument"},{"signature":"CreateRelease","name":i.CreateRelease,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"CreateRevision","name":i.CreateRevision,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"Reorganize","name":i.Reorganize,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"ViewReleases","name":i.ToolbarItemViewReleases,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"}],"shortcut":[{"signature":"OriginalCopyLink","name":i.ToolbarItemOriginalCopyLink},{"signature":"OriginalEdit","name":i.ToolbarItemOriginalEdit},{"signature":"OriginalEmailLink","name":i.ToolbarItemOriginalShare},{"signature":"OriginalReserveDoc","name":t.ToolbarItemOriginalReserve},{"signature":"OriginalUnreserveDoc","name":t.ToolbarItemOriginalUnreserve},{"signature":"OriginalCopy","name":i.ToolbarItemOriginalCopy},{"signature":"OriginalMove","name":i.ToolbarItemOriginalMove},{"signature":"OriginalAddVersion","name":i.ToolbarItemAddVersion},{"signature":"OriginalDownload","name":i.ToolbarItemOriginalDownload},{"signature":"OriginalDelete","name":i.ToolbarItemOriginalDelete}]},{"maxItemsShown":15,"dropDownIconName":"csui_action_more32","dropDownText":i.ToolbarItemMore,"addGroupSeparators":!1,"lazyActions":!0}),"captionMenuToolbar":new n({"other":[{"signature":"Properties","name":i.MenuItemInformation},{"signature":"CopyLink","name":i.MenuItemCopyLink},{"signature":"EmailLink","name":i.ToolbarItemEmailLinkShort},{"signature":"permissions","name":i.ToolbarItemPermissions},{"signature":"Rename","name":i.MenuItemRename},{"signature":"Copy","name":i.MenuItemCopy},{"signature":"Move","name":i.MenuItemMove},{"signature":"Delete","name":i.MenuItemDelete},{"signature":"Collect","name":i.ToolbarCollect}]},{"maxItemsShown":0,"dropDownIconName":"csui_action_caret_down32"}),"inlineActionbar":new n({"info":[{"signature":"Properties","name":i.ToolbarItemInfo,"iconName":"csui_action_properties32"},{"signature":"DocPreview","name":i.ToolbarItemDocPreview,"iconName":"csui_action_preview32","commandData":{"ifNotOpenDelegate":!0}},{"signature":"CopyLink","name":i.ToolbarItemCopyLink,"iconName":"csui_action_copy_link32"}],"edit":[{"signature":"Edit","name":i.ToolbarItemEdit,"flyout":"edit","promoted":!0,"iconName":"csui_action_edit32"},{"signature":"EditActiveX","name":"EditActiveX","flyout":"edit"},{"signature":"EditOfficeOnline","name":"EditOfficeOnline","flyout":"edit"},{"signature":"EditWebDAV","name":"EditWebDAV","flyout":"edit"}],"share":[{"signature":"Share","name":i.MenuItemShare,"iconName":"csui_action_share32","flyout":"share"},{"signature":"SendTo","name":i.ToolbarItemSendTo,"iconName":"csui_action_send_to32","flyout":"sendto"},{"signature":"EmailLink","name":i.ToolbarItemEmailLink,"flyout":"sendto"}],"other":[{"signature":"InlineEdit","name":i.ToolbarItemRename,"iconName":"csui_action_rename32"},{"signature":"permissions","name":i.ToolbarItemPermissions,"iconName":"csui_action_view_perms32"},{"signature":"Download","name":i.ToolbarItemDownload,"iconName":"csui_action_download32"},{"signature":"ReserveDoc","name":t.ToolbarItemReserve,"iconName":"csui_action_reserve32"},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve,"iconName":"csui_action_unreserve32"},{"signature":"Lock","name":i.ToolbarItemLock,"iconName":"csui_action_reserve32"},{"signature":"Unlock","name":i.ToolbarItemUnlock,"iconName":"csui_action_unreserve32"},{"signature":"Copy","name":i.ToolbarItemCopy,"iconName":"csui_action_copy32"},{"signature":"Move","name":i.ToolbarItemMove,"iconName":"csui_action_move32"},{"signature":"AddVersion","name":i.ToolbarItemAddVersion,"iconName":"csui_action_add_version32"},{"signature":"Collect","name":i.ToolbarCollect,"iconName":"csui_action_collect32"},{"signature":"Delete","name":i.ToolbarItemDelete,"iconName":"csui_action_delete32"},{"signature":"RemoveCollectedItems","name":i.ToolbarItemRemoveCollectionItems,"iconName":"csui_action_collection_delete32"},{"signature":"ZipAndDownload","name":i.MenuItemZipAndDownload,"iconName":"csui_action_download32"},{"signature":"CompoundDocument","name":i.compoundDocument,"flyout":"CompoundDocument","iconName":"csui_action_compound_document32"},{"signature":"CreateRelease","name":i.CreateRelease,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"CreateRevision","name":i.CreateRevision,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"Reorganize","name":i.Reorganize,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"ViewReleases","name":i.ToolbarItemViewReleases,"subItemOf":"CompoundDocument",
"flyout":"CompoundDocument"},{"signature":"Restructure","name":i.ToolbarItemRestructure}]},{"maxItemsShown":5,"dropDownText":i.ToolbarItemMore,"dropDownIconName":"csui_action_more32","addGroupSeparators":!1}),"rightToolbar":new n({"main":[{"signature":"Thumbnail","name":i.ToolbarItemThumbnail,"iconName":"csui_action_switch_thumb32","commandData":{"useContainer":!0},"title":i.ThumbnailTitle},{"signature":"ToggleDescription","name":i.ToolbarItemShowDescription,"iconName":"csui_action_reveal_description32","commandData":{"useContainer":!0},"toolItemRole":"button"},{"signature":"Comment","name":i.ToolbarItemComment,"iconName":"esoc_no_comment32","iconNameForOn":"esoc_comment32","className":"esoc-socialactions-comment","customView":!0,"commandData":{"useContainer":!0}},{"signature":"VersionSettings","enabled":!0,"viewClass":l,"customView":!0,"commandData":{"useContainer":!0,"viewOptions":{"focusable":!1}}},{"signature":"Favorite2","enabled":!0,"viewClass":s,"customView":!0,"commandData":{"useContainer":!0,"viewOptions":{"focusable":!1}}},{"signature":"RestoreWidgetViewSize","name":i.ToolbarItemRestoreWidgetViewSize,"iconName":"csui_action_minimize32","commandData":{"useContainer":!0}},{"signature":"MaximizeWidgetView","name":i.ToolbarItemMaximizeWidgetView,"iconName":"csui_action_expand32","commandData":{"useContainer":!0}}]},{"hAlign":"right","addTrailingDivider":!1})};return r&&e.each(r,function(t){e.each(t,function(t,i){var n=c[i];if(n||"otherToolbar"!==i||(n=c.tableHeaderToolbar),!n)throw new Error("Invalid target toolbar: "+i);e.each(t,function(e){e=new o(e),n.addItem(e)})})}),c.clone=function(){return n.cloneToolbarItems(this)},c}),csui.define("csui/widgets/nodestable/toolbaritems.masks",["module","csui/lib/underscore","csui/controls/toolbar/toolitems.mask","csui/utils/toolitem.masks/global.toolitems.mask"],function(e,t,i,n){"use strict";function o(){var o=e.config(),l=new n;this.toolbars=t.reduce(s,function(e,n){var s=new i(l,{"normalize":!1});return t.each(o,function(e,t){(e=e[n])&&s.extendMask(e)}),s.storeMask(),e[n]=s,e},{})}var s=["filterToolbar","leftToolbar","tableHeaderToolbar","inlineActionbar","rightToolbar"];return o.toolbars=s,o}),csui.define("csui/widgets/nodestable/headermenuitems",["csui/lib/underscore","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","csui-ext!csui/widgets/nodestable/headermenuitems"],function(e,t,i,n,o){"use strict";var s={"headerMenuToolbar":new i({"other":[{"signature":"Properties","name":t.MenuItemInformation},{"signature":"CopyLink","name":t.MenuItemCopyLink},{"signature":"Share","name":t.MenuItemShare,"flyout":"share"},{"signature":"SendTo","name":t.ToolbarItemSendTo,"flyout":"sendto"},{"signature":"EmailLink","name":t.ToolbarItemEmailLinkShort,"flyout":"sendto"},{"signature":"permissions","name":t.ToolbarItemPermissions},{"signature":"Rename","name":t.MenuItemRename},{"signature":"ReserveDoc","name":t.ToolbarItemReserve},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve},{"signature":"Lock","name":t.ToolbarItemLock},{"signature":"Unlock","name":t.ToolbarItemUnlock},{"signature":"Copy","name":t.MenuItemCopy},{"signature":"Move","name":t.MenuItemMove},{"signature":"Collect","name":t.ToolbarCollect},{"signature":"Delete","name":t.MenuItemDelete},{"signature":"ZipAndDownload","name":t.ToolbarItemZipAndDownload},{"signature":"Restructure","name":t.MenuItemRestructure},{"signature":"CompoundDocument","name":t.compoundDocument,"flyout":"CompoundDocument"},{"signature":"CreateRelease","name":t.CreateRelease,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"CreateRevision","name":t.CreateRevision,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"Reorganize","name":t.Reorganize,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"ViewReleases","name":t.ToolbarItemViewReleases,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"}]},{"maxItemsShown":0,"dropDownIconName":"csui_action_caret_down32"})};return o&&e.each(o,function(t){e.each(t,function(t,i){var o=s[i];if(!o)throw new Error("Invalid target toolbar: "+i);e.each(t,function(e){e=new n(e),o.addItem(e)})})}),s.clone=function(){return i.cloneToolbarItems(this)},s}),csui.define("csui/widgets/nodestable/headermenuitems.mask",["module","csui/lib/underscore","csui/controls/toolbar/toolitems.mask","csui/utils/toolitem.masks/global.toolitems.mask"],function(e,t,i,n){"use strict";return i.extend({"constructor":function(){var o=e.config(),s=new n;i.prototype.constructor.call(this,s,{"normalize":!1}),t.each(o,function(e,t){this.extendMask(e)},this),this.storeMask()}})}),csui.define("hbs!csui/widgets/nodestable/impl/nodestable",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-alternating-toolbars">\r\n  <div class="csui-table-tabletoolbar"></div>\r\n  <div class="csui-table-rowselection-toolbar"></div>\r\n</div>\r\n<div class="csui-facet-table-container">\r\n  <div class=\'csui-side-panel csui-sidepanel-hidden\'>\r\n    <div class="csui-table-facetview csui-facetview-hidden csui-facetview-visibility"></div>\r\n    <div class="csui-table-treeview csui-treeview-hidden csui-treeview-visibility"></div>\r\n  </div>\r\n  \x3c!--outer div is needed in order to float table contents right to accommodate  facets--\x3e\r\n  <div class="csui-outertablecontainer">\r\n    \x3c!--inner div is needed in order to have tableview sized to remaining height of container--\x3e\r\n    <div class="csui-innertablecontainer">\r\n      <div class="csui-table-facetbarview"></div>\r\n      <div class="csui-table-tableview"></div>\r\n      <div class="cs-thumbnail-wrapper"></div>\r\n      <div class="csui-table-paginationview"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_widgets_nodestable_impl_nodestable",n),n}),csui.define("css!csui/widgets/nodestable/impl/nodestable",[],function(){}),csui.define("csui/widgets/nodestable/nodestable.view",["require","module","nuc/lib/jquery","nuc/lib/underscore","nuc/lib/backbone","nuc/lib/marionette","nuc/utils/log","nuc/utils/base","i18n","nuc/models/utils/v1tov2","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/columns","csui/utils/contexts/factories/children","csui/utils/contexts/factories/columns2","csui/utils/contexts/factories/children2","csui/utils/contexts/factories/node","csui/models/node/node.addable.type.factory","csui/models/node/node.facet2.factory","csui/utils/contexts/factories/appcontainer","csui/utils/contexts/factories/user","csui/utils/contexts/factories/largefilesettings.factory","csui/utils/contexts/factories/objecttypes.factory","nuc/models/node/node.model","csui/models/nodes","csui/controls/progressblocker/blocker","csui/controls/tabletoolbar/tabletoolbar.view","csui/controls/table/inlineforms/inlineform.factory","csui/controls/facet.panel/facet.panel.view","csui/controls/facet.bar/facet.bar.view","csui/controls/table/table.view","csui/controls/table/table.columns","csui/controls/treebrowse/node.tree.view","csui/controls/table/rows/description/description.view","i18n!csui/widgets/nodestable/impl/nls/lang","i18n!csui/utils/commands/nls/localized.strings","i18n!csui/controls/table/impl/nls/lang","csui/controls/pagination/nodespagination.view","csui/behaviors/default.action/default.action.behavior","csui/utils/defaultactionitems","csui/utils/toolitem.masks/children.toolitems.mask","csui/utils/toolitem.masks/creation.toolitems.mask","csui/widgets/nodestable/toolbaritems","csui/widgets/nodestable/toolbaritems.masks","csui/widgets/nodestable/headermenuitems","csui/widgets/nodestable/headermenuitems.mask","csui/utils/commands","csui/utils/url","csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view","csui/controls/tableactionbar/tableactionbar.view","csui/controls/toolbar/toolbar.command.controller","csui/controls/draganddrop/draganddrop.view","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/mixins/view.state/node.view.state.mixin","csui/controls/mixins/view.state/multi.node.fetch.mixin","csui/controls/mixins/view.state/node.selection.restore.mixin","csui/controls/globalmessage/globalmessage","csui/controls/thumbnail/thumbnail.view","csui/controls/thumbnail/thumbnail.content","csui/dialogs/modal.alert/modal.alert","csui/utils/dragndrop.supported.subtypes","csui/utils/accessibility","csui/utils/contexts/factories/next.node","nuc/utils/namedlocalstorage","csui/behaviors/item.error/item.error.behavior","hbs!csui/widgets/nodestable/impl/nodestable","csui/utils/contexts/perspective/plugins/node/node.extra.data","csui/utils/contexts/synchronized.context","nuc/lib/jquery.when.all","csui/lib/jquery.ui/js/jquery-ui","csui/lib/jquery.redraw","css!csui/widgets/nodestable/impl/nodestable"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v,w,y,C,_,x,k,T,V,S,I,A,E,M,P,D,F,O,N,R,B,L,$,j,H,z,U,q,G,W,K,J,X,Q,Y,Z,ee,te,ie,ne,oe,se,le,re,ae,ce,ue,de,he){"use strict";var pe=le.isAccessibleTable(),me=le.shouldEnforceDescriptionColumn(),fe=/\bfast\b(?:=([^&]*)?)?/i.exec(location.search);fe=fe?"false"!==fe[1]:void 0;var ge=t.config();n.defaults(ge,{"defaultPageSize":30,"defaultPageSizes":[30,50,100],"showInlineActionBarOnHover":!pe,"forceInlineActionBarOnClick":!1,"inlineActionBarStyle":"csui-table-actionbar-bubble","clearFilterOnChange":!0,"resetOrderOnChange":!1,"resetLimitOnChange":!0,"fixedFilterOnChange":!1,"showCondensedHeaderToggle":!0,"resetOrderByOnBrowse":!0,"useV2RestApi":!1,"useAppContainer":!1,"isThumbnailEnabled":!1,"enableObjectTypes":!1}),void 0!==fe&&(ge.useAppContainer=fe);var be=s.LayoutView.extend({"className":function(){var e="csui-nodestable";return pe&&(e+=" csui-no-animation"),e+" initialLoading"},"template":ue,"ui":{"facetTableContainer":".csui-facet-table-container","outerTableContainer":".csui-outertablecontainer","innerTableContainer":".csui-innertablecontainer","tableView":".csui-table-tableview","thumbnail":".csui-thumbnail-wrapper","toolbarContainer":".csui-alternating-toolbars","sidePanel":".csui-side-panel","treeView":".csui-table-treeview","facetView":".csui-table-facetview","paginationView":".csui-table-paginationview"},"regions":{"facetBarRegion":".csui-table-facetbarview","tableToolbarRegion":".csui-table-tabletoolbar","tableRowSelectionToolbarRegion":".csui-table-rowselection-toolbar","facetRegion":".csui-table-facetview","treeRegion":".csui-table-treeview","tableRegion":".csui-table-tableview","thumbnailRegion":".cs-thumbnail-wrapper","paginationRegion":".csui-table-paginationview"},"behaviors":{"DefaultAction":{"behaviorClass":R},"ItemError":{"behaviorClass":ce,"model":function(){return this.container}}},"constants":{"DEFAULT_SORT":"name asc","DEFAULT_SORT_CD":"order asc"},"is":"NodesTableView","constructor":function(e){this.options=e,e||(e={}),n.defaults(e,ge,{"data":{},"pageSize":ge.defaultPageSize,"ddItemsList":ge.defaultPageSizes,"toolbarItems":j.clone(),"headermenuItems":z.clone(),"clearFilterOnChange":ge.clearFilterOnChange,"resetOrderOnChange":ge.resetOrderOnChange,"resetLimitOnChange":ge.resetLimitOnChange,"fixedFilterOnChange":ge.fixedFilterOnChange,"showDescriptions":this.getContainerPrefs("isDescriptionShown"),"enableDragNDrop":!0,"showSelectionCounter":!0,"resetOrderByOnBrowse":ge.resetOrderByOnBrowse,"urlParamsList":["order_by","page","filter"]}),this.context=e.context;var t=e.context.getModel(w).get("id");if(!t){var o=e.context.getFactory(w);o&&o.initialResponse&&(t=o.initialResponse.data.id)}this._getConfiguredStartingContainerId=function(){return e.data.containerId},this._useAppContainer=!e.data.containerId&&ge.useAppContainer;var l=this.options.container||this.context.getModel(f),r=this._getConfiguredStartingContainerId()||l.get("id");this._getStartingContainerId=function(){return r},l&&l.get("persist")&&(this.namedLocalStorage=new ae("nodestablePreferences:"+t)),void 0!==e.enableViewState?this.enableViewState=e.enableViewState:this.enableViewState=!0,this.options.data&&this.options.data.containerId&&this.options.data.containerId!==this.context.getModel(f).get("id")&&(this.enableViewState=!1),this.enableViewState&&this._addUrlParametersSupport(e.context);var a=e.data.pageSize||e.pageSize,c=e.data.pageSizes||e.ddItemsList;this.namedLocalStorage&&void 0!==this.namedLocalStorage.get("pageSize")&&(a=this.namedLocalStorage.get("pageSize"),e.data.pageSize?e.data.pageSize=a:e.pageSize=Math.max(a,ge.defaultPageSize)),n.contains(c,a)||(c.push(a),e.data.pageSizes=c.sort()),this.tableColumns=E.deepClone(),this.commands=e.commands||q,this.commandController=new J({"commands":this.commands}),this.listenTo(this.commandController,"before:execute:command",this._beforeExecuteCommand),this.listenTo(this.commandController,"after:execute:command",this._afterExecuteCommand),this.listenTo(this.commandController,"click:toolitem:action",this._toolbarActionTriggered),e.connector||(e.connector=this.context.getObject(u)),this.connector=e.connector;if(this.largeFileSettingsFactory=this.context.getFactory(y),this.largeFileSettingsModel=this.largeFileSettingsFactory&&this.largeFileSettingsFactory.property,ge.enableObjectTypes&&(this.objectTypesFactory=this.context.getFactory(C,{"permanent":!0})),e.toolbarItemsMasks||(e.toolbarItemsMasks=new H),e.headermenuItemsMask||(e.headermenuItemsMask=new U),n.isEmpty(this.options.data)){var d=this.context.viewStateModel;this.loadingText=d&&d.get(d.CONSTANTS.BACK_TO_TITLE),this.loadingText=n.str.sformat(D.loadingText,this.loadingText)}e.blockingParentView?k.delegate(this,e.blockingParentView):k.imbue(this),s.LayoutView.prototype.constructor.call(this,e),this.onWinRefresh=n.bind(this.windowRefresh,this),i(window).on("resize.app",this.onWinRefresh),this.propagateEventsToRegions(),this.listenTo(this,"before:regions:reinitialize",this.initialize.bind(this,this.options)).listenTo(this,"dom:refresh",this._refreshRightTableToolbar).listenTo(this,"enable:blocking",this._rememberFocusInTable).listenTo(this,"disable:blocking",this._restoreFocusInTable).listenTo(this,"popover:open",this._popoverOpen),this.listenTo(this.collection,"change",function(e){e.inlineFormView&&(this.changedModelIndex=this.collection.indexOf(e))}),this.listenTo(this.collection,"reset",n.bind(function(){var e=this.collection&&this.collection.node&&this.collection.node.get("id");if(e&&this.setSelectionKey(e),this.paginationView&&this.namedLocalStorage&&(this.paginationView.options.pageSize=this.paginationView.selectedPageSize,this.namedLocalStorage.set("pageSize",Math.max(this.paginationView.selectedPageSize,ge.defaultPageSize)),this.tableView&&(this.tableView.options.descriptionRowViewOptions.showDescriptions=this.options.showDescriptions=!pe&&this.getContainerPrefs("isDescriptionShown"))),!this.container||r===this.container.get("id")){var t=this.getContainerPrefs("orderBy");this.options.isContainerChanged||(t=this.collection.orderBy),this.options.isContainerChanged=!1,this.setContainerPrefs({"orderBy":t})}},this)),this.listenTo(this.context,"request",this._resetSortOrderBy),this.listenTo(this.context,"sync",function(){this.container&&n.has(this.container.attributes,"type")&&n.contains(this.excludeContainerTypes(),this.container.attributes.type)?this.facetView&&this.facetView.$el.length&&(this._hideFacetPanelView(),this.ui.sidePanel.addClass("csui-sidepanel-hidden")):this.namedLocalStorage&&this.namedLocalStorage.get("isFacetOpen")&&!this.showFilter&&this._completeFilterCommand()}),this.listenToOnce(this.collection,"sync",function(){this.$el.removeClass("initialLoading")}),this.listenTo(this.collection,"sync",function(){this.collection.length||document.activeElement.classList.contains("csui-progresspanel")||i(document.querySelector(".csui-help .csui-acc-tab-region")).trigger("focus")}),this.listenTo(this,"doc:preview:generic:actions",this._highlightRow),this.enableDragNDrop=e.enableDragNDrop,this.listenTo(this.collection,"filter:change",function(e){e&&e.facet&&e.facet.length&&this._showOrHideLocationColumn(!0)})},"_highlightRow":function(e,t){i("."+t).removeClass(t);var o=n.findIndex(this.collection.models,function(t){return t.get("id")===e.get("id")});if(-1!==o){var s=this.tableView||this.targetView,l=s&&s.table?s.table:void 0,r=void 0===l?l:i(l.row(o).node());r&&r.addClass(t)}},"initialize":function(e){function t(){n.each(this.options.toolbarItemsMasks.toolbars,function(e,t){e.restoreAndResetMask(this.options.childrenToolItemsMask)},this)}var i=this.defaultActionController.commands,o=this.defaultActionController.actionItems;if(this.options.container?this.container=this.options.container:this._getConfiguredStartingContainerId()&&(this.container=this.context.getModel(f,{"node":{"attributes":{"id":this._getConfiguredStartingContainerId()}}})),this.trigger("update:model",this.container),!this.collection){var s=this.enableViewState?this._restoreCollectionOptionsFromViewState():{};this.collection=this.context.getCollection(h,{"options":n.defaults({"commands":this._getCommands(),"defaultActionCommands":this._useAppContainer?[]:o.getAllCommandSignatures(i),"delayRestCommands":!0,"node":this.container},s),"attributes":this._getConfiguredStartingContainerId()?{"id":this._getConfiguredStartingContainerId()}:void 0,"detached":this._useAppContainer,"useSpecialPaging":this._useAppContainer}),this.options.useV2RestApi&&this.collection.setFields(de.getModelFields());var a=de.getModelExpand();this.options.useV2RestApi||(a=c.expandsV2toV1(a)),this.collection.setExpand(a)}this._getConfiguredStartingContainerId()&&!this.collection.node.get("id")&&this.collection.node.set("id",this._getConfiguredStartingContainerId()),this.initSelectionMixin(e,this.collection,this._getConfiguredStartingContainerId()||this.collection&&this.collection.node&&this.collection.node.get("id"));var u=this.context.viewStateModel;this.listenTo(this.collection,"filter:clear",this._collectionFilterChanged).listenTo(u,"change:state",this.onViewStateChanged).listenTo(this.collection,"paging:change",this._pagingChanged).listenTo(this.collection,"limits:change",this._pagingChanged).listenTo(this.collection,"orderBy:change",this._orderByChanged).listenTo(this.collection,"orderBy:clear",this._orderByChanged),this.collection.node&&this.listenTo(this.collection.node,"change:id",function(){this.clearAllSelectedNodes(),this.thumbnailViewState!==this.getContainerPrefs("isThumbnailEnabled")&&(this.thumbnailViewState=this.getContainerPrefs("isThumbnailEnabled"),this.enableThumbnailView())});var p=this.context.getModel(re);this.listenTo(this.context,"retain:perspective",function(){this.retainPerspectiveCalled=!0,this.options.data.viewState?(this.collection.node.set("id",p.get("id")),this.collection.resetLimit(!1)):this.onViewStateChanged()}),this.listenTo(p,"before:change:id",function(){this.options.isContainerChanged=!0,this.removeOrderBy()}),this.container||(this.container=e.container||this.collection.node),this.collection.delayedActions&&this.listenTo(this.collection.delayedActions,"error",function(e,t,i){var n=new r.Error(t);te.showMessage("error",n.message)}),this.columns=e.columns||this.context.getCollection(d,{"options":{"node":this.container},"attributes":this._getConfiguredStartingContainerId()?{"id":this._getConfiguredStartingContainerId()}:void 0}),this.addableTypes=e.addableTypes||this.context.getCollection(g,{"options":{"node":this.container},"attributes":this._getConfiguredStartingContainerId()?{"id":this._getConfiguredStartingContainerId()}:void 0,"detached":this._useAppContainer});var m=this.collection.filters&&this.collection.filters.facet?this.collection.filters.facet:void 0;if(n.isEmpty(m)||(this.showFacetPanelOnLoad=!0),this.facetFilters=e.facetFilters||this.context.getCollection(b,{"options":{"node":this.container,"filters":m,"itemsToShow":5},"attributes":this._getConfiguredStartingContainerId()?{"id":this._getConfiguredStartingContainerId()}:void 0,"detached":!0}),void 0!==this.getContainerPrefs("orderBy")&&(this.options.orderBy=this.getContainerPrefs("orderBy")),this._useAppContainer){var w={"models":{"container":this.container,"addableTypes":this.addableTypes,"children":this.collection},"attributes":this._getConfiguredStartingContainerId()?{"id":this._getConfiguredStartingContainerId()}:void 0};this.context.getObject(v,w)}this.container&&(this.options.childrenToolItemsMask||(this.options.childrenToolItemsMask=new L({"context":this.context,"node":this.container})),t.call(this),this.listenTo(this.options.childrenToolItemsMask,"update",t),this.options.creationToolItemsMask||(this.options.creationToolItemsMask=new $({"context":this.context,"node":this.container})),this._lastContainerId=this.container.get("id"),this.listenTo(this.context,"request",function(){var e=this.container.get("id");e!==this._lastContainerId&&(this._lastContainerId=e,this._changingContainer())}),this.listenTo(this.container,"change:id",function(){var e=this.container.get("id");e!==this._lastContainerId?(this._lastContainerId=e,this._changingContainer()):this._showOrHideLocationColumn()}),this.collection.filters&&this.collection.filters.facet?this._showOrHideLocationColumn(!0):this._showOrHideLocationColumn()),this._setFacetBarView(),this._setToolBar(),this.setTableView({"enableDragNDrop":this.options.enableDragNDrop}),this.thumbnailViewState=this.getContainerPrefs("isThumbnailEnabled"),this._setTableRowSelectionToolbarEventListeners(),this.setPagination(),this.dragNDrop=this.enableDragNDrop&&this.setDragNDrop(),this._updateZeroRecordsMessage();try{this._synchronizedContextForFacets=new he(this.context,[this.collection,this.facetFilters],{"triggerEventsOnSourceContext":!0}),this.listenTo(this._synchronizedContextForFacets,"before:models:reset",function(){this._showOrHideLocationColumn(this.facetFilters.getFilterQueryValue().length>0)})}catch(e){l.warn("Either this.collection or this.facetFilters does not support synchronized context - falling back to non synchronized UI update when applying facets")&&console.warn(l.last)}},"isAppContainerUsed":function(){return this._useAppContainer},"findNodeFromCollection":function(e,t){return e.get(t)||e.findWhere({"id":t.get("id")})},"onRemoveItemFromAllSelectedItems":function(e){this.thumbnailViewState&&0===this.getAllSelectedNodes().length&&(this.thumbnail.$el.find(".csui-thumbnail-select").removeClass("csui-checkbox"),this.thumbnail.thumbnailHeaderView.trigger("selectOrUnselect.mixed"))},"onResetAllSelectedItems":function(){this.thumbnailViewState&&0===this.getAllSelectedNodes().length&&(this.thumbnail.$el.find(".csui-thumbnail-select").removeClass("csui-checkbox"),this.thumbnail.thumbnailHeaderView.trigger("selectOrUnselect.mixed"),this.thumbnail.thumbnailHeaderView.$el.find(".csui-thumbnail-select .csui-control").length&&this.thumbnail.thumbnailHeaderView.$el.find(".csui-thumbnail-select .csui-control").trigger("focus"))},"_setThumbnailView":function(e){this.tableView.allColumns||this.tableView._getColumns(),this.collection.orderBy=this.getContainerPrefs("orderBy")||this.collection.orderBy||this.options.orderBy||this.constants.DEFAULT_SORT,e||(e={});var t=n.defaults({"originatingView":this,"context":this.context,"collection":this.collection,"columns":this.columns,"thumbnailColumns":this.tableView.columns,"columnsWithSearch":["name"],"orderBy":this.collection.orderBy,"filterBy":this.options.filterBy,"selectedChildren":new x,"actionItems":this.defaultActionController.actionItems,"commands":this.defaultActionController.commands,"tableColumns":ne,"inlineBar":this.tableView.options.inlineBar,"blockingParentView":this.options.blockingParentView||this,"displayedColumns":this.tableView.displayedColumns,"allColumns":this.tableView.allColumns,"allSelectedNodes":this.getAllSelectedNodes(),"enableViewState":this.enableViewState},e);return this.thumbnail=new ie(t),this.listenTo(this.thumbnail,"execute:defaultAction",function(e){var t={"node":e};if(this.trigger("before:defaultAction",t),!t.cancel){var i=this;this.defaultActionController.executeAction(e,{"context":this.options.context,"originatingView":this,"fullView":!!this.thumbnailView}).done(function(){i.trigger("executed:defaultAction",t)})}}),this.enableDragNDrop&&this.thumbnail.listenTo(this.thumbnail,"thumbnailItemRendered",n.bind(function(e){if(!e.target.isEventSet&&e.node&&e.node.get("id")){var t=this.setDragNDrop(e);this._assignDragArea(t,i(e.target)),e.target.isEventSet=!0}},this)),this.listenTo(this.thumbnail,"thumbnailSelected",function(e){this.addNodesToSelection(e.nodes)}),this.listenTo(this.thumbnail,"thumbnailUnSelected",function(e){this.options.showSelectionCounter&&this.removeNodesFromSelection(e.nodes)}),this.listenTo(this,"properties:view:destroyed",this.thumbnail.closeInlineForm),this.listenTo(this,"permissions:view:destroyed",this.thumbnail.closeInlineForm),!0},"enableThumbnailView":function(){var e=(this.tableView,this);i.Deferred(),this.container,this.context,this.originatingView;this.dragNDrop&&(this.dragNDrop.stopListeningDragEvent(".csui-innertablecontainer",this),this.dragNDrop.stopListeningDragEvent(".csui-alternating-toolbars",this)),this.thumbnailViewState?(this.tableView.selectedChildren&&this.tableView.selectedChildren.models.length>0&&(this.tableView.selectedChildren.models=[]),this._onSelectionUpdateCssClasses(this.getAllSelectedNodes().length,!0),this._setThumbnailView(this.options)):this._onSelectionUpdateCssClasses(this.getAllSelectedNodes().length,!0),1!==this.tableView.options.inlineBar.options.maxItemsShown&&(this.collection.defaultInlineMaxItemsShown=this&&this.tableView.options.inlineBar.options.maxItemsShown),this.thumbnailViewState?(this.tableView.options.inlineBar.options.maxItemsShown=1,this.$el.find("table.dataTable").addClass("csui-thumbnail-view"),this.thumbnailView=!0):(this.thumbnailView=!1,this.tableView.options.inlineBar.options.maxItemsShown=this.collection.defaultInlineMaxItemsShown,this.$el.find("table.dataTable").removeClass("csui-thumbnail-view")),this.previewInFullMode=this.thumbnailView,this._saveThumbnailViewState();var t,o=this.$el.find(".csui-table-tableview");if(t=i(this.thumbnailRegion.el)[0],t=i(t),this.thumbnailViewState){var l=this.getContainerPrefs("orderBy")||this.collection.orderBy||this.options.orderBy||this.constants.DEFAULT_SORT;this.setViewStateOrderBy([l],{"silent":!0}),this.tableView.destroy(),l&&(this.res=l.split(" "),"asc"===this.res[1]?this.collection.orderstate="icon-sortArrowUp":"desc"===this.res[1]&&(this.collection.orderstate="icon-sortArrowDown")),this.thumbnailRegion.show(this.thumbnail),this.enableDragNDrop&&(this.setDragNDrop(),this.csuiDropMessage&&(this.csuiDropMessage.remove(),this.csuiDropMessage=void 0),this._assignDragArea(this.dragNDrop,".csui-innertablecontainer"),this._assignDragArea(this.dragNDrop,".csui-alternating-toolbars")),this._refreshRightTableToolbar(),this._refreshTableRowSelectionToolbar();!this.thumbnail._maintainNodeState(this.collection.at(0))&&this.changedModelIndex&&this.thumbnail._maintainNodeState(this.collection.at(this.changedModelIndex)),s.triggerMethodOn(this.thumbnail,"before:show"),this.collection&&this.collection.models&&this.collection.models.length>=0&&(0===t.length?(t=i(i(this.thumbnailRegion.el)[0]),s.triggerMethodOn(this.thumbnail,"before:show"),t.append(this.thumbnail.el),o.hide(),t.show(),s.triggerMethodOn(e.thumbnail,"show")):(o.hide(),t.show(),e.thumbnail.resultsView.triggerMethod("show"),e.thumbnail.$el.is(":visible")&&e.thumbnail.trigger("dom:refresh"),e.thumbnail.onAfterShow()))}else{var r=this.getContainerPrefs("orderBy")||this.collection.orderBy||this.options.orderBy||this.constants.DEFAULT_SORT;this.setViewStateOrderBy([r],{"silent":!0}),r=this._formatOrderBy(r);var a=r;this.thumbnail&&this.thumbnail.destroy(),this.res=a&&a.split(" "),this.res&&"asc"===this.res[1]?this.collection.orderstate="icon-sortArrowDown":this.res&&"desc"===this.res[1]&&(this.collection.orderstate="icon-sortArrowUp"),this.setTableView({"enableDragNDrop":this.options.enableDragNDrop}),this._refreshRightTableToolbar(),this._refreshTableRowSelectionToolbar(),this.tableToolbarView.rightToolbarView&&this.tableToolbarView.rightToolbarView.collection.refilter(),this.tableView.collection&&0===this.tableView.collection.length&&this.collection.fetched&&(this.tableView._showEmptyViewText=!0),this._updateZeroRecordsMessage(),this.tableRegion.show(this.tableView),this.enableDragNDrop&&(this.setDragNDrop(),this.csuiDropMessage&&(this.csuiDropMessage.remove(),this.csuiDropMessage=void 0),this._assignDragArea(this.dragNDrop,".csui-innertablecontainer"),this._assignDragArea(this.dragNDrop,".csui-alternating-toolbars")),o.show(),e.tableView.triggerMethod("dom:refresh")}this.thumbnail&&this.listenTo(this.thumbnail.thumbnailHeaderView,"selectOrUnselect.all",n.bind(function(e){var t=this.getAllSelectedNodes(),i=this.thumbnail.collection.models;if(e){var o=(this.thumbnail.collection.models,[]);n.each(i,function(e){t.get(e)||void 0===e.get("id")||o.push(e)},this),t.reset(o.concat(t.models))}else null==e||e||(n.each(i,function(e){t.remove(e,{"silent":!0})},this),t.reset(n.clone(t.models)))},this))},"_saveThumbnailViewState":function(){var e=this.context.viewStateModel;e&&e.setSessionViewState("thumbnailView",this.thumbnailView)},"onDestroy":function(){i(window).off("resize.app",this.onWinRefresh),this._destroyRowsDragAndDropViews(),this.dragNDrop&&(this.dragNDrop.destroy(),this.dragNDrop=void 0)},"windowRefresh":function(){this._isRendered&&this.isDisplayed&&this.facetView&&this.facetView.triggerMethod("dom:refresh")},"_getCommands":function(){function e(e){var t=[];return n.mapObject(e,function(e,i){t=n.union(t,n.without(e.collection.pluck("signature"),"disabled"))}),t}var t=n.union(["Add","EditPermission"],n.without(B.pluck("signature"),"Disabled"),e.call(this,this.options.headermenuItems),e.call(this,this.options.toolbarItems)),i=q.clone(),o=[];return i.each(function(e){-1===t.indexOf(e.get("signature"))&&o.push(e)}),i.remove(o,{"silent":!0}),i},"_refreshRightTableToolbar":function(){var e=this.tableToolbarView&&this.tableToolbarView.rightToolbarView;e&&(e.collection.updateStatus({"thumbnailViewState":this.thumbnailViewState}),e.collection.refilter())},"_refreshTableRowSelectionToolbar":function(){var e=this._tableRowSelectionToolbarView?this._tableRowSelectionToolbarView._toolbarView:void 0;e&&e.collection&&1===this.getAllSelectedNodes().length&&this.commandController.commands.get("DocPreview")&&this._tableRowSelectionToolbarView._toolbarView.collection.refilter()},"onRender":function(){this.$el.attr({"role":"region","aria-label":this._getTableAria()}),this.facetBarView&&this.facetBarRegion.show(this.facetBarView),this.tableToolbarRegion.show(this.tableToolbarView),this.showFacetPanelOnLoad&&this._showFacetPanelView();var e=this.context.viewStateModel;this.thumbnailViewState||e&&e.getSessionViewState("thumbnailView")?(this.previewInFullMode=!0,this.enableThumbnailView()):(this.previewInFullMode=!1,this.tableRegion.show(this.tableView),this._assignDragArea(this.dragNDrop,".csui-innertablecontainer"),this._assignDragArea(this.dragNDrop,".csui-alternating-toolbars")),this.paginationRegion.show(this.paginationView),this.listenTo(this,"csui.description.toggled",function(e){this.tableView.showDetailRowDescriptions(e.showDescriptions),this.tableView.trigger("update:scrollbar")})},"_resetSortOrderBy":function(){var e=this.options.container||this.context.getModel(f);if(!this.container||e.get("id")===this.container.get("id"))if(this.options.orderBy=this.getContainerPrefs("orderBy"),this.options.orderBy&&this.options.orderBy.length)this.collection.setOrder(this.options.orderBy,!1);else{if(this.getViewStateOrderBy()&&this.getDefaultViewStateOrderBy()!==this.getViewStateOrderBy())return;this.collection.resetOrder(!1)}},"onShow":function(){n.each(this.regionManager._regions,function(e){e.currentView&&e.currentView.triggerMethod("show")})},"onAfterShow":function(){
n.each(this.regionManager._regions,function(e){e.currentView&&e.currentView.triggerMethod("after:show")})},"getSelectedNodes":function(){return new x(this.tableView.getSelectedChildren())},"setActionBarEvents":function(){l.warn("The method 'setActionBarEvents' has been deprecated and will be removed.")&&console.warn(l.last)},"_updateToolItems":function(){l.warn("The method '_updateToolItems' has been deprecated and will be removed.")&&console.warn(l.last)},"setDragNDrop":function(e){function t(){p.stopListening(h,"destroy",t),p.stopListening(h,"drag:over",p._addDragDropBorder),p.stopListening(h,"drag:leave",p._removeDragDropBorder)}function n(e){return-1!==i.inArray(e.get("type"),se)}var o=e&&e.node,s=function(e){return(!e||!e.get("type")||144!==e.get("type")||!r.isSafari()&&!r.isIE11())&&(e&&e.get("id")&&n(e))}(o),l=this.options.context,a=s?e.target:this,c=s?o:this.container,u=o?void 0:this.addableTypes,d=s?a:".csui-innertablecontainer",h=new X({"container":c,"collection":this.collection,"addableTypes":u,"context":l,"highlightedTarget":d,"originatingView":this,"isSupportedRowView":s}),p=this;return this.listenTo(h,"destroy",t),this.listenTo(h,"drag:over",this._addDragDropBorder),this.listenTo(h,"drag:leave",this._removeDragDropBorder),this.container&&(this.listenTo(this.container,"change:id",this._updateZeroRecordsMessage),this.listenTo(this.addableTypes,"reset",this._updateZeroRecordsMessage)),h},"_updateZeroRecordsMessage":function(){var e=this.canAddItems(),t=this.addItemsPermissions();this.tableView.canAddItemsToContainer=e,this.tableView.addItemsPermissions=t,this.tableView.setCustomLabels({"zeroRecords":!!e&&!!t&&D.dragAndDropMessage})},"addItemsPermissions":function(){return this.dragNDrop&&this.dragNDrop.canAdd()},"canAddItems":function(){return-1!==se.indexOf(this.container.get("type"))},"_assignDragArea":function(e,t){e&&e.setDragParentView(this,t)},"_addDragDropBorder":function(e,t){var n=t&&t.disabled?"addClass":"removeClass",o=".csui-innertablecontainer";o=t&&t.highlightedTarget?t.highlightedTarget:o,i(o).addClass("drag-over")[n]("csui-disabled")},"_removeDragDropBorder":function(e){e&&e.highlightedTarget&&e.valid?i(e.highlightedTarget).removeClass("drag-over"):i(".csui-innertablecontainer").removeClass("drag-over")},"setTableView":function(e){e||(e={});var t=this.options.context.viewStateModel,o=t.CONSTANTS,s=t.get(o.QUERY_STRING_PARAMS);this.collection.orderBy=(s?this.collection.orderBy:this.getContainerPrefs("orderBy"))||this.options.orderBy||this.constants.DEFAULT_SORT,this.collection.orderBy&&this.enableViewState&&this.setViewStateOrderBy([this.collection.orderBy],{"default":!0});var l=n.extend({"context":this.options.context,"connector":this.connector,"collection":this.collection,"columns":this.columns,"tableAria":this._getTableAria(),"tableColumns":this.tableColumns,"descriptionRowView":P,"descriptionRowViewOptions":{"firstColumnIndex":2,"lastColumnIndex":2,"showDescriptions":!pe&&this.options.showDescriptions,"collapsedHeightIsOneLine":!0,"displayInEntireRow":!0},"enforceDescriptionColumnInAccessibleMode":me,"pageSize":Math.max(this.options.data.pageSize||this.options.pageSize,ge.defaultPageSize),"originatingView":this,"columnsWithSearch":["name"],"orderBy":this.collection.orderBy,"filterBy":this.options.filterBy,"actionItems":this.defaultActionController.actionItems,"commands":this.defaultActionController.commands,"blockingParentView":this.options.blockingParentView||this,"parentView":this,"focusView":"tableHeader","showSelectionCounter":this.options.showSelectionCounter,"inlineBar":{"viewClass":K,"options":n.extend({"collection":this.options.toolbarItems.inlineActionbar,"toolItemsMask":this.options.toolbarItemsMasks.toolbars.inlineActionbar,"delayedActions":this.collection.delayedActions,"container":this.container,"containerCollection":this.collection},this.options.toolbarItems.inlineActionbar.options,{"inlineBarStyle":this.options.inlineActionBarStyle,"forceInlineBarOnClick":this.options.forceInlineActionBarOnClick,"showInlineBarOnHover":this.options.showInlineActionBarOnHover})},"allSelectedNodes":this.getAllSelectedNodes(),"enableViewState":this.enableViewState},e),r=this.thumbnailRegion&&this.thumbnailRegion.el&&i(this.thumbnailRegion.el)[0];r=i(r),this.tableView=new A(l),this.listenTo(this.tableView,"destroyingTable",this.tableDestroyed),this._ensureRequestingMetadata(),this.listenTo(this.tableView,"render",function(){this.tableView.$el.append(i("<div>")[0]),this.tableView.$el.is(":visible")&&r.hide()}),this.enableDragNDrop=!!e.enableDragNDrop,this.setupTableSelection(this.tableView),this._setTableViewEvents()},"tableDestroyed":function(){this._destroyRowsDragAndDropViews()},"onTableViewCollectionSync":function(){var e=this.tableToolbarView,t=e&&e.filterToolbarView,i=t&&t.collection;i&&(i.status.thumbnailViewState=this.thumbnailView)},"_getTableAria":function(){var e=this.collection.node&&this.collection.node.get("name");return e||(e=this.collection.node&&this.collection.node.get("id")),this.options.tableAria||(e?n.str.sformat(D.containerContentTableAria,e):D.genericContentTableAria)},"_ensureRequestingMetadata":function(){function e(){t.setFields("columns"),t.includeResources("metadata")}var t=this.container;t&&t.makeFieldsV2&&(e(),this.listenTo(this.tableView,"columnDefinitionsBuilt",e))},"_setTableViewEvents":function(){return this.listenTo(this.tableView,"tableRowSelected",function(e){this.tableView.cancelAnyExistingInlineForm.call(this.tableView),this.options.showSelectionCounter&&this.addNodesToSelection(e.nodes)}),this.listenTo(this.tableView,"tableRowUnselected",function(e){this.options.showSelectionCounter&&this.removeNodesFromSelection(e.nodes)}),this.listenTo(this.tableView,"execute:defaultAction",function(e){var t={"node":e};if(this.trigger("before:defaultAction",t),!t.cancel){var i=this;this.defaultActionController.executeAction(e,{"context":this.options.context,"originatingView":this}).done(function(){i.trigger("executed:defaultAction",t)})}}),this.enableDragNDrop&&(this._destroyRowsDragAndDropViews(),this.listenTo(this.tableView,"tableRowRendered",function(e){var t=this.setDragNDrop(e);this._rowsDragAndDropViews.push(t),this._assignDragArea(t,i(e.target)),this._assignDragArea(t,e.expandedRows)})),this.listenTo(this.tableView,"refresh:rightTableToolbar",this._refreshRightTableToolbar),!0},"_destroyRowsDragAndDropViews":function(){this._rowsDragAndDropViews&&this._rowsDragAndDropViews.length>0&&n.forEach(this._rowsDragAndDropViews,function(e){e.destroy()}.bind(this)),this._rowsDragAndDropViews=[]},"_changingContainer":function(){var e={"container":this.container};this.commands.get("Filter").enabled(e)&&this.facetFilters&&(this.options.clearFilterOnChange&&(this.facetFilters.clearFilter(),this.triggerMethod("remove:filter")),this.facetFilters.invalidateFetch(),this.showFilter&&this.facetFilters.ensureFetched());var t=!1;this.collection&&this.collection.filters&&this.collection.filters.facet&&(t=!0),this._showOrHideLocationColumn(t),this.tableView.updateCollectionParameters(),this.options.fixedFilterOnChange?(this.collection.clearFilter(!1),this.collection.setFilter(this.options.fixedFilterOnChange,!1)):this.options.clearFilterOnChange&&this.collection.filters&&!this.collection.filters.facet&&this.collection.clearFilter(!1),this.options.resetOrderOnChange&&this.collection.resetOrder(!1),this.options.resetLimitOnChange&&!this.retainPerspectiveCalled&&this.collection.resetLimit(!1),this.retainPerspectiveCalled=!1},"_setToolBar":function(){return this.tableToolbarView=new T({"context":this.options.context,"toolbarItems":this.options.toolbarItems,"toolbarItemsMasks":this.options.toolbarItemsMasks,"headermenuItems":this.options.headermenuItems,"headermenuItemsMask":this.options.headermenuItemsMask,"creationToolItemsMask":this.options.creationToolItemsMask,"container":this.container,"collection":this.collection,"originatingView":this,"blockingParentView":this.options.blockingParentView||this,"addableTypes":this.addableTypes,"toolbarCommandController":this.commandController}),!0},"setTableRowSelectionToolbar":function(e){this._tableRowSelectionToolbarView=new W({"toolItemFactory":e.toolItemFactory,"toolbarItemsMask":e.toolbarItemsMask,"toolbarCommandController":this.commandController,"showCondensedHeaderToggle":e.showCondensedHeaderToggle,"showSelectionCounter":e.showSelectionCounter,"commands":this.defaultActionController.commands,"selectedChildren":this.getAllSelectedNodes(),"container":this.collection.node,"context":this.context,"originatingView":this,"blockingParentView":this.options.blockingParentView||this,"collection":this.collection,"scrollableParent":".csui-table-tableview .csui-nodetable, .csui-thumbnail-results"});var t=this._tableRowSelectionToolbarView;this.listenTo(t,"toggle:condensed:header",function(){if(this.tableToolbarRegion.$el.hasClass("csui-table-rowselection-toolbar-visible")){this.ui.toolbarContainer&&this.ui.toolbarContainer.toggleClass("csui-show-header");var e=this.ui.toolbarContainer&&this.ui.toolbarContainer.hasClass("csui-show-header");e&&(this.tableToolbarRegion.$el.removeClass("binf-hidden"),this.tableToolbarRegion.currentView.trigger(this.tableToolbarRegion.currentView,"dom:refresh")),t.trigger("toolbar:activity",!0,e)}})},"_triggerToolbarActivityEvent":function(e,t){var i=this._tableRowSelectionToolbarView;i&&i.trigger("toolbar:activity",e,t)},"_onSelectionUpdateCssClasses":function(e,t){function i(e,t){!0!==t&&o._triggerToolbarActivityEvent(o._tableRowSelectionToolbarVisible,e),o._tableRowSelectionToolbarVisible?e||o.tableToolbarRegion.$el.addClass("binf-hidden"):o.tableRowSelectionToolbarRegion.$el.addClass("binf-hidden")}var n,o=this,s=this.tableRowSelectionToolbarRegion.$el;pe?e>0?this._tableRowSelectionToolbarVisible||(this._tableRowSelectionToolbarVisible=!0,this.tableToolbarRegion.$el.addClass("csui-table-rowselection-toolbar-visible"),s.removeClass("binf-hidden"),s.addClass("csui-table-rowselection-toolbar-visible"),n=this.ui.toolbarContainer&&this.ui.toolbarContainer.hasClass("csui-show-header"),i(n)):this._tableRowSelectionToolbarVisible&&(this._tableRowSelectionToolbarVisible=!1,this.ui.toolbarContainer&&this.ui.toolbarContainer.removeClass("csui-show-header"),this.tableToolbarRegion.$el.removeClass("binf-hidden"),this.tableToolbarRegion.currentView.trigger(this.tableToolbarRegion.currentView,"dom:refresh"),this.tableToolbarRegion.$el.removeClass("csui-table-rowselection-toolbar-visible"),s.removeClass("csui-table-rowselection-toolbar-visible"),i(!1,t)):e>0?this._tableRowSelectionToolbarVisible||(this._tableRowSelectionToolbarVisible=!0,s.removeClass("binf-hidden").redraw().one("transitionend",function(){n=this.ui.toolbarContainer&&this.ui.toolbarContainer.hasClass("csui-show-header"),i(n)}.bind(this)).addClass("csui-table-rowselection-toolbar-visible"),this.tableToolbarRegion.$el.addClass("csui-table-rowselection-toolbar-visible")):this._tableRowSelectionToolbarVisible&&(this._tableRowSelectionToolbarVisible=!1,this.ui.toolbarContainer&&this.ui.toolbarContainer.removeClass("csui-show-header"),this.tableToolbarRegion.$el.removeClass("binf-hidden").redraw(),this.tableToolbarRegion.currentView.trigger(this.tableToolbarRegion.currentView,"dom:refresh"),s.one("transitionend",function(){i(!1,t)}.bind(this)).removeClass("csui-table-rowselection-toolbar-visible"),this.tableToolbarRegion.$el.removeClass("csui-table-rowselection-toolbar-visible"))},"_selectionChanged":function(){this.tableToolbarView&&this.tableToolbarView.filterToolbarView&&(this.tableToolbarView.filterToolbarView.collection.status.thumbnailViewState=this.tableView.thumbnailView);var e=this.getAllSelectedNodes();e.length>0?(this._tableRowSelectionToolbarView||this._showRowSelectionToolbar(),this._tableRowSelectionToolbarView.setActive(!0)):this._tableRowSelectionToolbarView&&this._tableRowSelectionToolbarView.setActive(!1),this._onSelectionUpdateCssClasses(e.length)},"_showRowSelectionToolbar":function(){this.setTableRowSelectionToolbar({"toolItemFactory":this.options.toolbarItems.tableHeaderToolbar,"toolbarItemsMask":this.options.toolbarItemsMasks.toolbars.tableHeaderToolbar,"showCondensedHeaderToggle":this.options.showCondensedHeaderToggle,"showSelectionCounter":this.options.showSelectionCounter}),this.tableRowSelectionToolbarRegion.show(this._tableRowSelectionToolbarView)},"_setTableRowSelectionToolbarEventListeners":function(){this.listenTo(this.getAllSelectedNodes(),"reset update",this._selectionChanged)},"_setCommonRowSelectionToolbarEventListeners":function(e){this.listenTo(e,"reset",function(){this.tableToolbarView.filterToolbarView.collection.status.thumbnailViewState=this.thumbnailView,this.tableRowSelectionToolbarRegion.show(this._tableRowSelectionToolbarView),this._onSelectionUpdateCssClasses(e.length)})},"setPagination":function(){return this.paginationView=new N({"collection":this.collection,"pageSize":this.getPageSize(),"pageNumber":this.options.data.pageNumber||this.options.pageNumber,"defaultDDList":this.options.ddItemsList,"setPageInfoFromViewState":this.enableViewState&&this.setPageInfoFromViewState.bind(this)}),this.listenTo(this.collection,"add",function(){if(this.collection.length>0&&this.collection.length>this.collection.topCount){var e=this.collection.first();e.isLocallyCreated&&void 0!==e.get("id")&&(this.collection.isPoped=!0,this.tableView.setDeletingNodesState(!0),this.collection.pop(),this.tableView.setDeletingNodesState(!1))}}),!0},"getPageSize":function(){return this.options.data.pageSize||this.options.pageSize},"_handleFacetBarVisible":function(){this.facetBarView.$el.find(".csui-facet-list-bar .csui-facet-item:last a").trigger("focus")},"_handleFacetBarHidden":function(){},"_shouldLocationColumnBeingShown":function(e){var t=this.container&&this.container.get("type");return e||t&&(899===t||298===t)},"_addOrRemoveExpandForLocationColumn":function(e){var t=this._shouldLocationColumnBeingShown(e),i={"properties":["parent_id"]};this.options.useV2RestApi||(i=c.expandsV2toV1(i)),t?this.collection.setExpand(i):this.options.useV2RestApi&&this.collection.resetExpand(i)},"_showOrHideLocationColumn":function(e){this._shouldLocationColumnBeingShown(e)?this.tableColumns.get("parent_id")||this.tableColumns.add([{"key":"parent_id","title":D.columnTitleLocation,"sequence":800,"permanentColumn":!1}]):this.tableColumns.remove("parent_id")},"_ensureFacetPanelViewDisplayed":function(){void 0===this.facetView&&(this._setFacetPanelView(),this.facetRegion.show(this.facetView))},"_showTreeView":function(){var e=this,t=n.extend({"originatingView":e},this.treeData);e.showTree&&(e.treeView=new M(t),e.treeRegion.show(e.treeView))},"_setFacetPanelView":function(){this.facetView=new S({"collection":this.facetFilters,"blockingParentView":this.options.blockingParentView||this,"blockingLocal":!0,"originatingView":this}),this.listenTo(this.facetView,"remove:filter",this._removeFacetFilter).listenTo(this.facetView,"remove:all",this._removeAll).listenTo(this.facetView,"apply:filter",this._checkSelectionAndApplyFilter).listenTo(this.facetView,"apply:all",this._setFacetFilter)},"_removeFacetPanelView":function(){this.thumbnailViewState&&this.thumbnail._adjustThumbnailWidth(),this.facetRegion.empty(),this.facetView=void 0},"_setFacetBarView":function(){this.facetBarView=new I({"collection":this.facetFilters,"context":this.options.context}),this.listenTo(this.facetBarView,"remove:filter",this._removeFacetFilter).listenTo(this.facetBarView,"remove:all",this._removeAll).listenTo(this.facetBarView,"facet:bar:visible",this._handleFacetBarVisible).listenTo(this.facetBarView,"facet:bar:hidden",this._handleFacetBarHidden)},"_checkSelectionAndApplyFilter":function(e){this.getAllSelectedNodes().length?oe.confirmQuestion(n.str.sformat(D.dialogTemplate,D.dialogTitle),D.dialogTitle,{}).done(n.bind(function(){this.clearAllSelectedNodes(),this._addToFacetFilter(e)},this)):this._addToFacetFilter(e)},"_addToFacetFilter":function(e){var t;this._synchronizedContextForFacets?(this.facetFilters.addFilter(e,!1),t=this.facetFilters.getFilterQueryValue(),this.collection.resetLimit(!1),this.collection.setFilter({"facet":t},{"fetch":!1}),this._addOrRemoveExpandForLocationColumn(!0),this._synchronizedContextForFacets.fetch()):(this.facetFilters.addFilter(e),t=this.facetFilters.getFilterQueryValue(),this._addOrRemoveExpandForLocationColumn(!0),this._showOrHideLocationColumn(!0),this.collection.resetLimit(!1),this.collection.setFilter({"facet":t}))},"_setFacetFilter":function(e){var t;this._synchronizedContextForFacets?(this.facetFilters.setFilter(e,!1),t=this.facetFilters.getFilterQueryValue(),this.collection.resetLimit(!1),this.collection.setFilter({"facet":t},{"fetch":!1}),this._addOrRemoveExpandForLocationColumn(!0),this._synchronizedContextForFacets.fetch()):(this.facetFilters.setFilter(e),t=this.facetFilters.getFilterQueryValue(),this._addOrRemoveExpandForLocationColumn(!0),this._showOrHideLocationColumn(!0),this.collection.resetLimit(!1),this.collection.setFilter({"facet":t}))},"_removeFacetFilter":function(e){var t;this._synchronizedContextForFacets?(this.facetFilters.removeFilter(e,!1),t=this.facetFilters.getFilterQueryValue(),this.collection.resetLimit(!1),this.collection.setFilter({"facet":t},{"fetch":!1}),this._addOrRemoveExpandForLocationColumn(t.length>0),this._synchronizedContextForFacets.fetch()):(this.facetFilters.removeFilter(e),t=this.facetFilters.getFilterQueryValue(),this.collection.resetLimit(!1),this.collection.setFilter({"facet":t}),this._addOrRemoveExpandForLocationColumn(t.length>0),this._showOrHideLocationColumn(t.length>0))},"_removeAll":function(){this._synchronizedContextForFacets?(this._addOrRemoveExpandForLocationColumn(!1),this.facetFilters.clearFilter(!1),this.collection.resetLimit(!1),this.collection.setFilter({"facet":[]},{"fetch":!1}),this._synchronizedContextForFacets.fetch()):(this.facetFilters.clearFilter(),this.collection.resetLimit(!1),this.collection.setFilter({"facet":[]}),this._addOrRemoveExpandForLocationColumn(!1),this._showOrHideLocationColumn(!1))},"_beforeExecuteCommand":function(e){var t=this.getAllSelectedNodes();!!t&&t.each(function(t){t.collection=e.status.collection}),e&&"Thumbnail"!==e.commandSignature&&!this.thumbnailViewState?this.tableView.cancelAnyExistingInlineForm.call(this.tableView):e&&"Thumbnail"!==e.commandSignature&&this.thumbnailViewState&&this.thumbnail.cancelAnyExistingInlineForm.call(this.thumbnail),"Delete"!==e.commandSignature&&"RemoveCollectedItems"!==e.commandSignature&&"Move"!==e.commandSignature||(this.deletingNodes=!0,this.tableView.setDeletingNodesState(!0)),"permissions"===e.commandSignature&&this.blockActions()},"_toolbarActionTriggered":function(e){switch(e.commandSignature){case"Filter":this.filterToolItemModel=e.toolItem,this._completeFilterCommand(),this.filterToolItemModel.set("stateIsOn",this.showFilter);break;case"TreeBrowse":this.treeBrowseToolItemModel=e.toolItem,this._completeTreeCommand(),this.treeBrowseToolItemModel.set("stateIsOn",this.showTree)}},"_afterExecuteCommand":function(e){if(e&&!e.cancelled){if(e.status.forwardToTable){var t=V.getInlineFormView(e.addableType);t&&(e.newNodes[0].error||(this.thumbnailView?this.thumbnail.startCreateNewModel(e.newNodes[0],t):this.tableView.startCreateNewModel(e.newNodes[0],t)))}switch(e.command&&e.command.allowCollectionRefetch&&"Delete"!==e.commandSignature&&this.collection.fetch(),e.commandSignature){case"Move":case"RemoveCollectedItems":case"Delete":var i=this.collection;this.deletingNodes=!1,this.tableView.setDeletingNodesState(!1),0!==i.skipCount&&i.totalCount===i.skipCount&&this.collection.setLimit(i.skipCount-i.topCount,this.collection.topCount,!1),this.collection.fetch(),this.clearAllSelectedNodes();break;case"MaximizeWidgetView":case"RestoreWidgetViewSize":this.tableToolbarView.rightToolbarView.collection.refilter();break;case"Thumbnail":this.thumbnailViewState=!this.thumbnailViewState,this.setContainerPrefs({"isThumbnailEnabled":this.thumbnailViewState}),this.enableThumbnailView();break;case"ToggleDescription":this.setContainerPrefs({"isDescriptionShown":!this.getContainerPrefs("isDescriptionShown")})}}},"_transitionEnd":n.once(function(){var e,t={"transition":"transitionend","WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend"},i=document.createElement("div");for(e in t)if(void 0!==i.style[e])return t[e]}),"_completeFilterCommand":function(){this.showFilter=!this.showFilter,this.showTree&&this._hideTreePanelView(),this.namedLocalStorage&&this.namedLocalStorage.set("isFacetOpen",this.showFilter),this.showFilter?(this._showFacetPanelView(),a.settings.rtl?this.ui.sidePanel.one(this._transitionEnd(),function(){this.triggerMethod("dom:refresh")}.bind(this)).removeClass("csui-sidepanel-hidden"):this.ui.sidePanel.removeClass("csui-sidepanel-hidden")):(this._hideFacetPanelView(),this.ui.sidePanel.addClass("csui-sidepanel-hidden"))},"_completeTreeCommand":function(){this.showTree=!this.showTree,this.showFilter&&this._hideFacetPanelView(),this.showTree?(this._showTreePanelView(),this.ui.sidePanel.removeClass("csui-sidepanel-hidden")):(this._hideTreePanelView(),this.ui.sidePanel.addClass("csui-sidepanel-hidden"))},"_showTreePanelView":function(){this.showTree=!0,void 0===this.treeView&&this._showTreeView(),this.treeBrowseToolItemModel&&(this.treeBrowseToolItemModel.set("toolItemAriaExpand",!0),this.treeBrowseToolItemModel.set("title",D.treeBrowseCollapseTooltip)),this.ui.sidePanel.removeClass("csui-sidepanel-hidden"),this.ui.treeView.removeClass("csui-treeview-visibility"),pe?(this.ui.treeView.removeClass("csui-treeview-hidden"),this.triggerMethod("dom:refresh")):this.ui.treeView.one(this._transitionEnd(),function(){this.triggerMethod("dom:refresh"),this.thumbnailViewState&&this.thumbnail._adjustThumbnailWidth()}.bind(this)).removeClass("csui-treeview-hidden");var e=this;this.treeResizeViewState&&this.treeResizeViewState.style&&this.ui.sidePanel.attr("style",this.treeResizeViewState.style),this.ui.sidePanel.resizable({"minWidth":248,"maxWidth":"50%","handles":a.settings.rtl?"w":"e","start":function(){e.ui.sidePanel[0].classList.add("csui-node-tree-no-transition")},"stop":function(){e.ui.sidePanel[0].classList.remove("csui-node-tree-no-transition"),e.triggerMethod("dom:refresh")}})},"_postTreePanelHide":function(){this.treeResizeViewState={"style":this.ui.sidePanel.attr("style")},this.ui.sidePanel.removeAttr("style"),this.ui.sidePanel.resizable("destroy")},"_hideTreePanelView":function(){this._postTreePanelHide(),this.showTree=!1,!this.showTree&&!this.showFilter&&this.ui.sidePanel.addClass("csui-sidepanel-hidden"),this.treeBrowseToolItemModel&&(this.treeBrowseToolItemModel.set("toolItemAriaExpand",!1),this.treeBrowseToolItemModel.set("title",D.treeBrowseExpandTooltip),this.treeBrowseToolItemModel.set("stateIsOn",this.showTree)),pe?(this.ui.treeView.addClass("csui-treeview-hidden"),this.triggerMethod("dom:refresh"),this.ui.treeView.hasClass("csui-treeview-hidden")&&this.ui.treeView.addClass("csui-treeview-visibility")):this.ui.treeView.one(this._transitionEnd(),function(){this.triggerMethod("dom:refresh"),this.ui.treeView.hasClass("csui-treeview-hidden")&&this.ui.treeView.addClass("csui-treeview-visibility")}.bind(this)).addClass("csui-treeview-hidden")},"excludeContainerTypes":function(){var e=[136,298];return 899!==this.container.attributes.type||this.collection.length||e.push(899),e},"_showFacetPanelView":function(){this.showFilter=!0,this._ensureFacetPanelViewDisplayed(),this.facetFilters.ensureFetched(),this.filterToolItemModel&&(this.filterToolItemModel.set("toolItemAriaExpand",!0),this.filterToolItemModel.set("title",D.filterCollapseTooltip)),this.ui.sidePanel.removeClass("csui-sidepanel-hidden"),this.ui.facetView.removeClass("csui-facetview-visibility"),pe?(this.ui.facetView.removeClass("csui-facetview-hidden"),this.triggerMethod("dom:refresh")):this.ui.facetView.one(this._transitionEnd(),function(){this.triggerMethod("dom:refresh"),this.filterToolItemModel&&this.filterToolItemModel.get("isKeyEvent")&&this.facetView.$el.find(".csui-facet.csui-acc-focusable-active").trigger("focus"),this.thumbnailViewState&&this.thumbnail._adjustThumbnailWidth()}.bind(this)).removeClass("csui-facetview-hidden"),this.listenTo(this.facetView,"dom:refresh",n.bind(function(){i(window).trigger("resize.facetview")},this))},"_hideFacetPanelView":function(){this.showFilter=!1,!this.showTree&&!this.showFilter&&this.ui.sidePanel.addClass("csui-sidepanel-hidden"),this.namedLocalStorage&&this.namedLocalStorage.set("isFacetOpen",this.showFilter),this.filterToolItemModel&&(this.filterToolItemModel.set("toolItemAriaExpand",!1),this.filterToolItemModel.set("title",D.filterExpandTooltip),this.filterToolItemModel.set("stateIsOn",this.showFilter)),pe?(this.ui.facetView.addClass("csui-facetview-hidden"),this.triggerMethod("dom:refresh"),this.ui.facetView.hasClass("csui-facetview-hidden")&&this.ui.facetView.addClass("csui-facetview-visibility"),this._removeFacetPanelView()):this.ui.facetView.one(this._transitionEnd(),function(){this._removeFacetPanelView(),this.triggerMethod("dom:refresh"),this.ui.facetView.hasClass("csui-facetview-hidden")&&this.ui.facetView.addClass("csui-facetview-visibility")}.bind(this)).addClass("csui-facetview-hidden"),this.listenTo(this.facetView,"dom:refresh",n.bind(function(){i(window).trigger("resize.facetview")},this))},"_collectionFilterChanged":function(){var e=this.collection.filters,t=e&&e.facet;t&&t.length>0?this._showFacetPanelView():this.showFilter},"_formatFacetFilter":function(e){if(e){var t=e.facet;if(t)return t.map(function(e){var t=e.split(":"),i=t[1].split("|");return i=i.map(function(e){return{"id":e}}),{"id":t[0],"values":i}})}},"setPageInfoFromViewState":function(){var e=this.getViewStatePage()||this.getDefaultViewStatePage();e?void 0===e.top||void 0===e.skip||e.top===this.collection.topCount&&e.skip===this.collection.skipCount||this.collection.setLimit(e.skip,e.top):this.collection.setLimit(0,this.getPageSize())},"onViewStateChanged":function(){if(this.enableViewState){var e,t,i,o=this.context.viewStateModel,s=o.getViewState("filter",!0);try{t=JSON.parse(s),i=t&&t.facet?t.facet:[],JSON.stringify(this.collection.getFilterAsObject())!==s&&this.collection.setFilter(t,!1)}catch(e){i=[]}i&&(e=this.facetFilters&&this.facetFilters.filters)&&!n.isEqual(e,i.facet)&&this.facetFilters.setFilter(i,!0),this.setPageInfoFromViewState(),!e&&this.facetFilters&&this.facetFilters.filters&&this.facetFilters.filters.length&&this.facetFilters.clearFilter(!0)}},"_pagingChanged":function(){if(this.enableViewState&&void 0!==this.collection.topCount&&void 0!==this.collection.skipCount)return this.setViewStatePage(this.collection.topCount,this.collection.skipCount,{"default":0===this.collection.skipCount})},"_orderByChanged":function(){var e=this.collection.orderBy;e&&(this.enableViewState&&this.setViewStateOrderBy([e]),this.setContainerPrefs({"orderBy":e}))},"_rememberFocusInTable":function(){this.tableView.el.contains(document.activeElement)&&(this._tableFocused=!0)},"_restoreFocusInTable":function(){this._tableFocused&&(this.tableView.currentlyFocusedElement()&&this.tableView.currentlyFocusedElement().trigger("focus"),this._tableFocused=!1)},"_popoverOpen":function(){this._tableFocused=!1},"removeOrderBy":function(){this.options.resetOrderByOnBrowse&&!this.thumbnailViewState&&this.getDefaultViewStateOrderBy()!==this.getViewStateOrderBy()&&this.setViewStateOrderBy(void 0,{"silent":!0}),this.collection.state=void 0},"_addUrlParametersSupport":function(e){var t=e&&e.viewStateModel,i=this.getUrlParameters();this.enableViewState=t&&i&&t.addUrlParameters(i,e)},"getDefaultUrlParameters":function(){return this.options.urlParamsList},"getUrlParameters":function(){return this.getDefaultUrlParameters()},"getContainerPrefs":function(e){var t={"isThumbnailEnabled":ge.isThumbnailEnabled,"isDescriptionShown":!1};if(this.container&&136===this.container.get("type")&&(t.orderBy=this.constants.DEFAULT_SORT_CD),this.namedLocalStorage){var i=this.options.container||this.context.getModel(f),n=this._getConfiguredStartingContainerId()||i.get("id"),o=this.namedLocalStorage.get("container:"+n);return o?e?o[e]:o:e?t[e]:t}return e?t[e]:t},"setContainerPrefs":function(e){var t=this.options.container||this.context.getModel(f),i=this._getConfiguredStartingContainerId()||t.get("id");this.namedLocalStorage&&this.container&&i===this.container.get("id")&&this.namedLocalStorage.set("container:"+i,n.extend(this.getContainerPrefs(),e))}},{"useV2RestApi":ge.useV2RestApi});return n.extend(be.prototype,Q),n.extend(be.prototype,Y),n.extend(be.prototype,Z),n.extend(be.prototype,ee),be.prototype._eventsToPropagateToRegions.push("global.alert.inprogress","global.alert.completed"),be.useV2RestApi&&(h=m,d=p),be}),csui.define("hbs!csui/integration/folderbrowser/impl/folderbrowser",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'\r\n<div id="csui-folderbrowser-core">\r\n\r\n  <div class="csui-fb-breadcrumbs"></div>\r\n  <div class="csui-fb-nodestable "></div>\r\n</div>'}});return i.registerPartial("csui_integration_folderbrowser_impl_folderbrowser",n),n}),csui.define("css!csui/integration/folderbrowser/impl/folderbrowser",[],function(){}),csui.define("csui/integration/folderbrowser/impl/folderbrowser.view",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/log","csui/utils/contexts/page/page.context","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/user","csui/utils/contexts/factories/children","csui/utils/contexts/factories/children2","csui/models/node/node.model","csui/utils/connector","csui/utils/base","csui/utils/contexts/factories/ancestors","csui/controls/breadcrumbs/breadcrumbs.view","csui/widgets/nodestable/nodestable.view","csui/behaviors/default.action/default.action.behavior","csui/controls/table/table.columns","csui/controls/globalmessage/globalmessage","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/behaviors/default.action/impl/defaultaction","csui/dialogs/modal.alert/modal.alert","csui/utils/contexts/perspective/plugins/node/node.extra.data","hbs!csui/integration/folderbrowser/impl/folderbrowser","csui/controls/iconpreload/icon.preload.view","css!csui/integration/folderbrowser/impl/folderbrowser"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v,w,y,C,_,x,k,T,V,S){"use strict";function I(e){return e.get&&e.get("id")||e.id||e}v.useV2RestApi;var A={"fields":T.getModelFields(),"expand":T.getModelExpand(),"includeResources":["metadata","perspective"]},E=o.LayoutView.extend({"className":"binf-widgets csui-folderbrowser","template":V,"regions":{"breadcrumbRegion":"#csui-folderbrowser-core div.csui-fb-breadcrumbs","nodeTableRegion":"#csui-folderbrowser-core div.csui-fb-nodestable"},"behaviors":{"DefaultAction":{"behaviorClass":w}},"constructor":function(e){e||(e={}),this.setDefaultOptions(e);var t=e.connection,i=e.connector,s=e.context||new l({"factories":{"connector":i||t&&{"connection":t}||void 0}});i||(i=s.getObject(r)),this.context=s,this.connector=i,null==e.context&&n.extend(e,{"context":this.context}),o.LayoutView.prototype.constructor.call(this,e),this.container=this._initializeContainer(s,e),this.breadcrumbs=this._initializeBreadCrumb(this.options),this._nextNode=s.getModel(c),this.listenTo(this._nextNode,"change:id",function(){this.enterContainer(this._nextNode.attributes)}),this.contextPromise=this.container.fetch().fail(n.bind(this.handleFetchError,this)),this.listenToOnce(this.container,"sync",function(){this.nodesTable=this._createNodesTable(this.context,this.options),this.collection=this.nodesTable.collection,this._updateChildCollection(e),this.tableView=this.nodesTable.tableView}),s.getModel(u),this.listenTo(s,"error",this.handleFetchError),
this.propagateEventsToRegions()},"setDefaultOptions":function(e){n.defaults(e,{"breadcrumb":!0,"facetPanel":!0,"columnsFromDefinitionsOrder":!1})},"onDestroy":function(){this.nodesTable.destroy(),this.breadcrumbs&&this.breadcrumbs.destroy()},"onRender":function(){this.nodeTableRegion.show(this.nodesTable),null!=this.breadcrumbs&&(this.$el.addClass("csui-with-breadcrumb"),this.breadcrumbRegion.show(this.breadcrumbs)),S.ensureOnThePage(),C.setMessageRegionView(this,{"classes":"csui-globalMessenger"})},"updateOptions":function(e){e&&(this.breadcrumbs&&this._updateBreadcrumbs(e),e.start&&e.start.id&&this.enterContainer(e.start.id))},"enterContainer":function(e,t){var i={"id":I(e)};return i.id!=this.prevNodeId&&(this.trigger("openingContainer",i),i.cancel?null!=t&&(t.cancel=!0):this.fetchNode(i)),this},"fetchNode":function(e){var t=this.container;return this.prevNodeId=e.id,this._nextNode.clear({"silent":!0}),this._nextNode.actions.reset([],{"silent":!0}),this._nextNode.set(e,{"silent":!0}),this._nextNode.fetch().done(function(){t.clear({"silent":!0}),t.set(this._nextNode.attributes),this.context.fetch()}.bind(this)),!0},"_initializeContainer":function(e,t){var i=n.extend({"defaultActionCommands":this.defaultActionController.actionItems.getAllCommandSignatures(this.defaultActionController.commands),"delayRestCommands":!0,"promoteSomeRestCommands":!1},A),o=e.getObject(a,{"options":i});return t.start||(t.start={"type":141}),t.start.id&&"volume"!==t.start.id?p.usesIntegerId&&"string"==typeof t.start.id?o.set({"id":parseInt(t.start.id,10)}):o.set({"id":t.start.id}):t.start.type&&o.set({"id":"volume","type":t.start.type}),this._setContainerEvents(o),o},"_setContainerEvents":function(e){return this.listenTo(e,"change:id",function(e,t){this.enterContainer(e.get("id"),t)}),!0},"_updateChildCollection":function(e){this.collection.setFilter(e.filter,!1),v.useV2RestApi&&(this.collection.setFields(A.fields),this.collection.setExpand(A.expand)),this.listenTo(this.collection,"sync",function(){this._containerOpened(this.container)})},"_createNodesTable":function(e,t){var i=new v({"context":e,"pageSize":t.pageSize,"ddItemsList":t.pageSizes,"tableColumns":t.tableColumns,"clearFilterOnChange":t.clearFilterOnChange,"resetOrderOnChange":t.resetOrderOnChange,"resetLimitOnChange":t.resetLimitOnChange,"fixedFilterOnChange":t.fixedFilterOnChange,"toolbarItems":t.toolbarItems});return this.listenTo(i,"executed:defaultAction",function(e){"Browse"===e.signature&&this._containerOpened(e.node)}),this.listenTo(i.tableView,"tableBodyRendered",function(e){this.trigger("tableBodyRendered",{"sender":this,"target":e.target})}),this.listenTo(i,"before:defaultAction",function(e){this._beforeDefaultAction(e)}),i},"_beforeDefaultAction":function(e){var t={"sender":this,"node":e.node};return this.trigger("executingDefaultAction",t),e.cancel=t.cancel,!0},"_containerOpened":function(e){return this.trigger("containerOpened",{"sender":this,"node":e}),!0},"updateBreadcrumb":function(e){var t=I(e);this.breadcrumbs.updateStopId(t)},"_initializeBreadCrumb":function(e){var t=null;return this.options.breadcrumb&&(n.isObject(this.options.breadcrumb)||(this.options.breadcrumb={}),t=new b({"context":e.context,"collection":e.context.getCollection(g),"stop":e.breadcrumb.stop}),e.breadcrumb.isBreadcrumbsEmpty=!0,this._setBreadcrumbEvents(t)),t},"_setBreadcrumbEvents":function(e){return this.listenTo(e,"before:defaultAction",this._beforeDefaultAction),!0},"handleFetchError":function(e){var t=new f.Error(e);this.tableView&&this.tableView.cancelFetch(),this.tableView&&this.tableView.renderError(),k.showError(t.message)}});return n.extend(E.prototype,_),E}),csui.define("csui/integration/folderbrowser/folderbrowser.widget",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/integration/folderbrowser/impl/folderbrowser.view","csui/utils/contexts/page/page.context"],function(e,t,i,n,o){"use strict";function s(t){this.options=t||(t={}),t.context=t.context||new o({"factories":{"connector":t.connector||t.connection&&{"connection":t.connection}||void 0}}),this.folderView=new n(t),this.listenTo(this.folderView,"containerOpened",function(e){this.trigger("containerOpened",{"sender":this,"node":e.node.toJSON()})}),this.listenTo(this.folderView,"executingDefaultAction",function(e){var t={"sender":this,"node":e.node.toJSON()};this.trigger("executingDefaultAction",t),e.cancel=t.cancel}),this.listenTo(this.folderView,"tableBodyRendered",function(e){this.trigger("tableBodyRendered",{"sender":this,"target":e.target})}),this.listenToOnce(this.folderView.container,"sync",function(){var t=this.folderView.nodesTable.getSelectedNodes(),i=t.clone();this.listenTo(t,"reset",function(){var n,o;t.length>i.length?(n="childSelected",o=t.reject(function(e){return i.findWhere({"id":e.get("id")})})):(n="childUnselected",o=i.reject(function(e){return t.findWhere({"id":e.get("id")})})),o.length&&this.trigger(n,{"sender":this,"nodes":e.invoke(o,"toJSON")}),i=t.clone()})})}function l(t){var n=this.folderView.contextPromise,o=this;return t||(t={}),e.extend(t,this.options),this.region=new i.Region({"el":t.placeholder}),n?n.done(function(){o.region&&(o.region.show(o.folderView),o.options.context.fetch())}):o.region.show(o.folderView),this}function r(){return this.region&&(this.folderView.destroy(),this.region.destroy(),this.region=null),this}var a=t.Events.listenTo;return e.extend(s.prototype,t.Events,{"constructor":s,"show":l,"display":l,"destroy":r,"close":r,"enterContainer":function(e,t){return t&&t.stop&&this.folderView.updateBreadcrumb(t.stop),this.folderView.enterContainer(e),this},"getContainer":function(){return this.folderView.container.toJSON()},"getSelectedChildren":function(){return this.folderView.nodesTable.selectedNodes.toJSON()},"listenTo":function(e,t,i){return"string"==typeof e?a.call(this,this,e,t):a.call(this,e,t,i)}}),s.version="1.0",s}),csui.define("csui/integration/folderbrowser2/folderbrowser2.widget",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/pages/start/multi.perspective.routing","csui/utils/base","csui/controls/iconpreload/icon.preload.view","csui/utils/contexts/perspective/perspective.context","csui/controls/perspective.panel/perspective.panel.view","csui/models/navigation.history","csui/controls/globalmessage/globalmessage"],function(e,t,i,n,o,s,l,r,a,c){"use strict";function u(e){this.options=e||(e={});var t=e.connection,i=e.connector;this.options.context||(this.destoryContextOnExit=!0),this.options.context=this.options.context||new l({"factories":{"connector":i||t&&{"connection":t}||void 0}}),a.urlCanChange=!1,csui.require.config({"config":{"csui/integration/folderbrowser2/container.enforcer":{"enabled":!0}}}),o.isAppleMobile()&&document.body.classList.add("csui-on-ipad"),o.isIOSBrowser()&&document.body.classList.add("csui-on-macintosh"),s.ensureOnThePage();var r;e.context&&e.context.viewStateModel&&(r=e.context.viewStateModel.get("PerspectiveRouting")),r||(r=new n({"context":e.context}),r.ensureStart({"silent":!0,"pushState":!1}));var c=this.options.context.viewStateModel;c&&(c.clearHistory(),c.set(c.CONSTANTS.CURRENT_ROUTER,void 0))}function d(e){this.view=new r({"context":this.options.context}),c.setMessageRegionView(this.view,{"classes":"csui-globalMessenger"}),this.listenTo(this.view,"create:perspective",function(){this.view.disabled=!0}.bind(this)),this.region=new i.Region({"el":e.placeholder}),this.region.show(this.view),this.region.el.classList.add("binf-widgets");var t=this.options.context.getModel("nextNode"),n=this.options.context.viewStateModel;return this.options.start&&this.options.start.id&&(void 0!==this.options.breadcrumb&&n.set(n.CONSTANTS.BREADCRUMB,this.options.breadcrumb),t.unset("id",{"silent":!0}),t.set("id",this.options.start.id),n.set(n.CONSTANTS.START_ID,this.options.start.id)),n.clearHistory(),this}function h(){return this.region&&(this.view.destroy(),this.region.destroy(),this.region=null),this.destoryContextOnExit&&this.options.context.destroy(),this}return e.extend(u.prototype,t.Events,{"constructor":u,"show":d,"destroy":h,"setStartId":function(e){if(this.options.start.id!==e){var t,i=this.options.context.viewStateModel;return this.options.start.id=e,t=this.options.context.getModel("nextNode"),t.get("id")===e&&t.unset("id",{"silent":!0}),t.set("id",e),i.set(i.CONSTANTS.START_ID,this.options.start.id),i.clearHistory(),i.clearCurrentHistoryEntry(),this}}}),u}),csui.define("csui/integration/folderbrowser2/container.enforcer",["module"],function(e){return[{"decides":function(t){return e.config().enabled&&t.get("container")},"important":!0,"module":"json!csui/utils/contexts/perspective/impl/perspectives/container.json"}]}),csui.define("csui/integration/target.picker/target.picker",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/dialogs/node.picker/node.picker","csui/utils/contexts/page/page.context"],function(e,t,i,n,o){"use strict";function s(t){this.options=e.defaults({},t,l)}var l={"start":{},"selectRows":"single","filter":{},"selectable":{},"ui":{}};return e.extend(s.prototype,t.Events,{"show":function(t){t=e.defaults({},t,this.options);var i=t.connector||{"connection":t.connection},s=new o({"factories":{"connector":i}}),l=e.isEmpty(t.start)?void 0:t.start.id?t.start:{"id":"volume","type":t.start.type},r=e.isEmpty(t.selectable.type)?t.filter.type:t.selectable.type,a=new n({"context":s,"initialContainer":l,"selectMultiple":"multiple"===t.selectRows,"selectableTypes":r,"globalSearch":!0,"dialogTitle":t.ui.TargetPickerDialogTitle}),c=a.show(),u=this;return c.done(function(i){var n=i.nodes[0],o=e.invoke(i.nodes,"toJSON");u.trigger("childSelected",{"sender":u,"nodes":e.invoke(i.nodes,"toJSON"),"ancestors":[]}),t.done&&t.done({"sender":u,"node":n&&n.toJSON(),"ancestors":[],"nodes":o})}).fail(function(){t.done&&t.done({"sender":u,"nodes":[]})}),this}}),s.defaults={"containers":{"selectable":{"type":n.defaults.containers.selectableTypes},"ui":{"TargetPickerDialogTitle":n.defaults.containers.dialogTitle}},"documents":{"selectable":{"type":n.defaults.documents.selectableTypes},"ui":{"TargetPickerDialogTitle":n.defaults.documents.dialogTitle}},"categories":{"start":n.defaults.categories.initialContainer,"selectable":{"type":n.defaults.categories.selectableTypes},"ui":{"TargetPickerDialogTitle":n.defaults.categories.dialogTitle}}},s}),csui.define("csui/integration/v1.widgets.wrapper",["csui/lib/underscore","csui/utils/connector","csui/integration/folderbrowser/folderbrowser.widget","csui/integration/target.picker/target.picker"],function(e,t,i,n){var o=window.csui;return e.extend(o,{"version":"2.0","util":{"Connector":t},"widget":{"FolderBrowserWidget":i,"TargetPickerDialogWidget":n},"Connector":t,"FolderBrowserWidget":i}),o}),csui.define("csui/integration/permission.header/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/integration/permission.header/impl/nls/root/lang",{"lblSecurityClearance":"Security clearance","lblSupplementalMarkings":"Supplemental markings"}),csui.define("hbs!csui/integration/permission.header/impl/permission.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-permissions-rightbar-view">\r\n  <div class="csui-secuirity-clearance"><label>'+e.escapeExpression((s=null!=(s=l(i,"lblSecurityClearance")||(null!=t?l(t,"lblSecurityClearance"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"lblSecurityClearance","hash":{},"loc":{"start":{"line":2,"column":47},"end":{"line":2,"column":71}}}):s))+'</label><span>Secret</span\r\n  ></div>\r\n  <div class="csui-supplimental-markings"><label>'+e.escapeExpression((s=null!=(s=l(i,"lblSupplementalMarkings")||(null!=t?l(t,"lblSupplementalMarkings"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"lblSupplementalMarkings","hash":{},"loc":{"start":{"line":4,"column":49},"end":{"line":4,"column":76}}}):s))+"</label><span\r\n  >Contractor; For official use only\r\n  </span\r\n></div>\r\n</div>"}});return i.registerPartial("csui_integration_permission.header_impl_permission.header",n),n}),csui.define("css!csui/integration/permission.header/impl/permission.header",[],function(){}),csui.define("csui/integration/permission.header/permission.header.view",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","i18n!csui/integration/permission.header/impl/nls/lang","hbs!csui/integration/permission.header/impl/permission.header","css!csui/integration/permission.header/impl/permission.header"],function(e,t,i,n,o,s,l){"use strict";return o.ItemView.extend({"template":l,"templateHelpers":function(){return{"lblSecurityClearance":s.lblSecurityClearance,"lblSupplementalMarkings":s.lblSupplementalMarkings}},"constructor":function(e){e||(e={}),o.ItemView.prototype.constructor.call(this,e)}})}),csui.define("css!csui/integration/permission/table/cells/impl/security.permission.cell",[],function(){}),csui.define("csui/integration/permission/table/cells/security.permission.cell",["csui/controls/table/cells/cell/cell.view","csui/controls/table/cells/cell.registry","css!csui/integration/permission/table/cells/impl/security.permission.cell"],function(e,t){"use strict";var i=e.extend({"renderValue":function(){var e=this.getValueText();"true"===e?this.$el.append('<span class="csui-icon icon-true icon-checkmark-green"></span>'):"false"===e?this.$el.append('<span class="csui-icon icon-false circle_delete"></span>'):this.$el.text(e)}},{"hasFixedWidth":!0});return t.registerByColumnKey("security_clearance",i),t.registerByColumnKey("supplemental_markings",i),i}),csui.define("csui/integration/permission/table/permission.table.columns",["csui/lib/underscore"],function(e){return[{"key":"security_clearance","sequence":31,"permanentColumn":!0},{"key":"supplemental_markings","sequence":32,"permanentColumn":!0}]});csui.define("csui/integration/folderbrowser/impl/nls/folderbrowser.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/integration/folderbrowser/impl/nls/root/folderbrowser.manifest",{"BackButtonToolItem":"Go Back","PageWidgetToolItem":"Open Full Page Container"}),csui.define("css!csui/integration/folderbrowser/impl/icons",[],function(){}),csui.define("csui/integration/folderbrowser/impl/nodestable.toolitems",["csui/lib/underscore","csui/utils/base","csui/controls/toolbar/toolitems.factory","i18n!csui/integration/folderbrowser/impl/nls/folderbrowser.manifest","css!csui/integration/folderbrowser/impl/icons"],function(e,t,i,n){return{"leftToolbar":[{"signature":"Back","name":n.BackButtonToolItem,"icon":"icon arrow_back csui-icon-go-previous-node csui-no-hover-effect"}],"rightToolbar":[{"signature":"Page","name":n.PageWidgetToolItem,"icon":"icon csui-icon-open-full-page","group":"main","options":{"hAlign":"right"}}]}}),csui.define("csui/widgets/search.results/impl/search.results.factory",["csui/utils/contexts/factories/search.results.factory"],function(e){return e.extend({"constructor":function(t,i){e.prototype.constructor.apply(this,arguments),console.warn('warning: "csui/widgets/search.results/impl/search.results.factory" has been deprecated. Use "csui/utils/contexts/factories/search.results.factory')}})}),csui.define("css!csui/widgets/search.results/impl/search.results",[],function(){}),csui.define("csui/utils/testutils/async.test.utils",["module","csui/lib/underscore","csui/lib/jquery","csui/models/view.state.model"],function(e,t,i,n){function o(e,n,o){var r,a,c=i.Deferred(),u=window.jasmine?window.jasmine.DEFAULT_TIMEOUT_INTERVAL:1e4,d={},h=0;if(u-=u/10,"number"==typeof o?d.interval=o:"boolean"==typeof o?d.removal=o:d=o,o=t.extend({"interval":50,"removal":!1,"length":0},d),e&&n)if(r=i(e).find(n),o.removal?r.length===o.length:r.length>o.length)c.resolve(r);else{var p=new Error('Waiting for element "'+n+'" timed out.');a=setInterval(function(){if(h+=o.interval,r=i(e).find(n),o.removal?r.length===o.length:r.length>o.length)s(a),c.resolve(r);else if(h>=u)throw p},o.interval),l.push(a)}else console.warn("parent or child selector missing"),c.reject();return c.promise()}function s(e){clearInterval(e),l=t.without(l,e)}var l=[];return{"asyncElement":o,"cancelAllAsync":function(){l.length>0&&console.error("Total "+l.length+" was running. Tests needs to be fixed."),l.forEach(function(e){clearInterval(e)}),l=[]},"restoreEnvironment":function(){i("body").empty(),n.clean()},"waitFor":function(e,n,o){void 0===o&&(o=1e3);var s=i.Deferred();if(e())s.resolve();else var l={"clear":function(){this.timeout&&(clearTimeout(this.timeout),delete this.timeout),this.interval&&(clearInterval(this.interval),delete this.interval)},"interval":setInterval(function(){e()&&(l.clear(),s.resolve())},100),"timeout":setTimeout(function(){l.clear(),s.reject(l.error)},o),"error":new Error(t.str.sformat("Timeout {0} reached while waiting for {1}.",o,n))};return s.promise()},"findHidingElement":function(e,t){if(!e)return null;var i=window.getComputedStyle(e),n=e.getBoundingClientRect(),o=n.x+n.width/2,s=n.y+n.height/2;if("none"===i.display)return e;if(0===n.width||0===n.height)return e;t=t||document.body;for(var l=e.parentElement;l;){var r=window.getComputedStyle(l),a=l.getBoundingClientRect(),c="clip"!==r["overflow-x"]&&"hidden"!==r["overflow-x"],u="clip"!==r["overflow-y"]&&"hidden"!==r["overflow-y"],d=c||a.width&&a.left<=o&&o<=a.right,h=u||a.height&&a.top<=s&&s<=a.bottom;if("none"===r.display)return l;if(!d||!h)return l;if(l===t)return;l=l.parentElement}},"isElementVisible":function(e,t){return void 0===this.findHidingElement(e,t)}}}),csui.define("csui/widgets/favorites2.table/toolbaritems",["csui/lib/underscore","i18n!csui/controls/tabletoolbar/nls/localized.strings","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","csui-ext!csui/widgets/favorites.table/toolbaritems"],function(e,t,i,n,o,s){"use strict";var l={"tableHeaderToolbar":new n({"info":[{"signature":"Properties","name":i.ToolbarItemInfo,"iconName":"csui_action_properties32"},{"signature":"DocPreview","name":i.ToolbarItemDocPreview,"commandData":{"ifNotOpenDelegate":!0}},{"signature":"CopyLink","name":i.ToolbarItemCopyLink}],"edit":[{"signature":"Edit","name":i.ToolbarItemEdit,"flyout":"edit","promoted":!0},{"signature":"EditActiveX","name":"EditActiveX","flyout":"edit"},{"signature":"EditOfficeOnline","name":"EditOfficeOnline","flyout":"edit"},{"signature":"EditWebDAV","name":"EditWebDAV","flyout":"edit"}],"share":[{"signature":"SendTo","name":i.ToolbarItemSendTo,"flyout":"sendto","group":"share"},{"signature":"Share","name":i.ToolbarItemShare,"flyout":"share","promoted":!0,"group":"share"},{"signature":"EmailLink","name":i.ToolbarItemEmailLink,"flyout":"sendto","promoted":!0,"group":"share"}],"main":[{"signature":"FavoriteRename","name":i.ToolbarItemRename,"onlyInTouchBrowser":!0},{"signature":"permissions","name":i.ToolbarItemPermissions},{"signature":"Download","name":i.ToolbarItemDownload},{"signature":"ReserveDoc","name":t.ToolbarItemReserve},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve},{"signature":"Lock","name":i.ToolbarItemLock},{"signature":"Unlock","name":i.ToolbarItemUnlock},{"signature":"Copy","name":i.ToolbarItemCopy},{"signature":"Move","name":i.ToolbarItemMove},{"signature":"AddVersion","name":i.ToolbarItemAddVersion},{"signature":"Collect","name":i.ToolbarCollect},{"signature":"ZipAndDownload","name":i.MenuItemZipAndDownload},{"signature":"CompoundDocument","name":i.compoundDocument,"flyout":"CompoundDocument"},{"signature":"CreateRelease","name":i.CreateRelease,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"CreateRevision","name":i.CreateRevision,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"Reorganize","name":i.Reorganize,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"ViewReleases","name":i.ToolbarItemViewReleases,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"}],"shortcut":[{"signature":"OriginalCopyLink","name":i.ToolbarItemOriginalCopyLink},{"signature":"OriginalEdit","name":i.ToolbarItemOriginalEdit},{"signature":"OriginalEmailLink","name":i.ToolbarItemOriginalShare},{"signature":"OriginalReserveDoc","name":t.ToolbarItemOriginalReserve},{"signature":"OriginalUnreserveDoc","name":t.ToolbarItemOriginalUnreserve},{"signature":"OriginalCopy","name":i.ToolbarItemOriginalCopy},{"signature":"OriginalMove","name":i.ToolbarItemOriginalMove},{"signature":"OriginalAddVersion","name":i.ToolbarItemAddVersion},{"signature":"OriginalDownload","name":i.ToolbarItemOriginalDownload}]},{"maxItemsShown":15,"dropDownText":i.ToolbarItemMore,"dropDownIconName":"csui_action_more32","addGroupSeparators":!1,"lazyActions":!0}),"inlineActionbar":new n({"info":[{"signature":"Properties","name":i.ToolbarItemInfo,"iconName":"csui_action_properties32"},{"signature":"DocPreview","name":i.ToolbarItemDocPreview,"iconName":"csui_action_preview32","commandData":{"ifNotOpenDelegate":!0}},{"signature":"CopyLink","name":i.ToolbarItemCopyLink,"iconName":"csui_action_copy_link32"}],"edit":[{"signature":"Edit","name":i.ToolbarItemEdit,"flyout":"edit","promoted":!0,"iconName":"csui_action_edit32"},{"signature":"EditActiveX","name":"EditActiveX","flyout":"edit"},{"signature":"EditOfficeOnline","name":"EditOfficeOnline","flyout":"edit"},{"signature":"EditWebDAV","name":"EditWebDAV","flyout":"edit"}],"share":[{"signature":"Share","name":i.MenuItemShare,"iconName":"csui_action_share32","flyout":"share"},{"signature":"SendTo","name":i.ToolbarItemSendTo,"iconName":"csui_action_send_to32","flyout":"sendto"},{"signature":"EmailLink","name":i.ToolbarItemEmailLink,"flyout":"sendto"}],"other":[{"signature":"permissions","name":i.ToolbarItemPermissions,"iconName":"csui_action_view_perms32"},{"signature":"FavoriteRename","name":i.ToolbarItemRenameFavorite,"iconName":"csui_action_rename32"},{"signature":"Download","name":i.ToolbarItemDownload,"iconName":"csui_action_download32"},{"signature":"ReserveDoc","name":t.ToolbarItemReserve,"iconName":"csui_action_reserve32"},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve,"iconName":"csui_action_unreserve32"},{"signature":"Lock","name":i.ToolbarItemLock,"iconName":"csui_action_reserve32"},{"signature":"Unlock","name":i.ToolbarItemUnlock,"iconName":"csui_action_unreserve32"},{"signature":"Copy","name":i.ToolbarItemCopy,"iconName":"csui_action_copy32"},{"signature":"Move","name":i.ToolbarItemMove,"iconName":"csui_action_move32"},{"signature":"AddVersion","name":i.ToolbarItemAddVersion,"iconName":"csui_action_add_version32"},{"signature":"Collect","name":i.ToolbarCollect,"iconName":"csui_action_collect32"},{"signature":"ZipAndDownload","name":i.MenuItemZipAndDownload,"iconName":"csui_action_download32"},{"signature":"CompoundDocument","name":i.compoundDocument,"flyout":"CompoundDocument","iconName":"csui_action_compound_document32"},{"signature":"CreateRelease","name":i.CreateRelease,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"CreateRevision","name":i.CreateRevision,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"Reorganize","name":i.Reorganize,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"ViewReleases","name":i.ToolbarItemViewReleases,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"}]},{"maxItemsShown":5,"dropDownText":i.ToolbarItemMore,"dropDownIconName":"csui_action_more32","addGroupSeparators":!1}),"dropdownMenuListInProperties":new n({"main":[{"signature":"Properties","name":i.ToolbarItemInformation},{"signature":"CopyLink","name":i.ToolbarItemCopyLink},{"signature":"Edit","name":i.ToolbarItemEdit},{"signature":"EmailLink","name":i.ToolbarItemEmailLinkShort},{"signature":"Download","name":i.ToolbarItemDownload},{"signature":"ReserveDoc","name":t.ToolbarItemReserve},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve},{"signature":"Copy","name":i.ToolbarItemCopy},{"signature":"Move","name":i.ToolbarItemMove},{"signature":"AddVersion","name":i.ToolbarItemAddVersion},{"signature":"Collect","name":i.ToolbarCollect},{"signature":"permissions","name":i.ToolbarItemPermissions}],"shortcut":[{"signature":"OriginalCopyLink","name":i.ToolbarItemOriginalCopyLink},{"signature":"OriginalEdit","name":i.ToolbarItemOriginalEdit},{"signature":"OriginalEmailLink","name":i.ToolbarItemOriginalShare},{"signature":"OriginalReserveDoc","name":t.ToolbarItemOriginalReserve},{"signature":"OriginalUnreserveDoc","name":t.ToolbarItemOriginalUnreserve},{"signature":"OriginalCopy","name":i.ToolbarItemOriginalCopy},{"signature":"OriginalMove","name":i.ToolbarItemOriginalMove},{"signature":"OriginalAddVersion","name":i.ToolbarItemAddVersion},{"signature":"OriginalDownload","name":i.ToolbarItemOriginalDownload}]},{"maxItemsShown":0,"dropDownIconName":"csui_action_caret_down32"})};return s&&e.each(s,function(t){e.each(t,function(t,i){var n=l[i];if(n||"otherToolbar"!==i||(n=l.tableHeaderToolbar),!n)throw new Error("Invalid target toolbar: "+i);e.each(t,function(e){e=new o(e),n.addItem(e)})})}),l}),csui.define("csui/widgets/favorites2.table/toolbaritems.masks",["module","csui/lib/underscore","csui/controls/toolbar/toolitems.mask","csui/utils/toolitem.masks/global.toolitems.mask"],function(e,t,i,n){"use strict";function o(){var o=e.config(),l=new n;this.toolbars=t.reduce(s,function(e,n){var s=new i(l,{"normalize":!1});return t.each(o,function(e,t){(e=e[n])&&s.extendMask(e)}),s.storeMask(),e[n]=s,e},{})}var s=["tableHeaderToolbar","inlineActionbar"];return o.toolbars=s,o}),csui.define("csui/widgets/recentlyaccessedtable/toolbaritems",["csui/lib/underscore","i18n!csui/controls/tabletoolbar/nls/localized.strings","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","csui-ext!csui/widgets/recentlyaccessedtable/toolbaritems"],function(e,t,i,n,o,s){"use strict";var l={"filterToolbar":new n({"filter":[{"signature":"Filter","name":i.ToolbarItemFilter,"iconName":"csui_action_filter32"}]},{"addTrailingDivider":!1}),"tableHeaderToolbar":new n({"info":[{"signature":"Properties","name":i.ToolbarItemInfo,"iconName":"csui_action_properties32"},{"signature":"CopyLink","name":i.ToolbarItemCopyLink}],"edit":[{"signature":"Edit","name":i.ToolbarItemEdit,"flyout":"edit","promoted":!0},{"signature":"EditActiveX","name":"EditActiveX","flyout":"edit"},{"signature":"EditOfficeOnline","name":"EditOfficeOnline","flyout":"edit"},{"signature":"EditWebDAV","name":"EditWebDAV","flyout":"edit"}],"share":[],"main":[{"signature":"permissions","name":i.ToolbarItemPermissions},{"signature":"Download","name":i.ToolbarItemDownload},{"signature":"ReserveDoc","name":t.ToolbarItemReserve},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve},{"signature":"Lock","name":i.ToolbarItemLock},{"signature":"Unlock","name":i.ToolbarItemUnlock},{"signature":"Copy","name":i.ToolbarItemCopy},{"signature":"Move","name":i.ToolbarItemMove},{"signature":"AddVersion","name":i.ToolbarItemAddVersion},{"signature":"Collect","name":i.ToolbarCollect},{"signature":"ZipAndDownload","name":i.MenuItemZipAndDownload},{"signature":"CompoundDocument","name":i.compoundDocument,"flyout":"CompoundDocument"},{"signature":"CreateRelease","name":i.CreateRelease,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"CreateRevision","name":i.CreateRevision,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"Reorganize","name":i.Reorganize,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"ViewReleases","name":i.ToolbarItemViewReleases,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"}],"shortcut":[{"signature":"OriginalCopyLink","name":i.ToolbarItemOriginalCopyLink},{"signature":"OriginalEdit","name":i.ToolbarItemOriginalEdit},{"signature":"OriginalEmailLink","name":i.ToolbarItemOriginalShare},{"signature":"OriginalReserveDoc","name":t.ToolbarItemOriginalReserve},{"signature":"OriginalUnreserveDoc","name":t.ToolbarItemOriginalUnreserve},{"signature":"OriginalCopy","name":i.ToolbarItemOriginalCopy},{"signature":"OriginalMove","name":i.ToolbarItemOriginalMove},{"signature":"OriginalAddVersion","name":i.ToolbarItemAddVersion},{"signature":"OriginalDownload","name":i.ToolbarItemOriginalDownload}]},{"maxItemsShown":5,"dropDownIconName":"csui_action_more32","addGroupSeparators":!1}),"inlineActionbar":new n({"info":[{"signature":"Properties","name":i.ToolbarItemInfo,"iconName":"csui_action_properties32"},{"signature":"CopyLink","name":i.ToolbarItemCopyLink,"iconName":"csui_action_copy_link32"}],"edit":[{"signature":"Edit","name":i.ToolbarItemEdit,"iconName":"csui_action_edit32"}],"share":[{"signature":"Share","name":i.MenuItemShare,"iconName":"csui_action_share32","flyout":"share"}],"other":[{"signature":"permissions","name":i.ToolbarItemPermissions,"iconName":"csui_action_view_perms32"},{"signature":"Download","name":i.ToolbarItemDownload,"iconName":"csui_action_download32"},{"signature":"ReserveDoc","name":t.ToolbarItemReserve,"iconName":"csui_action_reserve32"},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve,"iconName":"csui_action_unreserve32"},{"signature":"Lock","name":i.ToolbarItemLock,"iconName":"csui_action_reserve32"},{"signature":"Unlock","name":i.ToolbarItemUnlock,"iconName":"csui_action_unreserve32"},{"signature":"Copy","name":i.ToolbarItemCopy,"iconName":"csui_action_copy32"},{"signature":"Move","name":i.ToolbarItemMove,"iconName":"csui_action_move32"},{"signature":"AddVersion","name":i.ToolbarItemAddVersion,"iconName":"csui_action_add_version32"},{"signature":"Collect","name":i.ToolbarCollect,"iconName":"csui_action_collect32"},{"signature":"ZipAndDownload","name":i.MenuItemZipAndDownload,"iconName":"csui_action_download32"},{"signature":"CompoundDocument","name":i.compoundDocument,"flyout":"CompoundDocument","iconName":"csui_action_compound_document32"},{"signature":"CreateRelease","name":i.CreateRelease,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"CreateRevision","name":i.CreateRevision,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"Reorganize","name":i.Reorganize,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"},{"signature":"ViewReleases","name":i.ToolbarItemViewReleases,"subItemOf":"CompoundDocument","flyout":"CompoundDocument"}]},{"maxItemsShown":5,"dropDownText":i.ToolbarItemMore,"dropDownIconName":"csui_action_more32","addGroupSeparators":!1}),"dropdownMenuListInProperties":new n({"main":[{"signature":"Properties","name":i.ToolbarItemInformation},{"signature":"CopyLink","name":i.ToolbarItemCopyLink},{"signature":"Edit","name":i.ToolbarItemEdit},{"signature":"EmailLink","name":i.ToolbarItemEmailLinkShort},{"signature":"Download","name":i.ToolbarItemDownload},{"signature":"ReserveDoc","name":t.ToolbarItemReserve},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve},{"signature":"Copy","name":i.ToolbarItemCopy},{"signature":"Move","name":i.ToolbarItemMove},{"signature":"AddVersion","name":i.ToolbarItemAddVersion},{"signature":"Collect","name":i.ToolbarCollect}],"shortcut":[{"signature":"OriginalCopyLink","name":i.ToolbarItemOriginalCopyLink},{"signature":"OriginalEdit","name":i.ToolbarItemOriginalEdit},{"signature":"OriginalEmailLink","name":i.ToolbarItemOriginalShare},{"signature":"OriginalReserveDoc","name":t.ToolbarItemOriginalReserve},{"signature":"OriginalUnreserveDoc","name":t.ToolbarItemOriginalUnreserve},{"signature":"OriginalCopy","name":i.ToolbarItemOriginalCopy},{"signature":"OriginalMove","name":i.ToolbarItemOriginalMove},{"signature":"OriginalAddVersion","name":i.ToolbarItemAddVersion},{"signature":"OriginalDownload","name":i.ToolbarItemOriginalDownload}]},{"maxItemsShown":0,
"dropDownIconName":"csui_action_caret_down32"})};return s&&e.each(s,function(t){e.each(t,function(t,i){var n=l[i];if(n||"otherToolbar"!==i||(n=l.tableHeaderToolbar),!n)throw new Error("Invalid target toolbar: "+i);e.each(t,function(e){e=new o(e),n.addItem(e)})})}),l}),csui.define("csui/widgets/recentlyaccessedtable/toolbaritems.masks",["module","csui/lib/underscore","csui/controls/toolbar/toolitems.mask","csui/utils/toolitem.masks/global.toolitems.mask"],function(e,t,i,n){"use strict";function o(){var o=e.config(),l=new n;this.toolbars=t.reduce(s,function(e,n){var s=new i(l,{"normalize":!1});return t.each(o,function(e,t){(e=e[n])&&s.extendMask(e)}),s.storeMask(),e[n]=s,e},{})}var s=["tableHeaderToolbar","inlineActionbar"];return o.toolbars=s,o}),csui.define("csui/widgets/favorites2.table/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/favorites2.table/impl/nls/root/lang",{"dialogTitle":"Favorites","deleteGroupConfirmationTitle":"Delete group","deleteGroupConfirmationText":'Are you sure you want to delete group "{0}"? All the favored items in this group will also be deleted.',"deleteGroupButtonLabel":"Delete","deleteGroupButtonAria":"Delete favorite group","emptyGroupText":"Adding content to your Favorites list makes it a breeze to find.","editGroupButtonLabel":"Edit","editGroupButtonAria":"Edit favorite group name","errorFavoritesSaveFailed":"Saving favorites failed.","errorFavoriteGroupSaveFailed":"Saving favorites group failed.","favoriteColumnNameTitle":"Favorite name","favoritesGroupAria":"{0}, Favorites Group","favoritesEmptyGroupAria":"{0}, Empty Favorites Group","favoriteGroupsNavAria":"Favorites Groups","fav_ungrouped":"Ungrouped","fav_ungroupedAria":"Ungrouped favorites","groupAdd":"Add group","groupAddButtonTitle":"Add a new favorites group","groupHint1":"To personalize the Favorites tile, you can push your favorite group to the top.","groupHint2":"You can also re-order items within the groups, so that your most favorite items appear at the top of the Favorites tile.","addFav":"Add Favorite","removeFav":"Remove Favorite","updateFavoriteFailTitle":"Update Favorite","updateFavoriteFailMessage":'Failed to update favorite for node "{0}". \n\n{1}',"addFavoriteNameLabel":"Favorite name","addFavoriteNamePlaceHolder":"Enter name","addFavoriteGroupLabel":"Group","addFavoriteAddButtonLabel":"Add","addFavoriteCancelButtonLabel":"Cancel","addFavoriteCancelButtonAria":"Cancel editing favorite group name","nameErrorMaxLengthExceed":"Name cannot be longer than 248 characters.","nameErrorContainSemiColon":"Name cannot contain a colon.","startEditMode":"Edit","endEditMode":"Done","favoritesTableAria":"Favorites"}),csui.define("hbs!csui/widgets/favorites2.table/impl/favorites2.groups.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button title="'+e.escapeExpression((s=null!=(s=l(i,"groupAddButtonTitle")||(null!=t?l(t,"groupAddButtonTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"groupAddButtonTitle","hash":{},"loc":{"start":{"line":1,"column":15},"end":{"line":1,"column":38}}}):s))+'" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"groupAddButtonTitle")||(null!=t?l(t,"groupAddButtonTitle"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"groupAddButtonTitle","hash":{},"loc":{"start":{"line":1,"column":52},"end":{"line":1,"column":75}}}):s))+'" class="binf-btn csui-groups-header-plus">\r\n  <span class="icon icon-toolbarAdd"></span>\r\n</button><span class="csui-groups-header-text">'+e.escapeExpression((s=null!=(s=l(i,"text")||(null!=t?l(t,"text"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"text","hash":{},"loc":{"start":{"line":3,"column":47},"end":{"line":3,"column":55}}}):s))+'</span>\r\n<button\r\n    class="binf-btn csui-groups-header-edit-mode csui-groups-header-edit-on">'+e.escapeExpression((s=null!=(s=l(i,"startEditMode")||(null!=t?l(t,"startEditMode"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"startEditMode","hash":{},"loc":{"start":{"line":5,"column":77},"end":{"line":5,"column":94}}}):s))+'</button>\r\n<button\r\n    class="binf-btn csui-groups-header-edit-mode csui-groups-header-edit-off">'+e.escapeExpression((s=null!=(s=l(i,"endEditMode")||(null!=t?l(t,"endEditMode"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"endEditMode","hash":{},"loc":{"start":{"line":7,"column":78},"end":{"line":7,"column":93}}}):s))+"</button>\r\n"}});return i.registerPartial("csui_widgets_favorites2.table_impl_favorites2.groups.header",n),n}),csui.define("css!csui/widgets/favorites2.table/impl/favorites2.groups.header.view",[],function(){}),csui.define("csui/widgets/favorites2.table/impl/favorites2.groups.header.view",["module","csui/lib/marionette","i18n!csui/widgets/favorites2.table/impl/nls/lang","hbs!csui/widgets/favorites2.table/impl/favorites2.groups.header","css!csui/widgets/favorites2.table/impl/favorites2.groups.header.view"],function(e,t,i,n){"use strict";return t.ItemView.extend({"className":"csui-favorite-groups-header","template":n,"initialize":function(e){this._useEditMode=e&&e.useEditMode,this._isGroupsEditing=!1},"ui":{"addButton":".csui-groups-header-plus","editModeOn":".csui-groups-header-edit-on","editModeOff":".csui-groups-header-edit-off"},"events":{"click @ui.addButton":"_addItem","click @ui.editModeOn":"_switchEditModeOn","click @ui.editModeOff":"_switchEditModeOff"},"templateHelpers":function(){return{"groupAddButtonTitle":i.groupAddButtonTitle,"text":i.groupAdd,"startEditMode":i.startEditMode,"endEditMode":i.endEditMode,"hasEditModeSwitch":this._useEditMode}},"_addItem":function(e){e.preventDefault(),e.stopPropagation(),this.triggerMethod("add:item")},"_switchEditModeOn":function(e){e.preventDefault(),e.stopPropagation(),this.triggerMethod("toggleEditMode:on")},"_switchEditModeOff":function(e){e.preventDefault(),e.stopPropagation(),this.triggerMethod("toggleEditMode:off")},"isAddEnabled":function(e){return void 0!==e&&(this._isAddEnabled=e,e?this.ui.addButton.removeClass("binf-disabled"):this.ui.addButton.addClass("binf-disabled")),!!this._isAddEnabled}})}),csui.define("hbs!csui/widgets/favorites2.table/impl/favorites2.group",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <input type="text" value="'+e.escapeExpression((l=null!=(l=r(i,"name")||(null!=t?r(t,"name"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":2,"column":28},"end":{"line":2,"column":36}}}):l))+'" placeholder="'+e.escapeExpression((l=null!=(l=r(i,"namePlaceholder")||(null!=t?r(t,"namePlaceholder"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"namePlaceholder","hash":{},"loc":{"start":{"line":2,"column":51},"end":{"line":2,"column":70}}}):l))+'"\r\n         class="binf-flex-row binf-form-control csui-favorite-group-input-name">\r\n  <button type="button" class="csui-btn-save" disabled title="'+e.escapeExpression((l=null!=(l=r(i,"SaveEditTooltip")||(null!=t?r(t,"SaveEditTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"SaveEditTooltip","hash":{},"loc":{"start":{"line":4,"column":62},"end":{"line":4,"column":81}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"SaveEditTooltip")||(null!=t?r(t,"SaveEditTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"SaveEditTooltip","hash":{},"loc":{"start":{"line":4,"column":95},"end":{"line":4,"column":114}}}):l))+'">\r\n    '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"normal","iconName":"csui_action_confirm32"},"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":78}}}))?s:"")+'\r\n  </button>\r\n  <button type="button" class="csui-btn-cancel" title="'+e.escapeExpression((l=null!=(l=r(i,"EditCancelTooltip")||(null!=t?r(t,"EditCancelTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"EditCancelTooltip","hash":{},"loc":{"start":{"line":7,"column":55},"end":{"line":7,"column":76}}}):l))+'"\r\n          aria-label="'+e.escapeExpression((l=null!=(l=r(i,"EditCancelTooltip")||(null!=t?r(t,"EditCancelTooltip"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"EditCancelTooltip","hash":{},"loc":{"start":{"line":8,"column":22},"end":{"line":8,"column":43}}}):l))+'">\r\n    '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","size":"normal","iconName":"csui_action_cancel32"},"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":77}}}))?s:"")+"\r\n  </button>\r\n"},"3":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-favorite-group-selection-marker"></div>\r\n  <div class="csui-favorite-group-draggable-handle">\r\n    <span class=" icon icon-draggable-handle"></span>\r\n  </div>\r\n  <a role="button" href="#" class="binf-flex-row csui-favorite-group-name-link" aria-label="'+e.escapeExpression((s=null!=(s=l(i,"groupNameAria")||(null!=t?l(t,"groupNameAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"groupNameAria","hash":{},"loc":{"start":{"line":16,"column":92},"end":{"line":16,"column":109}}}):s))+'" title="'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":16,"column":118},"end":{"line":16,"column":126}}}):s))+'"\r\n     tabindex="'+e.escapeExpression((s=null!=(s=l(i,"tabindex")||(null!=t?l(t,"tabindex"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"tabindex","hash":{},"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":27}}}):s))+'">\r\n    <span class="csui-favorite-group-name">'+e.escapeExpression((s=null!=(s=l(i,"name")||(null!=t?l(t,"name"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"name","hash":{},"loc":{"start":{"line":18,"column":43},"end":{"line":18,"column":51}}}):s))+'</span>\r\n  </a>\r\n  <button type="button" class="binf-btn csui-btn-action csui-btn-edit-start"\r\n          aria-label="'+e.escapeExpression((s=null!=(s=l(i,"EditStartAria")||(null!=t?l(t,"EditStartAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"EditStartAria","hash":{},"loc":{"start":{"line":21,"column":22},"end":{"line":21,"column":39}}}):s))+'" tabindex="'+e.escapeExpression((s=null!=(s=l(i,"tabindex")||(null!=t?l(t,"tabindex"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"tabindex","hash":{},"loc":{"start":{"line":21,"column":51},"end":{"line":21,"column":63}}}):s))+'">\r\n    <span class="icon icon-edit" title="'+e.escapeExpression((s=null!=(s=l(i,"EditStartTooltip")||(null!=t?l(t,"EditStartTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"EditStartTooltip","hash":{},"loc":{"start":{"line":22,"column":40},"end":{"line":22,"column":60}}}):s))+'"></span>\r\n  </button>\r\n  <button type="button" class="binf-btn csui-btn-action csui-btn-delete"\r\n          aria-label="'+e.escapeExpression((s=null!=(s=l(i,"DeleteAria")||(null!=t?l(t,"DeleteAria"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"DeleteAria","hash":{},"loc":{"start":{"line":25,"column":22},"end":{"line":25,"column":36}}}):s))+'" tabindex="'+e.escapeExpression((s=null!=(s=l(i,"tabindex")||(null!=t?l(t,"tabindex"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"tabindex","hash":{},"loc":{"start":{"line":25,"column":48},"end":{"line":25,"column":60}}}):s))+'">\r\n    <span class="icon icon-circle-close" title="'+e.escapeExpression((s=null!=(s=l(i,"DeleteTooltip")||(null!=t?l(t,"DeleteTooltip"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"DeleteTooltip","hash":{},"loc":{"start":{"line":26,"column":48},"end":{"line":26,"column":65}}}):s))+'"></span>\r\n  </button>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isRename"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.program(3,o,0),"loc":{"start":{"line":1,"column":0},"end":{"line":28,"column":7}}}))?s:""}});return i.registerPartial("csui_widgets_favorites2.table_impl_favorites2.group",n),n}),csui.define("css!csui/widgets/favorites2.table/impl/favorites2.groups.view",[],function(){}),csui.define("csui/widgets/favorites2.table/impl/favorites2.group.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/lib/hammer","csui/utils/log","csui/utils/base","csui/dialogs/modal.alert/modal.alert","hbs!csui/widgets/favorites2.table/impl/favorites2.group","i18n!csui/widgets/favorites2.table/impl/nls/lang","css!csui/widgets/favorites2.table/impl/favorites2.groups.view"],function(e,t,i,n,o,s,l,r,a,c){"use strict";return n.ItemView.extend({"className":"csui-favorite-group","template":a,"tagName":"li","initialize":function(e){this.parent=e.parent,this.groupsView=e.groupsView,this._dragData=e.dragData,this._useEditMode=e.useEditMode,this._dragAndDropEnabled=e.dragAndDropEnabled},"ui":{"groupNameButton":".csui-favorite-group-name-link","nameInput":".csui-favorite-group-input-name","saveButton":".csui-btn-save","cancelButton":".csui-btn-cancel","startEditButton":".csui-btn-edit-start","deleteButton":".csui-btn-delete"},"templateHelpers":function(){var e=this.model.get("name");return{"tabindex":this.model.get("isTabable")&&!this._isReadonly()?"0":"-1","isRename":this.model.get("isRename"),"name":e,"groupNameAria":e==c.fav_ungrouped?c.fav_ungroupedAria:i.str.sformat(c.favoritesGroupAria,e),"namePlaceholder":c.addFavoriteNamePlaceHolder,"EditCancelTooltip":c.addFavoriteCancelButtonLabel,"EditCancelAria":c.addFavoriteCancelButtonAria,"SaveEditTooltip":c.addFavoriteAddButtonLabel,"EditStartTooltip":c.editGroupButtonLabel,"EditStartAria":c.editGroupButtonAria,"DeleteTooltip":c.deleteGroupButtonLabel,"DeleteAria":c.deleteGroupButtonAria}},"modelEvents":{"change":"render"},"onRender":function(){var e=this.className;this.model.get("isSelected")&&(e+=" binf-active");var t=this.model.get("isSingleGroupEditing"),i=this.model.get("isRename");i&&(e+=" csui-favorite-group-rename");var n=this._isReadonly();n&&(e+=" csui-favorite-group-readonly"),this.dragStarted&&(e+=" csui-dragstarted");var o=!(n||i||t||this._useEditMode||this.dragStarted||!this._dragAndDropEnabled);this.$el.attr("draggable",o),this.$el.find("a.csui-favorite-group-name-link").attr("draggable",o),this.$el.attr("class",e),!this._useEditMode||n||i||this._assignTouchControl(),this.model.isNew()&&this.model.get("isRename")&&this._startEditing()},"onDomRefresh":function(){if(this.model.isNew()||this.model.get("isRename"))this.ui.nameInput.trigger("focus"),this._hasFocus=!0;else if(this._hasFocus&&this.isRendered){var e=this;setTimeout(function(){e.isRendered&&(e.model.set("isTabable",!0),e._setFocus())},100)}},"onDestroy":function(){this.hammer&&this.hammer.destroy()},"_startDragOperation":function(){this._dragData.clear();var e=this.model.get("tab_id");return-1!==e&&(this._dragData.set("groupId",e),this.dragStarted=!0,!0)},"_stopDragOperation":function(){this.dragStarted=!1,this._dragData.clear(),this._removeDragline(),this._removeDragStarted()},"_moveItemsToThisGroup":function(){var e,i=this.model.get("tab_id");if(void 0!==i){if(!this.model.get("isGroupsEditing")&&this._dragData.get("favorites")&&this._dragData.get("favorites").length&&void 0!==this._dragData.get("groupId"))return e={"idSources":this._dragData.get("favorites"),"tabIdSource":this._dragData.get("groupId"),"tabIdDestination":i},this.trigger("dropped:favorite",e),e.savePromise;if(void 0!==this._dragData.get("groupId"))return e={"tabIdSource":this._dragData.get("groupId"),"tabIdDestination":i,"dropAfter":this._dropAfter},this.trigger("group:dropped",e),e.savePromise;var n=t.Deferred();return n.reject(),n.promise()}},"_selectThisGroup":function(){var e={"groupModel":this.model};this.triggerMethod("before:group:selected",e),e.cancel||this.triggerMethod("group:selected",e)},"_isReadonly":function(){return-1===this.model.get("tab_id")||this.model.get("isReadonly")},"isSaveEnabled":function(e){return e=e.trim(),!(!e.length||e===this.model.get("name"))},"events":{"click @ui.cancelButton":function(e){e.preventDefault(),e.stopPropagation(),this._cancelEdit()},"click @ui.startEditButton":function(e){e.preventDefault(),e.stopPropagation(),this._startEditing()},"click @ui.deleteButton":function(e){e.preventDefault(),e.stopPropagation();var t=this,n=this.model.get("name");r.confirmQuestion(i.str.sformat(c.deleteGroupConfirmationText,n),c.deleteGroupConfirmationTitle,{"buttons":r.OkCancel}).fail(function(){t._setFocus()}).done(function(e){t.triggerMethod("group:delete",{"model":t.model})})},"focus @ui.groupNameButton":function(e){this._hasFocus=!0,this.trigger("group:focused")},"focus @ui.startEditButton":function(e){this._hasStartEditButtonFocus=!0},"focusout @ui.startEditButton":function(e){this._hasStartEditButtonFocus=!1},"focus @ui.deleteButton":function(e){this._hasDeleteButtonFocus=!0},"focusout @ui.deleteButton":function(e){this._hasDeleteButtonFocus=!1},"click @ui.saveButton":function(e){this._save()},"input @ui.nameInput":function(e){if(this.ui.saveButton.length){var t=(this.ui.nameInput.val().trim(),!1);t=this.isSaveEnabled(e.target.value),this.ui.saveButton.prop("disabled",!t)}this.refreshTabableElements()},"keydown @ui.nameInput":function(e){switch(e.keyCode){case 13:e.preventDefault(),e.stopPropagation(),this._save();break;case 27:e.preventDefault(),e.stopPropagation(),this._cancelEdit()}},"keydown":function(e){var t=this.model.get("tab_id"),i=this.model.get("isRename"),n=l.isMacintosh();switch(e.keyCode){case 9:i&&this._moveTab(e);break;case 88:(n&&e.metaKey&&!e.ctrlKey||!n&&!e.metaKey&&e.ctrlKey)&&(e.preventDefault(),e.stopPropagation(),this._dragData.unset("favorites"),-1===t?this._dragData.unset("favorites"):this._dragData.set({"groupId":t}));break;case 86:if(n&&e.metaKey&&!e.ctrlKey||!n&&!e.metaKey&&e.ctrlKey){e.preventDefault(),e.stopPropagation();if(t===this._dragData.get("groupId"))return;this._dropAfter=!1;var o=this;this._moveItemsToThisGroup().then(function(){o._selectThisGroup()})}break;case 37:this._hasFocus&&!i&&(this._hasStartEditButtonFocus?(e.preventDefault(),e.stopPropagation(),this.ui.groupNameButton.trigger("focus")):this._hasDeleteButtonFocus&&(e.preventDefault(),e.stopPropagation(),this.ui.startEditButton.trigger("focus")));break;case 39:this._hasFocus&&!i&&(this._hasStartEditButtonFocus?(e.preventDefault(),e.stopPropagation(),this.ui.deleteButton.trigger("focus")):this._hasDeleteButtonFocus||(e.preventDefault(),e.stopPropagation(),this.ui.startEditButton.trigger("focus")))}},"click":function(e){if(!e.ctrlKey){if(e.preventDefault(),this.model.isNew()||this.model.get("isRename")||this.model.get("isGroupsEditing"))return;this._selectThisGroup()}},"dragstart":function(e){this._startDragOperation()&&e.originalEvent.dataTransfer.setData("text","")},"dragover":function(e){if(!this.dragStarted){var t=this.model.get("tab_id");if(void 0!==t)if(this._dragData.get("favorites")&&0!==this._dragData.get("favorites").length){if(this._dragData.get("favorites")&&this._dragData.get("favorites").length){if(this._dragData.get("groupId")===t)return;this.$el.addClass("csui-dragover"),e.preventDefault()}}else{var i=this.$el.height(),n=this.model.get("tab_id"),o=e.offsetY>i/2;this._moveNotPossible(this.model.collection,this._dragData.get("groupId"),n,o)?(this._removeDragline(),this._dropAfter=void 0,e.preventDefault()):o?-1===n?(this._removeDragline(),this._dropAfter=void 0):(void 0!==this._dropAfter&&!1!==this._dropAfter||(this._removeDragline(),this.$el.after('<div class="csui-favorite-group csui-dragline">'),this._dropAfter=!0),e.preventDefault()):(void 0!==this._dropAfter&&!0!==this._dropAfter||(this._removeDragline(),this.$el.before('<div class="csui-favorite-group csui-dragline">'),this._dropAfter=!1),e.preventDefault())}}},"drop":function(e){this.$el.removeClass("csui-dragover"),e.preventDefault(),this._moveItemsToThisGroup(),this._removeDragline()},"dragleave":function(e){this._removeDragline(),this.$el.removeClass("csui-dragover")},"dragend":function(e){e.preventDefault(),this._stopDragOperation()}},"refreshTabableElements":function(){this.tabableElements=this.$el.find("input:not([disabled]),  button:not([disabled])").filter(":visible").toArray()},"_moveTab":function(e){this.currentlyFocusedElementIndex=this.tabableElements.indexOf(e.target),e.shiftKey?this.currentlyFocusedElementIndex>0?(this.currentlyFocusedElementIndex-=1,t(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):(this.currentlyFocusedElementIndex=this.tabableElements.length-1,t(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):this.currentlyFocusedElementIndex<this.tabableElements.length-1?(this.currentlyFocusedElementIndex+=1,t(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")):(this.currentlyFocusedElementIndex=0,t(this.tabableElements[this.currentlyFocusedElementIndex]).trigger("focus")),e.stopPropagation(),e.preventDefault()},"_cancelEdit":function(){this.model.isNew()?this.triggerMethod("group:delete",{"model":this.model}):(this.model.set("isRename",!1),this.trigger("group:finished:editing"))},"_moveNotPossible":function(e,t,i,n){var o={"idSource":t,"idDestination":i,"moveAfterDestination":n};return this.trigger("group:before:dropped",o),o.cancel},"_setFocus":function(){var e=this;t(document).ready(function(){e.ui.groupNameButton.length&&e.ui.groupNameButton.trigger("focus")})},"_assignTouchControl":function(){this.hammer&&this.hammer.destroy();var e=this.model.get("isGroupsEditing");if(this.$el.length>0&&!e){this.hammer=new o.Manager(this.$el[0]);var t=new o.Press({"time":500});this.hammer.add([t]),this.hammer.on("press",i.bind(this._onPress,this))}},"_onPress":function(){this._startEditing()},"_startEditing":function(){this.model.set("isRename",!0),this.trigger("group:editing",{"model":this.model}),this.refreshTabableElements()},"_save":function(){var e=this.ui.nameInput.val();e&&(this.model.set("name",e),this.triggerMethod("group:changed",{"model":this.model}))},"_removeDragline":function(){this.parent.$el.find(".csui-favorite-group.csui-dragline").remove(),delete this._dropAfter},"_removeDragStarted":function(){this.parent.$el.find(".csui-dragstarted").removeClass("csui-dragstarted")}})}),csui.define("css!csui/widgets/favorites2.table/impl/favorites2.groups.rows.view",[],function(){}),csui.define("csui/widgets/favorites2.table/impl/favorites2.groups.rows.view",["module","csui/lib/jquery","csui/lib/marionette","csui/widgets/favorites2.table/impl/favorites2.group.view","css!csui/widgets/favorites2.table/impl/favorites2.groups.rows.view"],function(e,t,i,n){"use strict";return i.CollectionView.extend({"className":"csui-favorite-groups-rows csui-normal-scrolling","tagName":"ul","childView":n,"childViewOptions":function(){return{"parent":this,"groupsView":this.options.parent,"groupsViewStateModel":this.options.groupsViewStateModel,"dragData":this.options.dragData,"useEditMode":this._useEditMode,"dragAndDropEnabled":this.options.dragAndDropEnabled}},"initialize":function(e){this._useEditMode=e&&e.useEditMode},"events":{"focusout":function(e){e.relatedTarget&&0==t.contains(this.el,e.relatedTarget)&&this.trigger("groups:focusout")}}})}),csui.define("hbs!csui/widgets/favorites2.table/impl/favorites2.groups.footer",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'    <p class="csui-groups-footer-text">'+e.escapeExpression(e.lambda(t,t))+"</p>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-groups-footer-wrapper binf-hidden">\r\n'+(null!=(s=l(i,"each").call(null!=t?t:e.nullContext||{},null!=t?l(t,"texts"):t,{"name":"each","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":2},"end":{"line":4,"column":11}}}))?s:"")+"</div>"}});return i.registerPartial("csui_widgets_favorites2.table_impl_favorites2.groups.footer",n),n}),csui.define("css!csui/widgets/favorites2.table/impl/favorites2.groups.footer.view",[],function(){}),csui.define("csui/widgets/favorites2.table/impl/favorites2.groups.footer.view",["module","csui/lib/marionette","csui/utils/contexts/factories/favorite2groups","i18n!csui/widgets/favorites2.table/impl/nls/lang","hbs!csui/widgets/favorites2.table/impl/favorites2.groups.footer","css!csui/widgets/favorites2.table/impl/favorites2.groups.footer.view"],function(e,t,i,n,o){"use strict";return t.ItemView.extend({"className":"csui-favorite-groups-footer","template":o,"initialize":function(){this.groups=this.options.groups||this.context.getCollection(i,{"detached":!0,"permanent":!0}),this.listenTo(this.groups,"reset",this._groupsChanged),this.listenTo(this.groups,"update",this._groupsChanged)},"templateHelpers":function(){return{"texts":[n.groupHint1,n.groupHint2]}},"_groupsChanged":function(){this.groups.length>1?this.$el.find(".csui-groups-footer-wrapper").addClass("binf-hidden"):this.$el.find(".csui-groups-footer-wrapper").removeClass("binf-hidden")}})}),csui.define("hbs!csui/widgets/favorites2.table/impl/favorites2.groups",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-favorite-groups-header-region"></div>\r\n<div class="csui-favorite-groups-rows-region binf-flex-column"></div>\r\n<div class="csui-favorite-groups-footer-region"></div>'}});return i.registerPartial("csui_widgets_favorites2.table_impl_favorites2.groups",n),n}),csui.define("csui/widgets/favorites2.table/impl/favorites2.groups.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/controls/globalmessage/globalmessage","csui/utils/contexts/factories/favorite2groups","csui/models/favorite2group","csui/widgets/favorites2.table/impl/favorites2.groups.header.view","csui/widgets/favorites2.table/impl/favorites2.groups.rows.view","csui/widgets/favorites2.table/impl/favorites2.groups.footer.view","csui/controls/progressblocker/blocker","i18n!csui/widgets/favorites2.table/impl/nls/lang","hbs!csui/widgets/favorites2.table/impl/favorites2.groups","css!csui/widgets/favorites2.table/impl/favorites2.groups.view"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f){"use strict";return o.LayoutView.extend({"className":"csui-favorite-groups","template":f,"ui":{},"regions":{"headerRegion":".csui-favorite-groups-header-region","rowsRegion":".csui-favorite-groups-rows-region","footerRegion":".csui-favorite-groups-footer-region"},"constructor":function t(n){n||(n={});e.config();i.defaults(n,{}),t.__super__.constructor.call(this,n),this.options.blockingParentView?p.delegate(this,this.options.blockingParentView):p.imbue(this)},"initialize":function(){var e=this;this.collection=this.options.collection||this.context.getCollection(a,{"detached":!0,"permanent":!0}),this._useEditMode=l.isTouchBrowser(),this._isSingleGroupEditing=!1,this._isGroupsEditing=!1,this._dragData=this.options.dragData,this.options.collection&&(this.collection.fetched=!1),this.listenTo(this.collection,"reset",function(){this.collection.each(function(e,t){t>0?e.set("isTabable",!1):e.set("isTabable",!0)})}),this.headerView=new u({"useEditMode":this._useEditMode}),this.rowsView=new d({"dragData":this._dragData,"parent":this,"collection":this.collection,"sort":!0,"useEditMode":this._useEditMode,"dragAndDropEnabled":this.options.dragAndDropEnabled}),this.footerView=new h({"groups":this.collection}),this.listenTo(this.rowsView,"childview:group:focused",function(e){this._setFocusAtView(e)}),this.listenTo(this.rowsView,"groups:focusout",function(){this.$el.find(".csui-favorite-group.csui-in-focus").removeClass("csui-in-focus"),this.$el.removeClass("csui-favorite-groups-has-group-in-focus"),this.rowsView.children.each(function(e){delete e._hasFocus})}),this.listenTo(this.rowsView,"childview:before:group:selected",function(e,t){this._isSingleGroupEditing?t.cancel=!0:this.triggerMethod("before:group:selected",e)}),this.listenTo(this.rowsView,"childview:group:selected",function(e,t){this._modelOfNewlySelectedGroup(e)&&(this.triggerMethod("group:selected",e),this.selectGroup(e),this._tryReSetFocus())}),this.listenTo(this.rowsView,"childview:group:before:dropped",function(e,t){this._checkMoveNotPossible(t.idSource,t.idDestination,t.moveAfterDestination)&&(t.cancel=!0)}),this.listenTo(this.rowsView,"childview:group:dropped",function(e,t){this.triggerMethod("group:dropped",t)}),this.listenTo(this.rowsView,"childview:dropped:favorite",function(e,t){this.triggerMethod("dropped:favorite",t)}),this.listenTo(this.rowsView,"childview:group:editing",function(e,t){this._setSingleGroupEditingMode(e)}),this.listenTo(this.rowsView,"childview:group:changed",function(e,i){var n=i.model;this._saveGroup(n),this._setSingleGroupEditingMode(!1),this._setGroupsEditingMode(!1);var o=this;t(document).ready(function(){o._tryReSetFocus(n)})}),this.listenTo(this.rowsView,"childview:group:delete",function(t,i){var n=i.model;n.isNew()?(n.destroy(),e._setSingleGroupEditingMode(!1),e._setGroupsEditingMode(!1),e.triggerMethod("group:deleted",n)):n.destroy({"wait":!0}).then(function(){e._setSingleGroupEditingMode(!1),e._setGroupsEditingMode(!1),e.triggerMethod("group:deleted",n)})}),this.listenTo(this.rowsView,"childview:group:finished:editing",function(){this._setSingleGroupEditingMode(!1)}),this.listenTo(this.headerView,"add:item",function(e){if(!this._isSingleGroupEditing){this._isSingleGroupEditing=!0,this.headerView.isAddEnabled(!1);var t=new c({"name":"","order":1,"isRename":!0},{"connector":this.collection.connector});this.collection.add(t,{"at":0})}}),this.listenTo(this.headerView,"toggleEditMode:on",function(){this._setGroupsEditingMode(!0)}),this.listenTo(this.headerView,"toggleEditMode:off",function(){this._editingView?(this._editingView._save(),this._setSingleGroupEditingMode(!1)):this._setGroupsEditingMode(!1)})},"events":{"keydown":function(e){var t;switch(e.keyCode){case 38:if(e.preventDefault(),e.stopPropagation(),!this._isSingleGroupEditing&&void 0!==this._focusedModelIndex&&this._focusedModelIndex>0){t=this.collection.at(this._focusedModelIndex);var i=this.collection.at(this._focusedModelIndex-1),n=this.rowsView.children.findByModel(i);this._setFocusAtView(n),t.set("isTabable",!1),i.set("isTabable",!0)}break;case 40:if(e.preventDefault(),e.stopPropagation(),!this._isSingleGroupEditing&&void 0!==this._focusedModelIndex&&this._focusedModelIndex<this.collection.length-1){t=this.collection.at(this._focusedModelIndex);var o=this.collection.at(this._focusedModelIndex+1),s=this.rowsView.children.findByModel(o);this._setFocusAtView(s),
t.set("isTabable",!1),o.set("isTabable",!0)}}}},"onRender":function(){this._updateGroupsCssClasses(),this.headerRegion.show(this.headerView),this.rowsRegion.show(this.rowsView),this.$el.find(".csui-favorite-groups-rows-region").attr("role","navigation").attr("aria-label",m.favoriteGroupsNavAria),this.footerRegion.show(this.footerView)},"onBeforeDestroy":function(){this._isSingleGroupEditing&&this._editingView.model.isNew()&&this._editingView.model.destroy()},"_setFocusAtView":function(e){this.rowsView.children.each(function(t){t.cid!==e.cid&&(delete t._hasFocus,t.$el.removeClass("csui-in-focus"))}),e._hasFocus=!0,e.$el.addClass("csui-in-focus"),this.$el.addClass("csui-favorite-groups-has-group-in-focus"),this._focusedModelIndex=this.collection.indexOf(e.model)},"_setFocusedByIndex":function(e){var t=this.rowsView.collection.at(e),i=this.rowsView.children.findByModel(t);this._setFocusAtView(i)},"_tryReSetFocus":function(){var e=arguments[0];if(!e){var t=0;void 0!==this._focusedModelIndex&&(t=this._focusedModelIndex),e=this.collection.at(t)}if(e){var i=this.rowsView.children.findByModel(e);i&&i._setFocus()}},"_setGroupsEditingMode":function(e){var t=this._isGroupsEditing=e;this._updateGroupsCssClasses(),this.collection.each(function(e){e.set("isGroupsEditing",t)}),this.triggerMethod("group:any:editing",{"on":e})},"_setSingleGroupEditingMode":function(e){var t;e?(this._isSingleGroupEditing=!0,this._editingView=e,this.headerView.isAddEnabled(!1),t={"on":!0,"groupModel":e.model}):(this._editingView=void 0,this._isSingleGroupEditing=!1,this.headerView.isAddEnabled(!0),t={"on":!1});var i=this._isSingleGroupEditing;this._updateGroupsCssClasses(),this.collection.each(function(e){e.set("isSingleGroupEditing",i)}),this.triggerMethod("group:any:editing",t)},"_updateGroupsCssClasses":function(){this._useEditMode&&this.$el.addClass("csui-favorite-groups-has-groups-editing"),this._isSingleGroupEditing||this._isGroupsEditing?(this.$el.removeClass("csui-favorite-groups-editing-none"),this.$el.addClass("csui-favorite-groups-editing-any")):(this.$el.addClass("csui-favorite-groups-editing-none"),this.$el.removeClass("csui-favorite-groups-editing-any")),this._isSingleGroupEditing&&!this._isGroupsEditing?this.$el.addClass("csui-favorite-single-group-editing"):this.$el.removeClass("csui-favorite-single-group-editing"),!this._isSingleGroupEditing&&this._isGroupsEditing?this.$el.addClass("csui-favorite-groups-editing"):this.$el.removeClass("csui-favorite-groups-editing")},"_checkMoveNotPossible":function(e,t,i){var n=this.collection.get(e),o=this.collection.get(t),s=this.collection.indexOf(n),l=this.collection.indexOf(o);return s<l&&(l-=1),i&&(l+=1),s===l},"_modelOfNewlySelectedGroup":function(e){var t;return e instanceof n.Model?t=e:e instanceof n.View&&(t=e.model),!t||this.selectedGroup&&t.get("tab_id")==this.selectedGroup.get("tab_id")?void 0:t},"selectGroup":function(e){var t=this._modelOfNewlySelectedGroup(e);if(!t)return void this._tryReSetFocus();this.selectedGroup&&this.selectedGroup.set("isSelected",!1),t.set("isSelected",!0),this.selectedGroup=t,this._tryReSetFocus(t)},"_endEditing":function(e){e.isNew()||e.set({"isRename":!1}),this._setSingleGroupEditingMode(!1)},"_saveGroup":function(e){var i=this;e.save({},{"wait":!0}).then(function(){i._endEditing(e)}).fail(function(i){e.trigger("error",e);var n;if(i&&i.responseJSON&&i.responseJSON.error)n=i.responseJSON.error;else{var o=l.MessageHelper.toHtml();l.MessageHelper.reset(),n=t(o).text()}s.error("Saving failed. ",n)&&console.error(s.last),r.showMessage("error",m.errorFavoriteGroupSaveFailed+" "+n)})}})}),csui.define("csui/widgets/favorites2.table/impl/favorites2.table.columns",["csui/lib/underscore","csui/lib/backbone","i18n!csui/widgets/favorites2.table/impl/nls/lang"],function(e,t,i){"use strict";var n=t.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),o=t.Collection.extend({"model":n,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new o(this.map(function(e){return e.attributes}))},"resetCollection":function(i,o){if(i){var s=0,l=e.map(i,function(i){var o=i instanceof t.Model?i.toJSON():i;return s+=10,new n(e.defaults(o,{"key":o.column_key,"sequence":s}))});this.reset(l,o)}}});return new o([{"key":"type","titleIconInHeader":"mime_type","sequence":10,"permanentColumn":!0},{"key":"favorite_name","title":i.favoriteColumnNameTitle,"cellViewClassname":"csui/controls/table/cells/name.view","sequence":20,"permanentColumn":!0,"isNaming":!0},{"key":"reserved","sequence":30,"noTitleInHeader":!0},{"key":"parent_id","sequence":40},{"key":"favorite","sequence":910,"noTitleInHeader":!0,"permanentColumn":!0}])}),csui.define("hbs!csui/widgets/favorites2.table/impl/favorites2.table",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-perspective-toolbar"></div>\r\n<div class="csui-rowselection-toolbar"></div>\r\n<div class="csui-favorite-masterdetail-view">\r\n  <div class="csui-favorite-groups-view"></div>\r\n  <div class="csui-table-view"></div>\r\n</div>'}});return i.registerPartial("csui_widgets_favorites2.table_impl_favorites2.table",n),n}),csui.define("css!csui/widgets/favorites2.table/impl/favorites2.table.view",[],function(){}),csui.define("csui/widgets/favorites2.table/favorites2.table.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/favorite2groups","csui/models/favorite2columns","csui/utils/contexts/factories/favorites2","csui/models/favorites2","csui/widgets/favorites2.table/toolbaritems","csui/widgets/favorites2.table/toolbaritems.masks","csui/controls/progressblocker/blocker","csui/widgets/favorites2.table/impl/favorites2.groups.view","csui/controls/table/table.view","csui/utils/commands","csui/controls/tableactionbar/tableactionbar.view","csui/controls/toolbar/toolbar.command.controller","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/behaviors/default.action/default.action.behavior","csui/controls/tile/behaviors/infinite.scrolling.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/globalmessage/globalmessage","csui/widgets/favorites2.table/impl/favorites2.table.columns","csui/controls/perspective.header/perspective.header.view","csui/models/mixins/v2.fields/v2.fields.mixin","csui/controls/mixins/view.state/multi.node.fetch.mixin","csui/controls/mixins/view.state/node.selection.restore.mixin","hbs!csui/widgets/favorites2.table/impl/favorites2.table","i18n!csui/widgets/favorites2.table/impl/nls/lang","csui/behaviors/table.rowselection.toolbar/table.rowselection.toolbar.behavior","csui/utils/accessibility","csui/utils/contexts/perspective/plugins/node/node.extra.data","csui/lib/perfect-scrollbar","css!csui/widgets/favorites2.table/impl/favorites2.table.view"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v,w,y,C,_,x,k,T,V,S,I,A,E,M,P,D,F,O){"use strict";var N=F.isAccessibleTable(),R=e.config();i.defaults(R,{"defaultPageSize":30,"showGroupsRegion":!0,"showInlineActionBarOnHover":!N,"dragAndDropEnabled":!0});var B=g.extend({"constructor":function e(t){e.__super__.constructor.apply(this,arguments)},"behaviors":{"PerfectScrolling":{"behaviorClass":x,"contentParent":"tbody","suppressScrollX":!0},"InfiniteScrolling":{"behaviorClass":_,"contentParent":"tbody","content":"tbody>tr:visible"},"TabableRegion":{"behaviorClass":k}}}),L=o.LayoutView.extend({"className":"csui-fav2-table","template":M,"ui":{"tableView":".csui-table-view"},"regions":{"toolbarRegion":".csui-rowselection-toolbar","groupsRegion":".csui-favorite-groups-view","tableRegion":".csui-table-view","headerRegion":".csui-perspective-toolbar"},"behaviors":{"DefaultAction":{"behaviorClass":C},"TableRowSelectionToolbar":{"behaviorClass":D}},"constructor":function e(t){t||(t={}),this._addUrlParametersSupport(t.context),i.defaults(t,{"pageSize":R.defaultPageSize,"showGroupsRegion":R.showGroupsRegion,"clearFilterOnChange":R.clearFilterOnChange,"resetOrderOnChange":R.resetOrderOnChange,"resetLimitOnChange":R.resetLimitOnChange,"fixedFilterOnChange":R.fixedFilterOnChange,"dragAndDropEnabled":R.dragAndDropEnabled,"showInlineActionBarOnHover":R.showInlineActionBarOnHover},{"forceInlineActionBarOnClick":!1,"inlineActionBarStyle":"csui-table-actionbar-bubble","clearFilterOnChange":!0,"resetOrderOnChange":!1,"resetLimitOnChange":!0,"fixedFilterOnChange":!1,"toolbarItems":h}),t.toolbarItemsMasks||(t.toolbarItemsMasks=new p),this.context=t.context,this.connector=this.context.getObject(r),this.commands=t.commands||b,this.commandController=new w({"commands":this.commands,"nameAttribute":"favorite_name"}),this.favoritesTableOptions={"isFavoritesTable":!0},this.tableColumns=this.options.tableColumns||V.deepClone(),m.imbue(this),e.__super__.constructor.call(this,t);var n=this.context.viewStateModel;this.listenTo(n,"change:state",this.onViewStateChanged),this.listenTo(this,"doc:preview:generic:actions",this._highlightRow),this.propagateEventsToRegions()},"_highlightRow":function(e,n){t("."+n).removeClass(n);var o=i.findIndex(this.collection.models,function(t){return t.get("id")===e.get("id")});if(-1!==o){var s=this.tableView||this.targetView,l=s&&s.table?s.table:void 0,r=void 0===l?l:t(l.row(o).node());r&&r.addClass(n)}},"initialize":function(){this.collection=new d(void 0,{"connector":this.connector,"autoreset":!1,"skip":0,"top":this.options.pageSize}),this.groups=this.options.groups||this.context.getCollection(a,{"detached":!0,"permanent":!0});var e=this.defaultActionController.actionItems.getAllCommandSignatures(b);this.collection.setCommands(b.getAllSignatures()),this.collection.setDefaultActionCommands(e),this.collection.setEnabledDelayRestCommands(!0),this.groups.favorites.setResourceScope(u.getDefaultsOnlyResourceScope()),this.groups.favorites.setDefaultActionCommands(e),this.groups.favorites.setEnabledDelayRestCommands(!1),this.groups.favorites.setFields(O.getModelFields()),this.groups.favorites.setExpand(O.getModelExpand()),this.columns=this.collection.columns||new c(void 0,{"connector":this.connector}),this._dragData=new n.Model,this._allowDragging=!0,this.collection.delayedActions&&this.listenTo(this.collection.delayedActions,"error",function(e,t,i){var n=new l.Error(t);T.showMessage("error",n.message)}),this.listenTo(this.groups,"request",this.blockActions),this.listenTo(this.groups,"sync error destroy",this.unblockActions),this.listenTo(this.groups,"reset",this._trySelectGroup),this.listenTo(this.groups,"bulk:update",function(){this._saveAllFavorites()}),this.options.isExpandedView||this._setPerspectiveHeaderView(),this.setGroupsView(),this.initSelectionMixin(this.options,this.collection,"favorites"),this.setTableView(),this.addTableViewSelectionEvents(this.tableView),this.tableView.listenTo(this.groups,"sync error destroy",this.tableView.enableEmptyViewText)},"_addUrlParametersSupport":function(e){var t=e&&e.viewStateModel;this.enableViewState=t&&t.addUrlParameters(this.getDefaultUrlParameters(),e)},"_setSelectedGroup":function(e){var t=!1;this.selectedGroup&&(t=!0),this.selectedGroup=e,this.favoritesTableOptions.selectedGroup=e,t&&this.clearAllSelectedNodes(),t&&this.setViewStateGroupName(e.get("name"))},"_getGroupNameFromViewState":function(){var e=this.context,t=e.viewStateModel;if(t)return t.getViewState("group",!0)},"_trySelectGroup":function(){var e;if(void 0!==this.selectedGroup)e=this.groups.get(this.selectedGroup);else{var t=this._getGroupNameFromViewState();e=t&&this._getGroupByName(t),e||(e=this.groups.find(function(e){return e.favorites&&e.favorites.length>0||-1===e.get("tab_id")}))}e?(0===this.columns.length&&this.columns.reset(e.favorites.columns.models,{"silent":!0}),this._setTableColumns(e.favorites.columns,{"silent":!0}),this.collection.populate(e.favorites.models,{"parse":!1}),this._setSelectedGroup(e),this.groupsView.selectGroup(e)):(delete this.selectedGroup,delete this.favoritesTableOptions.selectedGroup,this.collection.populate([]))},"_setTableColumns":function(e,t){if(!this.options.tableColumns&&e&&e.models){var n=this,o=["permanentColumn","noTitleInHeader","titleIconInHeader","title","align","widthFactor","isNaming"],s=i.map(e.models,function(e){var t=e.toJSON(),s=e.get("column_key")||e.get("key"),l=n.tableColumns.findWhere({"key":s});return l&&i.each(o,function(e){var i=l.get(e);void 0!==i&&void 0===t[e]&&(t[e]=i)}),t});this.tableColumns.resetCollection(s,t)}},"_saveAllFavorites":function(){var e=this,i=t.Deferred();return this.blockActions(),this._dragData.clear(),this.groups.saveAll().then(function(){s.debug("Complete set of favorite information saved")&&console.log(s.last),e._updateTabIdsInSelectedGroup(),i.resolve()}).fail(function(t){t&&(s.error("failed to save complete set of favorite information: "+t.statusText)&&console.log(s.last),T.showMessage("error",P.errorFavoritesSaveFailed+" "+t.statusText),e.groups.fetch({"reload":!0}),i.reject())}).always(function(){e.unblockActions()}),i.promise()},"_updateTabIdsInSelectedGroup":function(){var e=this.collection;if(this.selectedGroup){var t=this.selectedGroup,i=t.get("tab_id");e.each(function(n,o){t.favorites.at(o);e.remove(n,{"silent":!0}),n.set("favorite_tab_id",i,{"silent":!0}),e.add(n,{"at":o,"silent":!0})})}},"_moveModel":function(e,t,i,n){var o=e.get(t),s=e.get(i),l=e.indexOf(o),r=e.indexOf(s);return l<r&&(r-=1),n&&(r+=1),l!=r&&(e.remove(o),e.add(o,{"at":r}),!0)},"_moveAndSaveFavorites":function(e,t,n){var o=this.groups.get(this.selectedGroup);return this.blockActions(),i.each(e,function(e){this.collection.get(e)&&(this._moveModel(this.collection,e,t,n),this._moveModel(o.favorites,e,t,n))},this),this.unblockActions(),this._saveAllFavorites()},"setGroupsView":function(){this.groupsView=new f({"connector":this.connector,"collection":this.groups,"dragData":this._dragData,"blockingParentView":this,"dragAndDropEnabled":this.options.dragAndDropEnabled}),this.listenTo(this.groupsView,"group:selected",function(e){this.selectedGroup.favorites.each(function(e){e.has("csuiIsSelected")&&e.set("csuiIsSelected",!1)}),this.tableView.selectedChildren.reset([]),this.collection.populate(e.model.favorites.models,{"parse":!1}),this._setSelectedGroup(e.model)}),this.listenTo(this.groupsView,"group:any:editing",function(e){this._allowDragging=!e.on,this._updateDraggable()}),this.listenTo(this.groupsView,"group:deleted",function(e){if(this.selectedGroup){var t=e.get("tab_id");this.selectedGroup.get("tab_id")===t&&delete this.selectedGroup}this._trySelectGroup()}),this.listenTo(this.groupsView,"group:dropped",function(e){var t=this,i=this.groups,n=e.tabIdSource,o=e.tabIdDestination;if(this._moveModel(i,n,o,e.dropAfter)){var s=this.groups.get(n),l=this.groups.indexOf(s);e.savePromise=this._saveAllFavorites().then(function(){t.groupsView._setFocusedByIndex(l),t.groupsView._tryReSetFocus()})}}),this.listenTo(this.groupsView,"dropped:favorite",function(e){var t=e.idSources;if(i.isArray(t)&&0!==t.length){var n=this.groups,o=this.collection,s=e.tabIdDestination,l=n.get(e.tabIdSource),r=this.selectedGroup.get("tab_id");i.each(t,function(t){var i=l.favorites.get(t);l.favorites.remove(i),n.get(s).favorites.add(i),r===e.tabIdSource?(i=o.get(t),o.remove(i),i.set("csuiIsSelected",!1)):r===s&&o.add(i)}),e.savePromise=this._saveAllFavorites()}})},"_setPerspectiveHeaderView":function(){this.perspectiveHeaderView=new S({"title":P.dialogTitle,"icon":"title-favourites","context":this.context})},"_removeDragline":function(){this.tableView.$el.find(".csui-dragline").remove(),this.tableView.$el.find("tr.csui-no-border").removeClass("csui-no-border"),delete this._dropAfter},"_updateDraggable":function(){if(this._allowDragging){if(!1===l.isAppleMobile()&&this.options.dragAndDropEnabled){var e=this.tableView.getSelectedChildren().length;if(e>0){var t=this.tableView.$el.find("tr[draggable=true]");t.attr("draggable",!1),t=this.tableView.$el.find("tr.binf-active"),t.attr("draggable",!0)}else this.tableView.$el.find("tr:not(.csui-table-row-shows-inlineform)").attr("draggable",!0)}}else{this.tableView.$el.find("tr[draggable=true]").attr("draggable",!1)}},"_handleKeydown":function(e,t){var n,o=l.isMacintosh();switch(e.keyCode){case 88:if(o&&e.metaKey&&!e.ctrlKey||!o&&!e.metaKey&&e.ctrlKey){e.preventDefault(),e.stopPropagation();var s=this.selectedGroup.get("tab_id");n=[],this._dragData.set({"groupId":s,"favorites":n});var r=this.tableView.getSelectedChildren();if(r.length>0)i.each(r,function(e){n.push(e.get("id"))});else{var a=this.tableView.getFocusedChild();a&&n.push(a.get("id"))}this.tableView.trigger("closeOther"),this.tableView.cancelAnyExistingInlineForm.call(this.tableView)}break;case 86:if(o&&e.metaKey&&!e.ctrlKey||!o&&!e.metaKey&&e.ctrlKey){if(e.preventDefault(),e.stopPropagation(),!(n=this._dragData.get("favorites"))||0===n.length)return;var c=t,u=c.get("id");if(i.contains(n,u))return;try{this._moveAndSaveFavorites(this._dragData.get("favorites"),u,!1)}catch(e){}}}},"setTableView":function(){this.tableView=new B({"context":this.options.context,"connector":this.connector,"collection":this.collection,"columns":this.columns,"tableColumns":this.tableColumns,"pageSize":this.options.pageSize,"originatingView":this,"columnsWithSearch":["favorite_name"],"orderBy":this.options.orderBy,"filterBy":this.options.filterBy,"nameEdit":!1,"favoritesTableOptions":this.favoritesTableOptions,"actionItems":this.defaultActionController.actionItems,"commands":this.defaultActionController.commands,"blockingParentView":this,"allSelectedNodes":this.getAllSelectedNodes(),"tableTexts":{"zeroRecords":P.emptyGroupText},"tableAria":P.favoritesTableAria,"inlineBar":{"viewClass":v,"options":i.extend({"collection":this.options.toolbarItems.inlineActionbar,"toolItemsMask":this.options.toolbarItemsMasks.toolbars.inlineActionbar,"delayedActions":this.collection.delayedActions,"container":this.collection.node,"containerCollection":this.collection,"commandExecutionOptions":{"nameAttribute":"favorite_name"}},this.options.toolbarItems.inlineActionbar.options,{"inlineBarStyle":this.options.inlineActionBarStyle,"forceInlineBarOnClick":this.options.forceInlineActionBarOnClick,"showInlineBarOnHover":this.options.showInlineActionBarOnHover})}});var e=this;this.listenTo(this.tableView,"tableRowRendered",function(i){var n=t(i.target);n.on("focusin",function(t){e._tableRowWithFocus=i}),n.on("focusout",function(t){delete e._tableRowWithFocus}),n.on("keydown",function(t){e._handleKeydown.call(e,t,i.node)})}),this.listenTo(this.tableView,"tableRowRendered",function(n){var o=t(n.target);o.find("a").attr("draggable",!1),!1===l.isAppleMobile()&&this.options.dragAndDropEnabled&&!1===o.hasClass("csui-table-row-shows-inlineform")&&o.attr("draggable",!0),o.on("dragstart",function(n){var o=e.selectedGroup.get("tab_id"),s=[];e._dragData.set({"groupId":o,"favorites":s,"sourceIndex":n.currentTarget._DT_RowIndex});var l=e.tableView.getSelectedChildren();if(l.length>0)i.each(l,function(e){s.push(e.get("id"))});else{var r=e.collection.at(e._dragData.get("sourceIndex"));s.push(r.get("id")),t(n.currentTarget).removeClass("csui-state-hover")}n.originalEvent.dataTransfer.setData("text",""),e.tableView.trigger("closeOther"),e.tableView.cancelAnyExistingInlineForm.call(e.tableView)}),o.on("dragover",function(i){if(e._dragData.get("favorites")&&0!==e._dragData.get("favorites").length){var n=e._dragData.get("sourceIndex"),o=i.currentTarget._DT_RowIndex;if(void 0!==n&&n!==o){i.preventDefault();var s=t('<tr class="csui-dragline">'),l=t(i.currentTarget).height();i.offsetY>l/2?void 0!==e._dropAfter&&!1!==e._dropAfter||(e._removeDragline.call(e),t(i.currentTarget).after(s),e._dropAfter=!0):void 0!==e._dropAfter&&!0!==e._dropAfter||(e._removeDragline.call(e),t(i.currentTarget).before(s),0===o&&s.before('<tr class="csui-dragline csu-dragline-spacer">'),e._dropAfter=!1),s.next().addClass("csui-no-border")}}}),o.on("drop",function(i){var o=e._dragData.get("sourceIndex"),s=i.currentTarget._DT_RowIndex,l=n.node,r=l.get("id");if(void 0!==o&&o!==s){i.preventDefault();try{if(e._dragData.get("favorites")&&e._dragData.get("groupId")){var a=t(i.currentTarget).height(),c=i.offsetY>a/2;e._moveAndSaveFavorites(e._dragData.get("favorites"),r,c)}}catch(e){}e._removeDragline()}}),o.on("dragleave",function(t){e._removeDragline()}),o.on("dragend",function(t){t.preventDefault(),e._removeDragline(),e._dragData.clear()})}),this.listenTo(this.tableView,"tableRowSelected",this._updateDraggable),this.listenTo(this.tableView,"tableRowUnselected",this._updateDraggable),this.listenTo(this,"render",function(){this.groupsRegion.show(this.groupsView),this.perspectiveHeaderView&&this.headerRegion.show(this.perspectiveHeaderView),this.tableRegion.show(this.tableView),I.mergePropertyParameters(this.groups.favorites.fields,this.tableView.collection.fields),this.groups.ensureFetched({"reload":!0}),!1===this.options.showGroupsRegion&&this.groupsRegion.$el.hide(),delete this._tableRowWithFocus}),this.listenTo(this.tableView,"execute:defaultAction",function(e){var t={"node":e};if(this.trigger("before:defaultAction",t),!t.cancel){var i=this;this.defaultActionController.executeAction(e,{"context":this.options.context,"originatingView":this}).done(function(){i.trigger("executed:defaultAction",t)})}}),this.listenTo(this.getAllSelectedNodes(),"reset update",this._selectionChanged)},"_addFavoriteAttribute":function(e){return e.each(function(e){e.set("favorite",!0)},this),!0},"getDefaultUrlParameters":function(){return["group"]},"getViewStateGroupName":function(){return this.context.viewStateModel.getViewState("group",!0)},"setViewStateGroupName":function(e,t){if(this.getViewStateGroupName()!==e){var i=this.context.viewStateModel;return t||(t={}),t.encode=!0,t&&t.default&&i.setDefaultViewState("group",e,t),i.setViewState("group",e,t)}},"_getGroupByName":function(e){return this.groups.find(function(t){if(t.get("name")===e)return t})},"isRoutingToOtherRouter":function(){var e=this.context,t=e&&e.viewStateModel;if("Root"!==t.get(t.CONSTANTS.CURRENT_ROUTER))return!0},"onViewStateChanged":function(){if(!this.isRoutingToOtherRouter()){var e,t=this.context.viewStateModel,i=t.getViewState("group",!0);if(i){var n=this._getGroupByName(i);n?n!==this.selectedGroup&&(this._setSelectedGroup(n),e=!0):(this.selectedGroup=void 0,e=!0)}else this.selectedGroup=void 0,e=!0;e&&this._trySelectGroup()}}});return i.extend(L.prototype,y),i.extend(L.prototype,A),i.extend(L.prototype,E),L}),csui.define("hbs!csui/widgets/myassignmentstable/impl/myassignmentstable",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-perspective-toolbar"></div>\r\n<div class="csui-myassignmentstable">\r\n  <div id="tableviewMA"></div>\r\n  <div id="paginationviewMA"></div>\r\n</div>\r\n'}});return i.registerPartial("csui_widgets_myassignmentstable_impl_myassignmentstable",n),n}),csui.define("csui/widgets/myassignmentstable/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/myassignmentstable/impl/nls/root/lang",{"dialogTitle":"My Assignments","emptyListText":"No item to display.","tableAria":"My Assignments"}),csui.define("css!csui/widgets/myassignmentstable/impl/myassignmentstable",[],function(){}),csui.define("csui/widgets/myassignmentstable/myassignmentstable.view",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/utils/accessibility","csui/utils/contexts/factories/myassignmentscolumns","csui/utils/contexts/factories/myassignments","csui/controls/table/rows/description/description.view","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/widgets/myassignments/myassignments.columns","csui/widgets/nodestable/nodestable.view","csui/controls/perspective.header/perspective.header.view","csui/controls/mixins/view.state/multi.node.fetch.mixin","csui/controls/mixins/view.state/node.selection.restore.mixin","hbs!csui/widgets/myassignmentstable/impl/myassignmentstable","i18n!csui/widgets/myassignmentstable/impl/nls/lang","css!csui/widgets/myassignmentstable/impl/myassignmentstable"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b){"use strict";var v=l.isAccessibleTable(),w=h.extend({"template":g,"className":"csui-my-assignments-table-view","regions":{"tableRegion":"#tableviewMA","paginationRegion":"#paginationviewMA","headerRegion":".csui-perspective-toolbar"},"constructor":function(e){e.enableViewState=!1,e.tableAria=b.tableAria,h.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions()},"initialize":function(){if(this.collection=this.options.collection,!this.collection){var e=this._restoreCollectionOptionsFromViewState();this.collection=this.context.getCollection(a,{"options":e}),e.orderBy&&(this.options.orderBy=e.orderBy)}this.columns=this.collection.columns||this.context.getCollection(r),this.collection.setExpand("assignments",["from_user_id","location_id","workflow_id","workflow_subworkflow_id","workflow_subworkflow_task_id"]),i.defaults(this.options,{"orderBy":"date_due asc","tableColumns":d,"urlParamsList":[]}),this.options.isExpandedView||this._setPerspectiveHeaderView(),this.initSelectionMixin(this.options,this.collection),this.setTableView({"nameEdit":!1,"descriptionRowView":c,"descriptionRowViewOptions":{"firstColumnIndex":1,"lastColumnIndex":2,"showDescriptions":!v,"collapsedHeightIsOneLine":!1},"selectRows":"none","selectColumn":!1,"haveDetailsRowExpandCollapseColumn":!1,"columnsWithSearch":["name","location_id"],"tableColumns":this.options.tableColumns,"tableTexts":{"zeroRecords":b.emptyListText},"inlineBar":{"options":{}}}),this.addTableViewSelectionEvents(this.tableView),this.setPagination(),this.options.collection&&(this.collection.fetched=!1)},"_setPerspectiveHeaderView":function(){this.perspectiveHeaderView=new p({"title":b.dialogTitle,"icon":"title-assignments","context":this.context})},"_resetSortOrderBy":function(){},"onRender":function(){this.perspectiveHeaderView&&this.headerRegion.show(this.perspectiveHeaderView),this.tableRegion.show(this.tableView),this.paginationRegion.show(this.paginationView)},"getDefaultUrlParameters":function(){return[]}});return i.extend(w.prototype,u),i.extend(w.prototype,f),w}),csui.define("hbs!csui/widgets/recentlyaccessedtable/recentlyaccessedtable",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-perspective-toolbar"></div>\r\n<div class="csui-recentlyaccessedtable">\r\n  <div class="csui-rowselection-toolbar"></div>\r\n  <div id="tableviewRA"></div>\r\n  <div id="paginationviewRA"></div>\r\n</div>\r\n'}});return i.registerPartial("csui_widgets_recentlyaccessedtable_recentlyaccessedtable",n),n}),csui.define("csui/widgets/recentlyaccessedtable/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/recentlyaccessedtable/impl/nls/root/lang",{"dialogTitle":"Recently Accessed","emptyListText":"There are no items to display.","tableAria":"Recently Accessed"}),csui.define("css!csui/widgets/recentlyaccessedtable/recentlyaccessedtable",[],function(){}),csui.define("csui/widgets/recentlyaccessedtable/recentlyaccessedtable.view",["csui/lib/underscore","csui/utils/base","csui/utils/contexts/factories/recentlyaccessedcolumns","csui/utils/contexts/factories/recentlyaccessed","csui/widgets/recentlyaccessed/recentlyaccessed.columns","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/widgets/nodestable/nodestable.view","csui/utils/commands","csui/controls/globalmessage/globalmessage","csui/widgets/recentlyaccessedtable/toolbaritems","csui/widgets/recentlyaccessedtable/toolbaritems.masks","csui/controls/perspective.header/perspective.header.view","csui/controls/mixins/view.state/multi.node.fetch.mixin","csui/controls/mixins/view.state/node.selection.restore.mixin","hbs!csui/widgets/recentlyaccessedtable/recentlyaccessedtable","i18n!csui/widgets/recentlyaccessedtable/impl/nls/lang","csui/behaviors/table.rowselection.toolbar/table.rowselection.toolbar.behavior","csui/utils/contexts/perspective/plugins/node/node.extra.data","css!csui/widgets/recentlyaccessedtable/recentlyaccessedtable"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b){"use strict";var v=l.extend({"template":m,"className":"csui-recently-accessed-table-view","regions":{"toolbarRegion":".csui-rowselection-toolbar","tableRegion":"#tableviewRA","paginationRegion":"#paginationviewRA","headerRegion":".csui-perspective-toolbar"},"constructor":function(e){e.showSelectionCounter=!1,e.enableViewState=!1,e.tableAria=f.tableAria,l.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions()},"behaviors":e.extend({"TableRowSelectionToolbar":{"behaviorClass":g}},l.prototype.behaviors),"initialize":function(){if(this.collection=this.options.collection,!this.collection){var s=this._restoreCollectionOptionsFromViewState();this.collection=this.context.getCollection(n,{"options":s}),s.orderBy&&(this.options.orderBy=s.orderBy)}this.collection.setExpand("properties",["parent_id","reserved_user_id"]),this._allCommands=this.defaultActionController.actionItems.getAllCommandSignatures(r),this.collection.setResourceScope(n.getDefaultResourceScope(!0)),this.collection.setDefaultActionCommands(this._allCommands),this.collection.setEnabledDelayRestCommands(!0),this.collection.setFields(b.getModelFields()),this.collection.setExpand(b.getModelExpand()),this.collection.delayedActions&&this.listenTo(this.collection.delayedActions,"error",function(e,i,n){var o=new t.Error(i);a.showMessage("error",o.message)}),this.columns=this.collection.columns||this.context.getCollection(i),e.defaults(this.options,{"orderBy":"access_date_last desc","tableColumns":o,"toolbarItems":c,"urlParamsList":[]}),this.options.toolbarItemsMasks||(this.options.toolbarItemsMasks=new u),this.options.isExpandedView||this._setPerspectiveHeaderView(),this.initSelectionMixin(this.options,this.collection),this.setTableView({"orderBy":this.options.orderBy,"filterBy":this.options.filterBy,"nameEdit":!1,"haveDetailsRowExpandCollapseColumn":!1,"tableColumns":this.options.tableColumns,"allSelectedNodes":this.getAllSelectedNodes(),"tableTexts":{"zeroRecords":f.emptyListText}}),this.addTableViewSelectionEvents(this.tableView),this.setPagination(),this.options.collection&&(this.collection.fetched=!1)},"_setPerspectiveHeaderView":function(){this.perspectiveHeaderView=new d({"title":this.getTitle(),"icon":"title-recentlyaccessed","context":this.context})},"_resetSortOrderBy":function(){},"getTitle":function(){return f.dialogTitle},"onRender":function(){this.perspectiveHeaderView&&this.headerRegion.show(this.perspectiveHeaderView),this.tableRegion.show(this.tableView),this.paginationRegion.show(this.paginationView)},"getUrlParameters":function(){return[]}});return e.extend(v.prototype,s),e.extend(v.prototype,h),e.extend(v.prototype,p),v}),csui.define("hbs!csui/widgets/search.results.table/search.results.table.header",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'  <div class="csui-search-header-action csui-search-settings">\r\n    <div class="csui-setting-icon" title="'+e.escapeExpression((l=null!=(l=r(i,"settingsLabel")||(null!=t?r(t,"settingsLabel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"settingsLabel","hash":{},"loc":{"start":{"line":18,"column":42},"end":{"line":18,"column":59}}}):l))+'" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"settingsLabel")||(null!=t?r(t,"settingsLabel"):t))?l:e.hooks.helperMissing,
"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"settingsLabel","hash":{},"loc":{"start":{"line":18,"column":73},"end":{"line":18,"column":90}}}):l))+'" tabindex="0" role="button"\r\n      aria-haspopup="true" aria-expanded="false">\r\n      '+(null!=(s=(r(i,"icon-v2")||t&&r(t,"icon-v2")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{"name":"icon-v2","hash":{"states":"true","theme":null!=t?r(t,"iconTheme"):t,"iconName":"csui_action_settings32"},"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":83}}}))?s:"")+"\r\n    </div>\r\n    <div class=\"csui-settings-dropdown\" role='application'></div>\r\n  </div>\r\n"},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-back-button-container" title="'+e.escapeExpression((l=null!=(l=r(i,"backTitle")||(null!=t?r(t,"backTitle"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"backTitle","hash":{},"loc":{"start":{"line":1,"column":45},"end":{"line":1,"column":58}}}):l))+'"\r\n     tabindex="0" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"backTitle")||(null!=t?r(t,"backTitle"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"backTitle","hash":{},"loc":{"start":{"line":2,"column":30},"end":{"line":2,"column":43}}}):l))+'" role="button">\r\n  <span class="arrow_back cs-go-back"></span>\r\n</div>\r\n<div class="cs-title-container">\r\n  <div class="cs-title-inner-container">\r\n    <span class="title-icon '+e.escapeExpression((l=null!=(l=r(i,"icon")||(null!=t?r(t,"icon"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"icon","hash":{},"loc":{"start":{"line":7,"column":28},"end":{"line":7,"column":36}}}):l))+'"></span>\r\n    <h2 class="title" title="'+e.escapeExpression((l=null!=(l=r(i,"title")||(null!=t?r(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":8,"column":29},"end":{"line":8,"column":38}}}):l))+'">'+e.escapeExpression((l=null!=(l=r(i,"title")||(null!=t?r(t,"title"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"title","hash":{},"loc":{"start":{"line":8,"column":40},"end":{"line":8,"column":49}}}):l))+'</h2>\r\n  </div>\r\n</div>\r\n<div class="csui-search-right-header-container">\r\n <div class="csui-search-sorting" id="csui-search-sort"></div>\r\n  <span class="csui-search-header-action csui-description-toggle" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"descriptionTitle")||(null!=t?r(t,"descriptionTitle"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"descriptionTitle","hash":{},"loc":{"start":{"line":13,"column":78},"end":{"line":13,"column":98}}}):l))+'"\r\n    title="'+e.escapeExpression((l=null!=(l=r(i,"descriptionTitle")||(null!=t?r(t,"descriptionTitle"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"descriptionTitle","hash":{},"loc":{"start":{"line":14,"column":11},"end":{"line":14,"column":31}}}):l))+'" role="button" tabindex="0">\r\n  </span>\r\n'+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"showSettings"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":16,"column":2},"end":{"line":24,"column":9}}}))?s:"")+"</div>"}});return i.registerPartial("csui_widgets_search.results.table_search.results.table.header",n),n}),csui.define("csui/widgets/search.results.table/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/search.results.table/impl/nls/root/lang",{"dialogTitle":"Search Table Results","emptyListText":"There are no items to display.","backTitle":"Back","searchSettings":"Search Settings","showDescription":"Show description","hideDescription":"Hide description","descriptionColumnTitle":"Description","summaryColumnTitle":"Summary","searchResultsTableAria":"Search results"}),csui.define("csui/widgets/search.results.table/search.results.table.header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/url","csui/utils/contexts/factories/user","csui/controls/perspective.header/perspective.header.view","csui/widgets/search.results/controls/sorting/sort.menu.view","hbs!csui/widgets/search.results.table/search.results.table.header","i18n!csui/widgets/search.results.table/impl/nls/lang","csui/controls/icon/icon.view","csui/utils/high.contrast/detector!","css!csui/controls/perspective.header/impl/perspective.header","css!csui/widgets/search.results/impl/search.results"],function(e,t,i,n,o,s,l,r,a,c,u){"use strict";return s.extend({"className":"csui-perspective-toolbar-container csui-search-results-header-view","template":r,"templateHelpers":function(){return{"icon":this.options.icon,"title":this.options.title,"backTitle":a.backTitle,"settingsLabel":a.searchSettings,"showSettings":!!this.options.enableSearchSettings,"descriptionTitle":a.showDescription,"iconTheme":this._useIconsForDarkBackground?"dark":""}},"constructor":function(t){this.ui=e.extend({"settingsMenu":".csui-setting-icon","settingsDropdown":".csui-settings-dropdown","toggleDescription":".csui-description-toggle","sortRegion":".csui-search-sorting"},this.ui),this.events=e.extend({"click @ui.settingsMenu":"_createSettingsDropdown","keydown @ui.settingsMenu":"showSettingsDropdown","click @ui.toggleDescription":"onToggleDescriptionClick","keypress @ui.toggleDescription":"onToggleDescriptionClick"},this.events),this.settingsRegion=new i.Region({"el":this.ui.settingsDropdown}),this.localStorage=t&&t.localStorage,s.prototype.constructor.call(this,t),this._useIconsForDarkBackground=t.useIconsForDarkBackground&&2!==u||1===u,this.listenTo(this.options.originatingView,"show:description:Icon",function(){this.selectedSettings=this.options.originatingView.settings.get("display")&&this.options.originatingView.settings.get("display").summary_description.selected,this.toggleDescriptionIconView=new c({"iconName":"csui_action_reveal_description32","states":!0,"on":this.showDescription,"theme":this._useIconsForDarkBackground?"dark":""}),this.toggleDescriptionIconRegion=new i.Region({"el":this.ui.toggleDescription}),this.toggleDescriptionIconRegion.show(this.toggleDescriptionIconView),this.setSortingView(),this.sortOptionsRegion=new i.Region({"el":this.ui.sortRegion}),this.sortOptionsRegion.show(this.sortingView),this.updateToggleDescription(),this.updateToggleDescriptionIcon()})},"onRender":function(){this.localStorage.storage&&this.localStorage.storage.getItem("PrevSearchDisplayStyle")&&(this.showDescription=this.localStorage.get(this._createSearchDisplayStyleKey()+"_showDescription"))},"setSortingView":function(){return this.sortingView=new l({"collection":this.collection,"enableSorting":!0}),!0},"showSettingsDropdown":function(e){var t=e.keyCode;13!==t&&32!==t||(this._createSettingsDropdown(e),e.preventDefault(),e.stopPropagation())},"_createSettingsDropdown":function(e){this.options.originatingView.trigger("create:SettingsDropdown",e)},"onToggleDescriptionClick":function(e){if("keypress"===e.type&&(13===e.keyCode||32===e.keyCode)||"click"===e.type){e.preventDefault();var t=this.options.originatingView;this.localStorage.get(this.query_id);this.showDescription?(this.localStorage.set(this._createSearchDisplayStyleKey()+"_showDescription",!1),t.tableView.options.descriptionRowViewOptions.showDescriptions=!1,this.$el.find(".csui-description-toggle").attr("title",a.showDescription),this.$el.find(".csui-description-toggle").attr("aria-label",a.showDescription),t.$el.find(".cs-description").addClass("csui-description-collapsed"),this._setShowDescriptions(!1)):(this.localStorage.set(this._createSearchDisplayStyleKey()+"_showDescription",!0),t.tableView.options.descriptionRowViewOptions.showDescriptions=!0,this.$el.find(".csui-description-toggle").attr("title",a.hideDescription),this.$el.find(".csui-description-toggle").attr("aria-label",a.hideDescription),this._setShowDescriptions(!0)),this.$el.find(".csui-description-toggle").trigger("focus")}},"_setShowDescriptions":function(e){this.showDescription=e,this.toggleDescriptionIconView&&this.toggleDescriptionIconView.setIconStateIsOn(e),this.options.originatingView.trigger("toggle:description",{"showDescriptions":e})},"updateToggleDescriptionIcon":function(){var e=t(this.ui.toggleDescription);this.showDescription?(e.attr("title",a.hideDescription),e.attr("aria-label",a.hideDescription)):(e.attr("title",a.showDescription),e.attr("aria-label",a.showDescription))},"updateToggleDescription":function(){this.$el.find(".csui-description-toggle").removeClass("search-settings-none");var e=this.options.originatingView.collection.filter(function(e){return e.get("description")}),t=this.options.originatingView.collection.filter(function(e){return e.get("summary")}),i=this.localStorage.get(this._createSearchDisplayStyleKey()+"_showDescription");switch(this.selectedSettings=this.selectedSettings?this.selectedSettings:this.collection.selectedSettings,this.selectedSettings){case"DO":e.length?(this.$el.find(".csui-description-toggle").removeClass("binf-hidden"),this._setShowDescriptions(i),i&&(this.$el.find(".csui-description-toggle").removeClass("icon-description-hidden").addClass("icon-description-shown"),this.$el.find(".csui-description-collapsed").removeClass("csui-description-collapsed"))):this.$el.find(".csui-description-toggle").hasClass("binf-hidden")||(this.$el.find(".csui-description-toggle").addClass("binf-hidden"),this._setShowDescriptions(!1),this.options.originatingView&&this.options.originatingView.$el.find(".cs-description").addClass("csui-description-collapsed"));break;case"SP":case"DP":case"SD":e.length||t.length?(this.$el.find(".csui-description-toggle").removeClass("binf-hidden"),this._setShowDescriptions(i),i&&(this.$el.find(".csui-description-toggle").removeClass("icon-description-hidden").addClass("icon-description-shown"),this.$el.find(".csui-description-collapsed").removeClass("csui-description-collapsed"))):this.$el.find(".csui-description-toggle").hasClass("binf-hidden")||(this.$el.find(".csui-description-toggle").addClass("binf-hidden"),this._setShowDescriptions(!1),this.options.originatingView&&this.options.originatingView.$el.find(".cs-description").addClass("csui-description-collapsed"));break;case"SO":t.length?(this.$el.find(".csui-description-toggle").removeClass("binf-hidden"),this._setShowDescriptions(i),i&&(this.$el.find(".csui-description-toggle").removeClass("icon-description-hidden").addClass("icon-description-shown"),this.$el.find(".csui-description-collapsed").removeClass("csui-description-collapsed"))):this.$el.find(".csui-description-toggle").hasClass("binf-hidden")||(this.$el.find(".csui-description-toggle").addClass("binf-hidden"),this._setShowDescriptions(!1),this.options.originatingView&&this.options.originatingView.$el.find(".cs-description").addClass("csui-description-collapsed"));break;case"NONE":this.$el.find(".csui-description-toggle").addClass("search-settings-none"),this.options.originatingView&&this.options.originatingView.$el.find(".cs-description").addClass("csui-description-collapsed"),this._setShowDescriptions(!1)}},"_createSearchDisplayStyleKey":function(){var e=this.context||this.options&&this.options.context,t=(new n).getAbsolute(),i=e&&e.getModel(o).get("id");return"undefined"==t||"null"==t?t&&i?t+i:"defaultSearchDisplayStyle":t&&t.split("//")[1]&&t.split("//")[1].split("/")[0].split(":")[0]+i}})}),csui.define("hbs!csui/widgets/generic.expanded.table/impl/generic.expanded.table",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div class="csui-perspective-toolbar"></div>\r\n<div class="csui-expandedtable">\r\n  <div class="csui-rowselection-toolbar"></div>\r\n  <div id="tableviewRA"></div>\r\n  <div id="paginationviewRA"></div>\r\n</div>\r\n'}});return i.registerPartial("csui_widgets_generic.expanded.table_impl_generic.expanded.table",n),n}),csui.define("csui/widgets/generic.expanded.table/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/generic.expanded.table/impl/nls/root/lang",{"searchButtonMessage":"Search","title":"Search Query Results","dialogTitle":"Search Query Results","searchTitle":"Search","searchPlaceholder":"Search","searchAria":"Search in Search Results","expandAria":"Expand the Search Query Results","emptyListText":"There are no items to display.","loadingListText":"Loading results...","loadingText":"Loading search results","failedListText":"Loading results failed.","openSearchCustomResultsView":"Open Search Query Results view"}),csui.define("css!csui/widgets/generic.expanded.table/impl/generic.expanded.table",[],function(){}),csui.define("csui/widgets/generic.expanded.table/generic.expanded.table.view",["csui/lib/underscore","csui/lib/backbone","csui/utils/base","csui/lib/marionette","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/utils/namedlocalstorage","csui/widgets/nodestable/nodestable.view","csui/utils/commands","csui/controls/globalmessage/globalmessage","csui/widgets/nodestable/toolbaritems","csui/widgets/nodestable/toolbaritems.masks","csui/widgets/search.results.table/search.results.table.header.view","csui/controls/mixins/view.state/multi.node.fetch.mixin","csui/controls/mixins/view.state/node.selection.restore.mixin","csui/controls/pagination/nodespagination.view","hbs!csui/widgets/generic.expanded.table/impl/generic.expanded.table","i18n!csui/widgets/generic.expanded.table/impl/nls/root/lang","csui/behaviors/table.rowselection.toolbar/table.rowselection.toolbar.behavior","csui/controls/table/rows/description/search.description.view","csui/utils/contexts/perspective/plugins/node/node.extra.data","css!csui/widgets/generic.expanded.table/impl/generic.expanded.table"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v,w){"use strict";var y=l.extend({"template":f,"className":"csui-search-results-table-view","regions":{"toolbarRegion":".csui-rowselection-toolbar","tableRegion":"#tableviewRA","paginationRegion":"#paginationviewRA","headerRegion":".csui-perspective-toolbar"},"localStorage":new s("widgetOptions"),"constructor":function(e){e.showSelectionCounter=!1,e.enableViewState||(e.enableViewState=!1),this.context=e.context,this.query_id=this.context._applicationScope.get("query_id"),l.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions(),this.listenTo(this.collection,"sync",this.updateCollectionModels)},"behaviors":e.extend({"TableRowSelectionToolbar":{"behaviorClass":b}},l.prototype.behaviors),"updateCollectionModels":function(){this.columns=this.collection.searching&&this.collection.searching.sortedColumns,this.collection.columns=this.columns,this.tableView&&(this.tableView.columns=this.columns),this.options.isExpandedView||this.headerView&&(!this.headerView||this.headerView._isRendered)||this._setPerspectiveHeaderView(),this.onRender()},"initialize":function(){if(this.collection=this.options.collection,!this.collection){var t=this.enableViewState?this._restoreCollectionOptionsFromViewState():{"orderBy":"relevance"};this.collection=this.context.getCollection(this.options.collectionFactory,{"options":{"query_id":this.query_id,"collectionState":t}}),t.orderBy&&(this.options.orderBy=t.orderBy)}if(this.collection.setExpand("properties",["parent_id","reserved_user_id"]),this._allCommands=this.defaultActionController.actionItems.getAllCommandSignatures(r),this.collection.setResourceScope(this.options.collectionFactory.getDefaultResourceScope(!0)),this.collection.setDefaultActionCommands(this._allCommands),this.collection.setEnabledDelayRestCommands(!0),this.collection.setFields(w.getModelFields()),this.collection.setExpand(w.getModelExpand()),this.collection.delayedActions&&this.listenTo(this.collection.delayedActions,"error",function(e,t,n){var o=new i.Error(t);a.showMessage("error",o.message)}),this.columns=this.collection.columns||this.context.getCollection(this.options.columnCollectionFactory),e.defaults(this.options,{"tableColumns":this.options.tableColumns.deepClone(),"toolbarItems":c,"urlParamsList":[]}),this.options.toolbarItemsMasks||(this.options.toolbarItemsMasks=new u),this.initSelectionMixin(this.options,this.collection),this.settings&&this.settings.get("display")){var n=this.settings.get("display").summary_description.selected;this.showSummaryOnly="SO"===n}this.options.collection&&(this.collection.fetched=!1),this.tableView||this.setSearchTableView(),this.setPagination()},"setSearchTableView":function(){this.setTableView({"orderBy":this.options.orderBy,"filterBy":this.options.filterBy,"nameEdit":!1,"descriptionRowView":v,"descriptionRowViewOptions":{"firstColumnIndex":2,"lastColumnIndex":2,"showDescriptions":!1,"showSummary":!0,"collapsedHeightIsOneLine":!0,"displayInEntireRow":!0,"showSummaryOnly":this.showSummaryOnly,"descriptionColspan":7,"tableRowSummaryAvailable":!0},"haveDetailsRowExpandCollapseColumn":!1,"tableColumns":this.options.tableColumns,"allSelectedNodes":this.getAllSelectedNodes(),"tableTexts":{"zeroRecords":g.emptyListText}}),this.tableView.selectedSettings=this.settings&&this.settings.get("display")?this.settings.get("display").summary_description.selected:void 0,this.addTableViewSelectionEvents(this.tableView)},"setPagination":function(){var t=this.localStorage.get(this.query_id),i=t&&t.CurrentPageNumber;return this.options.pageSize=t&&t.pageSize||this.options.pageSize,i>1&&(this.collection.activePageNumber=i),this.paginationView=new m({"collection":this.collection,"pageSize":this.options.pageSize,"defaultDDList":[10,25,50,100],"pageNumber":i}),this.listenTo(this.paginationView,"pagesize:updated",function(t){this.paginationView.pageSize=this.options.pageSize=t.pageSize;var i=this.localStorage.get(this.query_id),n=this.paginationView.currentPageNum,o=e.extend(i,{"CurrentPageNumber":n,"pageSize":this.options.pageSize});this.localStorage.set(this.query_id,o)}),this.listenTo(this.collection,"new:page",function(){var t=this.paginationView.pageSize,i=this.paginationView.currentPageNum,n=t*i,o=this.localStorage.get(this.query_id),s=e.extend(o,{"CurrentPageNumber":i,"skipCount":n});this.collection.activePageNumber=i,this.localStorage.set(this.query_id,s)}),!0},"_setPerspectiveHeaderView":function(){var e=!!this.options.enableSearchSettings,t=this.localStorage.get(this.query_id),i=t&&t.name;this.headerView=new d({"title":i||this.getTitle(),"icon":"title-customviewsearch","context":this.context,"originatingView":this,"localStorage":this.localStorage?this.localStorage:this.options.localStorage,"enableSearchSettings":e,"collection":this.collection,"settings":!!this.settings&&this.settings}),this.headerView.data={}},"_resetSortOrderBy":function(){},"getTitle":function(){return g.dialogTitle},"onRender":function(){if(this.headerView&&!this.headerView._isRendered&&this.headerView&&this.headerRegion.show(this.headerView),this.headerView&&this.trigger("show:description:Icon"),this.tableView&&!this.tableView._isRendered)this.tableRegion.show(this.tableView),this.paginationRegion.show(this.paginationView);else if(this.tableView){this.collection.skipCount!==this.collection.actualSkipCount&&(this.collection.skipCount=this.collection.actualSkipCount),this.tableView.selectedSettings=this.settings&&this.settings.get("display")?this.settings.get("display").summary_description.selected:void 0,this.tableView.render();var e=this.paginationView&&this.paginationView._getTotalCount(),t=this.paginationView&&this.paginationView._showPageSizeMenu(),i=this.paginationView&&this.paginationView.selectedPageSize||10;e>i&&t&&this.paginationView&&this.paginationView._initializePageTabMenu(!0,!0)}this.collection.skipCount!==this.collection.actualSkipCount&&(this.collection.skipCount=this.collection.actualSkipCount)},"getUrlParameters":function(){return[]}});return e.extend(y.prototype,o),e.extend(y.prototype,h),e.extend(y.prototype,p),y}),csui.define("csui/widgets/search.results.table/search.results.table.columns",["csui/lib/backbone","i18n!csui/models/impl/nls/lang"],function(e,t){var i=e.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),n=e.Collection.extend({"model":i,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new n(this.map(function(e){return e.attributes}))}});return new n([{"key":"OTMIMEType","titleIconInHeader":"mime_type","sequence":10},{"key":"OTName","sequence":20,"isNaming":!0},{"key":"version_id","column_key":"version_id","title":t.version,"noTitleInHeader":!0,"permanentColumn":!0,"sequence":25},{"key":"reserved","sequence":30,"noTitleInHeader":!0},{"key":"parent_id","sequence":60},{"key":"access_date_last","sequence":70},{"key":"size","sequence":40},{"key":"modify_date","sequence":50},{"key":"favorite","sequence":910,"noTitleInHeader":!0,"permanentColumn":!0}])}),csui.define("css!csui/widgets/search.results.table/impl/search.results.table",[],function(){}),csui.define("csui/widgets/search.results.table/search.results.table.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/base","csui/widgets/generic.expanded.table/generic.expanded.table.view","csui/utils/contexts/factories/search.results.table.columns","csui/utils/contexts/factories/search.results.table.factory","csui/widgets/search.results.table/search.results.table.columns","csui/utils/contexts/factories/search.settings.factory","csui/controls/settings/settings.view","csui/controls/globalmessage/globalmessage","csui/models/nodes","csui/utils/commands/properties","csui/utils/accessibility","csui/models/nodechildrencolumn","i18n!csui/widgets/search.results.table/impl/nls/lang","css!csui/widgets/search.results.table/impl/search.results.table"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g){"use strict";var b=m.isAccessibleTable(),v=t.extend({"defaultPageSize":10,"enableSearchSettings":!0},e.config());return s.extend({"className":"csui-search-results-table-view","constructor":function(e){if(e.collectionFactory=r,e.columnCollectionFactory=l,e.tableColumns=a,e.pageSize=v.defaultPageSize,e.enableSearchSettings=v.enableSearchSettings,e.tableAria=g.searchResultsTableAria,s.prototype.constructor.call(this,e),this.listenTo(this,"update:table",t.bind(function(){this.tableView.options.tableColumns.trigger("update")},this)),this.listenTo(this,"create:SettingsDropdown",this._createSettingsDropdown),this.listenTo(this,"toggle:description",function(e){this.tableView.showDetailRowDescriptions(e.showDescriptions)}),this.listenTo(this.collection,"sync",this.executeEndProcess),e.enableSearchSettings){var i=e.context._applicationScope.get("query_id");this.loadSearchSettings(i)}},"_createSettingsDropdown":function(e){e.currentTarget.classList.contains("csui-setting-icon")&&(!this.settingsView||this.settingsView&&this.settingsView.isDestroyed()?(i(document).on("mouseup.dropdown."+this.cid,t.bind(this._closeSettingsMenu,this)),this.headerView.data={},this.settingsView=new u({"model":this.settings,"tableCollection":this.collection,"data":this.headerView.data,"searchResultsView":this}),this.listenTo(this.settingsView,"close:menu",t.bind(function(e){this._destroySettingsDropdown(e)},this)),this.headerView.settingsRegion.show(this.settingsView),this.$el.children().find(".csui-setting-icon").attr("aria-expanded",!0),this.settingsView.$el.find(".binf-show").trigger("focus"),this.settingsView.isVisible=!0,this.listenTo(this.settingsView,"update:showSummaryDescriptions",function(){this.selectedSettings=this.settingsView.model.get("display").summary_description.selected,this.headerView.selectedSettings=this.selectedSettings,this.updateHeader()})):(this._destroySettingsDropdown(),this.$el.find(".csui-search-settings").attr("aria-expanded",!1)))},"updateHeader":function(){this.headerView.updateToggleDescription(),this.headerView.updateToggleDescriptionIcon()},"_destroySettingsDropdown":function(e){if(this.settingsView.destroy(),i(document).off("mouseup.dropdown."+this.cid),this.headerView.data.summary_description||this.headerView.data.display_regions){this.blockActions(),this.collection.isSortOptionSelected=!0,this.formData=new FormData;var n=this;t.mapObject(this.headerView.data,function(e,t){"display_regions"===t?n.formData.append(t,e):"summary_description"===t&&n.formData.append(t,e)}),this.settingsView.model.save(null,{"parse":!1,"data":this.formData,"processData":!1,"cache":!1,"contentType":!1}).done(t.bind(function(e){n.headerView.data.summary_description&&(n.settingsView.model.get("display").summary_description.selected=n.headerView.data.summary_description,n.settingsView.trigger("update:showSummaryDescriptions"),n.collection.settings_changed=!1),n.headerView.data.display_regions&&(n.unblockActions(),n.collection.settings_changed=!0,n.settingsView.options.tableCollection.fetch()),n.collection.settings_changed||(n.executeEndProcess(),n.trigger("update:table")),this.$el.find(".csui-setting-icon").trigger("focus")},this)).fail(function(e){e=new o.Error(e),d.showMessage("error",e.message),n.unblockActions()})}this.settingsView.isChanged&&(this.trigger("update:table"),this.settingsView.isChanged=!1)},"executeEndProcess":function(){this.tableView||(this.setColumns(),this.paginationRegion.show(this.paginationView)),this.collection.length&&(this.trigger("render:metadata"),this.columns=this.collection.searching&&this.collection.searching.sortedColumns,this.getAdditionalColumns(),this.trigger("update:table"),this.collection.settings_changed=!1),this.unblockSearchResultsActions()},"unblockSearchResultsActions":function(){this.unblockActions()},"setColumns":function(){this.columns=this.collection.searching&&this.collection.searching.sortedColumns,b&&this.getAdditionalColumns()},"getAdditionalColumns":function(){if(b){var e=this.headerView&&this.headerView.selectedSettings;switch(e=e||this.settings&&this.settings.get("display").summary_description.selected){case"SD":case"SP":case"DP":(this.tableView&&!this.tableView.columns.findWhere({"column_key":"description"})||!this.columns.findWhere({"column_key":"description"}))&&this.getDescriptionColumn(),(this.tableView&&!this.tableView.columns.findWhere({"column_key":"summary"})||!this.columns.findWhere({"column_key":"summary"}))&&this.getSummaryColumn();break;case"SO":this.removeDescriptionColumn(),(this.tableView&&!this.tableView.columns.findWhere({"column_key":"summary"})||!this.columns.findWhere({"column_key":"summary"}))&&this.getSummaryColumn();break;case"DO":this.removeSummaryColumn(),(this.tableView&&!this.tableView.columns.findWhere({"column_key":"description"})||!this.columns.findWhere({"column_key":"description"}))&&this.getDescriptionColumn();break;case"NONE":this.removeSummaryColumn(),this.removeDescriptionColumn()}}},"getDescriptionColumn":function(){this.columns.push(new f({"column_key":"description","name":g.descriptionColumnTitle,"sortable":!1,"permanentColumn":!0,"type":-1,"definitions_order":505}))},"getSummaryColumn":function(){this.columns.push(new f({"column_key":"summary","name":g.summaryColumnTitle,"sortable":!1,"permanentColumn":!0,"type":-1,"definitions_order":506}))},"removeDescriptionColumn":function(){this.tableView&&this.tableView.columns.findWhere({"column_key":"description"})&&this.tableView.columns.findWhere({"column_key":"description"}).destroy()},"removeSummaryColumn":function(){this.tableView&&this.tableView.columns.findWhere({"column_key":"summary"})&&this.tableView.columns.findWhere({"column_key":"summary"}).destroy()},"_closeSettingsMenu":function(e){!this.$el.find(".load-container.binf-hidden").length||this.headerView.ui.settingsMenu.is&&this.headerView.ui.settingsMenu.is(e&&e.target)||this.settingsView&&this.settingsView.$el.has(e&&e.target).length?e.stopPropagation():this.settingsView&&this.settingsView.isDestroyed()||(this._destroySettingsDropdown(e),this.$el.find(".csui-setting-icon").trigger("focus").attr("aria-expanded",!1))},"loadSearchSettings":function(e){this.options.templateId=e,this.settings&&this.settings.options&&(this.settings.options.templateId=e),this.settings=this.options.settings||this.context.getCollection(c,this.options),this.settings.fetch()},"openVersionHistory":function(e){var i=new h;i.push(e.model);var o={"nodes":i,"container":e.model.collection.node,"collection":e.model.collection,"selectedTab":new n.Model({"title":"Versions"})};o=t.extend(o,{"originatingView":this}),(new p).execute(o,this.options).always(function(e){})}})}),csui.define("csui/widgets/permissions/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/permissions/nls/root/lang",{"PermissionLookupPlaceHolder":"Enter name or group for permissions lookup"}),csui.define("hbs!csui/widgets/permissions/impl/permissions.lookup/permissions.lookup",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){return'<div id="csui-permissions-user-picker" class="csui-permissions-user-picker"></div>\r\n<div id="user"></div>'}});return i.registerPartial("csui_widgets_permissions_impl_permissions.lookup_permissions.lookup",n),n}),csui.define("csui/widgets/permissions/impl/permissions.lookup/permissions.lookup.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","i18n!csui/widgets/permissions/impl/nls/lang","i18n!csui/widgets/permissions/nls/lang","hbs!csui/widgets/permissions/impl/permissions.lookup/permissions.lookup","css!csui/widgets/permissions/impl/permissions"],function(e,t,i,n,o,s,l,r){var a=t.extend({"memberFilterType":[0,1],"orderBy":"asc_name"},e.config());return n.ItemView.extend({"className":"cs-permissions-lookup","template":r,"initialize":function(e){this.options=e},"constructor":function(e){e||(e={}),e.data||(e.data={}),this.options=e,n.ItemView.prototype.constructor.call(this,e)},"onShow":function(){var e=this;csui.require(["csui/controls/userpicker/userpicker.view"],function(i){e.pickerView=new i({"context":e.options.context,"memberFilter":{"type":a.memberFilterType},"widgetoptions":e.options,"placeholder":l.PermissionLookupPlaceHolder||s.PermissionLookupPlaceHolder,"prettyScrolling":!0,"orderBy":a.orderBy||"","limit":20,"model":e.options.userPickerModel,"id_input":t.uniqueId("csui-permissions-user-picker-input")}),new n.Region({"el":e.$el.find("#csui-permissions-user-picker")}).show(e.pickerView),e.pickerView&&e.pickerView.ui.searchbox.trigger("focus"),e.listenTo(e.pickerView,"item:change",e.processItemChange),e.listenTo(e.pickerView,"item:clear",e.processItemChange),e.listenTo(e.pickerView,"click item:clear",function(){e.trigger("close:addmenu")})})},"processItemChange":function(){var e=arguments.length>0&&arguments[0].item,t={"id":e?e.get("id"):"","name":e?e.get("name_formatted"):"","group_id":e&&e.get("group_id_expand")?e.get("group_id_expand").id:"","initials":e?e.get("initials"):"","photo_url":e?e.get("photo_url"):"","selectedMember":e||void 0,"effectivePermissions":!!e};this.options.userPickerModel.set(t)}})}),csui.define("csui/widgets/permissions/impl/permissions.list/permissions.dropdown.menu.items",["csui/lib/underscore","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","csui-ext!csui/widgets/permissions/impl/permissions.list/permissions.dropdown.menu.items","csui-ext!csui/widgets/permissions/permissions.list/permissions.dropdown.menu.items"],function(e,t,i,n,o,s){"use strict";function l(t){e.each(t,function(t){e.each(t,function(t,i){var o=r[i];if(!o)throw new Error("Invalid target toolbar: "+i);e.each(t,function(e){e=new n(e),o.addItem(e)})})})}var r={"dropdownMenuList":new i({"main":[{"signature":"adduserorgroup","name":t.AddUserOrGroups},{"signature":"addownerorgroup","name":t.AddOwnerOrGroup},{"signature":"restorepublicaccess",
"name":t.RestorePublicAccess}]},{"maxItemsShown":0,"dropDownIconName":"csui_action_caret_down32"})};if(o)if(console.warn('DEPRECATED: depend on the extension "csui-ext!csui/widgets/permissions/permissions.list/permissions.dropdown.menu.items" instead.'),s){var a=s.concat(o);l(a)}else l(o);else s&&l(s);return r}),csui.define("csui/widgets/permissions/impl/permissions.list/toolbaritems",["csui/lib/underscore","csui/utils/base","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/toolbar/toolitems.factory","csui/controls/toolbar/toolitem.model","csui-ext!csui/widgets/permissions/impl/permissions.list/toolbaritems","csui-ext!csui/widgets/permissions/permissions.list/toolbaritems"],function(e,t,i,n,o,s,l){"use strict";function r(t){e.each(t,function(t){e.each(t,function(t,i){var n=a[i];if(!n)throw new Error("Invalid target toolbar: "+i);e.each(t,function(e){e=new o(e),n.addItem(e)})})})}var a={"inlineToolbar":new n({"other":[{"signature":"ChangeOwnerPermission","name":i.ToolbarItemChangeOwnerPermission,"iconName":"csui_action_change_owner32"},{"signature":"DeletePermission","name":i.ToolbarItemDeletePermission,"iconName":"csui_action_delete32"},{"signature":"EditPermission","name":i.ToolbarItemEditPermission,"iconName":"csui_action_edit32"},{"signature":"ApplyPermission","name":i.ToolbarItemApplyPermission,"iconName":"csui_action_share32"}]},{"maxItemsShown":t.isHybrid()?1:3,"dropDownText":i.ToolbarItemMore,"dropDownIconName":"csui_action_more32"})};if(s)if(console.warn('DEPRECATED: depend on the extension "csui-ext!csui/widgets/permissions/permissions.list/toolbaritems" instead.'),l){var c=l.concat(s);r(c)}else r(s);else l&&r(l);return a}),csui.define("csui/widgets/permissions/impl/permissions.list/toolbaritems.masks",["module","csui/lib/underscore","csui/controls/toolbar/toolitems.mask","csui/utils/toolitem.masks/global.toolitems.mask"],function(e,t,i,n){"use strict";function o(){var o=e.config(),l=new n;this.toolbars=t.reduce(s,function(e,n){var s=new i(l,{"normalize":!1});return t.each(o,function(e,t){(e=e[n])&&s.extendMask(e)}),s.storeMask(),e[n]=s,e},{})}var s=["inlineToolbar"];return o.toolbars=s,o}),csui.define("csui/widgets/permissions/impl/permissions.list/permission.table.columns",["csui/lib/underscore","csui/lib/backbone","csui/models/permission/permission.table.columns.model","i18n!csui/widgets/permissions/impl/nls/lang","csui-ext!csui/widgets/permissions/table.columns"],function(e,t,i,n,o){var s=t.Collection.extend({"model":i,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new s(this.map(function(e){return e.attributes}))}}),l=[{"key":"right_id","column_key":"right_id","column_name":n.right_id,"sequence":20,"permanentColumn":!0,"containsInlineActions":!0},{"key":"permissions","column_key":"permissions","column_name":n.permission_level,"sequence":40,"permanentColumn":!0},{"column_key":"addpermissions","key":"addpermissions","name":"","sortable":!1,"alignment":"center","permanentColumn":!0,"isToolbar":!0,"sequence":999,"className":"csui-inlinetoolbar-touch"}];return o&&e.each(o,function(t){e.each(t,function(e,t){l.push(e)})}),new s(l)}),csui.define("hbs!csui/widgets/permissions/impl/permissions.content",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return'<div class="csui-add-permissions-content">\r\n  <div class="csui-add-permission"></div>\r\n  </div>\r\n'},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="cs-permissions-content-header">\r\n'+(null!=(s=l(i,"if").call(null!=t?t:e.nullContext||{},null!=t?l(t,"isToolbar"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":2,"column":0},"end":{"line":6,"column":9}}}))?s:"")+'  <div class="csui-permission-lookup-container"></div>\r\n</div>\r\n  <div class="csui-permissions-list-container"></div>\r\n  <div class="csui-permissions-empty-actions binf-hidden">\r\n    <div class="csui-addMember-container">\r\n      <span class="csui-icon add_user"></span>\r\n      <span class="csui-addMember"></span>\r\n    </div>\r\n    <div class="csui-grantAccess-container binf-hidden">\r\n      <span class="csui-icon icon_permmision_owner"></span>\r\n      <span class="csui-grantAccess"></span>\r\n    </div>\r\n  </div>'}});return i.registerPartial("csui_widgets_permissions_impl_permissions.content",n),n}),csui.define("hbs!csui/widgets/permissions/impl/permissions.list/permissions.empty",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<span>"+e.escapeExpression((s=null!=(s=l(i,"message")||(null!=t?l(t,"message"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"message","hash":{},"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":17}}}):s))+"</span>"}});return i.registerPartial("csui_widgets_permissions_impl_permissions.list_permissions.empty",n),n}),csui.define("csui/widgets/permissions/impl/permissions.content.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/log","csui/widgets/permissions/impl/permissions.lookup/permissions.lookup.view","csui/controls/table.list/table.list.view","csui/widgets/permissions/impl/permissions.list/permissions.dropdown.menu.items","csui/utils/commands","csui/utils/contexts/factories/member","csui/widgets/permissions/impl/permissions.list/toolbaritems","csui/widgets/permissions/impl/permissions.list/toolbaritems.masks","csui/widgets/permissions/impl/permissions.list/permission.table.columns","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/controls/progressblocker/blocker","csui/dialogs/members.picker/members.picker.wizard","i18n!csui/widgets/permissions/impl/nls/lang","hbs!csui/widgets/permissions/impl/permissions.content","hbs!csui/widgets/permissions/impl/permissions.list/permissions.empty","css!csui/widgets/permissions/impl/permissions"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v){"use strict";o=o(e.id);var w=n.ItemView.extend({"className":"csui-table-empty","template":v,"templateHelpers":function(){if(this.model.get("name")){return{"message":t.str.sformat(g.emptyPermissionListMsg,this.model.get("name"))}}},"constructor":function(e){n.ItemView.prototype.constructor.apply(this,arguments)}}),y=n.LayoutView.extend({"className":"cs-permissions-content","template":b,"templateHelpers":function(){return{"isToolbar":this.admin_permissions}},"regions":{"lookupRegion":".csui-permission-lookup-container","listRegion":".csui-permissions-list-container"},"ui":{"permissionList":".csui-permissions-list-container","emptyActionsContainer":".csui-permissions-empty-actions","addMemberToGroup":".csui-addMember","grantAccessToMember":".csui-grantAccess","addPermissionButton":".csui-add-permission","addPermissionToolitem":".csui-toolitem"},"events":{"click @ui.addMemberToGroup":"onClickAddMember","keydown @ui.addPermissionButton":"onKeyInView","keydown @ui.addPermissionToolitem":"onKeyInView"},"onClickAddMember":function(e){var n=this,o=i.Deferred(),s=n.options.originatingView,l=n.originalCollection&&n.originalCollection.models&&n.originalCollection.models.length>0?n.originalCollection.models:n.permissionCollection.models;l=t.filter(l,function(e){return e.get("right_id_expand")&&1===e.get("right_id_expand").type}),new f({"command":"adduserorgroup","context":s.context,"connector":s.model.connector,"dialogClass":"cs-permission-group-picker","displayName":g.allUsersAndGroups,"dialogTitle":g.addUsersAndGroups,"startLocation":"acl.groups","displayStartLocation":!0,"selectedMember":n.memberFilter,"showUserPicker":!0,"authUser":n.options.authUser,"hasEditPermissionAction":n.options.hasEditPermissionAction,"adduserorgroup":!0,"buttons":[{"id":"Add","label":g.addButtonLabel,"default":!0,"toolTip":g.addButtonTooltip},{"id":"Cancel","label":g.cancelButtonLabel,"disabled":!1,"close":!0,"toolTip":g.cancelButtonTooltip}],"nodeModel":s.model,"availablePermissions":n.options.collection.availablePermissions,"startLocations":["acl.groups"],"selectableMembers":l},n).show().done(function(){o.resolve.apply(o,arguments)}).fail(function(e){o.reject.apply(o,arguments)})},"constructor":function(e){e||(e={}),e.toolbarItems||(e.toolbarItems=u),e.toolbarItemsMasks||(e.toolbarItemsMasks=new d),this.options=e,n.LayoutView.prototype.constructor.call(this,e),m.imbue(this),this.memberFilter=this.options.context.getModel(c),this.memberFilter.set({"id":"","name":"","group_id":"","initials":"","photo_url":""}),this.collection=this.options.collection,this.listenTo(this.memberFilter,"change",function(){if(this.collection.isFetchable()){var e=this,i=this.options.hasEditPermissionAction&&"simple"!==this.model.get("permissions_model");if(e.edit_permissions=i,this.memberFilter.get("id")){this.originalCollection||(this.originalCollection=this.options.collection.clone()),this.options.filteredPermissions=!0;var n=t.filter(this.originalCollection.models,function(e){return e.get("right_id")===this.memberFilter.get("id")},this),o=t.filter(e.originalCollection.models,function(e){return e.get("right_id_expand")&&1===e.get("right_id_expand").type},this);if(this.collection.models=n,this.permissionsListView)this.collection.options.memberId=this.memberFilter.get("id"),this.collection.options.selectedMember=this.memberFilter.get("selectedMember"),this.collection.options.effectivePermissions=this.memberFilter.get("effectivePermissions"),this.collection.options.clearEmptyPermissionModel=!0,this.collection.fetch().then(function(i){if(e.collection.options.effectivePermissions=!1,e.collection.options.selectedMember=void 0,e.collection.models&&0===e.collection.models.length&&e.edit_permissions&&(e.ui.permissionList.addClass("empty-permission-list"),o.length>0)){e.ui.emptyActionsContainer.removeClass("binf-hidden");var n=t.str.sformat(g.addMemberToGroup,e.memberFilter.get("name")),s=t.str.sformat(g.grantAccessToMember,e.memberFilter.get("name"));e.ui.addMemberToGroup.text(n),e.ui.grantAccessToMember.text(s),e.ui.addMemberToGroup.attr("title",n),e.ui.grantAccessToMember.attr("title",s)}},this);else if(this.model.set("isNotFound",!0),this.collection.options.memberId=this.memberFilter.get("id"),this.collection.fetch(),i&&(this.ui.permissionList.addClass("empty-permission-list"),o.length>0)){this.ui.emptyActionsContainer.removeClass("binf-hidden");var s=t.str.sformat(g.addMemberToGroup,this.memberFilter.get("name")),l=t.str.sformat(g.grantAccessToMember,this.memberFilter.get("name"));this.ui.addMemberToGroup.text(s),this.ui.grantAccessToMember.text(l),this.ui.addMemberToGroup.attr("title",s),this.ui.grantAccessToMember.attr("title",l)}}else this.ui.emptyActionsContainer.addClass("binf-hidden"),this.ui.permissionList.removeClass("empty-permission-list"),this.model.set("isNotFound",!1),this.options.filteredPermissions=!1,this.originalCollection=void 0,this.collection.options.memberId=this.memberFilter.get("id"),this.collection.fetch()}}),this.permissionsLookupView=new s(t.extend({"originatingView":this.options.originatingView,"userPickerModel":this.memberFilter},this.options)),this.admin_permissions=this.model&&this.model.actions.get({"signature":"editpermissions"}),this.columnCollection=h.clone(),this.updateColumnsCollection(),this.permissionsListView=new l(t.extend({"originatingView":this.options.originatingView,"context":this.options.context,"memberFilter":this.memberFilter,"toolbarItems":this.options.toolbarItems,"toolbarItemsMasks":this.options.toolbarItemsMasks,"collection":this.collection,"tableColumns":this.columnCollection,"emptyView":w,"emptyViewModel":this.memberFilter,"applyTo":this.options.applyTo,"admin_permissions":this.admin_permissions,"authUser":this.options.authUser,"hasPermissionAction":this.options.hasPermissionAction},this.options)),this._isCollectionEditable()&&this.listenTo(this.permissionsListView,"render",this.createPermissionDropDown),this.listenTo(this,"update:editpermissions:acitons",this._updatePermissionTable),this.listenTo(this.permissionsListView,"render",this._resizePermissionTable),this.listenTo(this.permissionsListView,"scroll",this._handleScroll),this.listenTo(this.permissionsListView,"resizetable",this._resizePermissionTable),this.listenTo(this.permissionsLookupView,"close:addmenu",this.closeAddMenu),this.propagateEventsToViews(this.permissionsLookupView,this.permissionsListView)},"updateColumnsCollection":function(){var e;e=this.options.hasPermissionAction&&this.admin_permissions?h.models:h.filter(function(e){return!e.attributes.isToolbar}),this.columnCollection.set(e,{"remove":!0})},"_updatePermissionTable":function(){this._isCollectionEditable()||(this.ui.addPermissionButton.addClass("binf-hidden"),this.permissionsListView.$el.find(".csui-add-owner-or-group .csui-user-display-name").text(g.NoOwnerAssigned),this.permissionsListView.options.admin_permissions=this.admin_permissions,this.permissionsListView.render())},"_resizePermissionTable":function(e){var t=this.$el.find(".csui-table-body");t&&(t.parents(".csui-table-list").hasClass("csui-table-list-no-scrollable")&&t.parents(".csui-table-list").removeClass("csui-table-list-no-scrollable"),t.height()>t.parent().height()?t.parents(".csui-table-list").removeClass("csui-table-list-no-scrollable"):t.parents(".csui-table-list").addClass("csui-table-list-no-scrollable"))},"_isCollectionEditable":function(){return this.model&&this.model.actions.get({"signature":"editpermissions"})},"showAddPermissionDropDown":function(e){"true"!==e.target.getAttribute("aria-expanded")&&this.createMenuItems(e)},"createPermissionDropDown":function(){if(this._isCollectionEditable()){var e=this.ui.addPermissionButton.addClass("icon-toolbarAdd").addClass("binf-dropdown-toggle");e.attr({"data-binf-toggle":"dropdown","aria-expanded":"false","tabindex":"0","aria-label":g.AddUserOrGroup,"title":g.AddDropdownTitle,"role":"button"}),e.on("click",t.bind(this.showAddPermissionDropDown,this)),this.dropDownEl=e}},"onKeyInView":function(e){32!==e.keyCode&&13!==e.keyCode||(this.$(e.target).hasClass("csui-toolitem")?this.$(e.target).trigger("click"):this.ui.addPermissionButton.trigger("click"))},"closeAddMenu":function(){this.ui.addPermissionButton.parent().hasClass("binf-open")&&this.ui.addPermissionButton.parent().removeClass("binf-open")},"createMenuItems":function(e){var n,s,l,c,u=i(e.target).parent().addClass("binf-dropdown"),d=r.dropdownMenuList,h={};n=i('<ul class="binf-dropdown-menu" role="menu"></ul>'),this.options.filteredPermissions?(t.extend(this.originalCollection.options,this.collection.options),h.permissionCollection=this.originalCollection):h.permissionCollection=this.collection,h.admin_permissions=this.options.hasEditPermissionAction,h.nodeModel=this.model,h.authUser=this.options.authUser,d.collection.models.forEach(function(e){l=e.get("signature");var t=a.findWhere({"signature":l});h.toolItem=e,t&&"disabled"!==l&&function(){try{return t.enabled(h)}catch(e){return o.warn('Evaluating the command "{0}" failed.\n{1}',t.get("signature"),e.message)&&console.warn(o.last),!0}}()&&(t.set("startLocation",h.startLocation),s='<li data-csui-command="'+e.get("signature")+'"><a tabindex="-1" class="csui-toolitem">'+e.get("name")+"</a></li>",n.append(s))}),u.find("ul").remove(),u.append(n),c=this.ui.addPermissionButton.parent().find(".csui-toolitem"),c.on("click",t.bind(this.executeToolItemAction,this))},"executeToolItemAction":function(e){var i=this;this.commands=a;var n=e.target.parentElement.getAttribute("data-csui-command"),o=this.commands.findWhere({"signature":n}),s=this.options.hasEditPermissionAction,l={"startLocation":o.get("startLocation"),"context":this.options.context,"permissionCollection":this.collection,"originalCollection":this.originalCollection,"nodeModel":this.model,"originatingView":this,"connector":this.model.connector,"nodeId":this.model.get("id"),"admin_permissions":s,"applyTo":this.options.applyTo,"authUser":this.options.authUser};o&&o.enabled(l)&&(this._=t,o.execute(l).done(t.bind(function(e){if(i.permissionsLookupView.pickerView&&i.permissionsLookupView.pickerView.ui.searchclear.is(":visible")?i.permissionsLookupView.pickerView.ui.searchclear.trigger("click"):(this.collection.models.forEach(function(e){e.set("isAddNew",!1)}),e.set("isAddNew",!0),e.get("addOwnerGroup")?i.collection.addOwnerOrGroup(e,!0):e.get("publicAccess")?i.collection.addPublicAccess(e):i.collection.add(e)),i.originalCollection&&i.originalCollection.models){var t=this.collection.models.filter(function(e){for(var t in i.originalCollection.models)if(e.get("right_id")===i.originalCollection.models[t].get("right_id")&&e.get("type")===i.originalCollection.models[t].get("type")||null===e.get("type"))return!1;return!0});t.length>0&&"owner"===t[0].get("type")&&i.originalCollection.findWhere({"type":"owner"})&&i.originalCollection.remove(i.originalCollection.findWhere({"type":"owner"})),i.originalCollection.models.push(t[0])}},this)).always(function(){i.dropDownEl.trigger("focus")}))},"onRender":function(){this.lookupRegion.show(this.permissionsLookupView),this.listRegion.show(this.permissionsListView)},"onBeforeDestroy":function(){this.collection.options.memberId&&(delete this.collection.options.memberId,this.memberFilter.set({"id":"","group_id":"","name":""},{"silent":!0}))},"_blockActions":function(){var e=this.options.originatingView;e&&e.blockActions&&e.blockActions()},"_unblockActions":function(){var e=this.options.originatingView;e&&e.unblockActions&&e.unblockActions()},"_handleScroll":function(e){this.options.originatingView&&this.options.originatingView.trigger("scroll",e)}});return t.extend(y.prototype,p),y}),csui.define("csui/utils/contexts/factories/permission.list.factory",["require","module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/permission/nodeuserpermissions","csui/utils/commands","csui/utils/base"],function(e,t,i,n,o,s,l,r,a){return o.extend({"propertyPrefix":"nodeUserPermissions","constructor":function(e,r){o.prototype.constructor.apply(this,arguments);var a=this.options.nodeUserPermissions||{};if(!(a instanceof n.Collection)){var c=e.getObject(s,r),u=r.nodeUserPermissions.memberFilter,d=t.config();a=new l(a.models,i.extend({"connector":c,"query":u,"nodeId":this.options.model.get("id")},a.options,d.options,{"autofetch":!0,"autoreset":!0}))}this.property=a},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){this.property.fetch({"success":i.bind(this._onNodeUserPermissionsFetched,this,e),"error":i.bind(this._onNodeUserPermissionsFailed,this,e)})},"_onNodeUserPermissionsFetched":function(e){return!0},"_onNodeUserPermissionsFailed":function(e,t,i){var n=new a.RequestErrorMessage(i);csui.require(["csui/dialogs/modal.alert/modal.alert"],function(e){e.showError(n.toString())})}})}),csui.define("hbs!csui/widgets/permissions/impl/no.permissions",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="csui-no-permission">\r\n  '+e.escapeExpression((s=null!=(s=l(i,"messages")||(null!=t?l(t,"messages"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"messages","hash":{},"loc":{"start":{"line":2,"column":2},"end":{"line":2,"column":14}}}):s))+"\r\n</div>"}});return i.registerPartial("csui_widgets_permissions_impl_no.permissions",n),n}),csui.define("csui/widgets/permissions/permissions.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/models/node/node.model","csui/widgets/permissions/impl/permissions.content.view","csui/utils/contexts/factories/node","csui/utils/contexts/factories/user","csui/utils/contexts/factories/permission.list.factory","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/utils/nodesprites","csui/utils/command.error","csui/controls/progressblocker/blocker","csui/models/nodechildren","csui/dialogs/modal.alert/modal.alert","csui/utils/commands","csui/utils/contexts/factories/usernodepermission","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/utils/taskqueue","csui/utils/permissions/permissions.precheck","hbs!csui/widgets/permissions/impl/no.permissions","csui/utils/url","csui/utils/contexts/factories/server.info","csui/models/node.actions","i18n!csui/widgets/permissions/impl/nls/lang","css!csui/widgets/permissions/impl/permissions"],function(e,t,i,n,o,s,l,r,a,c,u,d,h,p,m,f,g,b,v,w,y,C,_,x,k,T){var V=e.config();t.defaults(V,{"parallelism":3});var S=n.ItemView.extend({"className":"cs-permissions","behaviors":{"TabablesBehavior":{"behaviorClass":v,"recursiveNavigation":!0,"containTabFocus":!0}},"isTabable":function(){return this.$("*[tabindex]").length>0},"currentlyFocusedElement":function(e){var t=this.$("*[tabindex]");return i(e&&e.shiftKey?t[t.length-1]:t[0])},"template":!1,"events":{"focusin .csui-permissions-user-picker":"onFocusInUserPicker"},"constructor":function(e){e||(e={}),e.data||(e.data={}),e.model||(e.model=e.context.getModel(r,{"attributes":e.data.id&&{"id":e.data.id},"temporary":!0})),this.options=e,this.context=e.context,this.user=e.authUser||e.context.getModel(a),this.options.authUser=this.user,n.ItemView.prototype.constructor.call(this,e),this.viewStateModel=this.context.viewStateModel,p.imbue(this),e.model.fetching?this.listenToOnce(e.model,"sync",this.init.bind(this,e)):this.init(e)},"init":function(e){var i=this;if(this.hasPermissionAction=e.model&&e.model.actions&&!!e.model.actions.get({"signature":"permissions"}),this.hasPermissionAction){this.options.model&&this.options.model.models&&this.options.model.models.length>0&&(this.options.model=this.options.model.models[0]),this.collection=this.options.collection=this.options.context.getCollection(c,this.options),this.collection.options.node=this.options.model,this.collection.extraMemberModels=[];var n=this.context.getObject(x,{"permanent":!0,"detached":!0});n.ensureFetched().done(t.bind(function(){var e=n.get("server")&&n.get("server").advanced_versioning;this.model.set("advancedVersioningEnabled",e,{"silent":!0}),this.model.actions.get("permissions")?i.collection.fetching?i.listenToOnce(i.collection,"sync",t.bind(i.onPermissionsRequestSuccess,i,i.options)):i.collection.fetch({"success":t.bind(i.onPermissionsRequestSuccess,i,i.options),"error":t.bind(i.onPermissionsRequestFailed,i,i.options)}):this.model.fetch({"error":t.bind(i.onPermissionsRequestFailed,i,i.options)}).done(t.bind(function(){i.collection.fetch({"success":t.bind(i.onPermissionsRequestSuccess,i,i.options),"error":t.bind(i.onPermissionsRequestFailed,i,i.options)})},this))},this)),this.listenTo(this,"permission:changed",function(i){var n=i.originatingView.model.get("id"),o=this.options.connector||i.connector||i.originatingView.options.connector||i.originatingView.collection.connector;new k(void 0,{"connector":o,"nodes":[n],"commands":["editpermissions"]}).fetch().then(t.bind(function(i){var n=t.map(i.results,function(e,t){return e.data.editpermissions});this.permissionsContentView.options.hasEditPermissionAction=n&&!!n[0],n=this.options.model&&this.options.model.actions&&this.options.model.actions.get({"signature":"editpermissions"}),!this.permissionsContentView.options.hasEditPermissionAction&&n&&e.model.actions.remove(n),this.permissionsContentView.trigger("update:editpermissions:acitons",this)},this)).fail(t.bind(function(e){this.permissionsContentView.options.hasEditPermissionAction=!1},this))}),this._blockActions(),this.listenTo(this,"permission:inlineaction:clicked",this._hidePopovers)}},"onRender":function(){if(!this.hasPermissionAction){var e=this.model.get("type_name")?this.model.get("type_name"):this.model.get("shortcutNode")&&this.model.get("shortcutNode").get("type_name"),n=i("<div />",{"class":"csui-no-permissions-container","html":C({"messages":t.str.sformat(T.noPermissionsAvailable,e)})});this.$el.html(n)}},"_hidePopovers":function(){if(this.$el.parents("body")&&this.$el.parents("body").find(".csui-edit-permission-popover-container .binf-popover")){var e=this.$el.parents("body").find(".csui-edit-permission-popover-container .binf-popover");e.data("binf.popover")&&e.binf_popover("destroy")}},"onFocusInUserPicker":function(e){var t=this.options.originatingView&&this.options.originatingView.$el.find(".csui-metadata-item-name-dropdown .binf-dropdown");!!t&&t.length&&t.hasClass("binf-open")&&t.removeClass("binf-open");var i=this.$el.find(".binf-popover.binf-in");i.data("binf.popover")&&i.binf_popover("destroy")},"onPermissionsRequestSuccess":function(e){this.permissionsContentView&&(this.cancelEventsToViewsPropagation(this.permissionsContentView),this.permissionsContentView.destroy());var i=t.filter(e.model&&e.model.actions.models,function(e){return"editpermissions"===e.id}),n=e.model.get("container");i.length>0&&"simple"!==this.model.get("permissions_model")&&n&&(e.applyTo={},e.model=this.model,e.connector=this.model.connector,y.fetchPermissionsPreCheck(e)),this.permissionsContentView=new l(t.defaults({"originatingView":this,"context":e.context,"collection":e.collection,"applyTo":e.applyTo,"authUser":this.user,"authenticatedUserPermissions":e.collection&&e.collection.options.authenticatedUserPermissions,"hasPermissionAction":this.hasPermissionAction,"hasEditPermissionAction":i.length>0},e)),this.propagateEventsToViews(this.permissionsContentView),this.renderContent(),this._unblockActions()},"onPermissionsRequestFailed":function(e,t,i){var n=new o.RequestErrorMessage(i);f.showError(n.toString()),this._unblockActions()},"renderContent":function(){var e=this.options.model.fetching;if(e)return e.done(t.bind(this.render,this));if(this.permissionsContentView){var i=this.permissionsContentView.render();n.triggerMethodOn(i,"before:show",i,this),this.$el.append(i.el),n.triggerMethodOn(i,"show",i,this),this.viewStateModel&&this.viewStateModel.setSessionViewState("permissions",!0)}},"onBeforeDestroy":function(){this.permissionsContentView&&(this.cancelEventsToViewsPropagation(this.permissionsContentView),this.permissionsContentView.destroy(),this.viewStateModel&&this.viewStateModel.setSessionViewState("permissions",!1))},"_closePermissions":function(){var e=this.options.model;1===e.get("type")&&e.original&&0===e.original.get("type")?this.trigger("permissions:close"):this.trigger("permissions:close:without:animation")},"_blockActions":function(){var e=this.options.originatingView&&this.options.originatingView.$el.is("visible")?this.options.originatingView:this;e&&e.blockActions&&e.blockActions()},"_unblockActions":function(){var e=this.options.originatingView&&this.options.originatingView.$el.is("visible")?this.options.originatingView:this;e&&e.unblockActions&&e.unblockActions()}});return t.extend(S.prototype,u),S}),csui.define("csui/widgets/permissions/impl/edit/permission.level.selector/permission.level.selector.view",["csui/widgets/permissions/edit/permission.level.selector/permission.level.selector.view"],function(e){"use strict";return console.warn('DEPRECATED: depend on the module "csui/widgets/permissions/edit/permission.level.selector/permission.level.selector.view" instead.'),e}),csui.define("csui/widgets/permissions/impl/edit/edit.permission.helper",["csui/utils/log","csui/widgets/permissions/edit/edit.permission.helper"],function(e,t){"use strict";return e.warn('DEPRECATED: depend on the module "csui/widgets/permissions/edit/edit.permission.helper" instead.'),t}),csui.define("csui/widgets/permissions/impl/edit/apply.permission/impl/header/apply.permission.header.view",["csui/widgets/permissions/edit/apply.permission/header/apply.permission.header.view"],function(e){"use strict";return console.warn('DEPRECATED: depend on the module "csui/widgets/permissions/edit/apply.permission/header/apply.permission.header.view" instead.'),e}),csui.define("hbs!csui/controls/version.control.dialog/impl/document.version.control",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="binf-row">\r\n  <div class="binf-col-sm-12 binf-control-label">\r\n    '+e.escapeExpression((s=null!=(s=l(i,"uploadDocument")||(null!=t?l(t,"uploadDocument"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"uploadDocument","hash":{},"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":22}}}):s))+'\r\n  </div>\r\n  <div class="binf-col-sm-12">\r\n    <label class="binf-radio-inline">\r\n      <input type="radio" name="versioncontrol" value="'+e.escapeExpression((s=null!=(s=l(i,"majorMinorVersion")||(null!=t?l(t,"majorMinorVersion"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"majorMinorVersion","hash":{},"loc":{"start":{"line":7,"column":55},"end":{"line":7,"column":76}}}):s))+"\" tabindex='0'\r\n             checked> "+e.escapeExpression((s=null!=(s=l(i,"majorMinorVersion")||(null!=t?l(t,"majorMinorVersion"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"majorMinorVersion","hash":{},"loc":{"start":{"line":8,"column":22},"end":{"line":8,"column":43}}}):s))+' </input>\r\n    </label>\r\n  </div>\r\n  <div class="binf-col-sm-12 csui-minor-example">'+e.escapeExpression((s=null!=(s=l(i,"majorMinorExample")||(null!=t?l(t,"majorMinorExample"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"majorMinorExample","hash":{},"loc":{"start":{"line":11,"column":49},"end":{"line":11,"column":70}}}):s))+'</div>\r\n  <div class="binf-col-sm-12">\r\n    <label class="binf-radio-inline">\r\n      <input type="radio" name="versioncontrol" value="'+e.escapeExpression((s=null!=(s=l(i,"majorVersion")||(null!=t?l(t,"majorVersion"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"majorVersion","hash":{},"loc":{"start":{"line":14,"column":55},"end":{"line":14,"column":71}}}):s))+"\"\r\n             tabindex='0'>"+e.escapeExpression((s=null!=(s=l(i,"majorVersion")||(null!=t?l(t,"majorVersion"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"majorVersion","hash":{},"loc":{"start":{"line":15,"column":26},"end":{"line":15,"column":42}}}):s))+'</input>\r\n    </label>\r\n  </div>\r\n  <div class="binf-col-sm-12 csui-minor-example">'+e.escapeExpression((s=null!=(s=l(i,"majorVersionExample")||(null!=t?l(t,"majorVersionExample"):t))?s:e.hooks.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{"name":"majorVersionExample","hash":{},"loc":{"start":{"line":18,"column":49},"end":{"line":18,"column":72}}}):s))+"</div>\r\n</div>"}});return i.registerPartial("csui_controls_version.control.dialog_impl_document.version.control",n),n}),csui.define("csui/controls/version.control.dialog/document.version.control.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","i18n!csui/controls/version.control.dialog/nls/lang","hbs!csui/controls/version.control.dialog/impl/document.version.control","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/version.control.dialog/behaviors/version.control.dialog.keyboard.navigation.behavior","css!csui/controls/version.control.dialog/impl/version.control.dialog"],function(e,t,i,n,o,s,l){"use strict";return i.ItemView.extend({"constructor":function(e){i.ItemView.prototype.constructor.apply(this,arguments)},"className":"csui-document-version-control-view","template":o,"behaviors":{"TabableRegion":{
"behaviorClass":s},"VersionControlDialogKeyboardNavigationBehavior":{"behaviorClass":l}},"templateHelpers":function(){return{"majorMinorVersion":n.majorAndMinorVersion,"majorVersion":n.majorVersion,"majorMinorExample":n.majorMinorExample,"majorVersionExample":n.majorVersionExample,"uploadDocument":n.uploadDocument}},"onAfterShow":function(){this.$el.find("*[tabindex]").prop("tabindex",0),this.keyboardBehavior.setFocusInView()},"onDomRefresh":function(){this.keyboardBehavior.refreshFocusEngage()},"currentlyFocusedElement":function(e){return this.keyboardBehavior.getCurrentlyFocusedElement(e)},"onLastTabElement":function(e,t){return this.keyboardBehavior.isOnLastTabElement(e,t)},"getValue":function(){return e.filter(document.querySelectorAll('input[name="versioncontrol"]'),function(e){return e.checked})[0].value===n.majorAndMinorVersion}})}),csui.define("hbs!csui/controls/version.control.dialog/impl/add.version.update",["module","hbs","nuc/lib/handlebars"],function(e,t,i){var n=i.template({"1":function(e,t,i,n,o){return" binf-hidden "},"compiler":[8,">= 4.3.0"],"main":function(e,t,i,n,o){var s,l,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<div class='binf-row'>\r\n  <div class=\"binf-col-sm-12 binf-control-label\">\r\n    "+e.escapeExpression((l=null!=(l=r(i,"selectVersionlabel")||(null!=t?r(t,"selectVersionlabel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"selectVersionlabel","hash":{},"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":26}}}):l))+'\r\n  </div>\r\n  <div class="binf-col-sm-12 csui-version-update">\r\n    <label class="binf-radio-inline">\r\n      <input type="radio" name="version" value="true" checked aria-label="'+e.escapeExpression((l=null!=(l=r(i,"minorVersionlabel")||(null!=t?r(t,"minorVersionlabel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"minorVersionlabel","hash":{},"loc":{"start":{"line":7,"column":74},"end":{"line":7,"column":95}}}):l))+'"> '+e.escapeExpression((l=null!=(l=r(i,"minorVersion")||(null!=t?r(t,"minorVersion"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"minorVersion","hash":{},"loc":{"start":{"line":7,"column":98},"end":{"line":7,"column":114}}}):l))+' </input>\r\n    </label>\r\n    <label class="binf-radio-inline">\r\n      <input type="radio" name="version" value="false" aria-label="'+e.escapeExpression((l=null!=(l=r(i,"majorVersionlabel")||(null!=t?r(t,"majorVersionlabel"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"majorVersionlabel","hash":{},"loc":{"start":{"line":10,"column":67},"end":{"line":10,"column":88}}}):l))+'"> '+e.escapeExpression((l=null!=(l=r(i,"majorVersion")||(null!=t?r(t,"majorVersion"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"majorVersion","hash":{},"loc":{"start":{"line":10,"column":91},"end":{"line":10,"column":107}}}):l))+' </input>\r\n    </label>\r\n  </div>\r\n  <div class="binf-col-sm-12 csui-version-reserve '+(null!=(s=r(i,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"isNotReserved"):t,{"name":"if","hash":{},"fn":e.program(1,o,0),"inverse":e.noop,"loc":{"start":{"line":13,"column":50},"end":{"line":13,"column":92}}}))?s:"")+'">\r\n    <label class="binf-checkbox-inline">\r\n      <input type="checkbox" name="reserve" checked aria-label="'+e.escapeExpression((l=null!=(l=r(i,"unreserve")||(null!=t?r(t,"unreserve"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"unreserve","hash":{},"loc":{"start":{"line":15,"column":64},"end":{"line":15,"column":77}}}):l))+'"> '+e.escapeExpression((l=null!=(l=r(i,"unreserve")||(null!=t?r(t,"unreserve"):t))?l:e.hooks.helperMissing,"function"==typeof l?l.call(null!=t?t:e.nullContext||{},{"name":"unreserve","hash":{},"loc":{"start":{"line":15,"column":80},"end":{"line":15,"column":93}}}):l))+"\r\n    </label>\r\n  </div>\r\n</div>\r\n\r\n"}});return i.registerPartial("csui_controls_version.control.dialog_impl_add.version.update",n),n}),csui.define("csui/controls/version.control.dialog/add.version.control.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","hbs!csui/controls/version.control.dialog/impl/add.version.update","i18n!csui/controls/version.control.dialog/nls/lang","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/version.control.dialog/behaviors/version.control.dialog.keyboard.navigation.behavior","css!csui/controls/version.control.dialog/impl/version.control.dialog"],function(e,t,i,n,o,s,l){"use strict";return i.ItemView.extend({"constructor":function(e){this.options=e||(e={}),this.fileName=e.fileName,this.latestMinor=e.latestVersion.get("version_number_major")+"."+(e.latestVersion.get("version_number_minor")+1),this.latestMajor=(e.latestVersion.get("version_number_major")+1).toFixed(1),this.reserved=e.reserved,i.ItemView.prototype.constructor.apply(this,arguments)},"className":"csui-add-version-update","template":n,"behaviors":{"TabableRegion":{"behaviorClass":s},"VersionControlDialogKeyboardNavigationBehavior":{"behaviorClass":l}},"templateHelpers":function(){var t=e.str.sformat(o.selectVersionlabel,this.fileName),i=e.str.sformat(o.majorVersionAria,this.latestMajor),n=e.str.sformat(o.minorVersionAria,this.latestMinor);return{"minorVersion":this.latestMinor,"majorVersion":this.latestMajor,"unreserve":o.unreserveDocument,"selectVersionlabel":t,"isNotReserved":!this.reserved,"majorVersionlabel":i,"minorVersionlabel":n}},"onAfterShow":function(){this.$el.find("*[tabindex]").prop("tabindex",0),this.keyboardBehavior.setFocusInView()},"onDomRefresh":function(){this.keyboardBehavior.refreshFocusEngage()},"currentlyFocusedElement":function(e){return this.keyboardBehavior.getCurrentlyFocusedElement(e)},"onLastTabElement":function(e,t){return this.keyboardBehavior.isOnLastTabElement(e,t)},"getValue":function(){return{"promoteToMajor":!document.querySelector('input[name="version"]').checked,"reserved":!(!this.reserved||!document.querySelector('input[name="reserve"]').checked)}}})}),csui.define("json!csui/widgets/nodestable/nodestable.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{title}}","description":"{{description}}","kind":"fullpage","schema":{"type":"object","properties":{"containerId":{"title":"{{containerIdTitle}}","description":"{{containerIdDescription}}","type":"integer"}}},"options":{"fields":{"containerId":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[-1]}}}}},"actions":[{"toolItems":"csui/widgets/nodestable/toolbaritems","toolItemMasks":"csui/widgets/nodestable/toolbaritems.masks","toolbars":[{"id":"tableHeaderToolbar","title":"{{tableHeaderToolbarTitle}}","description":"{{tableHeaderToolbarDescription}}"},{"id":"inlineActionbar","title":"{{inlineActionbarTitle}}","description":"{{inlineActionbarDescription}}"},{"id":"leftToolbar","title":"{{leftToolbarTitle}}","description":"{{leftToolbarDescription}}"},{"id":"rightToolbar","title":"{{rightToolbarTitle}}","description":"{{rightToolbarDescription}}"}]},{"toolItems":"csui/widgets/nodestable/headermenuitems","toolItemMasks":"csui/widgets/nodestable/headermenuitems.mask","toolbars":[{"id":"headerMenuToolbar","title":"{{headerMenuTitle}}","description":"{{headerMenuDescription}}"}]}]}),csui.define("csui/widgets/nodestable/impl/nls/nodestable.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/widgets/nodestable/impl/nls/root/nodestable.manifest",{"title":"Node Browsing Table","description":"Provides a tabular view on objects stored in a container.","containerIdTitle":"Container","containerIdDescription":"A container object to browse children of.","pageSizeTitle":"Default Page Size","pageSizeDescription":"The maximum object count to be displayed in the table body by default.","pageSizesTitle":"Available Page Sizes","pageSizesDescription":"A list of maximum displayed object counts in the table body to be chosen from.","leftToolbarTitle":"Left Header Toolbar","leftToolbarDescription":"Toolbar on the left side of the name of the currently opened container.","rightToolbarTitle":"Right Header Toolbar","rightToolbarDescription":"Toolbar on the right side of the name of the currently opened container.","tableHeaderToolbarTitle":"Table Header Toolbar","tableHeaderToolbarDescription":"Toolbar, which is activated in the table header, once a table row is selected.","inlineActionbarTitle":"Inline Action Bar","inlineActionbarDescription":"Toolbar, which is displayed inside a table row, when the mouse cursor is moving above it.","headerMenuTitle":"Container Context Menu","headerMenuDescription":"Context menu, which is displayed when clicking on the arrow on the right side of the name of the currently opened container.","viewStateTitle":"Support url parameters","viewStateDescription":"Save the widget state in the url parameters."}),csui.define("bundles/csui-browse",["csui/behaviors/item.name/item.name.behavior","csui/behaviors/table.rowselection.toolbar/table.rowselection.toolbar.behavior","csui/controls/conflict.resolver/impl/conflict.dialog/conflict.dialog","csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflicts.view","csui/controls/conflict.resolver/conflict.resolver","csui/controls/side.panel/side.panel.view","csui/controls/draganddrop/draganddrop.view","csui/controls/fileupload/fileupload","csui/controls/settings/settings.view","csui/controls/table/rows/description/search.description.view","csui/controls/fileupload/impl/addversion.controller","csui/controls/pagination/nodespagination.view","csui/controls/tableactionbar/tableactionbar.view","csui/controls/item.title/item.title.view","csui/controls/table/table.columns","csui/controls/table/table.view","csui/controls/table.list/table.list.view","csui/controls/table/inlineforms/inlineform.factory","csui/controls/tabletoolbar/tabletoolbar.view","csui/controls/table.configuration.toolbar/configuration.toolbar.dropdown.view","csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view","csui/controls/table/inlineforms/inlineform/inlineform.schemas","csui/controls/table/inlineforms/inlineform/impl/csui.inlineform.schemas","csui/controls/table/inlineforms/base/inline.edit.view","csui/controls/table/inlineforms/base/base.inline.form.view","csui/controls/table/inlineforms/base/views/textfield/textfield.view","csui/controls/table/inlineforms/base/views/selectfield/selectfield.view","csui/controls/table/inlineforms/base/views/textfield/multilingual.textfield.view","csui/controls/table/inlineforms/favorite/favorite.view","csui/controls/table/inlineforms/generic/generic.view","csui/controls/table/inlineforms/inlineform/inlineform.view","csui/controls/table/inlineforms/inlineform/impl/inlineform.view","csui/controls/table/inlineforms/inlineform.registry","csui/controls/table/inlineforms/permissions/user.picker/user.picker.view","csui/controls/table/inlineforms/folder/folder.view","csui/controls/table/cells/cell/cell.view","csui/controls/table/cells/celleditor/celleditor.view","csui/controls/table/cells/cell.factory","csui/controls/table/cells/cell.registry","csui/controls/table/cells/date/date.view","csui/controls/table/cells/datetime/datetime.view","csui/controls/table/cells/duedate/duedate.view","csui/controls/table/cells/favorite/favorite.view","csui/controls/table/cells/member/member.view","csui/controls/table/cells/name/name.view","csui/controls/table/cells/node.state/node.state.view","csui/controls/table/cells/parent/parent.view","csui/controls/table/cells/priority/priority.view","csui/controls/table/cells/reservation/reservation.view","csui/controls/table/cells/searchbox/searchbox.view","csui/controls/table/cells/select/select.view","csui/controls/table/cells/size/size.view","csui/controls/table/cells/status/status.view","csui/controls/table/cells/templated/templated.view","csui/controls/table/cells/text/text.view","csui/controls/table/cells/type.icon/type.icon.view","csui/controls/table/cells/user/user.view","csui/controls/table/cells/permission/permission.level.view","csui/controls/tree/tree.view","csui/controls/node.state/node.states.view","csui/controls/node.state/node.state.icons","csui/controls/node.state/impl/node.state.icons","csui/controls/table/rows/description/description.view","csui/controls/table/rows/metadata/metadatarow.view","csui/controls/thumbnail/thumbnail.view","csui/controls/thumbnail/thumbnail.content","csui/controls/thumbnail/content/content.registry","csui/controls/thumbnail/content/content.factory","csui/controls/thumbnail/content/favorite/favorite.view","csui/controls/thumbnail/content/name/name.view","csui/controls/thumbnail/content/member/member.view","csui/controls/thumbnail/content/thumbnail.icon/thumbnail.icon.view","csui/controls/thumbnail/content/overview/overview.view","csui/controls/thumbnail/content/select/select.view","csui/controls/thumbnail/content/size/size.view","csui/controls/thumbnail/content/date/date.view","csui/controls/thumbnail/content/node.state/node.state.view","csui/controls/thumbnail/content/node.state/impl/node.state.icons","csui/controls/thumbnail/content/node.state/impl/reservation/reservation.view","csui/controls/thumbnail/content/overview/overview.content","csui/controls/thumbnail/content/overview/properties.overview","csui/controls/thumbnail/content/thumbnail.icon/gallery.plugin.view","csui/controls/zipanddownload/impl/preflight.dialog/preflight.dialog.view","csui/controls/zipanddownload/impl/download.dialog/download.dialog.view","csui/controls/compound.document/dialog.view/create.release.revision.view","csui/controls/compound.document/reorganize/reorganize.view","csui/controls/compound.document/reorganize/reorganize.list.view","csui/controls/compound.document/reorganize/reorganize.item.view","csui/controls/about.box/about.box.view","csui/controls/wizard/wizard.view","csui/controls/wizard/step/footer.view","csui/controls/wizard/step/wizard.step.view","csui/dialogs/members.picker/members.picker.dialog","csui/dialogs/node.picker/node.picker","csui/dialogs/multilingual.text.picker/multilingual.text.picker","csui/dialogs/restructure/restructure.dialog","csui/dialogs/node.picker/impl/header/apply.properties.selector/apply.properties.selector.view","csui/controls/multilingual.text.picker/multilingual.text.picker","csui/dialogs/node.picker/start.locations/location.base.factory","csui/dialogs/node.picker/start.locations/node.base.factory","csui/dialogs/node.picker/start.locations/start.location.collection","csui/dialogs/node.picker/start.locations/current.location/current.location.factory","csui/dialogs/node.picker/start.locations/enterprise.volume/enterprise.volume.factory","csui/dialogs/node.picker/start.locations/favorites/favorites.factory","csui/dialogs/node.picker/start.locations/personal.volume/personal.volume.factory","csui/dialogs/node.picker/start.locations/category.volume/category.volume.factory","csui/dialogs/node.picker/start.locations/perspective.assets.volume/perspective.assets.volume.factory","csui/dialogs/node.picker/start.locations/recent.containers/recent.containers.factory","csui/dialogs/node.picker/start.locations/search.location/search.location.factory","csui/dialogs/node.picker/start.locations/default.location/default.location.factory","csui/dialogs/members.picker/members.picker.wizard","csui/dialogs/members.picker/start.locations/location.base.factory","csui/dialogs/members.picker/start.locations/start.location.collection","csui/dialogs/members.picker/start.locations/current.group/current.group.factory","csui/dialogs/members.picker/start.locations/all.members/all.members.factory","csui/dialogs/members.picker/start.locations/member.groups/member.groups.factory","csui/dialogs/members.picker/start.locations/recent.groups/recent.groups.factory","csui/dialogs/members.picker/start.locations/all.groups/all.groups.factory","csui/dialogs/members.picker/start.locations/acl.groups/acl.groups.factory","csui/dialogs/members.picker/start.locations/acl.groups/impl/acl.groups.collection","csui/models/permission/acl.group.server.adaptor.mixin","csui/integration/folderbrowser/folderbrowser.widget","csui/integration/folderbrowser2/folderbrowser2.widget","csui/integration/folderbrowser2/container.enforcer","csui/integration/target.picker/target.picker","csui/integration/v1.widgets.wrapper","csui/integration/permission.header/permission.header.view","csui/integration/permission/table/cells/security.permission.cell","csui/integration/permission/table/permission.table.columns","csui/integration/folderbrowser/impl/nodestable.toolitems","csui/lib/jquery.dataTables.bootstrap/js/dataTables.bootstrap","csui/lib/jquery.dataTables/js/jquery.dataTables","csui/lib/jquery.dataTables.tableTools/js/dataTables.tableTools","csui/widgets/search.results/impl/search.results.factory","css!csui/widgets/search.results/impl/search.results","csui/widgets/nodestable/nodestable.view","csui/utils/testutils/async.test.utils","csui/utils/toolitem.masks/children.toolitems.mask","csui/utils/toolitem.masks/creation.toolitems.mask","csui/widgets/favorites2.table/toolbaritems","csui/widgets/favorites2.table/toolbaritems.masks","csui/widgets/nodestable/headermenuitems","csui/widgets/nodestable/headermenuitems.mask","csui/widgets/nodestable/toolbaritems","csui/widgets/nodestable/toolbaritems.masks","csui/widgets/recentlyaccessedtable/toolbaritems","csui/widgets/recentlyaccessedtable/toolbaritems.masks","csui/widgets/favorites2.table/favorites2.table.view","csui/widgets/favorites/favorite.star.view","csui/widgets/myassignmentstable/myassignmentstable.view","csui/widgets/recentlyaccessedtable/recentlyaccessedtable.view","csui/widgets/search.results.table/search.results.table.view","csui/widgets/permissions/permissions.view","csui/widgets/permissions/impl/edit/permission.level.selector/permission.level.selector.view","csui/widgets/permissions/impl/edit/edit.permission.helper","csui/widgets/permissions/impl/permissions.list/toolbaritems","csui/widgets/permissions/impl/permissions.list/toolbaritems.masks","csui/widgets/permissions/impl/permissions.list/permissions.dropdown.menu.items","csui/widgets/permissions/impl/permissions.lookup/permissions.lookup.view","csui/widgets/permissions/edit/permission.level.selector/permission.level.selector.view","csui/widgets/permissions/edit/permission.attributes/permission.attributes.view","csui/widgets/permissions/edit/apply.permission/header/apply.permission.header.view","csui/widgets/permissions/impl/edit/apply.permission/impl/header/apply.permission.header.view","csui/widgets/permissions/edit/edit.permission.helper","i18n!csui/widgets/permissions/nls/lang","csui/controls/versionsettings/version.settings.view","csui/controls/version.control.dialog/version.control.dialog.view","csui/controls/version.control.dialog/document.version.control.view","csui/controls/version.control.dialog/add.version.control.view","csui/controls/version.control.dialog/disable.version.settings.view","json!csui/widgets/nodestable/nodestable.manifest.json","i18n!csui/widgets/nodestable/impl/nls/nodestable.manifest","csui/utils/dragndrop.supported.subtypes","csui/utils/permissions/permissions.precheck"],{}),csui.require(["require","css"],function(e,t){t.styleLoad(e,"csui/bundles/csui-browse",!0)});
//# sourceMappingURL=csui-browse.js.map