<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>AddHelloCommand Demo</title>

  
  <link rel="stylesheet" href="../../../../lib/src/csui/themes/carbonfiber/theme.css">
  <style>
    body.binf-widgets {
      /* Add nothing to the body height to be able to set the height
         of the nodestable widget to the full viewport height */
      margin: 0;
      padding: 0;
    }

    /* Set the nodestable widget height */
    #content {
      height: 100vh;
    }
  </style>

  
  <script src="../../../../lib/src/nuc/lib/require.js"></script>
  <script src="../../../../lib/src/csui/helpers.js"></script>
  <script src="../../../../lib/src/nuc/config.js" data-csui-path="../../../../lib/src/nuc"></script>
  <script src="../../../../lib/src/smart/config.js" data-csui-path="../../../../lib/src/smart"></script>
  
  <script>
     var csuiCallbacks = [],
        csuiBlocks = 0;

    window.blockCsui = function () {
      ++csuiBlocks;
    };

    window.unBlockCsui = function () {
      if (--csuiBlocks === 0) {
        while (csuiCallbacks.length) {
          csuiCallbacks.shift()();
          if (csuiBlocks > 0) {
            break;
          }
        }
      }
    };

    window.csuiDemo = function (callback) {
      if (csuiBlocks === 0) {
        callback();
      } else {
        csuiCallbacks.push(callback);
      }
    };

    window.blockCsui();
    // If there were a module 'greet' installed on the server,
    // this would be generated on the application page
    require.config({
        paths: {
            csui: '../../../../lib/src/csui',
            greet: '../../..'
        },
        config: {
            'i18n': {
                loadableLocales: {root: true}
            }
        },
        // reads the extensions configuration
        deps: [
          'csui/lib/require.config!./extension.json',
          'csui/lib/require.config!../../../../lib/src/nuc/nuc-extensions.json',
          'csui/lib/require.config!../../../../lib/src/smart/smart-extensions.json',
          'csui/lib/require.config!../../../../lib/src/csui/csui-extensions.json'
        ],
        callback: window.unBlockCsui
    });

    // If this were a page browsing a container,
    // this would be generated by the server
    window.csuiDemo(function () {
    require.config({
      config: {
        'csui/utils/contexts/factories/connector': {
          connection: {
            url: '//server/otcs/cs/api/v1',
            supportPath: '/support',
            session: {
              ticket: 'dummy'
            }
          }
        },
        // Start in the Enterprise Volume
        'csui/utils/contexts/factories/node': {
          attributes: {id: 2000}
        }
      }
    });
    require([
      // PageContext - manages data on a simple HTML page
      'csui/utils/contexts/page/page.context',
      // NodesTableView - renders a table browsing a container
      'csui/widgets/nodestable/nodestable.view',
      // GlobalMessage - shows non-modal status messages
      'csui/controls/globalmessage/globalmessage',
      // Marionette - provides plumbing for the framework
      'csui/lib/marionette',
      // mock - simulates server responses
      'add.hello.mock'
    ], function (PageContext, NodesTableView, GlobalMessage,
        Marionette, mock) {
      'use strict';

      var
          // Create the manager for data to be loaded from the server
          context = new PageContext(),
          // Create the children browsing table including its DOM placeholder
          contentRegion = new Marionette.Region({
            el: '#content'
          }),
          nodesTableView = new NodesTableView({
            context: context
          });

      // Set the rectangle to place the global message to
      GlobalMessage.setMessageRegionView(nodesTableView);
      // Enable mocked server calls
      mock.enable();
      // Show the children table
      contentRegion.show(nodesTableView);
      // Fetch the initial data from the server; the view will be
      // refreshed when the data are loaded
      context.fetch();

    });
  });
  </script>
</head>

<body class="binf-widgets">
<div class="binf-container-fluid binf-grid-rows">
  <div class="binf-row">
    <div id="content" class="binf-col-md-12 binf-row-xs-full"></div>
  </div>
</div>
</body>

</html>


<!-- Copyright (c) 2016-2017  OpenText Corp. All Rights Reserved. -->